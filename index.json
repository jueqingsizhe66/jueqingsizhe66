[{"authors":["admin"],"categories":null,"content":"Ye Zhaoliang is a Phd of Fluid Mechanical and engineering at the NCEPU fluid mechanical and blade design Lab. His research interests include wind generation techinique, computational fluid dynamics and programmable matter.\n","date":1554595200,"expirydate":-62135596800,"kind":"taxonomy","lang":"en","lastmod":1567641600,"objectID":"2525497d367e79493fd32b198b28f040","permalink":"/authors/admin/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/authors/admin/","section":"authors","summary":"Ye Zhaoliang is a Phd of Fluid Mechanical and engineering at the NCEPU fluid mechanical and blade design Lab. His research interests include wind generation techinique, computational fluid dynamics and programmable matter.","tags":null,"title":"Ye Zhaoliang","type":"authors"},{"authors":null,"categories":null,"content":" Flexibility This feature can be used for publishing content such as:\n Online courses Project or software documentation Tutorials  The courses folder may be renamed. For example, we can rename it to docs for software/project documentation or tutorials for creating an online course.\nDelete tutorials To remove these pages, delete the courses folder and see below to delete the associated menu link.\nUpdate site menu After renaming or deleting the courses folder, you may wish to update any [[main]] menu links to it by editing your menu configuration at config/_default/menus.toml.\nFor example, if you delete this folder, you can remove the following from your menu configuration:\n[[main]] name = \u0026quot;Courses\u0026quot; url = \u0026quot;courses/\u0026quot; weight = 50  Or, if you are creating a software documentation site, you can rename the courses folder to docs and update the associated Courses menu configuration to:\n[[main]] name = \u0026quot;Docs\u0026quot; url = \u0026quot;docs/\u0026quot; weight = 50  Update the docs menu If you use the docs layout, note that the name of the menu in the front matter should be in the form [menu.X] where X is the folder name. Hence, if you rename the courses/example/ folder, you should also rename the menu definitions in the front matter of files within courses/example/ from [menu.example] to [menu.\u0026lt;NewFolderName\u0026gt;].\n","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"59c3ce8e202293146a8a934d37a4070b","permalink":"/courses/example/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/courses/example/","section":"courses","summary":"Learn how to use Academic's docs layout for publishing online courses, software documentation, and tutorials.","tags":null,"title":"Overview","type":"docs"},{"authors":null,"categories":null,"content":" In this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nTip 1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\nTip 2 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1557010800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1557010800,"objectID":"74533bae41439377bd30f645c4677a27","permalink":"/courses/example/example1/","publishdate":"2019-05-05T00:00:00+01:00","relpermalink":"/courses/example/example1/","section":"courses","summary":"In this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nTip 1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim.","tags":null,"title":"Example Page 1","type":"docs"},{"authors":null,"categories":null,"content":" Here are some more tips for getting started with Academic:\nTip 3 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\nTip 4 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1557010800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1557010800,"objectID":"1c2b5a11257c768c90d5050637d77d6a","permalink":"/courses/example/example2/","publishdate":"2019-05-05T00:00:00+01:00","relpermalink":"/courses/example/example2/","section":"courses","summary":"Here are some more tips for getting started with Academic:\nTip 3 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus.","tags":null,"title":"Example Page 2","type":"docs"},{"authors":null,"categories":null,"content":"   --     å¶æ˜­è‰¯(Zhaoliang Ye) believe\u0026 è‚–æ¬£ç„¶(Xinran Xiao)  Our Life  QQ: 977962857@qq.com 36559660@qq.com  Weibo: zhaoturkkey@sina.com Our Work fortranç¨‹åºå‘˜,Javaç¨‹åºå‘˜,HR,CFD\nSome books and links Scheme: ã€Šthe little schemeã€‹(TLS) ã€ŠThe Season Schemeã€‹(TSS)  ã€Š Realm of Racketã€‹  ã€ŠThe Scheme Programming Languageã€‹(TSPL)   ã€ŠStructure and Interpretation of Computer Programsã€‹(SICP) SICP Solution Learning SICP ã€ŠEssentials of Programming Languageã€‹(EOPL) EOPL Course How to Design programs(ç¨‹åºè®¾è®¡æ–¹æ³• SICPçš„ç®€åŒ–ç‰ˆ) Simply Scheme(ä¸­å­¦çº§åˆ«) Schemeè¯­è¨€ç®€æ˜æ•™ç¨‹(æ±‰) Teach yourself Scheme in fixed days Scheme in programming(ä¸é”™çš„å…¥é—¨ä¹¦ç±)  Lisp:  ã€ŠLand of Lispã€‹ [Casting_spels]  ã€ŠPractical CommonLispã€‹ ã€ŠANSI_Common_lispã€‹   ã€ŠParadigms of Artificial Intelligence Programming(PAIP)ã€‹  Clojure:  ã€ŠPrcatical_clojureã€‹ ã€ŠThe joy of Clojureã€‹ ã€Šprogramming Clojureã€‹   Programming clojureå­¦ä¹ ç¬”è®°  Clojureå…¥é—¨æ•™ç¨‹: Clojure â€“ Functional Programming for the JVM   Clojure å“²å­¦   Haskell: Haskellè¶£å‘³æŒ‡å— Hashell:An advanced purely-functional programming language  Programming in Haskell Hashell Mit Course  Fortran: fortran90 John Burkardt  Alan-Miller Fortranæ”¶é›†  å·¥ç¨‹æ•°å€¼æ–¹æ³• fortran-gtk ã€ŠModern Fortran Explainedã€‹(é«˜çº§) ã€ŠFortran95~2003æ•°å€¼è®¡ç®—ã€‹(å®‹å¶å¿—)  Java: A little Java (visitor pattern) Mkyong-java8 how-to-do-in-java StackOverflowé—®é¢˜å †æ ˆ  BlogJava Java æ–°é—» å¹¶å‘ç¼–ç¨‹ç½‘ IT è§†è§’  IT è§†è§’ä¹‹javaç»¼åˆ(SSH)  IT è§†è§’ä¹‹rednaxelafx  æŠ€æœ¯å°é»‘å±‹  æŸå­¦å§  å’•å’š-handler  ios-è‡ªåª’ä½“  CSDN-éª†æ˜Šçš„æŠ€æœ¯ä¸“æ   Adrop è‡ªç•™åœ° Programcreek Java-Performance(JP) IBM Javaå¼€å‘è€…ç¤¾åŒº Aleksey ShipilÃ«v: One Stop Page  ç†ŠçŒ«å¤§ä»™ pixelstech åç«¯æŠ€æœ¯-java abianå¾·å›½Javaee Javaçº¯ç²¹(åŒˆç‰™åˆ©)  JAVAEEåè®®ä½œè€… (æ³•å›½)-å›¾æ–‡å¹¶èŒ‚  100ä¸ªå°é“¾æ¥   Java github repos:  awesome-javaä¸€äº›å¸¸ç”¨çš„åº“é“¾æ¥ codefollowers  JAVA API:  JAVAEE 7 API JAVASE 8 API Struts2core 2.5  Hibernate5.6  Springç³»åˆ—æ–‡æ¡£  Spring Framework   Bash: é¸Ÿå“¥çš„ç§æˆ¿èœ Bash 101 Hacks  Perl: Learning Perl(7th) 2016 å…¥é—¨  The Immediate Perl(2th) 2006 ä¸­çº§  Mastering Perl é«˜çº§ Perl Programming (4th) (Larry Wall)  Perl Object Orient Programming(perl oop)  Perl Best Practice(Domian Conway) 2006 ç»ˆæ Perl Object Orient Programming(by Kamran Husain)  ä¸€ç¯‡å†™å¾—ä¸é”™çš„perl intro Perl DBI  Perl DataBase Management  Perl CGI script  Writing Perl Module English:  ã€Šè‹±è¯­é­”æ³•ä¿±ä¹éƒ¨ã€‹ä¸€æœ¬ç›¸å½“ä¸é”™çš„è‹±è¯­è¯­æ³•ä¹¦ã€‚ é£æ ¼çš„è¦ç´ (Element of Style) è‹±è¯­å†™ä½œçš„åœ£ç» WeinBerg On Writing:The fieldstone method  æ”¶é›†WeinBerg Stones  æµä½“åŠ›å­¦ï¼š è®¡ç®—æµä½“åŠ›å­¦å…¥é—¨(å®‰å¾·æ£®) ç©ºæ°”åŠ¨åŠ›å­¦åŸºç¡€(å®‰å¾·æ£®)  è®¡ç®—æµä½“åŠ›å­¦ä¸ä¼ çƒ­å­¦(é™¶æ–‡é“¨) ä¸œå²³æµä½“ è‹å†›ä¼Ÿ-sina  æ•°å­¦: Gilbert Strang Professor å¾®ç§¯åˆ†ï¼Œçº¿æ€§ä»£æ•°ï¼Œå¾®åˆ†æ–¹ç¨‹  Richard Melrose æ³›å‡½åˆ†æ Dr Ivan F Wilde å¤åˆ†æ  Machine Learning:(é™ç»´å’Œä¼˜åŒ–) Support Vector Machine July SVMä¸‰å±‚å¢ƒç•Œ  July Vdisk  Jason Java Jacal LibSvm:  Vc-dimension å†…åŸºæ¢…éš†å¤§å­¦carnegie mellon university(CMU) Svm Tutorials SVR :å›å½’åˆ†æ æ–‡æœ¬åˆ†ç±»å’ŒSVM æ–¯å¦ç¦æœºå™¨è¯¾ç¨‹å­¦ä¹ ç¬”è®° æ–¯å¦ç¦å¤§å­¦çš„åŸå§‹è®²ä¹‰ MIT SVMè®²ä¹‰ SVMä¼˜åŒ– æœ€å°äºŒä¹˜æ³•åŠå…¶å®ç° ã€Šæ•°ç†ç»Ÿè®¡å­¦ç®€å²ã€‹é™ˆå¸Œå­ºé™¢å£«è‘—  ã€Šæœ€ä¼˜åŒ–ç†è®ºä¸ç®—æ³•ã€‹(ç¬¬2ç‰ˆ)ï¼é™ˆå®æ—  æ­£æ€åˆ†å¸ƒçš„å‰ä¸–ä»Šç”Ÿ Climing and Take a tourist\nContact Us Email:zhaoturkkey@163.com 36559660@qq.com    ","date":1503236332,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1503927712,"objectID":"6083a88ee3411b0d17ce02d738f69d47","permalink":"/about/","publishdate":"2017-08-20T21:38:52+08:00","relpermalink":"/about/","section":"","summary":"-- å¶æ˜­è‰¯(Zhaoliang Ye) believe\u0026 è‚–æ¬£ç„¶(Xinran Xiao) Our Life QQ: 977962857@qq.com 36559660@qq.com Weibo: zhaoturkkey@sina.com Our Work fortranç¨‹åºå‘˜,Javaç¨‹åºå‘˜,HR,CFD Some books and links Scheme: ã€Šthe","tags":null,"title":"About","type":"page"},{"authors":[],"categories":null,"content":" Click on the Slides button above to view the built-in slides feature.   Slides can be added in a few ways:\n Create slides using Academic\u0026rsquo;s Slides feature and link using slides parameter in the front matter of the talk file Upload an existing slide deck to static/ and link using url_slides parameter in the front matter of the talk file Embed your slides (e.g. Google Slides) or presentation video on this page using shortcodes.  Further talk details can easily be added to this page using Markdown and $\\rm \\LaTeX$ math code.\n","date":1906549200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1906549200,"objectID":"96344c08df50a1b693cc40432115cbe3","permalink":"/talk/example/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/talk/example/","section":"talk","summary":"An example talk using Academic's Markdown slides feature.","tags":[],"title":"Example Talk","type":"talk"},{"authors":null,"categories":["TestFunny"],"content":"åšå®¢ç›¸å…³\nè‹±æ–‡æµ‹è¯•\n","date":1571665645,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1571665645,"objectID":"2428ec7a948d62d1e37f65fbab8a7988","permalink":"/post/test/","publishdate":"2019-10-21T21:47:25+08:00","relpermalink":"/post/test/","section":"post","summary":"åšå®¢ç›¸å…³ è‹±æ–‡æµ‹è¯•","tags":["test","test2"],"title":"Test","type":"post"},{"authors":null,"categories":null,"content":"Academic is designed to give technical content creators a seamless experience. You can focus on the content and Academic handles the rest.\nHighlight your code snippets, take notes on math classes, and draw diagrams from textual representation.\nOn this page, you'll find some examples of the types of technical content that can be rendered with Academic.\nExamples Code Academic supports a Markdown extension for highlighting code syntax. You can enable this feature by toggling the highlight option in your config/_default/params.toml file.\n```python import pandas as pd data = pd.read_csv(\u0026quot;data.csv\u0026quot;) data.head() ```  renders as\nimport pandas as pd data = pd.read_csv(\u0026quot;data.csv\u0026quot;) data.head()  Math Academic supports a Markdown extension for $\\LaTeX$ math. You can enable this feature by toggling the math option in your config/_default/params.toml file and adding markup: mmark to your page front matter.\nTo render inline or block math, wrap your LaTeX math with $$...$$.\nExample math block:\n$$\\gamma_{n} = \\frac{ \\left | \\left (\\mathbf x_{n} - \\mathbf x_{n-1} \\right )^T \\left [\\nabla F (\\mathbf x_{n}) - \\nabla F (\\mathbf x_{n-1}) \\right ] \\right |} {\\left \\|\\nabla F(\\mathbf{x}_{n}) - \\nabla F(\\mathbf{x}_{n-1}) \\right \\|^2}$$  renders as\n\\[\\gamma_{n} = \\frac{ \\left | \\left (\\mathbf x_{n} - \\mathbf x_{n-1} \\right )^T \\left [\\nabla F (\\mathbf x_{n}) - \\nabla F (\\mathbf x_{n-1}) \\right ] \\right |}{\\left \\|\\nabla F(\\mathbf{x}_{n}) - \\nabla F(\\mathbf{x}_{n-1}) \\right \\|^2}\\]\nExample inline math $$\\left \\|\\nabla F(\\mathbf{x}_{n}) - \\nabla F(\\mathbf{x}_{n-1}) \\right \\|^2$$ renders as \\(\\left \\|\\nabla F(\\mathbf{x}_{n}) - \\nabla F(\\mathbf{x}_{n-1}) \\right \\|^2\\) .\nExample multi-line math using the \\\\ math linebreak:\n$$f(k;p_0^*) = \\begin{cases} p_0^* \u0026amp; \\text{if }k=1, \\\\ 1-p_0^* \u0026amp; \\text {if }k=0.\\end{cases}$$  renders as\n\\[f(k;p_0^*) = \\begin{cases} p_0^* \u0026 \\text{if }k=1, \\\\ 1-p_0^* \u0026 \\text {if }k=0.\\end{cases}\\]\nDiagrams Academic supports a Markdown extension for diagrams. You can enable this feature by toggling the diagram option in your config/_default/params.toml file or by adding diagram: true to your page front matter.\nAn example flowchart:\n```mermaid graph TD; A--\u0026gt;B; A--\u0026gt;C; B--\u0026gt;D; C--\u0026gt;D; ```  renders as\ngraph TD; A--\u0026gt;B; A--\u0026gt;C; B--\u0026gt;D; C--\u0026gt;D;  An example sequence diagram:\n```mermaid sequenceDiagram participant Alice participant Bob Alice-\u0026gt;John: Hello John, how are you? loop Healthcheck John-\u0026gt;John: Fight against hypochondria end Note right of John: Rational thoughts \u0026lt;br/\u0026gt;prevail... John--\u0026gt;Alice: Great! John-\u0026gt;Bob: How about you? Bob--\u0026gt;John: Jolly good! ```  renders as\nsequenceDiagram participant Alice participant Bob Alice-\u0026gt;John: Hello John, how are you? loop Healthcheck John-\u0026gt;John: Fight against hypochondria end Note right of John: Rational thoughts \u0026lt;br/\u0026gt;prevail... John--\u0026gt;Alice: Great! John-\u0026gt;Bob: How about you? Bob--\u0026gt;John: Jolly good!  An example Gantt diagram:\n```mermaid gantt dateFormat YYYY-MM-DD section Section A task :a1, 2014-01-01, 30d Another task :after a1 , 20d section Another Task in sec :2014-01-12 , 12d another task : 24d ```  renders as\ngantt dateFormat YYYY-MM-DD section Section A task :a1, 2014-01-01, 30d Another task :after a1 , 20d section Another Task in sec :2014-01-12 , 12d another task : 24d  Todo lists You can even write your todo lists in Academic too:\n- [x] Write math example - [x] Write diagram example - [ ] Do something else  renders as\n Write math example Write diagram example Do something else  Tables Represent your data in tables:\n| First Header | Second Header | | ------------- | ------------- | | Content Cell | Content Cell | | Content Cell | Content Cell |  renders as\n   First Header Second Header     Content Cell Content Cell   Content Cell Content Cell    Asides Academic supports a Markdown extension for asides, also referred to as notices or hints. By prefixing a paragraph with A\u0026gt;, it will render as an aside. You can enable this feature by adding markup: mmark to your page front matter, or alternatively using the Alert shortcode.\nA\u0026gt; A Markdown aside is useful for displaying notices, hints, or definitions to your readers.  renders as\n A Markdown aside is useful for displaying notices, hints, or definitions to your readers.\n Did you find this page helpful? Consider sharing it ğŸ™Œ ","date":1562889600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1562889600,"objectID":"07e02bccc368a192a0c76c44918396c3","permalink":"/post/writing-technical-content/","publishdate":"2019-07-12T00:00:00Z","relpermalink":"/post/writing-technical-content/","section":"post","summary":"Academic is designed to give technical content creators a seamless experience. You can focus on the content and Academic handles the rest.\nHighlight your code snippets, take notes on math classes, and draw diagrams from textual representation.\nOn this page, you'll find some examples of the types of technical content that can be rendered with Academic.\nExamples Code Academic supports a Markdown extension for highlighting code syntax. You can enable this feature by toggling the highlight option in your config/_default/params.","tags":null,"title":"Writing technical content in Academic","type":"post"},{"authors":["Ye Zhaoliang"],"categories":null,"content":" Click the Slides button above to demo Academic\u0026rsquo;s Markdown slides feature.   Supplementary notes can be added here, including code and math.\n","date":1554595200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1554595200,"objectID":"557dc08fd4b672a0c08e0a8cf0c9ff7d","permalink":"/publication/preprint/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/publication/preprint/","section":"publication","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":["Source Themes"],"title":"An example preprint / working paper","type":"publication"},{"authors":["Ye Zhaoliang"],"categories":[],"content":" from IPython.core.display import Image Image('https://www.python.org/static/community_logos/python-logo-master-v3-TM-flattened.png')  print(\u0026quot;Welcome to Academic!\u0026quot;)  Welcome to Academic!  Install Python and JupyterLab Install Anaconda which includes Python 3 and JupyterLab.\nAlternatively, install JupyterLab with pip3 install jupyterlab.\nCreate or upload a Jupyter notebook Run the following commands in your Terminal, substituting \u0026lt;MY-WEBSITE-FOLDER\u0026gt; and \u0026lt;SHORT-POST-TITLE\u0026gt; with the file path to your Academic website folder and a short title for your blog post (use hyphens instead of spaces), respectively:\nmkdir -p \u0026lt;MY-WEBSITE-FOLDER\u0026gt;/content/post/\u0026lt;SHORT-POST-TITLE\u0026gt;/ cd \u0026lt;MY-WEBSITE-FOLDER\u0026gt;/content/post/\u0026lt;SHORT-POST-TITLE\u0026gt;/ jupyter lab index.ipynb  The jupyter command above will launch the JupyterLab editor, allowing us to add Academic metadata and write the content.\nEdit your post metadata The first cell of your Jupter notebook will contain your post metadata (front matter).\nIn Jupter, choose Markdown as the type of the first cell and wrap your Academic metadata in three dashes, indicating that it is YAML front matter:\n--- title: My post's title date: 2019-09-01 # Put any other Academic metadata here... ---  Edit the metadata of your post, using the documentation as a guide to the available options.\nTo set a featured image, place an image named featured into your post\u0026rsquo;s folder.\nFor other tips, such as using math, see the guide on writing content with Academic.\nConvert notebook to Markdown jupyter nbconvert index.ipynb --to markdown --NbConvertApp.output_files_dir=.  Example This post was created with Jupyter. The orginal files can be found at https://github.com/gcushen/hugo-academic/tree/master/exampleSite/content/post/jupyter\n","date":1549324800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1567641600,"objectID":"6e929dc84ed3ef80467b02e64cd2ed64","permalink":"/post/jupyter/","publishdate":"2019-02-05T00:00:00Z","relpermalink":"/post/jupyter/","section":"post","summary":"Learn how to blog in Academic using Jupyter notebooks","tags":[],"title":"Display Jupyter Notebooks with Academic","type":"post"},{"authors":[],"categories":[],"content":" Welcome to Slides Academic\nFeatures  Efficiently write slides in Markdown 3-in-1: Create, Present, and Publish your slides Supports speaker notes Mobile friendly slides  Controls  Next: Right Arrow or Space Previous: Left Arrow Start: Home Finish: End Overview: Esc Speaker notes: S Fullscreen: F Zoom: Alt + Click PDF Export: E  Code Highlighting Inline code: variable\nCode block:\nporridge = \u0026quot;blueberry\u0026quot; if porridge == \u0026quot;blueberry\u0026quot;: print(\u0026quot;Eating...\u0026quot;)  Math In-line math: $x + y = z$\nBlock math:\n$$ f\\left( x \\right) = \\;\\frac{{2\\left( {x + 4} \\right)\\left( {x - 4} \\right)}}{{\\left( {x + 4} \\right)\\left( {x + 1} \\right)}} $$\nFragments Make content appear incrementally\n{{% fragment %}} One {{% /fragment %}} {{% fragment %}} **Two** {{% /fragment %}} {{% fragment %}} Three {{% /fragment %}}  Press Space to play!\nOne  Two  Three \nA fragment can accept two optional parameters:\n class: use a custom style (requires definition in custom CSS) weight: sets the order in which a fragment appears  Speaker Notes Add speaker notes to your presentation\n{{% speaker_note %}} - Only the speaker can read these notes - Press `S` key to view {{% /speaker_note %}}  Press the S key to view the speaker notes!\n Only the speaker can read these notes Press S key to view   Themes  black: Black background, white text, blue links (default) white: White background, black text, blue links league: Gray background, white text, blue links beige: Beige background, dark text, brown links sky: Blue background, thin dark text, blue links   night: Black background, thick white text, orange links serif: Cappuccino background, gray text, brown links simple: White background, black text, blue links solarized: Cream-colored background, dark green text, blue links  Custom Slide Customize the slide style and background\n{{\u0026lt; slide background-image=\u0026quot;/img/boards.jpg\u0026quot; \u0026gt;}} {{\u0026lt; slide background-color=\u0026quot;#0000FF\u0026quot; \u0026gt;}} {{\u0026lt; slide class=\u0026quot;my-style\u0026quot; \u0026gt;}}  Custom CSS Example Let\u0026rsquo;s make headers navy colored.\nCreate assets/css/reveal_custom.css with:\n.reveal section h1, .reveal section h2, .reveal section h3 { color: navy; }  Questions? Ask\nDocumentation\n","date":1549324800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1549324800,"objectID":"0e6de1a61aa83269ff13324f3167c1a9","permalink":"/slides/example/","publishdate":"2019-02-05T00:00:00Z","relpermalink":"/slides/example/","section":"slides","summary":"An introduction to using Academic's Slides feature.","tags":[],"title":"Slides","type":"slides"},{"authors":null,"categories":null,"content":"This post is hidden from the home page.\nBut you can see it in archives, rss or other pages.\n","date":1520502019,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1520517679,"objectID":"47de4be52c89b09a64e481ef5d5725db","permalink":"/post/hidden-post/","publishdate":"2018-03-08T17:40:19+08:00","relpermalink":"/post/hidden-post/","section":"post","summary":"This post is hidden from the home page.\n","tags":null,"title":"This is a hidden post.","type":"post"},{"authors":null,"categories":["English"],"content":" Introduction This tutorial will show you how to create a simple theme in Hugo. I assume that you are familiar with HTML, the bash command line, and that you are comfortable using Markdown to format content. I\u0026rsquo;ll explain how Hugo uses templates and how you can organize your templates to create a theme. I won\u0026rsquo;t cover using CSS to style your theme.\nWe\u0026rsquo;ll start with creating a new site with a very basic template. Then we\u0026rsquo;ll add in a few pages and posts. With small variations on that, you will be able to create many different types of web sites.\nIn this tutorial, commands that you enter will start with the \u0026ldquo;$\u0026rdquo; prompt. The output will follow. Lines that start with \u0026ldquo;#\u0026rdquo; are comments that I\u0026rsquo;ve added to explain a point. When I show updates to a file, the \u0026ldquo;:wq\u0026rdquo; on the last line means to save the file.\nHere\u0026rsquo;s an example:\n## this is a comment $ echo this is a command this is a command ## edit the file $vi foo.md +++ date = \u0026quot;2014-09-28\u0026quot; title = \u0026quot;creating a new theme\u0026quot; +++ bah and humbug :wq ## show it $ cat foo.md +++ date = \u0026quot;2014-09-28\u0026quot; title = \u0026quot;creating a new theme\u0026quot; +++ bah and humbug $  Some Definitions There are a few concepts that you need to understand before creating a theme.\nSkins Skins are the files responsible for the look and feel of your site. Itâ€™s the CSS that controls colors and fonts, itâ€™s the Javascript that determines actions and reactions. Itâ€™s also the rules that Hugo uses to transform your content into the HTML that the site will serve to visitors.\nYou have two ways to create a skin. The simplest way is to create it in the layouts/ directory. If you do, then you donâ€™t have to worry about configuring Hugo to recognize it. The first place that Hugo will look for rules and files is in the layouts/ directory so it will always find the skin.\nYour second choice is to create it in a sub-directory of the themes/ directory. If you do, then you must always tell Hugo where to search for the skin. Itâ€™s extra work, though, so why bother with it?\nThe difference between creating a skin in layouts/ and creating it in themes/ is very subtle. A skin in layouts/ canâ€™t be customized without updating the templates and static files that it is built from. A skin created in themes/, on the other hand, can be and that makes it easier for other people to use it.\nThe rest of this tutorial will call a skin created in the themes/ directory a theme.\nNote that you can use this tutorial to create a skin in the layouts/ directory if you wish to. The main difference will be that you wonâ€™t need to update the siteâ€™s configuration file to use a theme.\nThe Home Page The home page, or landing page, is the first page that many visitors to a site see. It is the index.html file in the root directory of the web site. Since Hugo writes files to the public/ directory, our home page is public/index.html.\nSite Configuration File When Hugo runs, it looks for a configuration file that contains settings that override default values for the entire site. The file can use TOML, YAML, or JSON. I prefer to use TOML for my configuration files. If you prefer to use JSON or YAML, youâ€™ll need to translate my examples. Youâ€™ll also need to change the name of the file since Hugo uses the extension to determine how to process it.\nHugo translates Markdown files into HTML. By default, Hugo expects to find Markdown files in your content/ directory and template files in your themes/ directory. It will create HTML files in your public/ directory. You can change this by specifying alternate locations in the configuration file.\nContent Content is stored in text files that contain two sections. The first section is the â€œfront matter,â€ which is the meta-information on the content. The second section contains Markdown that will be converted to HTML.\nFront Matter The front matter is information about the content. Like the configuration file, it can be written in TOML, YAML, or JSON. Unlike the configuration file, Hugo doesnâ€™t use the fileâ€™s extension to know the format. It looks for markers to signal the type. TOML is surrounded by â€œ+++â€, YAML by â€œ---â€, and JSON is enclosed in curly braces. I prefer to use TOML, so youâ€™ll need to translate my examples if you prefer YAML or JSON.\nThe information in the front matter is passed into the template before the content is rendered into HTML.\nMarkdown Content is written in Markdown which makes it easier to create the content. Hugo runs the content through a Markdown engine to create the HTML which will be written to the output file.\nTemplate Files Hugo uses template files to render content into HTML. Template files are a bridge between the content and presentation. Rules in the template define what content is published, where it\u0026rsquo;s published to, and how it will rendered to the HTML file. The template guides the presentation by specifying the style to use.\nThere are three types of templates: single, list, and partial. Each type takes a bit of content as input and transforms it based on the commands in the template.\nHugo uses its knowledge of the content to find the template file used to render the content. If it canâ€™t find a template that is an exact match for the content, it will shift up a level and search from there. It will continue to do so until it finds a matching template or runs out of templates to try. If it canâ€™t find a template, it will use the default template for the site.\nPlease note that you can use the front matter to influence Hugoâ€™s choice of templates.\nSingle Template A single template is used to render a single piece of content. For example, an article or post would be a single piece of content and use a single template.\nList Template A list template renders a group of related content. That could be a summary of recent postings or all articles in a category. List templates can contain multiple groups.\nThe homepage template is a special type of list template. Hugo assumes that the home page of your site will act as the portal for the rest of the content in the site.\nPartial Template A partial template is a template that can be included in other templates. Partial templates must be called using the â€œpartialâ€ template command. They are very handy for rolling up common behavior. For example, your site may have a banner that all pages use. Instead of copying the text of the banner into every single and list template, you could create a partial with the banner in it. That way if you decide to change the banner, you only have to change the partial template.\nCreate a New Site Let\u0026rsquo;s use Hugo to create a new web site. I\u0026rsquo;m a Mac user, so I\u0026rsquo;ll create mine in my home directory, in the Sites folder. If you\u0026rsquo;re using Linux, you might have to create the folder first.\nThe \u0026ldquo;new site\u0026rdquo; command will create a skeleton of a site. It will give you the basic directory structure and a useable configuration file.\n$ hugo new site ~/Sites/zafta $ cd ~/Sites/zafta $ ls -l total 8 drwxr-xr-x 7 quoha staff 238 Sep 29 16:49 . drwxr-xr-x 3 quoha staff 102 Sep 29 16:49 .. drwxr-xr-x 2 quoha staff 68 Sep 29 16:49 archetypes -rw-r--r-- 1 quoha staff 82 Sep 29 16:49 config.toml drwxr-xr-x 2 quoha staff 68 Sep 29 16:49 content drwxr-xr-x 2 quoha staff 68 Sep 29 16:49 layouts drwxr-xr-x 2 quoha staff 68 Sep 29 16:49 static $  Take a look in the content/ directory to confirm that it is empty.\nThe other directories (archetypes/, layouts/, and static/) are used when customizing a theme. That\u0026rsquo;s a topic for a different tutorial, so please ignore them for now.\nGenerate the HTML For the New Site Running the hugo command with no options will read all the available content and generate the HTML files. It will also copy all static files (that\u0026rsquo;s everything that\u0026rsquo;s not content). Since we have an empty site, it won\u0026rsquo;t do much, but it will do it very quickly.\n$ hugo --verbose INFO: 2014/09/29 Using config file: config.toml INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/static/ to /Users/quoha/Sites/zafta/public/ WARN: 2014/09/29 Unable to locate layout: [index.html _default/list.html _default/single.html] WARN: 2014/09/29 Unable to locate layout: [404.html] 0 draft content 0 future content 0 pages created 0 tags created 0 categories created in 2 ms $  The \u0026ldquo;--verbose\u0026rdquo; flag gives extra information that will be helpful when we build the template. Every line of the output that starts with \u0026ldquo;INFO:\u0026rdquo; or \u0026ldquo;WARN:\u0026rdquo; is present because we used that flag. The lines that start with \u0026ldquo;WARN:\u0026rdquo; are warning messages. We\u0026rsquo;ll go over them later.\nWe can verify that the command worked by looking at the directory again.\n$ ls -l total 8 drwxr-xr-x 2 quoha staff 68 Sep 29 16:49 archetypes -rw-r--r-- 1 quoha staff 82 Sep 29 16:49 config.toml drwxr-xr-x 2 quoha staff 68 Sep 29 16:49 content drwxr-xr-x 2 quoha staff 68 Sep 29 16:49 layouts drwxr-xr-x 4 quoha staff 136 Sep 29 17:02 public drwxr-xr-x 2 quoha staff 68 Sep 29 16:49 static $  See that new public/ directory? Hugo placed all generated content there. When you\u0026rsquo;re ready to publish your web site, that\u0026rsquo;s the place to start. For now, though, let\u0026rsquo;s just confirm that we have what we\u0026rsquo;d expect from a site with no content.\n$ ls -l public total 16 -rw-r--r-- 1 quoha staff 416 Sep 29 17:02 index.xml -rw-r--r-- 1 quoha staff 262 Sep 29 17:02 sitemap.xml $  Hugo created two XML files, which is standard, but there are no HTML files.\nTest the New Site Verify that you can run the built-in web server. It will dramatically shorten your development cycle if you do. Start it by running the \u0026ldquo;server\u0026rdquo; command. If it is successful, you will see output similar to the following:\n$ hugo server --verbose INFO: 2014/09/29 Using config file: /Users/quoha/Sites/zafta/config.toml INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/static/ to /Users/quoha/Sites/zafta/public/ WARN: 2014/09/29 Unable to locate layout: [index.html _default/list.html _default/single.html] WARN: 2014/09/29 Unable to locate layout: [404.html] 0 draft content 0 future content 0 pages created 0 tags created 0 categories created in 2 ms Serving pages from /Users/quoha/Sites/zafta/public Web Server is available at http://localhost:1313 Press Ctrl+C to stop  Connect to the listed URL (it\u0026rsquo;s on the line that starts with \u0026ldquo;Web Server\u0026rdquo;). If everything is working correctly, you should get a page that shows the following:\nindex.xml sitemap.xml  That\u0026rsquo;s a listing of your public/ directory. Hugo didn\u0026rsquo;t create a home page because our site has no content. When there\u0026rsquo;s no index.html file in a directory, the server lists the files in the directory, which is what you should see in your browser.\nLetâ€™s go back and look at those warnings again.\nWARN: 2014/09/29 Unable to locate layout: [index.html _default/list.html _default/single.html] WARN: 2014/09/29 Unable to locate layout: [404.html]  That second warning is easier to explain. We havenâ€™t created a template to be used to generate â€œpage not found errors.â€ The 404 message is a topic for a separate tutorial.\nNow for the first warning. It is for the home page. You can tell because the first layout that it looked for was â€œindex.html.â€ Thatâ€™s only used by the home page.\nI like that the verbose flag causes Hugo to list the files that it\u0026rsquo;s searching for. For the home page, they are index.html, _default/list.html, and _default/single.html. There are some rules that we\u0026rsquo;ll cover later that explain the names and paths. For now, just remember that Hugo couldn\u0026rsquo;t find a template for the home page and it told you so.\nAt this point, you\u0026rsquo;ve got a working installation and site that we can build upon. All thatâ€™s left is to add some content and a theme to display it.\nCreate a New Theme Hugo doesn\u0026rsquo;t ship with a default theme. There are a few available (I counted a dozen when I first installed Hugo) and Hugo comes with a command to create new themes.\nWe\u0026rsquo;re going to create a new theme called \u0026ldquo;zafta.\u0026rdquo; Since the goal of this tutorial is to show you how to fill out the files to pull in your content, the theme will not contain any CSS. In other words, ugly but functional.\nAll themes have opinions on content and layout. For example, Zafta uses \u0026ldquo;post\u0026rdquo; over \u0026ldquo;blog\u0026rdquo;. Strong opinions make for simpler templates but differing opinions make it tougher to use themes. When you build a theme, consider using the terms that other themes do.\nCreate a Skeleton Use the hugo \u0026ldquo;new\u0026rdquo; command to create the skeleton of a theme. This creates the directory structure and places empty files for you to fill out.\n$ hugo new theme zafta $ ls -l total 8 drwxr-xr-x 2 quoha staff 68 Sep 29 16:49 archetypes -rw-r--r-- 1 quoha staff 82 Sep 29 16:49 config.toml drwxr-xr-x 2 quoha staff 68 Sep 29 16:49 content drwxr-xr-x 2 quoha staff 68 Sep 29 16:49 layouts drwxr-xr-x 4 quoha staff 136 Sep 29 17:02 public drwxr-xr-x 2 quoha staff 68 Sep 29 16:49 static drwxr-xr-x 3 quoha staff 102 Sep 29 17:31 themes $ find themes -type f | xargs ls -l -rw-r--r-- 1 quoha staff 1081 Sep 29 17:31 themes/zafta/LICENSE.md -rw-r--r-- 1 quoha staff 0 Sep 29 17:31 themes/zafta/archetypes/default.md -rw-r--r-- 1 quoha staff 0 Sep 29 17:31 themes/zafta/layouts/_default/list.html -rw-r--r-- 1 quoha staff 0 Sep 29 17:31 themes/zafta/layouts/_default/single.html -rw-r--r-- 1 quoha staff 0 Sep 29 17:31 themes/zafta/layouts/index.html -rw-r--r-- 1 quoha staff 0 Sep 29 17:31 themes/zafta/layouts/partials/footer.html -rw-r--r-- 1 quoha staff 0 Sep 29 17:31 themes/zafta/layouts/partials/header.html -rw-r--r-- 1 quoha staff 93 Sep 29 17:31 themes/zafta/theme.toml $  The skeleton includes templates (the files ending in .html), license file, a description of your theme (the theme.toml file), and an empty archetype.\nPlease take a minute to fill out the theme.toml and LICENSE.md files. They\u0026rsquo;re optional, but if you\u0026rsquo;re going to be distributing your theme, it tells the world who to praise (or blame). It\u0026rsquo;s also nice to declare the license so that people will know how they can use the theme.\n$ vi themes/zafta/theme.toml author = \u0026quot;michael d henderson\u0026quot; description = \u0026quot;a minimal working template\u0026quot; license = \u0026quot;MIT\u0026quot; name = \u0026quot;zafta\u0026quot; source_repo = \u0026quot;\u0026quot; tags = [\u0026quot;tags\u0026quot;, \u0026quot;categories\u0026quot;] :wq ## also edit themes/zafta/LICENSE.md and change ## the bit that says \u0026quot;YOUR_NAME_HERE\u0026quot;  Note that the the skeleton\u0026rsquo;s template files are empty. Don\u0026rsquo;t worry, we\u0026rsquo;ll be changing that shortly.\n$ find themes/zafta -name '*.html' | xargs ls -l -rw-r--r-- 1 quoha staff 0 Sep 29 17:31 themes/zafta/layouts/_default/list.html -rw-r--r-- 1 quoha staff 0 Sep 29 17:31 themes/zafta/layouts/_default/single.html -rw-r--r-- 1 quoha staff 0 Sep 29 17:31 themes/zafta/layouts/index.html -rw-r--r-- 1 quoha staff 0 Sep 29 17:31 themes/zafta/layouts/partials/footer.html -rw-r--r-- 1 quoha staff 0 Sep 29 17:31 themes/zafta/layouts/partials/header.html $  Update the Configuration File to Use the Theme Now that we\u0026rsquo;ve got a theme to work with, it\u0026rsquo;s a good idea to add the theme name to the configuration file. This is optional, because you can always add \u0026ldquo;-t zafta\u0026rdquo; on all your commands. I like to put it the configuration file because I like shorter command lines. If you don\u0026rsquo;t put it in the configuration file or specify it on the command line, you won\u0026rsquo;t use the template that you\u0026rsquo;re expecting to.\nEdit the file to add the theme, add a title for the site, and specify that all of our content will use the TOML format.\n$ vi config.toml theme = \u0026quot;zafta\u0026quot; baseurl = \u0026quot;\u0026quot; languageCode = \u0026quot;en-us\u0026quot; title = \u0026quot;zafta - totally refreshing\u0026quot; MetaDataFormat = \u0026quot;toml\u0026quot; :wq $  Generate the Site Now that we have an empty theme, let\u0026rsquo;s generate the site again.\n$ hugo --verbose INFO: 2014/09/29 Using config file: /Users/quoha/Sites/zafta/config.toml INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/themes/zafta/static/ to /Users/quoha/Sites/zafta/public/ INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/static/ to /Users/quoha/Sites/zafta/public/ WARN: 2014/09/29 Unable to locate layout: [404.html theme/404.html] 0 draft content 0 future content 0 pages created 0 tags created 0 categories created in 2 ms $  Did you notice that the output is different? The warning message for the home page has disappeared and we have an additional information line saying that Hugo is syncing from the theme\u0026rsquo;s directory.\nLet\u0026rsquo;s check the public/ directory to see what Hugo\u0026rsquo;s created.\n$ ls -l public total 16 drwxr-xr-x 2 quoha staff 68 Sep 29 17:56 css -rw-r--r-- 1 quoha staff 0 Sep 29 17:56 index.html -rw-r--r-- 1 quoha staff 407 Sep 29 17:56 index.xml drwxr-xr-x 2 quoha staff 68 Sep 29 17:56 js -rw-r--r-- 1 quoha staff 243 Sep 29 17:56 sitemap.xml $  Notice four things:\n Hugo created a home page. This is the file public/index.html. Hugo created a css/ directory. Hugo created a js/ directory. Hugo claimed that it created 0 pages. It created a file and copied over static files, but didn\u0026rsquo;t create any pages. That\u0026rsquo;s because it considers a \u0026ldquo;page\u0026rdquo; to be a file created directly from a content file. It doesn\u0026rsquo;t count things like the index.html files that it creates automatically.  The Home Page Hugo supports many different types of templates. The home page is special because it gets its own type of template and its own template file. The file, layouts/index.html, is used to generate the HTML for the home page. The Hugo documentation says that this is the only required template, but that depends. Hugo\u0026rsquo;s warning message shows that it looks for three different templates:\nWARN: 2014/09/29 Unable to locate layout: [index.html _default/list.html _default/single.html]  If it can\u0026rsquo;t find any of these, it completely skips creating the home page. We noticed that when we built the site without having a theme installed.\nWhen Hugo created our theme, it created an empty home page template. Now, when we build the site, Hugo finds the template and uses it to generate the HTML for the home page. Since the template file is empty, the HTML file is empty, too. If the template had any rules in it, then Hugo would have used them to generate the home page.\n$ find . -name index.html | xargs ls -l -rw-r--r-- 1 quoha staff 0 Sep 29 20:21 ./public/index.html -rw-r--r-- 1 quoha staff 0 Sep 29 17:31 ./themes/zafta/layouts/index.html $  The Magic of Static Hugo does two things when generating the site. It uses templates to transform content into HTML and it copies static files into the site. Unlike content, static files are not transformed. They are copied exactly as they are.\nHugo assumes that your site will use both CSS and JavaScript, so it creates directories in your theme to hold them. Remember opinions? Well, Hugo\u0026rsquo;s opinion is that you\u0026rsquo;ll store your CSS in a directory named css/ and your JavaScript in a directory named js/. If you don\u0026rsquo;t like that, you can change the directory names in your theme directory or even delete them completely. Hugo\u0026rsquo;s nice enough to offer its opinion, then behave nicely if you disagree.\n$ find themes/zafta -type d | xargs ls -ld drwxr-xr-x 7 quoha staff 238 Sep 29 17:38 themes/zafta drwxr-xr-x 3 quoha staff 102 Sep 29 17:31 themes/zafta/archetypes drwxr-xr-x 5 quoha staff 170 Sep 29 17:31 themes/zafta/layouts drwxr-xr-x 4 quoha staff 136 Sep 29 17:31 themes/zafta/layouts/_default drwxr-xr-x 4 quoha staff 136 Sep 29 17:31 themes/zafta/layouts/partials drwxr-xr-x 4 quoha staff 136 Sep 29 17:31 themes/zafta/static drwxr-xr-x 2 quoha staff 68 Sep 29 17:31 themes/zafta/static/css drwxr-xr-x 2 quoha staff 68 Sep 29 17:31 themes/zafta/static/js $  The Theme Development Cycle When you\u0026rsquo;re working on a theme, you will make changes in the theme\u0026rsquo;s directory, rebuild the site, and check your changes in the browser. Hugo makes this very easy:\n Purge the public/ directory. Run the built in web server in watch mode. Open your site in a browser. Update the theme. Glance at your browser window to see changes. Return to step 4.  Iâ€™ll throw in one more opinion: never work on a theme on a live site. Always work on a copy of your site. Make changes to your theme, test them, then copy them up to your site. For added safety, use a tool like Git to keep a revision history of your content and your theme. Believe me when I say that it is too easy to lose both your mind and your changes.\nCheck the main Hugo site for information on using Git with Hugo.\nPurge the public/ Directory When generating the site, Hugo will create new files and update existing ones in the public/ directory. It will not delete files that are no longer used. For example, files that were created in the wrong directory or with the wrong title will remain. If you leave them, you might get confused by them later. I recommend cleaning out your site prior to generating it.\nNote: If you\u0026rsquo;re building on an SSD, you should ignore this. Churning on a SSD can be costly.\nHugo\u0026rsquo;s Watch Option Hugo\u0026rsquo;s \u0026ldquo;--watch\u0026rdquo; option will monitor the content/ and your theme directories for changes and rebuild the site automatically.\nLive Reload Hugo\u0026rsquo;s built in web server supports live reload. As pages are saved on the server, the browser is told to refresh the page. Usually, this happens faster than you can say, \u0026ldquo;Wow, that\u0026rsquo;s totally amazing.\u0026rdquo;\nDevelopment Commands Use the following commands as the basis for your workflow.\n## purge old files. hugo will recreate the public directory. ## $ rm -rf public ## ## run hugo in watch mode ## $ hugo server --watch --verbose  Here\u0026rsquo;s sample output showing Hugo detecting a change to the template for the home page. Once generated, the web browser automatically reloaded the page. I\u0026rsquo;ve said this before, it\u0026rsquo;s amazing.\n$ rm -rf public $ hugo server --watch --verbose INFO: 2014/09/29 Using config file: /Users/quoha/Sites/zafta/config.toml INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/themes/zafta/static/ to /Users/quoha/Sites/zafta/public/ INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/static/ to /Users/quoha/Sites/zafta/public/ WARN: 2014/09/29 Unable to locate layout: [404.html theme/404.html] 0 draft content 0 future content 0 pages created 0 tags created 0 categories created in 2 ms Watching for changes in /Users/quoha/Sites/zafta/content Serving pages from /Users/quoha/Sites/zafta/public Web Server is available at http://localhost:1313 Press Ctrl+C to stop INFO: 2014/09/29 File System Event: [\u0026quot;/Users/quoha/Sites/zafta/themes/zafta/layouts/index.html\u0026quot;: MODIFY|ATTRIB] Change detected, rebuilding site WARN: 2014/09/29 Unable to locate layout: [404.html theme/404.html] 0 draft content 0 future content 0 pages created 0 tags created 0 categories created in 1 ms  Update the Home Page Template The home page is one of a few special pages that Hugo creates automatically. As mentioned earlier, it looks for one of three files in the theme\u0026rsquo;s layout/ directory:\n index.html _default/list.html _default/single.html  We could update one of the default templates, but a good design decision is to update the most specific template available. That\u0026rsquo;s not a hard and fast rule (in fact, we\u0026rsquo;ll break it a few times in this tutorial), but it is a good generalization.\nMake a Static Home Page Right now, that page is empty because we don\u0026rsquo;t have any content and we don\u0026rsquo;t have any logic in the template. Let\u0026rsquo;s change that by adding some text to the template.\n$ vi themes/zafta/layouts/index.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;hugo says hello!\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; :wq $  Build the web site and then verify the results.\n$ hugo --verbose INFO: 2014/09/29 Using config file: /Users/quoha/Sites/zafta/config.toml INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/themes/zafta/static/ to /Users/quoha/Sites/zafta/public/ INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/static/ to /Users/quoha/Sites/zafta/public/ WARN: 2014/09/29 Unable to locate layout: [404.html theme/404.html] 0 draft content 0 future content 0 pages created 0 tags created 0 categories created in 2 ms $ find public -type f -name '*.html' | xargs ls -l -rw-r--r-- 1 quoha staff 78 Sep 29 21:26 public/index.html $ cat public/index.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;hugo says hello!\u0026lt;/p\u0026gt; \u0026lt;/html\u0026gt;  Live Reload Note: If you\u0026rsquo;re running the server with the --watch option, you\u0026rsquo;ll see different content in the file:\n$ cat public/index.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;hugo says hello!\u0026lt;/p\u0026gt; \u0026lt;script\u0026gt;document.write('\u0026lt;script src=\u0026quot;http://' + (location.host || 'localhost').split(':')[0] + ':1313/livereload.js?mindelay=10\u0026quot;\u0026gt;\u0026lt;/' + 'script\u0026gt;')\u0026lt;/script\u0026gt;\u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  When you use --watch, the Live Reload script is added by Hugo. Look for live reload in the documentation to see what it does and how to disable it.\nBuild a \u0026ldquo;Dynamic\u0026rdquo; Home Page \u0026ldquo;Dynamic home page?\u0026rdquo; Hugo\u0026rsquo;s a static web site generator, so this seems an odd thing to say. I mean let\u0026rsquo;s have the home page automatically reflect the content in the site every time Hugo builds it. We\u0026rsquo;ll use iteration in the template to do that.\nCreate New Posts Now that we have the home page generating static content, let\u0026rsquo;s add some content to the site. We\u0026rsquo;ll display these posts as a list on the home page and on their own page, too.\nHugo has a command to generate a skeleton post, just like it does for sites and themes.\n$ hugo --verbose new post/first.md INFO: 2014/09/29 Using config file: /Users/quoha/Sites/zafta/config.toml INFO: 2014/09/29 attempting to create post/first.md of post INFO: 2014/09/29 curpath: /Users/quoha/Sites/zafta/themes/zafta/archetypes/default.md ERROR: 2014/09/29 Unable to Cast \u0026lt;nil\u0026gt; to map[string]interface{} $  That wasn\u0026rsquo;t very nice, was it?\nThe \u0026ldquo;new\u0026rdquo; command uses an archetype to create the post file. Hugo created an empty default archetype file, but that causes an error when there\u0026rsquo;s a theme. For me, the workaround was to create an archetypes file specifically for the post type.\n$ vi themes/zafta/archetypes/post.md +++ Description = \u0026quot;\u0026quot; Tags = [] Categories = [] +++ :wq $ find themes/zafta/archetypes -type f | xargs ls -l -rw-r--r-- 1 quoha staff 0 Sep 29 21:53 themes/zafta/archetypes/default.md -rw-r--r-- 1 quoha staff 51 Sep 29 21:54 themes/zafta/archetypes/post.md $ hugo --verbose new post/first.md INFO: 2014/09/29 Using config file: /Users/quoha/Sites/zafta/config.toml INFO: 2014/09/29 attempting to create post/first.md of post INFO: 2014/09/29 curpath: /Users/quoha/Sites/zafta/themes/zafta/archetypes/post.md INFO: 2014/09/29 creating /Users/quoha/Sites/zafta/content/post/first.md /Users/quoha/Sites/zafta/content/post/first.md created $ hugo --verbose new post/second.md INFO: 2014/09/29 Using config file: /Users/quoha/Sites/zafta/config.toml INFO: 2014/09/29 attempting to create post/second.md of post INFO: 2014/09/29 curpath: /Users/quoha/Sites/zafta/themes/zafta/archetypes/post.md INFO: 2014/09/29 creating /Users/quoha/Sites/zafta/content/post/second.md /Users/quoha/Sites/zafta/content/post/second.md created $ ls -l content/post total 16 -rw-r--r-- 1 quoha staff 104 Sep 29 21:54 first.md -rw-r--r-- 1 quoha staff 105 Sep 29 21:57 second.md $ cat content/post/first.md +++ Categories = [] Description = \u0026quot;\u0026quot; Tags = [] date = \u0026quot;2014-09-29T21:54:53-05:00\u0026quot; title = \u0026quot;first\u0026quot; +++ my first post $ cat content/post/second.md +++ Categories = [] Description = \u0026quot;\u0026quot; Tags = [] date = \u0026quot;2014-09-29T21:57:09-05:00\u0026quot; title = \u0026quot;second\u0026quot; +++ my second post $  Build the web site and then verify the results.\n$ rm -rf public $ hugo --verbose INFO: 2014/09/29 Using config file: /Users/quoha/Sites/zafta/config.toml INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/themes/zafta/static/ to /Users/quoha/Sites/zafta/public/ INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/static/ to /Users/quoha/Sites/zafta/public/ INFO: 2014/09/29 found taxonomies: map[string]string{\u0026quot;category\u0026quot;:\u0026quot;categories\u0026quot;, \u0026quot;tag\u0026quot;:\u0026quot;tags\u0026quot;} WARN: 2014/09/29 Unable to locate layout: [404.html theme/404.html] 0 draft content 0 future content 2 pages created 0 tags created 0 categories created in 4 ms $  The output says that it created 2 pages. Those are our new posts:\n$ find public -type f -name '*.html' | xargs ls -l -rw-r--r-- 1 quoha staff 78 Sep 29 22:13 public/index.html -rw-r--r-- 1 quoha staff 0 Sep 29 22:13 public/post/first/index.html -rw-r--r-- 1 quoha staff 0 Sep 29 22:13 public/post/index.html -rw-r--r-- 1 quoha staff 0 Sep 29 22:13 public/post/second/index.html $  The new files are empty because because the templates used to generate the content are empty. The homepage doesn\u0026rsquo;t show the new content, either. We have to update the templates to add the posts.\nList and Single Templates In Hugo, we have three major kinds of templates. There\u0026rsquo;s the home page template that we updated previously. It is used only by the home page. We also have \u0026ldquo;single\u0026rdquo; templates which are used to generate output for a single content file. We also have \u0026ldquo;list\u0026rdquo; templates that are used to group multiple pieces of content before generating output.\nGenerally speaking, list templates are named \u0026ldquo;list.html\u0026rdquo; and single templates are named \u0026ldquo;single.html.\u0026rdquo;\nThere are three other types of templates: partials, content views, and terms. We will not go into much detail on these.\nAdd Content to the Homepage The home page will contain a list of posts. Let\u0026rsquo;s update its template to add the posts that we just created. The logic in the template will run every time we build the site.\n$ vi themes/zafta/layouts/index.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;body\u0026gt; {{ range first 10 .Data.Pages }} \u0026lt;h1\u0026gt;{{ .Title }}\u0026lt;/h1\u0026gt; {{ end }} \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; :wq $  Hugo uses the Go template engine. That engine scans the template files for commands which are enclosed between \u0026ldquo;{{\u0026rdquo; and \u0026ldquo;}}\u0026rdquo;. In our template, the commands are:\n range .Title end  The \u0026ldquo;range\u0026rdquo; command is an iterator. We\u0026rsquo;re going to use it to go through the first ten pages. Every HTML file that Hugo creates is treated as a page, so looping through the list of pages will look at every file that will be created.\nThe \u0026ldquo;.Title\u0026rdquo; command prints the value of the \u0026ldquo;title\u0026rdquo; variable. Hugo pulls it from the front matter in the Markdown file.\nThe \u0026ldquo;end\u0026rdquo; command signals the end of the range iterator. The engine loops back to the top of the iteration when it finds \u0026ldquo;end.\u0026rdquo; Everything between the \u0026ldquo;range\u0026rdquo; and \u0026ldquo;end\u0026rdquo; is evaluated every time the engine goes through the iteration. In this file, that would cause the title from the first ten pages to be output as heading level one.\nIt\u0026rsquo;s helpful to remember that some variables, like .Data, are created before any output files. Hugo loads every content file into the variable and then gives the template a chance to process before creating the HTML files.\nBuild the web site and then verify the results.\n$ rm -rf public $ hugo --verbose INFO: 2014/09/29 Using config file: /Users/quoha/Sites/zafta/config.toml INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/themes/zafta/static/ to /Users/quoha/Sites/zafta/public/ INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/static/ to /Users/quoha/Sites/zafta/public/ INFO: 2014/09/29 found taxonomies: map[string]string{\u0026quot;tag\u0026quot;:\u0026quot;tags\u0026quot;, \u0026quot;category\u0026quot;:\u0026quot;categories\u0026quot;} WARN: 2014/09/29 Unable to locate layout: [404.html theme/404.html] 0 draft content 0 future content 2 pages created 0 tags created 0 categories created in 4 ms $ find public -type f -name '*.html' | xargs ls -l -rw-r--r-- 1 quoha staff 94 Sep 29 22:23 public/index.html -rw-r--r-- 1 quoha staff 0 Sep 29 22:23 public/post/first/index.html -rw-r--r-- 1 quoha staff 0 Sep 29 22:23 public/post/index.html -rw-r--r-- 1 quoha staff 0 Sep 29 22:23 public/post/second/index.html $ cat public/index.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;second\u0026lt;/h1\u0026gt; \u0026lt;h1\u0026gt;first\u0026lt;/h1\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; $  Congratulations, the home page shows the title of the two posts. The posts themselves are still empty, but let\u0026rsquo;s take a moment to appreciate what we\u0026rsquo;ve done. Your template now generates output dynamically. Believe it or not, by inserting the range command inside of those curly braces, you\u0026rsquo;ve learned everything you need to know to build a theme. All that\u0026rsquo;s really left is understanding which template will be used to generate each content file and becoming familiar with the commands for the template engine.\nAnd, if that were entirely true, this tutorial would be much shorter. There are a few things to know that will make creating a new template much easier. Don\u0026rsquo;t worry, though, that\u0026rsquo;s all to come.\nAdd Content to the Posts We\u0026rsquo;re working with posts, which are in the content/post/ directory. That means that their section is \u0026ldquo;post\u0026rdquo; (and if we don\u0026rsquo;t do something weird, their type is also \u0026ldquo;post\u0026rdquo;).\nHugo uses the section and type to find the template file for every piece of content. Hugo will first look for a template file that matches the section or type name. If it can\u0026rsquo;t find one, then it will look in the _default/ directory. There are some twists that we\u0026rsquo;ll cover when we get to categories and tags, but for now we can assume that Hugo will try post/single.html, then _default/single.html.\nNow that we know the search rule, let\u0026rsquo;s see what we actually have available:\n$ find themes/zafta -name single.html | xargs ls -l -rw-r--r-- 1 quoha staff 132 Sep 29 17:31 themes/zafta/layouts/_default/single.html  We could create a new template, post/single.html, or change the default. Since we don\u0026rsquo;t know of any other content types, let\u0026rsquo;s start with updating the default.\nRemember, any content that we haven\u0026rsquo;t created a template for will end up using this template. That can be good or bad. Bad because I know that we\u0026rsquo;re going to be adding different types of content and we\u0026rsquo;re going to end up undoing some of the changes we\u0026rsquo;ve made. It\u0026rsquo;s good because we\u0026rsquo;ll be able to see immediate results. It\u0026rsquo;s also good to start here because we can start to build the basic layout for the site. As we add more content types, we\u0026rsquo;ll refactor this file and move logic around. Hugo makes that fairly painless, so we\u0026rsquo;ll accept the cost and proceed.\nPlease see the Hugo documentation on template rendering for all the details on determining which template to use. And, as the docs mention, if you\u0026rsquo;re building a single page application (SPA) web site, you can delete all of the other templates and work with just the default single page. That\u0026rsquo;s a refreshing amount of joy right there.\nUpdate the Template File $ vi themes/zafta/layouts/_default/single.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;{{ .Title }}\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;{{ .Title }}\u0026lt;/h1\u0026gt; {{ .Content }} \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; :wq $  Build the web site and verify the results.\n$ rm -rf public $ hugo --verbose INFO: 2014/09/29 Using config file: /Users/quoha/Sites/zafta/config.toml INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/themes/zafta/static/ to /Users/quoha/Sites/zafta/public/ INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/static/ to /Users/quoha/Sites/zafta/public/ INFO: 2014/09/29 found taxonomies: map[string]string{\u0026quot;tag\u0026quot;:\u0026quot;tags\u0026quot;, \u0026quot;category\u0026quot;:\u0026quot;categories\u0026quot;} WARN: 2014/09/29 Unable to locate layout: [404.html theme/404.html] 0 draft content 0 future content 2 pages created 0 tags created 0 categories created in 4 ms $ find public -type f -name '*.html' | xargs ls -l -rw-r--r-- 1 quoha staff 94 Sep 29 22:40 public/index.html -rw-r--r-- 1 quoha staff 125 Sep 29 22:40 public/post/first/index.html -rw-r--r-- 1 quoha staff 0 Sep 29 22:40 public/post/index.html -rw-r--r-- 1 quoha staff 128 Sep 29 22:40 public/post/second/index.html $ cat public/post/first/index.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;first\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;first\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt;my first post\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; $ cat public/post/second/index.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;second\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;second\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt;my second post\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; $  Notice that the posts now have content. You can go to localhost:1313/post/first to verify.\nLinking to Content The posts are on the home page. Let\u0026rsquo;s add a link from there to the post. Since this is the home page, we\u0026rsquo;ll update its template.\n$ vi themes/zafta/layouts/index.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;body\u0026gt; {{ range first 10 .Data.Pages }} \u0026lt;h1\u0026gt;\u0026lt;a href=\u0026quot;{{ .Permalink }}\u0026quot;\u0026gt;{{ .Title }}\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt; {{ end }} \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  Build the web site and verify the results.\n$ rm -rf public $ hugo --verbose INFO: 2014/09/29 Using config file: /Users/quoha/Sites/zafta/config.toml INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/themes/zafta/static/ to /Users/quoha/Sites/zafta/public/ INFO: 2014/09/29 syncing from /Users/quoha/Sites/zafta/static/ to /Users/quoha/Sites/zafta/public/ INFO: 2014/09/29 found taxonomies: map[string]string{\u0026quot;tag\u0026quot;:\u0026quot;tags\u0026quot;, \u0026quot;category\u0026quot;:\u0026quot;categories\u0026quot;} WARN: 2014/09/29 Unable to locate layout: [404.html theme/404.html] 0 draft content 0 future content 2 pages created 0 tags created 0 categories created in 4 ms $ find public -type f -name '*.html' | xargs ls -l -rw-r--r-- 1 quoha staff 149 Sep 29 22:44 public/index.html -rw-r--r-- 1 quoha staff 125 Sep 29 22:44 public/post/first/index.html -rw-r--r-- 1 quoha staff 0 Sep 29 22:44 public/post/index.html -rw-r--r-- 1 quoha staff 128 Sep 29 22:44 public/post/second/index.html $ cat public/index.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;\u0026lt;a href=\u0026quot;/post/second/\u0026quot;\u0026gt;second\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt; \u0026lt;h1\u0026gt;\u0026lt;a href=\u0026quot;/post/first/\u0026quot;\u0026gt;first\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; $  Create a Post Listing We have the posts displaying on the home page and on their own page. We also have a file public/post/index.html that is empty. Let\u0026rsquo;s make it show a list of all posts (not just the first ten).\nWe need to decide which template to update. This will be a listing, so it should be a list template. Let\u0026rsquo;s take a quick look and see which list templates are available.\n$ find themes/zafta -name list.html | xargs ls -l -rw-r--r-- 1 quoha staff 0 Sep 29 17:31 themes/zafta/layouts/_default/list.html  As with the single post, we have to decide to update _default/list.html or create post/list.html. We still don\u0026rsquo;t have multiple content types, so let\u0026rsquo;s stay consistent and update the default list template.\nCreating Top Level Pages Let\u0026rsquo;s add an \u0026ldquo;about\u0026rdquo; page and display it at the top level (as opposed to a sub-level like we did with posts).\nThe default in Hugo is to use the directory structure of the content/ directory to guide the location of the generated html in the public/ directory. Let\u0026rsquo;s verify that by creating an \u0026ldquo;about\u0026rdquo; page at the top level:\n$ vi content/about.md +++ title = \u0026quot;about\u0026quot; description = \u0026quot;about this site\u0026quot; date = \u0026quot;2014-09-27\u0026quot; slug = \u0026quot;about time\u0026quot; +++ ## about us i'm speechless :wq  Generate the web site and verify the results.\n$ find public -name '*.html' | xargs ls -l -rw-rw-r-- 1 mdhender staff 334 Sep 27 15:08 public/about-time/index.html -rw-rw-r-- 1 mdhender staff 527 Sep 27 15:08 public/index.html -rw-rw-r-- 1 mdhender staff 358 Sep 27 15:08 public/post/first-post/index.html -rw-rw-r-- 1 mdhender staff 0 Sep 27 15:08 public/post/index.html -rw-rw-r-- 1 mdhender staff 342 Sep 27 15:08 public/post/second-post/index.html  Notice that the page wasn\u0026rsquo;t created at the top level. It was created in a sub-directory named \u0026lsquo;about-time/\u0026rsquo;. That name came from our slug. Hugo will use the slug to name the generated content. It\u0026rsquo;s a reasonable default, by the way, but we can learn a few things by fighting it for this file.\nOne other thing. Take a look at the home page.\n$ cat public/index.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;\u0026lt;a href=\u0026quot;http://localhost:1313/post/theme/\u0026quot;\u0026gt;creating a new theme\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt; \u0026lt;h1\u0026gt;\u0026lt;a href=\u0026quot;http://localhost:1313/about-time/\u0026quot;\u0026gt;about\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt; \u0026lt;h1\u0026gt;\u0026lt;a href=\u0026quot;http://localhost:1313/post/second-post/\u0026quot;\u0026gt;second\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt; \u0026lt;h1\u0026gt;\u0026lt;a href=\u0026quot;http://localhost:1313/post/first-post/\u0026quot;\u0026gt;first\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt; \u0026lt;script\u0026gt;document.write('\u0026lt;script src=\u0026quot;http://' + (location.host || 'localhost').split(':')[0] + ':1313/livereload.js?mindelay=10\u0026quot;\u0026gt;\u0026lt;/' + 'script\u0026gt;')\u0026lt;/script\u0026gt;\u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  Notice that the \u0026ldquo;about\u0026rdquo; link is listed with the posts? That\u0026rsquo;s not desirable, so let\u0026rsquo;s change that first.\n$ vi themes/zafta/layouts/index.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;posts\u0026lt;/h1\u0026gt; {{ range first 10 .Data.Pages }} {{ if eq .Type \u0026quot;post\u0026quot;}} \u0026lt;h2\u0026gt;\u0026lt;a href=\u0026quot;{{ .Permalink }}\u0026quot;\u0026gt;{{ .Title }}\u0026lt;/a\u0026gt;\u0026lt;/h2\u0026gt; {{ end }} {{ end }} \u0026lt;h1\u0026gt;pages\u0026lt;/h1\u0026gt; {{ range .Data.Pages }} {{ if eq .Type \u0026quot;page\u0026quot; }} \u0026lt;h2\u0026gt;\u0026lt;a href=\u0026quot;{{ .Permalink }}\u0026quot;\u0026gt;{{ .Title }}\u0026lt;/a\u0026gt;\u0026lt;/h2\u0026gt; {{ end }} {{ end }} \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; :wq  Generate the web site and verify the results. The home page has two sections, posts and pages, and each section has the right set of headings and links in it.\nBut, that about page still renders to about-time/index.html.\n$ find public -name '*.html' | xargs ls -l -rw-rw-r-- 1 mdhender staff 334 Sep 27 15:33 public/about-time/index.html -rw-rw-r-- 1 mdhender staff 645 Sep 27 15:33 public/index.html -rw-rw-r-- 1 mdhender staff 358 Sep 27 15:33 public/post/first-post/index.html -rw-rw-r-- 1 mdhender staff 0 Sep 27 15:33 public/post/index.html -rw-rw-r-- 1 mdhender staff 342 Sep 27 15:33 public/post/second-post/index.html  Knowing that hugo is using the slug to generate the file name, the simplest solution is to change the slug. Let\u0026rsquo;s do it the hard way and change the permalink in the configuration file.\n$ vi config.toml [permalinks] page = \u0026quot;/:title/\u0026quot; about = \u0026quot;/:filename/\u0026quot;  Generate the web site and verify that this didn\u0026rsquo;t work. Hugo lets \u0026ldquo;slug\u0026rdquo; or \u0026ldquo;URL\u0026rdquo; override the permalinks setting in the configuration file. Go ahead and comment out the slug in content/about.md, then generate the web site to get it to be created in the right place.\nSharing Templates If you\u0026rsquo;ve been following along, you probably noticed that posts have titles in the browser and the home page doesn\u0026rsquo;t. That\u0026rsquo;s because we didn\u0026rsquo;t put the title in the home page\u0026rsquo;s template (layouts/index.html). That\u0026rsquo;s an easy thing to do, but let\u0026rsquo;s look at a different option.\nWe can put the common bits into a shared template that\u0026rsquo;s stored in the themes/zafta/layouts/partials/ directory.\nCreate the Header and Footer Partials In Hugo, a partial is a sugar-coated template. Normally a template reference has a path specified. Partials are different. Hugo searches for them along a TODO defined search path. This makes it easier for end-users to override the theme\u0026rsquo;s presentation.\n$ vi themes/zafta/layouts/partials/header.html \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;{{ .Title }}\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; :wq $ vi themes/zafta/layouts/partials/footer.html \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; :wq  Update the Home Page Template to Use the Partials The most noticeable difference between a template call and a partials call is the lack of path:\n{{ template \u0026quot;theme/partials/header.html\u0026quot; . }}  versus\n{{ partial \u0026quot;header.html\u0026quot; . }}  Both pass in the context.\nLet\u0026rsquo;s change the home page template to use these new partials.\n$ vi themes/zafta/layouts/index.html {{ partial \u0026quot;header.html\u0026quot; . }} \u0026lt;h1\u0026gt;posts\u0026lt;/h1\u0026gt; {{ range first 10 .Data.Pages }} {{ if eq .Type \u0026quot;post\u0026quot;}} \u0026lt;h2\u0026gt;\u0026lt;a href=\u0026quot;{{ .Permalink }}\u0026quot;\u0026gt;{{ .Title }}\u0026lt;/a\u0026gt;\u0026lt;/h2\u0026gt; {{ end }} {{ end }} \u0026lt;h1\u0026gt;pages\u0026lt;/h1\u0026gt; {{ range .Data.Pages }} {{ if or (eq .Type \u0026quot;page\u0026quot;) (eq .Type \u0026quot;about\u0026quot;) }} \u0026lt;h2\u0026gt;\u0026lt;a href=\u0026quot;{{ .Permalink }}\u0026quot;\u0026gt;{{ .Type }} - {{ .Title }} - {{ .RelPermalink }}\u0026lt;/a\u0026gt;\u0026lt;/h2\u0026gt; {{ end }} {{ end }} {{ partial \u0026quot;footer.html\u0026quot; . }} :wq  Generate the web site and verify the results. The title on the home page is now \u0026ldquo;your title here\u0026rdquo;, which comes from the \u0026ldquo;title\u0026rdquo; variable in the config.toml file.\nUpdate the Default Single Template to Use the Partials $ vi themes/zafta/layouts/_default/single.html {{ partial \u0026quot;header.html\u0026quot; . }} \u0026lt;h1\u0026gt;{{ .Title }}\u0026lt;/h1\u0026gt; {{ .Content }} {{ partial \u0026quot;footer.html\u0026quot; . }} :wq  Generate the web site and verify the results. The title on the posts and the about page should both reflect the value in the markdown file.\nAdd â€œDate Publishedâ€ to Posts It\u0026rsquo;s common to have posts display the date that they were written or published, so let\u0026rsquo;s add that. The front matter of our posts has a variable named \u0026ldquo;date.\u0026rdquo; It\u0026rsquo;s usually the date the content was created, but let\u0026rsquo;s pretend that\u0026rsquo;s the value we want to display.\nAdd â€œDate Publishedâ€ to the Template We\u0026rsquo;ll start by updating the template used to render the posts. The template code will look like:\n{{ .Date.Format \u0026quot;Mon, Jan 2, 2006\u0026quot; }}  Posts use the default single template, so we\u0026rsquo;ll change that file.\n$ vi themes/zafta/layouts/_default/single.html {{ partial \u0026quot;header.html\u0026quot; . }} \u0026lt;h1\u0026gt;{{ .Title }}\u0026lt;/h1\u0026gt; \u0026lt;h2\u0026gt;{{ .Date.Format \u0026quot;Mon, Jan 2, 2006\u0026quot; }}\u0026lt;/h2\u0026gt; {{ .Content }} {{ partial \u0026quot;footer.html\u0026quot; . }} :wq  Generate the web site and verify the results. The posts now have the date displayed in them. There\u0026rsquo;s a problem, though. The \u0026ldquo;about\u0026rdquo; page also has the date displayed.\nAs usual, there are a couple of ways to make the date display only on posts. We could do an \u0026ldquo;if\u0026rdquo; statement like we did on the home page. Another way would be to create a separate template for posts.\nThe \u0026ldquo;if\u0026rdquo; solution works for sites that have just a couple of content types. It aligns with the principle of \u0026ldquo;code for today,\u0026rdquo; too.\nLet\u0026rsquo;s assume, though, that we\u0026rsquo;ve made our site so complex that we feel we have to create a new template type. In Hugo-speak, we\u0026rsquo;re going to create a section template.\nLet\u0026rsquo;s restore the default single template before we forget.\n$ mkdir themes/zafta/layouts/post $ vi themes/zafta/layouts/_default/single.html {{ partial \u0026quot;header.html\u0026quot; . }} \u0026lt;h1\u0026gt;{{ .Title }}\u0026lt;/h1\u0026gt; {{ .Content }} {{ partial \u0026quot;footer.html\u0026quot; . }} :wq  Now we\u0026rsquo;ll update the post\u0026rsquo;s version of the single template. If you remember Hugo\u0026rsquo;s rules, the template engine will use this version over the default.\n$ vi themes/zafta/layouts/post/single.html {{ partial \u0026quot;header.html\u0026quot; . }} \u0026lt;h1\u0026gt;{{ .Title }}\u0026lt;/h1\u0026gt; \u0026lt;h2\u0026gt;{{ .Date.Format \u0026quot;Mon, Jan 2, 2006\u0026quot; }}\u0026lt;/h2\u0026gt; {{ .Content }} {{ partial \u0026quot;footer.html\u0026quot; . }} :wq  Note that we removed the date logic from the default template and put it in the post template. Generate the web site and verify the results. Posts have dates and the about page doesn\u0026rsquo;t.\nDon\u0026rsquo;t Repeat Yourself DRY is a good design goal and Hugo does a great job supporting it. Part of the art of a good template is knowing when to add a new template and when to update an existing one. While you\u0026rsquo;re figuring that out, accept that you\u0026rsquo;ll be doing some refactoring. Hugo makes that easy and fast, so it\u0026rsquo;s okay to delay splitting up a template.\n","date":1504165428,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1504165428,"objectID":"1772fa78629f1edb90a271275033d7f6","permalink":"/post/english-preview/","publishdate":"2017-08-31T15:43:48+08:00","relpermalink":"/post/english-preview/","section":"post","summary":"Introduction This tutorial will show you how to create a simple theme in Hugo. I assume that you are familiar with HTML, the bash command line, and that you are comfortable using Markdown to format content. I\u0026rsquo;ll explain how Hugo uses templates and how you can organize your templates to create a theme. I won\u0026rsquo;t cover using CSS to style your theme.\nWe\u0026rsquo;ll start with creating a new site with a very basic template.","tags":["preview","English","tag-2"],"title":"[English] Creating a New Theme","type":"post"},{"authors":null,"categories":["æ—¥æœ¬èª"],"content":"  æ—¥æœ¬èªã®æ•¬èªä½“ç³»ã¯ã€ä¸€èˆ¬ã«ã€å¤§ããå°Šæ•¬èªãƒ»è¬™è­²èªãƒ»ä¸å¯§èªã«åˆ†é¡ã•ã‚Œã‚‹ã€‚æ–‡åŒ–å¯©è­°ä¼šå›½èªåˆ†ç§‘ä¼šã¯ã€2007å¹´2æœˆã«ã€Œæ•¬èªã®æŒ‡é‡ã€ã‚’ç­”ç”³ã—ã€ã“ã‚Œã«ä¸é‡èªãŠã‚ˆã³ç¾åŒ–èªã‚’å«ã‚ãŸ5åˆ†é¡ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚\n å°Šæ•¬èª å°Šæ•¬èªã¯ã€å‹•ä½œã®ä¸»ä½“ã‚’é«˜ã‚ã‚‹ã“ã¨ã§ã€ä¸»ä½“ã¸ã®æ•¬æ„ã‚’è¡¨ã™è¨€ã„æ–¹ã§ã‚ã‚‹ã€‚å‹•è©ã«ã€ŒãŠï¼ˆã”ï¼‰ï½ã«ãªã‚‹ã€ã‚’ä»˜ã‘ãŸå½¢ã€ã¾ãŸã€åŠ©å‹•è©ã€Œï¼ˆã‚‰ï¼‰ã‚Œã‚‹ã€ã‚’ä»˜ã‘ãŸå½¢ãªã©ãŒç”¨ã„ã‚‰ã‚Œã‚‹ã€‚ãŸã¨ãˆã°ã€å‹•è©ã€Œå–ã‚‹ã€ã®å°Šæ•¬å½¢ã¨ã—ã¦ã€ã€Œï¼ˆå…ˆç”ŸãŒï¼‰ãŠå–ã‚Šã«ãªã‚‹ã€ã€Œï¼ˆå…ˆç”ŸãŒï¼‰å–ã‚‰ã‚Œã‚‹ã€ãªã©ãŒç”¨ã„ã‚‰ã‚Œã‚‹ã€‚\nèªã«ã‚ˆã£ã¦ã¯ã€ç‰¹å®šã®å°Šæ•¬èªãŒå¯¾å¿œã™ã‚‹ã‚‚ã®ã‚‚ã‚ã‚‹ã€‚ãŸã¨ãˆã°ã€ã€Œè¨€ã†ã€ã®å°Šæ•¬èªã¯ã€ŒãŠã£ã—ã‚ƒã‚‹ã€ã€ã€Œé£Ÿã¹ã‚‹ã€ã®å°Šæ•¬èªã¯ã€Œå¬ã—ä¸ŠãŒã‚‹ã€ã€ã€Œè¡Œããƒ»æ¥ã‚‹ãƒ»ã„ã‚‹ã€ã®å°Šæ•¬èªã¯ã€Œã„ã‚‰ã£ã—ã‚ƒã‚‹ã€ã§ã‚ã‚‹ã€‚\nè¬™è­²èª è¬™è­²èªã¯ã€å¤ä»£ã‹ã‚‰åŸºæœ¬çš„ã«å‹•ä½œã®å®¢ä½“ã¸ã®æ•¬æ„ã‚’è¡¨ã™è¨€ã„æ–¹ã§ã‚ã‚Šã€ç¾ä»£ã§ã¯ã€Œå‹•ä½œã®ä¸»ä½“ã‚’ä½ã‚ã‚‹ã€ã¨è§£é‡ˆã™ã‚‹ã»ã†ãŒã‚ˆã„å ´åˆãŒã‚ã‚‹ã€‚å‹•è©ã«ã€ŒãŠï½ã™ã‚‹ã€ã€ŒãŠï½ã„ãŸã—ã¾ã™ã€ï¼ˆè¬™è­²èªï¼‹ä¸å¯§èªï¼‰ã‚’ã¤ã‘ãŸå½¢ãªã©ãŒç”¨ã„ã‚‰ã‚Œã‚‹ã€‚ãŸã¨ãˆã°ã€ã€Œå–ã‚‹ã€ã®è¬™è­²å½¢ã¨ã—ã¦ã€ã€ŒãŠå–ã‚Šã™ã‚‹ã€ãªã©ãŒç”¨ã„ã‚‰ã‚Œã‚‹ã€‚\nèªã«ã‚ˆã£ã¦ã¯ã€ç‰¹å®šã®è¬™è­²èªãŒå¯¾å¿œã™ã‚‹ã‚‚ã®ã‚‚ã‚ã‚‹ã€‚ãŸã¨ãˆã°ã€ã€Œè¨€ã†ã€ã®è¬™è­²èªã¯ã€Œç”³ã—ä¸Šã’ã‚‹ã€ã€ã€Œé£Ÿã¹ã‚‹ã€ã®è¬™è­²èªã¯ã€Œã„ãŸã ãã€ã€ã€Œï¼ˆç›¸æ‰‹ã®æ‰€ã«ï¼‰è¡Œãã€ã®è¬™è­²èªã¯ã€Œä¼ºã†ã€ã€Œå‚ä¸Šã™ã‚‹ã€ã€Œã¾ã„ã‚‹ã€ã§ã‚ã‚‹ã€‚\nãªãŠã€ã€Œå¤œã‚‚æ›´ã‘ã¦ã¾ã„ã‚Šã¾ã—ãŸã€ã®ã€Œã¾ã„ã‚Šã€ãªã©ã€è¬™è­²è¡¨ç¾ã®ã‚ˆã†ã§ã‚ã‚ŠãªãŒã‚‰ã€èª°ã‹ã‚’ä½ã‚ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„è¡¨ç¾ãŒã‚ã‚‹ã€‚ã“ã‚Œã¯ã€ã€Œå¤œã‚‚æ›´ã‘ã¦ããŸã€ã¨ã„ã†è©±é¡Œã‚’ä¸é‡ã«è¡¨ç¾ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€èãæ‰‹ã¸ã®æ•¬æ„ã‚’è¡¨ã™ã‚‚ã®ã§ã‚ã‚‹ã€‚å®®åœ°è£•ã¯ã€ã“ã®è¡¨ç¾ã«ä½¿ã‚ã‚Œã‚‹èªã‚’ã€ç‰¹ã«ã€Œä¸é‡èªã€ã¨ç§°ã—ã¦ã„ã‚‹[104][105]ã€‚ä¸é‡èªã«ã¯ã»ã‹ã«ã€Œã„ãŸã—ï¼ˆãƒã‚¹ï¼‰ã€ã€Œç”³ã—ï¼ˆãƒã‚¹ï¼‰ã€ã€Œå­˜ã˜ï¼ˆãƒã‚¹ï¼‰ã€ã€Œå°ç”Ÿã€ã€Œå°ç¤¾ã€ã€Œå¼Šç¤¾ã€ãªã©ãŒã‚ã‚‹ã€‚æ–‡åŒ–å¯©è­°ä¼šã®ã€Œæ•¬èªã®æŒ‡é‡ã€ã§ã‚‚ã€ã€Œæ˜æ—¥ã‹ã‚‰æµ·å¤–ã¸ã¾ã„ã‚Šã¾ã™ã€ã®ã€Œã¾ã„ã‚Šã€ã®ã‚ˆã†ã«ã€ç›¸æ‰‹ã¨ã¯é–¢ã‚Šã®ãªã„è‡ªåˆ†å´ã®å‹•ä½œã‚’è¡¨ç¾ã™ã‚‹è¨€ã„æ–¹ã‚’ä¸é‡èªã¨ã—ã¦ã„ã‚‹ã€‚\nä¸å¯§èª ä¸å¯§èªã¯ã€æ–‡æœ«ã‚’ä¸å¯§ã«ã™ã‚‹ã“ã¨ã§ã€èãæ‰‹ã¸ã®æ•¬æ„ã‚’è¡¨ã™ã‚‚ã®ã§ã‚ã‚‹ã€‚å‹•è©ãƒ»å½¢å®¹è©ã®çµ‚æ­¢å½¢ã§çµ‚ã‚ã‚‹å¸¸ä½“ã«å¯¾ã—ã¦ã€åè©ãƒ»å½¢å®¹å‹•è©èªå¹¹ãªã©ã«ã€Œã§ã™ã€ã‚’ä»˜ã‘ãŸå½¢ï¼ˆã€Œå­¦ç”Ÿã§ã™ã€ã€Œãã‚Œã„ã§ã™ã€ï¼‰ã‚„ã€å‹•è©ã«ã€Œã¾ã™ã€ã‚’ã¤ã‘ãŸå½¢ï¼ˆã€Œè¡Œãã¾ã™ã€ã€Œåˆ†ã‹ã‚Šã¾ã—ãŸã€ï¼‰ç­‰ã®ä¸å¯§èªã‚’ç”¨ã„ãŸæ–‡ä½“ã‚’æ•¬ä½“ã¨ã„ã†ã€‚\nä¸€èˆ¬ã«ã€ç›®ä¸Šã®äººã«ã¯ä¸å¯§èªã‚’ç”¨ã„ã€åŒç­‰ãƒ»ç›®ä¸‹ã®äººã«ã¯ä¸å¯§èªã‚’ç”¨ã„ãªã„ã¨ã„ã‚ã‚Œã‚‹ã€‚ã—ã‹ã—ã€å®Ÿéš›ã®è¨€èªç”Ÿæ´»ã«ç…§ã‚‰ã—ã¦è€ƒãˆã‚Œã°ã€ã“ã‚Œã¯äº‹å®Ÿã§ã¯ãªã„ã€‚æ¯ãŒå­ã‚’å±ã‚‹ã¨ãã€ã€ŒãŠæ¯ã•ã‚“ã¯ã‚‚ã†çŸ¥ã‚Šã¾ã›ã‚“ã‚ˆã€ã¨ä¸å¯§èªã‚’ç”¨ã„ã‚‹å ´åˆã‚‚ã‚‚ã‚ã‚‹ã€‚ä¸å¯§èªãŒç”¨ã„ã‚‰ã‚Œã‚‹å¤šãã®å ´åˆã¯ã€æ•¬æ„ã‚„è¬æ„ã®è¡¨ç¾ã¨ã•ã‚Œã‚‹ãŒã€ã€ç¨€ã«ä¸€æ­©å¼•ã„ãŸå¿ƒç†çš„ãªè·é›¢ã‚’ã¨ã‚ã†ã¨ã™ã‚‹å ´åˆã‚‚ã‚ã‚‹ã€‚\nã€ŒãŠå¼å½“ã€ã€Œã”é£¯ã€ãªã©ã®ã€ŒãŠã€ã€Œã”ã€ã‚‚ã€åºƒã„æ„å‘³ã§ã¯ä¸å¯§èªã«å«ã¾ã‚Œã‚‹ãŒã€å®®åœ°è£•ã¯ç‰¹ã«ã€Œç¾åŒ–èªã€ã¨ç§°ã—ã¦åŒºåˆ¥ã™ã‚‹[104][105]ã€‚ç›¸æ‰‹ã¸ã®ä¸å¯§ã®æ„ã‚’ç¤ºã™ã¨ã„ã†ã‚ˆã‚Šã¯ã€è©±ã—æ‰‹ãŒè‡ªåˆ†ã®è¨€è‘‰é£ã„ã«é…æ…®ã—ãŸè¡¨ç¾ã§ã‚ã‚‹ã€‚ã—ãŸãŒã£ã¦ã€ã€ŒãŠå¼å½“é£Ÿã¹ã‚ˆã†ã‚ˆã€‚ã€ã®ã‚ˆã†ã«ã€ä¸å¯§ä½“ã§ãªã„æ–‡ã§ã‚‚ç¾åŒ–èªã‚’ç”¨ã„ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚æ–‡åŒ–å¯©è­°ä¼šã®ã€Œæ•¬èªã®æŒ‡é‡ã€ã§ã‚‚ã€Œç¾åŒ–èªã€ã‚’è¨­ã‘ã¦ã„ã‚‹ã€‚\n","date":1504029214,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1504029214,"objectID":"ccc4a0adce0aab255e147917427bd514","permalink":"/post/japanese-preview/","publishdate":"2017-08-30T01:53:34+08:00","relpermalink":"/post/japanese-preview/","section":"post","summary":"æ—¥æœ¬èªã®æ•¬èªä½“ç³»ã¯ã€ä¸€èˆ¬ã«ã€å¤§ããå°Šæ•¬èªãƒ»è¬™è­²èªãƒ»ä¸å¯§èªã«åˆ†é¡ã•ã‚Œã‚‹ã€‚æ–‡åŒ–å¯©è­°ä¼šå›½èªåˆ†ç§‘ä¼šã¯ã€2007å¹´2æœˆã«ã€Œæ•¬èªã®æŒ‡é‡ã€ã‚’ç­”ç”³ã—ã€ã“ã‚Œã«","tags":["preview","æ—¥æœ¬èª","tag-4"],"title":"[æ—¥æœ¬èª] æ•¬èªä½“ç³»","type":"post"},{"authors":null,"categories":["ä¸­æ–‡"],"content":"  ã€Šé•¿æ¨æ­Œã€‹æ˜¯ä¸­å›½å”æœè¯—äººç™½å±…æ˜“çš„ä¸€é¦–é•¿ç¯‡å™äº‹è¯—ã€‚\n ç¬¬ä¸€æ®µï¼šè´µå¦ƒå—å® çˆ± æ±‰çš‡é‡è‰²æ€å€¾å›½ï¼Œå¾¡å®‡å¤šå¹´æ±‚ä¸å¾—ã€‚æ¨å®¶æœ‰å¥³åˆé•¿æˆï¼Œå…»åœ¨æ·±é—ºäººæœªè¯†ã€‚\nå¤©ç”Ÿä¸½è´¨éš¾è‡ªå¼ƒï¼Œä¸€æœé€‰åœ¨å›ç‹ä¾§ã€‚å›çœ¸ä¸€ç¬‘ç™¾åªšç”Ÿï¼Œå…­å®«ç²‰é»›æ— é¢œè‰²ã€‚\næ˜¥å¯’èµæµ´åæ¸…æ± ï¼Œæ¸©æ³‰æ°´æ»‘æ´—å‡è„‚ã€‚ä¾å„¿æ‰¶èµ·å¨‡æ— åŠ›ï¼Œå§‹æ˜¯æ–°æ‰¿æ©æ³½æ—¶ã€‚\näº‘é¬“èŠ±é¢œé‡‘æ­¥æ‘‡ï¼ŒèŠ™è“‰å¸æš–åº¦æ˜¥å®µã€‚æ˜¥å®µè‹¦çŸ­æ—¥é«˜èµ·ï¼Œä»æ­¤å›ç‹ä¸æ—©æœã€‚\næ‰¿æ¬¢ä¾å®´æ— é—²æš‡ï¼Œæ˜¥ä»æ˜¥æ¸¸å¤œä¸“å¤œã€‚åå®«ä½³ä¸½ä¸‰åƒäººï¼Œä¸‰åƒå® çˆ±åœ¨ä¸€èº«ã€‚\né‡‘å±‹å¦†æˆå¨‡ä¾å¤œï¼Œç‰æ¥¼å®´ç½¢é†‰å’Œæ˜¥ã€‚å§Šå¦¹å¼Ÿå…„çš†åˆ—å£«ï¼Œå¯æ€œå…‰å½©ç”Ÿé—¨æˆ·ã€‚\né‚ä»¤å¤©ä¸‹çˆ¶æ¯å¿ƒï¼Œä¸é‡ç”Ÿç”·é‡ç”Ÿå¥³ã€‚éªŠå®«é«˜å¤„å…¥é’äº‘ï¼Œä»™ä¹é£é£˜å¤„å¤„é—»ã€‚\nç¼“æ­Œæ…¢èˆå‡ä¸ç«¹ï¼Œå°½æ—¥å›ç‹çœ‹ä¸è¶³ã€‚æ¸”é˜³é¼™é¼“åŠ¨åœ°æ¥ï¼ŒæƒŠç ´éœ“è£³ç¾½è¡£æ›²ã€‚\nç¬¬äºŒæ®µï¼šé©¬åµ¬æƒŠå˜ ä¹é‡åŸé˜™çƒŸå°˜ç”Ÿï¼Œåƒä¹˜ä¸‡éª‘è¥¿å—è¡Œã€‚ç¿ åæ‘‡æ‘‡è¡Œå¤æ­¢ï¼Œè¥¿å‡ºéƒ½é—¨ç™¾ä½™é‡Œã€‚\nå…­å†›ä¸å‘æ— å¥ˆä½•ï¼Œå®›è½¬è›¾çœ‰é©¬å‰æ­»ã€‚èŠ±é’¿å§”åœ°æ— äººæ”¶ï¼Œç¿ ç¿˜é‡‘é›€ç‰æ”å¤´ã€‚\nå›ç‹æ©é¢æ•‘ä¸å¾—ï¼Œå›çœ‹è¡€æ³ªç›¸å’Œæµã€‚é»„åŸƒæ•£æ¼«é£è§ç´¢ï¼Œäº‘æ ˆè¦çº¡ç™»å‰‘é˜ã€‚\nå³¨åµ‹å±±ä¸‹å°‘äººè¡Œï¼Œæ—Œæ——æ— å…‰æ—¥è‰²è–„ã€‚èœ€æ±Ÿæ°´ç¢§èœ€å±±é’ï¼Œåœ£ä¸»æœæœæš®æš®æƒ…ã€‚\nè¡Œå®«è§æœˆä¼¤å¿ƒè‰²ï¼Œå¤œé›¨é—»é“ƒè‚ æ–­å£°ã€‚\nç¬¬ä¸‰æ®µï¼šç„å®—çš‡å¸æ€å¿µ å¤©æ—‹åœ°è½¬å›é¾™é©­ï¼Œåˆ°æ­¤è¸Œèº‡ä¸èƒ½å»ã€‚é©¬åµ¬å¡ä¸‹æ³¥åœŸä¸­ï¼Œä¸è§ç‰é¢œç©ºæ­»å¤„ã€‚\nå›è‡£ç›¸é¡¾å°½éœ‘è¡£ï¼Œä¸œæœ›éƒ½é—¨ä¿¡é©¬å½’ã€‚å½’æ¥æ± è‹‘çš†ä¾æ—§ï¼Œå¤ªæ¶²èŠ™è“‰æœªå¤®æŸ³ã€‚\nèŠ™è“‰å¦‚é¢æŸ³å¦‚çœ‰ï¼Œå¯¹æ­¤å¦‚ä½•ä¸æ³ªå‚ã€‚æ˜¥é£æ¡ƒæèŠ±å¼€æ—¥ï¼Œç§‹é›¨æ¢§æ¡å¶è½æ—¶ã€‚\nè¥¿å®«å—å†…å¤šç§‹è‰ï¼Œè½å¶æ»¡é˜¶çº¢ä¸æ‰«ã€‚æ¢¨å›­å¼Ÿå­ç™½å‘æ–°ï¼Œæ¤’æˆ¿é˜¿ç›‘é’å¨¥è€ã€‚\nå¤•æ®¿è¤é£æ€æ‚„ç„¶ï¼Œå­¤ç¯æŒ‘å°½æœªæˆçœ ã€‚è¿Ÿè¿Ÿé’Ÿé¼“åˆé•¿å¤œï¼Œè€¿è€¿æ˜Ÿæ²³æ¬²æ›™å¤©ã€‚\né¸³é¸¯ç“¦å†·éœœåé‡ï¼Œç¿¡ç¿ è¡¾å¯’è°ä¸å…±ã€‚æ‚ æ‚ ç”Ÿæ­»åˆ«ç»å¹´ï¼Œé­‚é­„ä¸æ›¾æ¥å…¥æ¢¦ã€‚\nç¬¬å››æ®µï¼šä»™ç•Œå¯»å¦ƒ ä¸´é‚›é“å£«é¸¿éƒ½å®¢ï¼Œèƒ½ä»¥ç²¾è¯šè‡´é­‚é­„ã€‚ä¸ºæ„Ÿå›ç‹è¾—è½¬æ€ï¼Œé‚æ•™æ–¹å£«æ®·å‹¤è§…ã€‚\næ’ç©ºé©­æ°”å¥”å¦‚ç”µï¼Œå‡å¤©å…¥åœ°æ±‚ä¹‹éã€‚ä¸Šç©·ç¢§è½ä¸‹é»„æ³‰ï¼Œä¸¤å¤„èŒ«èŒ«çš†ä¸è§ã€‚\nå¿½é—»æµ·ä¸Šæœ‰ä»™å±±ï¼Œå±±åœ¨è™šæ— ç¼¥ç¼ˆé—´ã€‚æ¥¼é˜ç²ç‘äº”äº‘èµ·ï¼Œå…¶ä¸­ç»°çº¦å¤šä»™å­ã€‚\nä¸­æœ‰ä¸€äººå­—å¤ªçœŸï¼Œé›ªè‚¤èŠ±è²Œå‚å·®æ˜¯ã€‚é‡‘é˜™è¥¿å¢å©ç‰æ‰ƒï¼Œè½¬æ•™å°ç‰æŠ¥åŒæˆã€‚\né—»é“æ±‰å®¶å¤©å­ä½¿ï¼Œä¹åå¸é‡Œæ¢¦é­‚æƒŠã€‚æ½è¡£æ¨æ•èµ·å¾˜å¾Šï¼Œç ç®”é“¶å±è¿¤é€¦å¼€ã€‚\näº‘é«»(é¬“?)åŠåæ–°ç¡è§‰ï¼ŒèŠ±å† ä¸æ•´ä¸‹å ‚æ¥ã€‚é£å¹ä»™è¢‚é£˜é£˜(é£–)ä¸¾ï¼ŒçŠ¹ä¼¼éœ“è£³ç¾½è¡£èˆã€‚\nç‰å®¹å¯‚å¯æ³ªé˜‘å¹²ï¼Œæ¢¨èŠ±ä¸€ææ˜¥å¸¦é›¨ã€‚å«æƒ…å‡ç‡è°¢å›ç‹ï¼Œä¸€åˆ«éŸ³å®¹ä¸¤æ¸ºèŒ«ã€‚\næ˜­é˜³æ®¿é‡Œæ©çˆ±ç»ï¼Œè“¬è±å®«ä¸­æ—¥æœˆé•¿ã€‚å›å¤´ä¸‹æœ›äººå¯°å¤„ï¼Œä¸è§é•¿å®‰è§å°˜é›¾ã€‚\nå”¯å°†æ—§ç‰©è¡¨æ·±æƒ…ï¼Œé’¿åˆé‡‘é’—å¯„å°†å»ã€‚é’—ç•™ä¸€è‚¡åˆä¸€æ‰‡ï¼Œé’—æ“˜é»„é‡‘åˆåˆ†é’¿ã€‚\nä½†æ•™å¿ƒä¼¼é‡‘é’¿åšï¼Œå¤©ä¸Šäººé—´ä¼šç›¸è§ã€‚ä¸´åˆ«æ®·å‹¤é‡å¯„è¯ï¼Œè¯ä¸­æœ‰èª“ä¸¤å¿ƒçŸ¥ã€‚\nä¸ƒæœˆä¸ƒæ—¥é•¿ç”Ÿæ®¿ï¼Œå¤œåŠæ— äººç§è¯­æ—¶ã€‚åœ¨å¤©æ„¿ä½œæ¯”ç¿¼é¸Ÿï¼Œåœ¨åœ°æ„¿ä¸ºè¿ç†æã€‚\nå¤©é•¿åœ°ä¹…æœ‰æ—¶å°½ï¼Œæ­¤æ¨ç»µç»µæ— ç»æœŸã€‚\n","date":1504028276,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1504028276,"objectID":"aabae05e75b926efdda8cb834de1d9bf","permalink":"/post/chinese-preview/","publishdate":"2017-08-30T01:37:56+08:00","relpermalink":"/post/chinese-preview/","section":"post","summary":"ã€Šé•¿æ¨æ­Œã€‹æ˜¯ä¸­å›½å”æœè¯—äººç™½å±…æ˜“çš„ä¸€é¦–é•¿ç¯‡å™äº‹è¯—ã€‚ ç¬¬ä¸€æ®µï¼šè´µå¦ƒå—å® çˆ± æ±‰çš‡é‡è‰²æ€å€¾å›½ï¼Œå¾¡å®‡å¤šå¹´æ±‚ä¸å¾—ã€‚æ¨å®¶æœ‰å¥³åˆé•¿æˆï¼Œå…»åœ¨æ·±é—ºäººæœªè¯†ã€‚ å¤©ç”Ÿä¸½è´¨éš¾","tags":["preview","ä¸­æ–‡","tag-1"],"title":"[ä¸­æ–‡] ã€Šé•¿æ¨æ­Œã€‹","type":"post"},{"authors":null,"categories":["life"],"content":"è¯†è´¤è€…ï¼Œæˆ’æ¸¸æˆï¼Œåšè´¡çŒ®ï¼Œæ—¶è€Œç­‰é—²,å·¥ç¨‹åŒ–è¡Œä¹‹ã€‚\nè´¤è€…  å¯ä»¥è¯»è¯»æœ‰æ™ºæ…§çš„æœ‹å‹ ç‹å»ºç¡• (æ¯”å¦‚å¾ˆå¤šè¯éƒ½æ˜¯ä½ ä»¥ä¸ºï¼Œæˆ‘ä»¥ä¸ºæ›´åŠ æ¥è¿‘ç°å®,å¥¥å·´é©¬ä¹Ÿæ›¾ç»ä»¥ä¸º ,å½“çŸ¥é“ äº†å¤ªå¤šçš„ä½ ä»¥ä¸ºä¹‹åï¼Œä½ æ‰èƒ½æˆé•¿ï¼Œæˆç†Ÿåœ°æ„Ÿå—ç—›è‹¦ã€‚æ‰€ä»¥æœ€åº”è¯¥é€ä¸Šæ‰¹æ–—åœº çš„è¯è¯­åº”è¯¥æ˜¯â€ä»¥ä¸ºâ€) When thinking changes your mind, thatâ€™s philosophy. When God changes your mind, thatâ€™s faith. When facts change your mind, thatâ€™s science. Thatâ€™s the soul of edge.org   å»edge.org çœ‹çœ‹thinking(æ¯”å¦‚ è§£é‡Šçš„åŠ›é‡  ) å¤§é¡¹ç›®(ä¸€ä¸ªé¡¹ç›®ï¼Œå…·æœ‰ç‹¬ç‰¹æ€§ã€æ¸è¿›æ˜ç»†è¡Œã€ä¸´æ—¶æ€§ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªäº§å“ã€æˆæœã€æœåŠ¡)å’Œ å°é¡¹ç›®æ™ºæ…§ å‚åŠ ä½“æ£€çš„æ—¶å€™ï¼Œä¼šæœ‰å¾ˆå¤šé¡¹ç›®è¦è¿›è¡Œï¼Œè€Œå…ˆæ’é˜ŸåšèŠ±æ—¶é—´é•¿çš„å¤§é¡¹ç›®çš„äººä¼šæœ€å…ˆä½“æ£€å®Œï¼Œ å› ä¸ºç­‰ä½ æŠŠå¤§é¡¹ç›®åšå®Œï¼Œå†å»è¿›è¡Œå°é¡¹ç›®çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°å°é¡¹ç›®æ—©ç©ºäº†ï¼Œæ²¡äººæ’é˜Ÿäº†ï¼Œè€Œ é‚£äº›å…ˆæ’é˜Ÿåšå°é¡¹ç›®çš„äººç°åœ¨æ­£æ’ç€æ¯”ä½ å¼€å§‹æ›´é•¿çš„é˜Ÿä¼è¿›è¡Œç€å¤§é¡¹ç›®çš„ä½“æ£€ï¼Œæ‰€ä»¥ä½ è½»æ¾ æ£€æŸ¥å®Œå°é¡¹ç›®å°±å¯ä»¥å…ˆèµ°äº†ã€‚å»æ¸¸ä¹å›­ç©ä¹Ÿæ˜¯è¿™æ ·ï¼Œ ä¸Šåˆå…ˆæ’é˜Ÿç©å¤§é¡¹ç›®ä¼šæ˜¯æœ€ä¼˜çš„é€‰æ‹©ï¼Œ å› ä¸ºè™½ç„¶ä¸€å¼€å§‹æ’å¤§é¡¹ç›®çš„äººä¼šå¾ˆå¤šï¼Œä½†ä½ ä¼šå‘ç°åˆ°äº†ä¸‹åˆï¼Œæ’å¤§é¡¹ç›®çš„äººçš„é˜Ÿä¼ä¼šå˜å¾—æ›´ é•¿ï¼Œè€Œé‚£äº›å°é¡¹ç›®å·²ç»åŸºæœ¬æ²¡ä»€ä¹ˆäººæ’é˜Ÿäº†ï¼Œè¿™æ ·ä½ è½»æ¾å°±æœ€å…ˆç©å®Œäº†å¤§å¤šæ•°æƒ³ç©çš„é¡¹ç›®ã€‚ äººç”Ÿçš„å­¦ä¹ æ’é˜Ÿä¹Ÿä¼šæ˜¯æœ‰è¿™æ ·çš„æœ€ä½³ç­–ç•¥ï¼Œå¹´è½»çš„æ—¶å€™å…ˆæŠŠé‚£äº›è¦èŠ±å››äº”å¹´æ—¶é—´æ‰èƒ½ç²¾é€šçš„ å¤§é¡¹ç›®åšå®Œï¼ˆæ¯”å¦‚Linuxæ“ä½œç³»ç»Ÿï¼Œè½¯ä»¶å¼€å‘æŠ€æœ¯ï¼‰ï¼Œå†å»å­¦ä¹ ç€è£…æ‰“æ‰®è¿™äº›å‡ ä¸ªæœˆå°±èƒ½å­¦ ä¼šçš„å°é¡¹ç›®ï¼Œä½ å°±ä¼šæœ€å…ˆè¾¾åˆ°ä½ çš„äººç”Ÿç›®æ ‡äº†ã€‚è€Œé‚£äº›å¼€å§‹æ²¡å­¦å¤§é¡¹ç›®çš„äººï¼Œé’æ˜¥è¿‡åï¼Œä¼š å‘ç°å†å°±å¾ˆéš¾æ‹¿å‡ºå››äº”å¹´çš„æ—¶é—´å»å­¦ä¹ å¤§é¡¹ç›®äº†ï¼Œè€Œä»–/å¥¹ä»¬ä»¥å‰å­¦çš„é‚£äº›å°é¡¹ç›®ï¼Œåˆ«äººä¼š å¾ˆå¿«ä¹Ÿå­¦ä¼šï¼Œè€Œä¸”å› ä¸ºåˆ«äººæœ‰äº†åšå®çš„åŸºç¡€ï¼Œä¼šåšå¾—æ¯”ä»–/å¥¹ä»¬æ›´ å¥½ã€‚è¿™å°±æ˜¯æŠ“ä½é‡ç‚¹å…ˆè¿› è¡Œçªç ´çš„ç§˜è¯€äº†ã€‚å°±åƒå¾€ç½å­é‡Œè£…çŸ³å¤´å’Œæ²™å­ä¸€æ ·ï¼Œå…ˆæ”¾å¤§çŸ³å­ï¼Œå†çŒæ²™å­ä¼šå……å®å¾—å¾ˆæ»¡ï¼Œ è€Œå…ˆè£…æ²™å­å†æ”¾çŸ³å¤´å°±ä¼šæœ‰å¾ˆå¤šç©ºéš™ä¸èƒ½å¡«æ»¡äº†ï¼Œè€Œä¸”æœ‰çš„çŸ³å¤´ä¹Ÿå°±å†ä¹Ÿæ”¾ä¸è¿›å»äº†ã€‚å¯è§ï¼Œ äººç”Ÿçš„å­¦ä¹ æ’é˜Ÿç­–ç•¥ä¹Ÿåº”è¯¥è¿™æ ·å®‰æ’ï¼Œè¿™æ ·æ‰æ˜¯æœ‰æ™ºæ…§çš„ä½“ç°\nTop-down æ€æƒ³(ä¹¦è¯»åš)å’ŒBottom-up(ä¹¦è¯»è–„)æ·±å…¥æ€æƒ³,and recursive the procedure in your life(life is one book)ï¼Œå»ç†è§£æ€è€ƒçš„èƒŒå .\nè·¨æƒ…å¢ƒè¿ç”¨ï¼šæ€ç»´æ³•åˆ™ä¹Ÿæ˜¯çŸ¥è¯†è®°å¿†ï¼Œæ˜¯é—®é¢˜è§£å†³ç­–ç•¥ã€‚æ—¢ç„¶æ˜¯è®°å¿†ï¼Œå°±å—åˆ°æå–çº¿ç´¢çš„åˆ¶çº¦ï¼Œ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå½“æ³¢åˆ©äºšå‘Šè¯‰ä½ è¦â€œæ³¨æ„æœªçŸ¥æ•°â€ä¹‹åä½ è¿˜æ˜¯ä¸èƒ½çœŸæ­£åœ¨æ‰€æœ‰éœ€è¦ä½ â€œæ³¨æ„æœªçŸ¥æ•°â€ çš„åœ°æ–¹éƒ½èƒ½æé†’è‡ªå·±â€œæ³¨æ„æœªçŸ¥æ•°â€ã€‚å¾ˆå¤šæ—¶å€™æœªçŸ¥æ•°æ˜¯å¾ˆéšè”½çš„ï¼ŒæœªçŸ¥æ•°å¹¶ä¸ä¼šæ€»æ˜¯å¤´é¡¶ä¸€ä¸ª å¤§å¸½å­ä¸Šé¢å†™ç€â€œæˆ‘æ˜¯æœªçŸ¥æ•°â€ã€‚æ‰€ä»¥å¾ˆå¤šæ—¶å€™ç¼ºä¹å¯¹è¿™ä¸ªç­–ç•¥çš„â€œæé†’â€çº¿ç´¢ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½  å­¦ä¼šäº†åœ¨è§£å†³æ•°å­¦é—®é¢˜çš„æ—¶å€™â€œæ³¨æ„æœªçŸ¥æ•°â€å´ä¸ä¸€å®šèƒ½åœ¨è§£å†³ç°å®ç”Ÿæ´»ä¸­çš„é—®é¢˜ä¸­æ—¶åˆ»éƒ½èƒ½ â€œæ³¨æ„ä½ çš„æœªçŸ¥æ•°â€ï¼ˆã€Šä½ çš„ç¯äº®ç€å—ï¼Ÿã€‹æ•´æœ¬ä¹¦çš„ä»·å€¼ä¾¿åœ¨äºæ­¤ï¼‰  æ¸¸æˆ æ¸¸æˆçš„ä¹è¶£ï¼Œè€Œè‡´ç˜¾ï¼Œåˆ™æ˜¯å¯¹å¿«ä¹çš„è¶…å‰æ¶ˆè´¹ã€é€æ”¯æ¶ˆè´¹ï¼Œä¸å¾—ä¸è¯´æ¸¸æˆçš„è™šæ‹Ÿç¤¾ä¼šç”±å¯¹æŠ—ã€æš´åŠ›å’Œæ¬²æœ›ä¸»å®°ï¼Œç©å®¶ä»¬å› æ­¤æ€¥åŠŸè¿‘åˆ©ã€æ©æ€¨åˆ†æ˜ã€æ´¾ç³»æ—ç«‹ã€æ®‹é…·å†·æ¼ ï¼Œæ¨¡æ‹Ÿäººç‰©çš„æ€§æ ¼å¼±ç‚¹ã€‚æ‰€è°“çˆ½ï¼Œå¾ˆHighï¼Œåªä¸è¿‡æ˜¯æå‰æ¶ˆè´¹å¿«ä¹ç½¢äº†ï¼Œä»ç¬¬äºŒå¤©çš„ç–²åŠ³ä½ å°±ä¼šäº†è§£å¾—åˆ°ã€‚å°±åƒåŠäº†ä¿¡ç”¨å¡ï¼Œå¯ä»¥æå‰æ¶ˆè´¹ï¼Œä½†å¹¶ä¸æ˜¯å¢åŠ äº†ä½ çš„è´¢å¯Œã€‚å¦‚æœéšæ„åˆ·å¡ï¼Œæˆ–è€…å¤ªè¿‡åº¦ç©ä¹ï¼Œå°± ä¼šå¯¼è‡´éº»çƒ¦(ç”±æµªè´¹è€Œäº§ç”Ÿç¼ºä¹)ï¼Œè€Œå¾—ä¸å¿å¤±\n#è´¡çŒ®\nä¸‡äº‹å³ä½¿æ— å›æŠ¥ä¹Ÿå¾—å¤šåšç‚¹è´¡çŒ®ã€‚\næ¯”å¦‚å†å²ä¸Šæœ‰ä¸€ä¸ªä¼Ÿå¤§çš„å‘æ˜å®¶ï¼ˆæˆ–è®¸æ˜¯æœ€ä¼Ÿå¤§çš„å‘æ˜å®¶ä¹‹ä¸€ï¼‰ï¼Œå´é²œä¸ºäººçŸ¥ã€‚ä»–å°±æ˜¯ Nikola Teslaã€‚ä»–å‘ç°æˆ–è€…å¼€å‘äº†ä¸€ç³»åˆ—ä¼Ÿå¤§åˆ›æ–°çš„åŸºç¡€æŠ€æœ¯ï¼Œä»æ— çº¿ç”µä¿¡å·ä¼ è¾“ï¼Œåˆ°äº¤æµ ç”µï¼Œä»ç‰¹æ–¯æ‹‰å˜å‹å™¨åˆ°Xå…‰ï¼Œè§å…‰ç¯ç›´åˆ°ç°ä»£ç”µç½‘ã€‚ä»–å’Œçˆ±è¿ªç”Ÿä¸€èµ·å·¥ä½œï¼Œå´ç›¸æ¯”ä¹‹ä¸‹ï¼Œå´ å›æŠ¥å¯¥å¯¥ã€‚ä¸ä½†è€å¹´ç©·å›°æ½¦å€’ï¼Œä¹Ÿå¾ˆå°‘æœ‰äººå¬è¯´è¿‡ä»–ã€‚1943å¹´ï¼Œè¿™ä½ä¸ºäººç±»è¿æ¥ç”µåŠ›æ—¶ä»£ çš„å¤©æ‰å»ä¸–çš„æ—¶å€™ï¼Œèº«è¾¹åªæœ‰å‡ åªä»–æ¡æ¥çš„ç—…é¸½å­  ç­‰é—² ç­‰é—²ï¼Œè®©è‡ªå·±æœ‰ä¸€äº›æ—¶é—´æ¥è®©å†…å¿ƒå¯‚é™, ç­‰é—²ä¹Ÿæ˜¯ä½ çš„æš—æ—¶é—´ ,å¸¦ç€ä½ å…³å¿ƒçš„é—®é¢˜è¿›è¡Œæ€è€ƒã€‚\nå¯‚é™æŒ‡çš„ä¸æ˜¯å¤–éƒ¨ç¯å¢ƒï¼Œè€Œæ˜¯äººçš„å†…å¿ƒã€‚æ¸´æœ›æ™ºæ…§ã€åŠ›é‡æˆ–è€…ä»»ä½•å–å¾—ä¸æœ½æˆå°±çš„äººï¼Œéƒ½ä¼š åœ¨å†…åœ¨ä¸–ç•Œä¸­æ‰¾åˆ°è¿™äº›ã€‚å†…åœ¨ä¸–ç•Œä¼šä¸æ–­ä¸ºä½ æ­ç¤ºå„æ ·çš„å¥¥ç§˜ã€‚é‚£äº›ç²—å¿ƒ å¤§æ„çš„äººå¯èƒ½ä¼š è®¤ä¸ºï¼Œâ€œå¯‚é™â€éå¸¸ç®€å•è€Œä¸”å®¹æ˜“å®ç°,æ‰€ä»¥è¦è®°ä½ï¼Œåªæœ‰åœ¨ç»å¯¹å¯‚é™çš„çŠ¶æ€ä¸‹ï¼Œä½ æ‰èƒ½å¤Ÿè§¦æ‘¸ åˆ°ç¥æœ¬èº«ï¼Œæ‰èƒ½é¢†æ‚Ÿåˆ°æ°¸æ’ä¸å˜çš„æ³•åˆ™å¹¶ä¸”å—ç›Šã€‚ æ€æ ·è·å–æ™ºæ…§ï¼Ÿ é›†ä¸­ç²¾ç¥ï¼›å®ƒå°†ä¸ºä½ å¼€å¯æ™ºæ…§ä¹‹é—¨ï¼Œæ™ºæ…§æ¥æºäºå†…åœ¨  å·¥ç¨‹ ä¸€ä¸ªå·¥ç¨‹ä¸€ä¸ªé¡¹ç›®çš„å»å¹²ï¼Œä¹¦è¦å¹²ï¼Œä¹Ÿè¦å†™ï¼å¤šä¹¦åˆ™ä¹¦å‘†ï¼Œå°‘ä¹¦åˆ™æ²¡æ–‡åŒ–ï¼Œä¹¦åœ¨å¤ä»£ä¹Ÿæœ‰å†™çš„æ„æ€ã€‚\n","date":1502633741,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1502633741,"objectID":"2b4d6e548153475a1beed00dbf62ca53","permalink":"/blog/2017/08/13/yue-du-source-code-of-my-world/","publishdate":"2017-08-13T22:15:41+08:00","relpermalink":"/blog/2017/08/13/yue-du-source-code-of-my-world/","section":"archives","summary":"è¯†è´¤è€…ï¼Œæˆ’æ¸¸æˆï¼Œåšè´¡çŒ®ï¼Œæ—¶è€Œç­‰é—²,å·¥ç¨‹åŒ–è¡Œä¹‹ã€‚\n","tags":null,"title":"é˜…è¯»source Code of My World","type":"archives"},{"authors":null,"categories":["vim"],"content":" vimçœŸæ­£æ•™ä¼šäº†ä½ ä»€ä¹ˆï¼Ÿ\nvimå¸¦ç»™ä½ æ¿€æƒ…ï¼Œä¹Ÿç»™äº†ä½ ç”Ÿæ´»çš„æ™ºè¶£ï¼Œä»ä¸€å¼€å§‹ä½ ç»ƒä¹ Learn-vim-progressively ,å¹¶ä¸”ç°åœ¨è¿˜åœ¨ç»ƒä¹ macroå’Œvimâ€™s text object. ä¹Ÿåœ¨ä¸æ–­çš„å­¦ä¹ marks and tagsæ€æƒ³ï¼Œè®©ç”Ÿæ´»è½¨è¿¹æœ‰è¿¹å¯å¾ªï¼Œä½ ä½¿ç”¨CtrlSpaceæ¥ä¿è¯ä½ çš„workspaceä¿å­˜ä¸‹æ¥ï¼Œå¹¶åˆ‡æ¢æ–‡ä»¶å’Œbufferï¼› éšç€çŸ¥è¯†çš„å¢é•¿ï¼Œä½ ä½¿ç”¨vimwikiæ¥ç®¡ç†ä½ çš„çŸ¥è¯†ï¼Œå¹¶ç»“åˆcalendar åœ¨vimwikiæ¥ç®¡ç†ä½ çš„æ—¥è®°ã€‚ä¸ºäº†è®©æ–‡ä»¶æŸ¥æ‰¾ï¼Œæ–‡ä»¶ç¼–è¾‘æ›´åŠ æ–¹ä¾¿ï¼Œ ä½ ä½¿ç”¨ shoudo çš„vimfiles æ¥å¢å¼ºä½ çš„vimï¼Œä½¿å¾—ä½ çš„vimå˜å¾—æ›´åƒä¸€æŠŠç‘å£«å†›åˆ€ã€‚\n Ctrl-Space Plugin Knowledge tool: Vimwiki Vimfiles: file operation Menu for your vim:Startify Attach File  ä¸ºäº†å¤šä¸€ç‚¹å¯¹ç§°ç¾ï¼Œä½ ä½¿ç”¨é«˜ä¸½æ£’ä½œè€…junegunn çš„vim-easy-align  (Note: many examples ),ä¸ºäº†å°‘çŠ¯é”™è¯¯ï¼Œ ä½ åŠ å…¥äº†vim-fat-finger ,ä½¿ç”¨iabbrevæ¥ç¼©å†™ä½ éœ€è¦å†™çš„å•è¯ï¼Œæˆ–è€…ä¿®æ­£é”™è¯¯çš„å•è¯,ä¸ºäº†ç¼–è¾‘æ›´åŠ æœ‰æ•ˆ, ä½ ç”šè‡³å¼•å…¥äº†vim-multiline-cursor .è¿›ä¸€æ­¥çš„ä½ å¼•å…¥äº†tpope çš„vim-surround è®©ä½ åœ¨ä¹¦å†™ racket(å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨delimiteMate è¡¥å…¨æ‹¬å·æ’ä»¶)æˆ–è€…lispä»£ç çš„æ—¶å€™æ›´åŠ æ–¹ä¾¿ä¸€äº›ï¼Œ å¹¶ä¸ºäº†é‡å¤æˆ–è€…é€’å½’ä½¿ç”¨ï¼Œä½ ä¹Ÿå¼•å…¥ä»–çš„vim-repeat  (vimä¸­çš„å¾ˆå¤šæ’ä»¶éƒ½æ˜¯æ”¯æŒå¢å¼ºçš„ï¼Œæ¯”å¦‚fçš„å¢å¼ºæ’ä»¶clever-f ); ä¸ºäº†æ›´å¿«æ·çš„ç¼–è¾‘æ–‡ä»¶è¡Œï¼Œé™¤äº†ä½¿ç”¨vim text object, ä½ ä¹Ÿå¼•å…¥äº†vim-move å’Œvim-easymotion  (Very Good)æ¥ç§»åŠ¨è¡Œ,ä½¿å¾—vimæ–‡æœ¬æ›´åŠ ç»“æ„åŒ–ã€‚\næƒ³ç€è®©ä½ çš„vimè¿è¡Œå¾—æ›´å¿«ä¸€äº›ï¼Œä½ æŠŠä½ ä¸€ç›´ç”¨çš„vundle æ”¹ä¸ºäº†çš„junegunn\u0026rsquo;s vim-plug æ¥ç®¡ç†ä½ çš„æ’ä»¶,ç¡®æ²¡è§å¾—æœ‰å¤ªå¤§çš„æ”¹è¿›ï¼Œç®€æ´åœ°ä½¿ç”¨pluginsè‡ªç„¶å°±å¿«äº†ã€‚\nå¯ä»¥çœ‹åˆ°ä½ ä¹Ÿå¢åŠ äº† Startify çš„é…ç½®ã€‚\nç„¶è€Œï¼Œä¸Šé¢è¿™äº›éƒ½æ˜¯ä½ æƒ³è®©vimåšçš„ï¼Œä¸‹é¢è¦å†™çš„åˆ™æ˜¯vim pluginså¸¦ç»™ä½ å…³äºå†™ä½œçš„æ–°çš„æ¦‚å¿µå’Œæ€æƒ³ï¼Œè¿™ä¹Ÿæ‰æ˜¯æœ¬æ–‡çš„é‡ç‚¹ã€‚\nåˆšå¼€å§‹æ¥è§¦vimçš„æ—¶å€™ï¼Œä½ æ˜¯ç”¨äº†scroolooseçš„nerdtree  ,tagbar ,vim airline ç­‰ï¼Œ ä½ ä¹Ÿä½¿ç”¨äº†å„ç§language support vim plugins ,ä¹ŸçŸ¥é“vimä½¿ç”¨tpope çš„vim-gitgutter ç»“åˆgitç®¡ç†code, ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹ç¬¬ä¸€ä¸ªvimæ’ä»¶ctrl-space\n1.Ctrl-Space Plugin Github Repo: Click here \nvim help: :h ctrlspace\næ ¸å¿ƒæ¦‚å¿µ:\nå½“ä½ åœ¨vimä¸­ä½¿ç”¨:h ctrlspaceæ—¶å€™ä¼šæœç´¢åˆ°è¿™äº›èµ„æ–™ï¼Œ\nã€1.vim desktopã€‘: Let's imagine [ Vim ] is a writing desk. ã€2.projects drawsã€‘ : Your [ projects ] are like drawers. ã€3.Bookmark favorite projectã€‘: The [ Bookmark ] List simply displays your favorite projects. ã€4.Buffer paperã€‘: A [ buffer ] is like a sheet of paper lying on the desk. named buffers unsaved buffers ã€5.workspace an status snapshot of current projectã€‘:All your [ buffers ], [ tabs ], and [ tab ] layouts can be persisted as a workspace. It's like taking a picture of your desk with an instant camera. You can save multiple workspaces per project with Workspace List. ã€6.workspace sessionã€‘ : The word \u0026quot;workspace\u0026quot; can be considered a synonym of a \u0026quot;session\u0026quot;. The ability of having so many sessions available at hand creates a lot of interesting use cases! For example, you can have a workspace for each task or feature you are working on. It's very easy to switch from one workspace to another. ç„¶åä»¥åå¯ä»¥ä½¿ç”¨å¤§å†™çš„Bï¼Œè·³è½¬åˆ°Bookmarkæ ‡ç­¾æ ï¼Œç±»ä¼¼äºCtrlSpaceçš„å“²å­¦æ€æƒ³ï¼Œä¼šè·³è½¬åˆ°æŸä¸ªbookmarkä¸‹çš„ç›®å½•ï¼Œé€šè¿‡Cä¹Ÿå¯ä»¥ï¼Œç›´æ¥Enterã€ŠCRã€‹é”®ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ åˆ é™¤è§‰å¾—ä¸éœ€è¦äº†ï¼Œå°±Dä¸€ä¸‹å³å¯ã€‚  The easiest way to think about tab pages in Vim is to consider them to be viewports, layouts, or workspaces\ntagsæ˜¯ä¸€ä¸ªåœ¨ç¼–ç¨‹ä¸­ç»å¸¸ä¼šä½¿ç”¨ è€Œä¸”åœ¨gitçš„ç‰ˆæœ¬ä¸­ä¹Ÿç»å¸¸æ¶‰åŠåˆ°å¾ˆå¤šæ‰“tagçš„å·¥ä½œ (git tag or git tag -a) git checkoutæŸä¸ªtagç­‰ å…¶å®tagsåªä¸è¿‡æ˜¯å¯¹äº‹ç‰©çš„ä¸€ç§æŠ½è±¡ï¼Œè¿™ä¹Ÿæ˜¯ä½ åœ¨ç°å®å½“ä¸­ç»å¸¸çœ‹åˆ°çš„class field method æ³¨é‡Šç­‰ç­‰ï¼Œå…¶å®éƒ½å¯ä»¥æŠŠä»–ä»¬ç†è§£ä¸ºä¸€ç§tagï¼Œä¸€ç§convinience tag  åœ¨vimwikiçš„wikiæ–‡ä»¶çš„ç®€å•å®ç”¨æ–¹æ³•(ç»å¸¸ç”¨ï¼ï¼ï¼):\n:æ ‡ç­¾åå­—: [[æ–‡ä»¶å#æ ‡ç­¾åå­—]]å³å¯  ç›¸åŒvim tagæ¦‚å¿µ\n\u0026quot;\u0026quot; tab encapsulation \u0026quot; tab æ“ä½œ \u0026quot; http://vim.wikia.com/wiki/Alternative_tab_navigation \u0026quot; http://stackoverflow.com/questions/2005214/switching-to-a-particular-tab-in-vim \u0026quot; tabåˆ‡æ¢ map \u0026lt;leader\u0026gt;th :tabfirst\u0026lt;cr\u0026gt; map \u0026lt;leader\u0026gt;tl :tablast\u0026lt;cr\u0026gt; map \u0026lt;leader\u0026gt;tj :tabnext\u0026lt;cr\u0026gt; map \u0026lt;leader\u0026gt;tk :tabprev\u0026lt;cr\u0026gt; map \u0026lt;leader\u0026gt;tn :tabnext\u0026lt;cr\u0026gt; map \u0026lt;leader\u0026gt;tp :tabprev\u0026lt;cr\u0026gt; map \u0026lt;leader\u0026gt;te :tabedit\u0026lt;cr\u0026gt; map \u0026lt;leader\u0026gt;td :tabclose\u0026lt;cr\u0026gt; map \u0026lt;leader\u0026gt;tm :tabm\u0026lt;cr\u0026gt; \u0026quot; normalæ¨¡å¼ä¸‹åˆ‡æ¢åˆ°ç¡®åˆ‡çš„tab noremap \u0026lt;leader\u0026gt;1 1gt noremap \u0026lt;leader\u0026gt;2 2gt noremap \u0026lt;leader\u0026gt;3 3gt noremap \u0026lt;leader\u0026gt;4 4gt noremap \u0026lt;leader\u0026gt;5 5gt noremap \u0026lt;leader\u0026gt;6 6gt noremap \u0026lt;leader\u0026gt;7 7gt noremap \u0026lt;leader\u0026gt;8 8gt noremap \u0026lt;leader\u0026gt;9 9gt noremap \u0026lt;leader\u0026gt;0 :tablast\u0026lt;cr\u0026gt; \u0026quot; Toggles between the active and last active tab \u0026quot; \u0026quot; The first tab is always 1 \u0026quot; let g:last_active_tab = 1 \u0026quot; nnoremap \u0026lt;leader\u0026gt;gt :execute 'tabnext ' . g:last_active_tab\u0026lt;cr\u0026gt; \u0026quot; nnoremap \u0026lt;silent\u0026gt; \u0026lt;c-o\u0026gt; :execute 'tabnext ' . g:last_active_tab\u0026lt;cr\u0026gt; \u0026quot; vnoremap \u0026lt;silent\u0026gt; \u0026lt;c-o\u0026gt; :execute 'tabnext ' . g:last_active_tab\u0026lt;cr\u0026gt; nnoremap \u0026lt;silent\u0026gt; \u0026lt;leader\u0026gt;tt :execute 'tabnext ' . g:last_active_tab\u0026lt;cr\u0026gt; autocmd TabLeave * let g:last_active_tab = tabpagenr() \u0026quot; æ–°å»ºtab Ctrl+t nnoremap \u0026lt;C-t\u0026gt; :tabnew\u0026lt;CR\u0026gt; inoremap \u0026lt;C-t\u0026gt; \u0026lt;Esc\u0026gt;:tabnew\u0026lt;CR\u0026gt;  é»˜è®¤å·¥ä½œç±»å‹ç›®å½• Markers will be also used as a storage for `cs_workspaces` (workspaces of the current project) and `cs_files` (cached files of the current project). Default value: \u0026gt; let g:CtrlSpaceProjectRootMarkers = [ \\ \u0026quot;.git\u0026quot;, \\ \u0026quot;.hg\u0026quot;, \\ \u0026quot;.svn\u0026quot;, \\ \u0026quot;.bzr\u0026quot;, \\ \u0026quot;_darcs\u0026quot;, \\ \u0026quot;CVS\u0026quot; \\ ]  Summary:\nA buffer is the in-memory text of a file. A window is a viewport on a buffer. A tab page is a collection of windows. A window is a viewport onto a buffer. You can use multiple windows on one buffer, or several windows on different buffers. A buffer is a file loaded into memory for editing. The original file remains unchanged until you write the buffer to the file.  #2. Knowledge tool: Vimwiki Github Repo: Click here  vimwki setup in vimrc:\nâ€¢ \u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot;\u0026quot; â€¢ \u0026quot; vimwiki â€¢ let g:vimwiki_use_mouse = 1 â€¢ let g:vimwiki_list_ignore_newline = 0 â€¢ let g:vimwiki_hl_headers = 0 â€¢ \u0026quot; vimwikiæ‰“å¼€æŠ˜å  â€¢ \u0026quot;let g:vimwiki_folding = 1 â€¢ let g:vimwiki_camel_case = 0 â€¢ let g:vimwiki_list_ignore_newline = 0 â€¢ let g:vimwiki_CJK_length = 1 â€¢ â€¢ \u0026quot;è®¾å®šæ–‡ä»¶æµè§ˆå™¨ç›®å½•ä¸ºå½“å‰ç›®å½• â€¢ set bsdir=buffer â€¢ \u0026quot;set autochdir â€¢ â€¢ \u0026quot; æ—¥å†æ’ä»¶ â€¢ map ca :Calendar\u0026lt;cr\u0026gt; â€¢ â€¢ map \u0026lt;S-Space\u0026gt; :\u0026lt;C-Space\u0026gt; â€¢ â€¢ \u0026quot; vimwiki â€¢ let g:vimwiki_list = [{'path': '~/Wiki/wiki/', 'path_html': '~/Wiki/', 'auto_export': 1}] â€¢ \u0026quot; è½¬åŒ–ä¸ºHtmlæ–‡ä»¶ â€¢ map \u0026lt;S-F4\u0026gt; :Vimwiki2HTML\u0026lt;cr\u0026gt; â€¢ â€¢ \u0026quot; è®¾ç½®é¢œè‰² â€¢ hi VimwikiHeader1 guifg=#FF0000 â€¢ hi VimwikiHeader2 guifg=#00FF00 â€¢ hi VimwikiHeader3 guifg=#0000FF â€¢ hi VimwikiHeader4 guifg=#FF00FF â€¢ hi VimwikiHeader5 guifg=#00FFFF hi VimwikiHeader6 guifg=#FFFF00  ##vimwiki tagbar é›†æˆ\n------------------------------------------------------------------------------ Tagbar integration *vimwiki-tagbar* As an alternative to the Table of Contents, you can use the Tagbar plugin (http://majutsushi.github.io/tagbar/) to show the headers of your wiki files in a side pane. Download the Python script from https://raw.githubusercontent.com/vimwiki/utils/master/vwtags.py and follow the instructions in it.  æ•ˆæœå¦‚ä¸‹ï¼Œ\n3. Vimfiles: A tool for file operations Github Repo: click here \nvimfiler setup in vimrc\n\u0026quot;for vimfiler let g:vimfiler_enable_auto_cd=1 \u0026quot;call vimfiler#set_execute_file('txt', 'notepad') call vimfiler#set_execute_file('txt', 'gvim') call vimfiler#set_execute_file('c', ['gvim', 'notepad']) let g:vimfiler_as_default_explorer = 1 \u0026quot; Enable file operation commands. \u0026quot; Edit file by tabedit. \u0026quot;call vimfiler#custom#profile('default', 'context', { \u0026quot; \\ 'safe' : 0, \u0026quot; \\ 'edit_action' : 'tabopen', \u0026quot; \\ }) \u0026quot; Like Textmate icons. let g:vimfiler_tree_leaf_icon = ' ' \u0026quot;let g:vimfiler_tree_closed_icon = 'â–¸' \u0026quot;let g:vimfiler_tree_opened_icon = 'â–¾' let g:vimfiler_file_icon = '-' let g:vimfiler_marked_file_icon = '*' let g:vimfiler_safe_mode_by_default=0 \u0026quot; Use trashbox. \u0026quot; Windows only and require latest vimproc. let g:unite_kind_file_use_trashbox = 1 \u0026quot;\u0026quot; you can create a .vim file, then source it \u0026quot;need everything.exe \u0026quot;nnoremap \u0026lt;Leader\u0026gt;f :Unite file buffer file_rec file_mru everything\u0026lt;CR\u0026gt; nnoremap \u0026lt;Leader\u0026gt;f :VimFiler\u0026lt;CR\u0026gt; nnoremap \u0026lt;leader\u0026gt;l :Unite line\u0026lt;CR\u0026gt; let g:unite_source_everything_limit = 100 let g:unite_source_everything_full_path_search = 1 let g:unite_source_everything_posix_regexp_search = 1 let g:unite_source_everything_async_minimum_length = 3 let g:unite_source_everything_cmd_path = 'C:\\\\Users\\\\YeZhao\\\\.vim\\\\es\\\\es.exe'  ç”±äºvimfilerçš„ä½¿ç”¨ä¹Ÿäº†è§£åˆ°äº† ag æ’ä»¶ï¼ˆä¸€ä¸ªç‰¹åˆ«å¥½ç”¨çš„æœç´¢æ’ä»¶,åœ¨ubuntuåº•ä¸‹ç›´æ¥ä½¿ç”¨ag â€œexpressionâ€ æ‰¾åˆ°å½“å‰æ–‡ä»¶å¤¹æ‰€æœ‰æ–‡ä»¶å†…å®¹ åŒ…å«è¡¨è¾¾å¼çš„è¡Œæ•°æ® ç›¸å½“å¿«é€Ÿï¼‰\nVimfilerå¸¸ç”¨å¿«æ·é”®\nHä½œç”¨æ‰“å¼€shell xæ‰“å¼€æ–‡ä»¶å¤¹çš„æ„æ€ Læ‰“å¼€ç£ç›˜ Load \u0026amp;å›åˆ°projectç›®å½• é‚£æ˜¯ç›¸å½“æœ‰ç”¨çš„ ~å›åˆ°.vimç›®å½• eç¼–å†™æ–‡ä»¶ N åˆ›å»ºæ–‡ä»¶ Kåˆ›å»ºæ–‡ä»¶å¤¹ #å…¨é€‰ *å…¨éƒ¨é€‰ï¼Ÿ cå¤åˆ¶ dåˆ é™¤ mç§»åŠ¨ å…ˆç”¨mè¡¨ç¤ºé€‰å®š ç„¶ådåˆ é™¤(é‡è¦æ“ä½œ) mç§»åŠ¨ cå¤åˆ¶  æœ‰æ„æ€çš„æ˜¯,\nä½¿ç”¨mç„¶årï¼Œå¯ä»¥è·³å‡ºä¸€ä¸ªæ–°çš„ç¼–è¾‘çª—å£ï¼Œè¿›è¡Œæ–‡ä»¶åçš„ä¿®æ”¹ï¼Œè¿™æ˜¯ç›¸å½“å¥½çš„å®ç°ã€‚\n:Vimwiki2HTML â€“ Convert current wiki page to HTML :VimwikiAll2HTML â€“ Convert all your wiki pages to HTMLè½¬åŒ–ä¸ºHTML  4. Startify Plugin Github Repo: click here \n##vim å…¨å±\nlet w:full_screen=0 map :call FullScreen() func! FullScreen() if w:full_screen==1 let w:full_screen=0 :simalt ~R else :simalt ~X let w:full_screen=1 endif endfunc  ##vim-easy-alignå¸¸ç”¨å‘½ä»¤\nvim help: :h easyalign\nvip= Enter= EnterEnter=(å±…å³ï¼Œå±…ä¸­ï¼Œå±…å·¦å¯¹å…¶é€‰é¡¹ )\ngaip= --------------+-------------------------------------------------------------------- Delimiter key | Description/Use cases ~ --------------+-------------------------------------------------------------------- \u0026lt;Space\u0026gt; | General alignment around whitespaces `:` | Suitable for formatting JSON or YAML `=` | Operators containing equals sign ( `=` , `==,` `!=` , `+=` , `\u0026amp;\u0026amp;=` , ...) `.` | Multi-line method chaining `,` | Multi-line method arguments `\u0026amp;` | LaTeX tables (matches `\u0026amp;` and `\\\\` ) `#` | Ruby/Python comments `\u0026quot;` | Vim comments \u0026lt;Bar\u0026gt; | Table markdown --------------+-------------------------------------------------------------------- ------------------+------------------------------------+-------------------- With visual map | Description | Equivalent command ~ ------------------+------------------------------------+-------------------- \u0026lt;Enter\u0026gt;\u0026lt;Space\u0026gt; | Around 1st whitespaces | :'\u0026lt;,'\u0026gt;EasyAlign\\ \u0026lt;Enter\u0026gt;2\u0026lt;Space\u0026gt; | Around 2nd whitespaces | :'\u0026lt;,'\u0026gt;EasyAlign2\\ \u0026lt;Enter\u0026gt;-\u0026lt;Space\u0026gt; | Around the last whitespaces | :'\u0026lt;,'\u0026gt;EasyAlign-\\ \u0026lt;Enter\u0026gt;-2\u0026lt;Space\u0026gt; | Around the 2nd to last whitespaces | :'\u0026lt;,'\u0026gt;EasyAlign-2\\ \u0026lt;Enter\u0026gt;: | Around 1st colon ( `key: value` ) | :'\u0026lt;,'\u0026gt;EasyAlign: \u0026lt;Enter\u0026gt;\u0026lt;Right\u0026gt;: | Around 1st colon ( `key : value` ) | :'\u0026lt;,'\u0026gt;EasyAlign:\u0026lt;l1 \u0026lt;Enter\u0026gt;= | Around 1st operators with = | :'\u0026lt;,'\u0026gt;EasyAlign= \u0026lt;Enter\u0026gt;3= | Around 3rd operators with = | :'\u0026lt;,'\u0026gt;EasyAlign3= \u0026lt;Enter\u0026gt;*= | Around all operators with = | :'\u0026lt;,'\u0026gt;EasyAlign*= \u0026lt;Enter\u0026gt;**= | Left-right alternating around = | :'\u0026lt;,'\u0026gt;EasyAlign**= \u0026lt;Enter\u0026gt;\u0026lt;Enter\u0026gt;= | Right alignment around 1st = | :'\u0026lt;,'\u0026gt;EasyAlign!= \u0026lt;Enter\u0026gt;\u0026lt;Enter\u0026gt;**= | Right-left alternating around = | :'\u0026lt;,'\u0026gt;EasyAlign!**= ------------------+------------------------------------+--------------------  ##vim-surround å¸¸ç”¨å‘½ä»¤\n1. cs\u0026quot;' 2. cs'\u0026quot; 3. cs'\u0026lt;q\u0026gt; 5. cs\u0026quot;t 4. cst\u0026quot; 6. ds\u0026quot; 7. ysiw\u0026quot; 8. yssb == yss) 9. S\u0026quot; å¯è§†åŒ–æ¨¡å¼é€‰æ‹©å¿« ç„¶åå¤§Sï¼Œè¿™ç‚¹ç±»ä¼¼äºMultiple-Cursorçš„Ctrl+Nå‘½ä»¤  vim copy file name ä½ ä½¿ç”¨vim-copy-filename \n\u0026quot;\u0026quot; for vim-copy-filename nmap \u0026lt;leader\u0026gt;cp :CopyRelativePath\u0026lt;CR\u0026gt; nmap \u0026lt;leader\u0026gt;cl :CopyRelativePathAndLine\u0026lt;CR\u0026gt; nmap \u0026lt;leader\u0026gt;cP :CopyAbsolutePath\u0026lt;CR\u0026gt; nmap \u0026lt;leader\u0026gt;cf :CopyFileName\u0026lt;CR\u0026gt; nmap \u0026lt;leader\u0026gt;cd :CopyDirectoryPath\u0026lt;CR\u0026gt;  é¢å¤–ä¸€äº›æ’ä»¶çš„å¤‡æ³¨\n Haya14busa  æä¾›çš„ incsearch  å¢åŠ äº†statuslineçš„æŸ¥æ‰¾è¯å½“å‰æ•° å’Œæ€»ä¸ªæ•° Vim-cursorword  è¡¨ç¤ºæ·»åŠ ä¸‹åˆ’çº¿ã€‚ AndrewRadev/splitjoin.vim  æ˜¯æä¾›ç±»ä¼¼äºperlçš„å½“è¡Œæ¨¡å¼çš„æ’ä»¶[gS gJ]ã€‚åœ¨schemeä¼°è®¡æ¯”è¾ƒå°‘ç”¨åˆ°ã€‚  ä¸€ç›´é—å¿˜çš„ä¸€ä¸ªå¿«æ·æŸ¥çœ‹å‘½ä»¤ Ctrl+E å¾€ä¸‹æ»šå± Ctrl+Y å¾€ä¸Šæ»šå±\nè¿è¡Œçš„è¯,è¿›å…¥åº•çº¿å‘½ä»¤æ¨¡å¼,ç”¨:!perl %å°±å¯ä»¥è¿è¡Œ,æˆ–è€…å¯ä»¥ç»‘å®šä¸€ä¸ªå¿«æ·é”®ç»„åˆ, %è¡¨ç¤ºå½“å‰æ–‡ä»¶çš„æ„æ€  æœ€åï¼Œç¼–è¾‘å™¨ç•Œé¢å±•ç¤ºçš„åº”å…¨æ˜¯ä»£ç ï¼Œä¸åº”è¯¥æœ‰å·¥å…·æ¡ã€èœå•ã€æ»šåŠ¨æ¡æµªè´¹ç©ºé—´çš„å…ƒç´ ï¼Œå¦å¤–ï¼Œç¼–ç¨‹æ˜¯ç§ç²¾ç¥é«˜åº¦é›†ä¸­çš„è„‘åŠ›åŠ³åŠ¨ï¼Œä¸åº”å‡ºç°é—ªçƒå…‰æ ‡ã€èŠ±å“¨é¼ æ ‡è¿™äº›åˆ†æ•£æ³¨æ„åŠ›çš„ä¸œä¸œ\nå†™åˆ°è¿™è¾¹æˆ‘å»ç¡è§‰äº†ï¼Œæ¢¦ä¸­æ¢¦åˆ°äº†å‰åŠè¾ˆå­æ¯”è¾ƒé‡è¦çš„ä¸‰ä¸ªå¥³äººï¼Œæˆ‘å¦ˆä»¥åŠå¦å¤–ä¸¤ä¸ªä»å°é•¿å¤§çš„å¦‡å¥³(ä¸è¯´å¥³ç”Ÿäº†),è¡—é“ä¸Šå¶é‡å¥¹ä»¬æ­£åœ¨ç«¯ç€ä¸€ä¸ªå†°ç›’æ²¿è¡—å‘é€ï¼Œä¹Ÿä¸åƒæ˜¯ç”Ÿäº†å­©å­ä¼¼çš„ï¼Œä½†æ¢¦ä¸­æ˜¯é‚£ä¹ˆçœŸå®åˆå¸¦ç€è™šçš„ä¸œè¥¿ï¼ˆæ‰€ä»¥äºº æ˜¯ä¸€ä¸ªæœ€ç²¾è‰¯çš„ä»ªå™¨ï¼Œæ‹¥æœ‰æœ€ç›´è§‰çš„ç¬¬å…­æ„Ÿï¼Œåˆæ‹¥æœ‰æœ€ä¼šæƒ¹äº‹çš„ç›´è§‰ï¼‰ï¼Œæˆ‘å¦ˆéª‘ç€è‡ªè¡Œè½¦ä»æˆ‘ä»¬ä¸‰èº«è¾¹èµ°è¿‡ï¼Œå‰æ–¹åˆå‡ºç°ä¸€ä¸ªç‰¹åˆ«æ´»æ³¼çš„\u0026quot;å¦‡å¥³\u0026quot;,åœ¨æˆ‘çš„ç¯å¢ƒä¸­è¿˜æœ‰ç¯®çƒè¿™ä¸€ä¸ªæ¦‚å¿µï¼Œæˆ‘çš„æ¢¦ï¼ˆç”±æˆ‘çš„èº«ä½“+ç™«ç—«çš„ç²¾ç¥çŠ¶æ€+ç–²æƒ«äº§ç”Ÿçš„ä¸€ç§ç»„åˆçš„äº‹ä»¶ï¼‰æŠŠæˆ‘å¸¦åˆ°ä¸€ä¸ªç¯®çƒåœºï¼Œåæ¥æˆ‘åˆå»äº† æˆ‘ä¸€ä¸ªå“¥ä»¬é‚£è¾¹ï¼Œç»ˆäºæœ‰ç”·çš„å‡ºç°ï¼Œæˆ‘å‘ç°æˆ‘èµ°è¿‡çš„è·¯æ€»æ˜¯ä¸ç¼ºä¹å¥³ç”Ÿ(æ‰€ä»¥æˆ‘æ˜¯è¶‹å‘äºå¥½è‰²ä¹‹å¾’,æœ¬æ¥ä¹Ÿæ˜¯), æˆ‘æ¢¦åˆ°äº†æˆ‘å„¿æ—¶çš„ é˜´å½±æˆ‘ç‰¹åˆ«æ€•çš„ä¸€ä¸ªç”·ç”Ÿï¼Œå–œæ¬¢æ‹¿åˆ€ç äººï¼ŒçŠ¯å†²ï¼Œç‰¹åˆ«å¥½æ–—ï¼Œä½†ç¼ºå°‘è„‘å­ã€‚æˆ‘å†™å‡ºæ¥äº†ï¼Œå› ä¸ºæˆ‘æƒ³å…‹æœå®ƒã€‚æ¢¦å‘é»„å¤§ä»™ä¸€æ ·ï¼Œå®ƒæ”¾å±çš„æ•ˆæœå…·æœ‰è‡´å¹»çš„æ•ˆæœï¼Œèƒ½è®©äººé™·å…¥å¹»å¢ƒä¸­ä¸å¾—è‡ªæ‹”ï¼Œäººæ¯å¤©æ™šä¸Šä¹Ÿåƒé»„å¤§ä»™é™„ä½“ä¸€æ ·åç€æ˜¥ç§‹å¤§æ¢¦ã€‚ ä½†ä»æˆ‘èº«è¾¹è·¯è¿‡çš„é‚£äº›å¥³ç”Ÿï¼Œéƒ½å·²ç»å˜å¾—ä¸çœŸå®ï¼Œæˆ‘èº«è¾¹æœ‰ä¸€ä¸ªwifeå¦‚èƒ¶ä¼¼æ¼†çš„é»ç€æˆ‘ï¼Œæ€ä¹ˆæˆ‘å°±ä¸æ‡‚çæƒœå‘¢ã€‚æ—¶ä»£çš„è¿›æ­¥ï¼Œéœ€è¦æ¢¦çš„å‚¬åŒ–ï¼Œä¸–ç•Œä¸Šæ— å¾·çš„ä¼ é”€æœºæ„ä¹Ÿåœ¨åˆ©ç”¨ç€æ´—è„‘åœ¨é“¸é€ ç€åŒä¸€ç±»äººï¼Œè¿™äº›äººæŠŠæ€ç»´å½“ä½œæ— è¶£ï¼Œè€Œéæ™ºè¶£ã€‚ åŒ†åŒ†è€Œè¿‡ä¸‰åè½½ï¼Œå²æœˆä¸é¥¶äººï¼Œä¹Ÿä¸ç­‰äºº(ä¹Ÿå°±æ˜¯ä½ å­¦ä¼šäº†ç”¨æ—¶é—´çš„éå®šå¸¸ç‰¹æ€§æ¥è§‚å¯Ÿäººç”Ÿï¼‰ã€‚ä¹è§‚ã€ä¸è‡ªä¿¡ä¸€ç›´ä¼´éšç€æˆ‘æˆé•¿ï¼Œç„¶è€Œæˆ‘å´ä¸çŸ¥é“ç—›è‹¦æ‰æ˜¯ç”Ÿæ´»çš„æœ¬æºï¼Œäº«å— ç—›è‹¦ï¼Œæ‰èƒ½æ‹¥æœ‰äº›è®¸çš„å¿«ä¹ã€‚Enjoy Painess!ä½†æˆ‘ä¸æƒ³æŠŠpainå¸¦ç»™äº²äººï¼Œèº«è¾¹çš„äººã€‚æˆ‘æ˜¯ä¸€ä¸ªè‡ªç§çš„äººï¼Œæ²¡æœ‰å›¢é˜Ÿç²¾ç¥ï¼Œä¸å¤ªä¼š æ›¿åˆ«äººè€ƒè™‘çš„äººï¼ˆå½“ç„¶è‡ªä»æœ‰äº†å¥¹ï¼Œæˆ‘å¾—æ›¿å¥¹è€ƒè™‘ï¼Œä½†æ˜¯è€ƒè™‘å¾—è¿˜å¾ˆå°‘ï¼Œæˆ‘å¾ˆå¯¹ä¸èµ·å¥¹ï¼‰ ä¹Ÿå°±æ˜¯ç”Ÿæ´»çš„æ™ºè¶£æºäºç—›è‹¦ï¼Œç—›è‹¦çš„æ ¹æºè¯ç”Ÿäº†æ—¶ä»£çš„è¿›æ­¥ï¼Œå’Œæ™ºè¶£çš„å‘å±•ã€‚ å†™åˆ°è¿™è¾¹ï¼Œå°±å…ˆåœç¬”æŠŠï¼Œç»§ç»­å›åˆ°vimå½“ä¸­ï¼Œä»–ä¹Ÿåƒäººï¼Œèƒ½å¤Ÿæ„ŸçŸ¥åˆ°å­—ç¬¦çš„å˜åŒ–ï¼Œæ„ŸçŸ¥æ–‡æœ¬ç»“æ„ï¼ˆä½ èµ‹äºˆäº†å®ƒæ€è€ƒçš„èƒ½åŠ›ï¼‰ï¼Œèƒ½å¤Ÿ è®©ä½ ç¼–è¾‘å¾—æ›´é¡ºç•…äº›;vimåƒåˆ€ã€äººä¹Ÿå¯ä»¥åƒåˆ€ï¼Œç£¨ç ºä½ è‡ªå·±è¿™æŠŠæœ€é‡è¦çš„ä¸€æŠŠåˆ€æŠŠï¼  å¿…ç„¶å¯¹å¶ç„¶ï¼Œè‡ªç”±å¯¹éšæœºï¼Œè‡ªç”±åœ¨å¿…ç„¶ä¸­ï¼Œéšæœºåœ¨å¶ç„¶ä¸­ï¼ŒåŸæ¥è¿™æ‰æ˜¯è‡ªç”±(èƒ¡æ­£è‡ªç”± æ˜¯æœ‰ä»£ä»·çš„)ã€‚\nåœ¨ç»ˆç«¯ä½¿ç”¨vimç¼–è¾‘å‘½ä»¤çš„æ–¹å¼ åœ¨~ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª.inputrcæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹\nset editing-mode vi Control-a: beginning-of-line Control-b: backward-char Control-d: delete-char Control-e: end-of-line Control-f: forward-char Control-k: kill-line Control-n: next-history Control-p: previous-history set keymap emacs-ctlx v: vi-editing-mode Control-v: \u0026quot;\\C-xv\\e\u0026quot; Escape: \u0026quot;\\C-xv\\e\u0026quot; set keymap emacs $if Bash Control-w: unix-filename-rubout $endif  ","date":1502616921,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1502616921,"objectID":"f539be948ff300c60f9f26cc6f77494b","permalink":"/blog/2017/08/13/what-vim-teaches-you/","publishdate":"2017-08-13T17:35:21+08:00","relpermalink":"/blog/2017/08/13/what-vim-teaches-you/","section":"archives","summary":"vimçœŸæ­£æ•™ä¼šäº†ä½ ä»€ä¹ˆï¼Ÿ vimå¸¦ç»™ä½ æ¿€æƒ…ï¼Œä¹Ÿç»™äº†ä½ ç”Ÿæ´»çš„æ™ºè¶£ï¼Œä»ä¸€å¼€å§‹ä½ ç»ƒä¹ Learn-vim-progressively ,å¹¶ä¸”ç°åœ¨è¿˜åœ¨ç»ƒä¹ ","tags":null,"title":"What Vim Teaches You?","type":"archives"},{"authors":null,"categories":["scheme"],"content":" The Little Scheme(TLS) æå‡ºäº†rember,multirember,multirember*ä»¥åŠmultirember\u0026amp;Col collectorç­‰ç³»åˆ—å‡½æ•°çš„å®šä¹‰ï¼Œè€Œåœ¨The Season Scheme(TSS) è¿›ä¸€æ­¥æ”¹è¿›äº†remberç³»åˆ—å‡½æ•°ï¼Œ ä½¿ç”¨letã€letrecã€letccè¿›è¡Œæ”¹å†™ï¼Œå¹¶ç»“åˆleftmostå’Œdeepå‡½æ•°çš„æƒ³æ³•ï¼Œåˆæå‡ºäº†remberçš„å‡½æ•°ï¼Œè¯¥å‡½æ•°è¡¨ç¤ºåˆ é™¤æœ€å·¦è¾¹çš„å‡½æ•°ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå‰–ææ¯ä¸€ä¸ªç®€å•çš„å‡½æ•°(å¹¶ç”±æ­¤å¸¦æ¥æ™ºè¶£)ï¼Œ å¹¶è¿›è¡Œæ”¹è¿›ï¼Œå‡çº§ï¼Œæç‚¼ï¼Œä»ä¸­å¯ä»¥ä½“å‘³åˆ°åç½—åºšè€å…ˆç”Ÿ è¯´çš„â€ä¹¦è¶Šè¯»è¶Šè–„ï¼Œå¹¶ç§¯åšè–„ä¹¦â€çš„æ„Ÿè§‰,ä»ç¹æ‚ä¸­æ„Ÿå—ç›´è§‚çš„æœ¬è´¨ï¼Œ å€Ÿä»¥ç†è§£äº‹ç‰©ï¼Œä»å¦å¤–ä¸€ä¸ªè§’åº¦çœ‹å¾…äº‹ç‰©ã€‚\nä¸€ã€The Little Scheme rember multirember multiremberStar multiremberStarCol äºŒã€The Season Scheme rember-let rember-letrec rember-letcc rember star depthStar improvement\nä¸€ã€The Little Scheme schemeçš„æ ¸å¿ƒæ•°æ®ç»“æ„æ˜¯Listï¼Œé€šè¿‡listè¿›è¡Œç®—æ³•çš„æ¼”ç®—ï¼Œè€Œremberæ˜¯å…¶ä¸­çš„ä¸€ç§ç®—æ³•ï¼Œç”¨äºå»é™¤å…¶ä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚ å¹¶åœ¨remberçš„åŒçº§å‡½æ•°ä¸­ï¼Œä¹Ÿå®šä¹‰äº†substï¼Œmemberï¼Œinsert left, insert rightç­‰ã€‚åœ¨TLSä¹¦ä¸­ä¹Ÿæå‡ºäº†è¿™äº›å‡½æ•°çš„ç›¸åŒä¹‹å¤„å¹¶æœ€ç»ˆä½¿ç”¨insert-gæ¥ç»Ÿä¸€å„ä¸ªå‡½æ•°ï¼Œè¿™æ˜¯ä¸é”™çš„æ€æƒ³ã€‚\n1.1 rember (define rember-f (lambda (test?) (lambda (a lat) (cond ((null? lat) '()) ((test? a (car lat)) (cdr lat)) (else (cons (car lat) ((multirember-f test?) a (cdr lat))))))))  Another related procedures:\n(define insertL (lambda (new old lat) (cond ((null? lat) '()) ((eq? (car lat) old) (cons new (cons old (cdr lat)))) (else (cons new (insertL new old (cdr lat))))))) (define insertLR (lambda (new oldL oldR lat) (cond ((null? lat) '()) ((eq? (car lat) oldL) (cons new (cons oldL (cdr lat)))) ((eq? (car lat) oldR) (cons oldR (cons new (cdr lat)))) (else (cons (car lat) (insertLR new oldL oldR (cdr lat)))))))  è¿›ä¸€æ­¥å¯ä»¥å‚è€ƒ TLS and TSS Backup \nä¸ºäº†æ›´è¿›ä¸€æ­¥åˆ é™¤ä¸€ä¸ªåˆ—è¡¨(æœªåµŒå¥—å¤šä¸ªlist)æ—¶å€™æ‰€æœ‰çš„å…ƒç´ (å®šä¹‰ä¸ºlat version)\n1.2 multirember (define multirember-f (lambda (test?) (lambda (a lat) (cond ((null? lat) '()) ((test? a (car lat)) ((multirember-f test?) a (cdr lat))) (else (cons (car lat) ((multirember-f test?) a (cdr lat))))))))  Another related procedures:\n(define multiinsertLR (lambda (new oldL oldR lat) (cond ((null? lat) '()) ((eq? (car lat) oldL) (cons new (cons oldL (multiinsertLR new oldL oldR (cdr lat))))) ((eq? (car lat) oldR) (cons oldR (cons new (multiinsertLR new oldL oldR (cdr lat))))) (else (cons (car lat) (multiinsertLR new oldL oldR (cdr lat))))))) ;(insertL 'a 'b '(a b c (a b c))) ;'(a a b c (a b c)) ;(insertLR 'water 'a 'b '(a bc b c d (a c b))) ;'(water a bc b c d (a c b)) (multiinsertLR 'water 'a 'b '(a b c d a b (a b c d))) '(water a b water c d water a b water (a b c d)) \u0026gt; (insertLR 'water 'a 'b '(a b c d a b (a b c d))) '(water a b c d a b (a b c d))  1.3 multirember* (define multiinsertLR* (lambda (new oldL oldR lat) (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) (cond ((null? lat) '()) ((atom? (car lat)) (cond ((eq? (car lat) oldL) (cons new (cons oldL (multiinsertLR* new oldL oldR (cdr lat))))) ((eq? (car lat) oldR) (cons oldR (cons new (multiinsertLR* new oldL oldR (cdr lat))))) (else (cons (car lat) (multiinsertLR* new oldL oldR (cdr lat)))))) (else (cons (multiinsertLR* new oldL oldR (car lat)) (multiinsertLR* new oldL oldR (cdr lat))))))) (define evens-only* (lambda (l) (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) (cond ((null? l) '()) ((atom? (car l)) (cond ((even? (car l)) (cons (car l) (evens-only* (cdr l)))) (else (evens-only* (cdr l))))) (else (cons (evens-only* (car l)) (evens-only* (cdr l))))))) \u0026gt; (multiinsertLR* 'water 'a 'b '(a b c d a b (a b c d))) '(water a b water c d water a b water (water a b water c d)) \u0026gt; (multiinsertLR 'water 'a 'b '(a b c d a b (a b c d))) '(water a b water c d water a b water (a b c d))  Another related procedures:\n(define multiinsertLR*let (lambda (new oldL oldR lat) (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) (cond ((null? lat) '()) ((atom? (car lat)) (let ((rest (multiinsertLR* new oldL oldR (cdr lat)))) (cond ((eq? (car lat) oldL) (cons new (cons oldL rest))) ((eq? (car lat) oldR) (cons oldR (cons new rest))) (else (cons (car lat) rest))))) (else (let ((first (multiinsertLR* new oldL oldR (car lat))) (rest (multiinsertLR* new oldL oldR (cdr lat)))) (cons first rest)))))) (define multiinsertLR*letrec (lambda (new oldL oldR lat) (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) (define mul-help (lambda (lat) (cond ((null? lat) '()) ((atom? (car lat)) (cond ((eq? (car lat) oldL) (cons new (cons oldL (mul-help (cdr lat))))) ((eq? (car lat) oldR) (cons oldR (cons new (mul-help (cdr lat))))) (else (cons (car lat) (mul-help (cdr lat)))))) (else (cons (mul-help (car lat)) (mul-help (cdr lat))))))) (mul-help lat))) \u0026gt; (multiinsertLR*let 'water 'a 'b '(a b c d a b (a b c d))) '(water a b water c d water a b water (water a b water c d)) \u0026gt; (multiinsertLR* 'water 'a 'b '(a b c d a b (a b c d))) '(water a b water c d water a b water (water a b water c d)) \u0026gt; (multiinsertLR 'water 'a 'b '(a b c d a b (a b c d))) '(water a b water c d water a b water (a b c d)) (multiinsertLR*letrec 'water 'a 'b '(a b c d a b (a b c d))) '(water a b water c d water a b water (water a b water c d)) (define multiinsertLR*letreclet (lambda (new oldL oldR lat) (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) (define mul-help (lambda (lat) (cond ((null? lat) '()) ((atom? (car lat)) (let ((rest (mul-help (cdr lat)))) (cond ((eq? (car lat) oldL) (cons new (cons oldL rest))) ((eq? (car lat) oldR) (cons oldR (cons new rest))) (else (cons (car lat) rest))))) (else (let ((first (mul-help (car lat))) (rest (mul-help (cdr lat)))) (cons first rest)))))) (mul-help lat))) (multiinsertLR*letreclet 'water 'a 'b '(a b c d a b (a b c d))) '(water a b water c d water a b water (water a b water c d))  1.4 multiremberstar and collector (define multirember*co (lambda (a lat col) (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) (cond (( null? lat) (col (quote ()) (quote ()))) ((atom? (car lat)) (cond ((eq? ( car lat) a) (multirember*co a (cdr lat) (lambda ( newlat seen) (col newlat (cons (car lat) seen))))) (else (multirember*co a (cdr lat) (lambda (newlat seen) (col (cons (car lat) newlat) seen)))))) (else (multirember*co a (car lat) (lambda (al as) (multirember*co a (cdr lat) (lambda (dl ds) (col (cons al dl) (cons as ds))))))))))  Another related procedures:\n(define col (lambda (x y) (null? y))) (define a-friend (lambda (x y) (length x))) (define a-friend-y (lambda (x y) (length y))) (define a-friend-z (lambda (x y) (cons x (cons y '())))) (define a-friend-zp (lambda (x y z) (cons x (cons y (cons z '()))))) (define evens-only*col (lambda (l col) (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) (cond ((null? l) (col '() 1 0)) ((atom? (car l)) (cond ((even? (car l)) (evens-only*col (cdr l) (lambda (newlat L R) (col (cons (car l) newlat) (* (car l) L) R)))) (else (evens-only*col (cdr l) (lambda (newlat L R) (col newlat L (+ (car l) R))))))) (else (evens-only*col (car l) (lambda (al ale ari) (evens-only*col (cdr l) (lambda (dl dle dri) (col (cons al dl) (* ale dle) (+ ari dri)))))))))) (define multiinsertLRo (lambda (new oldL oldR lat col) (cond ((null? lat) (col '() 0 0)) ((eq? (car lat) oldL) (multiinsertLRo new oldL oldR (cdr lat) (lambda (newlat L R) (col (cons new (cons oldL newlat)) (+ L 1) R)))) ((eq? (car lat) oldR) (multiinsertLRo new oldL oldR (cdr lat) (lambda (newlat L R) (col (cons oldR (cons new newlat)) L (+ R 1))))) (else (multiinsertLRo new oldL oldR (cdr lat) (lambda (newlat L R) (col (cons (car lat) newlat) L R))))))) (define multiinsertLR*o (lambda (new oldL oldR lat col) (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) (cond ((null? lat) (col '() 0 0)) ((atom? (car lat)) (cond ((eq? (car lat) oldL) (multiinsertLR*o new oldL oldR (cdr lat) (lambda (newlat L R) (col (cons new (cons oldL newlat)) (+ L 1) R)))) ((eq? (car lat) oldR) (multiinsertLR*o new oldL oldR (cdr lat) (lambda (newlat L R) (col (cons oldR (cons new newlat)) L (+ R 1))))) (else (multiinsertLR*o new oldL oldR (cdr lat) (lambda (newlat L R) (col (cons (car lat) newlat) L R)))))) (else (multiinsertLR*o new oldL oldR (car lat) (lambda (al ale ari) (multiinsertLR*o new oldL oldR (cdr lat) (lambda (dl dle dri) (col (cons al dl) (+ ale dle) (+ ari dri))))))))))  äºŒã€The Season Scheme ç”±memberå’Œremberåˆå¯ä»¥æ·±å…¥è¿›è¡Œå‰–æï¼Œäºæ˜¯å¼•è¿›äº†memberçš„å‡çº§ç‰ˆæœ¬two-in-a-lat,æœªåŒ…å«TSSçš„æœ€åä¸€ä¸ªtwo-in-a-latçš„å®ç°ï¼Œå¹¶é€šè¿‡let,letrec,letccæ”¹å†™TLSä¸­çš„remberç³»åˆ—å‡½æ•°ï¼Œåœ¨ç»“åˆleftmostå’Œdeep(Later on,deepæœ‰ä¸¤å¤–ä¸€å±‚æ„æ€å°±æ˜¯äº§ç”Ÿnå±‚çš„pizza)å‡½æ•°ï¼Œå‡çº§remberåˆ°åˆ é™¤æœ€å·¦è¾¹çš„ä¸€ä¸ªå…ƒç´ ã€‚\nMemberå®é™…ä¸Šåœ¨æ‰€æœ‰çš„å‡½æ•°çš„å®ç°ä¸­éƒ½æœ‰å¯¹åº”çš„ç»„æˆï¼Œä»–æ˜¯ä¸€ä¸ªååˆ†é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼ŒåŒ…æ‹¬åŸºäºmemberçš„union,intersect,intersectallå‡½æ•°çš„ï¼Œä¸€ä¸ªç›¸å¯¹åŸºç¡€çš„å‡½æ•°ã€‚ the definition of member\n(define member? (lambda (a lat) (cond ((null? lat) #f) (else (or (eq? a (car lat)) (member a (cdr lat))))))) ; member-letrec version (define member? (lambda (a l) (letrec ((yes? (lambda (l) (cond ((null? l) #f) ((eq? (car l) a) #t) (else (yes? (cdr l))))))) (yes? l))))  ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹two-in-a-latçš„å¼•ç”³(é€šè¿‡member) Two -in -a -lat\nåŒ…å«two-in-a-lat(ç”¨member2ä»£æ›¿),å¹¶é™„åŠ sum-of-prefixå’Œscrambleå‡½æ•°çš„å®ç°ï¼Œç›®çš„æ˜¯è¯´å¦‚æœä½ æƒ³è®©å‡½æ•°çŸ¥é“é¢å¤–çš„ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡å¢åŠ å‚æ•°çš„æ–¹æ³•ã€‚\n(define member-letrec-ju? (lambda (a lat) (letrec ((yes? (lambda (l) (cond ((null? l) #f) (else (or (eq? a (car l)) (yes? a (cdr l)))))))) (yes? lat)))) (define member2? (lambda (preceding lat) (cond ((null? lat) #f) (else (or (eq? preceding (car lat)) (member2? (car lat) (cdr lat))))))) ;;; (member2? 'a '(a b c)) bugs! (define memberContinue? (lambda (lat) (define M2? (lambda (preceding lat) (cond ((null? lat) #f) (else (or (eq? preceding (car lat)) (M2? (car lat) (cdr lat))))))) (M2? '() lat))) (define memberContinueAlter? (lambda (lat) (letrec ((M2? (lambda (preceding lat) (cond ((null? lat) #f) (else (let ((pre (car lat))) (or (eq? preceding pre) (M2? pre (cdr lat))))))))) (M2? '() lat)))) (define sum-of-prefixes (lambda (tup) (define sum-of-prefixes-b (lambda (sonssf tup) ; sonssf stands for 'sum of numbers seen so far' (cond ((null? tup) '()) (else (cons (+ sonssf (car tup)) (sum-of-prefixes-b (+ sonssf (car tup)) (cdr tup))))))) (sum-of-prefixes-b 0 tup))) ; (sum-of-prefixes '(1 2 3 4)) ; '(1 3 6 10) (define sum-of-prefixes1 (lambda (tup) (letrec ((S (lambda (sss tup) (cond ((null? tup) '()) (else (let ((first (car tup))) (cons (+ sss first) (S (+ sss first) (cdr tup))))))))) (S 0 tup)))) (define scramble-b (lambda (tup rev-pre) (define one? (lambda (n) (= n 1))) (define sub1 (lambda (n) (- n 1))) (define pick (lambda (n lat) (cond ((one? n) (car lat)) (else (pick (sub1 n) (cdr lat)))))) (cond ((null? tup) '()) (else (cons (pick (car tup) (cons (car tup) rev-pre)) (scramble-b (cdr tup) (cons (car tup) rev-pre))))))) (define scramble (lambda (tup) (letrec ((scramble-b (lambda (tup rev-pre) (define one? (lambda (n) (= n 1))) (define sub1 (lambda (n) (- n 1))) (define pick (lambda (n lat) (cond ((one? n) (car lat)) (else (pick (sub1 n) (cdr lat)))))) (cond ((null? tup) '()) (else (let ((first (car tup))) (cons (pick first (cons first rev-pre)) (scramble-b (cdr tup) (cons first rev-pre))))))))) (scramble-b tup '())))) (define scramble2 (lambda (tup) (letrec ((one? (lambda (n) (= n 1))) (sub1 (lambda (n) (- n 1))) (pick (lambda (n lat) (cond ((one? n) (car lat)) (else (pick (sub1 n) (cdr lat)))))) (scramble-b (lambda (tup rev-pre) (cond ((null? tup) '()) (else (let ((first (car tup))) (cons (pick first (cons first rev-pre)) (scramble-b (cdr tup) (cons first rev-pre))))))))) (scramble-b tup '()))))  ##2.1 rember-let\nNote: use let to define the repeated expression, so simplify the definition of the procedure.\n2.2 rember-letrec ;;; see at the TSS (define rember (lambda (a lat) (letrec ((R (lambda (lat) (cond ((null? lat) '()) ((eq? (car lat) a) (cdr lat)) (else (cons (car lat) (R (cdr lat)))))))) (R lat))))  å¦‚æœæˆ‘ä»¬æƒ³è¦è¿›ä¸€æ­¥å®ç°rember-beyond-first(ä¿ç•™åˆ é™¤å…ƒç´ ä¹‹å‰çš„æ‰€æœ‰å…ƒç´ )å’Œrember-upto-last(åªä¿ç•™åˆ é™¤å…ƒç´ ä¹‹åçš„å…ƒç´ )\n2.3 rember-letcc Rember-Beyond-first\n; The rember-beyond-first function rembers everything beyond first match ; (define rember-beyond-first (lambda (a lat) (letrec ((R (lambda (lat) (cond ((null? lat) '()) ((eq? (car lat) a) '()) (else (cons (car lat) (R (cdr lat)))))))) (R lat)))) (rember-beyond-first 'roots '(noodles spaghetti spatzle bean-thread roots potatoes yam others rice)) ; ==\u0026gt; '(noodles spaghetti spaghetti bean-thread) Rember-upto-last (define-syntax letcc (syntax-rules () ((letcc ?k ?body ...) (call/cc (lambda (?k) ?body ...))))) (define rember-upto-last (lambda (a lat) ; Look Ma, no cons (letcc skip (letrec ((R (lambda (l) (cond ((null? l) (void)) (else (let () (R (cdr l)) (cond ((eq? a (car l)) (skip (cdr l))) (else (void))))))))) (R lat) lat)))) (rember-upto-last 'roots '(noodles spaghetti spatzle bean-thread roots potatoes yam others rice)) ; ==\u0026gt; '(potatoes yam others rice)  2.4 remberstar the definition of leftmost\n(define leftmost-fixed-let (lambda (l) (cond ((null? l) '()) ((atom? (car l)) (car l)) (else (let ((a (leftmost-fixed (car l)))) (cond ((atom? a) a) (else (leftmost-fixed (cdr l))))))))) ;(leftmost-fixed-let '((() a b) (c d))) ;; bug fixed ; ;(leftmost-fixed-let '(((y) b) (c d))) ; 'y ;(leftmost-fixed-let '(((y) ()) () (e))) ; 'y ;(leftmost-fixed-let '(((() y) ()))) ; 'y ;(leftmost-fixed-let '(((()) ()))) ; '() ;;letcc version (define leftmost-letcc (letrec ((lm (lambda (l out) (cond ((null? l) '()) ((atom? (car l)) (out (car l))) (else (begin (lm (car l) out) (lm (cdr l) out))))))) (lambda (l) (call-with-current-continuation (lambda (skip) (lm l skip))))))  the definition of deep\n(define deep (lambda (m) (cond ((zero? m) 'pizza) (else (cons (deep (sub1 m)) '()))))) (define toppings 0) (define deepB (lambda (m) (cond ((zero? m) (call-with-current-continuation (lambda (jump) (set! toppings jump) 'pizza))) (else (cons (deepB (sub1 m)) '()))))) (define deep\u0026amp;co (lambda (m k) (cond ((zero? m) (k 'pizza)) (else (deep\u0026amp;co (sub1 m) (lambda (x) (k (cons x '())))))))) (deep\u0026amp;co 0 (lambda (x) x)) ; 'pizza (deep\u0026amp;co 6 (lambda (x) x)) ; '((((((pizza)))))) (deep\u0026amp;co 2 (lambda (x) x)) ; '((pizza)) (define deep\u0026amp;coB (lambda (m k) (cond ((zero? m) (let () (set! toppings k) (k 'pizza))) (else (deep\u0026amp;coB (sub1 m) (lambda (x) (k (cons x '())))))))) (deep\u0026amp;coB 6 (lambda (x) x)) ; '((((((pizza)))))) (deep\u0026amp;coB 4 (lambda (x) x)) ; '((((pizza))))  æ¥ä¸‹æ¥ï¼Œå†çœ‹çœ‹ç”±leftmostç»“åˆremberå¾—åˆ°rember star.\n; The rember1* function removes the leftmost occurrence of a in l ; (define rember1* (lambda (a l) (cond ((null? l) '()) ((atom? (car l)) (cond ((eq? (car l) a) (cdr l)) (else (cons (car l) (rember1* a (cdr l)))))) (else (cond ((equal? (rember1* a (car l)) (car l)) ; if the list with 'a' removed doesn't change (cons (car l) (rember1* a (cdr l)))) ; then recurse (else (cons (rember1* a (car l)) (cdr l)))))))) ; otherwise remove 'a' ; Examples of rember1* ; (rember1* 'salad '((Swedish rye) (French (mustard salad turkey)) salad)) ; ==\u0026gt; '((Swedish rye) (French (mustard turkey)) salad) (rember1* 'meat '((pasta meat) pasta (noodles meat sauce) meat tomatoes)) ; ==\u0026gt; '((pasta) pasta (noodles meat sauce) meat tomatoes)  ä¸‹é¢æ˜¯letrec version of rember1\n(define rember1*-letrec (lambda (a l) (letrec ((R (lambda (l) (cond ((null? l) '()) ((atom? (car l)) (let ((first (car l)) (second (cdr l))) (cond ((eq? first a) second) (else (cons first (R second)))))) (else (let ((first (car l)) (second (cdr l))) (cond ((equal? (R first) first) ; if the list with 'a' removed doesn't change (cons first (R second))) ; then recurse (else (cons (R first) second))))))))) ; otherwise remove 'a' (R l)))) (rember1*-letrec 'salad '((Swedish rye) (French (mustard salad turkey)) salad)) (rember1*-letrec 'meat '((pasta meat) pasta (noodles meat sauce) meat tomatoes))  the version of letcc (æˆ‘æš‚æ—¶ä¸å¤ªç†è§£)\n; rember1* via letcc ; (define rember1*-letcc (lambda (a l) (letrec ((rm (lambda (a l oh) (cond ((null? l) (oh 'no)) ((atom? (car l)) (if (eq? (car l) a) (cdr l) (cons (car l) (rm a (cdr l) oh)))) (else (let ((new-car (call-with-current-continuation (lambda (oh) (rm a (car l) oh))))) (if (atom? new-car) (cons (car l) (rm a (cdr l) oh)) (cons new-car (cdr l))))))))) (let ((new-l (call-with-current-continuation (lambda (oh) (rm a l oh))))) (if (atom? new-l) l new-l))))) ; Tests of rember1*-letcc ; (rember1*-letcc 'salad '((Swedish rye) (French (mustard salad turkey)) salad)) ; ==\u0026gt; '((Swedish rye) (French (mustard turkey)) salad) (rember1*-letcc 'meat '((pasta meat) pasta (noodles meat sauce) meat tomatoes)) ; ==\u0026gt; '((pasta) pasta (noodles meat sauce) meat tomatoes) (rember1*-letcc 'a '((foo bar) baz)) ; ==\u0026gt; '((foo bar) baz)  the definition of union\n(define union2 (lambda (set1 set2) (letrec ((member? (lambda (a lat) (cond ((null? lat) #f) ((eq? a (car lat)) #t) (else (member? a (cdr lat)))))) (A (lambda (set1) (cond ((null? set1) set2) (else (let ((p1 (A (cdr set1)))) (if (member? (car set1) set2) p1 (cons (car set1) p1)))))))) (A set1)))) (union2 '(a b c) '(c d e f))  the definition of intersect\n(define intersect (lambda (set1 set2) (cond ((null? set1) '()) ; don't forget the 1st commandment ((member? (car set1) set2) (cons (car set1) (intersect (cdr set1) set2))) (else (intersect (cdr set1) set2))))) ; Examples of intersect ; ;(intersect '(a b x c d) '(q w e x r t y a)) ; '(a x) ;(intersect '(a b x c d) '()) ; '() ;(intersect '() '()) ; '() ;(intersect '() '(a b x c d)) ; '() ;(intersect '(a b x c d) '(a b x c d)) ; '(a b x c d)  intersect letrec version\nuse letrec to remove arguments that do not change for recursive applications\n(define intersect-letrec (lambda (set1 set2) (letrec ((I (lambda (set) (cond ((null? set) '()) ((member? (car set) set2) (cons (car set) (I (cdr set)))) (else (I (cdr set))))))) (I set1)))) ; Test of intersect-letrec ; ;(intersect-letrec '(a b x c d) '(q w e x r t y a)) ; '(a x) ;(intersect-letrec '(a b x c d) '()) ; '() ;(intersect-letrec '() '()) ; '() ;(intersect-letrec '() '(a b x c d)) ; '() ;(intersect-letrec '(a b x c d) '(a b x c d)) ; '(a b x c d)  the definition of intersectall\n; The intersectall function finds intersect of a bunch of sets ; (define intersectall (lambda (lset) (cond ((null? lset) '()) ((null? (cdr lset)) (car lset)) (else (intersect (car lset) (intersectall (cdr lset))))))) ; Examples of intersectall ; ;(intersectall '((a) (a) (a))) ; '(a) ;(intersectall '((a) () (a))) ; '() ;(intersectall '()) ; '() ;(intersectall '((a b c d) (b c d e) (c d e f))) ; '(c d) ; Obeying the 12th commandment ; (define intersectall-letrec (lambda (lset) (letrec ((A (lambda (lset) (cond ((null? (cdr lset)) (car lset)) (else (intersect (car lset) (A (cdr lset)))))))) (cond ((null? lset) '()) (else (A lset)))))) ; Tests of intersectall-letrec ;; ;(intersectall-letrec '((a) (a) (a))) ; '(a) ;(intersectall-letrec '((a) () (a))) ; '() ;(intersectall-letrec '()) ; '() ;(intersectall-letrec '((a b c d) (b c d e) (c d e f))) ; '(c d) (define intersectall-ap (lambda (lset) (call-with-current-continuation (lambda (hop) (letrec ((A (lambda (lset) (cond ((null? (car lset)) (hop '())) ((null? (cdr lset)) (car lset)) (else (I (car lset) (A (cdr lset))))))) (I (lambda (s1 s2) (letrec ((J (lambda (s1) (cond ((null? s1) '()) ((member? (car s1) s2) (cons (car s1) (J (cdr s1)))) (else (J (cdr s1))))))) (cond ((null? s2) (hop '())) (else (J s1))))))) (cond ((null? lset) '()) (else (A lset)))))))) ; Tests of intersectall-ap ; ;(intersectall-ap '((a) (a) (a))) ; '(a) ;(intersectall-ap '((a) () (a))) ; '() ;(intersectall-ap '()) ; '() ;(intersectall-ap '((a b c d) (b c d e) (c d e f))) ; '(c d)  æœ€åå†é€è¿‡deep starçš„å†™æ³•ä¼˜åŒ–è¿‡ç¨‹æ¥ä½“ä¼šTSSçš„å‡½æ•°ç²¾é«“ã€‚ depthStar improvement\né€šè¿‡depthè¿›ä¸€æ­¥é˜é‡Šletrecçš„æ„ä¹‰ï¼ˆä»åŸå§‹çš„depthåˆ°depth-let ç„¶ådepth-let-ifï¼Œä»¥åŠæ›´ä¸ºæ¸…æ™°ç‰ˆæœ¬çš„depth-let-max,ç„¶åæœ€åæµ“ç¼©åˆ°æœ€åçš„6è¡Œä»£ç depth-maxã€‚ depth\n; The depth* function finds the max depth of an s-expression ; (define depth* (lambda (l) (cond ((null? l) 1) ((atom? (car l)) (depth* (cdr l))) (else (cond ((\u0026gt; (depth* (cdr l)) (add1 (depth* (car l)))) (depth* (cdr l))) (else (add1 (depth* (car l))))))))) (depth* '((pickled) peppers (peppers pickled))) ; 2 (depth* '(margarine ((bitter butter) (makes) (batter (bitter))) butter)) ; 4 (depth* '(c (b (a b) a) a)) ; 3  let version: depth-let\n(define depth*-let (lambda (l) (cond ((null? l) 1) ((atom? (car l)) (depth*-let (cdr l))) (else (let ((rightPart (depth*-let (cdr l))) (leftPart (add1 (depth*-let (car l))))) (cond ((\u0026gt; rightPart leftPart) rightPart) (else leftPart))))))) (depth*-let '((pickled) peppers (peppers pickled))) ; 2 (depth*-let '(margarine ((bitter butter) (makes) (batter (bitter))) butter)) ; 4 (depth*-let '(c (b (a b) a) a)) ; 3  let-if version: depth-let-if\n(define depth*-let-if (lambda (l) (cond ((null? l) 1) ((atom? (car l)) (depth*-let-if (cdr l))) (else (let ((rightPart (depth*-let-if (cdr l))) (leftPart (add1 (depth*-let-if (car l))))) (if (\u0026gt; rightPart leftPart) rightPart leftPart)))))) (depth*-let-if '((pickled) peppers (peppers pickled))) ; 2 (depth*-let-if '(margarine ((bitter butter) (makes) (batter (bitter))) butter)) ; 4 (depth*-let-if '(c (b (a b) a) a)) ; 3 depth-let-max version: depth-let-max  define depth*-let-max (lambda (l) (cond ((null? l) 1) ((atom? (car l)) (depth*-let-max (cdr l))) (else (let ((rightPart (depth*-let-max (cdr l))) (leftPart (add1 (depth*-let-max (car l))))) (max rightPart leftPart)))))) (depth*-let-max '((pickled) peppers (peppers pickled))) ; 2 (depth*-let-max '(margarine ((bitter butter) (makes) (batter (bitter))) butter)) ; 4 (depth*-let-max '(c (b (a b) a) a)) ; 3 depth-max version: depth-max (define depth*-max (lambda (l) (cond ((null? l) 1) ((atom? (car l)) (depth*-max (cdr l))) (else (max (depth*-max (cdr l)) (add1 (depth*-max (car l)))))))) (depth*-max '((pickled) peppers (peppers pickled))) ; 2 (depth*-max '(margarine ((bitter butter) (makes) (batter (bitter))) butter)) ; 4 (depth*-max '(c (b (a b) a) a)) ; 3  å¸¸ç”¨é“¾æ¥ï¼Œ\nSchemeæ¸…å•  Google racket User group  Gossip about the decision tree  GreghenderShoot 1970\n Github Repo  Fear of macro  Tell us the history of macro, overcome the fear of macro frog  one static website generator tool His Website  Tonyg\n Github Repo \n His opensource tools: Bitsyntax \n  racket freenote robot, Gossip Platform  Husk scheme\n husk repo  husk get started  chicken scheme  R5RS html file  root of lisp\n original site \n define implement \n  BTW, one very good vim tips, you can use Vimfiler , with shortkey m and then r to rename the file in the editor page.\n","date":1502453622,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1502453622,"objectID":"6da04cd99879abd6e812d77fce7628a8","permalink":"/blog/2017/08/11/from-little-scheme-to-season-scheme/","publishdate":"2017-08-11T20:13:42+08:00","relpermalink":"/blog/2017/08/11/from-little-scheme-to-season-scheme/","section":"archives","summary":"The Little Scheme(TLS) æå‡ºäº†rember,multirember,multirember*ä»¥åŠmultirember\u0026amp;Col collectorç­‰ç³»åˆ—","tags":null,"title":"From Little Scheme to Season Scheme","type":"archives"},{"authors":null,"categories":["CPS","racket"],"content":"é€šè¿‡deep\u0026amp;coB å’ŒdeepBçš„ä¸åŒCPSå®ç°ï¼Œè¯´æ˜letccç‰ˆæœ¬æ˜¯ç›´æ¥è·³å‡ºsurroundingï¼Œè€Œä¸ç®¡å‘¨è¾¹çš„å…¶ä»–è®¡ç®—ã€‚ å¹¶ä¸”å¯ä»¥è¿™æ ·è®¤ä¸ºæ‰€æœ‰çš„scheme lambdaè¡¨è¾¾å¼éƒ½å¯ä»¥ç†è§£ä¸ºknè¡¨è¾¾å¼çš„è¿‡ç¨‹(å¥½å¤„1)ï¼Œè¿™ç§ç›´è§‚çš„è§£é‡Šæ–¹ä¾¿ç†è§£ ç»•æ¥ç»•å»çš„è¿‡ç¨‹ã€‚å¹¶ä¸”cps styleå°¾å·´çš„kæ—¢å¯ä»¥æ˜¯å˜é‡ä¹Ÿå¯ä»¥æ˜¯å‡½æ•° (å¥½å¤„2)ã€‚\n1. æ™®é€šå½¢å¼ ;; Normal Form (define append2 (lambda (lisa lisb) (cond ((null? lisa) lisb) (else (cons (car lisa) (append2 (cdr lisa) lisb)))))) (define fact (lambda (n) (if (zero? n) 1 (* n (fact (- n 1)))))) (fact 4)  2. Tail form (define append3 (lambda (lisa lisb) (letrec ((ap2 (lambda (a b) (cond ((null? a) b) (else (ap2 (cdr a) (cons (car a) b))))))) (ap2 (reverse lisa) lisb)))) (define fact2 (lambda (n) (letrec ((fact-help (lambda (n help) (if (zero? n) help (fact-help (- n 1) (* n help)))))) (fact-help n 1)))) (fact2 4)  #3. deep\u0026amp;coB\n(define deep\u0026amp;coB (lambda (m k) (cond ((zero? m) (let () (set! toppings k) (k 'pizza))) (else (deep\u0026amp;coB (sub1 m) (lambda (x) (k (cons x '())))))))) (deep\u0026amp;coB 6 (lambda (x) x)) ; '((((((pizza)))))) (deep\u0026amp;coB 4 (lambda (x) x)) ; '((((pizza))))  cpsé£æ ¼ lambda(x) x ,å¯ä»¥ä½¿ç”¨k1 k2 k3 çš„é£æ ¼è¿›è¡Œæ›¿æ¢,cpsé£æ ¼ä»…ä»…æ˜¯ç¼–ç¨‹çš„é£æ ¼ï¼Œletccæ˜¯å…¶ä¸­çš„ä¸€ç§ä½“ç°.\n#4. deepB\nletccé£æ ¼ ç›´æ¥è·³å‡ºï¼ï¼ï¼ˆä¹Ÿå°±æ˜¯ä¸ç®¡å…¶ä»–è®¡ç®—ï¼Œç›´æ¥ä»–å°±æ˜¯è¿”å›å€¼ï¼ï¼ï¼‰\n(define toppings 0) (define deepB (lambda (m) (cond ((zero? m) (call-with-current-continuation (lambda (jump) (set! toppings jump) 'pizza))) (else (cons (deepB (sub1 m)) '())))))  #5. bons and kons\nè¿›ä¸€æ­¥ç†è§£cpsé£æ ¼ä¹Ÿå¯ä»¥çœ‹çœ‹konså’Œbonsçš„å®ç°\n#lang racket ; kons the magnificent ; (define kons (lambda (kar kdr) (lambda (selector) ; returns lambda (selector) (selector kar kdr)))) ; calls selector with kar and kdr arguments ; kar ; (define kar (lambda (c) ; applies selector on (a d) and returns 'a (car) (c (lambda (a d) a)))) ; kdr ; (define kdr (lambda (c) ; applies selector on (a d) and returns d (cdr) (c (lambda (a d) d)))) ; Examples of kons kar kdr ; (kar (kons 'a '())) ; 'a (kdr (kons 'a '())) ; '() (kar (kdr (kons 'a (kons 'b '())))) ; 'b (kar (kons 'a (kons 'b '()))) ; 'a ; Another cons ; (define bons (lambda (kar) (let ((kdr '())) (lambda (selector) (selector (lambda (x) (set! kdr x)) kar kdr))))) ; Another kar ; (define bar (lambda (c) (c (lambda (s a d) a)))) ; Another kdr ; (define bdr (lambda (c) (c (lambda (s a d) d)))) ; set-kdr ; (define set-kdr (lambda (c x) ((c (lambda (s a d) s)) x))) ; create kons using set-kdr and bons ; (define kons2 (lambda (a d) (let ((c (bons a))) (set-kdr c d) c))) ; Example of kons2 bar and bdr ; (bar (kons2 'a '(1 2 3))) ; 'a (bdr (kons2 'a '(1 2 3))) ; '(1 2 3) (define bad (lambda (x) (and (will-stop? bad) (eternity x)))) (define eternity (lambda (x) (eternity x)))   cpså˜æ¢æ•™ç¨‹  2 Y combinatoræ¨å¯¼  ","date":1502429110,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1502429110,"objectID":"84a0303994ab4fac32698ba76b9daf9a","permalink":"/blog/2017/08/11/cps-intutive/","publishdate":"2017-08-11T13:25:10+08:00","relpermalink":"/blog/2017/08/11/cps-intutive/","section":"archives","summary":"é€šè¿‡deep\u0026amp;coB å’ŒdeepBçš„ä¸åŒCPSå®ç°ï¼Œè¯´æ˜letccç‰ˆæœ¬æ˜¯ç›´æ¥è·³å‡ºsurroundingï¼Œè€Œä¸ç®¡å‘¨è¾¹çš„å…¶ä»–è®¡ç®—ã€‚ å¹¶ä¸”å¯ä»¥è¿™æ ·è®¤ä¸ºæ‰€æœ‰çš„scheme lambdaè¡¨è¾¾å¼éƒ½å¯ä»¥ç†è§£ä¸ºknè¡¨è¾¾å¼çš„è¿‡ç¨‹(å¥½å¤„1)ï¼Œè¿™ç§ç›´è§‚çš„è§£é‡Šæ–¹ä¾¿ç†è§£ ç»•æ¥ç»•å»çš„è¿‡ç¨‹ã€‚å¹¶ä¸”cps styleå°¾å·´çš„kæ—¢å¯ä»¥æ˜¯å˜é‡ä¹Ÿå¯ä»¥æ˜¯å‡½æ•° (å¥½å¤„2)ã€‚\n","tags":null,"title":"CPS Intutive","type":"archives"},{"authors":null,"categories":["fast"],"content":"åœ¨ä¹‹å‰çš„fastä½¿ç”¨ä¸­ä¸€ç›´æ²¡æœ‰ç¢°åˆ°ç¼–è¯‘proj fileå¤±è´¥çš„äº‹æƒ…ï¼Œä½†å†816å´å‡ºç°äº†ï¼Œäºæ˜¯æ·»åŠ äº†é¢å¤–çš„ç¼–è¯‘debugè·¯å¾„ï¼Œè§£å†³äº† é—®é¢˜ã€‚\n","date":1499266873,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1499266873,"objectID":"3b0c2a91e1e02ecb960c42336b657900","permalink":"/blog/2017/07/05/windows-fast0816bian-yi-shi-bai/","publishdate":"2017-07-05T23:01:13+08:00","relpermalink":"/blog/2017/07/05/windows-fast0816bian-yi-shi-bai/","section":"archives","summary":"åœ¨ä¹‹å‰çš„fastä½¿ç”¨ä¸­ä¸€ç›´æ²¡æœ‰ç¢°åˆ°ç¼–è¯‘proj fileå¤±è´¥çš„äº‹æƒ…ï¼Œä½†å†816å´å‡ºç°äº†ï¼Œäºæ˜¯æ·»åŠ äº†é¢å¤–çš„ç¼–è¯‘debugè·¯å¾„ï¼Œè§£å†³äº† é—®é¢˜ã€‚","tags":null,"title":"Windows FAST0816ç¼–è¯‘å¤±è´¥","type":"archives"},{"authors":null,"categories":["vim","awk","bash"],"content":"bashã€awkã€sedç­‰çš„å¥½å¤„ï¼Œå°±æ˜¯å¯ä»¥ä¸“ä¸€çš„å®Œæˆä½ çš„éœ€æ±‚ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨å¾ˆå¤šä¸è¶³ï¼Œå€Ÿç€æ‰¹é‡é‡å‘½ä»¤å’Œæ‰¹é‡å¯¼å‡ºé“¾æ¥åˆ°vimwikiçš„wikiä¸­ï¼Œå½¢æˆ[[local:æ–‡ä»¶åè·¯å¾„]]çš„è¿‡ç¨‹ï¼Œå·©å›ºå­¦ä¹ linuxå‘½ä»¤, it is homework(learning process)ã€‚\næå–è·¯å¾„ï¼Œç”¨äºvimwikiä¸­ï¼Œå½“ä½œå¿«é€Ÿé“¾æ¥ å¦‚æœIFSæ˜¯â€â€œï¼Œé‚£ä¹ˆç›¸å½“äºä¸€ä¸ªæ–‡ä»¶åç‰¹åˆ«é•¿ä¼šåˆ†æˆå¾ˆå¤šè¡Œæ˜¾ç¤ºï¼Œæ‰€ä»¥è¿™è¾¹è®¾ç½®ä¸º IFS=$â€˜\\nâ€™\n[a-z]staræ›¿æ¢åŸå…ˆçš„starï¼Œç›®çš„æ˜¯å»é™¤ç‚¹å·ã€‚ ä½¿ç”¨echoå’Œç®¡é“å‘½ä»¤ä¼ é€’ä¿¡æ¯ç»™sedæˆ–è€…awkç­‰ åœ¨sedä¸­ä¼¼ä¹ç”¨^$ç­‰ä½ç½®å­—ç¬¦è¿›è¡Œæ›¿æ¢,å¦‚æœæ˜¯æ–‡ä»¶å¤¹åˆ™è¿›è¡Œåå­—æ›¿æ¢ï¼Œå¹¶ä¸”éå†å½“å‰æ–‡ä»¶å¤¹ ä½¿ç”¨åŒé‡forå¾ªç¯è¿›è¡Œæ§åˆ¶\nIFS=$'\\n'; count=1; countDir=1; specialCharacter='pages'; generateChapter() # @Description : å¯¹ä¸åŒæ–‡ä»¶è¿›è¡Œä¸åŒå¤„ç† # @usage : generatechapter { # å¦™ç”¨find å¾—åˆ°å½“å‰ç›®å½•çš„ç›¸å¯¹è·¯å¾„ ä¸éœ€è¦ä¸æ–­çš„è¿›å…¥ç›®å½• for var2 in `find . -name \u0026quot;[a-z]*\u0026quot;` do if [[ -d $var2 ]] # \u0026lt; cannot . Error then #echo \u0026quot;fuck\u0026quot; var=`echo $var2|sed 's/^./F:\\/ScienceBase.Attachments\\/WindEnergy/g'|sed 's/^/[[local:/g'|sed 's/$/]]/g'` printf \u0026quot;= $countDir. [ ] $var =\\n\u0026quot; # ä½¿ç”¨#å·æ¥åˆ é™¤ä¹‹å‰çš„ç‚¹å· countDir=$(($countDir+1)); for tempVar in `find $var2 -name \u0026quot;*.pdf\u0026quot;` do temp1=`echo $tempVar|sed 's/^./F:\\/ScienceBase.Attachments\\/WindEnergy/g'` # # echo ${var2} ${var2:0:$((${var2}-18))}.pdf varr=`echo $temp1|sed 's/^/[[local:/g'|sed 's/$/]]/g'`; #var=`echo $var2|sed 's/^./F:\\/ScienceBase.Attachments\\/WindEnergy/g'|sed 's/^/[[local:/g'|sed 's/$/]]/g'` printf \u0026quot;\\t$count. [ ] ${varr}\\n\u0026quot; # è¿™è¾¹éœ€è¦å»é™¤åˆ°ç¬¬ä¸€ä¸ªç‚¹å·,è¿™æ˜¯æ‰å¾—åˆ°çš„å¤„ç†æ–¹æ³• count=$(($count+1)); done count=1; fi done } generateChapter  åˆ é™¤ä¸å¿…è¦çš„åå­—ç‰¹æ®Šå­—ç¬¦ï¼Œé‡å‘½å  åˆ é™¤æ–‡ä»¶pdfåå­—ä¸å¿…è¦çš„ï¼ˆpages 110â€”30ï¼‰ç­‰ä¿¡æ¯ã€‚ ä½¿ç”¨awk printfäº§ç”Ÿé€—å·åˆ†éš”å­—ç¬¦ä¸²ï¼Œä½¿ç”¨xargs -d, mvæå–ä»¥é€—å·åˆ†éš”çš„å­—æ®µï¼Œ å¹¶ä¸”å¯¹æ–‡ä»¶åè¿›è¡Œé‡å‘½åï¼ˆåœ¨æˆ‘æ‰¾çš„å¤šç§æ–¹æ³•ä¸­ï¼Œå°±ä»–æœ‰æ•ˆï¼‰ xargs -n 2 è¡¨ç¤ºæŒ‰ç…§ç©ºæ ¼åˆ’åˆ†çš„æ–¹å¼ æå–ä¸¤ä¸ªå‚æ•°ï¼Œé€ä¸ªè¿›è¡Œã€‚\n#!/bin/bash - #=============================================================================== # # FILE: b.sh # # USAGE: ./b.sh # # DESCRIPTION: # # OPTIONS: --- # REQUIREMENTS: --- # BUGS: --- # NOTES: --- # AUTHOR: Ye Zhao Liang (Vimer), zhaoturkkey@163.com # ORGANIZATION: BrokenSun # CREATED: 2017/7/4 23:01:31 # REVISION: --- #=============================================================================== IFS=$'\\n'; count=1; countDir=1; specialCharacter='pages'; generateChapter() # @Description : å¯¹ä¸åŒæ–‡ä»¶è¿›è¡Œä¸åŒå¤„ç† # @usage : generatechapter { # å¦™ç”¨find å¾—åˆ°å½“å‰ç›®å½•çš„ç›¸å¯¹è·¯å¾„ ä¸éœ€è¦ä¸æ–­çš„è¿›å…¥ç›®å½• #for var2 in `find . -name \u0026quot;*\u0026quot;` for var2 in `find . -name \u0026quot;windEnergy201*\u0026quot;` do if [[ -d $var2 ]] # \u0026lt; cannot . Error then cd $var2; for var in `find . -name \u0026quot;*\u0026quot;`;do echo $var|awk '/pages/{printf(\u0026quot;%s,%s\u0026quot;,$0,substr($0,0,length($0)-22)\u0026quot;.pdf\u0026quot;)|\u0026quot;xargs -d, mv \u0026quot;;}';done cd ..; fi done } generateChapter   æ³¨æ„å¯ä»¥ä½¿ç”¨ ï¼Œå­¦åˆ°æŠ€å·§1ä¸­çš„æ£€æµ‹å·¥å…·ï¼ŒæŸ¥çœ‹ä½ çš„ä¿®æ”¹æ˜¯å¦å®Œå…¨æ­£ç¡®ï¼Œå¦‚æœå‡ºç°æ–‡ä»¶åä¸­æœ‰é€—å·çš„æƒ…å†µï¼Œé€šå¸¸pagesæ²¡æœ‰åˆ æ‰ï¼ŒåŸå› æ˜¯xargsä¹Ÿæ˜¯æŒ‰ç…§ï¼Œå·è¿›è¡Œåˆ†å‰²ï¼Œæ‰€ä»¥æ”¹è¿›æ–¹æ³•æ˜¯ä½¿ç”¨åˆ†å·è¾“å‡º\næ”¹è¿›ä»£ç \nfor var in `find . -name \u0026quot;*\u0026quot;`;do echo $var|awk '/pages/{printf(\u0026quot;%s;%s\u0026quot;,$0,substr($0,0,length($0)-22)\u0026quot;.pdf\u0026quot;)|\u0026quot;xargs -d; mv \u0026quot;;}';done  æœ€ç»ˆç»“æœ = 1. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system]] = 1. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch1.pdf]] 2. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch10.pdf]] 3. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch11.pdf]] 4. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch12.pdf]] 5. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch13.pdf]] 6. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch14.pdf]] 7. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch15.pdf]] 8. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch16.pdf]] 9. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch2.pdf]] 10. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch3.pdf]] 11. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch4.pdf]] 12. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch5.pdf]] 13. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch6.pdf]] 14. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch7.pdf]] 15. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch8.pdf]] 16. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/ch9.pdf]] 17. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/fmatter.pdf]] 18. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/index.pdf]] 19. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/harmonic power system/scard.pdf]] = 2. [ ] [[local:F:/ScienceBase.Attachments/WindEnergy/Offshore Wind Energy Generation Control, Protection, and Integration to Electrical Systems/offshoreWindEnergy]] =  #å­¦åˆ°çš„æŠ€å·§\nawkä¸¤ç§è¡¨ç¤ºåˆ¤æ–­,ifåˆ¤æ–­å¾—ç”¨åˆ†å· å¦‚æœä¸ç”¨åˆ†å·éš”å¼€ä¼šæŠ¥é”™ \næ³¨æ„åˆ†å·ï¼ï¼\nawk '{if ($1==1) print \u0026quot;A\u0026quot;; else if ($1==2) print \u0026quot;B\u0026quot;; else print \u0026quot;C\u0026quot;}'  å¯¹åº”çš„bashä½¿ç”¨çš„æ˜¯if,then,else,fiçš„å½¢å¼ï¼Œä¸”ä¸ç”¨åˆ†å·é—´éš”è¯­å¥\nfor var in `find . -name \u0026quot;*\u0026quot;` do if [[ -d $var ]] # \u0026lt; cannot . Error then printf \u0026quot;$var\\n\u0026quot; # ä½¿ç”¨#å·æ¥åˆ é™¤ä¹‹å‰çš„ç‚¹å· else printf \u0026quot;\\t${var}\\n\u0026quot; # è¿™è¾¹éœ€è¦å»é™¤åˆ°ç¬¬ä¸€ä¸ªç‚¹å·,è¿™æ˜¯æ‰å¾—åˆ°çš„å¤„ç†æ–¹æ³• fi done  awkçš„â€™/page/{}â€˜ç­‰æ•ˆäºâ€™if($0~/dfd/){}â€™ ä¸‹é¢çš„å‘½ä»¤ï¼Œä¹Ÿæ˜¯ä¸€ç§æ£€æŸ¥ä¸Šè¿°ç¨‹åºæ­£ç¡®ä¸å¦çš„ä¸€ç§å·¥å…·,å¯ä»¥çœ‹å‡ºå“ªäº›pdfæ–‡ä»¶ä¾ç„¶æœ‰pagesçš„å­—æ®µ\nYeZhao@DESKTOP-YeZhao /cygdrive/f/ScienceBase.Attachments/WindEnergy $ find . -name \u0026quot;*\u0026quot;|awk '{if($0~/pages/){print $0}}' ./windEnergy2009-i6/Characterizing future large, rapid changes in aggregated wind power using Numerical Weather Prediction spatial fields (pages 542â€“555).pdf ./windEnergy2012-i1/Modeling wake effects in large wind farms in complex terrain the problem, the methods and the issues (pages 161â€“182).pdf ./windEnergy2012-i2/The Betzâ€“Joukowsky limit on the contribution to rotor aerodynamics by the British, German and Russian scientific schools (pages 335â€“344).pdf ./windEnergy2012-i3/Computational fluid dynamics simulation of the aerodynamics of a high solidity, small-scale vertical axis wind turbine (pages 349â€“361).pdf ./windEnergy2012-i3/Correction factors for NRG #40 anemometers potentially affected by dry friction whip characterization, analysis, and validation (pages 489â€“502).pdf ./windEnergy2012-i4/Analysis of wake measurements from the ECN Wind Turbine Test Site Wieringermeer, EWTW (pages 575â€“591).pdf ./windEnergy2012-i5/Atmospheric stability and turbulence fluxes at Horns Revâ€”an intercomparison of sonic, bulk and WRF model data (pages 717â€“731).pdf ./windEnergy2013-11/Modeling, simulation and control of a wind turbine with a hydraulic transmission system (pages 1259â€“1276).pdf ./windEnergy2013-8/Indicial lift response function an empirical relation for finite-thickness airfoils, and effects on aeroelastic simulations (pages 681â€“693).pdf ./windEnergy2013-8/Simulating the dynamics of wind turbine blades part I, model development and verification (pages 694â€“710).pdf ./windEnergy2013-8/Simulating the dynamics of wind turbine blades partéˆ¥å¡ˆI, model validation and uncertainty quantification (pages 741â€“758).pdf ..l  #2. awkçš„BEGIN \nfunction name() {} BEGIN{ } { } END{ }  3. awk gsub  echo \u0026quot;a b c 2011-11-22 a:d\u0026quot; | awk 'gsub(/-/,\u0026quot;\u0026quot;,$4)'  #4. awkå˜é‡å®šä¹‰\nBEGINä¸­å®šä¹‰1  , awk -vå•è¡Œ å®šä¹‰å˜é‡\nawkå†…ç½®å˜é‡ , åŒ…æ‹¬FS,OFS,NR,NFR,NF,$0,$1,$2,ARGC,ARGV1ç­‰ã€‚\n#5.awkå®šä¹‰å‡½æ•°\nawkçš„å‡½æ•°å®šä¹‰ æ˜¯åœ¨BEGIN{},{},END{}ä¹‹å¤–çš„ï¼Œå’Œä»–ä»¬å¹³çº§çš„å…³ç³»\n#!/usr/bin/awk -f #=============================================================================== # # File: func.awk # # Description: awk -f func.awk file # fileå†…å®¹ä¸º400 # # VIM Version: 7.0+ # Author: Ye Zhao Liang (Vimer), zhaoturkkey@163.com # Organization: BrokenSun # Version: 1.0 # Created: 2017/7/5 16:06:33 # Revision: --- # License: Copyright (c) 2017, Ye Zhao Liang #=============================================================================== # function b() { print \u0026quot;b.in.$1=\u0026quot;$1; } { v=100; y=200 print \u0026quot;a.in.v=\u0026quot;v; print \u0026quot;a.in.y=\u0026quot;y; a(y); b(); print \u0026quot;a.out.v=\u0026quot;v; print \u0026quot;a.out.y=\u0026quot;y; } function a(y) { print \u0026quot;(a)v=\u0026quot;v; v=v+$1+y; y=300; }  6.bashå››ç§å˜é‡æˆªå– ${var#.*} ä»å·¦åˆ°å³ï¼Œæ»¡è¶³#ä¹‹åæ¡ä»¶çš„æœ€å°é•¿åº¦ ${var##.*} ä»å·¦åˆ°å³ï¼Œæ»¡è¶³##ä¹‹åæ¡ä»¶çš„æœ€å¤§é•¿åº¦ ${var%.*} ä»å³åˆ°å·¦ï¼Œæ»¡è¶³%ä¹‹åæ¡ä»¶çš„æœ€å°é•¿åº¦ ${var%%.*} ä»å³åˆ°å·¦ï¼Œæ»¡è¶³%%ä¹‹åæ¡ä»¶çš„æœ€å°é•¿åº¦  åœ¨awkä¸­å¯ä»¥ä½¿ç”¨substr($1,0,length($1)â€“..)å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚\n#7.bashä¸­çš„åŒ…å«å…³ç³»\nåŒ…å«ï¼š å³ä¸€ä¸ªå¤§çš„éƒ¨åˆ†åŒ…å«å°çš„éƒ¨åˆ†ï¼ˆmember) ç­‰ä»·ï¼š å³ä¸¤ä¸ªä¸œè¥¿ç­‰ä»·(equal) æ¯”è¾ƒï¼šä¸€èˆ¬æ˜¯ä¸¤ä¸ªæ•°ï¼Œå¦å¤–ä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€‚\nbashå‡ ç§åŒ…å«å…³ç³»ç”¨æ³• \nstrA=\u0026quot;helloworld\u0026quot; strB=\u0026quot;low\u0026quot; if [[ $strA =~ $strB ]] then echo \u0026quot;åŒ…å«\u0026quot; else echo \u0026quot;ä¸åŒ…å«\u0026quot; fi  #8.awkå»é™¤å·¦å³ç©ºæ ¼\nç¬¬5ä¸ªçŸ¥è¯†ç‚¹é˜è¿°äº†å‡½æ•°çš„å®šä¹‰æ–¹å¼,ç°åœ¨æ¥è¿ç”¨ä¸€ä¸‹ï¼Œ awkå»é™¤å·¦å³ç©ºæ ¼ ï¼Œå†ä¸€æ¬¡ä½¿ç”¨ä¸­å‘ç°æ‰€æœ‰çš„æ–‡ä»¶ååç¼€ä¸­å¤šäº†ä¸€ä¸ªç©ºæ ¼ï¼Œäºæ˜¯å°è¯•æ¶ˆæ‰ç©ºæ ¼ï¼Œæƒ³ç€ç”¨awkå®ç°ã€‚\nfunction ltrim(s) { sub(/^[ \\t\\r\\n]+/, \u0026quot;\u0026quot;, s); return s } function rtrim(s) { sub(/[ \\t\\r\\n]+$/, \u0026quot;\u0026quot;, s); return s } function trim(s) { return rtrim(ltrim(s)); } BEGIN{ FS=\u0026quot;,\u0026quot; } { $0 = rtrim($0); if($2!=\u0026quot;-\u0026quot; \u0026amp;\u0026amp; $3==\u0026quot;-\u0026quot;) a[$4]++; { if($4!=\u0026quot;-\u0026quot;) b[$4]++; else b[$5]++; } } END{ print \u0026quot; client incr_num_day\u0026quot;; for(i in a) printf(\u0026quot;%10s %d\\n\u0026quot;,i,a[i]) print \u0026quot;\\n\\n client all_num\u0026quot;; for(j in b) printf(\u0026quot;%10s %d\\n\u0026quot;,j,b[j]); }  #9.awkè°ƒç”¨ç³»ç»Ÿå‘½ä»¤\nMEthod \nready:  touch c.txt touch d.txt\nII. a.txt:\nc.txt d.txt\nIII. code:\nawk '{cmd=\u0026quot;rm \u0026quot;$0;system(cmd)}' a.txt  10.awké‡å®šå‘å’Œç®¡é“ æœ‰æ—¶å€™ç›´æ¥å¯ä»¥åœ¨awkä½¿ç”¨ç®¡é“ï¼Œæä¾›ç»™shell,æ¯”å¦‚print|Sort,\nawk '{print $1, $2 | \u0026quot;sort\u0026quot; }'  #11.windowsä¸‹çš„cygwinä½¿ç”¨è„šæœ¬\nå¿…é¡»å¾—ä½¿ç”¨\ndos2unix.exe *è„šæœ¬åå­— dos2unix.exe a.sh dos2unix.exe func.awk  è¿™æ ·æ‰§è¡Œshellæ‰æœ‰æ•ˆã€‚\n12.awkæ€§èƒ½æ¯”shellæ›´é«˜ å‚è€ƒé“¾æ¥ \næ€§èƒ½æ¯”è¾ƒ [chengmo@localhost nginx]# time (awk 'BEGIN{ total=0;for(i=0;i\u0026lt;=10000;i++){total+=i;}print total;}') 50005000 real 0m0.003s user 0m0.003s sys 0m0.000s [chengmo@localhost nginx]# time(total=0;for i in $(seq 10000);do total=$(($total+i));done;echo $total;) 50005000 real 0m0.141s user 0m0.125s sys 0m0.008s  ç»“è®ºï¼šåœ¨awkä¸­æ‰§è¡Œç®—æœ¯è¿ç®—ï¼Œæ¯”åœ¨bashä¸­æ‰§è¡Œæ›´å¥½ä¸€äº›ã€‚\n","date":1499233455,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1499233455,"objectID":"30523b2a39efc9a0c03948711f158624","permalink":"/blog/2017/07/05/pi-liang-xiu-gai-pdfwen-jian-ming-yi-ji-chuang-jian-wiki-links/","publishdate":"2017-07-05T13:44:15+08:00","relpermalink":"/blog/2017/07/05/pi-liang-xiu-gai-pdfwen-jian-ming-yi-ji-chuang-jian-wiki-links/","section":"archives","summary":"bashã€awkã€sedç­‰çš„å¥½å¤„ï¼Œå°±æ˜¯å¯ä»¥ä¸“ä¸€çš„å®Œæˆä½ çš„éœ€æ±‚ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨å¾ˆå¤šä¸è¶³ï¼Œå€Ÿç€æ‰¹é‡é‡å‘½ä»¤å’Œæ‰¹é‡å¯¼å‡ºé“¾æ¥åˆ°vimwikiçš„wikiä¸­ï¼Œå½¢æˆ[[local:æ–‡ä»¶åè·¯å¾„]]çš„è¿‡ç¨‹ï¼Œå·©å›ºå­¦ä¹ linuxå‘½ä»¤, it is homework(learning process)ã€‚\n","tags":null,"title":"æ‰¹é‡ä¿®æ”¹pdfæ–‡ä»¶åä»¥åŠåˆ›å»ºwiki Links","type":"archives"},{"authors":null,"categories":["racket"],"content":"æ— æ„ä¸­ï¼Œæƒ³åˆ°äº† racket  ï¼Œschemeå®¶æ—ä¸­ä¸€å‘˜ï¼Œé‚£ä¹ˆäº²åˆ‡ï¼Œlovely.\nWelcome to Racket v6.9. \u0026gt; (/ 66 2) 33 \u0026gt; (/ 52.44 0.834493) 62.840551089104395 \u0026gt; (/ 52.44 0.834493)-62 62.840551089104395 -62 \u0026gt; (- (/ 52.44 0.834493) 62) 0.8405510891043946 \u0026gt; (* (- (/ 52.44 0.834493) 62) 360) 302.59839207758205 \u0026gt; exit; #\u0026lt;procedure:exit\u0026gt; \u0026gt; (exit)  å¤ä¹ åˆ—è¡¨:\n datetype  cases  First Interpreter From EOPL  The Second Interpreter from one  The third Interpreter with proc feature  the fourth Interpreter with traceproc feature  The fifth Interpreter with letrec feature  Read the EOPL book  Deadline: 2017-06-30\n","date":1496149885,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1496149885,"objectID":"14c79d7c660ca6a426ac1729d4d781a8","permalink":"/blog/2017/05/30/racket-man-wanna-learn-datetype-and-cases/","publishdate":"2017-05-30T21:11:25+08:00","relpermalink":"/blog/2017/05/30/racket-man-wanna-learn-datetype-and-cases/","section":"archives","summary":"æ— æ„ä¸­ï¼Œæƒ³åˆ°äº† racket  ï¼Œschemeå®¶æ—ä¸­ä¸€å‘˜ï¼Œé‚£ä¹ˆäº²åˆ‡ï¼Œlovely.\n","tags":null,"title":"Racket Man Wanna Learn Datetype and Cases","type":"archives"},{"authors":null,"categories":["ubuntu","fast"],"content":"Something Noted in the process of installation FAST8.16 in the 32bit ubuntu17.04 system.\n Download Fast8.16  and decompress\nmkdir FAST-816 cd FAST-816 mv FAST*.tar.gz FAST-816 tar -xvf FAST*.tar.gz  Download Map  for generating map.so and decompress\n  FAST_DIR å‘Šè¯‰MAP FASTé¡¹ç›®å­˜åœ¨å“ªé‡Œ\ncd FAST-816 mkdir LIBMAP cd LIBMAP mv ../../*.MAP*.tar.gz . tar -xvf *MAP*.tar.gz cd compiling vim driver_makefile\u0026lt;\u0026lt;EOF ----- FAST_DIR = ../Source +++++ FAST_DIR = /paper/FAST-816/ EOF cd ../src/ vim makefile\u0026lt;\u0026lt;EOF ----- BITS = -m64 +++++ BITS = -m32 32bitç³»ç»Ÿ EOF make#################something error here  make Libmap.so something error here\na.o mapinit.o maperror.o lineroutines.o numeric.o outputstream.o mapapi.o lmroutines.o jacobian.o residual.o -lm -llapacke /usr/bin/ld: æ‰¾ä¸åˆ° -llapacke /usr/bin/ld: æ‰¾ä¸åˆ° -llapacke collect2: error: ld returned 1 exit status makefile:81: recipe for target 'all' failed make: *** [all] Error 1  fixed it :\n apt-get install lapacke-dev*  make again\nmake ### OK generate libmap-1.2.so mkdir /paper/FAST-816/bin cp libmap-1.20.10.so /paper/FAST-816/bin   Now Install FAST\n cd /paper/FAST-816/compiling/ make make -f makefile_DISCON_DLL ## for Test18-26.fst case   gcc -fbacktrack FAST_Subs å¯èƒ½å†gcc-6ä¼šæœ‰ç‚¹é—®é¢˜ï¼Œéƒ¨åˆ†f90æ–‡ä»¶å¾—åˆ é™¤è¯¥é€‰é¡¹ åˆ æ‰-fbacktraceæµ‹è¯•é€šè¿‡\n2 \u0026gt; make gfortran -I Obj_lin32 -O2 -m32 -fbacktrace -ffree-line-length-none -x f95-cpp-input -DNO_LibLoad -DUSE_DLL_INTERFACE -c ../Source/FAST_Subs.f90 -o Obj_lin32/FAST_Subs.o -J Obj_lin32 -B Obj_lin32 gfortran: internal compiler error: å·²æ€æ­» (program f951) Please submit a full bug report, with preprocessed source if appropriate. See \u0026lt;file:///usr/share/doc/gcc-6/README.Bugs\u0026gt; for instructions. makefile:416: recipe for target 'FAST_Subs.o' failed make: *** [FAST_Subs.o] Error 4   Run Test1-18.fst  You can go to /paper/FAST-816/bin to check whether FAST_Glin32 and libmap.so have been generated or not\ncd /paper/FAST-816/bin  â¯ ./FAST_glin32 ../CertTest/Test02.fst ************************************************************************************************** FAST (v8.16.00a-bjj, 27-Jul-2016) Copyright (C) 2016 National Renewable Energy Laboratory This program comes with ABSOLUTELY NO WARRANTY. See the \u0026quot;license.txt\u0026quot; file distributed with this software for details. ************************************************************************************************** Running FAST (v8.16.00a-bjj, 27-Jul-2016), compiled as a 32-bit application using single precision linked with NWTC Subroutine Library (v2.09.00, 23-Jul-2016) Heading of the FAST input file: FAST Certification Test #02: AWT-27CR2 with many DOFs with startup and shutdown and steady wind Running ElastoDyn (v1.04.00a-bjj, 26-Jul-2016). Running AeroDyn (v15.03.00, 27-Jul-2016). Running AirfoilInfo (v1.01.00a-bjj, 5-Apr-2016). Running BEM (v1.02.00, 29-Jun-2016). Running InflowWind (v3.03.00, 26-Jul-2016). Opening InflowWind input file: ../CertTest/AWT27/Test02_InflowWind.dat Running ServoDyn (v1.06.00a-bjj, 26-Jul-2016). Timestep: 0 of 20 seconds. Timestep: 2 of 20 seconds. Estimated final completion at 16:05:13. Timestep: 4 of 20 seconds. Estimated final completion at 16:05:12.   Modify the ServoData for servo module DISON_DLL running  å› ä¸ºFASTåœ¨è¿è¡ŒTest18-26.fstçš„caseæ—¶å€™ä¼šå»è¯»å–5MW_BASELINE[åªé’ˆå¯¹çš„æ˜¯5MW]åº•ä¸‹çš„ServoDataçš„æ–‡ä»¶, æ‰€ä»¥å¯¹åº”dll-filenameå¾—ä¿®æ”¹ä¸€ä¸‹ã€‚\nmake DISCON SO file\nâ¯ make -f makefile_DISCON_DLL gfortran -O2 -m32 -fbacktrace -ffree-line-length-none -x f95-cpp-input -C -DIMPLICIT_DLLEXPORT -fPIC -c ../CertTest/5MW_Baseline/ServoData/Source/DISCON.f90 -o Obj_lin32/DISCON.obj -J Obj_lin32 -B Obj_lin32 gfortran -shared -O2 -m32 -fbacktrace -fPIC -I Obj_lin32 -o ../CertTest/5MW_Baseline/ServoData/DISCON_glin32.so \\ Obj_lin32/DISCON.obj  Change DLL_FileName in the configure data file\ncd /paper/FAST-816/CertTest/5MW_Baseline vim NRELOffshrBsline5MW_Onshore_ServoDyn.dat ä¿®æ”¹DLL_FileNameä¸º ServoData/DISCON_glin32.so   Test RESULT:\nRunning BeamDyn (v1.01.04, 26-Jul-2016). Running AeroDyn (v15.03.00, 27-Jul-2016). Running AirfoilInfo (v1.01.00a-bjj, 5-Apr-2016). Running BEM (v1.02.00, 29-Jun-2016). Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 1, Blade = 1 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 2, Blade = 1 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 3, Blade = 1 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 4, Blade = 1 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 1, Blade = 2 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 2, Blade = 2 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 3, Blade = 2 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 4, Blade = 2 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 1, Blade = 3 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 2, Blade = 3 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 3, Blade = 3 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 4, Blade = 3 Running InflowWind (v3.03.00, 26-Jul-2016). Opening InflowWind input file: ../CertTest/5MW_Baseline/NRELOffshrBsline5MW_InflowWind_12mps.dat Reading a 31x31 grid (145 m wide, 17.5 m to 162.5 m above ground) with a characteristic wind speed of 12 m/s. This full-field file was generated by TurbSim (v1.06.00, 21-Sep-2012) on 07-Jan-2014 at 12:50:45. Processed 1442 time steps of 20-Hz full-field data (72.05 seconds). Running ServoDyn (v1.06.00a-bjj, 26-Jul-2016). Running ServoDyn Interface for Bladed Controllers (using GNU Fortran for Linux, 14-Oct-2015). Timestep: 0 of 20 seconds. FAST_Solution0:CalcOutputs_And_SolveForInputs:SolveOption2:SrvD_CalcOutput:Running with torque and pitch control of the NREL offshore 5MW baseline wind turbine from DISCON.dll as written by J. Jonkman of NREL/NWTC for use in the IEA Annex XXIII OC3 studies. Timestep: 1 of 20 seconds. Estimated final completion at 16:20:36.  Okay, All things have been done.\nHappy FAST programming.\n","date":1495193482,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1495193482,"objectID":"8789852acd3e747130ed9c7f292e7916","permalink":"/blog/2017/05/19/ubuntu17-dot-04-install-fast8-dot-16/","publishdate":"2017-05-19T19:31:22+08:00","relpermalink":"/blog/2017/05/19/ubuntu17-dot-04-install-fast8-dot-16/","section":"archives","summary":"Something Noted in the process of installation FAST8.16 in the 32bit ubuntu17.04 system.\n","tags":null,"title":"Ubuntu17.04 Install FAST8.16","type":"archives"},{"authors":null,"categories":["noteexpress"],"content":" NoteExpress  æ˜¯ä¸€ä¸ªæ–‡æ¡£ç®¡ç†è½¯ä»¶ï¼Œç”¨äºç®¡ç†å‚è€ƒæ–‡ä»¶ï¼Œå¯ä»¥æ–¹ä¾¿çš„wordç­‰è¿›è¡Œå…³è”æ’å…¥ç›¸å…³å‚è€ƒæ–‡çŒ®ã€‚ ç„¶è€Œä»–æœ‰ä¸€ä¸ªæ ·å¼ç¼–è¾‘å™¨,å¾ˆæ™®é€šï¼Œå´æ˜¯è®©æˆ‘æœ‰ç‚¹è§¦åŠ¨ã€‚\nä¸‰ä¸ªå®šä¹‰ è¿‡æ»¤ç³»ç»Ÿï¼šè®©ä½ çš„ç¨‹åºè·å¾—åˆé€‚çš„æ•°æ®ï¼Œåœ¨è¿ç®—ç³»ç»Ÿä¹‹å‰.[strutsçš„æ‹¦æˆªå™¨];ä½ éœ€è¦è¿›è¡Œè¿‡æ»¤ï¼Œæ‰èƒ½å¾—åˆ°æ»¡è¶³è¿ç®—éœ€è¦çš„æ•°æ® è¿ç®—ç³»ç»Ÿï¼šåˆé€‚çš„æ•°æ®è¿›è¡Œç®—æ³•è¿ç®—ï¼ŒçŸ©é˜µè¿ç®—ç­‰ æ ·å¼ç³»ç»Ÿ: è¿ç®—å®Œçš„æ•°æ®è¿›è¡Œè¾“å‡º,å¾ˆå¤šç¾åŒ–çš„å·¥ä½œã€‚  linuxçš„lså¯ä»¥æœ‰å¾ˆå¤šé€‰é¡¹ï¼Œå¯ä»¥è®©ä½ çš„ç»“æœä¸ä¸€æ ·ï¼Œè¿™ä¸ªé€‰é¡¹çš„æ•ˆæœå…¶å®è·Ÿæ ·å¼ç³»ç»Ÿçš„æ•ˆæœæ˜¯ä¸€è‡´çš„ï¼Œéƒ½æ˜¯ä½ å¯¹ ç°å®çš„è¾“å‡ºä¸æ»¡æ„ï¼Œäºæ˜¯ä¿®æ”¹ï¼Œä½¿å¾—ä½ çš„è¾“å‡ºæ›´åŠ perfect\nls ls -ls ls -lsh # æ˜¾ç¤ºæ–‡ä»¶å¤§å°æŒ‰ç…§äººç±»æ¯”è¾ƒå¥½è¯†åˆ«çš„æ–¹å¼ ls -lsha # æ˜¾ç¤ºéšè—æ–‡ä»¶  awk  æ˜¯linuxé‡è¦çš„è¿‡æ»¤å·¥å…·ï¼Œä»–å°±å¥½è±¡æ˜¯ä¸€ä¸ªé±¼ç½‘è¿‡æ»¤å™¨ä¸€æ ·ï¼ŒæŒ‰ç…§å­”çš„å½¢çŠ¶è¿‡æ»¤å­—æ®µ, ä¹Ÿå«åšå­—æ®µçº§åˆ«è¿‡æ»¤å™¨ã€‚ sed  æ˜¯ä¸€ä¸ªè¡Œä¿®æ”¹å·¥å…·ï¼Œè¡Œçº§åˆ«è¿‡æ»¤å™¨, æœ‰å‡ ç§å…¸å‹çš„æ¨¡å¼  s,p,d,x,g,h etc\nä½†å°±æ˜¯è¿™ä¹ˆç®€å•çš„å‡ ä¸ªç³»ç»Ÿï¼Œå´æ˜¯ç»„æˆäº†å¾ˆå¤šä¸šåŠ¡ç³»ç»Ÿçš„å®ç°è¿‡ç¨‹çš„å®šä¹‰ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“æŠŠå®ƒæ›¿æ¢æˆä¸ºä½ å½“å‰æ­£åœ¨å¤„ç†çš„é˜¶æ®µï¼Œsee here to there.\nOne Sentence æ¯ä¸ªäººéƒ½åº”è¯¥æœ‰è‡ªå·±çš„æ ·å¼ç³»ç»Ÿï¼Œthis is your style, nobody can change you! Different Style System makes you different. äººåº”è¯¥æœ‰ç‚¹è„¾æ°”.\n","date":1495098868,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1495098868,"objectID":"52244d56f1207298db42234389426ff9","permalink":"/blog/2017/05/18/see-from-noteexpress/","publishdate":"2017-05-18T17:14:28+08:00","relpermalink":"/blog/2017/05/18/see-from-noteexpress/","section":"archives","summary":"NoteExpress æ˜¯ä¸€ä¸ªæ–‡æ¡£ç®¡ç†è½¯ä»¶ï¼Œç”¨äºç®¡ç†å‚è€ƒæ–‡ä»¶ï¼Œå¯ä»¥æ–¹ä¾¿çš„wordç­‰è¿›è¡Œå…³è”æ’å…¥ç›¸å…³å‚è€ƒæ–‡çŒ®ã€‚ ç„¶è€Œä»–æœ‰ä¸€ä¸ªæ ·å¼ç¼–è¾‘å™¨,å¾ˆæ™®é€šï¼Œå´æ˜¯è®©æˆ‘æœ‰ç‚¹è§¦åŠ¨ã€‚ ä¸‰ä¸ª","tags":null,"title":"See From NoteExpress","type":"archives"},{"authors":null,"categories":["mysql"],"content":"[[Here Song]]\nI am here to look forward, Nothing or many things? I am embarrassed.\nwhat should I do here? What is your plan? what is your target? Come on,Come on! Be confident, do and do it at the best, so you can see more from here\nLife is a road with many ups and downs. Looking at the stars in the sky, Doing at the desk in the grounds.\nç†è§£ä½ çš„Hereï¼Œæ‰èƒ½åˆ°è¾¾There\nGo there Base on Here !\n åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹; ç™¾å±‚é«˜æ¥¼ï¼Œèµ·äºå’åœŸ;  You are Here!\n git rebase Here There  gitFlow\nThe home faraway railway\nSee the sumrise, here to go! Letâ€™s go! sumrise\nsomethings added later  To this point , you should understand that use to this point to let your draft become a beautiful road way in your paper.\nTo this point , you should understand why you do this action at the current time! To this point , we can realized that there are a rule about the yaw aerodynamic characteristic.\nWith time goes on or from now on, maybe the result before us show me some infos. See from history.\nYour need to find the failure time in the history, understand it, understand why.\n","date":1495065873,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1495065873,"objectID":"6c09df6aca313b5fcecec74347109e71","permalink":"/blog/2017/05/18/can-you-see-them-from-here/","publishdate":"2017-05-18T08:04:33+08:00","relpermalink":"/blog/2017/05/18/can-you-see-them-from-here/","section":"archives","summary":"[[Here Song]]\nI am here to look forward, Nothing or many things? I am embarrassed.\nwhat should I do here? What is your plan? what is your target? Come on,Come on! Be confident, do and do it at the best, so you can see more from here\nLife is a road with many ups and downs. Looking at the stars in the sky, Doing at the desk in the grounds.\n","tags":null,"title":"Can You See Them From Here?","type":"archives"},{"authors":null,"categories":["mysql"],"content":"mysqlæ˜¯ä¸€ä¸ªä¸­å‹çš„æ•°æ®åº“æ“ä½œç³»ç»Ÿå¹³å°,ä»–çš„åŸºæœ¬ç»„æˆç”±å­˜å‚¨å¼•æ“ã€å„ä¸ªå‘½ä»¤æ¨¡å—ã€ä¼˜åŒ–å™¨ã€ç¼“å­˜å™¨ã€è§£æå™¨ã€ç”¨æˆ·æ¨¡å—ã€é“¾æ¥å™¨(connector)ç­‰ç»„æˆï¼Œ\nå…¶ä¸­å­˜å‚¨å¼•æ“ç°åœ¨ä¸€èˆ¬é€‰ç”¨innodbå±…å¤š(å…·ä½“å¯ä»¥æŸ¥çœ‹å„ä¸ªå­˜å‚¨å¼•æ“çš„åŒºåˆ«)\nmysqlæ“ä½œçº§åˆ«ï¼š\n æ•°æ®åº“çº§åˆ« è¡¨çº§åˆ« å­—æ®µçº§åˆ«  è€Œè¿™ä¸‰ä¸ªçº§åˆ«å°±å½±å“è¿™æ•°æ®åº“çš„ä¹±ç çº§åˆ«ã€‚ ä¸€èˆ¬äº‹å…ˆä½¿ç”¨show variables like '%char%', æ¥æŸ¥çœ‹mysqlçš„æ‰€æœ‰å­—ç¬¦ä¿¡æ¯ï¼Œå‚è€ƒmysqlä¹±ç è§£å†³, æ ¹æ®è¯¥æ–‡åŸºæœ¬ä¸Šå¯ä»¥è§£å†³é—®é¢˜ï¼Œå¦å¤–å¯ä»¥è¿›ä¸€æ­¥æŸ¥çœ‹å„ä¸ªå­—ç¬¦é›†å’ŒmysqlæŸ¥è¯¢æ¶‰åŠåˆ°çš„å„ä¸ªå­—ç¬¦é›†çš„å…³ç³»(å¯¹åº”å‘½ä»¤çš„æ±‚è§£), æŸ¥é˜…äº†å¤šä¸ªé“¾æ¥,éƒ½æ˜¾ç¤º set names gbkå¯¹æœ€ç»ˆçš„æ˜¾ç¤ºæœ‰å½±å“ï¼Œæ ¹æ®æˆ‘çš„ä½¿ç”¨ç»éªŒæ¥è®²ï¼Œ\nå½“ä½ ä½¿ç”¨set names gbkåˆ™å¯ä»¥æ˜¾ç¤ºæ­£å¸¸ï¼Œè€Œset names utf8åˆ™å‡ºç°ä¹±ç \næˆ‘åœ¨å»ºç«‹æ•°æ®åº“çš„æ—¶å€™ä¹Ÿä½¿ç”¨äº†create database rupeng chracter set utf8ç­‰ï¼Œä½†è¯•è¿‡ä¸€éåªæœ‰æœ€ç»ˆåŠ ä¸Šset names gbkæœ‰æ•ˆæœã€‚\nset character_set_database=utf8; set character_set_server=utf8; set character_set_client=gbk; set character_set_connection=gbk;  ç³»ç»Ÿå˜é‡ï¼š\n client ä¸ºå®¢æˆ·ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†ã€‚ connection ä¸ºè¿æ¥æ•°æ®åº“çš„å­—ç¬¦é›†è®¾ç½®ç±»å‹ï¼Œå¦‚æœç¨‹åºæ²¡æœ‰æŒ‡æ˜è¿æ¥æ•°æ®åº“ä½¿ç”¨çš„å­—ç¬¦é›†ç±»å‹åˆ™æŒ‰ç…§æœåŠ¡å™¨ç«¯é»˜è®¤çš„å­—ç¬¦é›†è®¾ç½®ã€‚ database ä¸ºæ•°æ®åº“æœåŠ¡å™¨ä¸­æŸä¸ªåº“ä½¿ç”¨çš„å­—ç¬¦é›†è®¾å®šï¼Œå¦‚æœå»ºåº“æ—¶æ²¡æœ‰æŒ‡æ˜ï¼Œå°†ä½¿ç”¨æœåŠ¡å™¨å®‰è£…æ—¶æŒ‡å®šçš„å­—ç¬¦é›†è®¾ç½®ã€‚ results ä¸ºæ•°æ®åº“ç»™å®¢æˆ·ç«¯è¿”å›æ—¶ä½¿ç”¨çš„å­—ç¬¦é›†è®¾å®šï¼Œå¦‚æœæ²¡æœ‰æŒ‡æ˜ï¼Œä½¿ç”¨æœåŠ¡å™¨é»˜è®¤çš„å­—ç¬¦é›†ã€‚ server ä¸ºæœåŠ¡å™¨å®‰è£…æ—¶æŒ‡å®šçš„é»˜è®¤å­—ç¬¦é›†è®¾å®šã€‚ system ä¸ºæ•°æ®åº“ç³»ç»Ÿä½¿ç”¨çš„å­—ç¬¦é›†è®¾å®šã€‚ â€“ character_set_clientï¼šå®¢æˆ·ç«¯æ¥æºæ•°æ®ä½¿ç”¨çš„å­—ç¬¦é›† â€“ character_set_connectionï¼šè¿æ¥å±‚å­—ç¬¦é›† â€“ character_set_databaseï¼šå½“å‰é€‰ä¸­æ•°æ®åº“çš„é»˜è®¤å­—ç¬¦é›† â€“ character_set_resultsï¼šæŸ¥è¯¢ç»“æœå­—ç¬¦é›† â€“ character_set_serverï¼šé»˜è®¤çš„å†…éƒ¨æ“ä½œå­—ç¬¦é›† â€“ character_set_systemï¼šç³»ç»Ÿå…ƒæ•°æ®(å­—æ®µåç­‰)å­—ç¬¦é›†  mysqlå­—ç¬¦é›†è½¬æ¢è¿‡ç¨‹\n 1. MySQL Serveræ”¶åˆ°è¯·æ±‚æ—¶å°†è¯·æ±‚æ•°æ®ä»character_set_clientè½¬æ¢ä¸ºcharacter_set_connectionï¼› 2. è¿›è¡Œå†…éƒ¨æ“ä½œå‰å°†è¯·æ±‚æ•°æ®ä»character_set_connectionè½¬æ¢ä¸ºå†…éƒ¨æ“ä½œå­—ç¬¦é›†ï¼Œå…¶ç¡®å®šæ–¹æ³•å¦‚ä¸‹ï¼š â€¢ ä½¿ç”¨æ¯ä¸ªæ•°æ®å­—æ®µçš„CHARACTER SETè®¾å®šå€¼ï¼› â€¢ è‹¥ä¸Šè¿°å€¼ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨å¯¹åº”æ•°æ®è¡¨çš„DEFAULT CHARACTER SETè®¾å®šå€¼(MySQLæ‰©å±•ï¼ŒéSQLæ ‡å‡†)ï¼› â€¢ è‹¥ä¸Šè¿°å€¼ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨å¯¹åº”æ•°æ®åº“çš„DEFAULT CHARACTER SETè®¾å®šå€¼ï¼› â€¢ è‹¥ä¸Šè¿°å€¼ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨character_set_serverè®¾å®šå€¼ã€‚ 3. å°†æ“ä½œç»“æœä»å†…éƒ¨æ“ä½œå­—ç¬¦é›†è½¬æ¢ä¸ºcharacter_set_resultsã€‚  å‚è€ƒmyeclipse-mysql ,æœ‰ä¸€ä¸ªåŸåˆ™å°±æ˜¯ä¸è¦è®©ä½ çš„characterå‡ºç°latin1ç¼–ç å³å¯\næˆ‘ä»¬æ“ä½œæ‰€æœ‰æ•°æ®åº“mysqlä¸­å‹,sqlite,postgreSqlæµè¡Œ,db2(IBM)ä¼ä¸šçº§,oracleå¤§å‹è¿ç”¨ä¼ä¸šçº§,informix(IBM), sql server\n mysqlå¿«é€Ÿå…¥é—¨å­¦ä¹   W3C sqlå…¥é—¨æ•™ç¨‹  å·¦è¿æ¥  51ctoæ•°æ®åº“è®ºå›  ","date":1486951473,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1486951473,"objectID":"d26963bb7b8fffa4b4ce84928363a961","permalink":"/blog/2017/02/13/mysqlluan-ma-hui-gu/","publishdate":"2017-02-13T10:04:33+08:00","relpermalink":"/blog/2017/02/13/mysqlluan-ma-hui-gu/","section":"archives","summary":"mysqlæ˜¯ä¸€ä¸ªä¸­å‹çš„æ•°æ®åº“æ“ä½œç³»ç»Ÿå¹³å°,ä»–çš„åŸºæœ¬ç»„æˆç”±å­˜å‚¨å¼•æ“ã€å„ä¸ªå‘½ä»¤æ¨¡å—ã€ä¼˜åŒ–å™¨ã€ç¼“å­˜å™¨ã€è§£æå™¨ã€ç”¨æˆ·æ¨¡å—ã€é“¾æ¥å™¨(connector)ç­‰ç»„æˆï¼Œ\n","tags":null,"title":"Mysqlä¹±ç å›é¡¾","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"é’ˆå¯¹ä¸€å°å…¨æ–°çš„ç”µè„‘ï¼Œå®‰è£…javaå¼€å‘çš„mavenç§æœï¼Œè®°å½•å¦‚ä¸‹ï¼Œå¹¶åœ¨IDEAä¸­è¿›è¡Œæµ‹è¯•ã€‚\næ¶‰åŠåˆ°javaseå®‰è£…ï¼Œmavenå®‰è£…ï¼Œnexusç§æœå®‰è£…ï¼Œnexusæœ¬åœ°é…ç½®ï¼Œnexusç•Œé¢ä»‹ç»\n å®‰è£…JAVA jdk ,ä¸‹è½½javaSEå®‰è£…åŒ…,æ³¨æ„JDKå’ŒJREä¸è¦æ”¾åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸‹ é…ç½®JAVA_HOMEä¸ºJDkç›®å½•ï¼Œå¹¶æ·»åŠ JDKçš„binç›®å½•(%JAVA_HOME%\\bin)åˆ°pathä¸­  ä¸‹è½½maven,å¹¶è§£å‹ç¼©ï¼Œé…ç½®MAVEN_HOMEä¸ºmavençš„æ ¹ç›®å½•ï¼Œå¹¶æ·»åŠ %MAVEN_HOME%\\binåˆ°path ä¸­   æ˜¾ç¤ºäº†mvn -v,ä¹Ÿå°±è¡¨ç¤ºè£…å®Œäº†maven 4. ä¸‹è½½nexus2.14,åœ¨windowsä¸‹ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€cmdï¼Œå¹¶cdåˆ°nexusçš„binç›®å½•ï¼Œè¿›è¡Œå®‰è£…\nnexus install nexus start  æ³¨æ„ä¸€å®šå¾—é…ç½®bin\\jsw\\wrapper.confçš„java binä¿¡æ¯ï¼Œå¦åˆ™å‡ºé”™ã€‚ å‡ºç°çš„é”™è¯¯ä¸ºæ— æ³•å¯åŠ¨ï¼Œ  åšå®Œå‰é¢çš„å‡ æ­¥ä¹‹ååªæ˜¯ï¼ŒæŠŠé…ç½®ç¯å¢ƒå¼„å®Œäº†ï¼Œè¿˜å¾—è¿›è¡Œç§æœé•œåƒé…ç½®ã€‚ é¦–å…ˆæ‰“å¼€nexusç§æœé¡µé¢ï¼Œä½¿ç”¨http://localhost:8089/nexus/#welcome\né»˜è®¤çš„ç™»é™†å¯†ç æ˜¯ è´¦å·ï¼šadmin å¯†ç ï¼šadmin123\nç™»é™†å®Œçš„ç•Œé¢ é…ç½®ä¸­å¿ƒä»“åº“:\nä¸­å¿ƒä»“åº“è®¾ç½®download remote indexesä¸ºçœŸï¼Œä¸ºè®¾ç½®æœ¬åœ°ç§æœæä¾›æºã€‚ é…ç½®äº†releaseå’Œsnapshotä»“åº“ ç„¶åé…ç½®äº†ç¬¬ä¸‰æ–¹æ’ä»¶ è¿›å…¥æœ€å…³é”®çš„public Repositoriesè®¾ç½®\næœ‰æ—¶å€™å¯ä»¥ä½¿ç”¨è¯•ç”¨Scheduled Tasksè§‚çœ‹åº“çš„indexæ˜¯å¦æ­£å¸¸è¿›è¡Œã€‚  é•œåƒç§æœé…ç½® mavenä¸­çš„settings.xmlç™»é™†ç§æœçš„è´¦æˆ·å¯†ç è®¾ç½®  \u0026lt;servers\u0026gt; \u0026lt;server\u0026gt; \u0026lt;id\u0026gt;nexus-release\u0026lt;/id\u0026gt; \u0026lt;username\u0026gt;admin\u0026lt;/username\u0026gt; \u0026lt;password\u0026gt;admin123\u0026lt;/password\u0026gt; \u0026lt;/server\u0026gt; \u0026lt;server\u0026gt; \u0026lt;id\u0026gt;nexus-snapshot\u0026lt;/id\u0026gt; \u0026lt;username\u0026gt;admin\u0026lt;/username\u0026gt; \u0026lt;password\u0026gt;admin123\u0026lt;/password\u0026gt; \u0026lt;/server\u0026gt; \u0026lt;server\u0026gt; \u0026lt;id\u0026gt;nexus\u0026lt;/id\u0026gt; \u0026lt;username\u0026gt;admin\u0026lt;/username\u0026gt; \u0026lt;password\u0026gt;admin123\u0026lt;/password\u0026gt; \u0026lt;/server\u0026gt; \u0026lt;!-- server | Specifies the authentication information to use when connecting to a particular server, identified by | a unique name within the system (referred to by the 'id' attribute below). | | NOTE: You should either specify username/password OR privateKey/passphrase, since these pairings are | used together. | \u0026lt;server\u0026gt; \u0026lt;id\u0026gt;deploymentRepo\u0026lt;/id\u0026gt; \u0026lt;username\u0026gt;repouser\u0026lt;/username\u0026gt; \u0026lt;password\u0026gt;repopwd\u0026lt;/password\u0026gt; \u0026lt;/server\u0026gt; --\u0026gt; \u0026lt;!-- Another sample, using keys to authenticate. \u0026lt;server\u0026gt; \u0026lt;id\u0026gt;siteServer\u0026lt;/id\u0026gt; \u0026lt;privateKey\u0026gt;/path/to/private/key\u0026lt;/privateKey\u0026gt; \u0026lt;passphrase\u0026gt;optional; leave empty if not used.\u0026lt;/passphrase\u0026gt; \u0026lt;/server\u0026gt; --\u0026gt; \u0026lt;/servers\u0026gt;  é•œåƒé…ç½®\næ³¨æ„urlé“¾æ¥çš„ç«¯å£è®¾ç½®\n \u0026lt;mirrors\u0026gt; \u0026lt;mirror\u0026gt; \u0026lt;id\u0026gt;nexus\u0026lt;/id\u0026gt; \u0026lt;mirrorOf\u0026gt;*\u0026lt;/mirrorOf\u0026gt; \u0026lt;url\u0026gt;http://localhost:8089/nexus/content/groups/public/\u0026lt;/url\u0026gt; \u0026lt;/mirror\u0026gt; \u0026lt;/mirrors\u0026gt; \u0026lt;profiles\u0026gt; \u0026lt;profile\u0026gt; \u0026lt;id\u0026gt;nexus\u0026lt;/id\u0026gt; \u0026lt;repositories\u0026gt; \u0026lt;repository\u0026gt; \u0026lt;id\u0026gt;central\u0026lt;/id\u0026gt; \u0026lt;url\u0026gt;http://central\u0026lt;/url\u0026gt; \u0026lt;releases\u0026gt;\u0026lt;enabled\u0026gt;true\u0026lt;/enabled\u0026gt;\u0026lt;/releases\u0026gt; \u0026lt;snapshots\u0026gt;\u0026lt;enabled\u0026gt;true\u0026lt;/enabled\u0026gt;\u0026lt;/snapshots\u0026gt; \u0026lt;/repository\u0026gt; \u0026lt;/repositories\u0026gt; \u0026lt;pluginRepositories\u0026gt; \u0026lt;pluginRepository\u0026gt; \u0026lt;id\u0026gt;central\u0026lt;/id\u0026gt; \u0026lt;url\u0026gt;http://central\u0026lt;/url\u0026gt; \u0026lt;releases\u0026gt;\u0026lt;enabled\u0026gt;true\u0026lt;/enabled\u0026gt;\u0026lt;/releases\u0026gt; \u0026lt;snapshots\u0026gt;\u0026lt;enabled\u0026gt;true\u0026lt;/enabled\u0026gt;\u0026lt;/snapshots\u0026gt; \u0026lt;/pluginRepository\u0026gt; \u0026lt;/pluginRepositories\u0026gt; \u0026lt;/profile\u0026gt; \u0026lt;/profiles\u0026gt; \u0026lt;activeProfiles\u0026gt; \u0026lt;activeProfile\u0026gt;nexus\u0026lt;/activeProfile\u0026gt; \u0026lt;/activeProfiles\u0026gt;  åœ¨mavenä¸­ä¸€èˆ¬æ˜¯éœ€è¦è®¾ç½®ä¸‹è½½æ§ä»¶jaråŒ…æ”¾åœ¨å“ªé‡Œ,åœ¨æ²¡æœ‰ç§æœçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä¸€èˆ¬ å¯ä»¥åœ¨setting.xmlä¸­è®¾ç½®localRepository\n | Default: ${user.home}/.m2/repository \u0026lt;localRepository\u0026gt;/path/to/local/repo\u0026lt;/localRepository\u0026gt;  å½“ç„¶IDEAåœ¨å¯¼å…¥é¡¹ç›®æˆ–è€…æ–°å»ºé¡¹ç›®çš„æ—¶å€™éƒ½ä¼šæé†’Environment Variable,è®¾ç½®ä¸€ä¸‹settingå’Œlocal repository (ç±»ä¼¼çš„æ€è·¯éœ€è¦åœ¨myeclipseé…ç½®) è€Œç§æœnexusçš„å­˜æ”¾åœ°ç‚¹ï¼Œåœ¨nexusç•Œé¢çš„æ—¶å€™å°±å·²ç»è®¾ç½®å¥½äº†ï¼Œæ‰€ä»¥ä¹Ÿå¾—åœ¨æ¯å°ç”µè„‘æ“ä½œä¸€é(ä¸€å®šä¸èƒ½é”™)ã€‚\né•œåƒçš„è¯ï¼Œå°±ä¸ä¼šæ‰§è¡Œmavençš„mvn installç­‰å‘½ä»¤è¿˜ä¸€ç›´å‘å¤–éƒ¨ä»“åº“è®¿é—®é“¾æ¥ï¼Œç»“æœæ˜¯è®¿é—®çš„é“¾æ¥ éƒ½æ˜¯æœ¬åœ°çš„ï¼Œå¯çœ‹ä¸‹èŠ‚æµ‹è¯•ã€‚\nIDEAæµ‹è¯•é•œåƒç§æœ ç°åœ¨åªèƒ½é€šè¿‡è¿™ä¸ªæ¿€æ´»äº†ï¼Œä¸‹è½½license server ![license][20] æµ‹è¯•ç»“æœå¦‚ä¸‹: `mvn site` ![idea][23] ``` INFO] artifact org.springframework:spring-beans: checking for updates from nexus [INFO] artifact org.springframework:spring-context: checking for updates from nexus [INFO] artifact org.springframework:spring-context-support: checking for updates from nexus [INFO] artifact org.springframework:spring-core: checking for updates from nexus [INFO] artifact org.springframework:spring-expression: checking for updates from nexus [INFO] artifact org.springframework:spring-instrument: checking for updates from nexus [INFO] artifact org.springframework:spring-instrument-tomcat: checking for updates from nexus [INFO] artifact org.springframework:spring-jdbc: checking for updates from nexus [INFO] artifact org.springframework:spring-jms: checking for updates from nexus [INFO] artifact org.springframework:spring-orm: checking for updates from nexus [INFO] artifact org.springframework:spring-oxm: checking for updates from nexus ``` ç»“è®º æ•´ä¸ªé…ç½®è¿‡ç¨‹æœ‰æ•ˆï¼Œæµ‹è¯•é€šè¿‡ï¼Œè¿›ä¸€æ­¥å¯ä»¥å‚è€ƒmavenå®æˆ˜ è®¸æ™“æ–Œ,é‡Œé¢åŒ…å«äº†mavençš„åæ ‡ç©ºé—´æ¦‚å¿µç­‰ï¼Œè¯¦ç»†ä»‹ç»äº† mavenç³»ç»Ÿçš„å„ä¸ªç»„æˆå’Œé›†æˆæµ‹è¯•ç¯å¢ƒçš„æ­å»ºã€‚\nå¯ä»¥æ‹“å±•é˜…è¯»java blog ä¸‰ä¸ªæœ‰ç”¨å·¥å…·åŒ…:\n é£é¾™ javase javaee(å›½äº§) é£é¾™ç‰¹åˆ«ç”¨å¿ƒçš„æ‰‹å†Œ å¯ä»¥ç©ç©feilong-platformå¹³å°çš„å®‰è£… ä»¥åŠmvn siteäº§ç”Ÿå¥½çœ‹çš„javadoc Hutool javase(å›½äº§) hutool APIæ‰‹å†Œ Hutool Wiki é—²å¤§èµ‹ beetl å¥½ç”¨çš„æ¨¡æ¿å¼•æ“(å›½äº§) vue.jsç«çƒ­çš„å‰ç«¯jsæ¡†æ¶(å›½äº§) ","date":1486656273,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1486656273,"objectID":"2231174c8b524da9b97cd82cf6e4f78a","permalink":"/blog/2017/02/10/javakai-fa-nexussi-fu-da-jian/","publishdate":"2017-02-10T00:04:33+08:00","relpermalink":"/blog/2017/02/10/javakai-fa-nexussi-fu-da-jian/","section":"archives","summary":"é’ˆå¯¹ä¸€å°å…¨æ–°çš„ç”µè„‘ï¼Œå®‰è£…javaå¼€å‘çš„mavenç§æœï¼Œè®°å½•å¦‚ä¸‹ï¼Œå¹¶åœ¨IDEAä¸­è¿›è¡Œæµ‹è¯•ã€‚\næ¶‰åŠåˆ°javaseå®‰è£…ï¼Œmavenå®‰è£…ï¼Œnexusç§æœå®‰è£…ï¼Œnexusæœ¬åœ°é…ç½®ï¼Œnexusç•Œé¢ä»‹ç»\n","tags":null,"title":"javaå¼€å‘nexusç§æœæ­å»º","type":"archives"},{"authors":null,"categories":["fortran"],"content":"æœ¬æ–‡åªæ˜¯ç®€å•å¯¹ä¸€ä¸ªæ–‡ä»¶è¯»å–æ¨¡å—DFile_modçš„ä¸€ä¸ªè¿ç”¨ï¼Œå¹¶è¯»å–é€—å·åˆ†éš”çš„csvæ–‡ä»¶ã€‚\nFileMod.f90:\nModule DFile_Mod Implicit None !!************************************** !* è¯†åˆ«æ–‡ä»¶çš„ç©ºæ ¼å’Œé€—å·ä½œä¸ºåˆ†éš”ç¬¦ !!*************************************** contains subroutine binaryStreamType implicit none integer :: File_Unit integer :: File_UnitOutput !!************************************** !* DFile_Mod å˜é‡å®šä¹‰ 100% !!*************************************** Character(len=512) :: cLine integer :: nRow, nCol character(len=20) :: name=\u0026quot;yezhaoliang\u0026quot;,addr=\u0026quot;zhangzhou\u0026quot; INTEGER :: I type :: data_head integer(kind=2) :: column end type type(data_head) :: FileHead !real,allocatable :: g(:,:) real,allocatable :: firstColumn(:) real,allocatable :: secondColumn(:) real,allocatable :: thirdColumn(:) Open( NewUnit=File_Unit , File = './data/myfile.csv' ) Open( NewUnit=File_UnitOutput , File = './data/myfile12.csv' ) nRow = GetFileN( File_Unit ) write( * , * ) 'æ–‡ä»¶å…±',nRow,'è¡Œï¼' read(File_Unit,*) FileHead write(*,*) 'm=',FileHead%column allocate(firstColumn(nRow-1)) allocate(secondColumn(nRow-1)) allocate(thirdColumn(nRow-1)) !! æµæ–¹å¼è¯»å– ! READ(File_Unit) g 250 format(3f10.4) 251 format(I4,I4,f10.4) 252 format (f10.4,A,f10.4,A,f10.4) 253 format (I4,A,I4,A,f10.4) Do i = 1,nRow-1 read(File_Unit,251) firstColumn(i),secondColumn(i),thirdColumn(i) end Do DO i = 1 ,nRow-1 !write(*,'(f10.4,A,f10.4,A,f10.4)') firstColumn(i),',',secondColumn(i),',',thirdColumn(i) write(File_UnitOutput,253) firstColumn(i)*2,',--',secondColumn(i)*2,',--',thirdColumn(i) end do deallocate(firstColumn) deallocate(secondColumn) deallocate(thirdColumn) close(File_Unit) close(File_UnitOutput) !Do i = 1, nRow ! Do j = 1, FileHead%column ! ! end do !end do end subroutine binaryStreamType subroutine testType implicit none integer :: File_Unit integer :: File_UnitOutput !!************************************** !* DFile_Mod å˜é‡å®šä¹‰ 100% !!*************************************** Character(len=512) :: cLine integer :: nRow, nCol character(len=20) :: name=\u0026quot;yezhaoliang\u0026quot;,addr=\u0026quot;zhangzhou\u0026quot; INTEGER :: I type :: data_head integer(kind=2) :: column end type type(data_head) :: FileHead !real,allocatable :: g(:,:) real,allocatable :: firstColumn(:) real,allocatable :: secondColumn(:) real,allocatable :: thirdColumn(:) Open( NewUnit=File_Unit , File = './data/A001.csv' ) Open( NewUnit=File_UnitOutput , File = './data/A0012.csv' ) nRow = GetFileN( File_Unit ) write( * , * ) 'æ–‡ä»¶å…±',nRow,'è¡Œï¼' read(File_Unit,*) FileHead write(*,*) 'm=',FileHead%column allocate(firstColumn(nRow-1)) allocate(secondColumn(nRow-1)) allocate(thirdColumn(nRow-1)) !! æµæ–¹å¼è¯»å– ! READ(File_Unit) g 250 format(3f10.4) 251 format(I4,I4,f10.4) 252 format (f10.4,A,f10.4,A,f10.4) 253 format (I4,A,I4,A,f10.4) Do i = 1,nRow-1 read(File_Unit,251) firstColumn(i),secondColumn(i),thirdColumn(i) end Do DO i = 1 ,nRow-1 !write(*,'(f10.4,A,f10.4,A,f10.4)') firstColumn(i),',',secondColumn(i),',',thirdColumn(i) write(File_UnitOutput,253) firstColumn(i)*2,',--',secondColumn(i)*2,',--',thirdColumn(i) end do deallocate(firstColumn) deallocate(secondColumn) deallocate(thirdColumn) close(File_Unit) close(File_UnitOutput) !Do i = 1, nRow ! Do j = 1, FileHead%column ! ! end do !end do end subroutine testType Integer Function GetDataN( cStr ) Character( Len = * ) , Intent( IN ) :: cStr Integer :: i Logical :: bIsSeparator , bIsQuote GetDataN = 0 bIsSeparator = .TRUE. bIsQuote = .FALSE. Do i = 1 , Len_Trim( cStr ) Select Case( cStr(i:i) ) Case( '\u0026quot;' , \u0026quot;'\u0026quot; ) !// å¦‚æœé‡åˆ°å¼•å· If ( .Not.bIsQuote ) GetDataN = GetDataN + 1 !//å¦‚æœä¸åœ¨å¼•å·ä¸­ï¼Œåˆ™å¢åŠ ä¸€ä¸ªæ•°æ® bIsQuote = .Not.bIsQuote !// å¼•å·ç»“æŸæˆ–å¼€å§‹ bIsSeparator = .FALSE. Case( \u0026quot; \u0026quot; , \u0026quot;,\u0026quot; , char(9) ) !// å¦‚æœé‡åˆ°åˆ†éš”ç¬¦ If ( .Not.bIsQuote ) then !// åˆ†éš”ç¬¦å¦‚æœä¸åœ¨å¼•å·ä¸­ bIsSeparator = .TRUE. End If Case Default If ( bIsSeparator ) then GetDataN = GetDataN + 1 End If bIsSeparator = .FALSE. End Select End Do End Function GetDataN Function f_numbervars(vars) result(numvars) character(len=*), intent(in) :: vars integer :: numvars character(len=len(vars)) :: tmpvars character(len=256) :: tmpvar tmpvars = trim(adjustl(vars)) numvars = 0 do while (len_trim(tmpvars) \u0026gt; 0) read(tmpvars, *) tmpvar numvars = numvars + 1 tmpvars = tmpvars(index(tmpvars, trim(tmpvar))+len_trim(tmpvar):) end do End Function f_numbervars Integer Function GetFileN( iFileUnit ) !// æ­¤å‡½æ•°åº”åœ¨æ‰“å¼€æ–‡ä»¶åç«‹å³è°ƒç”¨ã€‚è°ƒç”¨åè¯»å–ä½ç½®è¿”å›æ–‡ä»¶èµ·å§‹ä½ç½® Implicit None Integer , Intent( IN ) :: iFileUnit character( Len = 1 ) :: cDummy integer :: ierr GetFileN = 0 Rewind( iFileUnit ) Do Read( iFileUnit , * , ioStat = ierr ) cDummy If( ierr /= 0 ) Exit GetFileN = GetFileN + 1 End Do Rewind( iFileUnit ) End Function GetFileN End Module DFile_Mod  ä¸»å‡½æ•°main.f90:\nprogram Main use DFile_Mod Implicit none INTEGER :: I !!************************************** !* DFile_Mod å˜é‡å®šä¹‰ 100% !!*************************************** !Character(len=512) :: cLine !integer :: nRow, nCol !character(len=20) :: name=\u0026quot;yezhaoliang\u0026quot;,addr=\u0026quot;zhangzhou\u0026quot; !************************************** !* æµ‹è¯•DFile_Mod 100% !*************************************** !Open( 53 , File = './data/in.txt' ) !Open( 53 , File = './data/myfile.csv' ) ! !nRow = GetFileN( 53 ) !write( * , * ) 'æ–‡ä»¶å…±',nRow,'è¡Œï¼' !Do i = 1 , nRow ! read( 53 , '(a512)' ) cLine ! nCol = GetDataN( cLine ) ! !nCol = f_numbervars( cLine ) ! write( * , * ) i,'è¡Œæœ‰',nCol,'ä¸ªæ•°æ®' !End Do call binaryStreamType Close( 53 ) end program Main  é…ç½®æ–‡ä»¶in.txt:\n1 2 3 , fsd 4 5 6 7 : asd 8 9 10 11 12 13 f sadf ! gad 14 15  è½½å…¥visual studioåŸºæœ¬ä¸Šå°±èƒ½è¿è¡Œã€‚\n","date":1486546169,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1486546169,"objectID":"bc6f5bdc12720a8b1616150911bfeb57","permalink":"/blog/2017/02/08/fortrandu-qu-csvwen-jian/","publishdate":"2017-02-08T17:29:29+08:00","relpermalink":"/blog/2017/02/08/fortrandu-qu-csvwen-jian/","section":"archives","summary":"æœ¬æ–‡åªæ˜¯ç®€å•å¯¹ä¸€ä¸ªæ–‡ä»¶è¯»å–æ¨¡å—DFile_modçš„ä¸€ä¸ªè¿ç”¨ï¼Œå¹¶è¯»å–é€—å·åˆ†éš”çš„csvæ–‡ä»¶ã€‚\n","tags":null,"title":"fortranè¯»å–csvæ–‡ä»¶","type":"archives"},{"authors":null,"categories":["perl"],"content":"perlä¸­å¸¸è§çš„æ–‡ä»¶æ‰“å¼€å…³é—­æœ‰openå’ŒIOæ¨¡å—ç­‰ï¼Œè€Œæœ‰æ—¶å€™æ¶‰åŠå¤§é‡çš„ æ•°æ®ä¿å­˜å’Œæ‰“å¼€çš„æ—¶å€™ï¼Œå°±å¾—å€ŸåŠ©æ•°æ®åº“çš„ä½¿ç”¨ï¼Œæä¾›ç¼“å­˜çš„åŠŸèƒ½ï¼Œå¹¶ ä½¿å¾—ä¿å­˜çš„æ•°æ®å ç”¨é‡æœ€å°‘ï¼Œè®¿é—®æ›´å¿«æ·ã€‚ä¸‹é¢å°±perlçš„mysqlæ•°æ®åº“è®¿é—® åšä¸€ä¸ªç®€è¦çš„ä»‹ç»ã€‚\n1. æ•°æ®åº“è®¿é—®åŸç†  åŠ è½½å¯¹åº”æ•°æ®åº“é©±åŠ¨ è·å¾—ç›¸åº”çš„è¿æ¥ å‡†å¤‡éœ€è¦çš„æŸ¥è¯¢æ•°æ® åˆ é™¤æ•°æ® æ›´æ–°æ•°æ® æ‰§è¡Œsqlè¯­å¥ è·å¾—ç›¸åº”çš„ç»“æœ  2. perl DBI mysqlå®ç° What is DBI? \u0026ldquo;The DBI is the standard database interface module for Perl. It defines a set of methods, variables and conventions that provide a consistent database interface independent of the actual database being used.\u0026rdquo; \u0026ndash; Tim Bunce\n å®‰è£…perl dbi å®‰è£…perl dbd:mysqlé©±åŠ¨ åŠ è½½æ•°æ®åº“é©±åŠ¨dsn ä»dsnè·å–ç›¸åº”çš„é“¾æ¥connectæ–¹æ³• æ‰§è¡Œç›¸åº”çš„sqlè¯­å¥ æ³¨æ„ï¼Œå¤„ç†å®Œæ¯•æœ€å¥½åšä¸€ä¸ªå…³é—­æ“ä½œ(è¿™æ˜¯ä¸€ä¸ªæŠ€æœ¯é—®é¢˜ï¼Œä¹Ÿæ˜¯å¾·è¡Œé—®é¢˜å’Œä¹ æƒ¯é—®é¢˜ï¼Œç¼–ç¨‹çš„å¾ˆå¤šæŠ€æœ¯éƒ½æ˜¯éœ€è¦æ‰“å¼€å’Œå…³é—­ä¸¤ä¸ªè¿‡ç¨‹é…å¯¹å‘ˆç°)  å…·ä½“å¯ä»¥å‚è€ƒ\n perl dbiå®˜ç½‘æ‰‹å†Œ Perlä¸æ•°æ®åº“DBIå¿«é€Ÿå…¥é—¨ A short guid of the dbi programming perl DBI æ€»ç»“ perl dbié“¾æ¥mysqlä¸­æ–‡ä¹±ç  ä½¿ç”¨Perl DBIæ“ä½œMySQLçš„ä¸€äº›å»ºè®® perlå¿«é€Ÿå…¥é—¨** ç»™å‡ºäº†æ‰€æœ‰çš„æŠ€æœ¯è¯­è¨€éƒ½å¯ä»¥ç”±mainå‡½æ•°å¼•å‡ºå¾ˆå¤šå…¶ä»–çš„, æŠŠæŠ€æœ¯å½“æˆä½ çš„ä¹ æƒ¯** ä¸€æœ¬perlå‚è€ƒä¹¦: Programming_the_Perl_DBI  è¯¥å»ºè®®ä½¿ç”¨binmodeè§£å†³ä¹±ç é—®é¢˜ï¼Œ\nuse utf8; binmode(STDOUT, ':encoding(utf8)'); binmode(STDIN, ':encoding(utf8)'); binmode(STDERR, ':encoding(utf8)');  perl DBIä½¿ç”¨è¯¦è§£\n  ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä½¿ç”¨perldoc dbi æŸ¥çœ‹dbiæ–‡æ¡£ä¿¡æ¯\n3. æŠ€æœ¯è§£å†³æ–¹æ¡ˆ feiji.txt:\næ±½è½¦åœ¨é«˜é€Ÿè¡Œé©¶æ—¶ï¼Œæ ¹æ®ç©ºæ°”åŠ¨åŠ›å­¦åŸç†ï¼Œåœ¨è¡Œé©¶è¿‡ç¨‹ä¸­ä¼šé‡åˆ°ç©ºæ°”é˜»åŠ›ï¼Œå›´ç»•æ±½è½¦é‡å¿ƒåŒæ—¶äº§ç”Ÿçºµå‘ã€ä¾§å‘å’Œå‚ç›´ä¸Šå‡çš„ä¸‰ä¸ªæ–¹å‘çš„ç©ºæ°”åŠ¨åŠ›é‡ï¼Œå…¶ä¸­çºµå‘ä¸ºç©ºæ°”é˜»åŠ›ã€‚ ä¸ºäº†æœ‰æ•ˆåœ°å‡å°‘å¹¶å…‹æœæ±½è½¦é«˜é€Ÿè¡Œé©¶æ—¶ç©ºæ°”é˜»åŠ›çš„å½±å“ï¼Œäººä»¬è®¾è®¡ä½¿ç”¨äº†æ±½è½¦å°¾ç¿¼ï¼Œå…¶ä½œç”¨å°±æ˜¯ä½¿ç©ºæ°”å¯¹æ±½è½¦äº§ç”Ÿç¬¬å››ç§ä½œç”¨åŠ›ï¼Œå³äº§ç”Ÿè¾ƒå¤§çš„å¯¹åœ°é¢çš„é™„ç€åŠ›ï¼Œå®ƒèƒ½æŠµæ¶ˆä¸€éƒ¨åˆ†å‡åŠ›ï¼Œæœ‰æ•ˆæ§åˆ¶æ±½è½¦ä¸Šæµ®ï¼Œä½¿é£é˜»ç³»æ•°ç›¸åº”å‡å°ï¼Œä½¿æ±½è½¦èƒ½ç´§è´´åœ¨é“è·¯åœ°é¢è¡Œé©¶ï¼Œä»è€Œæé«˜è¡Œé©¶çš„ç¨³å®šæ€§èƒ½ã€‚ å·¥ä½œåŸç† æ±½è½¦å°¾ç¿¼ä½œç”¨ æ±½è½¦å°¾ç¿¼çš„ä½œç”¨ï¼Œå°±æ˜¯åœ¨æ±½è½¦é«˜é€Ÿè¡Œé©¶æ—¶ï¼Œä½¿ç©ºæ°”é˜»åŠ›å½¢æˆä¸€ä¸ªå‘ä¸‹çš„å‹åŠ›ï¼Œå°½é‡æŠµæ¶ˆå‡åŠ›ï¼Œæœ‰æ•ˆæ§åˆ¶æ°”æµä¸‹å‹åŠ›ï¼Œä½¿é£é˜»ç³»æ•°ç›¸åº”å‡å°ï¼Œå¢åŠ æ±½è½¦çš„é«˜é€Ÿè¡Œé©¶ç¨³å®šæ€§ï¼›ç”±äºå°¾ç¿¼èƒ½é™ä½æ±½è½¦çš„ç©ºæ°”é˜»åŠ›ï¼Œå› æ­¤é«˜é€Ÿæ±½è½¦åŠ è£…å°¾ç¿¼å¯¹äºèŠ‚çœç‡ƒæ²¹ä¹Ÿæœ‰ä¸€å®šçš„å¸®åŠ©ï¼›åŒæ—¶ä¹Ÿä½¿æ±½è½¦çš„å¤–å½¢æ›´åŠ ç¾è§‚ï¼Œèµ·åˆ°ä¸€å®šçš„è£…é¥°ä½œç”¨ã€‚ æ±½è½¦å°¾ç¿¼åˆ†ç±» ç»ç’ƒé’¢å°¾ç¿¼ï¼šè¿™ç±»å°¾ç¿¼é€ å‹å¤šæ ·ï¼Œæœ‰é¸­èˆŒçŠ¶çš„ã€æœºç¿¼çŠ¶çš„ï¼Œä¹Ÿæœ‰ç›´æ¿å¼çš„ï¼æ¯”è¾ƒå¥½åšé€ å‹ï¼Œä¸è¿‡ç»ç’ƒé’¢æè´¨æ¯”è¾ƒè„†ï¼ŒéŸ§æ€§å’Œåˆšæ€§éƒ½è¾ƒå·®ï¼Œä»·æ ¼æ¯”è¾ƒä¾¿å®œã€‚ é“åˆé‡‘å°¾ç¿¼ï¼šè¿™ç±»å°¾ç¿¼å¯¼æµå’Œæ•£çƒ­æ•ˆæœä¸é”™ï¼Œè€Œä¸”ä»·æ ¼é€‚ä¸­ï¼Œä¸è¿‡é‡é‡è¦æ¯”å…¶ä»–æè´¨çš„å°¾ç¿¼ç¨é‡äº›ã€‚ ç¢³çº¤ç»´å°¾ç¿¼ï¼šç¢³çº¤ç»´å°¾ç¿¼åˆšæ€§å’Œè€ä¹…æ€§éƒ½éå¸¸å¥½ï¼ä¸ä»…é‡é‡è½»è€Œä¸”ä¹Ÿæ˜¯æœ€ç¾è§‚çš„ä¸€ç§å°¾ç¿¼ï¼ç°åœ¨å¹¿æ³›è¢«F1èµ›è½¦é‡‡ç”¨ä¸è¿‡ä»·æ ¼æ¯”è¾ƒæ˜‚è´µã€‚[1]  source code for perl:\n#!/usr/bin/env perl #=============================================================================== # # FILE: testdbi.pl # # USAGE: ./testdbi.pl # # DESCRIPTION: # # OPTIONS: --- # REQUIREMENTS: --- # BUGS: --- # NOTES: --- # Author: Ye Zhaoliang # ORGANIZATION: # VERSION: 1.0 # CREATED: 2016/12/31 1:44:24 # REVISION: --- #=============================================================================== use strict; use warnings; use utf8; use CGI::Carp \u0026quot;fatalsToBrowser\u0026quot;; use strict; use warnings; use DBI; use CGI qw (:standard escapeHTML escape); my ($driver_name, $db_name, $db_host, $db_sock, $db_port, $db_user, $db_pswd, $dsn); $driver_name = 'mysql'; $db_name = 'mysql'; # database name $db_host = 'localhost'; $db_sock = '/tmp/mysql.sock'; $db_port = '3306'; $db_user = 'root'; $db_pswd = 'root'; # data source $dsn = \u0026quot;dbi:mysql:database=${db_name};hostname=${db_host};mysql_socket=${db_sock};port=${db_port}\u0026quot;; # ... set up connection to database (not shown) ... # connect mysql database my $dbh = DBI -\u0026gt; connect ($dsn, $db_user, $db_pswd, { RaiseError =\u0026gt; 1, PrintError =\u0026gt; 0 }); # put out initial part of page my $title = \u0026quot;$db_name Database Browser\u0026quot;; # html header and start_html h1 print header (); print start_html (-titlk =\u0026gt; $title, -bgcolor =\u0026gt; \u0026quot;white\u0026quot;); print h1 ($title); # parameters to look for in URL my $tbl_name = param (\u0026quot;tbl_name\u0026quot;); my $sort_col = param (\u0026quot;sort_col\u0026quot;); # If $tbl_name has no value, display a clickable list of tables. # Otherwise, display contents of the given table. $sort_col, if # set, indicates which column to sort by. !defined ($tbl_name) ? display_table_names ($dbh, $db_name) : display_table_contents ($dbh, $tbl_name, $sort_col); print end_html (); sub display_table_names { my ($dbh, $db_name) = @_; ## html p paragraph print p (\u0026quot;Select a table by clicking on its name:\u0026quot;); # retrieve reference to single-column array of table names my $ary_ref = $dbh -\u0026gt; selectcol_arrayref (qq{ SHOW TABLES FROM $db_name }); # Construct a bullet list using the ul() (unordered list) and # li() (list item) functions. Each item is a hyperlink that # re-invokes the script to display a particular table. my @item; foreach my $tbl_name (@{$ary_ref}) { my $url = sprintf (\u0026quot;%s?tbl_name=%s\u0026quot;, url (), escape ($tbl_name)); my $link = a ({-href =\u0026gt; $url}, escapeHTML ($tbl_name)); push (@item, li ($link)); } ## list control print ul (@item); } sub display_table_contents { my ($dbh, $tbl_name, $sort_col) = @_; my @rows; my @cells; # if sort column not specified, use first column $sort_col = \u0026quot;1\u0026quot; if !defined ($sort_col); # present a link that returns user to table list page # p control widget print p (a ({-href =\u0026gt; url ()}, \u0026quot;Show Table List\u0026quot;)); print p (strong (\u0026quot;Contents of $tbl_name table:\u0026quot;)); ## select from database my $sth = $dbh -\u0026gt; prepare (qq{ SELECT * FROM $tbl_name ORDER BY $sort_col LIMIT 200 }); $sth -\u0026gt; execute (); # Use the names of the columns in the database table as the # headings in an HTML table. Make each name a hyperlink that # causes the script to be reinvoked to redisplay the table, # sorted by the named column. foreach my $col_name (@{$sth -\u0026gt; {NAME}}) { my $url = sprintf (\u0026quot;%s?tbl_name=%s;sort_col=%s\u0026quot;, url (), escape ($tbl_name), escape ($col_name)); my $link = a ({-href =\u0026gt; $url}, escapeHTML ($col_name)); push (@cells, th ($link)); } push (@rows, Tr (@cells)); # display table rows while (my @ary = $sth -\u0026gt; fetchrow_array ()) { @cells = (); foreach my $val (@ary) { # display value if non-empty, else display non-breaking space if (defined ($val) \u0026amp;\u0026amp; $val ne \u0026quot;\u0026quot;) { $val = escapeHTML ($val); } else { $val = \u0026quot; \u0026quot;; } push (@cells, td ($val)); } push (@rows, Tr (@cells)); } # display table with a border print table ({-border =\u0026gt; \u0026quot;1\u0026quot;}, @rows); } ","date":1486545949,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1486545949,"objectID":"0c401a3b9c335090d8c0b744f9a619a8","permalink":"/blog/2017/02/08/perldu-qu-mysqlshu-ju-ku/","publishdate":"2017-02-08T17:25:49+08:00","relpermalink":"/blog/2017/02/08/perldu-qu-mysqlshu-ju-ku/","section":"archives","summary":"perlä¸­å¸¸è§çš„æ–‡ä»¶æ‰“å¼€å…³é—­æœ‰openå’ŒIOæ¨¡å—ç­‰ï¼Œè€Œæœ‰æ—¶å€™æ¶‰åŠå¤§é‡çš„ æ•°æ®ä¿å­˜å’Œæ‰“å¼€çš„æ—¶å€™ï¼Œå°±å¾—å€ŸåŠ©æ•°æ®åº“çš„ä½¿ç”¨ï¼Œæä¾›ç¼“å­˜çš„åŠŸèƒ½ï¼Œå¹¶ ä½¿å¾—ä¿å­˜çš„æ•°æ®å ç”¨é‡æœ€å°‘ï¼Œè®¿é—®æ›´å¿«æ·ã€‚ä¸‹é¢å°±perlçš„mysqlæ•°æ®åº“è®¿é—® åšä¸€ä¸ªç®€è¦çš„ä»‹ç»ã€‚\n","tags":null,"title":"perlè¯»å–mysqlæ•°æ®åº“","type":"archives"},{"authors":null,"categories":["perl"],"content":"binmodeå¯ä»¥å¾ˆå¥½çš„è§£å†³perlä¸­é—®é¢˜ï¼Œé‡‡ç”¨Encode1,Encodeç­‰æ–¹å¼ä¸ç®¡ç”¨\nPerlFile.plæµ‹è¯•æºç ï¼š\n#!/usr/bin/env perl #=============================================================================== # # FILE: perlFile.pl # # USAGE: ./perlFile.pl # # DESCRIPTION: # # OPTIONS: --- # REQUIREMENTS: --- # BUGS: --- # NOTES: --- # AUTHOR: YOUR NAME (), # ORGANIZATION: # VERSION: 1.0 # CREATED: 2017/2/8 9:49:51 # REVISION: --- #=============================================================================== use strict; use warnings; use utf8; binmode(STDIN,\u0026quot;:encoding(gb2312)\u0026quot;); binmode(STDOUT,\u0026quot;:encoding(gb2312)\u0026quot;); while ( \u0026lt;\u0026gt; ) { chomp; print $_,\u0026quot;\\n\u0026quot;; last if $_ =~ m/q/xm; } open(FEIJI,\u0026quot;E:\\\\feiji.txt\u0026quot;) or die \u0026quot;can't open the file \\n\u0026quot;; my $car =\u0026quot;å°¾ç¿¼\u0026quot;; â€¢ binmode(FEIJI,\u0026quot;:encoding(gb2312)\u0026quot;); # binmode( STDIN, ':encoding(gbk2312)' ); #binmode( FEIJI, ':encoding(utf8)' ); #binmode( STDOUT, ':encoding(gbk2312)' ); #binmode( STDERR, ':encoding(gbk2312)' ); #while( my $line = \u0026lt;FEIJI\u0026gt;){ #my $re = Encode::decode('GB2312','æ±½è½¦'); my $count=1; while( \u0026lt;FEIJI\u0026gt;){ #print \u0026quot;$_ \\n\u0026quot; ; # print \u0026quot;$_ \\n\u0026quot; if $_ =~ /.*$re.*/; # Encode::_utf8_on($_); # Encode::decode_utf8($_); #print \u0026quot;$_\\n\u0026quot; ;#if $_ =~ m/$car/xm; #print \u0026quot;$count: $_\\n\u0026quot; if $_ =~ m/$car/xm; #$count +=1; s/æ±½è½¦/é£åŠ›æœº/g; print; } ","date":1486545838,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1486545838,"objectID":"33165681e92958f1fadffde24f9e17e8","permalink":"/blog/2017/02/08/perlzhong-wen-luan-ma-wen-ti/","publishdate":"2017-02-08T17:23:58+08:00","relpermalink":"/blog/2017/02/08/perlzhong-wen-luan-ma-wen-ti/","section":"archives","summary":"binmodeå¯ä»¥å¾ˆå¥½çš„è§£å†³perlä¸­é—®é¢˜ï¼Œé‡‡ç”¨Encode1,Encodeç­‰æ–¹å¼ä¸ç®¡ç”¨\n","tags":null,"title":"perlä¸­æ–‡ä¹±ç é—®é¢˜","type":"archives"},{"authors":null,"categories":["Fast"],"content":"NREL FASTçš„è°ƒè¯•ä¸€ç›´å­˜åœ¨é—®é¢˜ï¼Œå…³é”®æ˜¯ä¸çŸ¥é“æ€ä¹ˆè®¾ç½®é€‰é¡¹ï¼ŒæŸ¥é˜…äº†Visual Studioå’Œä¸€äº›åŸºæœ¬çŸ¥è¯†æ•´ç†äº† NRELé¡¹ç›®çš„è°ƒè¯•æ–¹æ³•ã€‚\nfortranå·¥ä½œè·¯å¾„é—®é¢˜ å·¥ä½œè·¯å¾„å¯¹äºä»»ä½•çš„å¯æ‰§è¡Œæ–‡ä»¶éƒ½å¾ˆé‡è¦ã€‚ å½“ç„¶äº‹å…ˆå¯èƒ½å¾—äº†è§£ä¸€ä¸‹è½¯ä»¶ç¼–è¯‘é“¾æ¥çš„è¿‡ç¨‹ï¼ˆå³ç¼–å†™æºä»£ç \u0026ndash;è°ƒç”¨ç¼–è¯‘å™¨ç¼–è¯‘æºä»£ç \u0026ndash; \u0026gt;è°ƒç”¨é“¾æ¥å™¨è¿æ¥ç›¸å…³ä»£ç å—ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶\u0026ndash;\u0026gt;è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼‰(IDEéšè—äº†ä¸Šè¿°è¿‡ç¨‹)\n å¦‚æœä¸å¸¦ä»»ä½•è·¯å¾„ï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯å½“å‰è·¯å¾„(working directory)ã€‚ å¦‚æœå¸¦ç›¸å¯¹è·¯å¾„ï¼Œåˆ™ä»¥å½“å‰è·¯å¾„ä¸ºåŸºå‡†ã€‚ é€šè¿‡å‘½ä»¤è¡Œæ‰§è¡Œï¼Œå½“å‰è·¯å¾„ä¸€èˆ¬åœ¨æç¤ºç¬¦ä¸Š(æˆ–pwdå‘½ä»¤æŸ¥çœ‹) ç›´æ¥åŒå‡»,å½“å‰è·¯å¾„åœ¨exeæ‰€åœ¨çš„æ–‡ä»¶å¤¹ã€‚ é€šè¿‡IDEæ–¹å¼è¿è¡Œï¼Œå½“å‰è·¯å¾„ä¸€èˆ¬åœ¨å·¥ç¨‹æ‰€åœ¨æ–‡ä»¶å¤¹ ä¸€äº›IDEè¿˜å…è®¸è®¾ç½®å½“å‰è·¯å¾„(åªå¯¹IDEæ–¹å¼è¿è¡Œæœ‰æ•ˆ)ã€‚ å³é”®exeåå­—ä¹Ÿæ˜¯å¯ä»¥æŒ‡å®šè¿è¡Œè·¯å¾„çš„ï¼ˆè¿™æ ·å°±å¯ä»¥åŠ è½½å¯¹åº”çš„é…ç½®æ–‡ä»¶)  æ¯”å¦‚:\n\nä»£ç å±‚çº§æ”¹å˜æ–‡ä»¶è·¯å¾„ åœ¨ç¨‹åºä¸­å¯ä»¥é€šè¿‡ä¸€äº›æ‰‹æ®µï¼ŒåŠ¨æ€çš„æ›´æ”¹å½“å‰è·¯å¾„ã€‚\n IVF: changeDirQQ gfortran: ChDir  ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æ‰‹æ®µï¼Œè·å¾—å½“å‰è·¯å¾„ï¼Œ\n IVF/gforran: GetCWD\nprogram testDir Implicit none CHARACTER(len=512) :: working_path call GET_COMMAND_ARGUMENT(0 , working_path); write(*,'(a,/,a)') 'exe path: ', trim(working_path); call GETCWD(working_path) write(*,'(a,/,a)') 'Working Directory: ', trim(working_path); end program testDir   è¾“å‡º:\nexe path: D:\\testCWD\\Debug\\test_cwd.exe working directory: D:\\testCWD  è°ƒè¯•FAST æœ€å…³é”®çš„æ˜¯ä¸€ä¸ªå¯¹åº”ä¸¤ä¸ªè®¾ç½®\n ä¸€ä¸ªå¯¹åº”æŒ‡çš„æ˜¯ç¬¬äºŒæ­¥çš„Linkerçš„output Fileçš„exeåå­—å’Œç¬¬ä¸‰æ­¥çš„Generalåº•ä¸‹çš„TargetNameå¯¹åº”ä¸Š ä¸¤ä¸ªè®¾ç½®æ˜¯æŒ‡åœ¨Debugingå¯¹Command Argumentså’ŒWorking Directoryçš„è®¾ç½®ã€‚Command ArgumentæŒ‡å®šæ–‡ä»¶åå­— Working DirectoryæŒ‡å®šæ–‡ä»¶è·¯å¾„ã€‚  è®¾ç½®å®Œå°±å¯ä»¥å¼€å§‹è°ƒè¯•äº†ã€‚\n","date":1486468875,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1486468875,"objectID":"52db0a05117d592f4020efd9f494f81a","permalink":"/blog/2017/02/07/fastdiao-shi/","publishdate":"2017-02-07T20:01:15+08:00","relpermalink":"/blog/2017/02/07/fastdiao-shi/","section":"archives","summary":"NREL FASTçš„è°ƒè¯•ä¸€ç›´å­˜åœ¨é—®é¢˜ï¼Œå…³é”®æ˜¯ä¸çŸ¥é“æ€ä¹ˆè®¾ç½®é€‰é¡¹ï¼ŒæŸ¥é˜…äº†Visual Studioå’Œä¸€äº›åŸºæœ¬çŸ¥è¯†æ•´ç†äº† NRELé¡¹ç›®çš„è°ƒè¯•æ–¹æ³•ã€‚\n","tags":null,"title":"FASTè°ƒè¯•","type":"archives"},{"authors":null,"categories":["life"],"content":"å¶å°”ï¼Œåœ¨ã€Šäººé—´æ­£é“æ˜¯æ²§æ¡‘ã€‹è¿™éƒ¨ç”µè§†å‰§å¬åˆ°ï¼Œ æ–‡ä¸­æœ‰æˆï¼Œæˆä¸­æœ‰æ–‡ è¯†æ–‡è€…è¯»æ–‡ï¼Œè¯†æˆè€…è¯»æˆï¼ˆæ¨ç«‹ä») éŸ³ä¸­æœ‰è°ƒï¼Œè°ƒä¸­æœ‰éŸ³ è¯†éŸ³è€…å¬éŸ³ï¼Œè¯†è°ƒè€…å¬è°ƒ(ç¿éœ)\nèƒŒæ™¯æ˜¯è§£æ”¾æˆ˜äº‰æ—¶æœŸï¼Œæ¨å’Œç¿çš„ä¸€æ¬¡9å¹´ä¹‹åçš„ç›¸è§ã€‚ä¸çŸ¥æƒ…è€…å¯èƒ½å¬å¾—æ˜¯ç¾å¦™çš„ æ–‡å­—ï¼Œä¼˜é›…çš„å£°éŸ³ï¼Œè€ŒèƒŒåå´è•´å«ç€å¦ä¸€åœºæˆï¼Œè€è’‹æ€»æ˜¯é‚£ä¹ˆçˆ±ç©ã€‚æ‰€æœ‰ç¼–ç¨‹è¯­è¨€ æˆ‘è§‰å¾—ä¹Ÿæ˜¯å¦‚æ˜¯ã€‚è¡¨é¢ä¸Šçœ‹ç€æ˜¯å­—æ¯çš„æ’åˆ—ç»„åˆï¼Œè€ŒèƒŒåå´å¯èƒ½è•´å«è€…ä¼˜é›…çš„è‰ºæœ¯ï¼Œ å’Œé‚£ä¹ˆä¸€å‡ºå‡ºç²¾å½©ç»ä¼¦çš„å¥½æˆã€‚\næˆ‘è§‰å¾—å®ƒå½±å“äº†æˆ‘ï¼Œæ‰€ä»¥æˆ‘è®°å½•äº†å®ƒã€‚\nåœ¨è¿™éƒ¨ç”µè§†å‰§ä¸­ï¼Œåˆ»ç”»çš„æ¨ç«‹é’è§’è‰²è¿˜ç»™æˆ‘å¦å¤–ä¸€ä¸ªç‰¹åˆ«æ·±åˆ»çš„å°è±¡ æ‰€æœ‰çš„ç§‘å­¦ï¼Œéƒ½ä¸èƒ½å·®ä¸€ç‚¹ï¼Œå·®ä¸€ç‚¹å’Œå·®å¾ˆå¤šéƒ½ä¸å¥½ï¼Œ99åº¦çš„å¼€æ°´æ²¡æœ‰å¼€èŠ±ï¼Œåªæœ‰åˆ°100åº¦æ‰æœ‰ ç§‘å­¦è¦å¾—æ˜¯ç²¾ç¡®ï¼Œè€Œä¸æ˜¯é©¬è™\nå¦å¤–å°±æ˜¯ï¼Œä»–åœ¨ç»˜å›¾çš„è¿‡ç¨‹è¯´çš„ï¼Œæˆ‘ç»˜åˆ¶åœ°å›¾çš„ç›®çš„æ˜¯ä¸ºäº†è¯´æœæˆ‘è‡ªå·±ï¼Œè€Œä¸æ˜¯è®©ä½ ä»¬çœ‹ï¼Œ æˆ‘å¾—å…ˆè¯´æœè‡ªå·±ï¼Œä»—æ‰èƒ½å¥½æ‰“ã€‚æ‰€ä»¥æ— è®ºåšä»€ä¹ˆéƒ½å¾—å…ˆæŠŠèƒŒåçš„ä¸œè¥¿ã€èƒŒåçš„åŸç†è¯´æœä½ è‡ªå·± å½¢æˆè‡ªå·±çš„ç†å¿µï¼Œè¿™æ ·æ‰èƒ½çŸ¥å·±çŸ¥å½¼ã€‚  æ–‡æˆå’ŒéŸ³è°ƒï¼Œè®©æˆ‘æ„è¯†åˆ°äº†é¢å’Œé‡Œçš„å…³ç³»ã€‚\nè€Œåœ¨æ˜¨å¤©ä¸æˆ‘å§¨ä¸ˆçš„äº¤æµä¸­ï¼Œåˆå¯¹å®¶åº­å’Œäººç”Ÿæœ‰äº†æ–°çš„è®¤è¯†ã€‚ æˆ‘æ‹‰ç€æˆ‘çš„å¥³æœ‹å‹å’Œæˆ‘çš„æœ‹å‹ä¸€èµ·åˆ°å°å§¨å®¶åšå®¢ï¼Œåˆšåˆ°å®¶çš„æ—¶å€™ï¼Œå§¨ä¸ˆå–äº†ä¸å°‘ï¼ˆå°æ†©ä¸­ï¼‰ã€‚ æˆ‘ä»¬å‡ ä¸ªäººèŠç€ï¼Œåæ¥ä»–æ…¢æ…¢é†’è¿‡æ¥ï¼Œè·Ÿæˆ‘ä»¬èŠå¤©ï¼ŒèŠå®¶å¸¸ç­‰ã€‚ æˆ‘å§¨ä¸ˆå¦‚æ˜¯è¯´ï¼š æˆ‘ä»¬éƒ½æ˜¯å¹³å¸¸äººï¼Œå†ä¼Ÿå¤§çš„äººä¹Ÿæ˜¯å¹³å‡¡äººï¼Œå†èªæ˜çš„äººä¹Ÿæ˜¯å¹³å¸¸äººï¼Œä¹Ÿéœ€è¦å¸¸å›å®¶çœ‹çœ‹ï¼Œ ä¹Ÿéœ€è¦æ—¶ä¸æ—¶çš„å’Œå®¶é‡Œäººæ‰“ä¸ªç”µè¯ã€‚å®¶é‡Œäººéƒ½ä¼šå› ä¸ºä½ å¶å°”çš„ç”µè¯ï¼Œæ„Ÿåˆ°æ¸©æš–ã€‚å¹´é•¿çš„äºº æœ‰è°ä¸æƒ³è€…å„¿å­™æ»¡å ‚ï¼Œå„¿å­™æŠ±è†çš„ï¼Œéƒ½å¸Œæœ›ï¼Œä½†ä¸ç°å®ã€‚é•¿å¤§äº†ï¼Œéƒ½åº”è¯¥å»é—¯é—¯ï¼Œé—¯å¤šå¤§åå ‚ï¼Œ ä¸è¦ç´§ï¼Œè¦ç´§çš„æ˜¯æœ‰ä¸Šè¿›å¿ƒã€‚åˆ«äººç°åœ¨æ¯”ä½ ä¼˜ç§€ï¼Œä½ å¯ä»¥æ…¢æ…¢æ¥ï¼Œåªè¦è‡ªå·±æœ‰ä¸€é¢—å¹³å¸¸å¿ƒï¼Œå¿ƒæ€ æ”¾å¥½äº†ï¼Œè¦æƒ³è€…å¯¹å¤§å®¶å¥½ï¼Œå¯¹åŒäº‹å¥½ï¼Œå¯¹åŒå­¦å¥½ï¼Œå¯¹å®¶é‡Œå¥½ï¼Œå¯¹é•¿è¾ˆå¥½ï¼Œå¯¹é¢†å¯¼å¥½ï¼Œæƒ³ç€ä»–ä»¬ å¥½ï¼Œè€Œä¸æ˜¯è¿‡å¤šçš„æŠ±æ€¨ï¼Œè¿‡å¤šçš„å¹æ°”ï¼Œä¸€å®šä¸èƒ½è¿™æ ·ã€‚ å¹³æ—¶å¤šåšç‚¹å¥½äº‹ï¼Œå¤šå¯¹ä»–ä»¬å¥½ã€‚ ä¸Šè‡³çˆ¶æ¯ã€ä¸‹è‡³å„¿å­™ã€å®¶åº­å’Œä¹ï¼Œå’Œåˆ™ä¸‡äº‹å…´ï¼Œå¤šä¹ˆæœ´ç´ çš„é“ç†ã€‚ å¯ä»¥æ—¶è€Œæ‡’æƒ°ï¼Œä½†æ˜¯ç»ä¸èƒ½æ²¡æœ‰ä¸Šè¿›å¿ƒï¼Œæœ‰ç‚¹è¿›æ­¥æ˜¯æœ€å¥½çš„ï¼Œä½ ä»¬ä¸¤ä¸ªäººä¸€èµ·è¿›æ­¥ï¼Œä¸€èµ·ä½“æ¤ å¯¹æ–¹ï¼Œå½¼æ­¤å®½å®¹ï¼Œå½¼æ­¤ç»è¥è‡ªå·±çš„å¤«å¦»ç”Ÿæ´»å’Œä¸¤ä¸ªå®¶åº­ã€‚ æ‰€ä»¥ï¼Œå¹³å¸¸å¿ƒå’Œå¥½è¿™ä¸ªå­—éƒ½å¾—åšå¥½ã€‚\nå¬äº†è¿™ä¹ è¯ä¹Ÿè®©æˆ‘çœ‹åˆ°ç°å®ç¤¾ä¼šä¸­çš„å¦ä¸€ç§å¿ƒæ€ï¼Œè€Œä¸”æ˜¯ä¸é”™çš„å¿ƒæ€å’Œç†å¿µï¼Œè€Œä¸æ˜¯è¯´æ¯”é’±å¤šï¼Œæ¯”æˆ¿å¤šç­‰ï¼Œ æ˜¯ä¸€ç§å¸Œæœ›å­å¥³å¥½ï¼Œå¸Œæœ›æœ‹å‹å¥½çš„å¹³å¸¸å¿ƒå¿ƒæ€ã€‚é€€ä¸€æ­¥åˆ™æµ·é˜”å¤©ç©ºã€‚\nå‚å·®å¤šæ€æ‰æ˜¯å¹¸ç¦çš„æœ¬æºï¼Œå­¦ä¼šç”¨åŒ…å®¹å¿ƒå»æ„Ÿå—ä½ é™„è¿‘çš„å¿ƒçµï¼Œç…§é¡¾å¥¹ä»¬ã€‚\n","date":1485940820,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1485940820,"objectID":"8841d6452ae41fddffec273f526aeaba","permalink":"/blog/2017/02/01/wen-xi-zhi-fen/","publishdate":"2017-02-01T17:20:20+08:00","relpermalink":"/blog/2017/02/01/wen-xi-zhi-fen/","section":"archives","summary":"å¶å°”ï¼Œåœ¨ã€Šäººé—´æ­£é“æ˜¯æ²§æ¡‘ã€‹è¿™éƒ¨ç”µè§†å‰§å¬åˆ°ï¼Œ æ–‡ä¸­æœ‰æˆï¼Œæˆä¸­æœ‰æ–‡ è¯†æ–‡è€…è¯»æ–‡ï¼Œè¯†æˆè€…è¯»æˆï¼ˆæ¨ç«‹ä») éŸ³ä¸­æœ‰è°ƒï¼Œè°ƒä¸­æœ‰éŸ³ è¯†éŸ³è€…å¬éŸ³ï¼Œè¯†è°ƒè€…å¬è°ƒ(ç¿éœ)\nèƒŒæ™¯æ˜¯è§£æ”¾æˆ˜äº‰æ—¶æœŸï¼Œæ¨å’Œç¿çš„ä¸€æ¬¡9å¹´ä¹‹åçš„ç›¸è§ã€‚ä¸çŸ¥æƒ…è€…å¯èƒ½å¬å¾—æ˜¯ç¾å¦™çš„ æ–‡å­—ï¼Œä¼˜é›…çš„å£°éŸ³ï¼Œè€ŒèƒŒåå´è•´å«ç€å¦ä¸€åœºæˆï¼Œè€è’‹æ€»æ˜¯é‚£ä¹ˆçˆ±ç©ã€‚æ‰€æœ‰ç¼–ç¨‹è¯­è¨€ æˆ‘è§‰å¾—ä¹Ÿæ˜¯å¦‚æ˜¯ã€‚è¡¨é¢ä¸Šçœ‹ç€æ˜¯å­—æ¯çš„æ’åˆ—ç»„åˆï¼Œè€ŒèƒŒåå´å¯èƒ½è•´å«è€…ä¼˜é›…çš„è‰ºæœ¯ï¼Œ å’Œé‚£ä¹ˆä¸€å‡ºå‡ºç²¾å½©ç»ä¼¦çš„å¥½æˆã€‚\n","tags":null,"title":"æ–‡æˆä¹‹åˆ†","type":"archives"},{"authors":null,"categories":["perl"],"content":"why need perl? If you need strong text regex processing ,use perl!\nOne paragraph I copied from perldoc perlintro:\nThe language is intended to be practical (easy to use, efficient, complete) rather than beautiful (tiny, elegant, minimal). Its major features are that it\u0026rsquo;s easy to use, supports both procedural and object-oriented (OO) programming, has powerful built-in support for text processing, and has one of the world\u0026rsquo;s most impressive collections of third-party modules.\nTo me, perl means a report programmer with practical experience.\n perlåŸºç¡€ perlè¯­æ³•é€ŸæŸ¥ perlé«˜çº§ç‰¹æ€§ some difference between -\u0026gt; and =\u0026gt; How to Program Perl You need to practice ,think, and share(your final target). Teach yourself Programming in ten years You need to talk to other programmer, they are all good people(Just think they are). ","date":1485083930,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1485083930,"objectID":"4f65d7e7a6744a6e8fae68a1357fd089","permalink":"/blog/2017/01/22/perl-summary/","publishdate":"2017-01-22T19:18:50+08:00","relpermalink":"/blog/2017/01/22/perl-summary/","section":"archives","summary":"why need perl? If you need strong text regex processing ,use perl!\nOne paragraph I copied from perldoc perlintro:\nThe language is intended to be practical (easy to use, efficient, complete) rather than beautiful (tiny, elegant, minimal). Its major features are that it\u0026rsquo;s easy to use, supports both procedural and object-oriented (OO) programming, has powerful built-in support for text processing, and has one of the world\u0026rsquo;s most impressive collections of third-party modules.\nTo me, perl means a report programmer with practical experience.\n","tags":null,"title":"Perl_Summary","type":"archives"},{"authors":null,"categories":[""],"content":"You need talk to others about \u0026ldquo;it\u0026rdquo; with clear,fluent and easy way , to let them understand very well. So in the computer learning,you should know how to talk with the books? how to learn from books(without consicious) which come from other authors(with consicious), then get what you want to overcome the problem or question you bump into.\nSo it is very necessary for you to learn some technique to analysis the different knowledge point, in order to different them and remember them, finally apply them to watch the phenomenon ,explain some phenomenon, and solve some tough science problem.\nLogical sequence(from Hao Bin)  why need X?(solve the relation between first and two or between former and previous or between question and solution) Time series:  +\u0026mdash;-+many works between X+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+Now at X+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+maybe later Y+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;\n what is X?(orient from ontology, what+how+howmany+where consist the basic ontology) It is very important to understand how to describe the question about what is X? Technique: + Make sure the pattern: subject verb and object( the subject is it!!)(it is \u0026hellip;.,,solve \u0026hellip;.,do help us\u0026hellip;.First,second\u0026hellip;.) + You should describe its function(the question which it can solve. In the relatity,all things is problem driven), what\u0026rsquo;s the advantage? + Finally, detail analysis: First, \u0026hellip;. Second:\u0026hellip;.(it can consist many parts.)\n how to use X?(as simple and clear as you can)\n where you should take care when you use X? What\u0026rsquo;s the point?\n what\u0026rsquo;s the factory scenery of the X? where you can put X into usage?\n Advantage and disadvantage of X? Because of disadvantage,so you need Y.\n  Technique:\n1. how to express your statement with layer? www w: why (target: you should describe your background clearly) -------question which connect it and you or us!! w: what(what it is . Get clear of the concept) -------what **it** is---\u0026gt; it(commonly without conscious) --what can it do? w: how(how to use your X) ----------**you** want to know how to use it? ---\u0026gt; you(with conscious) --what you are going to do? You may be ignored!!!  Reference:\n 1. about-thinking-process-and-knowledge-composition 2. jump-out-of-ontology  Example:\n Please tell us your understanding of for recycle?  Your answer:\nbackground(question): if you try to run one method 100 times, then you should write 100 lines code to call the method, very unefficiency and easy get fault. it: for recycle can solve the problem. for recycle can let the method execute recyclly. for recycle consist three parts: initial value, condition adjust, and inrease part or decrease part which can let your recycle close to the outlet. You: so you can write the for then first edit the initial part, then write your condition, also third part. Finally in your for body ,you can write your method which need to be call many times.  what\u0026rsquo;s the difference between X and Y(From www.rupeng.com) The worst thing while you describe something, is you try to jump the thing without stop. You need to concentrate your picture, and describe clearly that picture carefully .\nFinal goal: clear,fluent and easy to express your idea. One requirement: practice the conscious process\nTechnique: 1. the common characteristic between X and Y 2. how many different characteristic between X and Y? first ,\u0026hellip; second\u0026hellip;. third\u0026hellip;\nExample:\nwhat\u0026rsquo;s the difference between Windows and Linux?\nCommon characteristic: they are all the operate system , which can do many computing and amusement work But there are three main difference between windows and Linuxï¼š First, money---- Windows is charged ,While Linux is uncharged. Second, open source---- windows is close source, while Linux is open source. Third, use scenario ---- windows is orient to desktop system, while Linux is orient to server system  how to deep into the knowledge?  when you ask yourself the question about the what,when,where, how many ,how much and so on. you can continue asking yourself about the how and why(2w deep method) to get the whole information about the X. ","date":1485083802,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1485083802,"objectID":"2764bd2ca0bccfdec0d3a397fe0a2abe","permalink":"/blog/2017/01/22/how-to-learn-one-technique/","publishdate":"2017-01-22T19:16:42+08:00","relpermalink":"/blog/2017/01/22/how-to-learn-one-technique/","section":"archives","summary":"You need talk to others about \u0026ldquo;it\u0026rdquo; with clear,fluent and easy way , to let them understand very well. So in the computer learning,you should know how to talk with the books? how to learn from books(without consicious) which come from other authors(with consicious), then get what you want to overcome the problem or question you bump into.\nSo it is very necessary for you to learn some technique to analysis the different knowledge point, in order to different them and remember them, finally apply them to watch the phenomenon ,explain some phenomenon, and solve some tough science problem.\n","tags":null,"title":"how_to_learn_one_technique","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"ç›®å½•  1. åŸºç¡€éƒ¨åˆ† 2. é€šè¿‡æ„é€ å‡½æ•°ï¼Œæ„é€ å‡ºNatural recursion 3. é‡æ–°è®¾è®¡RemAV RemFishV RemIntV 4. ä¸‹ä¸€æ­¥æŠŠPieDçš„å­—æ®µæ”¾å…¥åˆ°å¯¹åº”çš„å‚æ•°å½“ä¸­ 5. å¼•å…¥ this å…³é”®å­—ï¼ŒæŒ‡ä»£è®¿é—®è€…æœ¬èº«ï¼ŒåŒæ­¥ä¿®æ”¹å¯¹åº”çš„è®¿é—®è€…ç±» 6. éœ€è¦è¿›ä¸€æ­¥æå–å‡ºvisitoréƒ¨åˆ†çš„å‡½æ•°  7. ç»Ÿä¸€bTreeVisitorI itreevisitori ttreevisitori 8. é‡æ–°è®¾è®¡RemAV RemFishV RemIntV ä¸ºRemV(ç”¨Objectæ›¿æ¢ï¼‰  9. ç„¶åç°åœ¨æŠŠRemv å’ŒSubsté‡æ–°æ”¾å…¥PieD 10. ç´§æ¥ç€ æˆ‘ä»¬è¿˜æƒ³ç€æŠŠRemv SubstVæ”¾å…¥å‚æ•°çš„ä½ç½® 11. ç´§æ¥ç€æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æŠ½è±¡  12. ç´§æ¥ç€æˆ‘ä»¬å‘ç°remå’Œsubstä»£ç ç±»ä¼¼  13. ç„¶åå†å®ç°Seté›†åˆç±»å‹ 14. SetEvalVç›´æ¥ç»§æ‰¿IntEvalVä¸åˆç†?  15. IntEvalD å’ŒSetEvalDå¾ˆå¤šç›¸ä¼¼ä¹‹å¤„  16. æ ¹æ®extendsä½¿ç”¨Overrideå¢åŠ å‡½æ•°çš„ä¸°å¯Œæ€§   è§†è§’æ²¡æƒ³åˆ°å¯ä»¥åˆ†æˆä¸åŒçš„classesï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œextendså’Œimplementï¼Œæœ€ç»ˆnewé€šè¿‡constructorsåˆ›é€ ä¸åŒçš„valueã€‚ä¸¤çº§åœ¨äºåŸºç¡€å…ƒä»¶å’ŒåŠŸèƒ½å…ƒä»¶ä¸¤éƒ¨åˆ†ã€‚ä¸¤çº§ä¹Ÿå¯ä»¥åˆ†ä¸ºextendså’Œimplementsã€‚é›†äºä¸€ä¸ªclassã€‚\nå­¦å®Œã€Ša little javaã€‹çš„å¿ƒå¾—,\n æ„é€ å‡½æ•°ï¼šnewé€šè¿‡æ„é€ å‡½æ•°ï¼Œäº§ç”Ÿäº†datatypeçš„å€¼ï¼›æ„é€ å‡½æ•°ç”±æ­¤è¿›è¡Œäº†natural recursionï¼Œ å¹¶é€šè¿‡ä¸€ä¸ªåŸºç±»é€€å‡ºå¾ªç¯ï¼ˆè¯¦è§PieD).new create values. This,ä¸€èˆ¬æŒ‡å‘å½“å‰å¯¹è±¡ï¼Œä½†æ˜¯åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œthiså¯èƒ½æŒ‡ä»£çš„æ˜¯å½“å‰å¯¹è±¡ä¹‹åçš„æ‰€æœ‰å‰©ä½™å¯¹è±¡ \u0026ldquo;this\u0026rdquo;æŒ‡ä»£çš„æ˜¯è‡ªæŒ‡å¯¹è±¡ ä¹Ÿå°±æ˜¯å‡½æ•°æŸæŸçš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¹¶ä¸”æ˜¯ä¸€ç›´ä¸å˜çš„ã€‚Just self-referentialï¼Œbecause this is a RemV, and it is exactly what we need to complete the job. æ‰€ä»¥thisæŒ‡ä»£å‡½æ•°è«æŸçš„å¯¹è±¡ TopæŸæŸå‡½æ•°è¯¢é—®æŸç§æ¥è‡ªå‡½æ•°æŸæŸçš„forTopåŠŸèƒ½ ï¼Œå¹¶ä¼ é€’æ„é€ å‡½æ•°çš„fieldså€¼(propertiesï¼‰ä»¥åŠè¯¥æŸæŸå‡½æ•°comsumesçš„objectsï¼ˆarguments) å‡çº§ç‰ˆæœ¬ the method accepts a visitor(è¯¥visitoræ¥å£åŒ…å«äº†forTop forBotæŠ½è±¡æ–¹æ³•ï¼Œè¯¥æ¥å£ç»Ÿä¸€äº†ä¸åŒçš„å‡½æ•°æŸæŸï¼Œæ‰€ä»¥æ‰€æœ‰å‡½æ•°æŸæŸç»Ÿç§°ä¸ºacceptå‡½æ•°æŸæŸï¼‰and ask for its servicesï¼Œ so we call it acceptï¼Œ è€Œè¯¥æ¥å£çš„é€šå¸¸å®ä¾‹åŒ–å¯¹è±¡ä¹Ÿè¢«å«åšaskï¼Œ ask for services. Objectç±»å‹å¯ä»¥æŠ½è±¡int boolean å…¶ä»–ç±»å‹ å‡½æ•°çš„æŠ½è±¡å¤§ä½“è¡¨ç°ä¸ºå‚æ•°æ•°æ®ç±»å‹ï¼Œè¿”å›å€¼æ•°æ®ç±»å‹å’Œå‡½æ•°bodyçš„å…·ä½“å®ç°ã€‚ a. å‚æ•°æ•°æ®ç±»å‹ b. è¿”å›å€¼æ•°æ®ç±»å‹ c. bodyå…·ä½“å®ç° ç®€åŒ–ï¼ˆç®€æ´ï¼‰ã€æ‹“å±•æ€§ã€æ–¹ä¾¿ å½“æˆ‘ä»¬çš„å‚æ•°å€¼ä»methodå˜åˆ°fieldsï¼Œæˆ‘ä»¬å°±æ²¡å¿…è¦åœ¨åå¤è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„æ—¶å€™ éœ€è¦ä¸æ–­åœ°comsumeï¼Œè€ŒåŒæ—¶åˆä¿è¯äº†thiså¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸æ–­åœ°è‡ªæŒ‡ï¼ˆæœŸé—´ä¸äº§ç”Ÿæ–°çš„fieldsï¼‰æ‰€ä»¥ä¹Ÿå°±æ˜¯ä½¿å¾—è®¡ç®—åŠ å¿«äº†ã€‚è¿™ä¹Ÿæ˜¯thiså­˜åœ¨çš„åŸå› ï¼ˆå¹¶ä¸”è¯¥thiså¯¹è±¡åªç”¨åœ¨è®¿é—®è€…å¯¹è±¡ä¸­ï¼‰ We know that a visitorI contains one method each for the Circle, Square, and Trans variants,. And each of these methods Consumes the fields of the respective kinds of objects(objects of types) æŸæŸå¯¹è±¡çš„æŸæŸå‡½æ•°ï¼Œï¼ˆæºå¸¦å‡½æ•°æŸæŸå’Œå­—æ®µï¼‰ è¯¢é—®å‡½æ•°æŸæŸçš„forå¯¹è±¡æŸæŸåŠŸèƒ½ï¼Œï¼ˆæºå¸¦å¯¹è±¡æŸæŸï¼‰ æŸæŸå¯¹è±¡çš„acceptæºå¸¦askå¹¶å†…éƒ¨ç”± ask çš„forå¯¹è±¡æŸæŸæºå¸¦å¯¹è±¡æŸæŸç»„æˆï¼Œè€Œforå¯¹è±¡æŸæŸæºå¸¦å¯¹è±¡æŸæŸå¹¶å†…éƒ¨ç”±å¯¹è±¡æŸæŸçš„acceptæºå¸¦å½“å‰askå¯¹è±¡æ„æˆã€‚ æŸæŸå¯¹è±¡çš„acceptæºå¸¦askå¹¶å†…éƒ¨ç”± ask çš„forå¯¹è±¡æŸæŸç»„æˆï¼Œè€Œforå¯¹è±¡æŸæŸæºå¸¦å¯¹è±¡æŸæŸå¹¶å†…éƒ¨ç”±å¯¹è±¡æŸæŸçš„acceptç»„æˆã€‚  åœ¨å¯¹è±¡å†…éƒ¨ï¼ŒæŸæŸå¯¹è±¡çš„acceptæºå¸¦askå¹¶å†…éƒ¨ç”± ask çš„forå¯¹è±¡æŸæŸæºå¸¦å¯¹è±¡æŸæŸç»„æˆï¼Œè€Œåœ¨visitorå†…éƒ¨ï¼Œforå¯¹è±¡æŸæŸæºå¸¦å¯¹è±¡æŸæŸå¹¶å†…éƒ¨ç”±å¯¹è±¡æŸæŸï¼ˆä¹Ÿå°±æ˜¯consumes the fields of the respective kinds of objects å æ®å¯¹è±¡ç±»å‹çš„å­—æ®µå±æ€§ï¼‰çš„acceptæºå¸¦å½“å‰askå¯¹è±¡æ„æˆã€‚ We don\u0026rsquo;t specify fields in interfaces. And in 7 W hatever. any case, we don\u0026rsquo;t want anybody else to see p. This and thatåœ¨å¯¹è±¡é—´ä¼ é€’ï¼Œè€Œconsumeåœ¨å‡½æ•°é—´ä¼ é€’ï¼ˆHangs over back and forth(fields åœ¨å¯¹è±¡é—´ä¼ é€’ï¼Œè€Œconsumeåœ¨å‡½æ•°é—´ä¼ é€’) 10. è¯¥ä¹¦åŒ…å«ç€TLS TSS å’Œprologç¼–ç¨‹çš„æ€æƒ³(å› ä¸ºä½ è¦ç†è§£new Top new Botç­‰éœ€è¦æœ‰fact and ruleçš„æ„è¯†)ï¼ˆä»”ç»†å»å“å° go to absorb) è¿˜æœ‰å°±æ˜¯skeleton and techniquesæŠ€æœ¯ 11. Extends interface,this extension produces an interface that contains all the obligations(i.e. names of methods and what they consume and produce) of shapeVisitorI and the additional one named forUnion(æ‰€ä»¥æ¢ä¸ªè§’åº¦è¯´ï¼Œone class can implement many interfaces. 12. é‡è½½override ç›¸åŒçš„åå­—å¸¦ç€ä¸åŒçš„è¾“å…¥ç±»å‹ 13. ç‚¹å·å¯ä»¥è¯»ä½œ from ç‚¹å·ä¹‹å‰å«åšfrom who ç‚¹å·ä¹‹åå«åšservice 14. è§£é‡Šçš„é‡ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿ è¦ç‚¹æ˜¯ä»€ä¹ˆ\nä»€ä¹ˆæ˜¯æ€è€ƒåŠ›çš„ä¸‰è¦ç´ ï¼Œè®²è¿™ä¸ªé—®é¢˜ä¹‹å‰æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯æ€è€ƒæ€ç»´ï¼Œé¦–å…ˆæ€è€ƒæ˜¯æ€ç»´çš„ä¸€ç§æ¢ç´¢æ´»åŠ¨ï¼Œè€Œåœ¨æ€ç»´è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸€ç§å…·æœ‰ç§¯ææ€§å’Œåˆ›é€ æ€§çš„ä½œç”¨åŠ›è¿™ç§å°±æ˜¯æ€è€ƒåŠ›ã€‚æ®ç‰©ç†å­¦ç†è§£ï¼Œæ€è€ƒåŠ›å…·æœ‰ä¸‰ä¸ªåŸºæœ¬è¦ç´ ï¼šåˆ†åˆ«ä¸ºå¤§å°ã€æ–¹å‘ã€ä½œç”¨ç‚¹ã€‚æ€è€ƒåŠ›åŒæ ·ä¹Ÿç¦»ä¸å¼€ä¸‰ä¸ªåŸºæœ¬è¦ç´ ï¼šåˆ†åˆ«ä¸ºå¤§å°ã€æ–¹å‘ã€ä½œç”¨ç‚¹ã€‚\n å¤§å° â€”â€”æ€è€ƒåŠ›é¦–å…ˆå–å†³äºæ€è€ƒè€…æŒæ¡çš„å…³äºæ€è€ƒå¯¹è±¡çš„çŸ¥è¯†å’Œä¿¡æ¯é‡ï¼ˆå¤§å°ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ç›¸å…³çš„çŸ¥è¯†å’Œä¿¡æ¯ï¼Œå°±ä¸å¯èƒ½äº§ç”Ÿç›¸å…³çš„æ€è€ƒæ´»åŠ¨ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒçŸ¥è¯†é‡å’Œä¿¡æ¯é‡è¶Šå¤§ï¼Œæ€è€ƒå°±è¶ŠåŠ å…·ä½“ã€å…¨é¢å’Œå®Œæ•´ï¼Œä»è€Œå†³å®šäº†æ€è€ƒçš„ç»´åº¦ã€‚ æ–¹å‘ â€”â€”æˆ‘ä»¬è¿™é‡Œæ‰€è¯´çš„æ€è€ƒæœ‰åˆ«äºå¦„æƒ³å’Œå¹»æƒ³ï¼Œè€Œæ˜¯ä¸€ç§æœ‰ç›®çš„æ€§å’Œæœ‰è®¡åˆ’æ€§çš„æ€ç»´æ´»åŠ¨ï¼Œå› æ­¤ï¼Œè¿™ç§æ€è€ƒéœ€è¦æœ‰ä¸€å®šçš„ä»·å€¼å¯¼å‘ï¼Œä¹Ÿå°±æ˜¯æ€è·¯â€”â€”ä½“ç°ä¸ºç›®çš„æ€§ã€æ–¹å‘æ€§å’Œä¸€è‡´æ€§ã€‚æ¼«æ— ç›®çš„åœ°æ€è€ƒéš¾ä»¥å‘æŒ¥å¼ºæœ‰åŠ›çš„æ€è€ƒåŠ›ï¼Œå¸¸å¸¸ä¼šæŠŠæ€è€ƒå¼•è¿›æ­»èƒ¡åŒï¼Œå¯¼è‡´æ€è·¯å¤­æŠ˜å’Œæ— æœè€Œç»ˆã€‚ç›®çš„æ€§ã€æ–¹å‘æ€§ã€ä¸€è‡´æ€§å’Œä»·å€¼å¯¼å‘ï¼Œå†³å®šç€æ€è€ƒçš„è§’åº¦å’Œå‘åº¦ã€‚ ä½œç”¨ç‚¹ â€”â€”å¿…é¡»æŠŠæ€è€ƒé›†ä¸­åœ¨ç‰¹å®šçš„å¯¹è±¡ä¸Šï¼Œå¹¶æŠŠæ¡å…¶ä¸­çš„å…³é”®ç‚¹ï¼Œè¿™æ ·çš„æ€è€ƒå°±ä¼šåŠ¿å¦‚ç ´ç«¹ã€‚å¦‚æœæ‰¾ä¸å‡†æ€è€ƒçš„ç€åŠ›ç‚¹ï¼Œå°±ä¼šç²¾åŠ›åˆ†æ•£ã€æ€ç»´ç´Šä¹±ã€èƒ¡æ€ä¹±æƒ³ï¼Œå‡ºç°ä¸œä¸€æ¦”å¤´è¥¿ä¸€æ£’çš„ç°è±¡ã€‚æ€è€ƒå°±ä¼šåœç•™åœ¨äº‹ç‰©çš„è¡¨é¢ä¸Šæµ®å…‰æ å½±ï¼Œæ— æ³•æ·±åˆ»è®¤è¯†äº‹ç‰©çš„æœ¬è´¨ã€‚æ€è€ƒåœ¨ä½œç”¨ç‚¹ä¸Šçš„é›†ä¸­æ€§ç¨‹åº¦ï¼Œå†³å®šç€æ€è€ƒçš„å¼ºåº¦å’ŒåŠ›åº¦(å¹¿åº¦å’Œæ·±åº¦ï¼‰ã€‚  åŸºç¡€éƒ¨åˆ† ç†è§£åˆ†å±‚ã€‚\nKebabD(chapter2) çƒ¤è‚‰ isVeggie(); whatHolder(); Holder çƒ¤è‚‰æ‘†æ”¾å·¥å…· Object; Holder(Object); isVeggie(); whatHolder(); Shallot è‘± KebabD; Shallot(KebabD); isVeggie(); whatHolder(); Shrimp è™¾ KebabD; Shrimp (KebabD); isVeggie(); whatHolder(); Radish èåœ KebabD; Radish (KebabD); isVeggie(); whatHolder(); Pepper èƒ¡æ¤’ç²‰ KebabD; Pepper (KebabD); isVeggie(); whatHolder(); Zucchini è¥¿è‘«èŠ¦ KebabD; Zucchini (KebabD); isVeggie(); whatHolder(); RodD(chapter2) æ† å°†çƒ¤è‚‰ä¸²èµ·æ¥å·¥å…·(çƒ¤è‚‰æ‘†æ”¾æ–¹å¼1ï¼‰ Dagger åŒ•é¦– Sabre å†›åˆ€ Sword å‰‘ PlateD(chapter2) ç›˜å­ ï¼ˆçƒ¤è‚‰æ‘†æ”¾æ–¹å¼2) Gold é‡‘ç›˜å­ Silver Brass é»„é“œç›˜å­ Copper é•€é“œç›˜å­ Wood æœ¨ç›˜å­ PointD(chapter1,2) ç‚¹ distanceTo0(int,int); //å¯ä»¥æŠŠå®ƒä»¬ç§»å…¥åˆ°æ„é€ å‡½æ•°ä¸­ closerTo0(); CartesianPt ç¬›å¡å°”åæ ‡ Int Int CartesianPt(int,int); distanceTo0(); Closeto0(); ManhattenPt æ›¼å“ˆé¡¿åæ ‡ Int Int ManhattenPt(int,int); distanceTo0(); Closeto0(); åœ†æŸ±åæ ‡ç³» çƒåæ ‡ç³» PieD PizzaDï¼ˆchapter3,4ï¼‰ remA å»é™¤æ¯”è¨é¥¼çš„å‡¤å°¾é±¼è®¢æ–™ï¼ˆé˜²æ­¢è¿‡å’¸ï¼‰ topAwC() åœ¨å‡¤å°¾é±¼é¡¶æ–™åŠ ä¸Šå¥¶é…ªé¡¶æ–™ï¼ˆç›–ä½å’¸å‘³ï¼‰ subAbC() å°†æ‰€æœ‰çš„å‡¤å°¾é±¼é¡¶æ–™æ¢æˆå¥¶é…ªé¡¶æ–™ Crust é¢åŒ…çš® remA(); topAwC(); subAbC(); Cheese å¥¶é…ª pizzaD Cheese(PizzaD) remA(); topAwC(); subAbC(); Olive æ©„æ¦„ pizzaD Olive(PizzaD) remA(); topAwC(); subAbC(); Anchovy å‡¤å°¾é±¼ pizzaD Anchovy(PizzaD) remA(); topAwC(); subAbC(); Sausage é¦™è‚  pizzaD Sausage(PizzaD) remA(); topAwC(); subAbC(); Spinach è èœ pizzaD Spinach(PizzaD) remA(); topAwC(); subAbC(); Shape Shish(chapter2ï¼Œ4) ç¾Šè‚‰ä¸² onlyOnions(); isVegetarian(); Skew æ¶å­ çƒ¤è‚‰å‰å­ Onion æ´‹è‘± Lamb ç¾”ç¾Šè‚‰ Tomato è¥¿çº¢æŸ¿ Tree SeasoningD (chapter1) è°ƒå‘³å“ Sage(é¼ å°¾è‰) Pepper Salt Thyme(ç™¾é‡Œé¦™) NumD (chapter1) Zero OneMoreThan LayerD Base Slice FruitD  ç¬¬äºŒæ¡å»ºè®® When writing a function over a datatype, place a method in each of the variants that make up the datatype. If a field of a variant belongs to the same datatype, the method may call the corresponding method of the field in computing the function.ï¼ˆç–‘é—®å­ç±» æ¯ç»§æ‰¿ä¸€æ¬¡çˆ¶ç±» éƒ½å¾—é‡å†™ä¸‰ä¸ªçˆ¶ç±»çš„æŠ½è±¡å‡½æ•° æœ‰ç‚¹è´¹äº‹ã€‚ã€‚ \u0026mdash;-é‚£ä¹ˆè®¿é—®è€…æ¨¡å¼åˆ°åº•æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿï¼‰ ç¬¬å…«æ¡å»ºè®® When extending a class, use overriding to enrich its functionality.\næ ¹æ®ä»¥ä¸Šå»ºè®®ï¼Œ LtdSubstV å¯ä»¥ç›´æ¥åœ¨ SubstV ç±»ä¸Šè¿›è¡Œç»§æ‰¿å’Œæ‰©å±•ã€‚\nShish(chapter2ï¼Œ4) ç¾Šè‚‰ä¸² OnlyOnionsV IsVegetarianV onlyOnions(); isVegetarian(); Skew æ¶å­ çƒ¤è‚‰å‰å­ onlyOnions(); isVegetarian(); Onion æ´‹è‘± ShishD Onion(ShishD); onlyOnions(); isVegetarian(); Lamb ç¾”ç¾Šè‚‰ ShishD Lamb(ShishD); onlyOnions(); isVegetarian(); Tomato è¥¿çº¢æŸ¿ ShishD Tomato(ShishD); onlyOnions(); isVegetarian(); OnlyOnionsV forSkew(); forOnion(ShishD); forLamb(ShishD); forTomato(ShishD); isVegetatianV forSkew(); forOnion(ShishD); forLamb(ShishD); forTomato(ShishD); ShishD OnlyOionsV ooFn IsVegeterian ivFn onlyOnions()a; isVegetarian()a; Skew onlyOnions(); isVegetarian(); Onion onlyOnions(); isVegetarian(); Lamb onlyOnions(); isVegetarian(); Tomato onlyOnions(); isVegetarian();  é€šè¿‡æ„é€ å‡½æ•°ï¼Œæ„é€ å‡ºNatural recursionéƒ¨åˆ†ï¼Œå½¢æˆé€’å½’ï¼Œé€’å½’å‡ºå£ä¸ºskew RemAV forCurst(); forCheese(PizzaD); forOlive(PizzaD); forAnchovy(PizzaD); forSausage(PizzaD); TopAwCV forCurst(); forCheese(PizzaD); forOlive(PizzaD); forAnchovy(PizzaD); forSausage(PizzaD); SubAbCV forCurst(); forCheese(PizzaD); forOlive(PizzaD); forAnchovy(PizzaD); forSausage(PizzaD); PizzaD RemAV remFn TopAwCV topFn SubAbCV subFn remA()a; topAwC()a; subAbC()a; Crust remA(); topAwC(); subAwC(); Cheese PizzaD Cheese(PizzaD) remA(); topAwC(); subAwC(); Olive PizzaD Olive(PizzaD) remA(); topAwC(); subAwC(); Anchovy PizzaD Anchovy(PizzaD) remA(); topAwC(); subAwC(); Sausage PizzaD Sausage(PizzaD remA(); topAwC(); subAwC(); PieD RemAV raFn RemFish rfFn remA()a; remFish(FishD)a; Bot remA(); remFish(FishD); Top Object PieD Top(Object, PieD) remA(); remFish(FishD); FishD Salmon é²‘é±¼ Equals(Object); Anchovy å‡¤å°¾é±¼ Equals(Object); Tuna é‡‘æªé±¼ Equals(Object); RemAV forBot fotTop(Object, PieD) RemFishV forBot(FishD) forTop(Object, PieD, FishD) RemIntV forBot(int) forTop(Object, pieD, Integer)  é‡æ–°è®¾è®¡RemAV RemFishV RemIntV ä¸ºRemV(ç”¨Objectæ›¿æ¢ï¼‰ RemV forBot(Object) forTop(Object, pieD, Object)  ä¸‹ä¸€æ­¥æŠŠPieDçš„å­—æ®µæ”¾å…¥åˆ°å¯¹åº”çš„å‚æ•°å½“ä¸­ abstract class PieD { abstract PieD rem(RemV remFn, Object o); abstract PieD subst(SubstV substFn, Object n, Object o); } PieD Rem()a; Subst()a; Top Top(Object,Object) Rem(); Subst(); Bot Bot(Object,Object) Rem(); Subst();  å¼•å…¥ this å…³é”®å­—ï¼ŒæŒ‡ä»£è®¿é—®è€…æœ¬èº«ï¼ŒåŒæ­¥ä¿®æ”¹å¯¹åº”çš„è®¿é—®è€…ç±»ã€‚ PieD Rem(Remv)a; Subst(Subst)a; Top Top Rem Subst Bot Bot Rem Subst  éœ€è¦è¿›ä¸€æ­¥æå–å‡ºvisitoréƒ¨åˆ†çš„å‡½æ•° è¿™æ ·å°±å¯ä»¥æŠŠæ‰€æœ‰\nPieVisitorI forBot(); forTop(); Remv forBot(); forTop(); SubstV forBot(); forTop(); pieD Accept(PieVisitorI) Bot Accept(pieVisitorI); Top Accept(pieVisitorI); FruitD Peach Apple Pear Lemon Fig æ— èŠ±æœ TreeD Accept(bTreeVisitorI) Accept(iTreeVisitorI) Accept(tTreeVisitorI) Bub èŠ½ Accept(bTreeVisitorI) Accept(iTreeVisitorI) Accept(tTreeVisitorI) Flat å¹³é¡¶ FruitD TreeD Flat(FruitD, TreeD) Accept(bTreeVisitorI) Accept(iTreeVisitorI) Accept(tTreeVisitorI) Split åˆ†æ TreeD TreeD Split(TreeD, TreeD) Accept(bTreeVisitorI) Accept(iTreeVisitorI) Accept(tTreeVisitorI) bTreeVisitorI forBud(); forFlat(FruitD, TreeD); forSplit(TreeD, TreeD); bIsFlatV implements bTreeVisitorI forBud(); forFlat(FruitD, TreeD); forSplit(TreeD, TreeD); bIsSplitV implements bTreeVisitorI forBud(); forFlat(FruitD, TreeD); forSplit(TreeD, TreeD); bHasFruitV implements bTreeVisitorI forBud(); forFlat(FruitD, TreeD); forSplit(TreeD, TreeD); iTreeVisitorI forBud(); forFlat(FruitD, TreeD); forSplit(TreeD, TreeD); iHeightV implements iTreeVisitorI forBud(); forFlat(FruitD, TreeD); forSplit(TreeD, TreeD); iOccursV implements iTreeVisitorI FruitD iOccursV(FruitD) forBud(); forFlat(FruitD, TreeD); forSplit(TreeD, TreeD); tTreeVisitorI forBud(); forFlat(FruitD, TreeD); forSplit(TreeD, TreeD); tSubstV implements tTreeVisitorI FruitD FruitD tSubstV(FruitD, FruitD) forBud(); forFlat(FruitD, TreeD); forSplit(TreeD, TreeD); iOccursV implements tTreeVisitorI forBud(); forFlat(FruitD, TreeD); forSplit(TreeD, TreeD);  ä¸ºäº†ç»Ÿä¸€bTreeVisitorI å’Œ iTreeVisitorI tTreeVisitorI ï¼ˆä¸‰ä¸ªçš„ä¸åŒå°±åœ¨äºè¿”å›å€¼åˆ†åˆ«ä¸º boolean int treeD) ``` java TreeVisitorI forBud(); forFlat(FruitD, TreeD); forSplit(TreeD, TreeD); IsFlatV implements TreeVisitorI forBud(); forFlat(FruitD, TreeD) forSplit(TreeD, TreeD) OccursV implements TreeVisitorI FruitD OccursV(FruitD) forBud(); forFlat(FruitD, TreeD) forSplit(TreeD, TreeD) class OccursV implements TreeVisitorI { FruitD a; OccursV(FruitD _a) { a = _a; } public Object forBud() { return new Integer(0); } public Object forFlat(FruitD f, TreeD t) { if (f.equals(a)) return new Integer(((Integer)(t.accept(this))).intValue() + 1); else return t.accept(this); } public int forSplit(TreeD l, TreeD r) { return new Integer(((Integer)(l.accept(this))).intValue() + ((Integer)(r.accept(this))).intValue()); } } TreeD Accept(TreeVisitorI) Bub èŠ½ Accept(TreeVisitorI) Flat å¹³é¡¶ FruitD TreeD Flat(FruitD, TreeD) Accept(TreeVisitorI) Split åˆ†æ TreeD TreeD Split(TreeD, TreeD) Accept(tTreeVisitorI) PieD RemAV raFn RemFish rfFn remA()a; remFish(FishD)a; Bot remA(); remFish(FishD); Top Object PieD Top(Object, PieD) remA(); remFish(FishD); FishD Salmon é²‘é±¼ Equals(Object); Anchovy å‡¤å°¾é±¼ Equals(Object); Tuna é‡‘æªé±¼ Equals(Object); RemAV forBot fotTop(Object, PieD) RemFishV forBot(FishD) forTop(Object, PieD, FishD) RemIntV forBot(int) forTop(Object, pieD, Integer) ``` é‡æ–°è®¾è®¡RemAV RemFishV RemIntV ä¸ºRemV(ç”¨Objectæ›¿æ¢ï¼‰ RemV forBot(Object) forTop(Object, pieD, Object) PieD RemV Rem(Object) Bot Rem(Object) Top Object PieD Top(Object, PieD) Rem(Object) SubstFishV forBot(FishD, FishD) forTop(Object , PieD, FishD, FishO) SubstIntV forBot(Int, Int) forTop(Object , PieD, Int, Int) SubstV forBot(Object, Object) forTop(Object , PieD, Object, Object)  ç„¶åç°åœ¨æŠŠRemv å’ŒSubsté‡æ–°æ”¾å…¥PieD PieD Remv SubstV Rem(Object) Subst(Object, Object) Bot Rem(Object) Subst(Object,Object) Top Object PieD Top(Object,PieD) Rem(Object) Subst(Object,Object)  ç´§æ¥ç€ æˆ‘ä»¬è¿˜æƒ³ç€æŠŠRemv SubstVæ”¾å…¥å‚æ•°çš„ä½ç½® PieD Rem(Remv,Object) Subst(SubstV,Object, Object) Bot Rem(Renv,Object) Subst(Substv,Object,Object) Top Object PieD Top(Object,PieD) Rem(RemV,Object) Subst(Substv,Object,Object)  ç´§æ¥ç€æˆ‘ä»¬è¿›ä¸€æ­¥æ¯”è¾ƒRemV SubstVçš„å®ç°(æˆ‘ä»¬å°±å¾—é‡æ–°ä¿®æ”¹remå’Œsubstäº†) class RemV { Object o; RemV(Object _o) { o = _o; } PieD forBot(Object o){ return new Bot(); } PieD forTop(Object t, PieD r){ if (o.equals(t)) return r.rem(this); else return new Top(t, r.rem(this)); } class RemV { PieD forBot(Object o) { return new Bot(); } PieD forTop(Object t, PieD r, Object o) { if (o.equals(t)) return r.rem(o); else return new Top(t, r.rem(o)); } } class SubstV { PieD forBot(Object n, Object o) { return new Bot(); } PieD forTop (Object t, PieD r, Object n, Object o) { if (o.equals(t)) return new Top(n, r.subst(n, o)); else return new Top(t, r.subst(n, 0)); } } class SubstV { Object n; Object o; SubstV(Object _n, Object _o){ n = _n; o = _o; } PieD forBot(Object n, Object o){ return new Bot(); } PieD forTop(Object t, PieD r){ if (o.equals(t)) return new Top(n, r.subst(this)); else return new Top(t, r.subst(this)); } }  ç´§æ¥ç€æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æŠ½è±¡ PieD Rem(RemV) Subst(SubstV) Top Object PieD Top(Object, PieD) Rem(RemV) Subst(SubstV) Bot Object PieD Bot(Object, PieD) Rem(RemV) Subst(SubstV)  ç´§æ¥ç€æˆ‘ä»¬å‘ç°remå’Œsubstä»£ç ç±»ä¼¼ PieVisitorI forBot forTop RemV implement PieVisitorI Object RemV(Object) forBot(); forTop(Object,PieDï¼‰ SubstV implement PieVisitorI Object Object SubstV(Object, Object) forBot(); forTop(Object,PieDï¼‰ LtdSubstV implement PieVisitorI int Object Object LtdSubstV(int, Object, Object) forBot(); forTop(Object,PieDï¼‰ PieD Accept(PieVisitorI) Bob Accept(pieVisitorI) Top Object PieD Top(Object,PieD) Accept(PieVisitorI) ExprVisitorI ExprVisitorI forPlus(ExprD, ExprD); forDiff(ExprD, ExprD); forProd(ExprD, ExprD); forConst(ExprD, ExprD); IntEvalV implements ExprVisitorI forPlus(ExprD, ExprD); forDiff(ExprD, ExprD); forProd(ExprD, ExprD); forConst(Object); Plus(Object, Object) Diff(Object, Object) Prod(Object, Object) ExprD Accept(ExprVisitorI); Plus ExprD ExprD Plus(ExprD, ExprD); Accept(ExprVisitorI); Diff ExprD ExprD Diff(ExprD, ExprD); Accept(ExprVisitorI); Prod ExprD ExprD Prod(ExprD, ExprD); Accept(ExprVisitorI); ConstD Object ConstD(Object); Accept(ExprVisitorI);  ç„¶åå†å®ç°Seté›†åˆçš„ç±»å‹ SetD Add(integer i); Mem(integer i); Plus(SetD); Diff(SetD); Prod(SetD); Empty Mem(integer i); Plus(SetD); Diff(SetD); Prod(SetD); Add Integer; SetD; Add(Integer, Integer) Mem(integer i); Plus(SetD); Diff(SetD); Prod(SetD); ExprVisitorI forPlus(ExprD, ExprD); forDiff(ExprD, ExprD); forProd(ExprD, ExprD); forConst(ExprD, ExprD); IntEvalV implements ExprVisitorI forPlus(ExprD, ExprD); forDiff(ExprD, ExprD); forProd(ExprD, ExprD); forConst(Object); Plus(Object, Object) Diff(Object, Object) Prod(Object, Object) SetEvalV implements IntEvalV Plus(Object, Object) Diff(Object, Object) Prod(Object, Object)  SetEvalV ç›´æ¥é›†æˆIntEvalVä¸åˆç†ï¼Ÿ ä»SetEvalV å’ŒIntEvalVæŠ½å–å‡ºä¸€ä¸ªåŸºç±»\nEvalD implements ExprVisitorI forPlus(ExprD, ExprD); forDiff(ExprD, ExprD); forProd(ExprD, ExprD); forConst(ExprD, ExprD); Plus(Object, Object) Diff(Object, Object) Prod(Object, Object) IntEvalD Plus(Object, Object) Diff(Object, Object) Prod(Object, Object) SetEvalD Plus(Object, Object) Diff(Object, Object) Prod(Object, Object)  IntEvalD å’ŒSetEvalDå¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ äºæ˜¯æˆ‘ä»¬è¿›ä¸€æ­¥æå– ``` java SubstD implements pieVisitorI Object Object SubstD(Object, Object) forBot(); forTop(Object,PieD) SubstV SubstV(Object, Object) forTop(Object, Object) LtdSubstV int LtdSubstV(int,Object, Object) forTop(Object, Object) ``` æ ¹æ®extendsä½¿ç”¨overrideå¢åŠ å‡½æ•°çš„ä¸°å¯Œæ€§ SubstV implements PieVisitorI Object Object SubstV(Object, Object) forBot() forTop(Object, PieD) LtdSubstV Int Object Object LtdSubstV(int, Object, Object) forTop(Object, PieD)  åŸæ¥ï¼ŒæŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ æ–¹æ³•.æŠ½è±¡ç±»åªè¦æœ‰ä¸€ä¸ªabstractå‡½æ•°å°±å¯ä»¥å«åšæŠ½è±¡ç±» æŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ æ–¹æ³•ï¼Œæ„é€ æ–¹æ³•ä¸å¯ç»§æ‰¿ï¼Œä½†æ˜¯å¯ä»¥ä¾›å­ç±»ç”¨superï¼ˆï¼‰æˆ–è€…superï¼ˆå‚æ•°ï¼Œå‚æ•°ã€‚ã€‚ã€‚ã€‚ï¼‰è°ƒç”¨ã€‚ æ„é€ å‡½æ•°æ˜¯å¯¹è±¡çš„åŸºæœ¬ï¼Œæ²¡æœ‰æ„é€ å‡½æ•°å°±æ²¡æœ‰å¯¹è±¡ã€‚ è‹¥æœåœ¨çˆ¶ç±»ä¸­ï¼ˆè¿™é‡Œå°±æ˜¯ä½ çš„æŠ½è±¡ç±»ï¼‰ä¸­æ˜¾ç¤ºçš„å†™äº†åˆå‚æ•°çš„æ„é€ å‡½æ•°ï¼Œåœ¨å­ç±»ç»§æ‰¿æ˜¯å°±å¿…é¡»å†™ä¸€ä¸ªæ„é€ å‡½æ•°æ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚\nPointD PointD(chapter1,2) ç‚¹ distanceTo0(int,int); //å¯ä»¥æŠŠå®ƒä»¬ç§»å…¥åˆ°æ„é€ å‡½æ•°ä¸­ closerTo0(); PointD minus(PointD) int moveBy(int ,int) CartesianPt ç¬›å¡å°”åæ ‡ Int Int CartesianPt(int,int); distanceTo0(); Closeto0(); ManhattenPt æ›¼å“ˆé¡¿åæ ‡ Int Int ManhattenPt(int,int); distanceTo0(); Closeto0(); åœ†æŸ±åæ ‡ç³» çƒåæ ‡ç³» ShadowedCartesia Int Int ShadowedCartesia(int, int, int, int) distanceTo0() shapeVisitorI forCircle(int) forSquare(int) forTrans(pointD, ShapeD) UnionVisitorI forUnion(ShapeD, ShapeD) HasPtV implements ShapeVisitorI PointD HasPt(PointD) forCircle(int) forSquare(int) forTrans(PointD, ShapeD) UnionHasPtV implements ShapeVisitorI UnionHasPtV(PointD) forUnion(ShapeD, ShapeD) return s.accept(new HasPtV(p.minus(q))); HasPtV implements ShapeVisitorI PointD HasPt(PointD) ShapeVisitorI newHasPt(PointD) forCircle(int) forSquare(int) forTrans(PointD, ShapeD) UnionHasPtV implements unionVisitorI UnionHasPtV(PointD) ShapeVisitorI newHasPt(PointD)_o forUnion(ShapeD, ShapeD) return s.accept(newHasPtV(p.minus(q))); ShapeD Accept(ShapeVisitorI) Circle Int Circle(int) Accept(ShapeVisitorI)_o Square Int Square(int) Accept(ShapeVisitorI)_o Trans PointD ShapeD Trans(int) Accept(ShapeVisitorI)_o Union ShapeD ShapeD Union(ShapeD, ShapeD) Accetp(ShapeVisitorI)_o  newHasPtå’ŒHasPtV are eta reduction PieManI Int addTop(Object) Int remTop(Object) Int substTop(Object,Object) Int occTop(Object) PieManM implements PieManI PieD addTop(Object) _o remTop(Object)_o substTop(Object,Object)_o occTop(Object) PieVisitorI forBot(); forTop(Object, Object) OccursV Object OccursV(Object) forBot()_o forTop(Object,PieD)_o SubstV Object Object SubstV(Object, Object) forBot(); forTop(Object,PieD)_o RemV Object RemV(Object) forBot(Object) forTop(Object,PieD) PieD Accept(PieVisitorI) Bot Accept(PieVisitorI)_o Top Object PieD Top(Object, PieD) Accept(PieVisitorI)_o PieVisitorI forBot(Bot) foTop(Top) OccursV Object OccursV(Object) forBot(Bot that) forTop(Top that) SubstV Object Object SubstV(Object,Object) forBot(Bot that) forTop(Top That) RemV Object RemV(Object) forBot(Bot that) fotTop(Top that) PieD Accept(PieVisitorI) Bot Accept(PieVisitorI)_o Top Object Object Top(Object, Objct) Accept(PieVisitor)_o  æ¯å¤©ä½ åªèƒ½ä¸æ–­å»æ€è€ƒ äº‹æƒ…çš„è¦ç‚¹å’Œç¬¬ä¸€æ­¥å’Œç¬¬äºŒæ­¥ æ‰èƒ½å–å¾—è¿›æ­¥.\nWhatâ€™s the point of the visitor pattern? Whatâ€™s the point of the software design?\n äº®ç‚¹ çªç ´ç‚¹ï¼Œå¹¶æŒ‰ç…§ä¸€å®šçš„æ–¹å‘ã€‚ã€‚ å…³é”®ç‚¹  Closure(Closure(this))\nå…·ä½“javaæºä»£ç å‚è€ƒthe little java\n","date":1475949519,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1475949519,"objectID":"97a84b51555ea4397b2b6220bdc8d2ca","permalink":"/blog/2016/10/09/a-little-java-note/","publishdate":"2016-10-09T01:58:39+08:00","relpermalink":"/blog/2016/10/09/a-little-java-note/","section":"archives","summary":"ç›®å½•  1. åŸºç¡€éƒ¨åˆ† 2. é€šè¿‡æ„é€ å‡½æ•°ï¼Œæ„é€ å‡ºNatural recursion 3. é‡æ–°è®¾è®¡RemAV RemFishV RemIntV 4. ä¸‹ä¸€æ­¥æŠŠPieDçš„å­—æ®µæ”¾å…¥åˆ°å¯¹åº”çš„å‚æ•°å½“ä¸­ 5. å¼•å…¥ this å…³é”®å­—ï¼ŒæŒ‡ä»£è®¿é—®è€…æœ¬èº«ï¼ŒåŒæ­¥ä¿®æ”¹å¯¹åº”çš„è®¿é—®è€…ç±» 6. éœ€è¦è¿›ä¸€æ­¥æå–å‡ºvisitoréƒ¨åˆ†çš„å‡½æ•°  7. ç»Ÿä¸€bTreeVisitorI itreevisitori ttreevisitori 8. é‡æ–°è®¾è®¡RemAV RemFishV RemIntV ä¸ºRemV(ç”¨Objectæ›¿æ¢ï¼‰  9. ç„¶åç°åœ¨æŠŠRemv å’ŒSubsté‡æ–°æ”¾å…¥PieD 10. ç´§æ¥ç€ æˆ‘ä»¬è¿˜æƒ³ç€æŠŠRemv SubstVæ”¾å…¥å‚æ•°çš„ä½ç½® 11. ç´§æ¥ç€æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æŠ½è±¡  12. ç´§æ¥ç€æˆ‘ä»¬å‘ç°remå’Œsubstä»£ç ç±»ä¼¼  13. ç„¶åå†å®ç°Seté›†åˆç±»å‹ 14. SetEvalVç›´æ¥ç»§æ‰¿IntEvalVä¸åˆç†?  15. IntEvalD å’ŒSetEvalDå¾ˆå¤šç›¸ä¼¼ä¹‹å¤„  16. æ ¹æ®extendsä½¿ç”¨Overrideå¢åŠ å‡½æ•°çš„ä¸°å¯Œæ€§   è§†è§’æ²¡æƒ³åˆ°å¯ä»¥åˆ†æˆä¸åŒçš„classesï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œextendså’Œimplementï¼Œæœ€ç»ˆnewé€šè¿‡constructorsåˆ›é€ ä¸åŒçš„valueã€‚ä¸¤çº§åœ¨äºåŸºç¡€å…ƒä»¶å’ŒåŠŸèƒ½å…ƒä»¶ä¸¤éƒ¨åˆ†ã€‚ä¸¤çº§ä¹Ÿå¯ä»¥åˆ†ä¸ºextendså’Œimplementsã€‚é›†äºä¸€ä¸ªclassã€‚\n","tags":null,"title":"a little java note","type":"archives"},{"authors":null,"categories":["physics"],"content":"æ¿®ç¥–è«(æ­Œæ‰‹æœ´æ ‘çš„çˆ¶äº²):\u0026ldquo;æ•°å­¦èƒŒåæœ‰ç‰©ç†ï¼Œç‰©ç†éœ€è¦é€šè¿‡æ•°å­¦æ¥è¡¨è¾¾\u0026rdquo;ã€‚æ•°å­¦æ–¹ç¨‹(è¡¨è¾¾å¼)éœ€è¦ä½ é€šè¿‡ç‰©ç†ç›´è§‰å»æ€è€ƒï¼Œå»ä¹¦å†™ã€‚\næ¿®è¯´åšç ”ç©¶çš„è¿‡ç¨‹éƒ½æ˜¯æå‡ºä¸€ä¸ªæ¨¡å‹ï¼Œæ‰¾åˆ°é—®é¢˜çš„æœ¬è´¨ï¼Œé’ˆå¯¹å›´ç»•æœ¬è´¨çš„å‡ ä¸ªå˜é‡è¿›è¡Œç ”ç©¶ï¼Œæ¥è¿‘ä¼¼æ›¿ä»£ç°å®çš„å¤æ‚æ¨¡å‹ï¼ˆè¿™ä¸ªç®€åŒ–çš„æ€æƒ³å¯¹æˆ‘æœ‰å¸®åŠ©ï¼‰\nOnly some links for physics and maths,\næ•°å­¦ç‰©ç†æ–¹ç¨‹ å¼ é²æ˜\næ•°å­¦ç‰©ç†æ–¹ç¨‹ å¤æ—¦\næ•°å­¦ç‰©ç† å¾®ç›˜ä¸›ä¹¦\nç©ºé—´ç‰©ç†\næ¢ç¿å½¬è€å¸ˆçš„å¾®åˆ†æµå½¢å’Œç›¸å¯¹è®º, \u0026ldquo;ä»¥ä¸å˜åº”ä¸‡å˜ï¼Œæ‰¾å‡ºä¸å˜é‡(å¿ƒé¢†ç¥ä¼šå­¦ç§‘æŠ€æœ¯çš„ä¸å˜é‡)ï¼Œä»è€Œåº”é—®é¢˜é¢†åŸŸä¸­å˜åŒ–çš„ä¸œè¥¿,æŠ“ä½ä¸å˜çš„ä¸œè¥¿ï¼Œåå¤ç¢ç£¨(ä¸ºä»€ä¹ˆè¿˜è¦åå¤ç¢ç£¨)\u0026rdquo;. \u0026ldquo;ç›¸ä¼¼çŸ©é˜µçš„traceè¿¹ä¸å˜(çŸ©é˜µå¯¹è§’å…ƒä¸å˜)\u0026rdquo; ä¹Ÿå°±æ˜¯éœ€è¦é€šè¿‡ä¸å˜çš„ä¸œè¥¿æŠŠæ‰€æœ‰å˜åŒ–çš„ç‹¬ç«‹ä½“ï¼ˆå…³ç³»ï¼‰éƒ½è¿æ¥èµ·æ¥ï¼Œå½¢æˆä¸€æ¡é“¾ã€‚\nå­¦ä»»ä½•ä¸œè¥¿ï¼Œéƒ½å¾—é¦–å…ˆæ˜ç¡®ä»–çš„é‡ç‚¹å’Œæ„ä¹‰ï¼ˆå½“ç„¶é¦–å…ˆå¾—åŸºäºä½ å¾—æœ‰å¤§å±€è§‚ï¼Œå¤§çš„æ–¹å‘ï¼Œå¤§çš„æ¡†æ¶ ä¹Ÿå°±æ˜¯ä¸å˜çš„ä¸œè¥¿ï¼‰ã€‚\nä»æ•°å­¦ç‰©ç†è¿‡ç¨‹å»è§£é‡Šç°å®ä¸­çš„ç°è±¡ï¼Œä»å¤§çš„è¯¯å·®é€æ­¥ç¼©å°ä»–ï¼Œç›´åˆ°èƒ½å¤Ÿæ¸…æ¥šçš„è§£é‡Šç°å®ä¸­çš„ç°è±¡ï¼Œä»ç†è®ºä¸Šå»è§£é‡Šå®é™…çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯æ¢ç¿å½¬è€å¸ˆè¯´çš„ å¤©åœ°è¿é€š(å¤©:å®šä¹‰ç‰¹åˆ«æ¸…æ¥šåœ°(å¹¶çŸ¢:å¼ é‡ç§¯è¿ç®—, ) åœ°:å®é™…(ç°å®)å‘ç”Ÿçš„ç°è±¡,ä¸æ¸…æ™°çš„ï¼Œå®šä¹‰ä¸æ˜(å¹¶çŸ¢:ä¸¤ä¸ªçŸ¢é‡å¹¶æ’åœ¨ä¸€èµ·,ä»–æ˜¯ä¸€ä¸ªäºŒé˜¶å¼ é‡,9ä¸ªåˆ†é‡v1u1 v1u2 v1u3 v2u1 v2u2 v2u3 v3u1 v3u2 v3u3 åˆ—ä¸¾å‡ºæ¥)ã€‚ ä¹Ÿå°±æ˜¯è¯´ä¸æ¸…æ™°çš„ç‰ˆæœ¬è‚¯å®šèƒ½å¤Ÿå­˜åœ¨æ¸…æ™°çš„ç‰ˆæœ¬)ã€‚\næ›´è¦ç´§çš„æ˜¯ï¼Œè¿˜å¾—è€ƒè™‘ç‰©ç†ä¹‹å†…å’Œç‰©ç†ä¹‹å¤–çš„é—®é¢˜\n","date":1475090854,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1475090854,"objectID":"3efdd049b99ce5a04562ae934f74a95f","permalink":"/blog/2016/09/29/physics-and-maths/","publishdate":"2016-09-29T03:27:34+08:00","relpermalink":"/blog/2016/09/29/physics-and-maths/","section":"archives","summary":"æ¿®ç¥–è«(æ­Œæ‰‹æœ´æ ‘çš„çˆ¶äº²):\u0026ldquo;æ•°å­¦èƒŒåæœ‰ç‰©ç†ï¼Œç‰©ç†éœ€è¦é€šè¿‡æ•°å­¦æ¥è¡¨è¾¾\u0026rdquo;ã€‚æ•°å­¦æ–¹ç¨‹(è¡¨è¾¾å¼)éœ€è¦ä½ é€šè¿‡ç‰©ç†ç›´è§‰å»æ€è€ƒï¼Œå»ä¹¦å†™ã€‚\næ¿®è¯´åšç ”ç©¶çš„è¿‡ç¨‹éƒ½æ˜¯æå‡ºä¸€ä¸ªæ¨¡å‹ï¼Œæ‰¾åˆ°é—®é¢˜çš„æœ¬è´¨ï¼Œé’ˆå¯¹å›´ç»•æœ¬è´¨çš„å‡ ä¸ªå˜é‡è¿›è¡Œç ”ç©¶ï¼Œæ¥è¿‘ä¼¼æ›¿ä»£ç°å®çš„å¤æ‚æ¨¡å‹ï¼ˆè¿™ä¸ªç®€åŒ–çš„æ€æƒ³å¯¹æˆ‘æœ‰å¸®åŠ©ï¼‰\n","tags":null,"title":"Physics and Maths","type":"archives"},{"authors":null,"categories":["life"],"content":"å·¥å…·(è¿›ä¸€æ­¥å¯ä»¥å‚è€ƒThe design of everyday things)ä¹‹å†…ï¼Œè®²ç©¶çš„æ˜¯å¦‚ä½•è®¾è®¡è¿™ä¸ªä¸œè¥¿(åˆ¶ä½œè€…è§’åº¦)ï¼Œå¯èƒ½æ›´å¤šè®²çš„æ˜¯è®¾è®¡çš„ä¸œè¥¿ï¼Œè€Œä¸æ˜¯å®Œæˆçš„åŠŸèƒ½ï¼Œæ›´å¤šç”¨äºå†™æŠ€æœ¯è·¯çº¿ å·¥å…·ä¹‹å¤–ï¼Œè®²ç©¶çš„æ˜¯ä»å·¥å…·çš„å¤–å¤´çœ‹è¿™ä¸ªä¸œè¥¿ï¼ˆçœ¼ç›æ”¾åœ¨å·¥å…·å¤–é¢,ä½¿ç”¨è€…è§’åº¦ï¼‰ï¼Œä»å·¥å…·å¤–çœ‹é»‘å¤¹å­çš„å·¥å…·ï¼Œçœ‹ä»–åœ¨ä¸åŒçš„å·¥å†µä¸‹èƒ½å¤Ÿå®ç°ä»€ä¹ˆåŠŸèƒ½ï¼Ÿ æ‰€ä»¥æ›´å¤šç”¨äºå†™è½¯ä»¶è¯´æ˜ä¹¦ã€‚\nè¯­è¨€ä¹‹å†…å’Œè¯­è¨€ä¹‹å¤–ï¼ˆç«™åœ¨ä¸€ä¸ªæœ¬ä¸å­˜åœ¨é€»è¾‘ä½“ä¹‹å¤–ï¼‰\nè¯­è¨€ä¹‹å†… è¯´çš„æ˜¯è¯­è¨€å¦‚ä½•åˆ›é€ å‡ºæ¥ï¼Œå¦‚ä½•å†™ä¸€ä¸ªè§£é‡Šå™¨ï¼Œæ€ä¹ˆè®¾è®¡è¿™é—¨è¯­è¨€ï¼Œæ·»åŠ é‚£äº›è¯­è¨€ç‰¹æ€§(å‚è€ƒEOPLè¯­è¨€ç‰¹æ€§)ï¼Œè¯­è¨€çš„è¯­æ³•æ€ä¹ˆæ ·ç­‰ç­‰\nè¯­è¨€ä¹‹å¤–æ˜¯æŒ‡è¿ç”¨è¿™é—¨è¯­è¨€ æˆ‘èƒ½å¤Ÿè§£å†³æŸä¸ªå·¥å†µé—®é¢˜ï¼ŒæŸä¸ªå®é™…é—®é¢˜ï¼ŒæŸä¸ªæ•°å€¼é—®é¢˜ï¼Œ\né—®é¢˜ä¹‹å†…æ˜¯æŒ‡è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé—®é¢˜ä¹‹å¤–æ˜¯æŒ‡è§£å†³äº†è¿™ä¸ªé—®é¢˜ä¹‹åè¿˜å¯ä»¥è§£å†³å…¶ä»–ä»€ä¹ˆé—®é¢˜ã€‚\nå†…æ˜¯æŒ‡å†…éƒ¨é“¾æ¥ï¼Œå¤–æ˜¯æŒ‡å¤–éƒ¨é“¾æ¥\né¢†åŸŸä¹‹å†…å’Œé¢†åŸŸä¹‹å¤–ï¼Œ é¢†åŸŸä¹‹å†…æ˜¯æŒ‡ä»ä¸“ä¸šçš„è§’åº¦è¿›è¡Œä»‹ç»ï¼Œé¢†åŸŸä¹‹å¤–æ˜¯å¹³æ°‘ï¼ˆä¸æ‡‚ä¸“ä¸šçŸ¥è¯†ï¼‰çš„è§’åº¦è¿›è¡Œè§£é‡Šã€‚\nå·¥å…·ã€è¯­è¨€ã€é—®é¢˜ã€é¢†åŸŸç­‰éƒ½å¯ä»¥å½’ç»“ä¸ºæœ¬ä½“ontologyè®ºçš„çŸ¥è¯†(è¿›ä¸€æ­¥å‚è€ƒknowledge_graphä»¥åŠ knowledge-presentation and reasoning)ã€‚ Ontology (information science)\nå…¶ä¸­ï¼Œäºšé‡Œæ–¯å¤šå¾·æŒ‡å‡ºæœ¬ä½“è®º\n what it is (its \u0026lsquo;whatness\u0026rsquo;, quidditas or essence) how it is (its \u0026lsquo;howness\u0026rsquo; or qualitativeness) how much it is (quantitativeness) where it is, its relatedness to other beings3   whatnessæŒ‡çš„æ˜¯individuals from class(è¿™è¾¹æ˜¯æŒ‡ç±» ä¸æ˜¯æŒ‡è´å¶æ–¯æ¦‚ç‡ä¸­çš„class-predictoré”®å€¼å¯¹ï¼Œå…¶ä¸­classæŒ‡ç›®æ ‡å€¼ï¼Œè€Œpredictoræ˜¯æŒ‡å±æ€§å€¼ï¼Œæˆ–è€…å«åšè¡¨å¾å€¼,æ¯”å¦‚è¡¨å¾å¤©æ°”æƒ…å†µï¼šæ™´å¤© ä¸‹é›¨å¤© å¤šäº‘) ä¹Ÿå°±æ˜¯è¯´whatnessè§£å†³çš„æ˜¯å­˜åœ¨çš„åŸå› (whyness).  ç»å¸¸æˆ‘ä»¬ä¼šè¿™æ ·æè¿°What is A\næ˜ç¡®ä¸»è°“å®¾(å¿Œè®³ç¼ºä¹ä¸»è°“å®¾) Aæ˜¯ä¸€ç§***æŠ€æœ¯ï¼Œè§£å†³äº†***é—®é¢˜ï¼Œå¸®åŠ©æˆ‘ä»¬å®ç°äº†***ï¼Œå¸®åŠ©æˆ‘ä»¬ç®€åŒ–äº† ****ã€‚ç¬¬ä¸€***ï¼Œç¬¬äºŒ****ï¼Œç¬¬ä¸‰***ï¼› é¦–å…ˆ****ï¼Œå…¶æ¬¡***,æœ€å***, æ€»çš„æ¥è¯´ï¼ŒA****  ä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦è¯´æ˜(å£°æ˜å¼è¯­è¨€)\n ç¡®ä¿ä¸»è°“å®¾ è¯´æ˜å®ƒçš„åŠŸèƒ½ï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜(ç°å®éƒ½æ˜¯é—®é¢˜é©±åŠ¨ problem-driven),å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ å¯èƒ½çš„è¯åœ¨ç»†åŒ–åˆ†æï¼Œç¬¬ä¸€ï¼Œç¬¬äºŒï¼Œç¬¬ä¸‰ï¼Œé¦–å…ˆï¼Œå…¶æ¬¡ç­‰.  ä»»ä½•ä¸€é¡¹æŠ€æœ¯çš„å­¦ä¹ å…¶å®éƒ½æœ‰ä¸€ä¸ªæ€è·¯ï¼Œ\n è¿™é—¨æŠ€æœ¯æ˜¯ä»€ä¹ˆï¼Ÿ æ€ä¹ˆä½¿ç”¨è¿™é—¨æŠ€æœ¯ï¼Ÿ ä½¿ç”¨è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ è¿™é—¨æŠ€æœ¯å’Œå…¶ä»–çš„ä¼˜ç¼ºç‚¹ï¼Ÿ è¿™é—¨æŠ€æœ¯çš„ä¸»è¦åœºæ‰€æ˜¯åœ¨å“ªé‡Œï¼Ÿ  æœ€å¥½èƒ½å¤Ÿç†Ÿç»ƒåœ°è‡ªå·±æé—®è‡ªå·±ä¸Šé¢çš„5ä¸ªé—®é¢˜ã€‚å¹¶åå¤è¿ç”¨è¯´æ˜æ–¹å¼ç»„ç»‡å¥½è‡ªå·±çš„é€»è¾‘è¯­è¨€ã€‚è¿™å¤§æ¦‚æ˜¯whatnessè¯¥æ³¨æ„çš„å¤§éƒ¨åˆ†å†…å®¹ã€‚\nhownessæ˜¯ä»å®šæ€§çš„è§’åº¦åˆ†æè¯¥å­˜åœ¨ä½“ï¼Œè€Œhowmuchnessåˆ™æ˜¯ä»å®šé‡çš„è§’åº¦å¯¹å­˜åœ¨ä½“è¿›è¡Œåˆ†æã€‚\nç”±äºå­˜åœ¨ä½“æœ‰å¾ˆå¤šä¸ªï¼Œäºæ˜¯éœ€è¦ç¡®å®šä»–ä»¬çš„å­˜åœ¨å…³ç³»ï¼Œäºæ˜¯é€‰ç”¨äº†whereness(ä¹Ÿå°±æ˜¯ç©ºé—´ç»´åº¦ï¼Œæ¯åŠ ä¸€å±‚ç»´åº¦éƒ½å¯ä»¥ç¡®å®šä¸€ä¸ªy=ax+bçš„å…³ç³»ï¼Œå¯ä»¥å‚è€ƒSVM, æ‰€æœ‰çš„ç®—æ³•é—®é¢˜éƒ½æœ€ç»ˆå¯ä»¥å½’ç»“ä¸ºé™é˜¶å’Œä¼˜åŒ–ï¼ˆä¼˜åŒ–åªæ˜¯ä¸€ç§æ€æƒ³ï¼‰é—®é¢˜ï¼Œè€Œæœ€å°äºŒä¹˜æ³•å´æ˜¯è´¯ç©¿å§‹ç»ˆï¼Œæœ€å°äºŒä¹˜æ³•è¿›ä¸€æ­¥å…¶å®original from y=ax+b)\nå…³äºæœ€å°äºŒä¹˜æ³•çš„æ€»ç»“å¦‚ä¸‹ï¼š\næœ€å°äºŒä¹˜æ³•å¦å¤–ä¸€äº›æè¿°\n æœ€å°äºŒä¹˜æ³• least square method  least_squares fitting æœ€å°äºŒä¹˜æ³•fortranå®ç° from ç†Šå‰å‰ æœ€å°äºŒä¹˜æ³•ä»‹ç»  ç´§æ¥ç€wherenessï¼Œæˆ‘è§‰å¾—è¿˜éœ€è¦å¼•å…¥ä¸€ä¸ªæ—¶é—´ç»´åº¦ä¹Ÿå°±æ˜¯whennessï¼Œæˆ‘è§‰å¾—ä»–å¾ˆé‡è¦ï¼Œå› ä¸ºæœºå™¨å­¦ä¹ çš„å¾ˆå¤šç®—æ³•éƒ½æ˜¯éœ€è¦é€šè¿‡æ—¶é—´ä¸æ–­çš„è®­ç»ƒï¼Œéœ€è¦æ˜ç¡®whenness, ç°å®å½“ä¸­çº¦ä¼šã€ä¸Šè¯¾ã€ä¸Šç­ã€åƒé¥­ã€ç¡è§‰ç­‰éƒ½æœ‰ä¸€ä¸ªwhennessï¼Œæˆ‘ä»¬éƒ½ç”Ÿæ´»åœ¨æ—¶é—´çš„å•é¡¹ç»´åº¦å½“ä¸­ï¼Œæ”¾çœ¼åœ¨å†å²çš„æ—¶é—´å°ºåº¦æ¥è¯´ï¼Œæˆ‘ä»¬ä¸€ä¸ªäººçœŸçš„æ˜¯å¾®ä¸è¶³é“ï¼Œè€Œæ”¾çœ¼åˆ°æˆ‘ä»¬è‡ªå·±çš„å±€éƒ¨æ—¶é—´å°ºåº¦æ¥è¯´ï¼Œæˆ‘ä»¬å´éœ€è¦ç»†ç»†çš„ å“å‘³æ—¶å…‰çš„é—´éš™ï¼Œä½“å‘³å…¶ä¸­çš„å˜åŒ–ï¼Œè®°å½•å¯èƒ½éœ€è¦è¡¨å¾çš„ä¸€ç±»å˜åŒ–é‡ï¼Œè¿›ä¸€æ­¥å¯èƒ½ä¼šå½±å“åˆ°å…¶ä»–çš„é‡çš„å˜åŒ–ï¼ˆæ‰€ä»¥ä»»ä½•ä¸œè¥¿æ˜¯ä¸æ˜¯éƒ½æœ‰ç€å› æœè®º,ä¹Ÿå°±æ˜¯è¯´åœ¨å†å²çš„é•¿æ²³ä¸­ï¼Œæˆ‘ä»¬æ˜¯æ¸ºå°çš„ä¸€ç²’æ²™å­ï¼Œè·Œè·Œæ’æ’çš„å‰è¡Œã€‚\næŸæŸç¾å›½æ€»ç»Ÿç½—æ–¯ç¦æ›¾è¯´:\u0026ldquo;Joint and separate ,which is the problem\u0026rdquo;. æœ¬ä½“è®ºå°±æ˜¯ç”¨äºè§£å†³ä¸ªä½“ä¹‹é—´çš„åˆ†ç±»å’Œå…·ä½“å…³ç³»ã€‚\næ‰€ä»¥æœ€ç»ˆï¼Œæœ¬ä½“ä¹‹å¤–å’Œæœ¬ä½“ä¹‹å†…ï¼Ÿ\né‚£æ˜¯ä½ å¯¹è‡ªå·±çš„å®šä½(åœ¨å†å²é•¿æ²³å¾®ä¸è¶³é“ï¼Œåœ¨å±€éƒ¨æ—¶é—´ï¼Œç²¾æ‰“ç»†ç®—ã€‚ç§‰ç€ç§‘å­¦çš„ç²¾ç¥ï¼Œè¸å®ç”Ÿæ´»ï¼›æŒ£ç‚¹å°é’±ï¼Œå…»å®¶ç³Šå£; é’±ä¸å¤šï¼Œåªæ±‚é—²çš„æ—¶å€™å¯ä»¥å†™å†™å²æœˆä¸­çš„ä¸€äº›è¶£äº‹)å’Œå–èˆ(ä¿ç•™éœ€è¦çš„ä¸œè¥¿ï¼Œèˆå¼ƒç³Ÿç²•), ä»¥åŠä½ å¯¹ä¸–ç•Œæˆ–è€…å®‡å®™çš„å®šä½(è¦ä¸ç„¶ï¼Œä¸æƒ³äº†ï¼Œæƒ³ç‚¹å½“ä¸‹)ã€‚\nAppendix //fdp -Tpdf ontology.dot -o ontology.pdf digraph G{ ontology[label=\u0026quot;Ontology\u0026quot;, shape=box,style=rounded] ; node[style=\u0026quot;rounded,filled\u0026quot;,fillcolor=chartreuse]; whatness[label=\u0026quot;whatness\u0026quot;]; howness[label=\u0026quot;howness\u0026quot;]; howmuchness[label=\u0026quot;howmuchness\u0026quot;]; whereness[label=\u0026quot;whereness\u0026quot;]; whenness[label=\u0026quot;whenness\u0026quot;]; ontology{ whatness howness howmuchness whereness whenness}; }  graphviz reference\n","date":1475076066,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1475076066,"objectID":"7462b7322576074735ce58673bb5a8b2","permalink":"/blog/2016/09/28/jump-out-of-ontology/","publishdate":"2016-09-28T23:21:06+08:00","relpermalink":"/blog/2016/09/28/jump-out-of-ontology/","section":"archives","summary":"å·¥å…·(è¿›ä¸€æ­¥å¯ä»¥å‚è€ƒThe design of everyday things)ä¹‹å†…ï¼Œè®²ç©¶çš„æ˜¯å¦‚ä½•è®¾è®¡è¿™ä¸ªä¸œè¥¿(åˆ¶ä½œè€…è§’åº¦)ï¼Œå¯èƒ½æ›´å¤šè®²çš„æ˜¯è®¾è®¡çš„ä¸œè¥¿ï¼Œè€Œä¸æ˜¯å®Œæˆçš„åŠŸèƒ½ï¼Œæ›´å¤šç”¨äºå†™æŠ€æœ¯è·¯çº¿ ","tags":null,"title":"Jump Out of Ontology","type":"archives"},{"authors":null,"categories":["matlab"],"content":"å­¦ä¹ stanford Cs229æœºå™¨å­¦ä¹ çš„ä¸€äº›èµ„æ–™æ±‡æ€»ã€‚\næ‰‹æŠŠæ‰‹æ•™ä½ å®ç°SVMç®—æ³•ï¼ˆä¸€ï¼‰\nè¯¦è§£2D-PCA ï¼ˆäºŒç»´PCAï¼‰\næ‰‹æŠŠæ‰‹æ•™ä½ å®ç°SVMç®—æ³•ï¼ˆäºŒï¼‰\näº†è§£äº†ä¸€äº›æœºå™¨å­¦ä¹ ï¼Œæƒ³åˆ°äº†prologæ˜¯ä¸€é—¨äººå·¥æ™ºèƒ½ç®—æ³•ï¼Œæ‰€ä»¥é¡ºä¾¿æœç´¢åˆ°äº†prologä¹å®«æ ¼ . é¦–å…ˆè¿™æ®µprologä»£ç æ˜¾ç„¶æ˜¯ç®€çŸ­çš„ã€ç®€å•çš„ï¼ˆä½†æ˜¯ä¸å‹å¥½ å£°æ˜å¼è¯­è¨€ä¸€å®šå¾—å†™çš„å‹å¥½ï¼‰ã€‚æˆ‘ä»¬æ ¹æœ¬æ²¡æœ‰å‘Šè¯‰è®¡ç®—æœºè¯¥æ€ä¹ˆåšï¼Œæˆ‘ä»¬åªæ˜¯è¯´ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªä¹å®«æ ¼ï¼Œå¹¶è¦æ±‚ï¼š\n ï¼ˆ1ï¼‰æ¯ä¸ªæ ¼éƒ½æ˜¯ä»1åˆ°9ä¸­çš„ä¸€ä¸ªæ•´æ•°ï¼› ï¼ˆ2ï¼‰ä¹å®«æ ¼ä¸­çš„æ•°å­—ä¸ä¼šé‡å¤ï¼› ï¼ˆ3ï¼‰æ¯è¡Œçš„å’Œéƒ½ç›¸ç­‰ï¼› ï¼ˆ4ï¼‰æ¯åˆ—çš„å’Œéƒ½ç›¸ç­‰ï¼› ï¼ˆ5ï¼‰ä¸¤æ¡å¯¹è§’çº¿ä¸Šçš„å’Œä¹Ÿç›¸ç­‰  ç°åœ¨è¿è¡Œè¿˜æœ‰ç‚¹é—®é¢˜ï¼å¾…ä»¥åè§£å†³ï¼\nåŸºäºPDC_PROLOGè‡ªå­¦ä¹ æœºå™¨åšå¼ˆ \nç™½é©¬è´Ÿé‡‘ç¾çš„æœºå™¨å­¦ä¹ èµ„æ–™ ï¼ˆåŒ…å«Rè¯­è¨€ï¼Œé€»è¾‘è§„çº¦ï¼ŒHMM,å¡å°”æ›¼æ»¤æ³¢ï¼‰\nMATLABä¸­è¿›è¡ŒåŸºäºSVMçš„æ•°æ®åˆ†æ\næœºå™¨å­¦ä¹ ç®€å²\næœºå™¨å­¦ä¹ æ¦‚å¿µ\nè´å¶æ–¯åŠå…¶ä»–å¸¸ç”¨æœºå™¨å­¦ä¹ ç®—æ³• From analyticsvidhyaï¼ˆç›¸å½“æ£’çš„ä¸€ä¸ªæœºå™¨å­¦ä¹ ç®—æ³•ä»‹ç» å¥½è¯„ä¸æ–­ é€šè¿‡è®¡ç®—è®¤è¯†äº†è´å¶æ–¯ç®—æ³•ï¼‰ å¹¶åŒæ—¶ä»‹ç»äº†what is predicator? what is Class Prior Probabilty? what is Posterior Probability? what is Predictor Prior Probability?\nä¸‹é¢æ˜¯æˆ‘çš„æ‰‹å†™ç¬”è®°(éœ€è¦2minçœ‹æ‡‚) Analyticsvidhya,ä¸€ä¸ªç›¸å½“ä¸é”™çš„è®¡ç®—æœºå­¦ä¹ ç½‘ç«™ã€‚\nè´å¶æ–¯ç†è®º From wikipedia\nå¹³å‡¡è€Œæœ‰ç¥å¥‡çš„è´å¶æ–¯ åˆ˜æœªé¹ï¼Œ ä»è¿™é‡Œå¼€å§‹è®¤è¯†åˆ°è´å¶æ–¯çš„ç¾\nA Complete Tutorial on Tree Based Modeling from Scratch (in R \u0026amp; Python)ï¼Œååˆ†æ¸…æ¥š,éœ€è¦ä¸€å®šæ—¶é—´ç†è§£\nRè¯­è¨€å’ŒPythonè¯­è¨€æ¯”è¾ƒç»å¸¸è¢«äººä»¬ç”¨æ¥åšæœºå™¨å­¦ä¹ ï¼Œå…¶å®åŒ…æ‹¬lisp,prolog,javaç­‰éƒ½æ˜¯å¯ä»¥çš„ã€‚ å®Œæ•´çš„Rè¯­è¨€æ•™ç¨‹\nå®Œæ•´çš„pythonè¯­è¨€æ•™ç¨‹\nipythonæœºå™¨å­¦ä¹ .Ipythonæ˜¯ä¸€ä¸ªæ¯”è¾ƒæœ‰ç”¨çš„python IDEç•Œé¢ï¼Œæä¾›æ¯”è¾ƒå‹å¥½çš„è¾“å‡ºè°ƒè¯•ç•Œé¢(ç½‘é¡µä¸Šæ“ä½œ),æ‰€ä»¥é¡ºä¾¿ä¹ŸæŸ¥äº†ä¸€ä¸‹æ€ä¹ˆç”¨ã€‚\nå°è¯•Notebook, è¿˜éœ€è¦ä¸‹è½½ä¸€äº›å…¶å®ƒå’šå’š 1) ä¸‹è½½å®‰è£… pyzmq, åœ¨è¿™é‡Œä¸å»ºè®®ä½¿ç”¨pip, pipå¯¹pyzmqæ”¯æŒä¸å¤ªå¥½ï¼Œè£…ä¸ä¸Šã€‚æˆ‘å°è¯•ä½¿ç”¨easy_install c:\u0026gt;easy_install.exe pyzmq 2) ä¸‹è½½å®‰è£… jinja2, c:\u0026gt;easy_install.exe jinja2\n3) ä¸‹è½½å®‰è£… tornado, c:\u0026gt;easy_install.exe tornado\nå¥½äº†ï¼Œä½¿ç”¨ä¸‹é¢å‘½ä»¤å°±å¯ä»¥æŠŠNotebookèµ·æ¥ï¼š c:\u0026gt;ipython.exe notebook\nååˆ†å‹å¥½çš„ipython notebookï¼Œåœ¨å‘½ä»¤è¡Œæ•²ä¸€ä¸‹ä¼šæ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨çª—å£ï¼Œç”¨äºç¼–å†™Pythonçš„è¯­å¥\nç„¶è€Œpythonå’ŒRå¹¶ä¸æ˜¯æˆ‘çš„é€‰æ‹©ï¼Œæˆ‘è¿˜æ˜¯ç†Ÿæ‚‰matlab,æ‰“ç®—é€‰æ‹©matlabä½œä¸ºæˆ‘æœºå™¨å­¦ä¹ çš„å·¥å…·ã€‚\nå…³äºæœºå™¨è¯­è¨€çš„ä¸€äº›å¸¸ç”¨ç®—æ³•\n é›·è€å¸ˆæ¨èçš„LS-SVM matlab, ç»“è®ºæ˜¯é€‰æ‹©LS-SVM. å°æ¹¾çš„æ—æ™ºä»(Lin Chih-Jen)æ•™æˆç­‰ç¼–å†™SVMæ¨¡å¼è¯†åˆ«å’Œå›å½’çš„è½¯ä»¶åŒ…ï¼Œå¤šè¯­è¨€å®ç°  é™„å¸¦dotè¯­è¨€å›¾ç‰‡ç”Ÿæˆ\ndot reference\ndigraph G1{ compound=true; graph[fontname=Kaiti]; edge[fontname=SimSun]; node[fontname=SimSun]; MachineLearning[shape=box,style=rounded,fillcolor=\u0026quot;#1f8842\u0026quot;]; subgraph cluster_1{ // SL[shape=ellipse,label=\u0026quot;Supervised Learning\u0026quot;]; label=\u0026quot;Supervised Learning(This algorithm consist of a target / outcome \\nvariable (or dependent variable) which is to be predicted \\nfrom a given set of predictors (independent variables))\u0026quot;; node[style=filled,fillcolor=chartreuse]; Reg[label=\u0026quot;1. Linear Regression\u0026quot;]; LR[label=\u0026quot;2. logistic Regression\u0026quot;]; DT[label=\u0026quot;3. Decision Tree\u0026quot;]; SVM[label=\u0026quot;4. Supported Vector Machine\u0026quot;]; RF[label=\u0026quot;5. Random Forest\u0026quot;]; KNN[label=\u0026quot;6. KNN\u0026quot;]; NB[label=\u0026quot;7. Naive Bayes\u0026quot;]; Reg-\u0026gt;LR-\u0026gt;DT-\u0026gt;SVM-\u0026gt;RF-\u0026gt;KNN-\u0026gt;NB-\u0026gt;Reg; } subgraph cluster_2{ node[style=filled,fillcolor=chartreuse]; //USL[shape=ellipse,label=\u0026quot;UnSupervised Learning\u0026quot;]; label=\u0026quot;UnSupervised Learning(do not have any target or outcome variable to \\npredict / estimate. It is used for clustering population \\nin different groups, which is widely used for \\nsegmenting customers in different groups for specific intervention )\u0026quot;; AA[label=\u0026quot;Apriori Alogirithm\u0026quot;]; KM[label=\u0026quot;K-means\u0026quot;]; } subgraph cluster_3{ node[style=filled,fillcolor=chartreuse]; label=\u0026quot;Reinforcement Learning(It works this way: the machine is \\nexposed to an environment where it \\ntrains itself continually using trial and error. \\nThis machine learns from past experience \\nand tries to capture the best possible knowledge \\nto make accurate business decisions )\u0026quot;; MDP[label=\u0026quot;Markov Decision Process\u0026quot;] } //MachineLearning-\u0026gt;{SL USL RL}; MachineLearning-\u0026gt;Reg[lhead=cluster_1]; MachineLearning-\u0026gt;AA[lhead=cluster_2]; MachineLearning-\u0026gt;MDP[lhead=cluster_3]; } ","date":1475054432,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1475054432,"objectID":"59a7c275ed53f47c75bb1155f196c2a8","permalink":"/blog/2016/09/28/machine-learning-some-search-record/","publishdate":"2016-09-28T17:20:32+08:00","relpermalink":"/blog/2016/09/28/machine-learning-some-search-record/","section":"archives","summary":"å­¦ä¹ stanford Cs229æœºå™¨å­¦ä¹ çš„ä¸€äº›èµ„æ–™æ±‡æ€»ã€‚\n","tags":null,"title":"Machine Learning some search record","type":"archives"},{"authors":null,"categories":["graphviz"],"content":"graphvizå¯ç”¨äºå¸®åŠ©ä½ ç»˜åˆ¶å·¥å…·ä¹‹å¤–å’Œå·¥å…·ä¹‹å†…çš„æƒ³æ³•ã€‚å…³äºç»˜å›¾çš„å†å²å¯ä»¥å‚çœ‹A short note of the graph drawing.\ngraphvizä¸‹è½½é“¾æ¥, å®‰è£…å¾ˆæ–¹ä¾¿ï¼Œä¸€æ­¥ä¸€æ­¥è¿›è¡Œå³å¯ï¼Œä¸€èˆ¬æ˜¯åœ¨å‘½ä»¤è¡Œä½¿ç”¨ã€‚\nä¸‹é¢æ˜¯æˆ‘è®°å½•å­¦ä¹ çš„ä¸€äº›graphvizçš„ç¬”è®°ã€‚åªç”¨pdfè¾“å‡ºdot -Tpdf *.dot -o *.pdfï¼Œ å› ä¸ºè´¨é‡è¾ƒå¥½(çŸ¢é‡åŒ–è¾“å‡º)ï¼Œä½†æ˜¯ç‰¹æ®Šæƒ…å†µå¯ä»¥å‚è€ƒoutput format, å› ä¸ºä¸åŒçš„è¾“å‡ºä¼šåœ¨Node, Edge and Graph Attributes èŠ‚ç‚¹ã€è¾¹ã€å›¾ä¸­è¡¨ç°å‡ºä¸åŒçš„æ ·å¼å‡ºæ¥ã€‚\nCFD digraph G{ compound=true; // è¿™æ ·lhead ltailæŒ‡å‘clusteræ‰æœ‰æ•ˆ edge [fontname=\u0026quot;SimSun\u0026quot;]; graph[fontname=\u0026quot;SimHei\u0026quot;] node [shape=box, fontname=\u0026quot;KaiTi\u0026quot; size=\u0026quot;5,5\u0026quot;, style=filld, color=\u0026quot;\u0026quot;]; node[style=filled,color=\u0026quot;lightblue\u0026quot;] rankdir=LR; { rank=same; before[label=\u0026quot;å‰å¤„ç†\u0026quot;]; compute[label=\u0026quot;è®¡ç®—\u0026quot;]; after[label=\u0026quot;åå¤„ç†\u0026quot;]; } subgraph cluster1{ geometry[label=\u0026quot;å‡ ä½•å»ºæ¨¡\u0026quot;]; mesh[label=\u0026quot;ç½‘æ ¼ç”Ÿæˆ\u0026quot;]; geometry-\u0026gt;mesh; } subgraph cluster2{ initial[label=\u0026quot;åˆå§‹åŒ–\u0026quot;]; setting[label=\u0026quot;è®¾ç½®\u0026quot;]; model[label=\u0026quot;æ¹æµæ¨¡å‹\u0026quot;]; output[label=\u0026quot;è¾“å‡º\u0026quot;]; initial-\u0026gt;setting-\u0026gt;model-\u0026gt;output; } subgraph cluster3{ plane[label=\u0026quot;æˆªé¢\u0026quot;]; polyline[label=\u0026quot;å¤šè¾¹å½¢çº¿\u0026quot;]; chart[label=\u0026quot;è¡¨æ ¼\u0026quot;]; pile[label=\u0026quot;æ‰¹å¤„ç†\u0026quot;]; contour[label=\u0026quot;äº‘å›¾\u0026quot;]; plane-\u0026gt;polyline-\u0026gt;chart; plane-\u0026gt;contour; } before-\u0026gt;compute-\u0026gt;after; before-\u0026gt;geometry[lhead=cluster1]; compute-\u0026gt;initial[lhead=cluster2]; after-\u0026gt;plane[lhead=cluster3]; }  inner å›¾ æ³¨æ„ä½¿ç”¨circoç”Ÿæˆï¼Œéœ€è¦æœ‰ä¸€ä¸ªå›ç¯åœ†ã€‚\ncompoundç”¨äºå­å›¾çš„lheadå±æ€§ï¼Œä¸è®¾ç½®æ²¡æ•ˆæœã€‚\nconcentrateè¿™é‡Œæ²¡ä»€ä¹ˆä½œç”¨ã€‚\n//circo -Tpdf inner.dot -o inner.pdf digraph G{ fontname=\u0026quot;SimSun\u0026quot;; fontsize=10; compound=true; // è¿™æ ·lhead ltailæŒ‡å‘clusteræ‰æœ‰æ•ˆ edge[fontname=\u0026quot;SimSun\u0026quot;,arrowhead=vee,color=blue]; graph[fontname=\u0026quot;SimHei\u0026quot;,color=lightgray]; node[shape=box, fontname=\u0026quot;KaiTi\u0026quot;]; //concentrate=true; //node[style=filled,color=\u0026quot;lightblue\u0026quot;]; arrowsize=.5; concentrate=true; nodesep=0.5; ranksep=0.5; rankdir=BU; //rank=sink; //task[shape=polygon,sides=5,peripheries=2,label=\u0026quot;å›¾åƒå¤„ç†\u0026quot;,fillcolor=\u0026quot;#F1C40F\u0026quot;]; /* subgraph cluster_0{ innerpoint[shape=point,width=0,height=0]; innerpoint1[shape=point,width=0,height=0]; innerpoint2[shape=point,width=0,height=0]; innerpoint3[shape=point,width=0,height=0]; innerpoint4[shape=point,width=0,height=0]; innerpoint-\u0026gt;innerpoint1-\u0026gt;innerpoint2-\u0026gt;innerpoint3-\u0026gt;innerpoint4-\u0026gt;innerpoint[arrowsize=0.1]; } */ subgraph cluster_1{ //rankdir=TB; label=\u0026quot;å†…\u0026quot;; style=filled; fillcolor=lightgray; //shape=ellpse; //edge[fontname=\u0026quot;SimSun\u0026quot;,arrowhead=vee,color=blue,style=dashed]; //style=filled; //fillcolor=lightgray; //fillcolor=mintcream; //style=filled; { //node[style=filled,color=\u0026quot;chartreuse\u0026quot;]; //node[style=filled,color=\u0026quot;palegreen\u0026quot;]; //rank=same; node[color=red,shape=circle]; edge[color=green,style=dashed] subgoal1[label=\u0026quot;å†…1\u0026quot;]; step1[label=\u0026quot;å†…2\u0026quot;]; step2[label=\u0026quot;å†…3\u0026quot;]; step3[label=\u0026quot;å†…4\u0026quot;] step4[label=\u0026quot;å†…n\u0026quot;] subgoal1-\u0026gt; step1-\u0026gt;step2-\u0026gt;step3-\u0026gt;step4-\u0026gt;subgoal1; } } // innerpoint-\u0026gt;{subgoal1 step1 step2 step3 step4}[color=red,style=dotted,ltail=cluster_0]; outer1[label=\u0026quot;å¤–1\u0026quot;]; outer2[label=\u0026quot;å¤–2\u0026quot;]; outer3[label=\u0026quot;å¤–3\u0026quot;]; outer4[label=\u0026quot;å¤–4\u0026quot;]; outern[label=\u0026quot;å¤–n\u0026quot;]; subgoal1-\u0026gt;outern[ltail=cluster_1]; step1-\u0026gt;outer1[ltail=cluster_1]; step2-\u0026gt;outer2[ltail=cluster_1]; step3-\u0026gt;outer3[ltail=cluster_1]; step4-\u0026gt;outer4[ltail=cluster_1]; outerf1[shape=point,width=0,height=0]; outerf2[shape=point,width=0,height=0]; outerf3[shape=point,width=0,height=0]; outerf4[shape=point,width=0,height=0]; outerfn[shape=point,width=0,height=0]; outer1-\u0026gt;outerf1; outer2-\u0026gt;outerf2; outer3-\u0026gt;outerf3; outer4-\u0026gt;outerf4; outern-\u0026gt;outerfn; //{rank=same; innerpoint step4 outer4}; }  outerå›¾ //circo -Tpdf inner.dot -o inner.pdf digraph G{ fontname=\u0026quot;SimSun\u0026quot;; fontsize=10; compound=true; // è¿™æ ·lhead ltailæŒ‡å‘clusteræ‰æœ‰æ•ˆ edge[fontname=\u0026quot;SimSun\u0026quot;,arrowhead=vee,color=blue]; graph[fontname=\u0026quot;SimHei\u0026quot;,color=lightgray]; node[shape=box, fontname=\u0026quot;KaiTi\u0026quot;]; //concentrate=true; //node[style=filled,color=\u0026quot;lightblue\u0026quot;]; arrowsize=.5; nodesep=0.5; ranksep=0.5; rankdir=BU; //center=true; //rank=sink; //task[shape=polygon,sides=5,peripheries=2,label=\u0026quot;å›¾åƒå¤„ç†\u0026quot;,fillcolor=\u0026quot;#F1C40F\u0026quot;]; subgraph cluster_1{ //rankdir=TB; label=\u0026quot;å†…\u0026quot;; style=filled; fillcolor=chartreuse; //shape=ellpse; //edge[fontname=\u0026quot;SimSun\u0026quot;,arrowhead=vee,color=blue,style=dashed]; //style=filled; //fillcolor=lightgray; //fillcolor=mintcream; //style=filled; { //node[style=filled,color=\u0026quot;chartreuse\u0026quot;]; //node[style=filled,color=\u0026quot;palegreen\u0026quot;]; //rank=same; //innerpoint[shape=point,width=0,height=0]; node[color=red,shape=circle]; edge[color=\u0026quot;green\u0026quot;,style=dashed] subgoal1[label=\u0026quot;å†…1\u0026quot;]; step1[label=\u0026quot;å†…2\u0026quot;]; step2[label=\u0026quot;å†…3\u0026quot;]; step3[label=\u0026quot;å†…4\u0026quot;] step4[label=\u0026quot;å†…n\u0026quot;] subgoal1-\u0026gt; step1-\u0026gt;step2-\u0026gt;step3-\u0026gt;step4-\u0026gt;subgoal1; // {subgoal1 step1 step2 step3 step4}-\u0026gt;innerpoint[color=\u0026quot;red\u0026quot;]; } } subgraph cluster_0{ outer1[label=\u0026quot;å¤–1\u0026quot;]; outer2[label=\u0026quot;å¤–2\u0026quot;]; outer3[label=\u0026quot;å¤–3\u0026quot;]; outer4[label=\u0026quot;å¤–4\u0026quot;]; outern[label=\u0026quot;å¤–n\u0026quot;]; //outer1-\u0026gt;outer2-\u0026gt;outer3-\u0026gt;outer4-\u0026gt;outern-\u0026gt;outer1; } outern-\u0026gt;step3; outer1-\u0026gt;step4; outer2-\u0026gt;subgoal1; outer3-\u0026gt;step1; outer4-\u0026gt;step2; outerf1[shape=point,width=0,height=0]; outerf2[shape=point,width=0,height=0]; outerf3[shape=point,width=0,height=0]; outerf4[shape=point,width=0,height=0]; outerfn[shape=point,width=0,height=0]; //outerf1-\u0026gt;outerf2-\u0026gt;outerf3-\u0026gt;outerf4-\u0026gt;outerfn-\u0026gt;outerf1; outerf1-\u0026gt;outer3; outerf2-\u0026gt;outer2; outerf3-\u0026gt;outer1; outerf4-\u0026gt;outern; outerfn-\u0026gt;outer4; // outer1-\u0026gt;outer2-\u0026gt;outer3-\u0026gt;outer4-\u0026gt;outern-\u0026gt;outer1; }  ç®—æ³•ç»˜åˆ¶ digraph ast{ size=\u0026quot;4,4\u0026quot;; fontname=\u0026quot;Microsoft YaHei\u0026quot;; fontsize=10; node [shape=circle, fontname=\u0026quot;Microsoft YaHei\u0026quot;, fontsize=10]; edge [fontname=\u0026quot;Microsoft YaHei\u0026quot;, fontsize=10]; node [shape=\u0026quot;plaintext\u0026quot;]; mul [label=\u0026quot;mul(*)\u0026quot;]; add [label=\u0026quot;add(+)\u0026quot;]; add -\u0026gt; 3 add -\u0026gt; 4; mul -\u0026gt; add; mul -\u0026gt; 5; }  æ—¶åºè¡¨åˆ¶ä½œ èªæ˜çš„åšæ³• æ˜¯ä»å›¾ä¸­éšè—äº†æ‰€æœ‰stepiï¼ˆå…¶å®å›¾åƒå¯¹è±¡ä¸­æ˜¯å­˜åœ¨çš„ï¼Œåªä¸è¿‡æ‰“å°ä¸å‡ºæ¥ å¹¶åŒæ—¶ä½¿ç”¨äº†plaintextçš„é£æ ¼ã€‚\ndigraph G { rankdir=\u0026quot;LR\u0026quot;; node[shape=\u0026quot;point\u0026quot;, width=0, height=0]; edge[arrowhead=\u0026quot;none\u0026quot;, style=\u0026quot;dashed\u0026quot;] { rank=\u0026quot;same\u0026quot;; edge[style=\u0026quot;solid\u0026quot;]; LC[shape=\u0026quot;plaintext\u0026quot;]; LC -\u0026gt; step00 -\u0026gt; step01 -\u0026gt; step02 -\u0026gt; step03 -\u0026gt; step04 -\u0026gt; step05; } { rank=\u0026quot;same\u0026quot;; edge[style=\u0026quot;solid\u0026quot;]; Agency[shape=\u0026quot;plaintext\u0026quot;]; Agency -\u0026gt; step10 -\u0026gt; step11 -\u0026gt; step12 -\u0026gt; step13 -\u0026gt; step14 -\u0026gt; step15; } { rank=\u0026quot;same\u0026quot;; edge[style=\u0026quot;solid\u0026quot;]; Agent[shape=\u0026quot;plaintext\u0026quot;]; Agent -\u0026gt; step20 -\u0026gt; step21 -\u0026gt; step22 -\u0026gt; step23 -\u0026gt; step24 -\u0026gt; step25; } step00 -\u0026gt; step10 [label=\u0026quot;sends email new custumer\u0026quot;, arrowhead=\u0026quot;normal\u0026quot;]; step11 -\u0026gt; step01 [label=\u0026quot;declines\u0026quot;, arrowhead=\u0026quot;normal\u0026quot;]; step12 -\u0026gt; step02 [label=\u0026quot;accepts\u0026quot;, arrowhead=\u0026quot;normal\u0026quot;]; step13 -\u0026gt; step23 [label=\u0026quot;forward to\u0026quot;, arrowhead=\u0026quot;normal\u0026quot;]; step24 -\u0026gt; step14; step14 -\u0026gt; step04 [arrowhead=\u0026quot;normal\u0026quot;]; //xinran[shape=\u0026quot;none\u0026quot;,image=\u0026quot;xinran2.jpg\u0026quot;,label=\u0026quot;\u0026quot;] betterline[shape=\u0026quot;record\u0026quot;,style=filled,fillcolor=chartreuse]; betteredge[shape=\u0026quot;record\u0026quot;,style=filled,fillcolor=forestgreen]; }  reference  graphvizçš„åœ¨çº¿æ–‡æ¡£,\n dotè¯­è¨€çš„åœ¨çº¿æ–‡æ¡£,\n drawing Graph using dotä»‹ç»äº†ä¸€äº›å›¾è¡¨ä¸­åˆ†å±‚çš„æ¦‚å¿µã€‚\n ä½¿ç”¨Graphvizç»˜åˆ¶æµç¨‹å›¾å’Œå…³ç³»å›¾æ•™ä¼šäº†å…³äºå›¾ã€èŠ‚ç‚¹ã€è¾¹çš„å±æ€§è®¾ç½®(attribute property predictor)ï¼Œ å…¶å®ä¹Ÿå¯ä»¥å‚è€ƒNode, Edge and Graph Attributeså…³äºé»˜è®¤å±æ€§çš„è®¾ç½®ï¼Œç›¸å…³çš„è¿˜å¯ä»¥å‚è€ƒnode shapes, Arrow Shapes, colors è¿™ä¹Ÿæ˜¯æ¯”è¾ƒä¼šç»å¸¸æŸ¥çœ‹çš„å‚æ•°å±æ€§è®¾ç½®ã€‚\n  æ³¨æ„Mrecordä¸æ”¯æŒä¸­æ–‡ï¼Œä¸ºäº†å®ç°åœ†è§’ä½ å¯ä»¥ä½¿ç”¨style=roundedæ¥å®ç°(å¯ä»¥å’Œfilledå åŠ èµ·æ¥ä½¿ç”¨) style=\u0026quot;rounded,filled\u0026quot;ã€‚ è¿˜å¯ä»¥å‚è€ƒCreating Straight Edges in Graphviz,ä»¥åŠå®˜ç½‘å±æ€§æ–‡æ¡£style section\nnodeä¸edgeå…¬ç”¨æ ·å¼ï¼š\u0026quot;dashed\u0026quot;è™šçº¿, \u0026quot;dotted\u0026quot;ç‚¹, \u0026quot;solid\u0026quot;å›ºä½“æ¡†, \u0026quot;invis\u0026quot;éšè— and \u0026quot;bold\u0026quot; åŠ ç²— edge ç‰¹æœ‰æ ·å¼ï¼š\u0026quot;tapered\u0026quot; é”¥å½¢ node ç‰¹æœ‰æ ·å¼ï¼š\u0026quot;filled\u0026quot;å¡«å……, \u0026quot;diagonals\u0026quot;å¯¹è§’çº¿ ä¸ \u0026quot;rounded\u0026quot; åœ†è§’ clusterå¯ä½¿ç”¨æ ·å¼ï¼š\u0026quot;filled\u0026quot;ä¸\u0026quot;rounded\u0026quot; \u0026quot;radial\u0026quot;å¾„å‘æ ·å¼å¯è¢«nodes, clusters ä¸graphsä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨éœ€è¦æŒ‡å‡ºä¸€ä¸ªå¾„å‘æ¸å˜å¡«å……é£æ ¼  graphvizä¹Ÿæ˜¯æ”¯æŒæ’å›¾çš„,\ndigraph G { rankdir=\u0026quot;LR\u0026quot;; xinran[shape=\u0026quot;none\u0026quot;,image=\u0026quot;xinran2.jpg\u0026quot;,label=\u0026quot;\u0026quot;] betterline[shape=\u0026quot;record\u0026quot;,style=filled,fillcolor=chartreuse]; betteredge[shape=\u0026quot;record\u0026quot;,style=filled,fillcolor=forestgreen]; }   ä½¿ç”¨ Graphviz ç”Ÿæˆè‡ªåŠ¨åŒ–ç³»ç»Ÿå›¾ . ä¸­æ–‡ä¹±ç . Using graph drawing  å¾ˆè¯¦ç»†ï¼Œæ¨è ","date":1475054093,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1475054093,"objectID":"abc59863db4214ced92a086494caff1e","permalink":"/blog/2016/09/28/graphviz-notebook/","publishdate":"2016-09-28T17:14:53+08:00","relpermalink":"/blog/2016/09/28/graphviz-notebook/","section":"archives","summary":"graphvizå¯ç”¨äºå¸®åŠ©ä½ ç»˜åˆ¶å·¥å…·ä¹‹å¤–å’Œå·¥å…·ä¹‹å†…çš„æƒ³æ³•ã€‚å…³äºç»˜å›¾çš„å†å²å¯ä»¥å‚çœ‹A short note of the graph drawing.\n","tags":null,"title":"graphviz notebook","type":"archives"},{"authors":null,"categories":["Linux"],"content":"å…³äºshellçš„summaryå‚çœ‹Linux Shell Summary\nä»¥ä¸‹æ˜¯å…³äºbashçš„ä¸€äº›æ¯”è¾ƒç‰¹æ®Šçš„åœ°æ–¹ã€‚\n1. bashæ•°ç»„å†ç†è§£ declare -aè¡¨ç¤ºå£°æ˜ä¸€ä¸ªæ•°ç»„ï¼Œç±»ä¼¼äº declare -i å£°æ˜ä¸€ä¸ªæ•´æ•°å’Œdeclare -xå£°æ˜ä¸€ä¸ªç¯å¢ƒå˜é‡ã€‚\nbashæ•°ç»„å®šä¹‰æ—¶å€™ä½¿ç”¨å°æ‹¬å·æ¥èµ‹å€¼ï¼Œè€Œåœ¨å¼•ç”¨æ•°ç»„çš„æ—¶å€™åè€Œä½¿ç”¨ä¸­æ‹¬å·ï¼ˆä¸åŒäºå…¶ä»–ç¼–ç¨‹è¯­è¨€)\nå®šä¹‰æ•°ç»„ bash2=(\u0026quot;34\u0026quot;,\u0026quot;5\u0026quot;,\u0026quot;5\u0026quot;,\u0026quot;4\u0026quot;)  å¼•ç”¨æ•°ç»„ echo ${array[n]} éå†æ•°ç»„ï¼š filename=(`ls`) for var in ${filename[@]};do echo $var done  æ·»åŠ æ•°ç»„ bash1+=\u0026quot;45\u0026quot;; #èµ‹å€¼ä¸¤è¾¹ä¸èƒ½æœ‰ç©ºæ ¼  2. bashå˜é‡æˆªå–å’Œå˜é‡æ›¿æ¢ bashä½¿ç”¨äº•å·ä»£è¡¨å¼€å¤´(è¿™å’Œæ­£åˆ™è¡¨è¾¾å¼æœ‰ç‚¹ä¸åŒï¼Œä½¿ç”¨caret) è€Œç»“å°¾åˆ™ä½¿ç”¨ç™¾åˆ†å·(ä¸åŒäºæ­£åˆ™è¡¨è¾¾å¼çš„dollarç¬¦å·$)ã€‚å¹¶ä¸”åœ¨å½“ä½¿ç”¨ä¸¤ä¸ªé‡å çš„äº•å·ï¼Œè¡¨ç¤ºæœ€å¤§é•¿åº¦ï¼ˆä»å¤´å¼€å§‹çš„æœ€å¤§åˆ é™¤éƒ½åˆ æ‰ï¼‰ è€Œä½¿ç”¨ä¸¤ä¸ªç™¾åˆ†å·åˆ™è¡¨è¾¾åæ–¹å‘çš„æœ€å¤§é•¿åº¦åˆ é™¤ï¼ˆä»å°¾åˆ°å¤´åˆ é™¤åŒ¹é…å­—ç¬¦ä¸²ï¼‰\n #è¡¨ç¤ºæ­£å‘æœ€çŸ­åŒ¹é…ï¼Œ##è¡¨ç¤ºæ­£å‘æœ€å¤§åŒ¹é… %è¡¨ç¤ºåå‘æœ€çŸ­åŒ¹é…ï¼Œ%%è¡¨ç¤ºåå‘æœ€å¤§åŒ¹é…  è€Œè¿™ä¸€ç‚¹ä¹Ÿä½“ç°åœ¨å˜é‡æ›¿æ¢å½“ä¸­ï¼Œ\nå­ä¸²æ›¿æ¢ï¼š ${string/substring/replacement} ä½¿ç”¨$replacementæ¥æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…çš„$substring. ${string//substring/replacement} ä½¿ç”¨$replacementæ¥æ›¿æ¢æ‰€æœ‰åŒ¹é…çš„$substring. ${string/#substring/replacement} å¦‚æœ$substringåŒ¹é…$stringçš„å¼€å¤´éƒ¨åˆ†, é‚£ä¹ˆå°±ç”¨$replacementæ¥æ›¿æ¢$substring. ${string/%substring/replacement} å¦‚æœ$substringåŒ¹é…$stringçš„ç»“å°¾éƒ¨åˆ†, é‚£ä¹ˆå°±ç”¨$replacementæ¥æ›¿æ¢$substring. å­ä¸²æå–çš„æ–¹æ³•ä¸»è¦æœ‰ï¼šç›´æ¥åˆ°æŒ‡å®šä½ç½®æ±‚å­ä¸²ï¼Œå­—ç¬¦åŒ¹é…æ±‚å­ä¸²ã€‚ ${string:position} åœ¨$stringä¸­ä»ä½ç½®$positionå¼€å§‹æå–å­ä¸². å¦‚æœ$stringæ˜¯\u0026quot;*\u0026quot;æˆ–è€…\u0026quot;@\u0026quot;, é‚£ä¹ˆå°†ä¼šæå–ä»ä½ç½®$positionå¼€å§‹çš„ä½ç½®å‚æ•°.[1] ${string:position:length} åœ¨$stringä¸­ä»ä½ç½®$positionå¼€å§‹æå–$lengthé•¿åº¦çš„å­ä¸².   é™¤å·è¡¨ç¤ºæœ€çŸ­æ›¿æ¢ï¼ŒåŒé™¤å·è¡¨ç¤ºæœ€é•¿æ›¿æ¢ åŒ¹é…é¡¹ç¬¬ä¸€ä¸ªä½ç½®å‡ºç°#äº•å·è¡¨ç¤ºå¼€å¤´éƒ¨åˆ† åŒ¹é…é¡¹æœ€åä¸€ä¸ªä½ç½®å‡ºç°%ç™¾åˆ†å·è¡¨ç¤ºç»“å°¾éƒ¨åˆ†  3. bashæ¥å—é”®ç›˜æ“ä½œ ç”¨ä¸€ä¸ªreadå‘½ä»¤å³å¯(ç±»ä¼¼äºmatlabçš„inputå‘½ä»¤) é€šå¸¸çš„é£æ ¼æ˜¯ read -p \u0026quot;prompt for reminding\u0026quot; variable-name\næ¥æ”¶é”®ç›˜è¾“å…¥ï¼š read [é€‰é¡¹] [å˜é‡å] é€‰é¡¹ï¼š -p \u0026quot;æç¤ºä¿¡æ¯\u0026quot;ï¼šåœ¨ç­‰å¾…readè¾“å…¥æ—¶ï¼Œè¾“å‡ºæç¤ºä¿¡æ¯ -t ç§’æ•°ï¼šreadå‘½ä»¤ä¼šä¸€ç›´ç­‰å¾…ç”¨æˆ·è¾“å…¥ï¼Œä½¿ç”¨æ­¤é€‰é¡¹å¯ä»¥æŒ‡å®šç­‰å¾…æ—¶é—´ -n å­—ç¬¦æ•°ï¼šreadå‘½ä»¤åªæ¥å—æŒ‡å®šçš„å­—ç¬¦æ•°ï¼Œå°±ä¼šæ‰§è¡Œ -sï¼šéšè—è¾“å…¥çš„æ•°æ®ï¼Œé€‚ç”¨äºæœºå¯†ä¿¡æ¯çš„è¾“å…¥ read.shï¼š #!/bin/bash read -p \u0026quot;please input your name:\u0026quot; -t 30 name echo $name read -p \u0026quot;please input your passwd:\u0026quot; -s passwd echo -e \u0026quot;\\n\u0026quot; echo $passwd read -p \u0026quot;please input your sex [M/F]:\u0026quot; sex echo -e \u0026quot;\\n\u0026quot; echo $sex  4. tacåå‘ catåœ¨bashä¸­æ˜¯æ‰“å°æ–‡æœ¬ä¿¡æ¯çš„ä½œç”¨ï¼Œè€Œtacåˆ™æ˜¯åå‘è¾“å‡ºæ–‡ä»¶æµ\ncat old_file|awk '{print NR,$0}'|sort -r -n|awk '{print $2}'   æ·»åŠ æ¯è¡Œçš„è¡Œå· é€†å‘æ’åˆ— è¾“å‡ºæ¯è¡Œ  5. ifå½“ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨åŒæ‹¬å·è¿›è¡Œç®—æœ¯åˆ¤æ–­ ifå¹¶ä¸æ˜¯æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Ÿè¿˜æ˜¯åªæœ‰å˜é‡æ”¯æŒï¼Ÿ\nroot at javazhao-N53SM \u001b[13:26:46Ã¤ï¿½ï¿½åˆ] in /MyBashWork/clean on git:develop? $ if [ -f \u0026quot;All.sh\u0026quot; ] ;then echo \u0026quot;hei\u0026quot;; else echo \u0026quot;no\u0026quot; ;fi; hei root at javazhao-N53SM \u001b[13:26:52Ã¤ï¿½ï¿½åˆ] in /MyBashWork/clean on git:develop? $ if [ -f \u0026quot;*.sh\u0026quot; ] ;then echo \u0026quot;hei\u0026quot;; else echo \u0026quot;no\u0026quot; ;fi; no ä½†æ˜¯å¯¹äºå˜é‡æ˜¯å¯ä»¥çš„ [root@bj_manager ~]# a=123a;if [[ $a =~ ^[0-9]+$ ]]; then echo ok; fi [root@bj_manager ~]# a=123;if [[ $a =~ ^[0-9]+$ ]]; then echo ok; fi  å®é™…æƒ…å†µæ˜¯åªæœ‰åœ¨åŒä¸­æ‹¬å·çš„æ—¶å€™æ‰æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‚ä¸€èˆ¬æ˜¯ä½¿ç”¨åŒä¸­æ‹¬å·è¿›è¡Œæ–‡ä»¶åˆ¤æ–­ï¼Œç›®å½•åˆ¤æ–­ï¼Œ æ–‡ä»¶å¤§å°åˆ¤æ–­ç­‰\nifå¦å¤–ä¸€ä¸ªç‰¹æ®Šåœ°æ–¹å°±æ˜¯ä½¿ç”¨åŒæ‹¬å·æ‰§è¡Œç®—æœ¯æ¯”è¾ƒ\n708@708-PC MINGW64 /e/plGraphViz (master) if (( 1\u0026lt;2 )) ;then echo \u0026quot;zero\u0026quot;; echo \u0026quot;a=2\u0026quot;; echo \u0026quot;a=3\u0026quot; ;else echo \u0026quot;no\u0026quot;; fi; zero a=2 a=3 708@708-PC MINGW64 /e/dot(1)/testByYe $ if [[ 1\u0026lt;2 ]] ;then echo \u0026quot;zero\u0026quot;; echo \u0026quot;a=2\u0026quot;; echo \u0026quot;a=3\u0026quot; ;else echo \u0026quot;no\u0026quot;; fi; bash: unexpected token 284 in conditional command bash: syntax error near `1\u0026lt;'  è€Œbashä¹Ÿä¸€èˆ¬æ˜¯ä½¿ç”¨$((...)) è¿›è¡Œç®—æœ¯çš„è¿ç®—.\n","date":1474816501,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1474816501,"objectID":"24ce26b8b4296f14eef22ae0173ca43b","permalink":"/blog/2016/09/25/bash-special-annotation/","publishdate":"2016-09-25T23:15:01+08:00","relpermalink":"/blog/2016/09/25/bash-special-annotation/","section":"archives","summary":"å…³äºshellçš„summaryå‚çœ‹Linux Shell Summary\nä»¥ä¸‹æ˜¯å…³äºbashçš„ä¸€äº›æ¯”è¾ƒç‰¹æ®Šçš„åœ°æ–¹ã€‚\n","tags":null,"title":"bash special annotation","type":"archives"},{"authors":null,"categories":["prolog"],"content":"We go to github, then download the souce code, go on looking into the code, dame it! So many codes ,so many branches, how to figure out the develop process?\nMaybe you can use the sourceTree to help you visulize the source tree, or the right below tool for helping navigating the source tree in the time and compare with each other continually.\n 1. æºç æ¯”è¾ƒç›®å½• 2. æ–‡ä»¶ç»†èŠ‚ 3. æ—¶é—´å˜åŒ–è¡¨ 4. åˆ—å‡ºç®€è¦ä¿¡æ¯ 5. shell code for navigating the source tree in the git repository  1. æ¯”è¾ƒç›®å½• color block languages for modify,maybe you need sometimes in your blogs writing life.\n 1: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 6ced089 å’Œå˜åŠ¨å 3d8b517 2: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 3d8b517 å’Œå˜åŠ¨å ccd942c 3: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ccd942c å’Œå˜åŠ¨å 0b3607d 4: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 0b3607d å’Œå˜åŠ¨å acf4ec3 5: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ acf4ec3 å’Œå˜åŠ¨å c1ad93f 6: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c1ad93f å’Œå˜åŠ¨å c7c8226 7: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c7c8226 å’Œå˜åŠ¨å 0cd29ea 8: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 0cd29ea å’Œå˜åŠ¨å 13f7fbf 9: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 13f7fbf å’Œå˜åŠ¨å 5520d75 10: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 5520d75 å’Œå˜åŠ¨å 8656a39 11: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 8656a39 å’Œå˜åŠ¨å 7421981 12: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7421981 å’Œå˜åŠ¨å bfcb63b 13: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ bfcb63b å’Œå˜åŠ¨å 84afd69 14: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 84afd69 å’Œå˜åŠ¨å c2bfd3f 15: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c2bfd3f å’Œå˜åŠ¨å fa364fc 16: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ fa364fc å’Œå˜åŠ¨å 3c900f4 17: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 3c900f4 å’Œå˜åŠ¨å 65cc1c3 18: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 65cc1c3 å’Œå˜åŠ¨å 20e1f21 19: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 20e1f21 å’Œå˜åŠ¨å e2e9fc1 20: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ e2e9fc1 å’Œå˜åŠ¨å 4b72d15 21: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 4b72d15 å’Œå˜åŠ¨å 54248f7 22: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 54248f7 å’Œå˜åŠ¨å 3b9a773 23: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 3b9a773 å’Œå˜åŠ¨å 1e9a910 24: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 1e9a910 å’Œå˜åŠ¨å 6dc1cf5 25: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 6dc1cf5 å’Œå˜åŠ¨å 76ea35d 26: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 76ea35d å’Œå˜åŠ¨å 2a2728b 27: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 2a2728b å’Œå˜åŠ¨å 7f9fc82 28: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7f9fc82 å’Œå˜åŠ¨å 5baddb5 29: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 5baddb5 å’Œå˜åŠ¨å 95bfe7f 30: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 95bfe7f å’Œå˜åŠ¨å f1322fa 31: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ f1322fa å’Œå˜åŠ¨å 474bea8 32: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 474bea8 å’Œå˜åŠ¨å 262cb2a 33: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 262cb2a å’Œå˜åŠ¨å e7e6033 34: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ e7e6033 å’Œå˜åŠ¨å e17bf44 35: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ e17bf44 å’Œå˜åŠ¨å 6596aa1 36: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 6596aa1 å’Œå˜åŠ¨å 87e8982 37: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 87e8982 å’Œå˜åŠ¨å cb6aada 38: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ cb6aada å’Œå˜åŠ¨å 7c8125b 39: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7c8125b å’Œå˜åŠ¨å 6a38f95 40: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 6a38f95 å’Œå˜åŠ¨å ebb86cd 41: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ebb86cd å’Œå˜åŠ¨å 1549e44 42: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 1549e44 å’Œå˜åŠ¨å 61ddca2 43: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 61ddca2 å’Œå˜åŠ¨å 26f07e7 44: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 26f07e7 å’Œå˜åŠ¨å f78b4f8 45: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ f78b4f8 å’Œå˜åŠ¨å 3109362 46: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 3109362 å’Œå˜åŠ¨å df0ab09 47: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ df0ab09 å’Œå˜åŠ¨å 73e976b 48: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 73e976b å’Œå˜åŠ¨å 090c25d 49: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 090c25d å’Œå˜åŠ¨å daed8bf 50: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ daed8bf å’Œå˜åŠ¨å 528b9af 51: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 528b9af å’Œå˜åŠ¨å e594ae6 52: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ e594ae6 å’Œå˜åŠ¨å bbefbf7 53: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ bbefbf7 å’Œå˜åŠ¨å 0cc5421 54: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 0cc5421 å’Œå˜åŠ¨å dbc602d 55: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ dbc602d å’Œå˜åŠ¨å a2456df 56: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ a2456df å’Œå˜åŠ¨å 20c6017 57: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 20c6017 å’Œå˜åŠ¨å f694d77 58: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ f694d77 å’Œå˜åŠ¨å af5d96d 59: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ af5d96d å’Œå˜åŠ¨å ab4b616 60: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ab4b616 å’Œå˜åŠ¨å 74bd19d 61: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 74bd19d å’Œå˜åŠ¨å 8ffff6f 62: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 8ffff6f å’Œå˜åŠ¨å ac3423a 63: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ac3423a å’Œå˜åŠ¨å 57932e4 64: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 57932e4 å’Œå˜åŠ¨å 315b16e 65: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 315b16e å’Œå˜åŠ¨å 898b5d2 66: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 898b5d2 å’Œå˜åŠ¨å 4279a49 67: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 4279a49 å’Œå˜åŠ¨å c173073 68: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c173073 å’Œå˜åŠ¨å 107c515 69: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 107c515 å’Œå˜åŠ¨å 8f574bb 70: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 8f574bb å’Œå˜åŠ¨å d7088dd 71: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ d7088dd å’Œå˜åŠ¨å 94ed05d 72: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 94ed05d å’Œå˜åŠ¨å f481060 73: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ f481060 å’Œå˜åŠ¨å ce492ef 74: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ce492ef å’Œå˜åŠ¨å ddef555 75: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ddef555 å’Œå˜åŠ¨å af27fdd 76: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ af27fdd å’Œå˜åŠ¨å f390238 77: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ f390238 å’Œå˜åŠ¨å c5f7d82 78: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c5f7d82 å’Œå˜åŠ¨å acf6467 79: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ acf6467 å’Œå˜åŠ¨å 6656a2d 80: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 6656a2d å’Œå˜åŠ¨å 256c9ce 81: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 256c9ce å’Œå˜åŠ¨å bf4ebea 82: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ bf4ebea å’Œå˜åŠ¨å 70aec99 83: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 70aec99 å’Œå˜åŠ¨å e06e6ba 84: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ e06e6ba å’Œå˜åŠ¨å 0fd12ca 85: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 0fd12ca å’Œå˜åŠ¨å 67c4157 86: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 67c4157 å’Œå˜åŠ¨å b972e2b 87: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ b972e2b å’Œå˜åŠ¨å 8bbc84c 88: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 8bbc84c å’Œå˜åŠ¨å 033fa14 89: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 033fa14 å’Œå˜åŠ¨å fdb5a9e 90: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ fdb5a9e å’Œå˜åŠ¨å 6ec582e 91: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 6ec582e å’Œå˜åŠ¨å 68b53b8 92: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 68b53b8 å’Œå˜åŠ¨å 46e8f3c 93: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 46e8f3c å’Œå˜åŠ¨å 3162d88 94: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 3162d88 å’Œå˜åŠ¨å 714b2e0 95: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 714b2e0 å’Œå˜åŠ¨å af7a387 96: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ af7a387 å’Œå˜åŠ¨å 7b434e3 97: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7b434e3 å’Œå˜åŠ¨å dcbcb4d 98: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ dcbcb4d å’Œå˜åŠ¨å 50a3dbc 99: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 50a3dbc å’Œå˜åŠ¨å a97e8e1 100: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ a97e8e1 å’Œå˜åŠ¨å 9513a9b 101: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 9513a9b å’Œå˜åŠ¨å 7163f60 102: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7163f60 å’Œå˜åŠ¨å b2f4aef 103: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ b2f4aef å’Œå˜åŠ¨å ba30c25 104: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ba30c25 å’Œå˜åŠ¨å 0eea41b 105: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 0eea41b å’Œå˜åŠ¨å c1691bd 106: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c1691bd å’Œå˜åŠ¨å 3de9fc2 107: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 3de9fc2 å’Œå˜åŠ¨å cb34d89 108: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ cb34d89 å’Œå˜åŠ¨å 7f0e20f 109: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7f0e20f å’Œå˜åŠ¨å c16a7a7 110: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c16a7a7 å’Œå˜åŠ¨å 8bbb08c 111: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 8bbb08c å’Œå˜åŠ¨å 34c8b1a 112: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 34c8b1a å’Œå˜åŠ¨å d883d06 113: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ d883d06 å’Œå˜åŠ¨å 66ac0a0 114: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 66ac0a0 å’Œå˜åŠ¨å ab5a102 115: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ab5a102 å’Œå˜åŠ¨å 65f43b8 116: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 65f43b8 å’Œå˜åŠ¨å c6de3d1 117: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c6de3d1 å’Œå˜åŠ¨å cab2231 118: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ cab2231 å’Œå˜åŠ¨å 008c5e6 119: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 008c5e6 å’Œå˜åŠ¨å dba5c72 120: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ dba5c72 å’Œå˜åŠ¨å eff64ee 121: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ eff64ee å’Œå˜åŠ¨å 89eb423 122: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 89eb423 å’Œå˜åŠ¨å 2346997 123: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 2346997 å’Œå˜åŠ¨å d22d50e 124: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ d22d50e å’Œå˜åŠ¨å e64cc35 125: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ e64cc35 å’Œå˜åŠ¨å 763a529 126: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 763a529 å’Œå˜åŠ¨å d962f81 127: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ d962f81 å’Œå˜åŠ¨å 63a5cd7 128: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 63a5cd7 å’Œå˜åŠ¨å ce95c3c 129: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ce95c3c å’Œå˜åŠ¨å 44cd5a6 130: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 44cd5a6 å’Œå˜åŠ¨å c0c5e18 131: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c0c5e18 å’Œå˜åŠ¨å 603344f 132: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 603344f å’Œå˜åŠ¨å 2679253 133: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 2679253 å’Œå˜åŠ¨å a5e20f8 134: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ a5e20f8 å’Œå˜åŠ¨å bc3c502 135: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ bc3c502 å’Œå˜åŠ¨å 7ec98aa 136: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7ec98aa å’Œå˜åŠ¨å 984d3b9 137: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 984d3b9 å’Œå˜åŠ¨å 4401e20 138: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 4401e20 å’Œå˜åŠ¨å 2247466 139: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 2247466 å’Œå˜åŠ¨å f4a9322 140: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ f4a9322 å’Œå˜åŠ¨å 0d2712a 141: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 0d2712a å’Œå˜åŠ¨å 3518985 142: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 3518985 å’Œå˜åŠ¨å 322ca62 143: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 322ca62 å’Œå˜åŠ¨å c4bf9ea 144: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c4bf9ea å’Œå˜åŠ¨å 2a6dafd 145: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 2a6dafd å’Œå˜åŠ¨å 145615e 146: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 145615e å’Œå˜åŠ¨å f16acca 147: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ f16acca å’Œå˜åŠ¨å 4e2d9f1 148: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 4e2d9f1 å’Œå˜åŠ¨å 6359c9c 149: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 6359c9c å’Œå˜åŠ¨å 00537d0 150: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 00537d0 å’Œå˜åŠ¨å acadc39 151: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ acadc39 å’Œå˜åŠ¨å 51359c6 152: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 51359c6 å’Œå˜åŠ¨å 73047b3 153: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 73047b3 å’Œå˜åŠ¨å e4c4586 154: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ e4c4586 å’Œå˜åŠ¨å 7b991bb 155: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7b991bb å’Œå˜åŠ¨å fa1518f 156: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ fa1518f å’Œå˜åŠ¨å 8593ed6 157: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 8593ed6 å’Œå˜åŠ¨å cc53b1e 158: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ cc53b1e å’Œå˜åŠ¨å 202a241 159: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 202a241 å’Œå˜åŠ¨å 858b5fb 160: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 858b5fb å’Œå˜åŠ¨å 260b62d 161: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 260b62d å’Œå˜åŠ¨å a6886ca 162: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ a6886ca å’Œå˜åŠ¨å 41914a2 163: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 41914a2 å’Œå˜åŠ¨å 05a5fd2 164: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 05a5fd2 å’Œå˜åŠ¨å fd6c59b 165: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ fd6c59b å’Œå˜åŠ¨å 121e68f  2. æ–‡ä»¶ç»†èŠ‚ 1: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 6ced089 å’Œå˜åŠ¨å 3d8b517  [back to content](#compare) ``` diff diff --git a/.gitmodules b/.gitmodules index f1b9cf5..a63cbff 100644 --- a/.gitmodules +++ b/.gitmodules @@ -1,3 +1,6 @@ [submodule \"Prolog-Library-Collection\"] path = Prolog-Library-Collection url = https://github.com/wouterbeek/Prolog-Library-Collection.git +[submodule \"plHtml\"] +\tpath = plHtml +\turl = https://github.com/wouterbeek/plHtml.git diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 4a51c6e..184c33e 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 4a51c6e0936179bff57fda23686219e6a6cd3c9b +Subproject commit 184c33eecf561c109919a7f765de0b1e53d99d00 diff --git a/plHtml b/plHtml new file mode 160000 index 0000000..2c45ebc --- /dev/null +++ b/plHtml @@ -0,0 +1 @@ +Subproject commit 2c45ebcd3f946c1e207a69ece1e2d730d4d090ed ``` 2: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 3d8b517 å’Œå˜åŠ¨å ccd942c  [back to content](#compare) ``` diff diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 184c33e..03d4b46 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 184c33eecf561c109919a7f765de0b1e53d99d00 +Subproject commit 03d4b46ba9c6f658828ff843e5785c221ffc3a57 diff --git a/plHtml b/plHtml index 2c45ebc..50743da 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit 2c45ebcd3f946c1e207a69ece1e2d730d4d090ed +Subproject commit 50743daad8dd0f3664e1cafbc14523a423314f84 ``` 3: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ccd942c å’Œå˜åŠ¨å 0b3607d  [back to content](#compare) ``` diff diff --git a/gv_attr_type.pl b/gv_attr_type.pl index c62d146..200c034 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -41,7 +41,7 @@ ] ). :- reexport( - gv(gv_color), + plGraphViz(gv_color), [ color//1, % +Color:compound colorList//1 % +ColorList:list(compound) diff --git a/gv_attrs.pl b/gv_attrs.pl index 81d51df..728640e 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -68,7 +68,7 @@ check_minimum(V, Min1):- gv_attrs_download:- gv_attrs_url(Url), - download_html(Url, Dom, [html_dialect(html4)]), + download_html(Url, Dom, [html_dialect(html4),verbose(silent)]), xpath(Dom, //table(@align=center), TableDom), % @tbd This does not work, since in `record_name(Element, Name)`, diff --git a/gv_color.pl b/gv_color.pl index fd22d35..ad18728 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -81,7 +81,7 @@ gv_color_url('http://www.graphviz.org/doc/info/colors.html'). gv_color_download:- gv_color_url(Url), - download_html(Url, Dom, [html_dialect(html4)]), + download_html(Url, Dom, [html_dialect(html4),verbose(silent)]), xpath(Dom, //table(1), TableDom1), xpath(Dom, //table(2), TableDom2), maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]). ``` 4: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 0b3607d å’Œå˜åŠ¨å acf4ec3  [back to content](#compare) ``` diff diff --git a/gv_attrs.pl b/gv_attrs.pl index 728640e..b360039 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -14,16 +14,21 @@ */ :- use_module(library(apply)). +:- use_module(library(persistency)). :- use_module(library(xpath)). :- use_module(dcg(dcg_content)). :- use_module(dcg(dcg_generic)). +:- use_module(generics(db_ext)). +:- use_module(os(file_ext)). :- use_module(plHtml(html)). :- use_module(plHtml(html_table)). :- use_module(plGraphViz(gv_attr_type)). % DCGs implementing attribute types. +:- db_add_novel(user:prolog_file_type(log, logging)). + %! gv_attr( %! ?Name:atom, %! ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])), @@ -33,9 +38,18 @@ %! ?Notes:atom %! ) is nondet. -:- dynamic(gv_attr/6). +:- persistent( + gv_attr( + name:atom, + used_by:list(oneof([cluster,edge,graph,node,subgraph])), + types:list(atom), + default, + minimum, + notes:atom + ) +). -:- initialization(gv_attrs_download). +:- initialization(gv_attrs_init). @@ -64,7 +78,20 @@ check_minimum(V, Min1):- -% Download attributes from graphviz.org +% INITIALIZATION + +%! assert_gv_attr_row(+Row:list(atom)) is det. + +assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):- + dcg_phrase(translate_usedby(UsedBy2), UsedBy1), + once(dcg_phrase(translate_type(Types2), Types1)), + sort(UsedBy2, UsedBy3), + translate_default(Default1, Default2), + assert_gv_attr(Name, UsedBy3, Types2, Default2, Minimum, Notes). + + +%! gv_attrs_downloads is det. +% Downloads the table describing GraphViz attributes from `graphviz.org`. gv_attrs_download:- gv_attrs_url(Url), @@ -76,16 +103,56 @@ gv_attrs_download:- %%%%xpath(Dom, /html/body/table, TableDom), html_to_table(TableDom, _, Rows), - maplist(assert_gv_attr, Rows). + maplist(assert_gv_attr_row, Rows). + + +%! gv_attrs_file(-File:atom) is det. + +gv_attrs_file(File):- + absolute_file_name( + data(gv_attrs), + File, + [access(write),file_type(logging)] + ). + + +%! gv_attrs_init is det. + +gv_attrs_init:- + gv_attrs_file(File), + safe_db_attach(File), + file_age(File, Age), + gv_attrs_update(Age). + + +%! gv_attrs_update(+Age:float) is det. + +% The persistent store is still fresh. +gv_attrs_update(Age):- + once(gv_attr(_, _, _, _, _, _)), + Age ', _):- !. translate_default(Default, Default). + +%! translate_type(-Types:list(atom))// is det. + translate_type([H|T]) -- {gv_attr_type(H)}, atom(H), whites, translate_type(T). -translate_type([]) -- []. +translate_type([]) -- !, []. + + +%! translated_usedby( +%! -UsedBy:list(oneof([cluster,edge,graph,node,subgraph])) +%! )// is det. translate_usedby([cluster|T]) -- `C`, !, translate_usedby(T). translate_usedby([edge|T]) -- `E`, !, translate_usedby(T). diff --git a/gv_color.pl b/gv_color.pl index ad18728..cf92f56 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -18,20 +18,25 @@ :- use_module(library(apply)). :- use_module(library(lists)). +:- use_module(library(persistency)). :- use_module(library(xpath)). :- use_module(dcg(dcg_abnf)). :- use_module(dcg(dcg_cardinal)). +:- use_module(generics(db_ext)). +:- use_module(os(file_ext)). :- use_module(sparql(sparql_char)). :- use_module(plHtml(html)). :- use_module(plHtml(html_table)). +:- db_add_novel(user:prolog_file_type(log, logging)). + %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet. -:- dynamic(gv_color/2). +:- persistent(gv_color(colorscheme:oneof([svg,x11]),color:atom)). -:- initialization(gv_color_download). +:- initialization(gv_color_init). @@ -75,9 +80,9 @@ wc_weight(Float) -- -% Initialization. +% INITIALIZATION -gv_color_url('http://www.graphviz.org/doc/info/colors.html'). +%! gv_color_download is det. gv_color_download:- gv_color_url(Url), @@ -91,6 +96,52 @@ assert_color_table(Colorscheme, TableDom):- append(Rows, Cells), forall( member(Cell, Cells), - assert(gv_color(Colorscheme, Cell)) + assert_gv_color(Colorscheme, Cell) + ). + + +%! gv_color_file(-File:atom) is det. + +gv_color_file(File):- + absolute_file_name( + data(gv_color), + File, + [access(write),file_type(logging)] ). + +%! gv_color_init is det. + +gv_color_init:- + gv_color_file(File), + safe_db_attach(File), + file_age(File, Age), + gv_color_update(Age). + + +%! gv_color_update(+Age:float) is det. + +% The persistent store is still fresh. +gv_color_update(Age):- + once(gv_color(_, _)), + Age 5: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ acf4ec3 å’Œå˜åŠ¨å c1ad93f  [back to content](#compare) ``` diff diff --git a/gv_attrs.pl b/gv_attrs.pl index b360039..fa499d0 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -130,7 +130,7 @@ gv_attrs_init:- % The persistent store is still fresh. gv_attrs_update(Age):- once(gv_attr(_, _, _, _, _, _)), - Age 6: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c1ad93f å’Œå˜åŠ¨å c7c8226  [back to content](#compare) ``` diff diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 03d4b46..af1a250 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 03d4b46ba9c6f658828ff843e5785c221ffc3a57 +Subproject commit af1a250d6074d0ab61a525fd064bfd555c5815a1 diff --git a/plHtml b/plHtml index 50743da..81eb731 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit 50743daad8dd0f3664e1cafbc14523a423314f84 +Subproject commit 81eb731eb46d98979c8f2862cfbf0e0aca9c1ef8 ``` 7: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c7c8226 å’Œå˜åŠ¨å 0cd29ea  [back to content](#compare) ``` diff diff --git a/load.pl b/load.pl index d502d58..4b117d1 100644 --- a/load.pl +++ b/load.pl @@ -1,11 +1,11 @@ % Load file for plGraphViz. -:- multifile(user:prolog/3). :- dynamic(user:prolog/3). -user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz). +:- multifile(user:prolog/3). + user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz). :- use_module(load_project). -:- load_project([ +:- load_project(plGraphViz, [ plc-'Prolog-Library-Collection', plHtml ]). diff --git a/load_project.pl b/load_project.pl index 3eae83d..5599b5e 100644 --- a/load_project.pl +++ b/load_project.pl @@ -1,7 +1,8 @@ :- module( load_project, [ - load_project/1, % +ChildProjects:list(or([atom,pair(atom)])) + load_project/2, % +Parent:atom + % +ChildProjects:list(or([atom,pair(atom)])) load_subproject/2, % +ParentFileSearchPath:atom % +Child:or([atom,pair(atom)]) set_data_subdirectory/1 % +ParentDirectory:atom @@ -16,19 +17,24 @@ Generic code for loading a project: * Load the index of subprojects onto the file search path. @author Wouter Beek -@version 2014/05/27 +@version 2014/06/14 */ -:- use_module(library(ansi_term)). +:- use_module(library(ansi_term)). % Colorized terminal messages. :- use_module(library(apply)). +:- dynamic(user:project/2). +:- multifile(user:project/2). +:- dynamic(user:project/3). +:- multifile(user:project/3). -load_project(ChildProjects):- - user:project(_, _, ParentFsp), + +load_project(Parent, ChildProjects):- + parent_alias(Parent, ParentFsp), % Entry point. - source_file(load_project(_), ThisFile), + source_file(load_project(_,_), ThisFile), file_directory_name(ThisFile, ThisDir), assert(user:file_search_path(ParentFsp, ThisDir)), assert(user:file_search_path(project, ThisDir)), @@ -38,7 +44,7 @@ load_project(ChildProjects):- % Load the root of submodules onto the file search path. maplist(load_subproject(ParentFsp), ChildProjects), - + % Load the index into the file search path. load_project_index(ParentFsp). @@ -77,8 +83,20 @@ load_subproject_file_search_path(_, ChildFsp, ChildDir):- load_project_index(Fsp):- Spec =.. [Fsp,index], - absolute_file_name(Spec, File, [access(read),file_type(prolog)]), + absolute_file_name( + Spec, + File, + [access(read),file_errors(fail),file_type(prolog)] + ), !, ensure_loaded(File). +load_project_index(_). + + +%! parent_alias(+Parent:atom, -ParentFsp:atom) is det. + +parent_alias(Parent, ParentFsp):- + user:project(Parent, _, ParentFsp), !. +parent_alias(Parent, Parent). %! set_data_subdirectory(+ParentDirectory:atom) is det. ``` 8: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 0cd29ea å’Œå˜åŠ¨å 13f7fbf  [back to content](#compare) ``` diff diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index af1a250..5b34b01 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit af1a250d6074d0ab61a525fd064bfd555c5815a1 +Subproject commit 5b34b01ab0cc82a56e6fd90fc26e75da22f5a0fe diff --git a/plHtml b/plHtml index 81eb731..08480c4 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit 81eb731eb46d98979c8f2862cfbf0e0aca9c1ef8 +Subproject commit 08480c40acaee5f70bfb21e3c641bef1e7d258bd ``` 9: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 13f7fbf å’Œå˜åŠ¨å 5520d75  [back to content](#compare) ``` diff diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 200c034..f9a0e7f 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -29,18 +29,13 @@ smoothType//1, % +SmoothType:atom %splineType//1, %startType//1, + string//1, % ?Content:atom style//2 % +Context:oneof([cluster,edge,node]) % +Style:atom %viewPort//1 ] ). :- reexport( - library(dcg/basics), - [ - string//1 % +String:atom - ] -). -:- reexport( plGraphViz(gv_color), [ color//1, % +Color:compound @@ -383,6 +378,13 @@ smoothType(triangle). % @tbd startType +%! string(?Content:atom)// . +% A GraphViz string. + +string(Content) -- + atom(Content). + + %! style(?Context:oneof([cluster,edge,node]), ?Style:atom) is nondet. style(Context, Style) -- diff --git a/gv_attrs.pl b/gv_attrs.pl index fa499d0..dd0145a 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -68,7 +68,7 @@ gv_attr(Context, N=V1, N=V2):- ; Dcg =.. [Type,V1] ), - dcg_phrase(Dcg, V2), + once(dcg_phrase(Dcg, V2)), check_minimum(V1, Minimum). check_minimum(_, ''):- !. diff --git a/gv_color.pl b/gv_color.pl index 70e0495..19d6e05 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -23,6 +23,7 @@ :- use_module(dcg(dcg_abnf)). :- use_module(dcg(dcg_cardinal)). +:- use_module(dcg(dcg_content)). :- use_module(generics(db_ext)). :- use_module(os(file_ext)). :- use_module(sparql(sparql_char)). @@ -46,14 +47,17 @@ % 2. `rgba(Red:nonneg,Green:nonneg,Blue:nonneg,Alpha:nonneg)` % 3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))` -color(rgb(Red,Green,Blue)) -- +color(rgb(Red,Green,Blue)) -- !, `#`, '#'(3, hex_color, [Red,Green,Blue]). -color(rgbs(Red,Green,Blue,Alpha)) -- +color(rgbs(Red,Green,Blue,Alpha)) -- !, `#`, '#'(4, hex_color, [Red,Green,Blue,Alpha]). -color(hsv(Hue,Saturation,Value)) -- +color(hsv(Hue,Saturation,Value)) -- !, '#'(3, hsv_color, [Hue,Saturation,Value]). +color(Name) -- + {gv_color(_, Name)}, + atom(Name). hex_color(I) -- {W1 is I / 16}, diff --git a/gv_file.pl b/gv_file.pl index 827f680..fe63e28 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -1,16 +1,13 @@ :- module( gv_file, [ - graph_to_gv_file/3, % +Options:list(nvpair) + gif_to_gv_file/3, % +Options:list(nvpair) % +GraphInterchangeFormat:compound % ?ToFile:atom graph_to_svg_dom/3, % +Options:list(nvpair) % +GraphInterchangeFormat:compound % -SvgDom:list(compound) - open_dot/1, % +File:file - tree_to_gv_file/3 % +Options:list(nvpair) - % +Tree:compound - % ?ToFile:atom + open_dot/1 % +File:file ] ). @@ -81,7 +78,7 @@ user:prolog_file_type(xdot, xdot). -%! graph_to_gv_file( +%! gif_to_gv_file( %! +Options:list(nvpair), %! +GIF:compound, %! -ToFile:atom @@ -99,7 +96,7 @@ user:prolog_file_type(xdot, xdot). % @arg GIF A compound term representing a graph. % @arg ToFile The atomic name of a file. -graph_to_gv_file(O1, GIF, ToFile):- +gif_to_gv_file(O1, GIF, ToFile):- once(phrase(gv_graph(GIF), Codes)), to_gv_file(O1, Codes, ToFile). @@ -117,7 +114,7 @@ graph_to_gv_file(O1, GIF, ToFile):- graph_to_svg_dom(O1, GIF, SvgDom):- % Make sure the file type of the output file is SvgDom. merge_options([to_file_type=svg], O1, O2), - graph_to_gv_file(O2, GIF, ToFile), + gif_to_gv_file(O2, GIF, ToFile), file_to_svg(ToFile, SvgDom), safe_delete_file(ToFile). @@ -133,33 +130,6 @@ open_dot(File):- run_program(Program, [File]). -%! tree_to_gv_file(+Options:list(nvpair), +Tree:compound, ?ToFile:atom) is det. -% Stores the given tree term into a GraphViz file. -% -% The following options are supported: -% * =|method(+Method:oneof([dot,sfdp])|= -% The algorithm used by GraphViz for positioning the tree nodes. -% Either =dot= (default) or =sfdp=. -% * =|to_file_type(+FileType:oneof([jpeg,pdf,svg,xdot])|= -% The file type of the generated GraphViz file. -% -% @arg Options A list of name-value pairs. -% @arg Tree A compound term representing a tree. -% @arg ToFile The atomic name of the generated file. - -tree_to_gv_file(O1, Tree, ToFile):- - once(phrase(gv_tree(O1, Tree), Codes)), - to_gv_file(O1, Codes, ToFile). - -gv_tree(O1, T) -- - { - tree_to_ugraph(T, UG), - merge_options([edge_labels(false)], O1, O2), - export_ugraph(O2, UG, G_Term) - }, - gv_graph(G_Term). - - % SUPPORT PREDICATES % diff --git a/gv_gif.pl b/gv_gif.pl new file mode 100644 index 0000000..becf7e2 --- /dev/null +++ b/gv_gif.pl @@ -0,0 +1,109 @@ +:- module( + gv_gif, + [ + create_gif/3, % +Edges:ordset + % -Gif:compound + % +Options:list(nvpair) + create_gif/4 % +Vertices:ordset + % +Edges:ordset + % -Gif:compound + % +Options:list(nvpair) + ] +). + +/**  GraphViz Graph Interchange Format (GIF) + +Support for creating GIF representations. + +@author Wouter Beek +@version 2014/06 +*/ + +:- use_module(library(apply)). +:- use_module(library(ordsets)). + +:- use_module(generics(list_ext)). + +:- use_module(plRdf(rdf_name)). % Meta-DCG. + + + +%! create_gif(+Edges:ordset, -Gif:compound, +Options:list(nvpair)) is det. + +create_gif(Es, Gif, Options):- + edges_to_vertices(Es, Vs), + create_gif(Vs, Es, Gif, Options). + +%! create_gif( +%! +Vertices:ordset, +%! +Edges:ordset, +%! -Gif:compound, +%! +Options:list(nvpair) +%! ) is det. + +create_gif(Vs, Es, graph(V_Terms,E_Terms,G_Attrs), Options):- + maplist(vertex_term0(Vs, Options), Vs, V_Terms), + maplist(edge_term0(Vs, Options), Es, E_Terms), + G_Attrs = [directed=true]. + +edge_term0(Vs, Options, E, E_Term):- + edge_term(Vs, E, E_Term, Options). + +vertex_term0(Vs, Options, V, V_Term):- + vertex_term(Vs, V, V_Term, Options). + + +%! edge_term( +%! +Vertices:ordset, +%! +Edge:pair, +%! -EdgeTerm:compound, +%! +Options:list(nvpair) +%! ) is det. + +edge_term(Vs, E, edge(FromId,ToId,E_Attrs), _):- + edge_components(E, FromV, _, ToV), + nth0chk(FromId, Vs, FromV), + nth0chk(ToId, Vs, ToV), + E_Attrs = []. + + +%! vertex_term( +%! +Vertices:ordset, +%! +Vertex, +%! -VertexTerm:compound, +%! +Options:list(nvpair) +%! ) is det. + +vertex_term(Vs, V, vertex(Id,V,V_Attrs), Options):- + nth0chk(Id, Vs, V), + + % Label. + option(vertex_label(VertexLabel), Options, =), + call(VertexLabel, V, V_Label), + + V_Attrs = [label=V_Label]. + +vertex_label(V, V_Label):- + dcg_with_output_to(atom(V_Label), rdf_term_name([literal_ellipsis(50)], V)). + + + +% Helpers + +%! edge_components(+Edge:compound, -FromVertex, -EdgeType, -ToVertex) is det. +%! edge_components(-Edge:compound, +FromVertex, ?EdgeType, +ToVertex) is det. + +edge_components(FromV-EdgeType-ToV, FromV, EdgeType, ToV):- + nonvar(EdgeType). +edge_components(FromV-ToV, FromV, EdgeType, ToV):- + var(EdgeType). + + +%! edges_to_vertices(+Edges:ordset, -Vertices:ordset) is det. + +edges_to_vertices([], []):- !. +edges_to_vertices([S-_-O|T], S3):- + edges_to_vertices(T, S1), + ord_add_element(S1, S, S2), + ord_add_element(S2, O, S3). + diff --git a/gv_tree.pl b/gv_tree.pl new file mode 100644 index 0000000..4412a90 --- /dev/null +++ b/gv_tree.pl @@ -0,0 +1,39 @@ +:- module( + gv_tree, + [ + tree_to_gv_file/3 % +Options:list(nvpair) + % +Tree:compound + % ?ToFile:atom + ] +). + +/**  GraphViz tree + +Export trees to GraphViz. + +@author Wouter Beek +@version 2014/06 +*/ + +:- use_module(library(aggregate)). + +:- use_module(generics(trees)). + +:- use_module(plGraphViz(gv_file)). +:- use_module(plGraphViz(gv_gif)). + + +%! tree_to_gv_file(+Options:list(nvpair), +Tree:compound, ?ToFile:atom) is det. +% Stores the given tree term into a GraphViz file. +% +% Options are passed on to create_gif/3 and gif_to_gv_file/3. + +tree_to_gv_file(Options, Tree, ToFile):- + tree_to_gif(Tree, Gif, Options), + gif_to_gv_file(Options, Gif, ToFile). + + +tree_to_gif(H-T, Gif, Options):- + tree_to_vertices_edges(Tree, Vs, Es), + create_gif(Vs, Es, Gif, Options). + ``` 10: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 5520d75 å’Œå˜åŠ¨å 8656a39  [back to content](#compare) ``` diff diff --git a/gv_attr_type.pl b/gv_attr_type.pl index f9a0e7f..7a64c82 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -191,7 +191,7 @@ doubleList1(Float) -- double(Float). -%! escString(+String:atom)// , +%! escString(+String:atom)// . % @tbd Support for context-dependent replacements. escString(String) -- ``` 11: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 8656a39 å’Œå˜åŠ¨å 7421981  [back to content](#compare) ``` diff diff --git a/gv_file.pl b/gv_file.pl index fe63e28..c780692 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -1,12 +1,12 @@ :- module( gv_file, [ - gif_to_gv_file/3, % +Options:list(nvpair) - % +GraphInterchangeFormat:compound - % ?ToFile:atom - graph_to_svg_dom/3, % +Options:list(nvpair) - % +GraphInterchangeFormat:compound + gif_to_gv_file/3, % +GraphInterchangeFormat:compound + % ?ToFile:atom + % +Options:list(nvpair) + graph_to_svg_dom/3, % +GraphInterchangeFormat:compound % -SvgDom:list(compound) + % +Options:list(nvpair) open_dot/1 % +File:file ] ). @@ -20,11 +20,12 @@ Also converts between GraphViz DOT formatted files and GraphViz output files or SVG DOM structures. @author Wouter Beek -@version 2011-2013/09, 2013/11-2014/01, 2014/05 +@version 2011-2013/09, 2013/11-2014/01, 2014/05, 2014/07 */ :- use_module(library(option)). :- use_module(library(process)). +:- use_module(library(predicate_options)). % Declarations. :- use_module(generics(codes_ext)). :- use_module(generics(db_ext)). @@ -48,73 +49,76 @@ and GraphViz output files or SVG DOM structures. :- multifile(user:prolog_file_type/2). % Register DOT. -user:prolog_file_type(dot, dot). -user:prolog_file_type(dot, graphviz). -user:file_type_program(dot, dotty). -user:file_type_program(dot, dotx). -user:module_uses(gv_file, file_type(dot)). +:- db_add_novel(user:prolog_file_type(dot, dot)). +:- db_add_novel(user:prolog_file_type(dot, graphviz)). +:- db_add_novel(user:file_type_program(dot, dotty)). +:- db_add_novel(user:file_type_program(dot, dotx)). +:- db_add_novel(user:module_uses(gv_file, file_type(dot))). % Register JPG/JPEG. -user:prolog_file_type(jpeg, jpeg). -user:prolog_file_type(jpeg, graphviz_output). -user:prolog_file_type(jpg, jpeg). -user:prolog_file_type(jpg, graphviz_output). +:- db_add_novel(user:prolog_file_type(jpeg, jpeg)). +:- db_add_novel(user:prolog_file_type(jpeg, graphviz_output)). +:- db_add_novel(user:prolog_file_type(jpg, jpeg)). +:- db_add_novel(user:prolog_file_type(jpg, graphviz_output)). % Register PDF. -user:prolog_file_type(pdf, pdf). -user:prolog_file_type(pdf, graphviz_output). +:- db_add_novel(user:prolog_file_type(pdf, pdf)). +:- db_add_novel(user:prolog_file_type(pdf, graphviz_output)). % Register PNG. -user:prolog_file_type(png, png). -user:prolog_file_type(png, graphviz_output). +:- db_add_novel(user:prolog_file_type(png, png)). +:- db_add_novel(user:prolog_file_type(png, graphviz_output)). % Register SVG. -user:prolog_file_type(svg, graphviz_output). -user:prolog_file_type(svg, svg). +:- db_add_novel(user:prolog_file_type(svg, graphviz_output)). +:- db_add_novel(user:prolog_file_type(svg, svg)). % Register XDOT. -user:prolog_file_type(xdot, graphviz_output). -user:prolog_file_type(xdot, xdot). - - - -%! gif_to_gv_file( -%! +Options:list(nvpair), -%! +GIF:compound, -%! -ToFile:atom -%! ) is det. +:- db_add_novel(user:prolog_file_type(xdot, graphviz_output)). +:- db_add_novel(user:prolog_file_type(xdot, xdot)). + +:- predicate_options(graph_to_svg_dom/3, 3, [ + pass_to(gif_to_gv_file/3, 3) + ]). +:- predicate_options(gif_to_gv_file/3, 3, [ + pass_to(to_gv_file/3, 3) + ]). +:- predicate_options(to_gv_file/3, 3, [ + pass_to(convert_gv/3, 3) + ]). +:- predicate_options(convert_gv/3, 3, [ + method(+oneof([dot,sfdp])), + to_file_type(+oneof([dot,jpeg,pdf,svg,xdot])) + ]). + + + +%! gif_to_gv_file(+Gif:compound, -ToFile:atom, +Options:list(nvpair)) is det. % Returns a file containing a GraphViz visualization of the given graph. % % The following options are supported: % * =|method(+Method:oneof([dot,sfdp])|= % The algorithm used by GraphViz for positioning the tree nodes. % Either =dot= (default) or =sfdp=. -% * =|to_file_type(+FileType:oneof([jpeg,pdf,svg,xdot])|= +% * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|= % The file type of the generated GraphViz file. -% -% @arg Options A list of name-value pairs. -% @arg GIF A compound term representing a graph. -% @arg ToFile The atomic name of a file. +% Default: `pdf`. -gif_to_gv_file(O1, GIF, ToFile):- - once(phrase(gv_graph(GIF), Codes)), - to_gv_file(O1, Codes, ToFile). +gif_to_gv_file(Gif, ToFile, Options):- + once(phrase(gv_graph(Gif), Codes)), + to_gv_file(Codes, ToFile, Options). %! graph_to_svg_dom( -%! +Options:list(nvpair), %! +GraphInterchangeFormat:compound, -%! -SvgDom:list(compound) +%! -SvgDom:list(compound), +%! +Options:list(nvpair) %! ) is det. -% The following options are supported: -% * =|method(+Method:oneof([dot,sfdp])|= -% The algorithm used by GraphViz for positioning the tree nodes. -% Either =dot= (default) or =sfdp=. -graph_to_svg_dom(O1, GIF, SvgDom):- +graph_to_svg_dom(Gif, SvgDom, Options1):- % Make sure the file type of the output file is SvgDom. - merge_options([to_file_type=svg], O1, O2), - gif_to_gv_file(O2, GIF, ToFile), + merge_options([to_file_type=svg], Options1, Options2), + gif_to_gv_file(Gif, ToFile, Options2), file_to_svg(ToFile, SvgDom), safe_delete_file(ToFile). @@ -133,31 +137,23 @@ open_dot(File):- % SUPPORT PREDICATES % -%! convert_gv(+Options:list(nvpair), +FromFile:atom, ?ToFile:atom) is det. +%! convert_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det. % Converts a GraphViz DOT file to an image file, using a specific % visualization method. -% -% The following options are supported: -% * =|method(+Method:oneof([dot,sfdp])|= -% The algorithm used by GraphViz for positioning the tree nodes. -% Either =dot= (default) or =sfdp=. -% * =|to_file_type(+FileType:oneof([jpeg,pdf,svg,xdot])|= -% The file type of the generated GraphViz file. -% -% @arg Options -% @arg FromFile -% @arg ToFile -convert_gv(O1, FromFile, ToFile):- +convert_gv(FromFile, ToFile, Options):- + option(to_file_type(dot), Options), !, + rename_file(FromFile, ToFile). +convert_gv(FromFile, ToFile, Options):- % The input file must be readable. access_file(FromFile, read), % The method option. - option(method(Method), O1, dot), + option(method(Method), Options, dot), must_be(oneof([dot,sfdp]), Method), % The file type option. - option(to_file_type(ToFileType), O1, pdf), + option(to_file_type(ToFileType), Options, pdf), prolog_file_type(ToExtension, ToFileType), prolog_file_type(ToExtension, graphviz_output), !, @@ -189,15 +185,10 @@ convert_gv(O1, FromFile, ToFile):- process_wait(PID, exit(ShellStatus)), exit_code_handler('GraphViz', ShellStatus). -%! to_gv_file(+Options:list(nvpair), +Codes:list(code), ?ToFile:atom) is det. -% The following options are supported: -% * =|method(+Method:oneof([dot,sfdp])|= -% The algorithm used by GraphViz for positioning the tree nodes. -% Either =dot= (default) or =sfdp=. -% * =|to_file_type(+FileType:oneof([jpeg,pdf,svg,xdot])|= -% The file type of the generated GraphViz file. -to_gv_file(O1, Codes, ToFile):- +%! to_gv_file(+Codes:list(code), ?ToFile:atom, +Options:list(nvpair)) is det. + +to_gv_file(Codes, ToFile, Options):- absolute_file_name( data(tmp), FromFile, @@ -208,13 +199,13 @@ to_gv_file(O1, Codes, ToFile):- put_codes(Out, Codes), close(Out) ), - convert_gv(O1, FromFile, ToFile), + convert_gv(FromFile, ToFile, Options), - % DEB: Store DOT file. - ignore(( - file_type_alternative(ToFile, graphviz, DOT_File), - safe_copy_file(FromFile, DOT_File) - )), + %%%%% DEB: Store DOT file. + %%%%ignore(( + %%%% file_type_alternative(ToFile, graphviz, DOT_File), + %%%% safe_copy_file(FromFile, DOT_File) + %%%%)), safe_delete_file(FromFile). diff --git a/gv_tree.pl b/gv_tree.pl index 4412a90..afeb8f6 100644 --- a/gv_tree.pl +++ b/gv_tree.pl @@ -1,9 +1,9 @@ :- module( gv_tree, [ - tree_to_gv_file/3 % +Options:list(nvpair) - % +Tree:compound + tree_to_gv_file/3 % +Tree:compound % ?ToFile:atom + % +Options:list(nvpair) ] ). @@ -12,7 +12,7 @@ Export trees to GraphViz. @author Wouter Beek -@version 2014/06 +@version 2014/06-2014/07 */ :- use_module(library(aggregate)). @@ -23,14 +23,18 @@ Export trees to GraphViz. :- use_module(plGraphViz(gv_gif)). -%! tree_to_gv_file(+Options:list(nvpair), +Tree:compound, ?ToFile:atom) is det. +%! tree_to_gv_file( +%! +Tree:compound, +%! ?ToFile:atom, +%! +Options:list(nvpair) +%! ) is det. % Stores the given tree term into a GraphViz file. % % Options are passed on to create_gif/3 and gif_to_gv_file/3. -tree_to_gv_file(Options, Tree, ToFile):- +tree_to_gv_file(Tree, ToFile, Options):- tree_to_gif(Tree, Gif, Options), - gif_to_gv_file(Options, Gif, ToFile). + gif_to_gv_file(Gif, ToFile, Options). tree_to_gif(H-T, Gif, Options):- ``` 12: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7421981 å’Œå˜åŠ¨å bfcb63b  [back to content](#compare) ``` diff diff --git a/gv_file.pl b/gv_file.pl index c780692..9cb1f95 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -4,9 +4,9 @@ gif_to_gv_file/3, % +GraphInterchangeFormat:compound % ?ToFile:atom % +Options:list(nvpair) - graph_to_svg_dom/3, % +GraphInterchangeFormat:compound - % -SvgDom:list(compound) - % +Options:list(nvpair) + gif_to_svg_dom/3, % +GraphInterchangeFormat:compound + % -SvgDom:list(compound) + % +Options:list(nvpair) open_dot/1 % +File:file ] ). @@ -77,7 +77,7 @@ and GraphViz output files or SVG DOM structures. :- db_add_novel(user:prolog_file_type(xdot, graphviz_output)). :- db_add_novel(user:prolog_file_type(xdot, xdot)). -:- predicate_options(graph_to_svg_dom/3, 3, [ +:- predicate_options(gif_to_svg_dom/3, 3, [ pass_to(gif_to_gv_file/3, 3) ]). :- predicate_options(gif_to_gv_file/3, 3, [ @@ -109,13 +109,13 @@ gif_to_gv_file(Gif, ToFile, Options):- to_gv_file(Codes, ToFile, Options). -%! graph_to_svg_dom( +%! gif_to_svg_dom( %! +GraphInterchangeFormat:compound, %! -SvgDom:list(compound), %! +Options:list(nvpair) %! ) is det. -graph_to_svg_dom(Gif, SvgDom, Options1):- +gif_to_svg_dom(Gif, SvgDom, Options1):- % Make sure the file type of the output file is SvgDom. merge_options([to_file_type=svg], Options1, Options2), gif_to_gv_file(Gif, ToFile, Options2), ``` 13: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ bfcb63b å’Œå˜åŠ¨å 84afd69  [back to content](#compare) ``` diff diff --git a/gv_file.pl b/gv_file.pl index 9cb1f95..98cb0a2 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -1,8 +1,13 @@ :- module( gv_file, [ + file_to_gv/2, % +File:atom + % +Options:list(nvpair) + file_to_gv/3, % +FromFile:atom + % ?ToFile:atom + % +Options:list(nvpair) gif_to_gv_file/3, % +GraphInterchangeFormat:compound - % ?ToFile:atom + % +ToFile:atom % +Options:list(nvpair) gif_to_svg_dom/3, % +GraphInterchangeFormat:compound % -SvgDom:list(compound) @@ -23,6 +28,7 @@ and GraphViz output files or SVG DOM structures. @version 2011-2013/09, 2013/11-2014/01, 2014/05, 2014/07 */ +:- use_module(library(memfile)). :- use_module(library(option)). :- use_module(library(process)). :- use_module(library(predicate_options)). % Declarations. @@ -77,74 +83,60 @@ and GraphViz output files or SVG DOM structures. :- db_add_novel(user:prolog_file_type(xdot, graphviz_output)). :- db_add_novel(user:prolog_file_type(xdot, xdot)). -:- predicate_options(gif_to_svg_dom/3, 3, [ - pass_to(gif_to_gv_file/3, 3) - ]). -:- predicate_options(gif_to_gv_file/3, 3, [ - pass_to(to_gv_file/3, 3) +:- predicate_options(codes_to_gv_file/3, 3, [ + pass_to(file_to_gv/3, 3) ]). -:- predicate_options(to_gv_file/3, 3, [ - pass_to(convert_gv/3, 3) +:- predicate_options(file_to_gv/2, 2, [ + pass_to(file_to_gv/3, 3) ]). -:- predicate_options(convert_gv/3, 3, [ +:- predicate_options(file_to_gv/3, 3, [ method(+oneof([dot,sfdp])), to_file_type(+oneof([dot,jpeg,pdf,svg,xdot])) ]). +:- predicate_options(gif_to_svg_dom/3, 3, [ + pass_to(gif_to_gv_file/3, 3) + ]). +:- predicate_options(gif_to_gv_file/3, 3, [ + pass_to(codes_to_gv_file/3, 3) + ]). -%! gif_to_gv_file(+Gif:compound, -ToFile:atom, +Options:list(nvpair)) is det. -% Returns a file containing a GraphViz visualization of the given graph. -% -% The following options are supported: -% * =|method(+Method:oneof([dot,sfdp])|= -% The algorithm used by GraphViz for positioning the tree nodes. -% Either =dot= (default) or =sfdp=. -% * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|= -% The file type of the generated GraphViz file. -% Default: `pdf`. - -gif_to_gv_file(Gif, ToFile, Options):- - once(phrase(gv_graph(Gif), Codes)), - to_gv_file(Codes, ToFile, Options). - - -%! gif_to_svg_dom( -%! +GraphInterchangeFormat:compound, -%! -SvgDom:list(compound), +%! codes_to_gv_file( +%! +Codes:list(code), +%! +ToFile:atom, %! +Options:list(nvpair) %! ) is det. -gif_to_svg_dom(Gif, SvgDom, Options1):- - % Make sure the file type of the output file is SvgDom. - merge_options([to_file_type=svg], Options1, Options2), - gif_to_gv_file(Gif, ToFile, Options2), - file_to_svg(ToFile, SvgDom), - safe_delete_file(ToFile). - - -%! open_dot(+File:atom) is det. -% Opens the given DOT file. -% -% @tbd Test support on Windows. -% @tbd Test support on OS-X. - -open_dot(File):- - once(find_program_by_file_type(dot, Program)), - run_program(Program, [File]). +codes_to_gv_file(Codes, ToFile, Options):- + access_file(ToFile, write), + setup_call_cleanup( + new_memory_file(MemFile), + ( + setup_call_cleanup( + open(MemFile, write, Write, [encoding(utf8),type(test)]), + put_codes(Write, Codes), + close(Write) + ), + file_to_gv(MemFile, ToFile, Options) + ), + free_memory_file(MemFile) + ). +%! file_to_gv(+FromFile:atom, +Options:list(nvpair)) is det. -% SUPPORT PREDICATES % +file_to_gv(FromFile, Options):- + file_to_gv(FromFile, _, Options). -%! convert_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det. +%! file_to_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det. % Converts a GraphViz DOT file to an image file, using a specific % visualization method. -convert_gv(FromFile, ToFile, Options):- +file_to_gv(FromFile, ToFile, Options):- option(to_file_type(dot), Options), !, rename_file(FromFile, ToFile). -convert_gv(FromFile, ToFile, Options):- +file_to_gv(FromFile, ToFile, Options):- % The input file must be readable. access_file(FromFile, read), @@ -186,26 +178,43 @@ convert_gv(FromFile, ToFile, Options):- exit_code_handler('GraphViz', ShellStatus). -%! to_gv_file(+Codes:list(code), ?ToFile:atom, +Options:list(nvpair)) is det. +%! gif_to_gv_file(+Gif:compound, +ToFile:atom, +Options:list(nvpair)) is det. +% Returns a file containing a GraphViz visualization of the given graph. +% +% The following options are supported: +% * =|method(+Method:oneof([dot,sfdp])|= +% The algorithm used by GraphViz for positioning the tree nodes. +% Either =dot= (default) or =sfdp=. +% * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|= +% The file type of the generated GraphViz file. +% Default: `pdf`. + +gif_to_gv_file(Gif, ToFile, Options):- + once(phrase(gv_graph(Gif), Codes)), + codes_to_gv_file(Codes, ToFile, Options). + + +%! gif_to_svg_dom( +%! +GraphInterchangeFormat:compound, +%! -SvgDom:list(compound), +%! +Options:list(nvpair) +%! ) is det. + +gif_to_svg_dom(Gif, SvgDom, Options1):- + % Make sure the file type of the output file is SvgDom. + merge_options([to_file_type=svg], Options1, Options2), + gif_to_gv_file(Gif, ToFile, Options2), + file_to_svg(ToFile, SvgDom), + safe_delete_file(ToFile). -to_gv_file(Codes, ToFile, Options):- - absolute_file_name( - data(tmp), - FromFile, - [access(write),file_type(graphviz)] - ), - setup_call_cleanup( - open(FromFile, write, Out, [encoding(utf8),type(test)]), - put_codes(Out, Codes), - close(Out) - ), - convert_gv(FromFile, ToFile, Options), - %%%%% DEB: Store DOT file. - %%%%ignore(( - %%%% file_type_alternative(ToFile, graphviz, DOT_File), - %%%% safe_copy_file(FromFile, DOT_File) - %%%%)), +%! open_dot(+File:atom) is det. +% Opens the given DOT file. +% +% @tbd Test support on Windows. +% @tbd Test support on OS-X. - safe_delete_file(FromFile). +open_dot(File):- + once(find_program_by_file_type(dot, Program)), + run_program(Program, [File]). ``` 14: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 84afd69 å’Œå˜åŠ¨å c2bfd3f  [back to content](#compare) ``` diff diff --git a/gv_gif.pl b/gv_gif.pl index becf7e2..908b9bc 100644 --- a/gv_gif.pl +++ b/gv_gif.pl @@ -16,16 +16,35 @@ Support for creating GIF representations. @author Wouter Beek -@version 2014/06 +@version 2014/06-2014/07 */ :- use_module(library(apply)). +:- use_module(library(lambda)). +:- use_module(library(option)). :- use_module(library(ordsets)). +:- use_module(library(predicate_options)). % Declarations. :- use_module(generics(list_ext)). +:- use_module(generics(option_ext)). +:- use_module(graph_theory(graph_generic)). :- use_module(plRdf(rdf_name)). % Meta-DCG. +:- predicate_options(create_gif/3, 3, [ + pass_to(create_gif/4, 4) + ]). +:- predicate_options(create_gif/4, 4, [ + pass_to(vertex_term/3, 3), + pass_to(edge_term/3, 3), + graph_label(+atom) + ]). +:- predicate_options(edge_term/3, 3, [ + ]). +:- predicate_options(vertex_term/3, 3, [ + vertex_label(+atom) + ]). + %! create_gif(+Edges:ordset, -Gif:compound, +Options:list(nvpair)) is det. @@ -40,17 +59,28 @@ create_gif(Es, Gif, Options):- %! -Gif:compound, %! +Options:list(nvpair) %! ) is det. - -create_gif(Vs, Es, graph(V_Terms,E_Terms,G_Attrs), Options):- - maplist(vertex_term0(Vs, Options), Vs, V_Terms), - maplist(edge_term0(Vs, Options), Es, E_Terms), - G_Attrs = [directed=true]. - -edge_term0(Vs, Options, E, E_Term):- - edge_term(Vs, E, E_Term, Options). - -vertex_term0(Vs, Options, V, V_Term):- - vertex_term(Vs, V, V_Term, Options). +% The following options are supported: +% * =|graph_label(+LabelFunction)|= +% The functions that assigns names to graphs. +% No default. + +create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):- + % Vertex terms. + maplist(\\V^VTerm^vertex_term(Vs, V, VTerm, Options), Vs, VTerms), + + % Edge terms. + maplist(\\E^ETerm^edge_term(Vs, E, ETerm, Options), Es, ETerms), + + % Graph attributes. + ( + option(graph_label(LabelFunction), Options) + - + call(LabelFunction, Graph, GraphLabel) + ; + true + ), + + merge_options([directed=true,label=GraphLabel], GAttrs). %! edge_term( @@ -60,11 +90,13 @@ vertex_term0(Vs, Options, V, V_Term):- %! +Options:list(nvpair) %! ) is det. -edge_term(Vs, E, edge(FromId,ToId,E_Attrs), _):- - edge_components(E, FromV, _, ToV), +edge_term(Vs, E, edge(FromId,ToId,EAttrs), _):- + edge_components(E, FromV, ToV), + nth0chk(FromId, Vs, FromV), nth0chk(ToId, Vs, ToV), - E_Attrs = []. + + EAttrs = []. %! vertex_term( @@ -73,37 +105,16 @@ edge_term(Vs, E, edge(FromId,ToId,E_Attrs), _):- %! -VertexTerm:compound, %! +Options:list(nvpair) %! ) is det. +% The following options are supported: +% * =|vertex_label(+LabelFunction)|= +% A function that assigns labels to vertices. -vertex_term(Vs, V, vertex(Id,V,V_Attrs), Options):- +vertex_term(Vs, V, vertex(Id,V,VAttrs), Options):- nth0chk(Id, Vs, V), % Label. - option(vertex_label(VertexLabel), Options, =), - call(VertexLabel, V, V_Label), + option(vertex_label(LabelFunction), Options, =), + call(LabelFunction, V, VLabel), - V_Attrs = [label=V_Label]. - -vertex_label(V, V_Label):- - dcg_with_output_to(atom(V_Label), rdf_term_name([literal_ellipsis(50)], V)). - - - -% Helpers - -%! edge_components(+Edge:compound, -FromVertex, -EdgeType, -ToVertex) is det. -%! edge_components(-Edge:compound, +FromVertex, ?EdgeType, +ToVertex) is det. - -edge_components(FromV-EdgeType-ToV, FromV, EdgeType, ToV):- - nonvar(EdgeType). -edge_components(FromV-ToV, FromV, EdgeType, ToV):- - var(EdgeType). - - -%! edges_to_vertices(+Edges:ordset, -Vertices:ordset) is det. - -edges_to_vertices([], []):- !. -edges_to_vertices([S-_-O|T], S3):- - edges_to_vertices(T, S1), - ord_add_element(S1, S, S2), - ord_add_element(S2, O, S3). + VAttrs = [label=VLabel]. ``` 15: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c2bfd3f å’Œå˜åŠ¨å fa364fc  [back to content](#compare) ``` diff diff --git a/gv_dot.pl b/gv_dot.pl index 9888973..68443ba 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -76,13 +76,13 @@ gv_compass_pt(sw) -- `sw`. gv_compass_pt(w) -- `w`. -%! gv_edge_operator(+Directed:boolean)// . +%! gv_edge_operator(+Directedness:boolean)// . % The binary edge operator between two vertices. % The operator that is used depends on whether the graph is directed or % undirected. % -% @arg Directed Whether an edge is directed (operator `-`) or -% undirected (operator `--`). +% @arg Directedness Whether an edge is directed (operator `-`) or +% undirected (operator `--`). gv_edge_operator(false) -- !, `--`. gv_edge_operator(true) -- arrow(right, 2). @@ -90,14 +90,14 @@ gv_edge_operator(true) -- arrow(right, 2). %! gv_edge_statement( %! +Indent:nonneg, -%! +Directed:boolean, +%! +Directedness:boolean, %! +GraphAttributes:list(nvpair), %! +EdgeTerm:compound %! )// is det. % A GraphViz statement describing an edge. % % @arg Indent The indentation level at which the edge statement is written. -% @arg Directed Whether the graph is directed or not. +% @arg Directedness Whether the graph is directed or not. % @arg GraphAttributes The attributes of the graph. Some of these attributes % may be used in the edge statement (e.g., the colorscheme). % @arg EdgeTerm A compound term in the GIFormat, representing an edge. @@ -106,11 +106,11 @@ gv_edge_operator(true) -- arrow(right, 2). % at the from and/or to location. % @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2. -gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- +gv_edge_statement(I, Directedness, GAttrs, edge(FromId,ToId,EAttrs)) -- indent(I), gv_node_id(FromId), ` `, - gv_edge_operator(Directed), ` `, + gv_edge_operator(Directedness), ` `, gv_node_id(ToId), ` `, @@ -148,11 +148,11 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- %! gv_graph(+GraphTerm:compound)// % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: -% 1. `directonality(+Directed:oneof([directed,undirected]))` -% A directed graph uses the keyword `digraph`. -% An undirected graph uses the keyword `graph`. -% 2. `name(+GraphName:atom)` -% 3. `strict(+StrictGraph:boolean)` +% * `directedness(+boolean)` +% Whether the graph is directed (`true`) or undirected (`false`). +% Default: `false`. +% * `name(+GraphName:atom)` +% * `strict(+StrictGraph:boolean)` % This forbids the creation of self-arcs and multi-edges; % they are ignored in the input file. % Only in combinattion with directionality `directed`. @@ -185,7 +185,7 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- shared_attributes(VTerms, SharedVAttrs, NewVTerms), shared_attributes(ETerms, SharedEAttrs, NewETerms), select_nvpair(strict=Strict, GAttrs1, GAttrs2, false), - select_nvpair(directed=Directed, GAttrs2, GAttrs3, true), + select_nvpair(directedness=Directedness, GAttrs2, GAttrs3, true), select_nvpair(name=GName, GAttrs3, GAttrs4, noname), add_default_nvpair(GAttrs4, overlap, false, GAttrs5), I = 0 @@ -195,24 +195,24 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- % States that this file represents a graph according to the GraphViz format. indent(I), gv_strict(Strict), - gv_graph_type(Directed), ` `, + gv_graph_type(Directedness), ` `, gv_id(GName), ` `, bracketed( curly, - gv_graph1( + gv_graph0( I, NewVTerms, SharedVAttrs, RankedVTerms, NewETerms, SharedEAttrs, - Directed, GAttrs5 + Directedness, GAttrs5 ) - ), + ), newline. -gv_graph1( +gv_graph0( I, NewVTerms, SharedVAttrs, RankedVTerms, NewETerms, SharedEAttrs, - Directed, GAttrs + Directedness, GAttrs ) -- newline, @@ -254,10 +254,10 @@ gv_graph1( }, % The rank edges. - '*'(gv_edge_statement(NewI, Directed, GAttrs), RankEdges), + '*'(gv_edge_statement(NewI, Directedness, GAttrs), RankEdges), % The non-rank edges. - '*'(gv_edge_statement(NewI, Directed, GAttrs), NewETerms), + '*'(gv_edge_statement(NewI, Directedness, GAttrs), NewETerms), % Note that we do not include a newline here. @@ -265,7 +265,7 @@ gv_graph1( indent(I). -%! gv_graph_type(+Directed:boolean)// . +%! gv_graph_type(+Directedness:boolean)// . % The type of graph that is represented. gv_graph_type(false) -- `graph`. diff --git a/gv_gif.pl b/gv_gif.pl index 908b9bc..4a3e75f 100644 --- a/gv_gif.pl +++ b/gv_gif.pl @@ -35,14 +35,25 @@ Support for creating GIF representations. pass_to(create_gif/4, 4) ]). :- predicate_options(create_gif/4, 4, [ - pass_to(vertex_term/3, 3), pass_to(edge_term/3, 3), - graph_label(+atom) + pass_to(graph_attributes/2, 2), + pass_to(vertex_term/3, 3) ]). :- predicate_options(edge_term/3, 3, [ ]). +:- predicate_options(graph_attributes/2, 2, [ + directedness(+boolean), + graph_colorscheme(+oneof([none,svg,x11]), + graph_label(+atom) + ]). + :- predicate_options(vertex_term/3, 3, [ - vertex_label(+atom) + vertex_color(+atom), + vertex_coordinates(+atom), + vertex_image(+atom), + vertex_label(+atom), + vertex_peripheries(+atom), + vertex_shape(+atom) ]). @@ -60,6 +71,8 @@ create_gif(Es, Gif, Options):- %! +Options:list(nvpair) %! ) is det. % The following options are supported: +% * =|graph_colorscheme(+oneof([none,svg,x11])) +% No default. % * =|graph_label(+LabelFunction)|= % The functions that assigns names to graphs. % No default. @@ -72,15 +85,7 @@ create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):- maplist(\\E^ETerm^edge_term(Vs, E, ETerm, Options), Es, ETerms), % Graph attributes. - ( - option(graph_label(LabelFunction), Options) - - - call(LabelFunction, Graph, GraphLabel) - ; - true - ), - - merge_options([directed=true,label=GraphLabel], GAttrs). + graph_attributes(GAttrs, Options). %! edge_term( @@ -89,14 +94,69 @@ create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):- %! -EdgeTerm:compound, %! +Options:list(nvpair) %! ) is det. +% The following options are supported: +% * =|edge_arrowhead(+atom)|= +% * =|edge_color(+atom)|= +% * =|edge_label(+atom)|= +% * =|edge_style(+atom)|= edge_term(Vs, E, edge(FromId,ToId,EAttrs), _):- edge_components(E, FromV, ToV), - nth0chk(FromId, Vs, FromV), nth0chk(ToId, Vs, ToV), - EAttrs = []. + % Arrowhead + if_option(edge_arrowhead(ArrowheadFunction), Options, + call(ArrowheadFunction, E, EArrowhead) + ), + + % Color. + if_option(edge_color(ColorFunction), Options, + call(ColorFunction, E, EColor) + ), + + % Label. + if_option(edge_label(LabelFunction), Options, + call(LabelFunction, E, ELabel) + ), + + % Style. + if_option(edge_style(StyleFunction), Options, + call(StyleFunction, E, EStyle) + ), + + EAttrs = [arrowHead=EArrowhead,color=EColor,label=ELabel,style=EStyle]. + + +%! graph_attributes( +%! -GraphAttributes:list(nvpair), +%! +Options:list(nvpair) +%! ) is det. +% The following options are supported: +% * =|directedness(+boolean)|= +% Whether the graph is directed (`true`) or undirected (`false`). +% Default: `false`. +% * =|graph_colorscheme(+oneof([none,svg,x11]))|= +% The colorscheme from which the color in this graph are taken. +% Default: `svg`. +% * =|graph_label(+atom)|= +% The graph label. +% No default. + +graph_attributes(GAttrs, Options):- + % Directedness. + option(directedness(Directedness), Options, false), + + % Colorscheme. + if_option(graph_colorscheme(Colorscheme), Options, true), + + % Label. + if_option(graph_label(GLabel), Options, true), + + merge_options( + [colorscheme=Colorscheme,directedness=Directedness,label=GLabel], + GAttrs + ). %! vertex_term( @@ -106,15 +166,66 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), _):- %! +Options:list(nvpair) %! ) is det. % The following options are supported: +% * =|vertex_color(+ColorFunction)|= +% A function that assigns colors to vertices. +% No default. +% * =|vertex_coordinate(+CoordinateFunction)|= +% A function that assigns coordinates to vertices. +% No default. +% * =|vertex_image(+ImageFunction)|= +% A function that assinges images to vertices. +% No default. % * =|vertex_label(+LabelFunction)|= % A function that assigns labels to vertices. +% No default. +% * =|vertex_peripheries(+PeripheriesFunction)|= +% A function that assinges peripheries to vertices. +% No default. +% * =|vertex_shape(+ShapeFunction)|= +% A function that assinges shapes to vertices. +% No default. vertex_term(Vs, V, vertex(Id,V,VAttrs), Options):- nth0chk(Id, Vs, V), + % Color. + if_option(vertex_color(ColorFunction), Options, + call(ColorFunction, V, VColor) + ), + + % Coordinates. + %%%%if_option(vertex_coordinate(CoordinateFunction), Options, + %%%% call(CoordinateFunction, V, VCoordinates) + %%%%), + + % Image. + if_option(image(ImageFunction), Options, + call(ImageFunction, V, VImage) + ), + % Label. - option(vertex_label(LabelFunction), Options, =), - call(LabelFunction, V, VLabel), + if_option(vertex_label(LabelFunction), Options, + call(LabelFunction, V, VLabel) + ), + + % Peripheries. + if_option(vertex_peripheries(PeripheriesFunction), Options, + call(PeripheriesFunction, V, VPeripheries) + ), + + % Shape. + if_option(vertex_shape(ShapeFunction), Options, + call(ShapeFunction, V, VShape) + ), - VAttrs = [label=VLabel]. + merge_options( + [ + color=VColor, + image=VImage, + label=VLabel, + peripheries=VPeripheries, + shape=VShape + ], + VAttrs + ). ``` 16: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ fa364fc å’Œå˜åŠ¨å 3c900f4  [back to content](#compare) ``` diff diff --git a/gv_gif.pl b/gv_gif.pl index 4a3e75f..ef2f7f2 100644 --- a/gv_gif.pl +++ b/gv_gif.pl @@ -43,7 +43,7 @@ Support for creating GIF representations. ]). :- predicate_options(graph_attributes/2, 2, [ directedness(+boolean), - graph_colorscheme(+oneof([none,svg,x11]), + graph_colorscheme(+oneof([none,svg,x11])), graph_label(+atom) ]). @@ -109,23 +109,23 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), _):- if_option(edge_arrowhead(ArrowheadFunction), Options, call(ArrowheadFunction, E, EArrowhead) ), - % Color. if_option(edge_color(ColorFunction), Options, call(ColorFunction, E, EColor) ), - % Label. if_option(edge_label(LabelFunction), Options, call(LabelFunction, E, ELabel) ), - % Style. if_option(edge_style(StyleFunction), Options, call(StyleFunction, E, EStyle) ), - EAttrs = [arrowHead=EArrowhead,color=EColor,label=ELabel,style=EStyle]. + merge_options( + [arrowHead=EArrowhead,color=EColor,label=ELabel,style=EStyle], + EAttrs + ). %! graph_attributes( @@ -146,10 +146,8 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), _):- graph_attributes(GAttrs, Options):- % Directedness. option(directedness(Directedness), Options, false), - % Colorscheme. if_option(graph_colorscheme(Colorscheme), Options, true), - % Label. if_option(graph_label(GLabel), Options, true), @@ -169,9 +167,6 @@ graph_attributes(GAttrs, Options):- % * =|vertex_color(+ColorFunction)|= % A function that assigns colors to vertices. % No default. -% * =|vertex_coordinate(+CoordinateFunction)|= -% A function that assigns coordinates to vertices. -% No default. % * =|vertex_image(+ImageFunction)|= % A function that assinges images to vertices. % No default. @@ -192,27 +187,18 @@ vertex_term(Vs, V, vertex(Id,V,VAttrs), Options):- if_option(vertex_color(ColorFunction), Options, call(ColorFunction, V, VColor) ), - - % Coordinates. - %%%%if_option(vertex_coordinate(CoordinateFunction), Options, - %%%% call(CoordinateFunction, V, VCoordinates) - %%%%), - % Image. if_option(image(ImageFunction), Options, call(ImageFunction, V, VImage) ), - % Label. if_option(vertex_label(LabelFunction), Options, call(LabelFunction, V, VLabel) ), - % Peripheries. if_option(vertex_peripheries(PeripheriesFunction), Options, call(PeripheriesFunction, V, VPeripheries) ), - % Shape. if_option(vertex_shape(ShapeFunction), Options, call(ShapeFunction, V, VShape) ``` 17: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 3c900f4 å’Œå˜åŠ¨å 65cc1c3  [back to content](#compare) ``` diff diff --git a/gv_gif.pl b/gv_gif.pl index ef2f7f2..6d78ac3 100644 --- a/gv_gif.pl +++ b/gv_gif.pl @@ -40,6 +40,10 @@ Support for creating GIF representations. pass_to(vertex_term/3, 3) ]). :- predicate_options(edge_term/3, 3, [ + edge_arrowhead(+atom), + edge_color(+atom), + edge_label(+atom), + edge_style(+atom) ]). :- predicate_options(graph_attributes/2, 2, [ directedness(+boolean), ``` 18: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 65cc1c3 å’Œå˜åŠ¨å 20e1f21  [back to content](#compare) ``` diff diff --git a/gv_file.pl b/gv_file.pl index 98cb0a2..25b0cd3 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -110,18 +110,14 @@ and GraphViz output files or SVG DOM structures. codes_to_gv_file(Codes, ToFile, Options):- access_file(ToFile, write), + absolute_file_name(data(tmp), TmpFile, [access(write),file_type(dot)]), setup_call_cleanup( - new_memory_file(MemFile), - ( - setup_call_cleanup( - open(MemFile, write, Write, [encoding(utf8),type(test)]), - put_codes(Write, Codes), - close(Write) - ), - file_to_gv(MemFile, ToFile, Options) - ), - free_memory_file(MemFile) - ). + open(TmpFile, write, Write, [encoding(utf8)]), + put_codes(Write, Codes), + close(Write) + ), + file_to_gv(TmpFile, ToFile, Options), + delete_file(TmpFile). %! file_to_gv(+FromFile:atom, +Options:list(nvpair)) is det. @@ -137,9 +133,6 @@ file_to_gv(FromFile, ToFile, Options):- option(to_file_type(dot), Options), !, rename_file(FromFile, ToFile). file_to_gv(FromFile, ToFile, Options):- - % The input file must be readable. - access_file(FromFile, read), - % The method option. option(method(Method), Options, dot), must_be(oneof([dot,sfdp]), Method), diff --git a/gv_gif.pl b/gv_gif.pl index 6d78ac3..e3a6933 100644 --- a/gv_gif.pl +++ b/gv_gif.pl @@ -84,10 +84,10 @@ create_gif(Es, Gif, Options):- create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):- % Vertex terms. maplist(\\V^VTerm^vertex_term(Vs, V, VTerm, Options), Vs, VTerms), - + % Edge terms. maplist(\\E^ETerm^edge_term(Vs, E, ETerm, Options), Es, ETerms), - + % Graph attributes. graph_attributes(GAttrs, Options). @@ -104,11 +104,11 @@ create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):- % * =|edge_label(+atom)|= % * =|edge_style(+atom)|= -edge_term(Vs, E, edge(FromId,ToId,EAttrs), _):- +edge_term(Vs, E, edge(FromId,ToId,EAttrs), Options):- edge_components(E, FromV, ToV), nth0chk(FromId, Vs, FromV), nth0chk(ToId, Vs, ToV), - + % Arrowhead if_option(edge_arrowhead(ArrowheadFunction), Options, call(ArrowheadFunction, E, EArrowhead) @@ -125,9 +125,9 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), _):- if_option(edge_style(StyleFunction), Options, call(StyleFunction, E, EStyle) ), - + merge_options( - [arrowHead=EArrowhead,color=EColor,label=ELabel,style=EStyle], + [arrowhead=EArrowhead,color=EColor,label=ELabel,style=EStyle], EAttrs ). @@ -154,7 +154,7 @@ graph_attributes(GAttrs, Options):- if_option(graph_colorscheme(Colorscheme), Options, true), % Label. if_option(graph_label(GLabel), Options, true), - + merge_options( [colorscheme=Colorscheme,directedness=Directedness,label=GLabel], GAttrs @@ -186,7 +186,7 @@ graph_attributes(GAttrs, Options):- vertex_term(Vs, V, vertex(Id,V,VAttrs), Options):- nth0chk(Id, Vs, V), - + % Color. if_option(vertex_color(ColorFunction), Options, call(ColorFunction, V, VColor) @@ -207,7 +207,7 @@ vertex_term(Vs, V, vertex(Id,V,VAttrs), Options):- if_option(vertex_shape(ShapeFunction), Options, call(ShapeFunction, V, VShape) ), - + merge_options( [ color=VColor, ``` 19: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 20e1f21 å’Œå˜åŠ¨å e2e9fc1  [back to content](#compare) ``` diff diff --git a/gv_file.pl b/gv_file.pl index 25b0cd3..2d2ed12 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -146,11 +146,8 @@ file_to_gv(FromFile, ToFile, Options):- ( var(ToFile) - - absolute_file_name( - data(export), - ToFile, - [access(write),file_type(ToFileType)] - ) + user:prolog_file_type(ToExtension, ToFileType), + file_alternative(FromFile, _, _, ToExtension, ToFile) ; is_absolute_file_name(ToFile), % The given output file must match a certain file extension. ``` 20: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ e2e9fc1 å’Œå˜åŠ¨å 4b72d15  [back to content](#compare) ``` diff diff --git a/gv_file.pl b/gv_file.pl index 2d2ed12..9eaf66b 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -28,20 +28,16 @@ and GraphViz output files or SVG DOM structures. @version 2011-2013/09, 2013/11-2014/01, 2014/05, 2014/07 */ -:- use_module(library(memfile)). :- use_module(library(option)). :- use_module(library(process)). :- use_module(library(predicate_options)). % Declarations. :- use_module(generics(codes_ext)). :- use_module(generics(db_ext)). -:- use_module(generics(error_ext)). -:- use_module(generics(trees)). :- use_module(os(file_ext)). :- use_module(os(run_ext)). :- use_module(os(safe_file)). :- use_module(svg(svg_file)). -:- use_module(ugraph(ugraph_export)). :- use_module(plGraphViz(gv_dot)). diff --git a/gv_gif.pl b/gv_gif.pl index e3a6933..48ecd2f 100644 --- a/gv_gif.pl +++ b/gv_gif.pl @@ -27,7 +27,7 @@ Support for creating GIF representations. :- use_module(generics(list_ext)). :- use_module(generics(option_ext)). -:- use_module(graph_theory(graph_generic)). +:- use_module(graph_theory(graph_theory)). :- use_module(plRdf(rdf_name)). % Meta-DCG. ``` 21: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 4b72d15 å’Œå˜åŠ¨å 54248f7  [back to content](#compare) ``` diff diff --git a/gv_gif.pl b/gv_gif.pl index 48ecd2f..2fad4c4 100644 --- a/gv_gif.pl +++ b/gv_gif.pl @@ -105,7 +105,7 @@ create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):- % * =|edge_style(+atom)|= edge_term(Vs, E, edge(FromId,ToId,EAttrs), Options):- - edge_components(E, FromV, ToV), + edge(E, FromV, ToV), nth0chk(FromId, Vs, FromV), nth0chk(ToId, Vs, ToV), ``` 22: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 54248f7 å’Œå˜åŠ¨å 3b9a773  [back to content](#compare) ``` diff diff --git a/gv_gif.pl b/gv_gif.pl index 2fad4c4..48ecd2f 100644 --- a/gv_gif.pl +++ b/gv_gif.pl @@ -105,7 +105,7 @@ create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):- % * =|edge_style(+atom)|= edge_term(Vs, E, edge(FromId,ToId,EAttrs), Options):- - edge(E, FromV, ToV), + edge_components(E, FromV, ToV), nth0chk(FromId, Vs, FromV), nth0chk(ToId, Vs, ToV), ``` 23: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 3b9a773 å’Œå˜åŠ¨å 1e9a910  [back to content](#compare) ``` diff diff --git a/gv_gif.pl b/gv_gif.pl index 48ecd2f..d59e5f8 100644 --- a/gv_gif.pl +++ b/gv_gif.pl @@ -65,7 +65,7 @@ Support for creating GIF representations. %! create_gif(+Edges:ordset, -Gif:compound, +Options:list(nvpair)) is det. create_gif(Es, Gif, Options):- - edges_to_vertices(Es, Vs), + graph_theory:edges_to_vertices(Es, Vs), create_gif(Vs, Es, Gif, Options). %! create_gif( @@ -105,7 +105,7 @@ create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):- % * =|edge_style(+atom)|= edge_term(Vs, E, edge(FromId,ToId,EAttrs), Options):- - edge_components(E, FromV, ToV), + graph_theory:edge_components(E, FromV, ToV), nth0chk(FromId, Vs, FromV), nth0chk(ToId, Vs, ToV), ``` 24: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 1e9a910 å’Œå˜åŠ¨å 6dc1cf5  [back to content](#compare) ``` diff diff --git a/.gitignore b/.gitignore index b25c15b..bd24270 100644 --- a/.gitignore +++ b/.gitignore @@ -1 +1,3 @@ *~ +*# +*.db diff --git a/.gitmodules b/.gitmodules deleted file mode 100644 index a63cbff..0000000 --- a/.gitmodules +++ /dev/null @@ -1,6 +0,0 @@ -[submodule \"Prolog-Library-Collection\"] -\tpath = Prolog-Library-Collection -\turl = https://github.com/wouterbeek/Prolog-Library-Collection.git -[submodule \"plHtml\"] -\tpath = plHtml -\turl = https://github.com/wouterbeek/plHtml.git diff --git a/LICENSE.txt b/LICENSE.txt new file mode 100644 index 0000000..c7b7798 --- /dev/null +++ b/LICENSE.txt @@ -0,0 +1,21 @@ +The MIT License (MIT) + +Copyright (c) 2015 Wouter Beek + +Permission is hereby granted, free of charge, to any person obtaining a copy +of this software and associated documentation files (the \"Software\"), to deal +in the Software without restriction, including without limitation the rights +to use, copy, modify, merge, publish, distribute, sublicense, and/or sell +copies of the Software, and to permit persons to whom the Software is +furnished to do so, subject to the following conditions: + +The above copyright notice and this permission notice shall be included in +all copies or substantial portions of the Software. + +THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR +IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, +FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE +AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER +LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, +OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN +THE SOFTWARE. diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection deleted file mode 160000 index 5b34b01..0000000 --- a/Prolog-Library-Collection +++ /dev/null @@ -1 +0,0 @@ -Subproject commit 5b34b01ab0cc82a56e6fd90fc26e75da22f5a0fe diff --git a/README.md b/README.md new file mode 100644 index 0000000..23a45db --- /dev/null +++ b/README.md @@ -0,0 +1,151 @@ +plGraphViz +========== + +This library allows you to easily export graphs represented as Prolog terms +using [GraphViz](http://www.graphviz.org/), an advanced graph drawing library. +The Prolog terms have the following form: + +~~~prolog +graph(Vertices, Edges, GraphAttrs) +~~~ + +`Vertices` and `Edges` are lists of compound terms of the following form: + +~~~prolog +vertex(Id, VertexAttrs) +edge(FromId, ToId, EdgeAttrs) +~~~ + +`Id` identifies a vertex and may or may not occur in any of the edges +(i.e., unconnected vertices are allowed). +`FromId` and `ToId` may occur in the list of vertices, +in order to draw an edge between vertices with set attributes. + +Attributes have the form `Name=Value`. +`GraphAttrs` are attributes of the graph. +`VertexAttrs` are attributes of the vertex. +`EdgeAttrs` are attributes of the edge. + +Attribute values are given as Prolog terms as well, +and are type-checked before exporting. +Many of the GraphViz attributes are supported. +New ones are added on an as-needed bases +(open an issue on Github if you want to see a specific feature added!). +HTML-like labels are supported, allowing complex tables to be shown +inside vertices. + +--- + +### Installation + +~~~shell +$ git clone https://github.com/wouterbeek/plGraphViz.git +$ cd plGraphViz +$ git submodule update --init +~~~ + +### Example + +~~~prolog +$ swipl run.pl +?- export_graph_to_gv_file( + graph([vertex(1,[]),vertex(2,[])],[edge(1,2,[])],[]), + File, + [method(sfdp),output(png)] + ). + File = 'PATH/plGraphViz/data/tmp.png' +~~~ + +![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example1.png \"Example graph.\") + +The graphic can be saved to a different file by instantiating +the `File` argument. + +--- + +### 'Method' option + +Option `method(+atom)` sets the drawing method that is used by GraphViz + to place the vertices and edges. +The following values are supported. + +| **Value** | **Description** | +| `circo` | Circular layout. | +| `dot` (default) | Directed graph. | +| `fdp` | Undirected graph. | +| `neato` | Undirected graph. | +| `osage` | Tree map. | +| `sfdp` | Large undirected graph. | +| `twopi` | Radical layouts. | + +--- + +### 'Output' option + +Option `output(+atom)` sets the type of file the graph is written to. +The following values are supported. + +| **Value** | **Description** | +|:---------------------:|:--------------------------------------| +| `bmp` | Windows Bitmap Format | +| `canon` | | +| `dot` | | +| `gv`, `xdot`, `xdot1.2`, `xdot1.4` | DOT | +| `cgimage` | CGImage bitmap format | +| `cmap` | Client-side imagemap (deprecated) | +| `eps` | Encapsulated PostScript | +| `exr` | OpenEXR | +| `fig` | | +| `gd`, `gd2` | GD/GD2 formats | +| `gif` | | +| `gtk` | GTK canvas | +| `ico` | Icon Image File Format | +| `imap` | | +| `cmapx` | Server-side and client-side imagemaps | +| `imap_np`, `cmapx_np` | Server-side and client-side imagemaps | +| `ismap` | Server-side imagemap (deprecated) | +| `jp2` | JPEG 2000 | +| `jpg`, `jpeg`, `jpe` | JPEG | +| `pct`, `pict` | PICT | +| `pdf` (default) | Portable Document Format (PDF) | +| `pic` | Kernighan's PIC graphics language | +| `plain`, `plain-ext` | Simple text format | +| `png` | Portable Network Graphics format | +| `pov` | POV-Ray markup language (prototype) | +| `ps` | PostScript | +| `ps2` | PostScript for PDF | +| `psd` | PSD | +| `sgi` | SGI | +| `svg`, `svgz` | Scalable Vector Graphics | +| `tga` | Truevision TGA | +| `tif`, `tiff` | TIFF (Tag Image File Format) | +| `tk` | TK graphics | +| `vml`, `vmlz` | Vector Markup Language (VML) | +| `vrml` | VRML | +| `wbmp` | Wireless BitMap format | +| `webp` | Image format for the Web | +| `xlib`, `x11` | Xlib canvas | + +--- + +### HTML-like labels + +Example of using HTML-like labels: + +~~~prolog +export_graph_to_gv_file( + graph( + [vertex(1,[]),vertex(2,[label=html(table([tr([td(a),td(b)]),tr([td(c),td(d)])]))])], + [edge(1,2,[label='From 1 to 2.'])], + [] + ), + File, + [] +). +~~~ + +![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example2.png \"Example graph with HTML-like labels.\") + +--- + +Developed during 2013-2014 by [Wouter Beek](http://www.wouterbeek.com). diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl new file mode 100644 index 0000000..bcc7654 --- /dev/null +++ b/data/gv_attrs_scrape.pl @@ -0,0 +1,119 @@ +:- module( + gv_attrs_scrape, + [ + gv_attrs_scrape/1 % +File + ] +). + +/**  GraphViz: Scrape attributes + +Writes compound terms of the following form to file: + +```prolog +gv_attr( + ?Name, + ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])), + ?Types:list(atom), + ?Default, + ?Minimum, + ?Notes +) is nondet. +``` + +@author Wouter Beek +@version 2015/10, 2016/07 +*/ + +:- use_module(library(apply)). +:- use_module(library(dcg/dcg_ext)). +:- use_module(library(debug)). +:- use_module(library(gv/gv_attr_type)). +:- use_module(library(http/http_download)). +:- use_module(library(lists)). +:- use_module(library(os/io)). +:- use_module(library(pl_term)). +:- use_module(library(print_ext)). +:- use_module(library(xpath)). +:- use_module(library(xpath/xpath_table)). +:- use_module(library(yall)). + + + + + +%! gv_attrs_scrape(+File) is det. + +gv_attrs_scrape(File):- + debug(gv, \"Updating the GraphViz attributes table.\", []), + call_to_stream(File, [In,Meta,Meta]gv_attrs_download(In)). + + +gv_attrs_download(Write):- + gv_attrs_iri(Iri), + html_download(Iri, Dom), + xpath_chk(Dom, //table(@align=lower_case(center)), TableDom), + xpath_table(TableDom, _, Rows), + maplist(write_attr_row(Write), Rows). + + +write_attr_row(Write, [Name,UsedBy1,Types1,Default1,Minimum,Notes]):- + atom_phrase(translate_usedby(UsedBy2), UsedBy1), + once(atom_phrase(translate_type(Types2), Types1)), + sort(UsedBy2, UsedBy3), + translate_default(Default1, Default2), + with_output_to( + Write, + write_fact(gv_attr(Name, UsedBy3, Types2, Default2, Minimum, Notes)) + ). + +gv_attrs_iri('http://www.graphviz.org/doc/info/attrs.html'). + + + + + +% HELPERS % + +%! translate_default(+Default1, -Default2) is det. + +% The empty string is represented by the empty atom. +translate_default('\"\"', ''):- !. +% The absence of a default value is represented by an uninstantiated variable. +translate_default('', _):- !. +translate_default(Default, Default). + + + +%! translate_type(-Types:list(atom))// is det. + +translate_type([H|T]) -- + gv_attr_type(H), + whites, + translate_type(T). +translate_type([H]) -- + gv_attr_type(H). +translate_type([]) -- \"\". + + + +%! translated_usedby( +%! -UsedBy:list(oneof([cluster,edge,graph,node,subgraph])) +%! )// is det. + +translate_usedby([cluster|T]) -- + \"C\", !, + translate_usedby(T). +translate_usedby([edge|T]) -- + \"E\", !, + translate_usedby(T). +translate_usedby([graph|T]) -- + \"G\", !, + translate_usedby(T). +translate_usedby([node|T]) -- + \"N\", !, + translate_usedby(T). +translate_usedby([subgraph|T]) -- + \"S\", !, + translate_usedby(T). +translate_usedby([]) -- + \"\". diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl new file mode 100644 index 0000000..102a02a --- /dev/null +++ b/data/gv_color_scrape.pl @@ -0,0 +1,52 @@ +:- module( + gv_color_scrape, + [ + gv_color_scrape/1 % +File + ] +). + +/**  GraphViz: Scrape colors + +@author Wouter Beek +@version 2015/10, 2016/07 +*/ + +:- use_module(library(apply)). +:- use_module(library(debug)). +:- use_module(library(http/http_download)). +:- use_module(library(lists)). +:- use_module(library(os/io)). +:- use_module(library(pl_term)). +:- use_module(library(print_ext)). +:- use_module(library(xpath)). +:- use_module(library(xpath/xpath_table)). +:- use_module(library(yall)). + + + + + +%! gv_color_scrape(+File) is det. + +gv_color_scrape(File):- + debug(io, \"Updating the GraphViz color table.\", []), + call_to_stream(File, [In,Meta,Meta]gv_color_download(In)). + + +gv_color_download(Write):- + gv_color_iri(Iri), + html_download(Iri, Dom), + xpath_chk(Dom, //table(1), TableDom1), + xpath_chk(Dom, //table(2), TableDom2), + maplist(write_color_table(Write), [x11,svg], [TableDom1,TableDom2]). + + +write_color_table(Write, Colorscheme, TableDom):- + xpath_table(TableDom, _, Rows), + append(Rows, Cells), + forall( + member(Cell, Cells), + with_output_to(Write, write_fact(gv_color(Colorscheme, Cell))) + ). + +gv_color_iri('http://www.graphviz.org/doc/info/colors.html'). diff --git a/example1.png b/example1.png new file mode 100644 index 0000000..31e7ba6 Binary files /dev/null and b/example1.png differ diff --git a/example2.png b/example2.png new file mode 100644 index 0000000..6e44b16 Binary files /dev/null and b/example2.png differ diff --git a/gv_attr_type.pl b/gv_attr_type.pl deleted file mode 100644 index 7a64c82..0000000 --- a/gv_attr_type.pl +++ /dev/null @@ -1,417 +0,0 @@ -:- module( - gv_attr_type, - [ - gv_attr_type/1, % ?Type:atom - addDouble//1, % +Double:float - addPoint//1, % +Point:compound - arrowType//1, % +ArrowType:atom - bool//1, % +Boolean:boolean - clusterMode//1, % +ClusterMode:atom - dirType//1, % +DirectionType:oneof([back,both,forward,none]) - double//1, % +Double:float - doubleList//1, % +Doubles:list(float) - escString//1, - %layerList//1, - %layerRange//1, - lblString//1, - int//1, % +Integer:integer - outputMode//1, % +OutputMode:atom - %packMode//1, - pagedir//1, % +Pagedir:atom - point//1, % +Point:compound - pointList//1, % +Points:list(compound) - %portPos//1, - quadType//1, % +QuadType:atom - rankType//1, % +RankType:atom - rankdir//1, % +RankDirection:atom - rect//1, % +Rectangle:compound - shape//1, - smoothType//1, % +SmoothType:atom - %splineType//1, - %startType//1, - string//1, % ?Content:atom - style//2 % +Context:oneof([cluster,edge,node]) - % +Style:atom - %viewPort//1 - ] -). -:- reexport( - plGraphViz(gv_color), - [ - color//1, % +Color:compound - colorList//1 % +ColorList:list(compound) - ] -). - -/**  GraphViz attribute types - -@author Wouter Beek -@version 2014/06 -*/ - -:- use_module(dcg(dcg_abnf)). -:- use_module(dcg(dcg_cardinal)). -:- use_module(dcg(dcg_content)). - -:- use_module(plGraphViz(gv_html)). - - - -%! gv_attr_type(?Type:atom) is nondet. - -gv_attr_type(addDouble). -gv_attr_type(addPoint). -gv_attr_type(arrowType). -gv_attr_type(bool). -gv_attr_type(color). -gv_attr_type(colorList). -gv_attr_type(clusterMode). -gv_attr_type(dirType). -gv_attr_type(double). -gv_attr_type(doubleList). -gv_attr_type(escString). -gv_attr_type(layerList). -gv_attr_type(layerRange). -gv_attr_type(lblString). -gv_attr_type(int). -gv_attr_type(outputMode). -gv_attr_type(packMode). -gv_attr_type(pagedir). -gv_attr_type(point). -gv_attr_type(pointList). -gv_attr_type(portPos). -gv_attr_type(quadType). -gv_attr_type(rankType). -gv_attr_type(rankdir). -gv_attr_type(rect). -gv_attr_type(shape). -gv_attr_type(smoothType). -gv_attr_type(splineType). -gv_attr_type(startType). -gv_attr_type(string). -gv_attr_type(style). -gv_attr_type(viewPort). - - -%! addDouble(+Float:float)// . -% An *addDouble* is represented by a Prolog float. - -addDouble(Float) -- - '?'(`+`), - double(Float). - - -%! addPoint(+Point:compound)// . -% An *addPoint* is represented by a compound of the following form: -% `point(X:float,Y:float,InputOnly:boolean)`. - -addPoint(Point) -- - '?'(`+`), - point(Point). - - -%! arrowType(+ArrowType:atom)// . - -arrowType(V) -- - {arrowType(V)}, - atom(V). - -arrowType(V):- - primitive_shape(V). -arrowType(V):- - derived(V). -arrowType(V):- - backwards_compatible(V). - -primitive_shape(box). -primitive_shape(crow). -primitive_shape(circle). -primitive_shape(diamond). -primitive_shape(dot). -primitive_shape(inv). -primitive_shape(none). -primitive_shape(normal). -primitive_shape(tee). -primitive_shape(vee). - -derived(odot). -derived(invdot). -derived(invodot). -derived(obox). -derived(odiamond). - -backwards_compatible(ediamond). -backwards_compatible(empty). -backwards_compatible(halfopen). -backwards_compatible(invempty). -backwards_compatible(open). - - -bool(false) -- `false`. -bool(false) -- `no`. -bool(true) -- `true`. -bool(true) -- `yes`. - - -%! clusterMode(+ClusterMode:atom)// . - -clusterMode(V) -- - {clusterMode(V)}, - atom(V). - -clusterMode(global). -clusterMode(local). -clusterMode(none). - - -%! dirType(+DirectionType:oneof([back,both,forward,none]))// . - -dirType(DirType) -- - {dirType(DirType)}, - atom(DirType). - -dirType(back). -dirType(both). -dirType(forward). -dirType(none). - - -double(Double1) -- - % float//1 will check for float type. - {Double2 is Double1 * 1.0}, - float(Double2). - - -doubleList([H|T]) -- - double(H), - '*'(doubleList1, T). - -doubleList1(Float) -- - `:`, - double(Float). - - -%! escString(+String:atom)// . -% @tbd Support for context-dependent replacements. - -escString(String) -- - atom(String). - - -% @tbd layerList - - -% @tbd layerRange - - -lblString(V) -- - escString(V). -lblString(V) -- - gv_html_like_label(V). - - -int(V) -- - integer(V). - - -outputMode(V) -- - {outputMode(V)}, - atom(V). - -outputMode(breadthfirst). -outputMode(edgesfirst). -outputMode(nodesfirst). - - -% @tbd packMode - - -pagedir(V) -- - {pagedir(V)}, - atom(V). - -pagedir('BL'). -pagedir('BR'). -pagedir('LB'). -pagedir('LT'). -pagedir('RB'). -pagedir('RT'). -pagedir('TL'). -pagedir('TR'). - - -%! point(+Point:compound)// . -% A *point* is represented by a compound of the following form: -% `point(X:float,Y:float,InputOnly:boolean)`. - -point(point(X,Y,InputOnly)) -- - float(X), - `,`, - float(Y), - input_only(InputOnly). - -input_only(false) -- []. -input_only(true) -- `!`. - - -pointList(Points) -- - '*'(point, Points). - - -% @tbd portPos - - -quadType(V) -- - {quadType(V)}, - atom(V). - -quadType(fast). -quadType(none). -quadType(normal). - - -rankType(V) -- - {rankType(V)}, - atom(V). - -rankType(max). -rankType(min). -rankType(same). -rankType(sink). -rankType(source). - - -rankdir(V) -- - {rankdir(V)}, - atom(V). - -rankdir('BT'). -rankdir('LR'). -rankdir('RL'). -rankdir('TB'). - - -rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -- - float(LowerLeftX), `,`, - float(LowerLeftY), `,`, - float(UpperRightX), `,`, - float(UpperRightY). - - -shape(V) -- - {polygon_based_shape(V)}, - atom(V). - -polygon_based_shape(assembly). -polygon_based_shape(box). -polygon_based_shape(box3d). -polygon_based_shape(cds). -polygon_based_shape(circle). -polygon_based_shape(component). -polygon_based_shape(diamond). -polygon_based_shape(doublecircle). -polygon_based_shape(doubleoctagon). -polygon_based_shape(egg). -polygon_based_shape(ellipse). -polygon_based_shape(fivepoverhang). -polygon_based_shape(folder). -polygon_based_shape(hexagon). -polygon_based_shape(house). -polygon_based_shape(insulator). -polygon_based_shape(invhouse). -polygon_based_shape(invtrapezium). -polygon_based_shape(invtriangle). -polygon_based_shape(larrow). -polygon_based_shape(lpromoter). -polygon_based_shape('Mcircle'). -polygon_based_shape('Mdiamond'). -polygon_based_shape('Msquare'). -polygon_based_shape(none). -polygon_based_shape(note). -polygon_based_shape(noverhang). -polygon_based_shape(octagon). -polygon_based_shape(oval). -polygon_based_shape(parallelogram). -polygon_based_shape(pentagon). -polygon_based_shape(plaintext). -polygon_based_shape(point). -polygon_based_shape(polygon). -polygon_based_shape(primersite). -polygon_based_shape(promoter). -polygon_based_shape(proteasesite). -polygon_based_shape(proteinstab). -polygon_based_shape(rarrow). -polygon_based_shape(rect). -polygon_based_shape(rectangle). -polygon_based_shape(restrictionsite). -polygon_based_shape(ribosite). -polygon_based_shape(rnastab). -polygon_based_shape(rpromoter). -polygon_based_shape(septagon). -polygon_based_shape(signature). -polygon_based_shape(square). -polygon_based_shape(tab). -polygon_based_shape(terminator). -polygon_based_shape(threepoverhang). -polygon_based_shape(trapezium). -polygon_based_shape(triangle). -polygon_based_shape(tripleoctagon). -polygon_based_shape(utr). - - -smoothType(V) -- - {smoothType(V)}, - atom(V). - -smoothType(avg_dist). -smoothType(graph_dist). -smoothType(none). -smoothType(power_dist). -smoothType(rng). -smoothType(spring). -smoothType(triangle). - - -% @tbd splineType - - -% @tbd startType - - -%! string(?Content:atom)// . -% A GraphViz string. - -string(Content) -- - atom(Content). - - -%! style(?Context:oneof([cluster,edge,node]), ?Style:atom) is nondet. - -style(Context, Style) -- - {style(Context, Style)}, - atom(Style). - -style(cluster, bold). -style(cluster, dashed). -style(cluster, dotted). -style(cluster, filled). -style(cluster, rounded). -style(cluster, solid). -style(cluster, striped). -style(edge, bold). -style(edge, dashed). -style(edge, dotted). -style(edge, solid). -style(node, bold). -style(node, dashed). -style(node, diagonals). -style(node, dotted). -style(node, filled). -style(node, rounded). -style(node, solid). -style(node, striped). -style(node, wedged). - - -% @tbd viewPort - diff --git a/gv_attrs.pl b/gv_attrs.pl deleted file mode 100644 index dd0145a..0000000 --- a/gv_attrs.pl +++ /dev/null @@ -1,184 +0,0 @@ -:- module( - gv_attrs, - [ - gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph]) - % +Attr1:nvpair - % +Attr2:nvpair - ] -). - -/**  GraphViz attributes v2 - -@author Wouter Beek -@version 2014/06 -*/ - -:- use_module(library(apply)). -:- use_module(library(persistency)). -:- use_module(library(xpath)). - -:- use_module(dcg(dcg_content)). -:- use_module(dcg(dcg_generic)). -:- use_module(generics(db_ext)). -:- use_module(os(file_ext)). - -:- use_module(plHtml(html)). -:- use_module(plHtml(html_table)). - -:- use_module(plGraphViz(gv_attr_type)). % DCGs implementing attribute types. - -:- db_add_novel(user:prolog_file_type(log, logging)). - -%! gv_attr( -%! ?Name:atom, -%! ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])), -%! ?Types:list(atom), -%! ?Default, -%! ?Minimum, -%! ?Notes:atom -%! ) is nondet. - -:- persistent( - gv_attr( - name:atom, - used_by:list(oneof([cluster,edge,graph,node,subgraph])), - types:list(atom), - default, - minimum, - notes:atom - ) -). - -:- initialization(gv_attrs_init). - - - -gv_attr(Context, N=V, N=V):- - var(V), !, - gv_attr(N, UsedBy, _, V, _, _), - memberchk(Context, UsedBy). -gv_attr(Context, N=V1, N=V2):- - gv_attr(N, UsedBy, Types, _, Minimum, _), - memberchk(Context, UsedBy), - member(Type, Types), - ( - Type == style - - - Dcg =.. [Type,Context,V1] - ; - Dcg =.. [Type,V1] - ), - once(dcg_phrase(Dcg, V2)), - check_minimum(V1, Minimum). - -check_minimum(_, ''):- !. -check_minimum(V, Min1):- - atom_number(Min1, Min2), - Min2 =', _):- !. -translate_default(Default, Default). - - -%! translate_type(-Types:list(atom))// is det. - -translate_type([H|T]) -- - {gv_attr_type(H)}, - atom(H), - whites, - translate_type(T). -translate_type([]) -- !, []. - - -%! translated_usedby( -%! -UsedBy:list(oneof([cluster,edge,graph,node,subgraph])) -%! )// is det. - -translate_usedby([cluster|T]) -- `C`, !, translate_usedby(T). -translate_usedby([edge|T]) -- `E`, !, translate_usedby(T). -translate_usedby([graph|T]) -- `G`, !, translate_usedby(T). -translate_usedby([node|T]) -- `N`, !, translate_usedby(T). -translate_usedby([subgraph|T]) -- `S`, !, translate_usedby(T). -translate_usedby([]) -- []. - diff --git a/gv_color.pl b/gv_color.pl deleted file mode 100644 index 19d6e05..0000000 --- a/gv_color.pl +++ /dev/null @@ -1,151 +0,0 @@ -:- module( - gv_color, - [ - gv_color/2, % ?Colorscheme:oneof([svg,x11]) - % ?Color:atom - color//1, % +Color:compound - colorList//1 % +Pairs:list(pair(compound,float)) - ] -). - -/**  GraphViz color - -@author Wouter Beek -@tbd Color value `transparent` is only available in the output formats - ps, svg, fig, vmrl, and the bitmap formats. -@version 2014/06 -*/ - -:- use_module(library(apply)). -:- use_module(library(lists)). -:- use_module(library(persistency)). -:- use_module(library(xpath)). - -:- use_module(dcg(dcg_abnf)). -:- use_module(dcg(dcg_cardinal)). -:- use_module(dcg(dcg_content)). -:- use_module(generics(db_ext)). -:- use_module(os(file_ext)). -:- use_module(sparql(sparql_char)). - -:- use_module(plHtml(html)). -:- use_module(plHtml(html_table)). - -:- db_add_novel(user:prolog_file_type(log, logging)). - -%! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet. - -:- persistent(gv_color(colorscheme:oneof([svg,x11]),color:atom)). - -:- initialization(gv_color_init). - - - -% color(+Color:compound)// . -% A *color* is represented by a compound term of one of the following forms: -% 1. `rgb(Red:nonneg,Green:nonneg,Blue:nonneg)` -% 2. `rgba(Red:nonneg,Green:nonneg,Blue:nonneg,Alpha:nonneg)` -% 3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))` - -color(rgb(Red,Green,Blue)) -- !, - `#`, - '#'(3, hex_color, [Red,Green,Blue]). -color(rgbs(Red,Green,Blue,Alpha)) -- !, - `#`, - '#'(4, hex_color, [Red,Green,Blue,Alpha]). -color(hsv(Hue,Saturation,Value)) -- !, - '#'(3, hsv_color, [Hue,Saturation,Value]). -color(Name) -- - {gv_color(_, Name)}, - atom(Name). - -hex_color(I) -- - {W1 is I / 16}, - 'HEX'(W1), - {W2 is I mod 16}, - 'HEX'(W2). - -hsv_color(D, Head, Tail):- - format(codes(Head,Tail), '~2f', [D]). - - -%! colorList(+Pairs:list(pair(compound,float)))// . - -colorList(Pairs) -- - '+'(wc, Pairs). - -wc(Color-Float) -- - color(Color), - '?'(wc_weight(Float)). - -wc_weight(Float) -- - `;`, - float(Float). - - - -% INITIALIZATION - -%! gv_color_download is det. - -gv_color_download:- - gv_color_url(Url), - download_html(Url, Dom, [html_dialect(html4),verbose(silent)]), - xpath(Dom, //table(1), TableDom1), - xpath(Dom, //table(2), TableDom2), - maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]). - -assert_color_table(Colorscheme, TableDom):- - html_to_table(TableDom, _, Rows), - append(Rows, Cells), - forall( - member(Cell, Cells), - assert_gv_color(Colorscheme, Cell) - ). - - -%! gv_color_file(-File:atom) is det. - -gv_color_file(File):- - absolute_file_name( - data(gv_color), - File, - [access(write),file_type(logging)] - ). - - -%! gv_color_init is det. - -gv_color_init:- - gv_color_file(File), - safe_db_attach(File), - file_age(File, Age), - gv_color_update(Age). - - -%! gv_color_update(+Age:float) is det. - -% The persistent store is still fresh. -gv_color_update(Age):- - once(gv_color(_, _)), - Age GraphViz DOT generator - -DCG rules for GraphViz DOT file generation. - -Methods for writing to the GraphViz DOT format. - -In GraphViz vertices are called 'nodes'. - -@author Wouter Beek -@see http://www.graphviz.org/content/dot-language -@version 2013/07, 2013/09, 2014/03-2014/06 -*/ - -:- use_module(library(apply)). -:- use_module(library(lists)). -:- use_module(library(ordsets)). - -:- use_module(dcg(dcg_abnf)). -:- use_module(dcg(dcg_ascii)). -:- use_module(dcg(dcg_content)). -:- use_module(dcg(dcg_generic)). -:- use_module(dcg(dcg_meta)). -:- use_module(dcg(dcg_os)). - -:- use_module(plGraphViz(gv_attrs)). -:- use_module(plGraphViz(gv_html)). -:- use_module(plGraphViz(gv_numeral)). - - - -%! gv_attribute(+Attribute:nvpair)// is det. -% A single GraphViz attribute. -% We assume that the attribute has already been validated. - -gv_attribute(Name=Val) -- - gv_id(Name), `=`, gv_id(Val), `;`. - - -%! gv_attribute_list( -%! +Context:oneof([cluster,edge,graph,node,subgraph]), -%! +GraphAttributes:list(nvpair), -%! +Attributes:list(nvpair) -%! )// . -% ~~~{.abnf} -% attr_list = \"[\" [a_list] \"]\" [attr_list] -% a_list = ID \"=\" ID [\",\"] [a_list] -% ~~~ - -% Attributes occur between square brackets. -gv_attribute_list(Context, _, Attrs1) -- - {maplist(gv_attr(Context), Attrs1, Attrs2)}, - bracketed(square, '*'(gv_attribute, Attrs2)). - - -%! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . -% ~~~ -% compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) -% ~~~ - -gv_compass_pt('_') -- `_`. -gv_compass_pt(c) -- `c`. -gv_compass_pt(e) -- `e`. -gv_compass_pt(n) -- `n`. -gv_compass_pt(ne) -- `ne`. -gv_compass_pt(nw) -- `nw`. -gv_compass_pt(s) -- `s`. -gv_compass_pt(se) -- `se`. -gv_compass_pt(sw) -- `sw`. -gv_compass_pt(w) -- `w`. - - -%! gv_edge_operator(+Directedness:boolean)// . -% The binary edge operator between two vertices. -% The operator that is used depends on whether the graph is directed or -% undirected. -% -% @arg Directedness Whether an edge is directed (operator `-`) or -% undirected (operator `--`). - -gv_edge_operator(false) -- !, `--`. -gv_edge_operator(true) -- arrow(right, 2). - - -%! gv_edge_statement( -%! +Indent:nonneg, -%! +Directedness:boolean, -%! +GraphAttributes:list(nvpair), -%! +EdgeTerm:compound -%! )// is det. -% A GraphViz statement describing an edge. -% -% @arg Indent The indentation level at which the edge statement is written. -% @arg Directedness Whether the graph is directed or not. -% @arg GraphAttributes The attributes of the graph. Some of these attributes -% may be used in the edge statement (e.g., the colorscheme). -% @arg EdgeTerm A compound term in the GIFormat, representing an edge. -% -% @tbd Instead of gv_node_id//1 we could have a gv_subgraph//1 -% at the from and/or to location. -% @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2. - -gv_edge_statement(I, Directedness, GAttrs, edge(FromId,ToId,EAttrs)) -- - indent(I), - gv_node_id(FromId), ` `, - - gv_edge_operator(Directedness), ` `, - - gv_node_id(ToId), ` `, - - % We want `colorscheme/1` from the edges and - % `directionality/1` from the graph. - gv_attribute_list(edge, GAttrs, EAttrs), - newline. - - -%! gv_generic_attributes_statement( -%! +Kind:oneof([edge,graph,node]), -%! +Indent:integer, -%! +GraphAttributes:list(nvpair), -%! +CategoryAttributes:list(nvpair) -%! )// -% A GraphViz statement describing generic attributes for a category of items. -% -% @arg Kind The category of items for to the attributes apply. -% Possible values: `edge`, `graph`, and `node`. -% @arg Indent An integer indicating the number of tabs. -% @arg GraphAttributes A list of name-value pairs. -% @arg CategoryAttributes A list of name-value pairs. -% -% ~~~ -% attr_stmt = (graph / node / edge) attr_list -% ~~~ - -gv_generic_attributes_statement(_, _, _, []) -- [], !. -gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- - indent(I), - gv_kind(Kind), ` `, - gv_attribute_list(Kind, GraphAttrs, KindAttrs), newline. - - -%! gv_graph(+GraphTerm:compound)// -% The follow graph attributes are supported, -% beyond the GraphViz attributes for graphs: -% * `directedness(+boolean)` -% Whether the graph is directed (`true`) or undirected (`false`). -% Default: `false`. -% * `name(+GraphName:atom)` -% * `strict(+StrictGraph:boolean)` -% This forbids the creation of self-arcs and multi-edges; -% they are ignored in the input file. -% Only in combinattion with directionality `directed`. -% -% ~~~{.abnf} -% graph = [\"strict\"] (\"graph\" / \"digraph\") [ID] \"{\" stmt_list \"}\" -% ~~~ -% -% `GraphTerm` is a compound term of the following form: -% ~~~{.pl} -% graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes) -% ~~~ -% -% `RankedVertexTerms` is a list of compound terms of the following form: -% ~~~{.pl} -% rank(RankNode,ContentNodes) -% ~~~ -% -% @tbd Add support for subgraphs (arbitrary nesting). -% @tbd Add support for escape strings: -% http://www.graphviz.org/doc/info/attrs.html#k:escString -% @tbd Assert attributes that are generic with respect to a subgraph. -% @tbd Not all vertex and edge properties can be shared it seems (e.g., label). - -gv_graph(graph(VTerms, ETerms, GAttrs)) -- - gv_graph(graph(VTerms, [], ETerms, GAttrs)). - -gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- - { - shared_attributes(VTerms, SharedVAttrs, NewVTerms), - shared_attributes(ETerms, SharedEAttrs, NewETerms), - select_nvpair(strict=Strict, GAttrs1, GAttrs2, false), - select_nvpair(directedness=Directedness, GAttrs2, GAttrs3, true), - select_nvpair(name=GName, GAttrs3, GAttrs4, noname), - add_default_nvpair(GAttrs4, overlap, false, GAttrs5), - I = 0 - }, - - % The first statement in the GraphViz output. - % States that this file represents a graph according to the GraphViz format. - indent(I), - gv_strict(Strict), - gv_graph_type(Directedness), ` `, - gv_id(GName), ` `, - bracketed( - curly, - gv_graph0( - I, - NewVTerms, SharedVAttrs, RankedVTerms, - NewETerms, SharedEAttrs, - Directedness, GAttrs5 - ) - ), - newline. - -gv_graph0( - I, - NewVTerms, SharedVAttrs, RankedVTerms, - NewETerms, SharedEAttrs, - Directedness, GAttrs -) -- - newline, - - % The following lines are indented. - {NewI is I + 1}, - - % Attributes that apply to the graph as a whole. - gv_generic_attributes_statement(graph, NewI, GAttrs, GAttrs), - - % Attributes that are the same for all nodes. - gv_generic_attributes_statement(node, NewI, GAttrs, SharedVAttrs), - - % Attributes that are the same for all edges. - gv_generic_attributes_statement(edge, NewI, GAttrs, SharedEAttrs), - - % Only add a newline if some content was written in the previous three - % lines. - ({(GAttrs == [], SharedVAttrs == [], SharedEAttrs == [])} - `` ; newline), - - % The list of GraphViz nodes. - '*'(gv_node_statement(NewI, GAttrs), NewVTerms), - ({NewVTerms == []} - `` ; newline), - - % The ranked GraphViz nodes (displayed at the same height). - '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms), - ({RankedVTerms == []} - `` ; newline), - - { - findall( - edge(FromId,ToId,[]), - ( - nth0(Index1, RankedVTerms, rank(vertex(FromId,_,_),_)), - nth0(Index2, RankedVTerms, rank(vertex(ToId,_,_),_)), - % We assume that the rank vertices are nicely ordered. - succ(Index1, Index2) - ), - RankEdges - ) - }, - - % The rank edges. - '*'(gv_edge_statement(NewI, Directedness, GAttrs), RankEdges), - - % The non-rank edges. - '*'(gv_edge_statement(NewI, Directedness, GAttrs), NewETerms), - - % Note that we do not include a newline here. - - % We want to indent the closing curly brace. - indent(I). - - -%! gv_graph_type(+Directedness:boolean)// . -% The type of graph that is represented. - -gv_graph_type(false) -- `graph`. -gv_graph_type(true) -- `digraph`. - - -%! gv_id(?Atom:atom)// is det. -% Parse a GraphViz identifier. -% There are 4 variants: -% 1. Any string of alphabetic (`[a-zA-Z'200-'377]`) characters, -% underscores (`_`) or digits (`[0-9]`), not beginning with a digit. -% 2. A numeral `[-]?(.[0-9]+ | [0-9]+(.[0-9]*)? )`. -% 3. Any double-quoted string (`\"...\"`) possibly containing -% escaped quotes (`\\\"`). -% In quoted strings in DOT, the only escaped character is -% double-quote (`\"`). That is, in quoted strings, the dyad `\\\"` -% is converted to `\"`. All other characters are left unchanged. -% In particular, `\\\\` remains `\\\\`. -% Layout engines may apply additional escape sequences. -% 4. An HTML string (``). -% -% @tbd Add support for HTML-like labels: -% http://www.graphviz.org/doc/info/shapes.html#html -% This requires an XML grammar! - -% HTML strings (variant 4). -gv_id(Atom) -- - dcg_atom_codes(gv_html_like_label, Atom), !. -% Alpha-numeric strings (variant 1). -gv_id(Atom) -- - {atom_codes(Atom, [H|T])}, - gv_id_first(H), - gv_id_rest(T), !, - % Variant 1 identifiers should not be (case-variants of) a - % GraphViz keyword. - {\\+ gv_keyword([H|T])}. -% Numerals (variant 2) -gv_id(N) -- - {number(N)}, !, - gv_numeral(N). -% Double-quoted strings (variant 3). -% The quotes are already part of the given atom. -gv_id(Atom) -- - { - atom_codes(Atom, [H|T]), - append(S, [H], T) - }, - dcg_between(double_quote(H), gv_quoted_string(S)), !. -% Double-quoted strings (variant 3). -% The quotes are not in the given atom. They are written anyway. -gv_id(Atom) -- - quoted(double_quote, dcg_atom_codes(gv_quoted_string, Atom)), !. - -gv_id_first(X) -- ascii_letter(X). -gv_id_first(X) -- underscore(X). - -gv_id_rest([]) -- []. -gv_id_rest([H|T]) -- - (ascii_alpha_numeric(H) ; underscore(H)), - gv_id_rest(T). - - -%! gv_keyword(+Codes:list(code)) is semidet. -% Succeeds if the given codes for a GraphViz reserved keyword. - -gv_keyword(Codes):- - % Obviously, the keywords do not occur on the difference list input. - % So we must use phrase/[2,3]. - phrase(gv_keyword, Codes). - -%! gv_keyword// . -% GraphViz has reserved keywords that cannot be used as identifiers. -% GraphViz keywords are case-insensitive. - -gv_keyword -- `digraph`. -gv_keyword -- `edge`. -gv_keyword -- `graph`. -gv_keyword -- `node`. -gv_keyword -- `strict`. -gv_keyword -- `subgraph`. - - -%! gv_kind(+Kind:oneof([edge,graph,node]))// . - -gv_kind(edge) -- `edge`. -gv_kind(graph) -- `graph`. -gv_kind(node) -- `node`. - - -%! gv_node_id(+NodeId:atom)// . -% GraphViz node identifiers can be of the following two types: -% 1. A GraphViz identifier, see gv_id//1. -% 2. A GraphViz identifier plus a GraphViz port indicator, see gv_port//0. -% -% @tbd Add support for GraphViz port indicators -% inside GraphViz node identifiers. - -gv_node_id(Id) -- - gv_id(Id). -%gv_node_id(_) -- -% gv_id(_), -% gv_port. - - -%! gv_node_statement( -%! +Indent:integer, -%! +GraphAttributes, -%! +VertexTerm:compound -%! )// . -% A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes'). - -gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -- - indent(I), - gv_node_id(Id), ` `, - gv_attribute_list(node, GraphAttrs, VAttrs), newline. - - -gv_port -- - gv_port_location, - '?'(gv_port_angle). -gv_port -- - gv_port_angle, - '?'(gv_port_location). -gv_port -- - `:`, - gv_compass_pt(_). - -gv_port_angle -- - `@`, - gv_id(_). - -gv_port_location -- - `:`, - gv_id(_). -gv_port_location -- - `:`, - bracketed( - round, - ( - gv_id(_), - `,`, - gv_id(_) - ) - ). - - -gv_quoted_string([]) -- []. -% Just to be sure, we do not allow the double quote -% that closes the string to be escaped. -gv_quoted_string([X]) -- - {X \\== 92}, !, - [X]. -% A double quote is only allowed if it is escaped by a backslash. -gv_quoted_string([92,34|T]) -- !, - gv_quoted_string(T). -% Add the backslash escape character. -gv_quoted_string([34|T]) -- !, - `\\\\\\\"`, - gv_quoted_string(T). -% All other characters are allowed without escaping. -gv_quoted_string([H|T]) -- - [H], - gv_quoted_string(T). - - -gv_ranked_node_collection( - I, - GraphAttrs, - rank(Rank_V_Term,Content_V_Terms) -) -- - indent(I), - bracketed(curly, ( - newline, - - % The rank attribute. - {NewI is I + 1}, - indent(NewI), gv_attribute(rank=same), `;`, newline, - - '*'(gv_node_statement(NewI, GraphAttrs), [Rank_V_Term|Content_V_Terms]), - - % We want to indent the closing curly brace. - indent(I) - )), - newline. - - -%! gv_strict(+Strict:boolean)// is det. -% The keyword denoting that the graph is strict, i.e., has no self-arcs and -% no multi-edges. -% This only applies to directed graphs. - -gv_strict(false) -- []. -gv_strict(true) -- `strict `. - - - -% Helpers - -add_default_nvpair(Attrs1, N, Default, Attrs2):- - add_default_nvpair(Attrs1, N, Default, _, Attrs2). - -add_default_nvpair(Attrs, N, _, V, Attrs):- - memberchk(N=V, Attrs), !. -add_default_nvpair(Attrs1, N, Default, Default, Attrs2):- - ord_add_element(Attrs1, N=Default, Attrs2). - -select_nvpair(N=V, Attrs1, Attrs2, _):- - memberchk(N=V, Attrs1), !, - select(N=V, Attrs1, Attrs2). -select_nvpair(_=Default, Attrs, Attrs, Default). - - -extract_shared([], []):- !. -extract_shared(Argss, Shared):- - ord_intersection(Argss, Shared). - -remove_shared_attributes(Shared, Args1, Args2):- - ord_subtract(Args1, Shared, Args2). - -shared_attributes(Terms1, Shared, Terms2):- - maplist(term_components(Func), Terms1, Args1, Args2, Args3a), - extract_shared(Args3a, Shared), - maplist(remove_shared_attributes(Shared), Args3a, Args3b), - maplist(term_components(Func), Terms2, Args1, Args2, Args3b). - -term_components(Func, Term, Arg1, Arg2, Arg3):- - Term =.. [Func,Arg1,Arg2,Arg3]. - diff --git a/gv_file.pl b/gv_file.pl deleted file mode 100644 index 9eaf66b..0000000 --- a/gv_file.pl +++ /dev/null @@ -1,206 +0,0 @@ -:- module( - gv_file, - [ - file_to_gv/2, % +File:atom - % +Options:list(nvpair) - file_to_gv/3, % +FromFile:atom - % ?ToFile:atom - % +Options:list(nvpair) - gif_to_gv_file/3, % +GraphInterchangeFormat:compound - % +ToFile:atom - % +Options:list(nvpair) - gif_to_svg_dom/3, % +GraphInterchangeFormat:compound - % -SvgDom:list(compound) - % +Options:list(nvpair) - open_dot/1 % +File:file - ] -). - -/**  GraphViz file - -Predicates for converting GIF-formatted terms -into GraphViz output files or SVG DOM structures. - -Also converts between GraphViz DOT formatted files -and GraphViz output files or SVG DOM structures. - -@author Wouter Beek -@version 2011-2013/09, 2013/11-2014/01, 2014/05, 2014/07 -*/ - -:- use_module(library(option)). -:- use_module(library(process)). -:- use_module(library(predicate_options)). % Declarations. - -:- use_module(generics(codes_ext)). -:- use_module(generics(db_ext)). -:- use_module(os(file_ext)). -:- use_module(os(run_ext)). -:- use_module(os(safe_file)). -:- use_module(svg(svg_file)). - -:- use_module(plGraphViz(gv_dot)). - -:- dynamic(user:file_type_program/2). -:- multifile(user:file_type_program/2). - -:- dynamic(user:module_uses/2). -:- multifile(user:module_uses/2). - -:- dynamic(user:prolog_file_type/2). -:- multifile(user:prolog_file_type/2). - -% Register DOT. -:- db_add_novel(user:prolog_file_type(dot, dot)). -:- db_add_novel(user:prolog_file_type(dot, graphviz)). -:- db_add_novel(user:file_type_program(dot, dotty)). -:- db_add_novel(user:file_type_program(dot, dotx)). -:- db_add_novel(user:module_uses(gv_file, file_type(dot))). - -% Register JPG/JPEG. -:- db_add_novel(user:prolog_file_type(jpeg, jpeg)). -:- db_add_novel(user:prolog_file_type(jpeg, graphviz_output)). -:- db_add_novel(user:prolog_file_type(jpg, jpeg)). -:- db_add_novel(user:prolog_file_type(jpg, graphviz_output)). - -% Register PDF. -:- db_add_novel(user:prolog_file_type(pdf, pdf)). -:- db_add_novel(user:prolog_file_type(pdf, graphviz_output)). - -% Register PNG. -:- db_add_novel(user:prolog_file_type(png, png)). -:- db_add_novel(user:prolog_file_type(png, graphviz_output)). - -% Register SVG. -:- db_add_novel(user:prolog_file_type(svg, graphviz_output)). -:- db_add_novel(user:prolog_file_type(svg, svg)). - -% Register XDOT. -:- db_add_novel(user:prolog_file_type(xdot, graphviz_output)). -:- db_add_novel(user:prolog_file_type(xdot, xdot)). - -:- predicate_options(codes_to_gv_file/3, 3, [ - pass_to(file_to_gv/3, 3) - ]). -:- predicate_options(file_to_gv/2, 2, [ - pass_to(file_to_gv/3, 3) - ]). -:- predicate_options(file_to_gv/3, 3, [ - method(+oneof([dot,sfdp])), - to_file_type(+oneof([dot,jpeg,pdf,svg,xdot])) - ]). -:- predicate_options(gif_to_svg_dom/3, 3, [ - pass_to(gif_to_gv_file/3, 3) - ]). -:- predicate_options(gif_to_gv_file/3, 3, [ - pass_to(codes_to_gv_file/3, 3) - ]). - - - -%! codes_to_gv_file( -%! +Codes:list(code), -%! +ToFile:atom, -%! +Options:list(nvpair) -%! ) is det. - -codes_to_gv_file(Codes, ToFile, Options):- - access_file(ToFile, write), - absolute_file_name(data(tmp), TmpFile, [access(write),file_type(dot)]), - setup_call_cleanup( - open(TmpFile, write, Write, [encoding(utf8)]), - put_codes(Write, Codes), - close(Write) - ), - file_to_gv(TmpFile, ToFile, Options), - delete_file(TmpFile). - - -%! file_to_gv(+FromFile:atom, +Options:list(nvpair)) is det. - -file_to_gv(FromFile, Options):- - file_to_gv(FromFile, _, Options). - -%! file_to_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det. -% Converts a GraphViz DOT file to an image file, using a specific -% visualization method. - -file_to_gv(FromFile, ToFile, Options):- - option(to_file_type(dot), Options), !, - rename_file(FromFile, ToFile). -file_to_gv(FromFile, ToFile, Options):- - % The method option. - option(method(Method), Options, dot), - must_be(oneof([dot,sfdp]), Method), - - % The file type option. - option(to_file_type(ToFileType), Options, pdf), - prolog_file_type(ToExtension, ToFileType), - prolog_file_type(ToExtension, graphviz_output), !, - - % The output file is either given or created. - ( - var(ToFile) - - - user:prolog_file_type(ToExtension, ToFileType), - file_alternative(FromFile, _, _, ToExtension, ToFile) - ; - is_absolute_file_name(ToFile), - % The given output file must match a certain file extension. - file_name_extension(_, ToExtension, ToFile) - ), - % Now that we have the output file we can prevent the - % file type / file extension translation predicates from bakctracking. - !, - - % Run the GraphViz conversion command in the shell. - format(atom(OutputType), '-T~w', [ToExtension]), - process_create( - path(Method), - [OutputType,FromFile,'-o',ToFile], - [process(PID)] - ), - process_wait(PID, exit(ShellStatus)), - exit_code_handler('GraphViz', ShellStatus). - - -%! gif_to_gv_file(+Gif:compound, +ToFile:atom, +Options:list(nvpair)) is det. -% Returns a file containing a GraphViz visualization of the given graph. -% -% The following options are supported: -% * =|method(+Method:oneof([dot,sfdp])|= -% The algorithm used by GraphViz for positioning the tree nodes. -% Either =dot= (default) or =sfdp=. -% * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|= -% The file type of the generated GraphViz file. -% Default: `pdf`. - -gif_to_gv_file(Gif, ToFile, Options):- - once(phrase(gv_graph(Gif), Codes)), - codes_to_gv_file(Codes, ToFile, Options). - - -%! gif_to_svg_dom( -%! +GraphInterchangeFormat:compound, -%! -SvgDom:list(compound), -%! +Options:list(nvpair) -%! ) is det. - -gif_to_svg_dom(Gif, SvgDom, Options1):- - % Make sure the file type of the output file is SvgDom. - merge_options([to_file_type=svg], Options1, Options2), - gif_to_gv_file(Gif, ToFile, Options2), - file_to_svg(ToFile, SvgDom), - safe_delete_file(ToFile). - - -%! open_dot(+File:atom) is det. -% Opens the given DOT file. -% -% @tbd Test support on Windows. -% @tbd Test support on OS-X. - -open_dot(File):- - once(find_program_by_file_type(dot, Program)), - run_program(Program, [File]). - diff --git a/gv_gif.pl b/gv_gif.pl deleted file mode 100644 index d59e5f8..0000000 --- a/gv_gif.pl +++ /dev/null @@ -1,221 +0,0 @@ -:- module( - gv_gif, - [ - create_gif/3, % +Edges:ordset - % -Gif:compound - % +Options:list(nvpair) - create_gif/4 % +Vertices:ordset - % +Edges:ordset - % -Gif:compound - % +Options:list(nvpair) - ] -). - -/**  GraphViz Graph Interchange Format (GIF) - -Support for creating GIF representations. - -@author Wouter Beek -@version 2014/06-2014/07 -*/ - -:- use_module(library(apply)). -:- use_module(library(lambda)). -:- use_module(library(option)). -:- use_module(library(ordsets)). -:- use_module(library(predicate_options)). % Declarations. - -:- use_module(generics(list_ext)). -:- use_module(generics(option_ext)). -:- use_module(graph_theory(graph_theory)). - -:- use_module(plRdf(rdf_name)). % Meta-DCG. - -:- predicate_options(create_gif/3, 3, [ - pass_to(create_gif/4, 4) - ]). -:- predicate_options(create_gif/4, 4, [ - pass_to(edge_term/3, 3), - pass_to(graph_attributes/2, 2), - pass_to(vertex_term/3, 3) - ]). -:- predicate_options(edge_term/3, 3, [ - edge_arrowhead(+atom), - edge_color(+atom), - edge_label(+atom), - edge_style(+atom) - ]). -:- predicate_options(graph_attributes/2, 2, [ - directedness(+boolean), - graph_colorscheme(+oneof([none,svg,x11])), - graph_label(+atom) - ]). - -:- predicate_options(vertex_term/3, 3, [ - vertex_color(+atom), - vertex_coordinates(+atom), - vertex_image(+atom), - vertex_label(+atom), - vertex_peripheries(+atom), - vertex_shape(+atom) - ]). - - - -%! create_gif(+Edges:ordset, -Gif:compound, +Options:list(nvpair)) is det. - -create_gif(Es, Gif, Options):- - graph_theory:edges_to_vertices(Es, Vs), - create_gif(Vs, Es, Gif, Options). - -%! create_gif( -%! +Vertices:ordset, -%! +Edges:ordset, -%! -Gif:compound, -%! +Options:list(nvpair) -%! ) is det. -% The following options are supported: -% * =|graph_colorscheme(+oneof([none,svg,x11])) -% No default. -% * =|graph_label(+LabelFunction)|= -% The functions that assigns names to graphs. -% No default. - -create_gif(Vs, Es, graph(VTerms,ETerms,GAttrs), Options):- - % Vertex terms. - maplist(\\V^VTerm^vertex_term(Vs, V, VTerm, Options), Vs, VTerms), - - % Edge terms. - maplist(\\E^ETerm^edge_term(Vs, E, ETerm, Options), Es, ETerms), - - % Graph attributes. - graph_attributes(GAttrs, Options). - - -%! edge_term( -%! +Vertices:ordset, -%! +Edge:pair, -%! -EdgeTerm:compound, -%! +Options:list(nvpair) -%! ) is det. -% The following options are supported: -% * =|edge_arrowhead(+atom)|= -% * =|edge_color(+atom)|= -% * =|edge_label(+atom)|= -% * =|edge_style(+atom)|= - -edge_term(Vs, E, edge(FromId,ToId,EAttrs), Options):- - graph_theory:edge_components(E, FromV, ToV), - nth0chk(FromId, Vs, FromV), - nth0chk(ToId, Vs, ToV), - - % Arrowhead - if_option(edge_arrowhead(ArrowheadFunction), Options, - call(ArrowheadFunction, E, EArrowhead) - ), - % Color. - if_option(edge_color(ColorFunction), Options, - call(ColorFunction, E, EColor) - ), - % Label. - if_option(edge_label(LabelFunction), Options, - call(LabelFunction, E, ELabel) - ), - % Style. - if_option(edge_style(StyleFunction), Options, - call(StyleFunction, E, EStyle) - ), - - merge_options( - [arrowhead=EArrowhead,color=EColor,label=ELabel,style=EStyle], - EAttrs - ). - - -%! graph_attributes( -%! -GraphAttributes:list(nvpair), -%! +Options:list(nvpair) -%! ) is det. -% The following options are supported: -% * =|directedness(+boolean)|= -% Whether the graph is directed (`true`) or undirected (`false`). -% Default: `false`. -% * =|graph_colorscheme(+oneof([none,svg,x11]))|= -% The colorscheme from which the color in this graph are taken. -% Default: `svg`. -% * =|graph_label(+atom)|= -% The graph label. -% No default. - -graph_attributes(GAttrs, Options):- - % Directedness. - option(directedness(Directedness), Options, false), - % Colorscheme. - if_option(graph_colorscheme(Colorscheme), Options, true), - % Label. - if_option(graph_label(GLabel), Options, true), - - merge_options( - [colorscheme=Colorscheme,directedness=Directedness,label=GLabel], - GAttrs - ). - - -%! vertex_term( -%! +Vertices:ordset, -%! +Vertex, -%! -VertexTerm:compound, -%! +Options:list(nvpair) -%! ) is det. -% The following options are supported: -% * =|vertex_color(+ColorFunction)|= -% A function that assigns colors to vertices. -% No default. -% * =|vertex_image(+ImageFunction)|= -% A function that assinges images to vertices. -% No default. -% * =|vertex_label(+LabelFunction)|= -% A function that assigns labels to vertices. -% No default. -% * =|vertex_peripheries(+PeripheriesFunction)|= -% A function that assinges peripheries to vertices. -% No default. -% * =|vertex_shape(+ShapeFunction)|= -% A function that assinges shapes to vertices. -% No default. - -vertex_term(Vs, V, vertex(Id,V,VAttrs), Options):- - nth0chk(Id, Vs, V), - - % Color. - if_option(vertex_color(ColorFunction), Options, - call(ColorFunction, V, VColor) - ), - % Image. - if_option(image(ImageFunction), Options, - call(ImageFunction, V, VImage) - ), - % Label. - if_option(vertex_label(LabelFunction), Options, - call(LabelFunction, V, VLabel) - ), - % Peripheries. - if_option(vertex_peripheries(PeripheriesFunction), Options, - call(PeripheriesFunction, V, VPeripheries) - ), - % Shape. - if_option(vertex_shape(ShapeFunction), Options, - call(ShapeFunction, V, VShape) - ), - - merge_options( - [ - color=VColor, - image=VImage, - label=VLabel, - peripheries=VPeripheries, - shape=VShape - ], - VAttrs - ). - diff --git a/gv_html.pl b/gv_html.pl deleted file mode 100644 index b8d3190..0000000 --- a/gv_html.pl +++ /dev/null @@ -1,60 +0,0 @@ -:- module( - gv_html, - [ - gv_html_like_label//1 % +Codes:list(code) - ] -). - -/**  GraphViz HTML - -@author Wouter Beek -@version 2013/07, 2013/09, 2014/03-2014/06 -*/ - -:- use_module(dcg(dcg_content)). - -:- use_module(plHtml(html_dcg)). - - - -%! gv_html_label(+Codes:list(code))// . -% -% @see http://www.graphviz.org/doc/info/shapes.html#html - -gv_html_label -- gv_html_text, !. -gv_html_label -- gv_html_table, !. -gv_html_label -- []. - -gv_html_like_label -- bracketed(angular, gv_html_label). - -gv_html_like_label(Content) -- bracketed(angular, html_dcg(Content)). - -gv_html_table -- html_element(table, _, gv_html_rows). -gv_html_table -- html_element(font, _, html_element(table, _, gv_html_rows)). - -gv_html_rows -- gv_html_row, gv_html_rows. -gv_html_rows -- gv_html_row, html_element(hr, _), gv_html_rows. -gv_html_rows -- gv_html_row. - -gv_html_row -- html_element(tr, _, gv_html_cells). - -gv_html_cell -- html_element(td, _, gv_html_label). -gv_html_cell -- html_element(td, _, html_element(img, _)). - -gv_html_cells -- gv_html_cell, gv_html_cells. -gv_html_cells -- gv_html_cell. -gv_html_cells -- gv_html_cell, html_element(vr, _), gv_html_cells. - -gv_html_text -- gv_html_textitem, gv_html_text. -gv_html_text -- gv_html_textitem. - -gv_html_textitem -- html_string, !. -gv_html_textitem -- html_entity, !. -gv_html_textitem -- html_element(br, _), !. -gv_html_textitem -- html_element(font, _, gv_html_text), !. -gv_html_textitem -- html_element(i, _, gv_html_text), !. -gv_html_textitem -- html_element(b, _, gv_html_text), !. -gv_html_textitem -- html_element(u, _, gv_html_text), !. -gv_html_textitem -- html_element(sub, _, gv_html_text), !. -gv_html_textitem -- html_element(sup, _, gv_html_text), !. - diff --git a/gv_numeral.pl b/gv_numeral.pl deleted file mode 100644 index 9b82fc0..0000000 --- a/gv_numeral.pl +++ /dev/null @@ -1,71 +0,0 @@ -:- module( - gv_numeral, - [ - gv_numeral//1 % ?Value:number - ] -). - -/**  GraphViz numeral - -@author Wouter Beek -@version 2014/05-2014/06 -*/ - -:- use_module(dcg(dcg_abnf)). -:- use_module(dcg(dcg_cardinal)). -:- use_module(math(math_ext)). - - - -%! gv_numeral(?Value:number)// . -% ~~~{.bnf} -% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? ) -% ~~~ - -gv_numeral(N) -- - {nonvar(N)}, - {number_sign_parts(N, Sign, Abs)}, - ({Sign =:= -1} - `-` ; ``), - gv_numeral_abs(Abs). -gv_numeral(N) -- - {var(N)}, - 'sign?'(Sign), - gv_numeral_abs(Abs), - {number_sign_parts(N, Sign, Abs)}. - - -gv_numeral_abs(N) -- - {nonvar(N)}, - {number_integer_parts(N, N1, N2)}, - ( - {N2 =:= 0} - - - integer(N1) - ; - {N1 =:= 0} - - - `.`, - integer(N2) - ; - integer(N1), - '?'((`.`, 'integer?'(N2))) - ). -gv_numeral_abs(N) -- - {var(N)}, - ( - `.`, - integer(N2) - - - {N1 = 0} - ; - integer(N1), - ( - `.` - - - 'integer?'(N2) - ; - {N2 = 0} - ) - ), - {number_integer_parts(N, N1, N2)}. - diff --git a/gv_tree.pl b/gv_tree.pl deleted file mode 100644 index afeb8f6..0000000 --- a/gv_tree.pl +++ /dev/null @@ -1,43 +0,0 @@ -:- module( - gv_tree, - [ - tree_to_gv_file/3 % +Tree:compound - % ?ToFile:atom - % +Options:list(nvpair) - ] -). - -/**  GraphViz tree - -Export trees to GraphViz. - -@author Wouter Beek -@version 2014/06-2014/07 -*/ - -:- use_module(library(aggregate)). - -:- use_module(generics(trees)). - -:- use_module(plGraphViz(gv_file)). -:- use_module(plGraphViz(gv_gif)). - - -%! tree_to_gv_file( -%! +Tree:compound, -%! ?ToFile:atom, -%! +Options:list(nvpair) -%! ) is det. -% Stores the given tree term into a GraphViz file. -% -% Options are passed on to create_gif/3 and gif_to_gv_file/3. - -tree_to_gv_file(Tree, ToFile, Options):- - tree_to_gif(Tree, Gif, Options), - gif_to_gv_file(Gif, ToFile, Options). - - -tree_to_gif(H-T, Gif, Options):- - tree_to_vertices_edges(Tree, Vs, Es), - create_gif(Vs, Es, Gif, Options). - diff --git a/index.pl b/index.pl deleted file mode 100644 index 7461d13..0000000 --- a/index.pl +++ /dev/null @@ -1,2 +0,0 @@ -% Index of project plGraphViz (empty). - diff --git a/load.pl b/load.pl deleted file mode 100644 index 4b117d1..0000000 --- a/load.pl +++ /dev/null @@ -1,12 +0,0 @@ -% Load file for plGraphViz. - -:- dynamic(user:prolog/3). -:- multifile(user:prolog/3). - user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz). - -:- use_module(load_project). -:- load_project(plGraphViz, [ - plc-'Prolog-Library-Collection', - plHtml -]). - diff --git a/load_project.pl b/load_project.pl deleted file mode 100644 index 5599b5e..0000000 --- a/load_project.pl +++ /dev/null @@ -1,120 +0,0 @@ -:- module( - load_project, - [ - load_project/2, % +Parent:atom - % +ChildProjects:list(or([atom,pair(atom)])) - load_subproject/2, % +ParentFileSearchPath:atom - % +Child:or([atom,pair(atom)]) - set_data_subdirectory/1 % +ParentDirectory:atom - ] -). - -/**  Load project - -Generic code for loading a project: - * Create a subdirectory for data. - * Load the root of subprojects onto the file search path. - * Load the index of subprojects onto the file search path. - -@author Wouter Beek -@version 2014/06/14 -*/ - -:- use_module(library(ansi_term)). % Colorized terminal messages. -:- use_module(library(apply)). - -:- dynamic(user:project/2). -:- multifile(user:project/2). -:- dynamic(user:project/3). -:- multifile(user:project/3). - - - -load_project(Parent, ChildProjects):- - parent_alias(Parent, ParentFsp), - - % Entry point. - source_file(load_project(_,_), ThisFile), - file_directory_name(ThisFile, ThisDir), - assert(user:file_search_path(ParentFsp, ThisDir)), - assert(user:file_search_path(project, ThisDir)), - - % Set the data subdirectory. - set_data_subdirectory(ThisDir), - - % Load the root of submodules onto the file search path. - maplist(load_subproject(ParentFsp), ChildProjects), - - % Load the index into the file search path. - load_project_index(ParentFsp). - - - -%! load_subproject( -%! +ParentFileSearchPath:atom, -%! +Child:or([atom,pair(atom)]) -%! ) is det. - -load_subproject(ParentFsp, ChildFsp-ChildDir):- !, - load_subproject_file_search_path(ParentFsp, ChildFsp, ChildDir), - load_project_index(ChildFsp). -load_subproject(ParentFsp, Child):- - load_subproject(ParentFsp, Child-Child). - - -%! load_subproject_file_search_path( -%! +ParentFileSearchPath:atom, -%! +ChildFileSearchPath:atom, -%! +ChildDirectory:atom -%! ) is det. - -% The file search path for the subproject has already been set. -load_subproject_file_search_path(_, ChildFsp, _):- - user:file_search_path(ChildFsp, _). -load_subproject_file_search_path(ParentFsp, ChildFsp, ChildDir):- - Spec =.. [ParentFsp,ChildDir], - absolute_file_name(Spec, _, [access(read),file_type(directory)]), !, - assert(user:file_search_path(ChildFsp, Spec)). -load_subproject_file_search_path(_, ChildFsp, ChildDir):- - print_message(warning, missing_subproject_directory(ChildFsp,ChildDir)). - - -%! load_project_index(+FileSearchPath:atom) is det. - -load_project_index(Fsp):- - Spec =.. [Fsp,index], - absolute_file_name( - Spec, - File, - [access(read),file_errors(fail),file_type(prolog)] - ), !, - ensure_loaded(File). -load_project_index(_). - - -%! parent_alias(+Parent:atom, -ParentFsp:atom) is det. - -parent_alias(Parent, ParentFsp):- - user:project(Parent, _, ParentFsp), !. -parent_alias(Parent, Parent). - - -%! set_data_subdirectory(+ParentDirectory:atom) is det. - -set_data_subdirectory(ParentDir):- - directory_file_path(ParentDir, data, DataDir), - make_directory_path(DataDir), - assert(user:file_search_path(data, DataDir)). - - - -:- multifile(prolog:message//1). - -prolog:message(missing_subproject_directory(ChildFsp,ChildDir)) -- - [ - 'The ~a submodule is not present.'-[ChildFsp], nl, - 'Check whether subdirectory ~a is present in your project directory:'-[ChildDir], nl, - ' git submodule init', nl, - ' git submodule update' - ]. - diff --git a/pack.pl b/pack.pl new file mode 100644 index 0000000..989108a --- /dev/null +++ b/pack.pl @@ -0,0 +1,9 @@ +author('Wouter Beek', 'me@wouterbeek.com'). +download('https://github.com/wouterbeek/plGraphViz/release/*.zip'). +home('https://github.com/wouterbeek/plGraphViz'). +maintainer('Wouter Beek', 'me@wouterbeek.com'). +name(plGraphViz). +packager('Wouter Beek', 'me@wouterbeek.com'). +requires('Prolog-Library-Collection'). +title(plGraphViz). +version('0.0.1'). diff --git a/plHtml b/plHtml deleted file mode 160000 index 08480c4..0000000 --- a/plHtml +++ /dev/null @@ -1 +0,0 @@ -Subproject commit 08480c40acaee5f70bfb21e3c641bef1e7d258bd diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl new file mode 100644 index 0000000..083dbb2 --- /dev/null +++ b/prolog/fca/fca_viz.pl @@ -0,0 +1,101 @@ +:- module( + fca_viz, + [ + fca_export_graph/2, % +Context, -ExportGraph + fca_export_graph/3, % +Context, -ExportGraph, :Opts + fca_viz/2, % +Context, ?File + fca_viz/3 % +Context, ?File, :Opts + ] +). + +/**  FCA visualization + +@author Wouter Beek +@version 2015/11-2016/01 +*/ + +:- use_module(library(aggregate)). +:- use_module(library(dcg/dcg_ext)). +:- use_module(library(dcg/dcg_pl)). +:- use_module(library(fca/fca)). +:- use_module(library(graph/build_export_graph)). +:- use_module(library(graph/s/s_graph)). +:- use_module(library(gv/gv_file)). +:- use_module(library(option)). +:- use_module(library(ordsets)). + +:- meta_predicate(fca_export_graph(+,?,:)). +:- meta_predicate(fca_viz(+,?,:)). + +:- predicate_options(fca_export_graph/3, 3, [ + concept_label(+callable) + ]). +:- predicate_options(fca_viz/3, 3, [ + pass_to(fca_export_graph/3, 3), + pass_to(graph_viz/3, 3) + ]). + +is_meta(concept_label). + + + + + +%! fca_export_graph(+Context:compound, -ExportGraph:compound) is det. +% Wrapper around fca_export_graph/3 with default options. + +fca_export_graph(Context, ExportG):- + fca_export_graph(Context, ExportG, []). + + +%! fca_export_graph( +%! +Context:compound, +%! -ExportGraph:compound, +%! :Options:list(compound) +%! ) is det. +% The following optios are supported: +% * concept_label(+callable) +% DCG writing the labels for individual concepts. + +fca_export_graph(Context, ExportG, Opts1):- + fca_hasse(Context, Hasse), + meta_options(is_meta, Opts1, Opts2), + option(concept_label(Label_3), Opts2, concept_label), + merge_options( + [ + vertex_label(Label_3), + vertex_rank(fca:concept_cardinality) + ], + Opts2, + Opts3 + ), + build_export_graph(Hasse, ExportG, Opts3). + + + +%! fca_viz(+Context:compound, ?File:atom) is det. +% Wrapper around fca_viz/3 with default options. + +fca_viz(Context, File):- + fca_viz(Context, File, []). + + +%! fca_viz(+Context:compound, ?File:atom, :Options:list(compound)) is det. + +fca_viz(Context, File, Opts1):- + meta_options(is_meta, Opts1, Opts2), + statistics(process_cputime, Time1), + fca_export_graph(Context, ExportG, Opts2), + ExportG = graph(_,_,Es,_), + aggregate_all(max(N), (member(edge(V1,V2,_), Es), (N = V1 ; N = V2)), N), + ignore(option(number_of_vertices(N), Opts2)), + statistics(process_cputime, Time2), + Time is Time2 - Time1, + ignore(option(process_cputime(Time), Opts2)), + graph_viz(ExportG, File, Opts2). + + + +%! concept_label(+Concept:compound)// is det. + +concept_label(concept(Os,As)) -- set(Os), \" / \", set(As). diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl new file mode 100644 index 0000000..5134069 --- /dev/null +++ b/prolog/graph/build_export_graph.pl @@ -0,0 +1,369 @@ +:- module( + build_export_graph, + [ + build_export_graph/2, % +Graph, -ExportGraph + build_export_graph/3 % +Graph + % -ExportGraph:compound + % +Options:list(compound) + ] +). + +/**  Build graph representation for exporting + +Support for building GIF representations. + +# Graph Intermediate Format (GIF) + +## Graph + +```prolog +graph(Vs:ordset(compound),Ranks,Es:compound,Attributes:list(compound)) +``` + +### Edge + +```prolog +edge(FromVertexId,ToVertexId,Attributes:list(compound)) +``` + +### Rank + +```prolog +RankVertex:compound-ContentVertices:ordset(compound) +``` + +### Vertex + +```prolog +vertex(Id,Attributes:list(compound)) +``` + +# Property functions + +Edge label: + 1. [[graph_edge]] edge_label/2 + +Vertex coordinates: + 1. [[circle_coords]] circular_coord/4 + 2. [[random_coords]] random_coord/4 + +--- + +@author Wouter Beek +@version 2015/07, 2015/09-2016/01 +*/ + +:- use_module(library(apply)). +:- use_module(library(dcg/dcg_ext)). +:- use_module(library(graph/s/s_graph)). +:- use_module(library(list_ext)). +:- use_module(library(option_ext)). +:- use_module(library(ordsets)). +:- use_module(library(pairs)). + +:- predicate_options(build_export_graph/4, 4, [ + pass_to(edge_term/3, 3), + pass_to(graph_attributes/2, 2), + pass_to(vertex_term/3, 3) + ]). +:- predicate_options(edge_term/3, 3, [ + edge_arrowhead(+callable), + edge_color(+callable), + edge_id(+callable), + edge_label(+callable), + edge_penwidth(+callable), + edge_style(+callable) + ]). +:- predicate_options(graph_attributes/2, 2, [ + graph_charset(+oneof(['iso-8859-1','Latin1','UTF-8'])), + graph_colorscheme(+oneof([none,svg,x11])), + graph_directed(+boolean), + graph_fontsize(+float), + graph_label(+atom), + graph_overlap(+boolean) + ]). +:- predicate_options(vertex_term/3, 3, [ + vertex_color(+callable), + vertex_id(+callable), + vertex_image(+callable), + vertex_label(+callable), + vertex_peripheries(+callable), + vertex_position(+callable), + vertex_rank(+callable), + vertex_shape(+callable), + vertex_uri(+callable) + ]). + +:- meta_predicate(build_export_graph(+,-,:)). + +is_meta(edge_arrowhead). +is_meta(edge_color). +is_meta(edge_id). +is_meta(edge_label). +is_meta(edge_penwidth). +is_meta(edge_style). +is_meta(vertex_color). +is_meta(vertex_id). +is_meta(vertex_image). +is_meta(vertex_label). +is_meta(vertex_peripheries). +is_meta(vertex_position). +is_meta(vertex_rank). +is_meta(vertex_shape). +is_meta(vertex_uri). + + + + + +%! build_export_graph(+Graph, -ExportGraph:compound) is det. +% Wrapper around build_export_graph/3 with default options. + +build_export_graph(G, ExportG):- + build_export_graph(G, ExportG, []). + + +%! build_export_graph( +%! +Graph, +%! -ExportGraph:compound, +%! +Options:list(compound) +%! ) is det. +% Graph is either: +% * a coumpound term `graph(Vs,Es)`, or +% * an unlabeled graph as defined by `library(ugraph)`. +% +% The following options are supported: +% * `vertex_rank(:RankFunction)` +% Assigns a non-negative integer to each vertex. +% No default. + +build_export_graph(G, graph(VTerms2,VRanks,ETerms,GAttrs), Opts1):- + graph_components(G, Vs, Es), + meta_options(is_meta, Opts1, Opts2), + maplist(vertex_term0(Vs, Opts2), Vs, VTerms1), + build_export_ranks(Vs, VTerms1, VRanks, VTerms2, Opts2), + maplist(edge_term0(Vs, Opts2), Es, ETerms), + graph_attributes(GAttrs, Opts2). + +vertex_term0(Vs, Opts, V, VTerm) :- vertex_term(Vs, V, VTerm, Opts). + +edge_term0(Vs, Opts, E, ETerm) :- edge_term(Vs, E, ETerm, Opts). + +graph_components(graph(Vs,Es), Vs, Es):- !. +graph_components(G, Vs, Es):- + s_graph_components(G, Vs, Es). + +build_export_ranks(Vs, VTerms, VRanks, [], Opts):- + option(vertex_rank(VRank_2), Opts), !, + maplist(VRank_2, Vs, Ranks), + pairs_keys_values(Pairs, Ranks, VTerms), + group_pairs_by_key(Pairs, GroupedPairs), + build_export_rank_terms(GroupedPairs, VRanks). +build_export_ranks(_, VTerms, [], VTerms, _). + +build_export_rank_terms([N-VTerms|T1], [RankTerm-VTerms|T2]):- !, + build_export_rank_term(N, RankTerm), + build_export_rank_terms(T1, T2). +build_export_rank_terms([], []). + +build_export_rank_term(N, vertex(Id,[label(\"\"),shape(none)])):- + format(atom(Id), \"r~d\", [N]). + + + +%! edge_term( +%! +Vertices:ordset(compound), +%! +Edge:compound, +%! -EdgeTerm:compound, +%! +Options:list(compound) +%! ) is det. +% The following options are supported: +% * `edge_arrowhead(+callable)` +% No default. +% * `edge_color(+callable)` +% No default. +% * `edge_id(+callable)` +% Function that assignes the unique identifiers for an edge's +% incident vertices. +% * `edge_label(+callable)` +% No default. +% * `edge_penwidth(+callable)` +% No default. +% * `edge_style(+callable)` +% No default. + +edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):- + % Arrowhead + if_option(edge_arrowhead(Arrowhead_2), Opts, + call(Arrowhead_2, E, EArrowhead) + ), + + % Color. + if_option(edge_color(ColorFunction), Opts, call(ColorFunction, E, EColor)), + + % Id. + ( option(edge_id(Id_2), Opts) + - call(Id_2, E, FromId, ToId) + ; edge_components(E, FromV, ToV), + nth0chk(FromId, Vs, FromV), + nth0chk(ToId, Vs, ToV) + ), + + % Label. + if_option(edge_label(ELabel_3), Opts, string_phrase(dcg_call(ELabel_3, E), ELabel)), + + % Penwidth. + if_option(edge_penwidth(Penwidth_2), Opts, call(Penwidth_2, E, EPenwidth)), + + % Style. + if_option(edge_style(Style_2), Opts, call(Style_2, E, EStyle)), + + exclude( + option_has_var_value, + [ + arrowhead(EArrowhead), + color(EColor), + label(ELabel), + penwidth(EPenwidth), + style(EStyle) + ], + EAttrs + ). + + + +%! graph_attributes( +%! -GraphAttributes:list(compound), +%! +Options:list(compound) +%! ) is det. +% The following options are supported: +% * `graph_charset(+oneof(['iso-8859-1','Latin1','UTF-8']))` +% The name of the character set that is used to encode text in the graph. +% Default: `UTF-8`. +% * `graph_colorscheme(+oneof([none,svg,x11]))` +% The colorscheme from which the color in this graph are taken. +% Default: `x11`. +% * `graph_directed(+boolean)` +% Whether the graph is directed (`true`) or undirected (`false`). +% Default: `false`. +% * `graph_fontsize(+float)` +% The font size of text in the graph. +% Default: `11.0`. +% * `graph_label(+atom)` +% The graph label. +% No default. +% * `graph_overlap(+boolean)` +% Whether the vertices are allowed to overlap. +% Default: `false`. + +graph_attributes(GAttrs, Opts):- + % Characer set. + option(graph_charset(Charset), Opts, 'UTF-8'), + % Colorscheme. + option(graph_colorscheme(Colorscheme), Opts, x11), + % Directed. + option(graph_directed(Directed), Opts, false), + % Fontsize. + option(graph_fontsize(Fontsize), Opts, 11.0), + % Label. + % Defaults to the empty string. + option(graph_label(GLabel), Opts, '\"\"'), + % Overlap. + option(graph_overlap(Overlap), Opts, false), + exclude( + option_has_var_value, + [ + charset(Charset), + colorscheme(Colorscheme), + directed(Directed), + fontsize(Fontsize), + label(GLabel), + overlap(Overlap) + ], + GAttrs + ). + + + +%! vertex_term( +%! +Vertices:ordset(compound), +%! +Vertex:compound, +%! -VertexTerm:compound, +%! +Options:list(compound) +%! ) is det. +% The following options are supported: +% * `vertex_color(:ColorFunction)` +% A function that assigns colors to vertices. +% No default. +% * `vertex_id(:ColorFunction)` +% A functions that assigns unique identifiers to vertices. +% * `vertex_image(:ImageFunction)` +% A function that assigns images to vertices. +% No default. +% * `vertex_label(:LabelFunction)` +% A function that assigns labels to vertices. +% No default. +% * `vertex_peripheries(:PeripheriesFunction)` +% A function that assinges peripheries to vertices. +% No default. +% * `vertex_position(:PositionFunction)` +% No default. +% * `vertex_shape(:ShapeFunction)` +% A function that assinges shapes to vertices. +% No default. +% * `vertex_uri(:UriFunction)` + +vertex_term(Vs, V, vertex(VId,VAttrs), Opts):- + % Color. + if_option(vertex_color(Color_2), Opts, call(Color_2, V, VColor)), + + % Id. + (option(vertex_id(Id_2), Opts) - call(Id_2, V, VId) ; nth0chk(VId, Vs, V)), + + % Image. + ignore(if_option(vertex_image(Image_2), Opts, call(Image_2, V, VImage))), + + % Label. + if_option(vertex_label(VLabel_2), Opts, string_phrase(dcg_call(VLabel_2, V), VLabel)), + + % Peripheries. + if_option(vertex_peripheries(Peripheries_2), Opts, + call(Peripheries_2, V, VPeripheries) + ), + + % Position. + if_option(vertex_position(Position_4), Opts, + call(Position_4, Vs, Opts, V, VPosition) + ), + + % Shape. + if_option(vertex_shape(Shape_2), Opts, call(Shape_2, V, VShape)), + + % URI + if_option(vertex_uri(Uri_2), Opts, call(Uri_2, V, VUri)), + + exclude( + option_has_var_value, + [ + color(VColor), + image(VImage), + label(VLabel), + peripheries(VPeripheries), + pos(VPosition), + shape(VShape), + 'URL'(VUri) + ], + VAttrs + ). + + + + + +% HELPERS % + +%! edge_components(+Edge:compound, -FromV, -ToV) is det. + +edge_components(edge(FromV,_,ToV), FromV, ToV):- !. +edge_components(edge(FromV,ToV), FromV, ToV):- !. +edge_components(FromV-ToV, FromV, ToV):- !. diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl new file mode 100644 index 0000000..f55fce5 --- /dev/null +++ b/prolog/gv/gv_attr_type.pl @@ -0,0 +1,421 @@ +:- module( + gv_attr_type, + [ + gv_attr_type//1, % ?Type:atom + addDouble//1, % +Double:float + addPoint//1, % +Point:compound + arrowType//1, % +ArrowType:atom + bool//1, % +Boolean:boolean + clusterMode//1, % +ClusterMode:atom + dirType//1, % +DirectionType:oneof([back,both,forward,none]) + double//1, % +Double:float + doubleList//1, % +Doubles:list(float) + escString//1, + %layerList//1, + %layerRange//1, + lblString//1, + int//1, % +Integer:integer + outputMode//1, % +OutputMode:atom + %packMode//1, + pagedir//1, % +Pagedir:atom + point//1, % +Point:compound + pointList//1, % +Points:list(compound) + %portPos//1, + quadType//1, % +QuadType:atom + rankType//1, % +RankType:atom + rankdir//1, % +RankDirection:atom + rect//1, % +Rectangle:compound + shape//1, + smoothType//1, % +SmoothType:atom + %splineType//1, + %startType//1, + string//1, % ?Content:atom + style//2 % +Context:oneof([cluster,edge,node]) + % +Style:atom + %viewPort//1 + ] +). +:- reexport( + library(gv/gv_color), + [ + color//1, % +Color:compound + colorList//1 % +ColorList:list(compound) + ] +). + +/**  GraphViz attribute types + +@author Wouter Beek +@version 2015/07, 2015/11, 2016/02 +*/ + +:- use_module(library(dcg/dcg_ext), except([string//1])). +:- use_module(library(gv/gv_html)). + + + + + +%! gv_attr_type(?Type:atom) is nondet. + +gv_attr_type(addDouble) -- \"addDouble\". +gv_attr_type(addPoint) -- \"addPoint\". +gv_attr_type(arrowType) -- \"arrowType\". +gv_attr_type(bool) -- \"bool\". +gv_attr_type(color) -- \"color\". +gv_attr_type(colorList) -- \"colorList\". +gv_attr_type(clusterMode) -- \"clusterMode\". +gv_attr_type(dirType) -- \"dirType\". +gv_attr_type(double) -- \"double\". +gv_attr_type(doubleList) -- \"doubleList\". +gv_attr_type(escString) -- \"escString\". +gv_attr_type(layerList) -- \"layerList\". +gv_attr_type(layerRange) -- \"layerRange\". +gv_attr_type(lblString) -- \"lblString\". +gv_attr_type(int) -- \"int\". +gv_attr_type(outputMode) -- \"outputMode\". +gv_attr_type(packMode) -- \"packMode\". +gv_attr_type(pagedir) -- \"pagedir\". +gv_attr_type(point) -- \"point\". +gv_attr_type(pointList) -- \"pointList\". +gv_attr_type(portPos) -- \"portPos\". +gv_attr_type(quadType) -- \"quadType\". +gv_attr_type(rankType) -- \"rankType\". +gv_attr_type(rankdir) -- \"rankdir\". +gv_attr_type(rect) -- \"rect\". +gv_attr_type(shape) -- \"shape\". +gv_attr_type(smoothType) -- \"smoothType\". +gv_attr_type(splineType) -- \"splineType\". +gv_attr_type(startType) -- \"startType\". +gv_attr_type(string) -- \"string\". +gv_attr_type(style) -- \"style\". +gv_attr_type(viewPort) -- \"viewPort\". + + + +%! addDouble(+Float:float)// . +% An *addDouble* is represented by a Prolog float. + +addDouble(N) -- (\"+\", ! ; \"\"), float(N). + + + +%! addPoint(+Point:compound)// . +% An *addPoint* is represented by a compound of the following form: +% `point(X:float,Y:float,InputOnly:boolean)`. + +addPoint(Point) -- (\"+\", ! ; \"\"), point(Point). + + + +%! arrowType(+ArrowType:atom)// . + +arrowType(V) -- primitive_shape(V). +arrowType(V) -- derived(V). +arrowType(V) -- backwards_compatible(V). + +primitive_shape(box) -- \"box\". +primitive_shape(crow) -- \"crow\". +primitive_shape(circle) -- \"circle\". +primitive_shape(diamond) -- \"diamond\". +primitive_shape(dot) -- \"dot\". +primitive_shape(inv) -- \"inv\". +primitive_shape(none) -- \"none\". +primitive_shape(normal) -- \"normal\". +primitive_shape(tee) -- \"tee\". +primitive_shape(vee) -- \"vee\". + +derived(odot) -- \"odot\". +derived(invdot) -- \"invdot\". +derived(invodot) -- \"invodot\". +derived(obox) -- \"obox\". +derived(odiamond) -- \"odiamond\". + +backwards_compatible(ediamond) -- \"ediamond\". +backwards_compatible(empty) -- \"empty\". +backwards_compatible(halfopen) -- \"halfopen\". +backwards_compatible(invempty) -- \"invempty\". +backwards_compatible(open) -- \"open\". + + + +%! bool(+Value:boolean)// . + +bool(false) -- \"false\". +bool(false) -- \"no\". +bool(true) -- \"true\". +bool(true) -- \"yes\". + + + +%! clusterMode(+ClusterMode:atom)// . + +clusterMode(global) -- \"global\". +clusterMode(local) -- \"local\". +clusterMode(none) -- \"none\". + + + +%! dirType(+DirectionType:oneof([back,both,forward,none]))// . + +dirType(back) -- \"back\". +dirType(both) -- \"both\". +dirType(forward) -- \"forward\". +dirType(none) -- \"none\". + + + +%! double(+Double:float)// . + +double(N) -- float(N). + + + +%! doubleList(+Doubles:list(float))// . + +doubleList([H|T]) -- double(H), (\":\", !, doubleList(T) ; {T = []}). + + + +%! escString(+String:or([atom,string]))// . +% @tbd Support for context-dependent replacements. + +escString(S1) -- + {( string(S1) + - string_phrase(escape_double_quotes, S1, S2) + ; atom_phrase(escape_double_quotes, S1, S2) + )}, + \"\\\"\", atom(S2), \"\\\"\". + +escape_double_quotes, [0'\\\\,0'\"] -- [0'\"], !, escape_double_quotes. +escape_double_quotes, [X] -- [X], !, escape_double_quotes. +escape_double_quotes -- \"\". + + + +% @tbd layerList + + + +% @tbd layerRange + + + +%! lblString(+String:compound)// . + +lblString(html_like_label(V)) -- gv_html_like_label(V). +lblString(V) -- escString(V). + + + +%! int(+Integer:integer)// . + +int(V) -- integer(V). + + + +%! outputMode(+OutputMode:atom)// . + +outputMode(breadthfirst) -- \"breadthfirst\". +outputMode(edgesfirst) -- \"edgesfirst\". +outputMode(nodesfirst) -- \"nodesfirst\". + + + +% @tbd packMode + + + +%! pagedir(+PageDirection:atom)// . + +pagedir('BL') -- \"BL\". +pagedir('BR') -- \"BR\". +pagedir('LB') -- \"LB\". +pagedir('LT') -- \"LT\". +pagedir('RB') -- \"RB\". +pagedir('RT') -- \"RT\". +pagedir('TL') -- \"TL\". +pagedir('TR') -- \"TR\". + + + +%! point(+Point:compound)// . +% A *point* is represented by a compound of the following form: +% `point(X:float,Y:float,Changeable:boolean)`. + +point(point(X,Y,Changeable)) -- + float(X), \",\", float(Y), + input_changeable(Changeable). + +input_changeable(false) -- \"\". +input_changeable(true) -- \"!\". + + + +%! pointList(+Points:list(compound))// . + +pointList(Points) -- + *(point, Points). + + + +% @tbd portPos + + + +%! quadType(+QuadType:atom)// . + +quadType(fast) -- \"fast\". +quadType(none) -- \"none\". +quadType(normal) -- \"normal\". + + + +%! rankType(+RankType:atom)// . + +rankType(max) -- \"max\". +rankType(min) -- \"min\". +rankType(same) -- \"same\". +rankType(sink) -- \"sink\". +rankType(source) -- \"source\". + + + +%! rankdir(+RankDirection:oneof(['BT','LR','RL','TB']))// . + +rankdir('BT') -- \"BT\". +rankdir('LR') -- \"LR\". +rankdir('RL') -- \"RL\". +rankdir('TB') -- \"TB\". + + + +%! rect(+Rectangle:compound)// . + +rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -- + float(LowerLeftX), \",\", + float(LowerLeftY), \",\", + float(UpperRightX), \",\", + float(UpperRightY). + + + +%! shape(+Shape:atom)// . + +shape(V) -- {polygon_based_shape(V)}, atom(V). + +polygon_based_shape(assembly). +polygon_based_shape(box). +polygon_based_shape(box3d). +polygon_based_shape(cds). +polygon_based_shape(circle). +polygon_based_shape(component). +polygon_based_shape(diamond). +polygon_based_shape(doublecircle). +polygon_based_shape(doubleoctagon). +polygon_based_shape(egg). +polygon_based_shape(ellipse). +polygon_based_shape(fivepoverhang). +polygon_based_shape(folder). +polygon_based_shape(hexagon). +polygon_based_shape(house). +polygon_based_shape(insulator). +polygon_based_shape(invhouse). +polygon_based_shape(invtrapezium). +polygon_based_shape(invtriangle). +polygon_based_shape(larrow). +polygon_based_shape(lpromoter). +polygon_based_shape('Mcircle'). +polygon_based_shape('Mdiamond'). +polygon_based_shape('Msquare'). +polygon_based_shape(none). +polygon_based_shape(note). +polygon_based_shape(noverhang). +polygon_based_shape(octagon). +polygon_based_shape(oval). +polygon_based_shape(parallelogram). +polygon_based_shape(pentagon). +polygon_based_shape(plaintext). +polygon_based_shape(point). +polygon_based_shape(polygon). +polygon_based_shape(primersite). +polygon_based_shape(promoter). +polygon_based_shape(proteasesite). +polygon_based_shape(proteinstab). +polygon_based_shape(rarrow). +polygon_based_shape(rect). +polygon_based_shape(rectangle). +polygon_based_shape(restrictionsite). +polygon_based_shape(ribosite). +polygon_based_shape(rnastab). +polygon_based_shape(rpromoter). +polygon_based_shape(septagon). +polygon_based_shape(signature). +polygon_based_shape(square). +polygon_based_shape(tab). +polygon_based_shape(terminator). +polygon_based_shape(threepoverhang). +polygon_based_shape(trapezium). +polygon_based_shape(triangle). +polygon_based_shape(tripleoctagon). +polygon_based_shape(utr). + + + +%! smoothType(+SmoothType:atom)// . + +smoothType(V) -- {smoothType(V)}, atom(V). + +smoothType(avg_dist). +smoothType(graph_dist). +smoothType(none). +smoothType(power_dist). +smoothType(rng). +smoothType(spring). +smoothType(triangle). + + + +% @tbd splineType + + + +% @tbd startType + + + +%! string(?String:atom)// . +% A GraphViz string. + +string(Content) -- \"\\\"\", atom(Content), \"\\\"\". + + + +%! style(?Context:oneof([cluster,edge,node]), ?Style:atom) is nondet. + +style(Context, Style) -- {style(Context, Style)}, atom(Style). + +style(cluster, bold). +style(cluster, dashed). +style(cluster, dotted). +style(cluster, filled). +style(cluster, rounded). +style(cluster, solid). +style(cluster, striped). +style(edge, bold). +style(edge, dashed). +style(edge, dotted). +style(edge, solid). +style(node, bold). +style(node, dashed). +style(node, diagonals). +style(node, dotted). +style(node, filled). +style(node, rounded). +style(node, solid). +style(node, striped). +style(node, wedged). + + + +% @tbd viewPort diff --git a/prolog/gv/gv_attrs.data b/prolog/gv/gv_attrs.data new file mode 100644 index 0000000..95fc680 --- /dev/null +++ b/prolog/gv/gv_attrs.data @@ -0,0 +1,169 @@ +gv_attr('Damping',[graph],[double],'0.99','0.0','neato only'). +gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only'). +gv_attr('URL',[cluster,edge,graph,node],[escString],_G59448,'','svg, postscript, map only'). +gv_attr('_background',[graph],[string],_G59644,'',''). +gv_attr(area,[cluster,node],[double],'1.0','0','patchwork only'). +gv_attr(arrowhead,[edge],[arrowType],normal,'',''). +gv_attr(arrowsize,[edge],[double],'1.0','0.0',''). +gv_attr(arrowtail,[edge],[arrowType],normal,'',''). +gv_attr(bb,[graph],[rect],'','','write only'). +gv_attr(bgcolor,[cluster,graph],[color,colorList],_G60571,'',''). +gv_attr(center,[graph],[bool],false,'',''). +gv_attr(charset,[graph],[string],'\"UTF-8\"','',''). +gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only'). +gv_attr(color,[cluster,edge,node],[color,colorList],black,'',''). +gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','',''). +gv_attr(comment,[edge,graph,node],[string],'','',''). +gv_attr(compound,[graph],[bool],false,'','dot only'). +gv_attr(concentrate,[graph],[bool],false,'',''). +gv_attr(constraint,[edge],[bool],true,'','dot only'). +gv_attr(decorate,[edge],[bool],false,'',''). +gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only'). +gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only'). +gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only'). +gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','',''). +gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only'). +gv_attr(distortion,[node],[double],'0.0','-100.0',''). +gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only'). +gv_attr(edgeURL,[edge],[escString],'','','svg, map only'). +gv_attr(edgehref,[edge],[escString],'','','svg, map only'). +gv_attr(edgetarget,[edge],[escString],_G63711,'','svg, map only'). +gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only'). +gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only'). +gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot'). +gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','',''). +gv_attr(fixedsize,[node],[bool,string],false,'',''). +gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'',''). +gv_attr(fontname,[cluster,edge,graph,node],[string],'\"Times-Roman\"','',''). +gv_attr(fontnames,[graph],[string],'','','svg only'). +gv_attr(fontpath,[graph],[string],'system-dependent','',''). +gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0',''). +gv_attr(forcelabels,[graph],[bool],true,'',''). +gv_attr(gradientangle,[cluster,graph,node],[int],'','',''). +gv_attr(group,[node],[string],'','','dot only'). +gv_attr(headURL,[edge],[escString],'','','svg, map only'). +gv_attr(head_lp,[edge],[point],'','','write only'). +gv_attr(headclip,[edge],[bool],true,'',''). +gv_attr(headhref,[edge],[escString],'','','svg, map only'). +gv_attr(headlabel,[edge],[lblString],'','',''). +gv_attr(headport,[edge],[portPos],center,'',''). +gv_attr(headtarget,[edge],[escString],_G4892,'','svg, map only'). +gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only'). +gv_attr(height,[node],[double],'0.5','0.02',''). +gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only'). +gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only'). +gv_attr(image,[node],[string],'','',''). +gv_attr(imagepath,[graph],[string],'','',''). +gv_attr(imagescale,[node],[bool,string],false,'',''). +gv_attr(inputscale,[graph],[double],_G6250,'','fdp, neato only'). +gv_attr(label,[cluster,edge,graph,node],[lblString],'\"\\\\N\" (nodes)\"\" (otherwise)','',''). +gv_attr(labelURL,[edge],[escString],'','','svg, map only'). +gv_attr(label_scheme,[graph],[int],'0','0','sfdp only'). +gv_attr(labelangle,[edge],[double],'-25.0','-180.0',''). +gv_attr(labeldistance,[edge],[double],'1.0','0.0',''). +gv_attr(labelfloat,[edge],[bool],false,'',''). +gv_attr(labelfontcolor,[edge],[color],black,'',''). +gv_attr(labelfontname,[edge],[string],'\"Times-Roman\"','',''). +gv_attr(labelfontsize,[edge],[double],'14.0','1.0',''). +gv_attr(labelhref,[edge],[escString],'','','svg, map only'). +gv_attr(labeljust,[cluster,graph],[string],'\"c\"','',''). +gv_attr(labelloc,[cluster,graph,node],[string],'\"t\"(clusters)\"b\"(root graphs)\"c\"(nodes)','',''). +gv_attr(labeltarget,[edge],[escString],_G8276,'','svg, map only'). +gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only'). +gv_attr(landscape,[graph],[bool],false,'',''). +gv_attr(layer,[cluster,edge,node],[layerRange],'','',''). +gv_attr(layerlistsep,[graph],[string],'\",\"','',''). +gv_attr(layers,[graph],[layerList],'','',''). +gv_attr(layerselect,[graph],[layerRange],'','',''). +gv_attr(layersep,[graph],[string],'\" :\\\\t\"','',''). +gv_attr(layout,[graph],[string],'','',''). +gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only'). +gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only'). +gv_attr(levelsgap,[graph],[double],'0.0','','neato only'). +gv_attr(lhead,[edge],[string],'','','dot only'). +gv_attr(lheight,[cluster,graph],[double],'','','write only'). +gv_attr(lp,[cluster,edge,graph],[point],'','','write only'). +gv_attr(ltail,[edge],[string],'','','dot only'). +gv_attr(lwidth,[cluster,graph],[double],'','','write only'). +gv_attr(margin,[cluster,graph,node],[double,point],'','',''). +gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only'). +gv_attr(mclimit,[graph],[double],'1.0','','dot only'). +gv_attr(mindist,[graph],[double],'1.0','0.0','circo only'). +gv_attr(minlen,[edge],[int],'1','0','dot only'). +gv_attr(mode,[graph],[string],major,'','neato only'). +gv_attr(model,[graph],[string],shortpath,'','neato only'). +gv_attr(mosek,[graph],[bool],false,'','neato only'). +gv_attr(nodesep,[graph],[double],'0.25','0.02',''). +gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'',''). +gv_attr(normalize,[graph],[double,bool],false,'','not dot'). +gv_attr(notranslate,[graph],[bool],false,'','neato only'). +gv_attr(nslimitnslimit1,[graph],[double],'','','dot only'). +gv_attr(ordering,[graph,node],[string],'','','dot only'). +gv_attr(orientation,[node],[double],'0.0','360.0',''). +gv_attr(orientation,[graph],[string],'','',''). +gv_attr(outputorder,[graph],[outputMode],breadthfirst,'',''). +gv_attr(overlap,[graph],[string,bool],true,'','not dot'). +gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only'). +gv_attr(overlap_shrink,[graph],[bool],true,'','prism only'). +gv_attr(pack,[graph],[bool,int],false,'',''). +gv_attr(packmode,[graph],[packMode],node,'',''). +gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','',''). +gv_attr(page,[graph],[double,point],'','',''). +gv_attr(pagedir,[graph],[pagedir],'BL','',''). +gv_attr(pencolor,[cluster],[color],black,'',''). +gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0',''). +gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0',''). +gv_attr(pin,[node],[bool],false,'','fdp, neato only'). +gv_attr(pos,[edge,node],[point,splineType],'','',''). +gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only'). +gv_attr(quantum,[graph],[double],'0.0','0.0',''). +gv_attr(rank,[subgraph],[rankType],'','','dot only'). +gv_attr(rankdir,[graph],[rankdir],'TB','','dot only'). +gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only'). +gv_attr(ratio,[graph],[double,string],'','',''). +gv_attr(rects,[node],[rect],'','','write only'). +gv_attr(regular,[node],[bool],false,'',''). +gv_attr(remincross,[graph],[bool],true,'','dot only'). +gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only'). +gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only'). +gv_attr(root,[graph,node],[string,bool],'(graphs)false(nodes)','','circo, twopi only'). +gv_attr(rotate,[graph],[int],'0','',''). +gv_attr(rotation,[graph],[double],'0','','sfdp only'). +gv_attr(samehead,[edge],[string],'','','dot only'). +gv_attr(sametail,[edge],[string],'','','dot only'). +gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','',''). +gv_attr(scale,[graph],[double,point],'','','not dot'). +gv_attr(searchsize,[graph],[int],'30','','dot only'). +gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot'). +gv_attr(shape,[node],[shape],ellipse,'',''). +gv_attr(shapefile,[node],[string],'','',''). +gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only'). +gv_attr(sides,[node],[int],'4','0',''). +gv_attr(size,[graph],[double,point],'','',''). +gv_attr(skew,[node],[double],'0.0','-100.0',''). +gv_attr(smoothing,[graph],[smoothType],'\"none\"','','sfdp only'). +gv_attr(sortv,[cluster,graph,node],[int],'0','0',''). +gv_attr(splines,[graph],[bool,string],'','',''). +gv_attr(start,[graph],[startType],'','','fdp, neato only'). +gv_attr(style,[cluster,edge,graph,node],[style],'','',''). +gv_attr(stylesheet,[graph],[string],'','','svg only'). +gv_attr(tailURL,[edge],[escString],'','','svg, map only'). +gv_attr(tail_lp,[edge],[point],'','','write only'). +gv_attr(tailclip,[edge],[bool],true,'',''). +gv_attr(tailhref,[edge],[escString],'','','svg, map only'). +gv_attr(taillabel,[edge],[lblString],'','',''). +gv_attr(tailport,[edge],[portPos],center,'',''). +gv_attr(tailtarget,[edge],[escString],_G21528,'','svg, map only'). +gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only'). +gv_attr(target,[cluster,edge,graph,node],[escString,string],_G21878,'','svg, map only'). +gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only'). +gv_attr(truecolor,[graph],[bool],'','','bitmap output only'). +gv_attr(vertices,[node],[pointList],'','','write only'). +gv_attr(viewport,[graph],[viewPort],'','',''). +gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot'). +gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)',''). +gv_attr(width,[node],[double],'0.75','0.01',''). +gv_attr(xdotversion,[graph],[string],'','','xdot only'). +gv_attr(xlabel,[edge,node],[lblString],'','',''). +gv_attr(xlp,[edge,node],[point],'','','write only'). +gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000',''). diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl new file mode 100644 index 0000000..4a92d5b --- /dev/null +++ b/prolog/gv/gv_attrs.pl @@ -0,0 +1,76 @@ +:- module( + gv_attrs, + [ + gv_attr_value//2 % +Context:oneof([cluster,edge,graph,node,subgraph]) + % +Attr + ] +). +:- ensure_loaded(library('gv/gv_attrs.data')). + +/**  GraphViz attributes + +@author Wouter Beek +@version 2015/07-2015/08, 2015/10, 2016/03 +*/ + +:- use_module(library(apply)). +:- use_module(library(dcg/dcg_ext)). +:- use_module(library(error)). +:- use_module(library(gv/gv_attr_type), [gv_attr_type//1]). +:- use_module(library(lists)). +:- use_module(library(os/file_ext)). + + + + + +%! gv_attr_value(+Context, +Attr)// is det. +% Uses the default value in case Value is uninstantiated. +% Otherwise, performs a typecheck and converts the given value. +% +% Context can be either `cluster`, `edge`, `graph`, `node` or `subgraph`. + +% Use the default if no value is given. +gv_attr_value(Context, Name=Value) -- + { + var(Value), + gv_attr(Name, UsedBy, _, DefaultValue, _, _), + % Check validity of context. + memberchk(Context, UsedBy) + }, !, + gv_attr_value(Context, Name=DefaultValue). +gv_attr_value(Context, Name=Value) -- + { + % Check the validity of the context argument. + gv_attr(Name, UsedBy, Types, _, Minimum, _), + memberchk(Context, UsedBy), + + % Pick a value type non-deterministically. + member(Type, Types), + + % The `style` type is the only one that requires the context argument. + ( Type == style + - Dcg =.. [Type,Context] + ; Dcg =.. [Type] + ), + + % Check validity of Value w.r.t. minimum value -- if available. + check_minimum(Value, Minimum) + }, !, + dcg_call(gv_attr_type:Dcg, Value). +gv_attr_value(_, Name=_) -- + {existence_error(gv_attr, Name)}. + + + + + +% HELPERS % + +%! check_minimum(+Value:atom, +Minimum:number) is semidet. +% Trivially succeeds if no minimum value is available for a given attribute. + +check_minimum(_, ''):- !. +check_minimum(V, Min1):- + atom_number(Min1, Min2), + Min2 =GraphViz color + +@author Wouter Beek +@tbd Color value `transparent` is only available in the output formats + ps, svg, fig, vmrl, and the bitmap formats. +@version 2015/08, 2015/10, 2016/02 +*/ + +:- use_module(library(apply)). +:- use_module(library(dcg/dcg_ext)). +:- use_module(library(lists)). +:- use_module(library(os/file_ext)). + + + + + +% color(+Color:compound)// . +% A *color* is represented by a compound term of one of the following forms: +% 1. `rgb(Red:nonneg,Green:nonneg,Blue:nonneg)` +% 2. `rgba(Red:nonneg,Green:nonneg,Blue:nonneg,Alpha:nonneg)` +% 3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))` + +color(rgb(Red,Green,Blue)) -- !, + \"#\", + #(3, hex_color, [Red,Green,Blue]). +color(rgbs(Red,Green,Blue,Alpha)) -- !, + color(rgb(Red,Green,Blue)), + hex_color(Alpha). +color(hsv(Hue,Saturation,Value)) -- !, + #(3, hsv_color, [Hue,Saturation,Value]). +color(Name) -- + {gv_color(_, Name)}, + atom(Name). + +hex_color(I) -- + xinteger(I). + +hsv_color(D, Head, Tail):- + format(codes(Head,Tail), '~2f', [D]). + + + +%! colorList(+Pairs:list(pair(compound,float)))// . + +colorList(L) -- + '+'(wc, L). + +wc(Color-Float) -- + color(Color), + ( wc_weight(Float) + ; \"\" + ). + +wc_weight(Float) -- + \";\", + float(Float). diff --git a/prolog/gv/gv_dom.pl b/prolog/gv/gv_dom.pl new file mode 100644 index 0000000..30c4263 --- /dev/null +++ b/prolog/gv/gv_dom.pl @@ -0,0 +1,29 @@ +:- module( + gv_dom, + [ + gv_dom/3 % +ExportG, -Dom, +Opts + ] +). + +/**  GraphViz DOM + +@author Wouter Beek +@version 2015/07, 2016/01 +*/ + +:- use_module(library(gv/gv_file)). +:- use_module(library(option)). +:- use_module(library(svg/svg_ext)). + + + + + +%! gv_dom(+ExportG, -Dom, +Opts) is det. + +gv_dom(ExportG, Dom, Opts1):- + % Make sure the file type of the output file is SvgDom. + merge_options([output(svg)], Opts1, Opts2), + graph_viz(ExportG, ToFile, Opts2), + svg_dom(ToFile, Dom), + delete_file(ToFile). diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl new file mode 100644 index 0000000..993fcee --- /dev/null +++ b/prolog/gv/gv_file.pl @@ -0,0 +1,175 @@ +:- module( + gv_file, + [ + graph_viz/2, % +ExportG, ?File + graph_viz/3 % +ExportG, ?File, +Opts + ] +). + +/**  GraphViz file + +@author Wouter Beek +@version 2015/07, 2015/10-2015/11, 2016/01 +*/ + +:- use_module(library(code_ext)). +:- use_module(library(error)). +:- use_module(library(gv/gv_graph)). +:- use_module(library(option)). +:- use_module(library(os/external_program)). +:- use_module(library(os/process_ext)). +:- use_module(library(string_ext)). + +:- predicate_options(graph_viz/3, 3, [ + pass_to(file_to_gv/3, 3) + ]). +:- predicate_options(file_to_gv/3, 3, [ + method(+oneof([circo,dot,fdp,neato,osage,sfdp,twopi])), + output(+atom) + ]). + +:- dynamic(user:module_uses/2). +:- multifile(user:module_uses/2). + +user:module_uses(gv_file, program(dot)). + + + + + +%! graph_viz(+ExportGraph:compound, ?File:atom) is det. +%! graph_viz(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det. +% Returns a file containing a GraphViz visualization of the given graph. +% +% The following options are supported: +% * method(+oneof([circo,dot,fdp,neato,osage,sfdp,twopi]) +% The algorithm used by GraphViz for positioning the tree nodes. +% Default is `dot'. +% For possible values see gv_method/1. +% * output(+atom)` +% The file type of the generated GraphViz file. +% Default is `pdf`. +% For possible values see gv_output_type/1. + +graph_viz(ExportG, File):- + graph_viz(ExportG, File, []). +graph_viz(ExportG, File, Opts):- + once(phrase(gv_graph(ExportG), Cs)), + + % Be thread-safe. + thread_self(Id), + string_list_concat([\"gv_file\",Id], \"_\", ThreadName), + absolute_file_name(ThreadName, TmpFile, [access(write),extensions([dot])]), + setup_call_cleanup( + open(TmpFile, write, Write, [encoding(utf8)]), + with_output_to(Write, put_codes(Cs)), + close(Write) + ), + file_to_gv(TmpFile, File, Opts). + + +%! file_to_gv( +%! +InputFile:atom, +%! ?OutputFile:atom, +%! +Options:list(compound) +%! ) is det. +% Converts a GraphViz DOT file to an image file, using a specific +% visualization method. + +file_to_gv(InputFile, OutputFile, Opts):- + var(OutputFile), !, + option(output(Ext), Opts, pdf), + file_name_extension(out, Ext, LocalName), + absolute_file_name(LocalName, OutputFile, Opts), + file_to_gv(InputFile, OutputFile, Opts). +file_to_gv(InputFile, OutputFile, Opts):- + option(output(dot), Opts), !, + ( var(OutputFile) + - OutputFile = InputFile + ; rename_file(InputFile, OutputFile) + ). +file_to_gv(InputFile, OutputFile, Opts):- + % Typecheck for `method` option. + option(method(Method), Opts, dot), + findall(Method0, gv_method(Method0), Methods), + must_be(oneof(Methods), Method), + + % Typecheck for `output` option. + option(output(OutputType), Opts, pdf), + findall(OutputType0, gv_output_type(OutputType0), OutputTypes), + must_be(oneof(OutputTypes), OutputType), + + % Run the GraphViz conversion command in the shell. + format(atom(OutputTypeFlag), \"-T~a\", [OutputType]), + format(atom(OutputFileFlag), \"-o~a\", [OutputFile]), + run_process( + Method, + [OutputTypeFlag,file(InputFile),OutputFileFlag] + ). + + + + + +% HELPERS % + +gv_method(circo). +gv_method(dot). +gv_method(fdp). +gv_method(neato). +gv_method(osage). +gv_method(sfdp). +gv_method(twopi). + + +gv_output_type(bmp). +gv_output_type(canon). +gv_output_type(dot). +gv_output_type(gv). +gv_output_type(xdot). +gv_output_type('xdot1.2'). +gv_output_type('xdot1.4'). +gv_output_type(cgimage). +gv_output_type(cmap). +gv_output_type(eps). +gv_output_type(exr). +gv_output_type(fig). +gv_output_type(gd). +gv_output_type(gd2). +gv_output_type(gif). +gv_output_type(gtk). +gv_output_type(ico). +gv_output_type(imap). +gv_output_type(cmapx). +gv_output_type(imap_np). +gv_output_type(cmapx_np). +gv_output_type(ismap). +gv_output_type(jp2). +gv_output_type(jpg). +gv_output_type(jpeg). +gv_output_type(jpe). +gv_output_type(pct). +gv_output_type(pict). +gv_output_type(pdf). +gv_output_type(pic). +gv_output_type(plain). +gv_output_type('plain-ext'). +gv_output_type(png). +gv_output_type(pov). +gv_output_type(ps). +gv_output_type(ps2). +gv_output_type(psd). +gv_output_type(sgi). +gv_output_type(svg). +gv_output_type(svgz). +gv_output_type(tga). +gv_output_type(tif). +gv_output_type(tiff). +gv_output_type(tk). +gv_output_type(vml). +gv_output_type(vmlz). +gv_output_type(vrml). +gv_output_type(wbmp). +gv_output_type(webp). +gv_output_type(xlib). +gv_output_type(x11). diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl new file mode 100644 index 0000000..c95c9cc --- /dev/null +++ b/prolog/gv/gv_graph.pl @@ -0,0 +1,252 @@ +:- module( + gv_graph, + [ + gv_graph//1 % +Graph:compound + ] +). + +/**  GraphViz graph + +Generates GraphViz graphs in the DOT format based on +a Prolog representation of a graph. + +In GraphViz vertices are called 'nodes'. + +--- + +@author Wouter Beek +@version 2015/07, 2015/12 +*/ + +:- use_module(library(apply)). +:- use_module(library(dcg/dcg_ext)). +:- use_module(library(gv/gv_graph_comp)). +:- use_module(library(lists)). +:- use_module(library(option)). + + + + + +%! gv_graph(+Graph:compound)// is det. +% Wrapper around gv_graph//2 with no indentation. + +gv_graph(G) -- gv_graph(G, 0). + + +%! gv_graph(+Graph:compound, +Indent:nonneg)// is det. +% The follow graph attributes are supported, +% beyond the GraphViz attributes for graphs: +% * `directed(+boolean)` +% Whether the graph is directed (`true`) or undirected (`false`). +% Default: `false`. +% * `name(+GraphName:atom)` +% * `strict(+StrictGraph:boolean)` +% This forbids the creation of self-arcs and multi-edges; +% they are ignored in the input file. +% Only in combinattion with directionality `directed`. +% +% ```abnf +% graph = [\"strict\"] (\"graph\" / \"digraph\") [ID] \"{\" stmt_list \"}\" +% ``` +% +% `GraphTerm` is a compound term of the following form: +% ```prolog +% graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes) +% ``` +% +% `RankedVertexTerms` is a list of compound terms of the following form: +% ```prolog +% RankVertex-ContentVertices +% ``` +% +% @tbd Add support for subgraphs (arbitrary nesting). +% @tbd Add support for escape strings: +% http://www.graphviz.org/doc/info/attrs.html#k:escString +% @tbd Assert attributes that are generic with respect to a subgraph. +% @tbd Not all vertex and edge properties can be shared it seems (e.g., label). + +gv_graph(G1, I) -- + { + include_ranks(G1, G2), + G2 = graph(VTerms,RankedVTerms,ETerms,GAttrs1), + shared_attributes(VTerms, SharedVAttrs, NewVTerms), + shared_attributes(ETerms, SharedEAttrs, NewETerms), + add_default(GAttrs1, overlap(false), GAttrs2), + I = 0 + }, + + % The first statement in the GraphViz output. + % States that this file represents a graph according to the GraphViz format. + tab(I), + + % Strictness. + {select_option(strict(Strict), GAttrs2, GAttrs3, false)}, + gv_strict(Strict), + + % Directedness. + {select_option(directed(Directed), GAttrs3, GAttrs4, true)}, + gv_graph_type(Directed), + \" \", + + % Graph name. + ( {select_option(name(GName), GAttrs4, GAttrs5)} + - gv_id(GName), + \" \" + ; {GAttrs5 = GAttrs4} + ), + + % The body of the DOT file appears between curly braces. + \"{\\n\", + + % The following lines are indented. + {NewI is I + 1}, + + % Attributes that apply to the graph as a whole. + gv_generic_attributes_statement(graph, NewI, GAttrs5), + + % Attributes that are the same for all nodes. + gv_generic_attributes_statement(node, NewI, SharedVAttrs), + + % Attributes that are the same for all edges. + gv_generic_attributes_statement(edge, NewI, SharedEAttrs), + + % Only add a line_feed if some content was already written + % and some content is about to be written. + ( % Succeeds if no content was written. + {(GAttrs5 == [], SharedVAttrs == [], SharedEAttrs == [])} + - \"\" + ; % Succeeds if no content is about to be written. + {(NewVTerms == [], RankedVTerms == [])} + - \"\" + ; \"\\n\" + ), + + % The list of GraphViz nodes. + gv_node_statements(NewI, NewVTerms), + ({NewVTerms == []} - \"\" ; \"\\n\"), + + % The ranked GraphViz nodes (displayed at the same height). + gv_ranked_node_collections(NewI, RankedVTerms), + ({RankedVTerms == []} - \"\" ; \"\\n\"), + + { + findall( + edge(FromId,ToId,[]), + ( + nth0(J1, RankedVTerms, rank(vertex(FromId,_),_)), + nth0(J2, RankedVTerms, rank(vertex(ToId,_),_)), + % We assume that the rank vertices are nicely ordered. + succ(J1, J2) + ), + RankEdges + ) + }, + + % The rank edges. + gv_edge_statements(NewI, Directed, RankEdges), + + % The non-rank edges. + gv_edge_statements(NewI, Directed, NewETerms), + + % Note that we do not include a line_feed here. + + % We want to indent the closing curly brace. + tab(I), + \"}\\n\". + + + +%! gv_edge_statements( +%! +Indent:nonneg, +%! +Directed:boolean, +%! +Statements:list(compound) +%! )// is det. + +gv_edge_statements(I, Dir, L) -- *(gv_edge_statement(I, Dir), L). + + + +%! gv_edge_statements(+Indent:nonneg, +Statements:list(compound))// is det. + +gv_node_statements(I, L) -- *(gv_node_statement(I), L). + + + +%! gv_ranked_node_collections(+Indent:nonneg, +Collections:list)// is det. + +gv_ranked_node_collections(I, L) -- *(gv_ranked_node_collection(I), L). + + + + + +% HELPERS % + +%! add_default_option( +%! +Options:list(compound), +%! +Default:compound, +%! -NewOptions:list(compound) +%! ) is det. + +add_default(L1, Opt, L2):- + Opt =.. [N,_Value], + Opt0 =.. [N,_FreshVar], + ( option(Opt0, L1) + - L2 = L1 + ; L2 = [Opt|L1] + ). + + + +%! gv_graph_type(+Directed:boolean)// is det. +% The type of graph that is represented. + +gv_graph_type(false) -- !, \"graph\". +gv_graph_type(true) -- \"digraph\". + + + +%! gv_strict(+Strict:boolean)// is det. +% The keyword denoting that the graph is strict, i.e., has no self-arcs and +% no multi-edges. +% This only applies to directed graphs. + +gv_strict(false) -- !, \"\". +gv_strict(true) -- \"strict \". + + + +%! invlude_ranges(+Graph:compound, -GraphWithRanks:compound) is det. +% Ensures that there is a ranks components in +% the graph-denoting compound term. + +include_ranks(graph(Vs,Rs,Es,L), graph(Vs,Rs,Es,L)):- !. +include_ranks(graph(Vs,Es,L), graph(Vs,[],Es,L)). + + + +%! shared_attributes( +%! +Terms:list(compound), +%! -SharedAttributes:list(compound), +%! -NewTerms:list(compound) +%! ) is det. + +shared_attributes(Ts1, Shared, Ts2):- + maplist(term_to_attrs, Ts1, L1), + extract_shared(L1, Shared), + maplist(remove_shared_attributes(Shared), L1, L2), + maplist(term_change_attrs, Ts1, L2, Ts2). + +term_to_attrs(edge(_,_,A), A). +term_to_attrs(vertex(_,A), A). + +extract_shared([], []):- !. +extract_shared(Argss, Shared):- + ord_intersection(Argss, Shared). + +remove_shared_attributes(Shared, Args1, Args2):- + ord_subtract(Args1, Shared, Args2). + +term_change_attrs(edge(From,To,_), A, edge(From,To,A)). +term_change_attrs(vertex(Id,_), A, vertex(Id,A)). diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl new file mode 100644 index 0000000..30ea9c5 --- /dev/null +++ b/prolog/gv/gv_graph_comp.pl @@ -0,0 +1,309 @@ +:- module( + gv_graph_comp, + [ + gv_edge_statement//3, % +Indent:nonneg + % +Directed:boolean + % +Edge:compound + gv_generic_attributes_statement//3, % +Kind:oneof([edge,graph,node]) + % +Indent:nonneg + % +CategoryAttributes:list(compound) + gv_id//1, % +Name:compound + gv_node_statement//2, % +Indent:nonneg + % +Vertex:compound + gv_ranked_node_collection//2 % +Indent:nonneg + % +Rank + ] +). + +/**  GraphViz graph components + +```abnf +attr_list = \"[\" [a_list] \"]\" [attr_list] +a_list = ID \"=\" ID [\",\"] [a_list] +``` + +@author Wouter Beek +@see http://www.graphviz.org/content/dot-language +@version 2015/07-2015/08, 2015/10-2016/01 +*/ + +:- use_module(library(apply)). +:- use_module(library(dcg/dcg_ext)). +:- use_module(library(gv/gv_attrs)). +:- use_module(library(gv/gv_html)). +:- use_module(library(error)). +:- use_module(library(lists)). +:- use_module(library(ordsets)). + + + + + +%! gv_edge_statement( +%! +Indent:nonneg, +%! +Directed:boolean, +%! +Edge:compound +%! )// is det. +% A GraphViz statement describing an edge. +% +% @arg Indent The indentation level at which the edge statement is written. +% @arg Directed Whether the graph is directed or not. +% @arg GraphAttributes The attributes of the graph. Some of these attributes +% may be used in the edge statement (e.g., the colorscheme). +% @arg Edge A compound term in the GIFormat, representing an edge. +% +% @tbd Instead of gv_node_id//1 we could have a gv_subgraph//1 +% at the from and/or to location. +% @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2. + +gv_edge_statement(I, Dir, edge(From,To,Attrs)) -- + tab(I), + + gv_node_id(From), \" \", + gv_edge_operator(Dir), \" \", + gv_node_id(To), \" \", + + % We want `colorscheme/1` from the edges and + % `directionality/1` from the graph. + gv_attrs(edge, Attrs), + \"\\n\". + +%! gv_edge_operator(+Directed:boolean)// . +% The binary edge operator between two vertices. +% The operator that is used depends on whether the graph is directed or +% undirected. +% +% @arg Directed Whether an edge is directed (operator `-`) or +% undirected (operator `--`). + +gv_edge_operator(Dir) -- + {must_be(boolean, Dir)}, + ({Dir == false} - \"--\" ; {Dir == true} - \"-\"). + + + +%! gv_generic_attributes_statement( +%! +Kind:oneof([edge,graph,node]), +%! +Indent:nonneg, +%! +CategoryAttrs +%! )// +% A GraphViz statement describing generic attributes for a category of items. +% +% @arg Kind The category of items for to the attributes apply. +% Possible values: `edge`, `graph`, and `node`. +% @arg Indent An integer indicating the number of tabs. +% @arg GraphAttributes A list of name-value pairs. +% @arg CategoryAttributes A list of name-value pairs. +% +% ``` +% attr_stmt = (graph / node / edge) attr_list +% ``` + +gv_generic_attributes_statement(_, _, []) -- !, \"\". +gv_generic_attributes_statement(Kind, I, Attrs) -- + tab(I), + gv_kind(Kind), \" \", + gv_attrs(Kind, Attrs), + \"\\n\", !. + + + +%! gv_kind(+Kind:oneof([edge,graph,node]))// . + +gv_kind(Kind) -- {must_be(oneof([edge,graph,node]), Kind)}, atom(Kind). + + + +%! gv_node_statement(+Indent:nonneg, +Vertex:compound)// is det. +% A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes'). + +gv_node_statement(I, vertex(Id,Attrs)) -- + tab(I), + gv_node_id(Id), + gv_attrs(node, Attrs), + \"\\n\". + + + +%! gv_ranked_node_collection(+Indent:nonneg, Rank:pair)// is det. + +gv_ranked_node_collection(I, RankVTerm-VTerms) -- + tab(I), + \"{\\n\", + + % The rank attribute. + {NewI is I + 1}, + tab(NewI), + gv_attr(subgraph, rank(same)), + \"\\n\", + + % Vertice statements. + *(gv_node_statement(NewI), [RankVTerm|VTerms]), + + % We want to indent the closing curly brace. + tab(I), + \"\\n}\". + + + + + +% HELPERS % + +%! gv_attrs( +%! +Kind:oneof([edge,graph,node]), +%! +Attributes:list(compound) +%! )// is det. + +gv_attrs(Kind, L) -- \"[\", *(gv_attr(Kind), L), \"]\". + + +%! gv_attr(+Context:oneof([edge,graph,node]), +Attribute:compound)// is det. +% A single GraphViz attribute. +% We assume that the attribute has already been validated. + +gv_attr(Context, Attr) -- + {Attr =.. [N,V]}, + gv_id(N), \"=\", gv_attr_value(Context, N=V), \";\". + + + +%! gv_id(+Id:compound)// is det. +% Parse a GraphViz identifier. +% There are 4 variants: +% 1. Any string of alphabetic (`[a-zA-Z'200-'377]`) characters, +% underscores (`_`) or digits (`[0-9]`), not beginning with a digit. +% 2. A numeral `[-]?(.[0-9]+ | [0-9]+(.[0-9]*)? )`. +% 3. Any double-quoted string (`\"...\"`) possibly containing +% escaped quotes (`\\\"`). +% In quoted strings in DOT, the only escaped character is +% double-quote (`\"`). That is, in quoted strings, the dyad `\\\"` +% is converted to `\"`. All other characters are left unchanged. +% In particular, `\\\\` remains `\\\\`. +% Layout engines may apply additional escape sequences. +% Represented by a Prolog term of the form `double_quoted_string(ATOM)`. +% 4. An HTML string (``). +% Represented by a Prolog term of the form `html_like_label(COMPOUND)`. +% +% @tbd Add support for HTML-like labels: +% http://www.graphviz.org/doc/info/shapes.html#html +% This requires an XML grammar! + +% HTML strings (assumed to be the same as HTML-like labels). +gv_id(html_like_label(Content)) -- !, + gv_html_like_label(Content). +% Double-quoted strings. +% The quotes are already part of the given atom. +gv_id(double_quoted_string(Atom)) -- !, + \"\\\"\", atom(Atom), \"\\\"\". +% Numerals. +gv_id(N) -- + {number(N)}, !, + {number_codes(N, Cs)}, + Cs. +% Alpha-numeric strings. +gv_id(Atom) -- + {atom_codes(Atom, [H|T])}, + gv_id_first(H), + gv_id_rest(T), !, + % Variant 1 identifiers should not be (case-variants of) a + % GraphViz keyword. + {\\+ gv_keyword([H|T])}. + + +%! gv_id_first(+First:code)// is det. +% Generates the first character of a GraphViz identifier. + +gv_id_first(C) -- alpha(C), !. +gv_id_first(0'_) -- \"_\". + + +%! gv_id_rest(+NonFirst:code)// is det. +% Generates a non-first character of a GraphViz identifier. + +gv_id_rest([H|T]) -- alphadigit(H), !, gv_id_rest(T). +gv_id_rest([0'_|T]) -- \"_\", !, gv_id_rest(T). +gv_id_rest([]) -- \"\". + + + +%! gv_keyword(+Codes:list(code)) is semidet. +% Succeeds if the given codes for a GraphViz reserved keyword. + +gv_keyword(Cs):- + % Obviously, the keywords do not occur on the difference list input. + % So we must use phrase/[2,3]. + phrase(gv_keyword, Cs). + + +%! gv_keyword// . +% GraphViz has reserved keywords that cannot be used as identifiers. +% GraphViz keywords are case-insensitive. + +gv_keyword -- \"digraph\". +gv_keyword -- \"edge\". +gv_keyword -- \"graph\". +gv_keyword -- \"node\". +gv_keyword -- \"strict\". +gv_keyword -- \"subgraph\". + + + +%! gv_node_id(+NodeId:compound)// . +% GraphViz node identifiers can be of the following two types: +% 1. A GraphViz identifier, see gv_id//1. +% 2. A GraphViz identifier plus a GraphViz port indicator, see gv_port//0. +% +% @tbd Add support for GraphViz port indicators +% inside GraphViz node identifiers. + +gv_node_id(Id) -- gv_id(Id), !. +%gv_node_id(_) -- gv_id(_), gv_port. +gv_node_id(Id) -- {type_error(gv_node_id, Id)}. + + + +%! gv_numeral(-Number)// is det. +% ```bnf +% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? ) +% ``` + +gv_numeral(N) -- + (\"-\" - {Sg = -1} ; {Sg = 1}), + ( \".\" + - {I = 0}, +(digit, Ds), {pos_frac(Ds, Frac)} + ; +(digit, Ds1), {pos_sum(Ds1, I)}, + (\".\" - *(digit, Ds2), {pos_frac(Ds2, Frac)} ; {Frac = 0.0}) + ), + {N is Sg * (I + Frac)}. + + + +%! gv_port// is det. + +gv_port -- gv_port_location, (gv_port_angle ; \"\"). +gv_port -- gv_port_angle, (gv_port_location ; \"\"). +gv_port -- \":\", gv_compass_pt(_). + +gv_port_angle -- \"@\", gv_id(_). + +gv_port_location -- \":\", gv_id(_). +gv_port_location -- \":[\", gv_id(_), \",\", gv_id(_), \"]\". + + + +%! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . +% ``` +% compass_pt : ( n | ne | e | se | s | sw | w | nw | c | _ ) +% ``` + +gv_compass_pt('_') -- \"_\". +gv_compass_pt(c) -- \"c\". +gv_compass_pt(e) -- \"e\". +gv_compass_pt(n) -- \"n\". +gv_compass_pt(ne) -- \"ne\". +gv_compass_pt(nw) -- \"nw\". +gv_compass_pt(s) -- \"s\". +gv_compass_pt(se) -- \"se\". +gv_compass_pt(sw) -- \"sw\". +gv_compass_pt(w) -- \"w\". diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl new file mode 100644 index 0000000..b5c1368 --- /dev/null +++ b/prolog/gv/gv_html.pl @@ -0,0 +1,255 @@ +:- module( + gv_html, + [ + gv_html_like_label//1 % +Content:compound + ] +). + +/**  GraphViz: HTML-like labels + +Grammar taken from the GraphViz Web site: + +``` +label : text + | table +text : textitem + | text textitem +textitem : string + |  + |  text  + |  text  + |  text  + |  text  + |  text  + |  text  + |  text  + |  text  +table : [  ]  rows  [  ] +rows : row + | rows row + | rows  row +row:  cells  +cells : cell + | cells cell + | cells  cell +cell:  label  + |    +``` + +--- + +@author Wouter Beek +@see http://www.graphviz.org/content/node-shapes#html +@version 2015/07, 2015/12 +*/ + +:- use_module(library(dcg/dcg_ext)). +:- use_module(library(html/html_dcg)). + + + + + +%! gv_html_like_label(+Content:compound)// is det. + +gv_html_like_label(Content) -- \"\". + + + +%! cell(+Contents:compound)// is det. +% Supported attributes for `TD`: +% - `ALIGN=\"CENTER|LEFT|RIGHT|TEXT\"` +% - `BALIGN=\"CENTER|LEFT|RIGHT\"` +% - `BGCOLOR=\"color\"` +% - `BORDER=\"value\"` +% - `CELLPADDING=\"value\"` +% - `CELLSPACING=\"value\"` +% - `COLOR=\"color\"` +% - `COLSPAN=\"value\"` +% - `FIXEDSIZE=\"FALSE|TRUE\"` +% - `GRADIENTANGLE=\"value\"` +% - `HEIGHT=\"value\"` +% - `HREF=\"value\"` +% - `ID=\"value\"` +% - `PORT=\"portName\"` +% - `ROWSPAN=\"value\"` +% - `SIDES=\"value\"` +% - `STYLE=\"value\"` +% - `TARGET=\"value\"` +% - `TITLE=\"value\"` +% - `TOOLTIP=\"value\"` +% - `VALIGN=\"MIDDLE|BOTTOM|TOP\"` +% - `WIDTH=\"value\"` +% +% Supported attributes for `IMG`: +% - `SCALE=\"FALSE|TRUE|WIDTH|HEIGHT|BOTH\"` +% - `SRC=\"value\"` + +cell(td(Contents)) -- !, + cell(td([],Contents)). +cell(td(Attrs1,Image)) -- + {(Image =.. [img,Attrs2] - true ; Image == img - Attrs2 = [])}, !, + html_element(td, Attrs1, html_element(img,Attrs2)). +cell(td(Attrs,Contents)) -- + html_element(td, Attrs, label(Contents)). + + + +%! cells(+Contents:list(compound))// is det. + +cells([H,vr|T]) -- !, cell(H), html_element(vr), cells(T). +cells([H|T]) -- !, cell(H), cells(T). +cells([]) -- \"\". + + + +%! label(+Content:compound)// is det. +% GraphViz HTML-like label. + +label(Content) -- table(Content), !. +label(Content) -- text(Content). + + + +%! row(+Contents:compound)// is det. + +row(tr(Contents)) -- html_element(tr, [], cells(Contents)). + + + +%! rows(+Contents:list)// is det. + +rows([hr|T]) -- !, html_element(hr), rows(T). +rows([H|T]) -- row(H), !, rows(T). +rows([]) -- \"\". + + + +%! table(+Contents:compound)// is det. +% ``` +% table : [  ]  rows  [  ] +% ``` +% +% Supported attributes for `TABLE`: +% - `ALIGN=\"CENTER|LEFT|RIGHT\"` +% - `BGCOLOR=\"color\"` +% - `BORDER=\"value\"` +% - `CELLBORDER=\"value\"` +% - `CELLPADDING=\"value\"` +% - `CELLSPACING=\"value\"` +% - `COLOR=\"color\"` +% - `COLUMNS=\"value\"` +% - `FIXEDSIZE=\"FALSE|TRUE\"` +% - `GRADIENTANGLE=\"value\"` +% - `HEIGHT=\"value\"` +% - `HREF=\"value\"` +% - `ID=\"value\"` +% - `PORT=\"portName\"` +% - `ROWS=\"value\"` +% - `SIDES=\"value\"` +% - `STYLE=\"value\"` +% - `TARGET=\"value\"` +% - `TITLE=\"value\"` +% - `TOOLTIP=\"value\"` +% - `VALIGN=\"MIDDLE|BOTTOM|TOP\"` +% - `WIDTH=\"value\"` +% +% Supported attributes for `FONT`: +% - `COLOR=\"color\"` +% Sets the color of the font within the scope of `...`, +% or the border color of the table or cell within the scope of +% `...`, or `...`. +% This color can be overridden by a `COLOR` attribute in descendents. +% By default, the font color is determined by the `fontcolor` attribute +% of the corresponding node, edge or graph, and the border color is +% determined by the color attribute of the corresponding node, edge or +% graph. +% - `FACE=\"fontname\"` +% - `POINT-SIZE=\"value\"` + +table(table(Contents)) -- !, + table(table([],Contents)). +table(table(Attrs,Contents)) -- !, + html_element(table, Attrs, rows(Contents)). +table(font(Table)) -- !, + table(font([],Table)). +table(font(Attrs1,Table)) -- + {( Table =.. [table,Attrs2,Contents] + - true + ; Table =.. [table,Contents] + - Attrs2 = [] + )}, + html_element(font, Attrs1, table(table(Attrs2,Contents))). + + + +%! text(+Contents:list)// . +% ``` +% text : textitem +% | text textitem +% ``` + +text(Contents) -- {is_list(Contents)}, !, '+'(textitem, Contents). +text(Content) -- text([Content]). + + + +%! textitem(+Content:compound)// . +% ``` +% textitem : string +% |  +% |  text  +% |  text  +% |  text  +% |  text  +% |  text  +% |  text  +% |  text  +% |  text  +% ``` +% +% Supported attributes for BR: +% * `ALIGN=\"CENTER|LEFT|RIGHT\"` +% +% Supported attributes for FONT: +% * COLOR=\"color\" +% * FACE=\"fontname\" +% * POINT-SIZE=\"value\" + +textitem(br(Attrs)) -- !, + html_element(br, Attrs). +% Compound term: parser. +textitem(Compound) -- + {var(Compound)}, !, + html_element(Name, _, text(Content)), + { + supported_html_element(Name), + Compound =.. [Name,Content] + }. +% Compound term: generator. +textitem(Compound) -- + { + Compound =.. [Name,Content], !, + supported_html_element(Name) + }, + html_element(Name, _, text(Content)). +textitem(String) -- + html_string(String). + + + + + +% HELPERS % + +%! supported_html_element(+Name:atom) is semidet. +%! supported_html_element(-Name:atom) is multi. + +supported_html_element(b). +supported_html_element(font). +supported_html_element(i). +supported_html_element(o). +supported_html_element(s). +supported_html_element(sub). +supported_html_element(sup). +supported_html_element(u). diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl new file mode 100644 index 0000000..4382aa6 --- /dev/null +++ b/prolog/tree/tree_viz.pl @@ -0,0 +1,65 @@ +:- module( + tree_viz, + [ + tree_export_graph/2, % +Tree, ExportG + tree_export_graph/3, % +Tree, ExportG, +Opts + tree_viz/2, % +Tree, ?File + tree_viz/3 % +Tree, ?File, +Opts + ] +). + +/**  Tree visualization + +Export trees to GraphViz. + +@author Wouter Beek +@version 2016/01-2016/02 +*/ + +:- use_module(library(graph/build_export_graph)). +:- use_module(library(gv/gv_file)). +:- use_module(library(ordsets)). +:- use_module(library(tree/l_tree)). +:- use_module(library(tree/s_tree)). + +:- predicate_options(tree_export_graph/3, 3, [ + pass_to(build_export_graph/4, 4) + ]). +:- predicate_options(tree_viz/3, 3, [ + pass_to(graph_viz/3, 3), + pass_to(tree_to_graph/3, 3) + ]). + + + + + +%! tree_export_graph(+Tree, -ExportG) is det. +%! tree_export_graph(+Tree, -ExportG, +Opts) is det. +% Opts are passed to build_export_graph/4. + +tree_export_graph(Tree, ExportG) :- + tree_export_graph(Tree, ExportG, []). + +tree_export_graph(Tree, ExportG, Opts) :- + ( is_s_tree(Tree) + - tree_to_graph(Tree, G) + ; is_l_tree(Tree) + - l_tree_to_graph(Tree, G) + ), + build_export_graph(G, ExportG, Opts). + + + +%! tree_viz(+Tree, ?File) is det. +%! tree_viz(+Tree, ?File, +Opts) is det. +% Stores the given tree term into a GraphViz file. +% +% Options are passed to export_graph_to_gv_file/3, tree_to_graph/3. + +tree_viz(Tree, File) :- + tree_viz(Tree, File, []). + +tree_viz(Tree, File, Opts) :- + tree_export_graph(Tree, ExportG, Opts), + graph_viz(ExportG, File, Opts). diff --git a/test/gv_attrs.log b/test/gv_attrs.log new file mode 100644 index 0000000..a9c6010 --- /dev/null +++ b/test/gv_attrs.log @@ -0,0 +1,169 @@ +assert(gv_attr('Damping',[graph],[double],'0.99','0.0','neato only')). +assert(gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only')). +assert(gv_attr('URL',[cluster,edge,graph,node],[escString],_,'','svg, postscript, map only')). +assert(gv_attr('_background',[graph],[string],_,'','')). +assert(gv_attr(area,[cluster,node],[double],'1.0','0','patchwork only')). +assert(gv_attr(arrowhead,[edge],[arrowType],normal,'','')). +assert(gv_attr(arrowsize,[edge],[double],'1.0','0.0','')). +assert(gv_attr(arrowtail,[edge],[arrowType],normal,'','')). +assert(gv_attr(bb,[graph],[rect],'','','write only')). +assert(gv_attr(bgcolor,[cluster,graph],[color,colorList],_,'','')). +assert(gv_attr(center,[graph],[bool],false,'','')). +assert(gv_attr(charset,[graph],[string],'\"UTF-8\"','','')). +assert(gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only')). +assert(gv_attr(color,[cluster,edge,node],[color,colorList],black,'','')). +assert(gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','')). +assert(gv_attr(comment,[edge,graph,node],[string],'','','')). +assert(gv_attr(compound,[graph],[bool],false,'','dot only')). +assert(gv_attr(concentrate,[graph],[bool],false,'','')). +assert(gv_attr(constraint,[edge],[bool],true,'','dot only')). +assert(gv_attr(decorate,[edge],[bool],false,'','')). +assert(gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only')). +assert(gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only')). +assert(gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only')). +assert(gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','')). +assert(gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only')). +assert(gv_attr(distortion,[node],[double],'0.0','-100.0','')). +assert(gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only')). +assert(gv_attr(edgeURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(edgehref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(edgetarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only')). +assert(gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot')). +assert(gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','')). +assert(gv_attr(fixedsize,[node],[bool,string],false,'','')). +assert(gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','')). +assert(gv_attr(fontname,[cluster,edge,graph,node],[string],'\"Times-Roman\"','','')). +assert(gv_attr(fontnames,[graph],[string],'','','svg only')). +assert(gv_attr(fontpath,[graph],[string],'system-dependent','','')). +assert(gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','')). +assert(gv_attr(forcelabels,[graph],[bool],true,'','')). +assert(gv_attr(gradientangle,[cluster,graph,node],[int],'','','')). +assert(gv_attr(group,[node],[string],'','','dot only')). +assert(gv_attr(headURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(head_lp,[edge],[point],'','','write only')). +assert(gv_attr(headclip,[edge],[bool],true,'','')). +assert(gv_attr(headhref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(headlabel,[edge],[lblString],'','','')). +assert(gv_attr(headport,[edge],[portPos],center,'','')). +assert(gv_attr(headtarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(height,[node],[double],'0.5','0.02','')). +assert(gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')). +assert(gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')). +assert(gv_attr(image,[node],[string],'','','')). +assert(gv_attr(imagepath,[graph],[string],'','','')). +assert(gv_attr(imagescale,[node],[bool,string],false,'','')). +assert(gv_attr(inputscale,[graph],[double],_,'','fdp, neato only')). +assert(gv_attr(label,[cluster,edge,graph,node],[lblString],'\"\\\\N\" (nodes)\"\" (otherwise)','','')). +assert(gv_attr(labelURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(label_scheme,[graph],[int],'0','0','sfdp only')). +assert(gv_attr(labelangle,[edge],[double],'-25.0','-180.0','')). +assert(gv_attr(labeldistance,[edge],[double],'1.0','0.0','')). +assert(gv_attr(labelfloat,[edge],[bool],false,'','')). +assert(gv_attr(labelfontcolor,[edge],[color],black,'','')). +assert(gv_attr(labelfontname,[edge],[string],'\"Times-Roman\"','','')). +assert(gv_attr(labelfontsize,[edge],[double],'14.0','1.0','')). +assert(gv_attr(labelhref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(labeljust,[cluster,graph],[string],'\"c\"','','')). +assert(gv_attr(labelloc,[cluster,graph,node],[string],'\"t\"(clusters)\"b\"(root graphs)\"c\"(nodes)','','')). +assert(gv_attr(labeltarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(landscape,[graph],[bool],false,'','')). +assert(gv_attr(layer,[cluster,edge,node],[layerRange],'','','')). +assert(gv_attr(layerlistsep,[graph],[string],'\",\"','','')). +assert(gv_attr(layers,[graph],[layerList],'','','')). +assert(gv_attr(layerselect,[graph],[layerRange],'','','')). +assert(gv_attr(layersep,[graph],[string],'\" :\\\\t\"','','')). +assert(gv_attr(layout,[graph],[string],'','','')). +assert(gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only')). +assert(gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only')). +assert(gv_attr(levelsgap,[graph],[double],'0.0','','neato only')). +assert(gv_attr(lhead,[edge],[string],'','','dot only')). +assert(gv_attr(lheight,[cluster,graph],[double],'','','write only')). +assert(gv_attr(lp,[cluster,edge,graph],[point],'','','write only')). +assert(gv_attr(ltail,[edge],[string],'','','dot only')). +assert(gv_attr(lwidth,[cluster,graph],[double],'','','write only')). +assert(gv_attr(margin,[cluster,graph,node],[double,point],'','','')). +assert(gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only')). +assert(gv_attr(mclimit,[graph],[double],'1.0','','dot only')). +assert(gv_attr(mindist,[graph],[double],'1.0','0.0','circo only')). +assert(gv_attr(minlen,[edge],[int],'1','0','dot only')). +assert(gv_attr(mode,[graph],[string],major,'','neato only')). +assert(gv_attr(model,[graph],[string],shortpath,'','neato only')). +assert(gv_attr(mosek,[graph],[bool],false,'','neato only')). +assert(gv_attr(nodesep,[graph],[double],'0.25','0.02','')). +assert(gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','')). +assert(gv_attr(normalize,[graph],[double,bool],false,'','not dot')). +assert(gv_attr(notranslate,[graph],[bool],false,'','neato only')). +assert(gv_attr('nslimit nslimit1',[graph],[double],'','','dot only')). +assert(gv_attr(ordering,[graph,node],[string],'','','dot only')). +assert(gv_attr(orientation,[node],[double],'0.0','360.0','')). +assert(gv_attr(orientation,[graph],[string],'','','')). +assert(gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','')). +assert(gv_attr(overlap,[graph],[string,bool],true,'','not dot')). +assert(gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only')). +assert(gv_attr(overlap_shrink,[graph],[bool],true,'','prism only')). +assert(gv_attr(pack,[graph],[bool,int],false,'','')). +assert(gv_attr(packmode,[graph],[packMode],node,'','')). +assert(gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','')). +assert(gv_attr(page,[graph],[double,point],'','','')). +assert(gv_attr(pagedir,[graph],[pagedir],'BL','','')). +assert(gv_attr(pencolor,[cluster],[color],black,'','')). +assert(gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','')). +assert(gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','')). +assert(gv_attr(pin,[node],[bool],false,'','fdp, neato only')). +assert(gv_attr(pos,[edge,node],[point,splineType],'','','')). +assert(gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only')). +assert(gv_attr(quantum,[graph],[double],'0.0','0.0','')). +assert(gv_attr(rank,[subgraph],[rankType],'','','dot only')). +assert(gv_attr(rankdir,[graph],[rankdir],'TB','','dot only')). +assert(gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only')). +assert(gv_attr(ratio,[graph],[double,string],'','','')). +assert(gv_attr(rects,[node],[rect],'','','write only')). +assert(gv_attr(regular,[node],[bool],false,'','')). +assert(gv_attr(remincross,[graph],[bool],true,'','dot only')). +assert(gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only')). +assert(gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only')). +assert(gv_attr(root,[graph,node],[string,bool],'(graphs)false(nodes)','','circo, twopi only')). +assert(gv_attr(rotate,[graph],[int],'0','','')). +assert(gv_attr(rotation,[graph],[double],'0','','sfdp only')). +assert(gv_attr(samehead,[edge],[string],'','','dot only')). +assert(gv_attr(sametail,[edge],[string],'','','dot only')). +assert(gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','')). +assert(gv_attr(scale,[graph],[double,point],'','','not dot')). +assert(gv_attr(searchsize,[graph],[int],'30','','dot only')). +assert(gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot')). +assert(gv_attr(shape,[node],[shape],ellipse,'','')). +assert(gv_attr(shapefile,[node],[string],'','','')). +assert(gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only')). +assert(gv_attr(sides,[node],[int],'4','0','')). +assert(gv_attr(size,[graph],[double,point],'','','')). +assert(gv_attr(skew,[node],[double],'0.0','-100.0','')). +assert(gv_attr(smoothing,[graph],[smoothType],'\"none\"','','sfdp only')). +assert(gv_attr(sortv,[cluster,graph,node],[int],'0','0','')). +assert(gv_attr(splines,[graph],[bool,string],'','','')). +assert(gv_attr(start,[graph],[startType],'','','fdp, neato only')). +assert(gv_attr(style,[cluster,edge,graph,node],[style],'','','')). +assert(gv_attr(stylesheet,[graph],[string],'','','svg only')). +assert(gv_attr(tailURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(tail_lp,[edge],[point],'','','write only')). +assert(gv_attr(tailclip,[edge],[bool],true,'','')). +assert(gv_attr(tailhref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(taillabel,[edge],[lblString],'','','')). +assert(gv_attr(tailport,[edge],[portPos],center,'','')). +assert(gv_attr(tailtarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(target,[cluster,edge,graph,node],[escString,string],_,'','svg, map only')). +assert(gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only')). +assert(gv_attr(truecolor,[graph],[bool],'','','bitmap output only')). +assert(gv_attr(vertices,[node],[pointList],'','','write only')). +assert(gv_attr(viewport,[graph],[viewPort],'','','')). +assert(gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot')). +assert(gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','')). +assert(gv_attr(width,[node],[double],'0.75','0.01','')). +assert(gv_attr(xdotversion,[graph],[string],'','','xdot only')). +assert(gv_attr(xlabel,[edge,node],[lblString],'','','')). +assert(gv_attr(xlp,[edge,node],[point],'','','write only')). +assert(gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','')). diff --git a/test/test.pl b/test/test.pl new file mode 100644 index 0000000..83dc023 --- /dev/null +++ b/test/test.pl @@ -0,0 +1,15 @@ +%/fca +:- use_module(library(fca/fca_viz)). +%/graph +:- use_module(library(graph/build_export_graph)). +%/gv +:- use_module(library(gv/gv_attrs)). +:- use_module(library(gv/gv_attr_type)). +:- use_module(library(gv/gv_color)). +:- use_module(library(gv/gv_dom)). +:- use_module(library(gv/gv_file)). +:- use_module(library(gv/gv_graph)). +:- use_module(library(gv/gv_graph_comp)). +:- use_module(library(gv/gv_html)). +%/tree +:- use_module(library(tree/tree_viz)). ``` 25: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 6dc1cf5 å’Œå˜åŠ¨å 76ea35d  [back to content](#compare) ``` diff diff --git a/.gitignore b/.gitignore index bd24270..b25c15b 100644 --- a/.gitignore +++ b/.gitignore @@ -1,3 +1 @@ *~ -*# -*.db diff --git a/.gitmodules b/.gitmodules new file mode 100644 index 0000000..a63cbff --- /dev/null +++ b/.gitmodules @@ -0,0 +1,6 @@ +[submodule \"Prolog-Library-Collection\"] +\tpath = Prolog-Library-Collection +\turl = https://github.com/wouterbeek/Prolog-Library-Collection.git +[submodule \"plHtml\"] +\tpath = plHtml +\turl = https://github.com/wouterbeek/plHtml.git diff --git a/LICENSE.txt b/LICENSE.txt deleted file mode 100644 index c7b7798..0000000 --- a/LICENSE.txt +++ /dev/null @@ -1,21 +0,0 @@ -The MIT License (MIT) - -Copyright (c) 2015 Wouter Beek - -Permission is hereby granted, free of charge, to any person obtaining a copy -of this software and associated documentation files (the \"Software\"), to deal -in the Software without restriction, including without limitation the rights -to use, copy, modify, merge, publish, distribute, sublicense, and/or sell -copies of the Software, and to permit persons to whom the Software is -furnished to do so, subject to the following conditions: - -The above copyright notice and this permission notice shall be included in -all copies or substantial portions of the Software. - -THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR -IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, -FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE -AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER -LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, -OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN -THE SOFTWARE. diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection new file mode 160000 index 0000000..5b34b01 --- /dev/null +++ b/Prolog-Library-Collection @@ -0,0 +1 @@ +Subproject commit 5b34b01ab0cc82a56e6fd90fc26e75da22f5a0fe diff --git a/README.md b/README.md deleted file mode 100644 index 23a45db..0000000 --- a/README.md +++ /dev/null @@ -1,151 +0,0 @@ -plGraphViz -========== - -This library allows you to easily export graphs represented as Prolog terms -using [GraphViz](http://www.graphviz.org/), an advanced graph drawing library. -The Prolog terms have the following form: - -~~~prolog -graph(Vertices, Edges, GraphAttrs) -~~~ - -`Vertices` and `Edges` are lists of compound terms of the following form: - -~~~prolog -vertex(Id, VertexAttrs) -edge(FromId, ToId, EdgeAttrs) -~~~ - -`Id` identifies a vertex and may or may not occur in any of the edges -(i.e., unconnected vertices are allowed). -`FromId` and `ToId` may occur in the list of vertices, -in order to draw an edge between vertices with set attributes. - -Attributes have the form `Name=Value`. -`GraphAttrs` are attributes of the graph. -`VertexAttrs` are attributes of the vertex. -`EdgeAttrs` are attributes of the edge. - -Attribute values are given as Prolog terms as well, -and are type-checked before exporting. -Many of the GraphViz attributes are supported. -New ones are added on an as-needed bases -(open an issue on Github if you want to see a specific feature added!). -HTML-like labels are supported, allowing complex tables to be shown -inside vertices. - ---- - -### Installation - -~~~shell -$ git clone https://github.com/wouterbeek/plGraphViz.git -$ cd plGraphViz -$ git submodule update --init -~~~ - -### Example - -~~~prolog -$ swipl run.pl -?- export_graph_to_gv_file( - graph([vertex(1,[]),vertex(2,[])],[edge(1,2,[])],[]), - File, - [method(sfdp),output(png)] - ). - File = 'PATH/plGraphViz/data/tmp.png' -~~~ - -![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example1.png \"Example graph.\") - -The graphic can be saved to a different file by instantiating -the `File` argument. - ---- - -### 'Method' option - -Option `method(+atom)` sets the drawing method that is used by GraphViz - to place the vertices and edges. -The following values are supported. - -| **Value** | **Description** | -| `circo` | Circular layout. | -| `dot` (default) | Directed graph. | -| `fdp` | Undirected graph. | -| `neato` | Undirected graph. | -| `osage` | Tree map. | -| `sfdp` | Large undirected graph. | -| `twopi` | Radical layouts. | - ---- - -### 'Output' option - -Option `output(+atom)` sets the type of file the graph is written to. -The following values are supported. - -| **Value** | **Description** | -|:---------------------:|:--------------------------------------| -| `bmp` | Windows Bitmap Format | -| `canon` | | -| `dot` | | -| `gv`, `xdot`, `xdot1.2`, `xdot1.4` | DOT | -| `cgimage` | CGImage bitmap format | -| `cmap` | Client-side imagemap (deprecated) | -| `eps` | Encapsulated PostScript | -| `exr` | OpenEXR | -| `fig` | | -| `gd`, `gd2` | GD/GD2 formats | -| `gif` | | -| `gtk` | GTK canvas | -| `ico` | Icon Image File Format | -| `imap` | | -| `cmapx` | Server-side and client-side imagemaps | -| `imap_np`, `cmapx_np` | Server-side and client-side imagemaps | -| `ismap` | Server-side imagemap (deprecated) | -| `jp2` | JPEG 2000 | -| `jpg`, `jpeg`, `jpe` | JPEG | -| `pct`, `pict` | PICT | -| `pdf` (default) | Portable Document Format (PDF) | -| `pic` | Kernighan's PIC graphics language | -| `plain`, `plain-ext` | Simple text format | -| `png` | Portable Network Graphics format | -| `pov` | POV-Ray markup language (prototype) | -| `ps` | PostScript | -| `ps2` | PostScript for PDF | -| `psd` | PSD | -| `sgi` | SGI | -| `svg`, `svgz` | Scalable Vector Graphics | -| `tga` | Truevision TGA | -| `tif`, `tiff` | TIFF (Tag Image File Format) | -| `tk` | TK graphics | -| `vml`, `vmlz` | Vector Markup Language (VML) | -| `vrml` | VRML | -| `wbmp` | Wireless BitMap format | -| `webp` | Image format for the Web | -| `xlib`, `x11` | Xlib canvas | - ---- - -### HTML-like labels - -Example of using HTML-like labels: - -~~~prolog -export_graph_to_gv_file( - graph( - [vertex(1,[]),vertex(2,[label=html(table([tr([td(a),td(b)]),tr([td(c),td(d)])]))])], - [edge(1,2,[label='From 1 to 2.'])], - [] - ), - File, - [] -). -~~~ - -![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example2.png \"Example graph with HTML-like labels.\") - ---- - -Developed during 2013-2014 by [Wouter Beek](http://www.wouterbeek.com). diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl deleted file mode 100644 index bcc7654..0000000 --- a/data/gv_attrs_scrape.pl +++ /dev/null @@ -1,119 +0,0 @@ -:- module( - gv_attrs_scrape, - [ - gv_attrs_scrape/1 % +File - ] -). - -/**  GraphViz: Scrape attributes - -Writes compound terms of the following form to file: - -```prolog -gv_attr( - ?Name, - ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])), - ?Types:list(atom), - ?Default, - ?Minimum, - ?Notes -) is nondet. -``` - -@author Wouter Beek -@version 2015/10, 2016/07 -*/ - -:- use_module(library(apply)). -:- use_module(library(dcg/dcg_ext)). -:- use_module(library(debug)). -:- use_module(library(gv/gv_attr_type)). -:- use_module(library(http/http_download)). -:- use_module(library(lists)). -:- use_module(library(os/io)). -:- use_module(library(pl_term)). -:- use_module(library(print_ext)). -:- use_module(library(xpath)). -:- use_module(library(xpath/xpath_table)). -:- use_module(library(yall)). - - - - - -%! gv_attrs_scrape(+File) is det. - -gv_attrs_scrape(File):- - debug(gv, \"Updating the GraphViz attributes table.\", []), - call_to_stream(File, [In,Meta,Meta]gv_attrs_download(In)). - - -gv_attrs_download(Write):- - gv_attrs_iri(Iri), - html_download(Iri, Dom), - xpath_chk(Dom, //table(@align=lower_case(center)), TableDom), - xpath_table(TableDom, _, Rows), - maplist(write_attr_row(Write), Rows). - - -write_attr_row(Write, [Name,UsedBy1,Types1,Default1,Minimum,Notes]):- - atom_phrase(translate_usedby(UsedBy2), UsedBy1), - once(atom_phrase(translate_type(Types2), Types1)), - sort(UsedBy2, UsedBy3), - translate_default(Default1, Default2), - with_output_to( - Write, - write_fact(gv_attr(Name, UsedBy3, Types2, Default2, Minimum, Notes)) - ). - -gv_attrs_iri('http://www.graphviz.org/doc/info/attrs.html'). - - - - - -% HELPERS % - -%! translate_default(+Default1, -Default2) is det. - -% The empty string is represented by the empty atom. -translate_default('\"\"', ''):- !. -% The absence of a default value is represented by an uninstantiated variable. -translate_default('', _):- !. -translate_default(Default, Default). - - - -%! translate_type(-Types:list(atom))// is det. - -translate_type([H|T]) -- - gv_attr_type(H), - whites, - translate_type(T). -translate_type([H]) -- - gv_attr_type(H). -translate_type([]) -- \"\". - - - -%! translated_usedby( -%! -UsedBy:list(oneof([cluster,edge,graph,node,subgraph])) -%! )// is det. - -translate_usedby([cluster|T]) -- - \"C\", !, - translate_usedby(T). -translate_usedby([edge|T]) -- - \"E\", !, - translate_usedby(T). -translate_usedby([graph|T]) -- - \"G\", !, - translate_usedby(T). -translate_usedby([node|T]) -- - \"N\", !, - translate_usedby(T). -translate_usedby([subgraph|T]) -- - \"S\", !, - translate_usedby(T). -translate_usedby([]) -- - \"\". diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl deleted file mode 100644 index 102a02a..0000000 --- a/data/gv_color_scrape.pl +++ /dev/null @@ -1,52 +0,0 @@ -:- module( - gv_color_scrape, - [ - gv_color_scrape/1 % +File - ] -). - -/**  GraphViz: Scrape colors - -@author Wouter Beek -@version 2015/10, 2016/07 -*/ - -:- use_module(library(apply)). -:- use_module(library(debug)). -:- use_module(library(http/http_download)). -:- use_module(library(lists)). -:- use_module(library(os/io)). -:- use_module(library(pl_term)). -:- use_module(library(print_ext)). -:- use_module(library(xpath)). -:- use_module(library(xpath/xpath_table)). -:- use_module(library(yall)). - - - - - -%! gv_color_scrape(+File) is det. - -gv_color_scrape(File):- - debug(io, \"Updating the GraphViz color table.\", []), - call_to_stream(File, [In,Meta,Meta]gv_color_download(In)). - - -gv_color_download(Write):- - gv_color_iri(Iri), - html_download(Iri, Dom), - xpath_chk(Dom, //table(1), TableDom1), - xpath_chk(Dom, //table(2), TableDom2), - maplist(write_color_table(Write), [x11,svg], [TableDom1,TableDom2]). - - -write_color_table(Write, Colorscheme, TableDom):- - xpath_table(TableDom, _, Rows), - append(Rows, Cells), - forall( - member(Cell, Cells), - with_output_to(Write, write_fact(gv_color(Colorscheme, Cell))) - ). - -gv_color_iri('http://www.graphviz.org/doc/info/colors.html'). diff --git a/example1.png b/example1.png deleted file mode 100644 index 31e7ba6..0000000 Binary files a/example1.png and /dev/null differ diff --git a/example2.png b/example2.png deleted file mode 100644 index 6e44b16..0000000 Binary files a/example2.png and /dev/null differ diff --git a/gv_attr_type.pl b/gv_attr_type.pl new file mode 100644 index 0000000..7a64c82 --- /dev/null +++ b/gv_attr_type.pl @@ -0,0 +1,417 @@ +:- module( + gv_attr_type, + [ + gv_attr_type/1, % ?Type:atom + addDouble//1, % +Double:float + addPoint//1, % +Point:compound + arrowType//1, % +ArrowType:atom + bool//1, % +Boolean:boolean + clusterMode//1, % +ClusterMode:atom + dirType//1, % +DirectionType:oneof([back,both,forward,none]) + double//1, % +Double:float + doubleList//1, % +Doubles:list(float) + escString//1, + %layerList//1, + %layerRange//1, + lblString//1, + int//1, % +Integer:integer + outputMode//1, % +OutputMode:atom + %packMode//1, + pagedir//1, % +Pagedir:atom + point//1, % +Point:compound + pointList//1, % +Points:list(compound) + %portPos//1, + quadType//1, % +QuadType:atom + rankType//1, % +RankType:atom + rankdir//1, % +RankDirection:atom + rect//1, % +Rectangle:compound + shape//1, + smoothType//1, % +SmoothType:atom + %splineType//1, + %startType//1, + string//1, % ?Content:atom + style//2 % +Context:oneof([cluster,edge,node]) + % +Style:atom + %viewPort//1 + ] +). +:- reexport( + plGraphViz(gv_color), + [ + color//1, % +Color:compound + colorList//1 % +ColorList:list(compound) + ] +). + +/**  GraphViz attribute types + +@author Wouter Beek +@version 2014/06 +*/ + +:- use_module(dcg(dcg_abnf)). +:- use_module(dcg(dcg_cardinal)). +:- use_module(dcg(dcg_content)). + +:- use_module(plGraphViz(gv_html)). + + + +%! gv_attr_type(?Type:atom) is nondet. + +gv_attr_type(addDouble). +gv_attr_type(addPoint). +gv_attr_type(arrowType). +gv_attr_type(bool). +gv_attr_type(color). +gv_attr_type(colorList). +gv_attr_type(clusterMode). +gv_attr_type(dirType). +gv_attr_type(double). +gv_attr_type(doubleList). +gv_attr_type(escString). +gv_attr_type(layerList). +gv_attr_type(layerRange). +gv_attr_type(lblString). +gv_attr_type(int). +gv_attr_type(outputMode). +gv_attr_type(packMode). +gv_attr_type(pagedir). +gv_attr_type(point). +gv_attr_type(pointList). +gv_attr_type(portPos). +gv_attr_type(quadType). +gv_attr_type(rankType). +gv_attr_type(rankdir). +gv_attr_type(rect). +gv_attr_type(shape). +gv_attr_type(smoothType). +gv_attr_type(splineType). +gv_attr_type(startType). +gv_attr_type(string). +gv_attr_type(style). +gv_attr_type(viewPort). + + +%! addDouble(+Float:float)// . +% An *addDouble* is represented by a Prolog float. + +addDouble(Float) -- + '?'(`+`), + double(Float). + + +%! addPoint(+Point:compound)// . +% An *addPoint* is represented by a compound of the following form: +% `point(X:float,Y:float,InputOnly:boolean)`. + +addPoint(Point) -- + '?'(`+`), + point(Point). + + +%! arrowType(+ArrowType:atom)// . + +arrowType(V) -- + {arrowType(V)}, + atom(V). + +arrowType(V):- + primitive_shape(V). +arrowType(V):- + derived(V). +arrowType(V):- + backwards_compatible(V). + +primitive_shape(box). +primitive_shape(crow). +primitive_shape(circle). +primitive_shape(diamond). +primitive_shape(dot). +primitive_shape(inv). +primitive_shape(none). +primitive_shape(normal). +primitive_shape(tee). +primitive_shape(vee). + +derived(odot). +derived(invdot). +derived(invodot). +derived(obox). +derived(odiamond). + +backwards_compatible(ediamond). +backwards_compatible(empty). +backwards_compatible(halfopen). +backwards_compatible(invempty). +backwards_compatible(open). + + +bool(false) -- `false`. +bool(false) -- `no`. +bool(true) -- `true`. +bool(true) -- `yes`. + + +%! clusterMode(+ClusterMode:atom)// . + +clusterMode(V) -- + {clusterMode(V)}, + atom(V). + +clusterMode(global). +clusterMode(local). +clusterMode(none). + + +%! dirType(+DirectionType:oneof([back,both,forward,none]))// . + +dirType(DirType) -- + {dirType(DirType)}, + atom(DirType). + +dirType(back). +dirType(both). +dirType(forward). +dirType(none). + + +double(Double1) -- + % float//1 will check for float type. + {Double2 is Double1 * 1.0}, + float(Double2). + + +doubleList([H|T]) -- + double(H), + '*'(doubleList1, T). + +doubleList1(Float) -- + `:`, + double(Float). + + +%! escString(+String:atom)// . +% @tbd Support for context-dependent replacements. + +escString(String) -- + atom(String). + + +% @tbd layerList + + +% @tbd layerRange + + +lblString(V) -- + escString(V). +lblString(V) -- + gv_html_like_label(V). + + +int(V) -- + integer(V). + + +outputMode(V) -- + {outputMode(V)}, + atom(V). + +outputMode(breadthfirst). +outputMode(edgesfirst). +outputMode(nodesfirst). + + +% @tbd packMode + + +pagedir(V) -- + {pagedir(V)}, + atom(V). + +pagedir('BL'). +pagedir('BR'). +pagedir('LB'). +pagedir('LT'). +pagedir('RB'). +pagedir('RT'). +pagedir('TL'). +pagedir('TR'). + + +%! point(+Point:compound)// . +% A *point* is represented by a compound of the following form: +% `point(X:float,Y:float,InputOnly:boolean)`. + +point(point(X,Y,InputOnly)) -- + float(X), + `,`, + float(Y), + input_only(InputOnly). + +input_only(false) -- []. +input_only(true) -- `!`. + + +pointList(Points) -- + '*'(point, Points). + + +% @tbd portPos + + +quadType(V) -- + {quadType(V)}, + atom(V). + +quadType(fast). +quadType(none). +quadType(normal). + + +rankType(V) -- + {rankType(V)}, + atom(V). + +rankType(max). +rankType(min). +rankType(same). +rankType(sink). +rankType(source). + + +rankdir(V) -- + {rankdir(V)}, + atom(V). + +rankdir('BT'). +rankdir('LR'). +rankdir('RL'). +rankdir('TB'). + + +rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -- + float(LowerLeftX), `,`, + float(LowerLeftY), `,`, + float(UpperRightX), `,`, + float(UpperRightY). + + +shape(V) -- + {polygon_based_shape(V)}, + atom(V). + +polygon_based_shape(assembly). +polygon_based_shape(box). +polygon_based_shape(box3d). +polygon_based_shape(cds). +polygon_based_shape(circle). +polygon_based_shape(component). +polygon_based_shape(diamond). +polygon_based_shape(doublecircle). +polygon_based_shape(doubleoctagon). +polygon_based_shape(egg). +polygon_based_shape(ellipse). +polygon_based_shape(fivepoverhang). +polygon_based_shape(folder). +polygon_based_shape(hexagon). +polygon_based_shape(house). +polygon_based_shape(insulator). +polygon_based_shape(invhouse). +polygon_based_shape(invtrapezium). +polygon_based_shape(invtriangle). +polygon_based_shape(larrow). +polygon_based_shape(lpromoter). +polygon_based_shape('Mcircle'). +polygon_based_shape('Mdiamond'). +polygon_based_shape('Msquare'). +polygon_based_shape(none). +polygon_based_shape(note). +polygon_based_shape(noverhang). +polygon_based_shape(octagon). +polygon_based_shape(oval). +polygon_based_shape(parallelogram). +polygon_based_shape(pentagon). +polygon_based_shape(plaintext). +polygon_based_shape(point). +polygon_based_shape(polygon). +polygon_based_shape(primersite). +polygon_based_shape(promoter). +polygon_based_shape(proteasesite). +polygon_based_shape(proteinstab). +polygon_based_shape(rarrow). +polygon_based_shape(rect). +polygon_based_shape(rectangle). +polygon_based_shape(restrictionsite). +polygon_based_shape(ribosite). +polygon_based_shape(rnastab). +polygon_based_shape(rpromoter). +polygon_based_shape(septagon). +polygon_based_shape(signature). +polygon_based_shape(square). +polygon_based_shape(tab). +polygon_based_shape(terminator). +polygon_based_shape(threepoverhang). +polygon_based_shape(trapezium). +polygon_based_shape(triangle). +polygon_based_shape(tripleoctagon). +polygon_based_shape(utr). + + +smoothType(V) -- + {smoothType(V)}, + atom(V). + +smoothType(avg_dist). +smoothType(graph_dist). +smoothType(none). +smoothType(power_dist). +smoothType(rng). +smoothType(spring). +smoothType(triangle). + + +% @tbd splineType + + +% @tbd startType + + +%! string(?Content:atom)// . +% A GraphViz string. + +string(Content) -- + atom(Content). + + +%! style(?Context:oneof([cluster,edge,node]), ?Style:atom) is nondet. + +style(Context, Style) -- + {style(Context, Style)}, + atom(Style). + +style(cluster, bold). +style(cluster, dashed). +style(cluster, dotted). +style(cluster, filled). +style(cluster, rounded). +style(cluster, solid). +style(cluster, striped). +style(edge, bold). +style(edge, dashed). +style(edge, dotted). +style(edge, solid). +style(node, bold). +style(node, dashed). +style(node, diagonals). +style(node, dotted). +style(node, filled). +style(node, rounded). +style(node, solid). +style(node, striped). +style(node, wedged). + + +% @tbd viewPort + diff --git a/gv_attrs.pl b/gv_attrs.pl new file mode 100644 index 0000000..dd0145a --- /dev/null +++ b/gv_attrs.pl @@ -0,0 +1,184 @@ +:- module( + gv_attrs, + [ + gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph]) + % +Attr1:nvpair + % +Attr2:nvpair + ] +). + +/**  GraphViz attributes v2 + +@author Wouter Beek +@version 2014/06 +*/ + +:- use_module(library(apply)). +:- use_module(library(persistency)). +:- use_module(library(xpath)). + +:- use_module(dcg(dcg_content)). +:- use_module(dcg(dcg_generic)). +:- use_module(generics(db_ext)). +:- use_module(os(file_ext)). + +:- use_module(plHtml(html)). +:- use_module(plHtml(html_table)). + +:- use_module(plGraphViz(gv_attr_type)). % DCGs implementing attribute types. + +:- db_add_novel(user:prolog_file_type(log, logging)). + +%! gv_attr( +%! ?Name:atom, +%! ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])), +%! ?Types:list(atom), +%! ?Default, +%! ?Minimum, +%! ?Notes:atom +%! ) is nondet. + +:- persistent( + gv_attr( + name:atom, + used_by:list(oneof([cluster,edge,graph,node,subgraph])), + types:list(atom), + default, + minimum, + notes:atom + ) +). + +:- initialization(gv_attrs_init). + + + +gv_attr(Context, N=V, N=V):- + var(V), !, + gv_attr(N, UsedBy, _, V, _, _), + memberchk(Context, UsedBy). +gv_attr(Context, N=V1, N=V2):- + gv_attr(N, UsedBy, Types, _, Minimum, _), + memberchk(Context, UsedBy), + member(Type, Types), + ( + Type == style + - + Dcg =.. [Type,Context,V1] + ; + Dcg =.. [Type,V1] + ), + once(dcg_phrase(Dcg, V2)), + check_minimum(V1, Minimum). + +check_minimum(_, ''):- !. +check_minimum(V, Min1):- + atom_number(Min1, Min2), + Min2 =', _):- !. +translate_default(Default, Default). + + +%! translate_type(-Types:list(atom))// is det. + +translate_type([H|T]) -- + {gv_attr_type(H)}, + atom(H), + whites, + translate_type(T). +translate_type([]) -- !, []. + + +%! translated_usedby( +%! -UsedBy:list(oneof([cluster,edge,graph,node,subgraph])) +%! )// is det. + +translate_usedby([cluster|T]) -- `C`, !, translate_usedby(T). +translate_usedby([edge|T]) -- `E`, !, translate_usedby(T). +translate_usedby([graph|T]) -- `G`, !, translate_usedby(T). +translate_usedby([node|T]) -- `N`, !, translate_usedby(T). +translate_usedby([subgraph|T]) -- `S`, !, translate_usedby(T). +translate_usedby([]) -- []. + diff --git a/gv_color.pl b/gv_color.pl new file mode 100644 index 0000000..19d6e05 --- /dev/null +++ b/gv_color.pl @@ -0,0 +1,151 @@ +:- module( + gv_color, + [ + gv_color/2, % ?Colorscheme:oneof([svg,x11]) + % ?Color:atom + color//1, % +Color:compound + colorList//1 % +Pairs:list(pair(compound,float)) + ] +). + +/**  GraphViz color + +@author Wouter Beek +@tbd Color value `transparent` is only available in the output formats + ps, svg, fig, vmrl, and the bitmap formats. +@version 2014/06 +*/ + +:- use_module(library(apply)). +:- use_module(library(lists)). +:- use_module(library(persistency)). +:- use_module(library(xpath)). + +:- use_module(dcg(dcg_abnf)). +:- use_module(dcg(dcg_cardinal)). +:- use_module(dcg(dcg_content)). +:- use_module(generics(db_ext)). +:- use_module(os(file_ext)). +:- use_module(sparql(sparql_char)). + +:- use_module(plHtml(html)). +:- use_module(plHtml(html_table)). + +:- db_add_novel(user:prolog_file_type(log, logging)). + +%! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet. + +:- persistent(gv_color(colorscheme:oneof([svg,x11]),color:atom)). + +:- initialization(gv_color_init). + + + +% color(+Color:compound)// . +% A *color* is represented by a compound term of one of the following forms: +% 1. `rgb(Red:nonneg,Green:nonneg,Blue:nonneg)` +% 2. `rgba(Red:nonneg,Green:nonneg,Blue:nonneg,Alpha:nonneg)` +% 3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))` + +color(rgb(Red,Green,Blue)) -- !, + `#`, + '#'(3, hex_color, [Red,Green,Blue]). +color(rgbs(Red,Green,Blue,Alpha)) -- !, + `#`, + '#'(4, hex_color, [Red,Green,Blue,Alpha]). +color(hsv(Hue,Saturation,Value)) -- !, + '#'(3, hsv_color, [Hue,Saturation,Value]). +color(Name) -- + {gv_color(_, Name)}, + atom(Name). + +hex_color(I) -- + {W1 is I / 16}, + 'HEX'(W1), + {W2 is I mod 16}, + 'HEX'(W2). + +hsv_color(D, Head, Tail):- + format(codes(Head,Tail), '~2f', [D]). + + +%! colorList(+Pairs:list(pair(compound,float)))// . + +colorList(Pairs) -- + '+'(wc, Pairs). + +wc(Color-Float) -- + color(Color), + '?'(wc_weight(Float)). + +wc_weight(Float) -- + `;`, + float(Float). + + + +% INITIALIZATION + +%! gv_color_download is det. + +gv_color_download:- + gv_color_url(Url), + download_html(Url, Dom, [html_dialect(html4),verbose(silent)]), + xpath(Dom, //table(1), TableDom1), + xpath(Dom, //table(2), TableDom2), + maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]). + +assert_color_table(Colorscheme, TableDom):- + html_to_table(TableDom, _, Rows), + append(Rows, Cells), + forall( + member(Cell, Cells), + assert_gv_color(Colorscheme, Cell) + ). + + +%! gv_color_file(-File:atom) is det. + +gv_color_file(File):- + absolute_file_name( + data(gv_color), + File, + [access(write),file_type(logging)] + ). + + +%! gv_color_init is det. + +gv_color_init:- + gv_color_file(File), + safe_db_attach(File), + file_age(File, Age), + gv_color_update(Age). + + +%! gv_color_update(+Age:float) is det. + +% The persistent store is still fresh. +gv_color_update(Age):- + once(gv_color(_, _)), + Age GraphViz DOT generator + +DCG rules for GraphViz DOT file generation. + +Methods for writing to the GraphViz DOT format. + +In GraphViz vertices are called 'nodes'. + +@author Wouter Beek +@see http://www.graphviz.org/content/dot-language +@version 2013/07, 2013/09, 2014/03-2014/06 +*/ + +:- use_module(library(apply)). +:- use_module(library(lists)). +:- use_module(library(ordsets)). + +:- use_module(dcg(dcg_abnf)). +:- use_module(dcg(dcg_ascii)). +:- use_module(dcg(dcg_content)). +:- use_module(dcg(dcg_generic)). +:- use_module(dcg(dcg_meta)). +:- use_module(dcg(dcg_os)). + +:- use_module(plGraphViz(gv_attrs)). +:- use_module(plGraphViz(gv_html)). +:- use_module(plGraphViz(gv_numeral)). + + + +%! gv_attribute(+Attribute:nvpair)// is det. +% A single GraphViz attribute. +% We assume that the attribute has already been validated. + +gv_attribute(Name=Val) -- + gv_id(Name), `=`, gv_id(Val), `;`. + + +%! gv_attribute_list( +%! +Context:oneof([cluster,edge,graph,node,subgraph]), +%! +GraphAttributes:list(nvpair), +%! +Attributes:list(nvpair) +%! )// . +% ~~~{.abnf} +% attr_list = \"[\" [a_list] \"]\" [attr_list] +% a_list = ID \"=\" ID [\",\"] [a_list] +% ~~~ + +% Attributes occur between square brackets. +gv_attribute_list(Context, _, Attrs1) -- + {maplist(gv_attr(Context), Attrs1, Attrs2)}, + bracketed(square, '*'(gv_attribute, Attrs2)). + + +%! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . +% ~~~ +% compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) +% ~~~ + +gv_compass_pt('_') -- `_`. +gv_compass_pt(c) -- `c`. +gv_compass_pt(e) -- `e`. +gv_compass_pt(n) -- `n`. +gv_compass_pt(ne) -- `ne`. +gv_compass_pt(nw) -- `nw`. +gv_compass_pt(s) -- `s`. +gv_compass_pt(se) -- `se`. +gv_compass_pt(sw) -- `sw`. +gv_compass_pt(w) -- `w`. + + +%! gv_edge_operator(+Directed:boolean)// . +% The binary edge operator between two vertices. +% The operator that is used depends on whether the graph is directed or +% undirected. +% +% @arg Directed Whether an edge is directed (operator `-`) or +% undirected (operator `--`). + +gv_edge_operator(false) -- !, `--`. +gv_edge_operator(true) -- arrow(right, 2). + + +%! gv_edge_statement( +%! +Indent:nonneg, +%! +Directed:boolean, +%! +GraphAttributes:list(nvpair), +%! +EdgeTerm:compound +%! )// is det. +% A GraphViz statement describing an edge. +% +% @arg Indent The indentation level at which the edge statement is written. +% @arg Directed Whether the graph is directed or not. +% @arg GraphAttributes The attributes of the graph. Some of these attributes +% may be used in the edge statement (e.g., the colorscheme). +% @arg EdgeTerm A compound term in the GIFormat, representing an edge. +% +% @tbd Instead of gv_node_id//1 we could have a gv_subgraph//1 +% at the from and/or to location. +% @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2. + +gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- + indent(I), + gv_node_id(FromId), ` `, + + gv_edge_operator(Directed), ` `, + + gv_node_id(ToId), ` `, + + % We want `colorscheme/1` from the edges and + % `directionality/1` from the graph. + gv_attribute_list(edge, GAttrs, EAttrs), + newline. + + +%! gv_generic_attributes_statement( +%! +Kind:oneof([edge,graph,node]), +%! +Indent:integer, +%! +GraphAttributes:list(nvpair), +%! +CategoryAttributes:list(nvpair) +%! )// +% A GraphViz statement describing generic attributes for a category of items. +% +% @arg Kind The category of items for to the attributes apply. +% Possible values: `edge`, `graph`, and `node`. +% @arg Indent An integer indicating the number of tabs. +% @arg GraphAttributes A list of name-value pairs. +% @arg CategoryAttributes A list of name-value pairs. +% +% ~~~ +% attr_stmt = (graph / node / edge) attr_list +% ~~~ + +gv_generic_attributes_statement(_, _, _, []) -- [], !. +gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- + indent(I), + gv_kind(Kind), ` `, + gv_attribute_list(Kind, GraphAttrs, KindAttrs), newline. + + +%! gv_graph(+GraphTerm:compound)// +% The follow graph attributes are supported, +% beyond the GraphViz attributes for graphs: +% 1. `directonality(+Directed:oneof([directed,undirected]))` +% A directed graph uses the keyword `digraph`. +% An undirected graph uses the keyword `graph`. +% 2. `name(+GraphName:atom)` +% 3. `strict(+StrictGraph:boolean)` +% This forbids the creation of self-arcs and multi-edges; +% they are ignored in the input file. +% Only in combinattion with directionality `directed`. +% +% ~~~{.abnf} +% graph = [\"strict\"] (\"graph\" / \"digraph\") [ID] \"{\" stmt_list \"}\" +% ~~~ +% +% `GraphTerm` is a compound term of the following form: +% ~~~{.pl} +% graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes) +% ~~~ +% +% `RankedVertexTerms` is a list of compound terms of the following form: +% ~~~{.pl} +% rank(RankNode,ContentNodes) +% ~~~ +% +% @tbd Add support for subgraphs (arbitrary nesting). +% @tbd Add support for escape strings: +% http://www.graphviz.org/doc/info/attrs.html#k:escString +% @tbd Assert attributes that are generic with respect to a subgraph. +% @tbd Not all vertex and edge properties can be shared it seems (e.g., label). + +gv_graph(graph(VTerms, ETerms, GAttrs)) -- + gv_graph(graph(VTerms, [], ETerms, GAttrs)). + +gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- + { + shared_attributes(VTerms, SharedVAttrs, NewVTerms), + shared_attributes(ETerms, SharedEAttrs, NewETerms), + select_nvpair(strict=Strict, GAttrs1, GAttrs2, false), + select_nvpair(directed=Directed, GAttrs2, GAttrs3, true), + select_nvpair(name=GName, GAttrs3, GAttrs4, noname), + add_default_nvpair(GAttrs4, overlap, false, GAttrs5), + I = 0 + }, + + % The first statement in the GraphViz output. + % States that this file represents a graph according to the GraphViz format. + indent(I), + gv_strict(Strict), + gv_graph_type(Directed), ` `, + gv_id(GName), ` `, + bracketed( + curly, + gv_graph1( + I, + NewVTerms, SharedVAttrs, RankedVTerms, + NewETerms, SharedEAttrs, + Directed, GAttrs5 + ) + ), + newline. + +gv_graph1( + I, + NewVTerms, SharedVAttrs, RankedVTerms, + NewETerms, SharedEAttrs, + Directed, GAttrs +) -- + newline, + + % The following lines are indented. + {NewI is I + 1}, + + % Attributes that apply to the graph as a whole. + gv_generic_attributes_statement(graph, NewI, GAttrs, GAttrs), + + % Attributes that are the same for all nodes. + gv_generic_attributes_statement(node, NewI, GAttrs, SharedVAttrs), + + % Attributes that are the same for all edges. + gv_generic_attributes_statement(edge, NewI, GAttrs, SharedEAttrs), + + % Only add a newline if some content was written in the previous three + % lines. + ({(GAttrs == [], SharedVAttrs == [], SharedEAttrs == [])} - `` ; newline), + + % The list of GraphViz nodes. + '*'(gv_node_statement(NewI, GAttrs), NewVTerms), + ({NewVTerms == []} - `` ; newline), + + % The ranked GraphViz nodes (displayed at the same height). + '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms), + ({RankedVTerms == []} - `` ; newline), + + { + findall( + edge(FromId,ToId,[]), + ( + nth0(Index1, RankedVTerms, rank(vertex(FromId,_,_),_)), + nth0(Index2, RankedVTerms, rank(vertex(ToId,_,_),_)), + % We assume that the rank vertices are nicely ordered. + succ(Index1, Index2) + ), + RankEdges + ) + }, + + % The rank edges. + '*'(gv_edge_statement(NewI, Directed, GAttrs), RankEdges), + + % The non-rank edges. + '*'(gv_edge_statement(NewI, Directed, GAttrs), NewETerms), + + % Note that we do not include a newline here. + + % We want to indent the closing curly brace. + indent(I). + + +%! gv_graph_type(+Directed:boolean)// . +% The type of graph that is represented. + +gv_graph_type(false) -- `graph`. +gv_graph_type(true) -- `digraph`. + + +%! gv_id(?Atom:atom)// is det. +% Parse a GraphViz identifier. +% There are 4 variants: +% 1. Any string of alphabetic (`[a-zA-Z'200-'377]`) characters, +% underscores (`_`) or digits (`[0-9]`), not beginning with a digit. +% 2. A numeral `[-]?(.[0-9]+ | [0-9]+(.[0-9]*)? )`. +% 3. Any double-quoted string (`\"...\"`) possibly containing +% escaped quotes (`\\\"`). +% In quoted strings in DOT, the only escaped character is +% double-quote (`\"`). That is, in quoted strings, the dyad `\\\"` +% is converted to `\"`. All other characters are left unchanged. +% In particular, `\\\\` remains `\\\\`. +% Layout engines may apply additional escape sequences. +% 4. An HTML string (``). +% +% @tbd Add support for HTML-like labels: +% http://www.graphviz.org/doc/info/shapes.html#html +% This requires an XML grammar! + +% HTML strings (variant 4). +gv_id(Atom) -- + dcg_atom_codes(gv_html_like_label, Atom), !. +% Alpha-numeric strings (variant 1). +gv_id(Atom) -- + {atom_codes(Atom, [H|T])}, + gv_id_first(H), + gv_id_rest(T), !, + % Variant 1 identifiers should not be (case-variants of) a + % GraphViz keyword. + {\\+ gv_keyword([H|T])}. +% Numerals (variant 2) +gv_id(N) -- + {number(N)}, !, + gv_numeral(N). +% Double-quoted strings (variant 3). +% The quotes are already part of the given atom. +gv_id(Atom) -- + { + atom_codes(Atom, [H|T]), + append(S, [H], T) + }, + dcg_between(double_quote(H), gv_quoted_string(S)), !. +% Double-quoted strings (variant 3). +% The quotes are not in the given atom. They are written anyway. +gv_id(Atom) -- + quoted(double_quote, dcg_atom_codes(gv_quoted_string, Atom)), !. + +gv_id_first(X) -- ascii_letter(X). +gv_id_first(X) -- underscore(X). + +gv_id_rest([]) -- []. +gv_id_rest([H|T]) -- + (ascii_alpha_numeric(H) ; underscore(H)), + gv_id_rest(T). + + +%! gv_keyword(+Codes:list(code)) is semidet. +% Succeeds if the given codes for a GraphViz reserved keyword. + +gv_keyword(Codes):- + % Obviously, the keywords do not occur on the difference list input. + % So we must use phrase/[2,3]. + phrase(gv_keyword, Codes). + +%! gv_keyword// . +% GraphViz has reserved keywords that cannot be used as identifiers. +% GraphViz keywords are case-insensitive. + +gv_keyword -- `digraph`. +gv_keyword -- `edge`. +gv_keyword -- `graph`. +gv_keyword -- `node`. +gv_keyword -- `strict`. +gv_keyword -- `subgraph`. + + +%! gv_kind(+Kind:oneof([edge,graph,node]))// . + +gv_kind(edge) -- `edge`. +gv_kind(graph) -- `graph`. +gv_kind(node) -- `node`. + + +%! gv_node_id(+NodeId:atom)// . +% GraphViz node identifiers can be of the following two types: +% 1. A GraphViz identifier, see gv_id//1. +% 2. A GraphViz identifier plus a GraphViz port indicator, see gv_port//0. +% +% @tbd Add support for GraphViz port indicators +% inside GraphViz node identifiers. + +gv_node_id(Id) -- + gv_id(Id). +%gv_node_id(_) -- +% gv_id(_), +% gv_port. + + +%! gv_node_statement( +%! +Indent:integer, +%! +GraphAttributes, +%! +VertexTerm:compound +%! )// . +% A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes'). + +gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -- + indent(I), + gv_node_id(Id), ` `, + gv_attribute_list(node, GraphAttrs, VAttrs), newline. + + +gv_port -- + gv_port_location, + '?'(gv_port_angle). +gv_port -- + gv_port_angle, + '?'(gv_port_location). +gv_port -- + `:`, + gv_compass_pt(_). + +gv_port_angle -- + `@`, + gv_id(_). + +gv_port_location -- + `:`, + gv_id(_). +gv_port_location -- + `:`, + bracketed( + round, + ( + gv_id(_), + `,`, + gv_id(_) + ) + ). + + +gv_quoted_string([]) -- []. +% Just to be sure, we do not allow the double quote +% that closes the string to be escaped. +gv_quoted_string([X]) -- + {X \\== 92}, !, + [X]. +% A double quote is only allowed if it is escaped by a backslash. +gv_quoted_string([92,34|T]) -- !, + gv_quoted_string(T). +% Add the backslash escape character. +gv_quoted_string([34|T]) -- !, + `\\\\\\\"`, + gv_quoted_string(T). +% All other characters are allowed without escaping. +gv_quoted_string([H|T]) -- + [H], + gv_quoted_string(T). + + +gv_ranked_node_collection( + I, + GraphAttrs, + rank(Rank_V_Term,Content_V_Terms) +) -- + indent(I), + bracketed(curly, ( + newline, + + % The rank attribute. + {NewI is I + 1}, + indent(NewI), gv_attribute(rank=same), `;`, newline, + + '*'(gv_node_statement(NewI, GraphAttrs), [Rank_V_Term|Content_V_Terms]), + + % We want to indent the closing curly brace. + indent(I) + )), + newline. + + +%! gv_strict(+Strict:boolean)// is det. +% The keyword denoting that the graph is strict, i.e., has no self-arcs and +% no multi-edges. +% This only applies to directed graphs. + +gv_strict(false) -- []. +gv_strict(true) -- `strict `. + + + +% Helpers + +add_default_nvpair(Attrs1, N, Default, Attrs2):- + add_default_nvpair(Attrs1, N, Default, _, Attrs2). + +add_default_nvpair(Attrs, N, _, V, Attrs):- + memberchk(N=V, Attrs), !. +add_default_nvpair(Attrs1, N, Default, Default, Attrs2):- + ord_add_element(Attrs1, N=Default, Attrs2). + +select_nvpair(N=V, Attrs1, Attrs2, _):- + memberchk(N=V, Attrs1), !, + select(N=V, Attrs1, Attrs2). +select_nvpair(_=Default, Attrs, Attrs, Default). + + +extract_shared([], []):- !. +extract_shared(Argss, Shared):- + ord_intersection(Argss, Shared). + +remove_shared_attributes(Shared, Args1, Args2):- + ord_subtract(Args1, Shared, Args2). + +shared_attributes(Terms1, Shared, Terms2):- + maplist(term_components(Func), Terms1, Args1, Args2, Args3a), + extract_shared(Args3a, Shared), + maplist(remove_shared_attributes(Shared), Args3a, Args3b), + maplist(term_components(Func), Terms2, Args1, Args2, Args3b). + +term_components(Func, Term, Arg1, Arg2, Arg3):- + Term =.. [Func,Arg1,Arg2,Arg3]. + diff --git a/gv_file.pl b/gv_file.pl new file mode 100644 index 0000000..c780692 --- /dev/null +++ b/gv_file.pl @@ -0,0 +1,211 @@ +:- module( + gv_file, + [ + gif_to_gv_file/3, % +GraphInterchangeFormat:compound + % ?ToFile:atom + % +Options:list(nvpair) + graph_to_svg_dom/3, % +GraphInterchangeFormat:compound + % -SvgDom:list(compound) + % +Options:list(nvpair) + open_dot/1 % +File:file + ] +). + +/**  GraphViz file + +Predicates for converting GIF-formatted terms +into GraphViz output files or SVG DOM structures. + +Also converts between GraphViz DOT formatted files +and GraphViz output files or SVG DOM structures. + +@author Wouter Beek +@version 2011-2013/09, 2013/11-2014/01, 2014/05, 2014/07 +*/ + +:- use_module(library(option)). +:- use_module(library(process)). +:- use_module(library(predicate_options)). % Declarations. + +:- use_module(generics(codes_ext)). +:- use_module(generics(db_ext)). +:- use_module(generics(error_ext)). +:- use_module(generics(trees)). +:- use_module(os(file_ext)). +:- use_module(os(run_ext)). +:- use_module(os(safe_file)). +:- use_module(svg(svg_file)). +:- use_module(ugraph(ugraph_export)). + +:- use_module(plGraphViz(gv_dot)). + +:- dynamic(user:file_type_program/2). +:- multifile(user:file_type_program/2). + +:- dynamic(user:module_uses/2). +:- multifile(user:module_uses/2). + +:- dynamic(user:prolog_file_type/2). +:- multifile(user:prolog_file_type/2). + +% Register DOT. +:- db_add_novel(user:prolog_file_type(dot, dot)). +:- db_add_novel(user:prolog_file_type(dot, graphviz)). +:- db_add_novel(user:file_type_program(dot, dotty)). +:- db_add_novel(user:file_type_program(dot, dotx)). +:- db_add_novel(user:module_uses(gv_file, file_type(dot))). + +% Register JPG/JPEG. +:- db_add_novel(user:prolog_file_type(jpeg, jpeg)). +:- db_add_novel(user:prolog_file_type(jpeg, graphviz_output)). +:- db_add_novel(user:prolog_file_type(jpg, jpeg)). +:- db_add_novel(user:prolog_file_type(jpg, graphviz_output)). + +% Register PDF. +:- db_add_novel(user:prolog_file_type(pdf, pdf)). +:- db_add_novel(user:prolog_file_type(pdf, graphviz_output)). + +% Register PNG. +:- db_add_novel(user:prolog_file_type(png, png)). +:- db_add_novel(user:prolog_file_type(png, graphviz_output)). + +% Register SVG. +:- db_add_novel(user:prolog_file_type(svg, graphviz_output)). +:- db_add_novel(user:prolog_file_type(svg, svg)). + +% Register XDOT. +:- db_add_novel(user:prolog_file_type(xdot, graphviz_output)). +:- db_add_novel(user:prolog_file_type(xdot, xdot)). + +:- predicate_options(graph_to_svg_dom/3, 3, [ + pass_to(gif_to_gv_file/3, 3) + ]). +:- predicate_options(gif_to_gv_file/3, 3, [ + pass_to(to_gv_file/3, 3) + ]). +:- predicate_options(to_gv_file/3, 3, [ + pass_to(convert_gv/3, 3) + ]). +:- predicate_options(convert_gv/3, 3, [ + method(+oneof([dot,sfdp])), + to_file_type(+oneof([dot,jpeg,pdf,svg,xdot])) + ]). + + + +%! gif_to_gv_file(+Gif:compound, -ToFile:atom, +Options:list(nvpair)) is det. +% Returns a file containing a GraphViz visualization of the given graph. +% +% The following options are supported: +% * =|method(+Method:oneof([dot,sfdp])|= +% The algorithm used by GraphViz for positioning the tree nodes. +% Either =dot= (default) or =sfdp=. +% * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|= +% The file type of the generated GraphViz file. +% Default: `pdf`. + +gif_to_gv_file(Gif, ToFile, Options):- + once(phrase(gv_graph(Gif), Codes)), + to_gv_file(Codes, ToFile, Options). + + +%! graph_to_svg_dom( +%! +GraphInterchangeFormat:compound, +%! -SvgDom:list(compound), +%! +Options:list(nvpair) +%! ) is det. + +graph_to_svg_dom(Gif, SvgDom, Options1):- + % Make sure the file type of the output file is SvgDom. + merge_options([to_file_type=svg], Options1, Options2), + gif_to_gv_file(Gif, ToFile, Options2), + file_to_svg(ToFile, SvgDom), + safe_delete_file(ToFile). + + +%! open_dot(+File:atom) is det. +% Opens the given DOT file. +% +% @tbd Test support on Windows. +% @tbd Test support on OS-X. + +open_dot(File):- + once(find_program_by_file_type(dot, Program)), + run_program(Program, [File]). + + + +% SUPPORT PREDICATES % + +%! convert_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det. +% Converts a GraphViz DOT file to an image file, using a specific +% visualization method. + +convert_gv(FromFile, ToFile, Options):- + option(to_file_type(dot), Options), !, + rename_file(FromFile, ToFile). +convert_gv(FromFile, ToFile, Options):- + % The input file must be readable. + access_file(FromFile, read), + + % The method option. + option(method(Method), Options, dot), + must_be(oneof([dot,sfdp]), Method), + + % The file type option. + option(to_file_type(ToFileType), Options, pdf), + prolog_file_type(ToExtension, ToFileType), + prolog_file_type(ToExtension, graphviz_output), !, + + % The output file is either given or created. + ( + var(ToFile) + - + absolute_file_name( + data(export), + ToFile, + [access(write),file_type(ToFileType)] + ) + ; + is_absolute_file_name(ToFile), + % The given output file must match a certain file extension. + file_name_extension(_, ToExtension, ToFile) + ), + % Now that we have the output file we can prevent the + % file type / file extension translation predicates from bakctracking. + !, + + % Run the GraphViz conversion command in the shell. + format(atom(OutputType), '-T~w', [ToExtension]), + process_create( + path(Method), + [OutputType,FromFile,'-o',ToFile], + [process(PID)] + ), + process_wait(PID, exit(ShellStatus)), + exit_code_handler('GraphViz', ShellStatus). + + +%! to_gv_file(+Codes:list(code), ?ToFile:atom, +Options:list(nvpair)) is det. + +to_gv_file(Codes, ToFile, Options):- + absolute_file_name( + data(tmp), + FromFile, + [access(write),file_type(graphviz)] + ), + setup_call_cleanup( + open(FromFile, write, Out, [encoding(utf8),type(test)]), + put_codes(Out, Codes), + close(Out) + ), + convert_gv(FromFile, ToFile, Options), + + %%%%% DEB: Store DOT file. + %%%%ignore(( + %%%% file_type_alternative(ToFile, graphviz, DOT_File), + %%%% safe_copy_file(FromFile, DOT_File) + %%%%)), + + safe_delete_file(FromFile). + diff --git a/gv_html.pl b/gv_html.pl new file mode 100644 index 0000000..b8d3190 --- /dev/null +++ b/gv_html.pl @@ -0,0 +1,60 @@ +:- module( + gv_html, + [ + gv_html_like_label//1 % +Codes:list(code) + ] +). + +/**  GraphViz HTML + +@author Wouter Beek +@version 2013/07, 2013/09, 2014/03-2014/06 +*/ + +:- use_module(dcg(dcg_content)). + +:- use_module(plHtml(html_dcg)). + + + +%! gv_html_label(+Codes:list(code))// . +% +% @see http://www.graphviz.org/doc/info/shapes.html#html + +gv_html_label -- gv_html_text, !. +gv_html_label -- gv_html_table, !. +gv_html_label -- []. + +gv_html_like_label -- bracketed(angular, gv_html_label). + +gv_html_like_label(Content) -- bracketed(angular, html_dcg(Content)). + +gv_html_table -- html_element(table, _, gv_html_rows). +gv_html_table -- html_element(font, _, html_element(table, _, gv_html_rows)). + +gv_html_rows -- gv_html_row, gv_html_rows. +gv_html_rows -- gv_html_row, html_element(hr, _), gv_html_rows. +gv_html_rows -- gv_html_row. + +gv_html_row -- html_element(tr, _, gv_html_cells). + +gv_html_cell -- html_element(td, _, gv_html_label). +gv_html_cell -- html_element(td, _, html_element(img, _)). + +gv_html_cells -- gv_html_cell, gv_html_cells. +gv_html_cells -- gv_html_cell. +gv_html_cells -- gv_html_cell, html_element(vr, _), gv_html_cells. + +gv_html_text -- gv_html_textitem, gv_html_text. +gv_html_text -- gv_html_textitem. + +gv_html_textitem -- html_string, !. +gv_html_textitem -- html_entity, !. +gv_html_textitem -- html_element(br, _), !. +gv_html_textitem -- html_element(font, _, gv_html_text), !. +gv_html_textitem -- html_element(i, _, gv_html_text), !. +gv_html_textitem -- html_element(b, _, gv_html_text), !. +gv_html_textitem -- html_element(u, _, gv_html_text), !. +gv_html_textitem -- html_element(sub, _, gv_html_text), !. +gv_html_textitem -- html_element(sup, _, gv_html_text), !. + diff --git a/gv_numeral.pl b/gv_numeral.pl new file mode 100644 index 0000000..9b82fc0 --- /dev/null +++ b/gv_numeral.pl @@ -0,0 +1,71 @@ +:- module( + gv_numeral, + [ + gv_numeral//1 % ?Value:number + ] +). + +/**  GraphViz numeral + +@author Wouter Beek +@version 2014/05-2014/06 +*/ + +:- use_module(dcg(dcg_abnf)). +:- use_module(dcg(dcg_cardinal)). +:- use_module(math(math_ext)). + + + +%! gv_numeral(?Value:number)// . +% ~~~{.bnf} +% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? ) +% ~~~ + +gv_numeral(N) -- + {nonvar(N)}, + {number_sign_parts(N, Sign, Abs)}, + ({Sign =:= -1} - `-` ; ``), + gv_numeral_abs(Abs). +gv_numeral(N) -- + {var(N)}, + 'sign?'(Sign), + gv_numeral_abs(Abs), + {number_sign_parts(N, Sign, Abs)}. + + +gv_numeral_abs(N) -- + {nonvar(N)}, + {number_integer_parts(N, N1, N2)}, + ( + {N2 =:= 0} + - + integer(N1) + ; + {N1 =:= 0} + - + `.`, + integer(N2) + ; + integer(N1), + '?'((`.`, 'integer?'(N2))) + ). +gv_numeral_abs(N) -- + {var(N)}, + ( + `.`, + integer(N2) + - + {N1 = 0} + ; + integer(N1), + ( + `.` + - + 'integer?'(N2) + ; + {N2 = 0} + ) + ), + {number_integer_parts(N, N1, N2)}. + diff --git a/gv_tree.pl b/gv_tree.pl new file mode 100644 index 0000000..afeb8f6 --- /dev/null +++ b/gv_tree.pl @@ -0,0 +1,43 @@ +:- module( + gv_tree, + [ + tree_to_gv_file/3 % +Tree:compound + % ?ToFile:atom + % +Options:list(nvpair) + ] +). + +/**  GraphViz tree + +Export trees to GraphViz. + +@author Wouter Beek +@version 2014/06-2014/07 +*/ + +:- use_module(library(aggregate)). + +:- use_module(generics(trees)). + +:- use_module(plGraphViz(gv_file)). +:- use_module(plGraphViz(gv_gif)). + + +%! tree_to_gv_file( +%! +Tree:compound, +%! ?ToFile:atom, +%! +Options:list(nvpair) +%! ) is det. +% Stores the given tree term into a GraphViz file. +% +% Options are passed on to create_gif/3 and gif_to_gv_file/3. + +tree_to_gv_file(Tree, ToFile, Options):- + tree_to_gif(Tree, Gif, Options), + gif_to_gv_file(Gif, ToFile, Options). + + +tree_to_gif(H-T, Gif, Options):- + tree_to_vertices_edges(Tree, Vs, Es), + create_gif(Vs, Es, Gif, Options). + diff --git a/index.pl b/index.pl new file mode 100644 index 0000000..7461d13 --- /dev/null +++ b/index.pl @@ -0,0 +1,2 @@ +% Index of project plGraphViz (empty). + diff --git a/load.pl b/load.pl new file mode 100644 index 0000000..4b117d1 --- /dev/null +++ b/load.pl @@ -0,0 +1,12 @@ +% Load file for plGraphViz. + +:- dynamic(user:prolog/3). +:- multifile(user:prolog/3). + user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz). + +:- use_module(load_project). +:- load_project(plGraphViz, [ + plc-'Prolog-Library-Collection', + plHtml +]). + diff --git a/load_project.pl b/load_project.pl new file mode 100644 index 0000000..5599b5e --- /dev/null +++ b/load_project.pl @@ -0,0 +1,120 @@ +:- module( + load_project, + [ + load_project/2, % +Parent:atom + % +ChildProjects:list(or([atom,pair(atom)])) + load_subproject/2, % +ParentFileSearchPath:atom + % +Child:or([atom,pair(atom)]) + set_data_subdirectory/1 % +ParentDirectory:atom + ] +). + +/**  Load project + +Generic code for loading a project: + * Create a subdirectory for data. + * Load the root of subprojects onto the file search path. + * Load the index of subprojects onto the file search path. + +@author Wouter Beek +@version 2014/06/14 +*/ + +:- use_module(library(ansi_term)). % Colorized terminal messages. +:- use_module(library(apply)). + +:- dynamic(user:project/2). +:- multifile(user:project/2). +:- dynamic(user:project/3). +:- multifile(user:project/3). + + + +load_project(Parent, ChildProjects):- + parent_alias(Parent, ParentFsp), + + % Entry point. + source_file(load_project(_,_), ThisFile), + file_directory_name(ThisFile, ThisDir), + assert(user:file_search_path(ParentFsp, ThisDir)), + assert(user:file_search_path(project, ThisDir)), + + % Set the data subdirectory. + set_data_subdirectory(ThisDir), + + % Load the root of submodules onto the file search path. + maplist(load_subproject(ParentFsp), ChildProjects), + + % Load the index into the file search path. + load_project_index(ParentFsp). + + + +%! load_subproject( +%! +ParentFileSearchPath:atom, +%! +Child:or([atom,pair(atom)]) +%! ) is det. + +load_subproject(ParentFsp, ChildFsp-ChildDir):- !, + load_subproject_file_search_path(ParentFsp, ChildFsp, ChildDir), + load_project_index(ChildFsp). +load_subproject(ParentFsp, Child):- + load_subproject(ParentFsp, Child-Child). + + +%! load_subproject_file_search_path( +%! +ParentFileSearchPath:atom, +%! +ChildFileSearchPath:atom, +%! +ChildDirectory:atom +%! ) is det. + +% The file search path for the subproject has already been set. +load_subproject_file_search_path(_, ChildFsp, _):- + user:file_search_path(ChildFsp, _). +load_subproject_file_search_path(ParentFsp, ChildFsp, ChildDir):- + Spec =.. [ParentFsp,ChildDir], + absolute_file_name(Spec, _, [access(read),file_type(directory)]), !, + assert(user:file_search_path(ChildFsp, Spec)). +load_subproject_file_search_path(_, ChildFsp, ChildDir):- + print_message(warning, missing_subproject_directory(ChildFsp,ChildDir)). + + +%! load_project_index(+FileSearchPath:atom) is det. + +load_project_index(Fsp):- + Spec =.. [Fsp,index], + absolute_file_name( + Spec, + File, + [access(read),file_errors(fail),file_type(prolog)] + ), !, + ensure_loaded(File). +load_project_index(_). + + +%! parent_alias(+Parent:atom, -ParentFsp:atom) is det. + +parent_alias(Parent, ParentFsp):- + user:project(Parent, _, ParentFsp), !. +parent_alias(Parent, Parent). + + +%! set_data_subdirectory(+ParentDirectory:atom) is det. + +set_data_subdirectory(ParentDir):- + directory_file_path(ParentDir, data, DataDir), + make_directory_path(DataDir), + assert(user:file_search_path(data, DataDir)). + + + +:- multifile(prolog:message//1). + +prolog:message(missing_subproject_directory(ChildFsp,ChildDir)) -- + [ + 'The ~a submodule is not present.'-[ChildFsp], nl, + 'Check whether subdirectory ~a is present in your project directory:'-[ChildDir], nl, + ' git submodule init', nl, + ' git submodule update' + ]. + diff --git a/pack.pl b/pack.pl deleted file mode 100644 index 989108a..0000000 --- a/pack.pl +++ /dev/null @@ -1,9 +0,0 @@ -author('Wouter Beek', 'me@wouterbeek.com'). -download('https://github.com/wouterbeek/plGraphViz/release/*.zip'). -home('https://github.com/wouterbeek/plGraphViz'). -maintainer('Wouter Beek', 'me@wouterbeek.com'). -name(plGraphViz). -packager('Wouter Beek', 'me@wouterbeek.com'). -requires('Prolog-Library-Collection'). -title(plGraphViz). -version('0.0.1'). diff --git a/plHtml b/plHtml new file mode 160000 index 0000000..08480c4 --- /dev/null +++ b/plHtml @@ -0,0 +1 @@ +Subproject commit 08480c40acaee5f70bfb21e3c641bef1e7d258bd diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl deleted file mode 100644 index 083dbb2..0000000 --- a/prolog/fca/fca_viz.pl +++ /dev/null @@ -1,101 +0,0 @@ -:- module( - fca_viz, - [ - fca_export_graph/2, % +Context, -ExportGraph - fca_export_graph/3, % +Context, -ExportGraph, :Opts - fca_viz/2, % +Context, ?File - fca_viz/3 % +Context, ?File, :Opts - ] -). - -/**  FCA visualization - -@author Wouter Beek -@version 2015/11-2016/01 -*/ - -:- use_module(library(aggregate)). -:- use_module(library(dcg/dcg_ext)). -:- use_module(library(dcg/dcg_pl)). -:- use_module(library(fca/fca)). -:- use_module(library(graph/build_export_graph)). -:- use_module(library(graph/s/s_graph)). -:- use_module(library(gv/gv_file)). -:- use_module(library(option)). -:- use_module(library(ordsets)). - -:- meta_predicate(fca_export_graph(+,?,:)). -:- meta_predicate(fca_viz(+,?,:)). - -:- predicate_options(fca_export_graph/3, 3, [ - concept_label(+callable) - ]). -:- predicate_options(fca_viz/3, 3, [ - pass_to(fca_export_graph/3, 3), - pass_to(graph_viz/3, 3) - ]). - -is_meta(concept_label). - - - - - -%! fca_export_graph(+Context:compound, -ExportGraph:compound) is det. -% Wrapper around fca_export_graph/3 with default options. - -fca_export_graph(Context, ExportG):- - fca_export_graph(Context, ExportG, []). - - -%! fca_export_graph( -%! +Context:compound, -%! -ExportGraph:compound, -%! :Options:list(compound) -%! ) is det. -% The following optios are supported: -% * concept_label(+callable) -% DCG writing the labels for individual concepts. - -fca_export_graph(Context, ExportG, Opts1):- - fca_hasse(Context, Hasse), - meta_options(is_meta, Opts1, Opts2), - option(concept_label(Label_3), Opts2, concept_label), - merge_options( - [ - vertex_label(Label_3), - vertex_rank(fca:concept_cardinality) - ], - Opts2, - Opts3 - ), - build_export_graph(Hasse, ExportG, Opts3). - - - -%! fca_viz(+Context:compound, ?File:atom) is det. -% Wrapper around fca_viz/3 with default options. - -fca_viz(Context, File):- - fca_viz(Context, File, []). - - -%! fca_viz(+Context:compound, ?File:atom, :Options:list(compound)) is det. - -fca_viz(Context, File, Opts1):- - meta_options(is_meta, Opts1, Opts2), - statistics(process_cputime, Time1), - fca_export_graph(Context, ExportG, Opts2), - ExportG = graph(_,_,Es,_), - aggregate_all(max(N), (member(edge(V1,V2,_), Es), (N = V1 ; N = V2)), N), - ignore(option(number_of_vertices(N), Opts2)), - statistics(process_cputime, Time2), - Time is Time2 - Time1, - ignore(option(process_cputime(Time), Opts2)), - graph_viz(ExportG, File, Opts2). - - - -%! concept_label(+Concept:compound)// is det. - -concept_label(concept(Os,As)) -- set(Os), \" / \", set(As). diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl deleted file mode 100644 index 5134069..0000000 --- a/prolog/graph/build_export_graph.pl +++ /dev/null @@ -1,369 +0,0 @@ -:- module( - build_export_graph, - [ - build_export_graph/2, % +Graph, -ExportGraph - build_export_graph/3 % +Graph - % -ExportGraph:compound - % +Options:list(compound) - ] -). - -/**  Build graph representation for exporting - -Support for building GIF representations. - -# Graph Intermediate Format (GIF) - -## Graph - -```prolog -graph(Vs:ordset(compound),Ranks,Es:compound,Attributes:list(compound)) -``` - -### Edge - -```prolog -edge(FromVertexId,ToVertexId,Attributes:list(compound)) -``` - -### Rank - -```prolog -RankVertex:compound-ContentVertices:ordset(compound) -``` - -### Vertex - -```prolog -vertex(Id,Attributes:list(compound)) -``` - -# Property functions - -Edge label: - 1. [[graph_edge]] edge_label/2 - -Vertex coordinates: - 1. [[circle_coords]] circular_coord/4 - 2. [[random_coords]] random_coord/4 - ---- - -@author Wouter Beek -@version 2015/07, 2015/09-2016/01 -*/ - -:- use_module(library(apply)). -:- use_module(library(dcg/dcg_ext)). -:- use_module(library(graph/s/s_graph)). -:- use_module(library(list_ext)). -:- use_module(library(option_ext)). -:- use_module(library(ordsets)). -:- use_module(library(pairs)). - -:- predicate_options(build_export_graph/4, 4, [ - pass_to(edge_term/3, 3), - pass_to(graph_attributes/2, 2), - pass_to(vertex_term/3, 3) - ]). -:- predicate_options(edge_term/3, 3, [ - edge_arrowhead(+callable), - edge_color(+callable), - edge_id(+callable), - edge_label(+callable), - edge_penwidth(+callable), - edge_style(+callable) - ]). -:- predicate_options(graph_attributes/2, 2, [ - graph_charset(+oneof(['iso-8859-1','Latin1','UTF-8'])), - graph_colorscheme(+oneof([none,svg,x11])), - graph_directed(+boolean), - graph_fontsize(+float), - graph_label(+atom), - graph_overlap(+boolean) - ]). -:- predicate_options(vertex_term/3, 3, [ - vertex_color(+callable), - vertex_id(+callable), - vertex_image(+callable), - vertex_label(+callable), - vertex_peripheries(+callable), - vertex_position(+callable), - vertex_rank(+callable), - vertex_shape(+callable), - vertex_uri(+callable) - ]). - -:- meta_predicate(build_export_graph(+,-,:)). - -is_meta(edge_arrowhead). -is_meta(edge_color). -is_meta(edge_id). -is_meta(edge_label). -is_meta(edge_penwidth). -is_meta(edge_style). -is_meta(vertex_color). -is_meta(vertex_id). -is_meta(vertex_image). -is_meta(vertex_label). -is_meta(vertex_peripheries). -is_meta(vertex_position). -is_meta(vertex_rank). -is_meta(vertex_shape). -is_meta(vertex_uri). - - - - - -%! build_export_graph(+Graph, -ExportGraph:compound) is det. -% Wrapper around build_export_graph/3 with default options. - -build_export_graph(G, ExportG):- - build_export_graph(G, ExportG, []). - - -%! build_export_graph( -%! +Graph, -%! -ExportGraph:compound, -%! +Options:list(compound) -%! ) is det. -% Graph is either: -% * a coumpound term `graph(Vs,Es)`, or -% * an unlabeled graph as defined by `library(ugraph)`. -% -% The following options are supported: -% * `vertex_rank(:RankFunction)` -% Assigns a non-negative integer to each vertex. -% No default. - -build_export_graph(G, graph(VTerms2,VRanks,ETerms,GAttrs), Opts1):- - graph_components(G, Vs, Es), - meta_options(is_meta, Opts1, Opts2), - maplist(vertex_term0(Vs, Opts2), Vs, VTerms1), - build_export_ranks(Vs, VTerms1, VRanks, VTerms2, Opts2), - maplist(edge_term0(Vs, Opts2), Es, ETerms), - graph_attributes(GAttrs, Opts2). - -vertex_term0(Vs, Opts, V, VTerm) :- vertex_term(Vs, V, VTerm, Opts). - -edge_term0(Vs, Opts, E, ETerm) :- edge_term(Vs, E, ETerm, Opts). - -graph_components(graph(Vs,Es), Vs, Es):- !. -graph_components(G, Vs, Es):- - s_graph_components(G, Vs, Es). - -build_export_ranks(Vs, VTerms, VRanks, [], Opts):- - option(vertex_rank(VRank_2), Opts), !, - maplist(VRank_2, Vs, Ranks), - pairs_keys_values(Pairs, Ranks, VTerms), - group_pairs_by_key(Pairs, GroupedPairs), - build_export_rank_terms(GroupedPairs, VRanks). -build_export_ranks(_, VTerms, [], VTerms, _). - -build_export_rank_terms([N-VTerms|T1], [RankTerm-VTerms|T2]):- !, - build_export_rank_term(N, RankTerm), - build_export_rank_terms(T1, T2). -build_export_rank_terms([], []). - -build_export_rank_term(N, vertex(Id,[label(\"\"),shape(none)])):- - format(atom(Id), \"r~d\", [N]). - - - -%! edge_term( -%! +Vertices:ordset(compound), -%! +Edge:compound, -%! -EdgeTerm:compound, -%! +Options:list(compound) -%! ) is det. -% The following options are supported: -% * `edge_arrowhead(+callable)` -% No default. -% * `edge_color(+callable)` -% No default. -% * `edge_id(+callable)` -% Function that assignes the unique identifiers for an edge's -% incident vertices. -% * `edge_label(+callable)` -% No default. -% * `edge_penwidth(+callable)` -% No default. -% * `edge_style(+callable)` -% No default. - -edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):- - % Arrowhead - if_option(edge_arrowhead(Arrowhead_2), Opts, - call(Arrowhead_2, E, EArrowhead) - ), - - % Color. - if_option(edge_color(ColorFunction), Opts, call(ColorFunction, E, EColor)), - - % Id. - ( option(edge_id(Id_2), Opts) - - call(Id_2, E, FromId, ToId) - ; edge_components(E, FromV, ToV), - nth0chk(FromId, Vs, FromV), - nth0chk(ToId, Vs, ToV) - ), - - % Label. - if_option(edge_label(ELabel_3), Opts, string_phrase(dcg_call(ELabel_3, E), ELabel)), - - % Penwidth. - if_option(edge_penwidth(Penwidth_2), Opts, call(Penwidth_2, E, EPenwidth)), - - % Style. - if_option(edge_style(Style_2), Opts, call(Style_2, E, EStyle)), - - exclude( - option_has_var_value, - [ - arrowhead(EArrowhead), - color(EColor), - label(ELabel), - penwidth(EPenwidth), - style(EStyle) - ], - EAttrs - ). - - - -%! graph_attributes( -%! -GraphAttributes:list(compound), -%! +Options:list(compound) -%! ) is det. -% The following options are supported: -% * `graph_charset(+oneof(['iso-8859-1','Latin1','UTF-8']))` -% The name of the character set that is used to encode text in the graph. -% Default: `UTF-8`. -% * `graph_colorscheme(+oneof([none,svg,x11]))` -% The colorscheme from which the color in this graph are taken. -% Default: `x11`. -% * `graph_directed(+boolean)` -% Whether the graph is directed (`true`) or undirected (`false`). -% Default: `false`. -% * `graph_fontsize(+float)` -% The font size of text in the graph. -% Default: `11.0`. -% * `graph_label(+atom)` -% The graph label. -% No default. -% * `graph_overlap(+boolean)` -% Whether the vertices are allowed to overlap. -% Default: `false`. - -graph_attributes(GAttrs, Opts):- - % Characer set. - option(graph_charset(Charset), Opts, 'UTF-8'), - % Colorscheme. - option(graph_colorscheme(Colorscheme), Opts, x11), - % Directed. - option(graph_directed(Directed), Opts, false), - % Fontsize. - option(graph_fontsize(Fontsize), Opts, 11.0), - % Label. - % Defaults to the empty string. - option(graph_label(GLabel), Opts, '\"\"'), - % Overlap. - option(graph_overlap(Overlap), Opts, false), - exclude( - option_has_var_value, - [ - charset(Charset), - colorscheme(Colorscheme), - directed(Directed), - fontsize(Fontsize), - label(GLabel), - overlap(Overlap) - ], - GAttrs - ). - - - -%! vertex_term( -%! +Vertices:ordset(compound), -%! +Vertex:compound, -%! -VertexTerm:compound, -%! +Options:list(compound) -%! ) is det. -% The following options are supported: -% * `vertex_color(:ColorFunction)` -% A function that assigns colors to vertices. -% No default. -% * `vertex_id(:ColorFunction)` -% A functions that assigns unique identifiers to vertices. -% * `vertex_image(:ImageFunction)` -% A function that assigns images to vertices. -% No default. -% * `vertex_label(:LabelFunction)` -% A function that assigns labels to vertices. -% No default. -% * `vertex_peripheries(:PeripheriesFunction)` -% A function that assinges peripheries to vertices. -% No default. -% * `vertex_position(:PositionFunction)` -% No default. -% * `vertex_shape(:ShapeFunction)` -% A function that assinges shapes to vertices. -% No default. -% * `vertex_uri(:UriFunction)` - -vertex_term(Vs, V, vertex(VId,VAttrs), Opts):- - % Color. - if_option(vertex_color(Color_2), Opts, call(Color_2, V, VColor)), - - % Id. - (option(vertex_id(Id_2), Opts) - call(Id_2, V, VId) ; nth0chk(VId, Vs, V)), - - % Image. - ignore(if_option(vertex_image(Image_2), Opts, call(Image_2, V, VImage))), - - % Label. - if_option(vertex_label(VLabel_2), Opts, string_phrase(dcg_call(VLabel_2, V), VLabel)), - - % Peripheries. - if_option(vertex_peripheries(Peripheries_2), Opts, - call(Peripheries_2, V, VPeripheries) - ), - - % Position. - if_option(vertex_position(Position_4), Opts, - call(Position_4, Vs, Opts, V, VPosition) - ), - - % Shape. - if_option(vertex_shape(Shape_2), Opts, call(Shape_2, V, VShape)), - - % URI - if_option(vertex_uri(Uri_2), Opts, call(Uri_2, V, VUri)), - - exclude( - option_has_var_value, - [ - color(VColor), - image(VImage), - label(VLabel), - peripheries(VPeripheries), - pos(VPosition), - shape(VShape), - 'URL'(VUri) - ], - VAttrs - ). - - - - - -% HELPERS % - -%! edge_components(+Edge:compound, -FromV, -ToV) is det. - -edge_components(edge(FromV,_,ToV), FromV, ToV):- !. -edge_components(edge(FromV,ToV), FromV, ToV):- !. -edge_components(FromV-ToV, FromV, ToV):- !. diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl deleted file mode 100644 index f55fce5..0000000 --- a/prolog/gv/gv_attr_type.pl +++ /dev/null @@ -1,421 +0,0 @@ -:- module( - gv_attr_type, - [ - gv_attr_type//1, % ?Type:atom - addDouble//1, % +Double:float - addPoint//1, % +Point:compound - arrowType//1, % +ArrowType:atom - bool//1, % +Boolean:boolean - clusterMode//1, % +ClusterMode:atom - dirType//1, % +DirectionType:oneof([back,both,forward,none]) - double//1, % +Double:float - doubleList//1, % +Doubles:list(float) - escString//1, - %layerList//1, - %layerRange//1, - lblString//1, - int//1, % +Integer:integer - outputMode//1, % +OutputMode:atom - %packMode//1, - pagedir//1, % +Pagedir:atom - point//1, % +Point:compound - pointList//1, % +Points:list(compound) - %portPos//1, - quadType//1, % +QuadType:atom - rankType//1, % +RankType:atom - rankdir//1, % +RankDirection:atom - rect//1, % +Rectangle:compound - shape//1, - smoothType//1, % +SmoothType:atom - %splineType//1, - %startType//1, - string//1, % ?Content:atom - style//2 % +Context:oneof([cluster,edge,node]) - % +Style:atom - %viewPort//1 - ] -). -:- reexport( - library(gv/gv_color), - [ - color//1, % +Color:compound - colorList//1 % +ColorList:list(compound) - ] -). - -/**  GraphViz attribute types - -@author Wouter Beek -@version 2015/07, 2015/11, 2016/02 -*/ - -:- use_module(library(dcg/dcg_ext), except([string//1])). -:- use_module(library(gv/gv_html)). - - - - - -%! gv_attr_type(?Type:atom) is nondet. - -gv_attr_type(addDouble) -- \"addDouble\". -gv_attr_type(addPoint) -- \"addPoint\". -gv_attr_type(arrowType) -- \"arrowType\". -gv_attr_type(bool) -- \"bool\". -gv_attr_type(color) -- \"color\". -gv_attr_type(colorList) -- \"colorList\". -gv_attr_type(clusterMode) -- \"clusterMode\". -gv_attr_type(dirType) -- \"dirType\". -gv_attr_type(double) -- \"double\". -gv_attr_type(doubleList) -- \"doubleList\". -gv_attr_type(escString) -- \"escString\". -gv_attr_type(layerList) -- \"layerList\". -gv_attr_type(layerRange) -- \"layerRange\". -gv_attr_type(lblString) -- \"lblString\". -gv_attr_type(int) -- \"int\". -gv_attr_type(outputMode) -- \"outputMode\". -gv_attr_type(packMode) -- \"packMode\". -gv_attr_type(pagedir) -- \"pagedir\". -gv_attr_type(point) -- \"point\". -gv_attr_type(pointList) -- \"pointList\". -gv_attr_type(portPos) -- \"portPos\". -gv_attr_type(quadType) -- \"quadType\". -gv_attr_type(rankType) -- \"rankType\". -gv_attr_type(rankdir) -- \"rankdir\". -gv_attr_type(rect) -- \"rect\". -gv_attr_type(shape) -- \"shape\". -gv_attr_type(smoothType) -- \"smoothType\". -gv_attr_type(splineType) -- \"splineType\". -gv_attr_type(startType) -- \"startType\". -gv_attr_type(string) -- \"string\". -gv_attr_type(style) -- \"style\". -gv_attr_type(viewPort) -- \"viewPort\". - - - -%! addDouble(+Float:float)// . -% An *addDouble* is represented by a Prolog float. - -addDouble(N) -- (\"+\", ! ; \"\"), float(N). - - - -%! addPoint(+Point:compound)// . -% An *addPoint* is represented by a compound of the following form: -% `point(X:float,Y:float,InputOnly:boolean)`. - -addPoint(Point) -- (\"+\", ! ; \"\"), point(Point). - - - -%! arrowType(+ArrowType:atom)// . - -arrowType(V) -- primitive_shape(V). -arrowType(V) -- derived(V). -arrowType(V) -- backwards_compatible(V). - -primitive_shape(box) -- \"box\". -primitive_shape(crow) -- \"crow\". -primitive_shape(circle) -- \"circle\". -primitive_shape(diamond) -- \"diamond\". -primitive_shape(dot) -- \"dot\". -primitive_shape(inv) -- \"inv\". -primitive_shape(none) -- \"none\". -primitive_shape(normal) -- \"normal\". -primitive_shape(tee) -- \"tee\". -primitive_shape(vee) -- \"vee\". - -derived(odot) -- \"odot\". -derived(invdot) -- \"invdot\". -derived(invodot) -- \"invodot\". -derived(obox) -- \"obox\". -derived(odiamond) -- \"odiamond\". - -backwards_compatible(ediamond) -- \"ediamond\". -backwards_compatible(empty) -- \"empty\". -backwards_compatible(halfopen) -- \"halfopen\". -backwards_compatible(invempty) -- \"invempty\". -backwards_compatible(open) -- \"open\". - - - -%! bool(+Value:boolean)// . - -bool(false) -- \"false\". -bool(false) -- \"no\". -bool(true) -- \"true\". -bool(true) -- \"yes\". - - - -%! clusterMode(+ClusterMode:atom)// . - -clusterMode(global) -- \"global\". -clusterMode(local) -- \"local\". -clusterMode(none) -- \"none\". - - - -%! dirType(+DirectionType:oneof([back,both,forward,none]))// . - -dirType(back) -- \"back\". -dirType(both) -- \"both\". -dirType(forward) -- \"forward\". -dirType(none) -- \"none\". - - - -%! double(+Double:float)// . - -double(N) -- float(N). - - - -%! doubleList(+Doubles:list(float))// . - -doubleList([H|T]) -- double(H), (\":\", !, doubleList(T) ; {T = []}). - - - -%! escString(+String:or([atom,string]))// . -% @tbd Support for context-dependent replacements. - -escString(S1) -- - {( string(S1) - - string_phrase(escape_double_quotes, S1, S2) - ; atom_phrase(escape_double_quotes, S1, S2) - )}, - \"\\\"\", atom(S2), \"\\\"\". - -escape_double_quotes, [0'\\\\,0'\"] -- [0'\"], !, escape_double_quotes. -escape_double_quotes, [X] -- [X], !, escape_double_quotes. -escape_double_quotes -- \"\". - - - -% @tbd layerList - - - -% @tbd layerRange - - - -%! lblString(+String:compound)// . - -lblString(html_like_label(V)) -- gv_html_like_label(V). -lblString(V) -- escString(V). - - - -%! int(+Integer:integer)// . - -int(V) -- integer(V). - - - -%! outputMode(+OutputMode:atom)// . - -outputMode(breadthfirst) -- \"breadthfirst\". -outputMode(edgesfirst) -- \"edgesfirst\". -outputMode(nodesfirst) -- \"nodesfirst\". - - - -% @tbd packMode - - - -%! pagedir(+PageDirection:atom)// . - -pagedir('BL') -- \"BL\". -pagedir('BR') -- \"BR\". -pagedir('LB') -- \"LB\". -pagedir('LT') -- \"LT\". -pagedir('RB') -- \"RB\". -pagedir('RT') -- \"RT\". -pagedir('TL') -- \"TL\". -pagedir('TR') -- \"TR\". - - - -%! point(+Point:compound)// . -% A *point* is represented by a compound of the following form: -% `point(X:float,Y:float,Changeable:boolean)`. - -point(point(X,Y,Changeable)) -- - float(X), \",\", float(Y), - input_changeable(Changeable). - -input_changeable(false) -- \"\". -input_changeable(true) -- \"!\". - - - -%! pointList(+Points:list(compound))// . - -pointList(Points) -- - *(point, Points). - - - -% @tbd portPos - - - -%! quadType(+QuadType:atom)// . - -quadType(fast) -- \"fast\". -quadType(none) -- \"none\". -quadType(normal) -- \"normal\". - - - -%! rankType(+RankType:atom)// . - -rankType(max) -- \"max\". -rankType(min) -- \"min\". -rankType(same) -- \"same\". -rankType(sink) -- \"sink\". -rankType(source) -- \"source\". - - - -%! rankdir(+RankDirection:oneof(['BT','LR','RL','TB']))// . - -rankdir('BT') -- \"BT\". -rankdir('LR') -- \"LR\". -rankdir('RL') -- \"RL\". -rankdir('TB') -- \"TB\". - - - -%! rect(+Rectangle:compound)// . - -rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -- - float(LowerLeftX), \",\", - float(LowerLeftY), \",\", - float(UpperRightX), \",\", - float(UpperRightY). - - - -%! shape(+Shape:atom)// . - -shape(V) -- {polygon_based_shape(V)}, atom(V). - -polygon_based_shape(assembly). -polygon_based_shape(box). -polygon_based_shape(box3d). -polygon_based_shape(cds). -polygon_based_shape(circle). -polygon_based_shape(component). -polygon_based_shape(diamond). -polygon_based_shape(doublecircle). -polygon_based_shape(doubleoctagon). -polygon_based_shape(egg). -polygon_based_shape(ellipse). -polygon_based_shape(fivepoverhang). -polygon_based_shape(folder). -polygon_based_shape(hexagon). -polygon_based_shape(house). -polygon_based_shape(insulator). -polygon_based_shape(invhouse). -polygon_based_shape(invtrapezium). -polygon_based_shape(invtriangle). -polygon_based_shape(larrow). -polygon_based_shape(lpromoter). -polygon_based_shape('Mcircle'). -polygon_based_shape('Mdiamond'). -polygon_based_shape('Msquare'). -polygon_based_shape(none). -polygon_based_shape(note). -polygon_based_shape(noverhang). -polygon_based_shape(octagon). -polygon_based_shape(oval). -polygon_based_shape(parallelogram). -polygon_based_shape(pentagon). -polygon_based_shape(plaintext). -polygon_based_shape(point). -polygon_based_shape(polygon). -polygon_based_shape(primersite). -polygon_based_shape(promoter). -polygon_based_shape(proteasesite). -polygon_based_shape(proteinstab). -polygon_based_shape(rarrow). -polygon_based_shape(rect). -polygon_based_shape(rectangle). -polygon_based_shape(restrictionsite). -polygon_based_shape(ribosite). -polygon_based_shape(rnastab). -polygon_based_shape(rpromoter). -polygon_based_shape(septagon). -polygon_based_shape(signature). -polygon_based_shape(square). -polygon_based_shape(tab). -polygon_based_shape(terminator). -polygon_based_shape(threepoverhang). -polygon_based_shape(trapezium). -polygon_based_shape(triangle). -polygon_based_shape(tripleoctagon). -polygon_based_shape(utr). - - - -%! smoothType(+SmoothType:atom)// . - -smoothType(V) -- {smoothType(V)}, atom(V). - -smoothType(avg_dist). -smoothType(graph_dist). -smoothType(none). -smoothType(power_dist). -smoothType(rng). -smoothType(spring). -smoothType(triangle). - - - -% @tbd splineType - - - -% @tbd startType - - - -%! string(?String:atom)// . -% A GraphViz string. - -string(Content) -- \"\\\"\", atom(Content), \"\\\"\". - - - -%! style(?Context:oneof([cluster,edge,node]), ?Style:atom) is nondet. - -style(Context, Style) -- {style(Context, Style)}, atom(Style). - -style(cluster, bold). -style(cluster, dashed). -style(cluster, dotted). -style(cluster, filled). -style(cluster, rounded). -style(cluster, solid). -style(cluster, striped). -style(edge, bold). -style(edge, dashed). -style(edge, dotted). -style(edge, solid). -style(node, bold). -style(node, dashed). -style(node, diagonals). -style(node, dotted). -style(node, filled). -style(node, rounded). -style(node, solid). -style(node, striped). -style(node, wedged). - - - -% @tbd viewPort diff --git a/prolog/gv/gv_attrs.data b/prolog/gv/gv_attrs.data deleted file mode 100644 index 95fc680..0000000 --- a/prolog/gv/gv_attrs.data +++ /dev/null @@ -1,169 +0,0 @@ -gv_attr('Damping',[graph],[double],'0.99','0.0','neato only'). -gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only'). -gv_attr('URL',[cluster,edge,graph,node],[escString],_G59448,'','svg, postscript, map only'). -gv_attr('_background',[graph],[string],_G59644,'',''). -gv_attr(area,[cluster,node],[double],'1.0','0','patchwork only'). -gv_attr(arrowhead,[edge],[arrowType],normal,'',''). -gv_attr(arrowsize,[edge],[double],'1.0','0.0',''). -gv_attr(arrowtail,[edge],[arrowType],normal,'',''). -gv_attr(bb,[graph],[rect],'','','write only'). -gv_attr(bgcolor,[cluster,graph],[color,colorList],_G60571,'',''). -gv_attr(center,[graph],[bool],false,'',''). -gv_attr(charset,[graph],[string],'\"UTF-8\"','',''). -gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only'). -gv_attr(color,[cluster,edge,node],[color,colorList],black,'',''). -gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','',''). -gv_attr(comment,[edge,graph,node],[string],'','',''). -gv_attr(compound,[graph],[bool],false,'','dot only'). -gv_attr(concentrate,[graph],[bool],false,'',''). -gv_attr(constraint,[edge],[bool],true,'','dot only'). -gv_attr(decorate,[edge],[bool],false,'',''). -gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only'). -gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only'). -gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only'). -gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','',''). -gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only'). -gv_attr(distortion,[node],[double],'0.0','-100.0',''). -gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only'). -gv_attr(edgeURL,[edge],[escString],'','','svg, map only'). -gv_attr(edgehref,[edge],[escString],'','','svg, map only'). -gv_attr(edgetarget,[edge],[escString],_G63711,'','svg, map only'). -gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only'). -gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only'). -gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot'). -gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','',''). -gv_attr(fixedsize,[node],[bool,string],false,'',''). -gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'',''). -gv_attr(fontname,[cluster,edge,graph,node],[string],'\"Times-Roman\"','',''). -gv_attr(fontnames,[graph],[string],'','','svg only'). -gv_attr(fontpath,[graph],[string],'system-dependent','',''). -gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0',''). -gv_attr(forcelabels,[graph],[bool],true,'',''). -gv_attr(gradientangle,[cluster,graph,node],[int],'','',''). -gv_attr(group,[node],[string],'','','dot only'). -gv_attr(headURL,[edge],[escString],'','','svg, map only'). -gv_attr(head_lp,[edge],[point],'','','write only'). -gv_attr(headclip,[edge],[bool],true,'',''). -gv_attr(headhref,[edge],[escString],'','','svg, map only'). -gv_attr(headlabel,[edge],[lblString],'','',''). -gv_attr(headport,[edge],[portPos],center,'',''). -gv_attr(headtarget,[edge],[escString],_G4892,'','svg, map only'). -gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only'). -gv_attr(height,[node],[double],'0.5','0.02',''). -gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only'). -gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only'). -gv_attr(image,[node],[string],'','',''). -gv_attr(imagepath,[graph],[string],'','',''). -gv_attr(imagescale,[node],[bool,string],false,'',''). -gv_attr(inputscale,[graph],[double],_G6250,'','fdp, neato only'). -gv_attr(label,[cluster,edge,graph,node],[lblString],'\"\\\\N\" (nodes)\"\" (otherwise)','',''). -gv_attr(labelURL,[edge],[escString],'','','svg, map only'). -gv_attr(label_scheme,[graph],[int],'0','0','sfdp only'). -gv_attr(labelangle,[edge],[double],'-25.0','-180.0',''). -gv_attr(labeldistance,[edge],[double],'1.0','0.0',''). -gv_attr(labelfloat,[edge],[bool],false,'',''). -gv_attr(labelfontcolor,[edge],[color],black,'',''). -gv_attr(labelfontname,[edge],[string],'\"Times-Roman\"','',''). -gv_attr(labelfontsize,[edge],[double],'14.0','1.0',''). -gv_attr(labelhref,[edge],[escString],'','','svg, map only'). -gv_attr(labeljust,[cluster,graph],[string],'\"c\"','',''). -gv_attr(labelloc,[cluster,graph,node],[string],'\"t\"(clusters)\"b\"(root graphs)\"c\"(nodes)','',''). -gv_attr(labeltarget,[edge],[escString],_G8276,'','svg, map only'). -gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only'). -gv_attr(landscape,[graph],[bool],false,'',''). -gv_attr(layer,[cluster,edge,node],[layerRange],'','',''). -gv_attr(layerlistsep,[graph],[string],'\",\"','',''). -gv_attr(layers,[graph],[layerList],'','',''). -gv_attr(layerselect,[graph],[layerRange],'','',''). -gv_attr(layersep,[graph],[string],'\" :\\\\t\"','',''). -gv_attr(layout,[graph],[string],'','',''). -gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only'). -gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only'). -gv_attr(levelsgap,[graph],[double],'0.0','','neato only'). -gv_attr(lhead,[edge],[string],'','','dot only'). -gv_attr(lheight,[cluster,graph],[double],'','','write only'). -gv_attr(lp,[cluster,edge,graph],[point],'','','write only'). -gv_attr(ltail,[edge],[string],'','','dot only'). -gv_attr(lwidth,[cluster,graph],[double],'','','write only'). -gv_attr(margin,[cluster,graph,node],[double,point],'','',''). -gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only'). -gv_attr(mclimit,[graph],[double],'1.0','','dot only'). -gv_attr(mindist,[graph],[double],'1.0','0.0','circo only'). -gv_attr(minlen,[edge],[int],'1','0','dot only'). -gv_attr(mode,[graph],[string],major,'','neato only'). -gv_attr(model,[graph],[string],shortpath,'','neato only'). -gv_attr(mosek,[graph],[bool],false,'','neato only'). -gv_attr(nodesep,[graph],[double],'0.25','0.02',''). -gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'',''). -gv_attr(normalize,[graph],[double,bool],false,'','not dot'). -gv_attr(notranslate,[graph],[bool],false,'','neato only'). -gv_attr(nslimitnslimit1,[graph],[double],'','','dot only'). -gv_attr(ordering,[graph,node],[string],'','','dot only'). -gv_attr(orientation,[node],[double],'0.0','360.0',''). -gv_attr(orientation,[graph],[string],'','',''). -gv_attr(outputorder,[graph],[outputMode],breadthfirst,'',''). -gv_attr(overlap,[graph],[string,bool],true,'','not dot'). -gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only'). -gv_attr(overlap_shrink,[graph],[bool],true,'','prism only'). -gv_attr(pack,[graph],[bool,int],false,'',''). -gv_attr(packmode,[graph],[packMode],node,'',''). -gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','',''). -gv_attr(page,[graph],[double,point],'','',''). -gv_attr(pagedir,[graph],[pagedir],'BL','',''). -gv_attr(pencolor,[cluster],[color],black,'',''). -gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0',''). -gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0',''). -gv_attr(pin,[node],[bool],false,'','fdp, neato only'). -gv_attr(pos,[edge,node],[point,splineType],'','',''). -gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only'). -gv_attr(quantum,[graph],[double],'0.0','0.0',''). -gv_attr(rank,[subgraph],[rankType],'','','dot only'). -gv_attr(rankdir,[graph],[rankdir],'TB','','dot only'). -gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only'). -gv_attr(ratio,[graph],[double,string],'','',''). -gv_attr(rects,[node],[rect],'','','write only'). -gv_attr(regular,[node],[bool],false,'',''). -gv_attr(remincross,[graph],[bool],true,'','dot only'). -gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only'). -gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only'). -gv_attr(root,[graph,node],[string,bool],'(graphs)false(nodes)','','circo, twopi only'). -gv_attr(rotate,[graph],[int],'0','',''). -gv_attr(rotation,[graph],[double],'0','','sfdp only'). -gv_attr(samehead,[edge],[string],'','','dot only'). -gv_attr(sametail,[edge],[string],'','','dot only'). -gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','',''). -gv_attr(scale,[graph],[double,point],'','','not dot'). -gv_attr(searchsize,[graph],[int],'30','','dot only'). -gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot'). -gv_attr(shape,[node],[shape],ellipse,'',''). -gv_attr(shapefile,[node],[string],'','',''). -gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only'). -gv_attr(sides,[node],[int],'4','0',''). -gv_attr(size,[graph],[double,point],'','',''). -gv_attr(skew,[node],[double],'0.0','-100.0',''). -gv_attr(smoothing,[graph],[smoothType],'\"none\"','','sfdp only'). -gv_attr(sortv,[cluster,graph,node],[int],'0','0',''). -gv_attr(splines,[graph],[bool,string],'','',''). -gv_attr(start,[graph],[startType],'','','fdp, neato only'). -gv_attr(style,[cluster,edge,graph,node],[style],'','',''). -gv_attr(stylesheet,[graph],[string],'','','svg only'). -gv_attr(tailURL,[edge],[escString],'','','svg, map only'). -gv_attr(tail_lp,[edge],[point],'','','write only'). -gv_attr(tailclip,[edge],[bool],true,'',''). -gv_attr(tailhref,[edge],[escString],'','','svg, map only'). -gv_attr(taillabel,[edge],[lblString],'','',''). -gv_attr(tailport,[edge],[portPos],center,'',''). -gv_attr(tailtarget,[edge],[escString],_G21528,'','svg, map only'). -gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only'). -gv_attr(target,[cluster,edge,graph,node],[escString,string],_G21878,'','svg, map only'). -gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only'). -gv_attr(truecolor,[graph],[bool],'','','bitmap output only'). -gv_attr(vertices,[node],[pointList],'','','write only'). -gv_attr(viewport,[graph],[viewPort],'','',''). -gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot'). -gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)',''). -gv_attr(width,[node],[double],'0.75','0.01',''). -gv_attr(xdotversion,[graph],[string],'','','xdot only'). -gv_attr(xlabel,[edge,node],[lblString],'','',''). -gv_attr(xlp,[edge,node],[point],'','','write only'). -gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000',''). diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl deleted file mode 100644 index 4a92d5b..0000000 --- a/prolog/gv/gv_attrs.pl +++ /dev/null @@ -1,76 +0,0 @@ -:- module( - gv_attrs, - [ - gv_attr_value//2 % +Context:oneof([cluster,edge,graph,node,subgraph]) - % +Attr - ] -). -:- ensure_loaded(library('gv/gv_attrs.data')). - -/**  GraphViz attributes - -@author Wouter Beek -@version 2015/07-2015/08, 2015/10, 2016/03 -*/ - -:- use_module(library(apply)). -:- use_module(library(dcg/dcg_ext)). -:- use_module(library(error)). -:- use_module(library(gv/gv_attr_type), [gv_attr_type//1]). -:- use_module(library(lists)). -:- use_module(library(os/file_ext)). - - - - - -%! gv_attr_value(+Context, +Attr)// is det. -% Uses the default value in case Value is uninstantiated. -% Otherwise, performs a typecheck and converts the given value. -% -% Context can be either `cluster`, `edge`, `graph`, `node` or `subgraph`. - -% Use the default if no value is given. -gv_attr_value(Context, Name=Value) -- - { - var(Value), - gv_attr(Name, UsedBy, _, DefaultValue, _, _), - % Check validity of context. - memberchk(Context, UsedBy) - }, !, - gv_attr_value(Context, Name=DefaultValue). -gv_attr_value(Context, Name=Value) -- - { - % Check the validity of the context argument. - gv_attr(Name, UsedBy, Types, _, Minimum, _), - memberchk(Context, UsedBy), - - % Pick a value type non-deterministically. - member(Type, Types), - - % The `style` type is the only one that requires the context argument. - ( Type == style - - Dcg =.. [Type,Context] - ; Dcg =.. [Type] - ), - - % Check validity of Value w.r.t. minimum value -- if available. - check_minimum(Value, Minimum) - }, !, - dcg_call(gv_attr_type:Dcg, Value). -gv_attr_value(_, Name=_) -- - {existence_error(gv_attr, Name)}. - - - - - -% HELPERS % - -%! check_minimum(+Value:atom, +Minimum:number) is semidet. -% Trivially succeeds if no minimum value is available for a given attribute. - -check_minimum(_, ''):- !. -check_minimum(V, Min1):- - atom_number(Min1, Min2), - Min2 =GraphViz color - -@author Wouter Beek -@tbd Color value `transparent` is only available in the output formats - ps, svg, fig, vmrl, and the bitmap formats. -@version 2015/08, 2015/10, 2016/02 -*/ - -:- use_module(library(apply)). -:- use_module(library(dcg/dcg_ext)). -:- use_module(library(lists)). -:- use_module(library(os/file_ext)). - - - - - -% color(+Color:compound)// . -% A *color* is represented by a compound term of one of the following forms: -% 1. `rgb(Red:nonneg,Green:nonneg,Blue:nonneg)` -% 2. `rgba(Red:nonneg,Green:nonneg,Blue:nonneg,Alpha:nonneg)` -% 3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))` - -color(rgb(Red,Green,Blue)) -- !, - \"#\", - #(3, hex_color, [Red,Green,Blue]). -color(rgbs(Red,Green,Blue,Alpha)) -- !, - color(rgb(Red,Green,Blue)), - hex_color(Alpha). -color(hsv(Hue,Saturation,Value)) -- !, - #(3, hsv_color, [Hue,Saturation,Value]). -color(Name) -- - {gv_color(_, Name)}, - atom(Name). - -hex_color(I) -- - xinteger(I). - -hsv_color(D, Head, Tail):- - format(codes(Head,Tail), '~2f', [D]). - - - -%! colorList(+Pairs:list(pair(compound,float)))// . - -colorList(L) -- - '+'(wc, L). - -wc(Color-Float) -- - color(Color), - ( wc_weight(Float) - ; \"\" - ). - -wc_weight(Float) -- - \";\", - float(Float). diff --git a/prolog/gv/gv_dom.pl b/prolog/gv/gv_dom.pl deleted file mode 100644 index 30c4263..0000000 --- a/prolog/gv/gv_dom.pl +++ /dev/null @@ -1,29 +0,0 @@ -:- module( - gv_dom, - [ - gv_dom/3 % +ExportG, -Dom, +Opts - ] -). - -/**  GraphViz DOM - -@author Wouter Beek -@version 2015/07, 2016/01 -*/ - -:- use_module(library(gv/gv_file)). -:- use_module(library(option)). -:- use_module(library(svg/svg_ext)). - - - - - -%! gv_dom(+ExportG, -Dom, +Opts) is det. - -gv_dom(ExportG, Dom, Opts1):- - % Make sure the file type of the output file is SvgDom. - merge_options([output(svg)], Opts1, Opts2), - graph_viz(ExportG, ToFile, Opts2), - svg_dom(ToFile, Dom), - delete_file(ToFile). diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl deleted file mode 100644 index 993fcee..0000000 --- a/prolog/gv/gv_file.pl +++ /dev/null @@ -1,175 +0,0 @@ -:- module( - gv_file, - [ - graph_viz/2, % +ExportG, ?File - graph_viz/3 % +ExportG, ?File, +Opts - ] -). - -/**  GraphViz file - -@author Wouter Beek -@version 2015/07, 2015/10-2015/11, 2016/01 -*/ - -:- use_module(library(code_ext)). -:- use_module(library(error)). -:- use_module(library(gv/gv_graph)). -:- use_module(library(option)). -:- use_module(library(os/external_program)). -:- use_module(library(os/process_ext)). -:- use_module(library(string_ext)). - -:- predicate_options(graph_viz/3, 3, [ - pass_to(file_to_gv/3, 3) - ]). -:- predicate_options(file_to_gv/3, 3, [ - method(+oneof([circo,dot,fdp,neato,osage,sfdp,twopi])), - output(+atom) - ]). - -:- dynamic(user:module_uses/2). -:- multifile(user:module_uses/2). - -user:module_uses(gv_file, program(dot)). - - - - - -%! graph_viz(+ExportGraph:compound, ?File:atom) is det. -%! graph_viz(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det. -% Returns a file containing a GraphViz visualization of the given graph. -% -% The following options are supported: -% * method(+oneof([circo,dot,fdp,neato,osage,sfdp,twopi]) -% The algorithm used by GraphViz for positioning the tree nodes. -% Default is `dot'. -% For possible values see gv_method/1. -% * output(+atom)` -% The file type of the generated GraphViz file. -% Default is `pdf`. -% For possible values see gv_output_type/1. - -graph_viz(ExportG, File):- - graph_viz(ExportG, File, []). -graph_viz(ExportG, File, Opts):- - once(phrase(gv_graph(ExportG), Cs)), - - % Be thread-safe. - thread_self(Id), - string_list_concat([\"gv_file\",Id], \"_\", ThreadName), - absolute_file_name(ThreadName, TmpFile, [access(write),extensions([dot])]), - setup_call_cleanup( - open(TmpFile, write, Write, [encoding(utf8)]), - with_output_to(Write, put_codes(Cs)), - close(Write) - ), - file_to_gv(TmpFile, File, Opts). - - -%! file_to_gv( -%! +InputFile:atom, -%! ?OutputFile:atom, -%! +Options:list(compound) -%! ) is det. -% Converts a GraphViz DOT file to an image file, using a specific -% visualization method. - -file_to_gv(InputFile, OutputFile, Opts):- - var(OutputFile), !, - option(output(Ext), Opts, pdf), - file_name_extension(out, Ext, LocalName), - absolute_file_name(LocalName, OutputFile, Opts), - file_to_gv(InputFile, OutputFile, Opts). -file_to_gv(InputFile, OutputFile, Opts):- - option(output(dot), Opts), !, - ( var(OutputFile) - - OutputFile = InputFile - ; rename_file(InputFile, OutputFile) - ). -file_to_gv(InputFile, OutputFile, Opts):- - % Typecheck for `method` option. - option(method(Method), Opts, dot), - findall(Method0, gv_method(Method0), Methods), - must_be(oneof(Methods), Method), - - % Typecheck for `output` option. - option(output(OutputType), Opts, pdf), - findall(OutputType0, gv_output_type(OutputType0), OutputTypes), - must_be(oneof(OutputTypes), OutputType), - - % Run the GraphViz conversion command in the shell. - format(atom(OutputTypeFlag), \"-T~a\", [OutputType]), - format(atom(OutputFileFlag), \"-o~a\", [OutputFile]), - run_process( - Method, - [OutputTypeFlag,file(InputFile),OutputFileFlag] - ). - - - - - -% HELPERS % - -gv_method(circo). -gv_method(dot). -gv_method(fdp). -gv_method(neato). -gv_method(osage). -gv_method(sfdp). -gv_method(twopi). - - -gv_output_type(bmp). -gv_output_type(canon). -gv_output_type(dot). -gv_output_type(gv). -gv_output_type(xdot). -gv_output_type('xdot1.2'). -gv_output_type('xdot1.4'). -gv_output_type(cgimage). -gv_output_type(cmap). -gv_output_type(eps). -gv_output_type(exr). -gv_output_type(fig). -gv_output_type(gd). -gv_output_type(gd2). -gv_output_type(gif). -gv_output_type(gtk). -gv_output_type(ico). -gv_output_type(imap). -gv_output_type(cmapx). -gv_output_type(imap_np). -gv_output_type(cmapx_np). -gv_output_type(ismap). -gv_output_type(jp2). -gv_output_type(jpg). -gv_output_type(jpeg). -gv_output_type(jpe). -gv_output_type(pct). -gv_output_type(pict). -gv_output_type(pdf). -gv_output_type(pic). -gv_output_type(plain). -gv_output_type('plain-ext'). -gv_output_type(png). -gv_output_type(pov). -gv_output_type(ps). -gv_output_type(ps2). -gv_output_type(psd). -gv_output_type(sgi). -gv_output_type(svg). -gv_output_type(svgz). -gv_output_type(tga). -gv_output_type(tif). -gv_output_type(tiff). -gv_output_type(tk). -gv_output_type(vml). -gv_output_type(vmlz). -gv_output_type(vrml). -gv_output_type(wbmp). -gv_output_type(webp). -gv_output_type(xlib). -gv_output_type(x11). diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl deleted file mode 100644 index c95c9cc..0000000 --- a/prolog/gv/gv_graph.pl +++ /dev/null @@ -1,252 +0,0 @@ -:- module( - gv_graph, - [ - gv_graph//1 % +Graph:compound - ] -). - -/**  GraphViz graph - -Generates GraphViz graphs in the DOT format based on -a Prolog representation of a graph. - -In GraphViz vertices are called 'nodes'. - ---- - -@author Wouter Beek -@version 2015/07, 2015/12 -*/ - -:- use_module(library(apply)). -:- use_module(library(dcg/dcg_ext)). -:- use_module(library(gv/gv_graph_comp)). -:- use_module(library(lists)). -:- use_module(library(option)). - - - - - -%! gv_graph(+Graph:compound)// is det. -% Wrapper around gv_graph//2 with no indentation. - -gv_graph(G) -- gv_graph(G, 0). - - -%! gv_graph(+Graph:compound, +Indent:nonneg)// is det. -% The follow graph attributes are supported, -% beyond the GraphViz attributes for graphs: -% * `directed(+boolean)` -% Whether the graph is directed (`true`) or undirected (`false`). -% Default: `false`. -% * `name(+GraphName:atom)` -% * `strict(+StrictGraph:boolean)` -% This forbids the creation of self-arcs and multi-edges; -% they are ignored in the input file. -% Only in combinattion with directionality `directed`. -% -% ```abnf -% graph = [\"strict\"] (\"graph\" / \"digraph\") [ID] \"{\" stmt_list \"}\" -% ``` -% -% `GraphTerm` is a compound term of the following form: -% ```prolog -% graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes) -% ``` -% -% `RankedVertexTerms` is a list of compound terms of the following form: -% ```prolog -% RankVertex-ContentVertices -% ``` -% -% @tbd Add support for subgraphs (arbitrary nesting). -% @tbd Add support for escape strings: -% http://www.graphviz.org/doc/info/attrs.html#k:escString -% @tbd Assert attributes that are generic with respect to a subgraph. -% @tbd Not all vertex and edge properties can be shared it seems (e.g., label). - -gv_graph(G1, I) -- - { - include_ranks(G1, G2), - G2 = graph(VTerms,RankedVTerms,ETerms,GAttrs1), - shared_attributes(VTerms, SharedVAttrs, NewVTerms), - shared_attributes(ETerms, SharedEAttrs, NewETerms), - add_default(GAttrs1, overlap(false), GAttrs2), - I = 0 - }, - - % The first statement in the GraphViz output. - % States that this file represents a graph according to the GraphViz format. - tab(I), - - % Strictness. - {select_option(strict(Strict), GAttrs2, GAttrs3, false)}, - gv_strict(Strict), - - % Directedness. - {select_option(directed(Directed), GAttrs3, GAttrs4, true)}, - gv_graph_type(Directed), - \" \", - - % Graph name. - ( {select_option(name(GName), GAttrs4, GAttrs5)} - - gv_id(GName), - \" \" - ; {GAttrs5 = GAttrs4} - ), - - % The body of the DOT file appears between curly braces. - \"{\\n\", - - % The following lines are indented. - {NewI is I + 1}, - - % Attributes that apply to the graph as a whole. - gv_generic_attributes_statement(graph, NewI, GAttrs5), - - % Attributes that are the same for all nodes. - gv_generic_attributes_statement(node, NewI, SharedVAttrs), - - % Attributes that are the same for all edges. - gv_generic_attributes_statement(edge, NewI, SharedEAttrs), - - % Only add a line_feed if some content was already written - % and some content is about to be written. - ( % Succeeds if no content was written. - {(GAttrs5 == [], SharedVAttrs == [], SharedEAttrs == [])} - - \"\" - ; % Succeeds if no content is about to be written. - {(NewVTerms == [], RankedVTerms == [])} - - \"\" - ; \"\\n\" - ), - - % The list of GraphViz nodes. - gv_node_statements(NewI, NewVTerms), - ({NewVTerms == []} - \"\" ; \"\\n\"), - - % The ranked GraphViz nodes (displayed at the same height). - gv_ranked_node_collections(NewI, RankedVTerms), - ({RankedVTerms == []} - \"\" ; \"\\n\"), - - { - findall( - edge(FromId,ToId,[]), - ( - nth0(J1, RankedVTerms, rank(vertex(FromId,_),_)), - nth0(J2, RankedVTerms, rank(vertex(ToId,_),_)), - % We assume that the rank vertices are nicely ordered. - succ(J1, J2) - ), - RankEdges - ) - }, - - % The rank edges. - gv_edge_statements(NewI, Directed, RankEdges), - - % The non-rank edges. - gv_edge_statements(NewI, Directed, NewETerms), - - % Note that we do not include a line_feed here. - - % We want to indent the closing curly brace. - tab(I), - \"}\\n\". - - - -%! gv_edge_statements( -%! +Indent:nonneg, -%! +Directed:boolean, -%! +Statements:list(compound) -%! )// is det. - -gv_edge_statements(I, Dir, L) -- *(gv_edge_statement(I, Dir), L). - - - -%! gv_edge_statements(+Indent:nonneg, +Statements:list(compound))// is det. - -gv_node_statements(I, L) -- *(gv_node_statement(I), L). - - - -%! gv_ranked_node_collections(+Indent:nonneg, +Collections:list)// is det. - -gv_ranked_node_collections(I, L) -- *(gv_ranked_node_collection(I), L). - - - - - -% HELPERS % - -%! add_default_option( -%! +Options:list(compound), -%! +Default:compound, -%! -NewOptions:list(compound) -%! ) is det. - -add_default(L1, Opt, L2):- - Opt =.. [N,_Value], - Opt0 =.. [N,_FreshVar], - ( option(Opt0, L1) - - L2 = L1 - ; L2 = [Opt|L1] - ). - - - -%! gv_graph_type(+Directed:boolean)// is det. -% The type of graph that is represented. - -gv_graph_type(false) -- !, \"graph\". -gv_graph_type(true) -- \"digraph\". - - - -%! gv_strict(+Strict:boolean)// is det. -% The keyword denoting that the graph is strict, i.e., has no self-arcs and -% no multi-edges. -% This only applies to directed graphs. - -gv_strict(false) -- !, \"\". -gv_strict(true) -- \"strict \". - - - -%! invlude_ranges(+Graph:compound, -GraphWithRanks:compound) is det. -% Ensures that there is a ranks components in -% the graph-denoting compound term. - -include_ranks(graph(Vs,Rs,Es,L), graph(Vs,Rs,Es,L)):- !. -include_ranks(graph(Vs,Es,L), graph(Vs,[],Es,L)). - - - -%! shared_attributes( -%! +Terms:list(compound), -%! -SharedAttributes:list(compound), -%! -NewTerms:list(compound) -%! ) is det. - -shared_attributes(Ts1, Shared, Ts2):- - maplist(term_to_attrs, Ts1, L1), - extract_shared(L1, Shared), - maplist(remove_shared_attributes(Shared), L1, L2), - maplist(term_change_attrs, Ts1, L2, Ts2). - -term_to_attrs(edge(_,_,A), A). -term_to_attrs(vertex(_,A), A). - -extract_shared([], []):- !. -extract_shared(Argss, Shared):- - ord_intersection(Argss, Shared). - -remove_shared_attributes(Shared, Args1, Args2):- - ord_subtract(Args1, Shared, Args2). - -term_change_attrs(edge(From,To,_), A, edge(From,To,A)). -term_change_attrs(vertex(Id,_), A, vertex(Id,A)). diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl deleted file mode 100644 index 30ea9c5..0000000 --- a/prolog/gv/gv_graph_comp.pl +++ /dev/null @@ -1,309 +0,0 @@ -:- module( - gv_graph_comp, - [ - gv_edge_statement//3, % +Indent:nonneg - % +Directed:boolean - % +Edge:compound - gv_generic_attributes_statement//3, % +Kind:oneof([edge,graph,node]) - % +Indent:nonneg - % +CategoryAttributes:list(compound) - gv_id//1, % +Name:compound - gv_node_statement//2, % +Indent:nonneg - % +Vertex:compound - gv_ranked_node_collection//2 % +Indent:nonneg - % +Rank - ] -). - -/**  GraphViz graph components - -```abnf -attr_list = \"[\" [a_list] \"]\" [attr_list] -a_list = ID \"=\" ID [\",\"] [a_list] -``` - -@author Wouter Beek -@see http://www.graphviz.org/content/dot-language -@version 2015/07-2015/08, 2015/10-2016/01 -*/ - -:- use_module(library(apply)). -:- use_module(library(dcg/dcg_ext)). -:- use_module(library(gv/gv_attrs)). -:- use_module(library(gv/gv_html)). -:- use_module(library(error)). -:- use_module(library(lists)). -:- use_module(library(ordsets)). - - - - - -%! gv_edge_statement( -%! +Indent:nonneg, -%! +Directed:boolean, -%! +Edge:compound -%! )// is det. -% A GraphViz statement describing an edge. -% -% @arg Indent The indentation level at which the edge statement is written. -% @arg Directed Whether the graph is directed or not. -% @arg GraphAttributes The attributes of the graph. Some of these attributes -% may be used in the edge statement (e.g., the colorscheme). -% @arg Edge A compound term in the GIFormat, representing an edge. -% -% @tbd Instead of gv_node_id//1 we could have a gv_subgraph//1 -% at the from and/or to location. -% @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2. - -gv_edge_statement(I, Dir, edge(From,To,Attrs)) -- - tab(I), - - gv_node_id(From), \" \", - gv_edge_operator(Dir), \" \", - gv_node_id(To), \" \", - - % We want `colorscheme/1` from the edges and - % `directionality/1` from the graph. - gv_attrs(edge, Attrs), - \"\\n\". - -%! gv_edge_operator(+Directed:boolean)// . -% The binary edge operator between two vertices. -% The operator that is used depends on whether the graph is directed or -% undirected. -% -% @arg Directed Whether an edge is directed (operator `-`) or -% undirected (operator `--`). - -gv_edge_operator(Dir) -- - {must_be(boolean, Dir)}, - ({Dir == false} - \"--\" ; {Dir == true} - \"-\"). - - - -%! gv_generic_attributes_statement( -%! +Kind:oneof([edge,graph,node]), -%! +Indent:nonneg, -%! +CategoryAttrs -%! )// -% A GraphViz statement describing generic attributes for a category of items. -% -% @arg Kind The category of items for to the attributes apply. -% Possible values: `edge`, `graph`, and `node`. -% @arg Indent An integer indicating the number of tabs. -% @arg GraphAttributes A list of name-value pairs. -% @arg CategoryAttributes A list of name-value pairs. -% -% ``` -% attr_stmt = (graph / node / edge) attr_list -% ``` - -gv_generic_attributes_statement(_, _, []) -- !, \"\". -gv_generic_attributes_statement(Kind, I, Attrs) -- - tab(I), - gv_kind(Kind), \" \", - gv_attrs(Kind, Attrs), - \"\\n\", !. - - - -%! gv_kind(+Kind:oneof([edge,graph,node]))// . - -gv_kind(Kind) -- {must_be(oneof([edge,graph,node]), Kind)}, atom(Kind). - - - -%! gv_node_statement(+Indent:nonneg, +Vertex:compound)// is det. -% A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes'). - -gv_node_statement(I, vertex(Id,Attrs)) -- - tab(I), - gv_node_id(Id), - gv_attrs(node, Attrs), - \"\\n\". - - - -%! gv_ranked_node_collection(+Indent:nonneg, Rank:pair)// is det. - -gv_ranked_node_collection(I, RankVTerm-VTerms) -- - tab(I), - \"{\\n\", - - % The rank attribute. - {NewI is I + 1}, - tab(NewI), - gv_attr(subgraph, rank(same)), - \"\\n\", - - % Vertice statements. - *(gv_node_statement(NewI), [RankVTerm|VTerms]), - - % We want to indent the closing curly brace. - tab(I), - \"\\n}\". - - - - - -% HELPERS % - -%! gv_attrs( -%! +Kind:oneof([edge,graph,node]), -%! +Attributes:list(compound) -%! )// is det. - -gv_attrs(Kind, L) -- \"[\", *(gv_attr(Kind), L), \"]\". - - -%! gv_attr(+Context:oneof([edge,graph,node]), +Attribute:compound)// is det. -% A single GraphViz attribute. -% We assume that the attribute has already been validated. - -gv_attr(Context, Attr) -- - {Attr =.. [N,V]}, - gv_id(N), \"=\", gv_attr_value(Context, N=V), \";\". - - - -%! gv_id(+Id:compound)// is det. -% Parse a GraphViz identifier. -% There are 4 variants: -% 1. Any string of alphabetic (`[a-zA-Z'200-'377]`) characters, -% underscores (`_`) or digits (`[0-9]`), not beginning with a digit. -% 2. A numeral `[-]?(.[0-9]+ | [0-9]+(.[0-9]*)? )`. -% 3. Any double-quoted string (`\"...\"`) possibly containing -% escaped quotes (`\\\"`). -% In quoted strings in DOT, the only escaped character is -% double-quote (`\"`). That is, in quoted strings, the dyad `\\\"` -% is converted to `\"`. All other characters are left unchanged. -% In particular, `\\\\` remains `\\\\`. -% Layout engines may apply additional escape sequences. -% Represented by a Prolog term of the form `double_quoted_string(ATOM)`. -% 4. An HTML string (``). -% Represented by a Prolog term of the form `html_like_label(COMPOUND)`. -% -% @tbd Add support for HTML-like labels: -% http://www.graphviz.org/doc/info/shapes.html#html -% This requires an XML grammar! - -% HTML strings (assumed to be the same as HTML-like labels). -gv_id(html_like_label(Content)) -- !, - gv_html_like_label(Content). -% Double-quoted strings. -% The quotes are already part of the given atom. -gv_id(double_quoted_string(Atom)) -- !, - \"\\\"\", atom(Atom), \"\\\"\". -% Numerals. -gv_id(N) -- - {number(N)}, !, - {number_codes(N, Cs)}, - Cs. -% Alpha-numeric strings. -gv_id(Atom) -- - {atom_codes(Atom, [H|T])}, - gv_id_first(H), - gv_id_rest(T), !, - % Variant 1 identifiers should not be (case-variants of) a - % GraphViz keyword. - {\\+ gv_keyword([H|T])}. - - -%! gv_id_first(+First:code)// is det. -% Generates the first character of a GraphViz identifier. - -gv_id_first(C) -- alpha(C), !. -gv_id_first(0'_) -- \"_\". - - -%! gv_id_rest(+NonFirst:code)// is det. -% Generates a non-first character of a GraphViz identifier. - -gv_id_rest([H|T]) -- alphadigit(H), !, gv_id_rest(T). -gv_id_rest([0'_|T]) -- \"_\", !, gv_id_rest(T). -gv_id_rest([]) -- \"\". - - - -%! gv_keyword(+Codes:list(code)) is semidet. -% Succeeds if the given codes for a GraphViz reserved keyword. - -gv_keyword(Cs):- - % Obviously, the keywords do not occur on the difference list input. - % So we must use phrase/[2,3]. - phrase(gv_keyword, Cs). - - -%! gv_keyword// . -% GraphViz has reserved keywords that cannot be used as identifiers. -% GraphViz keywords are case-insensitive. - -gv_keyword -- \"digraph\". -gv_keyword -- \"edge\". -gv_keyword -- \"graph\". -gv_keyword -- \"node\". -gv_keyword -- \"strict\". -gv_keyword -- \"subgraph\". - - - -%! gv_node_id(+NodeId:compound)// . -% GraphViz node identifiers can be of the following two types: -% 1. A GraphViz identifier, see gv_id//1. -% 2. A GraphViz identifier plus a GraphViz port indicator, see gv_port//0. -% -% @tbd Add support for GraphViz port indicators -% inside GraphViz node identifiers. - -gv_node_id(Id) -- gv_id(Id), !. -%gv_node_id(_) -- gv_id(_), gv_port. -gv_node_id(Id) -- {type_error(gv_node_id, Id)}. - - - -%! gv_numeral(-Number)// is det. -% ```bnf -% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? ) -% ``` - -gv_numeral(N) -- - (\"-\" - {Sg = -1} ; {Sg = 1}), - ( \".\" - - {I = 0}, +(digit, Ds), {pos_frac(Ds, Frac)} - ; +(digit, Ds1), {pos_sum(Ds1, I)}, - (\".\" - *(digit, Ds2), {pos_frac(Ds2, Frac)} ; {Frac = 0.0}) - ), - {N is Sg * (I + Frac)}. - - - -%! gv_port// is det. - -gv_port -- gv_port_location, (gv_port_angle ; \"\"). -gv_port -- gv_port_angle, (gv_port_location ; \"\"). -gv_port -- \":\", gv_compass_pt(_). - -gv_port_angle -- \"@\", gv_id(_). - -gv_port_location -- \":\", gv_id(_). -gv_port_location -- \":[\", gv_id(_), \",\", gv_id(_), \"]\". - - - -%! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . -% ``` -% compass_pt : ( n | ne | e | se | s | sw | w | nw | c | _ ) -% ``` - -gv_compass_pt('_') -- \"_\". -gv_compass_pt(c) -- \"c\". -gv_compass_pt(e) -- \"e\". -gv_compass_pt(n) -- \"n\". -gv_compass_pt(ne) -- \"ne\". -gv_compass_pt(nw) -- \"nw\". -gv_compass_pt(s) -- \"s\". -gv_compass_pt(se) -- \"se\". -gv_compass_pt(sw) -- \"sw\". -gv_compass_pt(w) -- \"w\". diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl deleted file mode 100644 index b5c1368..0000000 --- a/prolog/gv/gv_html.pl +++ /dev/null @@ -1,255 +0,0 @@ -:- module( - gv_html, - [ - gv_html_like_label//1 % +Content:compound - ] -). - -/**  GraphViz: HTML-like labels - -Grammar taken from the GraphViz Web site: - -``` -label : text - | table -text : textitem - | text textitem -textitem : string - |  - |  text  - |  text  - |  text  - |  text  - |  text  - |  text  - |  text  - |  text  -table : [  ]  rows  [  ] -rows : row - | rows row - | rows  row -row:  cells  -cells : cell - | cells cell - | cells  cell -cell:  label  - |    -``` - ---- - -@author Wouter Beek -@see http://www.graphviz.org/content/node-shapes#html -@version 2015/07, 2015/12 -*/ - -:- use_module(library(dcg/dcg_ext)). -:- use_module(library(html/html_dcg)). - - - - - -%! gv_html_like_label(+Content:compound)// is det. - -gv_html_like_label(Content) -- \"\". - - - -%! cell(+Contents:compound)// is det. -% Supported attributes for `TD`: -% - `ALIGN=\"CENTER|LEFT|RIGHT|TEXT\"` -% - `BALIGN=\"CENTER|LEFT|RIGHT\"` -% - `BGCOLOR=\"color\"` -% - `BORDER=\"value\"` -% - `CELLPADDING=\"value\"` -% - `CELLSPACING=\"value\"` -% - `COLOR=\"color\"` -% - `COLSPAN=\"value\"` -% - `FIXEDSIZE=\"FALSE|TRUE\"` -% - `GRADIENTANGLE=\"value\"` -% - `HEIGHT=\"value\"` -% - `HREF=\"value\"` -% - `ID=\"value\"` -% - `PORT=\"portName\"` -% - `ROWSPAN=\"value\"` -% - `SIDES=\"value\"` -% - `STYLE=\"value\"` -% - `TARGET=\"value\"` -% - `TITLE=\"value\"` -% - `TOOLTIP=\"value\"` -% - `VALIGN=\"MIDDLE|BOTTOM|TOP\"` -% - `WIDTH=\"value\"` -% -% Supported attributes for `IMG`: -% - `SCALE=\"FALSE|TRUE|WIDTH|HEIGHT|BOTH\"` -% - `SRC=\"value\"` - -cell(td(Contents)) -- !, - cell(td([],Contents)). -cell(td(Attrs1,Image)) -- - {(Image =.. [img,Attrs2] - true ; Image == img - Attrs2 = [])}, !, - html_element(td, Attrs1, html_element(img,Attrs2)). -cell(td(Attrs,Contents)) -- - html_element(td, Attrs, label(Contents)). - - - -%! cells(+Contents:list(compound))// is det. - -cells([H,vr|T]) -- !, cell(H), html_element(vr), cells(T). -cells([H|T]) -- !, cell(H), cells(T). -cells([]) -- \"\". - - - -%! label(+Content:compound)// is det. -% GraphViz HTML-like label. - -label(Content) -- table(Content), !. -label(Content) -- text(Content). - - - -%! row(+Contents:compound)// is det. - -row(tr(Contents)) -- html_element(tr, [], cells(Contents)). - - - -%! rows(+Contents:list)// is det. - -rows([hr|T]) -- !, html_element(hr), rows(T). -rows([H|T]) -- row(H), !, rows(T). -rows([]) -- \"\". - - - -%! table(+Contents:compound)// is det. -% ``` -% table : [  ]  rows  [  ] -% ``` -% -% Supported attributes for `TABLE`: -% - `ALIGN=\"CENTER|LEFT|RIGHT\"` -% - `BGCOLOR=\"color\"` -% - `BORDER=\"value\"` -% - `CELLBORDER=\"value\"` -% - `CELLPADDING=\"value\"` -% - `CELLSPACING=\"value\"` -% - `COLOR=\"color\"` -% - `COLUMNS=\"value\"` -% - `FIXEDSIZE=\"FALSE|TRUE\"` -% - `GRADIENTANGLE=\"value\"` -% - `HEIGHT=\"value\"` -% - `HREF=\"value\"` -% - `ID=\"value\"` -% - `PORT=\"portName\"` -% - `ROWS=\"value\"` -% - `SIDES=\"value\"` -% - `STYLE=\"value\"` -% - `TARGET=\"value\"` -% - `TITLE=\"value\"` -% - `TOOLTIP=\"value\"` -% - `VALIGN=\"MIDDLE|BOTTOM|TOP\"` -% - `WIDTH=\"value\"` -% -% Supported attributes for `FONT`: -% - `COLOR=\"color\"` -% Sets the color of the font within the scope of `...`, -% or the border color of the table or cell within the scope of -% `...`, or `...`. -% This color can be overridden by a `COLOR` attribute in descendents. -% By default, the font color is determined by the `fontcolor` attribute -% of the corresponding node, edge or graph, and the border color is -% determined by the color attribute of the corresponding node, edge or -% graph. -% - `FACE=\"fontname\"` -% - `POINT-SIZE=\"value\"` - -table(table(Contents)) -- !, - table(table([],Contents)). -table(table(Attrs,Contents)) -- !, - html_element(table, Attrs, rows(Contents)). -table(font(Table)) -- !, - table(font([],Table)). -table(font(Attrs1,Table)) -- - {( Table =.. [table,Attrs2,Contents] - - true - ; Table =.. [table,Contents] - - Attrs2 = [] - )}, - html_element(font, Attrs1, table(table(Attrs2,Contents))). - - - -%! text(+Contents:list)// . -% ``` -% text : textitem -% | text textitem -% ``` - -text(Contents) -- {is_list(Contents)}, !, '+'(textitem, Contents). -text(Content) -- text([Content]). - - - -%! textitem(+Content:compound)// . -% ``` -% textitem : string -% |  -% |  text  -% |  text  -% |  text  -% |  text  -% |  text  -% |  text  -% |  text  -% |  text  -% ``` -% -% Supported attributes for BR: -% * `ALIGN=\"CENTER|LEFT|RIGHT\"` -% -% Supported attributes for FONT: -% * COLOR=\"color\" -% * FACE=\"fontname\" -% * POINT-SIZE=\"value\" - -textitem(br(Attrs)) -- !, - html_element(br, Attrs). -% Compound term: parser. -textitem(Compound) -- - {var(Compound)}, !, - html_element(Name, _, text(Content)), - { - supported_html_element(Name), - Compound =.. [Name,Content] - }. -% Compound term: generator. -textitem(Compound) -- - { - Compound =.. [Name,Content], !, - supported_html_element(Name) - }, - html_element(Name, _, text(Content)). -textitem(String) -- - html_string(String). - - - - - -% HELPERS % - -%! supported_html_element(+Name:atom) is semidet. -%! supported_html_element(-Name:atom) is multi. - -supported_html_element(b). -supported_html_element(font). -supported_html_element(i). -supported_html_element(o). -supported_html_element(s). -supported_html_element(sub). -supported_html_element(sup). -supported_html_element(u). diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl deleted file mode 100644 index 4382aa6..0000000 --- a/prolog/tree/tree_viz.pl +++ /dev/null @@ -1,65 +0,0 @@ -:- module( - tree_viz, - [ - tree_export_graph/2, % +Tree, ExportG - tree_export_graph/3, % +Tree, ExportG, +Opts - tree_viz/2, % +Tree, ?File - tree_viz/3 % +Tree, ?File, +Opts - ] -). - -/**  Tree visualization - -Export trees to GraphViz. - -@author Wouter Beek -@version 2016/01-2016/02 -*/ - -:- use_module(library(graph/build_export_graph)). -:- use_module(library(gv/gv_file)). -:- use_module(library(ordsets)). -:- use_module(library(tree/l_tree)). -:- use_module(library(tree/s_tree)). - -:- predicate_options(tree_export_graph/3, 3, [ - pass_to(build_export_graph/4, 4) - ]). -:- predicate_options(tree_viz/3, 3, [ - pass_to(graph_viz/3, 3), - pass_to(tree_to_graph/3, 3) - ]). - - - - - -%! tree_export_graph(+Tree, -ExportG) is det. -%! tree_export_graph(+Tree, -ExportG, +Opts) is det. -% Opts are passed to build_export_graph/4. - -tree_export_graph(Tree, ExportG) :- - tree_export_graph(Tree, ExportG, []). - -tree_export_graph(Tree, ExportG, Opts) :- - ( is_s_tree(Tree) - - tree_to_graph(Tree, G) - ; is_l_tree(Tree) - - l_tree_to_graph(Tree, G) - ), - build_export_graph(G, ExportG, Opts). - - - -%! tree_viz(+Tree, ?File) is det. -%! tree_viz(+Tree, ?File, +Opts) is det. -% Stores the given tree term into a GraphViz file. -% -% Options are passed to export_graph_to_gv_file/3, tree_to_graph/3. - -tree_viz(Tree, File) :- - tree_viz(Tree, File, []). - -tree_viz(Tree, File, Opts) :- - tree_export_graph(Tree, ExportG, Opts), - graph_viz(ExportG, File, Opts). diff --git a/test/gv_attrs.log b/test/gv_attrs.log deleted file mode 100644 index a9c6010..0000000 --- a/test/gv_attrs.log +++ /dev/null @@ -1,169 +0,0 @@ -assert(gv_attr('Damping',[graph],[double],'0.99','0.0','neato only')). -assert(gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only')). -assert(gv_attr('URL',[cluster,edge,graph,node],[escString],_,'','svg, postscript, map only')). -assert(gv_attr('_background',[graph],[string],_,'','')). -assert(gv_attr(area,[cluster,node],[double],'1.0','0','patchwork only')). -assert(gv_attr(arrowhead,[edge],[arrowType],normal,'','')). -assert(gv_attr(arrowsize,[edge],[double],'1.0','0.0','')). -assert(gv_attr(arrowtail,[edge],[arrowType],normal,'','')). -assert(gv_attr(bb,[graph],[rect],'','','write only')). -assert(gv_attr(bgcolor,[cluster,graph],[color,colorList],_,'','')). -assert(gv_attr(center,[graph],[bool],false,'','')). -assert(gv_attr(charset,[graph],[string],'\"UTF-8\"','','')). -assert(gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only')). -assert(gv_attr(color,[cluster,edge,node],[color,colorList],black,'','')). -assert(gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','')). -assert(gv_attr(comment,[edge,graph,node],[string],'','','')). -assert(gv_attr(compound,[graph],[bool],false,'','dot only')). -assert(gv_attr(concentrate,[graph],[bool],false,'','')). -assert(gv_attr(constraint,[edge],[bool],true,'','dot only')). -assert(gv_attr(decorate,[edge],[bool],false,'','')). -assert(gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only')). -assert(gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only')). -assert(gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only')). -assert(gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','')). -assert(gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only')). -assert(gv_attr(distortion,[node],[double],'0.0','-100.0','')). -assert(gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only')). -assert(gv_attr(edgeURL,[edge],[escString],'','','svg, map only')). -assert(gv_attr(edgehref,[edge],[escString],'','','svg, map only')). -assert(gv_attr(edgetarget,[edge],[escString],_,'','svg, map only')). -assert(gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only')). -assert(gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only')). -assert(gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot')). -assert(gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','')). -assert(gv_attr(fixedsize,[node],[bool,string],false,'','')). -assert(gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','')). -assert(gv_attr(fontname,[cluster,edge,graph,node],[string],'\"Times-Roman\"','','')). -assert(gv_attr(fontnames,[graph],[string],'','','svg only')). -assert(gv_attr(fontpath,[graph],[string],'system-dependent','','')). -assert(gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','')). -assert(gv_attr(forcelabels,[graph],[bool],true,'','')). -assert(gv_attr(gradientangle,[cluster,graph,node],[int],'','','')). -assert(gv_attr(group,[node],[string],'','','dot only')). -assert(gv_attr(headURL,[edge],[escString],'','','svg, map only')). -assert(gv_attr(head_lp,[edge],[point],'','','write only')). -assert(gv_attr(headclip,[edge],[bool],true,'','')). -assert(gv_attr(headhref,[edge],[escString],'','','svg, map only')). -assert(gv_attr(headlabel,[edge],[lblString],'','','')). -assert(gv_attr(headport,[edge],[portPos],center,'','')). -assert(gv_attr(headtarget,[edge],[escString],_,'','svg, map only')). -assert(gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only')). -assert(gv_attr(height,[node],[double],'0.5','0.02','')). -assert(gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')). -assert(gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')). -assert(gv_attr(image,[node],[string],'','','')). -assert(gv_attr(imagepath,[graph],[string],'','','')). -assert(gv_attr(imagescale,[node],[bool,string],false,'','')). -assert(gv_attr(inputscale,[graph],[double],_,'','fdp, neato only')). -assert(gv_attr(label,[cluster,edge,graph,node],[lblString],'\"\\\\N\" (nodes)\"\" (otherwise)','','')). -assert(gv_attr(labelURL,[edge],[escString],'','','svg, map only')). -assert(gv_attr(label_scheme,[graph],[int],'0','0','sfdp only')). -assert(gv_attr(labelangle,[edge],[double],'-25.0','-180.0','')). -assert(gv_attr(labeldistance,[edge],[double],'1.0','0.0','')). -assert(gv_attr(labelfloat,[edge],[bool],false,'','')). -assert(gv_attr(labelfontcolor,[edge],[color],black,'','')). -assert(gv_attr(labelfontname,[edge],[string],'\"Times-Roman\"','','')). -assert(gv_attr(labelfontsize,[edge],[double],'14.0','1.0','')). -assert(gv_attr(labelhref,[edge],[escString],'','','svg, map only')). -assert(gv_attr(labeljust,[cluster,graph],[string],'\"c\"','','')). -assert(gv_attr(labelloc,[cluster,graph,node],[string],'\"t\"(clusters)\"b\"(root graphs)\"c\"(nodes)','','')). -assert(gv_attr(labeltarget,[edge],[escString],_,'','svg, map only')). -assert(gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only')). -assert(gv_attr(landscape,[graph],[bool],false,'','')). -assert(gv_attr(layer,[cluster,edge,node],[layerRange],'','','')). -assert(gv_attr(layerlistsep,[graph],[string],'\",\"','','')). -assert(gv_attr(layers,[graph],[layerList],'','','')). -assert(gv_attr(layerselect,[graph],[layerRange],'','','')). -assert(gv_attr(layersep,[graph],[string],'\" :\\\\t\"','','')). -assert(gv_attr(layout,[graph],[string],'','','')). -assert(gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only')). -assert(gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only')). -assert(gv_attr(levelsgap,[graph],[double],'0.0','','neato only')). -assert(gv_attr(lhead,[edge],[string],'','','dot only')). -assert(gv_attr(lheight,[cluster,graph],[double],'','','write only')). -assert(gv_attr(lp,[cluster,edge,graph],[point],'','','write only')). -assert(gv_attr(ltail,[edge],[string],'','','dot only')). -assert(gv_attr(lwidth,[cluster,graph],[double],'','','write only')). -assert(gv_attr(margin,[cluster,graph,node],[double,point],'','','')). -assert(gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only')). -assert(gv_attr(mclimit,[graph],[double],'1.0','','dot only')). -assert(gv_attr(mindist,[graph],[double],'1.0','0.0','circo only')). -assert(gv_attr(minlen,[edge],[int],'1','0','dot only')). -assert(gv_attr(mode,[graph],[string],major,'','neato only')). -assert(gv_attr(model,[graph],[string],shortpath,'','neato only')). -assert(gv_attr(mosek,[graph],[bool],false,'','neato only')). -assert(gv_attr(nodesep,[graph],[double],'0.25','0.02','')). -assert(gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','')). -assert(gv_attr(normalize,[graph],[double,bool],false,'','not dot')). -assert(gv_attr(notranslate,[graph],[bool],false,'','neato only')). -assert(gv_attr('nslimit nslimit1',[graph],[double],'','','dot only')). -assert(gv_attr(ordering,[graph,node],[string],'','','dot only')). -assert(gv_attr(orientation,[node],[double],'0.0','360.0','')). -assert(gv_attr(orientation,[graph],[string],'','','')). -assert(gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','')). -assert(gv_attr(overlap,[graph],[string,bool],true,'','not dot')). -assert(gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only')). -assert(gv_attr(overlap_shrink,[graph],[bool],true,'','prism only')). -assert(gv_attr(pack,[graph],[bool,int],false,'','')). -assert(gv_attr(packmode,[graph],[packMode],node,'','')). -assert(gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','')). -assert(gv_attr(page,[graph],[double,point],'','','')). -assert(gv_attr(pagedir,[graph],[pagedir],'BL','','')). -assert(gv_attr(pencolor,[cluster],[color],black,'','')). -assert(gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','')). -assert(gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','')). -assert(gv_attr(pin,[node],[bool],false,'','fdp, neato only')). -assert(gv_attr(pos,[edge,node],[point,splineType],'','','')). -assert(gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only')). -assert(gv_attr(quantum,[graph],[double],'0.0','0.0','')). -assert(gv_attr(rank,[subgraph],[rankType],'','','dot only')). -assert(gv_attr(rankdir,[graph],[rankdir],'TB','','dot only')). -assert(gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only')). -assert(gv_attr(ratio,[graph],[double,string],'','','')). -assert(gv_attr(rects,[node],[rect],'','','write only')). -assert(gv_attr(regular,[node],[bool],false,'','')). -assert(gv_attr(remincross,[graph],[bool],true,'','dot only')). -assert(gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only')). -assert(gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only')). -assert(gv_attr(root,[graph,node],[string,bool],'(graphs)false(nodes)','','circo, twopi only')). -assert(gv_attr(rotate,[graph],[int],'0','','')). -assert(gv_attr(rotation,[graph],[double],'0','','sfdp only')). -assert(gv_attr(samehead,[edge],[string],'','','dot only')). -assert(gv_attr(sametail,[edge],[string],'','','dot only')). -assert(gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','')). -assert(gv_attr(scale,[graph],[double,point],'','','not dot')). -assert(gv_attr(searchsize,[graph],[int],'30','','dot only')). -assert(gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot')). -assert(gv_attr(shape,[node],[shape],ellipse,'','')). -assert(gv_attr(shapefile,[node],[string],'','','')). -assert(gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only')). -assert(gv_attr(sides,[node],[int],'4','0','')). -assert(gv_attr(size,[graph],[double,point],'','','')). -assert(gv_attr(skew,[node],[double],'0.0','-100.0','')). -assert(gv_attr(smoothing,[graph],[smoothType],'\"none\"','','sfdp only')). -assert(gv_attr(sortv,[cluster,graph,node],[int],'0','0','')). -assert(gv_attr(splines,[graph],[bool,string],'','','')). -assert(gv_attr(start,[graph],[startType],'','','fdp, neato only')). -assert(gv_attr(style,[cluster,edge,graph,node],[style],'','','')). -assert(gv_attr(stylesheet,[graph],[string],'','','svg only')). -assert(gv_attr(tailURL,[edge],[escString],'','','svg, map only')). -assert(gv_attr(tail_lp,[edge],[point],'','','write only')). -assert(gv_attr(tailclip,[edge],[bool],true,'','')). -assert(gv_attr(tailhref,[edge],[escString],'','','svg, map only')). -assert(gv_attr(taillabel,[edge],[lblString],'','','')). -assert(gv_attr(tailport,[edge],[portPos],center,'','')). -assert(gv_attr(tailtarget,[edge],[escString],_,'','svg, map only')). -assert(gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only')). -assert(gv_attr(target,[cluster,edge,graph,node],[escString,string],_,'','svg, map only')). -assert(gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only')). -assert(gv_attr(truecolor,[graph],[bool],'','','bitmap output only')). -assert(gv_attr(vertices,[node],[pointList],'','','write only')). -assert(gv_attr(viewport,[graph],[viewPort],'','','')). -assert(gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot')). -assert(gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','')). -assert(gv_attr(width,[node],[double],'0.75','0.01','')). -assert(gv_attr(xdotversion,[graph],[string],'','','xdot only')). -assert(gv_attr(xlabel,[edge,node],[lblString],'','','')). -assert(gv_attr(xlp,[edge,node],[point],'','','write only')). -assert(gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','')). diff --git a/test/test.pl b/test/test.pl deleted file mode 100644 index 83dc023..0000000 --- a/test/test.pl +++ /dev/null @@ -1,15 +0,0 @@ -%/fca -:- use_module(library(fca/fca_viz)). -%/graph -:- use_module(library(graph/build_export_graph)). -%/gv -:- use_module(library(gv/gv_attrs)). -:- use_module(library(gv/gv_attr_type)). -:- use_module(library(gv/gv_color)). -:- use_module(library(gv/gv_dom)). -:- use_module(library(gv/gv_file)). -:- use_module(library(gv/gv_graph)). -:- use_module(library(gv/gv_graph_comp)). -:- use_module(library(gv/gv_html)). -%/tree -:- use_module(library(tree/tree_viz)). ``` 26: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 76ea35d å’Œå˜åŠ¨å 2a2728b  [back to content](#compare) ``` diff diff --git a/gv_dot.pl b/gv_dot.pl index 9888973..68443ba 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -76,13 +76,13 @@ gv_compass_pt(sw) -- `sw`. gv_compass_pt(w) -- `w`. -%! gv_edge_operator(+Directed:boolean)// . +%! gv_edge_operator(+Directedness:boolean)// . % The binary edge operator between two vertices. % The operator that is used depends on whether the graph is directed or % undirected. % -% @arg Directed Whether an edge is directed (operator `-`) or -% undirected (operator `--`). +% @arg Directedness Whether an edge is directed (operator `-`) or +% undirected (operator `--`). gv_edge_operator(false) -- !, `--`. gv_edge_operator(true) -- arrow(right, 2). @@ -90,14 +90,14 @@ gv_edge_operator(true) -- arrow(right, 2). %! gv_edge_statement( %! +Indent:nonneg, -%! +Directed:boolean, +%! +Directedness:boolean, %! +GraphAttributes:list(nvpair), %! +EdgeTerm:compound %! )// is det. % A GraphViz statement describing an edge. % % @arg Indent The indentation level at which the edge statement is written. -% @arg Directed Whether the graph is directed or not. +% @arg Directedness Whether the graph is directed or not. % @arg GraphAttributes The attributes of the graph. Some of these attributes % may be used in the edge statement (e.g., the colorscheme). % @arg EdgeTerm A compound term in the GIFormat, representing an edge. @@ -106,11 +106,11 @@ gv_edge_operator(true) -- arrow(right, 2). % at the from and/or to location. % @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2. -gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- +gv_edge_statement(I, Directedness, GAttrs, edge(FromId,ToId,EAttrs)) -- indent(I), gv_node_id(FromId), ` `, - gv_edge_operator(Directed), ` `, + gv_edge_operator(Directedness), ` `, gv_node_id(ToId), ` `, @@ -148,11 +148,11 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- %! gv_graph(+GraphTerm:compound)// % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: -% 1. `directonality(+Directed:oneof([directed,undirected]))` -% A directed graph uses the keyword `digraph`. -% An undirected graph uses the keyword `graph`. -% 2. `name(+GraphName:atom)` -% 3. `strict(+StrictGraph:boolean)` +% * `directedness(+boolean)` +% Whether the graph is directed (`true`) or undirected (`false`). +% Default: `false`. +% * `name(+GraphName:atom)` +% * `strict(+StrictGraph:boolean)` % This forbids the creation of self-arcs and multi-edges; % they are ignored in the input file. % Only in combinattion with directionality `directed`. @@ -185,7 +185,7 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- shared_attributes(VTerms, SharedVAttrs, NewVTerms), shared_attributes(ETerms, SharedEAttrs, NewETerms), select_nvpair(strict=Strict, GAttrs1, GAttrs2, false), - select_nvpair(directed=Directed, GAttrs2, GAttrs3, true), + select_nvpair(directedness=Directedness, GAttrs2, GAttrs3, true), select_nvpair(name=GName, GAttrs3, GAttrs4, noname), add_default_nvpair(GAttrs4, overlap, false, GAttrs5), I = 0 @@ -195,24 +195,24 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- % States that this file represents a graph according to the GraphViz format. indent(I), gv_strict(Strict), - gv_graph_type(Directed), ` `, + gv_graph_type(Directedness), ` `, gv_id(GName), ` `, bracketed( curly, - gv_graph1( + gv_graph0( I, NewVTerms, SharedVAttrs, RankedVTerms, NewETerms, SharedEAttrs, - Directed, GAttrs5 + Directedness, GAttrs5 ) - ), + ), newline. -gv_graph1( +gv_graph0( I, NewVTerms, SharedVAttrs, RankedVTerms, NewETerms, SharedEAttrs, - Directed, GAttrs + Directedness, GAttrs ) -- newline, @@ -254,10 +254,10 @@ gv_graph1( }, % The rank edges. - '*'(gv_edge_statement(NewI, Directed, GAttrs), RankEdges), + '*'(gv_edge_statement(NewI, Directedness, GAttrs), RankEdges), % The non-rank edges. - '*'(gv_edge_statement(NewI, Directed, GAttrs), NewETerms), + '*'(gv_edge_statement(NewI, Directedness, GAttrs), NewETerms), % Note that we do not include a newline here. @@ -265,7 +265,7 @@ gv_graph1( indent(I). -%! gv_graph_type(+Directed:boolean)// . +%! gv_graph_type(+Directedness:boolean)// . % The type of graph that is represented. gv_graph_type(false) -- `graph`. diff --git a/gv_file.pl b/gv_file.pl index c780692..9eaf66b 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -1,12 +1,17 @@ :- module( gv_file, [ + file_to_gv/2, % +File:atom + % +Options:list(nvpair) + file_to_gv/3, % +FromFile:atom + % ?ToFile:atom + % +Options:list(nvpair) gif_to_gv_file/3, % +GraphInterchangeFormat:compound - % ?ToFile:atom + % +ToFile:atom + % +Options:list(nvpair) + gif_to_svg_dom/3, % +GraphInterchangeFormat:compound + % -SvgDom:list(compound) % +Options:list(nvpair) - graph_to_svg_dom/3, % +GraphInterchangeFormat:compound - % -SvgDom:list(compound) - % +Options:list(nvpair) open_dot/1 % +File:file ] ). @@ -29,13 +34,10 @@ and GraphViz output files or SVG DOM structures. :- use_module(generics(codes_ext)). :- use_module(generics(db_ext)). -:- use_module(generics(error_ext)). -:- use_module(generics(trees)). :- use_module(os(file_ext)). :- use_module(os(run_ext)). :- use_module(os(safe_file)). :- use_module(svg(svg_file)). -:- use_module(ugraph(ugraph_export)). :- use_module(plGraphViz(gv_dot)). @@ -77,77 +79,56 @@ and GraphViz output files or SVG DOM structures. :- db_add_novel(user:prolog_file_type(xdot, graphviz_output)). :- db_add_novel(user:prolog_file_type(xdot, xdot)). -:- predicate_options(graph_to_svg_dom/3, 3, [ - pass_to(gif_to_gv_file/3, 3) +:- predicate_options(codes_to_gv_file/3, 3, [ + pass_to(file_to_gv/3, 3) ]). -:- predicate_options(gif_to_gv_file/3, 3, [ - pass_to(to_gv_file/3, 3) +:- predicate_options(file_to_gv/2, 2, [ + pass_to(file_to_gv/3, 3) ]). -:- predicate_options(to_gv_file/3, 3, [ - pass_to(convert_gv/3, 3) - ]). -:- predicate_options(convert_gv/3, 3, [ +:- predicate_options(file_to_gv/3, 3, [ method(+oneof([dot,sfdp])), to_file_type(+oneof([dot,jpeg,pdf,svg,xdot])) ]). +:- predicate_options(gif_to_svg_dom/3, 3, [ + pass_to(gif_to_gv_file/3, 3) + ]). +:- predicate_options(gif_to_gv_file/3, 3, [ + pass_to(codes_to_gv_file/3, 3) + ]). -%! gif_to_gv_file(+Gif:compound, -ToFile:atom, +Options:list(nvpair)) is det. -% Returns a file containing a GraphViz visualization of the given graph. -% -% The following options are supported: -% * =|method(+Method:oneof([dot,sfdp])|= -% The algorithm used by GraphViz for positioning the tree nodes. -% Either =dot= (default) or =sfdp=. -% * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|= -% The file type of the generated GraphViz file. -% Default: `pdf`. - -gif_to_gv_file(Gif, ToFile, Options):- - once(phrase(gv_graph(Gif), Codes)), - to_gv_file(Codes, ToFile, Options). - - -%! graph_to_svg_dom( -%! +GraphInterchangeFormat:compound, -%! -SvgDom:list(compound), +%! codes_to_gv_file( +%! +Codes:list(code), +%! +ToFile:atom, %! +Options:list(nvpair) %! ) is det. -graph_to_svg_dom(Gif, SvgDom, Options1):- - % Make sure the file type of the output file is SvgDom. - merge_options([to_file_type=svg], Options1, Options2), - gif_to_gv_file(Gif, ToFile, Options2), - file_to_svg(ToFile, SvgDom), - safe_delete_file(ToFile). - - -%! open_dot(+File:atom) is det. -% Opens the given DOT file. -% -% @tbd Test support on Windows. -% @tbd Test support on OS-X. - -open_dot(File):- - once(find_program_by_file_type(dot, Program)), - run_program(Program, [File]). +codes_to_gv_file(Codes, ToFile, Options):- + access_file(ToFile, write), + absolute_file_name(data(tmp), TmpFile, [access(write),file_type(dot)]), + setup_call_cleanup( + open(TmpFile, write, Write, [encoding(utf8)]), + put_codes(Write, Codes), + close(Write) + ), + file_to_gv(TmpFile, ToFile, Options), + delete_file(TmpFile). +%! file_to_gv(+FromFile:atom, +Options:list(nvpair)) is det. -% SUPPORT PREDICATES % +file_to_gv(FromFile, Options):- + file_to_gv(FromFile, _, Options). -%! convert_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det. +%! file_to_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det. % Converts a GraphViz DOT file to an image file, using a specific % visualization method. -convert_gv(FromFile, ToFile, Options):- +file_to_gv(FromFile, ToFile, Options):- option(to_file_type(dot), Options), !, rename_file(FromFile, ToFile). -convert_gv(FromFile, ToFile, Options):- - % The input file must be readable. - access_file(FromFile, read), - +file_to_gv(FromFile, ToFile, Options):- % The method option. option(method(Method), Options, dot), must_be(oneof([dot,sfdp]), Method), @@ -161,11 +142,8 @@ convert_gv(FromFile, ToFile, Options):- ( var(ToFile) - - absolute_file_name( - data(export), - ToFile, - [access(write),file_type(ToFileType)] - ) + user:prolog_file_type(ToExtension, ToFileType), + file_alternative(FromFile, _, _, ToExtension, ToFile) ; is_absolute_file_name(ToFile), % The given output file must match a certain file extension. @@ -186,26 +164,43 @@ convert_gv(FromFile, ToFile, Options):- exit_code_handler('GraphViz', ShellStatus). -%! to_gv_file(+Codes:list(code), ?ToFile:atom, +Options:list(nvpair)) is det. +%! gif_to_gv_file(+Gif:compound, +ToFile:atom, +Options:list(nvpair)) is det. +% Returns a file containing a GraphViz visualization of the given graph. +% +% The following options are supported: +% * =|method(+Method:oneof([dot,sfdp])|= +% The algorithm used by GraphViz for positioning the tree nodes. +% Either =dot= (default) or =sfdp=. +% * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|= +% The file type of the generated GraphViz file. +% Default: `pdf`. -to_gv_file(Codes, ToFile, Options):- - absolute_file_name( - data(tmp), - FromFile, - [access(write),file_type(graphviz)] - ), - setup_call_cleanup( - open(FromFile, write, Out, [encoding(utf8),type(test)]), - put_codes(Out, Codes), - close(Out) - ), - convert_gv(FromFile, ToFile, Options), +gif_to_gv_file(Gif, ToFile, Options):- + once(phrase(gv_graph(Gif), Codes)), + codes_to_gv_file(Codes, ToFile, Options). - %%%%% DEB: Store DOT file. - %%%%ignore(( - %%%% file_type_alternative(ToFile, graphviz, DOT_File), - %%%% safe_copy_file(FromFile, DOT_File) - %%%%)), - safe_delete_file(FromFile). +%! gif_to_svg_dom( +%! +GraphInterchangeFormat:compound, +%! -SvgDom:list(compound), +%! +Options:list(nvpair) +%! ) is det. + +gif_to_svg_dom(Gif, SvgDom, Options1):- + % Make sure the file type of the output file is SvgDom. + merge_options([to_file_type=svg], Options1, Options2), + gif_to_gv_file(Gif, ToFile, Options2), + file_to_svg(ToFile, SvgDom), + safe_delete_file(ToFile). + + +%! open_dot(+File:atom) is det. +% Opens the given DOT file. +% +% @tbd Test support on Windows. +% @tbd Test support on OS-X. + +open_dot(File):- + once(find_program_by_file_type(dot, Program)), + run_program(Program, [File]). ``` 27: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 2a2728b å’Œå˜åŠ¨å 7f9fc82  [back to content](#compare) ``` diff diff --git a/gv_tree.pl b/gv_tree.pl index afeb8f6..7a181b5 100644 --- a/gv_tree.pl +++ b/gv_tree.pl @@ -30,7 +30,7 @@ Export trees to GraphViz. %! ) is det. % Stores the given tree term into a GraphViz file. % -% Options are passed on to create_gif/3 and gif_to_gv_file/3. +% Options are passed on to build_gif/3 and gif_to_gv_file/3. tree_to_gv_file(Tree, ToFile, Options):- tree_to_gif(Tree, Gif, Options), @@ -39,5 +39,5 @@ tree_to_gv_file(Tree, ToFile, Options):- tree_to_gif(H-T, Gif, Options):- tree_to_vertices_edges(Tree, Vs, Es), - create_gif(Vs, Es, Gif, Options). + build_gif(Vs, Es, Gif, Options). ``` 28: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7f9fc82 å’Œå˜åŠ¨å 5baddb5  [back to content](#compare) ``` diff diff --git a/gv_dot.pl b/gv_dot.pl index 68443ba..4f7f341 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -76,12 +76,12 @@ gv_compass_pt(sw) -- `sw`. gv_compass_pt(w) -- `w`. -%! gv_edge_operator(+Directedness:boolean)// . +%! gv_edge_operator(+Directed:boolean)// . % The binary edge operator between two vertices. % The operator that is used depends on whether the graph is directed or % undirected. % -% @arg Directedness Whether an edge is directed (operator `-`) or +% @arg Directed Whether an edge is directed (operator `-`) or % undirected (operator `--`). gv_edge_operator(false) -- !, `--`. @@ -90,14 +90,14 @@ gv_edge_operator(true) -- arrow(right, 2). %! gv_edge_statement( %! +Indent:nonneg, -%! +Directedness:boolean, +%! +Directed:boolean, %! +GraphAttributes:list(nvpair), %! +EdgeTerm:compound %! )// is det. % A GraphViz statement describing an edge. % % @arg Indent The indentation level at which the edge statement is written. -% @arg Directedness Whether the graph is directed or not. +% @arg Directed Whether the graph is directed or not. % @arg GraphAttributes The attributes of the graph. Some of these attributes % may be used in the edge statement (e.g., the colorscheme). % @arg EdgeTerm A compound term in the GIFormat, representing an edge. @@ -106,11 +106,11 @@ gv_edge_operator(true) -- arrow(right, 2). % at the from and/or to location. % @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2. -gv_edge_statement(I, Directedness, GAttrs, edge(FromId,ToId,EAttrs)) -- +gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- indent(I), gv_node_id(FromId), ` `, - gv_edge_operator(Directedness), ` `, + gv_edge_operator(Directed), ` `, gv_node_id(ToId), ` `, @@ -148,7 +148,7 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- %! gv_graph(+GraphTerm:compound)// % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: -% * `directedness(+boolean)` +% * `directed(+boolean)` % Whether the graph is directed (`true`) or undirected (`false`). % Default: `false`. % * `name(+GraphName:atom)` @@ -185,7 +185,7 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- shared_attributes(VTerms, SharedVAttrs, NewVTerms), shared_attributes(ETerms, SharedEAttrs, NewETerms), select_nvpair(strict=Strict, GAttrs1, GAttrs2, false), - select_nvpair(directedness=Directedness, GAttrs2, GAttrs3, true), + select_nvpair(directed=Directed, GAttrs2, GAttrs3, true), select_nvpair(name=GName, GAttrs3, GAttrs4, noname), add_default_nvpair(GAttrs4, overlap, false, GAttrs5), I = 0 @@ -195,7 +195,7 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- % States that this file represents a graph according to the GraphViz format. indent(I), gv_strict(Strict), - gv_graph_type(Directedness), ` `, + gv_graph_type(Directed), ` `, gv_id(GName), ` `, bracketed( curly, @@ -203,16 +203,16 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- I, NewVTerms, SharedVAttrs, RankedVTerms, NewETerms, SharedEAttrs, - Directedness, GAttrs5 + Directed, GAttrs5 ) - ), + ), newline. gv_graph0( I, NewVTerms, SharedVAttrs, RankedVTerms, NewETerms, SharedEAttrs, - Directedness, GAttrs + Directed, GAttrs ) -- newline, @@ -254,10 +254,10 @@ gv_graph0( }, % The rank edges. - '*'(gv_edge_statement(NewI, Directedness, GAttrs), RankEdges), + '*'(gv_edge_statement(NewI, Directed, GAttrs), RankEdges), % The non-rank edges. - '*'(gv_edge_statement(NewI, Directedness, GAttrs), NewETerms), + '*'(gv_edge_statement(NewI, Directed, GAttrs), NewETerms), % Note that we do not include a newline here. @@ -265,7 +265,7 @@ gv_graph0( indent(I). -%! gv_graph_type(+Directedness:boolean)// . +%! gv_graph_type(+Directed:boolean)// . % The type of graph that is represented. gv_graph_type(false) -- `graph`. diff --git a/gv_file.pl b/gv_file.pl index 9eaf66b..0482196 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -112,8 +112,7 @@ codes_to_gv_file(Codes, ToFile, Options):- put_codes(Write, Codes), close(Write) ), - file_to_gv(TmpFile, ToFile, Options), - delete_file(TmpFile). + file_to_gv(TmpFile, ToFile, Options). %! file_to_gv(+FromFile:atom, +Options:list(nvpair)) is det. ``` 29: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 5baddb5 å’Œå˜åŠ¨å 95bfe7f  [back to content](#compare) ``` diff diff --git a/gv_dot.pl b/gv_dot.pl index 4f7f341..35bc3f9 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -197,6 +197,8 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- gv_strict(Strict), gv_graph_type(Directed), ` `, gv_id(GName), ` `, + + % The body of the DOT file appears between curly braces. bracketed( curly, gv_graph0( @@ -228,9 +230,21 @@ gv_graph0( % Attributes that are the same for all edges. gv_generic_attributes_statement(edge, NewI, GAttrs, SharedEAttrs), - % Only add a newline if some content was written in the previous three - % lines. - ({(GAttrs == [], SharedVAttrs == [], SharedEAttrs == [])} - `` ; newline), + % Only add a newline if some content was already written + % and some content is about to be written. + ( + { + % Succeeds if no content was written. + (GAttrs == [], SharedVAttrs == [], SharedEAttrs == []) + ; + % Succeeds if no content is about to be written. + (NewVTerms == [], RankedVTerms == []) + } + - + `` + ; + newline + ), % The list of GraphViz nodes. '*'(gv_node_statement(NewI, GAttrs), NewVTerms), diff --git a/gv_file.pl b/gv_file.pl index 0482196..bba87f9 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -7,7 +7,7 @@ % ?ToFile:atom % +Options:list(nvpair) gif_to_gv_file/3, % +GraphInterchangeFormat:compound - % +ToFile:atom + % ?ToFile:atom % +Options:list(nvpair) gif_to_svg_dom/3, % +GraphInterchangeFormat:compound % -SvgDom:list(compound) @@ -25,7 +25,7 @@ Also converts between GraphViz DOT formatted files and GraphViz output files or SVG DOM structures. @author Wouter Beek -@version 2011-2013/09, 2013/11-2014/01, 2014/05, 2014/07 +@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08 */ :- use_module(library(option)). @@ -36,7 +36,6 @@ and GraphViz output files or SVG DOM structures. :- use_module(generics(db_ext)). :- use_module(os(file_ext)). :- use_module(os(run_ext)). -:- use_module(os(safe_file)). :- use_module(svg(svg_file)). :- use_module(plGraphViz(gv_dot)). @@ -100,12 +99,11 @@ and GraphViz output files or SVG DOM structures. %! codes_to_gv_file( %! +Codes:list(code), -%! +ToFile:atom, +%! ?ToFile:atom, %! +Options:list(nvpair) %! ) is det. codes_to_gv_file(Codes, ToFile, Options):- - access_file(ToFile, write), absolute_file_name(data(tmp), TmpFile, [access(write),file_type(dot)]), setup_call_cleanup( open(TmpFile, write, Write, [encoding(utf8)]), @@ -163,7 +161,7 @@ file_to_gv(FromFile, ToFile, Options):- exit_code_handler('GraphViz', ShellStatus). -%! gif_to_gv_file(+Gif:compound, +ToFile:atom, +Options:list(nvpair)) is det. +%! gif_to_gv_file(+Gif:compound, ?ToFile:atom, +Options:list(nvpair)) is det. % Returns a file containing a GraphViz visualization of the given graph. % % The following options are supported: @@ -190,7 +188,7 @@ gif_to_svg_dom(Gif, SvgDom, Options1):- merge_options([to_file_type=svg], Options1, Options2), gif_to_gv_file(Gif, ToFile, Options2), file_to_svg(ToFile, SvgDom), - safe_delete_file(ToFile). + delete_file(ToFile). %! open_dot(+File:atom) is det. ``` 30: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 95bfe7f å’Œå˜åŠ¨å f1322fa  [back to content](#compare) ``` diff diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 5b34b01..d7d21ad 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 5b34b01ab0cc82a56e6fd90fc26e75da22f5a0fe +Subproject commit d7d21ad4d6d7cec98d8b0122f5303e691998f512 diff --git a/plHtml b/plHtml index 08480c4..18e657b 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit 08480c40acaee5f70bfb21e3c641bef1e7d258bd +Subproject commit 18e657b22a84d5e98a317ddec58314964ff68bcd ``` 31: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ f1322fa å’Œå˜åŠ¨å 474bea8  [back to content](#compare) ``` diff diff --git a/index.pl b/index.pl deleted file mode 100644 index 7461d13..0000000 --- a/index.pl +++ /dev/null @@ -1,2 +0,0 @@ -% Index of project plGraphViz (empty). - ``` 32: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 474bea8 å’Œå˜åŠ¨å 262cb2a  [back to content](#compare) ``` diff diff --git a/gv_tree.pl b/gv_tree.pl deleted file mode 100644 index 7a181b5..0000000 --- a/gv_tree.pl +++ /dev/null @@ -1,43 +0,0 @@ -:- module( - gv_tree, - [ - tree_to_gv_file/3 % +Tree:compound - % ?ToFile:atom - % +Options:list(nvpair) - ] -). - -/**  GraphViz tree - -Export trees to GraphViz. - -@author Wouter Beek -@version 2014/06-2014/07 -*/ - -:- use_module(library(aggregate)). - -:- use_module(generics(trees)). - -:- use_module(plGraphViz(gv_file)). -:- use_module(plGraphViz(gv_gif)). - - -%! tree_to_gv_file( -%! +Tree:compound, -%! ?ToFile:atom, -%! +Options:list(nvpair) -%! ) is det. -% Stores the given tree term into a GraphViz file. -% -% Options are passed on to build_gif/3 and gif_to_gv_file/3. - -tree_to_gv_file(Tree, ToFile, Options):- - tree_to_gif(Tree, Gif, Options), - gif_to_gv_file(Gif, ToFile, Options). - - -tree_to_gif(H-T, Gif, Options):- - tree_to_vertices_edges(Tree, Vs, Es), - build_gif(Vs, Es, Gif, Options). - ``` 33: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 262cb2a å’Œå˜åŠ¨å e7e6033  [back to content](#compare) ``` diff diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 7a64c82..3c7863d 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -49,9 +49,9 @@ @version 2014/06 */ -:- use_module(dcg(dcg_abnf)). -:- use_module(dcg(dcg_cardinal)). -:- use_module(dcg(dcg_content)). +:- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_cardinal)). +:- use_module(plDcg(dcg_content)). :- use_module(plGraphViz(gv_html)). @@ -97,7 +97,7 @@ gv_attr_type(viewPort). % An *addDouble* is represented by a Prolog float. addDouble(Float) -- - '?'(`+`), + '?'(`+`, []), double(Float). @@ -106,7 +106,7 @@ addDouble(Float) -- % `point(X:float,Y:float,InputOnly:boolean)`. addPoint(Point) -- - '?'(`+`), + '?'(`+`, []), point(Point). @@ -184,7 +184,7 @@ double(Double1) -- doubleList([H|T]) -- double(H), - '*'(doubleList1, T). + '*'(doubleList1, T, []). doubleList1(Float) -- `:`, @@ -255,7 +255,7 @@ input_only(true) -- `!`. pointList(Points) -- - '*'(point, Points). + '*'(point, Points, []). % @tbd portPos diff --git a/gv_attrs.pl b/gv_attrs.pl index dd0145a..faf496c 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -17,11 +17,12 @@ :- use_module(library(persistency)). :- use_module(library(xpath)). -:- use_module(dcg(dcg_content)). -:- use_module(dcg(dcg_generic)). :- use_module(generics(db_ext)). :- use_module(os(file_ext)). +:- use_module(plDcg(dcg_content)). +:- use_module(plDcg(dcg_generic)). + :- use_module(plHtml(html)). :- use_module(plHtml(html_table)). diff --git a/gv_color.pl b/gv_color.pl index 19d6e05..14026ee 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -21,16 +21,19 @@ :- use_module(library(persistency)). :- use_module(library(xpath)). -:- use_module(dcg(dcg_abnf)). -:- use_module(dcg(dcg_cardinal)). -:- use_module(dcg(dcg_content)). :- use_module(generics(db_ext)). :- use_module(os(file_ext)). -:- use_module(sparql(sparql_char)). + +:- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_cardinal)). +:- use_module(plDcg(dcg_content)). +:- use_module(plDcg_rfc(rfc2616_basic)). :- use_module(plHtml(html)). :- use_module(plHtml(html_table)). +:- use_module(plSparql_parse(sparql_char)). + :- db_add_novel(user:prolog_file_type(log, logging)). %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet. @@ -49,12 +52,12 @@ color(rgb(Red,Green,Blue)) -- !, `#`, - '#'(3, hex_color, [Red,Green,Blue]). + '#'(3, hex_color, [Red,Green,Blue], []). color(rgbs(Red,Green,Blue,Alpha)) -- !, `#`, - '#'(4, hex_color, [Red,Green,Blue,Alpha]). + '#'(4, hex_color, [Red,Green,Blue,Alpha], []). color(hsv(Hue,Saturation,Value)) -- !, - '#'(3, hsv_color, [Hue,Saturation,Value]). + '#'(3, hsv_color, [Hue,Saturation,Value], []). color(Name) -- {gv_color(_, Name)}, atom(Name). @@ -72,11 +75,11 @@ hsv_color(D, Head, Tail):- %! colorList(+Pairs:list(pair(compound,float)))// . colorList(Pairs) -- - '+'(wc, Pairs). + '+'(wc, Pairs, []). wc(Color-Float) -- color(Color), - '?'(wc_weight(Float)). + '?'(wc_weight(Float), []). wc_weight(Float) -- `;`, diff --git a/gv_dot.pl b/gv_dot.pl index 35bc3f9..accd5bd 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -22,12 +22,11 @@ In GraphViz vertices are called 'nodes'. :- use_module(library(lists)). :- use_module(library(ordsets)). -:- use_module(dcg(dcg_abnf)). -:- use_module(dcg(dcg_ascii)). -:- use_module(dcg(dcg_content)). -:- use_module(dcg(dcg_generic)). -:- use_module(dcg(dcg_meta)). -:- use_module(dcg(dcg_os)). +:- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_ascii)). +:- use_module(plDcg(dcg_content)). +:- use_module(plDcg(dcg_generic)). +:- use_module(plDcg(dcg_meta)). :- use_module(plGraphViz(gv_attrs)). :- use_module(plGraphViz(gv_html)). @@ -56,7 +55,7 @@ gv_attribute(Name=Val) -- % Attributes occur between square brackets. gv_attribute_list(Context, _, Attrs1) -- {maplist(gv_attr(Context), Attrs1, Attrs2)}, - bracketed(square, '*'(gv_attribute, Attrs2)). + bracketed(square, '*'(gv_attribute, Attrs2, [])). %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . @@ -117,7 +116,7 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- % We want `colorscheme/1` from the edges and % `directionality/1` from the graph. gv_attribute_list(edge, GAttrs, EAttrs), - newline. + line_feed. %! gv_generic_attributes_statement( @@ -142,7 +141,7 @@ gv_generic_attributes_statement(_, _, _, []) -- [], !. gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- indent(I), gv_kind(Kind), ` `, - gv_attribute_list(Kind, GraphAttrs, KindAttrs), newline. + gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed. %! gv_graph(+GraphTerm:compound)// @@ -208,7 +207,7 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- Directed, GAttrs5 ) ), - newline. + line_feed. gv_graph0( I, @@ -216,7 +215,7 @@ gv_graph0( NewETerms, SharedEAttrs, Directed, GAttrs ) -- - newline, + line_feed, % The following lines are indented. {NewI is I + 1}, @@ -230,7 +229,7 @@ gv_graph0( % Attributes that are the same for all edges. gv_generic_attributes_statement(edge, NewI, GAttrs, SharedEAttrs), - % Only add a newline if some content was already written + % Only add a line_feed if some content was already written % and some content is about to be written. ( { @@ -243,16 +242,16 @@ gv_graph0( - `` ; - newline + line_feed ), % The list of GraphViz nodes. - '*'(gv_node_statement(NewI, GAttrs), NewVTerms), - ({NewVTerms == []} - `` ; newline), + '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []), + ({NewVTerms == []} - `` ; line_feed), % The ranked GraphViz nodes (displayed at the same height). - '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms), - ({RankedVTerms == []} - `` ; newline), + '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []), + ({RankedVTerms == []} - `` ; line_feed), { findall( @@ -268,12 +267,12 @@ gv_graph0( }, % The rank edges. - '*'(gv_edge_statement(NewI, Directed, GAttrs), RankEdges), + '*'(gv_edge_statement(NewI, Directed, GAttrs), RankEdges, []), % The non-rank edges. - '*'(gv_edge_statement(NewI, Directed, GAttrs), NewETerms), + '*'(gv_edge_statement(NewI, Directed, GAttrs), NewETerms, []), - % Note that we do not include a newline here. + % Note that we do not include a line_feed here. % We want to indent the closing curly brace. indent(I). @@ -394,15 +393,15 @@ gv_node_id(Id) -- gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -- indent(I), gv_node_id(Id), ` `, - gv_attribute_list(node, GraphAttrs, VAttrs), newline. + gv_attribute_list(node, GraphAttrs, VAttrs), line_feed. gv_port -- gv_port_location, - '?'(gv_port_angle). + '?'(gv_port_angle, []). gv_port -- gv_port_angle, - '?'(gv_port_location). + '?'(gv_port_location, []). gv_port -- `:`, gv_compass_pt(_). @@ -452,18 +451,22 @@ gv_ranked_node_collection( ) -- indent(I), bracketed(curly, ( - newline, + line_feed, % The rank attribute. {NewI is I + 1}, - indent(NewI), gv_attribute(rank=same), `;`, newline, - - '*'(gv_node_statement(NewI, GraphAttrs), [Rank_V_Term|Content_V_Terms]), - + indent(NewI), gv_attribute(rank=same), `;`, line_feed, + + '*'( + gv_node_statement(NewI, GraphAttrs), + [Rank_V_Term|Content_V_Terms], + [] + ), + % We want to indent the closing curly brace. indent(I) )), - newline. + line_feed. %! gv_strict(+Strict:boolean)// is det. diff --git a/gv_html.pl b/gv_html.pl index b8d3190..3f0b08b 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -11,7 +11,7 @@ @version 2013/07, 2013/09, 2014/03-2014/06 */ -:- use_module(dcg(dcg_content)). +:- use_module(plDcg(dcg_content)). :- use_module(plHtml(html_dcg)). diff --git a/gv_numeral.pl b/gv_numeral.pl index 9b82fc0..7870eb1 100644 --- a/gv_numeral.pl +++ b/gv_numeral.pl @@ -11,10 +11,11 @@ @version 2014/05-2014/06 */ -:- use_module(dcg(dcg_abnf)). -:- use_module(dcg(dcg_cardinal)). :- use_module(math(math_ext)). +:- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_cardinal)). + %! gv_numeral(?Value:number)// . @@ -48,7 +49,7 @@ gv_numeral_abs(N) -- integer(N2) ; integer(N1), - '?'((`.`, 'integer?'(N2))) + '?'((`.`, 'integer?'(N2)), []) ). gv_numeral_abs(N) -- {var(N)}, ``` 34: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ e7e6033 å’Œå˜åŠ¨å e17bf44  [back to content](#compare) ``` diff ``` 35: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ e17bf44 å’Œå˜åŠ¨å 6596aa1  [back to content](#compare) ``` diff diff --git a/gv_file.pl b/gv_file.pl index bba87f9..c6d2933 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -30,7 +30,6 @@ and GraphViz output files or SVG DOM structures. :- use_module(library(option)). :- use_module(library(process)). -:- use_module(library(predicate_options)). % Declarations. :- use_module(generics(codes_ext)). :- use_module(generics(db_ext)). ``` 36: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 6596aa1 å’Œå˜åŠ¨å 87e8982  [back to content](#compare) ``` diff diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index d7d21ad..b1d2484 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit d7d21ad4d6d7cec98d8b0122f5303e691998f512 +Subproject commit b1d2484486ad4876aecc1bf70b2963b12efca341 diff --git a/plHtml b/plHtml index 18e657b..24fff7b 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit 18e657b22a84d5e98a317ddec58314964ff68bcd +Subproject commit 24fff7bcf90b6bc4fbf317d504be899dc1b869cb ``` 37: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 87e8982 å’Œå˜åŠ¨å cb6aada  [back to content](#compare) ``` diff diff --git a/gv_attrs.pl b/gv_attrs.pl index faf496c..1692915 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -21,7 +21,7 @@ :- use_module(os(file_ext)). :- use_module(plDcg(dcg_content)). -:- use_module(plDcg(dcg_generic)). +:- use_module(plDcg(dcg_generics)). :- use_module(plHtml(html)). :- use_module(plHtml(html_table)). diff --git a/gv_dot.pl b/gv_dot.pl index accd5bd..5f33e5c 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -25,7 +25,7 @@ In GraphViz vertices are called 'nodes'. :- use_module(plDcg(dcg_abnf)). :- use_module(plDcg(dcg_ascii)). :- use_module(plDcg(dcg_content)). -:- use_module(plDcg(dcg_generic)). +:- use_module(plDcg(dcg_generics)). :- use_module(plDcg(dcg_meta)). :- use_module(plGraphViz(gv_attrs)). ``` 38: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ cb6aada å’Œå˜åŠ¨å 7c8125b  [back to content](#compare) ``` diff diff --git a/gv_color.pl b/gv_color.pl index 14026ee..c5fccd4 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -13,7 +13,7 @@ @author Wouter Beek @tbd Color value `transparent` is only available in the output formats ps, svg, fig, vmrl, and the bitmap formats. -@version 2014/06 +@version 2014/06, 2014/10 */ :- use_module(library(apply)). @@ -32,8 +32,6 @@ :- use_module(plHtml(html)). :- use_module(plHtml(html_table)). -:- use_module(plSparql_parse(sparql_char)). - :- db_add_novel(user:prolog_file_type(log, logging)). %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet. diff --git a/gv_file.pl b/gv_file.pl index c6d2933..5253f39 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -135,15 +135,12 @@ file_to_gv(FromFile, ToFile, Options):- prolog_file_type(ToExtension, graphviz_output), !, % The output file is either given or created. - ( - var(ToFile) - - - user:prolog_file_type(ToExtension, ToFileType), - file_alternative(FromFile, _, _, ToExtension, ToFile) - ; - is_absolute_file_name(ToFile), - % The given output file must match a certain file extension. - file_name_extension(_, ToExtension, ToFile) + ( var(ToFile) + - user:prolog_file_type(ToExtension, ToFileType), + file_alternative(FromFile, _, _, ToExtension, ToFile) + ; is_absolute_file_name(ToFile), + % The given output file must match a certain file extension. + file_name_extension(_, ToExtension, ToFile) ), % Now that we have the output file we can prevent the % file type / file extension translation predicates from bakctracking. @@ -152,7 +149,8 @@ file_to_gv(FromFile, ToFile, Options):- % Run the GraphViz conversion command in the shell. format(atom(OutputType), '-T~w', [ToExtension]), process_create( - path(Method), + %%%%path(Method), + 'C:\\\\Program Files (x86)\\\\Graphviz2.38\\\\bin\\\\dot.exe', [OutputType,FromFile,'-o',ToFile], [process(PID)] ), ``` 39: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7c8125b å’Œå˜åŠ¨å 6a38f95  [back to content](#compare) ``` diff diff --git a/gv_file.pl b/gv_file.pl index 5253f39..00c9eb0 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -149,8 +149,9 @@ file_to_gv(FromFile, ToFile, Options):- % Run the GraphViz conversion command in the shell. format(atom(OutputType), '-T~w', [ToExtension]), process_create( - %%%%path(Method), - 'C:\\\\Program Files (x86)\\\\Graphviz2.38\\\\bin\\\\dot.exe', + path(Method), + % @tbd Windows hack: + %%%%'C:\\\\Program Files (x86)\\\\Graphviz2.38\\\\bin\\\\dot.exe', [OutputType,FromFile,'-o',ToFile], [process(PID)] ), ``` 40: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 6a38f95 å’Œå˜åŠ¨å ebb86cd  [back to content](#compare) ``` diff diff --git a/.gitignore b/.gitignore index b25c15b..7193a38 100644 --- a/.gitignore +++ b/.gitignore @@ -1 +1,4 @@ *~ +*# +*.db +data/* diff --git a/.gitmodules b/.gitmodules index a63cbff..844b1bd 100644 --- a/.gitmodules +++ b/.gitmodules @@ -4,3 +4,6 @@ [submodule \"plHtml\"] path = plHtml url = https://github.com/wouterbeek/plHtml.git +[submodule \"plDcg\"] +\tpath = plDcg +\turl = https://github.com/wouterbeek/plDcg.git diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index b1d2484..15bbbbf 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit b1d2484486ad4876aecc1bf70b2963b12efca341 +Subproject commit 15bbbbf25471abe856afbf92a04c5b3ce76b0217 diff --git a/debug.pl b/debug.pl new file mode 100644 index 0000000..099cb84 --- /dev/null +++ b/debug.pl @@ -0,0 +1,7 @@ +% Loads debug tools for the plGraphViz library. + +:- [load]. + +:- use_module(debug_project). +:- debug_all_files. + diff --git a/debug_project.pl b/debug_project.pl new file mode 100644 index 0000000..4eb2785 --- /dev/null +++ b/debug_project.pl @@ -0,0 +1,55 @@ +:- module( + debug_project, + [ + debug_all_files/0 + ] +). + +/**  Debug project + +Generic code for debugging a project: + * Load all subdirectories and Prolog files contained in those directories. + +@author Wouter Beek +@version 2014/10/31 +*/ + +:- use_module(library(ansi_term)). +:- use_module(library(apply)). + +:- use_module(os(dir_ext)). + +% Avoid errors when using gtrace/0 in threads. +:- initialization(guitracer). + + + +debug_all_files:- + absolute_file_name(project(.), Dir, [access(read),file_type(directory)]), + directory_files( + Dir, + Files1, + [ + file_types([prolog]), + include_directories(false), + include_self(false), + recursive(true) + ] + ), + exclude(do_not_load, Files1, Files2), + maplist(use_module, Files2). + +do_not_load(File1):- + file_base_name(File1, File2), + file_name_extension(File3, pl, File2), + do_not_load0(File3). + +do_not_load0(dcg_ascii). +do_not_load0(dcg_unicode). +do_not_load0(debug). +do_not_load0(debug_project). +do_not_load0(index). +do_not_load0(load). +do_not_load0(load_project). +do_not_load0(rfc2616_basic). +do_not_load0(run). diff --git a/load.pl b/load.pl index 4b117d1..1681cd0 100644 --- a/load.pl +++ b/load.pl @@ -1,12 +1,13 @@ -% Load file for plGraphViz. +% Load file for the plGraphViz library. -:- dynamic(user:prolog/3). -:- multifile(user:prolog/3). - user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz). +:- dynamic(user:project/3). +:- multifile(user:project/3). + user:project(plGraphViz, 'GraphViz support for SWI-Prolog.'). :- use_module(load_project). -:- load_project(plGraphViz, [ +:- load_project([ plc-'Prolog-Library-Collection', + plDcg, plHtml ]). diff --git a/load_project.pl b/load_project.pl index 5599b5e..e2196b7 100644 --- a/load_project.pl +++ b/load_project.pl @@ -1,8 +1,7 @@ :- module( load_project, [ - load_project/2, % +Parent:atom - % +ChildProjects:list(or([atom,pair(atom)])) + load_project/1, % +ChildProjects:list(or([atom,pair(atom)])) load_subproject/2, % +ParentFileSearchPath:atom % +Child:or([atom,pair(atom)]) set_data_subdirectory/1 % +ParentDirectory:atom @@ -17,7 +16,7 @@ Generic code for loading a project: * Load the index of subprojects onto the file search path. @author Wouter Beek -@version 2014/06/14 +@version 2014/08/20 */ :- use_module(library(ansi_term)). % Colorized terminal messages. @@ -30,11 +29,11 @@ Generic code for loading a project: -load_project(Parent, ChildProjects):- - parent_alias(Parent, ParentFsp), +load_project(ChildProjects):- + parent_alias(ParentFsp), % Entry point. - source_file(load_project(_,_), ThisFile), + source_file(load_project(_), ThisFile), file_directory_name(ThisFile, ThisDir), assert(user:file_search_path(ParentFsp, ThisDir)), assert(user:file_search_path(project, ThisDir)), @@ -92,11 +91,12 @@ load_project_index(Fsp):- load_project_index(_). -%! parent_alias(+Parent:atom, -ParentFsp:atom) is det. +%! parent_alias(-ParentFsp:atom) is det. -parent_alias(Parent, ParentFsp):- - user:project(Parent, _, ParentFsp), !. -parent_alias(Parent, Parent). +parent_alias(ParentFsp):- + user:project(_, _, ParentFsp), !. +parent_alias(ParentFsp):- + user:project(ParentFsp, _). %! set_data_subdirectory(+ParentDirectory:atom) is det. @@ -108,6 +108,8 @@ set_data_subdirectory(ParentDir):- +% Messages + :- multifile(prolog:message//1). prolog:message(missing_subproject_directory(ChildFsp,ChildDir)) -- diff --git a/plDcg b/plDcg new file mode 160000 index 0000000..e074367 --- /dev/null +++ b/plDcg @@ -0,0 +1 @@ +Subproject commit e0743670465a92c083e6954c5cf6220222f088b6 diff --git a/plHtml b/plHtml index 24fff7b..8ef47e0 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit 24fff7bcf90b6bc4fbf317d504be899dc1b869cb +Subproject commit 8ef47e09a24c637ac435abbe1d01b21237be4534 diff --git a/run.pl b/run.pl new file mode 100644 index 0000000..8bba736 --- /dev/null +++ b/run.pl @@ -0,0 +1,9 @@ +% Standalone execution of the plGraphViz library. + +:- if(current_prolog_flag(argv, ['--debug'|_])). + :- ensure_loaded(debug). +:- else. + :- set_prolog_flag(verbose, silent). + :- ensure_loaded(load). +:- endif. + ``` 41: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ebb86cd å’Œå˜åŠ¨å 1549e44  [back to content](#compare) ``` diff diff --git a/gv_dot.pl b/gv_dot.pl index 5f33e5c..bde2962 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -1,7 +1,7 @@ :- module( gv_dot, [ - gv_graph//1 % +GraphTerm:compound + gv_graph//1 % +Gif:compound ] ). @@ -39,7 +39,7 @@ In GraphViz vertices are called 'nodes'. % We assume that the attribute has already been validated. gv_attribute(Name=Val) -- - gv_id(Name), `=`, gv_id(Val), `;`. + gv_id(Name), \"=\", gv_id(Val), \";\". %! gv_attribute_list( @@ -63,16 +63,16 @@ gv_attribute_list(Context, _, Attrs1) -- % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) % ~~~ -gv_compass_pt('_') -- `_`. -gv_compass_pt(c) -- `c`. -gv_compass_pt(e) -- `e`. -gv_compass_pt(n) -- `n`. -gv_compass_pt(ne) -- `ne`. -gv_compass_pt(nw) -- `nw`. -gv_compass_pt(s) -- `s`. -gv_compass_pt(se) -- `se`. -gv_compass_pt(sw) -- `sw`. -gv_compass_pt(w) -- `w`. +gv_compass_pt('_') -- \"_\". +gv_compass_pt(c) -- \"c\". +gv_compass_pt(e) -- \"e\". +gv_compass_pt(n) -- \"n\". +gv_compass_pt(ne) -- \"ne\". +gv_compass_pt(nw) -- \"nw\". +gv_compass_pt(s) -- \"s\". +gv_compass_pt(se) -- \"se\". +gv_compass_pt(sw) -- \"sw\". +gv_compass_pt(w) -- \"w\". %! gv_edge_operator(+Directed:boolean)// . @@ -83,7 +83,7 @@ gv_compass_pt(w) -- `w`. % @arg Directed Whether an edge is directed (operator `-`) or % undirected (operator `--`). -gv_edge_operator(false) -- !, `--`. +gv_edge_operator(false) -- !, \"--\". gv_edge_operator(true) -- arrow(right, 2). @@ -107,11 +107,11 @@ gv_edge_operator(true) -- arrow(right, 2). gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- indent(I), - gv_node_id(FromId), ` `, + gv_node_id(FromId), \" \", - gv_edge_operator(Directed), ` `, + gv_edge_operator(Directed), \" \", - gv_node_id(ToId), ` `, + gv_node_id(ToId), \" \", % We want `colorscheme/1` from the edges and % `directionality/1` from the graph. @@ -140,11 +140,11 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- gv_generic_attributes_statement(_, _, _, []) -- [], !. gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- indent(I), - gv_kind(Kind), ` `, + gv_kind(Kind), \" \", gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed. -%! gv_graph(+GraphTerm:compound)// +%! gv_graph(+Gif:compound)// % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: % * `directed(+boolean)` @@ -176,10 +176,10 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- % @tbd Assert attributes that are generic with respect to a subgraph. % @tbd Not all vertex and edge properties can be shared it seems (e.g., label). -gv_graph(graph(VTerms, ETerms, GAttrs)) -- - gv_graph(graph(VTerms, [], ETerms, GAttrs)). +gv_graph(graph(VTerms,ETerms,GAttrs)) -- + gv_graph(graph(VTerms,[],ETerms,GAttrs)). -gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- +gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -- { shared_attributes(VTerms, SharedVAttrs, NewVTerms), shared_attributes(ETerms, SharedEAttrs, NewETerms), @@ -194,8 +194,8 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- % States that this file represents a graph according to the GraphViz format. indent(I), gv_strict(Strict), - gv_graph_type(Directed), ` `, - gv_id(GName), ` `, + gv_graph_type(Directed), \" \", + gv_id(GName), \" \", % The body of the DOT file appears between curly braces. bracketed( @@ -240,18 +240,18 @@ gv_graph0( (NewVTerms == [], RankedVTerms == []) } - - `` + \"\" ; line_feed ), % The list of GraphViz nodes. '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []), - ({NewVTerms == []} - `` ; line_feed), + ({NewVTerms == []} - \"\" ; line_feed), % The ranked GraphViz nodes (displayed at the same height). '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []), - ({RankedVTerms == []} - `` ; line_feed), + ({RankedVTerms == []} - \"\" ; line_feed), { findall( @@ -281,8 +281,8 @@ gv_graph0( %! gv_graph_type(+Directed:boolean)// . % The type of graph that is represented. -gv_graph_type(false) -- `graph`. -gv_graph_type(true) -- `digraph`. +gv_graph_type(false) -- \"graph\". +gv_graph_type(true) -- \"digraph\". %! gv_id(?Atom:atom)// is det. @@ -305,8 +305,9 @@ gv_graph_type(true) -- `digraph`. % This requires an XML grammar! % HTML strings (variant 4). -gv_id(Atom) -- - dcg_atom_codes(gv_html_like_label, Atom), !. +gv_id(Content) -- + {compound(Content)}, !, + gv_html_like_label, Content). % Alpha-numeric strings (variant 1). gv_id(Atom) -- {atom_codes(Atom, [H|T])}, @@ -353,19 +354,19 @@ gv_keyword(Codes):- % GraphViz has reserved keywords that cannot be used as identifiers. % GraphViz keywords are case-insensitive. -gv_keyword -- `digraph`. -gv_keyword -- `edge`. -gv_keyword -- `graph`. -gv_keyword -- `node`. -gv_keyword -- `strict`. -gv_keyword -- `subgraph`. +gv_keyword -- \"digraph\". +gv_keyword -- \"edge\". +gv_keyword -- \"graph\". +gv_keyword -- \"node\". +gv_keyword -- \"strict\". +gv_keyword -- \"subgraph\". %! gv_kind(+Kind:oneof([edge,graph,node]))// . -gv_kind(edge) -- `edge`. -gv_kind(graph) -- `graph`. -gv_kind(node) -- `node`. +gv_kind(edge) -- \"edge\". +gv_kind(graph) -- \"graph\". +gv_kind(node) -- \"node\". %! gv_node_id(+NodeId:atom)// . @@ -392,7 +393,7 @@ gv_node_id(Id) -- gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -- indent(I), - gv_node_id(Id), ` `, + gv_node_id(Id), \" \", gv_attribute_list(node, GraphAttrs, VAttrs), line_feed. @@ -403,23 +404,23 @@ gv_port -- gv_port_angle, '?'(gv_port_location, []). gv_port -- - `:`, + \":\", gv_compass_pt(_). gv_port_angle -- - `@`, + \"@\", gv_id(_). gv_port_location -- - `:`, + \":\", gv_id(_). gv_port_location -- - `:`, + \":\", bracketed( round, ( gv_id(_), - `,`, + \",\", gv_id(_) ) ). @@ -436,7 +437,7 @@ gv_quoted_string([92,34|T]) -- !, gv_quoted_string(T). % Add the backslash escape character. gv_quoted_string([34|T]) -- !, - `\\\\\\\"`, + \"\\\\\\\"\", gv_quoted_string(T). % All other characters are allowed without escaping. gv_quoted_string([H|T]) -- @@ -455,7 +456,7 @@ gv_ranked_node_collection( % The rank attribute. {NewI is I + 1}, - indent(NewI), gv_attribute(rank=same), `;`, line_feed, + indent(NewI), gv_attribute(rank=same), \";\", line_feed, '*'( gv_node_statement(NewI, GraphAttrs), @@ -475,7 +476,7 @@ gv_ranked_node_collection( % This only applies to directed graphs. gv_strict(false) -- []. -gv_strict(true) -- `strict `. +gv_strict(true) -- \"strict \". diff --git a/gv_html.pl b/gv_html.pl index 3f0b08b..a308ac7 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -1,60 +1,223 @@ :- module( gv_html, [ - gv_html_like_label//1 % +Codes:list(code) + gv_html_like_label//1 % +Content:compound ] ). -/**  GraphViz HTML +/**  GraphViz: HTML-like labels + +Grammar taken from the GraphViz Web site: + +~~~{.txt} +label : text +\t| table +text : textitem +\t| text textitem +textitem : string +\t|  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +table : [  ]  rows  [  ] +rows : row +\t| rows row +\t| rows  row +row :  cells  +cells : cell +\t| cells cell +\t| cells  cell +cell :  label  +\t|    +~~~ @author Wouter Beek -@version 2013/07, 2013/09, 2014/03-2014/06 +@see http://www.graphviz.org/content/node-shapes#html +@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11 */ +:- use_module(plDcg(dcg_abnf)). :- use_module(plDcg(dcg_content)). :- use_module(plHtml(html_dcg)). -%! gv_html_label(+Codes:list(code))// . +%! gv_html_like_label(?Content:compound)// . + +gv_html_like_label(Content) -- + bracketed(angular, label(Content)). + + +%! cell(?Contents:compound)// . +% Supported attributes for TD: +% ~~~{.txt} +% ALIGN=\"CENTER|LEFT|RIGHT|TEXT\" +% BALIGN=\"CENTER|LEFT|RIGHT\" +% BGCOLOR=\"color\" +% BORDER=\"value\" +% CELLPADDING=\"value\" +% CELLSPACING=\"value\" +% COLOR=\"color\" +% COLSPAN=\"value\" +% FIXEDSIZE=\"FALSE|TRUE\" +% GRADIENTANGLE=\"value\" +% HEIGHT=\"value\" +% HREF=\"value\" +% ID=\"value\" +% PORT=\"portName\" +% ROWSPAN=\"value\" +% SIDES=\"value\" +% STYLE=\"value\" +% TARGET=\"value\" +% TITLE=\"value\" +% TOOLTIP=\"value\" +% VALIGN=\"MIDDLE|BOTTOM|TOP\" +% WIDTH=\"value\" +% ~~~ % -% @see http://www.graphviz.org/doc/info/shapes.html#html - -gv_html_label -- gv_html_text, !. -gv_html_label -- gv_html_table, !. -gv_html_label -- []. - -gv_html_like_label -- bracketed(angular, gv_html_label). - -gv_html_like_label(Content) -- bracketed(angular, html_dcg(Content)). - -gv_html_table -- html_element(table, _, gv_html_rows). -gv_html_table -- html_element(font, _, html_element(table, _, gv_html_rows)). - -gv_html_rows -- gv_html_row, gv_html_rows. -gv_html_rows -- gv_html_row, html_element(hr, _), gv_html_rows. -gv_html_rows -- gv_html_row. - -gv_html_row -- html_element(tr, _, gv_html_cells). - -gv_html_cell -- html_element(td, _, gv_html_label). -gv_html_cell -- html_element(td, _, html_element(img, _)). - -gv_html_cells -- gv_html_cell, gv_html_cells. -gv_html_cells -- gv_html_cell. -gv_html_cells -- gv_html_cell, html_element(vr, _), gv_html_cells. - -gv_html_text -- gv_html_textitem, gv_html_text. -gv_html_text -- gv_html_textitem. - -gv_html_textitem -- html_string, !. -gv_html_textitem -- html_entity, !. -gv_html_textitem -- html_element(br, _), !. -gv_html_textitem -- html_element(font, _, gv_html_text), !. -gv_html_textitem -- html_element(i, _, gv_html_text), !. -gv_html_textitem -- html_element(b, _, gv_html_text), !. -gv_html_textitem -- html_element(u, _, gv_html_text), !. -gv_html_textitem -- html_element(sub, _, gv_html_text), !. -gv_html_textitem -- html_element(sup, _, gv_html_text), !. - +% Supported attributes for IMG: +% ~~~{.txt} +% SCALE=\"FALSE|TRUE|WIDTH|HEIGHT|BOTH\" +% SRC=\"value\" +% ~~~ + +cell(td(Contents)) -- + html_element(td, [], label(Contents)). +cell(td(img)) -- + html_element(td, [], html_element(img)). + + +%! cells(?Contents:list(compound))// . + +cells([H|T]) -- + cell(H), + cells(T). +cells([H,vr|T]) -- + cell(H), + html_element(vr), + cells(T). +cells([H]) -- + cell(H). + + +%! label(?Content:compound)// . +% GraphViz HTML-like label. + +label(Content) -- + text(Content). +label(Content) -- + table(Content). + + +%! row(?Contents:compound)// . + +row(tr(Contents)) -- + html_element(tr, [], cell(Contents)). + + +%! rows(?Contents:list)// . + +rows([H|T]) -- + row(H), + rows. +rows([H,hr|T]) -- + row(H), + html_element(hr), + rows(T). +rows([H]) -- + row(H). + + +%! table(?Contents:compound)// . +% Supported attributes for TABLE: +% ~~~{.txt} +% ALIGN=\"CENTER|LEFT|RIGHT\" +% BGCOLOR=\"color\" +% BORDER=\"value\" +% CELLBORDER=\"value\" +% CELLPADDING=\"value\" +% CELLSPACING=\"value\" +% COLOR=\"color\" +% COLUMNS=\"value\" +% FIXEDSIZE=\"FALSE|TRUE\" +% GRADIENTANGLE=\"value\" +% HEIGHT=\"value\" +% HREF=\"value\" +% ID=\"value\" +% PORT=\"portName\" +% ROWS=\"value\" +% SIDES=\"value\" +% STYLE=\"value\" +% TARGET=\"value\" +% TITLE=\"value\" +% TOOLTIP=\"value\" +% VALIGN=\"MIDDLE|BOTTOM|TOP\" +% WIDTH=\"value\" +% ~~~ +% +% Supported attributes for FONT: +% ~~~{.txt} +% COLOR=\"color\" +% FACE=\"fontname\" +% POINT-SIZE=\"value\" +% ~~~ + +table(table(Attrs,Contents)) -- + html_element(table, Attrs, rows(Contents)). +table(table(font(Contents))) -- + html_element(font, [], html_element(table, [], rows(Contents))). + + +%! text(?Contents:list)// . + +text(Contents) -- + '+'(textitem, Contents, []). + + +%! textitem(?Content)// . +% Supported attributes for BR: +% ~~~{.txt} +% ALIGN=\"CENTER|LEFT|RIGHT\" +% ~~~ + +textitem(string(String)) -- + html_string(String). +textitem(entity(Name)) -- + html_entity(Name). +textitem(br(Attrs)) -- + html_element(br, Attrs). +textitem(Compound) -- + {var(Compound)}, !, + html_element(Name, _, text(Content)), + { + supported_html_element(Name), + Compound =.. [Name,Content] + }. +textitem(Compound) -- + { + Compound =.. [Name,Content], + supported_html_element(Name) + }, + html_element(Name, _, text(Content)). + + + +% HELPERS + +%! supported_html_element(+Name:atom) is semidet. +%! supported_html_element(-Name:atom) is multi. + +supported_html_element(b). +supported_html_element(font). +supported_html_element(i). +supported_html_element(o). +supported_html_element(s). +supported_html_element(sub). +supported_html_element(sup). +supported_html_element(u). ``` 42: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 1549e44 å’Œå˜åŠ¨å 61ddca2  [back to content](#compare) ``` diff diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 15bbbbf..727ea49 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 15bbbbf25471abe856afbf92a04c5b3ce76b0217 +Subproject commit 727ea49d47063b733ae499615fda6aa06c84fb6f diff --git a/debug_project.pl b/debug_project.pl index 4eb2785..ab61534 100644 --- a/debug_project.pl +++ b/debug_project.pl @@ -37,7 +37,10 @@ debug_all_files:- ] ), exclude(do_not_load, Files1, Files2), - maplist(use_module, Files2). + maplist(use_module0, Files2). +use_module0(File):- + print_message(informational, loading_module(File)), + use_module(File). do_not_load(File1):- file_base_name(File1, File2), @@ -53,3 +56,12 @@ do_not_load0(load). do_not_load0(load_project). do_not_load0(rfc2616_basic). do_not_load0(run). + + + +% MESSAGES + +:- multifile(prolog:message//1). + +prolog:message(loading_module(File)) -- + ['[M] ',File]. diff --git a/gv_dot.pl b/gv_dot.pl index bde2962..5f33e5c 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -1,7 +1,7 @@ :- module( gv_dot, [ - gv_graph//1 % +Gif:compound + gv_graph//1 % +GraphTerm:compound ] ). @@ -39,7 +39,7 @@ In GraphViz vertices are called 'nodes'. % We assume that the attribute has already been validated. gv_attribute(Name=Val) -- - gv_id(Name), \"=\", gv_id(Val), \";\". + gv_id(Name), `=`, gv_id(Val), `;`. %! gv_attribute_list( @@ -63,16 +63,16 @@ gv_attribute_list(Context, _, Attrs1) -- % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) % ~~~ -gv_compass_pt('_') -- \"_\". -gv_compass_pt(c) -- \"c\". -gv_compass_pt(e) -- \"e\". -gv_compass_pt(n) -- \"n\". -gv_compass_pt(ne) -- \"ne\". -gv_compass_pt(nw) -- \"nw\". -gv_compass_pt(s) -- \"s\". -gv_compass_pt(se) -- \"se\". -gv_compass_pt(sw) -- \"sw\". -gv_compass_pt(w) -- \"w\". +gv_compass_pt('_') -- `_`. +gv_compass_pt(c) -- `c`. +gv_compass_pt(e) -- `e`. +gv_compass_pt(n) -- `n`. +gv_compass_pt(ne) -- `ne`. +gv_compass_pt(nw) -- `nw`. +gv_compass_pt(s) -- `s`. +gv_compass_pt(se) -- `se`. +gv_compass_pt(sw) -- `sw`. +gv_compass_pt(w) -- `w`. %! gv_edge_operator(+Directed:boolean)// . @@ -83,7 +83,7 @@ gv_compass_pt(w) -- \"w\". % @arg Directed Whether an edge is directed (operator `-`) or % undirected (operator `--`). -gv_edge_operator(false) -- !, \"--\". +gv_edge_operator(false) -- !, `--`. gv_edge_operator(true) -- arrow(right, 2). @@ -107,11 +107,11 @@ gv_edge_operator(true) -- arrow(right, 2). gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- indent(I), - gv_node_id(FromId), \" \", + gv_node_id(FromId), ` `, - gv_edge_operator(Directed), \" \", + gv_edge_operator(Directed), ` `, - gv_node_id(ToId), \" \", + gv_node_id(ToId), ` `, % We want `colorscheme/1` from the edges and % `directionality/1` from the graph. @@ -140,11 +140,11 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- gv_generic_attributes_statement(_, _, _, []) -- [], !. gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- indent(I), - gv_kind(Kind), \" \", + gv_kind(Kind), ` `, gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed. -%! gv_graph(+Gif:compound)// +%! gv_graph(+GraphTerm:compound)// % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: % * `directed(+boolean)` @@ -176,10 +176,10 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- % @tbd Assert attributes that are generic with respect to a subgraph. % @tbd Not all vertex and edge properties can be shared it seems (e.g., label). -gv_graph(graph(VTerms,ETerms,GAttrs)) -- - gv_graph(graph(VTerms,[],ETerms,GAttrs)). +gv_graph(graph(VTerms, ETerms, GAttrs)) -- + gv_graph(graph(VTerms, [], ETerms, GAttrs)). -gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -- +gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- { shared_attributes(VTerms, SharedVAttrs, NewVTerms), shared_attributes(ETerms, SharedEAttrs, NewETerms), @@ -194,8 +194,8 @@ gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -- % States that this file represents a graph according to the GraphViz format. indent(I), gv_strict(Strict), - gv_graph_type(Directed), \" \", - gv_id(GName), \" \", + gv_graph_type(Directed), ` `, + gv_id(GName), ` `, % The body of the DOT file appears between curly braces. bracketed( @@ -240,18 +240,18 @@ gv_graph0( (NewVTerms == [], RankedVTerms == []) } - - \"\" + `` ; line_feed ), % The list of GraphViz nodes. '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []), - ({NewVTerms == []} - \"\" ; line_feed), + ({NewVTerms == []} - `` ; line_feed), % The ranked GraphViz nodes (displayed at the same height). '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []), - ({RankedVTerms == []} - \"\" ; line_feed), + ({RankedVTerms == []} - `` ; line_feed), { findall( @@ -281,8 +281,8 @@ gv_graph0( %! gv_graph_type(+Directed:boolean)// . % The type of graph that is represented. -gv_graph_type(false) -- \"graph\". -gv_graph_type(true) -- \"digraph\". +gv_graph_type(false) -- `graph`. +gv_graph_type(true) -- `digraph`. %! gv_id(?Atom:atom)// is det. @@ -305,9 +305,8 @@ gv_graph_type(true) -- \"digraph\". % This requires an XML grammar! % HTML strings (variant 4). -gv_id(Content) -- - {compound(Content)}, !, - gv_html_like_label, Content). +gv_id(Atom) -- + dcg_atom_codes(gv_html_like_label, Atom), !. % Alpha-numeric strings (variant 1). gv_id(Atom) -- {atom_codes(Atom, [H|T])}, @@ -354,19 +353,19 @@ gv_keyword(Codes):- % GraphViz has reserved keywords that cannot be used as identifiers. % GraphViz keywords are case-insensitive. -gv_keyword -- \"digraph\". -gv_keyword -- \"edge\". -gv_keyword -- \"graph\". -gv_keyword -- \"node\". -gv_keyword -- \"strict\". -gv_keyword -- \"subgraph\". +gv_keyword -- `digraph`. +gv_keyword -- `edge`. +gv_keyword -- `graph`. +gv_keyword -- `node`. +gv_keyword -- `strict`. +gv_keyword -- `subgraph`. %! gv_kind(+Kind:oneof([edge,graph,node]))// . -gv_kind(edge) -- \"edge\". -gv_kind(graph) -- \"graph\". -gv_kind(node) -- \"node\". +gv_kind(edge) -- `edge`. +gv_kind(graph) -- `graph`. +gv_kind(node) -- `node`. %! gv_node_id(+NodeId:atom)// . @@ -393,7 +392,7 @@ gv_node_id(Id) -- gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -- indent(I), - gv_node_id(Id), \" \", + gv_node_id(Id), ` `, gv_attribute_list(node, GraphAttrs, VAttrs), line_feed. @@ -404,23 +403,23 @@ gv_port -- gv_port_angle, '?'(gv_port_location, []). gv_port -- - \":\", + `:`, gv_compass_pt(_). gv_port_angle -- - \"@\", + `@`, gv_id(_). gv_port_location -- - \":\", + `:`, gv_id(_). gv_port_location -- - \":\", + `:`, bracketed( round, ( gv_id(_), - \",\", + `,`, gv_id(_) ) ). @@ -437,7 +436,7 @@ gv_quoted_string([92,34|T]) -- !, gv_quoted_string(T). % Add the backslash escape character. gv_quoted_string([34|T]) -- !, - \"\\\\\\\"\", + `\\\\\\\"`, gv_quoted_string(T). % All other characters are allowed without escaping. gv_quoted_string([H|T]) -- @@ -456,7 +455,7 @@ gv_ranked_node_collection( % The rank attribute. {NewI is I + 1}, - indent(NewI), gv_attribute(rank=same), \";\", line_feed, + indent(NewI), gv_attribute(rank=same), `;`, line_feed, '*'( gv_node_statement(NewI, GraphAttrs), @@ -476,7 +475,7 @@ gv_ranked_node_collection( % This only applies to directed graphs. gv_strict(false) -- []. -gv_strict(true) -- \"strict \". +gv_strict(true) -- `strict `. diff --git a/gv_html.pl b/gv_html.pl index a308ac7..3f0b08b 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -1,223 +1,60 @@ :- module( gv_html, [ - gv_html_like_label//1 % +Content:compound + gv_html_like_label//1 % +Codes:list(code) ] ). -/**  GraphViz: HTML-like labels - -Grammar taken from the GraphViz Web site: - -~~~{.txt} -label : text -\t| table -text : textitem -\t| text textitem -textitem : string -\t|  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -table : [  ]  rows  [  ] -rows : row -\t| rows row -\t| rows  row -row :  cells  -cells : cell -\t| cells cell -\t| cells  cell -cell :  label  -\t|    -~~~ +/**  GraphViz HTML @author Wouter Beek -@see http://www.graphviz.org/content/node-shapes#html -@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11 +@version 2013/07, 2013/09, 2014/03-2014/06 */ -:- use_module(plDcg(dcg_abnf)). :- use_module(plDcg(dcg_content)). :- use_module(plHtml(html_dcg)). -%! gv_html_like_label(?Content:compound)// . - -gv_html_like_label(Content) -- - bracketed(angular, label(Content)). - - -%! cell(?Contents:compound)// . -% Supported attributes for TD: -% ~~~{.txt} -% ALIGN=\"CENTER|LEFT|RIGHT|TEXT\" -% BALIGN=\"CENTER|LEFT|RIGHT\" -% BGCOLOR=\"color\" -% BORDER=\"value\" -% CELLPADDING=\"value\" -% CELLSPACING=\"value\" -% COLOR=\"color\" -% COLSPAN=\"value\" -% FIXEDSIZE=\"FALSE|TRUE\" -% GRADIENTANGLE=\"value\" -% HEIGHT=\"value\" -% HREF=\"value\" -% ID=\"value\" -% PORT=\"portName\" -% ROWSPAN=\"value\" -% SIDES=\"value\" -% STYLE=\"value\" -% TARGET=\"value\" -% TITLE=\"value\" -% TOOLTIP=\"value\" -% VALIGN=\"MIDDLE|BOTTOM|TOP\" -% WIDTH=\"value\" -% ~~~ +%! gv_html_label(+Codes:list(code))// . % -% Supported attributes for IMG: -% ~~~{.txt} -% SCALE=\"FALSE|TRUE|WIDTH|HEIGHT|BOTH\" -% SRC=\"value\" -% ~~~ - -cell(td(Contents)) -- - html_element(td, [], label(Contents)). -cell(td(img)) -- - html_element(td, [], html_element(img)). - - -%! cells(?Contents:list(compound))// . - -cells([H|T]) -- - cell(H), - cells(T). -cells([H,vr|T]) -- - cell(H), - html_element(vr), - cells(T). -cells([H]) -- - cell(H). - - -%! label(?Content:compound)// . -% GraphViz HTML-like label. - -label(Content) -- - text(Content). -label(Content) -- - table(Content). - - -%! row(?Contents:compound)// . - -row(tr(Contents)) -- - html_element(tr, [], cell(Contents)). - - -%! rows(?Contents:list)// . - -rows([H|T]) -- - row(H), - rows. -rows([H,hr|T]) -- - row(H), - html_element(hr), - rows(T). -rows([H]) -- - row(H). - - -%! table(?Contents:compound)// . -% Supported attributes for TABLE: -% ~~~{.txt} -% ALIGN=\"CENTER|LEFT|RIGHT\" -% BGCOLOR=\"color\" -% BORDER=\"value\" -% CELLBORDER=\"value\" -% CELLPADDING=\"value\" -% CELLSPACING=\"value\" -% COLOR=\"color\" -% COLUMNS=\"value\" -% FIXEDSIZE=\"FALSE|TRUE\" -% GRADIENTANGLE=\"value\" -% HEIGHT=\"value\" -% HREF=\"value\" -% ID=\"value\" -% PORT=\"portName\" -% ROWS=\"value\" -% SIDES=\"value\" -% STYLE=\"value\" -% TARGET=\"value\" -% TITLE=\"value\" -% TOOLTIP=\"value\" -% VALIGN=\"MIDDLE|BOTTOM|TOP\" -% WIDTH=\"value\" -% ~~~ -% -% Supported attributes for FONT: -% ~~~{.txt} -% COLOR=\"color\" -% FACE=\"fontname\" -% POINT-SIZE=\"value\" -% ~~~ - -table(table(Attrs,Contents)) -- - html_element(table, Attrs, rows(Contents)). -table(table(font(Contents))) -- - html_element(font, [], html_element(table, [], rows(Contents))). - - -%! text(?Contents:list)// . - -text(Contents) -- - '+'(textitem, Contents, []). - - -%! textitem(?Content)// . -% Supported attributes for BR: -% ~~~{.txt} -% ALIGN=\"CENTER|LEFT|RIGHT\" -% ~~~ - -textitem(string(String)) -- - html_string(String). -textitem(entity(Name)) -- - html_entity(Name). -textitem(br(Attrs)) -- - html_element(br, Attrs). -textitem(Compound) -- - {var(Compound)}, !, - html_element(Name, _, text(Content)), - { - supported_html_element(Name), - Compound =.. [Name,Content] - }. -textitem(Compound) -- - { - Compound =.. [Name,Content], - supported_html_element(Name) - }, - html_element(Name, _, text(Content)). - - - -% HELPERS - -%! supported_html_element(+Name:atom) is semidet. -%! supported_html_element(-Name:atom) is multi. - -supported_html_element(b). -supported_html_element(font). -supported_html_element(i). -supported_html_element(o). -supported_html_element(s). -supported_html_element(sub). -supported_html_element(sup). -supported_html_element(u). +% @see http://www.graphviz.org/doc/info/shapes.html#html + +gv_html_label -- gv_html_text, !. +gv_html_label -- gv_html_table, !. +gv_html_label -- []. + +gv_html_like_label -- bracketed(angular, gv_html_label). + +gv_html_like_label(Content) -- bracketed(angular, html_dcg(Content)). + +gv_html_table -- html_element(table, _, gv_html_rows). +gv_html_table -- html_element(font, _, html_element(table, _, gv_html_rows)). + +gv_html_rows -- gv_html_row, gv_html_rows. +gv_html_rows -- gv_html_row, html_element(hr, _), gv_html_rows. +gv_html_rows -- gv_html_row. + +gv_html_row -- html_element(tr, _, gv_html_cells). + +gv_html_cell -- html_element(td, _, gv_html_label). +gv_html_cell -- html_element(td, _, html_element(img, _)). + +gv_html_cells -- gv_html_cell, gv_html_cells. +gv_html_cells -- gv_html_cell. +gv_html_cells -- gv_html_cell, html_element(vr, _), gv_html_cells. + +gv_html_text -- gv_html_textitem, gv_html_text. +gv_html_text -- gv_html_textitem. + +gv_html_textitem -- html_string, !. +gv_html_textitem -- html_entity, !. +gv_html_textitem -- html_element(br, _), !. +gv_html_textitem -- html_element(font, _, gv_html_text), !. +gv_html_textitem -- html_element(i, _, gv_html_text), !. +gv_html_textitem -- html_element(b, _, gv_html_text), !. +gv_html_textitem -- html_element(u, _, gv_html_text), !. +gv_html_textitem -- html_element(sub, _, gv_html_text), !. +gv_html_textitem -- html_element(sup, _, gv_html_text), !. + diff --git a/plDcg b/plDcg index e074367..be16501 160000 --- a/plDcg +++ b/plDcg @@ -1 +1 @@ -Subproject commit e0743670465a92c083e6954c5cf6220222f088b6 +Subproject commit be165017993efcf781007c5d682a519fb5eaa31f diff --git a/plHtml b/plHtml index 8ef47e0..e3abeed 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit 8ef47e09a24c637ac435abbe1d01b21237be4534 +Subproject commit e3abeed4041392013965598145806ee33081f76f ``` 43: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 61ddca2 å’Œå˜åŠ¨å 26f07e7  [back to content](#compare) ``` diff diff --git a/gv_dot.pl b/gv_dot.pl index 5f33e5c..bde2962 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -1,7 +1,7 @@ :- module( gv_dot, [ - gv_graph//1 % +GraphTerm:compound + gv_graph//1 % +Gif:compound ] ). @@ -39,7 +39,7 @@ In GraphViz vertices are called 'nodes'. % We assume that the attribute has already been validated. gv_attribute(Name=Val) -- - gv_id(Name), `=`, gv_id(Val), `;`. + gv_id(Name), \"=\", gv_id(Val), \";\". %! gv_attribute_list( @@ -63,16 +63,16 @@ gv_attribute_list(Context, _, Attrs1) -- % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) % ~~~ -gv_compass_pt('_') -- `_`. -gv_compass_pt(c) -- `c`. -gv_compass_pt(e) -- `e`. -gv_compass_pt(n) -- `n`. -gv_compass_pt(ne) -- `ne`. -gv_compass_pt(nw) -- `nw`. -gv_compass_pt(s) -- `s`. -gv_compass_pt(se) -- `se`. -gv_compass_pt(sw) -- `sw`. -gv_compass_pt(w) -- `w`. +gv_compass_pt('_') -- \"_\". +gv_compass_pt(c) -- \"c\". +gv_compass_pt(e) -- \"e\". +gv_compass_pt(n) -- \"n\". +gv_compass_pt(ne) -- \"ne\". +gv_compass_pt(nw) -- \"nw\". +gv_compass_pt(s) -- \"s\". +gv_compass_pt(se) -- \"se\". +gv_compass_pt(sw) -- \"sw\". +gv_compass_pt(w) -- \"w\". %! gv_edge_operator(+Directed:boolean)// . @@ -83,7 +83,7 @@ gv_compass_pt(w) -- `w`. % @arg Directed Whether an edge is directed (operator `-`) or % undirected (operator `--`). -gv_edge_operator(false) -- !, `--`. +gv_edge_operator(false) -- !, \"--\". gv_edge_operator(true) -- arrow(right, 2). @@ -107,11 +107,11 @@ gv_edge_operator(true) -- arrow(right, 2). gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- indent(I), - gv_node_id(FromId), ` `, + gv_node_id(FromId), \" \", - gv_edge_operator(Directed), ` `, + gv_edge_operator(Directed), \" \", - gv_node_id(ToId), ` `, + gv_node_id(ToId), \" \", % We want `colorscheme/1` from the edges and % `directionality/1` from the graph. @@ -140,11 +140,11 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- gv_generic_attributes_statement(_, _, _, []) -- [], !. gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- indent(I), - gv_kind(Kind), ` `, + gv_kind(Kind), \" \", gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed. -%! gv_graph(+GraphTerm:compound)// +%! gv_graph(+Gif:compound)// % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: % * `directed(+boolean)` @@ -176,10 +176,10 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- % @tbd Assert attributes that are generic with respect to a subgraph. % @tbd Not all vertex and edge properties can be shared it seems (e.g., label). -gv_graph(graph(VTerms, ETerms, GAttrs)) -- - gv_graph(graph(VTerms, [], ETerms, GAttrs)). +gv_graph(graph(VTerms,ETerms,GAttrs)) -- + gv_graph(graph(VTerms,[],ETerms,GAttrs)). -gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- +gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -- { shared_attributes(VTerms, SharedVAttrs, NewVTerms), shared_attributes(ETerms, SharedEAttrs, NewETerms), @@ -194,8 +194,8 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- % States that this file represents a graph according to the GraphViz format. indent(I), gv_strict(Strict), - gv_graph_type(Directed), ` `, - gv_id(GName), ` `, + gv_graph_type(Directed), \" \", + gv_id(GName), \" \", % The body of the DOT file appears between curly braces. bracketed( @@ -240,18 +240,18 @@ gv_graph0( (NewVTerms == [], RankedVTerms == []) } - - `` + \"\" ; line_feed ), % The list of GraphViz nodes. '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []), - ({NewVTerms == []} - `` ; line_feed), + ({NewVTerms == []} - \"\" ; line_feed), % The ranked GraphViz nodes (displayed at the same height). '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []), - ({RankedVTerms == []} - `` ; line_feed), + ({RankedVTerms == []} - \"\" ; line_feed), { findall( @@ -281,8 +281,8 @@ gv_graph0( %! gv_graph_type(+Directed:boolean)// . % The type of graph that is represented. -gv_graph_type(false) -- `graph`. -gv_graph_type(true) -- `digraph`. +gv_graph_type(false) -- \"graph\". +gv_graph_type(true) -- \"digraph\". %! gv_id(?Atom:atom)// is det. @@ -305,8 +305,9 @@ gv_graph_type(true) -- `digraph`. % This requires an XML grammar! % HTML strings (variant 4). -gv_id(Atom) -- - dcg_atom_codes(gv_html_like_label, Atom), !. +gv_id(Content) -- + {compound(Content)}, !, + gv_html_like_label, Content). % Alpha-numeric strings (variant 1). gv_id(Atom) -- {atom_codes(Atom, [H|T])}, @@ -353,19 +354,19 @@ gv_keyword(Codes):- % GraphViz has reserved keywords that cannot be used as identifiers. % GraphViz keywords are case-insensitive. -gv_keyword -- `digraph`. -gv_keyword -- `edge`. -gv_keyword -- `graph`. -gv_keyword -- `node`. -gv_keyword -- `strict`. -gv_keyword -- `subgraph`. +gv_keyword -- \"digraph\". +gv_keyword -- \"edge\". +gv_keyword -- \"graph\". +gv_keyword -- \"node\". +gv_keyword -- \"strict\". +gv_keyword -- \"subgraph\". %! gv_kind(+Kind:oneof([edge,graph,node]))// . -gv_kind(edge) -- `edge`. -gv_kind(graph) -- `graph`. -gv_kind(node) -- `node`. +gv_kind(edge) -- \"edge\". +gv_kind(graph) -- \"graph\". +gv_kind(node) -- \"node\". %! gv_node_id(+NodeId:atom)// . @@ -392,7 +393,7 @@ gv_node_id(Id) -- gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -- indent(I), - gv_node_id(Id), ` `, + gv_node_id(Id), \" \", gv_attribute_list(node, GraphAttrs, VAttrs), line_feed. @@ -403,23 +404,23 @@ gv_port -- gv_port_angle, '?'(gv_port_location, []). gv_port -- - `:`, + \":\", gv_compass_pt(_). gv_port_angle -- - `@`, + \"@\", gv_id(_). gv_port_location -- - `:`, + \":\", gv_id(_). gv_port_location -- - `:`, + \":\", bracketed( round, ( gv_id(_), - `,`, + \",\", gv_id(_) ) ). @@ -436,7 +437,7 @@ gv_quoted_string([92,34|T]) -- !, gv_quoted_string(T). % Add the backslash escape character. gv_quoted_string([34|T]) -- !, - `\\\\\\\"`, + \"\\\\\\\"\", gv_quoted_string(T). % All other characters are allowed without escaping. gv_quoted_string([H|T]) -- @@ -455,7 +456,7 @@ gv_ranked_node_collection( % The rank attribute. {NewI is I + 1}, - indent(NewI), gv_attribute(rank=same), `;`, line_feed, + indent(NewI), gv_attribute(rank=same), \";\", line_feed, '*'( gv_node_statement(NewI, GraphAttrs), @@ -475,7 +476,7 @@ gv_ranked_node_collection( % This only applies to directed graphs. gv_strict(false) -- []. -gv_strict(true) -- `strict `. +gv_strict(true) -- \"strict \". diff --git a/gv_html.pl b/gv_html.pl index 3f0b08b..a308ac7 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -1,60 +1,223 @@ :- module( gv_html, [ - gv_html_like_label//1 % +Codes:list(code) + gv_html_like_label//1 % +Content:compound ] ). -/**  GraphViz HTML +/**  GraphViz: HTML-like labels + +Grammar taken from the GraphViz Web site: + +~~~{.txt} +label : text +\t| table +text : textitem +\t| text textitem +textitem : string +\t|  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +table : [  ]  rows  [  ] +rows : row +\t| rows row +\t| rows  row +row :  cells  +cells : cell +\t| cells cell +\t| cells  cell +cell :  label  +\t|    +~~~ @author Wouter Beek -@version 2013/07, 2013/09, 2014/03-2014/06 +@see http://www.graphviz.org/content/node-shapes#html +@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11 */ +:- use_module(plDcg(dcg_abnf)). :- use_module(plDcg(dcg_content)). :- use_module(plHtml(html_dcg)). -%! gv_html_label(+Codes:list(code))// . +%! gv_html_like_label(?Content:compound)// . + +gv_html_like_label(Content) -- + bracketed(angular, label(Content)). + + +%! cell(?Contents:compound)// . +% Supported attributes for TD: +% ~~~{.txt} +% ALIGN=\"CENTER|LEFT|RIGHT|TEXT\" +% BALIGN=\"CENTER|LEFT|RIGHT\" +% BGCOLOR=\"color\" +% BORDER=\"value\" +% CELLPADDING=\"value\" +% CELLSPACING=\"value\" +% COLOR=\"color\" +% COLSPAN=\"value\" +% FIXEDSIZE=\"FALSE|TRUE\" +% GRADIENTANGLE=\"value\" +% HEIGHT=\"value\" +% HREF=\"value\" +% ID=\"value\" +% PORT=\"portName\" +% ROWSPAN=\"value\" +% SIDES=\"value\" +% STYLE=\"value\" +% TARGET=\"value\" +% TITLE=\"value\" +% TOOLTIP=\"value\" +% VALIGN=\"MIDDLE|BOTTOM|TOP\" +% WIDTH=\"value\" +% ~~~ % -% @see http://www.graphviz.org/doc/info/shapes.html#html - -gv_html_label -- gv_html_text, !. -gv_html_label -- gv_html_table, !. -gv_html_label -- []. - -gv_html_like_label -- bracketed(angular, gv_html_label). - -gv_html_like_label(Content) -- bracketed(angular, html_dcg(Content)). - -gv_html_table -- html_element(table, _, gv_html_rows). -gv_html_table -- html_element(font, _, html_element(table, _, gv_html_rows)). - -gv_html_rows -- gv_html_row, gv_html_rows. -gv_html_rows -- gv_html_row, html_element(hr, _), gv_html_rows. -gv_html_rows -- gv_html_row. - -gv_html_row -- html_element(tr, _, gv_html_cells). - -gv_html_cell -- html_element(td, _, gv_html_label). -gv_html_cell -- html_element(td, _, html_element(img, _)). - -gv_html_cells -- gv_html_cell, gv_html_cells. -gv_html_cells -- gv_html_cell. -gv_html_cells -- gv_html_cell, html_element(vr, _), gv_html_cells. - -gv_html_text -- gv_html_textitem, gv_html_text. -gv_html_text -- gv_html_textitem. - -gv_html_textitem -- html_string, !. -gv_html_textitem -- html_entity, !. -gv_html_textitem -- html_element(br, _), !. -gv_html_textitem -- html_element(font, _, gv_html_text), !. -gv_html_textitem -- html_element(i, _, gv_html_text), !. -gv_html_textitem -- html_element(b, _, gv_html_text), !. -gv_html_textitem -- html_element(u, _, gv_html_text), !. -gv_html_textitem -- html_element(sub, _, gv_html_text), !. -gv_html_textitem -- html_element(sup, _, gv_html_text), !. - +% Supported attributes for IMG: +% ~~~{.txt} +% SCALE=\"FALSE|TRUE|WIDTH|HEIGHT|BOTH\" +% SRC=\"value\" +% ~~~ + +cell(td(Contents)) -- + html_element(td, [], label(Contents)). +cell(td(img)) -- + html_element(td, [], html_element(img)). + + +%! cells(?Contents:list(compound))// . + +cells([H|T]) -- + cell(H), + cells(T). +cells([H,vr|T]) -- + cell(H), + html_element(vr), + cells(T). +cells([H]) -- + cell(H). + + +%! label(?Content:compound)// . +% GraphViz HTML-like label. + +label(Content) -- + text(Content). +label(Content) -- + table(Content). + + +%! row(?Contents:compound)// . + +row(tr(Contents)) -- + html_element(tr, [], cell(Contents)). + + +%! rows(?Contents:list)// . + +rows([H|T]) -- + row(H), + rows. +rows([H,hr|T]) -- + row(H), + html_element(hr), + rows(T). +rows([H]) -- + row(H). + + +%! table(?Contents:compound)// . +% Supported attributes for TABLE: +% ~~~{.txt} +% ALIGN=\"CENTER|LEFT|RIGHT\" +% BGCOLOR=\"color\" +% BORDER=\"value\" +% CELLBORDER=\"value\" +% CELLPADDING=\"value\" +% CELLSPACING=\"value\" +% COLOR=\"color\" +% COLUMNS=\"value\" +% FIXEDSIZE=\"FALSE|TRUE\" +% GRADIENTANGLE=\"value\" +% HEIGHT=\"value\" +% HREF=\"value\" +% ID=\"value\" +% PORT=\"portName\" +% ROWS=\"value\" +% SIDES=\"value\" +% STYLE=\"value\" +% TARGET=\"value\" +% TITLE=\"value\" +% TOOLTIP=\"value\" +% VALIGN=\"MIDDLE|BOTTOM|TOP\" +% WIDTH=\"value\" +% ~~~ +% +% Supported attributes for FONT: +% ~~~{.txt} +% COLOR=\"color\" +% FACE=\"fontname\" +% POINT-SIZE=\"value\" +% ~~~ + +table(table(Attrs,Contents)) -- + html_element(table, Attrs, rows(Contents)). +table(table(font(Contents))) -- + html_element(font, [], html_element(table, [], rows(Contents))). + + +%! text(?Contents:list)// . + +text(Contents) -- + '+'(textitem, Contents, []). + + +%! textitem(?Content)// . +% Supported attributes for BR: +% ~~~{.txt} +% ALIGN=\"CENTER|LEFT|RIGHT\" +% ~~~ + +textitem(string(String)) -- + html_string(String). +textitem(entity(Name)) -- + html_entity(Name). +textitem(br(Attrs)) -- + html_element(br, Attrs). +textitem(Compound) -- + {var(Compound)}, !, + html_element(Name, _, text(Content)), + { + supported_html_element(Name), + Compound =.. [Name,Content] + }. +textitem(Compound) -- + { + Compound =.. [Name,Content], + supported_html_element(Name) + }, + html_element(Name, _, text(Content)). + + + +% HELPERS + +%! supported_html_element(+Name:atom) is semidet. +%! supported_html_element(-Name:atom) is multi. + +supported_html_element(b). +supported_html_element(font). +supported_html_element(i). +supported_html_element(o). +supported_html_element(s). +supported_html_element(sub). +supported_html_element(sup). +supported_html_element(u). ``` 44: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 26f07e7 å’Œå˜åŠ¨å f78b4f8  [back to content](#compare) ``` diff diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 727ea49..7096ef9 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 727ea49d47063b733ae499615fda6aa06c84fb6f +Subproject commit 7096ef9749edffe389df6a90d586930c8bf4df70 diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 3c7863d..67d419a 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -46,10 +46,11 @@ /**  GraphViz attribute types @author Wouter Beek -@version 2014/06 +@version 2014/06, 2014/11 */ :- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_ascii)). :- use_module(plDcg(dcg_cardinal)). :- use_module(plDcg(dcg_content)). @@ -97,7 +98,7 @@ gv_attr_type(viewPort). % An *addDouble* is represented by a Prolog float. addDouble(Float) -- - '?'(`+`, []), + '?'(plus_sign, []), double(Float). @@ -106,7 +107,7 @@ addDouble(Float) -- % `point(X:float,Y:float,InputOnly:boolean)`. addPoint(Point) -- - '?'(`+`, []), + '?'(plus_sign, []), point(Point). @@ -147,10 +148,10 @@ backwards_compatible(invempty). backwards_compatible(open). -bool(false) -- `false`. -bool(false) -- `no`. -bool(true) -- `true`. -bool(true) -- `yes`. +bool(false) -- \"false\". +bool(false) -- \"no\". +bool(true) -- \"true\". +bool(true) -- \"yes\". %! clusterMode(+ClusterMode:atom)// . @@ -187,7 +188,7 @@ doubleList([H|T]) -- '*'(doubleList1, T, []). doubleList1(Float) -- - `:`, + \":\", double(Float). @@ -242,16 +243,16 @@ pagedir('TR'). %! point(+Point:compound)// . % A *point* is represented by a compound of the following form: -% `point(X:float,Y:float,InputOnly:boolean)`. +% `point(X:float,Y:float,Changeable:boolean)`. -point(point(X,Y,InputOnly)) -- +point(point(X,Y,Changeable)) -- float(X), - `,`, + \",\", float(Y), - input_only(InputOnly). + input_changeable(Changeable). -input_only(false) -- []. -input_only(true) -- `!`. +input_changeable(false) -- \"\". +input_changeable(true) -- \"!\". pointList(Points) -- @@ -292,9 +293,9 @@ rankdir('TB'). rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -- - float(LowerLeftX), `,`, - float(LowerLeftY), `,`, - float(UpperRightX), `,`, + float(LowerLeftX), \",\", + float(LowerLeftY), \",\", + float(UpperRightX), \",\", float(UpperRightY). @@ -414,4 +415,3 @@ style(node, wedged). % @tbd viewPort - diff --git a/gv_attrs.pl b/gv_attrs.pl index 1692915..df0922a 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -2,15 +2,17 @@ gv_attrs, [ gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph]) - % +Attr1:nvpair - % +Attr2:nvpair + % +Attribute1:nvpair + % -Attribute2:nvpair ] ). -/**  GraphViz attributes v2 +/**  GraphViz: Attributes + +Support for GraphViz attributes. @author Wouter Beek -@version 2014/06 +@version 2014/06, 2014/11 */ :- use_module(library(apply)). @@ -54,24 +56,40 @@ +%! gv_attr( +%! +Context:oneof([cluster,edge,graph,node,subgraph]), +%! +Attribute1:nvpair, +%! +Attribute2:nvpair +%! ) is det. +% Uses the default value in case Value is uninstantiated. +% Otherwise, performs a typecheck and converts the given value. + gv_attr(Context, N=V, N=V):- var(V), !, gv_attr(N, UsedBy, _, V, _, _), + % Check validity of context. memberchk(Context, UsedBy). gv_attr(Context, N=V1, N=V2):- - gv_attr(N, UsedBy, Types, _, Minimum, _), + gv_attr(N2, UsedBy, Types, _, Minimum, _), + % Check validity of context. memberchk(Context, UsedBy), + % Check validity of value type. member(Type, Types), - ( - Type == style - - - Dcg =.. [Type,Context,V1] - ; - Dcg =.. [Type,V1] + ( Type == style + - Dcg =.. [Type,Context,V1] + ; Dcg =.. [Type,V1] ), once(dcg_phrase(Dcg, V2)), + % Check validity of Value w.r.t. minimum value -- if available. check_minimum(V1, Minimum). + + +% HELPERS + +%! check_minimum(+Value:atom, +Minimum:number) is semidet. +% Trivially succeeds if no minimum value is available for a given attribute. + check_minimum(_, ''):- !. check_minimum(V, Min1):- atom_number(Min1, Min2), diff --git a/plDcg b/plDcg index be16501..2cd7321 160000 --- a/plDcg +++ b/plDcg @@ -1 +1 @@ -Subproject commit be165017993efcf781007c5d682a519fb5eaa31f +Subproject commit 2cd7321d6c8a84ca23d08670348914c4a8ca6bb0 ``` 45: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ f78b4f8 å’Œå˜åŠ¨å 3109362  [back to content](#compare) ``` diff diff --git a/.gitignore b/.gitignore index 7193a38..b25c15b 100644 --- a/.gitignore +++ b/.gitignore @@ -1,4 +1 @@ *~ -*# -*.db -data/* diff --git a/.gitmodules b/.gitmodules index 844b1bd..a63cbff 100644 --- a/.gitmodules +++ b/.gitmodules @@ -4,6 +4,3 @@ [submodule \"plHtml\"] path = plHtml url = https://github.com/wouterbeek/plHtml.git -[submodule \"plDcg\"] -\tpath = plDcg -\turl = https://github.com/wouterbeek/plDcg.git diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 7096ef9..b1d2484 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 7096ef9749edffe389df6a90d586930c8bf4df70 +Subproject commit b1d2484486ad4876aecc1bf70b2963b12efca341 diff --git a/debug.pl b/debug.pl deleted file mode 100644 index 099cb84..0000000 --- a/debug.pl +++ /dev/null @@ -1,7 +0,0 @@ -% Loads debug tools for the plGraphViz library. - -:- [load]. - -:- use_module(debug_project). -:- debug_all_files. - diff --git a/debug_project.pl b/debug_project.pl deleted file mode 100644 index ab61534..0000000 --- a/debug_project.pl +++ /dev/null @@ -1,67 +0,0 @@ -:- module( - debug_project, - [ - debug_all_files/0 - ] -). - -/**  Debug project - -Generic code for debugging a project: - * Load all subdirectories and Prolog files contained in those directories. - -@author Wouter Beek -@version 2014/10/31 -*/ - -:- use_module(library(ansi_term)). -:- use_module(library(apply)). - -:- use_module(os(dir_ext)). - -% Avoid errors when using gtrace/0 in threads. -:- initialization(guitracer). - - - -debug_all_files:- - absolute_file_name(project(.), Dir, [access(read),file_type(directory)]), - directory_files( - Dir, - Files1, - [ - file_types([prolog]), - include_directories(false), - include_self(false), - recursive(true) - ] - ), - exclude(do_not_load, Files1, Files2), - maplist(use_module0, Files2). -use_module0(File):- - print_message(informational, loading_module(File)), - use_module(File). - -do_not_load(File1):- - file_base_name(File1, File2), - file_name_extension(File3, pl, File2), - do_not_load0(File3). - -do_not_load0(dcg_ascii). -do_not_load0(dcg_unicode). -do_not_load0(debug). -do_not_load0(debug_project). -do_not_load0(index). -do_not_load0(load). -do_not_load0(load_project). -do_not_load0(rfc2616_basic). -do_not_load0(run). - - - -% MESSAGES - -:- multifile(prolog:message//1). - -prolog:message(loading_module(File)) -- - ['[M] ',File]. diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 67d419a..3c7863d 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -46,11 +46,10 @@ /**  GraphViz attribute types @author Wouter Beek -@version 2014/06, 2014/11 +@version 2014/06 */ :- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_ascii)). :- use_module(plDcg(dcg_cardinal)). :- use_module(plDcg(dcg_content)). @@ -98,7 +97,7 @@ gv_attr_type(viewPort). % An *addDouble* is represented by a Prolog float. addDouble(Float) -- - '?'(plus_sign, []), + '?'(`+`, []), double(Float). @@ -107,7 +106,7 @@ addDouble(Float) -- % `point(X:float,Y:float,InputOnly:boolean)`. addPoint(Point) -- - '?'(plus_sign, []), + '?'(`+`, []), point(Point). @@ -148,10 +147,10 @@ backwards_compatible(invempty). backwards_compatible(open). -bool(false) -- \"false\". -bool(false) -- \"no\". -bool(true) -- \"true\". -bool(true) -- \"yes\". +bool(false) -- `false`. +bool(false) -- `no`. +bool(true) -- `true`. +bool(true) -- `yes`. %! clusterMode(+ClusterMode:atom)// . @@ -188,7 +187,7 @@ doubleList([H|T]) -- '*'(doubleList1, T, []). doubleList1(Float) -- - \":\", + `:`, double(Float). @@ -243,16 +242,16 @@ pagedir('TR'). %! point(+Point:compound)// . % A *point* is represented by a compound of the following form: -% `point(X:float,Y:float,Changeable:boolean)`. +% `point(X:float,Y:float,InputOnly:boolean)`. -point(point(X,Y,Changeable)) -- +point(point(X,Y,InputOnly)) -- float(X), - \",\", + `,`, float(Y), - input_changeable(Changeable). + input_only(InputOnly). -input_changeable(false) -- \"\". -input_changeable(true) -- \"!\". +input_only(false) -- []. +input_only(true) -- `!`. pointList(Points) -- @@ -293,9 +292,9 @@ rankdir('TB'). rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -- - float(LowerLeftX), \",\", - float(LowerLeftY), \",\", - float(UpperRightX), \",\", + float(LowerLeftX), `,`, + float(LowerLeftY), `,`, + float(UpperRightX), `,`, float(UpperRightY). @@ -415,3 +414,4 @@ style(node, wedged). % @tbd viewPort + diff --git a/gv_attrs.pl b/gv_attrs.pl index df0922a..1692915 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -2,17 +2,15 @@ gv_attrs, [ gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph]) - % +Attribute1:nvpair - % -Attribute2:nvpair + % +Attr1:nvpair + % +Attr2:nvpair ] ). -/**  GraphViz: Attributes - -Support for GraphViz attributes. +/**  GraphViz attributes v2 @author Wouter Beek -@version 2014/06, 2014/11 +@version 2014/06 */ :- use_module(library(apply)). @@ -56,40 +54,24 @@ Support for GraphViz attributes. -%! gv_attr( -%! +Context:oneof([cluster,edge,graph,node,subgraph]), -%! +Attribute1:nvpair, -%! +Attribute2:nvpair -%! ) is det. -% Uses the default value in case Value is uninstantiated. -% Otherwise, performs a typecheck and converts the given value. - gv_attr(Context, N=V, N=V):- var(V), !, gv_attr(N, UsedBy, _, V, _, _), - % Check validity of context. memberchk(Context, UsedBy). gv_attr(Context, N=V1, N=V2):- - gv_attr(N2, UsedBy, Types, _, Minimum, _), - % Check validity of context. + gv_attr(N, UsedBy, Types, _, Minimum, _), memberchk(Context, UsedBy), - % Check validity of value type. member(Type, Types), - ( Type == style - - Dcg =.. [Type,Context,V1] - ; Dcg =.. [Type,V1] + ( + Type == style + - + Dcg =.. [Type,Context,V1] + ; + Dcg =.. [Type,V1] ), once(dcg_phrase(Dcg, V2)), - % Check validity of Value w.r.t. minimum value -- if available. check_minimum(V1, Minimum). - - -% HELPERS - -%! check_minimum(+Value:atom, +Minimum:number) is semidet. -% Trivially succeeds if no minimum value is available for a given attribute. - check_minimum(_, ''):- !. check_minimum(V, Min1):- atom_number(Min1, Min2), diff --git a/gv_dot.pl b/gv_dot.pl index bde2962..5f33e5c 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -1,7 +1,7 @@ :- module( gv_dot, [ - gv_graph//1 % +Gif:compound + gv_graph//1 % +GraphTerm:compound ] ). @@ -39,7 +39,7 @@ In GraphViz vertices are called 'nodes'. % We assume that the attribute has already been validated. gv_attribute(Name=Val) -- - gv_id(Name), \"=\", gv_id(Val), \";\". + gv_id(Name), `=`, gv_id(Val), `;`. %! gv_attribute_list( @@ -63,16 +63,16 @@ gv_attribute_list(Context, _, Attrs1) -- % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) % ~~~ -gv_compass_pt('_') -- \"_\". -gv_compass_pt(c) -- \"c\". -gv_compass_pt(e) -- \"e\". -gv_compass_pt(n) -- \"n\". -gv_compass_pt(ne) -- \"ne\". -gv_compass_pt(nw) -- \"nw\". -gv_compass_pt(s) -- \"s\". -gv_compass_pt(se) -- \"se\". -gv_compass_pt(sw) -- \"sw\". -gv_compass_pt(w) -- \"w\". +gv_compass_pt('_') -- `_`. +gv_compass_pt(c) -- `c`. +gv_compass_pt(e) -- `e`. +gv_compass_pt(n) -- `n`. +gv_compass_pt(ne) -- `ne`. +gv_compass_pt(nw) -- `nw`. +gv_compass_pt(s) -- `s`. +gv_compass_pt(se) -- `se`. +gv_compass_pt(sw) -- `sw`. +gv_compass_pt(w) -- `w`. %! gv_edge_operator(+Directed:boolean)// . @@ -83,7 +83,7 @@ gv_compass_pt(w) -- \"w\". % @arg Directed Whether an edge is directed (operator `-`) or % undirected (operator `--`). -gv_edge_operator(false) -- !, \"--\". +gv_edge_operator(false) -- !, `--`. gv_edge_operator(true) -- arrow(right, 2). @@ -107,11 +107,11 @@ gv_edge_operator(true) -- arrow(right, 2). gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- indent(I), - gv_node_id(FromId), \" \", + gv_node_id(FromId), ` `, - gv_edge_operator(Directed), \" \", + gv_edge_operator(Directed), ` `, - gv_node_id(ToId), \" \", + gv_node_id(ToId), ` `, % We want `colorscheme/1` from the edges and % `directionality/1` from the graph. @@ -140,11 +140,11 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- gv_generic_attributes_statement(_, _, _, []) -- [], !. gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- indent(I), - gv_kind(Kind), \" \", + gv_kind(Kind), ` `, gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed. -%! gv_graph(+Gif:compound)// +%! gv_graph(+GraphTerm:compound)// % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: % * `directed(+boolean)` @@ -176,10 +176,10 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- % @tbd Assert attributes that are generic with respect to a subgraph. % @tbd Not all vertex and edge properties can be shared it seems (e.g., label). -gv_graph(graph(VTerms,ETerms,GAttrs)) -- - gv_graph(graph(VTerms,[],ETerms,GAttrs)). +gv_graph(graph(VTerms, ETerms, GAttrs)) -- + gv_graph(graph(VTerms, [], ETerms, GAttrs)). -gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -- +gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- { shared_attributes(VTerms, SharedVAttrs, NewVTerms), shared_attributes(ETerms, SharedEAttrs, NewETerms), @@ -194,8 +194,8 @@ gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -- % States that this file represents a graph according to the GraphViz format. indent(I), gv_strict(Strict), - gv_graph_type(Directed), \" \", - gv_id(GName), \" \", + gv_graph_type(Directed), ` `, + gv_id(GName), ` `, % The body of the DOT file appears between curly braces. bracketed( @@ -240,18 +240,18 @@ gv_graph0( (NewVTerms == [], RankedVTerms == []) } - - \"\" + `` ; line_feed ), % The list of GraphViz nodes. '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []), - ({NewVTerms == []} - \"\" ; line_feed), + ({NewVTerms == []} - `` ; line_feed), % The ranked GraphViz nodes (displayed at the same height). '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []), - ({RankedVTerms == []} - \"\" ; line_feed), + ({RankedVTerms == []} - `` ; line_feed), { findall( @@ -281,8 +281,8 @@ gv_graph0( %! gv_graph_type(+Directed:boolean)// . % The type of graph that is represented. -gv_graph_type(false) -- \"graph\". -gv_graph_type(true) -- \"digraph\". +gv_graph_type(false) -- `graph`. +gv_graph_type(true) -- `digraph`. %! gv_id(?Atom:atom)// is det. @@ -305,9 +305,8 @@ gv_graph_type(true) -- \"digraph\". % This requires an XML grammar! % HTML strings (variant 4). -gv_id(Content) -- - {compound(Content)}, !, - gv_html_like_label, Content). +gv_id(Atom) -- + dcg_atom_codes(gv_html_like_label, Atom), !. % Alpha-numeric strings (variant 1). gv_id(Atom) -- {atom_codes(Atom, [H|T])}, @@ -354,19 +353,19 @@ gv_keyword(Codes):- % GraphViz has reserved keywords that cannot be used as identifiers. % GraphViz keywords are case-insensitive. -gv_keyword -- \"digraph\". -gv_keyword -- \"edge\". -gv_keyword -- \"graph\". -gv_keyword -- \"node\". -gv_keyword -- \"strict\". -gv_keyword -- \"subgraph\". +gv_keyword -- `digraph`. +gv_keyword -- `edge`. +gv_keyword -- `graph`. +gv_keyword -- `node`. +gv_keyword -- `strict`. +gv_keyword -- `subgraph`. %! gv_kind(+Kind:oneof([edge,graph,node]))// . -gv_kind(edge) -- \"edge\". -gv_kind(graph) -- \"graph\". -gv_kind(node) -- \"node\". +gv_kind(edge) -- `edge`. +gv_kind(graph) -- `graph`. +gv_kind(node) -- `node`. %! gv_node_id(+NodeId:atom)// . @@ -393,7 +392,7 @@ gv_node_id(Id) -- gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -- indent(I), - gv_node_id(Id), \" \", + gv_node_id(Id), ` `, gv_attribute_list(node, GraphAttrs, VAttrs), line_feed. @@ -404,23 +403,23 @@ gv_port -- gv_port_angle, '?'(gv_port_location, []). gv_port -- - \":\", + `:`, gv_compass_pt(_). gv_port_angle -- - \"@\", + `@`, gv_id(_). gv_port_location -- - \":\", + `:`, gv_id(_). gv_port_location -- - \":\", + `:`, bracketed( round, ( gv_id(_), - \",\", + `,`, gv_id(_) ) ). @@ -437,7 +436,7 @@ gv_quoted_string([92,34|T]) -- !, gv_quoted_string(T). % Add the backslash escape character. gv_quoted_string([34|T]) -- !, - \"\\\\\\\"\", + `\\\\\\\"`, gv_quoted_string(T). % All other characters are allowed without escaping. gv_quoted_string([H|T]) -- @@ -456,7 +455,7 @@ gv_ranked_node_collection( % The rank attribute. {NewI is I + 1}, - indent(NewI), gv_attribute(rank=same), \";\", line_feed, + indent(NewI), gv_attribute(rank=same), `;`, line_feed, '*'( gv_node_statement(NewI, GraphAttrs), @@ -476,7 +475,7 @@ gv_ranked_node_collection( % This only applies to directed graphs. gv_strict(false) -- []. -gv_strict(true) -- \"strict \". +gv_strict(true) -- `strict `. diff --git a/gv_file.pl b/gv_file.pl index 00c9eb0..789bd56 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -31,7 +31,7 @@ and GraphViz output files or SVG DOM structures. :- use_module(library(option)). :- use_module(library(process)). -:- use_module(generics(codes_ext)). +:- use_module(generics(code_ext)). :- use_module(generics(db_ext)). :- use_module(os(file_ext)). :- use_module(os(run_ext)). diff --git a/gv_html.pl b/gv_html.pl index a308ac7..3f0b08b 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -1,223 +1,60 @@ :- module( gv_html, [ - gv_html_like_label//1 % +Content:compound + gv_html_like_label//1 % +Codes:list(code) ] ). -/**  GraphViz: HTML-like labels - -Grammar taken from the GraphViz Web site: - -~~~{.txt} -label : text -\t| table -text : textitem -\t| text textitem -textitem : string -\t|  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -table : [  ]  rows  [  ] -rows : row -\t| rows row -\t| rows  row -row :  cells  -cells : cell -\t| cells cell -\t| cells  cell -cell :  label  -\t|    -~~~ +/**  GraphViz HTML @author Wouter Beek -@see http://www.graphviz.org/content/node-shapes#html -@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11 +@version 2013/07, 2013/09, 2014/03-2014/06 */ -:- use_module(plDcg(dcg_abnf)). :- use_module(plDcg(dcg_content)). :- use_module(plHtml(html_dcg)). -%! gv_html_like_label(?Content:compound)// . - -gv_html_like_label(Content) -- - bracketed(angular, label(Content)). - - -%! cell(?Contents:compound)// . -% Supported attributes for TD: -% ~~~{.txt} -% ALIGN=\"CENTER|LEFT|RIGHT|TEXT\" -% BALIGN=\"CENTER|LEFT|RIGHT\" -% BGCOLOR=\"color\" -% BORDER=\"value\" -% CELLPADDING=\"value\" -% CELLSPACING=\"value\" -% COLOR=\"color\" -% COLSPAN=\"value\" -% FIXEDSIZE=\"FALSE|TRUE\" -% GRADIENTANGLE=\"value\" -% HEIGHT=\"value\" -% HREF=\"value\" -% ID=\"value\" -% PORT=\"portName\" -% ROWSPAN=\"value\" -% SIDES=\"value\" -% STYLE=\"value\" -% TARGET=\"value\" -% TITLE=\"value\" -% TOOLTIP=\"value\" -% VALIGN=\"MIDDLE|BOTTOM|TOP\" -% WIDTH=\"value\" -% ~~~ +%! gv_html_label(+Codes:list(code))// . % -% Supported attributes for IMG: -% ~~~{.txt} -% SCALE=\"FALSE|TRUE|WIDTH|HEIGHT|BOTH\" -% SRC=\"value\" -% ~~~ - -cell(td(Contents)) -- - html_element(td, [], label(Contents)). -cell(td(img)) -- - html_element(td, [], html_element(img)). - - -%! cells(?Contents:list(compound))// . - -cells([H|T]) -- - cell(H), - cells(T). -cells([H,vr|T]) -- - cell(H), - html_element(vr), - cells(T). -cells([H]) -- - cell(H). - - -%! label(?Content:compound)// . -% GraphViz HTML-like label. - -label(Content) -- - text(Content). -label(Content) -- - table(Content). - - -%! row(?Contents:compound)// . - -row(tr(Contents)) -- - html_element(tr, [], cell(Contents)). - - -%! rows(?Contents:list)// . - -rows([H|T]) -- - row(H), - rows. -rows([H,hr|T]) -- - row(H), - html_element(hr), - rows(T). -rows([H]) -- - row(H). - - -%! table(?Contents:compound)// . -% Supported attributes for TABLE: -% ~~~{.txt} -% ALIGN=\"CENTER|LEFT|RIGHT\" -% BGCOLOR=\"color\" -% BORDER=\"value\" -% CELLBORDER=\"value\" -% CELLPADDING=\"value\" -% CELLSPACING=\"value\" -% COLOR=\"color\" -% COLUMNS=\"value\" -% FIXEDSIZE=\"FALSE|TRUE\" -% GRADIENTANGLE=\"value\" -% HEIGHT=\"value\" -% HREF=\"value\" -% ID=\"value\" -% PORT=\"portName\" -% ROWS=\"value\" -% SIDES=\"value\" -% STYLE=\"value\" -% TARGET=\"value\" -% TITLE=\"value\" -% TOOLTIP=\"value\" -% VALIGN=\"MIDDLE|BOTTOM|TOP\" -% WIDTH=\"value\" -% ~~~ -% -% Supported attributes for FONT: -% ~~~{.txt} -% COLOR=\"color\" -% FACE=\"fontname\" -% POINT-SIZE=\"value\" -% ~~~ - -table(table(Attrs,Contents)) -- - html_element(table, Attrs, rows(Contents)). -table(table(font(Contents))) -- - html_element(font, [], html_element(table, [], rows(Contents))). - - -%! text(?Contents:list)// . - -text(Contents) -- - '+'(textitem, Contents, []). - - -%! textitem(?Content)// . -% Supported attributes for BR: -% ~~~{.txt} -% ALIGN=\"CENTER|LEFT|RIGHT\" -% ~~~ - -textitem(string(String)) -- - html_string(String). -textitem(entity(Name)) -- - html_entity(Name). -textitem(br(Attrs)) -- - html_element(br, Attrs). -textitem(Compound) -- - {var(Compound)}, !, - html_element(Name, _, text(Content)), - { - supported_html_element(Name), - Compound =.. [Name,Content] - }. -textitem(Compound) -- - { - Compound =.. [Name,Content], - supported_html_element(Name) - }, - html_element(Name, _, text(Content)). - - - -% HELPERS - -%! supported_html_element(+Name:atom) is semidet. -%! supported_html_element(-Name:atom) is multi. - -supported_html_element(b). -supported_html_element(font). -supported_html_element(i). -supported_html_element(o). -supported_html_element(s). -supported_html_element(sub). -supported_html_element(sup). -supported_html_element(u). +% @see http://www.graphviz.org/doc/info/shapes.html#html + +gv_html_label -- gv_html_text, !. +gv_html_label -- gv_html_table, !. +gv_html_label -- []. + +gv_html_like_label -- bracketed(angular, gv_html_label). + +gv_html_like_label(Content) -- bracketed(angular, html_dcg(Content)). + +gv_html_table -- html_element(table, _, gv_html_rows). +gv_html_table -- html_element(font, _, html_element(table, _, gv_html_rows)). + +gv_html_rows -- gv_html_row, gv_html_rows. +gv_html_rows -- gv_html_row, html_element(hr, _), gv_html_rows. +gv_html_rows -- gv_html_row. + +gv_html_row -- html_element(tr, _, gv_html_cells). + +gv_html_cell -- html_element(td, _, gv_html_label). +gv_html_cell -- html_element(td, _, html_element(img, _)). + +gv_html_cells -- gv_html_cell, gv_html_cells. +gv_html_cells -- gv_html_cell. +gv_html_cells -- gv_html_cell, html_element(vr, _), gv_html_cells. + +gv_html_text -- gv_html_textitem, gv_html_text. +gv_html_text -- gv_html_textitem. + +gv_html_textitem -- html_string, !. +gv_html_textitem -- html_entity, !. +gv_html_textitem -- html_element(br, _), !. +gv_html_textitem -- html_element(font, _, gv_html_text), !. +gv_html_textitem -- html_element(i, _, gv_html_text), !. +gv_html_textitem -- html_element(b, _, gv_html_text), !. +gv_html_textitem -- html_element(u, _, gv_html_text), !. +gv_html_textitem -- html_element(sub, _, gv_html_text), !. +gv_html_textitem -- html_element(sup, _, gv_html_text), !. + diff --git a/load.pl b/load.pl index 1681cd0..4b117d1 100644 --- a/load.pl +++ b/load.pl @@ -1,13 +1,12 @@ -% Load file for the plGraphViz library. +% Load file for plGraphViz. -:- dynamic(user:project/3). -:- multifile(user:project/3). - user:project(plGraphViz, 'GraphViz support for SWI-Prolog.'). +:- dynamic(user:prolog/3). +:- multifile(user:prolog/3). + user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz). :- use_module(load_project). -:- load_project([ +:- load_project(plGraphViz, [ plc-'Prolog-Library-Collection', - plDcg, plHtml ]). diff --git a/load_project.pl b/load_project.pl index e2196b7..5599b5e 100644 --- a/load_project.pl +++ b/load_project.pl @@ -1,7 +1,8 @@ :- module( load_project, [ - load_project/1, % +ChildProjects:list(or([atom,pair(atom)])) + load_project/2, % +Parent:atom + % +ChildProjects:list(or([atom,pair(atom)])) load_subproject/2, % +ParentFileSearchPath:atom % +Child:or([atom,pair(atom)]) set_data_subdirectory/1 % +ParentDirectory:atom @@ -16,7 +17,7 @@ Generic code for loading a project: * Load the index of subprojects onto the file search path. @author Wouter Beek -@version 2014/08/20 +@version 2014/06/14 */ :- use_module(library(ansi_term)). % Colorized terminal messages. @@ -29,11 +30,11 @@ Generic code for loading a project: -load_project(ChildProjects):- - parent_alias(ParentFsp), +load_project(Parent, ChildProjects):- + parent_alias(Parent, ParentFsp), % Entry point. - source_file(load_project(_), ThisFile), + source_file(load_project(_,_), ThisFile), file_directory_name(ThisFile, ThisDir), assert(user:file_search_path(ParentFsp, ThisDir)), assert(user:file_search_path(project, ThisDir)), @@ -91,12 +92,11 @@ load_project_index(Fsp):- load_project_index(_). -%! parent_alias(-ParentFsp:atom) is det. +%! parent_alias(+Parent:atom, -ParentFsp:atom) is det. -parent_alias(ParentFsp):- - user:project(_, _, ParentFsp), !. -parent_alias(ParentFsp):- - user:project(ParentFsp, _). +parent_alias(Parent, ParentFsp):- + user:project(Parent, _, ParentFsp), !. +parent_alias(Parent, Parent). %! set_data_subdirectory(+ParentDirectory:atom) is det. @@ -108,8 +108,6 @@ set_data_subdirectory(ParentDir):- -% Messages - :- multifile(prolog:message//1). prolog:message(missing_subproject_directory(ChildFsp,ChildDir)) -- diff --git a/plDcg b/plDcg deleted file mode 160000 index 2cd7321..0000000 --- a/plDcg +++ /dev/null @@ -1 +0,0 @@ -Subproject commit 2cd7321d6c8a84ca23d08670348914c4a8ca6bb0 diff --git a/plHtml b/plHtml index e3abeed..24fff7b 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit e3abeed4041392013965598145806ee33081f76f +Subproject commit 24fff7bcf90b6bc4fbf317d504be899dc1b869cb diff --git a/run.pl b/run.pl deleted file mode 100644 index 8bba736..0000000 --- a/run.pl +++ /dev/null @@ -1,9 +0,0 @@ -% Standalone execution of the plGraphViz library. - -:- if(current_prolog_flag(argv, ['--debug'|_])). - :- ensure_loaded(debug). -:- else. - :- set_prolog_flag(verbose, silent). - :- ensure_loaded(load). -:- endif. - ``` 46: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 3109362 å’Œå˜åŠ¨å df0ab09  [back to content](#compare) ``` diff diff --git a/.gitignore b/.gitignore index b25c15b..7193a38 100644 --- a/.gitignore +++ b/.gitignore @@ -1 +1,4 @@ *~ +*# +*.db +data/* diff --git a/.gitmodules b/.gitmodules index a63cbff..844b1bd 100644 --- a/.gitmodules +++ b/.gitmodules @@ -4,3 +4,6 @@ [submodule \"plHtml\"] path = plHtml url = https://github.com/wouterbeek/plHtml.git +[submodule \"plDcg\"] +\tpath = plDcg +\turl = https://github.com/wouterbeek/plDcg.git diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index b1d2484..7096ef9 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit b1d2484486ad4876aecc1bf70b2963b12efca341 +Subproject commit 7096ef9749edffe389df6a90d586930c8bf4df70 diff --git a/debug.pl b/debug.pl new file mode 100644 index 0000000..099cb84 --- /dev/null +++ b/debug.pl @@ -0,0 +1,7 @@ +% Loads debug tools for the plGraphViz library. + +:- [load]. + +:- use_module(debug_project). +:- debug_all_files. + diff --git a/debug_project.pl b/debug_project.pl new file mode 100644 index 0000000..ab61534 --- /dev/null +++ b/debug_project.pl @@ -0,0 +1,67 @@ +:- module( + debug_project, + [ + debug_all_files/0 + ] +). + +/**  Debug project + +Generic code for debugging a project: + * Load all subdirectories and Prolog files contained in those directories. + +@author Wouter Beek +@version 2014/10/31 +*/ + +:- use_module(library(ansi_term)). +:- use_module(library(apply)). + +:- use_module(os(dir_ext)). + +% Avoid errors when using gtrace/0 in threads. +:- initialization(guitracer). + + + +debug_all_files:- + absolute_file_name(project(.), Dir, [access(read),file_type(directory)]), + directory_files( + Dir, + Files1, + [ + file_types([prolog]), + include_directories(false), + include_self(false), + recursive(true) + ] + ), + exclude(do_not_load, Files1, Files2), + maplist(use_module0, Files2). +use_module0(File):- + print_message(informational, loading_module(File)), + use_module(File). + +do_not_load(File1):- + file_base_name(File1, File2), + file_name_extension(File3, pl, File2), + do_not_load0(File3). + +do_not_load0(dcg_ascii). +do_not_load0(dcg_unicode). +do_not_load0(debug). +do_not_load0(debug_project). +do_not_load0(index). +do_not_load0(load). +do_not_load0(load_project). +do_not_load0(rfc2616_basic). +do_not_load0(run). + + + +% MESSAGES + +:- multifile(prolog:message//1). + +prolog:message(loading_module(File)) -- + ['[M] ',File]. diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 3c7863d..67d419a 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -46,10 +46,11 @@ /**  GraphViz attribute types @author Wouter Beek -@version 2014/06 +@version 2014/06, 2014/11 */ :- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_ascii)). :- use_module(plDcg(dcg_cardinal)). :- use_module(plDcg(dcg_content)). @@ -97,7 +98,7 @@ gv_attr_type(viewPort). % An *addDouble* is represented by a Prolog float. addDouble(Float) -- - '?'(`+`, []), + '?'(plus_sign, []), double(Float). @@ -106,7 +107,7 @@ addDouble(Float) -- % `point(X:float,Y:float,InputOnly:boolean)`. addPoint(Point) -- - '?'(`+`, []), + '?'(plus_sign, []), point(Point). @@ -147,10 +148,10 @@ backwards_compatible(invempty). backwards_compatible(open). -bool(false) -- `false`. -bool(false) -- `no`. -bool(true) -- `true`. -bool(true) -- `yes`. +bool(false) -- \"false\". +bool(false) -- \"no\". +bool(true) -- \"true\". +bool(true) -- \"yes\". %! clusterMode(+ClusterMode:atom)// . @@ -187,7 +188,7 @@ doubleList([H|T]) -- '*'(doubleList1, T, []). doubleList1(Float) -- - `:`, + \":\", double(Float). @@ -242,16 +243,16 @@ pagedir('TR'). %! point(+Point:compound)// . % A *point* is represented by a compound of the following form: -% `point(X:float,Y:float,InputOnly:boolean)`. +% `point(X:float,Y:float,Changeable:boolean)`. -point(point(X,Y,InputOnly)) -- +point(point(X,Y,Changeable)) -- float(X), - `,`, + \",\", float(Y), - input_only(InputOnly). + input_changeable(Changeable). -input_only(false) -- []. -input_only(true) -- `!`. +input_changeable(false) -- \"\". +input_changeable(true) -- \"!\". pointList(Points) -- @@ -292,9 +293,9 @@ rankdir('TB'). rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -- - float(LowerLeftX), `,`, - float(LowerLeftY), `,`, - float(UpperRightX), `,`, + float(LowerLeftX), \",\", + float(LowerLeftY), \",\", + float(UpperRightX), \",\", float(UpperRightY). @@ -414,4 +415,3 @@ style(node, wedged). % @tbd viewPort - diff --git a/gv_attrs.pl b/gv_attrs.pl index 1692915..df0922a 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -2,15 +2,17 @@ gv_attrs, [ gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph]) - % +Attr1:nvpair - % +Attr2:nvpair + % +Attribute1:nvpair + % -Attribute2:nvpair ] ). -/**  GraphViz attributes v2 +/**  GraphViz: Attributes + +Support for GraphViz attributes. @author Wouter Beek -@version 2014/06 +@version 2014/06, 2014/11 */ :- use_module(library(apply)). @@ -54,24 +56,40 @@ +%! gv_attr( +%! +Context:oneof([cluster,edge,graph,node,subgraph]), +%! +Attribute1:nvpair, +%! +Attribute2:nvpair +%! ) is det. +% Uses the default value in case Value is uninstantiated. +% Otherwise, performs a typecheck and converts the given value. + gv_attr(Context, N=V, N=V):- var(V), !, gv_attr(N, UsedBy, _, V, _, _), + % Check validity of context. memberchk(Context, UsedBy). gv_attr(Context, N=V1, N=V2):- - gv_attr(N, UsedBy, Types, _, Minimum, _), + gv_attr(N2, UsedBy, Types, _, Minimum, _), + % Check validity of context. memberchk(Context, UsedBy), + % Check validity of value type. member(Type, Types), - ( - Type == style - - - Dcg =.. [Type,Context,V1] - ; - Dcg =.. [Type,V1] + ( Type == style + - Dcg =.. [Type,Context,V1] + ; Dcg =.. [Type,V1] ), once(dcg_phrase(Dcg, V2)), + % Check validity of Value w.r.t. minimum value -- if available. check_minimum(V1, Minimum). + + +% HELPERS + +%! check_minimum(+Value:atom, +Minimum:number) is semidet. +% Trivially succeeds if no minimum value is available for a given attribute. + check_minimum(_, ''):- !. check_minimum(V, Min1):- atom_number(Min1, Min2), diff --git a/gv_dot.pl b/gv_dot.pl index 5f33e5c..bde2962 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -1,7 +1,7 @@ :- module( gv_dot, [ - gv_graph//1 % +GraphTerm:compound + gv_graph//1 % +Gif:compound ] ). @@ -39,7 +39,7 @@ In GraphViz vertices are called 'nodes'. % We assume that the attribute has already been validated. gv_attribute(Name=Val) -- - gv_id(Name), `=`, gv_id(Val), `;`. + gv_id(Name), \"=\", gv_id(Val), \";\". %! gv_attribute_list( @@ -63,16 +63,16 @@ gv_attribute_list(Context, _, Attrs1) -- % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) % ~~~ -gv_compass_pt('_') -- `_`. -gv_compass_pt(c) -- `c`. -gv_compass_pt(e) -- `e`. -gv_compass_pt(n) -- `n`. -gv_compass_pt(ne) -- `ne`. -gv_compass_pt(nw) -- `nw`. -gv_compass_pt(s) -- `s`. -gv_compass_pt(se) -- `se`. -gv_compass_pt(sw) -- `sw`. -gv_compass_pt(w) -- `w`. +gv_compass_pt('_') -- \"_\". +gv_compass_pt(c) -- \"c\". +gv_compass_pt(e) -- \"e\". +gv_compass_pt(n) -- \"n\". +gv_compass_pt(ne) -- \"ne\". +gv_compass_pt(nw) -- \"nw\". +gv_compass_pt(s) -- \"s\". +gv_compass_pt(se) -- \"se\". +gv_compass_pt(sw) -- \"sw\". +gv_compass_pt(w) -- \"w\". %! gv_edge_operator(+Directed:boolean)// . @@ -83,7 +83,7 @@ gv_compass_pt(w) -- `w`. % @arg Directed Whether an edge is directed (operator `-`) or % undirected (operator `--`). -gv_edge_operator(false) -- !, `--`. +gv_edge_operator(false) -- !, \"--\". gv_edge_operator(true) -- arrow(right, 2). @@ -107,11 +107,11 @@ gv_edge_operator(true) -- arrow(right, 2). gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- indent(I), - gv_node_id(FromId), ` `, + gv_node_id(FromId), \" \", - gv_edge_operator(Directed), ` `, + gv_edge_operator(Directed), \" \", - gv_node_id(ToId), ` `, + gv_node_id(ToId), \" \", % We want `colorscheme/1` from the edges and % `directionality/1` from the graph. @@ -140,11 +140,11 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- gv_generic_attributes_statement(_, _, _, []) -- [], !. gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- indent(I), - gv_kind(Kind), ` `, + gv_kind(Kind), \" \", gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed. -%! gv_graph(+GraphTerm:compound)// +%! gv_graph(+Gif:compound)// % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: % * `directed(+boolean)` @@ -176,10 +176,10 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- % @tbd Assert attributes that are generic with respect to a subgraph. % @tbd Not all vertex and edge properties can be shared it seems (e.g., label). -gv_graph(graph(VTerms, ETerms, GAttrs)) -- - gv_graph(graph(VTerms, [], ETerms, GAttrs)). +gv_graph(graph(VTerms,ETerms,GAttrs)) -- + gv_graph(graph(VTerms,[],ETerms,GAttrs)). -gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- +gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -- { shared_attributes(VTerms, SharedVAttrs, NewVTerms), shared_attributes(ETerms, SharedEAttrs, NewETerms), @@ -194,8 +194,8 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- % States that this file represents a graph according to the GraphViz format. indent(I), gv_strict(Strict), - gv_graph_type(Directed), ` `, - gv_id(GName), ` `, + gv_graph_type(Directed), \" \", + gv_id(GName), \" \", % The body of the DOT file appears between curly braces. bracketed( @@ -240,18 +240,18 @@ gv_graph0( (NewVTerms == [], RankedVTerms == []) } - - `` + \"\" ; line_feed ), % The list of GraphViz nodes. '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []), - ({NewVTerms == []} - `` ; line_feed), + ({NewVTerms == []} - \"\" ; line_feed), % The ranked GraphViz nodes (displayed at the same height). '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []), - ({RankedVTerms == []} - `` ; line_feed), + ({RankedVTerms == []} - \"\" ; line_feed), { findall( @@ -281,8 +281,8 @@ gv_graph0( %! gv_graph_type(+Directed:boolean)// . % The type of graph that is represented. -gv_graph_type(false) -- `graph`. -gv_graph_type(true) -- `digraph`. +gv_graph_type(false) -- \"graph\". +gv_graph_type(true) -- \"digraph\". %! gv_id(?Atom:atom)// is det. @@ -305,8 +305,9 @@ gv_graph_type(true) -- `digraph`. % This requires an XML grammar! % HTML strings (variant 4). -gv_id(Atom) -- - dcg_atom_codes(gv_html_like_label, Atom), !. +gv_id(Content) -- + {compound(Content)}, !, + gv_html_like_label, Content). % Alpha-numeric strings (variant 1). gv_id(Atom) -- {atom_codes(Atom, [H|T])}, @@ -353,19 +354,19 @@ gv_keyword(Codes):- % GraphViz has reserved keywords that cannot be used as identifiers. % GraphViz keywords are case-insensitive. -gv_keyword -- `digraph`. -gv_keyword -- `edge`. -gv_keyword -- `graph`. -gv_keyword -- `node`. -gv_keyword -- `strict`. -gv_keyword -- `subgraph`. +gv_keyword -- \"digraph\". +gv_keyword -- \"edge\". +gv_keyword -- \"graph\". +gv_keyword -- \"node\". +gv_keyword -- \"strict\". +gv_keyword -- \"subgraph\". %! gv_kind(+Kind:oneof([edge,graph,node]))// . -gv_kind(edge) -- `edge`. -gv_kind(graph) -- `graph`. -gv_kind(node) -- `node`. +gv_kind(edge) -- \"edge\". +gv_kind(graph) -- \"graph\". +gv_kind(node) -- \"node\". %! gv_node_id(+NodeId:atom)// . @@ -392,7 +393,7 @@ gv_node_id(Id) -- gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -- indent(I), - gv_node_id(Id), ` `, + gv_node_id(Id), \" \", gv_attribute_list(node, GraphAttrs, VAttrs), line_feed. @@ -403,23 +404,23 @@ gv_port -- gv_port_angle, '?'(gv_port_location, []). gv_port -- - `:`, + \":\", gv_compass_pt(_). gv_port_angle -- - `@`, + \"@\", gv_id(_). gv_port_location -- - `:`, + \":\", gv_id(_). gv_port_location -- - `:`, + \":\", bracketed( round, ( gv_id(_), - `,`, + \",\", gv_id(_) ) ). @@ -436,7 +437,7 @@ gv_quoted_string([92,34|T]) -- !, gv_quoted_string(T). % Add the backslash escape character. gv_quoted_string([34|T]) -- !, - `\\\\\\\"`, + \"\\\\\\\"\", gv_quoted_string(T). % All other characters are allowed without escaping. gv_quoted_string([H|T]) -- @@ -455,7 +456,7 @@ gv_ranked_node_collection( % The rank attribute. {NewI is I + 1}, - indent(NewI), gv_attribute(rank=same), `;`, line_feed, + indent(NewI), gv_attribute(rank=same), \";\", line_feed, '*'( gv_node_statement(NewI, GraphAttrs), @@ -475,7 +476,7 @@ gv_ranked_node_collection( % This only applies to directed graphs. gv_strict(false) -- []. -gv_strict(true) -- `strict `. +gv_strict(true) -- \"strict \". diff --git a/gv_html.pl b/gv_html.pl index 3f0b08b..a308ac7 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -1,60 +1,223 @@ :- module( gv_html, [ - gv_html_like_label//1 % +Codes:list(code) + gv_html_like_label//1 % +Content:compound ] ). -/**  GraphViz HTML +/**  GraphViz: HTML-like labels + +Grammar taken from the GraphViz Web site: + +~~~{.txt} +label : text +\t| table +text : textitem +\t| text textitem +textitem : string +\t|  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +\t|  text  +table : [  ]  rows  [  ] +rows : row +\t| rows row +\t| rows  row +row :  cells  +cells : cell +\t| cells cell +\t| cells  cell +cell :  label  +\t|    +~~~ @author Wouter Beek -@version 2013/07, 2013/09, 2014/03-2014/06 +@see http://www.graphviz.org/content/node-shapes#html +@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11 */ +:- use_module(plDcg(dcg_abnf)). :- use_module(plDcg(dcg_content)). :- use_module(plHtml(html_dcg)). -%! gv_html_label(+Codes:list(code))// . +%! gv_html_like_label(?Content:compound)// . + +gv_html_like_label(Content) -- + bracketed(angular, label(Content)). + + +%! cell(?Contents:compound)// . +% Supported attributes for TD: +% ~~~{.txt} +% ALIGN=\"CENTER|LEFT|RIGHT|TEXT\" +% BALIGN=\"CENTER|LEFT|RIGHT\" +% BGCOLOR=\"color\" +% BORDER=\"value\" +% CELLPADDING=\"value\" +% CELLSPACING=\"value\" +% COLOR=\"color\" +% COLSPAN=\"value\" +% FIXEDSIZE=\"FALSE|TRUE\" +% GRADIENTANGLE=\"value\" +% HEIGHT=\"value\" +% HREF=\"value\" +% ID=\"value\" +% PORT=\"portName\" +% ROWSPAN=\"value\" +% SIDES=\"value\" +% STYLE=\"value\" +% TARGET=\"value\" +% TITLE=\"value\" +% TOOLTIP=\"value\" +% VALIGN=\"MIDDLE|BOTTOM|TOP\" +% WIDTH=\"value\" +% ~~~ % -% @see http://www.graphviz.org/doc/info/shapes.html#html - -gv_html_label -- gv_html_text, !. -gv_html_label -- gv_html_table, !. -gv_html_label -- []. - -gv_html_like_label -- bracketed(angular, gv_html_label). - -gv_html_like_label(Content) -- bracketed(angular, html_dcg(Content)). - -gv_html_table -- html_element(table, _, gv_html_rows). -gv_html_table -- html_element(font, _, html_element(table, _, gv_html_rows)). - -gv_html_rows -- gv_html_row, gv_html_rows. -gv_html_rows -- gv_html_row, html_element(hr, _), gv_html_rows. -gv_html_rows -- gv_html_row. - -gv_html_row -- html_element(tr, _, gv_html_cells). - -gv_html_cell -- html_element(td, _, gv_html_label). -gv_html_cell -- html_element(td, _, html_element(img, _)). - -gv_html_cells -- gv_html_cell, gv_html_cells. -gv_html_cells -- gv_html_cell. -gv_html_cells -- gv_html_cell, html_element(vr, _), gv_html_cells. - -gv_html_text -- gv_html_textitem, gv_html_text. -gv_html_text -- gv_html_textitem. - -gv_html_textitem -- html_string, !. -gv_html_textitem -- html_entity, !. -gv_html_textitem -- html_element(br, _), !. -gv_html_textitem -- html_element(font, _, gv_html_text), !. -gv_html_textitem -- html_element(i, _, gv_html_text), !. -gv_html_textitem -- html_element(b, _, gv_html_text), !. -gv_html_textitem -- html_element(u, _, gv_html_text), !. -gv_html_textitem -- html_element(sub, _, gv_html_text), !. -gv_html_textitem -- html_element(sup, _, gv_html_text), !. - +% Supported attributes for IMG: +% ~~~{.txt} +% SCALE=\"FALSE|TRUE|WIDTH|HEIGHT|BOTH\" +% SRC=\"value\" +% ~~~ + +cell(td(Contents)) -- + html_element(td, [], label(Contents)). +cell(td(img)) -- + html_element(td, [], html_element(img)). + + +%! cells(?Contents:list(compound))// . + +cells([H|T]) -- + cell(H), + cells(T). +cells([H,vr|T]) -- + cell(H), + html_element(vr), + cells(T). +cells([H]) -- + cell(H). + + +%! label(?Content:compound)// . +% GraphViz HTML-like label. + +label(Content) -- + text(Content). +label(Content) -- + table(Content). + + +%! row(?Contents:compound)// . + +row(tr(Contents)) -- + html_element(tr, [], cell(Contents)). + + +%! rows(?Contents:list)// . + +rows([H|T]) -- + row(H), + rows. +rows([H,hr|T]) -- + row(H), + html_element(hr), + rows(T). +rows([H]) -- + row(H). + + +%! table(?Contents:compound)// . +% Supported attributes for TABLE: +% ~~~{.txt} +% ALIGN=\"CENTER|LEFT|RIGHT\" +% BGCOLOR=\"color\" +% BORDER=\"value\" +% CELLBORDER=\"value\" +% CELLPADDING=\"value\" +% CELLSPACING=\"value\" +% COLOR=\"color\" +% COLUMNS=\"value\" +% FIXEDSIZE=\"FALSE|TRUE\" +% GRADIENTANGLE=\"value\" +% HEIGHT=\"value\" +% HREF=\"value\" +% ID=\"value\" +% PORT=\"portName\" +% ROWS=\"value\" +% SIDES=\"value\" +% STYLE=\"value\" +% TARGET=\"value\" +% TITLE=\"value\" +% TOOLTIP=\"value\" +% VALIGN=\"MIDDLE|BOTTOM|TOP\" +% WIDTH=\"value\" +% ~~~ +% +% Supported attributes for FONT: +% ~~~{.txt} +% COLOR=\"color\" +% FACE=\"fontname\" +% POINT-SIZE=\"value\" +% ~~~ + +table(table(Attrs,Contents)) -- + html_element(table, Attrs, rows(Contents)). +table(table(font(Contents))) -- + html_element(font, [], html_element(table, [], rows(Contents))). + + +%! text(?Contents:list)// . + +text(Contents) -- + '+'(textitem, Contents, []). + + +%! textitem(?Content)// . +% Supported attributes for BR: +% ~~~{.txt} +% ALIGN=\"CENTER|LEFT|RIGHT\" +% ~~~ + +textitem(string(String)) -- + html_string(String). +textitem(entity(Name)) -- + html_entity(Name). +textitem(br(Attrs)) -- + html_element(br, Attrs). +textitem(Compound) -- + {var(Compound)}, !, + html_element(Name, _, text(Content)), + { + supported_html_element(Name), + Compound =.. [Name,Content] + }. +textitem(Compound) -- + { + Compound =.. [Name,Content], + supported_html_element(Name) + }, + html_element(Name, _, text(Content)). + + + +% HELPERS + +%! supported_html_element(+Name:atom) is semidet. +%! supported_html_element(-Name:atom) is multi. + +supported_html_element(b). +supported_html_element(font). +supported_html_element(i). +supported_html_element(o). +supported_html_element(s). +supported_html_element(sub). +supported_html_element(sup). +supported_html_element(u). diff --git a/load.pl b/load.pl index 4b117d1..1681cd0 100644 --- a/load.pl +++ b/load.pl @@ -1,12 +1,13 @@ -% Load file for plGraphViz. +% Load file for the plGraphViz library. -:- dynamic(user:prolog/3). -:- multifile(user:prolog/3). - user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz). +:- dynamic(user:project/3). +:- multifile(user:project/3). + user:project(plGraphViz, 'GraphViz support for SWI-Prolog.'). :- use_module(load_project). -:- load_project(plGraphViz, [ +:- load_project([ plc-'Prolog-Library-Collection', + plDcg, plHtml ]). diff --git a/load_project.pl b/load_project.pl index 5599b5e..e2196b7 100644 --- a/load_project.pl +++ b/load_project.pl @@ -1,8 +1,7 @@ :- module( load_project, [ - load_project/2, % +Parent:atom - % +ChildProjects:list(or([atom,pair(atom)])) + load_project/1, % +ChildProjects:list(or([atom,pair(atom)])) load_subproject/2, % +ParentFileSearchPath:atom % +Child:or([atom,pair(atom)]) set_data_subdirectory/1 % +ParentDirectory:atom @@ -17,7 +16,7 @@ Generic code for loading a project: * Load the index of subprojects onto the file search path. @author Wouter Beek -@version 2014/06/14 +@version 2014/08/20 */ :- use_module(library(ansi_term)). % Colorized terminal messages. @@ -30,11 +29,11 @@ Generic code for loading a project: -load_project(Parent, ChildProjects):- - parent_alias(Parent, ParentFsp), +load_project(ChildProjects):- + parent_alias(ParentFsp), % Entry point. - source_file(load_project(_,_), ThisFile), + source_file(load_project(_), ThisFile), file_directory_name(ThisFile, ThisDir), assert(user:file_search_path(ParentFsp, ThisDir)), assert(user:file_search_path(project, ThisDir)), @@ -92,11 +91,12 @@ load_project_index(Fsp):- load_project_index(_). -%! parent_alias(+Parent:atom, -ParentFsp:atom) is det. +%! parent_alias(-ParentFsp:atom) is det. -parent_alias(Parent, ParentFsp):- - user:project(Parent, _, ParentFsp), !. -parent_alias(Parent, Parent). +parent_alias(ParentFsp):- + user:project(_, _, ParentFsp), !. +parent_alias(ParentFsp):- + user:project(ParentFsp, _). %! set_data_subdirectory(+ParentDirectory:atom) is det. @@ -108,6 +108,8 @@ set_data_subdirectory(ParentDir):- +% Messages + :- multifile(prolog:message//1). prolog:message(missing_subproject_directory(ChildFsp,ChildDir)) -- diff --git a/plDcg b/plDcg new file mode 160000 index 0000000..2cd7321 --- /dev/null +++ b/plDcg @@ -0,0 +1 @@ +Subproject commit 2cd7321d6c8a84ca23d08670348914c4a8ca6bb0 diff --git a/plHtml b/plHtml index 24fff7b..e3abeed 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit 24fff7bcf90b6bc4fbf317d504be899dc1b869cb +Subproject commit e3abeed4041392013965598145806ee33081f76f diff --git a/run.pl b/run.pl new file mode 100644 index 0000000..8bba736 --- /dev/null +++ b/run.pl @@ -0,0 +1,9 @@ +% Standalone execution of the plGraphViz library. + +:- if(current_prolog_flag(argv, ['--debug'|_])). + :- ensure_loaded(debug). +:- else. + :- set_prolog_flag(verbose, silent). + :- ensure_loaded(load). +:- endif. + ``` 47: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ df0ab09 å’Œå˜åŠ¨å 73e976b  [back to content](#compare) ``` diff diff --git a/.gitmodules b/.gitmodules index 844b1bd..ba7e7a9 100644 --- a/.gitmodules +++ b/.gitmodules @@ -7,3 +7,12 @@ [submodule \"plDcg\"] path = plDcg url = https://github.com/wouterbeek/plDcg.git +[submodule \"plSvg\"] +\tpath = plSvg +\turl = https://github.com/wouterbeek/plSvg.git +[submodule \"plHttp\"] +\tpath = plHttp +\turl = https://github.com/wouterbeek/plHttp.git +[submodule \"plUri\"] +\tpath = plUri +\turl = https://github.com/wouterbeek/plUri.git diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 7096ef9..130d471 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 7096ef9749edffe389df6a90d586930c8bf4df70 +Subproject commit 130d471fdafe35858114ff8f9cde3acf66380d99 diff --git a/gv_attrs.pl b/gv_attrs.pl index df0922a..f0c1c5d 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -21,6 +21,7 @@ Support for GraphViz attributes. :- use_module(generics(db_ext)). :- use_module(os(file_ext)). +:- use_module(os(file_gnu)). :- use_module(plDcg(dcg_content)). :- use_module(plDcg(dcg_generics)). diff --git a/gv_color.pl b/gv_color.pl index c5fccd4..4176444 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -17,12 +17,13 @@ */ :- use_module(library(apply)). -:- use_module(library(lists)). +:- use_module(library(lists), except([delete/3])). :- use_module(library(persistency)). :- use_module(library(xpath)). :- use_module(generics(db_ext)). :- use_module(os(file_ext)). +:- use_module(os(file_gnu)). :- use_module(plDcg(dcg_abnf)). :- use_module(plDcg(dcg_cardinal)). diff --git a/gv_dot.pl b/gv_dot.pl index bde2962..0cdc571 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -19,7 +19,7 @@ In GraphViz vertices are called 'nodes'. */ :- use_module(library(apply)). -:- use_module(library(lists)). +:- use_module(library(lists), except([delete/3])). :- use_module(library(ordsets)). :- use_module(plDcg(dcg_abnf)). diff --git a/load.pl b/load.pl index 1681cd0..67dfe22 100644 --- a/load.pl +++ b/load.pl @@ -1,13 +1,16 @@ % Load file for the plGraphViz library. -:- dynamic(user:project/3). -:- multifile(user:project/3). +:- dynamic(user:project/2). +:- multifile(user:project/2). user:project(plGraphViz, 'GraphViz support for SWI-Prolog.'). :- use_module(load_project). :- load_project([ plc-'Prolog-Library-Collection', plDcg, - plHtml + plHtml, + plHttp, + plSvg, + plUri ]). diff --git a/plDcg b/plDcg index 2cd7321..3689d78 160000 --- a/plDcg +++ b/plDcg @@ -1 +1 @@ -Subproject commit 2cd7321d6c8a84ca23d08670348914c4a8ca6bb0 +Subproject commit 3689d7838cef5ed6e8156e3c8ec39eb7b5f25b78 diff --git a/plHtml b/plHtml index e3abeed..27b7b71 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit e3abeed4041392013965598145806ee33081f76f +Subproject commit 27b7b715694daabdce26c56beb799e8d949a3ff5 diff --git a/plHttp b/plHttp new file mode 160000 index 0000000..933ba4d --- /dev/null +++ b/plHttp @@ -0,0 +1 @@ +Subproject commit 933ba4d4c906128258ef192ede6003a101b81590 diff --git a/plSvg b/plSvg new file mode 160000 index 0000000..07ba12c --- /dev/null +++ b/plSvg @@ -0,0 +1 @@ +Subproject commit 07ba12c2c373fa41e1580b8c90ee17036680fce8 diff --git a/plUri b/plUri new file mode 160000 index 0000000..cf5d6e3 --- /dev/null +++ b/plUri @@ -0,0 +1 @@ +Subproject commit cf5d6e365ed7bfad0369691554c9895441ae334d ``` 48: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 73e976b å’Œå˜åŠ¨å 090c25d  [back to content](#compare) ``` diff diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 130d471..1630ca0 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 130d471fdafe35858114ff8f9cde3acf66380d99 +Subproject commit 1630ca0c9622cbe3f9561de21d5e851baa333ca9 diff --git a/plDcg b/plDcg index 3689d78..df62444 160000 --- a/plDcg +++ b/plDcg @@ -1 +1 @@ -Subproject commit 3689d7838cef5ed6e8156e3c8ec39eb7b5f25b78 +Subproject commit df62444ffa0b58de4c7faf9b5630e58a18ee18ec diff --git a/plHtml b/plHtml index 27b7b71..429b725 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit 27b7b715694daabdce26c56beb799e8d949a3ff5 +Subproject commit 429b7256680588790310c3b6acf81da31d3fc3d2 diff --git a/plHttp b/plHttp index 933ba4d..faa8215 160000 --- a/plHttp +++ b/plHttp @@ -1 +1 @@ -Subproject commit 933ba4d4c906128258ef192ede6003a101b81590 +Subproject commit faa821576b6ab706060f6e8eab2a8a9210b8c842 diff --git a/plUri b/plUri index cf5d6e3..68dba15 160000 --- a/plUri +++ b/plUri @@ -1 +1 @@ -Subproject commit cf5d6e365ed7bfad0369691554c9895441ae334d +Subproject commit 68dba15c5cf7bb309165d2c9439c02bd22cfba95 ``` 49: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 090c25d å’Œå˜åŠ¨å daed8bf  [back to content](#compare) ``` diff diff --git a/.gitmodules b/.gitmodules index ba7e7a9..844b1bd 100644 --- a/.gitmodules +++ b/.gitmodules @@ -7,12 +7,3 @@ [submodule \"plDcg\"] path = plDcg url = https://github.com/wouterbeek/plDcg.git -[submodule \"plSvg\"] -\tpath = plSvg -\turl = https://github.com/wouterbeek/plSvg.git -[submodule \"plHttp\"] -\tpath = plHttp -\turl = https://github.com/wouterbeek/plHttp.git -[submodule \"plUri\"] -\tpath = plUri -\turl = https://github.com/wouterbeek/plUri.git diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 1630ca0..18fe981 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 1630ca0c9622cbe3f9561de21d5e851baa333ca9 +Subproject commit 18fe981c492d67be3670406e51602c23b97a6052 diff --git a/load_project.pl b/load_project.pl index e2196b7..3f0ebef 100644 --- a/load_project.pl +++ b/load_project.pl @@ -16,11 +16,12 @@ Generic code for loading a project: * Load the index of subprojects onto the file search path. @author Wouter Beek -@version 2014/08/20 +@version 2014/11/10 */ :- use_module(library(ansi_term)). % Colorized terminal messages. :- use_module(library(apply)). +:- use_module(library(pldoc)). :- dynamic(user:project/2). :- multifile(user:project/2). @@ -30,6 +31,8 @@ Generic code for loading a project: load_project(ChildProjects):- + doc_server(9999), + parent_alias(ParentFsp), % Entry point. diff --git a/plDcg b/plDcg index df62444..19020db 160000 --- a/plDcg +++ b/plDcg @@ -1 +1 @@ -Subproject commit df62444ffa0b58de4c7faf9b5630e58a18ee18ec +Subproject commit 19020db8046bf96d54938e6ba02d65dc2b6f8b50 diff --git a/plHtml b/plHtml index 429b725..2d6bb5a 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit 429b7256680588790310c3b6acf81da31d3fc3d2 +Subproject commit 2d6bb5a083f184570042eee68ddb8780caddb246 diff --git a/plHttp b/plHttp deleted file mode 160000 index faa8215..0000000 --- a/plHttp +++ /dev/null @@ -1 +0,0 @@ -Subproject commit faa821576b6ab706060f6e8eab2a8a9210b8c842 diff --git a/plSvg b/plSvg deleted file mode 160000 index 07ba12c..0000000 --- a/plSvg +++ /dev/null @@ -1 +0,0 @@ -Subproject commit 07ba12c2c373fa41e1580b8c90ee17036680fce8 diff --git a/plUri b/plUri deleted file mode 160000 index 68dba15..0000000 --- a/plUri +++ /dev/null @@ -1 +0,0 @@ -Subproject commit 68dba15c5cf7bb309165d2c9439c02bd22cfba95 ``` 50: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ daed8bf å’Œå˜åŠ¨å 528b9af  [back to content](#compare) ``` diff diff --git a/.gitmodules b/.gitmodules index 844b1bd..6c22435 100644 --- a/.gitmodules +++ b/.gitmodules @@ -7,3 +7,6 @@ [submodule \"plDcg\"] path = plDcg url = https://github.com/wouterbeek/plDcg.git +[submodule \"plUri\"] +\tpath = plUri +\turl = https://github.com/wouterbeek/plUri.git diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 18fe981..ec4c91a 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 18fe981c492d67be3670406e51602c23b97a6052 +Subproject commit ec4c91a00704c0c8d9b4ed747cb9b1648355559b diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 67d419a..30761bb 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -51,6 +51,7 @@ :- use_module(plDcg(dcg_abnf)). :- use_module(plDcg(dcg_ascii)). +:- use_module(plDcg(dcg_atom)). :- use_module(plDcg(dcg_cardinal)). :- use_module(plDcg(dcg_content)). diff --git a/gv_attrs.pl b/gv_attrs.pl index f0c1c5d..649ef9c 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -23,6 +23,7 @@ Support for GraphViz attributes. :- use_module(os(file_ext)). :- use_module(os(file_gnu)). +:- use_module(plDcg(dcg_atom)). :- use_module(plDcg(dcg_content)). :- use_module(plDcg(dcg_generics)). @@ -71,7 +72,7 @@ gv_attr(Context, N=V, N=V):- % Check validity of context. memberchk(Context, UsedBy). gv_attr(Context, N=V1, N=V2):- - gv_attr(N2, UsedBy, Types, _, Minimum, _), + gv_attr(N, UsedBy, Types, _, Minimum, _), % Check validity of context. memberchk(Context, UsedBy), % Check validity of value type. diff --git a/gv_color.pl b/gv_color.pl index 4176444..61d26df 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -26,6 +26,7 @@ :- use_module(os(file_gnu)). :- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_atom)). :- use_module(plDcg(dcg_cardinal)). :- use_module(plDcg(dcg_content)). :- use_module(plDcg_rfc(rfc2616_basic)). diff --git a/gv_dot.pl b/gv_dot.pl index 0cdc571..e67c469 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -23,10 +23,13 @@ In GraphViz vertices are called 'nodes'. :- use_module(library(ordsets)). :- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_arrow)). :- use_module(plDcg(dcg_ascii)). +:- use_module(plDcg(dcg_bracket)). :- use_module(plDcg(dcg_content)). :- use_module(plDcg(dcg_generics)). :- use_module(plDcg(dcg_meta)). +:- use_module(plDcg(dcg_quote)). :- use_module(plGraphViz(gv_attrs)). :- use_module(plGraphViz(gv_html)). @@ -47,10 +50,10 @@ gv_attribute(Name=Val) -- %! +GraphAttributes:list(nvpair), %! +Attributes:list(nvpair) %! )// . -% ~~~{.abnf} +% ```abnf % attr_list = \"[\" [a_list] \"]\" [attr_list] % a_list = ID \"=\" ID [\",\"] [a_list] -% ~~~ +% ``` % Attributes occur between square brackets. gv_attribute_list(Context, _, Attrs1) -- @@ -59,9 +62,9 @@ gv_attribute_list(Context, _, Attrs1) -- %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . -% ~~~ +% ``` % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) -% ~~~ +% ``` gv_compass_pt('_') -- \"_\". gv_compass_pt(c) -- \"c\". @@ -133,9 +136,9 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- % @arg GraphAttributes A list of name-value pairs. % @arg CategoryAttributes A list of name-value pairs. % -% ~~~ +% ``` % attr_stmt = (graph / node / edge) attr_list -% ~~~ +% ``` gv_generic_attributes_statement(_, _, _, []) -- [], !. gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- @@ -156,19 +159,19 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- % they are ignored in the input file. % Only in combinattion with directionality `directed`. % -% ~~~{.abnf} +% ```abnf % graph = [\"strict\"] (\"graph\" / \"digraph\") [ID] \"{\" stmt_list \"}\" -% ~~~ +% ``` % % `GraphTerm` is a compound term of the following form: -% ~~~{.pl} +% ```prolog % graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes) -% ~~~ +% ``` % % `RankedVertexTerms` is a list of compound terms of the following form: -% ~~~{.pl} +% ```prolog % rank(RankNode,ContentNodes) -% ~~~ +% ``` % % @tbd Add support for subgraphs (arbitrary nesting). % @tbd Add support for escape strings: @@ -307,7 +310,7 @@ gv_graph_type(true) -- \"digraph\". % HTML strings (variant 4). gv_id(Content) -- {compound(Content)}, !, - gv_html_like_label, Content). + gv_html_like_label(Content). % Alpha-numeric strings (variant 1). gv_id(Atom) -- {atom_codes(Atom, [H|T])}, @@ -331,14 +334,16 @@ gv_id(Atom) -- % Double-quoted strings (variant 3). % The quotes are not in the given atom. They are written anyway. gv_id(Atom) -- - quoted(double_quote, dcg_atom_codes(gv_quoted_string, Atom)), !. + quoted(dcg_atom_codes(gv_quoted_string, Atom)), !. -gv_id_first(X) -- ascii_letter(X). +gv_id_first(X) -- letter(X). gv_id_first(X) -- underscore(X). gv_id_rest([]) -- []. gv_id_rest([H|T]) -- - (ascii_alpha_numeric(H) ; underscore(H)), + ( alpha_numeric(H) + ; underscore(H) + ), gv_id_rest(T). @@ -463,7 +468,7 @@ gv_ranked_node_collection( [Rank_V_Term|Content_V_Terms], [] ), - + % We want to indent the closing curly brace. indent(I) )), diff --git a/gv_file.pl b/gv_file.pl index 789bd56..704e2d4 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -9,9 +9,6 @@ gif_to_gv_file/3, % +GraphInterchangeFormat:compound % ?ToFile:atom % +Options:list(nvpair) - gif_to_svg_dom/3, % +GraphInterchangeFormat:compound - % -SvgDom:list(compound) - % +Options:list(nvpair) open_dot/1 % +File:file ] ). @@ -35,7 +32,6 @@ and GraphViz output files or SVG DOM structures. :- use_module(generics(db_ext)). :- use_module(os(file_ext)). :- use_module(os(run_ext)). -:- use_module(svg(svg_file)). :- use_module(plGraphViz(gv_dot)). @@ -175,20 +171,6 @@ gif_to_gv_file(Gif, ToFile, Options):- codes_to_gv_file(Codes, ToFile, Options). -%! gif_to_svg_dom( -%! +GraphInterchangeFormat:compound, -%! -SvgDom:list(compound), -%! +Options:list(nvpair) -%! ) is det. - -gif_to_svg_dom(Gif, SvgDom, Options1):- - % Make sure the file type of the output file is SvgDom. - merge_options([to_file_type=svg], Options1, Options2), - gif_to_gv_file(Gif, ToFile, Options2), - file_to_svg(ToFile, SvgDom), - delete_file(ToFile). - - %! open_dot(+File:atom) is det. % Opens the given DOT file. % diff --git a/gv_html.pl b/gv_html.pl index a308ac7..08306f0 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -9,32 +9,32 @@ Grammar taken from the GraphViz Web site: -~~~{.txt} -label : text -\t| table -text : textitem -\t| text textitem -textitem : string -\t|  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -\t|  text  -table : [  ]  rows  [  ] -rows : row -\t| rows row -\t| rows  row -row :  cells  -cells : cell -\t| cells cell -\t| cells  cell -cell :  label  -\t|    -~~~ +``` +label : text + | table +text : textitem + | text textitem +textitem : string + |  + |  text  + |  text  + |  text  + |  text  + |  text  + |  text  + |  text  + |  text  +table : [  ]  rows  [  ] +rows : row + | rows row + | rows  row +row:  cells  +cells : cell + | cells cell + | cells  cell +cell:  label  + |    +``` @author Wouter Beek @see http://www.graphviz.org/content/node-shapes#html @@ -42,6 +42,7 @@ cell :  label  */ :- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_bracket)). :- use_module(plDcg(dcg_content)). :- use_module(plHtml(html_dcg)). @@ -56,7 +57,7 @@ gv_html_like_label(Content) -- %! cell(?Contents:compound)// . % Supported attributes for TD: -% ~~~{.txt} +% ``` % ALIGN=\"CENTER|LEFT|RIGHT|TEXT\" % BALIGN=\"CENTER|LEFT|RIGHT\" % BGCOLOR=\"color\" @@ -79,13 +80,13 @@ gv_html_like_label(Content) -- % TOOLTIP=\"value\" % VALIGN=\"MIDDLE|BOTTOM|TOP\" % WIDTH=\"value\" -% ~~~ +% ``` % % Supported attributes for IMG: -% ~~~{.txt} +% ``` % SCALE=\"FALSE|TRUE|WIDTH|HEIGHT|BOTH\" % SRC=\"value\" -% ~~~ +% ``` cell(td(Contents)) -- html_element(td, [], label(Contents)). @@ -125,7 +126,7 @@ row(tr(Contents)) -- rows([H|T]) -- row(H), - rows. + rows(T). rows([H,hr|T]) -- row(H), html_element(hr), @@ -136,7 +137,7 @@ rows([H]) -- %! table(?Contents:compound)// . % Supported attributes for TABLE: -% ~~~{.txt} +% ``` % ALIGN=\"CENTER|LEFT|RIGHT\" % BGCOLOR=\"color\" % BORDER=\"value\" @@ -159,14 +160,14 @@ rows([H]) -- % TOOLTIP=\"value\" % VALIGN=\"MIDDLE|BOTTOM|TOP\" % WIDTH=\"value\" -% ~~~ +% ``` % % Supported attributes for FONT: -% ~~~{.txt} +% ``` % COLOR=\"color\" % FACE=\"fontname\" % POINT-SIZE=\"value\" -% ~~~ +% ``` table(table(Attrs,Contents)) -- html_element(table, Attrs, rows(Contents)). @@ -182,9 +183,9 @@ text(Contents) -- %! textitem(?Content)// . % Supported attributes for BR: -% ~~~{.txt} +% ``` % ALIGN=\"CENTER|LEFT|RIGHT\" -% ~~~ +% ``` textitem(string(String)) -- html_string(String). diff --git a/gv_numeral.pl b/gv_numeral.pl index 7870eb1..c115372 100644 --- a/gv_numeral.pl +++ b/gv_numeral.pl @@ -14,59 +14,67 @@ :- use_module(math(math_ext)). :- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_ascii)). :- use_module(plDcg(dcg_cardinal)). %! gv_numeral(?Value:number)// . -% ~~~{.bnf} +% +% # Syntax +% +% ```bnf % ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? ) -% ~~~ +% ``` +% +% ## Generation +% +% In the generative case, three notations are allowed (also see below): +% 1. (non-zero integer-part) +% 2. (decimal-separator) (non-zero fractional) +% 3. (non-zero integer-part) (decimal-separator) (non-zero fractional) +% +% The following notations are explicitly excluded due to verbosity: +% - (non-zero integer-part) (decimal-separator) +% - (non-zero integer-part) (decimal-separator) (zero fractional) +% - (zero integer-part) (decimal-separator) (non-zero fractional) +% +% The following notations are also excluded, but since they violate +% well-formedness: +% - (non-zero integer-part) (non-zero fractional) +% - (decimal-separator) gv_numeral(N) -- - {nonvar(N)}, - {number_sign_parts(N, Sign, Abs)}, - ({Sign =:= -1} - `-` ; ``), - gv_numeral_abs(Abs). + {var(N)}, !, + sign(Sign), + ( \".\", + '+'(decimal_digit, Fractional, [convert1(weights_decimal)]), + {IntegerPart = 0} + ; '+'(decimal_digit, IntegerPart, [convert1(weights_decimal)]), + ( \".\", + '*'(decimal_digit, Fractional, [convert1(weights_decimal)]) + ; {Fractional = 0} + ) + ), + { number_integer_parts(UnsignedN, IntegerPart, Fractional), + N is copysign(UnsignedN, Sign) + }. gv_numeral(N) -- - {var(N)}, - 'sign?'(Sign), - gv_numeral_abs(Abs), - {number_sign_parts(N, Sign, Abs)}. - - -gv_numeral_abs(N) -- - {nonvar(N)}, - {number_integer_parts(N, N1, N2)}, - ( - {N2 =:= 0} - - - integer(N1) - ; - {N1 =:= 0} - - - `.`, - integer(N2) - ; - integer(N1), - '?'((`.`, 'integer?'(N2)), []) + {number_sign_parts(N, Sign, UnsignedN)}, + sign(Sign), + {number_integer_parts(UnsignedN, IntegerPart, Fractional)}, + ( % [1] The fractional is zero, so only write the integer part + % and do not write the decimal separator. + {Fractional =:= 0} + - integer(IntegerPart) + ; % [2] The integer part is zero, so only write the fractional part, + % preceded by the decimal separator. + {IntegerPart =:= 0} + - \".\", + integer(Fractional) + ; % [3] Both the integer part and the fractional are non-zero, + % so write both of them, with the decimal separator in-between. + integer(IntegerPart), + \".\", + integer(Fractional) ). -gv_numeral_abs(N) -- - {var(N)}, - ( - `.`, - integer(N2) - - - {N1 = 0} - ; - integer(N1), - ( - `.` - - - 'integer?'(N2) - ; - {N2 = 0} - ) - ), - {number_integer_parts(N, N1, N2)}. - diff --git a/load.pl b/load.pl index 67dfe22..5cec32c 100644 --- a/load.pl +++ b/load.pl @@ -9,8 +9,6 @@ plc-'Prolog-Library-Collection', plDcg, plHtml, - plHttp, - plSvg, plUri ]). diff --git a/plDcg b/plDcg index 19020db..96e2615 160000 --- a/plDcg +++ b/plDcg @@ -1 +1 @@ -Subproject commit 19020db8046bf96d54938e6ba02d65dc2b6f8b50 +Subproject commit 96e261537773270a43d1ff4346273820282f21fb diff --git a/plHtml b/plHtml index 2d6bb5a..a7b736f 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit 2d6bb5a083f184570042eee68ddb8780caddb246 +Subproject commit a7b736fdf7c435f825193bbc54500a302b0bc4b1 diff --git a/plUri b/plUri new file mode 160000 index 0000000..59f582c --- /dev/null +++ b/plUri @@ -0,0 +1 @@ +Subproject commit 59f582c68cebc221f964ccb9805a869d05cb7856 ``` 51: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 528b9af å’Œå˜åŠ¨å e594ae6  [back to content](#compare) ``` diff diff --git a/gv_color.pl b/gv_color.pl index 61d26df..da34c1a 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -13,7 +13,7 @@ @author Wouter Beek @tbd Color value `transparent` is only available in the output formats ps, svg, fig, vmrl, and the bitmap formats. -@version 2014/06, 2014/10 +@version 2014/06, 2014/10-2014/11 */ :- use_module(library(apply)). @@ -51,10 +51,10 @@ % 3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))` color(rgb(Red,Green,Blue)) -- !, - `#`, + \"#\", '#'(3, hex_color, [Red,Green,Blue], []). color(rgbs(Red,Green,Blue,Alpha)) -- !, - `#`, + \"#\", '#'(4, hex_color, [Red,Green,Blue,Alpha], []). color(hsv(Hue,Saturation,Value)) -- !, '#'(3, hsv_color, [Hue,Saturation,Value], []). @@ -82,7 +82,7 @@ wc(Color-Float) -- '?'(wc_weight(Float), []). wc_weight(Float) -- - `;`, + \";\", float(Float). ``` 52: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ e594ae6 å’Œå˜åŠ¨å bbefbf7  [back to content](#compare) ``` diff diff --git a/gv_color.pl b/gv_color.pl index da34c1a..74c9060 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -25,11 +25,11 @@ :- use_module(os(file_ext)). :- use_module(os(file_gnu)). +:- use_module(plDcg(abnf_core_rules)). :- use_module(plDcg(dcg_abnf)). :- use_module(plDcg(dcg_atom)). :- use_module(plDcg(dcg_cardinal)). :- use_module(plDcg(dcg_content)). -:- use_module(plDcg_rfc(rfc2616_basic)). :- use_module(plHtml(html)). :- use_module(plHtml(html_table)). ``` 53: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ bbefbf7 å’Œå˜åŠ¨å 0cc5421  [back to content](#compare) ``` diff diff --git a/.gitignore b/.gitignore index 7193a38..b25c15b 100644 --- a/.gitignore +++ b/.gitignore @@ -1,4 +1 @@ *~ -*# -*.db -data/* diff --git a/.gitmodules b/.gitmodules index 6c22435..a63cbff 100644 --- a/.gitmodules +++ b/.gitmodules @@ -4,9 +4,3 @@ [submodule \"plHtml\"] path = plHtml url = https://github.com/wouterbeek/plHtml.git -[submodule \"plDcg\"] -\tpath = plDcg -\turl = https://github.com/wouterbeek/plDcg.git -[submodule \"plUri\"] -\tpath = plUri -\turl = https://github.com/wouterbeek/plUri.git diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index ec4c91a..d7d21ad 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit ec4c91a00704c0c8d9b4ed747cb9b1648355559b +Subproject commit d7d21ad4d6d7cec98d8b0122f5303e691998f512 diff --git a/README.md b/README.md new file mode 100644 index 0000000..3c9e9cf --- /dev/null +++ b/README.md @@ -0,0 +1,8 @@ +plGraphViz +========== + +Export graphs represented as Prolog terms to + [GraphViz](http://www.graphviz.org/). + +Author: [Wouter Beek](http://www.wouterbeek.com) + diff --git a/debug.pl b/debug.pl index 099cb84..d7339b9 100644 --- a/debug.pl +++ b/debug.pl @@ -1,7 +1,9 @@ -% Loads debug tools for the plGraphViz library. +% Debug file for library plGraphViz. + +:- style_check(+charset). +%:- style_check(+var_branches). :- [load]. :- use_module(debug_project). :- debug_all_files. - diff --git a/debug_project.pl b/debug_project.pl index ab61534..17195c1 100644 --- a/debug_project.pl +++ b/debug_project.pl @@ -11,7 +11,7 @@ Generic code for debugging a project: * Load all subdirectories and Prolog files contained in those directories. @author Wouter Beek -@version 2014/10/31 +@version 2014/11/19 */ :- use_module(library(ansi_term)). @@ -54,7 +54,6 @@ do_not_load0(debug_project). do_not_load0(index). do_not_load0(load). do_not_load0(load_project). -do_not_load0(rfc2616_basic). do_not_load0(run). diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 30761bb..3c7863d 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -46,12 +46,10 @@ /**  GraphViz attribute types @author Wouter Beek -@version 2014/06, 2014/11 +@version 2014/06 */ :- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_ascii)). -:- use_module(plDcg(dcg_atom)). :- use_module(plDcg(dcg_cardinal)). :- use_module(plDcg(dcg_content)). @@ -99,7 +97,7 @@ gv_attr_type(viewPort). % An *addDouble* is represented by a Prolog float. addDouble(Float) -- - '?'(plus_sign, []), + '?'(`+`, []), double(Float). @@ -108,7 +106,7 @@ addDouble(Float) -- % `point(X:float,Y:float,InputOnly:boolean)`. addPoint(Point) -- - '?'(plus_sign, []), + '?'(`+`, []), point(Point). @@ -149,10 +147,10 @@ backwards_compatible(invempty). backwards_compatible(open). -bool(false) -- \"false\". -bool(false) -- \"no\". -bool(true) -- \"true\". -bool(true) -- \"yes\". +bool(false) -- `false`. +bool(false) -- `no`. +bool(true) -- `true`. +bool(true) -- `yes`. %! clusterMode(+ClusterMode:atom)// . @@ -189,7 +187,7 @@ doubleList([H|T]) -- '*'(doubleList1, T, []). doubleList1(Float) -- - \":\", + `:`, double(Float). @@ -244,16 +242,16 @@ pagedir('TR'). %! point(+Point:compound)// . % A *point* is represented by a compound of the following form: -% `point(X:float,Y:float,Changeable:boolean)`. +% `point(X:float,Y:float,InputOnly:boolean)`. -point(point(X,Y,Changeable)) -- +point(point(X,Y,InputOnly)) -- float(X), - \",\", + `,`, float(Y), - input_changeable(Changeable). + input_only(InputOnly). -input_changeable(false) -- \"\". -input_changeable(true) -- \"!\". +input_only(false) -- []. +input_only(true) -- `!`. pointList(Points) -- @@ -294,9 +292,9 @@ rankdir('TB'). rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -- - float(LowerLeftX), \",\", - float(LowerLeftY), \",\", - float(UpperRightX), \",\", + float(LowerLeftX), `,`, + float(LowerLeftY), `,`, + float(UpperRightX), `,`, float(UpperRightY). @@ -416,3 +414,4 @@ style(node, wedged). % @tbd viewPort + diff --git a/gv_attrs.pl b/gv_attrs.pl index 649ef9c..faf496c 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -2,17 +2,15 @@ gv_attrs, [ gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph]) - % +Attribute1:nvpair - % -Attribute2:nvpair + % +Attr1:nvpair + % +Attr2:nvpair ] ). -/**  GraphViz: Attributes - -Support for GraphViz attributes. +/**  GraphViz attributes v2 @author Wouter Beek -@version 2014/06, 2014/11 +@version 2014/06 */ :- use_module(library(apply)). @@ -21,11 +19,9 @@ Support for GraphViz attributes. :- use_module(generics(db_ext)). :- use_module(os(file_ext)). -:- use_module(os(file_gnu)). -:- use_module(plDcg(dcg_atom)). :- use_module(plDcg(dcg_content)). -:- use_module(plDcg(dcg_generics)). +:- use_module(plDcg(dcg_generic)). :- use_module(plHtml(html)). :- use_module(plHtml(html_table)). @@ -58,40 +54,24 @@ Support for GraphViz attributes. -%! gv_attr( -%! +Context:oneof([cluster,edge,graph,node,subgraph]), -%! +Attribute1:nvpair, -%! +Attribute2:nvpair -%! ) is det. -% Uses the default value in case Value is uninstantiated. -% Otherwise, performs a typecheck and converts the given value. - gv_attr(Context, N=V, N=V):- var(V), !, gv_attr(N, UsedBy, _, V, _, _), - % Check validity of context. memberchk(Context, UsedBy). gv_attr(Context, N=V1, N=V2):- gv_attr(N, UsedBy, Types, _, Minimum, _), - % Check validity of context. memberchk(Context, UsedBy), - % Check validity of value type. member(Type, Types), - ( Type == style - - Dcg =.. [Type,Context,V1] - ; Dcg =.. [Type,V1] + ( + Type == style + - + Dcg =.. [Type,Context,V1] + ; + Dcg =.. [Type,V1] ), once(dcg_phrase(Dcg, V2)), - % Check validity of Value w.r.t. minimum value -- if available. check_minimum(V1, Minimum). - - -% HELPERS - -%! check_minimum(+Value:atom, +Minimum:number) is semidet. -% Trivially succeeds if no minimum value is available for a given attribute. - check_minimum(_, ''):- !. check_minimum(V, Min1):- atom_number(Min1, Min2), diff --git a/gv_color.pl b/gv_color.pl index 74c9060..cb0cf8c 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -13,27 +13,27 @@ @author Wouter Beek @tbd Color value `transparent` is only available in the output formats ps, svg, fig, vmrl, and the bitmap formats. -@version 2014/06, 2014/10-2014/11 +@version 2014/06 */ :- use_module(library(apply)). -:- use_module(library(lists), except([delete/3])). +:- use_module(library(lists)). :- use_module(library(persistency)). :- use_module(library(xpath)). :- use_module(generics(db_ext)). :- use_module(os(file_ext)). -:- use_module(os(file_gnu)). -:- use_module(plDcg(abnf_core_rules)). :- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_atom)). :- use_module(plDcg(dcg_cardinal)). :- use_module(plDcg(dcg_content)). +:- use_module(plDcg_rfc(rfc2616_basic)). :- use_module(plHtml(html)). :- use_module(plHtml(html_table)). +:- use_module(plSparql_parse(sparql_char)). + :- db_add_novel(user:prolog_file_type(log, logging)). %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet. @@ -51,10 +51,10 @@ % 3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))` color(rgb(Red,Green,Blue)) -- !, - \"#\", + `#`, '#'(3, hex_color, [Red,Green,Blue], []). color(rgbs(Red,Green,Blue,Alpha)) -- !, - \"#\", + `#`, '#'(4, hex_color, [Red,Green,Blue,Alpha], []). color(hsv(Hue,Saturation,Value)) -- !, '#'(3, hsv_color, [Hue,Saturation,Value], []). @@ -82,7 +82,7 @@ wc(Color-Float) -- '?'(wc_weight(Float), []). wc_weight(Float) -- - \";\", + `;`, float(Float). @@ -142,13 +142,3 @@ gv_color_update(_):- gv_color_url('http://www.graphviz.org/doc/info/colors.html'). - -%! safe_db_attach(+File:atom) is det. - -safe_db_attach(File):- - exists_file(File), !, - db_attach(File, []). -safe_db_attach(File):- - touch_file(File), - safe_db_attach(File). - diff --git a/gv_dot.pl b/gv_dot.pl index e67c469..accd5bd 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -1,7 +1,7 @@ :- module( gv_dot, [ - gv_graph//1 % +Gif:compound + gv_graph//1 % +GraphTerm:compound ] ). @@ -19,17 +19,14 @@ In GraphViz vertices are called 'nodes'. */ :- use_module(library(apply)). -:- use_module(library(lists), except([delete/3])). +:- use_module(library(lists)). :- use_module(library(ordsets)). :- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_arrow)). :- use_module(plDcg(dcg_ascii)). -:- use_module(plDcg(dcg_bracket)). :- use_module(plDcg(dcg_content)). -:- use_module(plDcg(dcg_generics)). +:- use_module(plDcg(dcg_generic)). :- use_module(plDcg(dcg_meta)). -:- use_module(plDcg(dcg_quote)). :- use_module(plGraphViz(gv_attrs)). :- use_module(plGraphViz(gv_html)). @@ -42,7 +39,7 @@ In GraphViz vertices are called 'nodes'. % We assume that the attribute has already been validated. gv_attribute(Name=Val) -- - gv_id(Name), \"=\", gv_id(Val), \";\". + gv_id(Name), `=`, gv_id(Val), `;`. %! gv_attribute_list( @@ -50,10 +47,10 @@ gv_attribute(Name=Val) -- %! +GraphAttributes:list(nvpair), %! +Attributes:list(nvpair) %! )// . -% ```abnf +% ~~~{.abnf} % attr_list = \"[\" [a_list] \"]\" [attr_list] % a_list = ID \"=\" ID [\",\"] [a_list] -% ``` +% ~~~ % Attributes occur between square brackets. gv_attribute_list(Context, _, Attrs1) -- @@ -62,20 +59,20 @@ gv_attribute_list(Context, _, Attrs1) -- %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . -% ``` +% ~~~ % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) -% ``` +% ~~~ -gv_compass_pt('_') -- \"_\". -gv_compass_pt(c) -- \"c\". -gv_compass_pt(e) -- \"e\". -gv_compass_pt(n) -- \"n\". -gv_compass_pt(ne) -- \"ne\". -gv_compass_pt(nw) -- \"nw\". -gv_compass_pt(s) -- \"s\". -gv_compass_pt(se) -- \"se\". -gv_compass_pt(sw) -- \"sw\". -gv_compass_pt(w) -- \"w\". +gv_compass_pt('_') -- `_`. +gv_compass_pt(c) -- `c`. +gv_compass_pt(e) -- `e`. +gv_compass_pt(n) -- `n`. +gv_compass_pt(ne) -- `ne`. +gv_compass_pt(nw) -- `nw`. +gv_compass_pt(s) -- `s`. +gv_compass_pt(se) -- `se`. +gv_compass_pt(sw) -- `sw`. +gv_compass_pt(w) -- `w`. %! gv_edge_operator(+Directed:boolean)// . @@ -86,7 +83,7 @@ gv_compass_pt(w) -- \"w\". % @arg Directed Whether an edge is directed (operator `-`) or % undirected (operator `--`). -gv_edge_operator(false) -- !, \"--\". +gv_edge_operator(false) -- !, `--`. gv_edge_operator(true) -- arrow(right, 2). @@ -110,11 +107,11 @@ gv_edge_operator(true) -- arrow(right, 2). gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- indent(I), - gv_node_id(FromId), \" \", + gv_node_id(FromId), ` `, - gv_edge_operator(Directed), \" \", + gv_edge_operator(Directed), ` `, - gv_node_id(ToId), \" \", + gv_node_id(ToId), ` `, % We want `colorscheme/1` from the edges and % `directionality/1` from the graph. @@ -136,18 +133,18 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- % @arg GraphAttributes A list of name-value pairs. % @arg CategoryAttributes A list of name-value pairs. % -% ``` +% ~~~ % attr_stmt = (graph / node / edge) attr_list -% ``` +% ~~~ gv_generic_attributes_statement(_, _, _, []) -- [], !. gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- indent(I), - gv_kind(Kind), \" \", + gv_kind(Kind), ` `, gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed. -%! gv_graph(+Gif:compound)// +%! gv_graph(+GraphTerm:compound)// % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: % * `directed(+boolean)` @@ -159,19 +156,19 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- % they are ignored in the input file. % Only in combinattion with directionality `directed`. % -% ```abnf +% ~~~{.abnf} % graph = [\"strict\"] (\"graph\" / \"digraph\") [ID] \"{\" stmt_list \"}\" -% ``` +% ~~~ % % `GraphTerm` is a compound term of the following form: -% ```prolog +% ~~~{.pl} % graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes) -% ``` +% ~~~ % % `RankedVertexTerms` is a list of compound terms of the following form: -% ```prolog +% ~~~{.pl} % rank(RankNode,ContentNodes) -% ``` +% ~~~ % % @tbd Add support for subgraphs (arbitrary nesting). % @tbd Add support for escape strings: @@ -179,10 +176,10 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- % @tbd Assert attributes that are generic with respect to a subgraph. % @tbd Not all vertex and edge properties can be shared it seems (e.g., label). -gv_graph(graph(VTerms,ETerms,GAttrs)) -- - gv_graph(graph(VTerms,[],ETerms,GAttrs)). +gv_graph(graph(VTerms, ETerms, GAttrs)) -- + gv_graph(graph(VTerms, [], ETerms, GAttrs)). -gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -- +gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- { shared_attributes(VTerms, SharedVAttrs, NewVTerms), shared_attributes(ETerms, SharedEAttrs, NewETerms), @@ -197,8 +194,8 @@ gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -- % States that this file represents a graph according to the GraphViz format. indent(I), gv_strict(Strict), - gv_graph_type(Directed), \" \", - gv_id(GName), \" \", + gv_graph_type(Directed), ` `, + gv_id(GName), ` `, % The body of the DOT file appears between curly braces. bracketed( @@ -243,18 +240,18 @@ gv_graph0( (NewVTerms == [], RankedVTerms == []) } - - \"\" + `` ; line_feed ), % The list of GraphViz nodes. '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []), - ({NewVTerms == []} - \"\" ; line_feed), + ({NewVTerms == []} - `` ; line_feed), % The ranked GraphViz nodes (displayed at the same height). '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []), - ({RankedVTerms == []} - \"\" ; line_feed), + ({RankedVTerms == []} - `` ; line_feed), { findall( @@ -284,8 +281,8 @@ gv_graph0( %! gv_graph_type(+Directed:boolean)// . % The type of graph that is represented. -gv_graph_type(false) -- \"graph\". -gv_graph_type(true) -- \"digraph\". +gv_graph_type(false) -- `graph`. +gv_graph_type(true) -- `digraph`. %! gv_id(?Atom:atom)// is det. @@ -308,9 +305,8 @@ gv_graph_type(true) -- \"digraph\". % This requires an XML grammar! % HTML strings (variant 4). -gv_id(Content) -- - {compound(Content)}, !, - gv_html_like_label(Content). +gv_id(Atom) -- + dcg_atom_codes(gv_html_like_label, Atom), !. % Alpha-numeric strings (variant 1). gv_id(Atom) -- {atom_codes(Atom, [H|T])}, @@ -334,16 +330,14 @@ gv_id(Atom) -- % Double-quoted strings (variant 3). % The quotes are not in the given atom. They are written anyway. gv_id(Atom) -- - quoted(dcg_atom_codes(gv_quoted_string, Atom)), !. + quoted(double_quote, dcg_atom_codes(gv_quoted_string, Atom)), !. -gv_id_first(X) -- letter(X). +gv_id_first(X) -- ascii_letter(X). gv_id_first(X) -- underscore(X). gv_id_rest([]) -- []. gv_id_rest([H|T]) -- - ( alpha_numeric(H) - ; underscore(H) - ), + (ascii_alpha_numeric(H) ; underscore(H)), gv_id_rest(T). @@ -359,19 +353,19 @@ gv_keyword(Codes):- % GraphViz has reserved keywords that cannot be used as identifiers. % GraphViz keywords are case-insensitive. -gv_keyword -- \"digraph\". -gv_keyword -- \"edge\". -gv_keyword -- \"graph\". -gv_keyword -- \"node\". -gv_keyword -- \"strict\". -gv_keyword -- \"subgraph\". +gv_keyword -- `digraph`. +gv_keyword -- `edge`. +gv_keyword -- `graph`. +gv_keyword -- `node`. +gv_keyword -- `strict`. +gv_keyword -- `subgraph`. %! gv_kind(+Kind:oneof([edge,graph,node]))// . -gv_kind(edge) -- \"edge\". -gv_kind(graph) -- \"graph\". -gv_kind(node) -- \"node\". +gv_kind(edge) -- `edge`. +gv_kind(graph) -- `graph`. +gv_kind(node) -- `node`. %! gv_node_id(+NodeId:atom)// . @@ -398,7 +392,7 @@ gv_node_id(Id) -- gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -- indent(I), - gv_node_id(Id), \" \", + gv_node_id(Id), ` `, gv_attribute_list(node, GraphAttrs, VAttrs), line_feed. @@ -409,23 +403,23 @@ gv_port -- gv_port_angle, '?'(gv_port_location, []). gv_port -- - \":\", + `:`, gv_compass_pt(_). gv_port_angle -- - \"@\", + `@`, gv_id(_). gv_port_location -- - \":\", + `:`, gv_id(_). gv_port_location -- - \":\", + `:`, bracketed( round, ( gv_id(_), - \",\", + `,`, gv_id(_) ) ). @@ -442,7 +436,7 @@ gv_quoted_string([92,34|T]) -- !, gv_quoted_string(T). % Add the backslash escape character. gv_quoted_string([34|T]) -- !, - \"\\\\\\\"\", + `\\\\\\\"`, gv_quoted_string(T). % All other characters are allowed without escaping. gv_quoted_string([H|T]) -- @@ -461,14 +455,14 @@ gv_ranked_node_collection( % The rank attribute. {NewI is I + 1}, - indent(NewI), gv_attribute(rank=same), \";\", line_feed, + indent(NewI), gv_attribute(rank=same), `;`, line_feed, '*'( gv_node_statement(NewI, GraphAttrs), [Rank_V_Term|Content_V_Terms], [] ), - + % We want to indent the closing curly brace. indent(I) )), @@ -481,7 +475,7 @@ gv_ranked_node_collection( % This only applies to directed graphs. gv_strict(false) -- []. -gv_strict(true) -- \"strict \". +gv_strict(true) -- `strict `. diff --git a/gv_file.pl b/gv_file.pl index 704e2d4..bba87f9 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -9,6 +9,9 @@ gif_to_gv_file/3, % +GraphInterchangeFormat:compound % ?ToFile:atom % +Options:list(nvpair) + gif_to_svg_dom/3, % +GraphInterchangeFormat:compound + % -SvgDom:list(compound) + % +Options:list(nvpair) open_dot/1 % +File:file ] ). @@ -27,11 +30,13 @@ and GraphViz output files or SVG DOM structures. :- use_module(library(option)). :- use_module(library(process)). +:- use_module(library(predicate_options)). % Declarations. -:- use_module(generics(code_ext)). +:- use_module(generics(codes_ext)). :- use_module(generics(db_ext)). :- use_module(os(file_ext)). :- use_module(os(run_ext)). +:- use_module(svg(svg_file)). :- use_module(plGraphViz(gv_dot)). @@ -131,12 +136,15 @@ file_to_gv(FromFile, ToFile, Options):- prolog_file_type(ToExtension, graphviz_output), !, % The output file is either given or created. - ( var(ToFile) - - user:prolog_file_type(ToExtension, ToFileType), - file_alternative(FromFile, _, _, ToExtension, ToFile) - ; is_absolute_file_name(ToFile), - % The given output file must match a certain file extension. - file_name_extension(_, ToExtension, ToFile) + ( + var(ToFile) + - + user:prolog_file_type(ToExtension, ToFileType), + file_alternative(FromFile, _, _, ToExtension, ToFile) + ; + is_absolute_file_name(ToFile), + % The given output file must match a certain file extension. + file_name_extension(_, ToExtension, ToFile) ), % Now that we have the output file we can prevent the % file type / file extension translation predicates from bakctracking. @@ -146,8 +154,6 @@ file_to_gv(FromFile, ToFile, Options):- format(atom(OutputType), '-T~w', [ToExtension]), process_create( path(Method), - % @tbd Windows hack: - %%%%'C:\\\\Program Files (x86)\\\\Graphviz2.38\\\\bin\\\\dot.exe', [OutputType,FromFile,'-o',ToFile], [process(PID)] ), @@ -171,6 +177,20 @@ gif_to_gv_file(Gif, ToFile, Options):- codes_to_gv_file(Codes, ToFile, Options). +%! gif_to_svg_dom( +%! +GraphInterchangeFormat:compound, +%! -SvgDom:list(compound), +%! +Options:list(nvpair) +%! ) is det. + +gif_to_svg_dom(Gif, SvgDom, Options1):- + % Make sure the file type of the output file is SvgDom. + merge_options([to_file_type=svg], Options1, Options2), + gif_to_gv_file(Gif, ToFile, Options2), + file_to_svg(ToFile, SvgDom), + delete_file(ToFile). + + %! open_dot(+File:atom) is det. % Opens the given DOT file. % diff --git a/gv_html.pl b/gv_html.pl index 08306f0..3f0b08b 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -1,224 +1,60 @@ :- module( gv_html, [ - gv_html_like_label//1 % +Content:compound + gv_html_like_label//1 % +Codes:list(code) ] ). -/**  GraphViz: HTML-like labels - -Grammar taken from the GraphViz Web site: - -``` -label : text - | table -text : textitem - | text textitem -textitem : string - |  - |  text  - |  text  - |  text  - |  text  - |  text  - |  text  - |  text  - |  text  -table : [  ]  rows  [  ] -rows : row - | rows row - | rows  row -row:  cells  -cells : cell - | cells cell - | cells  cell -cell:  label  - |    -``` +/**  GraphViz HTML @author Wouter Beek -@see http://www.graphviz.org/content/node-shapes#html -@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11 +@version 2013/07, 2013/09, 2014/03-2014/06 */ -:- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_bracket)). :- use_module(plDcg(dcg_content)). :- use_module(plHtml(html_dcg)). -%! gv_html_like_label(?Content:compound)// . - -gv_html_like_label(Content) -- - bracketed(angular, label(Content)). - - -%! cell(?Contents:compound)// . -% Supported attributes for TD: -% ``` -% ALIGN=\"CENTER|LEFT|RIGHT|TEXT\" -% BALIGN=\"CENTER|LEFT|RIGHT\" -% BGCOLOR=\"color\" -% BORDER=\"value\" -% CELLPADDING=\"value\" -% CELLSPACING=\"value\" -% COLOR=\"color\" -% COLSPAN=\"value\" -% FIXEDSIZE=\"FALSE|TRUE\" -% GRADIENTANGLE=\"value\" -% HEIGHT=\"value\" -% HREF=\"value\" -% ID=\"value\" -% PORT=\"portName\" -% ROWSPAN=\"value\" -% SIDES=\"value\" -% STYLE=\"value\" -% TARGET=\"value\" -% TITLE=\"value\" -% TOOLTIP=\"value\" -% VALIGN=\"MIDDLE|BOTTOM|TOP\" -% WIDTH=\"value\" -% ``` +%! gv_html_label(+Codes:list(code))// . % -% Supported attributes for IMG: -% ``` -% SCALE=\"FALSE|TRUE|WIDTH|HEIGHT|BOTH\" -% SRC=\"value\" -% ``` - -cell(td(Contents)) -- - html_element(td, [], label(Contents)). -cell(td(img)) -- - html_element(td, [], html_element(img)). - - -%! cells(?Contents:list(compound))// . - -cells([H|T]) -- - cell(H), - cells(T). -cells([H,vr|T]) -- - cell(H), - html_element(vr), - cells(T). -cells([H]) -- - cell(H). - - -%! label(?Content:compound)// . -% GraphViz HTML-like label. - -label(Content) -- - text(Content). -label(Content) -- - table(Content). - - -%! row(?Contents:compound)// . - -row(tr(Contents)) -- - html_element(tr, [], cell(Contents)). - - -%! rows(?Contents:list)// . - -rows([H|T]) -- - row(H), - rows(T). -rows([H,hr|T]) -- - row(H), - html_element(hr), - rows(T). -rows([H]) -- - row(H). - - -%! table(?Contents:compound)// . -% Supported attributes for TABLE: -% ``` -% ALIGN=\"CENTER|LEFT|RIGHT\" -% BGCOLOR=\"color\" -% BORDER=\"value\" -% CELLBORDER=\"value\" -% CELLPADDING=\"value\" -% CELLSPACING=\"value\" -% COLOR=\"color\" -% COLUMNS=\"value\" -% FIXEDSIZE=\"FALSE|TRUE\" -% GRADIENTANGLE=\"value\" -% HEIGHT=\"value\" -% HREF=\"value\" -% ID=\"value\" -% PORT=\"portName\" -% ROWS=\"value\" -% SIDES=\"value\" -% STYLE=\"value\" -% TARGET=\"value\" -% TITLE=\"value\" -% TOOLTIP=\"value\" -% VALIGN=\"MIDDLE|BOTTOM|TOP\" -% WIDTH=\"value\" -% ``` -% -% Supported attributes for FONT: -% ``` -% COLOR=\"color\" -% FACE=\"fontname\" -% POINT-SIZE=\"value\" -% ``` - -table(table(Attrs,Contents)) -- - html_element(table, Attrs, rows(Contents)). -table(table(font(Contents))) -- - html_element(font, [], html_element(table, [], rows(Contents))). - - -%! text(?Contents:list)// . - -text(Contents) -- - '+'(textitem, Contents, []). - - -%! textitem(?Content)// . -% Supported attributes for BR: -% ``` -% ALIGN=\"CENTER|LEFT|RIGHT\" -% ``` - -textitem(string(String)) -- - html_string(String). -textitem(entity(Name)) -- - html_entity(Name). -textitem(br(Attrs)) -- - html_element(br, Attrs). -textitem(Compound) -- - {var(Compound)}, !, - html_element(Name, _, text(Content)), - { - supported_html_element(Name), - Compound =.. [Name,Content] - }. -textitem(Compound) -- - { - Compound =.. [Name,Content], - supported_html_element(Name) - }, - html_element(Name, _, text(Content)). - - - -% HELPERS - -%! supported_html_element(+Name:atom) is semidet. -%! supported_html_element(-Name:atom) is multi. - -supported_html_element(b). -supported_html_element(font). -supported_html_element(i). -supported_html_element(o). -supported_html_element(s). -supported_html_element(sub). -supported_html_element(sup). -supported_html_element(u). +% @see http://www.graphviz.org/doc/info/shapes.html#html + +gv_html_label -- gv_html_text, !. +gv_html_label -- gv_html_table, !. +gv_html_label -- []. + +gv_html_like_label -- bracketed(angular, gv_html_label). + +gv_html_like_label(Content) -- bracketed(angular, html_dcg(Content)). + +gv_html_table -- html_element(table, _, gv_html_rows). +gv_html_table -- html_element(font, _, html_element(table, _, gv_html_rows)). + +gv_html_rows -- gv_html_row, gv_html_rows. +gv_html_rows -- gv_html_row, html_element(hr, _), gv_html_rows. +gv_html_rows -- gv_html_row. + +gv_html_row -- html_element(tr, _, gv_html_cells). + +gv_html_cell -- html_element(td, _, gv_html_label). +gv_html_cell -- html_element(td, _, html_element(img, _)). + +gv_html_cells -- gv_html_cell, gv_html_cells. +gv_html_cells -- gv_html_cell. +gv_html_cells -- gv_html_cell, html_element(vr, _), gv_html_cells. + +gv_html_text -- gv_html_textitem, gv_html_text. +gv_html_text -- gv_html_textitem. + +gv_html_textitem -- html_string, !. +gv_html_textitem -- html_entity, !. +gv_html_textitem -- html_element(br, _), !. +gv_html_textitem -- html_element(font, _, gv_html_text), !. +gv_html_textitem -- html_element(i, _, gv_html_text), !. +gv_html_textitem -- html_element(b, _, gv_html_text), !. +gv_html_textitem -- html_element(u, _, gv_html_text), !. +gv_html_textitem -- html_element(sub, _, gv_html_text), !. +gv_html_textitem -- html_element(sup, _, gv_html_text), !. + diff --git a/gv_numeral.pl b/gv_numeral.pl index c115372..7870eb1 100644 --- a/gv_numeral.pl +++ b/gv_numeral.pl @@ -14,67 +14,59 @@ :- use_module(math(math_ext)). :- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_ascii)). :- use_module(plDcg(dcg_cardinal)). %! gv_numeral(?Value:number)// . -% -% # Syntax -% -% ```bnf +% ~~~{.bnf} % ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? ) -% ``` -% -% ## Generation -% -% In the generative case, three notations are allowed (also see below): -% 1. (non-zero integer-part) -% 2. (decimal-separator) (non-zero fractional) -% 3. (non-zero integer-part) (decimal-separator) (non-zero fractional) -% -% The following notations are explicitly excluded due to verbosity: -% - (non-zero integer-part) (decimal-separator) -% - (non-zero integer-part) (decimal-separator) (zero fractional) -% - (zero integer-part) (decimal-separator) (non-zero fractional) -% -% The following notations are also excluded, but since they violate -% well-formedness: -% - (non-zero integer-part) (non-zero fractional) -% - (decimal-separator) +% ~~~ gv_numeral(N) -- - {var(N)}, !, - sign(Sign), - ( \".\", - '+'(decimal_digit, Fractional, [convert1(weights_decimal)]), - {IntegerPart = 0} - ; '+'(decimal_digit, IntegerPart, [convert1(weights_decimal)]), - ( \".\", - '*'(decimal_digit, Fractional, [convert1(weights_decimal)]) - ; {Fractional = 0} - ) - ), - { number_integer_parts(UnsignedN, IntegerPart, Fractional), - N is copysign(UnsignedN, Sign) - }. + {nonvar(N)}, + {number_sign_parts(N, Sign, Abs)}, + ({Sign =:= -1} - `-` ; ``), + gv_numeral_abs(Abs). gv_numeral(N) -- - {number_sign_parts(N, Sign, UnsignedN)}, - sign(Sign), - {number_integer_parts(UnsignedN, IntegerPart, Fractional)}, - ( % [1] The fractional is zero, so only write the integer part - % and do not write the decimal separator. - {Fractional =:= 0} - - integer(IntegerPart) - ; % [2] The integer part is zero, so only write the fractional part, - % preceded by the decimal separator. - {IntegerPart =:= 0} - - \".\", - integer(Fractional) - ; % [3] Both the integer part and the fractional are non-zero, - % so write both of them, with the decimal separator in-between. - integer(IntegerPart), - \".\", - integer(Fractional) + {var(N)}, + 'sign?'(Sign), + gv_numeral_abs(Abs), + {number_sign_parts(N, Sign, Abs)}. + + +gv_numeral_abs(N) -- + {nonvar(N)}, + {number_integer_parts(N, N1, N2)}, + ( + {N2 =:= 0} + - + integer(N1) + ; + {N1 =:= 0} + - + `.`, + integer(N2) + ; + integer(N1), + '?'((`.`, 'integer?'(N2)), []) ). +gv_numeral_abs(N) -- + {var(N)}, + ( + `.`, + integer(N2) + - + {N1 = 0} + ; + integer(N1), + ( + `.` + - + 'integer?'(N2) + ; + {N2 = 0} + ) + ), + {number_integer_parts(N, N1, N2)}. + diff --git a/load.pl b/load.pl index 5cec32c..4b117d1 100644 --- a/load.pl +++ b/load.pl @@ -1,14 +1,12 @@ -% Load file for the plGraphViz library. +% Load file for plGraphViz. -:- dynamic(user:project/2). -:- multifile(user:project/2). - user:project(plGraphViz, 'GraphViz support for SWI-Prolog.'). +:- dynamic(user:prolog/3). +:- multifile(user:prolog/3). + user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz). :- use_module(load_project). -:- load_project([ +:- load_project(plGraphViz, [ plc-'Prolog-Library-Collection', - plDcg, - plHtml, - plUri + plHtml ]). diff --git a/plDcg b/plDcg deleted file mode 160000 index 96e2615..0000000 --- a/plDcg +++ /dev/null @@ -1 +0,0 @@ -Subproject commit 96e261537773270a43d1ff4346273820282f21fb diff --git a/plHtml b/plHtml index a7b736f..18e657b 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit a7b736fdf7c435f825193bbc54500a302b0bc4b1 +Subproject commit 18e657b22a84d5e98a317ddec58314964ff68bcd diff --git a/plUri b/plUri deleted file mode 160000 index 59f582c..0000000 --- a/plUri +++ /dev/null @@ -1 +0,0 @@ -Subproject commit 59f582c68cebc221f964ccb9805a869d05cb7856 diff --git a/run.pl b/run.pl deleted file mode 100644 index 8bba736..0000000 --- a/run.pl +++ /dev/null @@ -1,9 +0,0 @@ -% Standalone execution of the plGraphViz library. - -:- if(current_prolog_flag(argv, ['--debug'|_])). - :- ensure_loaded(debug). -:- else. - :- set_prolog_flag(verbose, silent). - :- ensure_loaded(load). -:- endif. - ``` 54: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 0cc5421 å’Œå˜åŠ¨å dbc602d  [back to content](#compare) ``` diff diff --git a/.gitignore b/.gitignore index b25c15b..7193a38 100644 --- a/.gitignore +++ b/.gitignore @@ -1 +1,4 @@ *~ +*# +*.db +data/* diff --git a/.gitmodules b/.gitmodules index a63cbff..6c22435 100644 --- a/.gitmodules +++ b/.gitmodules @@ -4,3 +4,9 @@ [submodule \"plHtml\"] path = plHtml url = https://github.com/wouterbeek/plHtml.git +[submodule \"plDcg\"] +\tpath = plDcg +\turl = https://github.com/wouterbeek/plDcg.git +[submodule \"plUri\"] +\tpath = plUri +\turl = https://github.com/wouterbeek/plUri.git diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index d7d21ad..2774ee9 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit d7d21ad4d6d7cec98d8b0122f5303e691998f512 +Subproject commit 2774ee9cba6ac2353150322c744e65857634e575 diff --git a/debug.pl b/debug.pl index d7339b9..12b4526 100644 --- a/debug.pl +++ b/debug.pl @@ -1,9 +1,7 @@ % Debug file for library plGraphViz. -:- style_check(+charset). -%:- style_check(+var_branches). - :- [load]. :- use_module(debug_project). :- debug_all_files. + diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 3c7863d..30761bb 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -46,10 +46,12 @@ /**  GraphViz attribute types @author Wouter Beek -@version 2014/06 +@version 2014/06, 2014/11 */ :- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_ascii)). +:- use_module(plDcg(dcg_atom)). :- use_module(plDcg(dcg_cardinal)). :- use_module(plDcg(dcg_content)). @@ -97,7 +99,7 @@ gv_attr_type(viewPort). % An *addDouble* is represented by a Prolog float. addDouble(Float) -- - '?'(`+`, []), + '?'(plus_sign, []), double(Float). @@ -106,7 +108,7 @@ addDouble(Float) -- % `point(X:float,Y:float,InputOnly:boolean)`. addPoint(Point) -- - '?'(`+`, []), + '?'(plus_sign, []), point(Point). @@ -147,10 +149,10 @@ backwards_compatible(invempty). backwards_compatible(open). -bool(false) -- `false`. -bool(false) -- `no`. -bool(true) -- `true`. -bool(true) -- `yes`. +bool(false) -- \"false\". +bool(false) -- \"no\". +bool(true) -- \"true\". +bool(true) -- \"yes\". %! clusterMode(+ClusterMode:atom)// . @@ -187,7 +189,7 @@ doubleList([H|T]) -- '*'(doubleList1, T, []). doubleList1(Float) -- - `:`, + \":\", double(Float). @@ -242,16 +244,16 @@ pagedir('TR'). %! point(+Point:compound)// . % A *point* is represented by a compound of the following form: -% `point(X:float,Y:float,InputOnly:boolean)`. +% `point(X:float,Y:float,Changeable:boolean)`. -point(point(X,Y,InputOnly)) -- +point(point(X,Y,Changeable)) -- float(X), - `,`, + \",\", float(Y), - input_only(InputOnly). + input_changeable(Changeable). -input_only(false) -- []. -input_only(true) -- `!`. +input_changeable(false) -- \"\". +input_changeable(true) -- \"!\". pointList(Points) -- @@ -292,9 +294,9 @@ rankdir('TB'). rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -- - float(LowerLeftX), `,`, - float(LowerLeftY), `,`, - float(UpperRightX), `,`, + float(LowerLeftX), \",\", + float(LowerLeftY), \",\", + float(UpperRightX), \",\", float(UpperRightY). @@ -414,4 +416,3 @@ style(node, wedged). % @tbd viewPort - diff --git a/gv_attrs.pl b/gv_attrs.pl index faf496c..649ef9c 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -2,15 +2,17 @@ gv_attrs, [ gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph]) - % +Attr1:nvpair - % +Attr2:nvpair + % +Attribute1:nvpair + % -Attribute2:nvpair ] ). -/**  GraphViz attributes v2 +/**  GraphViz: Attributes + +Support for GraphViz attributes. @author Wouter Beek -@version 2014/06 +@version 2014/06, 2014/11 */ :- use_module(library(apply)). @@ -19,9 +21,11 @@ :- use_module(generics(db_ext)). :- use_module(os(file_ext)). +:- use_module(os(file_gnu)). +:- use_module(plDcg(dcg_atom)). :- use_module(plDcg(dcg_content)). -:- use_module(plDcg(dcg_generic)). +:- use_module(plDcg(dcg_generics)). :- use_module(plHtml(html)). :- use_module(plHtml(html_table)). @@ -54,24 +58,40 @@ +%! gv_attr( +%! +Context:oneof([cluster,edge,graph,node,subgraph]), +%! +Attribute1:nvpair, +%! +Attribute2:nvpair +%! ) is det. +% Uses the default value in case Value is uninstantiated. +% Otherwise, performs a typecheck and converts the given value. + gv_attr(Context, N=V, N=V):- var(V), !, gv_attr(N, UsedBy, _, V, _, _), + % Check validity of context. memberchk(Context, UsedBy). gv_attr(Context, N=V1, N=V2):- gv_attr(N, UsedBy, Types, _, Minimum, _), + % Check validity of context. memberchk(Context, UsedBy), + % Check validity of value type. member(Type, Types), - ( - Type == style - - - Dcg =.. [Type,Context,V1] - ; - Dcg =.. [Type,V1] + ( Type == style + - Dcg =.. [Type,Context,V1] + ; Dcg =.. [Type,V1] ), once(dcg_phrase(Dcg, V2)), + % Check validity of Value w.r.t. minimum value -- if available. check_minimum(V1, Minimum). + + +% HELPERS + +%! check_minimum(+Value:atom, +Minimum:number) is semidet. +% Trivially succeeds if no minimum value is available for a given attribute. + check_minimum(_, ''):- !. check_minimum(V, Min1):- atom_number(Min1, Min2), diff --git a/gv_color.pl b/gv_color.pl index cb0cf8c..c48817c 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -13,27 +13,27 @@ @author Wouter Beek @tbd Color value `transparent` is only available in the output formats ps, svg, fig, vmrl, and the bitmap formats. -@version 2014/06 +@version 2014/06, 2014/10-2014/11 */ :- use_module(library(apply)). -:- use_module(library(lists)). +:- use_module(library(lists), except([delete/3])). :- use_module(library(persistency)). :- use_module(library(xpath)). :- use_module(generics(db_ext)). :- use_module(os(file_ext)). +:- use_module(os(file_gnu)). +:- use_module(plDcg(abnf_core_rules)). :- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_atom)). :- use_module(plDcg(dcg_cardinal)). :- use_module(plDcg(dcg_content)). -:- use_module(plDcg_rfc(rfc2616_basic)). :- use_module(plHtml(html)). :- use_module(plHtml(html_table)). -:- use_module(plSparql_parse(sparql_char)). - :- db_add_novel(user:prolog_file_type(log, logging)). %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet. @@ -51,10 +51,10 @@ % 3. `hsv(Hue:between(0.0,1.0),Saturation:between(0.0,1.0),Value:between(0.0,1.0))` color(rgb(Red,Green,Blue)) -- !, - `#`, + \"#\", '#'(3, hex_color, [Red,Green,Blue], []). color(rgbs(Red,Green,Blue,Alpha)) -- !, - `#`, + \"#\", '#'(4, hex_color, [Red,Green,Blue,Alpha], []). color(hsv(Hue,Saturation,Value)) -- !, '#'(3, hsv_color, [Hue,Saturation,Value], []). @@ -82,7 +82,7 @@ wc(Color-Float) -- '?'(wc_weight(Float), []). wc_weight(Float) -- - `;`, + \";\", float(Float). diff --git a/gv_dot.pl b/gv_dot.pl index accd5bd..e67c469 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -1,7 +1,7 @@ :- module( gv_dot, [ - gv_graph//1 % +GraphTerm:compound + gv_graph//1 % +Gif:compound ] ). @@ -19,14 +19,17 @@ In GraphViz vertices are called 'nodes'. */ :- use_module(library(apply)). -:- use_module(library(lists)). +:- use_module(library(lists), except([delete/3])). :- use_module(library(ordsets)). :- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_arrow)). :- use_module(plDcg(dcg_ascii)). +:- use_module(plDcg(dcg_bracket)). :- use_module(plDcg(dcg_content)). -:- use_module(plDcg(dcg_generic)). +:- use_module(plDcg(dcg_generics)). :- use_module(plDcg(dcg_meta)). +:- use_module(plDcg(dcg_quote)). :- use_module(plGraphViz(gv_attrs)). :- use_module(plGraphViz(gv_html)). @@ -39,7 +42,7 @@ In GraphViz vertices are called 'nodes'. % We assume that the attribute has already been validated. gv_attribute(Name=Val) -- - gv_id(Name), `=`, gv_id(Val), `;`. + gv_id(Name), \"=\", gv_id(Val), \";\". %! gv_attribute_list( @@ -47,10 +50,10 @@ gv_attribute(Name=Val) -- %! +GraphAttributes:list(nvpair), %! +Attributes:list(nvpair) %! )// . -% ~~~{.abnf} +% ```abnf % attr_list = \"[\" [a_list] \"]\" [attr_list] % a_list = ID \"=\" ID [\",\"] [a_list] -% ~~~ +% ``` % Attributes occur between square brackets. gv_attribute_list(Context, _, Attrs1) -- @@ -59,20 +62,20 @@ gv_attribute_list(Context, _, Attrs1) -- %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . -% ~~~ +% ``` % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) -% ~~~ +% ``` -gv_compass_pt('_') -- `_`. -gv_compass_pt(c) -- `c`. -gv_compass_pt(e) -- `e`. -gv_compass_pt(n) -- `n`. -gv_compass_pt(ne) -- `ne`. -gv_compass_pt(nw) -- `nw`. -gv_compass_pt(s) -- `s`. -gv_compass_pt(se) -- `se`. -gv_compass_pt(sw) -- `sw`. -gv_compass_pt(w) -- `w`. +gv_compass_pt('_') -- \"_\". +gv_compass_pt(c) -- \"c\". +gv_compass_pt(e) -- \"e\". +gv_compass_pt(n) -- \"n\". +gv_compass_pt(ne) -- \"ne\". +gv_compass_pt(nw) -- \"nw\". +gv_compass_pt(s) -- \"s\". +gv_compass_pt(se) -- \"se\". +gv_compass_pt(sw) -- \"sw\". +gv_compass_pt(w) -- \"w\". %! gv_edge_operator(+Directed:boolean)// . @@ -83,7 +86,7 @@ gv_compass_pt(w) -- `w`. % @arg Directed Whether an edge is directed (operator `-`) or % undirected (operator `--`). -gv_edge_operator(false) -- !, `--`. +gv_edge_operator(false) -- !, \"--\". gv_edge_operator(true) -- arrow(right, 2). @@ -107,11 +110,11 @@ gv_edge_operator(true) -- arrow(right, 2). gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- indent(I), - gv_node_id(FromId), ` `, + gv_node_id(FromId), \" \", - gv_edge_operator(Directed), ` `, + gv_edge_operator(Directed), \" \", - gv_node_id(ToId), ` `, + gv_node_id(ToId), \" \", % We want `colorscheme/1` from the edges and % `directionality/1` from the graph. @@ -133,18 +136,18 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- % @arg GraphAttributes A list of name-value pairs. % @arg CategoryAttributes A list of name-value pairs. % -% ~~~ +% ``` % attr_stmt = (graph / node / edge) attr_list -% ~~~ +% ``` gv_generic_attributes_statement(_, _, _, []) -- [], !. gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- indent(I), - gv_kind(Kind), ` `, + gv_kind(Kind), \" \", gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed. -%! gv_graph(+GraphTerm:compound)// +%! gv_graph(+Gif:compound)// % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: % * `directed(+boolean)` @@ -156,19 +159,19 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- % they are ignored in the input file. % Only in combinattion with directionality `directed`. % -% ~~~{.abnf} +% ```abnf % graph = [\"strict\"] (\"graph\" / \"digraph\") [ID] \"{\" stmt_list \"}\" -% ~~~ +% ``` % % `GraphTerm` is a compound term of the following form: -% ~~~{.pl} +% ```prolog % graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes) -% ~~~ +% ``` % % `RankedVertexTerms` is a list of compound terms of the following form: -% ~~~{.pl} +% ```prolog % rank(RankNode,ContentNodes) -% ~~~ +% ``` % % @tbd Add support for subgraphs (arbitrary nesting). % @tbd Add support for escape strings: @@ -176,10 +179,10 @@ gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- % @tbd Assert attributes that are generic with respect to a subgraph. % @tbd Not all vertex and edge properties can be shared it seems (e.g., label). -gv_graph(graph(VTerms, ETerms, GAttrs)) -- - gv_graph(graph(VTerms, [], ETerms, GAttrs)). +gv_graph(graph(VTerms,ETerms,GAttrs)) -- + gv_graph(graph(VTerms,[],ETerms,GAttrs)). -gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- +gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -- { shared_attributes(VTerms, SharedVAttrs, NewVTerms), shared_attributes(ETerms, SharedEAttrs, NewETerms), @@ -194,8 +197,8 @@ gv_graph(graph(VTerms, RankedVTerms, ETerms, GAttrs1)) -- % States that this file represents a graph according to the GraphViz format. indent(I), gv_strict(Strict), - gv_graph_type(Directed), ` `, - gv_id(GName), ` `, + gv_graph_type(Directed), \" \", + gv_id(GName), \" \", % The body of the DOT file appears between curly braces. bracketed( @@ -240,18 +243,18 @@ gv_graph0( (NewVTerms == [], RankedVTerms == []) } - - `` + \"\" ; line_feed ), % The list of GraphViz nodes. '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []), - ({NewVTerms == []} - `` ; line_feed), + ({NewVTerms == []} - \"\" ; line_feed), % The ranked GraphViz nodes (displayed at the same height). '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []), - ({RankedVTerms == []} - `` ; line_feed), + ({RankedVTerms == []} - \"\" ; line_feed), { findall( @@ -281,8 +284,8 @@ gv_graph0( %! gv_graph_type(+Directed:boolean)// . % The type of graph that is represented. -gv_graph_type(false) -- `graph`. -gv_graph_type(true) -- `digraph`. +gv_graph_type(false) -- \"graph\". +gv_graph_type(true) -- \"digraph\". %! gv_id(?Atom:atom)// is det. @@ -305,8 +308,9 @@ gv_graph_type(true) -- `digraph`. % This requires an XML grammar! % HTML strings (variant 4). -gv_id(Atom) -- - dcg_atom_codes(gv_html_like_label, Atom), !. +gv_id(Content) -- + {compound(Content)}, !, + gv_html_like_label(Content). % Alpha-numeric strings (variant 1). gv_id(Atom) -- {atom_codes(Atom, [H|T])}, @@ -330,14 +334,16 @@ gv_id(Atom) -- % Double-quoted strings (variant 3). % The quotes are not in the given atom. They are written anyway. gv_id(Atom) -- - quoted(double_quote, dcg_atom_codes(gv_quoted_string, Atom)), !. + quoted(dcg_atom_codes(gv_quoted_string, Atom)), !. -gv_id_first(X) -- ascii_letter(X). +gv_id_first(X) -- letter(X). gv_id_first(X) -- underscore(X). gv_id_rest([]) -- []. gv_id_rest([H|T]) -- - (ascii_alpha_numeric(H) ; underscore(H)), + ( alpha_numeric(H) + ; underscore(H) + ), gv_id_rest(T). @@ -353,19 +359,19 @@ gv_keyword(Codes):- % GraphViz has reserved keywords that cannot be used as identifiers. % GraphViz keywords are case-insensitive. -gv_keyword -- `digraph`. -gv_keyword -- `edge`. -gv_keyword -- `graph`. -gv_keyword -- `node`. -gv_keyword -- `strict`. -gv_keyword -- `subgraph`. +gv_keyword -- \"digraph\". +gv_keyword -- \"edge\". +gv_keyword -- \"graph\". +gv_keyword -- \"node\". +gv_keyword -- \"strict\". +gv_keyword -- \"subgraph\". %! gv_kind(+Kind:oneof([edge,graph,node]))// . -gv_kind(edge) -- `edge`. -gv_kind(graph) -- `graph`. -gv_kind(node) -- `node`. +gv_kind(edge) -- \"edge\". +gv_kind(graph) -- \"graph\". +gv_kind(node) -- \"node\". %! gv_node_id(+NodeId:atom)// . @@ -392,7 +398,7 @@ gv_node_id(Id) -- gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -- indent(I), - gv_node_id(Id), ` `, + gv_node_id(Id), \" \", gv_attribute_list(node, GraphAttrs, VAttrs), line_feed. @@ -403,23 +409,23 @@ gv_port -- gv_port_angle, '?'(gv_port_location, []). gv_port -- - `:`, + \":\", gv_compass_pt(_). gv_port_angle -- - `@`, + \"@\", gv_id(_). gv_port_location -- - `:`, + \":\", gv_id(_). gv_port_location -- - `:`, + \":\", bracketed( round, ( gv_id(_), - `,`, + \",\", gv_id(_) ) ). @@ -436,7 +442,7 @@ gv_quoted_string([92,34|T]) -- !, gv_quoted_string(T). % Add the backslash escape character. gv_quoted_string([34|T]) -- !, - `\\\\\\\"`, + \"\\\\\\\"\", gv_quoted_string(T). % All other characters are allowed without escaping. gv_quoted_string([H|T]) -- @@ -455,14 +461,14 @@ gv_ranked_node_collection( % The rank attribute. {NewI is I + 1}, - indent(NewI), gv_attribute(rank=same), `;`, line_feed, + indent(NewI), gv_attribute(rank=same), \";\", line_feed, '*'( gv_node_statement(NewI, GraphAttrs), [Rank_V_Term|Content_V_Terms], [] ), - + % We want to indent the closing curly brace. indent(I) )), @@ -475,7 +481,7 @@ gv_ranked_node_collection( % This only applies to directed graphs. gv_strict(false) -- []. -gv_strict(true) -- `strict `. +gv_strict(true) -- \"strict \". diff --git a/gv_file.pl b/gv_file.pl index bba87f9..704e2d4 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -9,9 +9,6 @@ gif_to_gv_file/3, % +GraphInterchangeFormat:compound % ?ToFile:atom % +Options:list(nvpair) - gif_to_svg_dom/3, % +GraphInterchangeFormat:compound - % -SvgDom:list(compound) - % +Options:list(nvpair) open_dot/1 % +File:file ] ). @@ -30,13 +27,11 @@ and GraphViz output files or SVG DOM structures. :- use_module(library(option)). :- use_module(library(process)). -:- use_module(library(predicate_options)). % Declarations. -:- use_module(generics(codes_ext)). +:- use_module(generics(code_ext)). :- use_module(generics(db_ext)). :- use_module(os(file_ext)). :- use_module(os(run_ext)). -:- use_module(svg(svg_file)). :- use_module(plGraphViz(gv_dot)). @@ -136,15 +131,12 @@ file_to_gv(FromFile, ToFile, Options):- prolog_file_type(ToExtension, graphviz_output), !, % The output file is either given or created. - ( - var(ToFile) - - - user:prolog_file_type(ToExtension, ToFileType), - file_alternative(FromFile, _, _, ToExtension, ToFile) - ; - is_absolute_file_name(ToFile), - % The given output file must match a certain file extension. - file_name_extension(_, ToExtension, ToFile) + ( var(ToFile) + - user:prolog_file_type(ToExtension, ToFileType), + file_alternative(FromFile, _, _, ToExtension, ToFile) + ; is_absolute_file_name(ToFile), + % The given output file must match a certain file extension. + file_name_extension(_, ToExtension, ToFile) ), % Now that we have the output file we can prevent the % file type / file extension translation predicates from bakctracking. @@ -154,6 +146,8 @@ file_to_gv(FromFile, ToFile, Options):- format(atom(OutputType), '-T~w', [ToExtension]), process_create( path(Method), + % @tbd Windows hack: + %%%%'C:\\\\Program Files (x86)\\\\Graphviz2.38\\\\bin\\\\dot.exe', [OutputType,FromFile,'-o',ToFile], [process(PID)] ), @@ -177,20 +171,6 @@ gif_to_gv_file(Gif, ToFile, Options):- codes_to_gv_file(Codes, ToFile, Options). -%! gif_to_svg_dom( -%! +GraphInterchangeFormat:compound, -%! -SvgDom:list(compound), -%! +Options:list(nvpair) -%! ) is det. - -gif_to_svg_dom(Gif, SvgDom, Options1):- - % Make sure the file type of the output file is SvgDom. - merge_options([to_file_type=svg], Options1, Options2), - gif_to_gv_file(Gif, ToFile, Options2), - file_to_svg(ToFile, SvgDom), - delete_file(ToFile). - - %! open_dot(+File:atom) is det. % Opens the given DOT file. % diff --git a/gv_html.pl b/gv_html.pl index 3f0b08b..08306f0 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -1,60 +1,224 @@ :- module( gv_html, [ - gv_html_like_label//1 % +Codes:list(code) + gv_html_like_label//1 % +Content:compound ] ). -/**  GraphViz HTML +/**  GraphViz: HTML-like labels + +Grammar taken from the GraphViz Web site: + +``` +label : text + | table +text : textitem + | text textitem +textitem : string + |  + |  text  + |  text  + |  text  + |  text  + |  text  + |  text  + |  text  + |  text  +table : [  ]  rows  [  ] +rows : row + | rows row + | rows  row +row:  cells  +cells : cell + | cells cell + | cells  cell +cell:  label  + |    +``` @author Wouter Beek -@version 2013/07, 2013/09, 2014/03-2014/06 +@see http://www.graphviz.org/content/node-shapes#html +@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11 */ +:- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_bracket)). :- use_module(plDcg(dcg_content)). :- use_module(plHtml(html_dcg)). -%! gv_html_label(+Codes:list(code))// . +%! gv_html_like_label(?Content:compound)// . + +gv_html_like_label(Content) -- + bracketed(angular, label(Content)). + + +%! cell(?Contents:compound)// . +% Supported attributes for TD: +% ``` +% ALIGN=\"CENTER|LEFT|RIGHT|TEXT\" +% BALIGN=\"CENTER|LEFT|RIGHT\" +% BGCOLOR=\"color\" +% BORDER=\"value\" +% CELLPADDING=\"value\" +% CELLSPACING=\"value\" +% COLOR=\"color\" +% COLSPAN=\"value\" +% FIXEDSIZE=\"FALSE|TRUE\" +% GRADIENTANGLE=\"value\" +% HEIGHT=\"value\" +% HREF=\"value\" +% ID=\"value\" +% PORT=\"portName\" +% ROWSPAN=\"value\" +% SIDES=\"value\" +% STYLE=\"value\" +% TARGET=\"value\" +% TITLE=\"value\" +% TOOLTIP=\"value\" +% VALIGN=\"MIDDLE|BOTTOM|TOP\" +% WIDTH=\"value\" +% ``` % -% @see http://www.graphviz.org/doc/info/shapes.html#html - -gv_html_label -- gv_html_text, !. -gv_html_label -- gv_html_table, !. -gv_html_label -- []. - -gv_html_like_label -- bracketed(angular, gv_html_label). - -gv_html_like_label(Content) -- bracketed(angular, html_dcg(Content)). - -gv_html_table -- html_element(table, _, gv_html_rows). -gv_html_table -- html_element(font, _, html_element(table, _, gv_html_rows)). - -gv_html_rows -- gv_html_row, gv_html_rows. -gv_html_rows -- gv_html_row, html_element(hr, _), gv_html_rows. -gv_html_rows -- gv_html_row. - -gv_html_row -- html_element(tr, _, gv_html_cells). - -gv_html_cell -- html_element(td, _, gv_html_label). -gv_html_cell -- html_element(td, _, html_element(img, _)). - -gv_html_cells -- gv_html_cell, gv_html_cells. -gv_html_cells -- gv_html_cell. -gv_html_cells -- gv_html_cell, html_element(vr, _), gv_html_cells. - -gv_html_text -- gv_html_textitem, gv_html_text. -gv_html_text -- gv_html_textitem. - -gv_html_textitem -- html_string, !. -gv_html_textitem -- html_entity, !. -gv_html_textitem -- html_element(br, _), !. -gv_html_textitem -- html_element(font, _, gv_html_text), !. -gv_html_textitem -- html_element(i, _, gv_html_text), !. -gv_html_textitem -- html_element(b, _, gv_html_text), !. -gv_html_textitem -- html_element(u, _, gv_html_text), !. -gv_html_textitem -- html_element(sub, _, gv_html_text), !. -gv_html_textitem -- html_element(sup, _, gv_html_text), !. - +% Supported attributes for IMG: +% ``` +% SCALE=\"FALSE|TRUE|WIDTH|HEIGHT|BOTH\" +% SRC=\"value\" +% ``` + +cell(td(Contents)) -- + html_element(td, [], label(Contents)). +cell(td(img)) -- + html_element(td, [], html_element(img)). + + +%! cells(?Contents:list(compound))// . + +cells([H|T]) -- + cell(H), + cells(T). +cells([H,vr|T]) -- + cell(H), + html_element(vr), + cells(T). +cells([H]) -- + cell(H). + + +%! label(?Content:compound)// . +% GraphViz HTML-like label. + +label(Content) -- + text(Content). +label(Content) -- + table(Content). + + +%! row(?Contents:compound)// . + +row(tr(Contents)) -- + html_element(tr, [], cell(Contents)). + + +%! rows(?Contents:list)// . + +rows([H|T]) -- + row(H), + rows(T). +rows([H,hr|T]) -- + row(H), + html_element(hr), + rows(T). +rows([H]) -- + row(H). + + +%! table(?Contents:compound)// . +% Supported attributes for TABLE: +% ``` +% ALIGN=\"CENTER|LEFT|RIGHT\" +% BGCOLOR=\"color\" +% BORDER=\"value\" +% CELLBORDER=\"value\" +% CELLPADDING=\"value\" +% CELLSPACING=\"value\" +% COLOR=\"color\" +% COLUMNS=\"value\" +% FIXEDSIZE=\"FALSE|TRUE\" +% GRADIENTANGLE=\"value\" +% HEIGHT=\"value\" +% HREF=\"value\" +% ID=\"value\" +% PORT=\"portName\" +% ROWS=\"value\" +% SIDES=\"value\" +% STYLE=\"value\" +% TARGET=\"value\" +% TITLE=\"value\" +% TOOLTIP=\"value\" +% VALIGN=\"MIDDLE|BOTTOM|TOP\" +% WIDTH=\"value\" +% ``` +% +% Supported attributes for FONT: +% ``` +% COLOR=\"color\" +% FACE=\"fontname\" +% POINT-SIZE=\"value\" +% ``` + +table(table(Attrs,Contents)) -- + html_element(table, Attrs, rows(Contents)). +table(table(font(Contents))) -- + html_element(font, [], html_element(table, [], rows(Contents))). + + +%! text(?Contents:list)// . + +text(Contents) -- + '+'(textitem, Contents, []). + + +%! textitem(?Content)// . +% Supported attributes for BR: +% ``` +% ALIGN=\"CENTER|LEFT|RIGHT\" +% ``` + +textitem(string(String)) -- + html_string(String). +textitem(entity(Name)) -- + html_entity(Name). +textitem(br(Attrs)) -- + html_element(br, Attrs). +textitem(Compound) -- + {var(Compound)}, !, + html_element(Name, _, text(Content)), + { + supported_html_element(Name), + Compound =.. [Name,Content] + }. +textitem(Compound) -- + { + Compound =.. [Name,Content], + supported_html_element(Name) + }, + html_element(Name, _, text(Content)). + + + +% HELPERS + +%! supported_html_element(+Name:atom) is semidet. +%! supported_html_element(-Name:atom) is multi. + +supported_html_element(b). +supported_html_element(font). +supported_html_element(i). +supported_html_element(o). +supported_html_element(s). +supported_html_element(sub). +supported_html_element(sup). +supported_html_element(u). diff --git a/gv_numeral.pl b/gv_numeral.pl index 7870eb1..c115372 100644 --- a/gv_numeral.pl +++ b/gv_numeral.pl @@ -14,59 +14,67 @@ :- use_module(math(math_ext)). :- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_ascii)). :- use_module(plDcg(dcg_cardinal)). %! gv_numeral(?Value:number)// . -% ~~~{.bnf} +% +% # Syntax +% +% ```bnf % ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? ) -% ~~~ +% ``` +% +% ## Generation +% +% In the generative case, three notations are allowed (also see below): +% 1. (non-zero integer-part) +% 2. (decimal-separator) (non-zero fractional) +% 3. (non-zero integer-part) (decimal-separator) (non-zero fractional) +% +% The following notations are explicitly excluded due to verbosity: +% - (non-zero integer-part) (decimal-separator) +% - (non-zero integer-part) (decimal-separator) (zero fractional) +% - (zero integer-part) (decimal-separator) (non-zero fractional) +% +% The following notations are also excluded, but since they violate +% well-formedness: +% - (non-zero integer-part) (non-zero fractional) +% - (decimal-separator) gv_numeral(N) -- - {nonvar(N)}, - {number_sign_parts(N, Sign, Abs)}, - ({Sign =:= -1} - `-` ; ``), - gv_numeral_abs(Abs). + {var(N)}, !, + sign(Sign), + ( \".\", + '+'(decimal_digit, Fractional, [convert1(weights_decimal)]), + {IntegerPart = 0} + ; '+'(decimal_digit, IntegerPart, [convert1(weights_decimal)]), + ( \".\", + '*'(decimal_digit, Fractional, [convert1(weights_decimal)]) + ; {Fractional = 0} + ) + ), + { number_integer_parts(UnsignedN, IntegerPart, Fractional), + N is copysign(UnsignedN, Sign) + }. gv_numeral(N) -- - {var(N)}, - 'sign?'(Sign), - gv_numeral_abs(Abs), - {number_sign_parts(N, Sign, Abs)}. - - -gv_numeral_abs(N) -- - {nonvar(N)}, - {number_integer_parts(N, N1, N2)}, - ( - {N2 =:= 0} - - - integer(N1) - ; - {N1 =:= 0} - - - `.`, - integer(N2) - ; - integer(N1), - '?'((`.`, 'integer?'(N2)), []) + {number_sign_parts(N, Sign, UnsignedN)}, + sign(Sign), + {number_integer_parts(UnsignedN, IntegerPart, Fractional)}, + ( % [1] The fractional is zero, so only write the integer part + % and do not write the decimal separator. + {Fractional =:= 0} + - integer(IntegerPart) + ; % [2] The integer part is zero, so only write the fractional part, + % preceded by the decimal separator. + {IntegerPart =:= 0} + - \".\", + integer(Fractional) + ; % [3] Both the integer part and the fractional are non-zero, + % so write both of them, with the decimal separator in-between. + integer(IntegerPart), + \".\", + integer(Fractional) ). -gv_numeral_abs(N) -- - {var(N)}, - ( - `.`, - integer(N2) - - - {N1 = 0} - ; - integer(N1), - ( - `.` - - - 'integer?'(N2) - ; - {N2 = 0} - ) - ), - {number_integer_parts(N, N1, N2)}. - diff --git a/load.pl b/load.pl index 4b117d1..5cec32c 100644 --- a/load.pl +++ b/load.pl @@ -1,12 +1,14 @@ -% Load file for plGraphViz. +% Load file for the plGraphViz library. -:- dynamic(user:prolog/3). -:- multifile(user:prolog/3). - user:project(plGraphViz, 'GraphViz support for SWI-Prolog.', plGraphViz). +:- dynamic(user:project/2). +:- multifile(user:project/2). + user:project(plGraphViz, 'GraphViz support for SWI-Prolog.'). :- use_module(load_project). -:- load_project(plGraphViz, [ +:- load_project([ plc-'Prolog-Library-Collection', - plHtml + plDcg, + plHtml, + plUri ]). diff --git a/plDcg b/plDcg new file mode 160000 index 0000000..ad6c88a --- /dev/null +++ b/plDcg @@ -0,0 +1 @@ +Subproject commit ad6c88a86234c50ffb31bdbfd50edf5709654f75 diff --git a/plHtml b/plHtml index 18e657b..f96e87b 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit 18e657b22a84d5e98a317ddec58314964ff68bcd +Subproject commit f96e87bb4e4fa525f5e84814914834625ac9f715 diff --git a/plUri b/plUri new file mode 160000 index 0000000..ec0a88e --- /dev/null +++ b/plUri @@ -0,0 +1 @@ +Subproject commit ec0a88e1040ea624b09904f9a76c258775e98bff diff --git a/run.pl b/run.pl new file mode 100644 index 0000000..8bba736 --- /dev/null +++ b/run.pl @@ -0,0 +1,9 @@ +% Standalone execution of the plGraphViz library. + +:- if(current_prolog_flag(argv, ['--debug'|_])). + :- ensure_loaded(debug). +:- else. + :- set_prolog_flag(verbose, silent). + :- ensure_loaded(load). +:- endif. + ``` 55: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ dbc602d å’Œå˜åŠ¨å a2456df  [back to content](#compare) ``` diff diff --git a/gv_color.pl b/gv_color.pl index c48817c..0510f98 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -22,6 +22,7 @@ :- use_module(library(xpath)). :- use_module(generics(db_ext)). +:- use_module(generics(persistent_db_ext)). :- use_module(os(file_ext)). :- use_module(os(file_gnu)). @@ -121,9 +122,7 @@ gv_color_file(File):- gv_color_init:- gv_color_file(File), - safe_db_attach(File), - file_age(File, Age), - gv_color_update(Age). + persistent_db_init(File, gv_color_update). %! gv_color_update(+Age:float) is det. diff --git a/plHtml b/plHtml index f96e87b..c98f740 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit f96e87bb4e4fa525f5e84814914834625ac9f715 +Subproject commit c98f740d593fff74bfa3cf3d08af13c857daa899 ``` 56: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ a2456df å’Œå˜åŠ¨å 20c6017  [back to content](#compare) ``` diff diff --git a/gv_numeral.pl b/gv_numeral.pl index c115372..d36fa59 100644 --- a/gv_numeral.pl +++ b/gv_numeral.pl @@ -61,7 +61,7 @@ gv_numeral(N) -- }. gv_numeral(N) -- {number_sign_parts(N, Sign, UnsignedN)}, - sign(Sign), + sign_negative(Sign), {number_integer_parts(UnsignedN, IntegerPart, Fractional)}, ( % [1] The fractional is zero, so only write the integer part % and do not write the decimal separator. ``` 57: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 20c6017 å’Œå˜åŠ¨å f694d77  [back to content](#compare) ``` diff diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 2774ee9..58f43f0 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 2774ee9cba6ac2353150322c744e65857634e575 +Subproject commit 58f43f0e2fca088206582a18b868fe85a7603432 diff --git a/plDcg b/plDcg index ad6c88a..c61080f 160000 --- a/plDcg +++ b/plDcg @@ -1 +1 @@ -Subproject commit ad6c88a86234c50ffb31bdbfd50edf5709654f75 +Subproject commit c61080f3d8df6ba6d48b0d70f5ba52047c8cbd29 diff --git a/plUri b/plUri index ec0a88e..66a7652 160000 --- a/plUri +++ b/plUri @@ -1 +1 @@ -Subproject commit ec0a88e1040ea624b09904f9a76c258775e98bff +Subproject commit 66a7652bc1ab6a4dc1fc790b09894d6c51d42dcf ``` 58: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ f694d77 å’Œå˜åŠ¨å af5d96d  [back to content](#compare) ``` diff diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 58f43f0..1b264ab 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 58f43f0e2fca088206582a18b868fe85a7603432 +Subproject commit 1b264ab8b668b44035c96f320f8798f7940ad2fa diff --git a/README.md b/README.md index 3c9e9cf..f89c694 100644 --- a/README.md +++ b/README.md @@ -1,8 +1,113 @@ plGraphViz ========== -Export graphs represented as Prolog terms to +Easily export graphs represented as Prolog terms to [GraphViz](http://www.graphviz.org/). -Author: [Wouter Beek](http://www.wouterbeek.com) +### Example + +~~~prolog +$ swipl run.pl +?- use_module(plGraphViz(gv_file)). +?- graph_to_gv_file( + graph([vertex(1,[]),vertex(2,[])],[edge(1,2,[])],[]), + File, + [method(sfdp),output(png)] + ). + File = 'PATH/plGraphViz/data/tmp.png' +~~~ + +The graphic can be saved to a different file by instantiating + the `File` argument. + +![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example1.png \"Example graph.\") + +--- + +### Method option + +Option `method(+atom)` sets the drawing method that is used by GraphViz + to place the vertices and edges. +The following values are supported. + +| **Value** | **Description** | +| `circo` | Circular layout. | +| `dot` (default) | Directed graph. | +| `fdp` | Undirected graph. | +| `neato` | Undirected graph. | +| `osage` | Tree map. | +| `sfdp` | Large undirected graph. | +| `twopi` | Radical layouts. | + +--- + +### Output type option + +Option `output(+atom)` sets the type of file the graph is written to. +The following values are supported. + +| **Value** | **Description** | +|:---------------------:|:--------------------------------------| +| `bmp` | Windows Bitmap Format | +| `canon` | | +| `dot` | | +| `gv`, `xdot`, `xdot1.2`, `xdot1.4` | DOT | +| `cgimage` | CGImage bitmap format | +| `cmap` | Client-side imagemap (deprecated) | +| `eps` | Encapsulated PostScript | +| `exr` | OpenEXR | +| `fig` | | +| `gd`, `gd2` | GD/GD2 formats | +| `gif` | | +| `gtk` | GTK canvas | +| `ico` | Icon Image File Format | +| `imap` | | +| `cmapx` | Server-side and client-side imagemaps | +| `imap_np`, `cmapx_np` | Server-side and client-side imagemaps | +| `ismap` | Server-side imagemap (deprecated) | +| `jp2` | JPEG 2000 | +| `jpg`, `jpeg`, `jpe` | JPEG | +| `pct`, `pict` | PICT | +| `pdf` (default) | Portable Document Format (PDF) | +| `pic` | Kernighan's PIC graphics language | +| `plain`, `plain-ext` | Simple text format | +| `png` | Portable Network Graphics format | +| `pov` | POV-Ray markup language (prototype) | +| `ps` | PostScript | +| `ps2` | PostScript for PDF | +| `psd` | PSD | +| `sgi` | SGI | +| `svg`, `svgz` | Scalable Vector Graphics | +| `tga` | Truevision TGA | +| `tif`, `tiff` | TIFF (Tag Image File Format) | +| `tk` | TK graphics | +| `vml`, `vmlz` | Vector Markup Language (VML) | +| `vrml` | VRML | +| `wbmp` | Wireless BitMap format | +| `webp` | Image format for the Web | +| `xlib`, `x11` | Xlib canvas | + +--- + +### HTML-like labels + +Example of using HTML-like labels: + +~~~prolog +graph_to_gv_file( + graph( + [vertex(1,[]),vertex(2,[label=html(table([tr([td(a),td(b)]),tr([td(c),td(d)])]))])], + [edge(1,2,[label='From 1 to 2.'])], + [] + ), + File, + [] +). +~~~ + +![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example2.png \"Example graph with HTML-like labels.\") + +--- + +Developed during 2013-2014 by [Wouter Beek](http://www.wouterbeek.com). diff --git a/example1.png b/example1.png new file mode 100644 index 0000000..31e7ba6 Binary files /dev/null and b/example1.png differ diff --git a/example2.png b/example2.png new file mode 100644 index 0000000..6e44b16 Binary files /dev/null and b/example2.png differ diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 30761bb..3237b4b 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -54,11 +54,14 @@ :- use_module(plDcg(dcg_atom)). :- use_module(plDcg(dcg_cardinal)). :- use_module(plDcg(dcg_content)). +:- use_module(plDcg(dcg_quote)). :- use_module(plGraphViz(gv_html)). + + %! gv_attr_type(?Type:atom) is nondet. gv_attr_type(addDouble). @@ -95,6 +98,7 @@ gv_attr_type(style). gv_attr_type(viewPort). + %! addDouble(+Float:float)// . % An *addDouble* is represented by a Prolog float. @@ -103,6 +107,7 @@ addDouble(Float) -- double(Float). + %! addPoint(+Point:compound)// . % An *addPoint* is represented by a compound of the following form: % `point(X:float,Y:float,InputOnly:boolean)`. @@ -112,6 +117,7 @@ addPoint(Point) -- point(Point). + %! arrowType(+ArrowType:atom)// . arrowType(V) -- @@ -149,12 +155,16 @@ backwards_compatible(invempty). backwards_compatible(open). + +%! bool(+Value:boolean)// . + bool(false) -- \"false\". bool(false) -- \"no\". bool(true) -- \"true\". bool(true) -- \"yes\". + %! clusterMode(+ClusterMode:atom)// . clusterMode(V) -- @@ -166,6 +176,7 @@ clusterMode(local). clusterMode(none). + %! dirType(+DirectionType:oneof([back,both,forward,none]))// . dirType(DirType) -- @@ -178,44 +189,57 @@ dirType(forward). dirType(none). + +%! double(+Double:float)// . + double(Double1) -- % float//1 will check for float type. {Double2 is Double1 * 1.0}, float(Double2). -doubleList([H|T]) -- - double(H), - '*'(doubleList1, T, []). -doubleList1(Float) -- - \":\", - double(Float). +%! doubleList(+Doubles:list(float))// . + +doubleList(L) -- + '+'(double, L, [separator(colon)]). + %! escString(+String:atom)// . % @tbd Support for context-dependent replacements. escString(String) -- - atom(String). + quoted(atom(String)). + % @tbd layerList + % @tbd layerRange + +%! lblString(+String:compound)// . + +lblString(html(V)) -- + gv_html_like_label(V). lblString(V) -- escString(V). -lblString(V) -- - gv_html_like_label(V). + +%! int(+Integer:integer)// . + int(V) -- integer(V). + +%! outputMode(+OutputMode:atom)// . + outputMode(V) -- {outputMode(V)}, atom(V). @@ -225,9 +249,13 @@ outputMode(edgesfirst). outputMode(nodesfirst). + % @tbd packMode + +%! pagedir(+PageDirection:atom)// . + pagedir(V) -- {pagedir(V)}, atom(V). @@ -242,6 +270,7 @@ pagedir('TL'). pagedir('TR'). + %! point(+Point:compound)// . % A *point* is represented by a compound of the following form: % `point(X:float,Y:float,Changeable:boolean)`. @@ -256,13 +285,20 @@ input_changeable(false) -- \"\". input_changeable(true) -- \"!\". + +%! pointList(+Points:list(compound))// . + pointList(Points) -- '*'(point, Points, []). + % @tbd portPos + +%! quadType(+QuadType:atom)// . + quadType(V) -- {quadType(V)}, atom(V). @@ -272,6 +308,9 @@ quadType(none). quadType(normal). + +%! rankType(+RankType:atom)// . + rankType(V) -- {rankType(V)}, atom(V). @@ -283,6 +322,9 @@ rankType(sink). rankType(source). + +%! rankdir(+RankDirection:atom)// . + rankdir(V) -- {rankdir(V)}, atom(V). @@ -293,6 +335,9 @@ rankdir('RL'). rankdir('TB'). + +%! rect(+Rectangle:compound)// . + rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -- float(LowerLeftX), \",\", float(LowerLeftY), \",\", @@ -300,6 +345,9 @@ rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -- float(UpperRightY). + +%! shape(+Shape:atom)// . + shape(V) -- {polygon_based_shape(V)}, atom(V). @@ -361,6 +409,9 @@ polygon_based_shape(tripleoctagon). polygon_based_shape(utr). + +%! smoothType(+SmoothType:atom)// . + smoothType(V) -- {smoothType(V)}, atom(V). @@ -374,19 +425,23 @@ smoothType(spring). smoothType(triangle). + % @tbd splineType + % @tbd startType -%! string(?Content:atom)// . + +%! string(?String:atom)// . % A GraphViz string. string(Content) -- atom(Content). + %! style(?Context:oneof([cluster,edge,node]), ?Style:atom) is nondet. style(Context, Style) -- @@ -415,4 +470,5 @@ style(node, striped). style(node, wedged). + % @tbd viewPort diff --git a/gv_attrs.pl b/gv_attrs.pl index 649ef9c..e3ba03c 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -1,9 +1,8 @@ :- module( gv_attrs, [ - gv_attr/3 % +Context:oneof([cluster,edge,graph,node,subgraph]) - % +Attribute1:nvpair - % -Attribute2:nvpair + gv_attr_value//2 % +Context:oneof([cluster,edge,graph,node,subgraph]) + % +Attribute:nvpair ] ). @@ -25,6 +24,7 @@ Support for GraphViz attributes. :- use_module(plDcg(dcg_atom)). :- use_module(plDcg(dcg_content)). +:- use_module(plDcg(dcg_meta)). :- use_module(plDcg(dcg_generics)). :- use_module(plHtml(html)). @@ -58,32 +58,45 @@ Support for GraphViz attributes. -%! gv_attr( + + +%! gv_attr_value( %! +Context:oneof([cluster,edge,graph,node,subgraph]), -%! +Attribute1:nvpair, -%! +Attribute2:nvpair -%! ) is det. +%! +Attribute:nvpair +%! )// is det. % Uses the default value in case Value is uninstantiated. % Otherwise, performs a typecheck and converts the given value. -gv_attr(Context, N=V, N=V):- - var(V), !, - gv_attr(N, UsedBy, _, V, _, _), - % Check validity of context. - memberchk(Context, UsedBy). -gv_attr(Context, N=V1, N=V2):- - gv_attr(N, UsedBy, Types, _, Minimum, _), - % Check validity of context. - memberchk(Context, UsedBy), - % Check validity of value type. - member(Type, Types), - ( Type == style - - Dcg =.. [Type,Context,V1] - ; Dcg =.. [Type,V1] - ), - once(dcg_phrase(Dcg, V2)), - % Check validity of Value w.r.t. minimum value -- if available. - check_minimum(V1, Minimum). +% Use the default if no value is given. +gv_attr_value(Context, Name=Value) -- + { + var(Value), !, + gv_attr(Name, UsedBy, _, DefaultValue, _, _), + % Check validity of context. + memberchk(Context, UsedBy) + }, + gv_attr_value(Context, Name=DefaultValue). +gv_attr_value(Context, Name=Value) -- + { + % Check the validity of the context argument. + gv_attr(Name, UsedBy, Types, _, Minimum, _), + memberchk(Context, UsedBy), + + % Pick a value type non-deterministically. + member(Type, Types), + + % The `style` type is the only one that requires the context argument. + ( Type == style + - Dcg =.. [Type,Context] + ; Dcg =.. [Type] + ), + + % Check validity of Value w.r.t. minimum value -- if available. + check_minimum(Value, Minimum) + }, + dcg_call(Dcg, Value). + + diff --git a/gv_dot.pl b/gv_dot.pl index e67c469..6db4451 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -13,9 +13,16 @@ Methods for writing to the GraphViz DOT format. In GraphViz vertices are called 'nodes'. +~~~abnf +attr_list = \"[\" [a_list] \"]\" [attr_list] +a_list = ID \"=\" ID [\",\"] [a_list] +~~~ + +--- + @author Wouter Beek @see http://www.graphviz.org/content/dot-language -@version 2013/07, 2013/09, 2014/03-2014/06 +@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11 */ :- use_module(library(apply)). @@ -37,28 +44,21 @@ In GraphViz vertices are called 'nodes'. -%! gv_attribute(+Attribute:nvpair)// is det. -% A single GraphViz attribute. -% We assume that the attribute has already been validated. -gv_attribute(Name=Val) -- - gv_id(Name), \"=\", gv_id(Val), \";\". +%! gv_attr( +%! +Context:oneof([edge,graph,node]), +%! +Attribute:nvpair +%! )// is det. +% A single GraphViz attribute. +% We assume that the attribute has already been validated. -%! gv_attribute_list( -%! +Context:oneof([cluster,edge,graph,node,subgraph]), -%! +GraphAttributes:list(nvpair), -%! +Attributes:list(nvpair) -%! )// . -% ```abnf -% attr_list = \"[\" [a_list] \"]\" [attr_list] -% a_list = ID \"=\" ID [\",\"] [a_list] -% ``` +gv_attr(Context, Name=Value) -- + gv_id(Name), + \"=\", + gv_attr_value(Context, Name=Value), + \";\". -% Attributes occur between square brackets. -gv_attribute_list(Context, _, Attrs1) -- - {maplist(gv_attr(Context), Attrs1, Attrs2)}, - bracketed(square, '*'(gv_attribute, Attrs2, [])). %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . @@ -78,6 +78,7 @@ gv_compass_pt(sw) -- \"sw\". gv_compass_pt(w) -- \"w\". + %! gv_edge_operator(+Directed:boolean)// . % The binary edge operator between two vertices. % The operator that is used depends on whether the graph is directed or @@ -90,10 +91,10 @@ gv_edge_operator(false) -- !, \"--\". gv_edge_operator(true) -- arrow(right, 2). + %! gv_edge_statement( %! +Indent:nonneg, %! +Directed:boolean, -%! +GraphAttributes:list(nvpair), %! +EdgeTerm:compound %! )// is det. % A GraphViz statement describing an edge. @@ -108,7 +109,7 @@ gv_edge_operator(true) -- arrow(right, 2). % at the from and/or to location. % @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2. -gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- +gv_edge_statement(I, Directed, edge(FromId,ToId,EAttrs)) -- indent(I), gv_node_id(FromId), \" \", @@ -118,14 +119,14 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- % We want `colorscheme/1` from the edges and % `directionality/1` from the graph. - gv_attribute_list(edge, GAttrs, EAttrs), + bracketed(square, '*'(gv_attr(edge), EAttrs, [])), line_feed. + %! gv_generic_attributes_statement( %! +Kind:oneof([edge,graph,node]), %! +Indent:integer, -%! +GraphAttributes:list(nvpair), %! +CategoryAttributes:list(nvpair) %! )// % A GraphViz statement describing generic attributes for a category of items. @@ -140,11 +141,13 @@ gv_edge_statement(I, Directed, GAttrs, edge(FromId,ToId,EAttrs)) -- % attr_stmt = (graph / node / edge) attr_list % ``` -gv_generic_attributes_statement(_, _, _, []) -- [], !. -gv_generic_attributes_statement(Kind, I, GraphAttrs, KindAttrs) -- +gv_generic_attributes_statement(_, _, []) -- [], !. +gv_generic_attributes_statement(Kind, I, KindAttrs) -- indent(I), gv_kind(Kind), \" \", - gv_attribute_list(Kind, GraphAttrs, KindAttrs), line_feed. + bracketed(square, '*'(gv_attr(Kind), KindAttrs, [])), + line_feed. + %! gv_graph(+Gif:compound)// @@ -224,13 +227,13 @@ gv_graph0( {NewI is I + 1}, % Attributes that apply to the graph as a whole. - gv_generic_attributes_statement(graph, NewI, GAttrs, GAttrs), + gv_generic_attributes_statement(graph, NewI, GAttrs), % Attributes that are the same for all nodes. - gv_generic_attributes_statement(node, NewI, GAttrs, SharedVAttrs), + gv_generic_attributes_statement(node, NewI, SharedVAttrs), % Attributes that are the same for all edges. - gv_generic_attributes_statement(edge, NewI, GAttrs, SharedEAttrs), + gv_generic_attributes_statement(edge, NewI, SharedEAttrs), % Only add a line_feed if some content was already written % and some content is about to be written. @@ -249,19 +252,19 @@ gv_graph0( ), % The list of GraphViz nodes. - '*'(gv_node_statement(NewI, GAttrs), NewVTerms, []), + '*'(gv_node_statement(NewI), NewVTerms, []), ({NewVTerms == []} - \"\" ; line_feed), % The ranked GraphViz nodes (displayed at the same height). - '*'(gv_ranked_node_collection(NewI, GAttrs), RankedVTerms, []), + '*'(gv_ranked_node_collection(NewI), RankedVTerms, []), ({RankedVTerms == []} - \"\" ; line_feed), { findall( edge(FromId,ToId,[]), ( - nth0(Index1, RankedVTerms, rank(vertex(FromId,_,_),_)), - nth0(Index2, RankedVTerms, rank(vertex(ToId,_,_),_)), + nth0(Index1, RankedVTerms, rank(vertex(FromId,_),_)), + nth0(Index2, RankedVTerms, rank(vertex(ToId,_),_)), % We assume that the rank vertices are nicely ordered. succ(Index1, Index2) ), @@ -270,10 +273,10 @@ gv_graph0( }, % The rank edges. - '*'(gv_edge_statement(NewI, Directed, GAttrs), RankEdges, []), + '*'(gv_edge_statement(NewI, Directed), RankEdges, []), % The non-rank edges. - '*'(gv_edge_statement(NewI, Directed, GAttrs), NewETerms, []), + '*'(gv_edge_statement(NewI, Directed), NewETerms, []), % Note that we do not include a line_feed here. @@ -281,6 +284,7 @@ gv_graph0( indent(I). + %! gv_graph_type(+Directed:boolean)// . % The type of graph that is represented. @@ -288,6 +292,7 @@ gv_graph_type(false) -- \"graph\". gv_graph_type(true) -- \"digraph\". + %! gv_id(?Atom:atom)// is det. % Parse a GraphViz identifier. % There are 4 variants: @@ -347,6 +352,7 @@ gv_id_rest([H|T]) -- gv_id_rest(T). + %! gv_keyword(+Codes:list(code)) is semidet. % Succeeds if the given codes for a GraphViz reserved keyword. @@ -367,6 +373,7 @@ gv_keyword -- \"strict\". gv_keyword -- \"subgraph\". + %! gv_kind(+Kind:oneof([edge,graph,node]))// . gv_kind(edge) -- \"edge\". @@ -374,6 +381,7 @@ gv_kind(graph) -- \"graph\". gv_kind(node) -- \"node\". + %! gv_node_id(+NodeId:atom)// . % GraphViz node identifiers can be of the following two types: % 1. A GraphViz identifier, see gv_id//1. @@ -389,17 +397,16 @@ gv_node_id(Id) -- % gv_port. -%! gv_node_statement( -%! +Indent:integer, -%! +GraphAttributes, -%! +VertexTerm:compound -%! )// . + +%! gv_node_statement(+Indent:nonneg, +VertexTerm:compound)// . % A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes'). -gv_node_statement(I, GraphAttrs, vertex(Id,_,VAttrs)) -- +gv_node_statement(I, vertex(Id,VAttrs)) -- indent(I), gv_node_id(Id), \" \", - gv_attribute_list(node, GraphAttrs, VAttrs), line_feed. + bracketed(square, '*'(gv_attr(node), VAttrs, [])), + line_feed. + gv_port -- @@ -431,6 +438,7 @@ gv_port_location -- ). + gv_quoted_string([]) -- []. % Just to be sure, we do not allow the double quote % that closes the string to be escaped. @@ -450,21 +458,22 @@ gv_quoted_string([H|T]) -- gv_quoted_string(T). -gv_ranked_node_collection( - I, - GraphAttrs, - rank(Rank_V_Term,Content_V_Terms) -) -- + +gv_ranked_node_collection(I, rank(Rank_V_Term,Content_V_Terms)) -- indent(I), bracketed(curly, ( line_feed, % The rank attribute. {NewI is I + 1}, - indent(NewI), gv_attribute(rank=same), \";\", line_feed, + indent(NewI), + gv_attr(subgraph, rank=same), + \";\", + line_feed, + % Vertice statements. '*'( - gv_node_statement(NewI, GraphAttrs), + gv_node_statement(NewI), [Rank_V_Term|Content_V_Terms], [] ), @@ -475,6 +484,7 @@ gv_ranked_node_collection( line_feed. + %! gv_strict(+Strict:boolean)// is det. % The keyword denoting that the graph is strict, i.e., has no self-arcs and % no multi-edges. @@ -485,7 +495,9 @@ gv_strict(true) -- \"strict \". -% Helpers + + +% HELPERS add_default_nvpair(Attrs1, N, Default, Attrs2):- add_default_nvpair(Attrs1, N, Default, _, Attrs2). @@ -508,12 +520,15 @@ extract_shared(Argss, Shared):- remove_shared_attributes(Shared, Args1, Args2):- ord_subtract(Args1, Shared, Args2). -shared_attributes(Terms1, Shared, Terms2):- - maplist(term_components(Func), Terms1, Args1, Args2, Args3a), - extract_shared(Args3a, Shared), - maplist(remove_shared_attributes(Shared), Args3a, Args3b), - maplist(term_components(Func), Terms2, Args1, Args2, Args3b). +shared_attributes(Terms1, SharedAs, Terms2):- + maplist(term_to_attrs, Terms1, As1), + extract_shared(As1, SharedAs), + maplist(remove_shared_attributes(SharedAs), As1, As2), + maplist(term_change_attrs, Terms1, As2, Terms2). + +term_change_attrs(edge(From,To,_), A, edge(From,To,A)). +term_change_attrs(vertex(Id,_), A, vertex(Id,A)). -term_components(Func, Term, Arg1, Arg2, Arg3):- - Term =.. [Func,Arg1,Arg2,Arg3]. +term_to_attrs(edge(_,_,A), A). +term_to_attrs(vertex(_,A), A). diff --git a/gv_file.pl b/gv_file.pl index 704e2d4..a7901e4 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -1,14 +1,14 @@ :- module( gv_file, [ - file_to_gv/2, % +File:atom + file_to_gv/2, % +InputFile:atom % +Options:list(nvpair) - file_to_gv/3, % +FromFile:atom - % ?ToFile:atom + file_to_gv/3, % +InputFile:atom + % ?OutputFile:atom % +Options:list(nvpair) - gif_to_gv_file/3, % +GraphInterchangeFormat:compound - % ?ToFile:atom - % +Options:list(nvpair) + graph_to_gv_file/3, % +Graph:compound + % ?OutputFile:atom + % +Options:list(nvpair) open_dot/1 % +File:file ] ). @@ -35,44 +35,6 @@ and GraphViz output files or SVG DOM structures. :- use_module(plGraphViz(gv_dot)). -:- dynamic(user:file_type_program/2). -:- multifile(user:file_type_program/2). - -:- dynamic(user:module_uses/2). -:- multifile(user:module_uses/2). - -:- dynamic(user:prolog_file_type/2). -:- multifile(user:prolog_file_type/2). - -% Register DOT. -:- db_add_novel(user:prolog_file_type(dot, dot)). -:- db_add_novel(user:prolog_file_type(dot, graphviz)). -:- db_add_novel(user:file_type_program(dot, dotty)). -:- db_add_novel(user:file_type_program(dot, dotx)). -:- db_add_novel(user:module_uses(gv_file, file_type(dot))). - -% Register JPG/JPEG. -:- db_add_novel(user:prolog_file_type(jpeg, jpeg)). -:- db_add_novel(user:prolog_file_type(jpeg, graphviz_output)). -:- db_add_novel(user:prolog_file_type(jpg, jpeg)). -:- db_add_novel(user:prolog_file_type(jpg, graphviz_output)). - -% Register PDF. -:- db_add_novel(user:prolog_file_type(pdf, pdf)). -:- db_add_novel(user:prolog_file_type(pdf, graphviz_output)). - -% Register PNG. -:- db_add_novel(user:prolog_file_type(png, png)). -:- db_add_novel(user:prolog_file_type(png, graphviz_output)). - -% Register SVG. -:- db_add_novel(user:prolog_file_type(svg, graphviz_output)). -:- db_add_novel(user:prolog_file_type(svg, svg)). - -% Register XDOT. -:- db_add_novel(user:prolog_file_type(xdot, graphviz_output)). -:- db_add_novel(user:prolog_file_type(xdot, xdot)). - :- predicate_options(codes_to_gv_file/3, 3, [ pass_to(file_to_gv/3, 3) ]). @@ -80,13 +42,13 @@ and GraphViz output files or SVG DOM structures. pass_to(file_to_gv/3, 3) ]). :- predicate_options(file_to_gv/3, 3, [ - method(+oneof([dot,sfdp])), - to_file_type(+oneof([dot,jpeg,pdf,svg,xdot])) + method(+atom), + output(+atom) ]). :- predicate_options(gif_to_svg_dom/3, 3, [ - pass_to(gif_to_gv_file/3, 3) + pass_to(graph_to_gv_file/3, 3) ]). -:- predicate_options(gif_to_gv_file/3, 3, [ +:- predicate_options(graph_to_gv_file/3, 3, [ pass_to(codes_to_gv_file/3, 3) ]). @@ -94,81 +56,93 @@ and GraphViz output files or SVG DOM structures. %! codes_to_gv_file( %! +Codes:list(code), -%! ?ToFile:atom, +%! ?OutputFile:atom, %! +Options:list(nvpair) %! ) is det. -codes_to_gv_file(Codes, ToFile, Options):- - absolute_file_name(data(tmp), TmpFile, [access(write),file_type(dot)]), +codes_to_gv_file(Codes, OutputFile, Options):- + absolute_file_name(data(tmp), TmpFile, [access(write),extensions([dot])]), setup_call_cleanup( open(TmpFile, write, Write, [encoding(utf8)]), put_codes(Write, Codes), close(Write) ), - file_to_gv(TmpFile, ToFile, Options). + file_to_gv(TmpFile, OutputFile, Options). + -%! file_to_gv(+FromFile:atom, +Options:list(nvpair)) is det. +%! file_to_gv(+InputFile:atom, +Options:list(nvpair)) is det. -file_to_gv(FromFile, Options):- - file_to_gv(FromFile, _, Options). +file_to_gv(InputFile, Options):- + file_to_gv(InputFile, _, Options). -%! file_to_gv(+FromFile:atom, ?ToFile:atom, +Options:list(nvpair)) is det. +%! file_to_gv( +%! +InputFile:atom, +%! ?OutputFile:atom, +%! +Options:list(nvpair) +%! ) is det. % Converts a GraphViz DOT file to an image file, using a specific % visualization method. -file_to_gv(FromFile, ToFile, Options):- - option(to_file_type(dot), Options), !, - rename_file(FromFile, ToFile). -file_to_gv(FromFile, ToFile, Options):- - % The method option. +file_to_gv(InputFile, OutputFile, Options):- + option(output(dot), Options), !, + ( var(OutputFile) + - OutputFile = InputFile + ; rename_file(InputFile, OutputFile) + ). +file_to_gv(InputFile, OutputFile, Options):- + % Typecheck for `method` option. option(method(Method), Options, dot), - must_be(oneof([dot,sfdp]), Method), + findall(Method0, gv_method(Method0), Methods), + must_be(oneof(Methods), Method), - % The file type option. - option(to_file_type(ToFileType), Options, pdf), - prolog_file_type(ToExtension, ToFileType), - prolog_file_type(ToExtension, graphviz_output), !, + % Typecheck for `output` option. + option(output(OutputType), Options, pdf), + findall(OutputType0, gv_output_type(OutputType0), OutputTypes), + must_be(oneof(OutputTypes), OutputType), % The output file is either given or created. - ( var(ToFile) - - user:prolog_file_type(ToExtension, ToFileType), - file_alternative(FromFile, _, _, ToExtension, ToFile) - ; is_absolute_file_name(ToFile), + ( var(OutputFile) + - file_alternative(InputFile, _, _, OutputType, OutputFile) + ; is_absolute_file_name(OutputFile), % The given output file must match a certain file extension. - file_name_extension(_, ToExtension, ToFile) + file_name_extension(_, OutputType, OutputFile) ), - % Now that we have the output file we can prevent the - % file type / file extension translation predicates from bakctracking. - !, % Run the GraphViz conversion command in the shell. - format(atom(OutputType), '-T~w', [ToExtension]), + format(atom(OutputTypeFlag), '-T~a', [OutputType]), + format(atom(OutputFileFlag), '-o~a', [OutputFile]), process_create( path(Method), % @tbd Windows hack: %%%%'C:\\\\Program Files (x86)\\\\Graphviz2.38\\\\bin\\\\dot.exe', - [OutputType,FromFile,'-o',ToFile], + [OutputTypeFlag,file(InputFile),OutputFileFlag], [process(PID)] ), process_wait(PID, exit(ShellStatus)), exit_code_handler('GraphViz', ShellStatus). -%! gif_to_gv_file(+Gif:compound, ?ToFile:atom, +Options:list(nvpair)) is det. + +%! graph_to_gv_file( +%! +Graph:compound, +%! ?OutputFile:atom, +%! +Options:list(nvpair) +%! ) is det. % Returns a file containing a GraphViz visualization of the given graph. % % The following options are supported: -% * =|method(+Method:oneof([dot,sfdp])|= +% * `method(+Method:atom` % The algorithm used by GraphViz for positioning the tree nodes. % Either =dot= (default) or =sfdp=. -% * =|to_file_type(+FileType:oneof([dot,jpeg,pdf,svg,xdot])|= +% * `output(+FileType:atom)` % The file type of the generated GraphViz file. % Default: `pdf`. -gif_to_gv_file(Gif, ToFile, Options):- +graph_to_gv_file(Gif, OutputFile, Options):- once(phrase(gv_graph(Gif), Codes)), - codes_to_gv_file(Codes, ToFile, Options). + codes_to_gv_file(Codes, OutputFile, Options). + %! open_dot(+File:atom) is det. @@ -181,3 +155,69 @@ open_dot(File):- once(find_program_by_file_type(dot, Program)), run_program(Program, [File]). + + + +% HELPERS + +gv_method(circo). +gv_method(dot). +gv_method(fdp). +gv_method(neato). +gv_method(osage). +gv_method(sfdp). +gv_method(twopi). + + + +gv_output_type(bmp). +gv_output_type(canon). +gv_output_type(dot). +gv_output_type(gv). +gv_output_type(xdot). +gv_output_type('xdot1.2'). +gv_output_type('xdot1.4'). +gv_output_type(cgimage). +gv_output_type(cmap). +gv_output_type(eps). +gv_output_type(exr). +gv_output_type(fig). +gv_output_type(gd). +gv_output_type(gd2). +gv_output_type(gif). +gv_output_type(gtk). +gv_output_type(ico). +gv_output_type(imap). +gv_output_type(cmapx). +gv_output_type(imap_np). +gv_output_type(cmapx_np). +gv_output_type(ismap). +gv_output_type(jp2). +gv_output_type(jpg). +gv_output_type(jpeg). +gv_output_type(jpe). +gv_output_type(pct). +gv_output_type(pict). +gv_output_type(pdf). +gv_output_type(pic). +gv_output_type(plain). +gv_output_type('plain-ext'). +gv_output_type(png). +gv_output_type(pov). +gv_output_type(ps). +gv_output_type(ps2). +gv_output_type(psd). +gv_output_type(sgi). +gv_output_type(svg). +gv_output_type(svgz). +gv_output_type(tga). +gv_output_type(tif). +gv_output_type(tiff). +gv_output_type(tk). +gv_output_type(vml). +gv_output_type(vmlz). +gv_output_type(vrml). +gv_output_type(wbmp). +gv_output_type(webp). +gv_output_type(xlib). +gv_output_type(x11). diff --git a/gv_html.pl b/gv_html.pl index 08306f0..9a4d33a 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -9,7 +9,7 @@ Grammar taken from the GraphViz Web site: -``` +~~~ label : text | table text : textitem @@ -34,7 +34,9 @@ cells : cell | cells  cell cell:  label  |    -``` +~~~ + +--- @author Wouter Beek @see http://www.graphviz.org/content/node-shapes#html @@ -49,49 +51,56 @@ cell:  label  + + %! gv_html_like_label(?Content:compound)// . gv_html_like_label(Content) -- bracketed(angular, label(Content)). + %! cell(?Contents:compound)// . -% Supported attributes for TD: -% ``` -% ALIGN=\"CENTER|LEFT|RIGHT|TEXT\" -% BALIGN=\"CENTER|LEFT|RIGHT\" -% BGCOLOR=\"color\" -% BORDER=\"value\" -% CELLPADDING=\"value\" -% CELLSPACING=\"value\" -% COLOR=\"color\" -% COLSPAN=\"value\" -% FIXEDSIZE=\"FALSE|TRUE\" -% GRADIENTANGLE=\"value\" -% HEIGHT=\"value\" -% HREF=\"value\" -% ID=\"value\" -% PORT=\"portName\" -% ROWSPAN=\"value\" -% SIDES=\"value\" -% STYLE=\"value\" -% TARGET=\"value\" -% TITLE=\"value\" -% TOOLTIP=\"value\" -% VALIGN=\"MIDDLE|BOTTOM|TOP\" -% WIDTH=\"value\" -% ``` +% Supported attributes for `TD`: +% - `ALIGN=\"CENTER|LEFT|RIGHT|TEXT\"` +% - `BALIGN=\"CENTER|LEFT|RIGHT\"` +% - `BGCOLOR=\"color\"` +% - `BORDER=\"value\"` +% - `CELLPADDING=\"value\"` +% - `CELLSPACING=\"value\"` +% - `COLOR=\"color\"` +% - `COLSPAN=\"value\"` +% - `FIXEDSIZE=\"FALSE|TRUE\"` +% - `GRADIENTANGLE=\"value\"` +% - `HEIGHT=\"value\"` +% - `HREF=\"value\"` +% - `ID=\"value\"` +% - `PORT=\"portName\"` +% - `ROWSPAN=\"value\"` +% - `SIDES=\"value\"` +% - `STYLE=\"value\"` +% - `TARGET=\"value\"` +% - `TITLE=\"value\"` +% - `TOOLTIP=\"value\"` +% - `VALIGN=\"MIDDLE|BOTTOM|TOP\"` +% - `WIDTH=\"value\"` % -% Supported attributes for IMG: -% ``` -% SCALE=\"FALSE|TRUE|WIDTH|HEIGHT|BOTH\" -% SRC=\"value\" -% ``` +% Supported attributes for `IMG`: +% - `SCALE=\"FALSE|TRUE|WIDTH|HEIGHT|BOTH\"` +% - `SRC=\"value\"` cell(td(Contents)) -- - html_element(td, [], label(Contents)). -cell(td(img)) -- - html_element(td, [], html_element(img)). + cell(td([],Contents)). +cell(td(Attrs1,Image)) -- + {( Image =.. [img,Attrs2] + - true + ; Image == img + - Attrs2 = [] + )}, + html_element(td, Attrs1, html_element(img,Attrs2)). +cell(td(Attrs,Contents)) -- + html_element(td, Attrs, label(Contents)). + %! cells(?Contents:list(compound))// . @@ -107,19 +116,22 @@ cells([H]) -- cell(H). + %! label(?Content:compound)// . % GraphViz HTML-like label. label(Content) -- - text(Content). -label(Content) -- table(Content). +label(Content) -- + text(Content). + %! row(?Contents:compound)// . row(tr(Contents)) -- - html_element(tr, [], cell(Contents)). + html_element(tr, [], cells(Contents)). + %! rows(?Contents:list)// . @@ -127,72 +139,108 @@ row(tr(Contents)) -- rows([H|T]) -- row(H), rows(T). -rows([H,hr|T]) -- - row(H), +rows([hr|T]) -- html_element(hr), rows(T). rows([H]) -- row(H). + %! table(?Contents:compound)// . -% Supported attributes for TABLE: -% ``` -% ALIGN=\"CENTER|LEFT|RIGHT\" -% BGCOLOR=\"color\" -% BORDER=\"value\" -% CELLBORDER=\"value\" -% CELLPADDING=\"value\" -% CELLSPACING=\"value\" -% COLOR=\"color\" -% COLUMNS=\"value\" -% FIXEDSIZE=\"FALSE|TRUE\" -% GRADIENTANGLE=\"value\" -% HEIGHT=\"value\" -% HREF=\"value\" -% ID=\"value\" -% PORT=\"portName\" -% ROWS=\"value\" -% SIDES=\"value\" -% STYLE=\"value\" -% TARGET=\"value\" -% TITLE=\"value\" -% TOOLTIP=\"value\" -% VALIGN=\"MIDDLE|BOTTOM|TOP\" -% WIDTH=\"value\" -% ``` +% ~~~ +% table : [  ]  rows  [  ] +% ~~~ % -% Supported attributes for FONT: -% ``` -% COLOR=\"color\" -% FACE=\"fontname\" -% POINT-SIZE=\"value\" -% ``` - +% Supported attributes for `TABLE`: +% - `ALIGN=\"CENTER|LEFT|RIGHT\"` +% - `BGCOLOR=\"color\"` +% - `BORDER=\"value\"` +% - `CELLBORDER=\"value\"` +% - `CELLPADDING=\"value\"` +% - `CELLSPACING=\"value\"` +% - `COLOR=\"color\"` +% - `COLUMNS=\"value\"` +% - `FIXEDSIZE=\"FALSE|TRUE\"` +% - `GRADIENTANGLE=\"value\"` +% - `HEIGHT=\"value\"` +% - `HREF=\"value\"` +% - `ID=\"value\"` +% - `PORT=\"portName\"` +% - `ROWS=\"value\"` +% - `SIDES=\"value\"` +% - `STYLE=\"value\"` +% - `TARGET=\"value\"` +% - `TITLE=\"value\"` +% - `TOOLTIP=\"value\"` +% - `VALIGN=\"MIDDLE|BOTTOM|TOP\"` +% - `WIDTH=\"value\"` +% +% Supported attributes for `FONT`: +% - `COLOR=\"color\"` +% Sets the color of the font within the scope of `...`, +% or the border color of the table or cell within the scope of +% `...`, or `...`. +% This color can be overridden by a `COLOR` attribute in descendents. +% By default, the font color is determined by the `fontcolor` attribute +% of the corresponding node, edge or graph, and the border color is +% determined by the color attribute of the corresponding node, edge or +% graph. +% - `FACE=\"fontname\"` +% - `POINT-SIZE=\"value\"` + +table(table(Contents)) -- + table(table([],Contents)). table(table(Attrs,Contents)) -- html_element(table, Attrs, rows(Contents)). -table(table(font(Contents))) -- - html_element(font, [], html_element(table, [], rows(Contents))). +table(font(Table)) -- + table(font([],Table)). +table(font(Attrs1,Table)) -- + {( Table =.. [table,Attrs2,Contents] + - true + ; Table =.. [table,Contents] + - Attrs2 = [] + )}, + html_element(font, Attrs1, table(table(Attrs2,Contents))). + %! text(?Contents:list)// . +% ~~~ +% text : textitem +% | text textitem +% ~~~ text(Contents) -- + {is_list(Contents)}, !, '+'(textitem, Contents, []). - - -%! textitem(?Content)// . +text(Content) -- + text([Content]). + + + +%! textitem(?Content:compound)// . +% ~~~ +% textitem : string +% |  +% |  text  +% |  text  +% |  text  +% |  text  +% |  text  +% |  text  +% |  text  +% |  text  +% ~~~ +% % Supported attributes for BR: -% ``` -% ALIGN=\"CENTER|LEFT|RIGHT\" -% ``` +% - `ALIGN=\"CENTER|LEFT|RIGHT\"` -textitem(string(String)) -- - html_string(String). -textitem(entity(Name)) -- - html_entity(Name). +textitem(br) -- + textitem(br([])). textitem(br(Attrs)) -- html_element(br, Attrs). +% Compound term: parser. textitem(Compound) -- {var(Compound)}, !, html_element(Name, _, text(Content)), @@ -200,12 +248,17 @@ textitem(Compound) -- supported_html_element(Name), Compound =.. [Name,Content] }. +% Compound term: generator. textitem(Compound) -- { Compound =.. [Name,Content], supported_html_element(Name) }, html_element(Name, _, text(Content)). +textitem(String) -- + html_string(String). + + diff --git a/plDcg b/plDcg index c61080f..d2e4a8a 160000 --- a/plDcg +++ b/plDcg @@ -1 +1 @@ -Subproject commit c61080f3d8df6ba6d48b0d70f5ba52047c8cbd29 +Subproject commit d2e4a8a094b7c405222574a4f9fe8c472296d7e6 diff --git a/plHtml b/plHtml index c98f740..dfd7c27 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit c98f740d593fff74bfa3cf3d08af13c857daa899 +Subproject commit dfd7c27dfd102e8eb6bfd9c516fccfcd23b5abf0 diff --git a/plUri b/plUri index 66a7652..0be7e9c 160000 --- a/plUri +++ b/plUri @@ -1 +1 @@ -Subproject commit 66a7652bc1ab6a4dc1fc790b09894d6c51d42dcf +Subproject commit 0be7e9cae7b42dea30f08aa751438d382387b8a2 ``` 59: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ af5d96d å’Œå˜åŠ¨å ab4b616  [back to content](#compare) ``` diff diff --git a/README.md b/README.md index f89c694..fff981c 100644 --- a/README.md +++ b/README.md @@ -3,6 +3,40 @@ plGraphViz Easily export graphs represented as Prolog terms to [GraphViz](http://www.graphviz.org/). +The Prolog terms have the following form: + +~~~prolog +graph(Vertices, Edges, GraphAttrs) +~~~ + +`Vertices` and `Edges` are lists of compounds terms of + the following form: + +~~~prolog +vertex(Id, VertexAttrs) +edges(FromId, ToId, EdgeAttrs) +~~~ + +`Id` identifies a vertex and need not occur in any of the edges + (i.e., unconnected vertices are allowed). +`FromId` and `ToId` may occur in the list of vertices, + in order to draw an edge between vertices with set attributes. + +Attributes have the form `Name=Value`. +`GraphAttrs` are attributes of the graph. +`VertexAttrs` are attributes of the vertex. +`EdgeAttrs` are attributes of the edge. + +Attribute values are given as Prolog terms as well, + and are type-checked before exporting. +Many of the GraphViz attributes are supported. +New ones are added on an as-needed bases + (open an issue on Github if you want to see a specific feature added). +Supports HTML-like labels, allowing complex tables to be shown + inside vertices. +Support for vertex clusters is currently under way. + +--- ### Example @@ -17,14 +51,14 @@ $ swipl run.pl File = 'PATH/plGraphViz/data/tmp.png' ~~~ +![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example1.png \"Example graph.\") + The graphic can be saved to a different file by instantiating the `File` argument. -![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example1.png \"Example graph.\") - --- -### Method option +### 'Method' option Option `method(+atom)` sets the drawing method that is used by GraphViz to place the vertices and edges. @@ -41,7 +75,7 @@ The following values are supported. --- -### Output type option +### 'Output' option Option `output(+atom)` sets the type of file the graph is written to. The following values are supported. ``` 60: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ab4b616 å’Œå˜åŠ¨å 74bd19d  [back to content](#compare) ``` diff diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 3237b4b..4678991 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -438,7 +438,7 @@ smoothType(triangle). % A GraphViz string. string(Content) -- - atom(Content). + quoted(atom(Content)). diff --git a/gv_dot.pl b/gv_dot.pl index 6db4451..d01b656 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -1,7 +1,7 @@ :- module( gv_dot, [ - gv_graph//1 % +Gif:compound + gv_graph//1 % +Graph:compound ] ). @@ -150,7 +150,7 @@ gv_generic_attributes_statement(Kind, I, KindAttrs) -- -%! gv_graph(+Gif:compound)// +%! gv_graph(+Graph:compound)// % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: % * `directed(+boolean)` ``` 61: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 74bd19d å’Œå˜åŠ¨å 8ffff6f  [back to content](#compare) ``` diff diff --git a/README.md b/README.md index fff981c..9413d36 100644 --- a/README.md +++ b/README.md @@ -38,6 +38,14 @@ Support for vertex clusters is currently under way. --- +### Installation + +~~~shell +$ git clone https://github.com/wouterbeek/plGraphViz.git +$ cd plGraphViz +$ git submodule update --init +~~~ + ### Example ~~~prolog diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 4678991..3237b4b 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -438,7 +438,7 @@ smoothType(triangle). % A GraphViz string. string(Content) -- - quoted(atom(Content)). + atom(Content). diff --git a/gv_dot.pl b/gv_dot.pl index d01b656..6db4451 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -1,7 +1,7 @@ :- module( gv_dot, [ - gv_graph//1 % +Graph:compound + gv_graph//1 % +Gif:compound ] ). @@ -150,7 +150,7 @@ gv_generic_attributes_statement(Kind, I, KindAttrs) -- -%! gv_graph(+Graph:compound)// +%! gv_graph(+Gif:compound)// % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: % * `directed(+boolean)` ``` 62: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 8ffff6f å’Œå˜åŠ¨å ac3423a  [back to content](#compare) ``` diff diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 3237b4b..4678991 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -438,7 +438,7 @@ smoothType(triangle). % A GraphViz string. string(Content) -- - atom(Content). + quoted(atom(Content)). diff --git a/gv_dot.pl b/gv_dot.pl index 6db4451..d01b656 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -1,7 +1,7 @@ :- module( gv_dot, [ - gv_graph//1 % +Gif:compound + gv_graph//1 % +Graph:compound ] ). @@ -150,7 +150,7 @@ gv_generic_attributes_statement(Kind, I, KindAttrs) -- -%! gv_graph(+Gif:compound)// +%! gv_graph(+Graph:compound)// % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: % * `directed(+boolean)` ``` 63: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ac3423a å’Œå˜åŠ¨å 57932e4  [back to content](#compare) ``` diff diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 1b264ab..3c731a0 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 1b264ab8b668b44035c96f320f8798f7940ad2fa +Subproject commit 3c731a03db6ee32031815d24c505e784273f46ef ``` 64: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 57932e4 å’Œå˜åŠ¨å 315b16e  [back to content](#compare) ``` diff diff --git a/gv_file.pl b/gv_file.pl index a7901e4..efd8c89 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -45,7 +45,7 @@ and GraphViz output files or SVG DOM structures. method(+atom), output(+atom) ]). -:- predicate_options(gif_to_svg_dom/3, 3, [ +:- predicate_options(graph_to_svg_dom/3, 3, [ pass_to(graph_to_gv_file/3, 3) ]). :- predicate_options(graph_to_gv_file/3, 3, [ ``` 65: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 315b16e å’Œå˜åŠ¨å 898b5d2  [back to content](#compare) ``` diff diff --git a/gv_file.pl b/gv_file.pl index efd8c89..52506e8 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -29,7 +29,6 @@ and GraphViz output files or SVG DOM structures. :- use_module(library(process)). :- use_module(generics(code_ext)). -:- use_module(generics(db_ext)). :- use_module(os(file_ext)). :- use_module(os(run_ext)). @@ -45,9 +44,6 @@ and GraphViz output files or SVG DOM structures. method(+atom), output(+atom) ]). -:- predicate_options(graph_to_svg_dom/3, 3, [ - pass_to(graph_to_gv_file/3, 3) - ]). :- predicate_options(graph_to_gv_file/3, 3, [ pass_to(codes_to_gv_file/3, 3) ]). ``` 66: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 898b5d2 å’Œå˜åŠ¨å 4279a49  [back to content](#compare) ``` diff diff --git a/gv_file.pl b/gv_file.pl index 52506e8..188cfa6 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -6,9 +6,9 @@ file_to_gv/3, % +InputFile:atom % ?OutputFile:atom % +Options:list(nvpair) - graph_to_gv_file/3, % +Graph:compound - % ?OutputFile:atom - % +Options:list(nvpair) + export_graph_to_gv_file/3, % +ExportGraph:compound + % ?OutputFile:atom + % +Options:list(nvpair) open_dot/1 % +File:file ] ). @@ -22,7 +22,7 @@ Also converts between GraphViz DOT formatted files and GraphViz output files or SVG DOM structures. @author Wouter Beek -@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08 +@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08, 2014/11 */ :- use_module(library(option)). @@ -34,6 +34,11 @@ and GraphViz output files or SVG DOM structures. :- use_module(plGraphViz(gv_dot)). +:- dynamic(user:prolog_file_type/2). +:- multifile(user:prolog_file_type/2). + +user:prolog_file_type(dot, dot). + :- predicate_options(codes_to_gv_file/3, 3, [ pass_to(file_to_gv/3, 3) ]). @@ -44,12 +49,14 @@ and GraphViz output files or SVG DOM structures. method(+atom), output(+atom) ]). -:- predicate_options(graph_to_gv_file/3, 3, [ +:- predicate_options(export_graph_to_gv_file/3, 3, [ pass_to(codes_to_gv_file/3, 3) ]). + + %! codes_to_gv_file( %! +Codes:list(code), %! ?OutputFile:atom, @@ -120,23 +127,23 @@ file_to_gv(InputFile, OutputFile, Options):- -%! graph_to_gv_file( -%! +Graph:compound, +%! export_graph_to_gv_file( +%! +ExportGraph:compound, %! ?OutputFile:atom, %! +Options:list(nvpair) %! ) is det. % Returns a file containing a GraphViz visualization of the given graph. % % The following options are supported: -% * `method(+Method:atom` +% - `method(+Method:atom` % The algorithm used by GraphViz for positioning the tree nodes. % Either =dot= (default) or =sfdp=. -% * `output(+FileType:atom)` +% - `output(+FileType:atom)` % The file type of the generated GraphViz file. % Default: `pdf`. -graph_to_gv_file(Gif, OutputFile, Options):- - once(phrase(gv_graph(Gif), Codes)), +export_graph_to_gv_file(ExportGraph, OutputFile, Options):- + once(phrase(gv_graph(ExportGraph), Codes)), codes_to_gv_file(Codes, OutputFile, Options). @@ -154,6 +161,7 @@ open_dot(File):- + % HELPERS gv_method(circo). ``` 67: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 4279a49 å’Œå˜åŠ¨å c173073  [back to content](#compare) ``` diff diff --git a/gv_dot.pl b/gv_dot.pl index d01b656..a4197a9 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -13,10 +13,10 @@ Methods for writing to the GraphViz DOT format. In GraphViz vertices are called 'nodes'. -~~~abnf +```abnf attr_list = \"[\" [a_list] \"]\" [attr_list] a_list = ID \"=\" ID [\",\"] [a_list] -~~~ +``` --- diff --git a/gv_html.pl b/gv_html.pl index 9a4d33a..63f2d82 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -9,7 +9,7 @@ Grammar taken from the GraphViz Web site: -~~~ +``` label : text | table text : textitem @@ -34,7 +34,7 @@ cells : cell | cells  cell cell:  label  |    -~~~ +``` --- @@ -148,9 +148,9 @@ rows([H]) -- %! table(?Contents:compound)// . -% ~~~ +% ``` % table : [  ]  rows  [  ] -% ~~~ +% ``` % % Supported attributes for `TABLE`: % - `ALIGN=\"CENTER|LEFT|RIGHT\"` @@ -206,10 +206,10 @@ table(font(Attrs1,Table)) -- %! text(?Contents:list)// . -% ~~~ +% ``` % text : textitem % | text textitem -% ~~~ +% ``` text(Contents) -- {is_list(Contents)}, !, @@ -220,7 +220,7 @@ text(Content) -- %! textitem(?Content:compound)// . -% ~~~ +% ``` % textitem : string % |  % |  text  @@ -231,7 +231,7 @@ text(Content) -- % |  text  % |  text  % |  text  -% ~~~ +% ``` % % Supported attributes for BR: % - `ALIGN=\"CENTER|LEFT|RIGHT\"` ``` 68: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c173073 å’Œå˜åŠ¨å 107c515  [back to content](#compare) ``` diff diff --git a/gv_attrs.pl b/gv_attrs.pl index e3ba03c..6e61373 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -129,7 +129,7 @@ assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):- gv_attrs_download:- gv_attrs_url(Url), - download_html(Url, Dom, [html_dialect(html4),verbose(silent)]), + download_html_dom(Url, Dom, [html_dialect(html4),verbose(silent)]), xpath(Dom, //table(@align=center), TableDom), % @tbd This does not work, since in `record_name(Element, Name)`, diff --git a/gv_color.pl b/gv_color.pl index 0510f98..c1c6fde 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -94,7 +94,7 @@ wc_weight(Float) -- gv_color_download:- gv_color_url(Url), - download_html(Url, Dom, [html_dialect(html4),verbose(silent)]), + download_html_dom(Url, Dom, [html_dialect(html4),verbose(silent)]), xpath(Dom, //table(1), TableDom1), xpath(Dom, //table(2), TableDom2), maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]). ``` 69: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 107c515 å’Œå˜åŠ¨å 8f574bb  [back to content](#compare) ``` diff diff --git a/gv_attrs.pl b/gv_attrs.pl index 6e61373..0fa4dcc 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -2,7 +2,7 @@ gv_attrs, [ gv_attr_value//2 % +Context:oneof([cluster,edge,graph,node,subgraph]) - % +Attribute:nvpair + % +Attribute:nvpair ] ). @@ -11,7 +11,7 @@ Support for GraphViz attributes. @author Wouter Beek -@version 2014/06, 2014/11 +@version 2014/06, 2014/11-2014/12 */ :- use_module(library(apply)). @@ -30,7 +30,7 @@ Support for GraphViz attributes. :- use_module(plHtml(html)). :- use_module(plHtml(html_table)). -:- use_module(plGraphViz(gv_attr_type)). % DCGs implementing attribute types. +:- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]). :- db_add_novel(user:prolog_file_type(log, logging)). @@ -94,7 +94,7 @@ gv_attr_value(Context, Name=Value) -- % Check validity of Value w.r.t. minimum value -- if available. check_minimum(Value, Minimum) }, - dcg_call(Dcg, Value). + dcg_call(gv_attr_type:Dcg, Value). ``` 70: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 8f574bb å’Œå˜åŠ¨å d7088dd  [back to content](#compare) ``` diff diff --git a/gv_dot.pl b/gv_dot.pl index a4197a9..e7b6748 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -341,12 +341,12 @@ gv_id(Atom) -- gv_id(Atom) -- quoted(dcg_atom_codes(gv_quoted_string, Atom)), !. -gv_id_first(X) -- letter(X). +gv_id_first(X) -- ascii_letter(X). gv_id_first(X) -- underscore(X). gv_id_rest([]) -- []. gv_id_rest([H|T]) -- - ( alpha_numeric(H) + ( ascii_alpha_numeric(H) ; underscore(H) ), gv_id_rest(T). ``` 71: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ d7088dd å’Œå˜åŠ¨å 94ed05d  [back to content](#compare) ``` diff diff --git a/README.md b/README.md index 9413d36..eb8512b 100644 --- a/README.md +++ b/README.md @@ -51,7 +51,7 @@ $ git submodule update --init ~~~prolog $ swipl run.pl ?- use_module(plGraphViz(gv_file)). -?- graph_to_gv_file( +?- export_graph_to_gv_file( graph([vertex(1,[]),vertex(2,[])],[edge(1,2,[])],[]), File, [method(sfdp),output(png)] @@ -136,7 +136,7 @@ The following values are supported. Example of using HTML-like labels: ~~~prolog -graph_to_gv_file( +export_graph_to_gv_file( graph( [vertex(1,[]),vertex(2,[label=html(table([tr([td(a),td(b)]),tr([td(c),td(d)])]))])], [edge(1,2,[label='From 1 to 2.'])], ``` 72: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 94ed05d å’Œå˜åŠ¨å f481060  [back to content](#compare) ``` diff diff --git a/gv_file.pl b/gv_file.pl index 188cfa6..101dc4d 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -94,6 +94,7 @@ file_to_gv(InputFile, OutputFile, Options):- ; rename_file(InputFile, OutputFile) ). file_to_gv(InputFile, OutputFile, Options):- +gtrace, % Typecheck for `method` option. option(method(Method), Options, dot), findall(Method0, gv_method(Method0), Methods), ``` 73: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ f481060 å’Œå˜åŠ¨å ce492ef  [back to content](#compare) ``` diff diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 4678991..6d2e4f5 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -46,7 +46,7 @@ /**  GraphViz attribute types @author Wouter Beek -@version 2014/06, 2014/11 +@version 2014/06, 2014/11-2014/12 */ :- use_module(plDcg(dcg_abnf)). @@ -54,7 +54,9 @@ :- use_module(plDcg(dcg_atom)). :- use_module(plDcg(dcg_cardinal)). :- use_module(plDcg(dcg_content)). +:- use_module(plDcg(dcg_generics)). :- use_module(plDcg(dcg_quote)). +:- use_module(plDcg(dcg_replace)). :- use_module(plGraphViz(gv_html)). @@ -210,7 +212,10 @@ doubleList(L) -- % @tbd Support for context-dependent replacements. escString(String) -- - quoted(atom(String)). + {dcg_phrase(dcg_replace(double_quote, escaped_double_quote), String, String0)}, + quoted(atom(String0)). +escaped_double_quote -- + \"\\\\\\\"\". diff --git a/gv_dot.pl b/gv_dot.pl index e7b6748..c51b4cf 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -22,7 +22,7 @@ a_list = ID \"=\" ID [\",\"] [a_list] @author Wouter Beek @see http://www.graphviz.org/content/dot-language -@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11 +@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11-2014/12 */ :- use_module(library(apply)). @@ -32,6 +32,7 @@ a_list = ID \"=\" ID [\",\"] [a_list] :- use_module(plDcg(dcg_abnf)). :- use_module(plDcg(dcg_arrow)). :- use_module(plDcg(dcg_ascii)). +:- use_module(plDcg(dcg_atom)). :- use_module(plDcg(dcg_bracket)). :- use_module(plDcg(dcg_content)). :- use_module(plDcg(dcg_generics)). @@ -111,12 +112,11 @@ gv_edge_operator(true) -- arrow(right, 2). gv_edge_statement(I, Directed, edge(FromId,ToId,EAttrs)) -- indent(I), - gv_node_id(FromId), \" \", + gv_node_id(FromId), \" \", gv_edge_operator(Directed), \" \", - gv_node_id(ToId), \" \", - + % We want `colorscheme/1` from the edges and % `directionality/1` from the graph. bracketed(square, '*'(gv_attr(edge), EAttrs, [])), @@ -293,7 +293,7 @@ gv_graph_type(true) -- \"digraph\". -%! gv_id(?Atom:atom)// is det. +%! gv_id(?Atom:compound)// is det. % Parse a GraphViz identifier. % There are 4 variants: % 1. Any string of alphabetic (`[a-zA-Z'200-'377]`) characters, @@ -306,17 +306,26 @@ gv_graph_type(true) -- \"digraph\". % is converted to `\"`. All other characters are left unchanged. % In particular, `\\\\` remains `\\\\`. % Layout engines may apply additional escape sequences. +% Represented by a Prolog term of the form `double_quoted_string(ATOM)`. % 4. An HTML string (``). +% Represented by a Prolog term of the form `html_like_label(COMPOUND)`. % % @tbd Add support for HTML-like labels: % http://www.graphviz.org/doc/info/shapes.html#html % This requires an XML grammar! -% HTML strings (variant 4). -gv_id(Content) -- - {compound(Content)}, !, +% HTML strings (assumed to be the same as HTML-like labels). +gv_id(html_like_label(Content)) -- !, gv_html_like_label(Content). -% Alpha-numeric strings (variant 1). +% Double-quoted strings. +% The quotes are already part of the given atom. +gv_id(double_quoted_string(Atom)) -- !, + quoted(atom(Atom)). +% Numerals. +gv_id(N) -- + {number(N)}, !, + gv_numeral(N). +% Alpha-numeric strings. gv_id(Atom) -- {atom_codes(Atom, [H|T])}, gv_id_first(H), @@ -324,22 +333,6 @@ gv_id(Atom) -- % Variant 1 identifiers should not be (case-variants of) a % GraphViz keyword. {\\+ gv_keyword([H|T])}. -% Numerals (variant 2) -gv_id(N) -- - {number(N)}, !, - gv_numeral(N). -% Double-quoted strings (variant 3). -% The quotes are already part of the given atom. -gv_id(Atom) -- - { - atom_codes(Atom, [H|T]), - append(S, [H], T) - }, - dcg_between(double_quote(H), gv_quoted_string(S)), !. -% Double-quoted strings (variant 3). -% The quotes are not in the given atom. They are written anyway. -gv_id(Atom) -- - quoted(dcg_atom_codes(gv_quoted_string, Atom)), !. gv_id_first(X) -- ascii_letter(X). gv_id_first(X) -- underscore(X). @@ -382,7 +375,7 @@ gv_kind(node) -- \"node\". -%! gv_node_id(+NodeId:atom)// . +%! gv_node_id(+NodeId:compound)// . % GraphViz node identifiers can be of the following two types: % 1. A GraphViz identifier, see gv_id//1. % 2. A GraphViz identifier plus a GraphViz port indicator, see gv_port//0. @@ -439,26 +432,6 @@ gv_port_location -- -gv_quoted_string([]) -- []. -% Just to be sure, we do not allow the double quote -% that closes the string to be escaped. -gv_quoted_string([X]) -- - {X \\== 92}, !, - [X]. -% A double quote is only allowed if it is escaped by a backslash. -gv_quoted_string([92,34|T]) -- !, - gv_quoted_string(T). -% Add the backslash escape character. -gv_quoted_string([34|T]) -- !, - \"\\\\\\\"\", - gv_quoted_string(T). -% All other characters are allowed without escaping. -gv_quoted_string([H|T]) -- - [H], - gv_quoted_string(T). - - - gv_ranked_node_collection(I, rank(Rank_V_Term,Content_V_Terms)) -- indent(I), bracketed(curly, ( diff --git a/gv_file.pl b/gv_file.pl index 101dc4d..d191e10 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -22,7 +22,7 @@ Also converts between GraphViz DOT formatted files and GraphViz output files or SVG DOM structures. @author Wouter Beek -@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08, 2014/11 +@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08, 2014/11-2014/12 */ :- use_module(library(option)). @@ -38,6 +38,7 @@ and GraphViz output files or SVG DOM structures. :- multifile(user:prolog_file_type/2). user:prolog_file_type(dot, dot). +user:prolog_file_type(pdf, pdf). :- predicate_options(codes_to_gv_file/3, 3, [ pass_to(file_to_gv/3, 3) @@ -94,7 +95,6 @@ file_to_gv(InputFile, OutputFile, Options):- ; rename_file(InputFile, OutputFile) ). file_to_gv(InputFile, OutputFile, Options):- -gtrace, % Typecheck for `method` option. option(method(Method), Options, dot), findall(Method0, gv_method(Method0), Methods), @@ -108,9 +108,7 @@ gtrace, % The output file is either given or created. ( var(OutputFile) - file_alternative(InputFile, _, _, OutputType, OutputFile) - ; is_absolute_file_name(OutputFile), - % The given output file must match a certain file extension. - file_name_extension(_, OutputType, OutputFile) + ; is_absolute_file_name(OutputFile) ), % Run the GraphViz conversion command in the shell. ``` 74: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ce492ef å’Œå˜åŠ¨å ddef555  [back to content](#compare) ``` diff diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 6d2e4f5..b886f9f 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -229,7 +229,7 @@ escaped_double_quote -- %! lblString(+String:compound)// . -lblString(html(V)) -- +lblString(html_like_label(V)) -- gv_html_like_label(V). lblString(V) -- escString(V). diff --git a/gv_html.pl b/gv_html.pl index 63f2d82..1410c25 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -236,8 +236,6 @@ text(Content) -- % Supported attributes for BR: % - `ALIGN=\"CENTER|LEFT|RIGHT\"` -textitem(br) -- - textitem(br([])). textitem(br(Attrs)) -- html_element(br, Attrs). % Compound term: parser. ``` 75: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ddef555 å’Œå˜åŠ¨å af27fdd  [back to content](#compare) ``` diff diff --git a/gv_color.pl b/gv_color.pl index c1c6fde..2263fa1 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -17,7 +17,7 @@ */ :- use_module(library(apply)). -:- use_module(library(lists), except([delete/3])). +:- use_module(library(lists), except([delete/3,subset/2])). :- use_module(library(persistency)). :- use_module(library(xpath)). diff --git a/gv_dot.pl b/gv_dot.pl index c51b4cf..e047a74 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -26,7 +26,7 @@ a_list = ID \"=\" ID [\",\"] [a_list] */ :- use_module(library(apply)). -:- use_module(library(lists), except([delete/3])). +:- use_module(library(lists), except([delete/3,subset/2])). :- use_module(library(ordsets)). :- use_module(plDcg(dcg_abnf)). ``` 76: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ af27fdd å’Œå˜åŠ¨å f390238  [back to content](#compare) ``` diff diff --git a/gv_attr_type.pl b/gv_attr_type.pl index b886f9f..b68f753 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -46,7 +46,7 @@ /**  GraphViz attribute types @author Wouter Beek -@version 2014/06, 2014/11-2014/12 +@version 2014/06, 2014/11-2015/01 */ :- use_module(plDcg(dcg_abnf)). @@ -57,6 +57,7 @@ :- use_module(plDcg(dcg_generics)). :- use_module(plDcg(dcg_quote)). :- use_module(plDcg(dcg_replace)). +:- use_module(plDcg(language/c)). :- use_module(plGraphViz(gv_html)). @@ -104,9 +105,9 @@ gv_attr_type(viewPort). %! addDouble(+Float:float)// . % An *addDouble* is represented by a Prolog float. -addDouble(Float) -- - '?'(plus_sign, []), - double(Float). +addDouble(N) -- + (\"+\" ; \"\"), + c_double(N). @@ -115,7 +116,7 @@ addDouble(Float) -- % `point(X:float,Y:float,InputOnly:boolean)`. addPoint(Point) -- - '?'(plus_sign, []), + (\"+\" ; \"\"), point(Point). @@ -194,10 +195,8 @@ dirType(none). %! double(+Double:float)// . -double(Double1) -- - % float//1 will check for float type. - {Double2 is Double1 * 1.0}, - float(Double2). +double(N) -- + c_double(N). diff --git a/gv_numeral.pl b/gv_numeral.pl index d36fa59..cf595d9 100644 --- a/gv_numeral.pl +++ b/gv_numeral.pl @@ -19,7 +19,7 @@ -%! gv_numeral(?Value:number)// . +%! gv_numeral(?Value:compound)// . % % # Syntax % @@ -45,36 +45,39 @@ % - (decimal-separator) gv_numeral(N) -- - {var(N)}, !, - sign(Sign), - ( \".\", - '+'(decimal_digit, Fractional, [convert1(weights_decimal)]), - {IntegerPart = 0} - ; '+'(decimal_digit, IntegerPart, [convert1(weights_decimal)]), - ( \".\", - '*'(decimal_digit, Fractional, [convert1(weights_decimal)]) - ; {Fractional = 0} + ( {ground(N)} + - '[-]?'(N), + {N0 is abs(N)}, + {rational_parts(N0, I, F)}, + ( % [1] The fractional is zero, so only write the integer part + % and do not write the decimal separator. + {F =:= 0} + - {weights_nonneg(IW, I)}, + '[0-9]+'(IW) + ; % [2] The integer part is zero, so only write the fractional part, + % preceded by the decimal separator. + {I =:= 0} + - \".\", + {weights_fraction(FW, F)}, + '[0-9]*'(FW) + ; % [3] Both the integer part and the fractional are non-zero, + % so write both of them, with the decimal separator in-between. + {weights_nonneg(IW, I)}, + '[0-9]+'(IW), + \".\", + {weights_fraction(FW, F)}, + '[0-9]*'(FW) ) - ), - { number_integer_parts(UnsignedN, IntegerPart, Fractional), - N is copysign(UnsignedN, Sign) - }. -gv_numeral(N) -- - {number_sign_parts(N, Sign, UnsignedN)}, - sign_negative(Sign), - {number_integer_parts(UnsignedN, IntegerPart, Fractional)}, - ( % [1] The fractional is zero, so only write the integer part - % and do not write the decimal separator. - {Fractional =:= 0} - - integer(IntegerPart) - ; % [2] The integer part is zero, so only write the fractional part, - % preceded by the decimal separator. - {IntegerPart =:= 0} - - \".\", - integer(Fractional) - ; % [3] Both the integer part and the fractional are non-zero, - % so write both of them, with the decimal separator in-between. - integer(IntegerPart), - \".\", - integer(Fractional) + ; '[-]?'(Sg), + ( \".\", + '[0-9]+'(FW), + {IW = []} + ; '[0-9]+'(IW), + ( \".\", + '[0-9]*'(FW), + ; {FW = []} + ) + ), + {rational_parts_weights(N0, IW, FW)}, + {N is copysign(N0, Sg)} ). ``` 77: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ f390238 å’Œå˜åŠ¨å c5f7d82  [back to content](#compare) ``` diff diff --git a/gv_numeral.pl b/gv_numeral.pl index cf595d9..c9b3e1d 100644 --- a/gv_numeral.pl +++ b/gv_numeral.pl @@ -8,12 +8,15 @@ /**  GraphViz numeral @author Wouter Beek -@version 2014/05-2014/06 +@version 2014/05-2014/06, 2015/01 */ :- use_module(math(math_ext)). +:- use_module(math(radix)). +:- use_module(math(rational_ext)). :- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_abnf_common)). :- use_module(plDcg(dcg_ascii)). :- use_module(plDcg(dcg_cardinal)). ``` 78: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c5f7d82 å’Œå˜åŠ¨å acf6467  [back to content](#compare) ``` diff diff --git a/gv_attr_type.pl b/gv_attr_type.pl index b68f753..157681f 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -49,6 +49,8 @@ @version 2014/06, 2014/11-2015/01 */ +:- use_module(library(dcg/basics), [float//1,integer//1]). + :- use_module(plDcg(dcg_abnf)). :- use_module(plDcg(dcg_ascii)). :- use_module(plDcg(dcg_atom)). diff --git a/gv_color.pl b/gv_color.pl index 2263fa1..7aea965 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -13,10 +13,11 @@ @author Wouter Beek @tbd Color value `transparent` is only available in the output formats ps, svg, fig, vmrl, and the bitmap formats. -@version 2014/06, 2014/10-2014/11 +@version 2014/06, 2014/10-2014/11, 2015/01 */ :- use_module(library(apply)). +:- use_module(library(dcg/basics), [float//1]). :- use_module(library(lists), except([delete/3,subset/2])). :- use_module(library(persistency)). :- use_module(library(xpath)). diff --git a/gv_numeral.pl b/gv_numeral.pl index c9b3e1d..439a024 100644 --- a/gv_numeral.pl +++ b/gv_numeral.pl @@ -77,7 +77,7 @@ gv_numeral(N) -- {IW = []} ; '[0-9]+'(IW), ( \".\", - '[0-9]*'(FW), + '[0-9]*'(FW) ; {FW = []} ) ), ``` 79: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ acf6467 å’Œå˜åŠ¨å 6656a2d  [back to content](#compare) ``` diff diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 157681f..3ae0920 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -59,7 +59,6 @@ :- use_module(plDcg(dcg_generics)). :- use_module(plDcg(dcg_quote)). :- use_module(plDcg(dcg_replace)). -:- use_module(plDcg(language/c)). :- use_module(plGraphViz(gv_html)). @@ -109,7 +108,7 @@ gv_attr_type(viewPort). addDouble(N) -- (\"+\" ; \"\"), - c_double(N). + float(N). @@ -198,7 +197,7 @@ dirType(none). %! double(+Double:float)// . double(N) -- - c_double(N). + float(N). diff --git a/gv_numeral.pl b/gv_numeral.pl index 439a024..5776a4a 100644 --- a/gv_numeral.pl +++ b/gv_numeral.pl @@ -22,6 +22,8 @@ + + %! gv_numeral(?Value:compound)// . % % # Syntax ``` 80: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 6656a2d å’Œå˜åŠ¨å 256c9ce  [back to content](#compare) ``` diff diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 3c731a0..06aa96f 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 3c731a03db6ee32031815d24c505e784273f46ef +Subproject commit 06aa96fbeef941157e9bcccc7c088d72ba8c8d3a diff --git a/plDcg b/plDcg index d2e4a8a..2f2ae3a 160000 --- a/plDcg +++ b/plDcg @@ -1 +1 @@ -Subproject commit d2e4a8a094b7c405222574a4f9fe8c472296d7e6 +Subproject commit 2f2ae3a9228e8add2dfa4835ff045a3635a062ba diff --git a/plHtml b/plHtml index dfd7c27..b8bd7a6 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit dfd7c27dfd102e8eb6bfd9c516fccfcd23b5abf0 +Subproject commit b8bd7a6d92f1076a5be2c4686e998a0bfc840ac8 diff --git a/plUri b/plUri index 0be7e9c..6550f33 160000 --- a/plUri +++ b/plUri @@ -1 +1 @@ -Subproject commit 0be7e9cae7b42dea30f08aa751438d382387b8a2 +Subproject commit 6550f331120c7f63739f69692791760afb507280 ``` 81: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 256c9ce å’Œå˜åŠ¨å bf4ebea  [back to content](#compare) ``` diff diff --git a/.gitmodules b/.gitmodules index 6c22435..26ddd86 100644 --- a/.gitmodules +++ b/.gitmodules @@ -4,9 +4,6 @@ [submodule \"plHtml\"] path = plHtml url = https://github.com/wouterbeek/plHtml.git -[submodule \"plDcg\"] -\tpath = plDcg -\turl = https://github.com/wouterbeek/plDcg.git [submodule \"plUri\"] path = plUri url = https://github.com/wouterbeek/plUri.git diff --git a/debug_project.pl b/debug_project.pl index 17195c1..d53a92f 100644 --- a/debug_project.pl +++ b/debug_project.pl @@ -1,7 +1,8 @@ :- module( debug_project, [ - debug_all_files/0 + debug_all_files/0, + start_pldoc_server/0 ] ). @@ -11,20 +12,35 @@ Generic code for debugging a project: * Load all subdirectories and Prolog files contained in those directories. @author Wouter Beek -@version 2014/11/19 +@version 2015/02/26 */ :- use_module(library(ansi_term)). :- use_module(library(apply)). +:- use_module(library(pldoc)). +:- use_module(library(portray_text)). + +:- set_prolog_flag( + answer_write_options, + [max_depth(100),portrayed(true),spacing(next_argument)] +). +:- set_prolog_flag( + debugger_write_options, + [max_depth(100),portrayed(true),spacing(next_argument)] +). +:- set_portray_text(ellipsis, 1000). + +:- dynamic(user:debug_mode). +:- multifile(user:debug_mode). + +:- initialization(init_debug_mode). -:- use_module(os(dir_ext)). -% Avoid errors when using gtrace/0 in threads. -:- initialization(guitracer). debug_all_files:- + ensure_loaded(plc(io/dir_ext)), absolute_file_name(project(.), Dir, [access(read),file_type(directory)]), directory_files( Dir, @@ -55,6 +71,30 @@ do_not_load0(index). do_not_load0(load). do_not_load0(load_project). do_not_load0(run). +do_not_load0(style). + + + +%! start_pldoc_server is det. +% The plDoc server should be started *before* documented modules are loaded. + +start_pldoc_server:- + doc_server(9999). + + + + + +% INITIALIZATION + +init_debug_mode:- + % Set the debug mode flag. + ( user:debug_mode + - true + ; assert(user:debug_mode) + ), + % Avoid errors when using gtrace/0 in threads. + guitracer. diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 3ae0920..9794eef 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -51,14 +51,14 @@ :- use_module(library(dcg/basics), [float//1,integer//1]). -:- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_ascii)). -:- use_module(plDcg(dcg_atom)). -:- use_module(plDcg(dcg_cardinal)). -:- use_module(plDcg(dcg_content)). -:- use_module(plDcg(dcg_generics)). -:- use_module(plDcg(dcg_quote)). -:- use_module(plDcg(dcg_replace)). +:- use_module(plc(dcg/dcg_abnf)). +:- use_module(plc(dcg/dcg_ascii)). +:- use_module(plc(dcg/dcg_atom)). +:- use_module(plc(dcg/dcg_cardinal)). +:- use_module(plc(dcg/dcg_content)). +:- use_module(plc(dcg/dcg_generics)). +:- use_module(plc(dcg/dcg_quote)). +:- use_module(plc(dcg/dcg_replace)). :- use_module(plGraphViz(gv_html)). diff --git a/gv_attrs.pl b/gv_attrs.pl index 0fa4dcc..4e7ae2d 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -18,17 +18,16 @@ Support for GraphViz attributes. :- use_module(library(persistency)). :- use_module(library(xpath)). -:- use_module(generics(db_ext)). -:- use_module(os(file_ext)). -:- use_module(os(file_gnu)). - -:- use_module(plDcg(dcg_atom)). -:- use_module(plDcg(dcg_content)). -:- use_module(plDcg(dcg_meta)). -:- use_module(plDcg(dcg_generics)). +:- use_module(plc(dcg/dcg_atom)). +:- use_module(plc(dcg/dcg_content)). +:- use_module(plc(dcg/dcg_meta)). +:- use_module(plc(dcg/dcg_generics)). +:- use_module(plc(generics/db_ext)). +:- use_module(plc(io/file_ext)). +:- use_module(plc(io/file_gnu)). :- use_module(plHtml(html)). -:- use_module(plHtml(html_table)). +:- use_module(plHtml(elements/html_table)). :- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]). @@ -100,7 +99,7 @@ gv_attr_value(Context, Name=Value) -- -% HELPERS +% HELPERS % %! check_minimum(+Value:atom, +Minimum:number) is semidet. % Trivially succeeds if no minimum value is available for a given attribute. @@ -112,7 +111,9 @@ check_minimum(V, Min1):- -% INITIALIZATION + + +% INITIALIZATION % %! assert_gv_attr_row(+Row:list(atom)) is det. diff --git a/gv_color.pl b/gv_color.pl index 7aea965..34d99eb 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -22,19 +22,18 @@ :- use_module(library(persistency)). :- use_module(library(xpath)). -:- use_module(generics(db_ext)). -:- use_module(generics(persistent_db_ext)). -:- use_module(os(file_ext)). -:- use_module(os(file_gnu)). - -:- use_module(plDcg(abnf_core_rules)). -:- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_atom)). -:- use_module(plDcg(dcg_cardinal)). -:- use_module(plDcg(dcg_content)). +:- use_module(plc(dcg/abnf_core_rules)). +:- use_module(plc(dcg/dcg_abnf)). +:- use_module(plc(dcg/dcg_atom)). +:- use_module(plc(dcg/dcg_cardinal)). +:- use_module(plc(dcg/dcg_content)). +:- use_module(plc(generics/db_ext)). +:- use_module(plc(generics/persistent_db_ext)). +:- use_module(plc(io/file_ext)). +:- use_module(plc(io/file_gnu)). :- use_module(plHtml(html)). -:- use_module(plHtml(html_table)). +:- use_module(plHtml(elements/html_table)). :- db_add_novel(user:prolog_file_type(log, logging)). @@ -46,6 +45,8 @@ + + % color(+Color:compound)// . % A *color* is represented by a compound term of one of the following forms: % 1. `rgb(Red:nonneg,Green:nonneg,Blue:nonneg)` @@ -89,7 +90,9 @@ wc_weight(Float) -- -% INITIALIZATION + + +% INITIALIZATION % %! gv_color_download is det. diff --git a/gv_dot.pl b/gv_dot.pl index e047a74..19657f5 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -29,15 +29,15 @@ a_list = ID \"=\" ID [\",\"] [a_list] :- use_module(library(lists), except([delete/3,subset/2])). :- use_module(library(ordsets)). -:- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_arrow)). -:- use_module(plDcg(dcg_ascii)). -:- use_module(plDcg(dcg_atom)). -:- use_module(plDcg(dcg_bracket)). -:- use_module(plDcg(dcg_content)). -:- use_module(plDcg(dcg_generics)). -:- use_module(plDcg(dcg_meta)). -:- use_module(plDcg(dcg_quote)). +:- use_module(plc(dcg/dcg_abnf)). +:- use_module(plc(dcg/dcg_arrow)). +:- use_module(plc(dcg/dcg_ascii)). +:- use_module(plc(dcg/dcg_atom)). +:- use_module(plc(dcg/dcg_bracket)). +:- use_module(plc(dcg/dcg_content)). +:- use_module(plc(dcg/dcg_generics)). +:- use_module(plc(dcg/dcg_meta)). +:- use_module(plc(dcg/dcg_quote)). :- use_module(plGraphViz(gv_attrs)). :- use_module(plGraphViz(gv_html)). diff --git a/gv_file.pl b/gv_file.pl index d191e10..6cb739f 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -28,9 +28,9 @@ and GraphViz output files or SVG DOM structures. :- use_module(library(option)). :- use_module(library(process)). -:- use_module(generics(code_ext)). -:- use_module(os(file_ext)). -:- use_module(os(run_ext)). +:- use_module(plc(generics/code_ext)). +:- use_module(plc(io/file_ext)). +:- use_module(plc(process/run_ext)). :- use_module(plGraphViz(gv_dot)). @@ -41,18 +41,18 @@ user:prolog_file_type(dot, dot). user:prolog_file_type(pdf, pdf). :- predicate_options(codes_to_gv_file/3, 3, [ - pass_to(file_to_gv/3, 3) - ]). + pass_to(file_to_gv/3, 3) +]). :- predicate_options(file_to_gv/2, 2, [ - pass_to(file_to_gv/3, 3) - ]). + pass_to(file_to_gv/3, 3) +]). :- predicate_options(file_to_gv/3, 3, [ - method(+atom), - output(+atom) - ]). + method(+atom), + output(+atom) +]). :- predicate_options(export_graph_to_gv_file/3, 3, [ - pass_to(codes_to_gv_file/3, 3) - ]). + pass_to(codes_to_gv_file/3, 3) +]). diff --git a/gv_html.pl b/gv_html.pl index 1410c25..65ae2bd 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -43,9 +43,9 @@ cell:  label  @version 2013/07, 2013/09, 2014/03-2014/06, 2014/11 */ -:- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_bracket)). -:- use_module(plDcg(dcg_content)). +:- use_module(plc(dcg/dcg_abnf)). +:- use_module(plc(dcg/dcg_bracket)). +:- use_module(plc(dcg/dcg_content)). :- use_module(plHtml(html_dcg)). diff --git a/gv_numeral.pl b/gv_numeral.pl index 5776a4a..ac294b4 100644 --- a/gv_numeral.pl +++ b/gv_numeral.pl @@ -11,14 +11,13 @@ @version 2014/05-2014/06, 2015/01 */ -:- use_module(math(math_ext)). -:- use_module(math(radix)). -:- use_module(math(rational_ext)). - -:- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_abnf_common)). -:- use_module(plDcg(dcg_ascii)). -:- use_module(plDcg(dcg_cardinal)). +:- use_module(plc(dcg/dcg_abnf)). +:- use_module(plc(dcg/dcg_abnf_common)). +:- use_module(plc(dcg/dcg_ascii)). +:- use_module(plc(dcg/dcg_cardinal)). +:- use_module(plc(math/math_ext)). +:- use_module(plc(math/radix)). +:- use_module(plc(math/rational_ext)). diff --git a/load.pl b/load.pl index 5cec32c..de8b5ca 100644 --- a/load.pl +++ b/load.pl @@ -7,7 +7,6 @@ :- use_module(load_project). :- load_project([ plc-'Prolog-Library-Collection', - plDcg, plHtml, plUri ]). diff --git a/plDcg b/plDcg deleted file mode 160000 index 2f2ae3a..0000000 --- a/plDcg +++ /dev/null @@ -1 +0,0 @@ -Subproject commit 2f2ae3a9228e8add2dfa4835ff045a3635a062ba ``` 82: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ bf4ebea å’Œå˜åŠ¨å 70aec99  [back to content](#compare) ``` diff diff --git a/.gitmodules b/.gitmodules index 26ddd86..6c22435 100644 --- a/.gitmodules +++ b/.gitmodules @@ -4,6 +4,9 @@ [submodule \"plHtml\"] path = plHtml url = https://github.com/wouterbeek/plHtml.git +[submodule \"plDcg\"] +\tpath = plDcg +\turl = https://github.com/wouterbeek/plDcg.git [submodule \"plUri\"] path = plUri url = https://github.com/wouterbeek/plUri.git diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 06aa96f..9d0e491 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 06aa96fbeef941157e9bcccc7c088d72ba8c8d3a +Subproject commit 9d0e49135bbd1916d901ccd18be605699f48c5cc diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 9794eef..3ae0920 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -51,14 +51,14 @@ :- use_module(library(dcg/basics), [float//1,integer//1]). -:- use_module(plc(dcg/dcg_abnf)). -:- use_module(plc(dcg/dcg_ascii)). -:- use_module(plc(dcg/dcg_atom)). -:- use_module(plc(dcg/dcg_cardinal)). -:- use_module(plc(dcg/dcg_content)). -:- use_module(plc(dcg/dcg_generics)). -:- use_module(plc(dcg/dcg_quote)). -:- use_module(plc(dcg/dcg_replace)). +:- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_ascii)). +:- use_module(plDcg(dcg_atom)). +:- use_module(plDcg(dcg_cardinal)). +:- use_module(plDcg(dcg_content)). +:- use_module(plDcg(dcg_generics)). +:- use_module(plDcg(dcg_quote)). +:- use_module(plDcg(dcg_replace)). :- use_module(plGraphViz(gv_html)). diff --git a/gv_attrs.pl b/gv_attrs.pl index 4e7ae2d..25519af 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -18,16 +18,17 @@ Support for GraphViz attributes. :- use_module(library(persistency)). :- use_module(library(xpath)). -:- use_module(plc(dcg/dcg_atom)). -:- use_module(plc(dcg/dcg_content)). -:- use_module(plc(dcg/dcg_meta)). -:- use_module(plc(dcg/dcg_generics)). -:- use_module(plc(generics/db_ext)). -:- use_module(plc(io/file_ext)). -:- use_module(plc(io/file_gnu)). +:- use_module(generics(db_ext)). +:- use_module(os(file_ext)). +:- use_module(os(file_gnu)). + +:- use_module(plDcg(dcg_atom)). +:- use_module(plDcg(dcg_content)). +:- use_module(plDcg(dcg_meta)). +:- use_module(plDcg(dcg_generics)). :- use_module(plHtml(html)). -:- use_module(plHtml(elements/html_table)). +:- use_module(plHtml(html_table)). :- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]). @@ -80,16 +81,16 @@ gv_attr_value(Context, Name=Value) -- % Check the validity of the context argument. gv_attr(Name, UsedBy, Types, _, Minimum, _), memberchk(Context, UsedBy), - + % Pick a value type non-deterministically. member(Type, Types), - + % The `style` type is the only one that requires the context argument. ( Type == style - Dcg =.. [Type,Context] ; Dcg =.. [Type] ), - + % Check validity of Value w.r.t. minimum value -- if available. check_minimum(Value, Minimum) }, @@ -99,7 +100,7 @@ gv_attr_value(Context, Name=Value) -- -% HELPERS % +% HELPERS %! check_minimum(+Value:atom, +Minimum:number) is semidet. % Trivially succeeds if no minimum value is available for a given attribute. @@ -111,9 +112,7 @@ check_minimum(V, Min1):- - - -% INITIALIZATION % +% INITIALIZATION %! assert_gv_attr_row(+Row:list(atom)) is det. @@ -130,13 +129,8 @@ assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):- gv_attrs_download:- gv_attrs_url(Url), - download_html_dom(Url, Dom, [html_dialect(html4),verbose(silent)]), - + download_html_dom(Url, Dom, [dialect(html4),silent(true)]), xpath(Dom, //table(@align=center), TableDom), - % @tbd This does not work, since in `record_name(Element, Name)`, - % `Element` is a signleton list whereas a compound term is expected. - %%%%xpath(Dom, /html/body/table, TableDom), - html_to_table(TableDom, _, Rows), maplist(assert_gv_attr_row, Rows). diff --git a/gv_color.pl b/gv_color.pl index 34d99eb..7aea965 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -22,18 +22,19 @@ :- use_module(library(persistency)). :- use_module(library(xpath)). -:- use_module(plc(dcg/abnf_core_rules)). -:- use_module(plc(dcg/dcg_abnf)). -:- use_module(plc(dcg/dcg_atom)). -:- use_module(plc(dcg/dcg_cardinal)). -:- use_module(plc(dcg/dcg_content)). -:- use_module(plc(generics/db_ext)). -:- use_module(plc(generics/persistent_db_ext)). -:- use_module(plc(io/file_ext)). -:- use_module(plc(io/file_gnu)). +:- use_module(generics(db_ext)). +:- use_module(generics(persistent_db_ext)). +:- use_module(os(file_ext)). +:- use_module(os(file_gnu)). + +:- use_module(plDcg(abnf_core_rules)). +:- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_atom)). +:- use_module(plDcg(dcg_cardinal)). +:- use_module(plDcg(dcg_content)). :- use_module(plHtml(html)). -:- use_module(plHtml(elements/html_table)). +:- use_module(plHtml(html_table)). :- db_add_novel(user:prolog_file_type(log, logging)). @@ -45,8 +46,6 @@ - - % color(+Color:compound)// . % A *color* is represented by a compound term of one of the following forms: % 1. `rgb(Red:nonneg,Green:nonneg,Blue:nonneg)` @@ -90,9 +89,7 @@ wc_weight(Float) -- - - -% INITIALIZATION % +% INITIALIZATION %! gv_color_download is det. diff --git a/gv_dot.pl b/gv_dot.pl index 19657f5..e047a74 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -29,15 +29,15 @@ a_list = ID \"=\" ID [\",\"] [a_list] :- use_module(library(lists), except([delete/3,subset/2])). :- use_module(library(ordsets)). -:- use_module(plc(dcg/dcg_abnf)). -:- use_module(plc(dcg/dcg_arrow)). -:- use_module(plc(dcg/dcg_ascii)). -:- use_module(plc(dcg/dcg_atom)). -:- use_module(plc(dcg/dcg_bracket)). -:- use_module(plc(dcg/dcg_content)). -:- use_module(plc(dcg/dcg_generics)). -:- use_module(plc(dcg/dcg_meta)). -:- use_module(plc(dcg/dcg_quote)). +:- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_arrow)). +:- use_module(plDcg(dcg_ascii)). +:- use_module(plDcg(dcg_atom)). +:- use_module(plDcg(dcg_bracket)). +:- use_module(plDcg(dcg_content)). +:- use_module(plDcg(dcg_generics)). +:- use_module(plDcg(dcg_meta)). +:- use_module(plDcg(dcg_quote)). :- use_module(plGraphViz(gv_attrs)). :- use_module(plGraphViz(gv_html)). diff --git a/gv_file.pl b/gv_file.pl index 6cb739f..d191e10 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -28,9 +28,9 @@ and GraphViz output files or SVG DOM structures. :- use_module(library(option)). :- use_module(library(process)). -:- use_module(plc(generics/code_ext)). -:- use_module(plc(io/file_ext)). -:- use_module(plc(process/run_ext)). +:- use_module(generics(code_ext)). +:- use_module(os(file_ext)). +:- use_module(os(run_ext)). :- use_module(plGraphViz(gv_dot)). @@ -41,18 +41,18 @@ user:prolog_file_type(dot, dot). user:prolog_file_type(pdf, pdf). :- predicate_options(codes_to_gv_file/3, 3, [ - pass_to(file_to_gv/3, 3) -]). + pass_to(file_to_gv/3, 3) + ]). :- predicate_options(file_to_gv/2, 2, [ - pass_to(file_to_gv/3, 3) -]). + pass_to(file_to_gv/3, 3) + ]). :- predicate_options(file_to_gv/3, 3, [ - method(+atom), - output(+atom) -]). + method(+atom), + output(+atom) + ]). :- predicate_options(export_graph_to_gv_file/3, 3, [ - pass_to(codes_to_gv_file/3, 3) -]). + pass_to(codes_to_gv_file/3, 3) + ]). diff --git a/gv_html.pl b/gv_html.pl index 65ae2bd..1410c25 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -43,9 +43,9 @@ cell:  label  @version 2013/07, 2013/09, 2014/03-2014/06, 2014/11 */ -:- use_module(plc(dcg/dcg_abnf)). -:- use_module(plc(dcg/dcg_bracket)). -:- use_module(plc(dcg/dcg_content)). +:- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_bracket)). +:- use_module(plDcg(dcg_content)). :- use_module(plHtml(html_dcg)). diff --git a/gv_numeral.pl b/gv_numeral.pl index ac294b4..5776a4a 100644 --- a/gv_numeral.pl +++ b/gv_numeral.pl @@ -11,13 +11,14 @@ @version 2014/05-2014/06, 2015/01 */ -:- use_module(plc(dcg/dcg_abnf)). -:- use_module(plc(dcg/dcg_abnf_common)). -:- use_module(plc(dcg/dcg_ascii)). -:- use_module(plc(dcg/dcg_cardinal)). -:- use_module(plc(math/math_ext)). -:- use_module(plc(math/radix)). -:- use_module(plc(math/rational_ext)). +:- use_module(math(math_ext)). +:- use_module(math(radix)). +:- use_module(math(rational_ext)). + +:- use_module(plDcg(dcg_abnf)). +:- use_module(plDcg(dcg_abnf_common)). +:- use_module(plDcg(dcg_ascii)). +:- use_module(plDcg(dcg_cardinal)). diff --git a/load.pl b/load.pl index de8b5ca..5cec32c 100644 --- a/load.pl +++ b/load.pl @@ -7,6 +7,7 @@ :- use_module(load_project). :- load_project([ plc-'Prolog-Library-Collection', + plDcg, plHtml, plUri ]). diff --git a/plDcg b/plDcg new file mode 160000 index 0000000..45a2d2b --- /dev/null +++ b/plDcg @@ -0,0 +1 @@ +Subproject commit 45a2d2b3ce1e3e18533586005b2a6a63eb2300d0 diff --git a/plHtml b/plHtml index b8bd7a6..c2491cb 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit b8bd7a6d92f1076a5be2c4686e998a0bfc840ac8 +Subproject commit c2491cb789baef4b2c7b9e30ca79d65a7213af02 diff --git a/plUri b/plUri index 6550f33..f1696b3 160000 --- a/plUri +++ b/plUri @@ -1 +1 @@ -Subproject commit 6550f331120c7f63739f69692791760afb507280 +Subproject commit f1696b3c41635b4c6af3e961e819a5e6c0bf5b75 ``` 83: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 70aec99 å’Œå˜åŠ¨å e06e6ba  [back to content](#compare) ``` diff diff --git a/.gitmodules b/.gitmodules index 6c22435..26ddd86 100644 --- a/.gitmodules +++ b/.gitmodules @@ -4,9 +4,6 @@ [submodule \"plHtml\"] path = plHtml url = https://github.com/wouterbeek/plHtml.git -[submodule \"plDcg\"] -\tpath = plDcg -\turl = https://github.com/wouterbeek/plDcg.git [submodule \"plUri\"] path = plUri url = https://github.com/wouterbeek/plUri.git diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 3ae0920..9794eef 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -51,14 +51,14 @@ :- use_module(library(dcg/basics), [float//1,integer//1]). -:- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_ascii)). -:- use_module(plDcg(dcg_atom)). -:- use_module(plDcg(dcg_cardinal)). -:- use_module(plDcg(dcg_content)). -:- use_module(plDcg(dcg_generics)). -:- use_module(plDcg(dcg_quote)). -:- use_module(plDcg(dcg_replace)). +:- use_module(plc(dcg/dcg_abnf)). +:- use_module(plc(dcg/dcg_ascii)). +:- use_module(plc(dcg/dcg_atom)). +:- use_module(plc(dcg/dcg_cardinal)). +:- use_module(plc(dcg/dcg_content)). +:- use_module(plc(dcg/dcg_generics)). +:- use_module(plc(dcg/dcg_quote)). +:- use_module(plc(dcg/dcg_replace)). :- use_module(plGraphViz(gv_html)). diff --git a/gv_attrs.pl b/gv_attrs.pl index 25519af..68f42db 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -18,17 +18,16 @@ Support for GraphViz attributes. :- use_module(library(persistency)). :- use_module(library(xpath)). -:- use_module(generics(db_ext)). -:- use_module(os(file_ext)). -:- use_module(os(file_gnu)). - -:- use_module(plDcg(dcg_atom)). -:- use_module(plDcg(dcg_content)). -:- use_module(plDcg(dcg_meta)). -:- use_module(plDcg(dcg_generics)). +:- use_module(plc(dcg/dcg_atom)). +:- use_module(plc(dcg/dcg_content)). +:- use_module(plc(dcg/dcg_meta)). +:- use_module(plc(dcg/dcg_generics)). +:- use_module(plc(generics/db_ext)). +:- use_module(plc(io/file_ext)). +:- use_module(plc(io/file_gnu)). :- use_module(plHtml(html)). -:- use_module(plHtml(html_table)). +:- use_module(plHtml(elements/html_table)). :- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]). @@ -100,7 +99,7 @@ gv_attr_value(Context, Name=Value) -- -% HELPERS +% HELPERS % %! check_minimum(+Value:atom, +Minimum:number) is semidet. % Trivially succeeds if no minimum value is available for a given attribute. @@ -112,7 +111,9 @@ check_minimum(V, Min1):- -% INITIALIZATION + + +% INITIALIZATION % %! assert_gv_attr_row(+Row:list(atom)) is det. diff --git a/gv_color.pl b/gv_color.pl index 7aea965..34d99eb 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -22,19 +22,18 @@ :- use_module(library(persistency)). :- use_module(library(xpath)). -:- use_module(generics(db_ext)). -:- use_module(generics(persistent_db_ext)). -:- use_module(os(file_ext)). -:- use_module(os(file_gnu)). - -:- use_module(plDcg(abnf_core_rules)). -:- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_atom)). -:- use_module(plDcg(dcg_cardinal)). -:- use_module(plDcg(dcg_content)). +:- use_module(plc(dcg/abnf_core_rules)). +:- use_module(plc(dcg/dcg_abnf)). +:- use_module(plc(dcg/dcg_atom)). +:- use_module(plc(dcg/dcg_cardinal)). +:- use_module(plc(dcg/dcg_content)). +:- use_module(plc(generics/db_ext)). +:- use_module(plc(generics/persistent_db_ext)). +:- use_module(plc(io/file_ext)). +:- use_module(plc(io/file_gnu)). :- use_module(plHtml(html)). -:- use_module(plHtml(html_table)). +:- use_module(plHtml(elements/html_table)). :- db_add_novel(user:prolog_file_type(log, logging)). @@ -46,6 +45,8 @@ + + % color(+Color:compound)// . % A *color* is represented by a compound term of one of the following forms: % 1. `rgb(Red:nonneg,Green:nonneg,Blue:nonneg)` @@ -89,7 +90,9 @@ wc_weight(Float) -- -% INITIALIZATION + + +% INITIALIZATION % %! gv_color_download is det. diff --git a/gv_dot.pl b/gv_dot.pl index e047a74..19657f5 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -29,15 +29,15 @@ a_list = ID \"=\" ID [\",\"] [a_list] :- use_module(library(lists), except([delete/3,subset/2])). :- use_module(library(ordsets)). -:- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_arrow)). -:- use_module(plDcg(dcg_ascii)). -:- use_module(plDcg(dcg_atom)). -:- use_module(plDcg(dcg_bracket)). -:- use_module(plDcg(dcg_content)). -:- use_module(plDcg(dcg_generics)). -:- use_module(plDcg(dcg_meta)). -:- use_module(plDcg(dcg_quote)). +:- use_module(plc(dcg/dcg_abnf)). +:- use_module(plc(dcg/dcg_arrow)). +:- use_module(plc(dcg/dcg_ascii)). +:- use_module(plc(dcg/dcg_atom)). +:- use_module(plc(dcg/dcg_bracket)). +:- use_module(plc(dcg/dcg_content)). +:- use_module(plc(dcg/dcg_generics)). +:- use_module(plc(dcg/dcg_meta)). +:- use_module(plc(dcg/dcg_quote)). :- use_module(plGraphViz(gv_attrs)). :- use_module(plGraphViz(gv_html)). diff --git a/gv_file.pl b/gv_file.pl index d191e10..6cb739f 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -28,9 +28,9 @@ and GraphViz output files or SVG DOM structures. :- use_module(library(option)). :- use_module(library(process)). -:- use_module(generics(code_ext)). -:- use_module(os(file_ext)). -:- use_module(os(run_ext)). +:- use_module(plc(generics/code_ext)). +:- use_module(plc(io/file_ext)). +:- use_module(plc(process/run_ext)). :- use_module(plGraphViz(gv_dot)). @@ -41,18 +41,18 @@ user:prolog_file_type(dot, dot). user:prolog_file_type(pdf, pdf). :- predicate_options(codes_to_gv_file/3, 3, [ - pass_to(file_to_gv/3, 3) - ]). + pass_to(file_to_gv/3, 3) +]). :- predicate_options(file_to_gv/2, 2, [ - pass_to(file_to_gv/3, 3) - ]). + pass_to(file_to_gv/3, 3) +]). :- predicate_options(file_to_gv/3, 3, [ - method(+atom), - output(+atom) - ]). + method(+atom), + output(+atom) +]). :- predicate_options(export_graph_to_gv_file/3, 3, [ - pass_to(codes_to_gv_file/3, 3) - ]). + pass_to(codes_to_gv_file/3, 3) +]). diff --git a/gv_html.pl b/gv_html.pl index 1410c25..65ae2bd 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -43,9 +43,9 @@ cell:  label  @version 2013/07, 2013/09, 2014/03-2014/06, 2014/11 */ -:- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_bracket)). -:- use_module(plDcg(dcg_content)). +:- use_module(plc(dcg/dcg_abnf)). +:- use_module(plc(dcg/dcg_bracket)). +:- use_module(plc(dcg/dcg_content)). :- use_module(plHtml(html_dcg)). diff --git a/gv_numeral.pl b/gv_numeral.pl index 5776a4a..ac294b4 100644 --- a/gv_numeral.pl +++ b/gv_numeral.pl @@ -11,14 +11,13 @@ @version 2014/05-2014/06, 2015/01 */ -:- use_module(math(math_ext)). -:- use_module(math(radix)). -:- use_module(math(rational_ext)). - -:- use_module(plDcg(dcg_abnf)). -:- use_module(plDcg(dcg_abnf_common)). -:- use_module(plDcg(dcg_ascii)). -:- use_module(plDcg(dcg_cardinal)). +:- use_module(plc(dcg/dcg_abnf)). +:- use_module(plc(dcg/dcg_abnf_common)). +:- use_module(plc(dcg/dcg_ascii)). +:- use_module(plc(dcg/dcg_cardinal)). +:- use_module(plc(math/math_ext)). +:- use_module(plc(math/radix)). +:- use_module(plc(math/rational_ext)). diff --git a/load.pl b/load.pl index 5cec32c..de8b5ca 100644 --- a/load.pl +++ b/load.pl @@ -7,7 +7,6 @@ :- use_module(load_project). :- load_project([ plc-'Prolog-Library-Collection', - plDcg, plHtml, plUri ]). diff --git a/plDcg b/plDcg deleted file mode 160000 index 45a2d2b..0000000 --- a/plDcg +++ /dev/null @@ -1 +0,0 @@ -Subproject commit 45a2d2b3ce1e3e18533586005b2a6a63eb2300d0 ``` 84: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ e06e6ba å’Œå˜åŠ¨å 0fd12ca  [back to content](#compare) ``` diff diff --git a/plHtml b/plHtml index c2491cb..37bd0bf 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit c2491cb789baef4b2c7b9e30ca79d65a7213af02 +Subproject commit 37bd0bf33676fc06f9153221715a2cf00c4065d0 diff --git a/plUri b/plUri index f1696b3..6550f33 160000 --- a/plUri +++ b/plUri @@ -1 +1 @@ -Subproject commit f1696b3c41635b4c6af3e961e819a5e6c0bf5b75 +Subproject commit 6550f331120c7f63739f69692791760afb507280 ``` 85: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 0fd12ca å’Œå˜åŠ¨å 67c4157  [back to content](#compare) ``` diff diff --git a/README.md b/README.md index eb8512b..b4e3017 100644 --- a/README.md +++ b/README.md @@ -1,26 +1,25 @@ plGraphViz ========== -Easily export graphs represented as Prolog terms to - [GraphViz](http://www.graphviz.org/). +This library allows you to easily export graphs represented as Prolog terms +using [GraphViz](http://www.graphviz.org/), an advanced graph drawing library. The Prolog terms have the following form: ~~~prolog graph(Vertices, Edges, GraphAttrs) ~~~ -`Vertices` and `Edges` are lists of compounds terms of - the following form: +`Vertices` and `Edges` are lists of compound terms of the following form: ~~~prolog vertex(Id, VertexAttrs) -edges(FromId, ToId, EdgeAttrs) +edge(FromId, ToId, EdgeAttrs) ~~~ -`Id` identifies a vertex and need not occur in any of the edges - (i.e., unconnected vertices are allowed). +`Id` identifies a vertex and may or may not occur in any of the edges +(i.e., unconnected vertices are allowed). `FromId` and `ToId` may occur in the list of vertices, - in order to draw an edge between vertices with set attributes. +in order to draw an edge between vertices with set attributes. Attributes have the form `Name=Value`. `GraphAttrs` are attributes of the graph. @@ -28,13 +27,12 @@ Attributes have the form `Name=Value`. `EdgeAttrs` are attributes of the edge. Attribute values are given as Prolog terms as well, - and are type-checked before exporting. +and are type-checked before exporting. Many of the GraphViz attributes are supported. New ones are added on an as-needed bases - (open an issue on Github if you want to see a specific feature added). -Supports HTML-like labels, allowing complex tables to be shown - inside vertices. -Support for vertex clusters is currently under way. +(open an issue on Github if you want to see a specific feature added!). +HTML-like labels are supported, allowing complex tables to be shown +inside vertices. --- @@ -62,7 +60,7 @@ $ swipl run.pl ![](https://raw.githubusercontent.com/wouterbeek/plGraphViz/master/example1.png \"Example graph.\") The graphic can be saved to a different file by instantiating - the `File` argument. +the `File` argument. --- @@ -152,4 +150,3 @@ export_graph_to_gv_file( --- Developed during 2013-2014 by [Wouter Beek](http://www.wouterbeek.com). - ``` 86: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 67c4157 å’Œå˜åŠ¨å b972e2b  [back to content](#compare) ``` diff diff --git a/gv_attrs.pl b/gv_attrs.pl index 68f42db..8ba1535 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -11,7 +11,7 @@ Support for GraphViz attributes. @author Wouter Beek -@version 2014/06, 2014/11-2014/12 +@version 2014/06, 2014/11-2014/12, 2015/03 */ :- use_module(library(apply)). @@ -23,6 +23,7 @@ Support for GraphViz attributes. :- use_module(plc(dcg/dcg_meta)). :- use_module(plc(dcg/dcg_generics)). :- use_module(plc(generics/db_ext)). +:- use_module(plc(generics/print_ext)). :- use_module(plc(io/file_ext)). :- use_module(plc(io/file_gnu)). @@ -129,11 +130,16 @@ assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):- % Downloads the table describing GraphViz attributes from `graphviz.org`. gv_attrs_download:- - gv_attrs_url(Url), - download_html_dom(Url, Dom, [dialect(html4),silent(true)]), - xpath(Dom, //table(@align=center), TableDom), - html_to_table(TableDom, _, Rows), - maplist(assert_gv_attr_row, Rows). + report_on_process( + 'Updating GraphViz attributes table... ', + ( + gv_attrs_uri(Uri), + download_html_dom(Uri, Dom, [dialect(html5),silent(true)]), + xpath(Dom, //table(@align=lower_case(center)), TableDom), + html_to_table(TableDom, _, Rows), + maplist(assert_gv_attr_row, Rows) + ) + ). %! gv_attrs_file(-File:atom) is det. @@ -167,9 +173,9 @@ gv_attrs_update(_):- gv_attrs_download. -%! gv_attrs_url(-Url:url) is det. +%! gv_attrs_uri(-Url:url) is det. -gv_attrs_url('http://www.graphviz.org/doc/info/attrs.html'). +gv_attrs_uri('http://www.graphviz.org/doc/info/attrs.html'). %! safe_db_attach(+File:atom) is det. diff --git a/gv_color.pl b/gv_color.pl index 34d99eb..0ab3fa7 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -13,7 +13,7 @@ @author Wouter Beek @tbd Color value `transparent` is only available in the output formats ps, svg, fig, vmrl, and the bitmap formats. -@version 2014/06, 2014/10-2014/11, 2015/01 +@version 2014/06, 2014/10-2014/11, 2015/01, 2015/03 */ :- use_module(library(apply)). @@ -29,6 +29,7 @@ :- use_module(plc(dcg/dcg_content)). :- use_module(plc(generics/db_ext)). :- use_module(plc(generics/persistent_db_ext)). +:- use_module(plc(generics/print_ext)). :- use_module(plc(io/file_ext)). :- use_module(plc(io/file_gnu)). @@ -97,11 +98,16 @@ wc_weight(Float) -- %! gv_color_download is det. gv_color_download:- - gv_color_url(Url), - download_html_dom(Url, Dom, [html_dialect(html4),verbose(silent)]), - xpath(Dom, //table(1), TableDom1), - xpath(Dom, //table(2), TableDom2), - maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]). + report_on_process( + 'Updating the GraphViz color table...', + ( + gv_color_uri(Uri), + download_html_dom(Uri, Dom, [html_dialect(html4),silent(true)]), + xpath(Dom, //table(1), TableDom1), + xpath(Dom, //table(2), TableDom2), + maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]) + ) + ). assert_color_table(Colorscheme, TableDom):- html_to_table(TableDom, _, Rows), @@ -141,7 +147,7 @@ gv_color_update(_):- gv_color_download. -%! gv_color_url(-Url:url) is det. +%! gv_color_uri(-Url:url) is det. -gv_color_url('http://www.graphviz.org/doc/info/colors.html'). +gv_color_uri('http://www.graphviz.org/doc/info/colors.html'). ``` 87: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ b972e2b å’Œå˜åŠ¨å 8bbc84c  [back to content](#compare) ``` diff diff --git a/gv_file.pl b/gv_file.pl index 6cb739f..991df5f 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -22,7 +22,8 @@ Also converts between GraphViz DOT formatted files and GraphViz output files or SVG DOM structures. @author Wouter Beek -@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08, 2014/11-2014/12 +@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08, 2014/11-2014/12, + 2015/03 */ :- use_module(library(option)). @@ -30,7 +31,8 @@ and GraphViz output files or SVG DOM structures. :- use_module(plc(generics/code_ext)). :- use_module(plc(io/file_ext)). -:- use_module(plc(process/run_ext)). +:- use_module(plc(process/process_ext)). +:- use_module(plc(process/program_db)). :- use_module(plGraphViz(gv_dot)). @@ -114,15 +116,12 @@ file_to_gv(InputFile, OutputFile, Options):- % Run the GraphViz conversion command in the shell. format(atom(OutputTypeFlag), '-T~a', [OutputType]), format(atom(OutputFileFlag), '-o~a', [OutputFile]), - process_create( - path(Method), - % @tbd Windows hack: - %%%%'C:\\\\Program Files (x86)\\\\Graphviz2.38\\\\bin\\\\dot.exe', + atomic_list_concat(['GraphViz',Method], ' ', Program), + handle_process( + Method, [OutputTypeFlag,file(InputFile),OutputFileFlag], - [process(PID)] - ), - process_wait(PID, exit(ShellStatus)), - exit_code_handler('GraphViz', ShellStatus). + [detached(true),program(Program)] + ). @@ -155,7 +154,7 @@ export_graph_to_gv_file(ExportGraph, OutputFile, Options):- open_dot(File):- once(find_program_by_file_type(dot, Program)), - run_program(Program, [File]). + handle_process(Program, [File], [program('GraphViz DOT')]). ``` 88: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 8bbc84c å’Œå˜åŠ¨å 033fa14  [back to content](#compare) ``` diff diff --git a/.gitignore b/.gitignore index 7193a38..e6bec15 100644 --- a/.gitignore +++ b/.gitignore @@ -1,4 +1,5 @@ *~ *# *.db +*.log data/* diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index 9d0e491..ca7adb3 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit 9d0e49135bbd1916d901ccd18be605699f48c5cc +Subproject commit ca7adb30da33a289e40b01e5e163f860d5c096c7 diff --git a/README.md b/README.md index b4e3017..23a45db 100644 --- a/README.md +++ b/README.md @@ -48,7 +48,6 @@ $ git submodule update --init ~~~prolog $ swipl run.pl -?- use_module(plGraphViz(gv_file)). ?- export_graph_to_gv_file( graph([vertex(1,[]),vertex(2,[])],[edge(1,2,[])],[]), File, diff --git a/gv_file.pl b/gv_file.pl index 991df5f..2e0539d 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -42,9 +42,6 @@ and GraphViz output files or SVG DOM structures. user:prolog_file_type(dot, dot). user:prolog_file_type(pdf, pdf). -:- predicate_options(codes_to_gv_file/3, 3, [ - pass_to(file_to_gv/3, 3) -]). :- predicate_options(file_to_gv/2, 2, [ pass_to(file_to_gv/3, 3) ]). @@ -53,30 +50,13 @@ user:prolog_file_type(pdf, pdf). output(+atom) ]). :- predicate_options(export_graph_to_gv_file/3, 3, [ - pass_to(codes_to_gv_file/3, 3) + pass_to(file_to_gv/3, 3) ]). -%! codes_to_gv_file( -%! +Codes:list(code), -%! ?OutputFile:atom, -%! +Options:list(nvpair) -%! ) is det. - -codes_to_gv_file(Codes, OutputFile, Options):- - absolute_file_name(data(tmp), TmpFile, [access(write),extensions([dot])]), - setup_call_cleanup( - open(TmpFile, write, Write, [encoding(utf8)]), - put_codes(Write, Codes), - close(Write) - ), - file_to_gv(TmpFile, OutputFile, Options). - - - %! file_to_gv(+InputFile:atom, +Options:list(nvpair)) is det. file_to_gv(InputFile, Options):- @@ -120,7 +100,7 @@ file_to_gv(InputFile, OutputFile, Options):- handle_process( Method, [OutputTypeFlag,file(InputFile),OutputFileFlag], - [detached(true),program(Program)] + [program(Program)] ). @@ -142,19 +122,30 @@ file_to_gv(InputFile, OutputFile, Options):- export_graph_to_gv_file(ExportGraph, OutputFile, Options):- once(phrase(gv_graph(ExportGraph), Codes)), - codes_to_gv_file(Codes, OutputFile, Options). + + % Be thread-safe. + thread_self(Id), + atomic_list_concat([gv_file,Id], '_', ThreadName), + absolute_file_name( + data(ThreadName), + TmpFile, + [access(write),extensions([dot])] + ), + setup_call_cleanup( + open(TmpFile, write, Write, [encoding(utf8)]), + put_codes(Write, Codes), + close(Write) + ), + file_to_gv(TmpFile, OutputFile, Options). %! open_dot(+File:atom) is det. % Opens the given DOT file. -% -% @tbd Test support on Windows. -% @tbd Test support on OS-X. open_dot(File):- once(find_program_by_file_type(dot, Program)), - handle_process(Program, [File], [program('GraphViz DOT')]). + handle_process(Program, [file(File)], []). diff --git a/plHtml b/plHtml index 37bd0bf..2919705 160000 --- a/plHtml +++ b/plHtml @@ -1 +1 @@ -Subproject commit 37bd0bf33676fc06f9153221715a2cf00c4065d0 +Subproject commit 2919705d079b1ab28bf3c502a87d1648fd842ed3 diff --git a/plUri b/plUri index 6550f33..1a55127 160000 --- a/plUri +++ b/plUri @@ -1 +1 @@ -Subproject commit 6550f331120c7f63739f69692791760afb507280 +Subproject commit 1a55127517ee0b0cf2ad4fecbe3f84402f5f4c12 diff --git a/run.pl b/run.pl index 8bba736..8c751f4 100644 --- a/run.pl +++ b/run.pl @@ -7,3 +7,5 @@ :- ensure_loaded(load). :- endif. +:- use_module(plGraphViz(gv_file)). + ``` 89: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 033fa14 å’Œå˜åŠ¨å fdb5a9e  [back to content](#compare) ``` diff diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 9794eef..ce8012b 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -212,7 +212,13 @@ doubleList(L) -- % @tbd Support for context-dependent replacements. escString(String) -- - {dcg_phrase(dcg_replace(double_quote, escaped_double_quote), String, String0)}, + { + atom_phrase( + dcg_replace(double_quote, escaped_double_quote), + String, + String0 + ) + }, quoted(atom(String0)). escaped_double_quote -- \"\\\\\\\"\". diff --git a/gv_attrs.pl b/gv_attrs.pl index 8ba1535..fc8529a 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -119,8 +119,8 @@ check_minimum(V, Min1):- %! assert_gv_attr_row(+Row:list(atom)) is det. assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):- - dcg_phrase(translate_usedby(UsedBy2), UsedBy1), - once(dcg_phrase(translate_type(Types2), Types1)), + atom_phrase(translate_usedby(UsedBy2), UsedBy1), + once(atom_phrase(translate_type(Types2), Types1)), sort(UsedBy2, UsedBy3), translate_default(Default1, Default2), assert_gv_attr(Name, UsedBy3, Types2, Default2, Minimum, Notes). ``` 90: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ fdb5a9e å’Œå˜åŠ¨å 6ec582e  [back to content](#compare) ``` diff ``` 91: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 6ec582e å’Œå˜åŠ¨å 68b53b8  [back to content](#compare) ``` diff diff --git a/gv_attrs.pl b/gv_attrs.pl index fc8529a..20036b3 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -28,7 +28,7 @@ Support for GraphViz attributes. :- use_module(plc(io/file_gnu)). :- use_module(plHtml(html)). -:- use_module(plHtml(elements/html_table)). +:- use_module(plHtml(element/html_table)). :- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]). diff --git a/gv_color.pl b/gv_color.pl index 0ab3fa7..7da7313 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -34,7 +34,7 @@ :- use_module(plc(io/file_gnu)). :- use_module(plHtml(html)). -:- use_module(plHtml(elements/html_table)). +:- use_module(plHtml(element/html_table)). :- db_add_novel(user:prolog_file_type(log, logging)). ``` 92: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 68b53b8 å’Œå˜åŠ¨å 46e8f3c  [back to content](#compare) ``` diff diff --git a/gv_attrs.pl b/gv_attrs.pl index 20036b3..add0721 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -28,7 +28,7 @@ Support for GraphViz attributes. :- use_module(plc(io/file_gnu)). :- use_module(plHtml(html)). -:- use_module(plHtml(element/html_table)). +:- use_module(plHtml(html_table)). :- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]). diff --git a/gv_color.pl b/gv_color.pl index 7da7313..41e153b 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -34,7 +34,7 @@ :- use_module(plc(io/file_gnu)). :- use_module(plHtml(html)). -:- use_module(plHtml(element/html_table)). +:- use_module(plHtml(html_table)). :- db_add_novel(user:prolog_file_type(log, logging)). ``` 93: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 46e8f3c å’Œå˜åŠ¨å 3162d88  [back to content](#compare) ``` diff diff --git a/gv_file.pl b/gv_file.pl index 2e0539d..2c6ed93 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -113,7 +113,7 @@ file_to_gv(InputFile, OutputFile, Options):- % Returns a file containing a GraphViz visualization of the given graph. % % The following options are supported: -% - `method(+Method:atom` +% - `method(+Method:atom)` % The algorithm used by GraphViz for positioning the tree nodes. % Either =dot= (default) or =sfdp=. % - `output(+FileType:atom)` @@ -122,7 +122,7 @@ file_to_gv(InputFile, OutputFile, Options):- export_graph_to_gv_file(ExportGraph, OutputFile, Options):- once(phrase(gv_graph(ExportGraph), Codes)), - + % Be thread-safe. thread_self(Id), atomic_list_concat([gv_file,Id], '_', ThreadName), ``` 94: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 3162d88 å’Œå˜åŠ¨å 714b2e0  [back to content](#compare) ``` diff diff --git a/gv_attr_type.pl b/gv_attr_type.pl index ce8012b..1e3515c 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -49,7 +49,7 @@ @version 2014/06, 2014/11-2015/01 */ -:- use_module(library(dcg/basics), [float//1,integer//1]). +:- use_module(library(dcg/basics)). :- use_module(plc(dcg/dcg_abnf)). :- use_module(plc(dcg/dcg_ascii)). diff --git a/gv_attrs.pl b/gv_attrs.pl index add0721..489ce51 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -15,6 +15,7 @@ Support for GraphViz attributes. */ :- use_module(library(apply)). +:- use_module(library(dcg/basics)). :- use_module(library(persistency)). :- use_module(library(xpath)). diff --git a/gv_color.pl b/gv_color.pl index 41e153b..c4c82b4 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -17,7 +17,7 @@ */ :- use_module(library(apply)). -:- use_module(library(dcg/basics), [float//1]). +:- use_module(library(dcg/basics)). :- use_module(library(lists), except([delete/3,subset/2])). :- use_module(library(persistency)). :- use_module(library(xpath)). diff --git a/gv_dot.pl b/gv_dot.pl index 19657f5..637a5ab 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -26,6 +26,7 @@ a_list = ID \"=\" ID [\",\"] [a_list] */ :- use_module(library(apply)). +:- use_module(library(dcg/basics)). :- use_module(library(lists), except([delete/3,subset/2])). :- use_module(library(ordsets)). ``` 95: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 714b2e0 å’Œå˜åŠ¨å af7a387  [back to content](#compare) ``` diff diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 1e3515c..6d572ab 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -49,7 +49,7 @@ @version 2014/06, 2014/11-2015/01 */ -:- use_module(library(dcg/basics)). +:- use_module(library(dcg/basics), except([string//1])). :- use_module(plc(dcg/dcg_abnf)). :- use_module(plc(dcg/dcg_ascii)). ``` 96: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ af7a387 å’Œå˜åŠ¨å 7b434e3  [back to content](#compare) ``` diff diff --git a/gv_color.pl b/gv_color.pl index c4c82b4..1f3f9d6 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -22,8 +22,8 @@ :- use_module(library(persistency)). :- use_module(library(xpath)). -:- use_module(plc(dcg/abnf_core_rules)). :- use_module(plc(dcg/dcg_abnf)). +:- use_module(plc(dcg/dcg_abnf_rules)). :- use_module(plc(dcg/dcg_atom)). :- use_module(plc(dcg/dcg_cardinal)). :- use_module(plc(dcg/dcg_content)). diff --git a/gv_numeral.pl b/gv_numeral.pl index ac294b4..bff1255 100644 --- a/gv_numeral.pl +++ b/gv_numeral.pl @@ -16,6 +16,7 @@ :- use_module(plc(dcg/dcg_ascii)). :- use_module(plc(dcg/dcg_cardinal)). :- use_module(plc(math/math_ext)). +:- use_module(plc(math/positional)). :- use_module(plc(math/radix)). :- use_module(plc(math/rational_ext)). @@ -56,7 +57,7 @@ gv_numeral(N) -- ( % [1] The fractional is zero, so only write the integer part % and do not write the decimal separator. {F =:= 0} - - {weights_nonneg(IW, I)}, + - {positional(I, IW)}, '[0-9]+'(IW) ; % [2] The integer part is zero, so only write the fractional part, % preceded by the decimal separator. @@ -66,7 +67,7 @@ gv_numeral(N) -- '[0-9]*'(FW) ; % [3] Both the integer part and the fractional are non-zero, % so write both of them, with the decimal separator in-between. - {weights_nonneg(IW, I)}, + {positional(I, IW)}, '[0-9]+'(IW), \".\", {weights_fraction(FW, F)}, ``` 97: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7b434e3 å’Œå˜åŠ¨å dcbcb4d  [back to content](#compare) ``` diff diff --git a/gv_dot.pl b/gv_dot.pl index 637a5ab..e98361b 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -146,151 +146,14 @@ gv_generic_attributes_statement(_, _, []) -- [], !. gv_generic_attributes_statement(Kind, I, KindAttrs) -- indent(I), gv_kind(Kind), \" \", - bracketed(square, '*'(gv_attr(Kind), KindAttrs, [])), - line_feed. - - - -%! gv_graph(+Graph:compound)// -% The follow graph attributes are supported, -% beyond the GraphViz attributes for graphs: -% * `directed(+boolean)` -% Whether the graph is directed (`true`) or undirected (`false`). -% Default: `false`. -% * `name(+GraphName:atom)` -% * `strict(+StrictGraph:boolean)` -% This forbids the creation of self-arcs and multi-edges; -% they are ignored in the input file. -% Only in combinattion with directionality `directed`. -% -% ```abnf -% graph = [\"strict\"] (\"graph\" / \"digraph\") [ID] \"{\" stmt_list \"}\" -% ``` -% -% `GraphTerm` is a compound term of the following form: -% ```prolog -% graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes) -% ``` -% -% `RankedVertexTerms` is a list of compound terms of the following form: -% ```prolog -% rank(RankNode,ContentNodes) -% ``` -% -% @tbd Add support for subgraphs (arbitrary nesting). -% @tbd Add support for escape strings: -% http://www.graphviz.org/doc/info/attrs.html#k:escString -% @tbd Assert attributes that are generic with respect to a subgraph. -% @tbd Not all vertex and edge properties can be shared it seems (e.g., label). - -gv_graph(graph(VTerms,ETerms,GAttrs)) -- - gv_graph(graph(VTerms,[],ETerms,GAttrs)). - -gv_graph(graph(VTerms,RankedVTerms,ETerms,GAttrs1)) -- - { - shared_attributes(VTerms, SharedVAttrs, NewVTerms), - shared_attributes(ETerms, SharedEAttrs, NewETerms), - select_nvpair(strict=Strict, GAttrs1, GAttrs2, false), - select_nvpair(directed=Directed, GAttrs2, GAttrs3, true), - select_nvpair(name=GName, GAttrs3, GAttrs4, noname), - add_default_nvpair(GAttrs4, overlap, false, GAttrs5), - I = 0 - }, - - % The first statement in the GraphViz output. - % States that this file represents a graph according to the GraphViz format. - indent(I), - gv_strict(Strict), - gv_graph_type(Directed), \" \", - gv_id(GName), \" \", - - % The body of the DOT file appears between curly braces. - bracketed( - curly, - gv_graph0( - I, - NewVTerms, SharedVAttrs, RankedVTerms, - NewETerms, SharedEAttrs, - Directed, GAttrs5 - ) - ), - line_feed. - -gv_graph0( - I, - NewVTerms, SharedVAttrs, RankedVTerms, - NewETerms, SharedEAttrs, - Directed, GAttrs -) -- - line_feed, - - % The following lines are indented. - {NewI is I + 1}, - - % Attributes that apply to the graph as a whole. - gv_generic_attributes_statement(graph, NewI, GAttrs), - - % Attributes that are the same for all nodes. - gv_generic_attributes_statement(node, NewI, SharedVAttrs), - - % Attributes that are the same for all edges. - gv_generic_attributes_statement(edge, NewI, SharedEAttrs), - - % Only add a line_feed if some content was already written - % and some content is about to be written. - ( - { - % Succeeds if no content was written. - (GAttrs == [], SharedVAttrs == [], SharedEAttrs == []) - ; - % Succeeds if no content is about to be written. - (NewVTerms == [], RankedVTerms == []) - } - - - \"\" - ; - line_feed - ), - - % The list of GraphViz nodes. - '*'(gv_node_statement(NewI), NewVTerms, []), - ({NewVTerms == []} - \"\" ; line_feed), - - % The ranked GraphViz nodes (displayed at the same height). - '*'(gv_ranked_node_collection(NewI), RankedVTerms, []), - ({RankedVTerms == []} - \"\" ; line_feed), - - { - findall( - edge(FromId,ToId,[]), - ( - nth0(Index1, RankedVTerms, rank(vertex(FromId,_),_)), - nth0(Index2, RankedVTerms, rank(vertex(ToId,_),_)), - % We assume that the rank vertices are nicely ordered. - succ(Index1, Index2) - ), - RankEdges - ) - }, - - % The rank edges. - '*'(gv_edge_statement(NewI, Directed), RankEdges, []), - - % The non-rank edges. - '*'(gv_edge_statement(NewI, Directed), NewETerms, []), - - % Note that we do not include a line_feed here. + \"[\", + gv_attrs(Kind, KindAttrs), + \"]\\n\". - % We want to indent the closing curly brace. - indent(I). - - - -%! gv_graph_type(+Directed:boolean)// . -% The type of graph that is represented. - -gv_graph_type(false) -- \"graph\". -gv_graph_type(true) -- \"digraph\". +gv_attrs(_, []) -- !, \"\". +gv_attrs(Kind, [H|T]) -- + gv_attr(Kind, H), + gv_attrs(Kind, T). @@ -456,53 +319,3 @@ gv_ranked_node_collection(I, rank(Rank_V_Term,Content_V_Terms)) -- indent(I) )), line_feed. - - - -%! gv_strict(+Strict:boolean)// is det. -% The keyword denoting that the graph is strict, i.e., has no self-arcs and -% no multi-edges. -% This only applies to directed graphs. - -gv_strict(false) -- []. -gv_strict(true) -- \"strict \". - - - - - -% HELPERS - -add_default_nvpair(Attrs1, N, Default, Attrs2):- - add_default_nvpair(Attrs1, N, Default, _, Attrs2). - -add_default_nvpair(Attrs, N, _, V, Attrs):- - memberchk(N=V, Attrs), !. -add_default_nvpair(Attrs1, N, Default, Default, Attrs2):- - ord_add_element(Attrs1, N=Default, Attrs2). - -select_nvpair(N=V, Attrs1, Attrs2, _):- - memberchk(N=V, Attrs1), !, - select(N=V, Attrs1, Attrs2). -select_nvpair(_=Default, Attrs, Attrs, Default). - - -extract_shared([], []):- !. -extract_shared(Argss, Shared):- - ord_intersection(Argss, Shared). - -remove_shared_attributes(Shared, Args1, Args2):- - ord_subtract(Args1, Shared, Args2). - -shared_attributes(Terms1, SharedAs, Terms2):- - maplist(term_to_attrs, Terms1, As1), - extract_shared(As1, SharedAs), - maplist(remove_shared_attributes(SharedAs), As1, As2), - maplist(term_change_attrs, Terms1, As2, Terms2). - -term_change_attrs(edge(From,To,_), A, edge(From,To,A)). -term_change_attrs(vertex(Id,_), A, vertex(Id,A)). - -term_to_attrs(edge(_,_,A), A). -term_to_attrs(vertex(_,A), A). - diff --git a/gv_file.pl b/gv_file.pl index 2c6ed93..5d2228e 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -1,40 +1,24 @@ :- module( gv_file, [ - file_to_gv/2, % +InputFile:atom - % +Options:list(nvpair) - file_to_gv/3, % +InputFile:atom - % ?OutputFile:atom - % +Options:list(nvpair) - export_graph_to_gv_file/3, % +ExportGraph:compound - % ?OutputFile:atom - % +Options:list(nvpair) - open_dot/1 % +File:file + gv_export/3 % +ExportGraph:compound + % +OutputFile:atom + % +Options:list(nvpair) ] ). /**  GraphViz file -Predicates for converting GIF-formatted terms -into GraphViz output files or SVG DOM structures. - -Also converts between GraphViz DOT formatted files -and GraphViz output files or SVG DOM structures. - @author Wouter Beek -@version 2013/09, 2013/11-2014/01, 2014/05, 2014/07-2014/08, 2014/11-2014/12, - 2015/03 +@version 2015/07 */ +:- use_module(library(error)). +:- use_module(library(gv/gv_dot)). :- use_module(library(option)). :- use_module(library(process)). -:- use_module(plc(generics/code_ext)). -:- use_module(plc(io/file_ext)). :- use_module(plc(process/process_ext)). -:- use_module(plc(process/program_db)). - -:- use_module(plGraphViz(gv_dot)). :- dynamic(user:prolog_file_type/2). :- multifile(user:prolog_file_type/2). @@ -42,29 +26,43 @@ and GraphViz output files or SVG DOM structures. user:prolog_file_type(dot, dot). user:prolog_file_type(pdf, pdf). -:- predicate_options(file_to_gv/2, 2, [ - pass_to(file_to_gv/3, 3) -]). -:- predicate_options(file_to_gv/3, 3, [ - method(+atom), - output(+atom) -]). -:- predicate_options(export_graph_to_gv_file/3, 3, [ - pass_to(file_to_gv/3, 3) -]). - +:- predicate_options(gv_export/3, 3, [pass_to(file_to_gv/3, 3)]). +:- predicate_options(file_to_gv/3, 3, [method(+atom),output(+atom)]). +%! gv_export( +%! +ExportGraph:compound, +%! +OutputFile:atom, +%! +Options:list(nvpair) +%! ) is det. +% Returns a file containing a GraphViz visualization of the given graph. +% +% The following options are supported: +% - `method(+Method:atom)` +% The algorithm used by GraphViz for positioning the tree nodes. +% Either =dot= (default) or =sfdp=. +% - `output(+FileType:atom)` +% The file type of the generated GraphViz file. +% Default: `pdf`. -%! file_to_gv(+InputFile:atom, +Options:list(nvpair)) is det. +gv_export(ExportGraph, OutputFile, Options):- + once(phrase(gv_graph(ExportGraph), Codes)), -file_to_gv(InputFile, Options):- - file_to_gv(InputFile, _, Options). + % Be thread-safe. + thread_self(Id), + atomic_list_concat([gv_file,Id], '_', ThreadName), + absolute_file_name(data(ThreadName), TmpFile, [access(write),file_type(dot)]), + setup_call_cleanup( + open(TmpFile, write, Write, [encoding(utf8)]), + put_codes(Write, Codes), + close(Write) + ), + file_to_gv(TmpFile, OutputFile, Options). %! file_to_gv( %! +InputFile:atom, -%! ?OutputFile:atom, +%! +OutputFile:atom, %! +Options:list(nvpair) %! ) is det. % Converts a GraphViz DOT file to an image file, using a specific @@ -87,12 +85,6 @@ file_to_gv(InputFile, OutputFile, Options):- findall(OutputType0, gv_output_type(OutputType0), OutputTypes), must_be(oneof(OutputTypes), OutputType), - % The output file is either given or created. - ( var(OutputFile) - - file_alternative(InputFile, _, _, OutputType, OutputFile) - ; is_absolute_file_name(OutputFile) - ), - % Run the GraphViz conversion command in the shell. format(atom(OutputTypeFlag), '-T~a', [OutputType]), format(atom(OutputFileFlag), '-o~a', [OutputFile]), @@ -105,53 +97,7 @@ file_to_gv(InputFile, OutputFile, Options):- -%! export_graph_to_gv_file( -%! +ExportGraph:compound, -%! ?OutputFile:atom, -%! +Options:list(nvpair) -%! ) is det. -% Returns a file containing a GraphViz visualization of the given graph. -% -% The following options are supported: -% - `method(+Method:atom)` -% The algorithm used by GraphViz for positioning the tree nodes. -% Either =dot= (default) or =sfdp=. -% - `output(+FileType:atom)` -% The file type of the generated GraphViz file. -% Default: `pdf`. - -export_graph_to_gv_file(ExportGraph, OutputFile, Options):- - once(phrase(gv_graph(ExportGraph), Codes)), - - % Be thread-safe. - thread_self(Id), - atomic_list_concat([gv_file,Id], '_', ThreadName), - absolute_file_name( - data(ThreadName), - TmpFile, - [access(write),extensions([dot])] - ), - setup_call_cleanup( - open(TmpFile, write, Write, [encoding(utf8)]), - put_codes(Write, Codes), - close(Write) - ), - file_to_gv(TmpFile, OutputFile, Options). - - - -%! open_dot(+File:atom) is det. -% Opens the given DOT file. - -open_dot(File):- - once(find_program_by_file_type(dot, Program)), - handle_process(Program, [file(File)], []). - - - - - -% HELPERS +% HELPERS % gv_method(circo). gv_method(dot). @@ -162,7 +108,6 @@ gv_method(sfdp). gv_method(twopi). - gv_output_type(bmp). gv_output_type(canon). gv_output_type(dot). diff --git a/gv_graph.pl b/gv_graph.pl new file mode 100644 index 0000000..dd4af97 --- /dev/null +++ b/gv_graph.pl @@ -0,0 +1,229 @@ +:- module( + gv_graph, + [ + gv_graph//1 % +Graph:compound + ] +). + +/**  GraphViz graph + +@author Wouter Beek +@version 2015/07 +*/ + +:- use_module(library(apply)). +:- use_module(library(lists)). +:- use_module(library(option)). + + + +%! gv_graph(+Graph:compound)// +% The follow graph attributes are supported, +% beyond the GraphViz attributes for graphs: +% * `directed(+boolean)` +% Whether the graph is directed (`true`) or undirected (`false`). +% Default: `false`. +% * `name(+GraphName:atom)` +% * `strict(+StrictGraph:boolean)` +% This forbids the creation of self-arcs and multi-edges; +% they are ignored in the input file. +% Only in combinattion with directionality `directed`. +% +% ```abnf +% graph = [\"strict\"] (\"graph\" / \"digraph\") [ID] \"{\" stmt_list \"}\" +% ``` +% +% `GraphTerm` is a compound term of the following form: +% ```prolog +% graph(VertexTerms,RankedVertexTerms,EdgeTerms,GraphAttributes) +% ``` +% +% `RankedVertexTerms` is a list of compound terms of the following form: +% ```prolog +% rank(RankNode,ContentNodes) +% ``` +% +% @tbd Add support for subgraphs (arbitrary nesting). +% @tbd Add support for escape strings: +% http://www.graphviz.org/doc/info/attrs.html#k:escString +% @tbd Assert attributes that are generic with respect to a subgraph. +% @tbd Not all vertex and edge properties can be shared it seems (e.g., label). + +gv_graph(G) -- + gv_graph(G, 0). + +gv_graph(G1, I) -- + { + include_ranks(G1, G2), + G2 = graph(VTerms,RankedVTerms,ETerms,GAttrs1), + shared_attributes(VTerms, SharedVAttrs, NewVTerms), + shared_attributes(ETerms, SharedEAttrs, NewETerms), + add_default(GAttrs1, overlap(false), GAttrs2), + I = 0 + }, + + % The first statement in the GraphViz output. + % States that this file represents a graph according to the GraphViz format. + indent(I), + + % Strictness. + {select_option(strict(Strict), GAttrs2, GAttrs3, false)}, + gv_strict(Strict), + + % Directedness. + {select_option(directed(Directed), GAttrs3, GAttrs4, true)}, + gv_graph_type(Directed), \" \", + + % Graph name. + ( {select_name(GName), GAttrs4, GAttrs5)} + - gv_id(GName), \" \", + ; {GAttrs5 = GAttrs4} + ), + + % The body of the DOT file appears between curly braces. + \"{\\n\", + + % The following lines are indented. + {NewI is I + 1}, + + % Attributes that apply to the graph as a whole. + gv_generic_attributes_statement(graph, NewI, GAttrs5), + + % Attributes that are the same for all nodes. + gv_generic_attributes_statement(node, NewI, SharedVAttrs), + + % Attributes that are the same for all edges. + gv_generic_attributes_statement(edge, NewI, SharedEAttrs), + + % Only add a line_feed if some content was already written + % and some content is about to be written. + ( % Succeeds if no content was written. + {(GAttrs == [], SharedVAttrs == [], SharedEAttrs == [])} + - \"\" + ; % Succeeds if no content is about to be written. + {(NewVTerms == [], RankedVTerms == [])} + - \"\" + ; \"\\n\" + ), + + % The list of GraphViz nodes. + gv_node_statements(NewI, NewVTerms), + ( {NewVTerms == []} + - \"\" + ; \"\\n\" + ), + + % The ranked GraphViz nodes (displayed at the same height). + gv_ranked_node_collections(NewI, RankedVTerms), + ( {RankedVTerms == []} + - \"\" + ; \"\\n\" + ), + + { + findall( + edge(FromId,ToId,[]), + ( + nth0(Index1, RankedVTerms, rank(vertex(FromId,_),_)), + nth0(Index2, RankedVTerms, rank(vertex(ToId,_),_)), + % We assume that the rank vertices are nicely ordered. + succ(Index1, Index2) + ), + RankEdges + ) + }, + + % The rank edges. + gv_edge_statements(NewI, Directed, RankEdges), + + % The non-rank edges. + gv_edge_statements(NewI, Directed, NewETerms), + + % Note that we do not include a line_feed here. + + % We want to indent the closing curly brace. + indent(I), + \"}\\n\". + +gv_edge_statements(_, _, []) -- !, \"\". +gv_edge_statements(I, Dir, [H|T]) -- + gv_edge_statement(I, Dir, H), + gv_edge_statements(I, Dir, T). + +gv_node_statements(_, []) -- !, \"\". +gv_node_statements(I, [H|T]) -- + gv_node_statement(I, H), + gv_node_statements(I, T). + +gv_ranked_node_collections(_, []) -- !, \"\". +gv_ranked_node_collections(I, [H|T]) -- + gv_ranked_node_collection(I, H), + gv_ranked_node_collections(I, T), + + + +% HELPERS % + +%! add_default_option( +%! +Options:list(compound), +%! +Default:compound, +%! -NewOptions:list(compound) +%! ) is det. + +add_default(L1, Opt, L2):- + Opt =.. [N,V], + Opt0 =.. [N,_], + ( option(Opt0, L1) + - true + ; L2 = [Opt|L1] + ). + + +%! gv_graph_type(+Directed:boolean)// is det. +% The type of graph that is represented. + +gv_graph_type(false) -- \"graph\". +gv_graph_type(true) -- \"digraph\". + + +%! gv_strict(+Strict:boolean)// is det. +% The keyword denoting that the graph is strict, i.e., has no self-arcs and +% no multi-edges. +% This only applies to directed graphs. + +gv_strict(false) -- []. +gv_strict(true) -- \"strict \". + + +%! invlude_ranges(+Graph:compound, -GraphWithRanks:compound) is det. +% Ensures that there is a ranks components in +% the graph-denoting compound term. + +include_ranks(graph(Vs,Rs,Es,L), graph(Vs,Rs,Es,L)). +include_ranks(graph(Vs,Es,L), graph(Vs,[],Es,L)). + + +%! shared_attributes( +%! +Terms:list(compound), +%! -SharedAttributes:list(compound), +%! -NewTerms:list(compound) +%! ) is det. + +shared_attributes(Ts1, Shared, Ts2):- + maplist(term_to_attrs, Ts1, L1), + extract_shared(L1, Shared), + maplist(remove_shared_attributes(Shared), L1, L2), + maplist(term_change_attrs, Ts1, L2, Ts2). + +term_to_attrs(edge(_,_,A), A). +term_to_attrs(vertex(_,A), A). + +extract_shared([], []):- !. +extract_shared(Argss, Shared):- + ord_intersection(Argss, Shared). + +remove_shared_attributes(Shared, Args1, Args2):- + ord_subtract(Args1, Shared, Args2). + +term_change_attrs(edge(From,To,_), A, edge(From,To,A)). +term_change_attrs(vertex(Id,_), A, vertex(Id,A)). ``` 98: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ dcbcb4d å’Œå˜åŠ¨å 50a3dbc  [back to content](#compare) ``` diff diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection index ca7adb3..88874a7 160000 --- a/Prolog-Library-Collection +++ b/Prolog-Library-Collection @@ -1 +1 @@ -Subproject commit ca7adb30da33a289e40b01e5e163f860d5c096c7 +Subproject commit 88874a7f451df36309d1d6ade03bc7186b4f6c8b diff --git a/gv_attr_type.pl b/gv_attr_type.pl index 6d572ab..b3e41ca 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -51,15 +51,6 @@ :- use_module(library(dcg/basics), except([string//1])). -:- use_module(plc(dcg/dcg_abnf)). -:- use_module(plc(dcg/dcg_ascii)). -:- use_module(plc(dcg/dcg_atom)). -:- use_module(plc(dcg/dcg_cardinal)). -:- use_module(plc(dcg/dcg_content)). -:- use_module(plc(dcg/dcg_generics)). -:- use_module(plc(dcg/dcg_quote)). -:- use_module(plc(dcg/dcg_replace)). - :- use_module(plGraphViz(gv_html)). @@ -203,25 +194,32 @@ double(N) -- %! doubleList(+Doubles:list(float))// . -doubleList(L) -- - '+'(double, L, [separator(colon)]). +doubleList([]) -- !, \"\". +doubleList([H]) -- !, double(H) +doubleList([H|T]) -- double(H), \":\", doubleList(T). %! escString(+String:atom)// . % @tbd Support for context-dependent replacements. -escString(String) -- +escString(S1) -- { - atom_phrase( - dcg_replace(double_quote, escaped_double_quote), - String, - String0 - ) + atom_codes(S1, Cs1), + phrase(escape_double_quotes, Cs1, Cs2), + atom_codes(S2, Cs2) }, - quoted(atom(String0)). -escaped_double_quote -- - \"\\\\\\\"\". + \"\\\"\", + atom(S2), + \"\\\"\". + +escape_double_quotes, [92,34] -- + [34], !, + escape_double_quotes. +escape_double_quotes, [X] -- + [X], + escape_double_quotes. + @@ -449,7 +447,9 @@ smoothType(triangle). % A GraphViz string. string(Content) -- - quoted(atom(Content)). + \"\\\"\", + atom(Content), + \"\\\"\". diff --git a/gv_attrs.pl b/gv_attrs.pl index 489ce51..1e8ccdf 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -6,34 +6,25 @@ ] ). -/**  GraphViz: Attributes - -Support for GraphViz attributes. +/**  GraphViz attributes @author Wouter Beek -@version 2014/06, 2014/11-2014/12, 2015/03 +@version 2015/07 */ :- use_module(library(apply)). :- use_module(library(dcg/basics)). +:- use_module(library(lists)). :- use_module(library(persistency)). :- use_module(library(xpath)). -:- use_module(plc(dcg/dcg_atom)). -:- use_module(plc(dcg/dcg_content)). -:- use_module(plc(dcg/dcg_meta)). -:- use_module(plc(dcg/dcg_generics)). -:- use_module(plc(generics/db_ext)). -:- use_module(plc(generics/print_ext)). -:- use_module(plc(io/file_ext)). -:- use_module(plc(io/file_gnu)). - -:- use_module(plHtml(html)). -:- use_module(plHtml(html_table)). - :- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]). +:- use_module(plGraphViz(gv_util)). + +:- dynamic(user:prolog_file_type/2). +:- multifile(user:prolog_file_type/2). -:- db_add_novel(user:prolog_file_type(log, logging)). +user:prolog_file_type(log, logging). %! gv_attr( %! ?Name:atom, @@ -131,13 +122,13 @@ assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):- % Downloads the table describing GraphViz attributes from `graphviz.org`. gv_attrs_download:- - report_on_process( + verbose_process( 'Updating GraphViz attributes table... ', ( gv_attrs_uri(Uri), - download_html_dom(Uri, Dom, [dialect(html5),silent(true)]), + html_download(Uri, Dom), xpath(Dom, //table(@align=lower_case(center)), TableDom), - html_to_table(TableDom, _, Rows), + html_table(TableDom, _, Rows), maplist(assert_gv_attr_row, Rows) ) ). @@ -146,22 +137,19 @@ gv_attrs_download:- %! gv_attrs_file(-File:atom) is det. gv_attrs_file(File):- - absolute_file_name( - data(gv_attrs), - File, - [access(write),file_type(logging)] - ). + absolute_file_name(gv_attrs, File, [access(write),file_type(logging)]). %! gv_attrs_init is det. gv_attrs_init:- gv_attrs_file(File), - safe_db_attach(File), + persistent_db_attach(File), file_age(File, Age), gv_attrs_update(Age). + %! gv_attrs_update(+Age:float) is det. % The persistent store is still fresh. @@ -174,20 +162,12 @@ gv_attrs_update(_):- gv_attrs_download. + %! gv_attrs_uri(-Url:url) is det. gv_attrs_uri('http://www.graphviz.org/doc/info/attrs.html'). -%! safe_db_attach(+File:atom) is det. - -safe_db_attach(File):- - exists_file(File), !, - db_attach(File, []). -safe_db_attach(File):- - touch_file(File), - safe_db_attach(File). - %! translate_default(+Default1:atom, -Default2:atom) is det. @@ -198,24 +178,36 @@ translate_default('', _):- !. translate_default(Default, Default). + %! translate_type(-Types:list(atom))// is det. +translate_type([]) -- !, []. translate_type([H|T]) -- {gv_attr_type(H)}, atom(H), whites, translate_type(T). -translate_type([]) -- !, []. + %! translated_usedby( %! -UsedBy:list(oneof([cluster,edge,graph,node,subgraph])) %! )// is det. -translate_usedby([cluster|T]) -- `C`, !, translate_usedby(T). -translate_usedby([edge|T]) -- `E`, !, translate_usedby(T). -translate_usedby([graph|T]) -- `G`, !, translate_usedby(T). -translate_usedby([node|T]) -- `N`, !, translate_usedby(T). -translate_usedby([subgraph|T]) -- `S`, !, translate_usedby(T). -translate_usedby([]) -- []. - +translate_usedby([cluster|T]) -- + \"C\", !, + translate_usedby(T). +translate_usedby([edge|T]) -- + \"E\", !, + translate_usedby(T). +translate_usedby([graph|T]) -- + \"G\", !, + translate_usedby(T). +translate_usedby([node|T]) -- + \"N\", !, + translate_usedby(T). +translate_usedby([subgraph|T]) -- + \"S\", !, + translate_usedby(T). +translate_usedby([]) -- + \"\". diff --git a/gv_color.pl b/gv_color.pl index 1f3f9d6..b8cf308 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -56,34 +56,41 @@ color(rgb(Red,Green,Blue)) -- !, \"#\", - '#'(3, hex_color, [Red,Green,Blue], []). + hex_color(Red), + hex_color(Green), + hex_color(Blue). color(rgbs(Red,Green,Blue,Alpha)) -- !, - \"#\", - '#'(4, hex_color, [Red,Green,Blue,Alpha], []). + color(rgb(Red,Green,Blue)), + hex_color(Alpha). color(hsv(Hue,Saturation,Value)) -- !, - '#'(3, hsv_color, [Hue,Saturation,Value], []). + hsv_color(Hue), + hsv_color(Saturation), + hsv_color(Value). color(Name) -- {gv_color(_, Name)}, atom(Name). hex_color(I) -- - {W1 is I / 16}, - 'HEX'(W1), - {W2 is I mod 16}, - 'HEX'(W2). + xinteger(I). hsv_color(D, Head, Tail):- format(codes(Head,Tail), '~2f', [D]). + %! colorList(+Pairs:list(pair(compound,float)))// . -colorList(Pairs) -- - '+'(wc, Pairs, []). +colorList([H]) -- !, + wc(H). +colorList([H|T]) -- + wc(H), + colorList(T). wc(Color-Float) -- color(Color), - '?'(wc_weight(Float), []). + ( wc_weight(Float) + ; \"\" + ). wc_weight(Float) -- \";\", diff --git a/gv_dot.pl b/gv_dot.pl index e98361b..c26d629 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -30,19 +30,8 @@ a_list = ID \"=\" ID [\",\"] [a_list] :- use_module(library(lists), except([delete/3,subset/2])). :- use_module(library(ordsets)). -:- use_module(plc(dcg/dcg_abnf)). -:- use_module(plc(dcg/dcg_arrow)). -:- use_module(plc(dcg/dcg_ascii)). -:- use_module(plc(dcg/dcg_atom)). -:- use_module(plc(dcg/dcg_bracket)). -:- use_module(plc(dcg/dcg_content)). -:- use_module(plc(dcg/dcg_generics)). -:- use_module(plc(dcg/dcg_meta)). -:- use_module(plc(dcg/dcg_quote)). - :- use_module(plGraphViz(gv_attrs)). :- use_module(plGraphViz(gv_html)). -:- use_module(plGraphViz(gv_numeral)). @@ -90,7 +79,7 @@ gv_compass_pt(w) -- \"w\". % undirected (operator `--`). gv_edge_operator(false) -- !, \"--\". -gv_edge_operator(true) -- arrow(right, 2). +gv_edge_operator(true) -- \"-\". @@ -120,7 +109,9 @@ gv_edge_statement(I, Directed, edge(FromId,ToId,EAttrs)) -- % We want `colorscheme/1` from the edges and % `directionality/1` from the graph. - bracketed(square, '*'(gv_attr(edge), EAttrs, [])), + \"[\", + gv_attrs(edge, EAttrs), + \"]\", line_feed. @@ -184,11 +175,14 @@ gv_id(html_like_label(Content)) -- !, % Double-quoted strings. % The quotes are already part of the given atom. gv_id(double_quoted_string(Atom)) -- !, - quoted(atom(Atom)). + \"\\\"\", + atom(Atom), + \"\\\"\". % Numerals. gv_id(N) -- {number(N)}, !, - gv_numeral(N). + % @tbd Use gv_numeral//1. + number(N). % Alpha-numeric strings. gv_id(Atom) -- {atom_codes(Atom, [H|T])}, @@ -198,8 +192,10 @@ gv_id(Atom) -- % GraphViz keyword. {\\+ gv_keyword([H|T])}. -gv_id_first(X) -- ascii_letter(X). -gv_id_first(X) -- underscore(X). +gv_id_first(X) -- + ascii_alpha(X). +gv_id_first(X) -- + underscore(X). gv_id_rest([]) -- []. gv_id_rest([H|T]) -- @@ -213,10 +209,10 @@ gv_id_rest([H|T]) -- %! gv_keyword(+Codes:list(code)) is semidet. % Succeeds if the given codes for a GraphViz reserved keyword. -gv_keyword(Codes):- +gv_keyword(Cs):- % Obviously, the keywords do not occur on the difference list input. % So we must use phrase/[2,3]. - phrase(gv_keyword, Codes). + phrase(gv_keyword, Cs). %! gv_keyword// . % GraphViz has reserved keywords that cannot be used as identifiers. @@ -260,18 +256,23 @@ gv_node_id(Id) -- gv_node_statement(I, vertex(Id,VAttrs)) -- indent(I), - gv_node_id(Id), \" \", - bracketed(square, '*'(gv_attr(node), VAttrs, [])), - line_feed. + gv_node_id(Id), + \" [\", + gv_attrs(node, VAttrs), + \"\\n\". gv_port -- gv_port_location, - '?'(gv_port_angle, []). + ( gv_port_angle + ; \"\" + ). gv_port -- gv_port_angle, - '?'(gv_port_location, []). + ( gv_port_location + ; \"\" + ). gv_port -- \":\", gv_compass_pt(_). @@ -284,38 +285,31 @@ gv_port_location -- \":\", gv_id(_). gv_port_location -- - \":\", - bracketed( - round, - ( - gv_id(_), - \",\", - gv_id(_) - ) - ). + \":(\", + gv_id(_), + \",\", + gv_id(_) + \")\". gv_ranked_node_collection(I, rank(Rank_V_Term,Content_V_Terms)) -- indent(I), - bracketed(curly, ( - line_feed, - - % The rank attribute. - {NewI is I + 1}, - indent(NewI), - gv_attr(subgraph, rank=same), - \";\", - line_feed, - - % Vertice statements. - '*'( - gv_node_statement(NewI), - [Rank_V_Term|Content_V_Terms], - [] - ), - - % We want to indent the closing curly brace. - indent(I) - )), - line_feed. + \"{\\n\", + + % The rank attribute. + {NewI is I + 1}, + indent(NewI), + gv_attr(subgraph, rank=same), + \";\\n\", + + % Vertice statements. + '*'( + gv_node_statement(NewI), + [Rank_V_Term|Content_V_Terms], + [] + ), + + % We want to indent the closing curly brace. + indent(I), + \"\\n\". diff --git a/gv_file.pl b/gv_file.pl index 5d2228e..45135f3 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -18,8 +18,6 @@ :- use_module(library(option)). :- use_module(library(process)). -:- use_module(plc(process/process_ext)). - :- dynamic(user:prolog_file_type/2). :- multifile(user:prolog_file_type/2). @@ -88,11 +86,10 @@ file_to_gv(InputFile, OutputFile, Options):- % Run the GraphViz conversion command in the shell. format(atom(OutputTypeFlag), '-T~a', [OutputType]), format(atom(OutputFileFlag), '-o~a', [OutputFile]), - atomic_list_concat(['GraphViz',Method], ' ', Program), - handle_process( - Method, + process_ext( + path(Method), [OutputTypeFlag,file(InputFile),OutputFileFlag], - [program(Program)] + [] ). diff --git a/gv_html.pl b/gv_html.pl index 65ae2bd..79d2564 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -56,7 +56,9 @@ cell:  label  %! gv_html_like_label(?Content:compound)// . gv_html_like_label(Content) -- - bracketed(angular, label(Content)). + \"\". diff --git a/gv_util.pl b/gv_util.pl new file mode 100644 index 0000000..b2cbdcc --- /dev/null +++ b/gv_util.pl @@ -0,0 +1,260 @@ +:- module( + gv_util, + [ + ascii_alpha//1, % ?X:code + atom_phrase/2, % :Goal_1 + % +Atom:atom + atom_phrase/3, % :Goal_1 + % +Atom1:atom + % -Atom2:atom + file_age/2, % +File:atom + % -Age:float + html_download/2, % +Uri:atom + % -Dom:compound + indent//1, % +N:nonneg + persistent_db_attach/2, % +Module:atom + % +File:atom + underscore//1, % ?X:code + verbose_process/2 % +Process:atom + % :Goal_0 + ] +). + +/**  GraphViz utilities + +Utilities that should not be specific to the GraphViz library +but that are considered too small to publish independently. + +@author Wouter Beek +@version 2015/07 +*/ + +:- use_module(library(ansi_term)). +:- use_module(library(http/http_open)). +:- use_module(library(http/http_ssl_plugin)). % HTTPS support. +:- use_module(library(lambda)). +:- use_module(library(option)). +:- use_module(library(process)). +:- use_module(library(sgml)). +:- use_module(library(xpath)). + +:- meta_predicate(atom_phrase(1,+)). +:- meta_predicate(atom_phrase(1,+,-)). +:- meta_predicate(dcg_call(//,?,?)). +:- meta_predicate(dcg_call(1,+,?,?)). +:- meta_predicate(http_get(+,1,+)). +:- meta_predicate(http_stream(+,1,+)). +:- meta_predicate(verbose_process(+,0)). + + + +%! ascii_alpha(?X:code)// . + +ascii_alpha(X) -- + between_code(65, 90, X) +ascii_alpha(X) -- + between_code(97, 122, X) + + + +%! ascii_alpha_numeric(?X:code)// . + +ascii_alpha_numeric(X) -- + ascii_alpha(X). +ascii_alpha_numeric(X) -- + ascii_numberic(X). + + + +%! ascii_numeric(?X:code)// . + +ascii_numeric(X) -- + between_code(48, 57, X). + + + +%! atom_phrase(:Goal_1, +Atom:atom) is det. + +atom_phrase(Goal_1, A):- + atom_codes(A, Cs), + phrase(Goal_1, Cs). + + + +%! atom_phrase(:Goal_1, +Atom1:atom, +Atom2:atom) is det. + +atom_phrase(Goal_1, A1, A2):- + atom_codes(A1, Cs1), + phrase(Goal_1, Cs1, Cs2), + atom_codes(A2, Cs2). + + + +%! between_code(+Low:code, +High:code, ?X:code)// . + +between_code(Low, High, X) -- + [X], + {between(Low, High, X)}. + + + +%! dcg_call(:Dcg_0)// is det. + +dcg_call(Dcg, X, Y):- + call(Dcg, X, Y). + +%! dcg_call(:Dcg_1, +Argument1)// is det. + +dcg_call(Dcg, A1, X, Y):- + call(Dcg, A1, X, Y). + + + +%! file_age(+File:atom, -Age:float) is det. + +file_age(File, Age):- + time_file(File, LastModified), + get_time(Now), + Age is Now - LastModified. + + + +%! html_download(+Uri:atom, -Dom:compound) is det. + +html_download(Uri, Dom):- + http_get( + Uri, + \\Stream^load_html(Stream, Dom, [dialect(html5),max_errors(-1)]), + copy + [] + ). + + + +%! http_get(+Uri:atom, :Success_1, +Options:list(compound)) is det. + +http_get(Uri, Success_1, Opts0):- + merge_options([method(get),status_code(Status)], Opts0, Opts), + setup_call_cleanup( + http_open(Uri, Stream, Opts), + http_stream(Status, Success_1, Stream), + close(Stream) + ). + +%! http_stream(+Status:between(100,599), :Success_1, +Read:stream) is det. + +http_stream(Status, Success_1, Stream):- + between(200, 299, Status), !, + call(Success_1, Stream). +http_stream(Status, _, Stream):- + format(user_error, '[STATUS ~D] ', [Status]), + copy_stream_data(Stream, user_error), + format(user_error, '\\n', []). + + + +%! html_table(+Dom:list(compound), -Header:list, -Data:list(list)) is det. + +html_table(Dom, Header, Data):- + ignore(html_table_row(header, Dom, Header)), + findall( + Data0, + html_table_row(data, Table, Data0), + Data + ). + +%! html_table_row( +%! +Mode:oneof([data,header]), +%! +Dom:list(compound), +%! -Data:list +%! ) is det. + +html_table_row(data, Dom, Row):- !, + xpath(Dom, //tr, Tr), + findall( + Cell, + xpath(Tr, //td(normalize_space), Cell), + Row + ), + Row \\== []. +html_table_row(header, Dom, Row):- + xpath(Dom, //tr, Tr), + findall( + Cell, + xpath(Tr, //th(normalize_space), Cell), + Row + ), + Row \\== []. + + + +%! indent(+N:nonneg)// is det. + +indent(0) -- !, \"\". +indent(N) -- + \" \", + {succ(M, N)}, + indent(M). + + + +%! persistent_db_attach(+Module:atom, +File:atom) is det. +% Safe attachement of a persistent database dump. +% This first make sure the given file exists. + +persistent_db_attach(Mod, File):- + exists_file(File), !, + Mod:db_attach(File, []). +persistent_db_attach(Mod, File):- + touch_file(File), + persistent_db_attach(Mod, File). + +touch_file(File):- + create_process(path(touch), [file(File)], []). + + + +%! underscore(?C:code)// . + +underscore(95) -- + [95]. + + + +%! verbose_process(+Name:atom, :Goal_0) is det. + +verbose_process(Name, Goal_0):- + setup_call_catcher_cleanup( + start(Name), + Goal_0, + E, + ( E == true + - success(Name) + ; failure(Name) + ) + ). + +failure(Name):- + warning('[FAILURE]'), + normal(' Process '), + normal(Name), + normal(':'), + nl, + normal(E). + +start(Name):- + normal('Starting process '), + normal(Name), + normal('.'). + +success(Name):- + success('[SUCCESS]'), + normal(' Ending process '), + normal(Name), + normal('.'). + +emphasis(X):- ansi_format([bold], '~a', [X]). +normal(X):- ansi_format([], '~a', [X]). +notification(X):- ansi_format([bold,fg(yellow)], '~a', [X]). +success(X):- ansi_format([bold,fg(green)], '~a', [X]). +warning(X):- ansi_format([bold,fg(red)], '~a', [X]). ``` 99: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 50a3dbc å’Œå˜åŠ¨å a97e8e1  [back to content](#compare) ``` diff diff --git a/Prolog-Library-Collection b/Prolog-Library-Collection deleted file mode 160000 index 88874a7..0000000 --- a/Prolog-Library-Collection +++ /dev/null @@ -1 +0,0 @@ -Subproject commit 88874a7f451df36309d1d6ade03bc7186b4f6c8b diff --git a/debug.pl b/debug.pl deleted file mode 100644 index 12b4526..0000000 --- a/debug.pl +++ /dev/null @@ -1,7 +0,0 @@ -% Debug file for library plGraphViz. - -:- [load]. - -:- use_module(debug_project). -:- debug_all_files. - diff --git a/debug_project.pl b/debug_project.pl deleted file mode 100644 index d53a92f..0000000 --- a/debug_project.pl +++ /dev/null @@ -1,106 +0,0 @@ -:- module( - debug_project, - [ - debug_all_files/0, - start_pldoc_server/0 - ] -). - -/**  Debug project - -Generic code for debugging a project: - * Load all subdirectories and Prolog files contained in those directories. - -@author Wouter Beek -@version 2015/02/26 -*/ - -:- use_module(library(ansi_term)). -:- use_module(library(apply)). -:- use_module(library(pldoc)). -:- use_module(library(portray_text)). - -:- set_prolog_flag( - answer_write_options, - [max_depth(100),portrayed(true),spacing(next_argument)] -). -:- set_prolog_flag( - debugger_write_options, - [max_depth(100),portrayed(true),spacing(next_argument)] -). -:- set_portray_text(ellipsis, 1000). - -:- dynamic(user:debug_mode). -:- multifile(user:debug_mode). - -:- initialization(init_debug_mode). - - - - - -debug_all_files:- - ensure_loaded(plc(io/dir_ext)), - absolute_file_name(project(.), Dir, [access(read),file_type(directory)]), - directory_files( - Dir, - Files1, - [ - file_types([prolog]), - include_directories(false), - include_self(false), - recursive(true) - ] - ), - exclude(do_not_load, Files1, Files2), - maplist(use_module0, Files2). -use_module0(File):- - print_message(informational, loading_module(File)), - use_module(File). - -do_not_load(File1):- - file_base_name(File1, File2), - file_name_extension(File3, pl, File2), - do_not_load0(File3). - -do_not_load0(dcg_ascii). -do_not_load0(dcg_unicode). -do_not_load0(debug). -do_not_load0(debug_project). -do_not_load0(index). -do_not_load0(load). -do_not_load0(load_project). -do_not_load0(run). -do_not_load0(style). - - - -%! start_pldoc_server is det. -% The plDoc server should be started *before* documented modules are loaded. - -start_pldoc_server:- - doc_server(9999). - - - - - -% INITIALIZATION - -init_debug_mode:- - % Set the debug mode flag. - ( user:debug_mode - - true - ; assert(user:debug_mode) - ), - % Avoid errors when using gtrace/0 in threads. - guitracer. - - - -% MESSAGES - -:- multifile(prolog:message//1). - -prolog:message(loading_module(File)) -- - ['[M] ',File]. diff --git a/gv_attr_type.pl b/gv_attr_type.pl index b3e41ca..4e1b7f2 100644 --- a/gv_attr_type.pl +++ b/gv_attr_type.pl @@ -36,7 +36,7 @@ ] ). :- reexport( - plGraphViz(gv_color), + library(gv/gv_color), [ color//1, % +Color:compound colorList//1 % +ColorList:list(compound) @@ -46,12 +46,15 @@ /**  GraphViz attribute types @author Wouter Beek -@version 2014/06, 2014/11-2015/01 +@version 2015/07 */ :- use_module(library(dcg/basics), except([string//1])). - -:- use_module(plGraphViz(gv_html)). +:- use_module(library(dcg/dcg_abnf)). +:- use_module(library(dcg/dcg_ascii)). +:- use_module(library(dcg/dcg_phrase)). +:- use_module(library(dcg/dcg_quoted)). +:- use_module(library(gv/gv_html)). @@ -194,9 +197,8 @@ double(N) -- %! doubleList(+Doubles:list(float))// . -doubleList([]) -- !, \"\". -doubleList([H]) -- !, double(H) -doubleList([H|T]) -- double(H), \":\", doubleList(T). +doubleList(L) -- + '*'(double, L, [separator(colon)]). @@ -204,14 +206,8 @@ doubleList([H|T]) -- double(H), \":\", doubleList(T). % @tbd Support for context-dependent replacements. escString(S1) -- - { - atom_codes(S1, Cs1), - phrase(escape_double_quotes, Cs1, Cs2), - atom_codes(S2, Cs2) - }, - \"\\\"\", - atom(S2), - \"\\\"\". + {atom_phrase(escape_double_quotes, S1, S2)}, + quoted(atom(S2)). escape_double_quotes, [92,34] -- [34], !, @@ -285,9 +281,7 @@ pagedir('TR'). % `point(X:float,Y:float,Changeable:boolean)`. point(point(X,Y,Changeable)) -- - float(X), - \",\", - float(Y), + '#'(2, float, [X,Y], [separator(comma)]), input_changeable(Changeable). input_changeable(false) -- \"\". @@ -348,10 +342,12 @@ rankdir('TB'). %! rect(+Rectangle:compound)// . rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -- - float(LowerLeftX), \",\", - float(LowerLeftY), \",\", - float(UpperRightX), \",\", - float(UpperRightY). + '#'( + 4, + float, + [LowerLeftX,LowerLeftY,UpperRightX,UpperRightY], + [separator(comma)] + ). @@ -447,9 +443,7 @@ smoothType(triangle). % A GraphViz string. string(Content) -- - \"\\\"\", - atom(Content), - \"\\\"\". + quoted(atom(Content)). diff --git a/gv_attrs.pl b/gv_attrs.pl index 1e8ccdf..cce4f9d 100644 --- a/gv_attrs.pl +++ b/gv_attrs.pl @@ -13,13 +13,18 @@ */ :- use_module(library(apply)). +:- use_module(library(deb_ext)). :- use_module(library(dcg/basics)). +:- use_module(library(dcg/dcg_call)). +:- use_module(library(dcg/dcg_phrase)). +:- use_module(library(file_ext)). +:- use_module(library(http/html_download)). +:- use_module(library(http/html_table)). :- use_module(library(lists)). -:- use_module(library(persistency)). +:- use_module(library(persistency_ext)). :- use_module(library(xpath)). -:- use_module(plGraphViz(gv_attr_type), [gv_attr_type/1]). -:- use_module(plGraphViz(gv_util)). +:- use_module(library(gv/gv_attr_type), [gv_attr_type/1]). :- dynamic(user:prolog_file_type/2). :- multifile(user:prolog_file_type/2). @@ -144,7 +149,7 @@ gv_attrs_file(File):- gv_attrs_init:- gv_attrs_file(File), - persistent_db_attach(File), + attach_persistent_db(File), file_age(File, Age), gv_attrs_update(Age). diff --git a/gv_color.pl b/gv_color.pl index b8cf308..dd1690b 100644 --- a/gv_color.pl +++ b/gv_color.pl @@ -18,7 +18,7 @@ :- use_module(library(apply)). :- use_module(library(dcg/basics)). -:- use_module(library(lists), except([delete/3,subset/2])). +:- use_module(library(lists)). :- use_module(library(persistency)). :- use_module(library(xpath)). @@ -56,16 +56,12 @@ color(rgb(Red,Green,Blue)) -- !, \"#\", - hex_color(Red), - hex_color(Green), - hex_color(Blue). + '#'(3, hex_color, [Red,Green,Blue], []). color(rgbs(Red,Green,Blue,Alpha)) -- !, color(rgb(Red,Green,Blue)), hex_color(Alpha). color(hsv(Hue,Saturation,Value)) -- !, - hsv_color(Hue), - hsv_color(Saturation), - hsv_color(Value). + '#'(3, hsv_color, [Hue,Saturation,Value], []). color(Name) -- {gv_color(_, Name)}, atom(Name). @@ -80,11 +76,8 @@ hsv_color(D, Head, Tail):- %! colorList(+Pairs:list(pair(compound,float)))// . -colorList([H]) -- !, - wc(H). -colorList([H|T]) -- - wc(H), - colorList(T). +colorList(L) -- + '+'(wc, L, []). wc(Color-Float) -- color(Color), @@ -105,11 +98,11 @@ wc_weight(Float) -- %! gv_color_download is det. gv_color_download:- - report_on_process( + verbose_call( 'Updating the GraphViz color table...', ( gv_color_uri(Uri), - download_html_dom(Uri, Dom, [html_dialect(html4),silent(true)]), + html_download(Uri, Dom), xpath(Dom, //table(1), TableDom1), xpath(Dom, //table(2), TableDom2), maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]) @@ -117,7 +110,7 @@ gv_color_download:- ). assert_color_table(Colorscheme, TableDom):- - html_to_table(TableDom, _, Rows), + html_table(TableDom, _, Rows), append(Rows, Cells), forall( member(Cell, Cells), @@ -157,4 +150,3 @@ gv_color_update(_):- %! gv_color_uri(-Url:url) is det. gv_color_uri('http://www.graphviz.org/doc/info/colors.html'). - diff --git a/gv_dot.pl b/gv_dot.pl index c26d629..9c53cc5 100644 --- a/gv_dot.pl +++ b/gv_dot.pl @@ -1,7 +1,6 @@ :- module( gv_dot, [ - gv_graph//1 % +Graph:compound ] ). @@ -22,17 +21,19 @@ a_list = ID \"=\" ID [\",\"] [a_list] @author Wouter Beek @see http://www.graphviz.org/content/dot-language -@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11-2014/12 +@version 2015/07 */ :- use_module(library(apply)). :- use_module(library(dcg/basics)). -:- use_module(library(lists), except([delete/3,subset/2])). +:- use_module(library(dcg/dcg_ascii)). +:- use_module(library(dcg/dcg_bracketed)). +:- use_module(library(dcg/dcg_content)). +:- use_module(library(gv/gv_attrs)). +:- use_module(library(gv/gv_html)). +:- use_module(library(lists)). :- use_module(library(ordsets)). -:- use_module(plGraphViz(gv_attrs)). -:- use_module(plGraphViz(gv_html)). - @@ -44,14 +45,24 @@ a_list = ID \"=\" ID [\",\"] [a_list] % A single GraphViz attribute. % We assume that the attribute has already been validated. -gv_attr(Context, Name=Value) -- - gv_id(Name), +gv_attr(Context, N=V) -- + gv_id(N), \"=\", - gv_attr_value(Context, Name=Value), + gv_attr_value(Context, N=V), \";\". +%! gv_attrs( +%! +Kind:oneof([edge,graph,node]), +%! +Attributes:list(compound) +%! )// is det. + +gv_attrs(Kind, L) -- + bracketed(square, '*'(gv_attr, L, [])). + + + %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . % ``` % compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) @@ -76,7 +87,7 @@ gv_compass_pt(w) -- \"w\". % undirected. % % @arg Directed Whether an edge is directed (operator `-`) or -% undirected (operator `--`). +% undirected (operator `--`). gv_edge_operator(false) -- !, \"--\". gv_edge_operator(true) -- \"-\". @@ -109,10 +120,8 @@ gv_edge_statement(I, Directed, edge(FromId,ToId,EAttrs)) -- % We want `colorscheme/1` from the edges and % `directionality/1` from the graph. - \"[\", gv_attrs(edge, EAttrs), - \"]\", - line_feed. + \"\\n\". @@ -137,14 +146,8 @@ gv_generic_attributes_statement(_, _, []) -- [], !. gv_generic_attributes_statement(Kind, I, KindAttrs) -- indent(I), gv_kind(Kind), \" \", - \"[\", gv_attrs(Kind, KindAttrs), - \"]\\n\". - -gv_attrs(_, []) -- !, \"\". -gv_attrs(Kind, [H|T]) -- - gv_attr(Kind, H), - gv_attrs(Kind, T). + \"\\n\". @@ -175,9 +178,7 @@ gv_id(html_like_label(Content)) -- !, % Double-quoted strings. % The quotes are already part of the given atom. gv_id(double_quoted_string(Atom)) -- !, - \"\\\"\", - atom(Atom), - \"\\\"\". + quoted(atom(Atom)). % Numerals. gv_id(N) -- {number(N)}, !, @@ -193,7 +194,7 @@ gv_id(Atom) -- {\\+ gv_keyword([H|T])}. gv_id_first(X) -- - ascii_alpha(X). + ascii_letter(X). gv_id_first(X) -- underscore(X). @@ -257,7 +258,6 @@ gv_node_id(Id) -- gv_node_statement(I, vertex(Id,VAttrs)) -- indent(I), gv_node_id(Id), - \" [\", gv_attrs(node, VAttrs), \"\\n\". @@ -293,9 +293,12 @@ gv_port_location -- -gv_ranked_node_collection(I, rank(Rank_V_Term,Content_V_Terms)) -- +gv_ranked_node_collection(I, Rank) -- indent(I), - \"{\\n\", + bracketed(curly, gv_ranked_node_collection0(I, Rank)). + +gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -- + \"\\n\", % The rank attribute. {NewI is I + 1}, diff --git a/gv_file.pl b/gv_file.pl index 45135f3..da17737 100644 --- a/gv_file.pl +++ b/gv_file.pl @@ -29,6 +29,8 @@ user:prolog_file_type(pdf, pdf). + + %! gv_export( %! +ExportGraph:compound, %! +OutputFile:atom, diff --git a/gv_graph.pl b/gv_graph.pl index dd4af97..9ae7353 100644 --- a/gv_graph.pl +++ b/gv_graph.pl @@ -12,11 +12,15 @@ */ :- use_module(library(apply)). +:- use_module(library(dcg/dcg_abnf)). +:- use_module(library(dcg/dcg_content)). :- use_module(library(lists)). :- use_module(library(option)). + + %! gv_graph(+Graph:compound)// % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: @@ -145,20 +149,16 @@ gv_graph(G1, I) -- indent(I), \"}\\n\". -gv_edge_statements(_, _, []) -- !, \"\". -gv_edge_statements(I, Dir, [H|T]) -- - gv_edge_statement(I, Dir, H), - gv_edge_statements(I, Dir, T). +gv_edge_statements(I, Dir, L) -- + '*'(gv_edge_statement(I, Dir), L, []). + +gv_node_statements(I, L) -- + '*'(gv_node_statement(I), L, []). + +gv_ranked_node_collections(I, L) -- + '*'(gv_ranked_node_collection(I), L, []). -gv_node_statements(_, []) -- !, \"\". -gv_node_statements(I, [H|T]) -- - gv_node_statement(I, H), - gv_node_statements(I, T). -gv_ranked_node_collections(_, []) -- !, \"\". -gv_ranked_node_collections(I, [H|T]) -- - gv_ranked_node_collection(I, H), - gv_ranked_node_collections(I, T), @@ -191,7 +191,7 @@ gv_graph_type(true) -- \"digraph\". % no multi-edges. % This only applies to directed graphs. -gv_strict(false) -- []. +gv_strict(false) -- \"\". gv_strict(true) -- \"strict \". diff --git a/gv_html.pl b/gv_html.pl index 79d2564..ced6d6b 100644 --- a/gv_html.pl +++ b/gv_html.pl @@ -40,14 +40,13 @@ cell:  label  @author Wouter Beek @see http://www.graphviz.org/content/node-shapes#html -@version 2013/07, 2013/09, 2014/03-2014/06, 2014/11 +@version 2015/07 */ -:- use_module(plc(dcg/dcg_abnf)). -:- use_module(plc(dcg/dcg_bracket)). -:- use_module(plc(dcg/dcg_content)). - -:- use_module(plHtml(html_dcg)). +:- use_module(library(dcg/dcg_abnf)). +:- use_module(library(dcg/dcg_bracket)). +:- use_module(library(dcg/dcg_content)). +:- use_module(library(http/html_dcg)). @@ -56,9 +55,7 @@ cell:  label  %! gv_html_like_label(?Content:compound)// . gv_html_like_label(Content) -- - \"\". + bracketed(angular, label(Content)). @@ -262,7 +259,7 @@ textitem(String) -- -% HELPERS +% HELPERS % %! supported_html_element(+Name:atom) is semidet. %! supported_html_element(-Name:atom) is multi. diff --git a/gv_numeral.pl b/gv_numeral.pl index bff1255..1e5c723 100644 --- a/gv_numeral.pl +++ b/gv_numeral.pl @@ -11,14 +11,14 @@ @version 2014/05-2014/06, 2015/01 */ -:- use_module(plc(dcg/dcg_abnf)). -:- use_module(plc(dcg/dcg_abnf_common)). -:- use_module(plc(dcg/dcg_ascii)). -:- use_module(plc(dcg/dcg_cardinal)). -:- use_module(plc(math/math_ext)). -:- use_module(plc(math/positional)). -:- use_module(plc(math/radix)). -:- use_module(plc(math/rational_ext)). +:- use_module(library(dcg/dcg_abnf)). +:- use_module(library(dcg/dcg_abnf_common)). +:- use_module(library(dcg/dcg_ascii)). +:- use_module(library(dcg/dcg_cardinal)). +:- use_module(library(math/math_ext)). +:- use_module(library(math/positional)). +:- use_module(library(math/radconv)). +:- use_module(library(math/rational_ext)). @@ -63,14 +63,14 @@ gv_numeral(N) -- % preceded by the decimal separator. {I =:= 0} - \".\", - {weights_fraction(FW, F)}, + {positional_fraction(FW, F)}, '[0-9]*'(FW) ; % [3] Both the integer part and the fractional are non-zero, % so write both of them, with the decimal separator in-between. {positional(I, IW)}, '[0-9]+'(IW), \".\", - {weights_fraction(FW, F)}, + {positional_fraction(FW, F)}, '[0-9]*'(FW) ) ; '[-]?'(Sg), diff --git a/gv_util.pl b/gv_util.pl deleted file mode 100644 index b2cbdcc..0000000 --- a/gv_util.pl +++ /dev/null @@ -1,260 +0,0 @@ -:- module( - gv_util, - [ - ascii_alpha//1, % ?X:code - atom_phrase/2, % :Goal_1 - % +Atom:atom - atom_phrase/3, % :Goal_1 - % +Atom1:atom - % -Atom2:atom - file_age/2, % +File:atom - % -Age:float - html_download/2, % +Uri:atom - % -Dom:compound - indent//1, % +N:nonneg - persistent_db_attach/2, % +Module:atom - % +File:atom - underscore//1, % ?X:code - verbose_process/2 % +Process:atom - % :Goal_0 - ] -). - -/**  GraphViz utilities - -Utilities that should not be specific to the GraphViz library -but that are considered too small to publish independently. - -@author Wouter Beek -@version 2015/07 -*/ - -:- use_module(library(ansi_term)). -:- use_module(library(http/http_open)). -:- use_module(library(http/http_ssl_plugin)). % HTTPS support. -:- use_module(library(lambda)). -:- use_module(library(option)). -:- use_module(library(process)). -:- use_module(library(sgml)). -:- use_module(library(xpath)). - -:- meta_predicate(atom_phrase(1,+)). -:- meta_predicate(atom_phrase(1,+,-)). -:- meta_predicate(dcg_call(//,?,?)). -:- meta_predicate(dcg_call(1,+,?,?)). -:- meta_predicate(http_get(+,1,+)). -:- meta_predicate(http_stream(+,1,+)). -:- meta_predicate(verbose_process(+,0)). - - - -%! ascii_alpha(?X:code)// . - -ascii_alpha(X) -- - between_code(65, 90, X) -ascii_alpha(X) -- - between_code(97, 122, X) - - - -%! ascii_alpha_numeric(?X:code)// . - -ascii_alpha_numeric(X) -- - ascii_alpha(X). -ascii_alpha_numeric(X) -- - ascii_numberic(X). - - - -%! ascii_numeric(?X:code)// . - -ascii_numeric(X) -- - between_code(48, 57, X). - - - -%! atom_phrase(:Goal_1, +Atom:atom) is det. - -atom_phrase(Goal_1, A):- - atom_codes(A, Cs), - phrase(Goal_1, Cs). - - - -%! atom_phrase(:Goal_1, +Atom1:atom, +Atom2:atom) is det. - -atom_phrase(Goal_1, A1, A2):- - atom_codes(A1, Cs1), - phrase(Goal_1, Cs1, Cs2), - atom_codes(A2, Cs2). - - - -%! between_code(+Low:code, +High:code, ?X:code)// . - -between_code(Low, High, X) -- - [X], - {between(Low, High, X)}. - - - -%! dcg_call(:Dcg_0)// is det. - -dcg_call(Dcg, X, Y):- - call(Dcg, X, Y). - -%! dcg_call(:Dcg_1, +Argument1)// is det. - -dcg_call(Dcg, A1, X, Y):- - call(Dcg, A1, X, Y). - - - -%! file_age(+File:atom, -Age:float) is det. - -file_age(File, Age):- - time_file(File, LastModified), - get_time(Now), - Age is Now - LastModified. - - - -%! html_download(+Uri:atom, -Dom:compound) is det. - -html_download(Uri, Dom):- - http_get( - Uri, - \\Stream^load_html(Stream, Dom, [dialect(html5),max_errors(-1)]), - copy - [] - ). - - - -%! http_get(+Uri:atom, :Success_1, +Options:list(compound)) is det. - -http_get(Uri, Success_1, Opts0):- - merge_options([method(get),status_code(Status)], Opts0, Opts), - setup_call_cleanup( - http_open(Uri, Stream, Opts), - http_stream(Status, Success_1, Stream), - close(Stream) - ). - -%! http_stream(+Status:between(100,599), :Success_1, +Read:stream) is det. - -http_stream(Status, Success_1, Stream):- - between(200, 299, Status), !, - call(Success_1, Stream). -http_stream(Status, _, Stream):- - format(user_error, '[STATUS ~D] ', [Status]), - copy_stream_data(Stream, user_error), - format(user_error, '\\n', []). - - - -%! html_table(+Dom:list(compound), -Header:list, -Data:list(list)) is det. - -html_table(Dom, Header, Data):- - ignore(html_table_row(header, Dom, Header)), - findall( - Data0, - html_table_row(data, Table, Data0), - Data - ). - -%! html_table_row( -%! +Mode:oneof([data,header]), -%! +Dom:list(compound), -%! -Data:list -%! ) is det. - -html_table_row(data, Dom, Row):- !, - xpath(Dom, //tr, Tr), - findall( - Cell, - xpath(Tr, //td(normalize_space), Cell), - Row - ), - Row \\== []. -html_table_row(header, Dom, Row):- - xpath(Dom, //tr, Tr), - findall( - Cell, - xpath(Tr, //th(normalize_space), Cell), - Row - ), - Row \\== []. - - - -%! indent(+N:nonneg)// is det. - -indent(0) -- !, \"\". -indent(N) -- - \" \", - {succ(M, N)}, - indent(M). - - - -%! persistent_db_attach(+Module:atom, +File:atom) is det. -% Safe attachement of a persistent database dump. -% This first make sure the given file exists. - -persistent_db_attach(Mod, File):- - exists_file(File), !, - Mod:db_attach(File, []). -persistent_db_attach(Mod, File):- - touch_file(File), - persistent_db_attach(Mod, File). - -touch_file(File):- - create_process(path(touch), [file(File)], []). - - - -%! underscore(?C:code)// . - -underscore(95) -- - [95]. - - - -%! verbose_process(+Name:atom, :Goal_0) is det. - -verbose_process(Name, Goal_0):- - setup_call_catcher_cleanup( - start(Name), - Goal_0, - E, - ( E == true - - success(Name) - ; failure(Name) - ) - ). - -failure(Name):- - warning('[FAILURE]'), - normal(' Process '), - normal(Name), - normal(':'), - nl, - normal(E). - -start(Name):- - normal('Starting process '), - normal(Name), - normal('.'). - -success(Name):- - success('[SUCCESS]'), - normal(' Ending process '), - normal(Name), - normal('.'). - -emphasis(X):- ansi_format([bold], '~a', [X]). -normal(X):- ansi_format([], '~a', [X]). -notification(X):- ansi_format([bold,fg(yellow)], '~a', [X]). -success(X):- ansi_format([bold,fg(green)], '~a', [X]). -warning(X):- ansi_format([bold,fg(red)], '~a', [X]). diff --git a/load.pl b/load.pl deleted file mode 100644 index de8b5ca..0000000 --- a/load.pl +++ /dev/null @@ -1,13 +0,0 @@ -% Load file for the plGraphViz library. - -:- dynamic(user:project/2). -:- multifile(user:project/2). - user:project(plGraphViz, 'GraphViz support for SWI-Prolog.'). - -:- use_module(load_project). -:- load_project([ - plc-'Prolog-Library-Collection', - plHtml, - plUri -]). - diff --git a/load_project.pl b/load_project.pl deleted file mode 100644 index 3f0ebef..0000000 --- a/load_project.pl +++ /dev/null @@ -1,125 +0,0 @@ -:- module( - load_project, - [ - load_project/1, % +ChildProjects:list(or([atom,pair(atom)])) - load_subproject/2, % +ParentFileSearchPath:atom - % +Child:or([atom,pair(atom)]) - set_data_subdirectory/1 % +ParentDirectory:atom - ] -). - -/**  Load project - -Generic code for loading a project: - * Create a subdirectory for data. - * Load the root of subprojects onto the file search path. - * Load the index of subprojects onto the file search path. - -@author Wouter Beek -@version 2014/11/10 -*/ - -:- use_module(library(ansi_term)). % Colorized terminal messages. -:- use_module(library(apply)). -:- use_module(library(pldoc)). - -:- dynamic(user:project/2). -:- multifile(user:project/2). -:- dynamic(user:project/3). -:- multifile(user:project/3). - - - -load_project(ChildProjects):- - doc_server(9999), - - parent_alias(ParentFsp), - - % Entry point. - source_file(load_project(_), ThisFile), - file_directory_name(ThisFile, ThisDir), - assert(user:file_search_path(ParentFsp, ThisDir)), - assert(user:file_search_path(project, ThisDir)), - - % Set the data subdirectory. - set_data_subdirectory(ThisDir), - - % Load the root of submodules onto the file search path. - maplist(load_subproject(ParentFsp), ChildProjects), - - % Load the index into the file search path. - load_project_index(ParentFsp). - - - -%! load_subproject( -%! +ParentFileSearchPath:atom, -%! +Child:or([atom,pair(atom)]) -%! ) is det. - -load_subproject(ParentFsp, ChildFsp-ChildDir):- !, - load_subproject_file_search_path(ParentFsp, ChildFsp, ChildDir), - load_project_index(ChildFsp). -load_subproject(ParentFsp, Child):- - load_subproject(ParentFsp, Child-Child). - - -%! load_subproject_file_search_path( -%! +ParentFileSearchPath:atom, -%! +ChildFileSearchPath:atom, -%! +ChildDirectory:atom -%! ) is det. - -% The file search path for the subproject has already been set. -load_subproject_file_search_path(_, ChildFsp, _):- - user:file_search_path(ChildFsp, _). -load_subproject_file_search_path(ParentFsp, ChildFsp, ChildDir):- - Spec =.. [ParentFsp,ChildDir], - absolute_file_name(Spec, _, [access(read),file_type(directory)]), !, - assert(user:file_search_path(ChildFsp, Spec)). -load_subproject_file_search_path(_, ChildFsp, ChildDir):- - print_message(warning, missing_subproject_directory(ChildFsp,ChildDir)). - - -%! load_project_index(+FileSearchPath:atom) is det. - -load_project_index(Fsp):- - Spec =.. [Fsp,index], - absolute_file_name( - Spec, - File, - [access(read),file_errors(fail),file_type(prolog)] - ), !, - ensure_loaded(File). -load_project_index(_). - - -%! parent_alias(-ParentFsp:atom) is det. - -parent_alias(ParentFsp):- - user:project(_, _, ParentFsp), !. -parent_alias(ParentFsp):- - user:project(ParentFsp, _). - - -%! set_data_subdirectory(+ParentDirectory:atom) is det. - -set_data_subdirectory(ParentDir):- - directory_file_path(ParentDir, data, DataDir), - make_directory_path(DataDir), - assert(user:file_search_path(data, DataDir)). - - - -% Messages - -:- multifile(prolog:message//1). - -prolog:message(missing_subproject_directory(ChildFsp,ChildDir)) -- - [ - 'The ~a submodule is not present.'-[ChildFsp], nl, - 'Check whether subdirectory ~a is present in your project directory:'-[ChildDir], nl, - ' git submodule init', nl, - ' git submodule update' - ]. - diff --git a/plHtml b/plHtml deleted file mode 160000 index 2919705..0000000 --- a/plHtml +++ /dev/null @@ -1 +0,0 @@ -Subproject commit 2919705d079b1ab28bf3c502a87d1648fd842ed3 diff --git a/plUri b/plUri deleted file mode 160000 index 1a55127..0000000 --- a/plUri +++ /dev/null @@ -1 +0,0 @@ -Subproject commit 1a55127517ee0b0cf2ad4fecbe3f84402f5f4c12 diff --git a/run.pl b/run.pl deleted file mode 100644 index 8c751f4..0000000 --- a/run.pl +++ /dev/null @@ -1,11 +0,0 @@ -% Standalone execution of the plGraphViz library. - -:- if(current_prolog_flag(argv, ['--debug'|_])). - :- ensure_loaded(debug). -:- else. - :- set_prolog_flag(verbose, silent). - :- ensure_loaded(load). -:- endif. - -:- use_module(plGraphViz(gv_file)). - ``` 100: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ a97e8e1 å’Œå˜åŠ¨å 9513a9b  [back to content](#compare) ``` diff diff --git a/LICENSE.txt b/LICENSE.txt new file mode 100644 index 0000000..c7b7798 --- /dev/null +++ b/LICENSE.txt @@ -0,0 +1,21 @@ +The MIT License (MIT) + +Copyright (c) 2015 Wouter Beek + +Permission is hereby granted, free of charge, to any person obtaining a copy +of this software and associated documentation files (the \"Software\"), to deal +in the Software without restriction, including without limitation the rights +to use, copy, modify, merge, publish, distribute, sublicense, and/or sell +copies of the Software, and to permit persons to whom the Software is +furnished to do so, subject to the following conditions: + +The above copyright notice and this permission notice shall be included in +all copies or substantial portions of the Software. + +THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR +IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, +FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE +AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER +LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, +OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN +THE SOFTWARE. diff --git a/pack.pl b/pack.pl new file mode 100644 index 0000000..f0f5b22 --- /dev/null +++ b/pack.pl @@ -0,0 +1,9 @@ +author('Wouter Beek', 'me@wouterbeek.com'). +download('https://github.com/wouterbeek/plGraphViz/release/*.zip'). +home('https://github.com/wouterbeek/plGraphViz'). +maintainer('Wouter Beek', 'me@wouterbeek.com'). +name(plGraphViz). +packager('Wouter Beek', 'me@wouterbeek.com'). +requires('Prolog_Library_Collection'). +title(plGraphViz). +version('0.0.1'). diff --git a/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl similarity index 86% rename from gv_attr_type.pl rename to prolog/gv/gv_attr_type.pl index 4e1b7f2..ff163fe 100644 --- a/gv_attr_type.pl +++ b/prolog/gv/gv_attr_type.pl @@ -1,7 +1,7 @@ :- module( gv_attr_type, [ - gv_attr_type/1, % ?Type:atom + gv_attr_type//1, % ?Type:atom addDouble//1, % +Double:float addPoint//1, % +Point:compound arrowType//1, % +ArrowType:atom @@ -62,38 +62,38 @@ %! gv_attr_type(?Type:atom) is nondet. -gv_attr_type(addDouble). -gv_attr_type(addPoint). -gv_attr_type(arrowType). -gv_attr_type(bool). -gv_attr_type(color). -gv_attr_type(colorList). -gv_attr_type(clusterMode). -gv_attr_type(dirType). -gv_attr_type(double). -gv_attr_type(doubleList). -gv_attr_type(escString). -gv_attr_type(layerList). -gv_attr_type(layerRange). -gv_attr_type(lblString). -gv_attr_type(int). -gv_attr_type(outputMode). -gv_attr_type(packMode). -gv_attr_type(pagedir). -gv_attr_type(point). -gv_attr_type(pointList). -gv_attr_type(portPos). -gv_attr_type(quadType). -gv_attr_type(rankType). -gv_attr_type(rankdir). -gv_attr_type(rect). -gv_attr_type(shape). -gv_attr_type(smoothType). -gv_attr_type(splineType). -gv_attr_type(startType). -gv_attr_type(string). -gv_attr_type(style). -gv_attr_type(viewPort). +gv_attr_type(addDouble) -- \"addDouble\". +gv_attr_type(addPoint) -- \"addPoint\". +gv_attr_type(arrowType) -- \"arrowType\". +gv_attr_type(bool) -- \"bool\". +gv_attr_type(color) -- \"color\". +gv_attr_type(colorList) -- \"colorList\". +gv_attr_type(clusterMode) -- \"clusterMode\". +gv_attr_type(dirType) -- \"dirType\". +gv_attr_type(double) -- \"double\". +gv_attr_type(doubleList) -- \"doubleList\". +gv_attr_type(escString) -- \"escString\". +gv_attr_type(layerList) -- \"layerList\". +gv_attr_type(layerRange) -- \"layerRange\". +gv_attr_type(lblString) -- \"lblString\". +gv_attr_type(int) -- \"int\". +gv_attr_type(outputMode) -- \"outputMode\". +gv_attr_type(packMode) -- \"packMode\". +gv_attr_type(pagedir) -- \"pagedir\". +gv_attr_type(point) -- \"point\". +gv_attr_type(pointList) -- \"pointList\". +gv_attr_type(portPos) -- \"portPos\". +gv_attr_type(quadType) -- \"quadType\". +gv_attr_type(rankType) -- \"rankType\". +gv_attr_type(rankdir) -- \"rankdir\". +gv_attr_type(rect) -- \"rect\". +gv_attr_type(shape) -- \"shape\". +gv_attr_type(smoothType) -- \"smoothType\". +gv_attr_type(splineType) -- \"splineType\". +gv_attr_type(startType) -- \"startType\". +gv_attr_type(string) -- \"string\". +gv_attr_type(style) -- \"style\". +gv_attr_type(viewPort) -- \"viewPort\". diff --git a/gv_attrs.pl b/prolog/gv/gv_attrs.pl similarity index 86% rename from gv_attrs.pl rename to prolog/gv/gv_attrs.pl index cce4f9d..d773a8b 100644 --- a/gv_attrs.pl +++ b/prolog/gv/gv_attrs.pl @@ -24,12 +24,7 @@ :- use_module(library(persistency_ext)). :- use_module(library(xpath)). -:- use_module(library(gv/gv_attr_type), [gv_attr_type/1]). - -:- dynamic(user:prolog_file_type/2). -:- multifile(user:prolog_file_type/2). - -user:prolog_file_type(log, logging). +:- use_module(library(gv/gv_attr_type), [gv_attr_type//1]). %! gv_attr( %! ?Name:atom, @@ -127,32 +122,30 @@ assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):- % Downloads the table describing GraphViz attributes from `graphviz.org`. gv_attrs_download:- - verbose_process( - 'Updating GraphViz attributes table... ', - ( - gv_attrs_uri(Uri), - html_download(Uri, Dom), - xpath(Dom, //table(@align=lower_case(center)), TableDom), - html_table(TableDom, _, Rows), - maplist(assert_gv_attr_row, Rows) - ) + verbose_call( + 'updating GraphViz attributes table', + gv_attrs_download0 ). +gv_attrs_download0:- + gv_attrs_uri(Uri), + html_download(Uri, Dom), + xpath_chk(Dom, //table(@align=lower_case(center)), TableDom), + html_table(TableDom, _, Rows), + maplist(assert_gv_attr_row, Rows). + %! gv_attrs_file(-File:atom) is det. gv_attrs_file(File):- - absolute_file_name(gv_attrs, File, [access(write),file_type(logging)]). + absolute_file_name('gv_attrs.log', File, [access(write)]). %! gv_attrs_init is det. gv_attrs_init:- gv_attrs_file(File), - attach_persistent_db(File), - file_age(File, Age), - gv_attrs_update(Age). - + init_persistent_db(File, gv_attrs_update). %! gv_attrs_update(+Age:float) is det. @@ -186,12 +179,13 @@ translate_default(Default, Default). %! translate_type(-Types:list(atom))// is det. -translate_type([]) -- !, []. translate_type([H|T]) -- - {gv_attr_type(H)}, - atom(H), + gv_attr_type(H), whites, translate_type(T). +translate_type([H]) -- + gv_attr_type(H). +translate_type([]) -- \"\". diff --git a/gv_color.pl b/prolog/gv/gv_color.pl similarity index 78% rename from gv_color.pl rename to prolog/gv/gv_color.pl index dd1690b..0553aa2 100644 --- a/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -17,27 +17,17 @@ */ :- use_module(library(apply)). +:- use_module(library(deb_ext)). :- use_module(library(dcg/basics)). +:- use_module(library(dcg/dcg_abnf)). +:- use_module(library(dcg/dcg_content)). +:- use_module(library(file_ext)). +:- use_module(library(http/html_download)). +:- use_module(library(http/html_table)). :- use_module(library(lists)). -:- use_module(library(persistency)). +:- use_module(library(persistency_ext)). :- use_module(library(xpath)). -:- use_module(plc(dcg/dcg_abnf)). -:- use_module(plc(dcg/dcg_abnf_rules)). -:- use_module(plc(dcg/dcg_atom)). -:- use_module(plc(dcg/dcg_cardinal)). -:- use_module(plc(dcg/dcg_content)). -:- use_module(plc(generics/db_ext)). -:- use_module(plc(generics/persistent_db_ext)). -:- use_module(plc(generics/print_ext)). -:- use_module(plc(io/file_ext)). -:- use_module(plc(io/file_gnu)). - -:- use_module(plHtml(html)). -:- use_module(plHtml(html_table)). - -:- db_add_novel(user:prolog_file_type(log, logging)). - %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet. :- persistent(gv_color(colorscheme:oneof([svg,x11]),color:atom)). @@ -99,7 +89,7 @@ wc_weight(Float) -- gv_color_download:- verbose_call( - 'Updating the GraphViz color table...', + 'updating the GraphViz color table', ( gv_color_uri(Uri), html_download(Uri, Dom), @@ -121,18 +111,14 @@ assert_color_table(Colorscheme, TableDom):- %! gv_color_file(-File:atom) is det. gv_color_file(File):- - absolute_file_name( - data(gv_color), - File, - [access(write),file_type(logging)] - ). + absolute_file_name('gv_color.log', File, [access(write)]). %! gv_color_init is det. gv_color_init:- gv_color_file(File), - persistent_db_init(File, gv_color_update). + init_persistent_db(File, gv_color_update). %! gv_color_update(+Age:float) is det. diff --git a/gv_file.pl b/prolog/gv/gv_file.pl similarity index 96% rename from gv_file.pl rename to prolog/gv/gv_file.pl index da17737..a175071 100644 --- a/gv_file.pl +++ b/prolog/gv/gv_file.pl @@ -13,8 +13,9 @@ @version 2015/07 */ +:- use_module(library(code_ext)). :- use_module(library(error)). -:- use_module(library(gv/gv_dot)). +:- use_module(library(gv/gv_graph)). :- use_module(library(option)). :- use_module(library(process)). @@ -55,7 +56,7 @@ gv_export(ExportGraph, OutputFile, Options):- absolute_file_name(data(ThreadName), TmpFile, [access(write),file_type(dot)]), setup_call_cleanup( open(TmpFile, write, Write, [encoding(utf8)]), - put_codes(Write, Codes), + with_output_to(Write, put_codes(Codes)), close(Write) ), file_to_gv(TmpFile, OutputFile, Options). @@ -88,7 +89,7 @@ file_to_gv(InputFile, OutputFile, Options):- % Run the GraphViz conversion command in the shell. format(atom(OutputTypeFlag), '-T~a', [OutputType]), format(atom(OutputFileFlag), '-o~a', [OutputFile]), - process_ext( + process_create( path(Method), [OutputTypeFlag,file(InputFile),OutputFileFlag], [] diff --git a/gv_graph.pl b/prolog/gv/gv_graph.pl similarity index 93% rename from gv_graph.pl rename to prolog/gv/gv_graph.pl index 9ae7353..6bd4b86 100644 --- a/gv_graph.pl +++ b/prolog/gv/gv_graph.pl @@ -7,6 +7,13 @@ /**  GraphViz graph +Generates GraphViz graphs in the DOT format based on +a Prolog representation of a graph. + +In GraphViz vertices are called 'nodes'. + +--- + @author Wouter Beek @version 2015/07 */ @@ -14,6 +21,7 @@ :- use_module(library(apply)). :- use_module(library(dcg/dcg_abnf)). :- use_module(library(dcg/dcg_content)). +:- use_module(library(gv/gv_graph_comp)). :- use_module(library(lists)). :- use_module(library(option)). @@ -79,8 +87,9 @@ gv_graph(G1, I) -- gv_graph_type(Directed), \" \", % Graph name. - ( {select_name(GName), GAttrs4, GAttrs5)} - - gv_id(GName), \" \", + ( {select_option(name(GName), GAttrs4, GAttrs5)} + - gv_id(GName), + \" \" ; {GAttrs5 = GAttrs4} ), @@ -102,7 +111,7 @@ gv_graph(G1, I) -- % Only add a line_feed if some content was already written % and some content is about to be written. ( % Succeeds if no content was written. - {(GAttrs == [], SharedVAttrs == [], SharedEAttrs == [])} + {(GAttrs5 == [], SharedVAttrs == [], SharedEAttrs == [])} - \"\" ; % Succeeds if no content is about to be written. {(NewVTerms == [], RankedVTerms == [])} @@ -171,8 +180,8 @@ gv_ranked_node_collections(I, L) -- %! ) is det. add_default(L1, Opt, L2):- - Opt =.. [N,V], - Opt0 =.. [N,_], + Opt =.. [N,_Value], + Opt0 =.. [N,_FreshVar], ( option(Opt0, L1) - true ; L2 = [Opt|L1] diff --git a/gv_dot.pl b/prolog/gv/gv_graph_comp.pl similarity index 79% rename from gv_dot.pl rename to prolog/gv/gv_graph_comp.pl index 9c53cc5..8a7d28a 100644 --- a/gv_dot.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -1,16 +1,21 @@ :- module( - gv_dot, + gv_graph_comp, [ + gv_edge_statement//3, % +Indent:nonneg + % +Directed:boolean + % +Edge:compound + gv_generic_attributes_statement//3, % +Kind:oneof([edge,graph,node]) + % +Indent:nonneg + % +CategoryAttributes:list(compound) + gv_id//1, % +Name:compound + gv_node_statement//2, % +Indent:nonneg + % +Vertex:compound + gv_ranked_node_collection//2 % +Indent:nonneg +\t% +Rank:??? ] ). -/**  GraphViz DOT generator - -DCG rules for GraphViz DOT file generation. - -Methods for writing to the GraphViz DOT format. - -In GraphViz vertices are called 'nodes'. +/**  GraphViz graph components ```abnf attr_list = \"[\" [a_list] \"]\" [attr_list] @@ -26,9 +31,11 @@ a_list = ID \"=\" ID [\",\"] [a_list] :- use_module(library(apply)). :- use_module(library(dcg/basics)). +:- use_module(library(dcg/dcg_abnf)). :- use_module(library(dcg/dcg_ascii)). :- use_module(library(dcg/dcg_bracketed)). :- use_module(library(dcg/dcg_content)). +:- use_module(library(dcg/dcg_quoted)). :- use_module(library(gv/gv_attrs)). :- use_module(library(gv/gv_html)). :- use_module(library(lists)). @@ -38,66 +45,10 @@ a_list = ID \"=\" ID [\",\"] [a_list] -%! gv_attr( -%! +Context:oneof([edge,graph,node]), -%! +Attribute:nvpair -%! )// is det. -% A single GraphViz attribute. -% We assume that the attribute has already been validated. - -gv_attr(Context, N=V) -- - gv_id(N), - \"=\", - gv_attr_value(Context, N=V), - \";\". - - - -%! gv_attrs( -%! +Kind:oneof([edge,graph,node]), -%! +Attributes:list(compound) -%! )// is det. - -gv_attrs(Kind, L) -- - bracketed(square, '*'(gv_attr, L, [])). - - - -%! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . -% ``` -% compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) -% ``` - -gv_compass_pt('_') -- \"_\". -gv_compass_pt(c) -- \"c\". -gv_compass_pt(e) -- \"e\". -gv_compass_pt(n) -- \"n\". -gv_compass_pt(ne) -- \"ne\". -gv_compass_pt(nw) -- \"nw\". -gv_compass_pt(s) -- \"s\". -gv_compass_pt(se) -- \"se\". -gv_compass_pt(sw) -- \"sw\". -gv_compass_pt(w) -- \"w\". - - - -%! gv_edge_operator(+Directed:boolean)// . -% The binary edge operator between two vertices. -% The operator that is used depends on whether the graph is directed or -% undirected. -% -% @arg Directed Whether an edge is directed (operator `-`) or -% undirected (operator `--`). - -gv_edge_operator(false) -- !, \"--\". -gv_edge_operator(true) -- \"-\". - - - %! gv_edge_statement( %! +Indent:nonneg, %! +Directed:boolean, -%! +EdgeTerm:compound +%! +Edge:compound %! )// is det. % A GraphViz statement describing an edge. % @@ -105,29 +56,40 @@ gv_edge_operator(true) -- \"-\". % @arg Directed Whether the graph is directed or not. % @arg GraphAttributes The attributes of the graph. Some of these attributes % may be used in the edge statement (e.g., the colorscheme). -% @arg EdgeTerm A compound term in the GIFormat, representing an edge. +% @arg Edge A compound term in the GIFormat, representing an edge. % % @tbd Instead of gv_node_id//1 we could have a gv_subgraph//1 % at the from and/or to location. % @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2. -gv_edge_statement(I, Directed, edge(FromId,ToId,EAttrs)) -- +gv_edge_statement(I, Dir, edge(From,To,Attrs)) -- indent(I), - gv_node_id(FromId), \" \", - gv_edge_operator(Directed), \" \", - gv_node_id(ToId), \" \", + gv_node_id(From), \" \", + gv_edge_operator(Dir), \" \", + gv_node_id(To), \" \", % We want `colorscheme/1` from the edges and % `directionality/1` from the graph. - gv_attrs(edge, EAttrs), + gv_attrs(edge, Attrs), \"\\n\". +%! gv_edge_operator(+Directed:boolean)// . +% The binary edge operator between two vertices. +% The operator that is used depends on whether the graph is directed or +% undirected. +% +% @arg Directed Whether an edge is directed (operator `-`) or +% undirected (operator `--`). + +gv_edge_operator(false) -- !, \"--\". +gv_edge_operator(true) -- \"-\". + %! gv_generic_attributes_statement( %! +Kind:oneof([edge,graph,node]), -%! +Indent:integer, +%! +Indent:nonneg, %! +CategoryAttributes:list(nvpair) %! )// % A GraphViz statement describing generic attributes for a category of items. @@ -142,16 +104,88 @@ gv_edge_statement(I, Directed, edge(FromId,ToId,EAttrs)) -- % attr_stmt = (graph / node / edge) attr_list % ``` -gv_generic_attributes_statement(_, _, []) -- [], !. -gv_generic_attributes_statement(Kind, I, KindAttrs) -- +gv_generic_attributes_statement(_, _, []) -- !, \"\". +gv_generic_attributes_statement(Kind, I, Attrs) -- indent(I), gv_kind(Kind), \" \", - gv_attrs(Kind, KindAttrs), + gv_attrs(Kind, Attrs), + \"\\n\". + +%! gv_kind(+Kind:oneof([edge,graph,node]))// . + +gv_kind(edge) -- \"edge\". +gv_kind(graph) -- \"graph\". +gv_kind(node) -- \"node\". + + + +%! gv_node_statement(+Indent:nonneg, +Vertex:compound)// is det. +% A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes'). + +gv_node_statement(I, vertex(Id,Attrs)) -- + indent(I), + gv_node_id(Id), + gv_attrs(node, Attrs), + \"\\n\". + + + +%! gv_ranked_node_collection(+Indent:nonneg, Rank:???)// is det. + +gv_ranked_node_collection(I, Rank) -- + indent(I), + bracketed(curly, gv_ranked_node_collection0(I, Rank)). + +gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -- + \"\\n\", + + % The rank attribute. + {NewI is I + 1}, + indent(NewI), + gv_attr(subgraph, rank=same), + \";\\n\", + + % Vertice statements. + '*'( + gv_node_statement(NewI), + [Rank_V_Term|Content_V_Terms], + [] + ), + + % We want to indent the closing curly brace. + indent(I), \"\\n\". -%! gv_id(?Atom:compound)// is det. + + +% HELPERS % + +%! gv_attrs( +%! +Kind:oneof([edge,graph,node]), +%! +Attributes:list(compound) +%! )// is det. + +gv_attrs(Kind, L) -- + bracketed(square, '*'(gv_attr(Kind), L, [])). + +%! gv_attr( +%! +Context:oneof([edge,graph,node]), +%! +Attribute:nvpair +%! )// is det. +% A single GraphViz attribute. +% We assume that the attribute has already been validated. + +gv_attr(Context, N=V) -- + gv_id(N), + \"=\", + gv_attr_value(Context, N=V), + \";\". + + + +%! gv_id(+Id:compound)// is det. % Parse a GraphViz identifier. % There are 4 variants: % 1. Any string of alphabetic (`[a-zA-Z'200-'377]`) characters, @@ -193,20 +227,24 @@ gv_id(Atom) -- % GraphViz keyword. {\\+ gv_keyword([H|T])}. +%! gv_id_first(+First:code)// is det. +% Generates the first character of a GraphViz identifier. + gv_id_first(X) -- ascii_letter(X). gv_id_first(X) -- underscore(X). -gv_id_rest([]) -- []. +%! gv_id_rest(+NonFirst:code)// is det. +% Generates a non-first character of a GraphViz identifier. + +gv_id_rest([]) -- !, \"\". gv_id_rest([H|T]) -- ( ascii_alpha_numeric(H) ; underscore(H) ), gv_id_rest(T). - - %! gv_keyword(+Codes:list(code)) is semidet. % Succeeds if the given codes for a GraphViz reserved keyword. @@ -228,14 +266,6 @@ gv_keyword -- \"subgraph\". -%! gv_kind(+Kind:oneof([edge,graph,node]))// . - -gv_kind(edge) -- \"edge\". -gv_kind(graph) -- \"graph\". -gv_kind(node) -- \"node\". - - - %! gv_node_id(+NodeId:compound)// . % GraphViz node identifiers can be of the following two types: % 1. A GraphViz identifier, see gv_id//1. @@ -252,16 +282,7 @@ gv_node_id(Id) -- -%! gv_node_statement(+Indent:nonneg, +VertexTerm:compound)// . -% A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes'). - -gv_node_statement(I, vertex(Id,VAttrs)) -- - indent(I), - gv_node_id(Id), - gv_attrs(node, VAttrs), - \"\\n\". - - +%! gv_port// is det. gv_port -- gv_port_location, @@ -285,34 +306,25 @@ gv_port_location -- \":\", gv_id(_). gv_port_location -- - \":(\", - gv_id(_), - \",\", - gv_id(_) - \")\". - - + \":\", + bracketed(( + gv_id(_), + \",\", + gv_id(_) + )). -gv_ranked_node_collection(I, Rank) -- - indent(I), - bracketed(curly, gv_ranked_node_collection0(I, Rank)). +%! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . +% ``` +% compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) +% ``` -gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -- - \"\\n\", - - % The rank attribute. - {NewI is I + 1}, - indent(NewI), - gv_attr(subgraph, rank=same), - \";\\n\", - - % Vertice statements. - '*'( - gv_node_statement(NewI), - [Rank_V_Term|Content_V_Terms], - [] - ), - - % We want to indent the closing curly brace. - indent(I), - \"\\n\". +gv_compass_pt('_') -- \"_\". +gv_compass_pt(c) -- \"c\". +gv_compass_pt(e) -- \"e\". +gv_compass_pt(n) -- \"n\". +gv_compass_pt(ne) -- \"ne\". +gv_compass_pt(nw) -- \"nw\". +gv_compass_pt(s) -- \"s\". +gv_compass_pt(se) -- \"se\". +gv_compass_pt(sw) -- \"sw\". +gv_compass_pt(w) -- \"w\". diff --git a/gv_html.pl b/prolog/gv/gv_html.pl similarity index 99% rename from gv_html.pl rename to prolog/gv/gv_html.pl index ced6d6b..c16d26b 100644 --- a/gv_html.pl +++ b/prolog/gv/gv_html.pl @@ -44,7 +44,7 @@ cell:  label  */ :- use_module(library(dcg/dcg_abnf)). -:- use_module(library(dcg/dcg_bracket)). +:- use_module(library(dcg/dcg_bracketed)). :- use_module(library(dcg/dcg_content)). :- use_module(library(http/html_dcg)). diff --git a/gv_numeral.pl b/prolog/gv/gv_numeral.pl similarity index 98% rename from gv_numeral.pl rename to prolog/gv/gv_numeral.pl index 1e5c723..4ba0d64 100644 --- a/gv_numeral.pl +++ b/prolog/gv/gv_numeral.pl @@ -14,7 +14,6 @@ :- use_module(library(dcg/dcg_abnf)). :- use_module(library(dcg/dcg_abnf_common)). :- use_module(library(dcg/dcg_ascii)). -:- use_module(library(dcg/dcg_cardinal)). :- use_module(library(math/math_ext)). :- use_module(library(math/positional)). :- use_module(library(math/radconv)). diff --git a/test/debug.pl b/test/debug.pl new file mode 100644 index 0000000..b0f85ea --- /dev/null +++ b/test/debug.pl @@ -0,0 +1,15 @@ +:- use_module(library(ansi_term)). +:- use_module(library(prolog_pack)). + +pack_ensure_removed(Pack):- + pack_property(Pack, _), !, + pack_remove(Pack). +pack_ensure_removed(_). + +test:- + pack_ensure_removed(plGraphViz), + source_file(test, ThisFile), + file_directory_name(ThisFile, ThisDirectory), + assert(user:file_search_path(gvTest, ThisDirectory)), + assert(user:file_search_path(library, gvTest('../prolog'))). +:- test. diff --git a/test/test.pl b/test/test.pl new file mode 100644 index 0000000..6e59928 --- /dev/null +++ b/test/test.pl @@ -0,0 +1,10 @@ +:- ensure_loaded(debug). + +:- use_module(library(gv/gv_attrs)). +:- use_module(library(gv/gv_attr_type)). +:- use_module(library(gv/gv_color)). +:- use_module(library(gv/gv_file)). +:- use_module(library(gv/gv_graph)). +:- use_module(library(gv/gv_graph_comp)). +:- use_module(library(gv/gv_html)). +:- use_module(library(gv/gv_numeral)). ``` 101: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 9513a9b å’Œå˜åŠ¨å 7163f60  [back to content](#compare) ``` diff diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl index 0553aa2..6c2cc4c 100644 --- a/prolog/gv/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -90,15 +90,17 @@ wc_weight(Float) -- gv_color_download:- verbose_call( 'updating the GraphViz color table', - ( - gv_color_uri(Uri), - html_download(Uri, Dom), - xpath(Dom, //table(1), TableDom1), - xpath(Dom, //table(2), TableDom2), - maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]) - ) + gv_color_download0 ). +gv_color_download0:- + gv_color_uri(Uri), + html_download(Uri, Dom), + xpath_chk(Dom, //table(1), TableDom1), + xpath_chk(Dom, //table(2), TableDom2), + maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]). + + assert_color_table(Colorscheme, TableDom):- html_table(TableDom, _, Rows), append(Rows, Cells), ``` 102: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7163f60 å’Œå˜åŠ¨å b2f4aef  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index f0f5b22..cf24d04 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.1'). +version('0.0.2'). ``` 103: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ b2f4aef å’Œå˜åŠ¨å ba30c25  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index cf24d04..775776f 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.2'). +version('0.0.3'). diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index 8a7d28a..7fd9709 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -177,7 +177,8 @@ gv_attrs(Kind, L) -- % A single GraphViz attribute. % We assume that the attribute has already been validated. -gv_attr(Context, N=V) -- +gv_attr(Context, Attr) -- + {Attr =.. [N,V]}, gv_id(N), \"=\", gv_attr_value(Context, N=V), ``` 104: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ba30c25 å’Œå˜åŠ¨å 0eea41b  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index 775776f..ea8929c 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.3'). +version('0.0.4'). diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl index a175071..7a92cf5 100644 --- a/prolog/gv/gv_file.pl +++ b/prolog/gv/gv_file.pl @@ -53,7 +53,7 @@ gv_export(ExportGraph, OutputFile, Options):- % Be thread-safe. thread_self(Id), atomic_list_concat([gv_file,Id], '_', ThreadName), - absolute_file_name(data(ThreadName), TmpFile, [access(write),file_type(dot)]), + absolute_file_name(ThreadName, TmpFile, [access(write),file_type(dot)]), setup_call_cleanup( open(TmpFile, write, Write, [encoding(utf8)]), with_output_to(Write, put_codes(Codes)), @@ -69,20 +69,26 @@ gv_export(ExportGraph, OutputFile, Options):- % Converts a GraphViz DOT file to an image file, using a specific % visualization method. -file_to_gv(InputFile, OutputFile, Options):- - option(output(dot), Options), !, +file_to_gv(InputFile, OutputFile, Opts):- + var(OutputFile), !, + option(output(Ext), Opts, pdf), + file_name_extension(out, Ext, LocalName), + absolute_file_name(LocalName, OutputFile, Opts), + file_to_gv(InputFile, OutputFile, Opts). +file_to_gv(InputFile, OutputFile, Opts):- + option(output(dot), Opts), !, ( var(OutputFile) - OutputFile = InputFile ; rename_file(InputFile, OutputFile) ). -file_to_gv(InputFile, OutputFile, Options):- +file_to_gv(InputFile, OutputFile, Opts):- % Typecheck for `method` option. - option(method(Method), Options, dot), + option(method(Method), Opts, dot), findall(Method0, gv_method(Method0), Methods), must_be(oneof(Methods), Method), % Typecheck for `output` option. - option(output(OutputType), Options, pdf), + option(output(OutputType), Opts, pdf), findall(OutputType0, gv_output_type(OutputType0), OutputTypes), must_be(oneof(OutputTypes), OutputType), ``` 105: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 0eea41b å’Œå˜åŠ¨å c1691bd  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index ea8929c..8806f20 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.4'). +version('0.0.5'). diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl index d773a8b..0e6b003 100644 --- a/prolog/gv/gv_attrs.pl +++ b/prolog/gv/gv_attrs.pl @@ -18,8 +18,8 @@ :- use_module(library(dcg/dcg_call)). :- use_module(library(dcg/dcg_phrase)). :- use_module(library(file_ext)). -:- use_module(library(http/html_download)). -:- use_module(library(http/html_table)). +:- use_module(library(html/html_download)). +:- use_module(library(html/html_table)). :- use_module(library(lists)). :- use_module(library(persistency_ext)). :- use_module(library(xpath)). diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl index 6c2cc4c..bc08dcc 100644 --- a/prolog/gv/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -22,8 +22,8 @@ :- use_module(library(dcg/dcg_abnf)). :- use_module(library(dcg/dcg_content)). :- use_module(library(file_ext)). -:- use_module(library(http/html_download)). -:- use_module(library(http/html_table)). +:- use_module(library(html/html_download)). +:- use_module(library(html/html_table)). :- use_module(library(lists)). :- use_module(library(persistency_ext)). :- use_module(library(xpath)). diff --git a/prolog/gv/gv_dom.pl b/prolog/gv/gv_dom.pl new file mode 100644 index 0000000..e85849d --- /dev/null +++ b/prolog/gv/gv_dom.pl @@ -0,0 +1,35 @@ +:- module( + gv_dom, + [ + gv_dom/3 % +ExportGraph:compound + % -Dom:list(compound) + % +Options:list(compound) + ] +). + +/**  GraphViz DOM + +@author Wouter Beek +@version 2015/07 +*/ + +:- use_module(library(gv/gv_file)). +:- use_module(library(option)). +:- use_module(library(svg/svg_dom)). + + + + + +%! gv_dom( +%! +ExportGraph:compound, +%! -Dom:list(compound), +%! +Options:list(compound) +%! ) is det. + +gv_dom(ExportG, Dom, Opts1):- + % Make sure the file type of the output file is SvgDom. + merge_options([output(svg)], Opts1, Opts2), + gv_export(ExportG, ToFile, Opts2), + svg_dom(ToFile, Dom), + delete_file(ToFile). diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl index c16d26b..5f2db03 100644 --- a/prolog/gv/gv_html.pl +++ b/prolog/gv/gv_html.pl @@ -46,7 +46,7 @@ cell:  label  :- use_module(library(dcg/dcg_abnf)). :- use_module(library(dcg/dcg_bracketed)). :- use_module(library(dcg/dcg_content)). -:- use_module(library(http/html_dcg)). +:- use_module(library(html/html_dcg)). ``` 106: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c1691bd å’Œå˜åŠ¨å 3de9fc2  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index 8806f20..d590fb2 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.5'). +version('0.0.6'). diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl new file mode 100644 index 0000000..0bc966a --- /dev/null +++ b/prolog/graph/build_export_graph.pl @@ -0,0 +1,360 @@ +:- module( + build_export_graph, + [ + build_export_graph/3 % +Graph:compound + % -ExportGraph:compound + % +Options:list(compound) + ] +). + +/**  Build graph representation for exporting + +Support for building GIF representations. + +# Graph Intermediate Format (GIF) + +## Graph + +```prolog +graph(Vs:ordset(compound),Ranks,Es:compound,Attributes:list(nvpair)) +``` + +### Edge + +```prolog +edge(FromVertexId,ToVertexId,Attributes:list(nvpair)) +``` + +### Rank + +```prolog +rank(RankVertex:compound,ContentVertices:ordset(compound)) +``` + +### Vertex + +```prolog +vertex(Id,Attributes:list(nvpair)) +``` + +# Property functions + +Edge label: + 1. [[graph_edge]] edge_label/2 + +Vertex coordinates: + 1. [[circle_coords]] circular_coord/4 + 2. [[random_coords]] random_coord/4 + +--- + +@author Wouter Beek +@version 2015/07 +*/ + +:- use_module(library(apply)). +:- use_module(library(list_ext)). +:- use_module(library(option_ext)). +:- use_module(library(ordsets)). + +:- predicate_options(build_export_graph/4, 4, [ + pass_to(edge_term/3, 3), + pass_to(graph_attributes/2, 2), + pass_to(vertex_term/3, 3) + ]). +:- predicate_options(edge_term/3, 3, [ + edge_arrowhead(+callable), + edge_color(+callable), + edge_id(+callable), + edge_label(+callable), + edge_penwidth(+callable), + edge_style(+callable) + ]). +:- predicate_options(graph_attributes/2, 2, [ + graph_charset(+oneof(['iso-8859-1','Latin1','UTF-8'])), + graph_colorscheme(+oneof([none,svg,x11])), + graph_directed(+boolean), + graph_fontsize(+float), + graph_label(+atom), + graph_overlap(+boolean) + ]). +:- predicate_options(vertex_term/3, 3, [ + vertex_color(+callable), + vertex_id(+callable), + vertex_image(+callable), + vertex_label(+callable), + vertex_peripheries(+callable), + vertex_position(+callable), + vertex_shape(+callable), + vertex_uri(+callable) + ]). + +:- meta_predicate(build_export_graph(+,-,:)). + +is_meta(edge_arrowhead). +is_meta(edge_color). +is_meta(edge_id). +is_meta(edge_label). +is_meta(edge_penwidth). +is_meta(edge_style). +is_meta(vertex_color). +is_meta(vertex_id). +is_meta(vertex_image). +is_meta(vertex_label). +is_meta(vertex_peripheries). +is_meta(vertex_position). +is_meta(vertex_shape). +is_meta(vertex_uri). + + + + + +%! build_export_graph( +%! +Graph:compound, +%! -ExportGraph:compound, +%! +Options:list(compound) +%! ) is det. + +build_export_graph(graph(Vs,Es), graph(VTerms,ETerms,GAttrs), Opts1):- + meta_options(is_meta, Opts1, Opts2), + + % V terms. + maplist(vertex_term0(Vs, Opts2), Vs, VTerms), + + % Edge terms. + maplist(edge_term0(Vs, Opts2), Es, ETerms), + + % Graph attributes. + graph_attributes(GAttrs, Opts2). + +vertex_term0(Vs, Opts, V, VTerm):- + vertex_term(Vs, V, VTerm, Opts). + +edge_term0(Vs, Opts, E, ETerm):- + edge_term(Vs, E, ETerm, Opts). + + + +%! edge_term( +%! +Vertices:ordset(compound), +%! +Edge:compound, +%! -EdgeTerm:compound, +%! +Options:list(compound) +%! ) is det. +% The following options are supported: +% * `edge_arrowhead(+callable)` +% No default. +% * `edge_color(+callable)` +% No default. +% * `edge_id(+callable)` +% Function that assignes the unique identifiers for an edge's +% incident vertices. +% * `edge_label(+callable)` +% No default. +% * `edge_penwidth(+callable)` +% No default. +% * `edge_style(+callable)` +% No default. + +edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):- + % Arrowhead + if_option(edge_arrowhead(ArrowheadFunction), Opts, + call(ArrowheadFunction, E, EArrowhead) + ), + + % Color. + if_option(edge_color(ColorFunction), Opts, + call(ColorFunction, E, EColor) + ), + + % Id. + ( option(edge_id(IdFunction), Opts) + - call(IdFunction, E, FromId, ToId) + ; E = edge(FromV,_,ToV), + nth0chk(FromId, Vs, FromV), + nth0chk(ToId, Vs, ToV) + ), + + % Label. + if_option(edge_label(LabelFunction), Opts, + call(LabelFunction, E, ELabel) + ), + + % Penwidth. + if_option(edge_penwidth(PenwidthFunction), Opts, + call(PenwidthFunction, E, EPenwidth) + ), + + % Style. + if_option(edge_style(StyleFunction), Opts, + call(StyleFunction, E, EStyle) + ), + + merge_options( + [ + arrowhead=EArrowhead, + color=EColor, + label=ELabel, + penwidth=EPenwidth, + style=EStyle + ], + EAttrs + ). + + + +%! graph_attributes( +%! -GraphAttributes:list(nvpair), +%! +Options:list(compound) +%! ) is det. +% The following options are supported: +% * `graph_charset(+oneof(['iso-8859-1','Latin1','UTF-8']))` +% The name of the character set that is used to encode text in the graph. +% Default: `UTF-8`. +% * `graph_colorscheme(+oneof([none,svg,x11]))` +% The colorscheme from which the color in this graph are taken. +% Default: `x11`. +% * `graph_directed(+boolean)` +% Whether the graph is directed (`true`) or undirected (`false`). +% Default: `false`. +% * `graph_fontsize(+float)` +% The font size of text in the graph. +% Default: `11.0`. +% * `graph_label(+atom)` +% The graph label. +% No default. +% * `graph_overlap(+boolean)` +% Whether the vertices are allowed to overlap. +% Default: `false`. + +graph_attributes(GAttrs, Opts):- + % Characer set. + option(graph_charset(Charset), Opts, 'UTF-8'), + % Colorscheme. + option(graph_colorscheme(Colorscheme), Opts, x11), + % Directed. + option(graph_directed(Directed), Opts, false), + % Fontsize. + option(graph_fontsize(Fontsize), Opts, 11.0), + % Label. + option(graph_label(GLabel), Opts, ''), + % Overlap. + option(graph_overlap(Overlap), Opts, false), + + merge_options( + [ + charset=Charset, + colorscheme=Colorscheme, + directed=Directed, + fontsize=Fontsize, + label=GLabel, + overlap=Overlap + ], + GAttrs + ). + + + +%! vertex_term( +%! +Vertices:ordset(compound), +%! +Vertex:compound, +%! -VertexTerm:compound, +%! +Options:list(compound) +%! ) is det. +% The following options are supported: +% * `vertex_color(:ColorFunction)` +% A function that assigns colors to vertices. +% No default. +% * `vertex_id(:ColorFunction)` +% A functions that assigns unique identifiers to vertices. +% * `vertex_image(:ImageFunction)` +% A function that assigns images to vertices. +% No default. +% * `vertex_label(:LabelFunction)` +% A function that assigns labels to vertices. +% No default. +% * `vertex_peripheries(:PeripheriesFunction)` +% A function that assinges peripheries to vertices. +% No default. +% * `vertex_position(:PositionFunction)` +% No default. +% * `vertex_shape(:ShapeFunction)` +% A function that assinges shapes to vertices. +% No default. +% * `vertex_uri(:UriFunction)` + +vertex_term(Vs, V, vertex(VId,VAttrs), Opts):- + % Color. + if_option(vertex_color(ColorFunction), Opts, + call(ColorFunction, V, VColor) + ), + + % Id. + ( option(vertex_id(IdFunction), Opts) + - call(IdFunction, V, VId) + ; nth0chk(VId, Vs, V) + ), + + % Image. + ignore( + if_option(vertex_image(ImageFunction), Opts, + call(ImageFunction, V, VImage) + ) + ), + + % Label. + if_option(vertex_label(LabelFunction), Opts, + call(LabelFunction, V, VLabel) + ), + + % Peripheries. + if_option(vertex_peripheries(PeripheriesFunction), Opts, + call(PeripheriesFunction, V, VPeripheries) + ), + + % Position. + if_option(vertex_position(PositionFunction), Opts, + call(PositionFunction, Vs, Opts, V, VPosition) + ), + + % Shape. + if_option(vertex_shape(ShapeFunction), Opts, + call(ShapeFunction, V, VShape) + ), + + % URI + if_option(vertex_uri(UriFunction), Opts, + call(UriFunction, V, VUri) + ), + + merge_options( + [ + color=VColor, + image=VImage, + label=VLabel, + peripheries=VPeripheries, + pos=VPosition, + shape=VShape, + 'URL'=VUri + ], + VAttrs + ). + + + + + +% HELPERS % + +%! merge_options(+FromOptions:list(nvpair), -ToOptions:list(nvpair)) is det. + +merge_options([], []). +% Skip uninstantiated values. +merge_options([H|T1], T2):- + merge_options(T1, T2), + H =.. [_,V], + var(V), !. +% Include instantiated values. +merge_options([H|T1], [H|T2]):- + merge_options(T1, T2). diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl index 0e6b003..6634b3e 100644 --- a/prolog/gv/gv_attrs.pl +++ b/prolog/gv/gv_attrs.pl @@ -18,14 +18,13 @@ :- use_module(library(dcg/dcg_call)). :- use_module(library(dcg/dcg_phrase)). :- use_module(library(file_ext)). +:- use_module(library(gv/gv_attr_type), [gv_attr_type//1]). :- use_module(library(html/html_download)). :- use_module(library(html/html_table)). :- use_module(library(lists)). :- use_module(library(persistency_ext)). :- use_module(library(xpath)). -:- use_module(library(gv/gv_attr_type), [gv_attr_type//1]). - %! gv_attr( %! ?Name:atom, %! ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])), diff --git a/test/test.pl b/test/test.pl index 6e59928..898c04e 100644 --- a/test/test.pl +++ b/test/test.pl @@ -1,10 +1,13 @@ :- ensure_loaded(debug). -:- use_module(library(gv/gv_attrs)). -:- use_module(library(gv/gv_attr_type)). -:- use_module(library(gv/gv_color)). -:- use_module(library(gv/gv_file)). -:- use_module(library(gv/gv_graph)). -:- use_module(library(gv/gv_graph_comp)). -:- use_module(library(gv/gv_html)). -:- use_module(library(gv/gv_numeral)). +%/graph + :- use_module(library(graph/build_export_graph)). +%/gv + :- use_module(library(gv/gv_attrs)). + :- use_module(library(gv/gv_attr_type)). + :- use_module(library(gv/gv_color)). + :- use_module(library(gv/gv_file)). + :- use_module(library(gv/gv_graph)). + :- use_module(library(gv/gv_graph_comp)). + :- use_module(library(gv/gv_html)). + :- use_module(library(gv/gv_numeral)). ``` 107: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 3de9fc2 å’Œå˜åŠ¨å cb34d89  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index d590fb2..8093a1f 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.6'). +version('0.0.7'). diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl index 6634b3e..5e55234 100644 --- a/prolog/gv/gv_attrs.pl +++ b/prolog/gv/gv_attrs.pl @@ -22,7 +22,7 @@ :- use_module(library(html/html_download)). :- use_module(library(html/html_table)). :- use_module(library(lists)). -:- use_module(library(persistency_ext)). +:- use_module(library(persistency)). :- use_module(library(xpath)). %! gv_attr( @@ -144,7 +144,13 @@ gv_attrs_file(File):- gv_attrs_init:- gv_attrs_file(File), - init_persistent_db(File, gv_attrs_update). + ( exists_file(File) + - true + ; touch(File) + ), + db_attach(File, []), + file_age(File, Age), + gv_attrs_update(Age). %! gv_attrs_update(+Age:float) is det. diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl index bc08dcc..9235e27 100644 --- a/prolog/gv/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -25,7 +25,7 @@ :- use_module(library(html/html_download)). :- use_module(library(html/html_table)). :- use_module(library(lists)). -:- use_module(library(persistency_ext)). +:- use_module(library(persistency)). :- use_module(library(xpath)). %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet. @@ -120,7 +120,13 @@ gv_color_file(File):- gv_color_init:- gv_color_file(File), - init_persistent_db(File, gv_color_update). + ( exists_file(File) + - true + ; touch(File) + ), + db_attach(File, []), + file_age(File, Age), + gv_color_update(Age). %! gv_color_update(+Age:float) is det. ``` 108: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ cb34d89 å’Œå˜åŠ¨å 7f0e20f  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index 8093a1f..487feb1 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.7'). +version('0.0.8'). diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl index 6bd4b86..7f008c7 100644 --- a/prolog/gv/gv_graph.pl +++ b/prolog/gv/gv_graph.pl @@ -84,7 +84,8 @@ gv_graph(G1, I) -- % Directedness. {select_option(directed(Directed), GAttrs3, GAttrs4, true)}, - gv_graph_type(Directed), \" \", + gv_graph_type(Directed), + \" \", % Graph name. ( {select_option(name(GName), GAttrs4, GAttrs5)} @@ -183,7 +184,7 @@ add_default(L1, Opt, L2):- Opt =.. [N,_Value], Opt0 =.. [N,_FreshVar], ( option(Opt0, L1) - - true + - L2 = L1 ; L2 = [Opt|L1] ). ``` 109: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7f0e20f å’Œå˜åŠ¨å c16a7a7  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index 487feb1..57e9348 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.8'). +version('0.0.9'). diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl index 0bc966a..67a9e1b 100644 --- a/prolog/graph/build_export_graph.pl +++ b/prolog/graph/build_export_graph.pl @@ -193,11 +193,11 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):- merge_options( [ - arrowhead=EArrowhead, - color=EColor, - label=ELabel, - penwidth=EPenwidth, - style=EStyle + arrowhead(EArrowhead), + color(EColor), + label(ELabel), + penwidth(EPenwidth), + style(EStyle) ], EAttrs ). @@ -244,12 +244,12 @@ graph_attributes(GAttrs, Opts):- merge_options( [ - charset=Charset, - colorscheme=Colorscheme, - directed=Directed, - fontsize=Fontsize, - label=GLabel, - overlap=Overlap + charset(Charset), + colorscheme(Colorscheme), + directed(Directed), + fontsize(Fontsize), + label(GLabel), + overlap(Overlap) ], GAttrs ). @@ -330,13 +330,13 @@ vertex_term(Vs, V, vertex(VId,VAttrs), Opts):- merge_options( [ - color=VColor, - image=VImage, - label=VLabel, - peripheries=VPeripheries, - pos=VPosition, - shape=VShape, - 'URL'=VUri + color(VColor), + image(VImage), + label(VLabel), + peripheries(VPeripheries), + pos(VPosition), + shape(VShape), + 'URL'(VUri) ], VAttrs ). ``` 110: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c16a7a7 å’Œå˜åŠ¨å 8bbb08c  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index 57e9348..d1fef6b 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.9'). +version('0.0.10'). diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl index 7f008c7..bff4257 100644 --- a/prolog/gv/gv_graph.pl +++ b/prolog/gv/gv_graph.pl @@ -160,13 +160,13 @@ gv_graph(G1, I) -- \"}\\n\". gv_edge_statements(I, Dir, L) -- - '*'(gv_edge_statement(I, Dir), L, []). + '*'(gv_edge_statement(I, Dir), L, []), !. gv_node_statements(I, L) -- - '*'(gv_node_statement(I), L, []). + '*'(gv_node_statement(I), L, []), !. gv_ranked_node_collections(I, L) -- - '*'(gv_ranked_node_collection(I), L, []). + '*'(gv_ranked_node_collection(I), L, []), !. diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index 7fd9709..930fb32 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -109,7 +109,7 @@ gv_generic_attributes_statement(Kind, I, Attrs) -- indent(I), gv_kind(Kind), \" \", gv_attrs(Kind, Attrs), - \"\\n\". + \"\\n\", !. %! gv_kind(+Kind:oneof([edge,graph,node]))// . ``` 111: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 8bbb08c å’Œå˜åŠ¨å 34c8b1a  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index d1fef6b..854ddee 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.10'). +version('0.0.11'). diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl index 5e55234..5d97cb1 100644 --- a/prolog/gv/gv_attrs.pl +++ b/prolog/gv/gv_attrs.pl @@ -20,10 +20,10 @@ :- use_module(library(file_ext)). :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]). :- use_module(library(html/html_download)). -:- use_module(library(html/html_table)). :- use_module(library(lists)). :- use_module(library(persistency)). :- use_module(library(xpath)). +:- use_module(library(xpath/xpath_table)). %! gv_attr( %! ?Name:atom, @@ -130,7 +130,7 @@ gv_attrs_download0:- gv_attrs_uri(Uri), html_download(Uri, Dom), xpath_chk(Dom, //table(@align=lower_case(center)), TableDom), - html_table(TableDom, _, Rows), + xpath_table(TableDom, _, Rows), maplist(assert_gv_attr_row, Rows). diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl index 9235e27..d6eb478 100644 --- a/prolog/gv/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -13,7 +13,7 @@ @author Wouter Beek @tbd Color value `transparent` is only available in the output formats ps, svg, fig, vmrl, and the bitmap formats. -@version 2014/06, 2014/10-2014/11, 2015/01, 2015/03 +@version 2015/08 */ :- use_module(library(apply)). @@ -23,10 +23,10 @@ :- use_module(library(dcg/dcg_content)). :- use_module(library(file_ext)). :- use_module(library(html/html_download)). -:- use_module(library(html/html_table)). :- use_module(library(lists)). :- use_module(library(persistency)). :- use_module(library(xpath)). +:- use_module(library(xpath/xpath_table)). %! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet. @@ -102,7 +102,7 @@ gv_color_download0:- assert_color_table(Colorscheme, TableDom):- - html_table(TableDom, _, Rows), + xpath_table(TableDom, _, Rows), append(Rows, Cells), forall( member(Cell, Cells), diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl index 7a92cf5..577a33a 100644 --- a/prolog/gv/gv_file.pl +++ b/prolog/gv/gv_file.pl @@ -25,8 +25,13 @@ user:prolog_file_type(dot, dot). user:prolog_file_type(pdf, pdf). -:- predicate_options(gv_export/3, 3, [pass_to(file_to_gv/3, 3)]). -:- predicate_options(file_to_gv/3, 3, [method(+atom),output(+atom)]). +:- predicate_options(gv_export/3, 3, [ + pass_to(file_to_gv/3, 3) + ]). +:- predicate_options(file_to_gv/3, 3, [ + method(+atom), + output(+atom) + ]). ``` 112: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 34c8b1a å’Œå˜åŠ¨å d883d06  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index 854ddee..74f024d 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.11'). +version('0.0.12'). diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl index 67a9e1b..e96f484 100644 --- a/prolog/graph/build_export_graph.pl +++ b/prolog/graph/build_export_graph.pl @@ -171,7 +171,10 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):- % Id. ( option(edge_id(IdFunction), Opts) - call(IdFunction, E, FromId, ToId) - ; E = edge(FromV,_,ToV), + ; ( E = edge(FromV,_,ToV) + - true + ; E = edge(FromV,ToV) + ), nth0chk(FromId, Vs, FromV), nth0chk(ToId, Vs, ToV) ), ``` 113: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ d883d06 å’Œå˜åŠ¨å 66ac0a0  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index 74f024d..2a85425 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.12'). +version('0.0.13'). diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl index e96f484..b031d16 100644 --- a/prolog/graph/build_export_graph.pl +++ b/prolog/graph/build_export_graph.pl @@ -241,7 +241,8 @@ graph_attributes(GAttrs, Opts):- % Fontsize. option(graph_fontsize(Fontsize), Opts, 11.0), % Label. - option(graph_label(GLabel), Opts, ''), + % Defaults to the empty string. + option(graph_label(GLabel), Opts, '\"\"'), % Overlap. option(graph_overlap(Overlap), Opts, false), ``` 114: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 66ac0a0 å’Œå˜åŠ¨å ab5a102  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index 2a85425..dfee09c 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.13'). +version('0.0.14'). diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl index ff163fe..c6508a3 100644 --- a/prolog/gv/gv_attr_type.pl +++ b/prolog/gv/gv_attr_type.pl @@ -213,9 +213,9 @@ escape_double_quotes, [92,34] -- [34], !, escape_double_quotes. escape_double_quotes, [X] -- - [X], + [X], !, escape_double_quotes. - +escape_double_quotes -- []. ``` 115: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ab5a102 å’Œå˜åŠ¨å 65f43b8  [back to content](#compare) ``` diff diff --git a/.gitignore b/.gitignore index e6bec15..7193a38 100644 --- a/.gitignore +++ b/.gitignore @@ -1,5 +1,4 @@ *~ *# *.db -*.log data/* diff --git a/gv_attrs.log b/gv_attrs.log new file mode 100644 index 0000000..a9c6010 --- /dev/null +++ b/gv_attrs.log @@ -0,0 +1,169 @@ +assert(gv_attr('Damping',[graph],[double],'0.99','0.0','neato only')). +assert(gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only')). +assert(gv_attr('URL',[cluster,edge,graph,node],[escString],_,'','svg, postscript, map only')). +assert(gv_attr('_background',[graph],[string],_,'','')). +assert(gv_attr(area,[cluster,node],[double],'1.0','0','patchwork only')). +assert(gv_attr(arrowhead,[edge],[arrowType],normal,'','')). +assert(gv_attr(arrowsize,[edge],[double],'1.0','0.0','')). +assert(gv_attr(arrowtail,[edge],[arrowType],normal,'','')). +assert(gv_attr(bb,[graph],[rect],'','','write only')). +assert(gv_attr(bgcolor,[cluster,graph],[color,colorList],_,'','')). +assert(gv_attr(center,[graph],[bool],false,'','')). +assert(gv_attr(charset,[graph],[string],'\"UTF-8\"','','')). +assert(gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only')). +assert(gv_attr(color,[cluster,edge,node],[color,colorList],black,'','')). +assert(gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','')). +assert(gv_attr(comment,[edge,graph,node],[string],'','','')). +assert(gv_attr(compound,[graph],[bool],false,'','dot only')). +assert(gv_attr(concentrate,[graph],[bool],false,'','')). +assert(gv_attr(constraint,[edge],[bool],true,'','dot only')). +assert(gv_attr(decorate,[edge],[bool],false,'','')). +assert(gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only')). +assert(gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only')). +assert(gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only')). +assert(gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','')). +assert(gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only')). +assert(gv_attr(distortion,[node],[double],'0.0','-100.0','')). +assert(gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only')). +assert(gv_attr(edgeURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(edgehref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(edgetarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only')). +assert(gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot')). +assert(gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','')). +assert(gv_attr(fixedsize,[node],[bool,string],false,'','')). +assert(gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','')). +assert(gv_attr(fontname,[cluster,edge,graph,node],[string],'\"Times-Roman\"','','')). +assert(gv_attr(fontnames,[graph],[string],'','','svg only')). +assert(gv_attr(fontpath,[graph],[string],'system-dependent','','')). +assert(gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','')). +assert(gv_attr(forcelabels,[graph],[bool],true,'','')). +assert(gv_attr(gradientangle,[cluster,graph,node],[int],'','','')). +assert(gv_attr(group,[node],[string],'','','dot only')). +assert(gv_attr(headURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(head_lp,[edge],[point],'','','write only')). +assert(gv_attr(headclip,[edge],[bool],true,'','')). +assert(gv_attr(headhref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(headlabel,[edge],[lblString],'','','')). +assert(gv_attr(headport,[edge],[portPos],center,'','')). +assert(gv_attr(headtarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(height,[node],[double],'0.5','0.02','')). +assert(gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')). +assert(gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')). +assert(gv_attr(image,[node],[string],'','','')). +assert(gv_attr(imagepath,[graph],[string],'','','')). +assert(gv_attr(imagescale,[node],[bool,string],false,'','')). +assert(gv_attr(inputscale,[graph],[double],_,'','fdp, neato only')). +assert(gv_attr(label,[cluster,edge,graph,node],[lblString],'\"\\\\N\" (nodes)\"\" (otherwise)','','')). +assert(gv_attr(labelURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(label_scheme,[graph],[int],'0','0','sfdp only')). +assert(gv_attr(labelangle,[edge],[double],'-25.0','-180.0','')). +assert(gv_attr(labeldistance,[edge],[double],'1.0','0.0','')). +assert(gv_attr(labelfloat,[edge],[bool],false,'','')). +assert(gv_attr(labelfontcolor,[edge],[color],black,'','')). +assert(gv_attr(labelfontname,[edge],[string],'\"Times-Roman\"','','')). +assert(gv_attr(labelfontsize,[edge],[double],'14.0','1.0','')). +assert(gv_attr(labelhref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(labeljust,[cluster,graph],[string],'\"c\"','','')). +assert(gv_attr(labelloc,[cluster,graph,node],[string],'\"t\"(clusters)\"b\"(root graphs)\"c\"(nodes)','','')). +assert(gv_attr(labeltarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(landscape,[graph],[bool],false,'','')). +assert(gv_attr(layer,[cluster,edge,node],[layerRange],'','','')). +assert(gv_attr(layerlistsep,[graph],[string],'\",\"','','')). +assert(gv_attr(layers,[graph],[layerList],'','','')). +assert(gv_attr(layerselect,[graph],[layerRange],'','','')). +assert(gv_attr(layersep,[graph],[string],'\" :\\\\t\"','','')). +assert(gv_attr(layout,[graph],[string],'','','')). +assert(gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only')). +assert(gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only')). +assert(gv_attr(levelsgap,[graph],[double],'0.0','','neato only')). +assert(gv_attr(lhead,[edge],[string],'','','dot only')). +assert(gv_attr(lheight,[cluster,graph],[double],'','','write only')). +assert(gv_attr(lp,[cluster,edge,graph],[point],'','','write only')). +assert(gv_attr(ltail,[edge],[string],'','','dot only')). +assert(gv_attr(lwidth,[cluster,graph],[double],'','','write only')). +assert(gv_attr(margin,[cluster,graph,node],[double,point],'','','')). +assert(gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only')). +assert(gv_attr(mclimit,[graph],[double],'1.0','','dot only')). +assert(gv_attr(mindist,[graph],[double],'1.0','0.0','circo only')). +assert(gv_attr(minlen,[edge],[int],'1','0','dot only')). +assert(gv_attr(mode,[graph],[string],major,'','neato only')). +assert(gv_attr(model,[graph],[string],shortpath,'','neato only')). +assert(gv_attr(mosek,[graph],[bool],false,'','neato only')). +assert(gv_attr(nodesep,[graph],[double],'0.25','0.02','')). +assert(gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','')). +assert(gv_attr(normalize,[graph],[double,bool],false,'','not dot')). +assert(gv_attr(notranslate,[graph],[bool],false,'','neato only')). +assert(gv_attr('nslimit nslimit1',[graph],[double],'','','dot only')). +assert(gv_attr(ordering,[graph,node],[string],'','','dot only')). +assert(gv_attr(orientation,[node],[double],'0.0','360.0','')). +assert(gv_attr(orientation,[graph],[string],'','','')). +assert(gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','')). +assert(gv_attr(overlap,[graph],[string,bool],true,'','not dot')). +assert(gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only')). +assert(gv_attr(overlap_shrink,[graph],[bool],true,'','prism only')). +assert(gv_attr(pack,[graph],[bool,int],false,'','')). +assert(gv_attr(packmode,[graph],[packMode],node,'','')). +assert(gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','')). +assert(gv_attr(page,[graph],[double,point],'','','')). +assert(gv_attr(pagedir,[graph],[pagedir],'BL','','')). +assert(gv_attr(pencolor,[cluster],[color],black,'','')). +assert(gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','')). +assert(gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','')). +assert(gv_attr(pin,[node],[bool],false,'','fdp, neato only')). +assert(gv_attr(pos,[edge,node],[point,splineType],'','','')). +assert(gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only')). +assert(gv_attr(quantum,[graph],[double],'0.0','0.0','')). +assert(gv_attr(rank,[subgraph],[rankType],'','','dot only')). +assert(gv_attr(rankdir,[graph],[rankdir],'TB','','dot only')). +assert(gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only')). +assert(gv_attr(ratio,[graph],[double,string],'','','')). +assert(gv_attr(rects,[node],[rect],'','','write only')). +assert(gv_attr(regular,[node],[bool],false,'','')). +assert(gv_attr(remincross,[graph],[bool],true,'','dot only')). +assert(gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only')). +assert(gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only')). +assert(gv_attr(root,[graph,node],[string,bool],'(graphs)false(nodes)','','circo, twopi only')). +assert(gv_attr(rotate,[graph],[int],'0','','')). +assert(gv_attr(rotation,[graph],[double],'0','','sfdp only')). +assert(gv_attr(samehead,[edge],[string],'','','dot only')). +assert(gv_attr(sametail,[edge],[string],'','','dot only')). +assert(gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','')). +assert(gv_attr(scale,[graph],[double,point],'','','not dot')). +assert(gv_attr(searchsize,[graph],[int],'30','','dot only')). +assert(gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot')). +assert(gv_attr(shape,[node],[shape],ellipse,'','')). +assert(gv_attr(shapefile,[node],[string],'','','')). +assert(gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only')). +assert(gv_attr(sides,[node],[int],'4','0','')). +assert(gv_attr(size,[graph],[double,point],'','','')). +assert(gv_attr(skew,[node],[double],'0.0','-100.0','')). +assert(gv_attr(smoothing,[graph],[smoothType],'\"none\"','','sfdp only')). +assert(gv_attr(sortv,[cluster,graph,node],[int],'0','0','')). +assert(gv_attr(splines,[graph],[bool,string],'','','')). +assert(gv_attr(start,[graph],[startType],'','','fdp, neato only')). +assert(gv_attr(style,[cluster,edge,graph,node],[style],'','','')). +assert(gv_attr(stylesheet,[graph],[string],'','','svg only')). +assert(gv_attr(tailURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(tail_lp,[edge],[point],'','','write only')). +assert(gv_attr(tailclip,[edge],[bool],true,'','')). +assert(gv_attr(tailhref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(taillabel,[edge],[lblString],'','','')). +assert(gv_attr(tailport,[edge],[portPos],center,'','')). +assert(gv_attr(tailtarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(target,[cluster,edge,graph,node],[escString,string],_,'','svg, map only')). +assert(gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only')). +assert(gv_attr(truecolor,[graph],[bool],'','','bitmap output only')). +assert(gv_attr(vertices,[node],[pointList],'','','write only')). +assert(gv_attr(viewport,[graph],[viewPort],'','','')). +assert(gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot')). +assert(gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','')). +assert(gv_attr(width,[node],[double],'0.75','0.01','')). +assert(gv_attr(xdotversion,[graph],[string],'','','xdot only')). +assert(gv_attr(xlabel,[edge,node],[lblString],'','','')). +assert(gv_attr(xlp,[edge,node],[point],'','','write only')). +assert(gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','')). diff --git a/gv_color.log b/gv_color.log new file mode 100644 index 0000000..23d6cdf --- /dev/null +++ b/gv_color.log @@ -0,0 +1,802 @@ +assert(gv_color(x11,aliceblue)). +assert(gv_color(x11,antiquewhite)). +assert(gv_color(x11,antiquewhite1)). +assert(gv_color(x11,antiquewhite2)). +assert(gv_color(x11,antiquewhite3)). +assert(gv_color(x11,antiquewhite4)). +assert(gv_color(x11,aquamarine)). +assert(gv_color(x11,aquamarine1)). +assert(gv_color(x11,aquamarine2)). +assert(gv_color(x11,aquamarine3)). +assert(gv_color(x11,aquamarine4)). +assert(gv_color(x11,azure)). +assert(gv_color(x11,azure1)). +assert(gv_color(x11,azure2)). +assert(gv_color(x11,azure3)). +assert(gv_color(x11,azure4)). +assert(gv_color(x11,beige)). +assert(gv_color(x11,bisque)). +assert(gv_color(x11,bisque1)). +assert(gv_color(x11,bisque2)). +assert(gv_color(x11,bisque3)). +assert(gv_color(x11,bisque4)). +assert(gv_color(x11,black)). +assert(gv_color(x11,blanchedalmond)). +assert(gv_color(x11,blue)). +assert(gv_color(x11,blue1)). +assert(gv_color(x11,blue2)). +assert(gv_color(x11,blue3)). +assert(gv_color(x11,blue4)). +assert(gv_color(x11,blueviolet)). +assert(gv_color(x11,brown)). +assert(gv_color(x11,brown1)). +assert(gv_color(x11,brown2)). +assert(gv_color(x11,brown3)). +assert(gv_color(x11,brown4)). +assert(gv_color(x11,burlywood)). +assert(gv_color(x11,burlywood1)). +assert(gv_color(x11,burlywood2)). +assert(gv_color(x11,burlywood3)). +assert(gv_color(x11,burlywood4)). +assert(gv_color(x11,cadetblue)). +assert(gv_color(x11,cadetblue1)). +assert(gv_color(x11,cadetblue2)). +assert(gv_color(x11,cadetblue3)). +assert(gv_color(x11,cadetblue4)). +assert(gv_color(x11,chartreuse)). +assert(gv_color(x11,chartreuse1)). +assert(gv_color(x11,chartreuse2)). +assert(gv_color(x11,chartreuse3)). +assert(gv_color(x11,chartreuse4)). +assert(gv_color(x11,chocolate)). +assert(gv_color(x11,chocolate1)). +assert(gv_color(x11,chocolate2)). +assert(gv_color(x11,chocolate3)). +assert(gv_color(x11,chocolate4)). +assert(gv_color(x11,coral)). +assert(gv_color(x11,coral1)). +assert(gv_color(x11,coral2)). +assert(gv_color(x11,coral3)). +assert(gv_color(x11,coral4)). +assert(gv_color(x11,cornflowerblue)). +assert(gv_color(x11,cornsilk)). +assert(gv_color(x11,cornsilk1)). +assert(gv_color(x11,cornsilk2)). +assert(gv_color(x11,cornsilk3)). +assert(gv_color(x11,cornsilk4)). +assert(gv_color(x11,crimson)). +assert(gv_color(x11,cyan)). +assert(gv_color(x11,cyan1)). +assert(gv_color(x11,cyan2)). +assert(gv_color(x11,cyan3)). +assert(gv_color(x11,cyan4)). +assert(gv_color(x11,darkgoldenrod)). +assert(gv_color(x11,darkgoldenrod1)). +assert(gv_color(x11,darkgoldenrod2)). +assert(gv_color(x11,darkgoldenrod3)). +assert(gv_color(x11,darkgoldenrod4)). +assert(gv_color(x11,darkgreen)). +assert(gv_color(x11,darkkhaki)). +assert(gv_color(x11,darkolivegreen)). +assert(gv_color(x11,darkolivegreen1)). +assert(gv_color(x11,darkolivegreen2)). +assert(gv_color(x11,darkolivegreen3)). +assert(gv_color(x11,darkolivegreen4)). +assert(gv_color(x11,darkorange)). +assert(gv_color(x11,darkorange1)). +assert(gv_color(x11,darkorange2)). +assert(gv_color(x11,darkorange3)). +assert(gv_color(x11,darkorange4)). +assert(gv_color(x11,darkorchid)). +assert(gv_color(x11,darkorchid1)). +assert(gv_color(x11,darkorchid2)). +assert(gv_color(x11,darkorchid3)). +assert(gv_color(x11,darkorchid4)). +assert(gv_color(x11,darksalmon)). +assert(gv_color(x11,darkseagreen)). +assert(gv_color(x11,darkseagreen1)). +assert(gv_color(x11,darkseagreen2)). +assert(gv_color(x11,darkseagreen3)). +assert(gv_color(x11,darkseagreen4)). +assert(gv_color(x11,darkslateblue)). +assert(gv_color(x11,darkslategray)). +assert(gv_color(x11,darkslategray1)). +assert(gv_color(x11,darkslategray2)). +assert(gv_color(x11,darkslategray3)). +assert(gv_color(x11,darkslategray4)). +assert(gv_color(x11,darkslategrey)). +assert(gv_color(x11,darkturquoise)). +assert(gv_color(x11,darkviolet)). +assert(gv_color(x11,deeppink)). +assert(gv_color(x11,deeppink1)). +assert(gv_color(x11,deeppink2)). +assert(gv_color(x11,deeppink3)). +assert(gv_color(x11,deeppink4)). +assert(gv_color(x11,deepskyblue)). +assert(gv_color(x11,deepskyblue1)). +assert(gv_color(x11,deepskyblue2)). +assert(gv_color(x11,deepskyblue3)). +assert(gv_color(x11,deepskyblue4)). +assert(gv_color(x11,dimgray)). +assert(gv_color(x11,dimgrey)). +assert(gv_color(x11,dodgerblue)). +assert(gv_color(x11,dodgerblue1)). +assert(gv_color(x11,dodgerblue2)). +assert(gv_color(x11,dodgerblue3)). +assert(gv_color(x11,dodgerblue4)). +assert(gv_color(x11,firebrick)). +assert(gv_color(x11,firebrick1)). +assert(gv_color(x11,firebrick2)). +assert(gv_color(x11,firebrick3)). +assert(gv_color(x11,firebrick4)). +assert(gv_color(x11,floralwhite)). +assert(gv_color(x11,forestgreen)). +assert(gv_color(x11,gainsboro)). +assert(gv_color(x11,ghostwhite)). +assert(gv_color(x11,gold)). +assert(gv_color(x11,gold1)). +assert(gv_color(x11,gold2)). +assert(gv_color(x11,gold3)). +assert(gv_color(x11,gold4)). +assert(gv_color(x11,goldenrod)). +assert(gv_color(x11,goldenrod1)). +assert(gv_color(x11,goldenrod2)). +assert(gv_color(x11,goldenrod3)). +assert(gv_color(x11,goldenrod4)). +assert(gv_color(x11,gray)). +assert(gv_color(x11,gray0)). +assert(gv_color(x11,gray1)). +assert(gv_color(x11,gray10)). +assert(gv_color(x11,gray100)). +assert(gv_color(x11,gray11)). +assert(gv_color(x11,gray12)). +assert(gv_color(x11,gray13)). +assert(gv_color(x11,gray14)). +assert(gv_color(x11,gray15)). +assert(gv_color(x11,gray16)). +assert(gv_color(x11,gray17)). +assert(gv_color(x11,gray18)). +assert(gv_color(x11,gray19)). +assert(gv_color(x11,gray2)). +assert(gv_color(x11,gray20)). +assert(gv_color(x11,gray21)). +assert(gv_color(x11,gray22)). +assert(gv_color(x11,gray23)). +assert(gv_color(x11,gray24)). +assert(gv_color(x11,gray25)). +assert(gv_color(x11,gray26)). +assert(gv_color(x11,gray27)). +assert(gv_color(x11,gray28)). +assert(gv_color(x11,gray29)). +assert(gv_color(x11,gray3)). +assert(gv_color(x11,gray30)). +assert(gv_color(x11,gray31)). +assert(gv_color(x11,gray32)). +assert(gv_color(x11,gray33)). +assert(gv_color(x11,gray34)). +assert(gv_color(x11,gray35)). +assert(gv_color(x11,gray36)). +assert(gv_color(x11,gray37)). +assert(gv_color(x11,gray38)). +assert(gv_color(x11,gray39)). +assert(gv_color(x11,gray4)). +assert(gv_color(x11,gray40)). +assert(gv_color(x11,gray41)). +assert(gv_color(x11,gray42)). +assert(gv_color(x11,gray43)). +assert(gv_color(x11,gray44)). +assert(gv_color(x11,gray45)). +assert(gv_color(x11,gray46)). +assert(gv_color(x11,gray47)). +assert(gv_color(x11,gray48)). +assert(gv_color(x11,gray49)). +assert(gv_color(x11,gray5)). +assert(gv_color(x11,gray50)). +assert(gv_color(x11,gray51)). +assert(gv_color(x11,gray52)). +assert(gv_color(x11,gray53)). +assert(gv_color(x11,gray54)). +assert(gv_color(x11,gray55)). +assert(gv_color(x11,gray56)). +assert(gv_color(x11,gray57)). +assert(gv_color(x11,gray58)). +assert(gv_color(x11,gray59)). +assert(gv_color(x11,gray6)). +assert(gv_color(x11,gray60)). +assert(gv_color(x11,gray61)). +assert(gv_color(x11,gray62)). +assert(gv_color(x11,gray63)). +assert(gv_color(x11,gray64)). +assert(gv_color(x11,gray65)). +assert(gv_color(x11,gray66)). +assert(gv_color(x11,gray67)). +assert(gv_color(x11,gray68)). +assert(gv_color(x11,gray69)). +assert(gv_color(x11,gray7)). +assert(gv_color(x11,gray70)). +assert(gv_color(x11,gray71)). +assert(gv_color(x11,gray72)). +assert(gv_color(x11,gray73)). +assert(gv_color(x11,gray74)). +assert(gv_color(x11,gray75)). +assert(gv_color(x11,gray76)). +assert(gv_color(x11,gray77)). +assert(gv_color(x11,gray78)). +assert(gv_color(x11,gray79)). +assert(gv_color(x11,gray8)). +assert(gv_color(x11,gray80)). +assert(gv_color(x11,gray81)). +assert(gv_color(x11,gray82)). +assert(gv_color(x11,gray83)). +assert(gv_color(x11,gray84)). +assert(gv_color(x11,gray85)). +assert(gv_color(x11,gray86)). +assert(gv_color(x11,gray87)). +assert(gv_color(x11,gray88)). +assert(gv_color(x11,gray89)). +assert(gv_color(x11,gray9)). +assert(gv_color(x11,gray90)). +assert(gv_color(x11,gray91)). +assert(gv_color(x11,gray92)). +assert(gv_color(x11,gray93)). +assert(gv_color(x11,gray94)). +assert(gv_color(x11,gray95)). +assert(gv_color(x11,gray96)). +assert(gv_color(x11,gray97)). +assert(gv_color(x11,gray98)). +assert(gv_color(x11,gray99)). +assert(gv_color(x11,green)). +assert(gv_color(x11,green1)). +assert(gv_color(x11,green2)). +assert(gv_color(x11,green3)). +assert(gv_color(x11,green4)). +assert(gv_color(x11,greenyellow)). +assert(gv_color(x11,grey)). +assert(gv_color(x11,grey0)). +assert(gv_color(x11,grey1)). +assert(gv_color(x11,grey10)). +assert(gv_color(x11,grey100)). +assert(gv_color(x11,grey11)). +assert(gv_color(x11,grey12)). +assert(gv_color(x11,grey13)). +assert(gv_color(x11,grey14)). +assert(gv_color(x11,grey15)). +assert(gv_color(x11,grey16)). +assert(gv_color(x11,grey17)). +assert(gv_color(x11,grey18)). +assert(gv_color(x11,grey19)). +assert(gv_color(x11,grey2)). +assert(gv_color(x11,grey20)). +assert(gv_color(x11,grey21)). +assert(gv_color(x11,grey22)). +assert(gv_color(x11,grey23)). +assert(gv_color(x11,grey24)). +assert(gv_color(x11,grey25)). +assert(gv_color(x11,grey26)). +assert(gv_color(x11,grey27)). +assert(gv_color(x11,grey28)). +assert(gv_color(x11,grey29)). +assert(gv_color(x11,grey3)). +assert(gv_color(x11,grey30)). +assert(gv_color(x11,grey31)). +assert(gv_color(x11,grey32)). +assert(gv_color(x11,grey33)). +assert(gv_color(x11,grey34)). +assert(gv_color(x11,grey35)). +assert(gv_color(x11,grey36)). +assert(gv_color(x11,grey37)). +assert(gv_color(x11,grey38)). +assert(gv_color(x11,grey39)). +assert(gv_color(x11,grey4)). +assert(gv_color(x11,grey40)). +assert(gv_color(x11,grey41)). +assert(gv_color(x11,grey42)). +assert(gv_color(x11,grey43)). +assert(gv_color(x11,grey44)). +assert(gv_color(x11,grey45)). +assert(gv_color(x11,grey46)). +assert(gv_color(x11,grey47)). +assert(gv_color(x11,grey48)). +assert(gv_color(x11,grey49)). +assert(gv_color(x11,grey5)). +assert(gv_color(x11,grey50)). +assert(gv_color(x11,grey51)). +assert(gv_color(x11,grey52)). +assert(gv_color(x11,grey53)). +assert(gv_color(x11,grey54)). +assert(gv_color(x11,grey55)). +assert(gv_color(x11,grey56)). +assert(gv_color(x11,grey57)). +assert(gv_color(x11,grey58)). +assert(gv_color(x11,grey59)). +assert(gv_color(x11,grey6)). +assert(gv_color(x11,grey60)). +assert(gv_color(x11,grey61)). +assert(gv_color(x11,grey62)). +assert(gv_color(x11,grey63)). +assert(gv_color(x11,grey64)). +assert(gv_color(x11,grey65)). +assert(gv_color(x11,grey66)). +assert(gv_color(x11,grey67)). +assert(gv_color(x11,grey68)). +assert(gv_color(x11,grey69)). +assert(gv_color(x11,grey7)). +assert(gv_color(x11,grey70)). +assert(gv_color(x11,grey71)). +assert(gv_color(x11,grey72)). +assert(gv_color(x11,grey73)). +assert(gv_color(x11,grey74)). +assert(gv_color(x11,grey75)). +assert(gv_color(x11,grey76)). +assert(gv_color(x11,grey77)). +assert(gv_color(x11,grey78)). +assert(gv_color(x11,grey79)). +assert(gv_color(x11,grey8)). +assert(gv_color(x11,grey80)). +assert(gv_color(x11,grey81)). +assert(gv_color(x11,grey82)). +assert(gv_color(x11,grey83)). +assert(gv_color(x11,grey84)). +assert(gv_color(x11,grey85)). +assert(gv_color(x11,grey86)). +assert(gv_color(x11,grey87)). +assert(gv_color(x11,grey88)). +assert(gv_color(x11,grey89)). +assert(gv_color(x11,grey9)). +assert(gv_color(x11,grey90)). +assert(gv_color(x11,grey91)). +assert(gv_color(x11,grey92)). +assert(gv_color(x11,grey93)). +assert(gv_color(x11,grey94)). +assert(gv_color(x11,grey95)). +assert(gv_color(x11,grey96)). +assert(gv_color(x11,grey97)). +assert(gv_color(x11,grey98)). +assert(gv_color(x11,grey99)). +assert(gv_color(x11,honeydew)). +assert(gv_color(x11,honeydew1)). +assert(gv_color(x11,honeydew2)). +assert(gv_color(x11,honeydew3)). +assert(gv_color(x11,honeydew4)). +assert(gv_color(x11,hotpink)). +assert(gv_color(x11,hotpink1)). +assert(gv_color(x11,hotpink2)). +assert(gv_color(x11,hotpink3)). +assert(gv_color(x11,hotpink4)). +assert(gv_color(x11,indianred)). +assert(gv_color(x11,indianred1)). +assert(gv_color(x11,indianred2)). +assert(gv_color(x11,indianred3)). +assert(gv_color(x11,indianred4)). +assert(gv_color(x11,indigo)). +assert(gv_color(x11,invis)). +assert(gv_color(x11,ivory)). +assert(gv_color(x11,ivory1)). +assert(gv_color(x11,ivory2)). +assert(gv_color(x11,ivory3)). +assert(gv_color(x11,ivory4)). +assert(gv_color(x11,khaki)). +assert(gv_color(x11,khaki1)). +assert(gv_color(x11,khaki2)). +assert(gv_color(x11,khaki3)). +assert(gv_color(x11,khaki4)). +assert(gv_color(x11,lavender)). +assert(gv_color(x11,lavenderblush)). +assert(gv_color(x11,lavenderblush1)). +assert(gv_color(x11,lavenderblush2)). +assert(gv_color(x11,lavenderblush3)). +assert(gv_color(x11,lavenderblush4)). +assert(gv_color(x11,lawngreen)). +assert(gv_color(x11,lemonchiffon)). +assert(gv_color(x11,lemonchiffon1)). +assert(gv_color(x11,lemonchiffon2)). +assert(gv_color(x11,lemonchiffon3)). +assert(gv_color(x11,lemonchiffon4)). +assert(gv_color(x11,lightblue)). +assert(gv_color(x11,lightblue1)). +assert(gv_color(x11,lightblue2)). +assert(gv_color(x11,lightblue3)). +assert(gv_color(x11,lightblue4)). +assert(gv_color(x11,lightcoral)). +assert(gv_color(x11,lightcyan)). +assert(gv_color(x11,lightcyan1)). +assert(gv_color(x11,lightcyan2)). +assert(gv_color(x11,lightcyan3)). +assert(gv_color(x11,lightcyan4)). +assert(gv_color(x11,lightgoldenrod)). +assert(gv_color(x11,lightgoldenrod1)). +assert(gv_color(x11,lightgoldenrod2)). +assert(gv_color(x11,lightgoldenrod3)). +assert(gv_color(x11,lightgoldenrod4)). +assert(gv_color(x11,lightgoldenrodyellow)). +assert(gv_color(x11,lightgray)). +assert(gv_color(x11,lightgrey)). +assert(gv_color(x11,lightpink)). +assert(gv_color(x11,lightpink1)). +assert(gv_color(x11,lightpink2)). +assert(gv_color(x11,lightpink3)). +assert(gv_color(x11,lightpink4)). +assert(gv_color(x11,lightsalmon)). +assert(gv_color(x11,lightsalmon1)). +assert(gv_color(x11,lightsalmon2)). +assert(gv_color(x11,lightsalmon3)). +assert(gv_color(x11,lightsalmon4)). +assert(gv_color(x11,lightseagreen)). +assert(gv_color(x11,lightskyblue)). +assert(gv_color(x11,lightskyblue1)). +assert(gv_color(x11,lightskyblue2)). +assert(gv_color(x11,lightskyblue3)). +assert(gv_color(x11,lightskyblue4)). +assert(gv_color(x11,lightslateblue)). +assert(gv_color(x11,lightslategray)). +assert(gv_color(x11,lightslategrey)). +assert(gv_color(x11,lightsteelblue)). +assert(gv_color(x11,lightsteelblue1)). +assert(gv_color(x11,lightsteelblue2)). +assert(gv_color(x11,lightsteelblue3)). +assert(gv_color(x11,lightsteelblue4)). +assert(gv_color(x11,lightyellow)). +assert(gv_color(x11,lightyellow1)). +assert(gv_color(x11,lightyellow2)). +assert(gv_color(x11,lightyellow3)). +assert(gv_color(x11,lightyellow4)). +assert(gv_color(x11,limegreen)). +assert(gv_color(x11,linen)). +assert(gv_color(x11,magenta)). +assert(gv_color(x11,magenta1)). +assert(gv_color(x11,magenta2)). +assert(gv_color(x11,magenta3)). +assert(gv_color(x11,magenta4)). +assert(gv_color(x11,maroon)). +assert(gv_color(x11,maroon1)). +assert(gv_color(x11,maroon2)). +assert(gv_color(x11,maroon3)). +assert(gv_color(x11,maroon4)). +assert(gv_color(x11,mediumaquamarine)). +assert(gv_color(x11,mediumblue)). +assert(gv_color(x11,mediumorchid)). +assert(gv_color(x11,mediumorchid1)). +assert(gv_color(x11,mediumorchid2)). +assert(gv_color(x11,mediumorchid3)). +assert(gv_color(x11,mediumorchid4)). +assert(gv_color(x11,mediumpurple)). +assert(gv_color(x11,mediumpurple1)). +assert(gv_color(x11,mediumpurple2)). +assert(gv_color(x11,mediumpurple3)). +assert(gv_color(x11,mediumpurple4)). +assert(gv_color(x11,mediumseagreen)). +assert(gv_color(x11,mediumslateblue)). +assert(gv_color(x11,mediumspringgreen)). +assert(gv_color(x11,mediumturquoise)). +assert(gv_color(x11,mediumvioletred)). +assert(gv_color(x11,midnightblue)). +assert(gv_color(x11,mintcream)). +assert(gv_color(x11,mistyrose)). +assert(gv_color(x11,mistyrose1)). +assert(gv_color(x11,mistyrose2)). +assert(gv_color(x11,mistyrose3)). +assert(gv_color(x11,mistyrose4)). +assert(gv_color(x11,moccasin)). +assert(gv_color(x11,navajowhite)). +assert(gv_color(x11,navajowhite1)). +assert(gv_color(x11,navajowhite2)). +assert(gv_color(x11,navajowhite3)). +assert(gv_color(x11,navajowhite4)). +assert(gv_color(x11,navy)). +assert(gv_color(x11,navyblue)). +assert(gv_color(x11,none)). +assert(gv_color(x11,oldlace)). +assert(gv_color(x11,olivedrab)). +assert(gv_color(x11,olivedrab1)). +assert(gv_color(x11,olivedrab2)). +assert(gv_color(x11,olivedrab3)). +assert(gv_color(x11,olivedrab4)). +assert(gv_color(x11,orange)). +assert(gv_color(x11,orange1)). +assert(gv_color(x11,orange2)). +assert(gv_color(x11,orange3)). +assert(gv_color(x11,orange4)). +assert(gv_color(x11,orangered)). +assert(gv_color(x11,orangered1)). +assert(gv_color(x11,orangered2)). +assert(gv_color(x11,orangered3)). +assert(gv_color(x11,orangered4)). +assert(gv_color(x11,orchid)). +assert(gv_color(x11,orchid1)). +assert(gv_color(x11,orchid2)). +assert(gv_color(x11,orchid3)). +assert(gv_color(x11,orchid4)). +assert(gv_color(x11,palegoldenrod)). +assert(gv_color(x11,palegreen)). +assert(gv_color(x11,palegreen1)). +assert(gv_color(x11,palegreen2)). +assert(gv_color(x11,palegreen3)). +assert(gv_color(x11,palegreen4)). +assert(gv_color(x11,paleturquoise)). +assert(gv_color(x11,paleturquoise1)). +assert(gv_color(x11,paleturquoise2)). +assert(gv_color(x11,paleturquoise3)). +assert(gv_color(x11,paleturquoise4)). +assert(gv_color(x11,palevioletred)). +assert(gv_color(x11,palevioletred1)). +assert(gv_color(x11,palevioletred2)). +assert(gv_color(x11,palevioletred3)). +assert(gv_color(x11,palevioletred4)). +assert(gv_color(x11,papayawhip)). +assert(gv_color(x11,peachpuff)). +assert(gv_color(x11,peachpuff1)). +assert(gv_color(x11,peachpuff2)). +assert(gv_color(x11,peachpuff3)). +assert(gv_color(x11,peachpuff4)). +assert(gv_color(x11,peru)). +assert(gv_color(x11,pink)). +assert(gv_color(x11,pink1)). +assert(gv_color(x11,pink2)). +assert(gv_color(x11,pink3)). +assert(gv_color(x11,pink4)). +assert(gv_color(x11,plum)). +assert(gv_color(x11,plum1)). +assert(gv_color(x11,plum2)). +assert(gv_color(x11,plum3)). +assert(gv_color(x11,plum4)). +assert(gv_color(x11,powderblue)). +assert(gv_color(x11,purple)). +assert(gv_color(x11,purple1)). +assert(gv_color(x11,purple2)). +assert(gv_color(x11,purple3)). +assert(gv_color(x11,purple4)). +assert(gv_color(x11,red)). +assert(gv_color(x11,red1)). +assert(gv_color(x11,red2)). +assert(gv_color(x11,red3)). +assert(gv_color(x11,red4)). +assert(gv_color(x11,rosybrown)). +assert(gv_color(x11,rosybrown1)). +assert(gv_color(x11,rosybrown2)). +assert(gv_color(x11,rosybrown3)). +assert(gv_color(x11,rosybrown4)). +assert(gv_color(x11,royalblue)). +assert(gv_color(x11,royalblue1)). +assert(gv_color(x11,royalblue2)). +assert(gv_color(x11,royalblue3)). +assert(gv_color(x11,royalblue4)). +assert(gv_color(x11,saddlebrown)). +assert(gv_color(x11,salmon)). +assert(gv_color(x11,salmon1)). +assert(gv_color(x11,salmon2)). +assert(gv_color(x11,salmon3)). +assert(gv_color(x11,salmon4)). +assert(gv_color(x11,sandybrown)). +assert(gv_color(x11,seagreen)). +assert(gv_color(x11,seagreen1)). +assert(gv_color(x11,seagreen2)). +assert(gv_color(x11,seagreen3)). +assert(gv_color(x11,seagreen4)). +assert(gv_color(x11,seashell)). +assert(gv_color(x11,seashell1)). +assert(gv_color(x11,seashell2)). +assert(gv_color(x11,seashell3)). +assert(gv_color(x11,seashell4)). +assert(gv_color(x11,sienna)). +assert(gv_color(x11,sienna1)). +assert(gv_color(x11,sienna2)). +assert(gv_color(x11,sienna3)). +assert(gv_color(x11,sienna4)). +assert(gv_color(x11,skyblue)). +assert(gv_color(x11,skyblue1)). +assert(gv_color(x11,skyblue2)). +assert(gv_color(x11,skyblue3)). +assert(gv_color(x11,skyblue4)). +assert(gv_color(x11,slateblue)). +assert(gv_color(x11,slateblue1)). +assert(gv_color(x11,slateblue2)). +assert(gv_color(x11,slateblue3)). +assert(gv_color(x11,slateblue4)). +assert(gv_color(x11,slategray)). +assert(gv_color(x11,slategray1)). +assert(gv_color(x11,slategray2)). +assert(gv_color(x11,slategray3)). +assert(gv_color(x11,slategray4)). +assert(gv_color(x11,slategrey)). +assert(gv_color(x11,snow)). +assert(gv_color(x11,snow1)). +assert(gv_color(x11,snow2)). +assert(gv_color(x11,snow3)). +assert(gv_color(x11,snow4)). +assert(gv_color(x11,springgreen)). +assert(gv_color(x11,springgreen1)). +assert(gv_color(x11,springgreen2)). +assert(gv_color(x11,springgreen3)). +assert(gv_color(x11,springgreen4)). +assert(gv_color(x11,steelblue)). +assert(gv_color(x11,steelblue1)). +assert(gv_color(x11,steelblue2)). +assert(gv_color(x11,steelblue3)). +assert(gv_color(x11,steelblue4)). +assert(gv_color(x11,tan)). +assert(gv_color(x11,tan1)). +assert(gv_color(x11,tan2)). +assert(gv_color(x11,tan3)). +assert(gv_color(x11,tan4)). +assert(gv_color(x11,thistle)). +assert(gv_color(x11,thistle1)). +assert(gv_color(x11,thistle2)). +assert(gv_color(x11,thistle3)). +assert(gv_color(x11,thistle4)). +assert(gv_color(x11,tomato)). +assert(gv_color(x11,tomato1)). +assert(gv_color(x11,tomato2)). +assert(gv_color(x11,tomato3)). +assert(gv_color(x11,tomato4)). +assert(gv_color(x11,transparent)). +assert(gv_color(x11,turquoise)). +assert(gv_color(x11,turquoise1)). +assert(gv_color(x11,turquoise2)). +assert(gv_color(x11,turquoise3)). +assert(gv_color(x11,turquoise4)). +assert(gv_color(x11,violet)). +assert(gv_color(x11,violetred)). +assert(gv_color(x11,violetred1)). +assert(gv_color(x11,violetred2)). +assert(gv_color(x11,violetred3)). +assert(gv_color(x11,violetred4)). +assert(gv_color(x11,wheat)). +assert(gv_color(x11,wheat1)). +assert(gv_color(x11,wheat2)). +assert(gv_color(x11,wheat3)). +assert(gv_color(x11,wheat4)). +assert(gv_color(x11,white)). +assert(gv_color(x11,whitesmoke)). +assert(gv_color(x11,yellow)). +assert(gv_color(x11,yellow1)). +assert(gv_color(x11,yellow2)). +assert(gv_color(x11,yellow3)). +assert(gv_color(x11,yellow4)). +assert(gv_color(x11,yellowgreen)). +assert(gv_color(svg,aliceblue)). +assert(gv_color(svg,antiquewhite)). +assert(gv_color(svg,aqua)). +assert(gv_color(svg,aquamarine)). +assert(gv_color(svg,azure)). +assert(gv_color(svg,beige)). +assert(gv_color(svg,bisque)). +assert(gv_color(svg,black)). +assert(gv_color(svg,blanchedalmond)). +assert(gv_color(svg,blue)). +assert(gv_color(svg,blueviolet)). +assert(gv_color(svg,brown)). +assert(gv_color(svg,burlywood)). +assert(gv_color(svg,cadetblue)). +assert(gv_color(svg,chartreuse)). +assert(gv_color(svg,chocolate)). +assert(gv_color(svg,coral)). +assert(gv_color(svg,cornflowerblue)). +assert(gv_color(svg,cornsilk)). +assert(gv_color(svg,crimson)). +assert(gv_color(svg,cyan)). +assert(gv_color(svg,darkblue)). +assert(gv_color(svg,darkcyan)). +assert(gv_color(svg,darkgoldenrod)). +assert(gv_color(svg,darkgray)). +assert(gv_color(svg,darkgreen)). +assert(gv_color(svg,darkgrey)). +assert(gv_color(svg,darkkhaki)). +assert(gv_color(svg,darkmagenta)). +assert(gv_color(svg,darkolivegreen)). +assert(gv_color(svg,darkorange)). +assert(gv_color(svg,darkorchid)). +assert(gv_color(svg,darkred)). +assert(gv_color(svg,darksalmon)). +assert(gv_color(svg,darkseagreen)). +assert(gv_color(svg,darkslateblue)). +assert(gv_color(svg,darkslategray)). +assert(gv_color(svg,darkslategrey)). +assert(gv_color(svg,darkturquoise)). +assert(gv_color(svg,darkviolet)). +assert(gv_color(svg,deeppink)). +assert(gv_color(svg,deepskyblue)). +assert(gv_color(svg,dimgray)). +assert(gv_color(svg,dimgrey)). +assert(gv_color(svg,dodgerblue)). +assert(gv_color(svg,firebrick)). +assert(gv_color(svg,floralwhite)). +assert(gv_color(svg,forestgreen)). +assert(gv_color(svg,fuchsia)). +assert(gv_color(svg,gainsboro)). +assert(gv_color(svg,ghostwhite)). +assert(gv_color(svg,gold)). +assert(gv_color(svg,goldenrod)). +assert(gv_color(svg,gray)). +assert(gv_color(svg,grey)). +assert(gv_color(svg,green)). +assert(gv_color(svg,greenyellow)). +assert(gv_color(svg,honeydew)). +assert(gv_color(svg,hotpink)). +assert(gv_color(svg,indianred)). +assert(gv_color(svg,indigo)). +assert(gv_color(svg,ivory)). +assert(gv_color(svg,khaki)). +assert(gv_color(svg,lavender)). +assert(gv_color(svg,lavenderblush)). +assert(gv_color(svg,lawngreen)). +assert(gv_color(svg,lemonchiffon)). +assert(gv_color(svg,lightblue)). +assert(gv_color(svg,lightcoral)). +assert(gv_color(svg,lightcyan)). +assert(gv_color(svg,lightgoldenrodyellow)). +assert(gv_color(svg,lightgray)). +assert(gv_color(svg,lightgreen)). +assert(gv_color(svg,lightgrey)). +assert(gv_color(svg,lightpink)). +assert(gv_color(svg,lightsalmon)). +assert(gv_color(svg,lightseagreen)). +assert(gv_color(svg,lightskyblue)). +assert(gv_color(svg,lightslategray)). +assert(gv_color(svg,lightslategrey)). +assert(gv_color(svg,lightsteelblue)). +assert(gv_color(svg,lightyellow)). +assert(gv_color(svg,lime)). +assert(gv_color(svg,limegreen)). +assert(gv_color(svg,linen)). +assert(gv_color(svg,magenta)). +assert(gv_color(svg,maroon)). +assert(gv_color(svg,mediumaquamarine)). +assert(gv_color(svg,mediumblue)). +assert(gv_color(svg,mediumorchid)). +assert(gv_color(svg,mediumpurple)). +assert(gv_color(svg,mediumseagreen)). +assert(gv_color(svg,mediumslateblue)). +assert(gv_color(svg,mediumspringgreen)). +assert(gv_color(svg,mediumturquoise)). +assert(gv_color(svg,mediumvioletred)). +assert(gv_color(svg,midnightblue)). +assert(gv_color(svg,mintcream)). +assert(gv_color(svg,mistyrose)). +assert(gv_color(svg,moccasin)). +assert(gv_color(svg,navajowhite)). +assert(gv_color(svg,navy)). +assert(gv_color(svg,oldlace)). +assert(gv_color(svg,olive)). +assert(gv_color(svg,olivedrab)). +assert(gv_color(svg,orange)). +assert(gv_color(svg,orangered)). +assert(gv_color(svg,orchid)). +assert(gv_color(svg,palegoldenrod)). +assert(gv_color(svg,palegreen)). +assert(gv_color(svg,paleturquoise)). +assert(gv_color(svg,palevioletred)). +assert(gv_color(svg,papayawhip)). +assert(gv_color(svg,peachpuff)). +assert(gv_color(svg,peru)). +assert(gv_color(svg,pink)). +assert(gv_color(svg,plum)). +assert(gv_color(svg,powderblue)). +assert(gv_color(svg,purple)). +assert(gv_color(svg,red)). +assert(gv_color(svg,rosybrown)). +assert(gv_color(svg,royalblue)). +assert(gv_color(svg,saddlebrown)). +assert(gv_color(svg,salmon)). +assert(gv_color(svg,sandybrown)). +assert(gv_color(svg,seagreen)). +assert(gv_color(svg,seashell)). +assert(gv_color(svg,sienna)). +assert(gv_color(svg,silver)). +assert(gv_color(svg,skyblue)). +assert(gv_color(svg,slateblue)). +assert(gv_color(svg,slategray)). +assert(gv_color(svg,slategrey)). +assert(gv_color(svg,snow)). +assert(gv_color(svg,springgreen)). +assert(gv_color(svg,steelblue)). +assert(gv_color(svg,tan)). +assert(gv_color(svg,teal)). +assert(gv_color(svg,thistle)). +assert(gv_color(svg,tomato)). +assert(gv_color(svg,turquoise)). +assert(gv_color(svg,violet)). +assert(gv_color(svg,wheat)). +assert(gv_color(svg,white)). +assert(gv_color(svg,whitesmoke)). +assert(gv_color(svg,yellow)). +assert(gv_color(svg,yellowgreen)). ``` 116: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 65f43b8 å’Œå˜åŠ¨å c6de3d1  [back to content](#compare) ``` diff diff --git a/.gitignore b/.gitignore index 7193a38..bd24270 100644 --- a/.gitignore +++ b/.gitignore @@ -1,4 +1,3 @@ *~ *# *.db -data/* diff --git a/pack.pl b/pack.pl index dfee09c..edfd45f 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.14'). +version('0.0.15'). diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl index 5d97cb1..fa00670 100644 --- a/prolog/gv/gv_attrs.pl +++ b/prolog/gv/gv_attrs.pl @@ -9,7 +9,7 @@ /**  GraphViz attributes @author Wouter Beek -@version 2015/07 +@version 2015/07-2015/08 */ :- use_module(library(apply)). @@ -17,10 +17,10 @@ :- use_module(library(dcg/basics)). :- use_module(library(dcg/dcg_call)). :- use_module(library(dcg/dcg_phrase)). -:- use_module(library(file_ext)). :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]). -:- use_module(library(html/html_download)). +:- use_module(library(http/http_download)). :- use_module(library(lists)). +:- use_module(library(os/file_ext)). :- use_module(library(persistency)). :- use_module(library(xpath)). :- use_module(library(xpath/xpath_table)). diff --git a/gv_color.log b/prolog/gv/gv_color.log similarity index 100% rename from gv_color.log rename to prolog/gv/gv_color.log diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl index d6eb478..57c7f90 100644 --- a/prolog/gv/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -21,9 +21,9 @@ :- use_module(library(dcg/basics)). :- use_module(library(dcg/dcg_abnf)). :- use_module(library(dcg/dcg_content)). -:- use_module(library(file_ext)). -:- use_module(library(html/html_download)). +:- use_module(library(http/http_download)). :- use_module(library(lists)). +:- use_module(library(os/file_ext)). :- use_module(library(persistency)). :- use_module(library(xpath)). :- use_module(library(xpath/xpath_table)). diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index 930fb32..18cdf7a 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -11,7 +11,7 @@ gv_node_statement//2, % +Indent:nonneg % +Vertex:compound gv_ranked_node_collection//2 % +Indent:nonneg - % +Rank:??? + % +Rank ] ). @@ -26,7 +26,7 @@ a_list = ID \"=\" ID [\",\"] [a_list] @author Wouter Beek @see http://www.graphviz.org/content/dot-language -@version 2015/07 +@version 2015/07-2015/08 */ :- use_module(library(apply)). @@ -68,7 +68,7 @@ gv_edge_statement(I, Dir, edge(From,To,Attrs)) -- gv_node_id(From), \" \", gv_edge_operator(Dir), \" \", gv_node_id(To), \" \", - + % We want `colorscheme/1` from the edges and % `directionality/1` from the graph. gv_attrs(edge, Attrs), @@ -130,7 +130,7 @@ gv_node_statement(I, vertex(Id,Attrs)) -- -%! gv_ranked_node_collection(+Indent:nonneg, Rank:???)// is det. +%! gv_ranked_node_collection(+Indent:nonneg, Rank)// is det. gv_ranked_node_collection(I, Rank) -- indent(I), @@ -138,20 +138,20 @@ gv_ranked_node_collection(I, Rank) -- gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -- \"\\n\", - + % The rank attribute. {NewI is I + 1}, indent(NewI), gv_attr(subgraph, rank=same), \";\\n\", - + % Vertice statements. '*'( gv_node_statement(NewI), [Rank_V_Term|Content_V_Terms], [] ), - + % We want to indent the closing curly brace. indent(I), \"\\n\". diff --git a/gv_attrs.log b/test/gv_attrs.log similarity index 100% rename from gv_attrs.log rename to test/gv_attrs.log ``` 117: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c6de3d1 å’Œå˜åŠ¨å cab2231  [back to content](#compare) ``` diff diff --git a/gv_attrs.log b/gv_attrs.log new file mode 100644 index 0000000..a9c6010 --- /dev/null +++ b/gv_attrs.log @@ -0,0 +1,169 @@ +assert(gv_attr('Damping',[graph],[double],'0.99','0.0','neato only')). +assert(gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only')). +assert(gv_attr('URL',[cluster,edge,graph,node],[escString],_,'','svg, postscript, map only')). +assert(gv_attr('_background',[graph],[string],_,'','')). +assert(gv_attr(area,[cluster,node],[double],'1.0','0','patchwork only')). +assert(gv_attr(arrowhead,[edge],[arrowType],normal,'','')). +assert(gv_attr(arrowsize,[edge],[double],'1.0','0.0','')). +assert(gv_attr(arrowtail,[edge],[arrowType],normal,'','')). +assert(gv_attr(bb,[graph],[rect],'','','write only')). +assert(gv_attr(bgcolor,[cluster,graph],[color,colorList],_,'','')). +assert(gv_attr(center,[graph],[bool],false,'','')). +assert(gv_attr(charset,[graph],[string],'\"UTF-8\"','','')). +assert(gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only')). +assert(gv_attr(color,[cluster,edge,node],[color,colorList],black,'','')). +assert(gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','')). +assert(gv_attr(comment,[edge,graph,node],[string],'','','')). +assert(gv_attr(compound,[graph],[bool],false,'','dot only')). +assert(gv_attr(concentrate,[graph],[bool],false,'','')). +assert(gv_attr(constraint,[edge],[bool],true,'','dot only')). +assert(gv_attr(decorate,[edge],[bool],false,'','')). +assert(gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only')). +assert(gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only')). +assert(gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only')). +assert(gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','')). +assert(gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only')). +assert(gv_attr(distortion,[node],[double],'0.0','-100.0','')). +assert(gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only')). +assert(gv_attr(edgeURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(edgehref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(edgetarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only')). +assert(gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot')). +assert(gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','')). +assert(gv_attr(fixedsize,[node],[bool,string],false,'','')). +assert(gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','')). +assert(gv_attr(fontname,[cluster,edge,graph,node],[string],'\"Times-Roman\"','','')). +assert(gv_attr(fontnames,[graph],[string],'','','svg only')). +assert(gv_attr(fontpath,[graph],[string],'system-dependent','','')). +assert(gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','')). +assert(gv_attr(forcelabels,[graph],[bool],true,'','')). +assert(gv_attr(gradientangle,[cluster,graph,node],[int],'','','')). +assert(gv_attr(group,[node],[string],'','','dot only')). +assert(gv_attr(headURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(head_lp,[edge],[point],'','','write only')). +assert(gv_attr(headclip,[edge],[bool],true,'','')). +assert(gv_attr(headhref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(headlabel,[edge],[lblString],'','','')). +assert(gv_attr(headport,[edge],[portPos],center,'','')). +assert(gv_attr(headtarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(height,[node],[double],'0.5','0.02','')). +assert(gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')). +assert(gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')). +assert(gv_attr(image,[node],[string],'','','')). +assert(gv_attr(imagepath,[graph],[string],'','','')). +assert(gv_attr(imagescale,[node],[bool,string],false,'','')). +assert(gv_attr(inputscale,[graph],[double],_,'','fdp, neato only')). +assert(gv_attr(label,[cluster,edge,graph,node],[lblString],'\"\\\\N\" (nodes)\"\" (otherwise)','','')). +assert(gv_attr(labelURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(label_scheme,[graph],[int],'0','0','sfdp only')). +assert(gv_attr(labelangle,[edge],[double],'-25.0','-180.0','')). +assert(gv_attr(labeldistance,[edge],[double],'1.0','0.0','')). +assert(gv_attr(labelfloat,[edge],[bool],false,'','')). +assert(gv_attr(labelfontcolor,[edge],[color],black,'','')). +assert(gv_attr(labelfontname,[edge],[string],'\"Times-Roman\"','','')). +assert(gv_attr(labelfontsize,[edge],[double],'14.0','1.0','')). +assert(gv_attr(labelhref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(labeljust,[cluster,graph],[string],'\"c\"','','')). +assert(gv_attr(labelloc,[cluster,graph,node],[string],'\"t\"(clusters)\"b\"(root graphs)\"c\"(nodes)','','')). +assert(gv_attr(labeltarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(landscape,[graph],[bool],false,'','')). +assert(gv_attr(layer,[cluster,edge,node],[layerRange],'','','')). +assert(gv_attr(layerlistsep,[graph],[string],'\",\"','','')). +assert(gv_attr(layers,[graph],[layerList],'','','')). +assert(gv_attr(layerselect,[graph],[layerRange],'','','')). +assert(gv_attr(layersep,[graph],[string],'\" :\\\\t\"','','')). +assert(gv_attr(layout,[graph],[string],'','','')). +assert(gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only')). +assert(gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only')). +assert(gv_attr(levelsgap,[graph],[double],'0.0','','neato only')). +assert(gv_attr(lhead,[edge],[string],'','','dot only')). +assert(gv_attr(lheight,[cluster,graph],[double],'','','write only')). +assert(gv_attr(lp,[cluster,edge,graph],[point],'','','write only')). +assert(gv_attr(ltail,[edge],[string],'','','dot only')). +assert(gv_attr(lwidth,[cluster,graph],[double],'','','write only')). +assert(gv_attr(margin,[cluster,graph,node],[double,point],'','','')). +assert(gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only')). +assert(gv_attr(mclimit,[graph],[double],'1.0','','dot only')). +assert(gv_attr(mindist,[graph],[double],'1.0','0.0','circo only')). +assert(gv_attr(minlen,[edge],[int],'1','0','dot only')). +assert(gv_attr(mode,[graph],[string],major,'','neato only')). +assert(gv_attr(model,[graph],[string],shortpath,'','neato only')). +assert(gv_attr(mosek,[graph],[bool],false,'','neato only')). +assert(gv_attr(nodesep,[graph],[double],'0.25','0.02','')). +assert(gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','')). +assert(gv_attr(normalize,[graph],[double,bool],false,'','not dot')). +assert(gv_attr(notranslate,[graph],[bool],false,'','neato only')). +assert(gv_attr('nslimit nslimit1',[graph],[double],'','','dot only')). +assert(gv_attr(ordering,[graph,node],[string],'','','dot only')). +assert(gv_attr(orientation,[node],[double],'0.0','360.0','')). +assert(gv_attr(orientation,[graph],[string],'','','')). +assert(gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','')). +assert(gv_attr(overlap,[graph],[string,bool],true,'','not dot')). +assert(gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only')). +assert(gv_attr(overlap_shrink,[graph],[bool],true,'','prism only')). +assert(gv_attr(pack,[graph],[bool,int],false,'','')). +assert(gv_attr(packmode,[graph],[packMode],node,'','')). +assert(gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','')). +assert(gv_attr(page,[graph],[double,point],'','','')). +assert(gv_attr(pagedir,[graph],[pagedir],'BL','','')). +assert(gv_attr(pencolor,[cluster],[color],black,'','')). +assert(gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','')). +assert(gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','')). +assert(gv_attr(pin,[node],[bool],false,'','fdp, neato only')). +assert(gv_attr(pos,[edge,node],[point,splineType],'','','')). +assert(gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only')). +assert(gv_attr(quantum,[graph],[double],'0.0','0.0','')). +assert(gv_attr(rank,[subgraph],[rankType],'','','dot only')). +assert(gv_attr(rankdir,[graph],[rankdir],'TB','','dot only')). +assert(gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only')). +assert(gv_attr(ratio,[graph],[double,string],'','','')). +assert(gv_attr(rects,[node],[rect],'','','write only')). +assert(gv_attr(regular,[node],[bool],false,'','')). +assert(gv_attr(remincross,[graph],[bool],true,'','dot only')). +assert(gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only')). +assert(gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only')). +assert(gv_attr(root,[graph,node],[string,bool],'(graphs)false(nodes)','','circo, twopi only')). +assert(gv_attr(rotate,[graph],[int],'0','','')). +assert(gv_attr(rotation,[graph],[double],'0','','sfdp only')). +assert(gv_attr(samehead,[edge],[string],'','','dot only')). +assert(gv_attr(sametail,[edge],[string],'','','dot only')). +assert(gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','')). +assert(gv_attr(scale,[graph],[double,point],'','','not dot')). +assert(gv_attr(searchsize,[graph],[int],'30','','dot only')). +assert(gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot')). +assert(gv_attr(shape,[node],[shape],ellipse,'','')). +assert(gv_attr(shapefile,[node],[string],'','','')). +assert(gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only')). +assert(gv_attr(sides,[node],[int],'4','0','')). +assert(gv_attr(size,[graph],[double,point],'','','')). +assert(gv_attr(skew,[node],[double],'0.0','-100.0','')). +assert(gv_attr(smoothing,[graph],[smoothType],'\"none\"','','sfdp only')). +assert(gv_attr(sortv,[cluster,graph,node],[int],'0','0','')). +assert(gv_attr(splines,[graph],[bool,string],'','','')). +assert(gv_attr(start,[graph],[startType],'','','fdp, neato only')). +assert(gv_attr(style,[cluster,edge,graph,node],[style],'','','')). +assert(gv_attr(stylesheet,[graph],[string],'','','svg only')). +assert(gv_attr(tailURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(tail_lp,[edge],[point],'','','write only')). +assert(gv_attr(tailclip,[edge],[bool],true,'','')). +assert(gv_attr(tailhref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(taillabel,[edge],[lblString],'','','')). +assert(gv_attr(tailport,[edge],[portPos],center,'','')). +assert(gv_attr(tailtarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(target,[cluster,edge,graph,node],[escString,string],_,'','svg, map only')). +assert(gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only')). +assert(gv_attr(truecolor,[graph],[bool],'','','bitmap output only')). +assert(gv_attr(vertices,[node],[pointList],'','','write only')). +assert(gv_attr(viewport,[graph],[viewPort],'','','')). +assert(gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot')). +assert(gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','')). +assert(gv_attr(width,[node],[double],'0.75','0.01','')). +assert(gv_attr(xdotversion,[graph],[string],'','','xdot only')). +assert(gv_attr(xlabel,[edge,node],[lblString],'','','')). +assert(gv_attr(xlp,[edge,node],[point],'','','write only')). +assert(gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','')). diff --git a/gv_color.log b/gv_color.log new file mode 100644 index 0000000..23d6cdf --- /dev/null +++ b/gv_color.log @@ -0,0 +1,802 @@ +assert(gv_color(x11,aliceblue)). +assert(gv_color(x11,antiquewhite)). +assert(gv_color(x11,antiquewhite1)). +assert(gv_color(x11,antiquewhite2)). +assert(gv_color(x11,antiquewhite3)). +assert(gv_color(x11,antiquewhite4)). +assert(gv_color(x11,aquamarine)). +assert(gv_color(x11,aquamarine1)). +assert(gv_color(x11,aquamarine2)). +assert(gv_color(x11,aquamarine3)). +assert(gv_color(x11,aquamarine4)). +assert(gv_color(x11,azure)). +assert(gv_color(x11,azure1)). +assert(gv_color(x11,azure2)). +assert(gv_color(x11,azure3)). +assert(gv_color(x11,azure4)). +assert(gv_color(x11,beige)). +assert(gv_color(x11,bisque)). +assert(gv_color(x11,bisque1)). +assert(gv_color(x11,bisque2)). +assert(gv_color(x11,bisque3)). +assert(gv_color(x11,bisque4)). +assert(gv_color(x11,black)). +assert(gv_color(x11,blanchedalmond)). +assert(gv_color(x11,blue)). +assert(gv_color(x11,blue1)). +assert(gv_color(x11,blue2)). +assert(gv_color(x11,blue3)). +assert(gv_color(x11,blue4)). +assert(gv_color(x11,blueviolet)). +assert(gv_color(x11,brown)). +assert(gv_color(x11,brown1)). +assert(gv_color(x11,brown2)). +assert(gv_color(x11,brown3)). +assert(gv_color(x11,brown4)). +assert(gv_color(x11,burlywood)). +assert(gv_color(x11,burlywood1)). +assert(gv_color(x11,burlywood2)). +assert(gv_color(x11,burlywood3)). +assert(gv_color(x11,burlywood4)). +assert(gv_color(x11,cadetblue)). +assert(gv_color(x11,cadetblue1)). +assert(gv_color(x11,cadetblue2)). +assert(gv_color(x11,cadetblue3)). +assert(gv_color(x11,cadetblue4)). +assert(gv_color(x11,chartreuse)). +assert(gv_color(x11,chartreuse1)). +assert(gv_color(x11,chartreuse2)). +assert(gv_color(x11,chartreuse3)). +assert(gv_color(x11,chartreuse4)). +assert(gv_color(x11,chocolate)). +assert(gv_color(x11,chocolate1)). +assert(gv_color(x11,chocolate2)). +assert(gv_color(x11,chocolate3)). +assert(gv_color(x11,chocolate4)). +assert(gv_color(x11,coral)). +assert(gv_color(x11,coral1)). +assert(gv_color(x11,coral2)). +assert(gv_color(x11,coral3)). +assert(gv_color(x11,coral4)). +assert(gv_color(x11,cornflowerblue)). +assert(gv_color(x11,cornsilk)). +assert(gv_color(x11,cornsilk1)). +assert(gv_color(x11,cornsilk2)). +assert(gv_color(x11,cornsilk3)). +assert(gv_color(x11,cornsilk4)). +assert(gv_color(x11,crimson)). +assert(gv_color(x11,cyan)). +assert(gv_color(x11,cyan1)). +assert(gv_color(x11,cyan2)). +assert(gv_color(x11,cyan3)). +assert(gv_color(x11,cyan4)). +assert(gv_color(x11,darkgoldenrod)). +assert(gv_color(x11,darkgoldenrod1)). +assert(gv_color(x11,darkgoldenrod2)). +assert(gv_color(x11,darkgoldenrod3)). +assert(gv_color(x11,darkgoldenrod4)). +assert(gv_color(x11,darkgreen)). +assert(gv_color(x11,darkkhaki)). +assert(gv_color(x11,darkolivegreen)). +assert(gv_color(x11,darkolivegreen1)). +assert(gv_color(x11,darkolivegreen2)). +assert(gv_color(x11,darkolivegreen3)). +assert(gv_color(x11,darkolivegreen4)). +assert(gv_color(x11,darkorange)). +assert(gv_color(x11,darkorange1)). +assert(gv_color(x11,darkorange2)). +assert(gv_color(x11,darkorange3)). +assert(gv_color(x11,darkorange4)). +assert(gv_color(x11,darkorchid)). +assert(gv_color(x11,darkorchid1)). +assert(gv_color(x11,darkorchid2)). +assert(gv_color(x11,darkorchid3)). +assert(gv_color(x11,darkorchid4)). +assert(gv_color(x11,darksalmon)). +assert(gv_color(x11,darkseagreen)). +assert(gv_color(x11,darkseagreen1)). +assert(gv_color(x11,darkseagreen2)). +assert(gv_color(x11,darkseagreen3)). +assert(gv_color(x11,darkseagreen4)). +assert(gv_color(x11,darkslateblue)). +assert(gv_color(x11,darkslategray)). +assert(gv_color(x11,darkslategray1)). +assert(gv_color(x11,darkslategray2)). +assert(gv_color(x11,darkslategray3)). +assert(gv_color(x11,darkslategray4)). +assert(gv_color(x11,darkslategrey)). +assert(gv_color(x11,darkturquoise)). +assert(gv_color(x11,darkviolet)). +assert(gv_color(x11,deeppink)). +assert(gv_color(x11,deeppink1)). +assert(gv_color(x11,deeppink2)). +assert(gv_color(x11,deeppink3)). +assert(gv_color(x11,deeppink4)). +assert(gv_color(x11,deepskyblue)). +assert(gv_color(x11,deepskyblue1)). +assert(gv_color(x11,deepskyblue2)). +assert(gv_color(x11,deepskyblue3)). +assert(gv_color(x11,deepskyblue4)). +assert(gv_color(x11,dimgray)). +assert(gv_color(x11,dimgrey)). +assert(gv_color(x11,dodgerblue)). +assert(gv_color(x11,dodgerblue1)). +assert(gv_color(x11,dodgerblue2)). +assert(gv_color(x11,dodgerblue3)). +assert(gv_color(x11,dodgerblue4)). +assert(gv_color(x11,firebrick)). +assert(gv_color(x11,firebrick1)). +assert(gv_color(x11,firebrick2)). +assert(gv_color(x11,firebrick3)). +assert(gv_color(x11,firebrick4)). +assert(gv_color(x11,floralwhite)). +assert(gv_color(x11,forestgreen)). +assert(gv_color(x11,gainsboro)). +assert(gv_color(x11,ghostwhite)). +assert(gv_color(x11,gold)). +assert(gv_color(x11,gold1)). +assert(gv_color(x11,gold2)). +assert(gv_color(x11,gold3)). +assert(gv_color(x11,gold4)). +assert(gv_color(x11,goldenrod)). +assert(gv_color(x11,goldenrod1)). +assert(gv_color(x11,goldenrod2)). +assert(gv_color(x11,goldenrod3)). +assert(gv_color(x11,goldenrod4)). +assert(gv_color(x11,gray)). +assert(gv_color(x11,gray0)). +assert(gv_color(x11,gray1)). +assert(gv_color(x11,gray10)). +assert(gv_color(x11,gray100)). +assert(gv_color(x11,gray11)). +assert(gv_color(x11,gray12)). +assert(gv_color(x11,gray13)). +assert(gv_color(x11,gray14)). +assert(gv_color(x11,gray15)). +assert(gv_color(x11,gray16)). +assert(gv_color(x11,gray17)). +assert(gv_color(x11,gray18)). +assert(gv_color(x11,gray19)). +assert(gv_color(x11,gray2)). +assert(gv_color(x11,gray20)). +assert(gv_color(x11,gray21)). +assert(gv_color(x11,gray22)). +assert(gv_color(x11,gray23)). +assert(gv_color(x11,gray24)). +assert(gv_color(x11,gray25)). +assert(gv_color(x11,gray26)). +assert(gv_color(x11,gray27)). +assert(gv_color(x11,gray28)). +assert(gv_color(x11,gray29)). +assert(gv_color(x11,gray3)). +assert(gv_color(x11,gray30)). +assert(gv_color(x11,gray31)). +assert(gv_color(x11,gray32)). +assert(gv_color(x11,gray33)). +assert(gv_color(x11,gray34)). +assert(gv_color(x11,gray35)). +assert(gv_color(x11,gray36)). +assert(gv_color(x11,gray37)). +assert(gv_color(x11,gray38)). +assert(gv_color(x11,gray39)). +assert(gv_color(x11,gray4)). +assert(gv_color(x11,gray40)). +assert(gv_color(x11,gray41)). +assert(gv_color(x11,gray42)). +assert(gv_color(x11,gray43)). +assert(gv_color(x11,gray44)). +assert(gv_color(x11,gray45)). +assert(gv_color(x11,gray46)). +assert(gv_color(x11,gray47)). +assert(gv_color(x11,gray48)). +assert(gv_color(x11,gray49)). +assert(gv_color(x11,gray5)). +assert(gv_color(x11,gray50)). +assert(gv_color(x11,gray51)). +assert(gv_color(x11,gray52)). +assert(gv_color(x11,gray53)). +assert(gv_color(x11,gray54)). +assert(gv_color(x11,gray55)). +assert(gv_color(x11,gray56)). +assert(gv_color(x11,gray57)). +assert(gv_color(x11,gray58)). +assert(gv_color(x11,gray59)). +assert(gv_color(x11,gray6)). +assert(gv_color(x11,gray60)). +assert(gv_color(x11,gray61)). +assert(gv_color(x11,gray62)). +assert(gv_color(x11,gray63)). +assert(gv_color(x11,gray64)). +assert(gv_color(x11,gray65)). +assert(gv_color(x11,gray66)). +assert(gv_color(x11,gray67)). +assert(gv_color(x11,gray68)). +assert(gv_color(x11,gray69)). +assert(gv_color(x11,gray7)). +assert(gv_color(x11,gray70)). +assert(gv_color(x11,gray71)). +assert(gv_color(x11,gray72)). +assert(gv_color(x11,gray73)). +assert(gv_color(x11,gray74)). +assert(gv_color(x11,gray75)). +assert(gv_color(x11,gray76)). +assert(gv_color(x11,gray77)). +assert(gv_color(x11,gray78)). +assert(gv_color(x11,gray79)). +assert(gv_color(x11,gray8)). +assert(gv_color(x11,gray80)). +assert(gv_color(x11,gray81)). +assert(gv_color(x11,gray82)). +assert(gv_color(x11,gray83)). +assert(gv_color(x11,gray84)). +assert(gv_color(x11,gray85)). +assert(gv_color(x11,gray86)). +assert(gv_color(x11,gray87)). +assert(gv_color(x11,gray88)). +assert(gv_color(x11,gray89)). +assert(gv_color(x11,gray9)). +assert(gv_color(x11,gray90)). +assert(gv_color(x11,gray91)). +assert(gv_color(x11,gray92)). +assert(gv_color(x11,gray93)). +assert(gv_color(x11,gray94)). +assert(gv_color(x11,gray95)). +assert(gv_color(x11,gray96)). +assert(gv_color(x11,gray97)). +assert(gv_color(x11,gray98)). +assert(gv_color(x11,gray99)). +assert(gv_color(x11,green)). +assert(gv_color(x11,green1)). +assert(gv_color(x11,green2)). +assert(gv_color(x11,green3)). +assert(gv_color(x11,green4)). +assert(gv_color(x11,greenyellow)). +assert(gv_color(x11,grey)). +assert(gv_color(x11,grey0)). +assert(gv_color(x11,grey1)). +assert(gv_color(x11,grey10)). +assert(gv_color(x11,grey100)). +assert(gv_color(x11,grey11)). +assert(gv_color(x11,grey12)). +assert(gv_color(x11,grey13)). +assert(gv_color(x11,grey14)). +assert(gv_color(x11,grey15)). +assert(gv_color(x11,grey16)). +assert(gv_color(x11,grey17)). +assert(gv_color(x11,grey18)). +assert(gv_color(x11,grey19)). +assert(gv_color(x11,grey2)). +assert(gv_color(x11,grey20)). +assert(gv_color(x11,grey21)). +assert(gv_color(x11,grey22)). +assert(gv_color(x11,grey23)). +assert(gv_color(x11,grey24)). +assert(gv_color(x11,grey25)). +assert(gv_color(x11,grey26)). +assert(gv_color(x11,grey27)). +assert(gv_color(x11,grey28)). +assert(gv_color(x11,grey29)). +assert(gv_color(x11,grey3)). +assert(gv_color(x11,grey30)). +assert(gv_color(x11,grey31)). +assert(gv_color(x11,grey32)). +assert(gv_color(x11,grey33)). +assert(gv_color(x11,grey34)). +assert(gv_color(x11,grey35)). +assert(gv_color(x11,grey36)). +assert(gv_color(x11,grey37)). +assert(gv_color(x11,grey38)). +assert(gv_color(x11,grey39)). +assert(gv_color(x11,grey4)). +assert(gv_color(x11,grey40)). +assert(gv_color(x11,grey41)). +assert(gv_color(x11,grey42)). +assert(gv_color(x11,grey43)). +assert(gv_color(x11,grey44)). +assert(gv_color(x11,grey45)). +assert(gv_color(x11,grey46)). +assert(gv_color(x11,grey47)). +assert(gv_color(x11,grey48)). +assert(gv_color(x11,grey49)). +assert(gv_color(x11,grey5)). +assert(gv_color(x11,grey50)). +assert(gv_color(x11,grey51)). +assert(gv_color(x11,grey52)). +assert(gv_color(x11,grey53)). +assert(gv_color(x11,grey54)). +assert(gv_color(x11,grey55)). +assert(gv_color(x11,grey56)). +assert(gv_color(x11,grey57)). +assert(gv_color(x11,grey58)). +assert(gv_color(x11,grey59)). +assert(gv_color(x11,grey6)). +assert(gv_color(x11,grey60)). +assert(gv_color(x11,grey61)). +assert(gv_color(x11,grey62)). +assert(gv_color(x11,grey63)). +assert(gv_color(x11,grey64)). +assert(gv_color(x11,grey65)). +assert(gv_color(x11,grey66)). +assert(gv_color(x11,grey67)). +assert(gv_color(x11,grey68)). +assert(gv_color(x11,grey69)). +assert(gv_color(x11,grey7)). +assert(gv_color(x11,grey70)). +assert(gv_color(x11,grey71)). +assert(gv_color(x11,grey72)). +assert(gv_color(x11,grey73)). +assert(gv_color(x11,grey74)). +assert(gv_color(x11,grey75)). +assert(gv_color(x11,grey76)). +assert(gv_color(x11,grey77)). +assert(gv_color(x11,grey78)). +assert(gv_color(x11,grey79)). +assert(gv_color(x11,grey8)). +assert(gv_color(x11,grey80)). +assert(gv_color(x11,grey81)). +assert(gv_color(x11,grey82)). +assert(gv_color(x11,grey83)). +assert(gv_color(x11,grey84)). +assert(gv_color(x11,grey85)). +assert(gv_color(x11,grey86)). +assert(gv_color(x11,grey87)). +assert(gv_color(x11,grey88)). +assert(gv_color(x11,grey89)). +assert(gv_color(x11,grey9)). +assert(gv_color(x11,grey90)). +assert(gv_color(x11,grey91)). +assert(gv_color(x11,grey92)). +assert(gv_color(x11,grey93)). +assert(gv_color(x11,grey94)). +assert(gv_color(x11,grey95)). +assert(gv_color(x11,grey96)). +assert(gv_color(x11,grey97)). +assert(gv_color(x11,grey98)). +assert(gv_color(x11,grey99)). +assert(gv_color(x11,honeydew)). +assert(gv_color(x11,honeydew1)). +assert(gv_color(x11,honeydew2)). +assert(gv_color(x11,honeydew3)). +assert(gv_color(x11,honeydew4)). +assert(gv_color(x11,hotpink)). +assert(gv_color(x11,hotpink1)). +assert(gv_color(x11,hotpink2)). +assert(gv_color(x11,hotpink3)). +assert(gv_color(x11,hotpink4)). +assert(gv_color(x11,indianred)). +assert(gv_color(x11,indianred1)). +assert(gv_color(x11,indianred2)). +assert(gv_color(x11,indianred3)). +assert(gv_color(x11,indianred4)). +assert(gv_color(x11,indigo)). +assert(gv_color(x11,invis)). +assert(gv_color(x11,ivory)). +assert(gv_color(x11,ivory1)). +assert(gv_color(x11,ivory2)). +assert(gv_color(x11,ivory3)). +assert(gv_color(x11,ivory4)). +assert(gv_color(x11,khaki)). +assert(gv_color(x11,khaki1)). +assert(gv_color(x11,khaki2)). +assert(gv_color(x11,khaki3)). +assert(gv_color(x11,khaki4)). +assert(gv_color(x11,lavender)). +assert(gv_color(x11,lavenderblush)). +assert(gv_color(x11,lavenderblush1)). +assert(gv_color(x11,lavenderblush2)). +assert(gv_color(x11,lavenderblush3)). +assert(gv_color(x11,lavenderblush4)). +assert(gv_color(x11,lawngreen)). +assert(gv_color(x11,lemonchiffon)). +assert(gv_color(x11,lemonchiffon1)). +assert(gv_color(x11,lemonchiffon2)). +assert(gv_color(x11,lemonchiffon3)). +assert(gv_color(x11,lemonchiffon4)). +assert(gv_color(x11,lightblue)). +assert(gv_color(x11,lightblue1)). +assert(gv_color(x11,lightblue2)). +assert(gv_color(x11,lightblue3)). +assert(gv_color(x11,lightblue4)). +assert(gv_color(x11,lightcoral)). +assert(gv_color(x11,lightcyan)). +assert(gv_color(x11,lightcyan1)). +assert(gv_color(x11,lightcyan2)). +assert(gv_color(x11,lightcyan3)). +assert(gv_color(x11,lightcyan4)). +assert(gv_color(x11,lightgoldenrod)). +assert(gv_color(x11,lightgoldenrod1)). +assert(gv_color(x11,lightgoldenrod2)). +assert(gv_color(x11,lightgoldenrod3)). +assert(gv_color(x11,lightgoldenrod4)). +assert(gv_color(x11,lightgoldenrodyellow)). +assert(gv_color(x11,lightgray)). +assert(gv_color(x11,lightgrey)). +assert(gv_color(x11,lightpink)). +assert(gv_color(x11,lightpink1)). +assert(gv_color(x11,lightpink2)). +assert(gv_color(x11,lightpink3)). +assert(gv_color(x11,lightpink4)). +assert(gv_color(x11,lightsalmon)). +assert(gv_color(x11,lightsalmon1)). +assert(gv_color(x11,lightsalmon2)). +assert(gv_color(x11,lightsalmon3)). +assert(gv_color(x11,lightsalmon4)). +assert(gv_color(x11,lightseagreen)). +assert(gv_color(x11,lightskyblue)). +assert(gv_color(x11,lightskyblue1)). +assert(gv_color(x11,lightskyblue2)). +assert(gv_color(x11,lightskyblue3)). +assert(gv_color(x11,lightskyblue4)). +assert(gv_color(x11,lightslateblue)). +assert(gv_color(x11,lightslategray)). +assert(gv_color(x11,lightslategrey)). +assert(gv_color(x11,lightsteelblue)). +assert(gv_color(x11,lightsteelblue1)). +assert(gv_color(x11,lightsteelblue2)). +assert(gv_color(x11,lightsteelblue3)). +assert(gv_color(x11,lightsteelblue4)). +assert(gv_color(x11,lightyellow)). +assert(gv_color(x11,lightyellow1)). +assert(gv_color(x11,lightyellow2)). +assert(gv_color(x11,lightyellow3)). +assert(gv_color(x11,lightyellow4)). +assert(gv_color(x11,limegreen)). +assert(gv_color(x11,linen)). +assert(gv_color(x11,magenta)). +assert(gv_color(x11,magenta1)). +assert(gv_color(x11,magenta2)). +assert(gv_color(x11,magenta3)). +assert(gv_color(x11,magenta4)). +assert(gv_color(x11,maroon)). +assert(gv_color(x11,maroon1)). +assert(gv_color(x11,maroon2)). +assert(gv_color(x11,maroon3)). +assert(gv_color(x11,maroon4)). +assert(gv_color(x11,mediumaquamarine)). +assert(gv_color(x11,mediumblue)). +assert(gv_color(x11,mediumorchid)). +assert(gv_color(x11,mediumorchid1)). +assert(gv_color(x11,mediumorchid2)). +assert(gv_color(x11,mediumorchid3)). +assert(gv_color(x11,mediumorchid4)). +assert(gv_color(x11,mediumpurple)). +assert(gv_color(x11,mediumpurple1)). +assert(gv_color(x11,mediumpurple2)). +assert(gv_color(x11,mediumpurple3)). +assert(gv_color(x11,mediumpurple4)). +assert(gv_color(x11,mediumseagreen)). +assert(gv_color(x11,mediumslateblue)). +assert(gv_color(x11,mediumspringgreen)). +assert(gv_color(x11,mediumturquoise)). +assert(gv_color(x11,mediumvioletred)). +assert(gv_color(x11,midnightblue)). +assert(gv_color(x11,mintcream)). +assert(gv_color(x11,mistyrose)). +assert(gv_color(x11,mistyrose1)). +assert(gv_color(x11,mistyrose2)). +assert(gv_color(x11,mistyrose3)). +assert(gv_color(x11,mistyrose4)). +assert(gv_color(x11,moccasin)). +assert(gv_color(x11,navajowhite)). +assert(gv_color(x11,navajowhite1)). +assert(gv_color(x11,navajowhite2)). +assert(gv_color(x11,navajowhite3)). +assert(gv_color(x11,navajowhite4)). +assert(gv_color(x11,navy)). +assert(gv_color(x11,navyblue)). +assert(gv_color(x11,none)). +assert(gv_color(x11,oldlace)). +assert(gv_color(x11,olivedrab)). +assert(gv_color(x11,olivedrab1)). +assert(gv_color(x11,olivedrab2)). +assert(gv_color(x11,olivedrab3)). +assert(gv_color(x11,olivedrab4)). +assert(gv_color(x11,orange)). +assert(gv_color(x11,orange1)). +assert(gv_color(x11,orange2)). +assert(gv_color(x11,orange3)). +assert(gv_color(x11,orange4)). +assert(gv_color(x11,orangered)). +assert(gv_color(x11,orangered1)). +assert(gv_color(x11,orangered2)). +assert(gv_color(x11,orangered3)). +assert(gv_color(x11,orangered4)). +assert(gv_color(x11,orchid)). +assert(gv_color(x11,orchid1)). +assert(gv_color(x11,orchid2)). +assert(gv_color(x11,orchid3)). +assert(gv_color(x11,orchid4)). +assert(gv_color(x11,palegoldenrod)). +assert(gv_color(x11,palegreen)). +assert(gv_color(x11,palegreen1)). +assert(gv_color(x11,palegreen2)). +assert(gv_color(x11,palegreen3)). +assert(gv_color(x11,palegreen4)). +assert(gv_color(x11,paleturquoise)). +assert(gv_color(x11,paleturquoise1)). +assert(gv_color(x11,paleturquoise2)). +assert(gv_color(x11,paleturquoise3)). +assert(gv_color(x11,paleturquoise4)). +assert(gv_color(x11,palevioletred)). +assert(gv_color(x11,palevioletred1)). +assert(gv_color(x11,palevioletred2)). +assert(gv_color(x11,palevioletred3)). +assert(gv_color(x11,palevioletred4)). +assert(gv_color(x11,papayawhip)). +assert(gv_color(x11,peachpuff)). +assert(gv_color(x11,peachpuff1)). +assert(gv_color(x11,peachpuff2)). +assert(gv_color(x11,peachpuff3)). +assert(gv_color(x11,peachpuff4)). +assert(gv_color(x11,peru)). +assert(gv_color(x11,pink)). +assert(gv_color(x11,pink1)). +assert(gv_color(x11,pink2)). +assert(gv_color(x11,pink3)). +assert(gv_color(x11,pink4)). +assert(gv_color(x11,plum)). +assert(gv_color(x11,plum1)). +assert(gv_color(x11,plum2)). +assert(gv_color(x11,plum3)). +assert(gv_color(x11,plum4)). +assert(gv_color(x11,powderblue)). +assert(gv_color(x11,purple)). +assert(gv_color(x11,purple1)). +assert(gv_color(x11,purple2)). +assert(gv_color(x11,purple3)). +assert(gv_color(x11,purple4)). +assert(gv_color(x11,red)). +assert(gv_color(x11,red1)). +assert(gv_color(x11,red2)). +assert(gv_color(x11,red3)). +assert(gv_color(x11,red4)). +assert(gv_color(x11,rosybrown)). +assert(gv_color(x11,rosybrown1)). +assert(gv_color(x11,rosybrown2)). +assert(gv_color(x11,rosybrown3)). +assert(gv_color(x11,rosybrown4)). +assert(gv_color(x11,royalblue)). +assert(gv_color(x11,royalblue1)). +assert(gv_color(x11,royalblue2)). +assert(gv_color(x11,royalblue3)). +assert(gv_color(x11,royalblue4)). +assert(gv_color(x11,saddlebrown)). +assert(gv_color(x11,salmon)). +assert(gv_color(x11,salmon1)). +assert(gv_color(x11,salmon2)). +assert(gv_color(x11,salmon3)). +assert(gv_color(x11,salmon4)). +assert(gv_color(x11,sandybrown)). +assert(gv_color(x11,seagreen)). +assert(gv_color(x11,seagreen1)). +assert(gv_color(x11,seagreen2)). +assert(gv_color(x11,seagreen3)). +assert(gv_color(x11,seagreen4)). +assert(gv_color(x11,seashell)). +assert(gv_color(x11,seashell1)). +assert(gv_color(x11,seashell2)). +assert(gv_color(x11,seashell3)). +assert(gv_color(x11,seashell4)). +assert(gv_color(x11,sienna)). +assert(gv_color(x11,sienna1)). +assert(gv_color(x11,sienna2)). +assert(gv_color(x11,sienna3)). +assert(gv_color(x11,sienna4)). +assert(gv_color(x11,skyblue)). +assert(gv_color(x11,skyblue1)). +assert(gv_color(x11,skyblue2)). +assert(gv_color(x11,skyblue3)). +assert(gv_color(x11,skyblue4)). +assert(gv_color(x11,slateblue)). +assert(gv_color(x11,slateblue1)). +assert(gv_color(x11,slateblue2)). +assert(gv_color(x11,slateblue3)). +assert(gv_color(x11,slateblue4)). +assert(gv_color(x11,slategray)). +assert(gv_color(x11,slategray1)). +assert(gv_color(x11,slategray2)). +assert(gv_color(x11,slategray3)). +assert(gv_color(x11,slategray4)). +assert(gv_color(x11,slategrey)). +assert(gv_color(x11,snow)). +assert(gv_color(x11,snow1)). +assert(gv_color(x11,snow2)). +assert(gv_color(x11,snow3)). +assert(gv_color(x11,snow4)). +assert(gv_color(x11,springgreen)). +assert(gv_color(x11,springgreen1)). +assert(gv_color(x11,springgreen2)). +assert(gv_color(x11,springgreen3)). +assert(gv_color(x11,springgreen4)). +assert(gv_color(x11,steelblue)). +assert(gv_color(x11,steelblue1)). +assert(gv_color(x11,steelblue2)). +assert(gv_color(x11,steelblue3)). +assert(gv_color(x11,steelblue4)). +assert(gv_color(x11,tan)). +assert(gv_color(x11,tan1)). +assert(gv_color(x11,tan2)). +assert(gv_color(x11,tan3)). +assert(gv_color(x11,tan4)). +assert(gv_color(x11,thistle)). +assert(gv_color(x11,thistle1)). +assert(gv_color(x11,thistle2)). +assert(gv_color(x11,thistle3)). +assert(gv_color(x11,thistle4)). +assert(gv_color(x11,tomato)). +assert(gv_color(x11,tomato1)). +assert(gv_color(x11,tomato2)). +assert(gv_color(x11,tomato3)). +assert(gv_color(x11,tomato4)). +assert(gv_color(x11,transparent)). +assert(gv_color(x11,turquoise)). +assert(gv_color(x11,turquoise1)). +assert(gv_color(x11,turquoise2)). +assert(gv_color(x11,turquoise3)). +assert(gv_color(x11,turquoise4)). +assert(gv_color(x11,violet)). +assert(gv_color(x11,violetred)). +assert(gv_color(x11,violetred1)). +assert(gv_color(x11,violetred2)). +assert(gv_color(x11,violetred3)). +assert(gv_color(x11,violetred4)). +assert(gv_color(x11,wheat)). +assert(gv_color(x11,wheat1)). +assert(gv_color(x11,wheat2)). +assert(gv_color(x11,wheat3)). +assert(gv_color(x11,wheat4)). +assert(gv_color(x11,white)). +assert(gv_color(x11,whitesmoke)). +assert(gv_color(x11,yellow)). +assert(gv_color(x11,yellow1)). +assert(gv_color(x11,yellow2)). +assert(gv_color(x11,yellow3)). +assert(gv_color(x11,yellow4)). +assert(gv_color(x11,yellowgreen)). +assert(gv_color(svg,aliceblue)). +assert(gv_color(svg,antiquewhite)). +assert(gv_color(svg,aqua)). +assert(gv_color(svg,aquamarine)). +assert(gv_color(svg,azure)). +assert(gv_color(svg,beige)). +assert(gv_color(svg,bisque)). +assert(gv_color(svg,black)). +assert(gv_color(svg,blanchedalmond)). +assert(gv_color(svg,blue)). +assert(gv_color(svg,blueviolet)). +assert(gv_color(svg,brown)). +assert(gv_color(svg,burlywood)). +assert(gv_color(svg,cadetblue)). +assert(gv_color(svg,chartreuse)). +assert(gv_color(svg,chocolate)). +assert(gv_color(svg,coral)). +assert(gv_color(svg,cornflowerblue)). +assert(gv_color(svg,cornsilk)). +assert(gv_color(svg,crimson)). +assert(gv_color(svg,cyan)). +assert(gv_color(svg,darkblue)). +assert(gv_color(svg,darkcyan)). +assert(gv_color(svg,darkgoldenrod)). +assert(gv_color(svg,darkgray)). +assert(gv_color(svg,darkgreen)). +assert(gv_color(svg,darkgrey)). +assert(gv_color(svg,darkkhaki)). +assert(gv_color(svg,darkmagenta)). +assert(gv_color(svg,darkolivegreen)). +assert(gv_color(svg,darkorange)). +assert(gv_color(svg,darkorchid)). +assert(gv_color(svg,darkred)). +assert(gv_color(svg,darksalmon)). +assert(gv_color(svg,darkseagreen)). +assert(gv_color(svg,darkslateblue)). +assert(gv_color(svg,darkslategray)). +assert(gv_color(svg,darkslategrey)). +assert(gv_color(svg,darkturquoise)). +assert(gv_color(svg,darkviolet)). +assert(gv_color(svg,deeppink)). +assert(gv_color(svg,deepskyblue)). +assert(gv_color(svg,dimgray)). +assert(gv_color(svg,dimgrey)). +assert(gv_color(svg,dodgerblue)). +assert(gv_color(svg,firebrick)). +assert(gv_color(svg,floralwhite)). +assert(gv_color(svg,forestgreen)). +assert(gv_color(svg,fuchsia)). +assert(gv_color(svg,gainsboro)). +assert(gv_color(svg,ghostwhite)). +assert(gv_color(svg,gold)). +assert(gv_color(svg,goldenrod)). +assert(gv_color(svg,gray)). +assert(gv_color(svg,grey)). +assert(gv_color(svg,green)). +assert(gv_color(svg,greenyellow)). +assert(gv_color(svg,honeydew)). +assert(gv_color(svg,hotpink)). +assert(gv_color(svg,indianred)). +assert(gv_color(svg,indigo)). +assert(gv_color(svg,ivory)). +assert(gv_color(svg,khaki)). +assert(gv_color(svg,lavender)). +assert(gv_color(svg,lavenderblush)). +assert(gv_color(svg,lawngreen)). +assert(gv_color(svg,lemonchiffon)). +assert(gv_color(svg,lightblue)). +assert(gv_color(svg,lightcoral)). +assert(gv_color(svg,lightcyan)). +assert(gv_color(svg,lightgoldenrodyellow)). +assert(gv_color(svg,lightgray)). +assert(gv_color(svg,lightgreen)). +assert(gv_color(svg,lightgrey)). +assert(gv_color(svg,lightpink)). +assert(gv_color(svg,lightsalmon)). +assert(gv_color(svg,lightseagreen)). +assert(gv_color(svg,lightskyblue)). +assert(gv_color(svg,lightslategray)). +assert(gv_color(svg,lightslategrey)). +assert(gv_color(svg,lightsteelblue)). +assert(gv_color(svg,lightyellow)). +assert(gv_color(svg,lime)). +assert(gv_color(svg,limegreen)). +assert(gv_color(svg,linen)). +assert(gv_color(svg,magenta)). +assert(gv_color(svg,maroon)). +assert(gv_color(svg,mediumaquamarine)). +assert(gv_color(svg,mediumblue)). +assert(gv_color(svg,mediumorchid)). +assert(gv_color(svg,mediumpurple)). +assert(gv_color(svg,mediumseagreen)). +assert(gv_color(svg,mediumslateblue)). +assert(gv_color(svg,mediumspringgreen)). +assert(gv_color(svg,mediumturquoise)). +assert(gv_color(svg,mediumvioletred)). +assert(gv_color(svg,midnightblue)). +assert(gv_color(svg,mintcream)). +assert(gv_color(svg,mistyrose)). +assert(gv_color(svg,moccasin)). +assert(gv_color(svg,navajowhite)). +assert(gv_color(svg,navy)). +assert(gv_color(svg,oldlace)). +assert(gv_color(svg,olive)). +assert(gv_color(svg,olivedrab)). +assert(gv_color(svg,orange)). +assert(gv_color(svg,orangered)). +assert(gv_color(svg,orchid)). +assert(gv_color(svg,palegoldenrod)). +assert(gv_color(svg,palegreen)). +assert(gv_color(svg,paleturquoise)). +assert(gv_color(svg,palevioletred)). +assert(gv_color(svg,papayawhip)). +assert(gv_color(svg,peachpuff)). +assert(gv_color(svg,peru)). +assert(gv_color(svg,pink)). +assert(gv_color(svg,plum)). +assert(gv_color(svg,powderblue)). +assert(gv_color(svg,purple)). +assert(gv_color(svg,red)). +assert(gv_color(svg,rosybrown)). +assert(gv_color(svg,royalblue)). +assert(gv_color(svg,saddlebrown)). +assert(gv_color(svg,salmon)). +assert(gv_color(svg,sandybrown)). +assert(gv_color(svg,seagreen)). +assert(gv_color(svg,seashell)). +assert(gv_color(svg,sienna)). +assert(gv_color(svg,silver)). +assert(gv_color(svg,skyblue)). +assert(gv_color(svg,slateblue)). +assert(gv_color(svg,slategray)). +assert(gv_color(svg,slategrey)). +assert(gv_color(svg,snow)). +assert(gv_color(svg,springgreen)). +assert(gv_color(svg,steelblue)). +assert(gv_color(svg,tan)). +assert(gv_color(svg,teal)). +assert(gv_color(svg,thistle)). +assert(gv_color(svg,tomato)). +assert(gv_color(svg,turquoise)). +assert(gv_color(svg,violet)). +assert(gv_color(svg,wheat)). +assert(gv_color(svg,white)). +assert(gv_color(svg,whitesmoke)). +assert(gv_color(svg,yellow)). +assert(gv_color(svg,yellowgreen)). ``` 118: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ cab2231 å’Œå˜åŠ¨å 008c5e6  [back to content](#compare) ``` diff diff --git a/prolog/gv/gv_attrs.log b/prolog/gv/gv_attrs.log new file mode 100644 index 0000000..a9c6010 --- /dev/null +++ b/prolog/gv/gv_attrs.log @@ -0,0 +1,169 @@ +assert(gv_attr('Damping',[graph],[double],'0.99','0.0','neato only')). +assert(gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only')). +assert(gv_attr('URL',[cluster,edge,graph,node],[escString],_,'','svg, postscript, map only')). +assert(gv_attr('_background',[graph],[string],_,'','')). +assert(gv_attr(area,[cluster,node],[double],'1.0','0','patchwork only')). +assert(gv_attr(arrowhead,[edge],[arrowType],normal,'','')). +assert(gv_attr(arrowsize,[edge],[double],'1.0','0.0','')). +assert(gv_attr(arrowtail,[edge],[arrowType],normal,'','')). +assert(gv_attr(bb,[graph],[rect],'','','write only')). +assert(gv_attr(bgcolor,[cluster,graph],[color,colorList],_,'','')). +assert(gv_attr(center,[graph],[bool],false,'','')). +assert(gv_attr(charset,[graph],[string],'\"UTF-8\"','','')). +assert(gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only')). +assert(gv_attr(color,[cluster,edge,node],[color,colorList],black,'','')). +assert(gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','')). +assert(gv_attr(comment,[edge,graph,node],[string],'','','')). +assert(gv_attr(compound,[graph],[bool],false,'','dot only')). +assert(gv_attr(concentrate,[graph],[bool],false,'','')). +assert(gv_attr(constraint,[edge],[bool],true,'','dot only')). +assert(gv_attr(decorate,[edge],[bool],false,'','')). +assert(gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only')). +assert(gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only')). +assert(gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only')). +assert(gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','')). +assert(gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only')). +assert(gv_attr(distortion,[node],[double],'0.0','-100.0','')). +assert(gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only')). +assert(gv_attr(edgeURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(edgehref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(edgetarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only')). +assert(gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot')). +assert(gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','')). +assert(gv_attr(fixedsize,[node],[bool,string],false,'','')). +assert(gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','')). +assert(gv_attr(fontname,[cluster,edge,graph,node],[string],'\"Times-Roman\"','','')). +assert(gv_attr(fontnames,[graph],[string],'','','svg only')). +assert(gv_attr(fontpath,[graph],[string],'system-dependent','','')). +assert(gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','')). +assert(gv_attr(forcelabels,[graph],[bool],true,'','')). +assert(gv_attr(gradientangle,[cluster,graph,node],[int],'','','')). +assert(gv_attr(group,[node],[string],'','','dot only')). +assert(gv_attr(headURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(head_lp,[edge],[point],'','','write only')). +assert(gv_attr(headclip,[edge],[bool],true,'','')). +assert(gv_attr(headhref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(headlabel,[edge],[lblString],'','','')). +assert(gv_attr(headport,[edge],[portPos],center,'','')). +assert(gv_attr(headtarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(height,[node],[double],'0.5','0.02','')). +assert(gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')). +assert(gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')). +assert(gv_attr(image,[node],[string],'','','')). +assert(gv_attr(imagepath,[graph],[string],'','','')). +assert(gv_attr(imagescale,[node],[bool,string],false,'','')). +assert(gv_attr(inputscale,[graph],[double],_,'','fdp, neato only')). +assert(gv_attr(label,[cluster,edge,graph,node],[lblString],'\"\\\\N\" (nodes)\"\" (otherwise)','','')). +assert(gv_attr(labelURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(label_scheme,[graph],[int],'0','0','sfdp only')). +assert(gv_attr(labelangle,[edge],[double],'-25.0','-180.0','')). +assert(gv_attr(labeldistance,[edge],[double],'1.0','0.0','')). +assert(gv_attr(labelfloat,[edge],[bool],false,'','')). +assert(gv_attr(labelfontcolor,[edge],[color],black,'','')). +assert(gv_attr(labelfontname,[edge],[string],'\"Times-Roman\"','','')). +assert(gv_attr(labelfontsize,[edge],[double],'14.0','1.0','')). +assert(gv_attr(labelhref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(labeljust,[cluster,graph],[string],'\"c\"','','')). +assert(gv_attr(labelloc,[cluster,graph,node],[string],'\"t\"(clusters)\"b\"(root graphs)\"c\"(nodes)','','')). +assert(gv_attr(labeltarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(landscape,[graph],[bool],false,'','')). +assert(gv_attr(layer,[cluster,edge,node],[layerRange],'','','')). +assert(gv_attr(layerlistsep,[graph],[string],'\",\"','','')). +assert(gv_attr(layers,[graph],[layerList],'','','')). +assert(gv_attr(layerselect,[graph],[layerRange],'','','')). +assert(gv_attr(layersep,[graph],[string],'\" :\\\\t\"','','')). +assert(gv_attr(layout,[graph],[string],'','','')). +assert(gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only')). +assert(gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only')). +assert(gv_attr(levelsgap,[graph],[double],'0.0','','neato only')). +assert(gv_attr(lhead,[edge],[string],'','','dot only')). +assert(gv_attr(lheight,[cluster,graph],[double],'','','write only')). +assert(gv_attr(lp,[cluster,edge,graph],[point],'','','write only')). +assert(gv_attr(ltail,[edge],[string],'','','dot only')). +assert(gv_attr(lwidth,[cluster,graph],[double],'','','write only')). +assert(gv_attr(margin,[cluster,graph,node],[double,point],'','','')). +assert(gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only')). +assert(gv_attr(mclimit,[graph],[double],'1.0','','dot only')). +assert(gv_attr(mindist,[graph],[double],'1.0','0.0','circo only')). +assert(gv_attr(minlen,[edge],[int],'1','0','dot only')). +assert(gv_attr(mode,[graph],[string],major,'','neato only')). +assert(gv_attr(model,[graph],[string],shortpath,'','neato only')). +assert(gv_attr(mosek,[graph],[bool],false,'','neato only')). +assert(gv_attr(nodesep,[graph],[double],'0.25','0.02','')). +assert(gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','')). +assert(gv_attr(normalize,[graph],[double,bool],false,'','not dot')). +assert(gv_attr(notranslate,[graph],[bool],false,'','neato only')). +assert(gv_attr('nslimit nslimit1',[graph],[double],'','','dot only')). +assert(gv_attr(ordering,[graph,node],[string],'','','dot only')). +assert(gv_attr(orientation,[node],[double],'0.0','360.0','')). +assert(gv_attr(orientation,[graph],[string],'','','')). +assert(gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','')). +assert(gv_attr(overlap,[graph],[string,bool],true,'','not dot')). +assert(gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only')). +assert(gv_attr(overlap_shrink,[graph],[bool],true,'','prism only')). +assert(gv_attr(pack,[graph],[bool,int],false,'','')). +assert(gv_attr(packmode,[graph],[packMode],node,'','')). +assert(gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','')). +assert(gv_attr(page,[graph],[double,point],'','','')). +assert(gv_attr(pagedir,[graph],[pagedir],'BL','','')). +assert(gv_attr(pencolor,[cluster],[color],black,'','')). +assert(gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','')). +assert(gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','')). +assert(gv_attr(pin,[node],[bool],false,'','fdp, neato only')). +assert(gv_attr(pos,[edge,node],[point,splineType],'','','')). +assert(gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only')). +assert(gv_attr(quantum,[graph],[double],'0.0','0.0','')). +assert(gv_attr(rank,[subgraph],[rankType],'','','dot only')). +assert(gv_attr(rankdir,[graph],[rankdir],'TB','','dot only')). +assert(gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only')). +assert(gv_attr(ratio,[graph],[double,string],'','','')). +assert(gv_attr(rects,[node],[rect],'','','write only')). +assert(gv_attr(regular,[node],[bool],false,'','')). +assert(gv_attr(remincross,[graph],[bool],true,'','dot only')). +assert(gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only')). +assert(gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only')). +assert(gv_attr(root,[graph,node],[string,bool],'(graphs)false(nodes)','','circo, twopi only')). +assert(gv_attr(rotate,[graph],[int],'0','','')). +assert(gv_attr(rotation,[graph],[double],'0','','sfdp only')). +assert(gv_attr(samehead,[edge],[string],'','','dot only')). +assert(gv_attr(sametail,[edge],[string],'','','dot only')). +assert(gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','')). +assert(gv_attr(scale,[graph],[double,point],'','','not dot')). +assert(gv_attr(searchsize,[graph],[int],'30','','dot only')). +assert(gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot')). +assert(gv_attr(shape,[node],[shape],ellipse,'','')). +assert(gv_attr(shapefile,[node],[string],'','','')). +assert(gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only')). +assert(gv_attr(sides,[node],[int],'4','0','')). +assert(gv_attr(size,[graph],[double,point],'','','')). +assert(gv_attr(skew,[node],[double],'0.0','-100.0','')). +assert(gv_attr(smoothing,[graph],[smoothType],'\"none\"','','sfdp only')). +assert(gv_attr(sortv,[cluster,graph,node],[int],'0','0','')). +assert(gv_attr(splines,[graph],[bool,string],'','','')). +assert(gv_attr(start,[graph],[startType],'','','fdp, neato only')). +assert(gv_attr(style,[cluster,edge,graph,node],[style],'','','')). +assert(gv_attr(stylesheet,[graph],[string],'','','svg only')). +assert(gv_attr(tailURL,[edge],[escString],'','','svg, map only')). +assert(gv_attr(tail_lp,[edge],[point],'','','write only')). +assert(gv_attr(tailclip,[edge],[bool],true,'','')). +assert(gv_attr(tailhref,[edge],[escString],'','','svg, map only')). +assert(gv_attr(taillabel,[edge],[lblString],'','','')). +assert(gv_attr(tailport,[edge],[portPos],center,'','')). +assert(gv_attr(tailtarget,[edge],[escString],_,'','svg, map only')). +assert(gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only')). +assert(gv_attr(target,[cluster,edge,graph,node],[escString,string],_,'','svg, map only')). +assert(gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only')). +assert(gv_attr(truecolor,[graph],[bool],'','','bitmap output only')). +assert(gv_attr(vertices,[node],[pointList],'','','write only')). +assert(gv_attr(viewport,[graph],[viewPort],'','','')). +assert(gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot')). +assert(gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','')). +assert(gv_attr(width,[node],[double],'0.75','0.01','')). +assert(gv_attr(xdotversion,[graph],[string],'','','xdot only')). +assert(gv_attr(xlabel,[edge,node],[lblString],'','','')). +assert(gv_attr(xlp,[edge,node],[point],'','','write only')). +assert(gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','')). ``` 119: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 008c5e6 å’Œå˜åŠ¨å dba5c72  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index edfd45f..ed03c94 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.15'). +version('0.0.16'). ``` 120: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ dba5c72 å’Œå˜åŠ¨å eff64ee  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index ed03c94..203cbfc 100644 --- a/pack.pl +++ b/pack.pl @@ -6,4 +6,4 @@ name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.16'). +version('0.0.17'). ``` 121: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ eff64ee å’Œå˜åŠ¨å 89eb423  [back to content](#compare) ``` diff diff --git a/test/debug.pl b/test/debug.pl deleted file mode 100644 index b0f85ea..0000000 --- a/test/debug.pl +++ /dev/null @@ -1,15 +0,0 @@ -:- use_module(library(ansi_term)). -:- use_module(library(prolog_pack)). - -pack_ensure_removed(Pack):- - pack_property(Pack, _), !, - pack_remove(Pack). -pack_ensure_removed(_). - -test:- - pack_ensure_removed(plGraphViz), - source_file(test, ThisFile), - file_directory_name(ThisFile, ThisDirectory), - assert(user:file_search_path(gvTest, ThisDirectory)), - assert(user:file_search_path(library, gvTest('../prolog'))). -:- test. ``` 122: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 89eb423 å’Œå˜åŠ¨å 2346997  [back to content](#compare) ``` diff diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl index c6508a3..b0dbd69 100644 --- a/prolog/gv/gv_attr_type.pl +++ b/prolog/gv/gv_attr_type.pl @@ -198,7 +198,7 @@ double(N) -- %! doubleList(+Doubles:list(float))// . doubleList(L) -- - '*'(double, L, [separator(colon)]). + *(double, L, [separator(colon)]). @@ -292,7 +292,7 @@ input_changeable(true) -- \"!\". %! pointList(+Points:list(compound))// . pointList(Points) -- - '*'(point, Points, []). + *(point, Points, []). diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl index bff4257..5de2ff1 100644 --- a/prolog/gv/gv_graph.pl +++ b/prolog/gv/gv_graph.pl @@ -160,13 +160,13 @@ gv_graph(G1, I) -- \"}\\n\". gv_edge_statements(I, Dir, L) -- - '*'(gv_edge_statement(I, Dir), L, []), !. + *(gv_edge_statement(I, Dir), L, []), !. gv_node_statements(I, L) -- - '*'(gv_node_statement(I), L, []), !. + *(gv_node_statement(I), L, []), !. gv_ranked_node_collections(I, L) -- - '*'(gv_ranked_node_collection(I), L, []), !. + *(gv_ranked_node_collection(I), L, []), !. diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index 18cdf7a..033d0b9 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -146,7 +146,7 @@ gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -- \";\\n\", % Vertice statements. - '*'( + *( gv_node_statement(NewI), [Rank_V_Term|Content_V_Terms], [] @@ -168,7 +168,7 @@ gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -- %! )// is det. gv_attrs(Kind, L) -- - bracketed(square, '*'(gv_attr(Kind), L, [])). + bracketed(square, *(gv_attr(Kind), L, [])). %! gv_attr( %! +Context:oneof([edge,graph,node]), diff --git a/test/test.pl b/test/test.pl index 898c04e..ee92ae6 100644 --- a/test/test.pl +++ b/test/test.pl @@ -1,5 +1,3 @@ -:- ensure_loaded(debug). - %/graph :- use_module(library(graph/build_export_graph)). %/gv ``` 123: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 2346997 å’Œå˜åŠ¨å d22d50e  [back to content](#compare) ``` diff diff --git a/.gitmodules b/.gitmodules deleted file mode 100644 index 26ddd86..0000000 --- a/.gitmodules +++ /dev/null @@ -1,9 +0,0 @@ -[submodule \"Prolog-Library-Collection\"] - path = Prolog-Library-Collection - url = https://github.com/wouterbeek/Prolog-Library-Collection.git -[submodule \"plHtml\"] - path = plHtml - url = https://github.com/wouterbeek/plHtml.git -[submodule \"plUri\"] - path = plUri - url = https://github.com/wouterbeek/plUri.git diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl index b031d16..507e8ad 100644 --- a/prolog/graph/build_export_graph.pl +++ b/prolog/graph/build_export_graph.pl @@ -1,6 +1,8 @@ :- module( build_export_graph, [ + build_export_graph/2, % +Graph:compound + % -ExportGraph:compound build_export_graph/3 % +Graph:compound % -ExportGraph:compound % +Options:list(compound) @@ -49,7 +51,7 @@ Vertex coordinates: --- @author Wouter Beek -@version 2015/07 +@version 2015/07, 2015/09 */ :- use_module(library(apply)). @@ -110,6 +112,11 @@ is_meta(vertex_uri). +%! build_export_graph(+Graph:compound, -ExportGraph:compound) is det. + +build_export_graph(G, ExportG):- + build_export_graph(G, ExportG, []). + %! build_export_graph( %! +Graph:compound, %! -ExportGraph:compound, ``` 124: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ d22d50e å’Œå˜åŠ¨å e64cc35  [back to content](#compare) ``` diff diff --git a/install b/install new file mode 100755 index 0000000..849699b --- /dev/null +++ b/install @@ -0,0 +1,218 @@ +#!/usr/bin/env swipl + +:- module(install, []). + +/**  Install + +Let's do this! + +@author Wouter Beek +@version 2015/09/23 +*/ + +:- use_module(library(filesex)). +:- use_module(library(lists)). +:- use_module(library(option)). +:- use_module(library(optparse)). +:- use_module(library(prolog_pack)). +:- use_module(library(uri)). + +:- dynamic(author/2). +:- dynamic(download/1). +:- dynamic(home/1). +:- dynamic(maintainer/2). +:- dynamic(name/1). +:- dynamic(packager/2). +:- dynamic(requires/1). +:- dynamic(title/1). +:- dynamic(version/1). + +:- initialization(install). + + + + + +%! install is det. + +install:- + OptSpec = [ + [ % Github + default(true), + help('Whether Github should be used to install requirements.'), + longflags([git,github]), + opt(github), + type(boolean) + ], + [ % Help + default(false), + help('Display help about the install command.'), + longflags([help]), + opt(help), + shortflags([h]), + type(boolean) + ], + [ % Pack + default(true), + help('Whether the Prolog Pack system is used for installing requirements.'), + longflags([pack]), + opt(pack), + type(boolean) + ], + [ % Parent + default(false), + help('Whether existing installations in the parent directory should be taken into account.'), + longflags([parent]), + opt(parent), + type(boolean) + ] + ], + opt_arguments(OptSpec, Opts, _), + + % Process help + (option(help(true), Opts) - show_help(OptSpec) ; install(Opts)). + + +%! install(+Options:list(compound)) is det. + +install(Opts):- + source_file(install, File), + file_directory_name(File, AppDir), + install(AppDir, AppDir, Opts), + clean_meta, + halt. + + +%! install( +%! +ApplicationDirectory:atom, +%! +LibraryDirectory:atom, +%! +Options:list(compound) +%! ) is det. + +install(AppDir, LibDir, Opts):- + % The pack information is taken from the library directory. + % This allows application requirements to be installed recursively. + directory_file_path(LibDir, 'pack.pl', Info), + access_file(Info, read), + load_meta(Info), + + % Set this library's search path. + name(Name), + assert(user:file_search_path(Name, LibDir)), + + % Pull in the required libraries. + forall(requires(LibName), install_required(AppDir, LibName, Opts)), !. +install(_, _, _):- + msg_warning('Installation failed.'). + + +%! install_required( +%! +ApplicationDirectory:atom, +%! +LibName:atom, +%! +Options:list(compound) +%! ) is det. + +% Developer's delight: library already available from parent directory. +install_required(AppDir, LibName, Opts):- + option(parent(true), Opts), + + file_directory_name(AppDir, ParentDir), + append_directories(ParentDir, LibName, LibDir), + exists_directory(LibDir), !, + + % Print message. + atomic_list_concat(['Library ',LibName,' already installed.'], Msg), + msg_success(Msg). +% Install through the Prolog Pack system. +install_required(_, LibName, Opts):- + option(pack(true), Opts), + + prolog_pack:query_pack_server(search(LibName), Result,[]), + Result = true([pack(LibName,_,_,_,_)]), !, + pack_install(LibName). +% Install through Github. +install_required(AppDir, LibName, Opts):- + option(github(true), Opts), + + % Remove the old version of the library. + append_directories(AppDir, LibName, LibDir), + (exists_directory(LibDir) - delete_directory_and_contents(LibDir) ; true), + + % Git clone the new version of the library. + atomic_list_concat(['',wouterbeek,LibName], /, Path), + uri_components(Iri, uri_components(https,'github.com',Path,_,_)), + prolog_pack:run_process(path(git), [clone,Iri,LibDir], []), + + % Print message. + atomic_list_concat(['Library ',LibName,' was installed.'], Msg), + msg_success(Msg), + + % Recurse + install(AppDir, LibDir, Opts), !. +% Oops! +install_required(_, LibName, _):- + atomic_list_concat( + ['Installation of library ',LibName,' failed.'], + Msg + ), + msg_warning(Msg). + + + + + +% HELPERS % + +%! append_directories(+Dir1:atom, +Dir2:atom, -Dir3:atom) is det. + +append_directories(Dir1, Dir2, Dir3):- + atomic_list_concat(Subdirs1, /, Dir1), + atomic_list_concat(Subdirs2, /, Dir2), + append(Subdirs1, Subdirs2, Subdirs3), + atomic_list_concat(Subdirs3, /, Dir3). + + + +%! clean_meta is det. + +clean_meta:- + retractall(author/2), + retractall(download/1), + retractall(home/1), + retractall(maintainer/2), + retractall(name/1), + retractall(packager/2), + retractall(requires/1), + retractall(title/1), + retractall(version/1). + + + +%! show_help(+OptionSpecification:list(compound)) is det. + +show_help(OptSpec):- + opt_help(OptSpec, Help), + format(user_output, '~a\\n', [Help]), + halt. + + + +%! load_meta(+File:atom) is det. + +load_meta(File):- + clean_meta, + ensure_loaded(File). + + + +%! msg_success(+Message:atom) is det. + +msg_success(X):- + ansi_format([bold,fg(green)], '~a~n', [X]). + + + +%! msg_warning(+Message:atom) is det. + +msg_warning(X):- + ansi_format([bold,fg(red)], '~a~n', [X]). ``` 125: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ e64cc35 å’Œå˜åŠ¨å 763a529  [back to content](#compare) ``` diff diff --git a/install b/install deleted file mode 100755 index 849699b..0000000 --- a/install +++ /dev/null @@ -1,218 +0,0 @@ -#!/usr/bin/env swipl - -:- module(install, []). - -/**  Install - -Let's do this! - -@author Wouter Beek -@version 2015/09/23 -*/ - -:- use_module(library(filesex)). -:- use_module(library(lists)). -:- use_module(library(option)). -:- use_module(library(optparse)). -:- use_module(library(prolog_pack)). -:- use_module(library(uri)). - -:- dynamic(author/2). -:- dynamic(download/1). -:- dynamic(home/1). -:- dynamic(maintainer/2). -:- dynamic(name/1). -:- dynamic(packager/2). -:- dynamic(requires/1). -:- dynamic(title/1). -:- dynamic(version/1). - -:- initialization(install). - - - - - -%! install is det. - -install:- - OptSpec = [ - [ % Github - default(true), - help('Whether Github should be used to install requirements.'), - longflags([git,github]), - opt(github), - type(boolean) - ], - [ % Help - default(false), - help('Display help about the install command.'), - longflags([help]), - opt(help), - shortflags([h]), - type(boolean) - ], - [ % Pack - default(true), - help('Whether the Prolog Pack system is used for installing requirements.'), - longflags([pack]), - opt(pack), - type(boolean) - ], - [ % Parent - default(false), - help('Whether existing installations in the parent directory should be taken into account.'), - longflags([parent]), - opt(parent), - type(boolean) - ] - ], - opt_arguments(OptSpec, Opts, _), - - % Process help - (option(help(true), Opts) - show_help(OptSpec) ; install(Opts)). - - -%! install(+Options:list(compound)) is det. - -install(Opts):- - source_file(install, File), - file_directory_name(File, AppDir), - install(AppDir, AppDir, Opts), - clean_meta, - halt. - - -%! install( -%! +ApplicationDirectory:atom, -%! +LibraryDirectory:atom, -%! +Options:list(compound) -%! ) is det. - -install(AppDir, LibDir, Opts):- - % The pack information is taken from the library directory. - % This allows application requirements to be installed recursively. - directory_file_path(LibDir, 'pack.pl', Info), - access_file(Info, read), - load_meta(Info), - - % Set this library's search path. - name(Name), - assert(user:file_search_path(Name, LibDir)), - - % Pull in the required libraries. - forall(requires(LibName), install_required(AppDir, LibName, Opts)), !. -install(_, _, _):- - msg_warning('Installation failed.'). - - -%! install_required( -%! +ApplicationDirectory:atom, -%! +LibName:atom, -%! +Options:list(compound) -%! ) is det. - -% Developer's delight: library already available from parent directory. -install_required(AppDir, LibName, Opts):- - option(parent(true), Opts), - - file_directory_name(AppDir, ParentDir), - append_directories(ParentDir, LibName, LibDir), - exists_directory(LibDir), !, - - % Print message. - atomic_list_concat(['Library ',LibName,' already installed.'], Msg), - msg_success(Msg). -% Install through the Prolog Pack system. -install_required(_, LibName, Opts):- - option(pack(true), Opts), - - prolog_pack:query_pack_server(search(LibName), Result,[]), - Result = true([pack(LibName,_,_,_,_)]), !, - pack_install(LibName). -% Install through Github. -install_required(AppDir, LibName, Opts):- - option(github(true), Opts), - - % Remove the old version of the library. - append_directories(AppDir, LibName, LibDir), - (exists_directory(LibDir) - delete_directory_and_contents(LibDir) ; true), - - % Git clone the new version of the library. - atomic_list_concat(['',wouterbeek,LibName], /, Path), - uri_components(Iri, uri_components(https,'github.com',Path,_,_)), - prolog_pack:run_process(path(git), [clone,Iri,LibDir], []), - - % Print message. - atomic_list_concat(['Library ',LibName,' was installed.'], Msg), - msg_success(Msg), - - % Recurse - install(AppDir, LibDir, Opts), !. -% Oops! -install_required(_, LibName, _):- - atomic_list_concat( - ['Installation of library ',LibName,' failed.'], - Msg - ), - msg_warning(Msg). - - - - - -% HELPERS % - -%! append_directories(+Dir1:atom, +Dir2:atom, -Dir3:atom) is det. - -append_directories(Dir1, Dir2, Dir3):- - atomic_list_concat(Subdirs1, /, Dir1), - atomic_list_concat(Subdirs2, /, Dir2), - append(Subdirs1, Subdirs2, Subdirs3), - atomic_list_concat(Subdirs3, /, Dir3). - - - -%! clean_meta is det. - -clean_meta:- - retractall(author/2), - retractall(download/1), - retractall(home/1), - retractall(maintainer/2), - retractall(name/1), - retractall(packager/2), - retractall(requires/1), - retractall(title/1), - retractall(version/1). - - - -%! show_help(+OptionSpecification:list(compound)) is det. - -show_help(OptSpec):- - opt_help(OptSpec, Help), - format(user_output, '~a\\n', [Help]), - halt. - - - -%! load_meta(+File:atom) is det. - -load_meta(File):- - clean_meta, - ensure_loaded(File). - - - -%! msg_success(+Message:atom) is det. - -msg_success(X):- - ansi_format([bold,fg(green)], '~a~n', [X]). - - - -%! msg_warning(+Message:atom) is det. - -msg_warning(X):- - ansi_format([bold,fg(red)], '~a~n', [X]). diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl index fa00670..99d6059 100644 --- a/prolog/gv/gv_attrs.pl +++ b/prolog/gv/gv_attrs.pl @@ -121,9 +121,9 @@ assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):- % Downloads the table describing GraphViz attributes from `graphviz.org`. gv_attrs_download:- - verbose_call( - 'updating GraphViz attributes table', + verbose( gv_attrs_download0 + \"updating GraphViz attributes table\", ). gv_attrs_download0:- diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl index 57c7f90..2c56713 100644 --- a/prolog/gv/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -88,9 +88,9 @@ wc_weight(Float) -- %! gv_color_download is det. gv_color_download:- - verbose_call( - 'updating the GraphViz color table', - gv_color_download0 + verbose( + gv_color_download0, + 'updating the GraphViz color table' ). gv_color_download0:- diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl index 577a33a..7fd5a58 100644 --- a/prolog/gv/gv_file.pl +++ b/prolog/gv/gv_file.pl @@ -10,7 +10,7 @@ /**  GraphViz file @author Wouter Beek -@version 2015/07 +@version 2015/07, 2015/10 */ :- use_module(library(code_ext)). @@ -18,18 +18,13 @@ :- use_module(library(gv/gv_graph)). :- use_module(library(option)). :- use_module(library(process)). - -:- dynamic(user:prolog_file_type/2). -:- multifile(user:prolog_file_type/2). - -user:prolog_file_type(dot, dot). -user:prolog_file_type(pdf, pdf). +:- use_module(library(string_ext)). :- predicate_options(gv_export/3, 3, [ pass_to(file_to_gv/3, 3) ]). :- predicate_options(file_to_gv/3, 3, [ - method(+atom), + method(+oneof([circo,dot,fdp,neato,osage,sfdp,twopi])), output(+atom) ]). @@ -37,39 +32,38 @@ user:prolog_file_type(pdf, pdf). -%! gv_export( -%! +ExportGraph:compound, -%! +OutputFile:atom, -%! +Options:list(nvpair) -%! ) is det. +%! gv_export(+ExportGraph:compound, +File:atom, +Options:list(compound)) is det. % Returns a file containing a GraphViz visualization of the given graph. % % The following options are supported: -% - `method(+Method:atom)` +% * method(+oneof([circo,dot,fdp,neato,osage,sfdp,twopi]) % The algorithm used by GraphViz for positioning the tree nodes. -% Either =dot= (default) or =sfdp=. -% - `output(+FileType:atom)` +% Default is `dot'. +% For possible values see gv_method/1. +% * output(+atom)` % The file type of the generated GraphViz file. -% Default: `pdf`. +% Default is `pdf`. +% For possible values see gv_output_type/1. -gv_export(ExportGraph, OutputFile, Options):- - once(phrase(gv_graph(ExportGraph), Codes)), +gv_export(ExportG, File, Opts):- + once(phrase(gv_graph(ExportG), Cs)), % Be thread-safe. thread_self(Id), - atomic_list_concat([gv_file,Id], '_', ThreadName), - absolute_file_name(ThreadName, TmpFile, [access(write),file_type(dot)]), + string_list_concat([\"gv_file\",Id], \"_\", ThreadName), + absolute_file_name(ThreadName, TmpFile, [access(write),extensions([dot])]), setup_call_cleanup( open(TmpFile, write, Write, [encoding(utf8)]), - with_output_to(Write, put_codes(Codes)), + with_output_to(Write, put_codes(Cs)), close(Write) ), - file_to_gv(TmpFile, OutputFile, Options). + file_to_gv(TmpFile, File, Opts). + %! file_to_gv( %! +InputFile:atom, %! +OutputFile:atom, -%! +Options:list(nvpair) +%! +Options:list(compound) %! ) is det. % Converts a GraphViz DOT file to an image file, using a specific % visualization method. @@ -98,8 +92,8 @@ file_to_gv(InputFile, OutputFile, Opts):- must_be(oneof(OutputTypes), OutputType), % Run the GraphViz conversion command in the shell. - format(atom(OutputTypeFlag), '-T~a', [OutputType]), - format(atom(OutputFileFlag), '-o~a', [OutputFile]), + format(atom(OutputTypeFlag), \"-T~a\", [OutputType]), + format(atom(OutputFileFlag), \"-o~a\", [OutputFile]), process_create( path(Method), [OutputTypeFlag,file(InputFile),OutputFileFlag], @@ -108,6 +102,8 @@ file_to_gv(InputFile, OutputFile, Opts):- + + % HELPERS % gv_method(circo). ``` 126: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 763a529 å’Œå˜åŠ¨å d962f81  [back to content](#compare) ``` diff diff --git a/install b/install new file mode 100755 index 0000000..849699b --- /dev/null +++ b/install @@ -0,0 +1,218 @@ +#!/usr/bin/env swipl + +:- module(install, []). + +/**  Install + +Let's do this! + +@author Wouter Beek +@version 2015/09/23 +*/ + +:- use_module(library(filesex)). +:- use_module(library(lists)). +:- use_module(library(option)). +:- use_module(library(optparse)). +:- use_module(library(prolog_pack)). +:- use_module(library(uri)). + +:- dynamic(author/2). +:- dynamic(download/1). +:- dynamic(home/1). +:- dynamic(maintainer/2). +:- dynamic(name/1). +:- dynamic(packager/2). +:- dynamic(requires/1). +:- dynamic(title/1). +:- dynamic(version/1). + +:- initialization(install). + + + + + +%! install is det. + +install:- + OptSpec = [ + [ % Github + default(true), + help('Whether Github should be used to install requirements.'), + longflags([git,github]), + opt(github), + type(boolean) + ], + [ % Help + default(false), + help('Display help about the install command.'), + longflags([help]), + opt(help), + shortflags([h]), + type(boolean) + ], + [ % Pack + default(true), + help('Whether the Prolog Pack system is used for installing requirements.'), + longflags([pack]), + opt(pack), + type(boolean) + ], + [ % Parent + default(false), + help('Whether existing installations in the parent directory should be taken into account.'), + longflags([parent]), + opt(parent), + type(boolean) + ] + ], + opt_arguments(OptSpec, Opts, _), + + % Process help + (option(help(true), Opts) - show_help(OptSpec) ; install(Opts)). + + +%! install(+Options:list(compound)) is det. + +install(Opts):- + source_file(install, File), + file_directory_name(File, AppDir), + install(AppDir, AppDir, Opts), + clean_meta, + halt. + + +%! install( +%! +ApplicationDirectory:atom, +%! +LibraryDirectory:atom, +%! +Options:list(compound) +%! ) is det. + +install(AppDir, LibDir, Opts):- + % The pack information is taken from the library directory. + % This allows application requirements to be installed recursively. + directory_file_path(LibDir, 'pack.pl', Info), + access_file(Info, read), + load_meta(Info), + + % Set this library's search path. + name(Name), + assert(user:file_search_path(Name, LibDir)), + + % Pull in the required libraries. + forall(requires(LibName), install_required(AppDir, LibName, Opts)), !. +install(_, _, _):- + msg_warning('Installation failed.'). + + +%! install_required( +%! +ApplicationDirectory:atom, +%! +LibName:atom, +%! +Options:list(compound) +%! ) is det. + +% Developer's delight: library already available from parent directory. +install_required(AppDir, LibName, Opts):- + option(parent(true), Opts), + + file_directory_name(AppDir, ParentDir), + append_directories(ParentDir, LibName, LibDir), + exists_directory(LibDir), !, + + % Print message. + atomic_list_concat(['Library ',LibName,' already installed.'], Msg), + msg_success(Msg). +% Install through the Prolog Pack system. +install_required(_, LibName, Opts):- + option(pack(true), Opts), + + prolog_pack:query_pack_server(search(LibName), Result,[]), + Result = true([pack(LibName,_,_,_,_)]), !, + pack_install(LibName). +% Install through Github. +install_required(AppDir, LibName, Opts):- + option(github(true), Opts), + + % Remove the old version of the library. + append_directories(AppDir, LibName, LibDir), + (exists_directory(LibDir) - delete_directory_and_contents(LibDir) ; true), + + % Git clone the new version of the library. + atomic_list_concat(['',wouterbeek,LibName], /, Path), + uri_components(Iri, uri_components(https,'github.com',Path,_,_)), + prolog_pack:run_process(path(git), [clone,Iri,LibDir], []), + + % Print message. + atomic_list_concat(['Library ',LibName,' was installed.'], Msg), + msg_success(Msg), + + % Recurse + install(AppDir, LibDir, Opts), !. +% Oops! +install_required(_, LibName, _):- + atomic_list_concat( + ['Installation of library ',LibName,' failed.'], + Msg + ), + msg_warning(Msg). + + + + + +% HELPERS % + +%! append_directories(+Dir1:atom, +Dir2:atom, -Dir3:atom) is det. + +append_directories(Dir1, Dir2, Dir3):- + atomic_list_concat(Subdirs1, /, Dir1), + atomic_list_concat(Subdirs2, /, Dir2), + append(Subdirs1, Subdirs2, Subdirs3), + atomic_list_concat(Subdirs3, /, Dir3). + + + +%! clean_meta is det. + +clean_meta:- + retractall(author/2), + retractall(download/1), + retractall(home/1), + retractall(maintainer/2), + retractall(name/1), + retractall(packager/2), + retractall(requires/1), + retractall(title/1), + retractall(version/1). + + + +%! show_help(+OptionSpecification:list(compound)) is det. + +show_help(OptSpec):- + opt_help(OptSpec, Help), + format(user_output, '~a\\n', [Help]), + halt. + + + +%! load_meta(+File:atom) is det. + +load_meta(File):- + clean_meta, + ensure_loaded(File). + + + +%! msg_success(+Message:atom) is det. + +msg_success(X):- + ansi_format([bold,fg(green)], '~a~n', [X]). + + + +%! msg_warning(+Message:atom) is det. + +msg_warning(X):- + ansi_format([bold,fg(red)], '~a~n', [X]). ``` 127: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ d962f81 å’Œå˜åŠ¨å 63a5cd7  [back to content](#compare) ``` diff diff --git a/install b/install deleted file mode 100755 index 849699b..0000000 --- a/install +++ /dev/null @@ -1,218 +0,0 @@ -#!/usr/bin/env swipl - -:- module(install, []). - -/**  Install - -Let's do this! - -@author Wouter Beek -@version 2015/09/23 -*/ - -:- use_module(library(filesex)). -:- use_module(library(lists)). -:- use_module(library(option)). -:- use_module(library(optparse)). -:- use_module(library(prolog_pack)). -:- use_module(library(uri)). - -:- dynamic(author/2). -:- dynamic(download/1). -:- dynamic(home/1). -:- dynamic(maintainer/2). -:- dynamic(name/1). -:- dynamic(packager/2). -:- dynamic(requires/1). -:- dynamic(title/1). -:- dynamic(version/1). - -:- initialization(install). - - - - - -%! install is det. - -install:- - OptSpec = [ - [ % Github - default(true), - help('Whether Github should be used to install requirements.'), - longflags([git,github]), - opt(github), - type(boolean) - ], - [ % Help - default(false), - help('Display help about the install command.'), - longflags([help]), - opt(help), - shortflags([h]), - type(boolean) - ], - [ % Pack - default(true), - help('Whether the Prolog Pack system is used for installing requirements.'), - longflags([pack]), - opt(pack), - type(boolean) - ], - [ % Parent - default(false), - help('Whether existing installations in the parent directory should be taken into account.'), - longflags([parent]), - opt(parent), - type(boolean) - ] - ], - opt_arguments(OptSpec, Opts, _), - - % Process help - (option(help(true), Opts) - show_help(OptSpec) ; install(Opts)). - - -%! install(+Options:list(compound)) is det. - -install(Opts):- - source_file(install, File), - file_directory_name(File, AppDir), - install(AppDir, AppDir, Opts), - clean_meta, - halt. - - -%! install( -%! +ApplicationDirectory:atom, -%! +LibraryDirectory:atom, -%! +Options:list(compound) -%! ) is det. - -install(AppDir, LibDir, Opts):- - % The pack information is taken from the library directory. - % This allows application requirements to be installed recursively. - directory_file_path(LibDir, 'pack.pl', Info), - access_file(Info, read), - load_meta(Info), - - % Set this library's search path. - name(Name), - assert(user:file_search_path(Name, LibDir)), - - % Pull in the required libraries. - forall(requires(LibName), install_required(AppDir, LibName, Opts)), !. -install(_, _, _):- - msg_warning('Installation failed.'). - - -%! install_required( -%! +ApplicationDirectory:atom, -%! +LibName:atom, -%! +Options:list(compound) -%! ) is det. - -% Developer's delight: library already available from parent directory. -install_required(AppDir, LibName, Opts):- - option(parent(true), Opts), - - file_directory_name(AppDir, ParentDir), - append_directories(ParentDir, LibName, LibDir), - exists_directory(LibDir), !, - - % Print message. - atomic_list_concat(['Library ',LibName,' already installed.'], Msg), - msg_success(Msg). -% Install through the Prolog Pack system. -install_required(_, LibName, Opts):- - option(pack(true), Opts), - - prolog_pack:query_pack_server(search(LibName), Result,[]), - Result = true([pack(LibName,_,_,_,_)]), !, - pack_install(LibName). -% Install through Github. -install_required(AppDir, LibName, Opts):- - option(github(true), Opts), - - % Remove the old version of the library. - append_directories(AppDir, LibName, LibDir), - (exists_directory(LibDir) - delete_directory_and_contents(LibDir) ; true), - - % Git clone the new version of the library. - atomic_list_concat(['',wouterbeek,LibName], /, Path), - uri_components(Iri, uri_components(https,'github.com',Path,_,_)), - prolog_pack:run_process(path(git), [clone,Iri,LibDir], []), - - % Print message. - atomic_list_concat(['Library ',LibName,' was installed.'], Msg), - msg_success(Msg), - - % Recurse - install(AppDir, LibDir, Opts), !. -% Oops! -install_required(_, LibName, _):- - atomic_list_concat( - ['Installation of library ',LibName,' failed.'], - Msg - ), - msg_warning(Msg). - - - - - -% HELPERS % - -%! append_directories(+Dir1:atom, +Dir2:atom, -Dir3:atom) is det. - -append_directories(Dir1, Dir2, Dir3):- - atomic_list_concat(Subdirs1, /, Dir1), - atomic_list_concat(Subdirs2, /, Dir2), - append(Subdirs1, Subdirs2, Subdirs3), - atomic_list_concat(Subdirs3, /, Dir3). - - - -%! clean_meta is det. - -clean_meta:- - retractall(author/2), - retractall(download/1), - retractall(home/1), - retractall(maintainer/2), - retractall(name/1), - retractall(packager/2), - retractall(requires/1), - retractall(title/1), - retractall(version/1). - - - -%! show_help(+OptionSpecification:list(compound)) is det. - -show_help(OptSpec):- - opt_help(OptSpec, Help), - format(user_output, '~a\\n', [Help]), - halt. - - - -%! load_meta(+File:atom) is det. - -load_meta(File):- - clean_meta, - ensure_loaded(File). - - - -%! msg_success(+Message:atom) is det. - -msg_success(X):- - ansi_format([bold,fg(green)], '~a~n', [X]). - - - -%! msg_warning(+Message:atom) is det. - -msg_warning(X):- - ansi_format([bold,fg(red)], '~a~n', [X]). ``` 128: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 63a5cd7 å’Œå˜åŠ¨å ce95c3c  [back to content](#compare) ``` diff diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl index 99d6059..1fd4a18 100644 --- a/prolog/gv/gv_attrs.pl +++ b/prolog/gv/gv_attrs.pl @@ -9,17 +9,18 @@ /**  GraphViz attributes @author Wouter Beek -@version 2015/07-2015/08 +@version 2015/07-2015/08, 2015/10 */ :- use_module(library(apply)). -:- use_module(library(deb_ext)). +:- use_module(library(debug_ext)). :- use_module(library(dcg/basics)). :- use_module(library(dcg/dcg_call)). :- use_module(library(dcg/dcg_phrase)). :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]). :- use_module(library(http/http_download)). :- use_module(library(lists)). +:- use_module(library(msg_ext)). :- use_module(library(os/file_ext)). :- use_module(library(persistency)). :- use_module(library(xpath)). @@ -35,15 +36,15 @@ %! ) is nondet. :- persistent( - gv_attr( - name:atom, - used_by:list(oneof([cluster,edge,graph,node,subgraph])), - types:list(atom), - default, - minimum, - notes:atom - ) -). + gv_attr( + name:atom, + used_by:list(oneof([cluster,edge,graph,node,subgraph])), + types:list(atom), + default, + minimum, + notes:atom + ) + ). :- initialization(gv_attrs_init). @@ -122,8 +123,8 @@ assert_gv_attr_row([Name,UsedBy1,Types1,Default1,Minimum,Notes]):- gv_attrs_download:- verbose( - gv_attrs_download0 - \"updating GraphViz attributes table\", + gv_attrs_download0, + \"updating GraphViz attributes table\" ). gv_attrs_download0:- diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl index 2c56713..fa79bea 100644 --- a/prolog/gv/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -13,16 +13,17 @@ @author Wouter Beek @tbd Color value `transparent` is only available in the output formats ps, svg, fig, vmrl, and the bitmap formats. -@version 2015/08 +@version 2015/08, 2015/10 */ :- use_module(library(apply)). -:- use_module(library(deb_ext)). +:- use_module(library(debug_ext)). :- use_module(library(dcg/basics)). :- use_module(library(dcg/dcg_abnf)). :- use_module(library(dcg/dcg_content)). :- use_module(library(http/http_download)). :- use_module(library(lists)). +:- use_module(library(msg_ext)). :- use_module(library(os/file_ext)). :- use_module(library(persistency)). :- use_module(library(xpath)). ``` 129: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ ce95c3c å’Œå˜åŠ¨å 44cd5a6  [back to content](#compare) ``` diff diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl index b0dbd69..5ab08a6 100644 --- a/prolog/gv/gv_attr_type.pl +++ b/prolog/gv/gv_attr_type.pl @@ -202,11 +202,14 @@ doubleList(L) -- -%! escString(+String:atom)// . +%! escString(+String:or([atom,string]))// . % @tbd Support for context-dependent replacements. escString(S1) -- - {atom_phrase(escape_double_quotes, S1, S2)}, + {( string(S1) + - string_phrase(escape_double_quotes, S1, S2) + ; atom_phrase(escape_double_quotes, S1, S2) + )}, quoted(atom(S2)). escape_double_quotes, [92,34] -- diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index 033d0b9..3aec4e6 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -26,7 +26,7 @@ a_list = ID \"=\" ID [\",\"] [a_list] @author Wouter Beek @see http://www.graphviz.org/content/dot-language -@version 2015/07-2015/08 +@version 2015/07-2015/08, 2015/10 */ :- use_module(library(apply)). @@ -38,6 +38,7 @@ a_list = ID \"=\" ID [\",\"] [a_list] :- use_module(library(dcg/dcg_quoted)). :- use_module(library(gv/gv_attrs)). :- use_module(library(gv/gv_html)). +:- use_module(library(error)). :- use_module(library(lists)). :- use_module(library(ordsets)). @@ -82,8 +83,9 @@ gv_edge_statement(I, Dir, edge(From,To,Attrs)) -- % @arg Directed Whether an edge is directed (operator `-`) or % undirected (operator `--`). -gv_edge_operator(false) -- !, \"--\". -gv_edge_operator(true) -- \"-\". +gv_edge_operator(Dir) -- + {must_be(boolean, Dir)}, + ({Dir == false} - \"--\" ; {Dir == true} - \"-\"). @@ -113,9 +115,9 @@ gv_generic_attributes_statement(Kind, I, Attrs) -- %! gv_kind(+Kind:oneof([edge,graph,node]))// . -gv_kind(edge) -- \"edge\". -gv_kind(graph) -- \"graph\". -gv_kind(node) -- \"node\". +gv_kind(Kind) -- + {must_be(oneof([edge,graph,node]), Kind)}, + atom(Kind). @@ -142,8 +144,8 @@ gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -- % The rank attribute. {NewI is I + 1}, indent(NewI), - gv_attr(subgraph, rank=same), - \";\\n\", + gv_attr(subgraph, rank(same)), + \"\\n\", % Vertice statements. *( @@ -170,10 +172,8 @@ gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -- gv_attrs(Kind, L) -- bracketed(square, *(gv_attr(Kind), L, [])). -%! gv_attr( -%! +Context:oneof([edge,graph,node]), -%! +Attribute:nvpair -%! )// is det. + +%! gv_attr(+Context:oneof([edge,graph,node]), +Attribute:compound)// is det. % A single GraphViz attribute. % We assume that the attribute has already been validated. @@ -276,10 +276,12 @@ gv_keyword -- \"subgraph\". % inside GraphViz node identifiers. gv_node_id(Id) -- - gv_id(Id). + gv_id(Id), !. %gv_node_id(_) -- % gv_id(_), % gv_port. +gv_node_id(Id) -- + {type_error(gv_node_id, Id)}. ``` 130: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 44cd5a6 å’Œå˜åŠ¨å c0c5e18  [back to content](#compare) ``` diff diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl index 507e8ad..b6d367b 100644 --- a/prolog/graph/build_export_graph.pl +++ b/prolog/graph/build_export_graph.pl @@ -1,9 +1,9 @@ :- module( build_export_graph, [ - build_export_graph/2, % +Graph:compound + build_export_graph/2, % +Graph % -ExportGraph:compound - build_export_graph/3 % +Graph:compound + build_export_graph/3 % +Graph % -ExportGraph:compound % +Options:list(compound) ] @@ -18,13 +18,13 @@ Support for building GIF representations. ## Graph ```prolog -graph(Vs:ordset(compound),Ranks,Es:compound,Attributes:list(nvpair)) +graph(Vs:ordset(compound),Ranks,Es:compound,Attributes:list(compound)) ``` ### Edge ```prolog -edge(FromVertexId,ToVertexId,Attributes:list(nvpair)) +edge(FromVertexId,ToVertexId,Attributes:list(compound)) ``` ### Rank @@ -36,7 +36,7 @@ rank(RankVertex:compound,ContentVertices:ordset(compound)) ### Vertex ```prolog -vertex(Id,Attributes:list(nvpair)) +vertex(Id,Attributes:list(compound)) ``` # Property functions @@ -51,10 +51,12 @@ Vertex coordinates: --- @author Wouter Beek -@version 2015/07, 2015/09 +@version 2015/07, 2015/09-2015/10 */ :- use_module(library(apply)). +:- use_module(library(graph/s/s_graph)). +:- use_module(library(lambda)). :- use_module(library(list_ext)). :- use_module(library(option_ext)). :- use_module(library(ordsets)). @@ -112,34 +114,32 @@ is_meta(vertex_uri). -%! build_export_graph(+Graph:compound, -ExportGraph:compound) is det. +%! build_export_graph(+Graph, -ExportGraph:compound) is det. +% Wrapper around build_export_graph/3. build_export_graph(G, ExportG):- build_export_graph(G, ExportG, []). + %! build_export_graph( -%! +Graph:compound, +%! +Graph, %! -ExportGraph:compound, %! +Options:list(compound) %! ) is det. +% Graph is either: +% * a coumpound term `graph(Vs,Es)`, or +% * an unlabeled graph as defined by `library(ugraph)`. -build_export_graph(graph(Vs,Es), graph(VTerms,ETerms,GAttrs), Opts1):- +build_export_graph(G, graph(VTerms,ETerms,GAttrs), Opts1):- + graph_components(G, Vs, Es), meta_options(is_meta, Opts1, Opts2), - - % V terms. - maplist(vertex_term0(Vs, Opts2), Vs, VTerms), - - % Edge terms. - maplist(edge_term0(Vs, Opts2), Es, ETerms), - - % Graph attributes. + maplist(\\V^VTerm^vertex_term(Vs, V, VTerm, Opts2), Vs, VTerms), + maplist(\\E^ETerm^edge_term(Vs, E, ETerm, Opts2), Es, ETerms), graph_attributes(GAttrs, Opts2). -vertex_term0(Vs, Opts, V, VTerm):- - vertex_term(Vs, V, VTerm, Opts). - -edge_term0(Vs, Opts, E, ETerm):- - edge_term(Vs, E, ETerm, Opts). +graph_components(graph(Vs,Es), Vs, Es):- !. +graph_components(G, Vs, Es):- + s_graph_components(G, Vs, Es). @@ -178,12 +178,9 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):- % Id. ( option(edge_id(IdFunction), Opts) - call(IdFunction, E, FromId, ToId) - ; ( E = edge(FromV,_,ToV) - - true - ; E = edge(FromV,ToV) - ), - nth0chk(FromId, Vs, FromV), - nth0chk(ToId, Vs, ToV) + ; edge_components(E, FromV, ToV), + nth0chk(FromId, Vs, FromV), + nth0chk(ToId, Vs, ToV) ), % Label. @@ -215,7 +212,7 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):- %! graph_attributes( -%! -GraphAttributes:list(nvpair), +%! -GraphAttributes:list(compound), %! +Options:list(compound) %! ) is det. % The following options are supported: @@ -358,7 +355,15 @@ vertex_term(Vs, V, vertex(VId,VAttrs), Opts):- % HELPERS % -%! merge_options(+FromOptions:list(nvpair), -ToOptions:list(nvpair)) is det. +%! edge_components(+Edge:compound, -FromV, -ToV) is det. + +edge_components(edge(FromV,_,ToV), FromV, ToV):- !. +edge_components(edge(FromV,ToV), FromV, ToV):- !. +edge_components(FromV-ToV, FromV, ToV):- !. + + + +%! merge_options(+FromOptions:list(compound), -ToOptions:list(compound)) is det. merge_options([], []). % Skip uninstantiated values. ``` 131: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c0c5e18 å’Œå˜åŠ¨å 603344f  [back to content](#compare) ``` diff diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl new file mode 100644 index 0000000..190b988 --- /dev/null +++ b/data/gv_attrs_scrape.pl @@ -0,0 +1,124 @@ +:- module( + gv_attrs_scrape, + [ + gv_attrs_scrape/1 % +File:atom + ] +). + +/**  GraphViz: Scrape attributes + +Writes compound terms of the following form to file: + +```prolog +gv_attr( + ?Name:atom, + ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])), + ?Types:list(atom), + ?Default, + ?Minimum, + ?Notes:atom +) is nondet. +``` + +@author Wouter Beek +@version 2015/10 +*/ + +:- use_module(library(apply)). +:- use_module(library(dcg/basics), except([string//1])). +:- use_module(library(dcg/dcg_phrase)). +:- use_module(library(gv/gv_attr_type)). +:- use_module(library(http/http_download)). +:- use_module(library(iostream)). +:- use_module(library(lists)). +:- use_module(library(msg_ext)). +:- use_module(library(pl/pl_term)). +:- use_module(library(xpath)). +:- use_module(library(xpath/xpath_table)). + + + + + +%! gv_attrs_scrape(+File:atom) is det. + +gv_attrs_scrape(File):- + setup_call_cleanup( + open_any(File, write, Write, Close, []), + verbose( + gv_attrs_download(Write), + \"Updating the GraphViz attributes table.\" + ), + close_any(Close) + ). + + +gv_attrs_download(Write):- + gv_attrs_iri(Iri), + html_download(Iri, Dom), + xpath_chk(Dom, //table(@align=lower_case(center)), TableDom), + xpath_table(TableDom, _, Rows), + maplist(write_attr_row(Write), Rows). + + +write_attr_row(Write, [Name,UsedBy1,Types1,Default1,Minimum,Notes]):- + atom_phrase(translate_usedby(UsedBy2), UsedBy1), + once(atom_phrase(translate_type(Types2), Types1)), + sort(UsedBy2, UsedBy3), + translate_default(Default1, Default2), + with_output_to( + Write, + write_fact(gv_attr(Name, UsedBy3, Types2, Default2, Minimum, Notes)) + ). + +gv_attrs_iri('http://www.graphviz.org/doc/info/attrs.html'). + + + + + +% HELPERS % + +%! translate_default(+Default1:atom, -Default2:atom) is det. + +% The empty string is represented by the empty atom. +translate_default('\"\"', ''):- !. +% The absence of a default value is represented by an uninstantiated variable. +translate_default('', _):- !. +translate_default(Default, Default). + + + +%! translate_type(-Types:list(atom))// is det. + +translate_type([H|T]) -- + gv_attr_type(H), + whites, + translate_type(T). +translate_type([H]) -- + gv_attr_type(H). +translate_type([]) -- \"\". + + + +%! translated_usedby( +%! -UsedBy:list(oneof([cluster,edge,graph,node,subgraph])) +%! )// is det. + +translate_usedby([cluster|T]) -- + \"C\", !, + translate_usedby(T). +translate_usedby([edge|T]) -- + \"E\", !, + translate_usedby(T). +translate_usedby([graph|T]) -- + \"G\", !, + translate_usedby(T). +translate_usedby([node|T]) -- + \"N\", !, + translate_usedby(T). +translate_usedby([subgraph|T]) -- + \"S\", !, + translate_usedby(T). +translate_usedby([]) -- + \"\". diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl new file mode 100644 index 0000000..3ac5d44 --- /dev/null +++ b/data/gv_color_scrape.pl @@ -0,0 +1,56 @@ +:- module( + gv_color_scrape, + [ + gv_color_scrape/1 % +File:atom + ] +). + +/**  GraphViz: Scrape colors + +@author Wouter Beek +@version 2015/10 +*/ + +:- use_module(library(apply)). +:- use_module(library(http/http_download)). +:- use_module(library(iostream)). +:- use_module(library(lists)). +:- use_module(library(msg_ext)). +:- use_module(library(pl/pl_term)). +:- use_module(library(xpath)). +:- use_module(library(xpath/xpath_table)). + + + + + +%! gv_color_scrape(+File:atom) is det. + +gv_color_scrape(File):- + setup_call_cleanup( + open_any(File, write, Write, Close, []), + verbose( + gv_color_download(Write), + \"Updating the GraphViz color table.\" + ), + close_any(Close) + ). + + +gv_color_download(Write):- + gv_color_iri(Iri), + html_download(Iri, Dom), + xpath_chk(Dom, //table(1), TableDom1), + xpath_chk(Dom, //table(2), TableDom2), + maplist(write_color_table(Write), [x11,svg], [TableDom1,TableDom2]). + + +write_color_table(Write, Colorscheme, TableDom):- + xpath_table(TableDom, _, Rows), + append(Rows, Cells), + forall( + member(Cell, Cells), + with_output_to(Write, write_fact(gv_color(Colorscheme, Cell))) + ). + +gv_color_iri('http://www.graphviz.org/doc/info/colors.html'). diff --git a/gv_attrs.log b/gv_attrs.log deleted file mode 100644 index a9c6010..0000000 --- a/gv_attrs.log +++ /dev/null @@ -1,169 +0,0 @@ -assert(gv_attr('Damping',[graph],[double],'0.99','0.0','neato only')). -assert(gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only')). -assert(gv_attr('URL',[cluster,edge,graph,node],[escString],_,'','svg, postscript, map only')). -assert(gv_attr('_background',[graph],[string],_,'','')). -assert(gv_attr(area,[cluster,node],[double],'1.0','0','patchwork only')). -assert(gv_attr(arrowhead,[edge],[arrowType],normal,'','')). -assert(gv_attr(arrowsize,[edge],[double],'1.0','0.0','')). -assert(gv_attr(arrowtail,[edge],[arrowType],normal,'','')). -assert(gv_attr(bb,[graph],[rect],'','','write only')). -assert(gv_attr(bgcolor,[cluster,graph],[color,colorList],_,'','')). -assert(gv_attr(center,[graph],[bool],false,'','')). -assert(gv_attr(charset,[graph],[string],'\"UTF-8\"','','')). -assert(gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only')). -assert(gv_attr(color,[cluster,edge,node],[color,colorList],black,'','')). -assert(gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','')). -assert(gv_attr(comment,[edge,graph,node],[string],'','','')). -assert(gv_attr(compound,[graph],[bool],false,'','dot only')). -assert(gv_attr(concentrate,[graph],[bool],false,'','')). -assert(gv_attr(constraint,[edge],[bool],true,'','dot only')). -assert(gv_attr(decorate,[edge],[bool],false,'','')). -assert(gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only')). -assert(gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only')). -assert(gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only')). -assert(gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','')). -assert(gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only')). -assert(gv_attr(distortion,[node],[double],'0.0','-100.0','')). -assert(gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only')). -assert(gv_attr(edgeURL,[edge],[escString],'','','svg, map only')). -assert(gv_attr(edgehref,[edge],[escString],'','','svg, map only')). -assert(gv_attr(edgetarget,[edge],[escString],_,'','svg, map only')). -assert(gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only')). -assert(gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only')). -assert(gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot')). -assert(gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','')). -assert(gv_attr(fixedsize,[node],[bool,string],false,'','')). -assert(gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','')). -assert(gv_attr(fontname,[cluster,edge,graph,node],[string],'\"Times-Roman\"','','')). -assert(gv_attr(fontnames,[graph],[string],'','','svg only')). -assert(gv_attr(fontpath,[graph],[string],'system-dependent','','')). -assert(gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','')). -assert(gv_attr(forcelabels,[graph],[bool],true,'','')). -assert(gv_attr(gradientangle,[cluster,graph,node],[int],'','','')). -assert(gv_attr(group,[node],[string],'','','dot only')). -assert(gv_attr(headURL,[edge],[escString],'','','svg, map only')). -assert(gv_attr(head_lp,[edge],[point],'','','write only')). -assert(gv_attr(headclip,[edge],[bool],true,'','')). -assert(gv_attr(headhref,[edge],[escString],'','','svg, map only')). -assert(gv_attr(headlabel,[edge],[lblString],'','','')). -assert(gv_attr(headport,[edge],[portPos],center,'','')). -assert(gv_attr(headtarget,[edge],[escString],_,'','svg, map only')). -assert(gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only')). -assert(gv_attr(height,[node],[double],'0.5','0.02','')). -assert(gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')). -assert(gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')). -assert(gv_attr(image,[node],[string],'','','')). -assert(gv_attr(imagepath,[graph],[string],'','','')). -assert(gv_attr(imagescale,[node],[bool,string],false,'','')). -assert(gv_attr(inputscale,[graph],[double],_,'','fdp, neato only')). -assert(gv_attr(label,[cluster,edge,graph,node],[lblString],'\"\\\\N\" (nodes)\"\" (otherwise)','','')). -assert(gv_attr(labelURL,[edge],[escString],'','','svg, map only')). -assert(gv_attr(label_scheme,[graph],[int],'0','0','sfdp only')). -assert(gv_attr(labelangle,[edge],[double],'-25.0','-180.0','')). -assert(gv_attr(labeldistance,[edge],[double],'1.0','0.0','')). -assert(gv_attr(labelfloat,[edge],[bool],false,'','')). -assert(gv_attr(labelfontcolor,[edge],[color],black,'','')). -assert(gv_attr(labelfontname,[edge],[string],'\"Times-Roman\"','','')). -assert(gv_attr(labelfontsize,[edge],[double],'14.0','1.0','')). -assert(gv_attr(labelhref,[edge],[escString],'','','svg, map only')). -assert(gv_attr(labeljust,[cluster,graph],[string],'\"c\"','','')). -assert(gv_attr(labelloc,[cluster,graph,node],[string],'\"t\"(clusters)\"b\"(root graphs)\"c\"(nodes)','','')). -assert(gv_attr(labeltarget,[edge],[escString],_,'','svg, map only')). -assert(gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only')). -assert(gv_attr(landscape,[graph],[bool],false,'','')). -assert(gv_attr(layer,[cluster,edge,node],[layerRange],'','','')). -assert(gv_attr(layerlistsep,[graph],[string],'\",\"','','')). -assert(gv_attr(layers,[graph],[layerList],'','','')). -assert(gv_attr(layerselect,[graph],[layerRange],'','','')). -assert(gv_attr(layersep,[graph],[string],'\" :\\\\t\"','','')). -assert(gv_attr(layout,[graph],[string],'','','')). -assert(gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only')). -assert(gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only')). -assert(gv_attr(levelsgap,[graph],[double],'0.0','','neato only')). -assert(gv_attr(lhead,[edge],[string],'','','dot only')). -assert(gv_attr(lheight,[cluster,graph],[double],'','','write only')). -assert(gv_attr(lp,[cluster,edge,graph],[point],'','','write only')). -assert(gv_attr(ltail,[edge],[string],'','','dot only')). -assert(gv_attr(lwidth,[cluster,graph],[double],'','','write only')). -assert(gv_attr(margin,[cluster,graph,node],[double,point],'','','')). -assert(gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only')). -assert(gv_attr(mclimit,[graph],[double],'1.0','','dot only')). -assert(gv_attr(mindist,[graph],[double],'1.0','0.0','circo only')). -assert(gv_attr(minlen,[edge],[int],'1','0','dot only')). -assert(gv_attr(mode,[graph],[string],major,'','neato only')). -assert(gv_attr(model,[graph],[string],shortpath,'','neato only')). -assert(gv_attr(mosek,[graph],[bool],false,'','neato only')). -assert(gv_attr(nodesep,[graph],[double],'0.25','0.02','')). -assert(gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','')). -assert(gv_attr(normalize,[graph],[double,bool],false,'','not dot')). -assert(gv_attr(notranslate,[graph],[bool],false,'','neato only')). -assert(gv_attr('nslimit nslimit1',[graph],[double],'','','dot only')). -assert(gv_attr(ordering,[graph,node],[string],'','','dot only')). -assert(gv_attr(orientation,[node],[double],'0.0','360.0','')). -assert(gv_attr(orientation,[graph],[string],'','','')). -assert(gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','')). -assert(gv_attr(overlap,[graph],[string,bool],true,'','not dot')). -assert(gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only')). -assert(gv_attr(overlap_shrink,[graph],[bool],true,'','prism only')). -assert(gv_attr(pack,[graph],[bool,int],false,'','')). -assert(gv_attr(packmode,[graph],[packMode],node,'','')). -assert(gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','')). -assert(gv_attr(page,[graph],[double,point],'','','')). -assert(gv_attr(pagedir,[graph],[pagedir],'BL','','')). -assert(gv_attr(pencolor,[cluster],[color],black,'','')). -assert(gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','')). -assert(gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','')). -assert(gv_attr(pin,[node],[bool],false,'','fdp, neato only')). -assert(gv_attr(pos,[edge,node],[point,splineType],'','','')). -assert(gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only')). -assert(gv_attr(quantum,[graph],[double],'0.0','0.0','')). -assert(gv_attr(rank,[subgraph],[rankType],'','','dot only')). -assert(gv_attr(rankdir,[graph],[rankdir],'TB','','dot only')). -assert(gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only')). -assert(gv_attr(ratio,[graph],[double,string],'','','')). -assert(gv_attr(rects,[node],[rect],'','','write only')). -assert(gv_attr(regular,[node],[bool],false,'','')). -assert(gv_attr(remincross,[graph],[bool],true,'','dot only')). -assert(gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only')). -assert(gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only')). -assert(gv_attr(root,[graph,node],[string,bool],'(graphs)false(nodes)','','circo, twopi only')). -assert(gv_attr(rotate,[graph],[int],'0','','')). -assert(gv_attr(rotation,[graph],[double],'0','','sfdp only')). -assert(gv_attr(samehead,[edge],[string],'','','dot only')). -assert(gv_attr(sametail,[edge],[string],'','','dot only')). -assert(gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','')). -assert(gv_attr(scale,[graph],[double,point],'','','not dot')). -assert(gv_attr(searchsize,[graph],[int],'30','','dot only')). -assert(gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot')). -assert(gv_attr(shape,[node],[shape],ellipse,'','')). -assert(gv_attr(shapefile,[node],[string],'','','')). -assert(gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only')). -assert(gv_attr(sides,[node],[int],'4','0','')). -assert(gv_attr(size,[graph],[double,point],'','','')). -assert(gv_attr(skew,[node],[double],'0.0','-100.0','')). -assert(gv_attr(smoothing,[graph],[smoothType],'\"none\"','','sfdp only')). -assert(gv_attr(sortv,[cluster,graph,node],[int],'0','0','')). -assert(gv_attr(splines,[graph],[bool,string],'','','')). -assert(gv_attr(start,[graph],[startType],'','','fdp, neato only')). -assert(gv_attr(style,[cluster,edge,graph,node],[style],'','','')). -assert(gv_attr(stylesheet,[graph],[string],'','','svg only')). -assert(gv_attr(tailURL,[edge],[escString],'','','svg, map only')). -assert(gv_attr(tail_lp,[edge],[point],'','','write only')). -assert(gv_attr(tailclip,[edge],[bool],true,'','')). -assert(gv_attr(tailhref,[edge],[escString],'','','svg, map only')). -assert(gv_attr(taillabel,[edge],[lblString],'','','')). -assert(gv_attr(tailport,[edge],[portPos],center,'','')). -assert(gv_attr(tailtarget,[edge],[escString],_,'','svg, map only')). -assert(gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only')). -assert(gv_attr(target,[cluster,edge,graph,node],[escString,string],_,'','svg, map only')). -assert(gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only')). -assert(gv_attr(truecolor,[graph],[bool],'','','bitmap output only')). -assert(gv_attr(vertices,[node],[pointList],'','','write only')). -assert(gv_attr(viewport,[graph],[viewPort],'','','')). -assert(gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot')). -assert(gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','')). -assert(gv_attr(width,[node],[double],'0.75','0.01','')). -assert(gv_attr(xdotversion,[graph],[string],'','','xdot only')). -assert(gv_attr(xlabel,[edge,node],[lblString],'','','')). -assert(gv_attr(xlp,[edge,node],[point],'','','write only')). -assert(gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','')). diff --git a/gv_color.log b/gv_color.log deleted file mode 100644 index 23d6cdf..0000000 --- a/gv_color.log +++ /dev/null @@ -1,802 +0,0 @@ -assert(gv_color(x11,aliceblue)). -assert(gv_color(x11,antiquewhite)). -assert(gv_color(x11,antiquewhite1)). -assert(gv_color(x11,antiquewhite2)). -assert(gv_color(x11,antiquewhite3)). -assert(gv_color(x11,antiquewhite4)). -assert(gv_color(x11,aquamarine)). -assert(gv_color(x11,aquamarine1)). -assert(gv_color(x11,aquamarine2)). -assert(gv_color(x11,aquamarine3)). -assert(gv_color(x11,aquamarine4)). -assert(gv_color(x11,azure)). -assert(gv_color(x11,azure1)). -assert(gv_color(x11,azure2)). -assert(gv_color(x11,azure3)). -assert(gv_color(x11,azure4)). -assert(gv_color(x11,beige)). -assert(gv_color(x11,bisque)). -assert(gv_color(x11,bisque1)). -assert(gv_color(x11,bisque2)). -assert(gv_color(x11,bisque3)). -assert(gv_color(x11,bisque4)). -assert(gv_color(x11,black)). -assert(gv_color(x11,blanchedalmond)). -assert(gv_color(x11,blue)). -assert(gv_color(x11,blue1)). -assert(gv_color(x11,blue2)). -assert(gv_color(x11,blue3)). -assert(gv_color(x11,blue4)). -assert(gv_color(x11,blueviolet)). -assert(gv_color(x11,brown)). -assert(gv_color(x11,brown1)). -assert(gv_color(x11,brown2)). -assert(gv_color(x11,brown3)). -assert(gv_color(x11,brown4)). -assert(gv_color(x11,burlywood)). -assert(gv_color(x11,burlywood1)). -assert(gv_color(x11,burlywood2)). -assert(gv_color(x11,burlywood3)). -assert(gv_color(x11,burlywood4)). -assert(gv_color(x11,cadetblue)). -assert(gv_color(x11,cadetblue1)). -assert(gv_color(x11,cadetblue2)). -assert(gv_color(x11,cadetblue3)). -assert(gv_color(x11,cadetblue4)). -assert(gv_color(x11,chartreuse)). -assert(gv_color(x11,chartreuse1)). -assert(gv_color(x11,chartreuse2)). -assert(gv_color(x11,chartreuse3)). -assert(gv_color(x11,chartreuse4)). -assert(gv_color(x11,chocolate)). -assert(gv_color(x11,chocolate1)). -assert(gv_color(x11,chocolate2)). -assert(gv_color(x11,chocolate3)). -assert(gv_color(x11,chocolate4)). -assert(gv_color(x11,coral)). -assert(gv_color(x11,coral1)). -assert(gv_color(x11,coral2)). -assert(gv_color(x11,coral3)). -assert(gv_color(x11,coral4)). -assert(gv_color(x11,cornflowerblue)). -assert(gv_color(x11,cornsilk)). -assert(gv_color(x11,cornsilk1)). -assert(gv_color(x11,cornsilk2)). -assert(gv_color(x11,cornsilk3)). -assert(gv_color(x11,cornsilk4)). -assert(gv_color(x11,crimson)). -assert(gv_color(x11,cyan)). -assert(gv_color(x11,cyan1)). -assert(gv_color(x11,cyan2)). -assert(gv_color(x11,cyan3)). -assert(gv_color(x11,cyan4)). -assert(gv_color(x11,darkgoldenrod)). -assert(gv_color(x11,darkgoldenrod1)). -assert(gv_color(x11,darkgoldenrod2)). -assert(gv_color(x11,darkgoldenrod3)). -assert(gv_color(x11,darkgoldenrod4)). -assert(gv_color(x11,darkgreen)). -assert(gv_color(x11,darkkhaki)). -assert(gv_color(x11,darkolivegreen)). -assert(gv_color(x11,darkolivegreen1)). -assert(gv_color(x11,darkolivegreen2)). -assert(gv_color(x11,darkolivegreen3)). -assert(gv_color(x11,darkolivegreen4)). -assert(gv_color(x11,darkorange)). -assert(gv_color(x11,darkorange1)). -assert(gv_color(x11,darkorange2)). -assert(gv_color(x11,darkorange3)). -assert(gv_color(x11,darkorange4)). -assert(gv_color(x11,darkorchid)). -assert(gv_color(x11,darkorchid1)). -assert(gv_color(x11,darkorchid2)). -assert(gv_color(x11,darkorchid3)). -assert(gv_color(x11,darkorchid4)). -assert(gv_color(x11,darksalmon)). -assert(gv_color(x11,darkseagreen)). -assert(gv_color(x11,darkseagreen1)). -assert(gv_color(x11,darkseagreen2)). -assert(gv_color(x11,darkseagreen3)). -assert(gv_color(x11,darkseagreen4)). -assert(gv_color(x11,darkslateblue)). -assert(gv_color(x11,darkslategray)). -assert(gv_color(x11,darkslategray1)). -assert(gv_color(x11,darkslategray2)). -assert(gv_color(x11,darkslategray3)). -assert(gv_color(x11,darkslategray4)). -assert(gv_color(x11,darkslategrey)). -assert(gv_color(x11,darkturquoise)). -assert(gv_color(x11,darkviolet)). -assert(gv_color(x11,deeppink)). -assert(gv_color(x11,deeppink1)). -assert(gv_color(x11,deeppink2)). -assert(gv_color(x11,deeppink3)). -assert(gv_color(x11,deeppink4)). -assert(gv_color(x11,deepskyblue)). -assert(gv_color(x11,deepskyblue1)). -assert(gv_color(x11,deepskyblue2)). -assert(gv_color(x11,deepskyblue3)). -assert(gv_color(x11,deepskyblue4)). -assert(gv_color(x11,dimgray)). -assert(gv_color(x11,dimgrey)). -assert(gv_color(x11,dodgerblue)). -assert(gv_color(x11,dodgerblue1)). -assert(gv_color(x11,dodgerblue2)). -assert(gv_color(x11,dodgerblue3)). -assert(gv_color(x11,dodgerblue4)). -assert(gv_color(x11,firebrick)). -assert(gv_color(x11,firebrick1)). -assert(gv_color(x11,firebrick2)). -assert(gv_color(x11,firebrick3)). -assert(gv_color(x11,firebrick4)). -assert(gv_color(x11,floralwhite)). -assert(gv_color(x11,forestgreen)). -assert(gv_color(x11,gainsboro)). -assert(gv_color(x11,ghostwhite)). -assert(gv_color(x11,gold)). -assert(gv_color(x11,gold1)). -assert(gv_color(x11,gold2)). -assert(gv_color(x11,gold3)). -assert(gv_color(x11,gold4)). -assert(gv_color(x11,goldenrod)). -assert(gv_color(x11,goldenrod1)). -assert(gv_color(x11,goldenrod2)). -assert(gv_color(x11,goldenrod3)). -assert(gv_color(x11,goldenrod4)). -assert(gv_color(x11,gray)). -assert(gv_color(x11,gray0)). -assert(gv_color(x11,gray1)). -assert(gv_color(x11,gray10)). -assert(gv_color(x11,gray100)). -assert(gv_color(x11,gray11)). -assert(gv_color(x11,gray12)). -assert(gv_color(x11,gray13)). -assert(gv_color(x11,gray14)). -assert(gv_color(x11,gray15)). -assert(gv_color(x11,gray16)). -assert(gv_color(x11,gray17)). -assert(gv_color(x11,gray18)). -assert(gv_color(x11,gray19)). -assert(gv_color(x11,gray2)). -assert(gv_color(x11,gray20)). -assert(gv_color(x11,gray21)). -assert(gv_color(x11,gray22)). -assert(gv_color(x11,gray23)). -assert(gv_color(x11,gray24)). -assert(gv_color(x11,gray25)). -assert(gv_color(x11,gray26)). -assert(gv_color(x11,gray27)). -assert(gv_color(x11,gray28)). -assert(gv_color(x11,gray29)). -assert(gv_color(x11,gray3)). -assert(gv_color(x11,gray30)). -assert(gv_color(x11,gray31)). -assert(gv_color(x11,gray32)). -assert(gv_color(x11,gray33)). -assert(gv_color(x11,gray34)). -assert(gv_color(x11,gray35)). -assert(gv_color(x11,gray36)). -assert(gv_color(x11,gray37)). -assert(gv_color(x11,gray38)). -assert(gv_color(x11,gray39)). -assert(gv_color(x11,gray4)). -assert(gv_color(x11,gray40)). -assert(gv_color(x11,gray41)). -assert(gv_color(x11,gray42)). -assert(gv_color(x11,gray43)). -assert(gv_color(x11,gray44)). -assert(gv_color(x11,gray45)). -assert(gv_color(x11,gray46)). -assert(gv_color(x11,gray47)). -assert(gv_color(x11,gray48)). -assert(gv_color(x11,gray49)). -assert(gv_color(x11,gray5)). -assert(gv_color(x11,gray50)). -assert(gv_color(x11,gray51)). -assert(gv_color(x11,gray52)). -assert(gv_color(x11,gray53)). -assert(gv_color(x11,gray54)). -assert(gv_color(x11,gray55)). -assert(gv_color(x11,gray56)). -assert(gv_color(x11,gray57)). -assert(gv_color(x11,gray58)). -assert(gv_color(x11,gray59)). -assert(gv_color(x11,gray6)). -assert(gv_color(x11,gray60)). -assert(gv_color(x11,gray61)). -assert(gv_color(x11,gray62)). -assert(gv_color(x11,gray63)). -assert(gv_color(x11,gray64)). -assert(gv_color(x11,gray65)). -assert(gv_color(x11,gray66)). -assert(gv_color(x11,gray67)). -assert(gv_color(x11,gray68)). -assert(gv_color(x11,gray69)). -assert(gv_color(x11,gray7)). -assert(gv_color(x11,gray70)). -assert(gv_color(x11,gray71)). -assert(gv_color(x11,gray72)). -assert(gv_color(x11,gray73)). -assert(gv_color(x11,gray74)). -assert(gv_color(x11,gray75)). -assert(gv_color(x11,gray76)). -assert(gv_color(x11,gray77)). -assert(gv_color(x11,gray78)). -assert(gv_color(x11,gray79)). -assert(gv_color(x11,gray8)). -assert(gv_color(x11,gray80)). -assert(gv_color(x11,gray81)). -assert(gv_color(x11,gray82)). -assert(gv_color(x11,gray83)). -assert(gv_color(x11,gray84)). -assert(gv_color(x11,gray85)). -assert(gv_color(x11,gray86)). -assert(gv_color(x11,gray87)). -assert(gv_color(x11,gray88)). -assert(gv_color(x11,gray89)). -assert(gv_color(x11,gray9)). -assert(gv_color(x11,gray90)). -assert(gv_color(x11,gray91)). -assert(gv_color(x11,gray92)). -assert(gv_color(x11,gray93)). -assert(gv_color(x11,gray94)). -assert(gv_color(x11,gray95)). -assert(gv_color(x11,gray96)). -assert(gv_color(x11,gray97)). -assert(gv_color(x11,gray98)). -assert(gv_color(x11,gray99)). -assert(gv_color(x11,green)). -assert(gv_color(x11,green1)). -assert(gv_color(x11,green2)). -assert(gv_color(x11,green3)). -assert(gv_color(x11,green4)). -assert(gv_color(x11,greenyellow)). -assert(gv_color(x11,grey)). -assert(gv_color(x11,grey0)). -assert(gv_color(x11,grey1)). -assert(gv_color(x11,grey10)). -assert(gv_color(x11,grey100)). -assert(gv_color(x11,grey11)). -assert(gv_color(x11,grey12)). -assert(gv_color(x11,grey13)). -assert(gv_color(x11,grey14)). -assert(gv_color(x11,grey15)). -assert(gv_color(x11,grey16)). -assert(gv_color(x11,grey17)). -assert(gv_color(x11,grey18)). -assert(gv_color(x11,grey19)). -assert(gv_color(x11,grey2)). -assert(gv_color(x11,grey20)). -assert(gv_color(x11,grey21)). -assert(gv_color(x11,grey22)). -assert(gv_color(x11,grey23)). -assert(gv_color(x11,grey24)). -assert(gv_color(x11,grey25)). -assert(gv_color(x11,grey26)). -assert(gv_color(x11,grey27)). -assert(gv_color(x11,grey28)). -assert(gv_color(x11,grey29)). -assert(gv_color(x11,grey3)). -assert(gv_color(x11,grey30)). -assert(gv_color(x11,grey31)). -assert(gv_color(x11,grey32)). -assert(gv_color(x11,grey33)). -assert(gv_color(x11,grey34)). -assert(gv_color(x11,grey35)). -assert(gv_color(x11,grey36)). -assert(gv_color(x11,grey37)). -assert(gv_color(x11,grey38)). -assert(gv_color(x11,grey39)). -assert(gv_color(x11,grey4)). -assert(gv_color(x11,grey40)). -assert(gv_color(x11,grey41)). -assert(gv_color(x11,grey42)). -assert(gv_color(x11,grey43)). -assert(gv_color(x11,grey44)). -assert(gv_color(x11,grey45)). -assert(gv_color(x11,grey46)). -assert(gv_color(x11,grey47)). -assert(gv_color(x11,grey48)). -assert(gv_color(x11,grey49)). -assert(gv_color(x11,grey5)). -assert(gv_color(x11,grey50)). -assert(gv_color(x11,grey51)). -assert(gv_color(x11,grey52)). -assert(gv_color(x11,grey53)). -assert(gv_color(x11,grey54)). -assert(gv_color(x11,grey55)). -assert(gv_color(x11,grey56)). -assert(gv_color(x11,grey57)). -assert(gv_color(x11,grey58)). -assert(gv_color(x11,grey59)). -assert(gv_color(x11,grey6)). -assert(gv_color(x11,grey60)). -assert(gv_color(x11,grey61)). -assert(gv_color(x11,grey62)). -assert(gv_color(x11,grey63)). -assert(gv_color(x11,grey64)). -assert(gv_color(x11,grey65)). -assert(gv_color(x11,grey66)). -assert(gv_color(x11,grey67)). -assert(gv_color(x11,grey68)). -assert(gv_color(x11,grey69)). -assert(gv_color(x11,grey7)). -assert(gv_color(x11,grey70)). -assert(gv_color(x11,grey71)). -assert(gv_color(x11,grey72)). -assert(gv_color(x11,grey73)). -assert(gv_color(x11,grey74)). -assert(gv_color(x11,grey75)). -assert(gv_color(x11,grey76)). -assert(gv_color(x11,grey77)). -assert(gv_color(x11,grey78)). -assert(gv_color(x11,grey79)). -assert(gv_color(x11,grey8)). -assert(gv_color(x11,grey80)). -assert(gv_color(x11,grey81)). -assert(gv_color(x11,grey82)). -assert(gv_color(x11,grey83)). -assert(gv_color(x11,grey84)). -assert(gv_color(x11,grey85)). -assert(gv_color(x11,grey86)). -assert(gv_color(x11,grey87)). -assert(gv_color(x11,grey88)). -assert(gv_color(x11,grey89)). -assert(gv_color(x11,grey9)). -assert(gv_color(x11,grey90)). -assert(gv_color(x11,grey91)). -assert(gv_color(x11,grey92)). -assert(gv_color(x11,grey93)). -assert(gv_color(x11,grey94)). -assert(gv_color(x11,grey95)). -assert(gv_color(x11,grey96)). -assert(gv_color(x11,grey97)). -assert(gv_color(x11,grey98)). -assert(gv_color(x11,grey99)). -assert(gv_color(x11,honeydew)). -assert(gv_color(x11,honeydew1)). -assert(gv_color(x11,honeydew2)). -assert(gv_color(x11,honeydew3)). -assert(gv_color(x11,honeydew4)). -assert(gv_color(x11,hotpink)). -assert(gv_color(x11,hotpink1)). -assert(gv_color(x11,hotpink2)). -assert(gv_color(x11,hotpink3)). -assert(gv_color(x11,hotpink4)). -assert(gv_color(x11,indianred)). -assert(gv_color(x11,indianred1)). -assert(gv_color(x11,indianred2)). -assert(gv_color(x11,indianred3)). -assert(gv_color(x11,indianred4)). -assert(gv_color(x11,indigo)). -assert(gv_color(x11,invis)). -assert(gv_color(x11,ivory)). -assert(gv_color(x11,ivory1)). -assert(gv_color(x11,ivory2)). -assert(gv_color(x11,ivory3)). -assert(gv_color(x11,ivory4)). -assert(gv_color(x11,khaki)). -assert(gv_color(x11,khaki1)). -assert(gv_color(x11,khaki2)). -assert(gv_color(x11,khaki3)). -assert(gv_color(x11,khaki4)). -assert(gv_color(x11,lavender)). -assert(gv_color(x11,lavenderblush)). -assert(gv_color(x11,lavenderblush1)). -assert(gv_color(x11,lavenderblush2)). -assert(gv_color(x11,lavenderblush3)). -assert(gv_color(x11,lavenderblush4)). -assert(gv_color(x11,lawngreen)). -assert(gv_color(x11,lemonchiffon)). -assert(gv_color(x11,lemonchiffon1)). -assert(gv_color(x11,lemonchiffon2)). -assert(gv_color(x11,lemonchiffon3)). -assert(gv_color(x11,lemonchiffon4)). -assert(gv_color(x11,lightblue)). -assert(gv_color(x11,lightblue1)). -assert(gv_color(x11,lightblue2)). -assert(gv_color(x11,lightblue3)). -assert(gv_color(x11,lightblue4)). -assert(gv_color(x11,lightcoral)). -assert(gv_color(x11,lightcyan)). -assert(gv_color(x11,lightcyan1)). -assert(gv_color(x11,lightcyan2)). -assert(gv_color(x11,lightcyan3)). -assert(gv_color(x11,lightcyan4)). -assert(gv_color(x11,lightgoldenrod)). -assert(gv_color(x11,lightgoldenrod1)). -assert(gv_color(x11,lightgoldenrod2)). -assert(gv_color(x11,lightgoldenrod3)). -assert(gv_color(x11,lightgoldenrod4)). -assert(gv_color(x11,lightgoldenrodyellow)). -assert(gv_color(x11,lightgray)). -assert(gv_color(x11,lightgrey)). -assert(gv_color(x11,lightpink)). -assert(gv_color(x11,lightpink1)). -assert(gv_color(x11,lightpink2)). -assert(gv_color(x11,lightpink3)). -assert(gv_color(x11,lightpink4)). -assert(gv_color(x11,lightsalmon)). -assert(gv_color(x11,lightsalmon1)). -assert(gv_color(x11,lightsalmon2)). -assert(gv_color(x11,lightsalmon3)). -assert(gv_color(x11,lightsalmon4)). -assert(gv_color(x11,lightseagreen)). -assert(gv_color(x11,lightskyblue)). -assert(gv_color(x11,lightskyblue1)). -assert(gv_color(x11,lightskyblue2)). -assert(gv_color(x11,lightskyblue3)). -assert(gv_color(x11,lightskyblue4)). -assert(gv_color(x11,lightslateblue)). -assert(gv_color(x11,lightslategray)). -assert(gv_color(x11,lightslategrey)). -assert(gv_color(x11,lightsteelblue)). -assert(gv_color(x11,lightsteelblue1)). -assert(gv_color(x11,lightsteelblue2)). -assert(gv_color(x11,lightsteelblue3)). -assert(gv_color(x11,lightsteelblue4)). -assert(gv_color(x11,lightyellow)). -assert(gv_color(x11,lightyellow1)). -assert(gv_color(x11,lightyellow2)). -assert(gv_color(x11,lightyellow3)). -assert(gv_color(x11,lightyellow4)). -assert(gv_color(x11,limegreen)). -assert(gv_color(x11,linen)). -assert(gv_color(x11,magenta)). -assert(gv_color(x11,magenta1)). -assert(gv_color(x11,magenta2)). -assert(gv_color(x11,magenta3)). -assert(gv_color(x11,magenta4)). -assert(gv_color(x11,maroon)). -assert(gv_color(x11,maroon1)). -assert(gv_color(x11,maroon2)). -assert(gv_color(x11,maroon3)). -assert(gv_color(x11,maroon4)). -assert(gv_color(x11,mediumaquamarine)). -assert(gv_color(x11,mediumblue)). -assert(gv_color(x11,mediumorchid)). -assert(gv_color(x11,mediumorchid1)). -assert(gv_color(x11,mediumorchid2)). -assert(gv_color(x11,mediumorchid3)). -assert(gv_color(x11,mediumorchid4)). -assert(gv_color(x11,mediumpurple)). -assert(gv_color(x11,mediumpurple1)). -assert(gv_color(x11,mediumpurple2)). -assert(gv_color(x11,mediumpurple3)). -assert(gv_color(x11,mediumpurple4)). -assert(gv_color(x11,mediumseagreen)). -assert(gv_color(x11,mediumslateblue)). -assert(gv_color(x11,mediumspringgreen)). -assert(gv_color(x11,mediumturquoise)). -assert(gv_color(x11,mediumvioletred)). -assert(gv_color(x11,midnightblue)). -assert(gv_color(x11,mintcream)). -assert(gv_color(x11,mistyrose)). -assert(gv_color(x11,mistyrose1)). -assert(gv_color(x11,mistyrose2)). -assert(gv_color(x11,mistyrose3)). -assert(gv_color(x11,mistyrose4)). -assert(gv_color(x11,moccasin)). -assert(gv_color(x11,navajowhite)). -assert(gv_color(x11,navajowhite1)). -assert(gv_color(x11,navajowhite2)). -assert(gv_color(x11,navajowhite3)). -assert(gv_color(x11,navajowhite4)). -assert(gv_color(x11,navy)). -assert(gv_color(x11,navyblue)). -assert(gv_color(x11,none)). -assert(gv_color(x11,oldlace)). -assert(gv_color(x11,olivedrab)). -assert(gv_color(x11,olivedrab1)). -assert(gv_color(x11,olivedrab2)). -assert(gv_color(x11,olivedrab3)). -assert(gv_color(x11,olivedrab4)). -assert(gv_color(x11,orange)). -assert(gv_color(x11,orange1)). -assert(gv_color(x11,orange2)). -assert(gv_color(x11,orange3)). -assert(gv_color(x11,orange4)). -assert(gv_color(x11,orangered)). -assert(gv_color(x11,orangered1)). -assert(gv_color(x11,orangered2)). -assert(gv_color(x11,orangered3)). -assert(gv_color(x11,orangered4)). -assert(gv_color(x11,orchid)). -assert(gv_color(x11,orchid1)). -assert(gv_color(x11,orchid2)). -assert(gv_color(x11,orchid3)). -assert(gv_color(x11,orchid4)). -assert(gv_color(x11,palegoldenrod)). -assert(gv_color(x11,palegreen)). -assert(gv_color(x11,palegreen1)). -assert(gv_color(x11,palegreen2)). -assert(gv_color(x11,palegreen3)). -assert(gv_color(x11,palegreen4)). -assert(gv_color(x11,paleturquoise)). -assert(gv_color(x11,paleturquoise1)). -assert(gv_color(x11,paleturquoise2)). -assert(gv_color(x11,paleturquoise3)). -assert(gv_color(x11,paleturquoise4)). -assert(gv_color(x11,palevioletred)). -assert(gv_color(x11,palevioletred1)). -assert(gv_color(x11,palevioletred2)). -assert(gv_color(x11,palevioletred3)). -assert(gv_color(x11,palevioletred4)). -assert(gv_color(x11,papayawhip)). -assert(gv_color(x11,peachpuff)). -assert(gv_color(x11,peachpuff1)). -assert(gv_color(x11,peachpuff2)). -assert(gv_color(x11,peachpuff3)). -assert(gv_color(x11,peachpuff4)). -assert(gv_color(x11,peru)). -assert(gv_color(x11,pink)). -assert(gv_color(x11,pink1)). -assert(gv_color(x11,pink2)). -assert(gv_color(x11,pink3)). -assert(gv_color(x11,pink4)). -assert(gv_color(x11,plum)). -assert(gv_color(x11,plum1)). -assert(gv_color(x11,plum2)). -assert(gv_color(x11,plum3)). -assert(gv_color(x11,plum4)). -assert(gv_color(x11,powderblue)). -assert(gv_color(x11,purple)). -assert(gv_color(x11,purple1)). -assert(gv_color(x11,purple2)). -assert(gv_color(x11,purple3)). -assert(gv_color(x11,purple4)). -assert(gv_color(x11,red)). -assert(gv_color(x11,red1)). -assert(gv_color(x11,red2)). -assert(gv_color(x11,red3)). -assert(gv_color(x11,red4)). -assert(gv_color(x11,rosybrown)). -assert(gv_color(x11,rosybrown1)). -assert(gv_color(x11,rosybrown2)). -assert(gv_color(x11,rosybrown3)). -assert(gv_color(x11,rosybrown4)). -assert(gv_color(x11,royalblue)). -assert(gv_color(x11,royalblue1)). -assert(gv_color(x11,royalblue2)). -assert(gv_color(x11,royalblue3)). -assert(gv_color(x11,royalblue4)). -assert(gv_color(x11,saddlebrown)). -assert(gv_color(x11,salmon)). -assert(gv_color(x11,salmon1)). -assert(gv_color(x11,salmon2)). -assert(gv_color(x11,salmon3)). -assert(gv_color(x11,salmon4)). -assert(gv_color(x11,sandybrown)). -assert(gv_color(x11,seagreen)). -assert(gv_color(x11,seagreen1)). -assert(gv_color(x11,seagreen2)). -assert(gv_color(x11,seagreen3)). -assert(gv_color(x11,seagreen4)). -assert(gv_color(x11,seashell)). -assert(gv_color(x11,seashell1)). -assert(gv_color(x11,seashell2)). -assert(gv_color(x11,seashell3)). -assert(gv_color(x11,seashell4)). -assert(gv_color(x11,sienna)). -assert(gv_color(x11,sienna1)). -assert(gv_color(x11,sienna2)). -assert(gv_color(x11,sienna3)). -assert(gv_color(x11,sienna4)). -assert(gv_color(x11,skyblue)). -assert(gv_color(x11,skyblue1)). -assert(gv_color(x11,skyblue2)). -assert(gv_color(x11,skyblue3)). -assert(gv_color(x11,skyblue4)). -assert(gv_color(x11,slateblue)). -assert(gv_color(x11,slateblue1)). -assert(gv_color(x11,slateblue2)). -assert(gv_color(x11,slateblue3)). -assert(gv_color(x11,slateblue4)). -assert(gv_color(x11,slategray)). -assert(gv_color(x11,slategray1)). -assert(gv_color(x11,slategray2)). -assert(gv_color(x11,slategray3)). -assert(gv_color(x11,slategray4)). -assert(gv_color(x11,slategrey)). -assert(gv_color(x11,snow)). -assert(gv_color(x11,snow1)). -assert(gv_color(x11,snow2)). -assert(gv_color(x11,snow3)). -assert(gv_color(x11,snow4)). -assert(gv_color(x11,springgreen)). -assert(gv_color(x11,springgreen1)). -assert(gv_color(x11,springgreen2)). -assert(gv_color(x11,springgreen3)). -assert(gv_color(x11,springgreen4)). -assert(gv_color(x11,steelblue)). -assert(gv_color(x11,steelblue1)). -assert(gv_color(x11,steelblue2)). -assert(gv_color(x11,steelblue3)). -assert(gv_color(x11,steelblue4)). -assert(gv_color(x11,tan)). -assert(gv_color(x11,tan1)). -assert(gv_color(x11,tan2)). -assert(gv_color(x11,tan3)). -assert(gv_color(x11,tan4)). -assert(gv_color(x11,thistle)). -assert(gv_color(x11,thistle1)). -assert(gv_color(x11,thistle2)). -assert(gv_color(x11,thistle3)). -assert(gv_color(x11,thistle4)). -assert(gv_color(x11,tomato)). -assert(gv_color(x11,tomato1)). -assert(gv_color(x11,tomato2)). -assert(gv_color(x11,tomato3)). -assert(gv_color(x11,tomato4)). -assert(gv_color(x11,transparent)). -assert(gv_color(x11,turquoise)). -assert(gv_color(x11,turquoise1)). -assert(gv_color(x11,turquoise2)). -assert(gv_color(x11,turquoise3)). -assert(gv_color(x11,turquoise4)). -assert(gv_color(x11,violet)). -assert(gv_color(x11,violetred)). -assert(gv_color(x11,violetred1)). -assert(gv_color(x11,violetred2)). -assert(gv_color(x11,violetred3)). -assert(gv_color(x11,violetred4)). -assert(gv_color(x11,wheat)). -assert(gv_color(x11,wheat1)). -assert(gv_color(x11,wheat2)). -assert(gv_color(x11,wheat3)). -assert(gv_color(x11,wheat4)). -assert(gv_color(x11,white)). -assert(gv_color(x11,whitesmoke)). -assert(gv_color(x11,yellow)). -assert(gv_color(x11,yellow1)). -assert(gv_color(x11,yellow2)). -assert(gv_color(x11,yellow3)). -assert(gv_color(x11,yellow4)). -assert(gv_color(x11,yellowgreen)). -assert(gv_color(svg,aliceblue)). -assert(gv_color(svg,antiquewhite)). -assert(gv_color(svg,aqua)). -assert(gv_color(svg,aquamarine)). -assert(gv_color(svg,azure)). -assert(gv_color(svg,beige)). -assert(gv_color(svg,bisque)). -assert(gv_color(svg,black)). -assert(gv_color(svg,blanchedalmond)). -assert(gv_color(svg,blue)). -assert(gv_color(svg,blueviolet)). -assert(gv_color(svg,brown)). -assert(gv_color(svg,burlywood)). -assert(gv_color(svg,cadetblue)). -assert(gv_color(svg,chartreuse)). -assert(gv_color(svg,chocolate)). -assert(gv_color(svg,coral)). -assert(gv_color(svg,cornflowerblue)). -assert(gv_color(svg,cornsilk)). -assert(gv_color(svg,crimson)). -assert(gv_color(svg,cyan)). -assert(gv_color(svg,darkblue)). -assert(gv_color(svg,darkcyan)). -assert(gv_color(svg,darkgoldenrod)). -assert(gv_color(svg,darkgray)). -assert(gv_color(svg,darkgreen)). -assert(gv_color(svg,darkgrey)). -assert(gv_color(svg,darkkhaki)). -assert(gv_color(svg,darkmagenta)). -assert(gv_color(svg,darkolivegreen)). -assert(gv_color(svg,darkorange)). -assert(gv_color(svg,darkorchid)). -assert(gv_color(svg,darkred)). -assert(gv_color(svg,darksalmon)). -assert(gv_color(svg,darkseagreen)). -assert(gv_color(svg,darkslateblue)). -assert(gv_color(svg,darkslategray)). -assert(gv_color(svg,darkslategrey)). -assert(gv_color(svg,darkturquoise)). -assert(gv_color(svg,darkviolet)). -assert(gv_color(svg,deeppink)). -assert(gv_color(svg,deepskyblue)). -assert(gv_color(svg,dimgray)). -assert(gv_color(svg,dimgrey)). -assert(gv_color(svg,dodgerblue)). -assert(gv_color(svg,firebrick)). -assert(gv_color(svg,floralwhite)). -assert(gv_color(svg,forestgreen)). -assert(gv_color(svg,fuchsia)). -assert(gv_color(svg,gainsboro)). -assert(gv_color(svg,ghostwhite)). -assert(gv_color(svg,gold)). -assert(gv_color(svg,goldenrod)). -assert(gv_color(svg,gray)). -assert(gv_color(svg,grey)). -assert(gv_color(svg,green)). -assert(gv_color(svg,greenyellow)). -assert(gv_color(svg,honeydew)). -assert(gv_color(svg,hotpink)). -assert(gv_color(svg,indianred)). -assert(gv_color(svg,indigo)). -assert(gv_color(svg,ivory)). -assert(gv_color(svg,khaki)). -assert(gv_color(svg,lavender)). -assert(gv_color(svg,lavenderblush)). -assert(gv_color(svg,lawngreen)). -assert(gv_color(svg,lemonchiffon)). -assert(gv_color(svg,lightblue)). -assert(gv_color(svg,lightcoral)). -assert(gv_color(svg,lightcyan)). -assert(gv_color(svg,lightgoldenrodyellow)). -assert(gv_color(svg,lightgray)). -assert(gv_color(svg,lightgreen)). -assert(gv_color(svg,lightgrey)). -assert(gv_color(svg,lightpink)). -assert(gv_color(svg,lightsalmon)). -assert(gv_color(svg,lightseagreen)). -assert(gv_color(svg,lightskyblue)). -assert(gv_color(svg,lightslategray)). -assert(gv_color(svg,lightslategrey)). -assert(gv_color(svg,lightsteelblue)). -assert(gv_color(svg,lightyellow)). -assert(gv_color(svg,lime)). -assert(gv_color(svg,limegreen)). -assert(gv_color(svg,linen)). -assert(gv_color(svg,magenta)). -assert(gv_color(svg,maroon)). -assert(gv_color(svg,mediumaquamarine)). -assert(gv_color(svg,mediumblue)). -assert(gv_color(svg,mediumorchid)). -assert(gv_color(svg,mediumpurple)). -assert(gv_color(svg,mediumseagreen)). -assert(gv_color(svg,mediumslateblue)). -assert(gv_color(svg,mediumspringgreen)). -assert(gv_color(svg,mediumturquoise)). -assert(gv_color(svg,mediumvioletred)). -assert(gv_color(svg,midnightblue)). -assert(gv_color(svg,mintcream)). -assert(gv_color(svg,mistyrose)). -assert(gv_color(svg,moccasin)). -assert(gv_color(svg,navajowhite)). -assert(gv_color(svg,navy)). -assert(gv_color(svg,oldlace)). -assert(gv_color(svg,olive)). -assert(gv_color(svg,olivedrab)). -assert(gv_color(svg,orange)). -assert(gv_color(svg,orangered)). -assert(gv_color(svg,orchid)). -assert(gv_color(svg,palegoldenrod)). -assert(gv_color(svg,palegreen)). -assert(gv_color(svg,paleturquoise)). -assert(gv_color(svg,palevioletred)). -assert(gv_color(svg,papayawhip)). -assert(gv_color(svg,peachpuff)). -assert(gv_color(svg,peru)). -assert(gv_color(svg,pink)). -assert(gv_color(svg,plum)). -assert(gv_color(svg,powderblue)). -assert(gv_color(svg,purple)). -assert(gv_color(svg,red)). -assert(gv_color(svg,rosybrown)). -assert(gv_color(svg,royalblue)). -assert(gv_color(svg,saddlebrown)). -assert(gv_color(svg,salmon)). -assert(gv_color(svg,sandybrown)). -assert(gv_color(svg,seagreen)). -assert(gv_color(svg,seashell)). -assert(gv_color(svg,sienna)). -assert(gv_color(svg,silver)). -assert(gv_color(svg,skyblue)). -assert(gv_color(svg,slateblue)). -assert(gv_color(svg,slategray)). -assert(gv_color(svg,slategrey)). -assert(gv_color(svg,snow)). -assert(gv_color(svg,springgreen)). -assert(gv_color(svg,steelblue)). -assert(gv_color(svg,tan)). -assert(gv_color(svg,teal)). -assert(gv_color(svg,thistle)). -assert(gv_color(svg,tomato)). -assert(gv_color(svg,turquoise)). -assert(gv_color(svg,violet)). -assert(gv_color(svg,wheat)). -assert(gv_color(svg,white)). -assert(gv_color(svg,whitesmoke)). -assert(gv_color(svg,yellow)). -assert(gv_color(svg,yellowgreen)). diff --git a/prolog/gv/gv_attrs.data b/prolog/gv/gv_attrs.data new file mode 100644 index 0000000..95fc680 --- /dev/null +++ b/prolog/gv/gv_attrs.data @@ -0,0 +1,169 @@ +gv_attr('Damping',[graph],[double],'0.99','0.0','neato only'). +gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only'). +gv_attr('URL',[cluster,edge,graph,node],[escString],_G59448,'','svg, postscript, map only'). +gv_attr('_background',[graph],[string],_G59644,'',''). +gv_attr(area,[cluster,node],[double],'1.0','0','patchwork only'). +gv_attr(arrowhead,[edge],[arrowType],normal,'',''). +gv_attr(arrowsize,[edge],[double],'1.0','0.0',''). +gv_attr(arrowtail,[edge],[arrowType],normal,'',''). +gv_attr(bb,[graph],[rect],'','','write only'). +gv_attr(bgcolor,[cluster,graph],[color,colorList],_G60571,'',''). +gv_attr(center,[graph],[bool],false,'',''). +gv_attr(charset,[graph],[string],'\"UTF-8\"','',''). +gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only'). +gv_attr(color,[cluster,edge,node],[color,colorList],black,'',''). +gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','',''). +gv_attr(comment,[edge,graph,node],[string],'','',''). +gv_attr(compound,[graph],[bool],false,'','dot only'). +gv_attr(concentrate,[graph],[bool],false,'',''). +gv_attr(constraint,[edge],[bool],true,'','dot only'). +gv_attr(decorate,[edge],[bool],false,'',''). +gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only'). +gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only'). +gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only'). +gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','',''). +gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only'). +gv_attr(distortion,[node],[double],'0.0','-100.0',''). +gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only'). +gv_attr(edgeURL,[edge],[escString],'','','svg, map only'). +gv_attr(edgehref,[edge],[escString],'','','svg, map only'). +gv_attr(edgetarget,[edge],[escString],_G63711,'','svg, map only'). +gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only'). +gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only'). +gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot'). +gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','',''). +gv_attr(fixedsize,[node],[bool,string],false,'',''). +gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'',''). +gv_attr(fontname,[cluster,edge,graph,node],[string],'\"Times-Roman\"','',''). +gv_attr(fontnames,[graph],[string],'','','svg only'). +gv_attr(fontpath,[graph],[string],'system-dependent','',''). +gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0',''). +gv_attr(forcelabels,[graph],[bool],true,'',''). +gv_attr(gradientangle,[cluster,graph,node],[int],'','',''). +gv_attr(group,[node],[string],'','','dot only'). +gv_attr(headURL,[edge],[escString],'','','svg, map only'). +gv_attr(head_lp,[edge],[point],'','','write only'). +gv_attr(headclip,[edge],[bool],true,'',''). +gv_attr(headhref,[edge],[escString],'','','svg, map only'). +gv_attr(headlabel,[edge],[lblString],'','',''). +gv_attr(headport,[edge],[portPos],center,'',''). +gv_attr(headtarget,[edge],[escString],_G4892,'','svg, map only'). +gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only'). +gv_attr(height,[node],[double],'0.5','0.02',''). +gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only'). +gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only'). +gv_attr(image,[node],[string],'','',''). +gv_attr(imagepath,[graph],[string],'','',''). +gv_attr(imagescale,[node],[bool,string],false,'',''). +gv_attr(inputscale,[graph],[double],_G6250,'','fdp, neato only'). +gv_attr(label,[cluster,edge,graph,node],[lblString],'\"\\\\N\" (nodes)\"\" (otherwise)','',''). +gv_attr(labelURL,[edge],[escString],'','','svg, map only'). +gv_attr(label_scheme,[graph],[int],'0','0','sfdp only'). +gv_attr(labelangle,[edge],[double],'-25.0','-180.0',''). +gv_attr(labeldistance,[edge],[double],'1.0','0.0',''). +gv_attr(labelfloat,[edge],[bool],false,'',''). +gv_attr(labelfontcolor,[edge],[color],black,'',''). +gv_attr(labelfontname,[edge],[string],'\"Times-Roman\"','',''). +gv_attr(labelfontsize,[edge],[double],'14.0','1.0',''). +gv_attr(labelhref,[edge],[escString],'','','svg, map only'). +gv_attr(labeljust,[cluster,graph],[string],'\"c\"','',''). +gv_attr(labelloc,[cluster,graph,node],[string],'\"t\"(clusters)\"b\"(root graphs)\"c\"(nodes)','',''). +gv_attr(labeltarget,[edge],[escString],_G8276,'','svg, map only'). +gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only'). +gv_attr(landscape,[graph],[bool],false,'',''). +gv_attr(layer,[cluster,edge,node],[layerRange],'','',''). +gv_attr(layerlistsep,[graph],[string],'\",\"','',''). +gv_attr(layers,[graph],[layerList],'','',''). +gv_attr(layerselect,[graph],[layerRange],'','',''). +gv_attr(layersep,[graph],[string],'\" :\\\\t\"','',''). +gv_attr(layout,[graph],[string],'','',''). +gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only'). +gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only'). +gv_attr(levelsgap,[graph],[double],'0.0','','neato only'). +gv_attr(lhead,[edge],[string],'','','dot only'). +gv_attr(lheight,[cluster,graph],[double],'','','write only'). +gv_attr(lp,[cluster,edge,graph],[point],'','','write only'). +gv_attr(ltail,[edge],[string],'','','dot only'). +gv_attr(lwidth,[cluster,graph],[double],'','','write only'). +gv_attr(margin,[cluster,graph,node],[double,point],'','',''). +gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only'). +gv_attr(mclimit,[graph],[double],'1.0','','dot only'). +gv_attr(mindist,[graph],[double],'1.0','0.0','circo only'). +gv_attr(minlen,[edge],[int],'1','0','dot only'). +gv_attr(mode,[graph],[string],major,'','neato only'). +gv_attr(model,[graph],[string],shortpath,'','neato only'). +gv_attr(mosek,[graph],[bool],false,'','neato only'). +gv_attr(nodesep,[graph],[double],'0.25','0.02',''). +gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'',''). +gv_attr(normalize,[graph],[double,bool],false,'','not dot'). +gv_attr(notranslate,[graph],[bool],false,'','neato only'). +gv_attr(nslimitnslimit1,[graph],[double],'','','dot only'). +gv_attr(ordering,[graph,node],[string],'','','dot only'). +gv_attr(orientation,[node],[double],'0.0','360.0',''). +gv_attr(orientation,[graph],[string],'','',''). +gv_attr(outputorder,[graph],[outputMode],breadthfirst,'',''). +gv_attr(overlap,[graph],[string,bool],true,'','not dot'). +gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only'). +gv_attr(overlap_shrink,[graph],[bool],true,'','prism only'). +gv_attr(pack,[graph],[bool,int],false,'',''). +gv_attr(packmode,[graph],[packMode],node,'',''). +gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','',''). +gv_attr(page,[graph],[double,point],'','',''). +gv_attr(pagedir,[graph],[pagedir],'BL','',''). +gv_attr(pencolor,[cluster],[color],black,'',''). +gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0',''). +gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0',''). +gv_attr(pin,[node],[bool],false,'','fdp, neato only'). +gv_attr(pos,[edge,node],[point,splineType],'','',''). +gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only'). +gv_attr(quantum,[graph],[double],'0.0','0.0',''). +gv_attr(rank,[subgraph],[rankType],'','','dot only'). +gv_attr(rankdir,[graph],[rankdir],'TB','','dot only'). +gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only'). +gv_attr(ratio,[graph],[double,string],'','',''). +gv_attr(rects,[node],[rect],'','','write only'). +gv_attr(regular,[node],[bool],false,'',''). +gv_attr(remincross,[graph],[bool],true,'','dot only'). +gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only'). +gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only'). +gv_attr(root,[graph,node],[string,bool],'(graphs)false(nodes)','','circo, twopi only'). +gv_attr(rotate,[graph],[int],'0','',''). +gv_attr(rotation,[graph],[double],'0','','sfdp only'). +gv_attr(samehead,[edge],[string],'','','dot only'). +gv_attr(sametail,[edge],[string],'','','dot only'). +gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','',''). +gv_attr(scale,[graph],[double,point],'','','not dot'). +gv_attr(searchsize,[graph],[int],'30','','dot only'). +gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot'). +gv_attr(shape,[node],[shape],ellipse,'',''). +gv_attr(shapefile,[node],[string],'','',''). +gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only'). +gv_attr(sides,[node],[int],'4','0',''). +gv_attr(size,[graph],[double,point],'','',''). +gv_attr(skew,[node],[double],'0.0','-100.0',''). +gv_attr(smoothing,[graph],[smoothType],'\"none\"','','sfdp only'). +gv_attr(sortv,[cluster,graph,node],[int],'0','0',''). +gv_attr(splines,[graph],[bool,string],'','',''). +gv_attr(start,[graph],[startType],'','','fdp, neato only'). +gv_attr(style,[cluster,edge,graph,node],[style],'','',''). +gv_attr(stylesheet,[graph],[string],'','','svg only'). +gv_attr(tailURL,[edge],[escString],'','','svg, map only'). +gv_attr(tail_lp,[edge],[point],'','','write only'). +gv_attr(tailclip,[edge],[bool],true,'',''). +gv_attr(tailhref,[edge],[escString],'','','svg, map only'). +gv_attr(taillabel,[edge],[lblString],'','',''). +gv_attr(tailport,[edge],[portPos],center,'',''). +gv_attr(tailtarget,[edge],[escString],_G21528,'','svg, map only'). +gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only'). +gv_attr(target,[cluster,edge,graph,node],[escString,string],_G21878,'','svg, map only'). +gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only'). +gv_attr(truecolor,[graph],[bool],'','','bitmap output only'). +gv_attr(vertices,[node],[pointList],'','','write only'). +gv_attr(viewport,[graph],[viewPort],'','',''). +gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot'). +gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)',''). +gv_attr(width,[node],[double],'0.75','0.01',''). +gv_attr(xdotversion,[graph],[string],'','','xdot only'). +gv_attr(xlabel,[edge,node],[lblString],'','',''). +gv_attr(xlp,[edge,node],[point],'','','write only'). +gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000',''). diff --git a/prolog/gv/gv_attrs.log b/prolog/gv/gv_attrs.log deleted file mode 100644 index a9c6010..0000000 --- a/prolog/gv/gv_attrs.log +++ /dev/null @@ -1,169 +0,0 @@ -assert(gv_attr('Damping',[graph],[double],'0.99','0.0','neato only')). -assert(gv_attr('K',[cluster,graph],[double],'0.3','0','sfdp, fdp only')). -assert(gv_attr('URL',[cluster,edge,graph,node],[escString],_,'','svg, postscript, map only')). -assert(gv_attr('_background',[graph],[string],_,'','')). -assert(gv_attr(area,[cluster,node],[double],'1.0','0','patchwork only')). -assert(gv_attr(arrowhead,[edge],[arrowType],normal,'','')). -assert(gv_attr(arrowsize,[edge],[double],'1.0','0.0','')). -assert(gv_attr(arrowtail,[edge],[arrowType],normal,'','')). -assert(gv_attr(bb,[graph],[rect],'','','write only')). -assert(gv_attr(bgcolor,[cluster,graph],[color,colorList],_,'','')). -assert(gv_attr(center,[graph],[bool],false,'','')). -assert(gv_attr(charset,[graph],[string],'\"UTF-8\"','','')). -assert(gv_attr(clusterrank,[graph],[clusterMode],local,'','dot only')). -assert(gv_attr(color,[cluster,edge,node],[color,colorList],black,'','')). -assert(gv_attr(colorscheme,[cluster,edge,graph,node],[string],'','','')). -assert(gv_attr(comment,[edge,graph,node],[string],'','','')). -assert(gv_attr(compound,[graph],[bool],false,'','dot only')). -assert(gv_attr(concentrate,[graph],[bool],false,'','')). -assert(gv_attr(constraint,[edge],[bool],true,'','dot only')). -assert(gv_attr(decorate,[edge],[bool],false,'','')). -assert(gv_attr(defaultdist,[graph],[double],'1+(avg. len)*sqrt(|V|)',epsilon,'neato only')). -assert(gv_attr(dim,[graph],[int],'2','2','sfdp, fdp, neato only')). -assert(gv_attr(dimen,[graph],[int],'2','2','sfdp, fdp, neato only')). -assert(gv_attr(dir,[edge],[dirType],'forward(directed)none(undirected)','','')). -assert(gv_attr(diredgeconstraints,[graph],[string,bool],false,'','neato only')). -assert(gv_attr(distortion,[node],[double],'0.0','-100.0','')). -assert(gv_attr(dpi,[graph],[double],'96.00.0','','svg, bitmap output only')). -assert(gv_attr(edgeURL,[edge],[escString],'','','svg, map only')). -assert(gv_attr(edgehref,[edge],[escString],'','','svg, map only')). -assert(gv_attr(edgetarget,[edge],[escString],_,'','svg, map only')). -assert(gv_attr(edgetooltip,[edge],[escString],'','','svg, cmap only')). -assert(gv_attr(epsilon,[graph],[double],'.0001 * # nodes(mode == KK).0001(mode == major)','','neato only')). -assert(gv_attr(esep,[graph],[addDouble,addPoint],'+3','','not dot')). -assert(gv_attr(fillcolor,[cluster,edge,node],[color,colorList],'lightgrey(nodes)black(clusters)','','')). -assert(gv_attr(fixedsize,[node],[bool,string],false,'','')). -assert(gv_attr(fontcolor,[cluster,edge,graph,node],[color],black,'','')). -assert(gv_attr(fontname,[cluster,edge,graph,node],[string],'\"Times-Roman\"','','')). -assert(gv_attr(fontnames,[graph],[string],'','','svg only')). -assert(gv_attr(fontpath,[graph],[string],'system-dependent','','')). -assert(gv_attr(fontsize,[cluster,edge,graph,node],[double],'14.0','1.0','')). -assert(gv_attr(forcelabels,[graph],[bool],true,'','')). -assert(gv_attr(gradientangle,[cluster,graph,node],[int],'','','')). -assert(gv_attr(group,[node],[string],'','','dot only')). -assert(gv_attr(headURL,[edge],[escString],'','','svg, map only')). -assert(gv_attr(head_lp,[edge],[point],'','','write only')). -assert(gv_attr(headclip,[edge],[bool],true,'','')). -assert(gv_attr(headhref,[edge],[escString],'','','svg, map only')). -assert(gv_attr(headlabel,[edge],[lblString],'','','')). -assert(gv_attr(headport,[edge],[portPos],center,'','')). -assert(gv_attr(headtarget,[edge],[escString],_,'','svg, map only')). -assert(gv_attr(headtooltip,[edge],[escString],'','','svg, cmap only')). -assert(gv_attr(height,[node],[double],'0.5','0.02','')). -assert(gv_attr(href,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')). -assert(gv_attr(id,[cluster,edge,graph,node],[escString],'','','svg, postscript, map only')). -assert(gv_attr(image,[node],[string],'','','')). -assert(gv_attr(imagepath,[graph],[string],'','','')). -assert(gv_attr(imagescale,[node],[bool,string],false,'','')). -assert(gv_attr(inputscale,[graph],[double],_,'','fdp, neato only')). -assert(gv_attr(label,[cluster,edge,graph,node],[lblString],'\"\\\\N\" (nodes)\"\" (otherwise)','','')). -assert(gv_attr(labelURL,[edge],[escString],'','','svg, map only')). -assert(gv_attr(label_scheme,[graph],[int],'0','0','sfdp only')). -assert(gv_attr(labelangle,[edge],[double],'-25.0','-180.0','')). -assert(gv_attr(labeldistance,[edge],[double],'1.0','0.0','')). -assert(gv_attr(labelfloat,[edge],[bool],false,'','')). -assert(gv_attr(labelfontcolor,[edge],[color],black,'','')). -assert(gv_attr(labelfontname,[edge],[string],'\"Times-Roman\"','','')). -assert(gv_attr(labelfontsize,[edge],[double],'14.0','1.0','')). -assert(gv_attr(labelhref,[edge],[escString],'','','svg, map only')). -assert(gv_attr(labeljust,[cluster,graph],[string],'\"c\"','','')). -assert(gv_attr(labelloc,[cluster,graph,node],[string],'\"t\"(clusters)\"b\"(root graphs)\"c\"(nodes)','','')). -assert(gv_attr(labeltarget,[edge],[escString],_,'','svg, map only')). -assert(gv_attr(labeltooltip,[edge],[escString],'','','svg, cmap only')). -assert(gv_attr(landscape,[graph],[bool],false,'','')). -assert(gv_attr(layer,[cluster,edge,node],[layerRange],'','','')). -assert(gv_attr(layerlistsep,[graph],[string],'\",\"','','')). -assert(gv_attr(layers,[graph],[layerList],'','','')). -assert(gv_attr(layerselect,[graph],[layerRange],'','','')). -assert(gv_attr(layersep,[graph],[string],'\" :\\\\t\"','','')). -assert(gv_attr(layout,[graph],[string],'','','')). -assert(gv_attr(len,[edge],[double],'1.0(neato)0.3(fdp)','','fdp, neato only')). -assert(gv_attr(levels,[graph],[int],'MAXINT','0.0','sfdp only')). -assert(gv_attr(levelsgap,[graph],[double],'0.0','','neato only')). -assert(gv_attr(lhead,[edge],[string],'','','dot only')). -assert(gv_attr(lheight,[cluster,graph],[double],'','','write only')). -assert(gv_attr(lp,[cluster,edge,graph],[point],'','','write only')). -assert(gv_attr(ltail,[edge],[string],'','','dot only')). -assert(gv_attr(lwidth,[cluster,graph],[double],'','','write only')). -assert(gv_attr(margin,[cluster,graph,node],[double,point],'','','')). -assert(gv_attr(maxiter,[graph],[int],'100 * # nodes(mode == KK)200(mode == major)600(fdp)','','fdp, neato only')). -assert(gv_attr(mclimit,[graph],[double],'1.0','','dot only')). -assert(gv_attr(mindist,[graph],[double],'1.0','0.0','circo only')). -assert(gv_attr(minlen,[edge],[int],'1','0','dot only')). -assert(gv_attr(mode,[graph],[string],major,'','neato only')). -assert(gv_attr(model,[graph],[string],shortpath,'','neato only')). -assert(gv_attr(mosek,[graph],[bool],false,'','neato only')). -assert(gv_attr(nodesep,[graph],[double],'0.25','0.02','')). -assert(gv_attr(nojustify,[cluster,edge,graph,node],[bool],false,'','')). -assert(gv_attr(normalize,[graph],[double,bool],false,'','not dot')). -assert(gv_attr(notranslate,[graph],[bool],false,'','neato only')). -assert(gv_attr('nslimit nslimit1',[graph],[double],'','','dot only')). -assert(gv_attr(ordering,[graph,node],[string],'','','dot only')). -assert(gv_attr(orientation,[node],[double],'0.0','360.0','')). -assert(gv_attr(orientation,[graph],[string],'','','')). -assert(gv_attr(outputorder,[graph],[outputMode],breadthfirst,'','')). -assert(gv_attr(overlap,[graph],[string,bool],true,'','not dot')). -assert(gv_attr(overlap_scaling,[graph],[double],'-4','-1.0e10','prism only')). -assert(gv_attr(overlap_shrink,[graph],[bool],true,'','prism only')). -assert(gv_attr(pack,[graph],[bool,int],false,'','')). -assert(gv_attr(packmode,[graph],[packMode],node,'','')). -assert(gv_attr(pad,[graph],[double,point],'0.0555 (4 points)','','')). -assert(gv_attr(page,[graph],[double,point],'','','')). -assert(gv_attr(pagedir,[graph],[pagedir],'BL','','')). -assert(gv_attr(pencolor,[cluster],[color],black,'','')). -assert(gv_attr(penwidth,[cluster,edge,node],[double],'1.0','0.0','')). -assert(gv_attr(peripheries,[cluster,node],[int],'shape default(nodes)1(clusters)','0','')). -assert(gv_attr(pin,[node],[bool],false,'','fdp, neato only')). -assert(gv_attr(pos,[edge,node],[point,splineType],'','','')). -assert(gv_attr(quadtree,[graph],[quadType,bool],normal,'','sfdp only')). -assert(gv_attr(quantum,[graph],[double],'0.0','0.0','')). -assert(gv_attr(rank,[subgraph],[rankType],'','','dot only')). -assert(gv_attr(rankdir,[graph],[rankdir],'TB','','dot only')). -assert(gv_attr(ranksep,[graph],[double,doubleList],'0.5(dot)1.0(twopi)','0.02','twopi, dot only')). -assert(gv_attr(ratio,[graph],[double,string],'','','')). -assert(gv_attr(rects,[node],[rect],'','','write only')). -assert(gv_attr(regular,[node],[bool],false,'','')). -assert(gv_attr(remincross,[graph],[bool],true,'','dot only')). -assert(gv_attr(repulsiveforce,[graph],[double],'1.0','0.0','sfdp only')). -assert(gv_attr(resolution,[graph],[double],'96.00.0','','svg, bitmap output only')). -assert(gv_attr(root,[graph,node],[string,bool],'(graphs)false(nodes)','','circo, twopi only')). -assert(gv_attr(rotate,[graph],[int],'0','','')). -assert(gv_attr(rotation,[graph],[double],'0','','sfdp only')). -assert(gv_attr(samehead,[edge],[string],'','','dot only')). -assert(gv_attr(sametail,[edge],[string],'','','dot only')). -assert(gv_attr(samplepoints,[node],[int],'8(output)20(overlap and image maps)','','')). -assert(gv_attr(scale,[graph],[double,point],'','','not dot')). -assert(gv_attr(searchsize,[graph],[int],'30','','dot only')). -assert(gv_attr(sep,[graph],[addDouble,addPoint],'+4','','not dot')). -assert(gv_attr(shape,[node],[shape],ellipse,'','')). -assert(gv_attr(shapefile,[node],[string],'','','')). -assert(gv_attr(showboxes,[edge,graph,node],[int],'0','0','dot only')). -assert(gv_attr(sides,[node],[int],'4','0','')). -assert(gv_attr(size,[graph],[double,point],'','','')). -assert(gv_attr(skew,[node],[double],'0.0','-100.0','')). -assert(gv_attr(smoothing,[graph],[smoothType],'\"none\"','','sfdp only')). -assert(gv_attr(sortv,[cluster,graph,node],[int],'0','0','')). -assert(gv_attr(splines,[graph],[bool,string],'','','')). -assert(gv_attr(start,[graph],[startType],'','','fdp, neato only')). -assert(gv_attr(style,[cluster,edge,graph,node],[style],'','','')). -assert(gv_attr(stylesheet,[graph],[string],'','','svg only')). -assert(gv_attr(tailURL,[edge],[escString],'','','svg, map only')). -assert(gv_attr(tail_lp,[edge],[point],'','','write only')). -assert(gv_attr(tailclip,[edge],[bool],true,'','')). -assert(gv_attr(tailhref,[edge],[escString],'','','svg, map only')). -assert(gv_attr(taillabel,[edge],[lblString],'','','')). -assert(gv_attr(tailport,[edge],[portPos],center,'','')). -assert(gv_attr(tailtarget,[edge],[escString],_,'','svg, map only')). -assert(gv_attr(tailtooltip,[edge],[escString],'','','svg, cmap only')). -assert(gv_attr(target,[cluster,edge,graph,node],[escString,string],_,'','svg, map only')). -assert(gv_attr(tooltip,[cluster,edge,node],[escString],'','','svg, cmap only')). -assert(gv_attr(truecolor,[graph],[bool],'','','bitmap output only')). -assert(gv_attr(vertices,[node],[pointList],'','','write only')). -assert(gv_attr(viewport,[graph],[viewPort],'','','')). -assert(gv_attr(voro_margin,[graph],[double],'0.05','0.0','not dot')). -assert(gv_attr(weight,[edge],[int,double],'1','0(dot,twopi)1(neato,fdp)','')). -assert(gv_attr(width,[node],[double],'0.75','0.01','')). -assert(gv_attr(xdotversion,[graph],[string],'','','xdot only')). -assert(gv_attr(xlabel,[edge,node],[lblString],'','','')). -assert(gv_attr(xlp,[edge,node],[point],'','','write only')). -assert(gv_attr(z,[node],[double],'0.0','-MAXFLOAT-1000','')). diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl index 1fd4a18..b26af73 100644 --- a/prolog/gv/gv_attrs.pl +++ b/prolog/gv/gv_attrs.pl @@ -5,6 +5,7 @@ % +Attribute:nvpair ] ). +:- ensure_loaded(library('gv/gv_attrs.data')). /**  GraphViz attributes @@ -13,40 +14,10 @@ */ :- use_module(library(apply)). -:- use_module(library(debug_ext)). -:- use_module(library(dcg/basics)). :- use_module(library(dcg/dcg_call)). -:- use_module(library(dcg/dcg_phrase)). :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]). -:- use_module(library(http/http_download)). :- use_module(library(lists)). -:- use_module(library(msg_ext)). :- use_module(library(os/file_ext)). -:- use_module(library(persistency)). -:- use_module(library(xpath)). -:- use_module(library(xpath/xpath_table)). - -%! gv_attr( -%! ?Name:atom, -%! ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])), -%! ?Types:list(atom), -%! ?Default, -%! ?Minimum, -%! ?Notes:atom -%! ) is nondet. - -:- persistent( - gv_attr( - name:atom, - used_by:list(oneof([cluster,edge,graph,node,subgraph])), - types:list(atom), - default, - minimum, - notes:atom - ) - ). - -:- initialization(gv_attrs_init). @@ -54,7 +25,7 @@ %! gv_attr_value( %! +Context:oneof([cluster,edge,graph,node,subgraph]), -%! +Attribute:nvpair +%! +Attribute:compound %! )// is det. % Uses the default value in case Value is uninstantiated. % Otherwise, performs a typecheck and converts the given value. @@ -101,118 +72,3 @@ check_minimum(_, ''):- !. check_minimum(V, Min1):- atom_number(Min1, Min2), Min2 =true - ; touch(File) - ), - db_attach(File, []), - file_age(File, Age), - gv_attrs_update(Age). - - -%! gv_attrs_update(+Age:float) is det. - -% The persistent store is still fresh. -gv_attrs_update(Age):- - once(gv_attr(_, _, _, _, _, _)), - Age ', _):- !. -translate_default(Default, Default). - - - -%! translate_type(-Types:list(atom))// is det. - -translate_type([H|T]) -- - gv_attr_type(H), - whites, - translate_type(T). -translate_type([H]) -- - gv_attr_type(H). -translate_type([]) -- \"\". - - - -%! translated_usedby( -%! -UsedBy:list(oneof([cluster,edge,graph,node,subgraph])) -%! )// is det. - -translate_usedby([cluster|T]) -- - \"C\", !, - translate_usedby(T). -translate_usedby([edge|T]) -- - \"E\", !, - translate_usedby(T). -translate_usedby([graph|T]) -- - \"G\", !, - translate_usedby(T). -translate_usedby([node|T]) -- - \"N\", !, - translate_usedby(T). -translate_usedby([subgraph|T]) -- - \"S\", !, - translate_usedby(T). -translate_usedby([]) -- - \"\". diff --git a/prolog/gv/gv_color.data b/prolog/gv/gv_color.data new file mode 100644 index 0000000..166b13c --- /dev/null +++ b/prolog/gv/gv_color.data @@ -0,0 +1,802 @@ +gv_color(x11,aliceblue). +gv_color(x11,antiquewhite). +gv_color(x11,antiquewhite1). +gv_color(x11,antiquewhite2). +gv_color(x11,antiquewhite3). +gv_color(x11,antiquewhite4). +gv_color(x11,aquamarine). +gv_color(x11,aquamarine1). +gv_color(x11,aquamarine2). +gv_color(x11,aquamarine3). +gv_color(x11,aquamarine4). +gv_color(x11,azure). +gv_color(x11,azure1). +gv_color(x11,azure2). +gv_color(x11,azure3). +gv_color(x11,azure4). +gv_color(x11,beige). +gv_color(x11,bisque). +gv_color(x11,bisque1). +gv_color(x11,bisque2). +gv_color(x11,bisque3). +gv_color(x11,bisque4). +gv_color(x11,black). +gv_color(x11,blanchedalmond). +gv_color(x11,blue). +gv_color(x11,blue1). +gv_color(x11,blue2). +gv_color(x11,blue3). +gv_color(x11,blue4). +gv_color(x11,blueviolet). +gv_color(x11,brown). +gv_color(x11,brown1). +gv_color(x11,brown2). +gv_color(x11,brown3). +gv_color(x11,brown4). +gv_color(x11,burlywood). +gv_color(x11,burlywood1). +gv_color(x11,burlywood2). +gv_color(x11,burlywood3). +gv_color(x11,burlywood4). +gv_color(x11,cadetblue). +gv_color(x11,cadetblue1). +gv_color(x11,cadetblue2). +gv_color(x11,cadetblue3). +gv_color(x11,cadetblue4). +gv_color(x11,chartreuse). +gv_color(x11,chartreuse1). +gv_color(x11,chartreuse2). +gv_color(x11,chartreuse3). +gv_color(x11,chartreuse4). +gv_color(x11,chocolate). +gv_color(x11,chocolate1). +gv_color(x11,chocolate2). +gv_color(x11,chocolate3). +gv_color(x11,chocolate4). +gv_color(x11,coral). +gv_color(x11,coral1). +gv_color(x11,coral2). +gv_color(x11,coral3). +gv_color(x11,coral4). +gv_color(x11,cornflowerblue). +gv_color(x11,cornsilk). +gv_color(x11,cornsilk1). +gv_color(x11,cornsilk2). +gv_color(x11,cornsilk3). +gv_color(x11,cornsilk4). +gv_color(x11,crimson). +gv_color(x11,cyan). +gv_color(x11,cyan1). +gv_color(x11,cyan2). +gv_color(x11,cyan3). +gv_color(x11,cyan4). +gv_color(x11,darkgoldenrod). +gv_color(x11,darkgoldenrod1). +gv_color(x11,darkgoldenrod2). +gv_color(x11,darkgoldenrod3). +gv_color(x11,darkgoldenrod4). +gv_color(x11,darkgreen). +gv_color(x11,darkkhaki). +gv_color(x11,darkolivegreen). +gv_color(x11,darkolivegreen1). +gv_color(x11,darkolivegreen2). +gv_color(x11,darkolivegreen3). +gv_color(x11,darkolivegreen4). +gv_color(x11,darkorange). +gv_color(x11,darkorange1). +gv_color(x11,darkorange2). +gv_color(x11,darkorange3). +gv_color(x11,darkorange4). +gv_color(x11,darkorchid). +gv_color(x11,darkorchid1). +gv_color(x11,darkorchid2). +gv_color(x11,darkorchid3). +gv_color(x11,darkorchid4). +gv_color(x11,darksalmon). +gv_color(x11,darkseagreen). +gv_color(x11,darkseagreen1). +gv_color(x11,darkseagreen2). +gv_color(x11,darkseagreen3). +gv_color(x11,darkseagreen4). +gv_color(x11,darkslateblue). +gv_color(x11,darkslategray). +gv_color(x11,darkslategray1). +gv_color(x11,darkslategray2). +gv_color(x11,darkslategray3). +gv_color(x11,darkslategray4). +gv_color(x11,darkslategrey). +gv_color(x11,darkturquoise). +gv_color(x11,darkviolet). +gv_color(x11,deeppink). +gv_color(x11,deeppink1). +gv_color(x11,deeppink2). +gv_color(x11,deeppink3). +gv_color(x11,deeppink4). +gv_color(x11,deepskyblue). +gv_color(x11,deepskyblue1). +gv_color(x11,deepskyblue2). +gv_color(x11,deepskyblue3). +gv_color(x11,deepskyblue4). +gv_color(x11,dimgray). +gv_color(x11,dimgrey). +gv_color(x11,dodgerblue). +gv_color(x11,dodgerblue1). +gv_color(x11,dodgerblue2). +gv_color(x11,dodgerblue3). +gv_color(x11,dodgerblue4). +gv_color(x11,firebrick). +gv_color(x11,firebrick1). +gv_color(x11,firebrick2). +gv_color(x11,firebrick3). +gv_color(x11,firebrick4). +gv_color(x11,floralwhite). +gv_color(x11,forestgreen). +gv_color(x11,gainsboro). +gv_color(x11,ghostwhite). +gv_color(x11,gold). +gv_color(x11,gold1). +gv_color(x11,gold2). +gv_color(x11,gold3). +gv_color(x11,gold4). +gv_color(x11,goldenrod). +gv_color(x11,goldenrod1). +gv_color(x11,goldenrod2). +gv_color(x11,goldenrod3). +gv_color(x11,goldenrod4). +gv_color(x11,gray). +gv_color(x11,gray0). +gv_color(x11,gray1). +gv_color(x11,gray10). +gv_color(x11,gray100). +gv_color(x11,gray11). +gv_color(x11,gray12). +gv_color(x11,gray13). +gv_color(x11,gray14). +gv_color(x11,gray15). +gv_color(x11,gray16). +gv_color(x11,gray17). +gv_color(x11,gray18). +gv_color(x11,gray19). +gv_color(x11,gray2). +gv_color(x11,gray20). +gv_color(x11,gray21). +gv_color(x11,gray22). +gv_color(x11,gray23). +gv_color(x11,gray24). +gv_color(x11,gray25). +gv_color(x11,gray26). +gv_color(x11,gray27). +gv_color(x11,gray28). +gv_color(x11,gray29). +gv_color(x11,gray3). +gv_color(x11,gray30). +gv_color(x11,gray31). +gv_color(x11,gray32). +gv_color(x11,gray33). +gv_color(x11,gray34). +gv_color(x11,gray35). +gv_color(x11,gray36). +gv_color(x11,gray37). +gv_color(x11,gray38). +gv_color(x11,gray39). +gv_color(x11,gray4). +gv_color(x11,gray40). +gv_color(x11,gray41). +gv_color(x11,gray42). +gv_color(x11,gray43). +gv_color(x11,gray44). +gv_color(x11,gray45). +gv_color(x11,gray46). +gv_color(x11,gray47). +gv_color(x11,gray48). +gv_color(x11,gray49). +gv_color(x11,gray5). +gv_color(x11,gray50). +gv_color(x11,gray51). +gv_color(x11,gray52). +gv_color(x11,gray53). +gv_color(x11,gray54). +gv_color(x11,gray55). +gv_color(x11,gray56). +gv_color(x11,gray57). +gv_color(x11,gray58). +gv_color(x11,gray59). +gv_color(x11,gray6). +gv_color(x11,gray60). +gv_color(x11,gray61). +gv_color(x11,gray62). +gv_color(x11,gray63). +gv_color(x11,gray64). +gv_color(x11,gray65). +gv_color(x11,gray66). +gv_color(x11,gray67). +gv_color(x11,gray68). +gv_color(x11,gray69). +gv_color(x11,gray7). +gv_color(x11,gray70). +gv_color(x11,gray71). +gv_color(x11,gray72). +gv_color(x11,gray73). +gv_color(x11,gray74). +gv_color(x11,gray75). +gv_color(x11,gray76). +gv_color(x11,gray77). +gv_color(x11,gray78). +gv_color(x11,gray79). +gv_color(x11,gray8). +gv_color(x11,gray80). +gv_color(x11,gray81). +gv_color(x11,gray82). +gv_color(x11,gray83). +gv_color(x11,gray84). +gv_color(x11,gray85). +gv_color(x11,gray86). +gv_color(x11,gray87). +gv_color(x11,gray88). +gv_color(x11,gray89). +gv_color(x11,gray9). +gv_color(x11,gray90). +gv_color(x11,gray91). +gv_color(x11,gray92). +gv_color(x11,gray93). +gv_color(x11,gray94). +gv_color(x11,gray95). +gv_color(x11,gray96). +gv_color(x11,gray97). +gv_color(x11,gray98). +gv_color(x11,gray99). +gv_color(x11,green). +gv_color(x11,green1). +gv_color(x11,green2). +gv_color(x11,green3). +gv_color(x11,green4). +gv_color(x11,greenyellow). +gv_color(x11,grey). +gv_color(x11,grey0). +gv_color(x11,grey1). +gv_color(x11,grey10). +gv_color(x11,grey100). +gv_color(x11,grey11). +gv_color(x11,grey12). +gv_color(x11,grey13). +gv_color(x11,grey14). +gv_color(x11,grey15). +gv_color(x11,grey16). +gv_color(x11,grey17). +gv_color(x11,grey18). +gv_color(x11,grey19). +gv_color(x11,grey2). +gv_color(x11,grey20). +gv_color(x11,grey21). +gv_color(x11,grey22). +gv_color(x11,grey23). +gv_color(x11,grey24). +gv_color(x11,grey25). +gv_color(x11,grey26). +gv_color(x11,grey27). +gv_color(x11,grey28). +gv_color(x11,grey29). +gv_color(x11,grey3). +gv_color(x11,grey30). +gv_color(x11,grey31). +gv_color(x11,grey32). +gv_color(x11,grey33). +gv_color(x11,grey34). +gv_color(x11,grey35). +gv_color(x11,grey36). +gv_color(x11,grey37). +gv_color(x11,grey38). +gv_color(x11,grey39). +gv_color(x11,grey4). +gv_color(x11,grey40). +gv_color(x11,grey41). +gv_color(x11,grey42). +gv_color(x11,grey43). +gv_color(x11,grey44). +gv_color(x11,grey45). +gv_color(x11,grey46). +gv_color(x11,grey47). +gv_color(x11,grey48). +gv_color(x11,grey49). +gv_color(x11,grey5). +gv_color(x11,grey50). +gv_color(x11,grey51). +gv_color(x11,grey52). +gv_color(x11,grey53). +gv_color(x11,grey54). +gv_color(x11,grey55). +gv_color(x11,grey56). +gv_color(x11,grey57). +gv_color(x11,grey58). +gv_color(x11,grey59). +gv_color(x11,grey6). +gv_color(x11,grey60). +gv_color(x11,grey61). +gv_color(x11,grey62). +gv_color(x11,grey63). +gv_color(x11,grey64). +gv_color(x11,grey65). +gv_color(x11,grey66). +gv_color(x11,grey67). +gv_color(x11,grey68). +gv_color(x11,grey69). +gv_color(x11,grey7). +gv_color(x11,grey70). +gv_color(x11,grey71). +gv_color(x11,grey72). +gv_color(x11,grey73). +gv_color(x11,grey74). +gv_color(x11,grey75). +gv_color(x11,grey76). +gv_color(x11,grey77). +gv_color(x11,grey78). +gv_color(x11,grey79). +gv_color(x11,grey8). +gv_color(x11,grey80). +gv_color(x11,grey81). +gv_color(x11,grey82). +gv_color(x11,grey83). +gv_color(x11,grey84). +gv_color(x11,grey85). +gv_color(x11,grey86). +gv_color(x11,grey87). +gv_color(x11,grey88). +gv_color(x11,grey89). +gv_color(x11,grey9). +gv_color(x11,grey90). +gv_color(x11,grey91). +gv_color(x11,grey92). +gv_color(x11,grey93). +gv_color(x11,grey94). +gv_color(x11,grey95). +gv_color(x11,grey96). +gv_color(x11,grey97). +gv_color(x11,grey98). +gv_color(x11,grey99). +gv_color(x11,honeydew). +gv_color(x11,honeydew1). +gv_color(x11,honeydew2). +gv_color(x11,honeydew3). +gv_color(x11,honeydew4). +gv_color(x11,hotpink). +gv_color(x11,hotpink1). +gv_color(x11,hotpink2). +gv_color(x11,hotpink3). +gv_color(x11,hotpink4). +gv_color(x11,indianred). +gv_color(x11,indianred1). +gv_color(x11,indianred2). +gv_color(x11,indianred3). +gv_color(x11,indianred4). +gv_color(x11,indigo). +gv_color(x11,invis). +gv_color(x11,ivory). +gv_color(x11,ivory1). +gv_color(x11,ivory2). +gv_color(x11,ivory3). +gv_color(x11,ivory4). +gv_color(x11,khaki). +gv_color(x11,khaki1). +gv_color(x11,khaki2). +gv_color(x11,khaki3). +gv_color(x11,khaki4). +gv_color(x11,lavender). +gv_color(x11,lavenderblush). +gv_color(x11,lavenderblush1). +gv_color(x11,lavenderblush2). +gv_color(x11,lavenderblush3). +gv_color(x11,lavenderblush4). +gv_color(x11,lawngreen). +gv_color(x11,lemonchiffon). +gv_color(x11,lemonchiffon1). +gv_color(x11,lemonchiffon2). +gv_color(x11,lemonchiffon3). +gv_color(x11,lemonchiffon4). +gv_color(x11,lightblue). +gv_color(x11,lightblue1). +gv_color(x11,lightblue2). +gv_color(x11,lightblue3). +gv_color(x11,lightblue4). +gv_color(x11,lightcoral). +gv_color(x11,lightcyan). +gv_color(x11,lightcyan1). +gv_color(x11,lightcyan2). +gv_color(x11,lightcyan3). +gv_color(x11,lightcyan4). +gv_color(x11,lightgoldenrod). +gv_color(x11,lightgoldenrod1). +gv_color(x11,lightgoldenrod2). +gv_color(x11,lightgoldenrod3). +gv_color(x11,lightgoldenrod4). +gv_color(x11,lightgoldenrodyellow). +gv_color(x11,lightgray). +gv_color(x11,lightgrey). +gv_color(x11,lightpink). +gv_color(x11,lightpink1). +gv_color(x11,lightpink2). +gv_color(x11,lightpink3). +gv_color(x11,lightpink4). +gv_color(x11,lightsalmon). +gv_color(x11,lightsalmon1). +gv_color(x11,lightsalmon2). +gv_color(x11,lightsalmon3). +gv_color(x11,lightsalmon4). +gv_color(x11,lightseagreen). +gv_color(x11,lightskyblue). +gv_color(x11,lightskyblue1). +gv_color(x11,lightskyblue2). +gv_color(x11,lightskyblue3). +gv_color(x11,lightskyblue4). +gv_color(x11,lightslateblue). +gv_color(x11,lightslategray). +gv_color(x11,lightslategrey). +gv_color(x11,lightsteelblue). +gv_color(x11,lightsteelblue1). +gv_color(x11,lightsteelblue2). +gv_color(x11,lightsteelblue3). +gv_color(x11,lightsteelblue4). +gv_color(x11,lightyellow). +gv_color(x11,lightyellow1). +gv_color(x11,lightyellow2). +gv_color(x11,lightyellow3). +gv_color(x11,lightyellow4). +gv_color(x11,limegreen). +gv_color(x11,linen). +gv_color(x11,magenta). +gv_color(x11,magenta1). +gv_color(x11,magenta2). +gv_color(x11,magenta3). +gv_color(x11,magenta4). +gv_color(x11,maroon). +gv_color(x11,maroon1). +gv_color(x11,maroon2). +gv_color(x11,maroon3). +gv_color(x11,maroon4). +gv_color(x11,mediumaquamarine). +gv_color(x11,mediumblue). +gv_color(x11,mediumorchid). +gv_color(x11,mediumorchid1). +gv_color(x11,mediumorchid2). +gv_color(x11,mediumorchid3). +gv_color(x11,mediumorchid4). +gv_color(x11,mediumpurple). +gv_color(x11,mediumpurple1). +gv_color(x11,mediumpurple2). +gv_color(x11,mediumpurple3). +gv_color(x11,mediumpurple4). +gv_color(x11,mediumseagreen). +gv_color(x11,mediumslateblue). +gv_color(x11,mediumspringgreen). +gv_color(x11,mediumturquoise). +gv_color(x11,mediumvioletred). +gv_color(x11,midnightblue). +gv_color(x11,mintcream). +gv_color(x11,mistyrose). +gv_color(x11,mistyrose1). +gv_color(x11,mistyrose2). +gv_color(x11,mistyrose3). +gv_color(x11,mistyrose4). +gv_color(x11,moccasin). +gv_color(x11,navajowhite). +gv_color(x11,navajowhite1). +gv_color(x11,navajowhite2). +gv_color(x11,navajowhite3). +gv_color(x11,navajowhite4). +gv_color(x11,navy). +gv_color(x11,navyblue). +gv_color(x11,none). +gv_color(x11,oldlace). +gv_color(x11,olivedrab). +gv_color(x11,olivedrab1). +gv_color(x11,olivedrab2). +gv_color(x11,olivedrab3). +gv_color(x11,olivedrab4). +gv_color(x11,orange). +gv_color(x11,orange1). +gv_color(x11,orange2). +gv_color(x11,orange3). +gv_color(x11,orange4). +gv_color(x11,orangered). +gv_color(x11,orangered1). +gv_color(x11,orangered2). +gv_color(x11,orangered3). +gv_color(x11,orangered4). +gv_color(x11,orchid). +gv_color(x11,orchid1). +gv_color(x11,orchid2). +gv_color(x11,orchid3). +gv_color(x11,orchid4). +gv_color(x11,palegoldenrod). +gv_color(x11,palegreen). +gv_color(x11,palegreen1). +gv_color(x11,palegreen2). +gv_color(x11,palegreen3). +gv_color(x11,palegreen4). +gv_color(x11,paleturquoise). +gv_color(x11,paleturquoise1). +gv_color(x11,paleturquoise2). +gv_color(x11,paleturquoise3). +gv_color(x11,paleturquoise4). +gv_color(x11,palevioletred). +gv_color(x11,palevioletred1). +gv_color(x11,palevioletred2). +gv_color(x11,palevioletred3). +gv_color(x11,palevioletred4). +gv_color(x11,papayawhip). +gv_color(x11,peachpuff). +gv_color(x11,peachpuff1). +gv_color(x11,peachpuff2). +gv_color(x11,peachpuff3). +gv_color(x11,peachpuff4). +gv_color(x11,peru). +gv_color(x11,pink). +gv_color(x11,pink1). +gv_color(x11,pink2). +gv_color(x11,pink3). +gv_color(x11,pink4). +gv_color(x11,plum). +gv_color(x11,plum1). +gv_color(x11,plum2). +gv_color(x11,plum3). +gv_color(x11,plum4). +gv_color(x11,powderblue). +gv_color(x11,purple). +gv_color(x11,purple1). +gv_color(x11,purple2). +gv_color(x11,purple3). +gv_color(x11,purple4). +gv_color(x11,red). +gv_color(x11,red1). +gv_color(x11,red2). +gv_color(x11,red3). +gv_color(x11,red4). +gv_color(x11,rosybrown). +gv_color(x11,rosybrown1). +gv_color(x11,rosybrown2). +gv_color(x11,rosybrown3). +gv_color(x11,rosybrown4). +gv_color(x11,royalblue). +gv_color(x11,royalblue1). +gv_color(x11,royalblue2). +gv_color(x11,royalblue3). +gv_color(x11,royalblue4). +gv_color(x11,saddlebrown). +gv_color(x11,salmon). +gv_color(x11,salmon1). +gv_color(x11,salmon2). +gv_color(x11,salmon3). +gv_color(x11,salmon4). +gv_color(x11,sandybrown). +gv_color(x11,seagreen). +gv_color(x11,seagreen1). +gv_color(x11,seagreen2). +gv_color(x11,seagreen3). +gv_color(x11,seagreen4). +gv_color(x11,seashell). +gv_color(x11,seashell1). +gv_color(x11,seashell2). +gv_color(x11,seashell3). +gv_color(x11,seashell4). +gv_color(x11,sienna). +gv_color(x11,sienna1). +gv_color(x11,sienna2). +gv_color(x11,sienna3). +gv_color(x11,sienna4). +gv_color(x11,skyblue). +gv_color(x11,skyblue1). +gv_color(x11,skyblue2). +gv_color(x11,skyblue3). +gv_color(x11,skyblue4). +gv_color(x11,slateblue). +gv_color(x11,slateblue1). +gv_color(x11,slateblue2). +gv_color(x11,slateblue3). +gv_color(x11,slateblue4). +gv_color(x11,slategray). +gv_color(x11,slategray1). +gv_color(x11,slategray2). +gv_color(x11,slategray3). +gv_color(x11,slategray4). +gv_color(x11,slategrey). +gv_color(x11,snow). +gv_color(x11,snow1). +gv_color(x11,snow2). +gv_color(x11,snow3). +gv_color(x11,snow4). +gv_color(x11,springgreen). +gv_color(x11,springgreen1). +gv_color(x11,springgreen2). +gv_color(x11,springgreen3). +gv_color(x11,springgreen4). +gv_color(x11,steelblue). +gv_color(x11,steelblue1). +gv_color(x11,steelblue2). +gv_color(x11,steelblue3). +gv_color(x11,steelblue4). +gv_color(x11,tan). +gv_color(x11,tan1). +gv_color(x11,tan2). +gv_color(x11,tan3). +gv_color(x11,tan4). +gv_color(x11,thistle). +gv_color(x11,thistle1). +gv_color(x11,thistle2). +gv_color(x11,thistle3). +gv_color(x11,thistle4). +gv_color(x11,tomato). +gv_color(x11,tomato1). +gv_color(x11,tomato2). +gv_color(x11,tomato3). +gv_color(x11,tomato4). +gv_color(x11,transparent). +gv_color(x11,turquoise). +gv_color(x11,turquoise1). +gv_color(x11,turquoise2). +gv_color(x11,turquoise3). +gv_color(x11,turquoise4). +gv_color(x11,violet). +gv_color(x11,violetred). +gv_color(x11,violetred1). +gv_color(x11,violetred2). +gv_color(x11,violetred3). +gv_color(x11,violetred4). +gv_color(x11,wheat). +gv_color(x11,wheat1). +gv_color(x11,wheat2). +gv_color(x11,wheat3). +gv_color(x11,wheat4). +gv_color(x11,white). +gv_color(x11,whitesmoke). +gv_color(x11,yellow). +gv_color(x11,yellow1). +gv_color(x11,yellow2). +gv_color(x11,yellow3). +gv_color(x11,yellow4). +gv_color(x11,yellowgreen). +gv_color(svg,aliceblue). +gv_color(svg,antiquewhite). +gv_color(svg,aqua). +gv_color(svg,aquamarine). +gv_color(svg,azure). +gv_color(svg,beige). +gv_color(svg,bisque). +gv_color(svg,black). +gv_color(svg,blanchedalmond). +gv_color(svg,blue). +gv_color(svg,blueviolet). +gv_color(svg,brown). +gv_color(svg,burlywood). +gv_color(svg,cadetblue). +gv_color(svg,chartreuse). +gv_color(svg,chocolate). +gv_color(svg,coral). +gv_color(svg,cornflowerblue). +gv_color(svg,cornsilk). +gv_color(svg,crimson). +gv_color(svg,cyan). +gv_color(svg,darkblue). +gv_color(svg,darkcyan). +gv_color(svg,darkgoldenrod). +gv_color(svg,darkgray). +gv_color(svg,darkgreen). +gv_color(svg,darkgrey). +gv_color(svg,darkkhaki). +gv_color(svg,darkmagenta). +gv_color(svg,darkolivegreen). +gv_color(svg,darkorange). +gv_color(svg,darkorchid). +gv_color(svg,darkred). +gv_color(svg,darksalmon). +gv_color(svg,darkseagreen). +gv_color(svg,darkslateblue). +gv_color(svg,darkslategray). +gv_color(svg,darkslategrey). +gv_color(svg,darkturquoise). +gv_color(svg,darkviolet). +gv_color(svg,deeppink). +gv_color(svg,deepskyblue). +gv_color(svg,dimgray). +gv_color(svg,dimgrey). +gv_color(svg,dodgerblue). +gv_color(svg,firebrick). +gv_color(svg,floralwhite). +gv_color(svg,forestgreen). +gv_color(svg,fuchsia). +gv_color(svg,gainsboro). +gv_color(svg,ghostwhite). +gv_color(svg,gold). +gv_color(svg,goldenrod). +gv_color(svg,gray). +gv_color(svg,grey). +gv_color(svg,green). +gv_color(svg,greenyellow). +gv_color(svg,honeydew). +gv_color(svg,hotpink). +gv_color(svg,indianred). +gv_color(svg,indigo). +gv_color(svg,ivory). +gv_color(svg,khaki). +gv_color(svg,lavender). +gv_color(svg,lavenderblush). +gv_color(svg,lawngreen). +gv_color(svg,lemonchiffon). +gv_color(svg,lightblue). +gv_color(svg,lightcoral). +gv_color(svg,lightcyan). +gv_color(svg,lightgoldenrodyellow). +gv_color(svg,lightgray). +gv_color(svg,lightgreen). +gv_color(svg,lightgrey). +gv_color(svg,lightpink). +gv_color(svg,lightsalmon). +gv_color(svg,lightseagreen). +gv_color(svg,lightskyblue). +gv_color(svg,lightslategray). +gv_color(svg,lightslategrey). +gv_color(svg,lightsteelblue). +gv_color(svg,lightyellow). +gv_color(svg,lime). +gv_color(svg,limegreen). +gv_color(svg,linen). +gv_color(svg,magenta). +gv_color(svg,maroon). +gv_color(svg,mediumaquamarine). +gv_color(svg,mediumblue). +gv_color(svg,mediumorchid). +gv_color(svg,mediumpurple). +gv_color(svg,mediumseagreen). +gv_color(svg,mediumslateblue). +gv_color(svg,mediumspringgreen). +gv_color(svg,mediumturquoise). +gv_color(svg,mediumvioletred). +gv_color(svg,midnightblue). +gv_color(svg,mintcream). +gv_color(svg,mistyrose). +gv_color(svg,moccasin). +gv_color(svg,navajowhite). +gv_color(svg,navy). +gv_color(svg,oldlace). +gv_color(svg,olive). +gv_color(svg,olivedrab). +gv_color(svg,orange). +gv_color(svg,orangered). +gv_color(svg,orchid). +gv_color(svg,palegoldenrod). +gv_color(svg,palegreen). +gv_color(svg,paleturquoise). +gv_color(svg,palevioletred). +gv_color(svg,papayawhip). +gv_color(svg,peachpuff). +gv_color(svg,peru). +gv_color(svg,pink). +gv_color(svg,plum). +gv_color(svg,powderblue). +gv_color(svg,purple). +gv_color(svg,red). +gv_color(svg,rosybrown). +gv_color(svg,royalblue). +gv_color(svg,saddlebrown). +gv_color(svg,salmon). +gv_color(svg,sandybrown). +gv_color(svg,seagreen). +gv_color(svg,seashell). +gv_color(svg,sienna). +gv_color(svg,silver). +gv_color(svg,skyblue). +gv_color(svg,slateblue). +gv_color(svg,slategray). +gv_color(svg,slategrey). +gv_color(svg,snow). +gv_color(svg,springgreen). +gv_color(svg,steelblue). +gv_color(svg,tan). +gv_color(svg,teal). +gv_color(svg,thistle). +gv_color(svg,tomato). +gv_color(svg,turquoise). +gv_color(svg,violet). +gv_color(svg,wheat). +gv_color(svg,white). +gv_color(svg,whitesmoke). +gv_color(svg,yellow). +gv_color(svg,yellowgreen). diff --git a/prolog/gv/gv_color.log b/prolog/gv/gv_color.log deleted file mode 100644 index 23d6cdf..0000000 --- a/prolog/gv/gv_color.log +++ /dev/null @@ -1,802 +0,0 @@ -assert(gv_color(x11,aliceblue)). -assert(gv_color(x11,antiquewhite)). -assert(gv_color(x11,antiquewhite1)). -assert(gv_color(x11,antiquewhite2)). -assert(gv_color(x11,antiquewhite3)). -assert(gv_color(x11,antiquewhite4)). -assert(gv_color(x11,aquamarine)). -assert(gv_color(x11,aquamarine1)). -assert(gv_color(x11,aquamarine2)). -assert(gv_color(x11,aquamarine3)). -assert(gv_color(x11,aquamarine4)). -assert(gv_color(x11,azure)). -assert(gv_color(x11,azure1)). -assert(gv_color(x11,azure2)). -assert(gv_color(x11,azure3)). -assert(gv_color(x11,azure4)). -assert(gv_color(x11,beige)). -assert(gv_color(x11,bisque)). -assert(gv_color(x11,bisque1)). -assert(gv_color(x11,bisque2)). -assert(gv_color(x11,bisque3)). -assert(gv_color(x11,bisque4)). -assert(gv_color(x11,black)). -assert(gv_color(x11,blanchedalmond)). -assert(gv_color(x11,blue)). -assert(gv_color(x11,blue1)). -assert(gv_color(x11,blue2)). -assert(gv_color(x11,blue3)). -assert(gv_color(x11,blue4)). -assert(gv_color(x11,blueviolet)). -assert(gv_color(x11,brown)). -assert(gv_color(x11,brown1)). -assert(gv_color(x11,brown2)). -assert(gv_color(x11,brown3)). -assert(gv_color(x11,brown4)). -assert(gv_color(x11,burlywood)). -assert(gv_color(x11,burlywood1)). -assert(gv_color(x11,burlywood2)). -assert(gv_color(x11,burlywood3)). -assert(gv_color(x11,burlywood4)). -assert(gv_color(x11,cadetblue)). -assert(gv_color(x11,cadetblue1)). -assert(gv_color(x11,cadetblue2)). -assert(gv_color(x11,cadetblue3)). -assert(gv_color(x11,cadetblue4)). -assert(gv_color(x11,chartreuse)). -assert(gv_color(x11,chartreuse1)). -assert(gv_color(x11,chartreuse2)). -assert(gv_color(x11,chartreuse3)). -assert(gv_color(x11,chartreuse4)). -assert(gv_color(x11,chocolate)). -assert(gv_color(x11,chocolate1)). -assert(gv_color(x11,chocolate2)). -assert(gv_color(x11,chocolate3)). -assert(gv_color(x11,chocolate4)). -assert(gv_color(x11,coral)). -assert(gv_color(x11,coral1)). -assert(gv_color(x11,coral2)). -assert(gv_color(x11,coral3)). -assert(gv_color(x11,coral4)). -assert(gv_color(x11,cornflowerblue)). -assert(gv_color(x11,cornsilk)). -assert(gv_color(x11,cornsilk1)). -assert(gv_color(x11,cornsilk2)). -assert(gv_color(x11,cornsilk3)). -assert(gv_color(x11,cornsilk4)). -assert(gv_color(x11,crimson)). -assert(gv_color(x11,cyan)). -assert(gv_color(x11,cyan1)). -assert(gv_color(x11,cyan2)). -assert(gv_color(x11,cyan3)). -assert(gv_color(x11,cyan4)). -assert(gv_color(x11,darkgoldenrod)). -assert(gv_color(x11,darkgoldenrod1)). -assert(gv_color(x11,darkgoldenrod2)). -assert(gv_color(x11,darkgoldenrod3)). -assert(gv_color(x11,darkgoldenrod4)). -assert(gv_color(x11,darkgreen)). -assert(gv_color(x11,darkkhaki)). -assert(gv_color(x11,darkolivegreen)). -assert(gv_color(x11,darkolivegreen1)). -assert(gv_color(x11,darkolivegreen2)). -assert(gv_color(x11,darkolivegreen3)). -assert(gv_color(x11,darkolivegreen4)). -assert(gv_color(x11,darkorange)). -assert(gv_color(x11,darkorange1)). -assert(gv_color(x11,darkorange2)). -assert(gv_color(x11,darkorange3)). -assert(gv_color(x11,darkorange4)). -assert(gv_color(x11,darkorchid)). -assert(gv_color(x11,darkorchid1)). -assert(gv_color(x11,darkorchid2)). -assert(gv_color(x11,darkorchid3)). -assert(gv_color(x11,darkorchid4)). -assert(gv_color(x11,darksalmon)). -assert(gv_color(x11,darkseagreen)). -assert(gv_color(x11,darkseagreen1)). -assert(gv_color(x11,darkseagreen2)). -assert(gv_color(x11,darkseagreen3)). -assert(gv_color(x11,darkseagreen4)). -assert(gv_color(x11,darkslateblue)). -assert(gv_color(x11,darkslategray)). -assert(gv_color(x11,darkslategray1)). -assert(gv_color(x11,darkslategray2)). -assert(gv_color(x11,darkslategray3)). -assert(gv_color(x11,darkslategray4)). -assert(gv_color(x11,darkslategrey)). -assert(gv_color(x11,darkturquoise)). -assert(gv_color(x11,darkviolet)). -assert(gv_color(x11,deeppink)). -assert(gv_color(x11,deeppink1)). -assert(gv_color(x11,deeppink2)). -assert(gv_color(x11,deeppink3)). -assert(gv_color(x11,deeppink4)). -assert(gv_color(x11,deepskyblue)). -assert(gv_color(x11,deepskyblue1)). -assert(gv_color(x11,deepskyblue2)). -assert(gv_color(x11,deepskyblue3)). -assert(gv_color(x11,deepskyblue4)). -assert(gv_color(x11,dimgray)). -assert(gv_color(x11,dimgrey)). -assert(gv_color(x11,dodgerblue)). -assert(gv_color(x11,dodgerblue1)). -assert(gv_color(x11,dodgerblue2)). -assert(gv_color(x11,dodgerblue3)). -assert(gv_color(x11,dodgerblue4)). -assert(gv_color(x11,firebrick)). -assert(gv_color(x11,firebrick1)). -assert(gv_color(x11,firebrick2)). -assert(gv_color(x11,firebrick3)). -assert(gv_color(x11,firebrick4)). -assert(gv_color(x11,floralwhite)). -assert(gv_color(x11,forestgreen)). -assert(gv_color(x11,gainsboro)). -assert(gv_color(x11,ghostwhite)). -assert(gv_color(x11,gold)). -assert(gv_color(x11,gold1)). -assert(gv_color(x11,gold2)). -assert(gv_color(x11,gold3)). -assert(gv_color(x11,gold4)). -assert(gv_color(x11,goldenrod)). -assert(gv_color(x11,goldenrod1)). -assert(gv_color(x11,goldenrod2)). -assert(gv_color(x11,goldenrod3)). -assert(gv_color(x11,goldenrod4)). -assert(gv_color(x11,gray)). -assert(gv_color(x11,gray0)). -assert(gv_color(x11,gray1)). -assert(gv_color(x11,gray10)). -assert(gv_color(x11,gray100)). -assert(gv_color(x11,gray11)). -assert(gv_color(x11,gray12)). -assert(gv_color(x11,gray13)). -assert(gv_color(x11,gray14)). -assert(gv_color(x11,gray15)). -assert(gv_color(x11,gray16)). -assert(gv_color(x11,gray17)). -assert(gv_color(x11,gray18)). -assert(gv_color(x11,gray19)). -assert(gv_color(x11,gray2)). -assert(gv_color(x11,gray20)). -assert(gv_color(x11,gray21)). -assert(gv_color(x11,gray22)). -assert(gv_color(x11,gray23)). -assert(gv_color(x11,gray24)). -assert(gv_color(x11,gray25)). -assert(gv_color(x11,gray26)). -assert(gv_color(x11,gray27)). -assert(gv_color(x11,gray28)). -assert(gv_color(x11,gray29)). -assert(gv_color(x11,gray3)). -assert(gv_color(x11,gray30)). -assert(gv_color(x11,gray31)). -assert(gv_color(x11,gray32)). -assert(gv_color(x11,gray33)). -assert(gv_color(x11,gray34)). -assert(gv_color(x11,gray35)). -assert(gv_color(x11,gray36)). -assert(gv_color(x11,gray37)). -assert(gv_color(x11,gray38)). -assert(gv_color(x11,gray39)). -assert(gv_color(x11,gray4)). -assert(gv_color(x11,gray40)). -assert(gv_color(x11,gray41)). -assert(gv_color(x11,gray42)). -assert(gv_color(x11,gray43)). -assert(gv_color(x11,gray44)). -assert(gv_color(x11,gray45)). -assert(gv_color(x11,gray46)). -assert(gv_color(x11,gray47)). -assert(gv_color(x11,gray48)). -assert(gv_color(x11,gray49)). -assert(gv_color(x11,gray5)). -assert(gv_color(x11,gray50)). -assert(gv_color(x11,gray51)). -assert(gv_color(x11,gray52)). -assert(gv_color(x11,gray53)). -assert(gv_color(x11,gray54)). -assert(gv_color(x11,gray55)). -assert(gv_color(x11,gray56)). -assert(gv_color(x11,gray57)). -assert(gv_color(x11,gray58)). -assert(gv_color(x11,gray59)). -assert(gv_color(x11,gray6)). -assert(gv_color(x11,gray60)). -assert(gv_color(x11,gray61)). -assert(gv_color(x11,gray62)). -assert(gv_color(x11,gray63)). -assert(gv_color(x11,gray64)). -assert(gv_color(x11,gray65)). -assert(gv_color(x11,gray66)). -assert(gv_color(x11,gray67)). -assert(gv_color(x11,gray68)). -assert(gv_color(x11,gray69)). -assert(gv_color(x11,gray7)). -assert(gv_color(x11,gray70)). -assert(gv_color(x11,gray71)). -assert(gv_color(x11,gray72)). -assert(gv_color(x11,gray73)). -assert(gv_color(x11,gray74)). -assert(gv_color(x11,gray75)). -assert(gv_color(x11,gray76)). -assert(gv_color(x11,gray77)). -assert(gv_color(x11,gray78)). -assert(gv_color(x11,gray79)). -assert(gv_color(x11,gray8)). -assert(gv_color(x11,gray80)). -assert(gv_color(x11,gray81)). -assert(gv_color(x11,gray82)). -assert(gv_color(x11,gray83)). -assert(gv_color(x11,gray84)). -assert(gv_color(x11,gray85)). -assert(gv_color(x11,gray86)). -assert(gv_color(x11,gray87)). -assert(gv_color(x11,gray88)). -assert(gv_color(x11,gray89)). -assert(gv_color(x11,gray9)). -assert(gv_color(x11,gray90)). -assert(gv_color(x11,gray91)). -assert(gv_color(x11,gray92)). -assert(gv_color(x11,gray93)). -assert(gv_color(x11,gray94)). -assert(gv_color(x11,gray95)). -assert(gv_color(x11,gray96)). -assert(gv_color(x11,gray97)). -assert(gv_color(x11,gray98)). -assert(gv_color(x11,gray99)). -assert(gv_color(x11,green)). -assert(gv_color(x11,green1)). -assert(gv_color(x11,green2)). -assert(gv_color(x11,green3)). -assert(gv_color(x11,green4)). -assert(gv_color(x11,greenyellow)). -assert(gv_color(x11,grey)). -assert(gv_color(x11,grey0)). -assert(gv_color(x11,grey1)). -assert(gv_color(x11,grey10)). -assert(gv_color(x11,grey100)). -assert(gv_color(x11,grey11)). -assert(gv_color(x11,grey12)). -assert(gv_color(x11,grey13)). -assert(gv_color(x11,grey14)). -assert(gv_color(x11,grey15)). -assert(gv_color(x11,grey16)). -assert(gv_color(x11,grey17)). -assert(gv_color(x11,grey18)). -assert(gv_color(x11,grey19)). -assert(gv_color(x11,grey2)). -assert(gv_color(x11,grey20)). -assert(gv_color(x11,grey21)). -assert(gv_color(x11,grey22)). -assert(gv_color(x11,grey23)). -assert(gv_color(x11,grey24)). -assert(gv_color(x11,grey25)). -assert(gv_color(x11,grey26)). -assert(gv_color(x11,grey27)). -assert(gv_color(x11,grey28)). -assert(gv_color(x11,grey29)). -assert(gv_color(x11,grey3)). -assert(gv_color(x11,grey30)). -assert(gv_color(x11,grey31)). -assert(gv_color(x11,grey32)). -assert(gv_color(x11,grey33)). -assert(gv_color(x11,grey34)). -assert(gv_color(x11,grey35)). -assert(gv_color(x11,grey36)). -assert(gv_color(x11,grey37)). -assert(gv_color(x11,grey38)). -assert(gv_color(x11,grey39)). -assert(gv_color(x11,grey4)). -assert(gv_color(x11,grey40)). -assert(gv_color(x11,grey41)). -assert(gv_color(x11,grey42)). -assert(gv_color(x11,grey43)). -assert(gv_color(x11,grey44)). -assert(gv_color(x11,grey45)). -assert(gv_color(x11,grey46)). -assert(gv_color(x11,grey47)). -assert(gv_color(x11,grey48)). -assert(gv_color(x11,grey49)). -assert(gv_color(x11,grey5)). -assert(gv_color(x11,grey50)). -assert(gv_color(x11,grey51)). -assert(gv_color(x11,grey52)). -assert(gv_color(x11,grey53)). -assert(gv_color(x11,grey54)). -assert(gv_color(x11,grey55)). -assert(gv_color(x11,grey56)). -assert(gv_color(x11,grey57)). -assert(gv_color(x11,grey58)). -assert(gv_color(x11,grey59)). -assert(gv_color(x11,grey6)). -assert(gv_color(x11,grey60)). -assert(gv_color(x11,grey61)). -assert(gv_color(x11,grey62)). -assert(gv_color(x11,grey63)). -assert(gv_color(x11,grey64)). -assert(gv_color(x11,grey65)). -assert(gv_color(x11,grey66)). -assert(gv_color(x11,grey67)). -assert(gv_color(x11,grey68)). -assert(gv_color(x11,grey69)). -assert(gv_color(x11,grey7)). -assert(gv_color(x11,grey70)). -assert(gv_color(x11,grey71)). -assert(gv_color(x11,grey72)). -assert(gv_color(x11,grey73)). -assert(gv_color(x11,grey74)). -assert(gv_color(x11,grey75)). -assert(gv_color(x11,grey76)). -assert(gv_color(x11,grey77)). -assert(gv_color(x11,grey78)). -assert(gv_color(x11,grey79)). -assert(gv_color(x11,grey8)). -assert(gv_color(x11,grey80)). -assert(gv_color(x11,grey81)). -assert(gv_color(x11,grey82)). -assert(gv_color(x11,grey83)). -assert(gv_color(x11,grey84)). -assert(gv_color(x11,grey85)). -assert(gv_color(x11,grey86)). -assert(gv_color(x11,grey87)). -assert(gv_color(x11,grey88)). -assert(gv_color(x11,grey89)). -assert(gv_color(x11,grey9)). -assert(gv_color(x11,grey90)). -assert(gv_color(x11,grey91)). -assert(gv_color(x11,grey92)). -assert(gv_color(x11,grey93)). -assert(gv_color(x11,grey94)). -assert(gv_color(x11,grey95)). -assert(gv_color(x11,grey96)). -assert(gv_color(x11,grey97)). -assert(gv_color(x11,grey98)). -assert(gv_color(x11,grey99)). -assert(gv_color(x11,honeydew)). -assert(gv_color(x11,honeydew1)). -assert(gv_color(x11,honeydew2)). -assert(gv_color(x11,honeydew3)). -assert(gv_color(x11,honeydew4)). -assert(gv_color(x11,hotpink)). -assert(gv_color(x11,hotpink1)). -assert(gv_color(x11,hotpink2)). -assert(gv_color(x11,hotpink3)). -assert(gv_color(x11,hotpink4)). -assert(gv_color(x11,indianred)). -assert(gv_color(x11,indianred1)). -assert(gv_color(x11,indianred2)). -assert(gv_color(x11,indianred3)). -assert(gv_color(x11,indianred4)). -assert(gv_color(x11,indigo)). -assert(gv_color(x11,invis)). -assert(gv_color(x11,ivory)). -assert(gv_color(x11,ivory1)). -assert(gv_color(x11,ivory2)). -assert(gv_color(x11,ivory3)). -assert(gv_color(x11,ivory4)). -assert(gv_color(x11,khaki)). -assert(gv_color(x11,khaki1)). -assert(gv_color(x11,khaki2)). -assert(gv_color(x11,khaki3)). -assert(gv_color(x11,khaki4)). -assert(gv_color(x11,lavender)). -assert(gv_color(x11,lavenderblush)). -assert(gv_color(x11,lavenderblush1)). -assert(gv_color(x11,lavenderblush2)). -assert(gv_color(x11,lavenderblush3)). -assert(gv_color(x11,lavenderblush4)). -assert(gv_color(x11,lawngreen)). -assert(gv_color(x11,lemonchiffon)). -assert(gv_color(x11,lemonchiffon1)). -assert(gv_color(x11,lemonchiffon2)). -assert(gv_color(x11,lemonchiffon3)). -assert(gv_color(x11,lemonchiffon4)). -assert(gv_color(x11,lightblue)). -assert(gv_color(x11,lightblue1)). -assert(gv_color(x11,lightblue2)). -assert(gv_color(x11,lightblue3)). -assert(gv_color(x11,lightblue4)). -assert(gv_color(x11,lightcoral)). -assert(gv_color(x11,lightcyan)). -assert(gv_color(x11,lightcyan1)). -assert(gv_color(x11,lightcyan2)). -assert(gv_color(x11,lightcyan3)). -assert(gv_color(x11,lightcyan4)). -assert(gv_color(x11,lightgoldenrod)). -assert(gv_color(x11,lightgoldenrod1)). -assert(gv_color(x11,lightgoldenrod2)). -assert(gv_color(x11,lightgoldenrod3)). -assert(gv_color(x11,lightgoldenrod4)). -assert(gv_color(x11,lightgoldenrodyellow)). -assert(gv_color(x11,lightgray)). -assert(gv_color(x11,lightgrey)). -assert(gv_color(x11,lightpink)). -assert(gv_color(x11,lightpink1)). -assert(gv_color(x11,lightpink2)). -assert(gv_color(x11,lightpink3)). -assert(gv_color(x11,lightpink4)). -assert(gv_color(x11,lightsalmon)). -assert(gv_color(x11,lightsalmon1)). -assert(gv_color(x11,lightsalmon2)). -assert(gv_color(x11,lightsalmon3)). -assert(gv_color(x11,lightsalmon4)). -assert(gv_color(x11,lightseagreen)). -assert(gv_color(x11,lightskyblue)). -assert(gv_color(x11,lightskyblue1)). -assert(gv_color(x11,lightskyblue2)). -assert(gv_color(x11,lightskyblue3)). -assert(gv_color(x11,lightskyblue4)). -assert(gv_color(x11,lightslateblue)). -assert(gv_color(x11,lightslategray)). -assert(gv_color(x11,lightslategrey)). -assert(gv_color(x11,lightsteelblue)). -assert(gv_color(x11,lightsteelblue1)). -assert(gv_color(x11,lightsteelblue2)). -assert(gv_color(x11,lightsteelblue3)). -assert(gv_color(x11,lightsteelblue4)). -assert(gv_color(x11,lightyellow)). -assert(gv_color(x11,lightyellow1)). -assert(gv_color(x11,lightyellow2)). -assert(gv_color(x11,lightyellow3)). -assert(gv_color(x11,lightyellow4)). -assert(gv_color(x11,limegreen)). -assert(gv_color(x11,linen)). -assert(gv_color(x11,magenta)). -assert(gv_color(x11,magenta1)). -assert(gv_color(x11,magenta2)). -assert(gv_color(x11,magenta3)). -assert(gv_color(x11,magenta4)). -assert(gv_color(x11,maroon)). -assert(gv_color(x11,maroon1)). -assert(gv_color(x11,maroon2)). -assert(gv_color(x11,maroon3)). -assert(gv_color(x11,maroon4)). -assert(gv_color(x11,mediumaquamarine)). -assert(gv_color(x11,mediumblue)). -assert(gv_color(x11,mediumorchid)). -assert(gv_color(x11,mediumorchid1)). -assert(gv_color(x11,mediumorchid2)). -assert(gv_color(x11,mediumorchid3)). -assert(gv_color(x11,mediumorchid4)). -assert(gv_color(x11,mediumpurple)). -assert(gv_color(x11,mediumpurple1)). -assert(gv_color(x11,mediumpurple2)). -assert(gv_color(x11,mediumpurple3)). -assert(gv_color(x11,mediumpurple4)). -assert(gv_color(x11,mediumseagreen)). -assert(gv_color(x11,mediumslateblue)). -assert(gv_color(x11,mediumspringgreen)). -assert(gv_color(x11,mediumturquoise)). -assert(gv_color(x11,mediumvioletred)). -assert(gv_color(x11,midnightblue)). -assert(gv_color(x11,mintcream)). -assert(gv_color(x11,mistyrose)). -assert(gv_color(x11,mistyrose1)). -assert(gv_color(x11,mistyrose2)). -assert(gv_color(x11,mistyrose3)). -assert(gv_color(x11,mistyrose4)). -assert(gv_color(x11,moccasin)). -assert(gv_color(x11,navajowhite)). -assert(gv_color(x11,navajowhite1)). -assert(gv_color(x11,navajowhite2)). -assert(gv_color(x11,navajowhite3)). -assert(gv_color(x11,navajowhite4)). -assert(gv_color(x11,navy)). -assert(gv_color(x11,navyblue)). -assert(gv_color(x11,none)). -assert(gv_color(x11,oldlace)). -assert(gv_color(x11,olivedrab)). -assert(gv_color(x11,olivedrab1)). -assert(gv_color(x11,olivedrab2)). -assert(gv_color(x11,olivedrab3)). -assert(gv_color(x11,olivedrab4)). -assert(gv_color(x11,orange)). -assert(gv_color(x11,orange1)). -assert(gv_color(x11,orange2)). -assert(gv_color(x11,orange3)). -assert(gv_color(x11,orange4)). -assert(gv_color(x11,orangered)). -assert(gv_color(x11,orangered1)). -assert(gv_color(x11,orangered2)). -assert(gv_color(x11,orangered3)). -assert(gv_color(x11,orangered4)). -assert(gv_color(x11,orchid)). -assert(gv_color(x11,orchid1)). -assert(gv_color(x11,orchid2)). -assert(gv_color(x11,orchid3)). -assert(gv_color(x11,orchid4)). -assert(gv_color(x11,palegoldenrod)). -assert(gv_color(x11,palegreen)). -assert(gv_color(x11,palegreen1)). -assert(gv_color(x11,palegreen2)). -assert(gv_color(x11,palegreen3)). -assert(gv_color(x11,palegreen4)). -assert(gv_color(x11,paleturquoise)). -assert(gv_color(x11,paleturquoise1)). -assert(gv_color(x11,paleturquoise2)). -assert(gv_color(x11,paleturquoise3)). -assert(gv_color(x11,paleturquoise4)). -assert(gv_color(x11,palevioletred)). -assert(gv_color(x11,palevioletred1)). -assert(gv_color(x11,palevioletred2)). -assert(gv_color(x11,palevioletred3)). -assert(gv_color(x11,palevioletred4)). -assert(gv_color(x11,papayawhip)). -assert(gv_color(x11,peachpuff)). -assert(gv_color(x11,peachpuff1)). -assert(gv_color(x11,peachpuff2)). -assert(gv_color(x11,peachpuff3)). -assert(gv_color(x11,peachpuff4)). -assert(gv_color(x11,peru)). -assert(gv_color(x11,pink)). -assert(gv_color(x11,pink1)). -assert(gv_color(x11,pink2)). -assert(gv_color(x11,pink3)). -assert(gv_color(x11,pink4)). -assert(gv_color(x11,plum)). -assert(gv_color(x11,plum1)). -assert(gv_color(x11,plum2)). -assert(gv_color(x11,plum3)). -assert(gv_color(x11,plum4)). -assert(gv_color(x11,powderblue)). -assert(gv_color(x11,purple)). -assert(gv_color(x11,purple1)). -assert(gv_color(x11,purple2)). -assert(gv_color(x11,purple3)). -assert(gv_color(x11,purple4)). -assert(gv_color(x11,red)). -assert(gv_color(x11,red1)). -assert(gv_color(x11,red2)). -assert(gv_color(x11,red3)). -assert(gv_color(x11,red4)). -assert(gv_color(x11,rosybrown)). -assert(gv_color(x11,rosybrown1)). -assert(gv_color(x11,rosybrown2)). -assert(gv_color(x11,rosybrown3)). -assert(gv_color(x11,rosybrown4)). -assert(gv_color(x11,royalblue)). -assert(gv_color(x11,royalblue1)). -assert(gv_color(x11,royalblue2)). -assert(gv_color(x11,royalblue3)). -assert(gv_color(x11,royalblue4)). -assert(gv_color(x11,saddlebrown)). -assert(gv_color(x11,salmon)). -assert(gv_color(x11,salmon1)). -assert(gv_color(x11,salmon2)). -assert(gv_color(x11,salmon3)). -assert(gv_color(x11,salmon4)). -assert(gv_color(x11,sandybrown)). -assert(gv_color(x11,seagreen)). -assert(gv_color(x11,seagreen1)). -assert(gv_color(x11,seagreen2)). -assert(gv_color(x11,seagreen3)). -assert(gv_color(x11,seagreen4)). -assert(gv_color(x11,seashell)). -assert(gv_color(x11,seashell1)). -assert(gv_color(x11,seashell2)). -assert(gv_color(x11,seashell3)). -assert(gv_color(x11,seashell4)). -assert(gv_color(x11,sienna)). -assert(gv_color(x11,sienna1)). -assert(gv_color(x11,sienna2)). -assert(gv_color(x11,sienna3)). -assert(gv_color(x11,sienna4)). -assert(gv_color(x11,skyblue)). -assert(gv_color(x11,skyblue1)). -assert(gv_color(x11,skyblue2)). -assert(gv_color(x11,skyblue3)). -assert(gv_color(x11,skyblue4)). -assert(gv_color(x11,slateblue)). -assert(gv_color(x11,slateblue1)). -assert(gv_color(x11,slateblue2)). -assert(gv_color(x11,slateblue3)). -assert(gv_color(x11,slateblue4)). -assert(gv_color(x11,slategray)). -assert(gv_color(x11,slategray1)). -assert(gv_color(x11,slategray2)). -assert(gv_color(x11,slategray3)). -assert(gv_color(x11,slategray4)). -assert(gv_color(x11,slategrey)). -assert(gv_color(x11,snow)). -assert(gv_color(x11,snow1)). -assert(gv_color(x11,snow2)). -assert(gv_color(x11,snow3)). -assert(gv_color(x11,snow4)). -assert(gv_color(x11,springgreen)). -assert(gv_color(x11,springgreen1)). -assert(gv_color(x11,springgreen2)). -assert(gv_color(x11,springgreen3)). -assert(gv_color(x11,springgreen4)). -assert(gv_color(x11,steelblue)). -assert(gv_color(x11,steelblue1)). -assert(gv_color(x11,steelblue2)). -assert(gv_color(x11,steelblue3)). -assert(gv_color(x11,steelblue4)). -assert(gv_color(x11,tan)). -assert(gv_color(x11,tan1)). -assert(gv_color(x11,tan2)). -assert(gv_color(x11,tan3)). -assert(gv_color(x11,tan4)). -assert(gv_color(x11,thistle)). -assert(gv_color(x11,thistle1)). -assert(gv_color(x11,thistle2)). -assert(gv_color(x11,thistle3)). -assert(gv_color(x11,thistle4)). -assert(gv_color(x11,tomato)). -assert(gv_color(x11,tomato1)). -assert(gv_color(x11,tomato2)). -assert(gv_color(x11,tomato3)). -assert(gv_color(x11,tomato4)). -assert(gv_color(x11,transparent)). -assert(gv_color(x11,turquoise)). -assert(gv_color(x11,turquoise1)). -assert(gv_color(x11,turquoise2)). -assert(gv_color(x11,turquoise3)). -assert(gv_color(x11,turquoise4)). -assert(gv_color(x11,violet)). -assert(gv_color(x11,violetred)). -assert(gv_color(x11,violetred1)). -assert(gv_color(x11,violetred2)). -assert(gv_color(x11,violetred3)). -assert(gv_color(x11,violetred4)). -assert(gv_color(x11,wheat)). -assert(gv_color(x11,wheat1)). -assert(gv_color(x11,wheat2)). -assert(gv_color(x11,wheat3)). -assert(gv_color(x11,wheat4)). -assert(gv_color(x11,white)). -assert(gv_color(x11,whitesmoke)). -assert(gv_color(x11,yellow)). -assert(gv_color(x11,yellow1)). -assert(gv_color(x11,yellow2)). -assert(gv_color(x11,yellow3)). -assert(gv_color(x11,yellow4)). -assert(gv_color(x11,yellowgreen)). -assert(gv_color(svg,aliceblue)). -assert(gv_color(svg,antiquewhite)). -assert(gv_color(svg,aqua)). -assert(gv_color(svg,aquamarine)). -assert(gv_color(svg,azure)). -assert(gv_color(svg,beige)). -assert(gv_color(svg,bisque)). -assert(gv_color(svg,black)). -assert(gv_color(svg,blanchedalmond)). -assert(gv_color(svg,blue)). -assert(gv_color(svg,blueviolet)). -assert(gv_color(svg,brown)). -assert(gv_color(svg,burlywood)). -assert(gv_color(svg,cadetblue)). -assert(gv_color(svg,chartreuse)). -assert(gv_color(svg,chocolate)). -assert(gv_color(svg,coral)). -assert(gv_color(svg,cornflowerblue)). -assert(gv_color(svg,cornsilk)). -assert(gv_color(svg,crimson)). -assert(gv_color(svg,cyan)). -assert(gv_color(svg,darkblue)). -assert(gv_color(svg,darkcyan)). -assert(gv_color(svg,darkgoldenrod)). -assert(gv_color(svg,darkgray)). -assert(gv_color(svg,darkgreen)). -assert(gv_color(svg,darkgrey)). -assert(gv_color(svg,darkkhaki)). -assert(gv_color(svg,darkmagenta)). -assert(gv_color(svg,darkolivegreen)). -assert(gv_color(svg,darkorange)). -assert(gv_color(svg,darkorchid)). -assert(gv_color(svg,darkred)). -assert(gv_color(svg,darksalmon)). -assert(gv_color(svg,darkseagreen)). -assert(gv_color(svg,darkslateblue)). -assert(gv_color(svg,darkslategray)). -assert(gv_color(svg,darkslategrey)). -assert(gv_color(svg,darkturquoise)). -assert(gv_color(svg,darkviolet)). -assert(gv_color(svg,deeppink)). -assert(gv_color(svg,deepskyblue)). -assert(gv_color(svg,dimgray)). -assert(gv_color(svg,dimgrey)). -assert(gv_color(svg,dodgerblue)). -assert(gv_color(svg,firebrick)). -assert(gv_color(svg,floralwhite)). -assert(gv_color(svg,forestgreen)). -assert(gv_color(svg,fuchsia)). -assert(gv_color(svg,gainsboro)). -assert(gv_color(svg,ghostwhite)). -assert(gv_color(svg,gold)). -assert(gv_color(svg,goldenrod)). -assert(gv_color(svg,gray)). -assert(gv_color(svg,grey)). -assert(gv_color(svg,green)). -assert(gv_color(svg,greenyellow)). -assert(gv_color(svg,honeydew)). -assert(gv_color(svg,hotpink)). -assert(gv_color(svg,indianred)). -assert(gv_color(svg,indigo)). -assert(gv_color(svg,ivory)). -assert(gv_color(svg,khaki)). -assert(gv_color(svg,lavender)). -assert(gv_color(svg,lavenderblush)). -assert(gv_color(svg,lawngreen)). -assert(gv_color(svg,lemonchiffon)). -assert(gv_color(svg,lightblue)). -assert(gv_color(svg,lightcoral)). -assert(gv_color(svg,lightcyan)). -assert(gv_color(svg,lightgoldenrodyellow)). -assert(gv_color(svg,lightgray)). -assert(gv_color(svg,lightgreen)). -assert(gv_color(svg,lightgrey)). -assert(gv_color(svg,lightpink)). -assert(gv_color(svg,lightsalmon)). -assert(gv_color(svg,lightseagreen)). -assert(gv_color(svg,lightskyblue)). -assert(gv_color(svg,lightslategray)). -assert(gv_color(svg,lightslategrey)). -assert(gv_color(svg,lightsteelblue)). -assert(gv_color(svg,lightyellow)). -assert(gv_color(svg,lime)). -assert(gv_color(svg,limegreen)). -assert(gv_color(svg,linen)). -assert(gv_color(svg,magenta)). -assert(gv_color(svg,maroon)). -assert(gv_color(svg,mediumaquamarine)). -assert(gv_color(svg,mediumblue)). -assert(gv_color(svg,mediumorchid)). -assert(gv_color(svg,mediumpurple)). -assert(gv_color(svg,mediumseagreen)). -assert(gv_color(svg,mediumslateblue)). -assert(gv_color(svg,mediumspringgreen)). -assert(gv_color(svg,mediumturquoise)). -assert(gv_color(svg,mediumvioletred)). -assert(gv_color(svg,midnightblue)). -assert(gv_color(svg,mintcream)). -assert(gv_color(svg,mistyrose)). -assert(gv_color(svg,moccasin)). -assert(gv_color(svg,navajowhite)). -assert(gv_color(svg,navy)). -assert(gv_color(svg,oldlace)). -assert(gv_color(svg,olive)). -assert(gv_color(svg,olivedrab)). -assert(gv_color(svg,orange)). -assert(gv_color(svg,orangered)). -assert(gv_color(svg,orchid)). -assert(gv_color(svg,palegoldenrod)). -assert(gv_color(svg,palegreen)). -assert(gv_color(svg,paleturquoise)). -assert(gv_color(svg,palevioletred)). -assert(gv_color(svg,papayawhip)). -assert(gv_color(svg,peachpuff)). -assert(gv_color(svg,peru)). -assert(gv_color(svg,pink)). -assert(gv_color(svg,plum)). -assert(gv_color(svg,powderblue)). -assert(gv_color(svg,purple)). -assert(gv_color(svg,red)). -assert(gv_color(svg,rosybrown)). -assert(gv_color(svg,royalblue)). -assert(gv_color(svg,saddlebrown)). -assert(gv_color(svg,salmon)). -assert(gv_color(svg,sandybrown)). -assert(gv_color(svg,seagreen)). -assert(gv_color(svg,seashell)). -assert(gv_color(svg,sienna)). -assert(gv_color(svg,silver)). -assert(gv_color(svg,skyblue)). -assert(gv_color(svg,slateblue)). -assert(gv_color(svg,slategray)). -assert(gv_color(svg,slategrey)). -assert(gv_color(svg,snow)). -assert(gv_color(svg,springgreen)). -assert(gv_color(svg,steelblue)). -assert(gv_color(svg,tan)). -assert(gv_color(svg,teal)). -assert(gv_color(svg,thistle)). -assert(gv_color(svg,tomato)). -assert(gv_color(svg,turquoise)). -assert(gv_color(svg,violet)). -assert(gv_color(svg,wheat)). -assert(gv_color(svg,white)). -assert(gv_color(svg,whitesmoke)). -assert(gv_color(svg,yellow)). -assert(gv_color(svg,yellowgreen)). diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl index fa79bea..0c3755c 100644 --- a/prolog/gv/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -7,6 +7,7 @@ colorList//1 % +Pairs:list(pair(compound,float)) ] ). +:- ensure_loaded(library('gv/gv_color.data')). /**  GraphViz color @@ -17,23 +18,11 @@ */ :- use_module(library(apply)). -:- use_module(library(debug_ext)). :- use_module(library(dcg/basics)). :- use_module(library(dcg/dcg_abnf)). :- use_module(library(dcg/dcg_content)). -:- use_module(library(http/http_download)). :- use_module(library(lists)). -:- use_module(library(msg_ext)). :- use_module(library(os/file_ext)). -:- use_module(library(persistency)). -:- use_module(library(xpath)). -:- use_module(library(xpath/xpath_table)). - -%! gv_color(?Colorscheme:oneof([svg,x11]), ?Color:atom) is nondet. - -:- persistent(gv_color(colorscheme:oneof([svg,x11]),color:atom)). - -:- initialization(gv_color_init). @@ -79,69 +68,3 @@ wc(Color-Float) -- wc_weight(Float) -- \";\", float(Float). - - - - - -% INITIALIZATION % - -%! gv_color_download is det. - -gv_color_download:- - verbose( - gv_color_download0, - 'updating the GraphViz color table' - ). - -gv_color_download0:- - gv_color_uri(Uri), - html_download(Uri, Dom), - xpath_chk(Dom, //table(1), TableDom1), - xpath_chk(Dom, //table(2), TableDom2), - maplist(assert_color_table, [x11,svg], [TableDom1,TableDom2]). - - -assert_color_table(Colorscheme, TableDom):- - xpath_table(TableDom, _, Rows), - append(Rows, Cells), - forall( - member(Cell, Cells), - assert_gv_color(Colorscheme, Cell) - ). - - -%! gv_color_file(-File:atom) is det. - -gv_color_file(File):- - absolute_file_name('gv_color.log', File, [access(write)]). - - -%! gv_color_init is det. - -gv_color_init:- - gv_color_file(File), - ( exists_file(File) - - true - ; touch(File) - ), - db_attach(File, []), - file_age(File, Age), - gv_color_update(Age). - - -%! gv_color_update(+Age:float) is det. - -% The persistent store is still fresh. -gv_color_update(Age):- - once(gv_color(_, _)), - Age 132: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 603344f å’Œå˜åŠ¨å 2679253  [back to content](#compare) ``` diff diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl index 7fd5a58..43ff053 100644 --- a/prolog/gv/gv_file.pl +++ b/prolog/gv/gv_file.pl @@ -17,7 +17,8 @@ :- use_module(library(error)). :- use_module(library(gv/gv_graph)). :- use_module(library(option)). -:- use_module(library(process)). +:- use_module(library(os/external_program)). +:- use_module(library(os/process_ext)). :- use_module(library(string_ext)). :- predicate_options(gv_export/3, 3, [ @@ -28,6 +29,11 @@ output(+atom) ]). +:- dynamic(user:module_uses/2). +:- multifile(user:module_uses/2). + +user:module_uses(gv_file, program(dot)). + @@ -94,10 +100,9 @@ file_to_gv(InputFile, OutputFile, Opts):- % Run the GraphViz conversion command in the shell. format(atom(OutputTypeFlag), \"-T~a\", [OutputType]), format(atom(OutputFileFlag), \"-o~a\", [OutputFile]), - process_create( + run_process( path(Method), - [OutputTypeFlag,file(InputFile),OutputFileFlag], - [] + [OutputTypeFlag,file(InputFile),OutputFileFlag] ). ``` 133: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 2679253 å’Œå˜åŠ¨å a5e20f8  [back to content](#compare) ``` diff diff --git a/prolog/fca/fca_export.pl b/prolog/fca/fca_export.pl new file mode 100644 index 0000000..562a035 --- /dev/null +++ b/prolog/fca/fca_export.pl @@ -0,0 +1,87 @@ +:- module( + fca_export, + [ + fca_export/2, % +Context:compound + % ?File:atom + fca_export/3, % +Context:compound + % ?File:atom + % +Options:list(compound) + fca_label_attributes/2, % +Concept:compound + % -Label:atom + fca_label_concept/2, % +Concept:compound + % -Label:atom + fca_label_objects/2 % +Concept:compound + % -Label:atom + ] +). + +/**  FCA export + +@author Wouter Beek +@version 2015/11 +*/ + +:- use_module(library(dcg/dcg_collection)). +:- use_module(library(dcg/dcg_phrase)). +:- use_module(library(fca/fca)). +:- use_module(library(graph/build_export_graph)). +:- use_module(library(gv/gv_file)). +:- use_module(library(option)). + +:- predicate_options(fca_export/3, 3, [ + pass_to(build_export_graph/3, 3), + pass_to(gv_export/3, 3) + ]). + + + + + +%! fca_export(+Context:compound, ?File:atom) is det. +% Wrapper around fca_export/3 with default options. + +fca_export(Context, File):- + fca_export(Context, File, []). + + +%! fca_export(+Context:compound, ?File:atom, +Options:list(compound)) is det. + +fca_export(Context, File, Opts1):- + fca_lattice(Context, Lattice), + option(concept_label(VLabel_2), Opts1, fca_export:fca_label_concept), + merge_options([vertex_label(VLabel_2)], Opts1, Opts2), + build_export_graph(Lattice, ExportG, Opts2), + gv_export(ExportG, File, Opts1). + + + +%! fca_label_attributes(+Concept:compound, -Label:atom) is det. +% Writes a concept label displaying its attributes. + +fca_label_attributes(Concept, Lbl):- + string_phrase(dcg_attributes(Concept), Lbl). + +dcg_attributes(concept(_,As)) -- + set(As). + + + +%! fca_label_attributes(+Concept:compound, -Label:atom) is det. +% Writes a concept label display both its attributes and objects. + +fca_label_concept(Concept, Lbl):- + string_phrase(dcg_concept(Concept), Lbl). + +dcg_concept(Concept) -- + pair(dcg_objects(Concept), dcg_attributes(Concept)). + + + +%! fca_label_objects(+Concept:compound, -Label:atom) is det. +% Writes a concept label displaying its object. + +fca_label_objects(Concept, Lbl):- + string_phrase(dcg_objects(Concept), Lbl). + +dcg_objects(concept(Os,_)) -- + set(Os). diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl index 43ff053..4cf12a8 100644 --- a/prolog/gv/gv_file.pl +++ b/prolog/gv/gv_file.pl @@ -1,8 +1,10 @@ :- module( gv_file, [ + gv_export/2, % +ExportGraph:compound + % ?File:atom gv_export/3 % +ExportGraph:compound - % +OutputFile:atom + % ?File:atom % +Options:list(nvpair) ] ). @@ -10,7 +12,7 @@ /**  GraphViz file @author Wouter Beek -@version 2015/07, 2015/10 +@version 2015/07, 2015/10-2015/11 */ :- use_module(library(code_ext)). @@ -38,7 +40,14 @@ user:module_uses(gv_file, program(dot)). -%! gv_export(+ExportGraph:compound, +File:atom, +Options:list(compound)) is det. +%! gv_export(+ExportGraph:compound, ?File:atom) is det. +% Wrapper around gv_export/3 with default options. + +gv_export(ExportG, File):- + gv_export(ExportG, File, []). + + +%! gv_export(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det. % Returns a file containing a GraphViz visualization of the given graph. % % The following options are supported: @@ -68,7 +77,7 @@ gv_export(ExportG, File, Opts):- %! file_to_gv( %! +InputFile:atom, -%! +OutputFile:atom, +%! ?OutputFile:atom, %! +Options:list(compound) %! ) is det. % Converts a GraphViz DOT file to an image file, using a specific @@ -101,7 +110,7 @@ file_to_gv(InputFile, OutputFile, Opts):- format(atom(OutputTypeFlag), \"-T~a\", [OutputType]), format(atom(OutputFileFlag), \"-o~a\", [OutputFile]), run_process( - path(Method), + Method, [OutputTypeFlag,file(InputFile),OutputFileFlag] ). diff --git a/test/test.pl b/test/test.pl index ee92ae6..5ce2db0 100644 --- a/test/test.pl +++ b/test/test.pl @@ -1,3 +1,5 @@ +%/fca + :- use_module(library(fca/fca_export)). %/graph :- use_module(library(graph/build_export_graph)). %/gv ``` 134: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ a5e20f8 å’Œå˜åŠ¨å bc3c502  [back to content](#compare) ``` diff diff --git a/prolog/fca/fca_export.pl b/prolog/fca/fca_export.pl index 562a035..249d104 100644 --- a/prolog/fca/fca_export.pl +++ b/prolog/fca/fca_export.pl @@ -27,6 +27,7 @@ :- use_module(library(graph/build_export_graph)). :- use_module(library(gv/gv_file)). :- use_module(library(option)). +:- use_module(library(ordsets)). :- predicate_options(fca_export/3, 3, [ pass_to(build_export_graph/3, 3), @@ -47,12 +48,16 @@ fca_export(Context, File):- %! fca_export(+Context:compound, ?File:atom, +Options:list(compound)) is det. fca_export(Context, File, Opts1):- - fca_lattice(Context, Lattice), + fca_lattice(Context, Lattice1), + maplist(remove_reflexive_edge, Lattice1, Lattice2), option(concept_label(VLabel_2), Opts1, fca_export:fca_label_concept), merge_options([vertex_label(VLabel_2)], Opts1, Opts2), - build_export_graph(Lattice, ExportG, Opts2), + build_export_graph(Lattice2, ExportG, Opts2), gv_export(ExportG, File, Opts1). +remove_reflexive_edge(M-Ns1, M-Ns2):- + ord_del_element(Ns1, M, Ns2). + %! fca_label_attributes(+Concept:compound, -Label:atom) is det. ``` 135: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ bc3c502 å’Œå˜åŠ¨å 7ec98aa  [back to content](#compare) ``` diff diff --git a/prolog/fca/fca_export.pl b/prolog/fca/fca_export.pl index 249d104..0368834 100644 --- a/prolog/fca/fca_export.pl +++ b/prolog/fca/fca_export.pl @@ -25,6 +25,7 @@ :- use_module(library(dcg/dcg_phrase)). :- use_module(library(fca/fca)). :- use_module(library(graph/build_export_graph)). +:- use_module(library(graph/s/s_graph)). :- use_module(library(gv/gv_file)). :- use_module(library(option)). :- use_module(library(ordsets)). @@ -49,14 +50,29 @@ fca_export(Context, File):- fca_export(Context, File, Opts1):- fca_lattice(Context, Lattice1), - maplist(remove_reflexive_edge, Lattice1, Lattice2), + %minimize(Lattice1, Lattice2), + Lattice2 = Lattice1, option(concept_label(VLabel_2), Opts1, fca_export:fca_label_concept), - merge_options([vertex_label(VLabel_2)], Opts1, Opts2), + merge_options( + [vertex_label(VLabel_2),vertex_rank(fca:concept_cardinality)], + Opts1, + Opts2 + ), build_export_graph(Lattice2, ExportG, Opts2), gv_export(ExportG, File, Opts1). -remove_reflexive_edge(M-Ns1, M-Ns2):- - ord_del_element(Ns1, M, Ns2). +minimize(G1, G2):- + s_vertices(G1, Vs), + aggregate_all( + set(X-Y), + ( + s_edge(G1, X-Y), + maplist(concept_cardinality, [X,Y], [CX,CY]), + CX gv_attrs(Kind, Attrs), \"\\n\", !. + + %! gv_kind(+Kind:oneof([edge,graph,node]))// . gv_kind(Kind) -- @@ -132,14 +131,11 @@ gv_node_statement(I, vertex(Id,Attrs)) -- -%! gv_ranked_node_collection(+Indent:nonneg, Rank)// is det. +%! gv_ranked_node_collection(+Indent:nonneg, Rank:pair)// is det. -gv_ranked_node_collection(I, Rank) -- +gv_ranked_node_collection(I, RankVTerm-VTerms) -- indent(I), - bracketed(curly, gv_ranked_node_collection0(I, Rank)). - -gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -- - \"\\n\", + \"{\\n\", % The rank attribute. {NewI is I + 1}, @@ -148,15 +144,11 @@ gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -- \"\\n\", % Vertice statements. - *( - gv_node_statement(NewI), - [Rank_V_Term|Content_V_Terms], - [] - ), + *(gv_node_statement(NewI), [RankVTerm|VTerms], []), % We want to indent the closing curly brace. indent(I), - \"\\n\". + \"\\n}\". @@ -170,7 +162,7 @@ gv_ranked_node_collection0(I, rank(Rank_V_Term,Content_V_Terms)) -- %! )// is det. gv_attrs(Kind, L) -- - bracketed(square, *(gv_attr(Kind), L, [])). + \"[\", *(gv_attr(Kind), L, []), \"]\". %! gv_attr(+Context:oneof([edge,graph,node]), +Attribute:compound)// is det. @@ -179,10 +171,7 @@ gv_attrs(Kind, L) -- gv_attr(Context, Attr) -- {Attr =.. [N,V]}, - gv_id(N), - \"=\", - gv_attr_value(Context, N=V), - \";\". + gv_id(N), \"=\", gv_attr_value(Context, N=V), \";\". @@ -213,7 +202,7 @@ gv_id(html_like_label(Content)) -- !, % Double-quoted strings. % The quotes are already part of the given atom. gv_id(double_quoted_string(Atom)) -- !, - quoted(atom(Atom)). + \"\\\"\", atom(Atom), \"\\\"\". % Numerals. gv_id(N) -- {number(N)}, !, @@ -228,6 +217,7 @@ gv_id(Atom) -- % GraphViz keyword. {\\+ gv_keyword([H|T])}. + %! gv_id_first(+First:code)// is det. % Generates the first character of a GraphViz identifier. @@ -236,16 +226,17 @@ gv_id_first(X) -- gv_id_first(X) -- underscore(X). + %! gv_id_rest(+NonFirst:code)// is det. % Generates a non-first character of a GraphViz identifier. gv_id_rest([]) -- !, \"\". gv_id_rest([H|T]) -- - ( ascii_alpha_numeric(H) - ; underscore(H) - ), + (ascii_alpha_numeric(H) ; underscore(H)), gv_id_rest(T). + + %! gv_keyword(+Codes:list(code)) is semidet. % Succeeds if the given codes for a GraphViz reserved keyword. @@ -254,6 +245,7 @@ gv_keyword(Cs):- % So we must use phrase/[2,3]. phrase(gv_keyword, Cs). + %! gv_keyword// . % GraphViz has reserved keywords that cannot be used as identifiers. % GraphViz keywords are case-insensitive. @@ -289,32 +281,22 @@ gv_node_id(Id) -- gv_port -- gv_port_location, - ( gv_port_angle - ; \"\" - ). + (gv_port_angle ; \"\"). gv_port -- gv_port_angle, - ( gv_port_location - ; \"\" - ). + (gv_port_location ; \"\"). gv_port -- - \":\", - gv_compass_pt(_). + \":\", gv_compass_pt(_). gv_port_angle -- - \"@\", - gv_id(_). + \"@\", gv_id(_). gv_port_location -- - \":\", - gv_id(_). + \":\", gv_id(_). gv_port_location -- - \":\", - bracketed(( - gv_id(_), - \",\", - gv_id(_) - )). + \":[\", gv_id(_), \",\", gv_id(_), \"]\". + + %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . % ``` ``` 136: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7ec98aa å’Œå˜åŠ¨å 984d3b9  [back to content](#compare) ``` diff diff --git a/prolog/fca/fca_export.pl b/prolog/fca/fca_export.pl index 0368834..d14d24b 100644 --- a/prolog/fca/fca_export.pl +++ b/prolog/fca/fca_export.pl @@ -49,31 +49,16 @@ fca_export(Context, File):- %! fca_export(+Context:compound, ?File:atom, +Options:list(compound)) is det. fca_export(Context, File, Opts1):- - fca_lattice(Context, Lattice1), - %minimize(Lattice1, Lattice2), - Lattice2 = Lattice1, + fca_hasse(Context, Hasse), option(concept_label(VLabel_2), Opts1, fca_export:fca_label_concept), merge_options( [vertex_label(VLabel_2),vertex_rank(fca:concept_cardinality)], Opts1, Opts2 ), - build_export_graph(Lattice2, ExportG, Opts2), + build_export_graph(Hasse, ExportG, Opts2), gv_export(ExportG, File, Opts1). -minimize(G1, G2):- - s_vertices(G1, Vs), - aggregate_all( - set(X-Y), - ( - s_edge(G1, X-Y), - maplist(concept_cardinality, [X,Y], [CX,CY]), - CX 137: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 984d3b9 å’Œå˜åŠ¨å 4401e20  [back to content](#compare) ``` diff diff --git a/prolog/fca/fca_export.pl b/prolog/fca/fca_export.pl index d14d24b..c48fe40 100644 --- a/prolog/fca/fca_export.pl +++ b/prolog/fca/fca_export.pl @@ -3,15 +3,9 @@ [ fca_export/2, % +Context:compound % ?File:atom - fca_export/3, % +Context:compound - % ?File:atom - % +Options:list(compound) - fca_label_attributes/2, % +Concept:compound - % -Label:atom - fca_label_concept/2, % +Concept:compound - % -Label:atom - fca_label_objects/2 % +Concept:compound - % -Label:atom + fca_export/3 % +Context:compound + % ?File:atom + % :Options:list(compound) ] ). @@ -30,11 +24,18 @@ :- use_module(library(option)). :- use_module(library(ordsets)). +:- meta_predicate(concept_label(+,1,+,-)). +:- meta_predicate(concept_label(+,1,+,?,?)). +:- meta_predicate(fca_export(+,?,:)). + :- predicate_options(fca_export/3, 3, [ - pass_to(build_export_graph/3, 3), + concept_label(+oneof([attributes,both,objects])), + object_label(+callable), pass_to(gv_export/3, 3) ]). +is_meta(object_label). + @@ -46,48 +47,46 @@ fca_export(Context, File):- fca_export(Context, File, []). -%! fca_export(+Context:compound, ?File:atom, +Options:list(compound)) is det. +%! fca_export(+Context:compound, ?File:atom, :Options:list(compound)) is det. +% The following optios are supported: +% * concept_label(+oneof([attributes,both,objects])) fca_export(Context, File, Opts1):- fca_hasse(Context, Hasse), - option(concept_label(VLabel_2), Opts1, fca_export:fca_label_concept), + + meta_options(is_meta, Opts1, Opts2), + option(concept_label(Mode), Opts2, both), + option(object_label(Object_1), Opts2, =), merge_options( - [vertex_label(VLabel_2),vertex_rank(fca:concept_cardinality)], - Opts1, - Opts2 + [ + vertex_label(fca_export:concept_label(Mode, Object_1)), + vertex_rank(fca:concept_cardinality) + ], + Opts2, + Opts3 ), - build_export_graph(Hasse, ExportG, Opts2), - gv_export(ExportG, File, Opts1). - - - -%! fca_label_attributes(+Concept:compound, -Label:atom) is det. -% Writes a concept label displaying its attributes. - -fca_label_attributes(Concept, Lbl):- - string_phrase(dcg_attributes(Concept), Lbl). + build_export_graph(Hasse, ExportG, Opts3), -dcg_attributes(concept(_,As)) -- - set(As). - - - -%! fca_label_attributes(+Concept:compound, -Label:atom) is det. -% Writes a concept label display both its attributes and objects. + gv_export(ExportG, File, Opts2). -fca_label_concept(Concept, Lbl):- - string_phrase(dcg_concept(Concept), Lbl). -dcg_concept(Concept) -- - pair(dcg_objects(Concept), dcg_attributes(Concept)). +%! concept_label( +%! +Mode:oneof([attributes,both,objects]), +%! :Object_1, +%! +Concept:compound, +%! -Label:atom +%! ) is det. +concept_label(Mode, Object_1, Concept, Lbl):- + string_phrase(concept_label(Mode, Object_1, Concept), Lbl). -%! fca_label_objects(+Concept:compound, -Label:atom) is det. -% Writes a concept label displaying its object. - -fca_label_objects(Concept, Lbl):- - string_phrase(dcg_objects(Concept), Lbl). - -dcg_objects(concept(Os,_)) -- - set(Os). +concept_label(attributes, _, concept(_,As)) -- + set(As). +concept_label(both, Object_1, Concept) -- + pair( + concept_label(objects, Object_1, Concept), + concept_label(attributes, Object_1, Concept) + ). +concept_label(objects, Object_1, concept(Os,_)) -- + set(Object_1, Os). diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl index f5dc122..71f9dd4 100644 --- a/prolog/graph/build_export_graph.pl +++ b/prolog/graph/build_export_graph.pl @@ -158,12 +158,14 @@ build_export_ranks(Vs, VTerms, VRanks, [], Opts):- build_export_rank_terms(GroupedPairs, VRanks). build_export_ranks(_, VTerms, [], VTerms, _). -build_export_rank_terms([N-VTerms|T1], [vertex(Id,[label(Lbl)])-VTerms|T2]):- !, - format(atom(Id), 'r~d', [N]), - atom_number(Lbl, N), +build_export_rank_terms([N-VTerms|T1], [RankTerm-VTerms|T2]):- !, + build_export_rank_term(N, RankTerm), build_export_rank_terms(T1, T2). build_export_rank_terms([], []). +build_export_rank_term(N, vertex(Id,[label(\"\"),shape(none)])):- + format(atom(Id), \"r~d\", [N]). + %! edge_term( ``` 138: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 4401e20 å’Œå˜åŠ¨å 2247466  [back to content](#compare) ``` diff diff --git a/prolog/fca/fca_export.pl b/prolog/fca/fca_export.pl index c48fe40..03353e3 100644 --- a/prolog/fca/fca_export.pl +++ b/prolog/fca/fca_export.pl @@ -17,6 +17,7 @@ :- use_module(library(dcg/dcg_collection)). :- use_module(library(dcg/dcg_phrase)). +:- use_module(library(dcg/dcg_pl)). :- use_module(library(fca/fca)). :- use_module(library(graph/build_export_graph)). :- use_module(library(graph/s/s_graph)). @@ -24,8 +25,8 @@ :- use_module(library(option)). :- use_module(library(ordsets)). -:- meta_predicate(concept_label(+,1,+,-)). -:- meta_predicate(concept_label(+,1,+,?,?)). +:- meta_predicate(concept_label(+,1,1,+,-)). +:- meta_predicate(concept_label(+,1,1,+,?,?)). :- meta_predicate(fca_export(+,?,:)). :- predicate_options(fca_export/3, 3, [ @@ -34,6 +35,7 @@ pass_to(gv_export/3, 3) ]). +is_meta(attribute_label). is_meta(object_label). @@ -49,17 +51,27 @@ fca_export(Context, File):- %! fca_export(+Context:compound, ?File:atom, :Options:list(compound)) is det. % The following optios are supported: +% * attribute_label(+callable) +% DCG writing the labels for individual attributes. +% Default is pl_term//1. % * concept_label(+oneof([attributes,both,objects])) +% Determines which components of the concepts are displayed +% in the export graph. +% Default is `both`. +% * object_label(+callable) +% DCG writing the labels for individual objects. +% Default is pl_term//1. fca_export(Context, File, Opts1):- fca_hasse(Context, Hasse), meta_options(is_meta, Opts1, Opts2), + option(attribute_label(ALbl_1), Opts2, pl_term), option(concept_label(Mode), Opts2, both), - option(object_label(Object_1), Opts2, =), + option(object_label(OLbl_1), Opts2, pl_term), merge_options( [ - vertex_label(fca_export:concept_label(Mode, Object_1)), + vertex_label(fca_export:concept_label(Mode, OLbl_1, ALbl_1)), vertex_rank(fca:concept_cardinality) ], Opts2, @@ -73,20 +85,29 @@ fca_export(Context, File, Opts1):- %! concept_label( %! +Mode:oneof([attributes,both,objects]), -%! :Object_1, +%! :ObjectLabel_1, +%! :AttributeLabel_1, %! +Concept:compound, %! -Label:atom %! ) is det. -concept_label(Mode, Object_1, Concept, Lbl):- - string_phrase(concept_label(Mode, Object_1, Concept), Lbl). +concept_label(Mode, OLbl_1, ALbl_1, Concept, Lbl):- + string_phrase(concept_label(Mode, OLbl_1, ALbl_1, Concept), Lbl). -concept_label(attributes, _, concept(_,As)) -- - set(As). -concept_label(both, Object_1, Concept) -- + +%! concept_label( +%! +Mode:oneof([attributes,both,objects]), +%! :ObjectLabel_1, +%! :AttributeLabel_1, +%! +Concept:compound +%! )// is det. + +concept_label(attributes, _, ALbl_1, concept(_,As)) -- + set(ALbl_1, As). +concept_label(both, OLbl_1, ALbl_1, Concept) -- pair( - concept_label(objects, Object_1, Concept), - concept_label(attributes, Object_1, Concept) + concept_label(objects, OLbl_1, ALbl_1, Concept), + concept_label(attributes, OLbl_1, ALbl_1, Concept) ). -concept_label(objects, Object_1, concept(Os,_)) -- - set(Object_1, Os). +concept_label(objects, OLbl_1, _, concept(Os,_)) -- + set(OLbl_1, Os). ``` 139: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 2247466 å’Œå˜åŠ¨å f4a9322  [back to content](#compare) ``` diff diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl index 79c1be0..a9e1a42 100644 --- a/prolog/gv/gv_graph.pl +++ b/prolog/gv/gv_graph.pl @@ -76,7 +76,7 @@ gv_graph(G1, I) -- % The first statement in the GraphViz output. % States that this file represents a graph according to the GraphViz format. - indent(I), + tab(I), % Strictness. {select_option(strict(Strict), GAttrs2, GAttrs3, false)}, @@ -156,7 +156,7 @@ gv_graph(G1, I) -- % Note that we do not include a line_feed here. % We want to indent the closing curly brace. - indent(I), + tab(I), \"}\\n\". gv_edge_statements(I, Dir, L) -- diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index 8644e1c..d86c1b4 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -61,7 +61,7 @@ a_list = ID \"=\" ID [\",\"] [a_list] % @tbd Add support for multiple, consecutive occurrences of gv_edge_rhs//2. gv_edge_statement(I, Dir, edge(From,To,Attrs)) -- - indent(I), + tab(I), gv_node_id(From), \" \", gv_edge_operator(Dir), \" \", @@ -105,7 +105,7 @@ gv_edge_operator(Dir) -- gv_generic_attributes_statement(_, _, []) -- !, \"\". gv_generic_attributes_statement(Kind, I, Attrs) -- - indent(I), + tab(I), gv_kind(Kind), \" \", gv_attrs(Kind, Attrs), \"\\n\", !. @@ -124,7 +124,7 @@ gv_kind(Kind) -- % A GraphViz statement describing a vertex (GraphViz calls vertices 'nodes'). gv_node_statement(I, vertex(Id,Attrs)) -- - indent(I), + tab(I), gv_node_id(Id), gv_attrs(node, Attrs), \"\\n\". @@ -134,12 +134,12 @@ gv_node_statement(I, vertex(Id,Attrs)) -- %! gv_ranked_node_collection(+Indent:nonneg, Rank:pair)// is det. gv_ranked_node_collection(I, RankVTerm-VTerms) -- - indent(I), + tab(I), \"{\\n\", % The rank attribute. {NewI is I + 1}, - indent(NewI), + tab(NewI), gv_attr(subgraph, rank(same)), \"\\n\", @@ -147,7 +147,7 @@ gv_ranked_node_collection(I, RankVTerm-VTerms) -- *(gv_node_statement(NewI), [RankVTerm|VTerms], []), % We want to indent the closing curly brace. - indent(I), + tab(I), \"\\n}\". ``` 140: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ f4a9322 å’Œå˜åŠ¨å 0d2712a  [back to content](#compare) ``` diff diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl index 5ab08a6..8fa78af 100644 --- a/prolog/gv/gv_attr_type.pl +++ b/prolog/gv/gv_attr_type.pl @@ -46,14 +46,11 @@ /**  GraphViz attribute types @author Wouter Beek -@version 2015/07 +@version 2015/07, 2015/11 */ :- use_module(library(dcg/basics), except([string//1])). -:- use_module(library(dcg/dcg_abnf)). -:- use_module(library(dcg/dcg_ascii)). :- use_module(library(dcg/dcg_phrase)). -:- use_module(library(dcg/dcg_quoted)). :- use_module(library(gv/gv_html)). @@ -62,47 +59,45 @@ %! gv_attr_type(?Type:atom) is nondet. -gv_attr_type(addDouble) -- \"addDouble\". -gv_attr_type(addPoint) -- \"addPoint\". -gv_attr_type(arrowType) -- \"arrowType\". -gv_attr_type(bool) -- \"bool\". -gv_attr_type(color) -- \"color\". -gv_attr_type(colorList) -- \"colorList\". +gv_attr_type(addDouble) -- \"addDouble\". +gv_attr_type(addPoint) -- \"addPoint\". +gv_attr_type(arrowType) -- \"arrowType\". +gv_attr_type(bool) -- \"bool\". +gv_attr_type(color) -- \"color\". +gv_attr_type(colorList) -- \"colorList\". gv_attr_type(clusterMode) -- \"clusterMode\". -gv_attr_type(dirType) -- \"dirType\". -gv_attr_type(double) -- \"double\". -gv_attr_type(doubleList) -- \"doubleList\". -gv_attr_type(escString) -- \"escString\". -gv_attr_type(layerList) -- \"layerList\". -gv_attr_type(layerRange) -- \"layerRange\". -gv_attr_type(lblString) -- \"lblString\". -gv_attr_type(int) -- \"int\". -gv_attr_type(outputMode) -- \"outputMode\". -gv_attr_type(packMode) -- \"packMode\". -gv_attr_type(pagedir) -- \"pagedir\". -gv_attr_type(point) -- \"point\". -gv_attr_type(pointList) -- \"pointList\". -gv_attr_type(portPos) -- \"portPos\". -gv_attr_type(quadType) -- \"quadType\". -gv_attr_type(rankType) -- \"rankType\". -gv_attr_type(rankdir) -- \"rankdir\". -gv_attr_type(rect) -- \"rect\". -gv_attr_type(shape) -- \"shape\". -gv_attr_type(smoothType) -- \"smoothType\". -gv_attr_type(splineType) -- \"splineType\". -gv_attr_type(startType) -- \"startType\". -gv_attr_type(string) -- \"string\". -gv_attr_type(style) -- \"style\". -gv_attr_type(viewPort) -- \"viewPort\". +gv_attr_type(dirType) -- \"dirType\". +gv_attr_type(double) -- \"double\". +gv_attr_type(doubleList) -- \"doubleList\". +gv_attr_type(escString) -- \"escString\". +gv_attr_type(layerList) -- \"layerList\". +gv_attr_type(layerRange) -- \"layerRange\". +gv_attr_type(lblString) -- \"lblString\". +gv_attr_type(int) -- \"int\". +gv_attr_type(outputMode) -- \"outputMode\". +gv_attr_type(packMode) -- \"packMode\". +gv_attr_type(pagedir) -- \"pagedir\". +gv_attr_type(point) -- \"point\". +gv_attr_type(pointList) -- \"pointList\". +gv_attr_type(portPos) -- \"portPos\". +gv_attr_type(quadType) -- \"quadType\". +gv_attr_type(rankType) -- \"rankType\". +gv_attr_type(rankdir) -- \"rankdir\". +gv_attr_type(rect) -- \"rect\". +gv_attr_type(shape) -- \"shape\". +gv_attr_type(smoothType) -- \"smoothType\". +gv_attr_type(splineType) -- \"splineType\". +gv_attr_type(startType) -- \"startType\". +gv_attr_type(string) -- \"string\". +gv_attr_type(style) -- \"style\". +gv_attr_type(viewPort) -- \"viewPort\". %! addDouble(+Float:float)// . % An *addDouble* is represented by a Prolog float. -addDouble(N) -- - (\"+\" ; \"\"), - float(N). +addDouble(N) -- (\"+\", ! ; \"\"), float(N). @@ -110,47 +105,38 @@ addDouble(N) -- % An *addPoint* is represented by a compound of the following form: % `point(X:float,Y:float,InputOnly:boolean)`. -addPoint(Point) -- - (\"+\" ; \"\"), - point(Point). +addPoint(Point) -- (\"+\", ! ; \"\"), point(Point). %! arrowType(+ArrowType:atom)// . -arrowType(V) -- - {arrowType(V)}, - atom(V). - -arrowType(V):- - primitive_shape(V). -arrowType(V):- - derived(V). -arrowType(V):- - backwards_compatible(V). - -primitive_shape(box). -primitive_shape(crow). -primitive_shape(circle). -primitive_shape(diamond). -primitive_shape(dot). -primitive_shape(inv). -primitive_shape(none). -primitive_shape(normal). -primitive_shape(tee). -primitive_shape(vee). - -derived(odot). -derived(invdot). -derived(invodot). -derived(obox). -derived(odiamond). - -backwards_compatible(ediamond). -backwards_compatible(empty). -backwards_compatible(halfopen). -backwards_compatible(invempty). -backwards_compatible(open). +arrowType(V) -- primitive_shape(V). +arrowType(V) -- derived(V). +arrowType(V) -- backwards_compatible(V). + +primitive_shape(box) -- \"box\". +primitive_shape(crow) -- \"crow\". +primitive_shape(circle) -- \"circle\". +primitive_shape(diamond) -- \"diamond\". +primitive_shape(dot) -- \"dot\". +primitive_shape(inv) -- \"inv\". +primitive_shape(none) -- \"none\". +primitive_shape(normal) -- \"normal\". +primitive_shape(tee) -- \"tee\". +primitive_shape(vee) -- \"vee\". + +derived(odot) -- \"odot\". +derived(invdot) -- \"invdot\". +derived(invodot) -- \"invodot\". +derived(obox) -- \"obox\". +derived(odiamond) -- \"odiamond\". + +backwards_compatible(ediamond) -- \"ediamond\". +backwards_compatible(empty) -- \"empty\". +backwards_compatible(halfopen) -- \"halfopen\". +backwards_compatible(invempty) -- \"invempty\". +backwards_compatible(open) -- \"open\". @@ -158,47 +144,37 @@ backwards_compatible(open). bool(false) -- \"false\". bool(false) -- \"no\". -bool(true) -- \"true\". -bool(true) -- \"yes\". +bool(true) -- \"true\". +bool(true) -- \"yes\". %! clusterMode(+ClusterMode:atom)// . -clusterMode(V) -- - {clusterMode(V)}, - atom(V). - -clusterMode(global). -clusterMode(local). -clusterMode(none). +clusterMode(global) -- \"global\". +clusterMode(local) -- \"local\". +clusterMode(none) -- \"none\". %! dirType(+DirectionType:oneof([back,both,forward,none]))// . -dirType(DirType) -- - {dirType(DirType)}, - atom(DirType). - -dirType(back). -dirType(both). -dirType(forward). -dirType(none). +dirType(back) -- \"back\". +dirType(both) -- \"both\". +dirType(forward) -- \"forward\". +dirType(none) -- \"none\". %! double(+Double:float)// . -double(N) -- - float(N). +double(N) -- float(N). %! doubleList(+Doubles:list(float))// . -doubleList(L) -- - *(double, L, [separator(colon)]). +doubleList([H|T]) -- double(H), (\":\", !, doubleList(T) ; {T = []}). @@ -210,15 +186,11 @@ escString(S1) -- - string_phrase(escape_double_quotes, S1, S2) ; atom_phrase(escape_double_quotes, S1, S2) )}, - quoted(atom(S2)). + \"\\\"\", atom(S2), \"\\\"\". -escape_double_quotes, [92,34] -- - [34], !, - escape_double_quotes. -escape_double_quotes, [X] -- - [X], !, - escape_double_quotes. -escape_double_quotes -- []. +escape_double_quotes, [0'\\\\,0'\"] -- [0'\"], !, escape_double_quotes. +escape_double_quotes, [X] -- [X], !, escape_double_quotes. +escape_double_quotes -- \"\". @@ -232,29 +204,22 @@ escape_double_quotes -- []. %! lblString(+String:compound)// . -lblString(html_like_label(V)) -- - gv_html_like_label(V). -lblString(V) -- - escString(V). +lblString(html_like_label(V)) -- gv_html_like_label(V). +lblString(V) -- escString(V). %! int(+Integer:integer)// . -int(V) -- - integer(V). +int(V) -- integer(V). %! outputMode(+OutputMode:atom)// . -outputMode(V) -- - {outputMode(V)}, - atom(V). - -outputMode(breadthfirst). -outputMode(edgesfirst). -outputMode(nodesfirst). +outputMode(breadthfirst) -- \"breadthfirst\". +outputMode(edgesfirst) -- \"edgesfirst\". +outputMode(nodesfirst) -- \"nodesfirst\". @@ -264,18 +229,14 @@ outputMode(nodesfirst). %! pagedir(+PageDirection:atom)// . -pagedir(V) -- - {pagedir(V)}, - atom(V). - -pagedir('BL'). -pagedir('BR'). -pagedir('LB'). -pagedir('LT'). -pagedir('RB'). -pagedir('RT'). -pagedir('TL'). -pagedir('TR'). +pagedir('BL') -- \"BL\". +pagedir('BR') -- \"BR\". +pagedir('LB') -- \"LB\". +pagedir('LT') -- \"LT\". +pagedir('RB') -- \"RB\". +pagedir('RT') -- \"RT\". +pagedir('TL') -- \"TL\". +pagedir('TR') -- \"TR\". @@ -284,7 +245,7 @@ pagedir('TR'). % `point(X:float,Y:float,Changeable:boolean)`. point(point(X,Y,Changeable)) -- - '#'(2, float, [X,Y], [separator(comma)]), + float(X), \",\", float(Y), input_changeable(Changeable). input_changeable(false) -- \"\". @@ -305,60 +266,44 @@ pointList(Points) -- %! quadType(+QuadType:atom)// . -quadType(V) -- - {quadType(V)}, - atom(V). - -quadType(fast). -quadType(none). -quadType(normal). +quadType(fast) -- \"fast\". +quadType(none) -- \"none\". +quadType(normal) -- \"normal\". %! rankType(+RankType:atom)// . -rankType(V) -- - {rankType(V)}, - atom(V). - -rankType(max). -rankType(min). -rankType(same). -rankType(sink). -rankType(source). - +rankType(max) -- \"max\". +rankType(min) -- \"min\". +rankType(same) -- \"same\". +rankType(sink) -- \"sink\". +rankType(source) -- \"source\". -%! rankdir(+RankDirection:atom)// . -rankdir(V) -- - {rankdir(V)}, - atom(V). +%! rankdir(+RankDirection:oneof(['BT','LR','RL','TB']))// . -rankdir('BT'). -rankdir('LR'). -rankdir('RL'). -rankdir('TB'). +rankdir('BT') -- \"BT\". +rankdir('LR') -- \"LR\". +rankdir('RL') -- \"RL\". +rankdir('TB') -- \"TB\". %! rect(+Rectangle:compound)// . rect(rect(LowerLeftX,LowerLeftY,UpperRightX,UpperRightY)) -- - '#'( - 4, - float, - [LowerLeftX,LowerLeftY,UpperRightX,UpperRightY], - [separator(comma)] - ). + float(LowerLeftX), \",\", + float(LowerLeftY), \",\", + float(UpperRightX), \",\", + float(UpperRightY). %! shape(+Shape:atom)// . -shape(V) -- - {polygon_based_shape(V)}, - atom(V). +shape(V) -- {polygon_based_shape(V)}, atom(V). polygon_based_shape(assembly). polygon_based_shape(box). @@ -420,9 +365,7 @@ polygon_based_shape(utr). %! smoothType(+SmoothType:atom)// . -smoothType(V) -- - {smoothType(V)}, - atom(V). +smoothType(V) -- {smoothType(V)}, atom(V). smoothType(avg_dist). smoothType(graph_dist). @@ -445,16 +388,13 @@ smoothType(triangle). %! string(?String:atom)// . % A GraphViz string. -string(Content) -- - quoted(atom(Content)). +string(Content) -- \"\\\"\", atom(Content), \"\\\"\". %! style(?Context:oneof([cluster,edge,node]), ?Style:atom) is nondet. -style(Context, Style) -- - {style(Context, Style)}, - atom(Style). +style(Context, Style) -- {style(Context, Style)}, atom(Style). style(cluster, bold). style(cluster, dashed). diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl index 0c3755c..3232c97 100644 --- a/prolog/gv/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -19,7 +19,6 @@ :- use_module(library(apply)). :- use_module(library(dcg/basics)). -:- use_module(library(dcg/dcg_abnf)). :- use_module(library(dcg/dcg_content)). :- use_module(library(lists)). :- use_module(library(os/file_ext)). @@ -36,7 +35,7 @@ color(rgb(Red,Green,Blue)) -- !, \"#\", - '#'(3, hex_color, [Red,Green,Blue], []). + '#'(3, hex_color, [Red,Green,Blue]). color(rgbs(Red,Green,Blue,Alpha)) -- !, color(rgb(Red,Green,Blue)), hex_color(Alpha). diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index d86c1b4..6877107 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -32,7 +32,6 @@ a_list = ID \"=\" ID [\",\"] [a_list] :- use_module(library(dcg/dcg_abnf)). :- use_module(library(dcg/dcg_ascii)). :- use_module(library(dcg/dcg_content)). -:- use_module(library(dcg/dcg_quoted)). :- use_module(library(gv/gv_attrs)). :- use_module(library(gv/gv_html)). :- use_module(library(error)). @@ -114,9 +113,7 @@ gv_generic_attributes_statement(Kind, I, Attrs) -- %! gv_kind(+Kind:oneof([edge,graph,node]))// . -gv_kind(Kind) -- - {must_be(oneof([edge,graph,node]), Kind)}, - atom(Kind). +gv_kind(Kind) -- {must_be(oneof([edge,graph,node]), Kind)}, atom(Kind). @@ -144,7 +141,7 @@ gv_ranked_node_collection(I, RankVTerm-VTerms) -- \"\\n\", % Vertice statements. - *(gv_node_statement(NewI), [RankVTerm|VTerms], []), + *(gv_node_statement(NewI), [RankVTerm|VTerms]), % We want to indent the closing curly brace. tab(I), @@ -161,8 +158,7 @@ gv_ranked_node_collection(I, RankVTerm-VTerms) -- %! +Attributes:list(compound) %! )// is det. -gv_attrs(Kind, L) -- - \"[\", *(gv_attr(Kind), L, []), \"]\". +gv_attrs(Kind, L) -- \"[\", *(gv_attr(Kind), L), \"]\". %! gv_attr(+Context:oneof([edge,graph,node]), +Attribute:compound)// is det. @@ -221,19 +217,16 @@ gv_id(Atom) -- %! gv_id_first(+First:code)// is det. % Generates the first character of a GraphViz identifier. -gv_id_first(X) -- - ascii_letter(X). -gv_id_first(X) -- - underscore(X). +gv_id_first(C) -- ascii_alpha(C), !. +gv_id_first(0'_) -- \"_\". %! gv_id_rest(+NonFirst:code)// is det. % Generates a non-first character of a GraphViz identifier. -gv_id_rest([]) -- !, \"\". -gv_id_rest([H|T]) -- - (ascii_alpha_numeric(H) ; underscore(H)), - gv_id_rest(T). +gv_id_rest([H|T]) -- ascii_alpha_num(C), !, gv_id_rest(T). +gv_id_rest([0'_|T]) -- \"_\", !, gv_id_rest(T). +gv_id_rest([]) -- \"\". @@ -267,34 +260,22 @@ gv_keyword -- \"subgraph\". % @tbd Add support for GraphViz port indicators % inside GraphViz node identifiers. -gv_node_id(Id) -- - gv_id(Id), !. -%gv_node_id(_) -- -% gv_id(_), -% gv_port. -gv_node_id(Id) -- - {type_error(gv_node_id, Id)}. +gv_node_id(Id) -- gv_id(Id), !. +%gv_node_id(_) -- gv_id(_), gv_port. +gv_node_id(Id) -- {type_error(gv_node_id, Id)}. %! gv_port// is det. -gv_port -- - gv_port_location, - (gv_port_angle ; \"\"). -gv_port -- - gv_port_angle, - (gv_port_location ; \"\"). -gv_port -- - \":\", gv_compass_pt(_). +gv_port -- gv_port_location, (gv_port_angle ; \"\"). +gv_port -- gv_port_angle, (gv_port_location ; \"\"). +gv_port -- \":\", gv_compass_pt(_). -gv_port_angle -- - \"@\", gv_id(_). +gv_port_angle -- \"@\", gv_id(_). -gv_port_location -- - \":\", gv_id(_). -gv_port_location -- - \":[\", gv_id(_), \",\", gv_id(_), \"]\". +gv_port_location -- \":\", gv_id(_). +gv_port_location -- \":[\", gv_id(_), \",\", gv_id(_), \"]\". @@ -304,12 +285,12 @@ gv_port_location -- % ``` gv_compass_pt('_') -- \"_\". -gv_compass_pt(c) -- \"c\". -gv_compass_pt(e) -- \"e\". -gv_compass_pt(n) -- \"n\". -gv_compass_pt(ne) -- \"ne\". -gv_compass_pt(nw) -- \"nw\". -gv_compass_pt(s) -- \"s\". -gv_compass_pt(se) -- \"se\". -gv_compass_pt(sw) -- \"sw\". -gv_compass_pt(w) -- \"w\". +gv_compass_pt(c) -- \"c\". +gv_compass_pt(e) -- \"e\". +gv_compass_pt(n) -- \"n\". +gv_compass_pt(ne) -- \"ne\". +gv_compass_pt(nw) -- \"nw\". +gv_compass_pt(s) -- \"s\". +gv_compass_pt(se) -- \"se\". +gv_compass_pt(sw) -- \"sw\". +gv_compass_pt(w) -- \"w\". ``` 141: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 0d2712a å’Œå˜åŠ¨å 3518985  [back to content](#compare) ``` diff diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl index 71f9dd4..2428483 100644 --- a/prolog/graph/build_export_graph.pl +++ b/prolog/graph/build_export_graph.pl @@ -51,7 +51,7 @@ Vertex coordinates: --- @author Wouter Beek -@version 2015/07, 2015/09-2015/11 +@version 2015/07, 2015/09-2015/12 */ :- use_module(library(apply)). @@ -222,8 +222,9 @@ edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):- if_option(edge_style(StyleFunction), Opts, call(StyleFunction, E, EStyle) ), - - merge_options( + + exclude( + option_has_var_value, [ arrowhead(EArrowhead), color(EColor), @@ -275,7 +276,8 @@ graph_attributes(GAttrs, Opts):- % Overlap. option(graph_overlap(Overlap), Opts, false), - merge_options( + exclude( + option_has_var_value, [ charset(Charset), colorscheme(Colorscheme), @@ -361,7 +363,8 @@ vertex_term(Vs, V, vertex(VId,VAttrs), Opts):- call(UriFunction, V, VUri) ), - merge_options( + exclude( + option_has_var_value, [ color(VColor), image(VImage), @@ -385,17 +388,3 @@ vertex_term(Vs, V, vertex(VId,VAttrs), Opts):- edge_components(edge(FromV,_,ToV), FromV, ToV):- !. edge_components(edge(FromV,ToV), FromV, ToV):- !. edge_components(FromV-ToV, FromV, ToV):- !. - - - -%! merge_options(+FromOptions:list(compound), -ToOptions:list(compound)) is det. - -merge_options([], []). -% Skip uninstantiated values. -merge_options([H|T1], T2):- - merge_options(T1, T2), - H =.. [_,V], - var(V), !. -% Include instantiated values. -merge_options([H|T1], [H|T2]):- - merge_options(T1, T2). diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl index a9e1a42..5c937ce 100644 --- a/prolog/gv/gv_graph.pl +++ b/prolog/gv/gv_graph.pl @@ -15,11 +15,11 @@ In GraphViz vertices are called 'nodes'. --- @author Wouter Beek -@version 2015/07 +@version 2015/07, 2015/12 */ :- use_module(library(apply)). -:- use_module(library(dcg/dcg_abnf)). +:- use_module(library(dcg/dcg_ext)). :- use_module(library(dcg/dcg_content)). :- use_module(library(gv/gv_graph_comp)). :- use_module(library(lists)). @@ -29,7 +29,13 @@ In GraphViz vertices are called 'nodes'. -%! gv_graph(+Graph:compound)// +%! gv_graph(+Graph:compound)// is det. +% Wrapper around gv_graph//2 with no indentation. + +gv_graph(G) -- gv_graph(G, 0). + + +%! gv_graph(+Graph:compound, +Indent:nonneg)// is det. % The follow graph attributes are supported, % beyond the GraphViz attributes for graphs: % * `directed(+boolean)` @@ -61,9 +67,6 @@ In GraphViz vertices are called 'nodes'. % @tbd Assert attributes that are generic with respect to a subgraph. % @tbd Not all vertex and edge properties can be shared it seems (e.g., label). -gv_graph(G) -- - gv_graph(G, 0). - gv_graph(G1, I) -- { include_ranks(G1, G2), @@ -122,26 +125,20 @@ gv_graph(G1, I) -- % The list of GraphViz nodes. gv_node_statements(NewI, NewVTerms), - ( {NewVTerms == []} - - \"\" - ; \"\\n\" - ), + ({NewVTerms == []} - \"\" ; \"\\n\"), % The ranked GraphViz nodes (displayed at the same height). gv_ranked_node_collections(NewI, RankedVTerms), - ( {RankedVTerms == []} - - \"\" - ; \"\\n\" - ), + ({RankedVTerms == []} - \"\" ; \"\\n\"), { findall( edge(FromId,ToId,[]), ( - nth0(Index1, RankedVTerms, rank(vertex(FromId,_),_)), - nth0(Index2, RankedVTerms, rank(vertex(ToId,_),_)), + nth0(J1, RankedVTerms, rank(vertex(FromId,_),_)), + nth0(J2, RankedVTerms, rank(vertex(ToId,_),_)), % We assume that the rank vertices are nicely ordered. - succ(Index1, Index2) + succ(J1, J2) ), RankEdges ) @@ -159,14 +156,27 @@ gv_graph(G1, I) -- tab(I), \"}\\n\". -gv_edge_statements(I, Dir, L) -- - *(gv_edge_statement(I, Dir), L, []), !. -gv_node_statements(I, L) -- - *(gv_node_statement(I), L, []), !. -gv_ranked_node_collections(I, L) -- - *(gv_ranked_node_collection(I), L, []), !. +%! gv_edge_statements( +%! +Indent:nonneg, +%! +Directed:boolean, +%! +Statements:list(compound) +%! )// is det. + +gv_edge_statements(I, Dir, L) -- *(gv_edge_statement(I, Dir), L). + + + +%! gv_edge_statements(+Indent:nonneg, +Statements:list(compound))// is det. + +gv_node_statements(I, L) -- *(gv_node_statement(I), L). + + + +%! gv_ranked_node_collections(+Indent:nonneg, +Collections:list)// is det. + +gv_ranked_node_collections(I, L) -- *(gv_ranked_node_collection(I), L). @@ -189,11 +199,13 @@ add_default(L1, Opt, L2):- ). + %! gv_graph_type(+Directed:boolean)// is det. % The type of graph that is represented. -gv_graph_type(false) -- \"graph\". -gv_graph_type(true) -- \"digraph\". +gv_graph_type(false) -- !, \"graph\". +gv_graph_type(true) -- \"digraph\". + %! gv_strict(+Strict:boolean)// is det. @@ -201,18 +213,20 @@ gv_graph_type(true) -- \"digraph\". % no multi-edges. % This only applies to directed graphs. -gv_strict(false) -- \"\". -gv_strict(true) -- \"strict \". +gv_strict(false) -- !, \"\". +gv_strict(true) -- \"strict \". + %! invlude_ranges(+Graph:compound, -GraphWithRanks:compound) is det. % Ensures that there is a ranks components in % the graph-denoting compound term. -include_ranks(graph(Vs,Rs,Es,L), graph(Vs,Rs,Es,L)). +include_ranks(graph(Vs,Rs,Es,L), graph(Vs,Rs,Es,L)):- !. include_ranks(graph(Vs,Es,L), graph(Vs,[],Es,L)). + %! shared_attributes( %! +Terms:list(compound), %! -SharedAttributes:list(compound), diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index 6877107..8bfc9a2 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -24,13 +24,11 @@ a_list = ID \"=\" ID [\",\"] [a_list] @author Wouter Beek @see http://www.graphviz.org/content/dot-language -@version 2015/07-2015/08, 2015/10-2015/11 +@version 2015/07-2015/08, 2015/10-2015/12 */ :- use_module(library(apply)). -:- use_module(library(dcg/basics)). -:- use_module(library(dcg/dcg_abnf)). -:- use_module(library(dcg/dcg_ascii)). +:- use_module(library(dcg/dcg_ext)). :- use_module(library(dcg/dcg_content)). :- use_module(library(gv/gv_attrs)). :- use_module(library(gv/gv_html)). @@ -166,7 +164,7 @@ gv_attrs(Kind, L) -- \"[\", *(gv_attr(Kind), L), \"]\". % We assume that the attribute has already been validated. gv_attr(Context, Attr) -- - {Attr =.. [N,V]}, + {Attr =.. [N,V], (N == peripheries - gtrace ; true)}, gv_id(N), \"=\", gv_attr_value(Context, N=V), \";\". @@ -217,15 +215,15 @@ gv_id(Atom) -- %! gv_id_first(+First:code)// is det. % Generates the first character of a GraphViz identifier. -gv_id_first(C) -- ascii_alpha(C), !. +gv_id_first(C) -- alpha(C), !. gv_id_first(0'_) -- \"_\". %! gv_id_rest(+NonFirst:code)// is det. % Generates a non-first character of a GraphViz identifier. -gv_id_rest([H|T]) -- ascii_alpha_num(C), !, gv_id_rest(T). -gv_id_rest([0'_|T]) -- \"_\", !, gv_id_rest(T). +gv_id_rest([H|T]) -- alphadigit(H), !, gv_id_rest(T). +gv_id_rest([0'_|T]) -- \"_\", !, gv_id_rest(T). gv_id_rest([]) -- \"\". diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl index 5f2db03..3ee7de6 100644 --- a/prolog/gv/gv_html.pl +++ b/prolog/gv/gv_html.pl @@ -40,11 +40,10 @@ cell:  label  @author Wouter Beek @see http://www.graphviz.org/content/node-shapes#html -@version 2015/07 +@version 2015/07, 2015/12 */ -:- use_module(library(dcg/dcg_abnf)). -:- use_module(library(dcg/dcg_bracketed)). +:- use_module(library(dcg/dcg_ext)). :- use_module(library(dcg/dcg_content)). :- use_module(library(html/html_dcg)). @@ -52,14 +51,13 @@ cell:  label  -%! gv_html_like_label(?Content:compound)// . +%! gv_html_like_label(+Content:compound)// is det. -gv_html_like_label(Content) -- - bracketed(angular, label(Content)). +gv_html_like_label(Content) -- \"\". -%! cell(?Contents:compound)// . +%! cell(+Contents:compound)// is det. % Supported attributes for `TD`: % - `ALIGN=\"CENTER|LEFT|RIGHT|TEXT\"` % - `BALIGN=\"CENTER|LEFT|RIGHT\"` @@ -88,65 +86,47 @@ gv_html_like_label(Content) -- % - `SCALE=\"FALSE|TRUE|WIDTH|HEIGHT|BOTH\"` % - `SRC=\"value\"` -cell(td(Contents)) -- +cell(td(Contents)) -- !, cell(td([],Contents)). cell(td(Attrs1,Image)) -- - {( Image =.. [img,Attrs2] - - true - ; Image == img - - Attrs2 = [] - )}, + {(Image =.. [img,Attrs2] - true ; Image == img - Attrs2 = [])}, !, html_element(td, Attrs1, html_element(img,Attrs2)). cell(td(Attrs,Contents)) -- html_element(td, Attrs, label(Contents)). -%! cells(?Contents:list(compound))// . +%! cells(+Contents:list(compound))// is det. -cells([H|T]) -- - cell(H), - cells(T). -cells([H,vr|T]) -- - cell(H), - html_element(vr), - cells(T). -cells([H]) -- - cell(H). +cells([H,vr|T]) -- !, cell(H), html_element(vr), cells(T). +cells([H|T]) -- !, cell(H), cells(T). +cells([]) -- \"\". -%! label(?Content:compound)// . +%! label(+Content:compound)// is det. % GraphViz HTML-like label. -label(Content) -- - table(Content). -label(Content) -- - text(Content). +label(Content) -- table(Content), !. +label(Content) -- text(Content). -%! row(?Contents:compound)// . +%! row(+Contents:compound)// is det. -row(tr(Contents)) -- - html_element(tr, [], cells(Contents)). +row(tr(Contents)) -- html_element(tr, [], cells(Contents)). -%! rows(?Contents:list)// . +%! rows(+Contents:list)// is det. -rows([H|T]) -- - row(H), - rows(T). -rows([hr|T]) -- - html_element(hr), - rows(T). -rows([H]) -- - row(H). +rows([hr|T]) -- !, html_element(hr), rows(T). +rows([H|T]) -- row(H), !, rows(T). +rows([]) -- \"\". -%! table(?Contents:compound)// . +%! table(+Contents:compound)// is det. % ``` % table : [  ]  rows  [  ] % ``` @@ -188,11 +168,11 @@ rows([H]) -- % - `FACE=\"fontname\"` % - `POINT-SIZE=\"value\"` -table(table(Contents)) -- +table(table(Contents)) -- !, table(table([],Contents)). -table(table(Attrs,Contents)) -- +table(table(Attrs,Contents)) -- !, html_element(table, Attrs, rows(Contents)). -table(font(Table)) -- +table(font(Table)) -- !, table(font([],Table)). table(font(Attrs1,Table)) -- {( Table =.. [table,Attrs2,Contents] @@ -204,21 +184,18 @@ table(font(Attrs1,Table)) -- -%! text(?Contents:list)// . +%! text(+Contents:list)// . % ``` % text : textitem % | text textitem % ``` -text(Contents) -- - {is_list(Contents)}, !, - '+'(textitem, Contents, []). -text(Content) -- - text([Content]). +text(Contents) -- {is_list(Contents)}, !, '+'(textitem, Contents). +text(Content) -- text([Content]). -%! textitem(?Content:compound)// . +%! textitem(+Content:compound)// . % ``` % textitem : string % |  @@ -235,7 +212,7 @@ text(Content) -- % Supported attributes for BR: % - `ALIGN=\"CENTER|LEFT|RIGHT\"` -textitem(br(Attrs)) -- +textitem(br(Attrs)) -- !, html_element(br, Attrs). % Compound term: parser. textitem(Compound) -- @@ -248,7 +225,7 @@ textitem(Compound) -- % Compound term: generator. textitem(Compound) -- { - Compound =.. [Name,Content], + Compound =.. [Name,Content], !, supported_html_element(Name) }, html_element(Name, _, text(Content)). ``` 142: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 3518985 å’Œå˜åŠ¨å 322ca62  [back to content](#compare) ``` diff diff --git a/prolog/fca/fca_export.pl b/prolog/fca/fca_viz.pl similarity index 59% rename from prolog/fca/fca_export.pl rename to prolog/fca/fca_viz.pl index 03353e3..36393de 100644 --- a/prolog/fca/fca_export.pl +++ b/prolog/fca/fca_viz.pl @@ -1,18 +1,21 @@ :- module( - fca_export, + fca_viz, [ - fca_export/2, % +Context:compound - % ?File:atom - fca_export/3 % +Context:compound - % ?File:atom - % :Options:list(compound) + fca_export_graph/2, % +Context, -ExportGraph + fca_export_graph/3, % +Context:compound + % -ExportGraph:compound + % :Options:list(compound) + fca_viz/2, % +Context, ?File + fca_viz/3 % +Context:compound + % ?File:atom + % :Options:list(compound) ] ). -/**  FCA export +/**  FCA visualization @author Wouter Beek -@version 2015/11 +@version 2015/11-2015/12 */ :- use_module(library(dcg/dcg_collection)). @@ -27,11 +30,16 @@ :- meta_predicate(concept_label(+,1,1,+,-)). :- meta_predicate(concept_label(+,1,1,+,?,?)). -:- meta_predicate(fca_export(+,?,:)). +:- meta_predicate(fca_export_graph(+,?,:)). +:- meta_predicate(fca_viz(+,?,:)). -:- predicate_options(fca_export/3, 3, [ +:- predicate_options(fca_export_graph/3, 3, [ + attribute_label(+callable), concept_label(+oneof([attributes,both,objects])), - object_label(+callable), + object_label(+callable) + ]). +:- predicate_options(fca_viz/3, 3, [ + pass_to(fca_export_graph/3, 3), pass_to(gv_export/3, 3) ]). @@ -42,14 +50,18 @@ is_meta(object_label). -%! fca_export(+Context:compound, ?File:atom) is det. -% Wrapper around fca_export/3 with default options. +%! fca_export_graph(+Context:compound, -ExportGraph:compound) is det. +% Wrapper around fca_export_graph/3 with default options. -fca_export(Context, File):- - fca_export(Context, File, []). +fca_export_graph(Context, ExportG):- + fca_export_graph(Context, ExportG, []). -%! fca_export(+Context:compound, ?File:atom, :Options:list(compound)) is det. +%! fca_export_graph( +%! +Context:compound, +%! -ExportGraph:compound, +%! :Options:list(compound) +%! ) is det. % The following optios are supported: % * attribute_label(+callable) % DCG writing the labels for individual attributes. @@ -62,24 +74,36 @@ fca_export(Context, File):- % DCG writing the labels for individual objects. % Default is pl_term//1. -fca_export(Context, File, Opts1):- +fca_export_graph(Context, ExportG, Opts1):- fca_hasse(Context, Hasse), - meta_options(is_meta, Opts1, Opts2), option(attribute_label(ALbl_1), Opts2, pl_term), option(concept_label(Mode), Opts2, both), option(object_label(OLbl_1), Opts2, pl_term), merge_options( [ - vertex_label(fca_export:concept_label(Mode, OLbl_1, ALbl_1)), + vertex_label(fca_viz:concept_label(Mode, OLbl_1, ALbl_1)), vertex_rank(fca:concept_cardinality) ], Opts2, Opts3 ), - build_export_graph(Hasse, ExportG, Opts3), + build_export_graph(Hasse, ExportG, Opts3). + + + +%! fca_viz(+Context:compound, ?File:atom) is det. +% Wrapper around fca_viz/3 with default options. + +fca_viz(Context, File):- + fca_viz(Context, File, []). + + +%! fca_viz(+Context:compound, ?File:atom, :Options:list(compound)) is det. - gv_export(ExportG, File, Opts2). +fca_viz(Context, File, Opts):- + fca_export_graph(Context, ExportG, Opts), + gv_export(ExportG, File, Opts). diff --git a/test/test.pl b/test/test.pl index 5ce2db0..470acce 100644 --- a/test/test.pl +++ b/test/test.pl @@ -1,5 +1,5 @@ %/fca - :- use_module(library(fca/fca_export)). + :- use_module(library(fca/fca_viz)). %/graph :- use_module(library(graph/build_export_graph)). %/gv ``` 143: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 322ca62 å’Œå˜åŠ¨å c4bf9ea  [back to content](#compare) ``` diff diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl index 36393de..5ff8cf5 100644 --- a/prolog/fca/fca_viz.pl +++ b/prolog/fca/fca_viz.pl @@ -12,7 +12,7 @@ ] ). -/**  FCA visualization +/**  FCA export @author Wouter Beek @version 2015/11-2015/12 @@ -30,7 +30,7 @@ :- meta_predicate(concept_label(+,1,1,+,-)). :- meta_predicate(concept_label(+,1,1,+,?,?)). -:- meta_predicate(fca_export_graph(+,?,:)). +:- meta_predicate(fca_export_graph(+,-,:)). :- meta_predicate(fca_viz(+,?,:)). :- predicate_options(fca_export_graph/3, 3, [ @@ -49,7 +49,6 @@ is_meta(object_label). - %! fca_export_graph(+Context:compound, -ExportGraph:compound) is det. % Wrapper around fca_export_graph/3 with default options. @@ -60,7 +59,7 @@ fca_export_graph(Context, ExportG):- %! fca_export_graph( %! +Context:compound, %! -ExportGraph:compound, -%! :Options:list(compound) +%! +Options:list(compound) %! ) is det. % The following optios are supported: % * attribute_label(+callable) diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl index 2428483..6dbb4f7 100644 --- a/prolog/graph/build_export_graph.pl +++ b/prolog/graph/build_export_graph.pl @@ -1,8 +1,7 @@ :- module( build_export_graph, [ - build_export_graph/2, % +Graph - % -ExportGraph:compound + build_export_graph/2, % +Graph, -ExportGraph build_export_graph/3 % +Graph % -ExportGraph:compound % +Options:list(compound) @@ -118,7 +117,7 @@ is_meta(vertex_uri). %! build_export_graph(+Graph, -ExportGraph:compound) is det. -% Wrapper around build_export_graph/3. +% Wrapper around build_export_graph/3 with default options. build_export_graph(G, ExportG):- build_export_graph(G, ExportG, []). diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index 8bfc9a2..aecbe07 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -164,7 +164,7 @@ gv_attrs(Kind, L) -- \"[\", *(gv_attr(Kind), L), \"]\". % We assume that the attribute has already been validated. gv_attr(Context, Attr) -- - {Attr =.. [N,V], (N == peripheries - gtrace ; true)}, + {Attr =.. [N,V]}, gv_id(N), \"=\", gv_attr_value(Context, N=V), \";\". diff --git a/test/test.pl b/test/test.pl index 470acce..c1bdca0 100644 --- a/test/test.pl +++ b/test/test.pl @@ -1,13 +1,13 @@ %/fca - :- use_module(library(fca/fca_viz)). +:- use_module(library(fca/fca_viz)). %/graph - :- use_module(library(graph/build_export_graph)). +:- use_module(library(graph/build_export_graph)). %/gv - :- use_module(library(gv/gv_attrs)). - :- use_module(library(gv/gv_attr_type)). - :- use_module(library(gv/gv_color)). - :- use_module(library(gv/gv_file)). - :- use_module(library(gv/gv_graph)). - :- use_module(library(gv/gv_graph_comp)). - :- use_module(library(gv/gv_html)). - :- use_module(library(gv/gv_numeral)). +:- use_module(library(gv/gv_attrs)). +:- use_module(library(gv/gv_attr_type)). +:- use_module(library(gv/gv_color)). +:- use_module(library(gv/gv_file)). +:- use_module(library(gv/gv_graph)). +:- use_module(library(gv/gv_graph_comp)). +:- use_module(library(gv/gv_html)). +:- use_module(library(gv/gv_numeral)). ``` 144: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ c4bf9ea å’Œå˜åŠ¨å 2a6dafd  [back to content](#compare) ``` diff diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl index 5ff8cf5..ef6a632 100644 --- a/prolog/fca/fca_viz.pl +++ b/prolog/fca/fca_viz.pl @@ -12,7 +12,7 @@ ] ). -/**  FCA export +/**  FCA visualization @author Wouter Beek @version 2015/11-2015/12 @@ -30,7 +30,7 @@ :- meta_predicate(concept_label(+,1,1,+,-)). :- meta_predicate(concept_label(+,1,1,+,?,?)). -:- meta_predicate(fca_export_graph(+,-,:)). +:- meta_predicate(fca_export_graph(+,?,:)). :- meta_predicate(fca_viz(+,?,:)). :- predicate_options(fca_export_graph/3, 3, [ @@ -59,7 +59,7 @@ fca_export_graph(Context, ExportG):- %! fca_export_graph( %! +Context:compound, %! -ExportGraph:compound, -%! +Options:list(compound) +%! :Options:list(compound) %! ) is det. % The following optios are supported: % * attribute_label(+callable) ``` 145: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 2a6dafd å’Œå˜åŠ¨å 145615e  [back to content](#compare) ``` diff diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl index ef6a632..1a15ef5 100644 --- a/prolog/fca/fca_viz.pl +++ b/prolog/fca/fca_viz.pl @@ -100,9 +100,10 @@ fca_viz(Context, File):- %! fca_viz(+Context:compound, ?File:atom, :Options:list(compound)) is det. -fca_viz(Context, File, Opts):- - fca_export_graph(Context, ExportG, Opts), - gv_export(ExportG, File, Opts). +fca_viz(Context, File, Opts1):- + meta_options(is_meta, Opts1, Opts2), + fca_export_graph(Context, ExportG, Opts2), + gv_export(ExportG, File, Opts2). ``` 146: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 145615e å’Œå˜åŠ¨å f16acca  [back to content](#compare) ``` diff diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl index 190b988..bcc7654 100644 --- a/data/gv_attrs_scrape.pl +++ b/data/gv_attrs_scrape.pl @@ -1,7 +1,7 @@ :- module( gv_attrs_scrape, [ - gv_attrs_scrape/1 % +File:atom + gv_attrs_scrape/1 % +File ] ). @@ -11,46 +11,41 @@ Writes compound terms of the following form to file: ```prolog gv_attr( - ?Name:atom, + ?Name, ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])), ?Types:list(atom), ?Default, ?Minimum, - ?Notes:atom + ?Notes ) is nondet. ``` @author Wouter Beek -@version 2015/10 +@version 2015/10, 2016/07 */ :- use_module(library(apply)). -:- use_module(library(dcg/basics), except([string//1])). -:- use_module(library(dcg/dcg_phrase)). +:- use_module(library(dcg/dcg_ext)). +:- use_module(library(debug)). :- use_module(library(gv/gv_attr_type)). :- use_module(library(http/http_download)). -:- use_module(library(iostream)). :- use_module(library(lists)). -:- use_module(library(msg_ext)). -:- use_module(library(pl/pl_term)). +:- use_module(library(os/io)). +:- use_module(library(pl_term)). +:- use_module(library(print_ext)). :- use_module(library(xpath)). :- use_module(library(xpath/xpath_table)). +:- use_module(library(yall)). -%! gv_attrs_scrape(+File:atom) is det. +%! gv_attrs_scrape(+File) is det. gv_attrs_scrape(File):- - setup_call_cleanup( - open_any(File, write, Write, Close, []), - verbose( - gv_attrs_download(Write), - \"Updating the GraphViz attributes table.\" - ), - close_any(Close) - ). + debug(gv, \"Updating the GraphViz attributes table.\", []), + call_to_stream(File, [In,Meta,Meta]gv_attrs_download(In)). gv_attrs_download(Write):- @@ -79,7 +74,7 @@ gv_attrs_iri('http://www.graphviz.org/doc/info/attrs.html'). % HELPERS % -%! translate_default(+Default1:atom, -Default2:atom) is det. +%! translate_default(+Default1, -Default2) is det. % The empty string is represented by the empty atom. translate_default('\"\"', ''):- !. diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl index 3ac5d44..102a02a 100644 --- a/data/gv_color_scrape.pl +++ b/data/gv_color_scrape.pl @@ -1,40 +1,36 @@ :- module( gv_color_scrape, [ - gv_color_scrape/1 % +File:atom + gv_color_scrape/1 % +File ] ). /**  GraphViz: Scrape colors @author Wouter Beek -@version 2015/10 +@version 2015/10, 2016/07 */ :- use_module(library(apply)). +:- use_module(library(debug)). :- use_module(library(http/http_download)). -:- use_module(library(iostream)). :- use_module(library(lists)). -:- use_module(library(msg_ext)). -:- use_module(library(pl/pl_term)). +:- use_module(library(os/io)). +:- use_module(library(pl_term)). +:- use_module(library(print_ext)). :- use_module(library(xpath)). :- use_module(library(xpath/xpath_table)). +:- use_module(library(yall)). -%! gv_color_scrape(+File:atom) is det. +%! gv_color_scrape(+File) is det. gv_color_scrape(File):- - setup_call_cleanup( - open_any(File, write, Write, Close, []), - verbose( - gv_color_download(Write), - \"Updating the GraphViz color table.\" - ), - close_any(Close) - ). + debug(io, \"Updating the GraphViz color table.\", []), + call_to_stream(File, [In,Meta,Meta]gv_color_download(In)). gv_color_download(Write):- diff --git a/pack.pl b/pack.pl index 203cbfc..989108a 100644 --- a/pack.pl +++ b/pack.pl @@ -4,6 +4,6 @@ home('https://github.com/wouterbeek/plGraphViz'). maintainer('Wouter Beek', 'me@wouterbeek.com'). name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). -requires('Prolog_Library_Collection'). +requires('Prolog-Library-Collection'). title(plGraphViz). -version('0.0.17'). +version('0.0.1'). diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl index 1a15ef5..083dbb2 100644 --- a/prolog/fca/fca_viz.pl +++ b/prolog/fca/fca_viz.pl @@ -2,24 +2,20 @@ fca_viz, [ fca_export_graph/2, % +Context, -ExportGraph - fca_export_graph/3, % +Context:compound - % -ExportGraph:compound - % :Options:list(compound) - fca_viz/2, % +Context, ?File - fca_viz/3 % +Context:compound - % ?File:atom - % :Options:list(compound) + fca_export_graph/3, % +Context, -ExportGraph, :Opts + fca_viz/2, % +Context, ?File + fca_viz/3 % +Context, ?File, :Opts ] ). /**  FCA visualization @author Wouter Beek -@version 2015/11-2015/12 +@version 2015/11-2016/01 */ -:- use_module(library(dcg/dcg_collection)). -:- use_module(library(dcg/dcg_phrase)). +:- use_module(library(aggregate)). +:- use_module(library(dcg/dcg_ext)). :- use_module(library(dcg/dcg_pl)). :- use_module(library(fca/fca)). :- use_module(library(graph/build_export_graph)). @@ -28,23 +24,19 @@ :- use_module(library(option)). :- use_module(library(ordsets)). -:- meta_predicate(concept_label(+,1,1,+,-)). -:- meta_predicate(concept_label(+,1,1,+,?,?)). :- meta_predicate(fca_export_graph(+,?,:)). :- meta_predicate(fca_viz(+,?,:)). :- predicate_options(fca_export_graph/3, 3, [ - attribute_label(+callable), - concept_label(+oneof([attributes,both,objects])), - object_label(+callable) + concept_label(+callable) ]). :- predicate_options(fca_viz/3, 3, [ pass_to(fca_export_graph/3, 3), - pass_to(gv_export/3, 3) + pass_to(graph_viz/3, 3) ]). -is_meta(attribute_label). -is_meta(object_label). +is_meta(concept_label). + @@ -62,26 +54,16 @@ fca_export_graph(Context, ExportG):- %! :Options:list(compound) %! ) is det. % The following optios are supported: -% * attribute_label(+callable) -% DCG writing the labels for individual attributes. -% Default is pl_term//1. -% * concept_label(+oneof([attributes,both,objects])) -% Determines which components of the concepts are displayed -% in the export graph. -% Default is `both`. -% * object_label(+callable) -% DCG writing the labels for individual objects. -% Default is pl_term//1. +% * concept_label(+callable) +% DCG writing the labels for individual concepts. fca_export_graph(Context, ExportG, Opts1):- fca_hasse(Context, Hasse), meta_options(is_meta, Opts1, Opts2), - option(attribute_label(ALbl_1), Opts2, pl_term), - option(concept_label(Mode), Opts2, both), - option(object_label(OLbl_1), Opts2, pl_term), + option(concept_label(Label_3), Opts2, concept_label), merge_options( [ - vertex_label(fca_viz:concept_label(Mode, OLbl_1, ALbl_1)), + vertex_label(Label_3), vertex_rank(fca:concept_cardinality) ], Opts2, @@ -102,36 +84,18 @@ fca_viz(Context, File):- fca_viz(Context, File, Opts1):- meta_options(is_meta, Opts1, Opts2), + statistics(process_cputime, Time1), fca_export_graph(Context, ExportG, Opts2), - gv_export(ExportG, File, Opts2). + ExportG = graph(_,_,Es,_), + aggregate_all(max(N), (member(edge(V1,V2,_), Es), (N = V1 ; N = V2)), N), + ignore(option(number_of_vertices(N), Opts2)), + statistics(process_cputime, Time2), + Time is Time2 - Time1, + ignore(option(process_cputime(Time), Opts2)), + graph_viz(ExportG, File, Opts2). -%! concept_label( -%! +Mode:oneof([attributes,both,objects]), -%! :ObjectLabel_1, -%! :AttributeLabel_1, -%! +Concept:compound, -%! -Label:atom -%! ) is det. +%! concept_label(+Concept:compound)// is det. -concept_label(Mode, OLbl_1, ALbl_1, Concept, Lbl):- - string_phrase(concept_label(Mode, OLbl_1, ALbl_1, Concept), Lbl). - - -%! concept_label( -%! +Mode:oneof([attributes,both,objects]), -%! :ObjectLabel_1, -%! :AttributeLabel_1, -%! +Concept:compound -%! )// is det. - -concept_label(attributes, _, ALbl_1, concept(_,As)) -- - set(ALbl_1, As). -concept_label(both, OLbl_1, ALbl_1, Concept) -- - pair( - concept_label(objects, OLbl_1, ALbl_1, Concept), - concept_label(attributes, OLbl_1, ALbl_1, Concept) - ). -concept_label(objects, OLbl_1, _, concept(Os,_)) -- - set(OLbl_1, Os). +concept_label(concept(Os,As)) -- set(Os), \" / \", set(As). diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl index 6dbb4f7..5134069 100644 --- a/prolog/graph/build_export_graph.pl +++ b/prolog/graph/build_export_graph.pl @@ -50,12 +50,12 @@ Vertex coordinates: --- @author Wouter Beek -@version 2015/07, 2015/09-2015/12 +@version 2015/07, 2015/09-2016/01 */ :- use_module(library(apply)). +:- use_module(library(dcg/dcg_ext)). :- use_module(library(graph/s/s_graph)). -:- use_module(library(lambda)). :- use_module(library(list_ext)). :- use_module(library(option_ext)). :- use_module(library(ordsets)). @@ -140,11 +140,15 @@ build_export_graph(G, ExportG):- build_export_graph(G, graph(VTerms2,VRanks,ETerms,GAttrs), Opts1):- graph_components(G, Vs, Es), meta_options(is_meta, Opts1, Opts2), - maplist(\\V^VTerm^vertex_term(Vs, V, VTerm, Opts2), Vs, VTerms1), + maplist(vertex_term0(Vs, Opts2), Vs, VTerms1), build_export_ranks(Vs, VTerms1, VRanks, VTerms2, Opts2), - maplist(\\E^ETerm^edge_term(Vs, E, ETerm, Opts2), Es, ETerms), + maplist(edge_term0(Vs, Opts2), Es, ETerms), graph_attributes(GAttrs, Opts2). +vertex_term0(Vs, Opts, V, VTerm) :- vertex_term(Vs, V, VTerm, Opts). + +edge_term0(Vs, Opts, E, ETerm) :- edge_term(Vs, E, ETerm, Opts). + graph_components(graph(Vs,Es), Vs, Es):- !. graph_components(G, Vs, Es):- s_graph_components(G, Vs, Es). @@ -190,37 +194,29 @@ build_export_rank_term(N, vertex(Id,[label(\"\"),shape(none)])):- edge_term(Vs, E, edge(FromId,ToId,EAttrs), Opts):- % Arrowhead - if_option(edge_arrowhead(ArrowheadFunction), Opts, - call(ArrowheadFunction, E, EArrowhead) + if_option(edge_arrowhead(Arrowhead_2), Opts, + call(Arrowhead_2, E, EArrowhead) ), % Color. - if_option(edge_color(ColorFunction), Opts, - call(ColorFunction, E, EColor) - ), + if_option(edge_color(ColorFunction), Opts, call(ColorFunction, E, EColor)), % Id. - ( option(edge_id(IdFunction), Opts) - - call(IdFunction, E, FromId, ToId) + ( option(edge_id(Id_2), Opts) + - call(Id_2, E, FromId, ToId) ; edge_components(E, FromV, ToV), nth0chk(FromId, Vs, FromV), nth0chk(ToId, Vs, ToV) ), % Label. - if_option(edge_label(LabelFunction), Opts, - call(LabelFunction, E, ELabel) - ), + if_option(edge_label(ELabel_3), Opts, string_phrase(dcg_call(ELabel_3, E), ELabel)), % Penwidth. - if_option(edge_penwidth(PenwidthFunction), Opts, - call(PenwidthFunction, E, EPenwidth) - ), + if_option(edge_penwidth(Penwidth_2), Opts, call(Penwidth_2, E, EPenwidth)), % Style. - if_option(edge_style(StyleFunction), Opts, - call(StyleFunction, E, EStyle) - ), + if_option(edge_style(Style_2), Opts, call(Style_2, E, EStyle)), exclude( option_has_var_value, @@ -274,7 +270,6 @@ graph_attributes(GAttrs, Opts):- option(graph_label(GLabel), Opts, '\"\"'), % Overlap. option(graph_overlap(Overlap), Opts, false), - exclude( option_has_var_value, [ @@ -320,47 +315,32 @@ graph_attributes(GAttrs, Opts):- vertex_term(Vs, V, vertex(VId,VAttrs), Opts):- % Color. - if_option(vertex_color(ColorFunction), Opts, - call(ColorFunction, V, VColor) - ), + if_option(vertex_color(Color_2), Opts, call(Color_2, V, VColor)), % Id. - ( option(vertex_id(IdFunction), Opts) - - call(IdFunction, V, VId) - ; nth0chk(VId, Vs, V) - ), + (option(vertex_id(Id_2), Opts) - call(Id_2, V, VId) ; nth0chk(VId, Vs, V)), % Image. - ignore( - if_option(vertex_image(ImageFunction), Opts, - call(ImageFunction, V, VImage) - ) - ), + ignore(if_option(vertex_image(Image_2), Opts, call(Image_2, V, VImage))), % Label. - if_option(vertex_label(LabelFunction), Opts, - call(LabelFunction, V, VLabel) - ), + if_option(vertex_label(VLabel_2), Opts, string_phrase(dcg_call(VLabel_2, V), VLabel)), % Peripheries. - if_option(vertex_peripheries(PeripheriesFunction), Opts, - call(PeripheriesFunction, V, VPeripheries) + if_option(vertex_peripheries(Peripheries_2), Opts, + call(Peripheries_2, V, VPeripheries) ), % Position. - if_option(vertex_position(PositionFunction), Opts, - call(PositionFunction, Vs, Opts, V, VPosition) + if_option(vertex_position(Position_4), Opts, + call(Position_4, Vs, Opts, V, VPosition) ), % Shape. - if_option(vertex_shape(ShapeFunction), Opts, - call(ShapeFunction, V, VShape) - ), + if_option(vertex_shape(Shape_2), Opts, call(Shape_2, V, VShape)), % URI - if_option(vertex_uri(UriFunction), Opts, - call(UriFunction, V, VUri) - ), + if_option(vertex_uri(Uri_2), Opts, call(Uri_2, V, VUri)), exclude( option_has_var_value, diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl index 8fa78af..f55fce5 100644 --- a/prolog/gv/gv_attr_type.pl +++ b/prolog/gv/gv_attr_type.pl @@ -46,11 +46,10 @@ /**  GraphViz attribute types @author Wouter Beek -@version 2015/07, 2015/11 +@version 2015/07, 2015/11, 2016/02 */ -:- use_module(library(dcg/basics), except([string//1])). -:- use_module(library(dcg/dcg_phrase)). +:- use_module(library(dcg/dcg_ext), except([string//1])). :- use_module(library(gv/gv_html)). @@ -256,7 +255,7 @@ input_changeable(true) -- \"!\". %! pointList(+Points:list(compound))// . pointList(Points) -- - *(point, Points, []). + *(point, Points). diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl index b26af73..4a92d5b 100644 --- a/prolog/gv/gv_attrs.pl +++ b/prolog/gv/gv_attrs.pl @@ -2,7 +2,7 @@ gv_attrs, [ gv_attr_value//2 % +Context:oneof([cluster,edge,graph,node,subgraph]) - % +Attribute:nvpair + % +Attr ] ). :- ensure_loaded(library('gv/gv_attrs.data')). @@ -10,11 +10,12 @@ /**  GraphViz attributes @author Wouter Beek -@version 2015/07-2015/08, 2015/10 +@version 2015/07-2015/08, 2015/10, 2016/03 */ :- use_module(library(apply)). -:- use_module(library(dcg/dcg_call)). +:- use_module(library(dcg/dcg_ext)). +:- use_module(library(error)). :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]). :- use_module(library(lists)). :- use_module(library(os/file_ext)). @@ -23,21 +24,20 @@ -%! gv_attr_value( -%! +Context:oneof([cluster,edge,graph,node,subgraph]), -%! +Attribute:compound -%! )// is det. +%! gv_attr_value(+Context, +Attr)// is det. % Uses the default value in case Value is uninstantiated. % Otherwise, performs a typecheck and converts the given value. +% +% Context can be either `cluster`, `edge`, `graph`, `node` or `subgraph`. % Use the default if no value is given. gv_attr_value(Context, Name=Value) -- { - var(Value), !, + var(Value), gv_attr(Name, UsedBy, _, DefaultValue, _, _), % Check validity of context. memberchk(Context, UsedBy) - }, + }, !, gv_attr_value(Context, Name=DefaultValue). gv_attr_value(Context, Name=Value) -- { @@ -56,8 +56,10 @@ gv_attr_value(Context, Name=Value) -- % Check validity of Value w.r.t. minimum value -- if available. check_minimum(Value, Minimum) - }, + }, !, dcg_call(gv_attr_type:Dcg, Value). +gv_attr_value(_, Name=_) -- + {existence_error(gv_attr, Name)}. diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl index 3232c97..ac319dc 100644 --- a/prolog/gv/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -14,12 +14,11 @@ @author Wouter Beek @tbd Color value `transparent` is only available in the output formats ps, svg, fig, vmrl, and the bitmap formats. -@version 2015/08, 2015/10 +@version 2015/08, 2015/10, 2016/02 */ :- use_module(library(apply)). -:- use_module(library(dcg/basics)). -:- use_module(library(dcg/dcg_content)). +:- use_module(library(dcg/dcg_ext)). :- use_module(library(lists)). :- use_module(library(os/file_ext)). @@ -35,12 +34,12 @@ color(rgb(Red,Green,Blue)) -- !, \"#\", - '#'(3, hex_color, [Red,Green,Blue]). + #(3, hex_color, [Red,Green,Blue]). color(rgbs(Red,Green,Blue,Alpha)) -- !, color(rgb(Red,Green,Blue)), hex_color(Alpha). color(hsv(Hue,Saturation,Value)) -- !, - '#'(3, hsv_color, [Hue,Saturation,Value], []). + #(3, hsv_color, [Hue,Saturation,Value]). color(Name) -- {gv_color(_, Name)}, atom(Name). @@ -56,7 +55,7 @@ hsv_color(D, Head, Tail):- %! colorList(+Pairs:list(pair(compound,float)))// . colorList(L) -- - '+'(wc, L, []). + '+'(wc, L). wc(Color-Float) -- color(Color), diff --git a/prolog/gv/gv_dom.pl b/prolog/gv/gv_dom.pl index e85849d..30c4263 100644 --- a/prolog/gv/gv_dom.pl +++ b/prolog/gv/gv_dom.pl @@ -1,35 +1,29 @@ :- module( gv_dom, [ - gv_dom/3 % +ExportGraph:compound - % -Dom:list(compound) - % +Options:list(compound) + gv_dom/3 % +ExportG, -Dom, +Opts ] ). /**  GraphViz DOM @author Wouter Beek -@version 2015/07 +@version 2015/07, 2016/01 */ :- use_module(library(gv/gv_file)). :- use_module(library(option)). -:- use_module(library(svg/svg_dom)). +:- use_module(library(svg/svg_ext)). -%! gv_dom( -%! +ExportGraph:compound, -%! -Dom:list(compound), -%! +Options:list(compound) -%! ) is det. +%! gv_dom(+ExportG, -Dom, +Opts) is det. gv_dom(ExportG, Dom, Opts1):- % Make sure the file type of the output file is SvgDom. merge_options([output(svg)], Opts1, Opts2), - gv_export(ExportG, ToFile, Opts2), + graph_viz(ExportG, ToFile, Opts2), svg_dom(ToFile, Dom), delete_file(ToFile). diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl index 4cf12a8..993fcee 100644 --- a/prolog/gv/gv_file.pl +++ b/prolog/gv/gv_file.pl @@ -1,18 +1,15 @@ :- module( gv_file, [ - gv_export/2, % +ExportGraph:compound - % ?File:atom - gv_export/3 % +ExportGraph:compound - % ?File:atom - % +Options:list(nvpair) + graph_viz/2, % +ExportG, ?File + graph_viz/3 % +ExportG, ?File, +Opts ] ). /**  GraphViz file @author Wouter Beek -@version 2015/07, 2015/10-2015/11 +@version 2015/07, 2015/10-2015/11, 2016/01 */ :- use_module(library(code_ext)). @@ -23,7 +20,7 @@ :- use_module(library(os/process_ext)). :- use_module(library(string_ext)). -:- predicate_options(gv_export/3, 3, [ +:- predicate_options(graph_viz/3, 3, [ pass_to(file_to_gv/3, 3) ]). :- predicate_options(file_to_gv/3, 3, [ @@ -40,14 +37,8 @@ user:module_uses(gv_file, program(dot)). -%! gv_export(+ExportGraph:compound, ?File:atom) is det. -% Wrapper around gv_export/3 with default options. - -gv_export(ExportG, File):- - gv_export(ExportG, File, []). - - -%! gv_export(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det. +%! graph_viz(+ExportGraph:compound, ?File:atom) is det. +%! graph_viz(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det. % Returns a file containing a GraphViz visualization of the given graph. % % The following options are supported: @@ -60,7 +51,9 @@ gv_export(ExportG, File):- % Default is `pdf`. % For possible values see gv_output_type/1. -gv_export(ExportG, File, Opts):- +graph_viz(ExportG, File):- + graph_viz(ExportG, File, []). +graph_viz(ExportG, File, Opts):- once(phrase(gv_graph(ExportG), Cs)), % Be thread-safe. diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl index 5c937ce..c95c9cc 100644 --- a/prolog/gv/gv_graph.pl +++ b/prolog/gv/gv_graph.pl @@ -20,7 +20,6 @@ In GraphViz vertices are called 'nodes'. :- use_module(library(apply)). :- use_module(library(dcg/dcg_ext)). -:- use_module(library(dcg/dcg_content)). :- use_module(library(gv/gv_graph_comp)). :- use_module(library(lists)). :- use_module(library(option)). diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index aecbe07..30ea9c5 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -24,12 +24,11 @@ a_list = ID \"=\" ID [\",\"] [a_list] @author Wouter Beek @see http://www.graphviz.org/content/dot-language -@version 2015/07-2015/08, 2015/10-2015/12 +@version 2015/07-2015/08, 2015/10-2016/01 */ :- use_module(library(apply)). :- use_module(library(dcg/dcg_ext)). -:- use_module(library(dcg/dcg_content)). :- use_module(library(gv/gv_attrs)). :- use_module(library(gv/gv_html)). :- use_module(library(error)). @@ -86,7 +85,7 @@ gv_edge_operator(Dir) -- %! gv_generic_attributes_statement( %! +Kind:oneof([edge,graph,node]), %! +Indent:nonneg, -%! +CategoryAttributes:list(nvpair) +%! +CategoryAttrs %! )// % A GraphViz statement describing generic attributes for a category of items. % @@ -200,8 +199,8 @@ gv_id(double_quoted_string(Atom)) -- !, % Numerals. gv_id(N) -- {number(N)}, !, - % @tbd Use gv_numeral//1. - number(N). + {number_codes(N, Cs)}, + Cs. % Alpha-numeric strings. gv_id(Atom) -- {atom_codes(Atom, [H|T])}, @@ -264,6 +263,22 @@ gv_node_id(Id) -- {type_error(gv_node_id, Id)}. +%! gv_numeral(-Number)// is det. +% ```bnf +% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? ) +% ``` + +gv_numeral(N) -- + (\"-\" - {Sg = -1} ; {Sg = 1}), + ( \".\" + - {I = 0}, +(digit, Ds), {pos_frac(Ds, Frac)} + ; +(digit, Ds1), {pos_sum(Ds1, I)}, + (\".\" - *(digit, Ds2), {pos_frac(Ds2, Frac)} ; {Frac = 0.0}) + ), + {N is Sg * (I + Frac)}. + + + %! gv_port// is det. gv_port -- gv_port_location, (gv_port_angle ; \"\"). @@ -279,7 +294,7 @@ gv_port_location -- \":[\", gv_id(_), \",\", gv_id(_), \"]\". %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . % ``` -% compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) +% compass_pt : ( n | ne | e | se | s | sw | w | nw | c | _ ) % ``` gv_compass_pt('_') -- \"_\". diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl index 3ee7de6..b5c1368 100644 --- a/prolog/gv/gv_html.pl +++ b/prolog/gv/gv_html.pl @@ -44,7 +44,6 @@ cell:  label  */ :- use_module(library(dcg/dcg_ext)). -:- use_module(library(dcg/dcg_content)). :- use_module(library(html/html_dcg)). @@ -210,7 +209,12 @@ text(Content) -- text([Content]). % ``` % % Supported attributes for BR: -% - `ALIGN=\"CENTER|LEFT|RIGHT\"` +% * `ALIGN=\"CENTER|LEFT|RIGHT\"` +% +% Supported attributes for FONT: +% * COLOR=\"color\" +% * FACE=\"fontname\" +% * POINT-SIZE=\"value\" textitem(br(Attrs)) -- !, html_element(br, Attrs). diff --git a/prolog/gv/gv_numeral.pl b/prolog/gv/gv_numeral.pl deleted file mode 100644 index 4ba0d64..0000000 --- a/prolog/gv/gv_numeral.pl +++ /dev/null @@ -1,87 +0,0 @@ -:- module( - gv_numeral, - [ - gv_numeral//1 % ?Value:number - ] -). - -/**  GraphViz numeral - -@author Wouter Beek -@version 2014/05-2014/06, 2015/01 -*/ - -:- use_module(library(dcg/dcg_abnf)). -:- use_module(library(dcg/dcg_abnf_common)). -:- use_module(library(dcg/dcg_ascii)). -:- use_module(library(math/math_ext)). -:- use_module(library(math/positional)). -:- use_module(library(math/radconv)). -:- use_module(library(math/rational_ext)). - - - - - -%! gv_numeral(?Value:compound)// . -% -% # Syntax -% -% ```bnf -% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? ) -% ``` -% -% ## Generation -% -% In the generative case, three notations are allowed (also see below): -% 1. (non-zero integer-part) -% 2. (decimal-separator) (non-zero fractional) -% 3. (non-zero integer-part) (decimal-separator) (non-zero fractional) -% -% The following notations are explicitly excluded due to verbosity: -% - (non-zero integer-part) (decimal-separator) -% - (non-zero integer-part) (decimal-separator) (zero fractional) -% - (zero integer-part) (decimal-separator) (non-zero fractional) -% -% The following notations are also excluded, but since they violate -% well-formedness: -% - (non-zero integer-part) (non-zero fractional) -% - (decimal-separator) - -gv_numeral(N) -- - ( {ground(N)} - - '[-]?'(N), - {N0 is abs(N)}, - {rational_parts(N0, I, F)}, - ( % [1] The fractional is zero, so only write the integer part - % and do not write the decimal separator. - {F =:= 0} - - {positional(I, IW)}, - '[0-9]+'(IW) - ; % [2] The integer part is zero, so only write the fractional part, - % preceded by the decimal separator. - {I =:= 0} - - \".\", - {positional_fraction(FW, F)}, - '[0-9]*'(FW) - ; % [3] Both the integer part and the fractional are non-zero, - % so write both of them, with the decimal separator in-between. - {positional(I, IW)}, - '[0-9]+'(IW), - \".\", - {positional_fraction(FW, F)}, - '[0-9]*'(FW) - ) - ; '[-]?'(Sg), - ( \".\", - '[0-9]+'(FW), - {IW = []} - ; '[0-9]+'(IW), - ( \".\", - '[0-9]*'(FW) - ; {FW = []} - ) - ), - {rational_parts_weights(N0, IW, FW)}, - {N is copysign(N0, Sg)} - ). diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl new file mode 100644 index 0000000..4382aa6 --- /dev/null +++ b/prolog/tree/tree_viz.pl @@ -0,0 +1,65 @@ +:- module( + tree_viz, + [ + tree_export_graph/2, % +Tree, ExportG + tree_export_graph/3, % +Tree, ExportG, +Opts + tree_viz/2, % +Tree, ?File + tree_viz/3 % +Tree, ?File, +Opts + ] +). + +/**  Tree visualization + +Export trees to GraphViz. + +@author Wouter Beek +@version 2016/01-2016/02 +*/ + +:- use_module(library(graph/build_export_graph)). +:- use_module(library(gv/gv_file)). +:- use_module(library(ordsets)). +:- use_module(library(tree/l_tree)). +:- use_module(library(tree/s_tree)). + +:- predicate_options(tree_export_graph/3, 3, [ + pass_to(build_export_graph/4, 4) + ]). +:- predicate_options(tree_viz/3, 3, [ + pass_to(graph_viz/3, 3), + pass_to(tree_to_graph/3, 3) + ]). + + + + + +%! tree_export_graph(+Tree, -ExportG) is det. +%! tree_export_graph(+Tree, -ExportG, +Opts) is det. +% Opts are passed to build_export_graph/4. + +tree_export_graph(Tree, ExportG) :- + tree_export_graph(Tree, ExportG, []). + +tree_export_graph(Tree, ExportG, Opts) :- + ( is_s_tree(Tree) + - tree_to_graph(Tree, G) + ; is_l_tree(Tree) + - l_tree_to_graph(Tree, G) + ), + build_export_graph(G, ExportG, Opts). + + + +%! tree_viz(+Tree, ?File) is det. +%! tree_viz(+Tree, ?File, +Opts) is det. +% Stores the given tree term into a GraphViz file. +% +% Options are passed to export_graph_to_gv_file/3, tree_to_graph/3. + +tree_viz(Tree, File) :- + tree_viz(Tree, File, []). + +tree_viz(Tree, File, Opts) :- + tree_export_graph(Tree, ExportG, Opts), + graph_viz(ExportG, File, Opts). diff --git a/test/test.pl b/test/test.pl index c1bdca0..83dc023 100644 --- a/test/test.pl +++ b/test/test.pl @@ -6,8 +6,10 @@ :- use_module(library(gv/gv_attrs)). :- use_module(library(gv/gv_attr_type)). :- use_module(library(gv/gv_color)). +:- use_module(library(gv/gv_dom)). :- use_module(library(gv/gv_file)). :- use_module(library(gv/gv_graph)). :- use_module(library(gv/gv_graph_comp)). :- use_module(library(gv/gv_html)). -:- use_module(library(gv/gv_numeral)). +%/tree +:- use_module(library(tree/tree_viz)). ``` 147: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ f16acca å’Œå˜åŠ¨å 4e2d9f1  [back to content](#compare) ``` diff diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl index bcc7654..190b988 100644 --- a/data/gv_attrs_scrape.pl +++ b/data/gv_attrs_scrape.pl @@ -1,7 +1,7 @@ :- module( gv_attrs_scrape, [ - gv_attrs_scrape/1 % +File + gv_attrs_scrape/1 % +File:atom ] ). @@ -11,41 +11,46 @@ Writes compound terms of the following form to file: ```prolog gv_attr( - ?Name, + ?Name:atom, ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])), ?Types:list(atom), ?Default, ?Minimum, - ?Notes + ?Notes:atom ) is nondet. ``` @author Wouter Beek -@version 2015/10, 2016/07 +@version 2015/10 */ :- use_module(library(apply)). -:- use_module(library(dcg/dcg_ext)). -:- use_module(library(debug)). +:- use_module(library(dcg/basics), except([string//1])). +:- use_module(library(dcg/dcg_phrase)). :- use_module(library(gv/gv_attr_type)). :- use_module(library(http/http_download)). +:- use_module(library(iostream)). :- use_module(library(lists)). -:- use_module(library(os/io)). -:- use_module(library(pl_term)). -:- use_module(library(print_ext)). +:- use_module(library(msg_ext)). +:- use_module(library(pl/pl_term)). :- use_module(library(xpath)). :- use_module(library(xpath/xpath_table)). -:- use_module(library(yall)). -%! gv_attrs_scrape(+File) is det. +%! gv_attrs_scrape(+File:atom) is det. gv_attrs_scrape(File):- - debug(gv, \"Updating the GraphViz attributes table.\", []), - call_to_stream(File, [In,Meta,Meta]gv_attrs_download(In)). + setup_call_cleanup( + open_any(File, write, Write, Close, []), + verbose( + gv_attrs_download(Write), + \"Updating the GraphViz attributes table.\" + ), + close_any(Close) + ). gv_attrs_download(Write):- @@ -74,7 +79,7 @@ gv_attrs_iri('http://www.graphviz.org/doc/info/attrs.html'). % HELPERS % -%! translate_default(+Default1, -Default2) is det. +%! translate_default(+Default1:atom, -Default2:atom) is det. % The empty string is represented by the empty atom. translate_default('\"\"', ''):- !. diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl index 102a02a..3ac5d44 100644 --- a/data/gv_color_scrape.pl +++ b/data/gv_color_scrape.pl @@ -1,36 +1,40 @@ :- module( gv_color_scrape, [ - gv_color_scrape/1 % +File + gv_color_scrape/1 % +File:atom ] ). /**  GraphViz: Scrape colors @author Wouter Beek -@version 2015/10, 2016/07 +@version 2015/10 */ :- use_module(library(apply)). -:- use_module(library(debug)). :- use_module(library(http/http_download)). +:- use_module(library(iostream)). :- use_module(library(lists)). -:- use_module(library(os/io)). -:- use_module(library(pl_term)). -:- use_module(library(print_ext)). +:- use_module(library(msg_ext)). +:- use_module(library(pl/pl_term)). :- use_module(library(xpath)). :- use_module(library(xpath/xpath_table)). -:- use_module(library(yall)). -%! gv_color_scrape(+File) is det. +%! gv_color_scrape(+File:atom) is det. gv_color_scrape(File):- - debug(io, \"Updating the GraphViz color table.\", []), - call_to_stream(File, [In,Meta,Meta]gv_color_download(In)). + setup_call_cleanup( + open_any(File, write, Write, Close, []), + verbose( + gv_color_download(Write), + \"Updating the GraphViz color table.\" + ), + close_any(Close) + ). gv_color_download(Write):- diff --git a/pack.pl b/pack.pl index 989108a..203cbfc 100644 --- a/pack.pl +++ b/pack.pl @@ -4,6 +4,6 @@ home('https://github.com/wouterbeek/plGraphViz'). maintainer('Wouter Beek', 'me@wouterbeek.com'). name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). -requires('Prolog-Library-Collection'). +requires('Prolog_Library_Collection'). title(plGraphViz). -version('0.0.1'). +version('0.0.17'). diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl index 083dbb2..e6fb117 100644 --- a/prolog/fca/fca_viz.pl +++ b/prolog/fca/fca_viz.pl @@ -2,20 +2,24 @@ fca_viz, [ fca_export_graph/2, % +Context, -ExportGraph - fca_export_graph/3, % +Context, -ExportGraph, :Opts - fca_viz/2, % +Context, ?File - fca_viz/3 % +Context, ?File, :Opts + fca_export_graph/3, % +Context:compound + % -ExportGraph:compound + % :Options:list(compound) + fca_viz/2, % +Context, ?File + fca_viz/3 % +Context:compound + % ?File:atom + % :Options:list(compound) ] ). /**  FCA visualization @author Wouter Beek -@version 2015/11-2016/01 +@version 2015/11-2015/12 */ -:- use_module(library(aggregate)). -:- use_module(library(dcg/dcg_ext)). +:- use_module(library(dcg/dcg_collection)). +:- use_module(library(dcg/dcg_phrase)). :- use_module(library(dcg/dcg_pl)). :- use_module(library(fca/fca)). :- use_module(library(graph/build_export_graph)). @@ -32,7 +36,7 @@ ]). :- predicate_options(fca_viz/3, 3, [ pass_to(fca_export_graph/3, 3), - pass_to(graph_viz/3, 3) + pass_to(gv_export/3, 3) ]). is_meta(concept_label). @@ -84,15 +88,8 @@ fca_viz(Context, File):- fca_viz(Context, File, Opts1):- meta_options(is_meta, Opts1, Opts2), - statistics(process_cputime, Time1), fca_export_graph(Context, ExportG, Opts2), - ExportG = graph(_,_,Es,_), - aggregate_all(max(N), (member(edge(V1,V2,_), Es), (N = V1 ; N = V2)), N), - ignore(option(number_of_vertices(N), Opts2)), - statistics(process_cputime, Time2), - Time is Time2 - Time1, - ignore(option(process_cputime(Time), Opts2)), - graph_viz(ExportG, File, Opts2). + gv_export(ExportG, File, Opts2). diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl index 5134069..caabaa0 100644 --- a/prolog/graph/build_export_graph.pl +++ b/prolog/graph/build_export_graph.pl @@ -50,12 +50,14 @@ Vertex coordinates: --- @author Wouter Beek -@version 2015/07, 2015/09-2016/01 +@version 2015/07, 2015/09-2015/12 */ :- use_module(library(apply)). -:- use_module(library(dcg/dcg_ext)). +:- use_module(library(dcg/dcg_call)). +:- use_module(library(dcg/dcg_phrase)). :- use_module(library(graph/s/s_graph)). +:- use_module(library(lambda)). :- use_module(library(list_ext)). :- use_module(library(option_ext)). :- use_module(library(ordsets)). @@ -140,15 +142,11 @@ build_export_graph(G, ExportG):- build_export_graph(G, graph(VTerms2,VRanks,ETerms,GAttrs), Opts1):- graph_components(G, Vs, Es), meta_options(is_meta, Opts1, Opts2), - maplist(vertex_term0(Vs, Opts2), Vs, VTerms1), + maplist(\\V^VTerm^vertex_term(Vs, V, VTerm, Opts2), Vs, VTerms1), build_export_ranks(Vs, VTerms1, VRanks, VTerms2, Opts2), - maplist(edge_term0(Vs, Opts2), Es, ETerms), + maplist(\\E^ETerm^edge_term(Vs, E, ETerm, Opts2), Es, ETerms), graph_attributes(GAttrs, Opts2). -vertex_term0(Vs, Opts, V, VTerm) :- vertex_term(Vs, V, VTerm, Opts). - -edge_term0(Vs, Opts, E, ETerm) :- edge_term(Vs, E, ETerm, Opts). - graph_components(graph(Vs,Es), Vs, Es):- !. graph_components(G, Vs, Es):- s_graph_components(G, Vs, Es). diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl index f55fce5..8fa78af 100644 --- a/prolog/gv/gv_attr_type.pl +++ b/prolog/gv/gv_attr_type.pl @@ -46,10 +46,11 @@ /**  GraphViz attribute types @author Wouter Beek -@version 2015/07, 2015/11, 2016/02 +@version 2015/07, 2015/11 */ -:- use_module(library(dcg/dcg_ext), except([string//1])). +:- use_module(library(dcg/basics), except([string//1])). +:- use_module(library(dcg/dcg_phrase)). :- use_module(library(gv/gv_html)). @@ -255,7 +256,7 @@ input_changeable(true) -- \"!\". %! pointList(+Points:list(compound))// . pointList(Points) -- - *(point, Points). + *(point, Points, []). diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl index 4a92d5b..b26af73 100644 --- a/prolog/gv/gv_attrs.pl +++ b/prolog/gv/gv_attrs.pl @@ -2,7 +2,7 @@ gv_attrs, [ gv_attr_value//2 % +Context:oneof([cluster,edge,graph,node,subgraph]) - % +Attr + % +Attribute:nvpair ] ). :- ensure_loaded(library('gv/gv_attrs.data')). @@ -10,12 +10,11 @@ /**  GraphViz attributes @author Wouter Beek -@version 2015/07-2015/08, 2015/10, 2016/03 +@version 2015/07-2015/08, 2015/10 */ :- use_module(library(apply)). -:- use_module(library(dcg/dcg_ext)). -:- use_module(library(error)). +:- use_module(library(dcg/dcg_call)). :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]). :- use_module(library(lists)). :- use_module(library(os/file_ext)). @@ -24,20 +23,21 @@ -%! gv_attr_value(+Context, +Attr)// is det. +%! gv_attr_value( +%! +Context:oneof([cluster,edge,graph,node,subgraph]), +%! +Attribute:compound +%! )// is det. % Uses the default value in case Value is uninstantiated. % Otherwise, performs a typecheck and converts the given value. -% -% Context can be either `cluster`, `edge`, `graph`, `node` or `subgraph`. % Use the default if no value is given. gv_attr_value(Context, Name=Value) -- { - var(Value), + var(Value), !, gv_attr(Name, UsedBy, _, DefaultValue, _, _), % Check validity of context. memberchk(Context, UsedBy) - }, !, + }, gv_attr_value(Context, Name=DefaultValue). gv_attr_value(Context, Name=Value) -- { @@ -56,10 +56,8 @@ gv_attr_value(Context, Name=Value) -- % Check validity of Value w.r.t. minimum value -- if available. check_minimum(Value, Minimum) - }, !, + }, dcg_call(gv_attr_type:Dcg, Value). -gv_attr_value(_, Name=_) -- - {existence_error(gv_attr, Name)}. diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl index ac319dc..3232c97 100644 --- a/prolog/gv/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -14,11 +14,12 @@ @author Wouter Beek @tbd Color value `transparent` is only available in the output formats ps, svg, fig, vmrl, and the bitmap formats. -@version 2015/08, 2015/10, 2016/02 +@version 2015/08, 2015/10 */ :- use_module(library(apply)). -:- use_module(library(dcg/dcg_ext)). +:- use_module(library(dcg/basics)). +:- use_module(library(dcg/dcg_content)). :- use_module(library(lists)). :- use_module(library(os/file_ext)). @@ -34,12 +35,12 @@ color(rgb(Red,Green,Blue)) -- !, \"#\", - #(3, hex_color, [Red,Green,Blue]). + '#'(3, hex_color, [Red,Green,Blue]). color(rgbs(Red,Green,Blue,Alpha)) -- !, color(rgb(Red,Green,Blue)), hex_color(Alpha). color(hsv(Hue,Saturation,Value)) -- !, - #(3, hsv_color, [Hue,Saturation,Value]). + '#'(3, hsv_color, [Hue,Saturation,Value], []). color(Name) -- {gv_color(_, Name)}, atom(Name). @@ -55,7 +56,7 @@ hsv_color(D, Head, Tail):- %! colorList(+Pairs:list(pair(compound,float)))// . colorList(L) -- - '+'(wc, L). + '+'(wc, L, []). wc(Color-Float) -- color(Color), diff --git a/prolog/gv/gv_dom.pl b/prolog/gv/gv_dom.pl index 30c4263..e85849d 100644 --- a/prolog/gv/gv_dom.pl +++ b/prolog/gv/gv_dom.pl @@ -1,29 +1,35 @@ :- module( gv_dom, [ - gv_dom/3 % +ExportG, -Dom, +Opts + gv_dom/3 % +ExportGraph:compound + % -Dom:list(compound) + % +Options:list(compound) ] ). /**  GraphViz DOM @author Wouter Beek -@version 2015/07, 2016/01 +@version 2015/07 */ :- use_module(library(gv/gv_file)). :- use_module(library(option)). -:- use_module(library(svg/svg_ext)). +:- use_module(library(svg/svg_dom)). -%! gv_dom(+ExportG, -Dom, +Opts) is det. +%! gv_dom( +%! +ExportGraph:compound, +%! -Dom:list(compound), +%! +Options:list(compound) +%! ) is det. gv_dom(ExportG, Dom, Opts1):- % Make sure the file type of the output file is SvgDom. merge_options([output(svg)], Opts1, Opts2), - graph_viz(ExportG, ToFile, Opts2), + gv_export(ExportG, ToFile, Opts2), svg_dom(ToFile, Dom), delete_file(ToFile). diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl index 993fcee..4cf12a8 100644 --- a/prolog/gv/gv_file.pl +++ b/prolog/gv/gv_file.pl @@ -1,15 +1,18 @@ :- module( gv_file, [ - graph_viz/2, % +ExportG, ?File - graph_viz/3 % +ExportG, ?File, +Opts + gv_export/2, % +ExportGraph:compound + % ?File:atom + gv_export/3 % +ExportGraph:compound + % ?File:atom + % +Options:list(nvpair) ] ). /**  GraphViz file @author Wouter Beek -@version 2015/07, 2015/10-2015/11, 2016/01 +@version 2015/07, 2015/10-2015/11 */ :- use_module(library(code_ext)). @@ -20,7 +23,7 @@ :- use_module(library(os/process_ext)). :- use_module(library(string_ext)). -:- predicate_options(graph_viz/3, 3, [ +:- predicate_options(gv_export/3, 3, [ pass_to(file_to_gv/3, 3) ]). :- predicate_options(file_to_gv/3, 3, [ @@ -37,8 +40,14 @@ user:module_uses(gv_file, program(dot)). -%! graph_viz(+ExportGraph:compound, ?File:atom) is det. -%! graph_viz(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det. +%! gv_export(+ExportGraph:compound, ?File:atom) is det. +% Wrapper around gv_export/3 with default options. + +gv_export(ExportG, File):- + gv_export(ExportG, File, []). + + +%! gv_export(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det. % Returns a file containing a GraphViz visualization of the given graph. % % The following options are supported: @@ -51,9 +60,7 @@ user:module_uses(gv_file, program(dot)). % Default is `pdf`. % For possible values see gv_output_type/1. -graph_viz(ExportG, File):- - graph_viz(ExportG, File, []). -graph_viz(ExportG, File, Opts):- +gv_export(ExportG, File, Opts):- once(phrase(gv_graph(ExportG), Cs)), % Be thread-safe. diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl index c95c9cc..5c937ce 100644 --- a/prolog/gv/gv_graph.pl +++ b/prolog/gv/gv_graph.pl @@ -20,6 +20,7 @@ In GraphViz vertices are called 'nodes'. :- use_module(library(apply)). :- use_module(library(dcg/dcg_ext)). +:- use_module(library(dcg/dcg_content)). :- use_module(library(gv/gv_graph_comp)). :- use_module(library(lists)). :- use_module(library(option)). diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index 30ea9c5..aecbe07 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -24,11 +24,12 @@ a_list = ID \"=\" ID [\",\"] [a_list] @author Wouter Beek @see http://www.graphviz.org/content/dot-language -@version 2015/07-2015/08, 2015/10-2016/01 +@version 2015/07-2015/08, 2015/10-2015/12 */ :- use_module(library(apply)). :- use_module(library(dcg/dcg_ext)). +:- use_module(library(dcg/dcg_content)). :- use_module(library(gv/gv_attrs)). :- use_module(library(gv/gv_html)). :- use_module(library(error)). @@ -85,7 +86,7 @@ gv_edge_operator(Dir) -- %! gv_generic_attributes_statement( %! +Kind:oneof([edge,graph,node]), %! +Indent:nonneg, -%! +CategoryAttrs +%! +CategoryAttributes:list(nvpair) %! )// % A GraphViz statement describing generic attributes for a category of items. % @@ -199,8 +200,8 @@ gv_id(double_quoted_string(Atom)) -- !, % Numerals. gv_id(N) -- {number(N)}, !, - {number_codes(N, Cs)}, - Cs. + % @tbd Use gv_numeral//1. + number(N). % Alpha-numeric strings. gv_id(Atom) -- {atom_codes(Atom, [H|T])}, @@ -263,22 +264,6 @@ gv_node_id(Id) -- {type_error(gv_node_id, Id)}. -%! gv_numeral(-Number)// is det. -% ```bnf -% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? ) -% ``` - -gv_numeral(N) -- - (\"-\" - {Sg = -1} ; {Sg = 1}), - ( \".\" - - {I = 0}, +(digit, Ds), {pos_frac(Ds, Frac)} - ; +(digit, Ds1), {pos_sum(Ds1, I)}, - (\".\" - *(digit, Ds2), {pos_frac(Ds2, Frac)} ; {Frac = 0.0}) - ), - {N is Sg * (I + Frac)}. - - - %! gv_port// is det. gv_port -- gv_port_location, (gv_port_angle ; \"\"). @@ -294,7 +279,7 @@ gv_port_location -- \":[\", gv_id(_), \",\", gv_id(_), \"]\". %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . % ``` -% compass_pt : ( n | ne | e | se | s | sw | w | nw | c | _ ) +% compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) % ``` gv_compass_pt('_') -- \"_\". diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl index b5c1368..3ee7de6 100644 --- a/prolog/gv/gv_html.pl +++ b/prolog/gv/gv_html.pl @@ -44,6 +44,7 @@ cell:  label  */ :- use_module(library(dcg/dcg_ext)). +:- use_module(library(dcg/dcg_content)). :- use_module(library(html/html_dcg)). @@ -209,12 +210,7 @@ text(Content) -- text([Content]). % ``` % % Supported attributes for BR: -% * `ALIGN=\"CENTER|LEFT|RIGHT\"` -% -% Supported attributes for FONT: -% * COLOR=\"color\" -% * FACE=\"fontname\" -% * POINT-SIZE=\"value\" +% - `ALIGN=\"CENTER|LEFT|RIGHT\"` textitem(br(Attrs)) -- !, html_element(br, Attrs). diff --git a/prolog/gv/gv_numeral.pl b/prolog/gv/gv_numeral.pl new file mode 100644 index 0000000..4ba0d64 --- /dev/null +++ b/prolog/gv/gv_numeral.pl @@ -0,0 +1,87 @@ +:- module( + gv_numeral, + [ + gv_numeral//1 % ?Value:number + ] +). + +/**  GraphViz numeral + +@author Wouter Beek +@version 2014/05-2014/06, 2015/01 +*/ + +:- use_module(library(dcg/dcg_abnf)). +:- use_module(library(dcg/dcg_abnf_common)). +:- use_module(library(dcg/dcg_ascii)). +:- use_module(library(math/math_ext)). +:- use_module(library(math/positional)). +:- use_module(library(math/radconv)). +:- use_module(library(math/rational_ext)). + + + + + +%! gv_numeral(?Value:compound)// . +% +% # Syntax +% +% ```bnf +% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? ) +% ``` +% +% ## Generation +% +% In the generative case, three notations are allowed (also see below): +% 1. (non-zero integer-part) +% 2. (decimal-separator) (non-zero fractional) +% 3. (non-zero integer-part) (decimal-separator) (non-zero fractional) +% +% The following notations are explicitly excluded due to verbosity: +% - (non-zero integer-part) (decimal-separator) +% - (non-zero integer-part) (decimal-separator) (zero fractional) +% - (zero integer-part) (decimal-separator) (non-zero fractional) +% +% The following notations are also excluded, but since they violate +% well-formedness: +% - (non-zero integer-part) (non-zero fractional) +% - (decimal-separator) + +gv_numeral(N) -- + ( {ground(N)} + - '[-]?'(N), + {N0 is abs(N)}, + {rational_parts(N0, I, F)}, + ( % [1] The fractional is zero, so only write the integer part + % and do not write the decimal separator. + {F =:= 0} + - {positional(I, IW)}, + '[0-9]+'(IW) + ; % [2] The integer part is zero, so only write the fractional part, + % preceded by the decimal separator. + {I =:= 0} + - \".\", + {positional_fraction(FW, F)}, + '[0-9]*'(FW) + ; % [3] Both the integer part and the fractional are non-zero, + % so write both of them, with the decimal separator in-between. + {positional(I, IW)}, + '[0-9]+'(IW), + \".\", + {positional_fraction(FW, F)}, + '[0-9]*'(FW) + ) + ; '[-]?'(Sg), + ( \".\", + '[0-9]+'(FW), + {IW = []} + ; '[0-9]+'(IW), + ( \".\", + '[0-9]*'(FW) + ; {FW = []} + ) + ), + {rational_parts_weights(N0, IW, FW)}, + {N is copysign(N0, Sg)} + ). diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl deleted file mode 100644 index 4382aa6..0000000 --- a/prolog/tree/tree_viz.pl +++ /dev/null @@ -1,65 +0,0 @@ -:- module( - tree_viz, - [ - tree_export_graph/2, % +Tree, ExportG - tree_export_graph/3, % +Tree, ExportG, +Opts - tree_viz/2, % +Tree, ?File - tree_viz/3 % +Tree, ?File, +Opts - ] -). - -/**  Tree visualization - -Export trees to GraphViz. - -@author Wouter Beek -@version 2016/01-2016/02 -*/ - -:- use_module(library(graph/build_export_graph)). -:- use_module(library(gv/gv_file)). -:- use_module(library(ordsets)). -:- use_module(library(tree/l_tree)). -:- use_module(library(tree/s_tree)). - -:- predicate_options(tree_export_graph/3, 3, [ - pass_to(build_export_graph/4, 4) - ]). -:- predicate_options(tree_viz/3, 3, [ - pass_to(graph_viz/3, 3), - pass_to(tree_to_graph/3, 3) - ]). - - - - - -%! tree_export_graph(+Tree, -ExportG) is det. -%! tree_export_graph(+Tree, -ExportG, +Opts) is det. -% Opts are passed to build_export_graph/4. - -tree_export_graph(Tree, ExportG) :- - tree_export_graph(Tree, ExportG, []). - -tree_export_graph(Tree, ExportG, Opts) :- - ( is_s_tree(Tree) - - tree_to_graph(Tree, G) - ; is_l_tree(Tree) - - l_tree_to_graph(Tree, G) - ), - build_export_graph(G, ExportG, Opts). - - - -%! tree_viz(+Tree, ?File) is det. -%! tree_viz(+Tree, ?File, +Opts) is det. -% Stores the given tree term into a GraphViz file. -% -% Options are passed to export_graph_to_gv_file/3, tree_to_graph/3. - -tree_viz(Tree, File) :- - tree_viz(Tree, File, []). - -tree_viz(Tree, File, Opts) :- - tree_export_graph(Tree, ExportG, Opts), - graph_viz(ExportG, File, Opts). diff --git a/test/test.pl b/test/test.pl index 83dc023..c1bdca0 100644 --- a/test/test.pl +++ b/test/test.pl @@ -6,10 +6,8 @@ :- use_module(library(gv/gv_attrs)). :- use_module(library(gv/gv_attr_type)). :- use_module(library(gv/gv_color)). -:- use_module(library(gv/gv_dom)). :- use_module(library(gv/gv_file)). :- use_module(library(gv/gv_graph)). :- use_module(library(gv/gv_graph_comp)). :- use_module(library(gv/gv_html)). -%/tree -:- use_module(library(tree/tree_viz)). +:- use_module(library(gv/gv_numeral)). ``` 148: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 4e2d9f1 å’Œå˜åŠ¨å 6359c9c  [back to content](#compare) ``` diff diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl index 3ee7de6..3e06db0 100644 --- a/prolog/gv/gv_html.pl +++ b/prolog/gv/gv_html.pl @@ -210,7 +210,12 @@ text(Content) -- text([Content]). % ``` % % Supported attributes for BR: -% - `ALIGN=\"CENTER|LEFT|RIGHT\"` +% * `ALIGN=\"CENTER|LEFT|RIGHT\"` +% +% Supported attributes for FONT: +% * COLOR=\"color\" +% * FACE=\"fontname\" +% * POINT-SIZE=\"value\" textitem(br(Attrs)) -- !, html_element(br, Attrs). ``` 149: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 6359c9c å’Œå˜åŠ¨å 00537d0  [back to content](#compare) ``` diff diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl index e6fb117..4d0f7d1 100644 --- a/prolog/fca/fca_viz.pl +++ b/prolog/fca/fca_viz.pl @@ -2,22 +2,19 @@ fca_viz, [ fca_export_graph/2, % +Context, -ExportGraph - fca_export_graph/3, % +Context:compound - % -ExportGraph:compound - % :Options:list(compound) - fca_viz/2, % +Context, ?File - fca_viz/3 % +Context:compound - % ?File:atom - % :Options:list(compound) + fca_export_graph/3, % +Context, -ExportGraph, :Opts + fca_viz/2, % +Context, ?File + fca_viz/3 % +Context, ?File, :Opts ] ). /**  FCA visualization @author Wouter Beek -@version 2015/11-2015/12 +@version 2015/11-2016/01 */ +:- use_module(library(aggregate)). :- use_module(library(dcg/dcg_collection)). :- use_module(library(dcg/dcg_phrase)). :- use_module(library(dcg/dcg_pl)). @@ -36,7 +33,7 @@ ]). :- predicate_options(fca_viz/3, 3, [ pass_to(fca_export_graph/3, 3), - pass_to(gv_export/3, 3) + pass_to(graph_viz/3, 3) ]). is_meta(concept_label). @@ -88,8 +85,15 @@ fca_viz(Context, File):- fca_viz(Context, File, Opts1):- meta_options(is_meta, Opts1, Opts2), + statistics(process_cputime, Time1), fca_export_graph(Context, ExportG, Opts2), - gv_export(ExportG, File, Opts2). + ExportG = graph(_,_,Es,_), + aggregate_all(max(N), (member(edge(V1,V2,_), Es), (N = V1 ; N = V2)), N), + ignore(option(number_of_vertices(N), Opts2)), + statistics(process_cputime, Time2), + Time is Time2 - Time1, + ignore(option(process_cputime(Time), Opts2)), + graph_viz(ExportG, File, Opts2). diff --git a/prolog/gv/gv_dom.pl b/prolog/gv/gv_dom.pl index e85849d..b0ece01 100644 --- a/prolog/gv/gv_dom.pl +++ b/prolog/gv/gv_dom.pl @@ -10,7 +10,7 @@ /**  GraphViz DOM @author Wouter Beek -@version 2015/07 +@version 2015/07, 2016/01 */ :- use_module(library(gv/gv_file)). @@ -30,6 +30,6 @@ gv_dom(ExportG, Dom, Opts1):- % Make sure the file type of the output file is SvgDom. merge_options([output(svg)], Opts1, Opts2), - gv_export(ExportG, ToFile, Opts2), + graph_viz(ExportG, ToFile, Opts2), svg_dom(ToFile, Dom), delete_file(ToFile). diff --git a/prolog/gv/gv_file.pl b/prolog/gv/gv_file.pl index 4cf12a8..993fcee 100644 --- a/prolog/gv/gv_file.pl +++ b/prolog/gv/gv_file.pl @@ -1,18 +1,15 @@ :- module( gv_file, [ - gv_export/2, % +ExportGraph:compound - % ?File:atom - gv_export/3 % +ExportGraph:compound - % ?File:atom - % +Options:list(nvpair) + graph_viz/2, % +ExportG, ?File + graph_viz/3 % +ExportG, ?File, +Opts ] ). /**  GraphViz file @author Wouter Beek -@version 2015/07, 2015/10-2015/11 +@version 2015/07, 2015/10-2015/11, 2016/01 */ :- use_module(library(code_ext)). @@ -23,7 +20,7 @@ :- use_module(library(os/process_ext)). :- use_module(library(string_ext)). -:- predicate_options(gv_export/3, 3, [ +:- predicate_options(graph_viz/3, 3, [ pass_to(file_to_gv/3, 3) ]). :- predicate_options(file_to_gv/3, 3, [ @@ -40,14 +37,8 @@ user:module_uses(gv_file, program(dot)). -%! gv_export(+ExportGraph:compound, ?File:atom) is det. -% Wrapper around gv_export/3 with default options. - -gv_export(ExportG, File):- - gv_export(ExportG, File, []). - - -%! gv_export(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det. +%! graph_viz(+ExportGraph:compound, ?File:atom) is det. +%! graph_viz(+ExportGraph:compound, ?File:atom, +Options:list(compound)) is det. % Returns a file containing a GraphViz visualization of the given graph. % % The following options are supported: @@ -60,7 +51,9 @@ gv_export(ExportG, File):- % Default is `pdf`. % For possible values see gv_output_type/1. -gv_export(ExportG, File, Opts):- +graph_viz(ExportG, File):- + graph_viz(ExportG, File, []). +graph_viz(ExportG, File, Opts):- once(phrase(gv_graph(ExportG), Cs)), % Be thread-safe. diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl new file mode 100644 index 0000000..35430da --- /dev/null +++ b/prolog/tree/tree_viz.pl @@ -0,0 +1,62 @@ +:- module( + gv_tree, + [ + tree_export_graph/2, % +Tree, ExportG + tree_export_graph/3, % +Tree, ExportG, +Opts + tree_viz/2, % +Tree, ?File + tree_viz/3 % +Tree, ?File, +Opts + ] +). + +/**  Tree visualization + +Export trees to GraphViz. + +@author Wouter Beek +@version 2016/01 +*/ + +:- use_module(library(graph/build_export_graph)). +:- use_module(library(gv/gv_file)). +:- use_module(library(ordsets)). + +:- predicate_options(tree_export_graph/3, 3, [ + pass_to(build_export_graph/4, 4) + ]). +:- predicate_options(tree_viz/3, 3, [ + pass_to(graph_viz/3, 3), + pass_to(tree_to_graph/3, 3) + ]). + + + + + +%! tree_export_graph(+Tree, -ExportG) is det. +%! tree_export_graph(+Tree, -ExportG, +Opts) is det. +% Opts are passed to build_export_graph/4. + +tree_export_graph(Tree, ExportG) :- + tree_export_graph(Tree, ExportG, []). +tree_export_graph(t(H,Subtrees), ExportG, Opts) :- + maplist(tree_export_graph, Subtrees, ExportGs), + maplist(unpack_graph, ExportGs, SubVs, SubEs), + ord_union([[H]|SubVs], Vs), + ord_union(SubEs, Es), + build_export_graph(graph(Vs,Es), ExportG, Opts). + +unpack_graph(graph(Vs,Es), Vs, Es). + + + +%! tree_viz(+Tree, ?File) is det. +%! tree_viz(+Tree, ?File, +Opts) is det. +% Stores the given tree term into a GraphViz file. +% +% Options are passed to export_graph_to_gv_file/3, tree_to_graph/3. + +tree_viz(Tree, File) :- + tree_viz(Tree, File, []). +tree_viz(Tree, File, Opts) :- + tree_export_graph(Tree, ExportG, Opts), + graph_viz(ExportG, File, Opts). ``` 150: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 00537d0 å’Œå˜åŠ¨å acadc39  [back to content](#compare) ``` diff diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl index 35430da..030dc0a 100644 --- a/prolog/tree/tree_viz.pl +++ b/prolog/tree/tree_viz.pl @@ -1,5 +1,5 @@ :- module( - gv_tree, + tree_viz, [ tree_export_graph/2, % +Tree, ExportG tree_export_graph/3, % +Tree, ExportG, +Opts @@ -19,6 +19,7 @@ Export trees to GraphViz. :- use_module(library(graph/build_export_graph)). :- use_module(library(gv/gv_file)). :- use_module(library(ordsets)). +:- use_module(library(tree/tree)). :- predicate_options(tree_export_graph/3, 3, [ pass_to(build_export_graph/4, 4) @@ -39,8 +40,8 @@ Export trees to GraphViz. tree_export_graph(Tree, ExportG) :- tree_export_graph(Tree, ExportG, []). tree_export_graph(t(H,Subtrees), ExportG, Opts) :- - maplist(tree_export_graph, Subtrees, ExportGs), - maplist(unpack_graph, ExportGs, SubVs, SubEs), + maplist(tree_to_graph, Subtrees, Gs), + maplist(unpack_graph, Gs, SubVs, SubEs), ord_union([[H]|SubVs], Vs), ord_union(SubEs, Es), build_export_graph(graph(Vs,Es), ExportG, Opts). ``` 151: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ acadc39 å’Œå˜åŠ¨å 51359c6  [back to content](#compare) ``` diff diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index aecbe07..dacfbe9 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -24,7 +24,7 @@ a_list = ID \"=\" ID [\",\"] [a_list] @author Wouter Beek @see http://www.graphviz.org/content/dot-language -@version 2015/07-2015/08, 2015/10-2015/12 +@version 2015/07-2015/08, 2015/10-2016/01 */ :- use_module(library(apply)). @@ -199,9 +199,7 @@ gv_id(double_quoted_string(Atom)) -- !, \"\\\"\", atom(Atom), \"\\\"\". % Numerals. gv_id(N) -- - {number(N)}, !, - % @tbd Use gv_numeral//1. - number(N). + gv_numeral(N), !. % Alpha-numeric strings. gv_id(Atom) -- {atom_codes(Atom, [H|T])}, @@ -264,6 +262,22 @@ gv_node_id(Id) -- {type_error(gv_node_id, Id)}. +%! gv_numeral(-Number)// is det. +% ```bnf +% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? ) +% ``` + +gv_numeral(N) -- + (\"-\" - {Sg = -1} ; {Sg = 1}), + ( \".\" + - {I = 0}, +(digit, Ds), {pos_frac(Ds, Frac)} + ; +(digit, Ds1), {pos_sum(Ds1, I)}, + (\".\" - *(digit, Ds2), {pos_frac(Ds2, Frac)} ; {Frac = 0.0}) + ), + {N is Sg * (I + Frac)}. + + + %! gv_port// is det. gv_port -- gv_port_location, (gv_port_angle ; \"\"). @@ -279,7 +293,7 @@ gv_port_location -- \":[\", gv_id(_), \",\", gv_id(_), \"]\". %! gv_compass_pt(+Direction:oneof(['_',c,e,n,ne,nw,s,se,sw,w]))// . % ``` -% compass_pt : (n | ne | e | se | s | sw | w | nw | c | _) +% compass_pt : ( n | ne | e | se | s | sw | w | nw | c | _ ) % ``` gv_compass_pt('_') -- \"_\". diff --git a/prolog/gv/gv_numeral.pl b/prolog/gv/gv_numeral.pl deleted file mode 100644 index 4ba0d64..0000000 --- a/prolog/gv/gv_numeral.pl +++ /dev/null @@ -1,87 +0,0 @@ -:- module( - gv_numeral, - [ - gv_numeral//1 % ?Value:number - ] -). - -/**  GraphViz numeral - -@author Wouter Beek -@version 2014/05-2014/06, 2015/01 -*/ - -:- use_module(library(dcg/dcg_abnf)). -:- use_module(library(dcg/dcg_abnf_common)). -:- use_module(library(dcg/dcg_ascii)). -:- use_module(library(math/math_ext)). -:- use_module(library(math/positional)). -:- use_module(library(math/radconv)). -:- use_module(library(math/rational_ext)). - - - - - -%! gv_numeral(?Value:compound)// . -% -% # Syntax -% -% ```bnf -% ('-')? ( '.' [0-9]+ | [0-9]+ ( '.' [0-9]* )? ) -% ``` -% -% ## Generation -% -% In the generative case, three notations are allowed (also see below): -% 1. (non-zero integer-part) -% 2. (decimal-separator) (non-zero fractional) -% 3. (non-zero integer-part) (decimal-separator) (non-zero fractional) -% -% The following notations are explicitly excluded due to verbosity: -% - (non-zero integer-part) (decimal-separator) -% - (non-zero integer-part) (decimal-separator) (zero fractional) -% - (zero integer-part) (decimal-separator) (non-zero fractional) -% -% The following notations are also excluded, but since they violate -% well-formedness: -% - (non-zero integer-part) (non-zero fractional) -% - (decimal-separator) - -gv_numeral(N) -- - ( {ground(N)} - - '[-]?'(N), - {N0 is abs(N)}, - {rational_parts(N0, I, F)}, - ( % [1] The fractional is zero, so only write the integer part - % and do not write the decimal separator. - {F =:= 0} - - {positional(I, IW)}, - '[0-9]+'(IW) - ; % [2] The integer part is zero, so only write the fractional part, - % preceded by the decimal separator. - {I =:= 0} - - \".\", - {positional_fraction(FW, F)}, - '[0-9]*'(FW) - ; % [3] Both the integer part and the fractional are non-zero, - % so write both of them, with the decimal separator in-between. - {positional(I, IW)}, - '[0-9]+'(IW), - \".\", - {positional_fraction(FW, F)}, - '[0-9]*'(FW) - ) - ; '[-]?'(Sg), - ( \".\", - '[0-9]+'(FW), - {IW = []} - ; '[0-9]+'(IW), - ( \".\", - '[0-9]*'(FW) - ; {FW = []} - ) - ), - {rational_parts_weights(N0, IW, FW)}, - {N is copysign(N0, Sg)} - ). ``` 152: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 51359c6 å’Œå˜åŠ¨å 73047b3  [back to content](#compare) ``` diff diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl index caabaa0..6231cc3 100644 --- a/prolog/graph/build_export_graph.pl +++ b/prolog/graph/build_export_graph.pl @@ -50,18 +50,18 @@ Vertex coordinates: --- @author Wouter Beek -@version 2015/07, 2015/09-2015/12 +@version 2015/07, 2015/09-2016/01 */ :- use_module(library(apply)). :- use_module(library(dcg/dcg_call)). :- use_module(library(dcg/dcg_phrase)). :- use_module(library(graph/s/s_graph)). -:- use_module(library(lambda)). :- use_module(library(list_ext)). :- use_module(library(option_ext)). :- use_module(library(ordsets)). :- use_module(library(pairs)). +:- use_module(library(yall)). :- predicate_options(build_export_graph/4, 4, [ pass_to(edge_term/3, 3), @@ -142,9 +142,9 @@ build_export_graph(G, ExportG):- build_export_graph(G, graph(VTerms2,VRanks,ETerms,GAttrs), Opts1):- graph_components(G, Vs, Es), meta_options(is_meta, Opts1, Opts2), - maplist(\\V^VTerm^vertex_term(Vs, V, VTerm, Opts2), Vs, VTerms1), + maplist([V,VTerm]vertex_term(Vs, V, VTerm, Opts2), Vs, VTerms1), build_export_ranks(Vs, VTerms1, VRanks, VTerms2, Opts2), - maplist(\\E^ETerm^edge_term(Vs, E, ETerm, Opts2), Es, ETerms), + maplist([E,ETerm]edge_term(Vs, E, ETerm, Opts2), Es, ETerms), graph_attributes(GAttrs, Opts2). graph_components(graph(Vs,Es), Vs, Es):- !. ``` 153: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 73047b3 å’Œå˜åŠ¨å e4c4586  [back to content](#compare) ``` diff diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl index 030dc0a..071d3c0 100644 --- a/prolog/tree/tree_viz.pl +++ b/prolog/tree/tree_viz.pl @@ -13,13 +13,14 @@ Export trees to GraphViz. @author Wouter Beek -@version 2016/01 +@version 2016/01-2016/02 */ :- use_module(library(graph/build_export_graph)). :- use_module(library(gv/gv_file)). :- use_module(library(ordsets)). -:- use_module(library(tree/tree)). +:- use_module(library(tree/l_tree)). +:- use_module(library(tree/s_tree)). :- predicate_options(tree_export_graph/3, 3, [ pass_to(build_export_graph/4, 4) @@ -39,14 +40,14 @@ Export trees to GraphViz. tree_export_graph(Tree, ExportG) :- tree_export_graph(Tree, ExportG, []). -tree_export_graph(t(H,Subtrees), ExportG, Opts) :- - maplist(tree_to_graph, Subtrees, Gs), - maplist(unpack_graph, Gs, SubVs, SubEs), - ord_union([[H]|SubVs], Vs), - ord_union(SubEs, Es), - build_export_graph(graph(Vs,Es), ExportG, Opts). -unpack_graph(graph(Vs,Es), Vs, Es). +tree_export_graph(Tree, ExportG, Opts) :- + ( is_s_tree(Tree) + - s_tree_to_graph(Tree, G) + ; is_l_tree(Tree) + - l_tree_to_graph(Tree, G) + ), + build_export_graph(G, ExportG, Opts). @@ -58,6 +59,7 @@ unpack_graph(graph(Vs,Es), Vs, Es). tree_viz(Tree, File) :- tree_viz(Tree, File, []). + tree_viz(Tree, File, Opts) :- tree_export_graph(Tree, ExportG, Opts), graph_viz(ExportG, File, Opts). ``` 154: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ e4c4586 å’Œå˜åŠ¨å 7b991bb  [back to content](#compare) ``` diff diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl index 8fa78af..d7f133e 100644 --- a/prolog/gv/gv_attr_type.pl +++ b/prolog/gv/gv_attr_type.pl @@ -46,10 +46,10 @@ /**  GraphViz attribute types @author Wouter Beek -@version 2015/07, 2015/11 +@version 2015/07, 2015/11, 2016/02 */ -:- use_module(library(dcg/basics), except([string//1])). +:- use_module(library(dcg/dcg_ext), except([string//1])). :- use_module(library(dcg/dcg_phrase)). :- use_module(library(gv/gv_html)). @@ -256,7 +256,7 @@ input_changeable(true) -- \"!\". %! pointList(+Points:list(compound))// . pointList(Points) -- - *(point, Points, []). + *(point, Points). diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl index 3232c97..faa3828 100644 --- a/prolog/gv/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -14,11 +14,11 @@ @author Wouter Beek @tbd Color value `transparent` is only available in the output formats ps, svg, fig, vmrl, and the bitmap formats. -@version 2015/08, 2015/10 +@version 2015/08, 2015/10, 2016/02 */ :- use_module(library(apply)). -:- use_module(library(dcg/basics)). +:- use_module(library(dcg/dcg_ext)). :- use_module(library(dcg/dcg_content)). :- use_module(library(lists)). :- use_module(library(os/file_ext)). @@ -40,7 +40,7 @@ color(rgbs(Red,Green,Blue,Alpha)) -- !, color(rgb(Red,Green,Blue)), hex_color(Alpha). color(hsv(Hue,Saturation,Value)) -- !, - '#'(3, hsv_color, [Hue,Saturation,Value], []). + '#'(3, hsv_color, [Hue,Saturation,Value]). color(Name) -- {gv_color(_, Name)}, atom(Name). @@ -56,7 +56,7 @@ hsv_color(D, Head, Tail):- %! colorList(+Pairs:list(pair(compound,float)))// . colorList(L) -- - '+'(wc, L, []). + '+'(wc, L). wc(Color-Float) -- color(Color), diff --git a/test/test.pl b/test/test.pl index c1bdca0..83dc023 100644 --- a/test/test.pl +++ b/test/test.pl @@ -6,8 +6,10 @@ :- use_module(library(gv/gv_attrs)). :- use_module(library(gv/gv_attr_type)). :- use_module(library(gv/gv_color)). +:- use_module(library(gv/gv_dom)). :- use_module(library(gv/gv_file)). :- use_module(library(gv/gv_graph)). :- use_module(library(gv/gv_graph_comp)). :- use_module(library(gv/gv_html)). -:- use_module(library(gv/gv_numeral)). +%/tree +:- use_module(library(tree/tree_viz)). ``` 155: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 7b991bb å’Œå˜åŠ¨å fa1518f  [back to content](#compare) ``` diff diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl index 190b988..75a83a0 100644 --- a/data/gv_attrs_scrape.pl +++ b/data/gv_attrs_scrape.pl @@ -25,8 +25,7 @@ gv_attr( */ :- use_module(library(apply)). -:- use_module(library(dcg/basics), except([string//1])). -:- use_module(library(dcg/dcg_phrase)). +:- use_module(library(dcg/dcg_ext)). :- use_module(library(gv/gv_attr_type)). :- use_module(library(http/http_download)). :- use_module(library(iostream)). diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl index 4d0f7d1..1392db9 100644 --- a/prolog/fca/fca_viz.pl +++ b/prolog/fca/fca_viz.pl @@ -16,7 +16,7 @@ :- use_module(library(aggregate)). :- use_module(library(dcg/dcg_collection)). -:- use_module(library(dcg/dcg_phrase)). +:- use_module(library(dcg/dcg_ext)). :- use_module(library(dcg/dcg_pl)). :- use_module(library(fca/fca)). :- use_module(library(graph/build_export_graph)). diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl index 6231cc3..ef74aa7 100644 --- a/prolog/graph/build_export_graph.pl +++ b/prolog/graph/build_export_graph.pl @@ -54,8 +54,7 @@ Vertex coordinates: */ :- use_module(library(apply)). -:- use_module(library(dcg/dcg_call)). -:- use_module(library(dcg/dcg_phrase)). +:- use_module(library(dcg/dcg_ext)). :- use_module(library(graph/s/s_graph)). :- use_module(library(list_ext)). :- use_module(library(option_ext)). diff --git a/prolog/gv/gv_attr_type.pl b/prolog/gv/gv_attr_type.pl index d7f133e..f55fce5 100644 --- a/prolog/gv/gv_attr_type.pl +++ b/prolog/gv/gv_attr_type.pl @@ -50,7 +50,6 @@ */ :- use_module(library(dcg/dcg_ext), except([string//1])). -:- use_module(library(dcg/dcg_phrase)). :- use_module(library(gv/gv_html)). diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl index b26af73..11230b9 100644 --- a/prolog/gv/gv_attrs.pl +++ b/prolog/gv/gv_attrs.pl @@ -14,7 +14,7 @@ */ :- use_module(library(apply)). -:- use_module(library(dcg/dcg_call)). +:- use_module(library(dcg/dcg_ext)). :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]). :- use_module(library(lists)). :- use_module(library(os/file_ext)). diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl index faa3828..a63d9c4 100644 --- a/prolog/gv/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -19,7 +19,6 @@ :- use_module(library(apply)). :- use_module(library(dcg/dcg_ext)). -:- use_module(library(dcg/dcg_content)). :- use_module(library(lists)). :- use_module(library(os/file_ext)). diff --git a/prolog/gv/gv_graph.pl b/prolog/gv/gv_graph.pl index 5c937ce..c95c9cc 100644 --- a/prolog/gv/gv_graph.pl +++ b/prolog/gv/gv_graph.pl @@ -20,7 +20,6 @@ In GraphViz vertices are called 'nodes'. :- use_module(library(apply)). :- use_module(library(dcg/dcg_ext)). -:- use_module(library(dcg/dcg_content)). :- use_module(library(gv/gv_graph_comp)). :- use_module(library(lists)). :- use_module(library(option)). diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index dacfbe9..367534b 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -29,7 +29,6 @@ a_list = ID \"=\" ID [\",\"] [a_list] :- use_module(library(apply)). :- use_module(library(dcg/dcg_ext)). -:- use_module(library(dcg/dcg_content)). :- use_module(library(gv/gv_attrs)). :- use_module(library(gv/gv_html)). :- use_module(library(error)). diff --git a/prolog/gv/gv_html.pl b/prolog/gv/gv_html.pl index 3e06db0..b5c1368 100644 --- a/prolog/gv/gv_html.pl +++ b/prolog/gv/gv_html.pl @@ -44,7 +44,6 @@ cell:  label  */ :- use_module(library(dcg/dcg_ext)). -:- use_module(library(dcg/dcg_content)). :- use_module(library(html/html_dcg)). ``` 156: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ fa1518f å’Œå˜åŠ¨å 8593ed6  [back to content](#compare) ``` diff diff --git a/prolog/graph/build_export_graph.pl b/prolog/graph/build_export_graph.pl index ef74aa7..5134069 100644 --- a/prolog/graph/build_export_graph.pl +++ b/prolog/graph/build_export_graph.pl @@ -60,7 +60,6 @@ Vertex coordinates: :- use_module(library(option_ext)). :- use_module(library(ordsets)). :- use_module(library(pairs)). -:- use_module(library(yall)). :- predicate_options(build_export_graph/4, 4, [ pass_to(edge_term/3, 3), @@ -141,11 +140,15 @@ build_export_graph(G, ExportG):- build_export_graph(G, graph(VTerms2,VRanks,ETerms,GAttrs), Opts1):- graph_components(G, Vs, Es), meta_options(is_meta, Opts1, Opts2), - maplist([V,VTerm]vertex_term(Vs, V, VTerm, Opts2), Vs, VTerms1), + maplist(vertex_term0(Vs, Opts2), Vs, VTerms1), build_export_ranks(Vs, VTerms1, VRanks, VTerms2, Opts2), - maplist([E,ETerm]edge_term(Vs, E, ETerm, Opts2), Es, ETerms), + maplist(edge_term0(Vs, Opts2), Es, ETerms), graph_attributes(GAttrs, Opts2). +vertex_term0(Vs, Opts, V, VTerm) :- vertex_term(Vs, V, VTerm, Opts). + +edge_term0(Vs, Opts, E, ETerm) :- edge_term(Vs, E, ETerm, Opts). + graph_components(graph(Vs,Es), Vs, Es):- !. graph_components(G, Vs, Es):- s_graph_components(G, Vs, Es). diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index 367534b..f316cb7 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -198,7 +198,9 @@ gv_id(double_quoted_string(Atom)) -- !, \"\\\"\", atom(Atom), \"\\\"\". % Numerals. gv_id(N) -- - gv_numeral(N), !. + {number(N)}, !, + {number_codes(N, Cs)}, + Cs. % Alpha-numeric strings. gv_id(Atom) -- {atom_codes(Atom, [H|T])}, ``` 157: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 8593ed6 å’Œå˜åŠ¨å cc53b1e  [back to content](#compare) ``` diff diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl index 11230b9..1e7c93b 100644 --- a/prolog/gv/gv_attrs.pl +++ b/prolog/gv/gv_attrs.pl @@ -10,11 +10,12 @@ /**  GraphViz attributes @author Wouter Beek -@version 2015/07-2015/08, 2015/10 +@version 2015/07-2015/08, 2015/10, 2016/03 */ :- use_module(library(apply)). :- use_module(library(dcg/dcg_ext)). +:- use_module(library(error)). :- use_module(library(gv/gv_attr_type), [gv_attr_type//1]). :- use_module(library(lists)). :- use_module(library(os/file_ext)). @@ -33,11 +34,11 @@ % Use the default if no value is given. gv_attr_value(Context, Name=Value) -- { - var(Value), !, + var(Value), gv_attr(Name, UsedBy, _, DefaultValue, _, _), % Check validity of context. memberchk(Context, UsedBy) - }, + }, !, gv_attr_value(Context, Name=DefaultValue). gv_attr_value(Context, Name=Value) -- { @@ -56,8 +57,10 @@ gv_attr_value(Context, Name=Value) -- % Check validity of Value w.r.t. minimum value -- if available. check_minimum(Value, Minimum) - }, + }, !, dcg_call(gv_attr_type:Dcg, Value). +gv_attr_value(_, Name=_) -- + {existence_error(gv_attr, Name)}. ``` 158: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ cc53b1e å’Œå˜åŠ¨å 202a241  [back to content](#compare) ``` diff diff --git a/prolog/tree/tree_viz.pl b/prolog/tree/tree_viz.pl index 071d3c0..4382aa6 100644 --- a/prolog/tree/tree_viz.pl +++ b/prolog/tree/tree_viz.pl @@ -43,7 +43,7 @@ tree_export_graph(Tree, ExportG) :- tree_export_graph(Tree, ExportG, Opts) :- ( is_s_tree(Tree) - - s_tree_to_graph(Tree, G) + - tree_to_graph(Tree, G) ; is_l_tree(Tree) - l_tree_to_graph(Tree, G) ), ``` 159: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 202a241 å’Œå˜åŠ¨å 858b5fb  [back to content](#compare) ``` diff diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl index 75a83a0..d43346f 100644 --- a/data/gv_attrs_scrape.pl +++ b/data/gv_attrs_scrape.pl @@ -30,8 +30,8 @@ gv_attr( :- use_module(library(http/http_download)). :- use_module(library(iostream)). :- use_module(library(lists)). -:- use_module(library(msg_ext)). :- use_module(library(pl/pl_term)). +:- use_module(library(print_ext)). :- use_module(library(xpath)). :- use_module(library(xpath/xpath_table)). diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl index 3ac5d44..5d220d9 100644 --- a/data/gv_color_scrape.pl +++ b/data/gv_color_scrape.pl @@ -15,8 +15,8 @@ :- use_module(library(http/http_download)). :- use_module(library(iostream)). :- use_module(library(lists)). -:- use_module(library(msg_ext)). :- use_module(library(pl/pl_term)). +:- use_module(library(print_ext)). :- use_module(library(xpath)). :- use_module(library(xpath/xpath_table)). ``` 160: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 858b5fb å’Œå˜åŠ¨å 260b62d  [back to content](#compare) ``` diff diff --git a/prolog/gv/gv_attrs.pl b/prolog/gv/gv_attrs.pl index 1e7c93b..4a92d5b 100644 --- a/prolog/gv/gv_attrs.pl +++ b/prolog/gv/gv_attrs.pl @@ -2,7 +2,7 @@ gv_attrs, [ gv_attr_value//2 % +Context:oneof([cluster,edge,graph,node,subgraph]) - % +Attribute:nvpair + % +Attr ] ). :- ensure_loaded(library('gv/gv_attrs.data')). @@ -24,12 +24,11 @@ -%! gv_attr_value( -%! +Context:oneof([cluster,edge,graph,node,subgraph]), -%! +Attribute:compound -%! )// is det. +%! gv_attr_value(+Context, +Attr)// is det. % Uses the default value in case Value is uninstantiated. % Otherwise, performs a typecheck and converts the given value. +% +% Context can be either `cluster`, `edge`, `graph`, `node` or `subgraph`. % Use the default if no value is given. gv_attr_value(Context, Name=Value) -- diff --git a/prolog/gv/gv_graph_comp.pl b/prolog/gv/gv_graph_comp.pl index f316cb7..30ea9c5 100644 --- a/prolog/gv/gv_graph_comp.pl +++ b/prolog/gv/gv_graph_comp.pl @@ -85,7 +85,7 @@ gv_edge_operator(Dir) -- %! gv_generic_attributes_statement( %! +Kind:oneof([edge,graph,node]), %! +Indent:nonneg, -%! +CategoryAttributes:list(nvpair) +%! +CategoryAttrs %! )// % A GraphViz statement describing generic attributes for a category of items. % ``` 161: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 260b62d å’Œå˜åŠ¨å a6886ca  [back to content](#compare) ``` diff diff --git a/prolog/gv/gv_dom.pl b/prolog/gv/gv_dom.pl index b0ece01..30c4263 100644 --- a/prolog/gv/gv_dom.pl +++ b/prolog/gv/gv_dom.pl @@ -1,9 +1,7 @@ :- module( gv_dom, [ - gv_dom/3 % +ExportGraph:compound - % -Dom:list(compound) - % +Options:list(compound) + gv_dom/3 % +ExportG, -Dom, +Opts ] ). @@ -15,17 +13,13 @@ :- use_module(library(gv/gv_file)). :- use_module(library(option)). -:- use_module(library(svg/svg_dom)). +:- use_module(library(svg/svg_ext)). -%! gv_dom( -%! +ExportGraph:compound, -%! -Dom:list(compound), -%! +Options:list(compound) -%! ) is det. +%! gv_dom(+ExportG, -Dom, +Opts) is det. gv_dom(ExportG, Dom, Opts1):- % Make sure the file type of the output file is SvgDom. ``` 162: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ a6886ca å’Œå˜åŠ¨å 41914a2  [back to content](#compare) ``` diff diff --git a/pack.pl b/pack.pl index 203cbfc..989108a 100644 --- a/pack.pl +++ b/pack.pl @@ -4,6 +4,6 @@ home('https://github.com/wouterbeek/plGraphViz'). maintainer('Wouter Beek', 'me@wouterbeek.com'). name(plGraphViz). packager('Wouter Beek', 'me@wouterbeek.com'). -requires('Prolog_Library_Collection'). +requires('Prolog-Library-Collection'). title(plGraphViz). -version('0.0.17'). +version('0.0.1'). ``` 163: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 41914a2 å’Œå˜åŠ¨å 05a5fd2  [back to content](#compare) ``` diff diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl index d43346f..8730e13 100644 --- a/data/gv_attrs_scrape.pl +++ b/data/gv_attrs_scrape.pl @@ -30,7 +30,7 @@ gv_attr( :- use_module(library(http/http_download)). :- use_module(library(iostream)). :- use_module(library(lists)). -:- use_module(library(pl/pl_term)). +:- use_module(library(pl_term)). :- use_module(library(print_ext)). :- use_module(library(xpath)). :- use_module(library(xpath/xpath_table)). diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl index 5d220d9..7bfc290 100644 --- a/data/gv_color_scrape.pl +++ b/data/gv_color_scrape.pl @@ -15,7 +15,7 @@ :- use_module(library(http/http_download)). :- use_module(library(iostream)). :- use_module(library(lists)). -:- use_module(library(pl/pl_term)). +:- use_module(library(pl_term)). :- use_module(library(print_ext)). :- use_module(library(xpath)). :- use_module(library(xpath/xpath_table)). diff --git a/prolog/gv/gv_color.pl b/prolog/gv/gv_color.pl index a63d9c4..ac319dc 100644 --- a/prolog/gv/gv_color.pl +++ b/prolog/gv/gv_color.pl @@ -34,12 +34,12 @@ color(rgb(Red,Green,Blue)) -- !, \"#\", - '#'(3, hex_color, [Red,Green,Blue]). + #(3, hex_color, [Red,Green,Blue]). color(rgbs(Red,Green,Blue,Alpha)) -- !, color(rgb(Red,Green,Blue)), hex_color(Alpha). color(hsv(Hue,Saturation,Value)) -- !, - '#'(3, hsv_color, [Hue,Saturation,Value]). + #(3, hsv_color, [Hue,Saturation,Value]). color(Name) -- {gv_color(_, Name)}, atom(Name). ``` 164: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ 05a5fd2 å’Œå˜åŠ¨å fd6c59b  [back to content](#compare) ``` diff diff --git a/prolog/fca/fca_viz.pl b/prolog/fca/fca_viz.pl index 1392db9..083dbb2 100644 --- a/prolog/fca/fca_viz.pl +++ b/prolog/fca/fca_viz.pl @@ -15,7 +15,6 @@ */ :- use_module(library(aggregate)). -:- use_module(library(dcg/dcg_collection)). :- use_module(library(dcg/dcg_ext)). :- use_module(library(dcg/dcg_pl)). :- use_module(library(fca/fca)). ``` 165: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ fd6c59b å’Œå˜åŠ¨å 121e68f  [back to content](#compare) ``` diff diff --git a/data/gv_attrs_scrape.pl b/data/gv_attrs_scrape.pl index 8730e13..bcc7654 100644 --- a/data/gv_attrs_scrape.pl +++ b/data/gv_attrs_scrape.pl @@ -1,7 +1,7 @@ :- module( gv_attrs_scrape, [ - gv_attrs_scrape/1 % +File:atom + gv_attrs_scrape/1 % +File ] ). @@ -11,45 +11,41 @@ Writes compound terms of the following form to file: ```prolog gv_attr( - ?Name:atom, + ?Name, ?UsedBy:list(oneof([cluster,edge,graph,node,subgraph])), ?Types:list(atom), ?Default, ?Minimum, - ?Notes:atom + ?Notes ) is nondet. ``` @author Wouter Beek -@version 2015/10 +@version 2015/10, 2016/07 */ :- use_module(library(apply)). :- use_module(library(dcg/dcg_ext)). +:- use_module(library(debug)). :- use_module(library(gv/gv_attr_type)). :- use_module(library(http/http_download)). -:- use_module(library(iostream)). :- use_module(library(lists)). +:- use_module(library(os/io)). :- use_module(library(pl_term)). :- use_module(library(print_ext)). :- use_module(library(xpath)). :- use_module(library(xpath/xpath_table)). +:- use_module(library(yall)). -%! gv_attrs_scrape(+File:atom) is det. +%! gv_attrs_scrape(+File) is det. gv_attrs_scrape(File):- - setup_call_cleanup( - open_any(File, write, Write, Close, []), - verbose( - gv_attrs_download(Write), - \"Updating the GraphViz attributes table.\" - ), - close_any(Close) - ). + debug(gv, \"Updating the GraphViz attributes table.\", []), + call_to_stream(File, [In,Meta,Meta]gv_attrs_download(In)). gv_attrs_download(Write):- @@ -78,7 +74,7 @@ gv_attrs_iri('http://www.graphviz.org/doc/info/attrs.html'). % HELPERS % -%! translate_default(+Default1:atom, -Default2:atom) is det. +%! translate_default(+Default1, -Default2) is det. % The empty string is represented by the empty atom. translate_default('\"\"', ''):- !. diff --git a/data/gv_color_scrape.pl b/data/gv_color_scrape.pl index 7bfc290..102a02a 100644 --- a/data/gv_color_scrape.pl +++ b/data/gv_color_scrape.pl @@ -1,40 +1,36 @@ :- module( gv_color_scrape, [ - gv_color_scrape/1 % +File:atom + gv_color_scrape/1 % +File ] ). /**  GraphViz: Scrape colors @author Wouter Beek -@version 2015/10 +@version 2015/10, 2016/07 */ :- use_module(library(apply)). +:- use_module(library(debug)). :- use_module(library(http/http_download)). -:- use_module(library(iostream)). :- use_module(library(lists)). +:- use_module(library(os/io)). :- use_module(library(pl_term)). :- use_module(library(print_ext)). :- use_module(library(xpath)). :- use_module(library(xpath/xpath_table)). +:- use_module(library(yall)). -%! gv_color_scrape(+File:atom) is det. +%! gv_color_scrape(+File) is det. gv_color_scrape(File):- - setup_call_cleanup( - open_any(File, write, Write, Close, []), - verbose( - gv_color_download(Write), - \"Updating the GraphViz color table.\" - ), - close_any(Close) - ). + debug(io, \"Updating the GraphViz color table.\", []), + call_to_stream(File, [In,Meta,Meta]gv_color_download(In)). gv_color_download(Write):- ``` æ€»å…±è¿›è¡Œäº† 166 æ¬¡æ¯”è¾ƒ 3. æ—¶é—´å˜åŒ–è¡¨ 1. 6ced089 Sun Jun 1 16:12:35 2014 +0200 2 years, 4 months ago3d8b517 Sun Jun 1 16:16:39 2014 +0200 2 years, 4 months ago\n2. ccd942c Sun Jun 1 18:20:43 2014 +0200 2 years, 4 months ago\n3. 0b3607d Wed Jun 4 08:57:28 2014 +0200 2 years, 4 months ago\n4. acf4ec3 Thu Jun 5 08:38:17 2014 +0200 2 years, 4 months ago\n5. c1ad93f Fri Jun 6 10:15:07 2014 +0200 2 years, 4 months ago\n6. c7c8226 Sat Jun 14 05:01:29 2014 +0200 2 years, 3 months ago\n7. 0cd29ea Sat Jun 14 15:55:52 2014 +0200 2 years, 3 months ago\n8. 13f7fbf Mon Jun 16 07:40:22 2014 +0200 2 years, 3 months ago\n9. 5520d75 Thu Jun 19 12:39:17 2014 +0200 2 years, 3 months ago\n10. 8656a39 Thu Jun 19 13:08:10 2014 +0200 2 years, 3 months ago\n11. 7421981 Tue Jul 8 13:55:06 2014 +0200 2 years, 2 months ago\n12. bfcb63b Tue Jul 22 20:14:34 2014 +0200 2 years, 2 months ago\n13. 84afd69 Sun Jul 27 21:09:43 2014 +0200 2 years, 2 months ago\n14. c2bfd3f Sun Jul 27 23:12:11 2014 +0200 2 years, 2 months ago\n15. fa364fc Mon Jul 28 10:20:16 2014 +0200 2 years, 2 months ago\n16. 3c900f4 Mon Jul 28 19:41:10 2014 +0200 2 years, 2 months ago\n17. 65cc1c3 Mon Jul 28 20:45:42 2014 +0200 2 years, 2 months ago\n18. 20e1f21 Mon Jul 28 21:27:58 2014 +0200 2 years, 2 months ago\n19. e2e9fc1 Tue Jul 29 06:03:54 2014 +0200 2 years, 2 months ago\n20. 4b72d15 Thu Jul 31 17:43:40 2014 +0200 2 years, 2 months ago\n21. 54248f7 Thu Jul 31 23:50:20 2014 +0200 2 years, 2 months ago\n22. 3b9a773 Sun Aug 3 13:57:00 2014 +0200 2 years, 2 months ago\n23. 1e9a910 Sun Aug 3 18:45:43 2014 +0200 2 years, 2 months ago\n24. 6dc1cf5 Sun Aug 3 21:37:53 2014 +0200 2 years, 2 months ago\n25. 76ea35d Wed Aug 6 12:57:55 2014 +0200 2 years, 2 months ago\n26. 2a2728b Wed Aug 6 12:59:11 2014 +0200 2 years, 2 months ago\n27. 7f9fc82 Wed Aug 6 13:03:10 2014 +0200 2 years, 2 months ago\n28. 5baddb5 Wed Aug 6 15:58:46 2014 +0200 2 years, 2 months ago\n29. 95bfe7f Fri Aug 15 19:38:14 2014 +0200 2 years, 1 month ago\n30. f1322fa Tue Aug 19 09:37:49 2014 +0200 2 years, 1 month ago\n31. 474bea8 Tue Aug 19 09:41:38 2014 +0200 2 years, 1 month ago\n32. 262cb2a Tue Aug 19 10:29:37 2014 +0200 2 years, 1 month ago\n33. e7e6033 Fri Aug 22 09:46:08 2014 +0200 2 years, 1 month ago\n34. e17bf44 Wed Aug 27 16:55:24 2014 +0200 2 years, 1 month ago\n35. 6596aa1 Fri Sep 12 12:28:26 2014 +0200 2 years ago\n36. 87e8982 Sat Sep 13 19:35:04 2014 +0200 2 years ago\n37. cb6aada Tue Sep 16 13:16:25 2014 +0200 2 years ago\n38. 7c8125b Fri Oct 17 01:53:51 2014 +0200 1 year, 11 months ago\n39. 6a38f95 Sun Oct 19 01:24:45 2014 +0200 1 year, 11 months ago\n40. ebb86cd Fri Oct 31 21:02:15 2014 +0100 1 year, 11 months ago\n41. 1549e44 Sun Nov 2 02:14:33 2014 +0100 1 year, 11 months ago\n42. 61ddca2 Mon Nov 3 16:24:02 2014 +0100 1 year, 11 months ago\n43. 26f07e7 Mon Nov 3 16:24:09 2014 +0100 1 year, 11 months ago\n44. f78b4f8 Tue Nov 4 09:03:10 2014 +0100 1 year, 11 months ago\n45. 3109362 Tue Nov 11 11:48:43 2014 +0100 1 year, 10 months ago\n46. df0ab09 Tue Nov 11 11:48:51 2014 +0100 1 year, 10 months ago\n47. 73e976b Tue Nov 11 12:03:09 2014 +0100 1 year, 10 months ago\n48. 090c25d Tue Nov 11 21:33:59 2014 +0100 1 year, 10 months ago\n49. daed8bf Thu Nov 13 16:58:28 2014 +0100 1 year, 10 months ago\n50. 528b9af Thu Nov 13 20:06:16 2014 +0100 1 year, 10 months ago\n51. e594ae6 Fri Nov 14 06:30:50 2014 +0100 1 year, 10 months ago\n52. bbefbf7 Tue Nov 18 21:35:37 2014 +0100 1 year, 10 months ago\n53. 0cc5421 Wed Nov 19 07:34:19 2014 +0100 1 year, 10 months ago\n54. dbc602d Wed Nov 19 07:36:24 2014 +0100 1 year, 10 months ago\n55. a2456df Wed Nov 19 07:50:35 2014 +0100 1 year, 10 months ago\n56. 20c6017 Thu Nov 20 13:22:27 2014 +0100 1 year, 10 months ago\n57. f694d77 Fri Nov 21 17:40:21 2014 +0100 1 year, 10 months ago\n58. af5d96d Tue Nov 25 18:19:59 2014 +0100 1 year, 10 months ago\n59. ab4b616 Tue Nov 25 18:30:40 2014 +0100 1 year, 10 months ago\n60. 74bd19d Tue Nov 25 19:26:26 2014 +0100 1 year, 10 months ago\n61. 8ffff6f Tue Nov 25 19:54:56 2014 +0100 1 year, 10 months ago\n62. ac3423a Tue Nov 25 19:55:05 2014 +0100 1 year, 10 months ago\n63. 57932e4 Tue Nov 25 19:55:29 2014 +0100 1 year, 10 months ago\n64. 315b16e Wed Nov 26 10:37:08 2014 +0100 1 year, 10 months ago\n65. 898b5d2 Thu Nov 27 19:38:08 2014 +0100 1 year, 10 months ago\n66. 4279a49 Fri Nov 28 08:09:47 2014 +0100 1 year, 10 months ago\n67. c173073 Sat Nov 29 09:16:14 2014 +0100 1 year, 10 months ago\n68. 107c515 Sat Nov 29 14:46:11 2014 +0100 1 year, 10 months ago\n69. 8f574bb Tue Dec 2 21:15:18 2014 +0100 1 year, 10 months ago\n70. d7088dd Thu Dec 11 09:40:51 2014 +0100 1 year, 9 months ago\n71. 94ed05d Sun Dec 14 17:06:03 2014 +0100 1 year, 9 months ago\n72. f481060 Tue Dec 16 13:41:32 2014 +0100 1 year, 9 months ago\n73. ce492ef Tue Dec 16 19:44:03 2014 +0100 1 year, 9 months ago\n74. ddef555 Wed Dec 17 12:02:35 2014 +0100 1 year, 9 months ago\n75. af27fdd Thu Dec 18 18:21:38 2014 +0100 1 year, 9 months ago\n76. f390238 Fri Jan 23 12:55:56 2015 +0100 1 year, 8 months ago\n77. c5f7d82 Fri Jan 23 13:27:31 2015 +0100 1 year, 8 months ago\n78. acf6467 Sun Jan 25 16:18:18 2015 +0100 1 year, 8 months ago\n79. 6656a2d Sat Jan 31 15:45:06 2015 +0100 1 year, 8 months ago\n80. 256c9ce Thu Feb 26 13:08:27 2015 +0100 1 year, 7 months ago\n81. bf4ebea Thu Feb 26 13:13:50 2015 +0100 1 year, 7 months ago\n82. 70aec99 Sat Mar 7 08:53:44 2015 +0100 1 year, 7 months ago\n83. e06e6ba Sat Mar 7 08:54:13 2015 +0100 1 year, 7 months ago\n84. 0fd12ca Sat Mar 7 08:54:32 2015 +0100 1 year, 7 months ago\n85. 67c4157 Sat Mar 7 08:59:37 2015 +0100 1 year, 7 months ago\n86. b972e2b Sun Mar 8 11:20:27 2015 +0100 1 year, 6 months ago\n87. 8bbc84c Sat Mar 21 08:41:10 2015 +0100 1 year, 6 months ago\n88. 033fa14 Wed Mar 25 07:15:07 2015 +0100 1 year, 6 months ago\n89. fdb5a9e Wed Apr 1 12:20:17 2015 +0200 1 year, 6 months ago\n90. 6ec582e Thu Apr 2 01:08:43 2015 +0200 1 year, 6 months ago\n91. 68b53b8 Tue Apr 7 11:12:17 2015 +0200 1 year, 6 months ago\n92. 46e8f3c Sat May 9 19:05:41 2015 +0200 1 year, 4 months ago\n93. 3162d88 Sun May 10 13:39:33 2015 +0200 1 year, 4 months ago\n94. 714b2e0 Wed May 27 14:23:39 2015 +0200 1 year, 4 months ago\n95. af7a387 Wed Jun 3 16:54:25 2015 +0200 1 year, 4 months ago\n96. 7b434e3 Wed Jun 10 10:08:40 2015 +0200 1 year, 3 months ago\n97. dcbcb4d Thu Jul 16 16:17:22 2015 +0200 1 year, 2 months ago\n98. 50a3dbc Fri Jul 17 00:31:37 2015 +0200 1 year, 2 months ago\n99. a97e8e1 Fri Jul 17 16:56:02 2015 +0200 1 year, 2 months ago\n100. 9513a9b Sat Jul 18 23:46:30 2015 +0200 1 year, 2 months ago\n101. 7163f60 Sat Jul 18 23:55:52 2015 +0200 1 year, 2 months ago\n102. b2f4aef Sat Jul 18 23:56:17 2015 +0200 1 year, 2 months ago\n103. ba30c25 Sun Jul 19 00:07:47 2015 +0200 1 year, 2 months ago\n104. 0eea41b Sun Jul 19 00:16:37 2015 +0200 1 year, 2 months ago\n105. c1691bd Mon Jul 20 17:00:42 2015 +0200 1 year, 2 months ago\n106. 3de9fc2 Mon Jul 20 18:25:07 2015 +0200 1 year, 2 months ago\n107. cb34d89 Mon Jul 20 22:42:07 2015 +0200 1 year, 2 months ago\n108. 7f0e20f Mon Jul 20 22:59:24 2015 +0200 1 year, 2 months ago\n109. c16a7a7 Mon Jul 20 23:04:42 2015 +0200 1 year, 2 months ago\n110. 8bbb08c Mon Jul 20 23:17:33 2015 +0200 1 year, 2 months ago\n111. 34c8b1a Mon Aug 3 15:44:26 2015 +0200 1 year, 2 months ago\n112. d883d06 Mon Aug 3 16:16:42 2015 +0200 1 year, 2 months ago\n113. 66ac0a0 Mon Aug 3 16:33:28 2015 +0200 1 year, 2 months ago\n114. ab5a102 Mon Aug 3 16:40:48 2015 +0200 1 year, 2 months ago\n115. 65f43b8 Mon Aug 3 23:15:08 2015 +0200 1 year, 2 months ago\n116. c6de3d1 Tue Aug 4 22:58:51 2015 +0200 1 year, 2 months ago\n117. cab2231 Tue Aug 4 22:59:42 2015 +0200 1 year, 2 months ago\n118. 008c5e6 Thu Aug 6 10:21:06 2015 +0200 1 year, 2 months ago\n119. dba5c72 Thu Aug 6 10:22:03 2015 +0200 1 year, 2 months ago\n120. eff64ee Thu Aug 6 10:22:14 2015 +0200 1 year, 2 months ago\n121. 89eb423 Mon Aug 17 16:44:01 2015 +0200 1 year, 1 month ago\n122. 2346997 Tue Aug 18 20:51:29 2015 +0200 1 year, 1 month ago\n123. d22d50e Tue Sep 8 11:41:49 2015 +0200 1 year ago\n124. e64cc35 Wed Sep 23 21:43:10 2015 +0200 12 months ago\n125. 763a529 Tue Oct 13 23:03:01 2015 +0200 11 months ago\n126. d962f81 Tue Oct 13 23:03:13 2015 +0200 11 months ago\n127. 63a5cd7 Tue Oct 13 23:03:37 2015 +0200 11 months ago\n128. ce95c3c Sat Oct 17 00:38:49 2015 +0200 11 months ago\n129. 44cd5a6 Fri Oct 23 16:09:04 2015 +0200 11 months ago\n130. c0c5e18 Fri Oct 30 17:02:09 2015 +0100 11 months ago\n131. 603344f Fri Oct 30 21:35:33 2015 +0100 11 months ago\n132. 2679253 Wed Nov 4 20:52:30 2015 +0100 11 months ago\n133. a5e20f8 Wed Nov 4 21:59:20 2015 +0100 11 months ago\n134. bc3c502 Wed Nov 4 22:19:15 2015 +0100 11 months ago\n135. 7ec98aa Wed Nov 4 23:36:40 2015 +0100 11 months ago\n136. 984d3b9 Thu Nov 5 08:27:05 2015 +0100 11 months ago\n137. 4401e20 Thu Nov 5 11:01:08 2015 +0100 11 months ago\n138. 2247466 Thu Nov 5 18:03:51 2015 +0100 11 months ago\n139. f4a9322 Sun Nov 15 23:56:27 2015 +0100 10 months ago\n140. 0d2712a Sun Nov 22 09:56:29 2015 +0100 10 months ago\n141. 3518985 Sun Dec 6 12:45:05 2015 +0100 10 months ago\n142. 322ca62 Fri Dec 11 10:48:06 2015 +0100 10 months ago\n143. c4bf9ea Fri Dec 11 23:00:58 2015 +0100 9 months ago\n144. 2a6dafd Fri Dec 11 23:02:28 2015 +0100 9 months ago\n145. 145615e Sat Dec 12 13:28:11 2015 +0100 9 months ago\n146. f16acca Sun Dec 13 00:31:18 2015 +0100 9 months ago\n147. 4e2d9f1 Sun Dec 13 11:53:34 2015 +0100 9 months ago\n148. 6359c9c Mon Dec 21 00:18:29 2015 +0100 9 months ago\n149. 00537d0 Mon Jan 4 18:45:14 2016 +0100 9 months ago\n150. acadc39 Mon Jan 4 19:04:12 2016 +0100 9 months ago\n151. 51359c6 Tue Jan 5 00:14:06 2016 +0100 9 months ago\n152. 73047b3 Fri Feb 5 10:25:43 2016 +0100 8 months ago\n153. e4c4586 Fri Feb 12 00:46:53 2016 +0100 7 months ago\n154. 7b991bb Thu Feb 25 19:26:04 2016 +0000 7 months ago\n155. fa1518f Tue Mar 1 21:13:23 2016 +0100 7 months ago\n156. 8593ed6 Wed Mar 2 21:05:20 2016 +0000 7 months ago\n157. cc53b1e Wed Mar 2 21:07:13 2016 +0000 7 months ago\n158. 202a241 Sat Mar 5 21:45:52 2016 +0100 7 months ago\n159. 858b5fb Sun Mar 20 09:13:59 2016 +0100 6 months ago\n160. 260b62d Sun Mar 20 10:38:39 2016 +0100 6 months ago\n161. a6886ca Sat Apr 2 10:22:32 2016 +0200 6 months ago\n162. 41914a2 Tue May 3 20:54:24 2016 +0200 5 months ago\n163. 05a5fd2 Tue Jun 21 08:36:10 2016 +0200 3 months ago\n164. fd6c59b Wed Jul 13 00:04:57 2016 +0200 2 months ago\n165. 121e68f Fri Jul 22 20:39:31 2016 +0200 9 weeks ago\n4. åˆ—å‡ºç®€è¦ä¿¡æ¯ 13 files changed, 1618 insertions(+) load_project.pl | 102 ++++++++++ load.pl | 12 ++ index.pl | 2 + gv_numeral.pl | 71 +++++++ gv_html.pl | 60 ++++++ gv_file.pl | 250 +++++++++++++++++++++++ gv_dot.pl | 496 ++++++++++++++++++++++++++++++++++++++++++++++ gv_color.pl | 96 +++++++++ gv_attrs.pl | 109 ++++++++++ gv_attr_type.pl | 415 ++++++++++++++++++++++++++++++++++++++ Prolog-Library-Collection | 1 + .gitmodules | 3 + .gitignore | 1 + Initial commit.  1. commit 6ced089ad776b55034adbd4a806db296bcb1229c\n3 files changed, 5 insertions(+), 1 deletion(-) plHtml | 1 + Prolog-Library-Collection | 2 +- .gitmodules | 3 +++ Upped PLC,plHtml.  2. commit 3d8b517ba04a977e793d64d240cc8169fec42606\n2 files changed, 2 insertions(+), 2 deletions(-) plHtml | 2 +- Prolog-Library-Collection | 2 +- Upped PLC,plHtml  3. commit ccd942cd22b0bacee488b08a1756227759fa125d\n3 files changed, 3 insertions(+), 3 deletions(-) gv_color.pl | 2 +- gv_attrs.pl | 2 +- gv_attr_type.pl | 2 +- * [GV_ATTRS,GV_COLOR,DEB] Summarize messages for downloading HTML. * [GV_ATTR_TYPE,FIX] Wrong module name.  4. commit 0b3607d3305882967ec58a223d0dffb6a56d1b75\n2 files changed, 142 insertions(+), 16 deletions(-) gv_color.pl | 61 ++++++++++++++++++++++++++++++++++---- gv_attrs.pl | 97 ++++++++++++++++++++++++++++++++++++++++++++++++++++++------- * [GV_ATTRS,GV_COLOR,NEW] Added persistency, so GraphViz settings are (re)download only when the locally stored data dump is not fresh anymore.  5. commit acf4ec31ef12d0de84f0496e621a90dcec5ae55c\n2 files changed, 2 insertions(+), 2 deletions(-) gv_color.pl | 2 +- gv_attrs.pl | 2 +- Freshness lifetime from 1H to 100D :-P  6. commit c1ad93f719fe68580e65e748e8c45a43ad1649a9\n2 files changed, 2 insertions(+), 2 deletions(-) plHtml | 2 +- Prolog-Library-Collection | 2 +- Upped submodules  7. commit c7c8226840bb23fa5bb0ae2e4f8371364d3f49fa\n2 files changed, 29 insertions(+), 11 deletions(-) load_project.pl | 34 ++++++++++++++++++++++++++-------- load.pl | 6 +++--- * [DEP] Alterations to startup procedure.  8. commit 0cd29ea088b348bcb5c8162352c4ead1b3340568\n2 files changed, 2 insertions(+), 2 deletions(-) plHtml | 2 +- Prolog-Library-Collection | 2 +- Upped submodules  9. commit 13f7fbf9548fb66541f600b9b728bde73fb9830e\n6 files changed, 169 insertions(+), 45 deletions(-) gv_tree.pl | 39 ++++++++++++++++++++ gv_gif.pl | 109 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++ gv_file.pl | 40 +++------------------ gv_color.pl | 10 ++++-- gv_attrs.pl | 2 +- gv_attr_type.pl | 14 ++++---- * [GV_GIF,NEW] New module supporting the construction of GIF representations. * [GV_TREE,SC] Separate module for GV export of trees. * [GV_COLOR,FIX] Add support for GV color names. * [GV_ATTR_TYPE,NEW] Added string//1. * [GV_ATTRS,FIX] Parsing can be det here.  10. commit 5520d7540db4ab0936ef3f65ccc36f2305235bf0\n1 file changed, 1 insertion(+), 1 deletion(-) gv_attr_type.pl | 2 +- * [GV_ATTR_TYPE,DOC] Fixed typo.  11. commit 8656a39b30e28c3d00365c88a8e7ab1620bccce5\n2 files changed, 78 insertions(+), 83 deletions(-) gv_tree.pl | 16 ++++--- gv_file.pl | 145 +++++++++++++++++++++++++++++-------------------------------- * [GV_FILE,SC] Added predicate options declarations. * [GV_FILE,EXT] Add file type support for exporting to plain DOT. * [GV_FILE,SC] Move options argument to the last position.  12. commit 74219816f9f78f463cab91c4caba175ba66d4ff8\n1 file changed, 6 insertions(+), 6 deletions(-) gv_file.pl | 12 ++++++------ * [GV_FILE,SC] Renamed predicate.  13. commit bfcb63b1206edd43cd6bb8d05d2884e2e49a463a\n1 file changed, 77 insertions(+), 68 deletions(-) gv_file.pl | 145 ++++++++++++++++++++++++++++++++----------------------------- * [GV_FILE,FIX] Fix and cleanup for compiling GraphViz files.  14. commit 84afd69f990121eb49b2a4de4562ef080b846aca\n1 file changed, 54 insertions(+), 43 deletions(-) gv_gif.pl | 97 +++++++++++++++++++++++++++++++++++---------------------------- * [GV_GIF,SC] Thorough cleanup of this module. We intend to extend its functionality with various optional predicates for assigning vertex, edges, and graph properties.  15. commit c2bfd3fc20c95592d66362ac67aa70fabeb078af\n2 files changed, 150 insertions(+), 39 deletions(-) gv_gif.pl | 145 ++++++++++++++++++++++++++++++++++++++++++++++++++++++-------- gv_dot.pl | 44 +++++++++---------- * [GV_GIF,EXT] Added several options for setting vertex, edges, and graph properties.  16. commit fa364fcd664277967e3fda7cb9db94bf5fc01fed\n1 file changed, 5 insertions(+), 19 deletions(-) gv_gif.pl | 24 +++++------------------- minor  17. commit 3c900f481412a5425124ee4e9b345b2d0fd51f50\n1 file changed, 4 insertions(+) gv_gif.pl | 4 ++++ * [GV_GIF,FIX] Added missing predication options declarations.  18. commit 65cc1c3c03f790ca21e3b23424f467e258b9080a\n2 files changed, 16 insertions(+), 23 deletions(-) gv_gif.pl | 18 +++++++++--------- gv_file.pl | 21 +++++++-------------- Various small fixes.  19. commit 20e1f2146881894d53c471f40ba74bf7fb99a21d\n1 file changed, 2 insertions(+), 5 deletions(-) gv_file.pl | 7 ++----- * [GV_FILE,FIX] When not given an output file, create one based on the input file.  20. commit e2e9fc1e79108306bb284a2b7adc5760dfeb2087\n2 files changed, 1 insertion(+), 5 deletions(-) gv_gif.pl | 2 +- gv_file.pl | 4 ---- * [SC] Minor.  21. commit 4b72d15e5999528c55d08ce04bd65622f328ec67\n1 file changed, 1 insertion(+), 1 deletion(-) gv_gif.pl | 2 +- * [SC] Sync to PLC.  22. commit 54248f7423f80e8d756ce659667e218fba14b22c\n1 file changed, 1 insertion(+), 1 deletion(-) gv_gif.pl | 2 +- Sync to PLC.  23. commit 3b9a7736d901f1382bbe83b9cb2304c6e6fc698a\n1 file changed, 2 insertions(+), 2 deletions(-) gv_gif.pl | 4 ++-- Sync to PLC.  24. commit 1e9a91074ca1d64a6b07bb7197f41c88146c3aca\n1 file changed, 3 insertions(+), 3 deletions(-) gv_gif.pl | 6 +++--- Sync to PLC.  25. commit 6dc1cf5ff51ce47e0917042dd8ba9c88750cc8fa\n1 file changed, 109 deletions(-) gv_gif.pl | 109 -------------------------------------------------------------- Moved GV_GIF to plGraph.  26. commit 76ea35d03b83f0221658bb29491c90cf137fd377\nmerge Merge: 76ea35d 6dc1cf5  27. commit 2a2728b1d1699995d677889a6d958f1c4da87403\n2 files changed, 2 insertions(+), 223 deletions(-) gv_tree.pl | 4 +- gv_gif.pl | 221 ------------------------------------------------------------- Removed gv_gif.  28. commit 7f9fc826a469a17a3cb10db847e4e4836aad35b2\n2 files changed, 16 insertions(+), 17 deletions(-) gv_file.pl | 3 +-- gv_dot.pl | 30 +++++++++++++++--------------- minor  29. commit 5baddb53811463c2e0b21abf2fd8ff8a85f0206c\n2 files changed, 22 insertions(+), 10 deletions(-) gv_file.pl | 12 +++++------- gv_dot.pl | 20 +++++++++++++++++--- * [GV_FILE,FIX] Sometimes an output file need not be specified and is created on the fly. * [GV_DOT,FIX] In DOT files, no newline has to occur after global attribute assertions that are not followed by specific content (i.e., nodes and edges).  30. commit 95bfe7fb78f8b4c24337d13dde25fe6df8197469\n2 files changed, 2 insertions(+), 2 deletions(-) plHtml | 2 +- Prolog-Library-Collection | 2 +- Upped submodules.  31. commit f1322fad81caf9df086379e668520294ba9d7935\n1 file changed, 2 deletions(-) index.pl | 2 -- Removed index.  32. commit 474bea8afd0c1a1837b296832e5ffa988df4551b\n1 file changed, 43 deletions(-) gv_tree.pl | 43 ------------------------------------------- * [SC] Relocated GV_TREE to plTree.  33. commit 262cb2aa4ed4ed2f68100c3727f041a4cf82f8d0\n6 files changed, 59 insertions(+), 51 deletions(-) gv_numeral.pl | 7 ++++--- gv_html.pl | 2 +- gv_dot.pl | 61 ++++++++++++++++++++++++++++++--------------------------- gv_color.pl | 21 +++++++++++--------- gv_attrs.pl | 5 +++-- gv_attr_type.pl | 14 ++++++------- * [SC] Sync to plDcg,DCG_ABNF.  34. commit e7e6033f6d88356193053d724b37550d441f4642\nMerge branch 'master' of https://github.com/wouterbeek/plGraphViz Merge: 2a2728b e7e6033  35. commit e17bf44417fb2060c7648d47c24af161a3849199\n1 file changed, 1 deletion(-) gv_file.pl | 1 - * [SC] Module input cleanup.  36. commit 6596aa127934e47c89e39c7ad091be6da5fbefd0\n2 files changed, 2 insertions(+), 2 deletions(-) plHtml | 2 +- Prolog-Library-Collection | 2 +- Upped submodules.  37. commit 87e8982ea1c86d70490d7eb713f01f024118035e\n2 files changed, 2 insertions(+), 2 deletions(-) gv_dot.pl | 2 +- gv_attrs.pl | 2 +- Sync to plDcg.  38. commit cb6aada737c0d58746811205cc753a53b7dc2301\n2 files changed, 9 insertions(+), 13 deletions(-) gv_file.pl | 18 ++++++++---------- gv_color.pl | 4 +--- WINDOWS-SPECIFIC HACK TO RUN DOT!  39. commit 7c8125b1c80c092487f760dabd464b4a3a366414\n1 file changed, 3 insertions(+), 2 deletions(-) gv_file.pl | 5 +++-- FIXED: Reverted Windows-specific hack.  40. commit 6a38f954ddaff61cbda0e191ceb514a84155ab3a\n10 files changed, 98 insertions(+), 17 deletions(-) run.pl | 9 ++++++++ plHtml | 2 +- plDcg | 1 + load_project.pl | 22 ++++++++++--------- load.pl | 11 +++++----- debug_project.pl | 55 +++++++++++++++++++++++++++++++++++++++++++++++ debug.pl | 7 ++++++ Prolog-Library-Collection | 2 +- .gitmodules | 3 +++ .gitignore | 3 +++ DEPLOYMENT: Updated to modern startup architecture.  41. commit ebb86cdfd67c1bc273905eb28be11d152520110e\n2 files changed, 255 insertions(+), 91 deletions(-) gv_html.pl | 249 ++++++++++++++++++++++++++++++++++++++++++++++++++----------- gv_dot.pl | 97 ++++++++++++------------ ADDED: Rewrote the HTML-like labels grammar for GraphViz.  42. commit 1549e4403d3f7e1b9896964adcfe0d0ec41dc72f\n4 files changed, 16 insertions(+), 4 deletions(-) plHtml | 2 +- plDcg | 2 +- debug_project.pl | 14 +++++++++++++- Prolog-Library-Collection | 2 +- Upped submodules.  43. commit 61ddca2f413b7a5de86faf85cb8e3c2e189c2b42\nMerge branch 'master' of https://github.com/wouterbeek/plGraphViz Merge: 61ddca2 1549e44  44. commit 26f07e7108914550f16186bbba55a4260eae44ff\n4 files changed, 49 insertions(+), 31 deletions(-) plDcg | 2 +- gv_attrs.pl | 40 +++++++++++++++++++++++++++++----------- gv_attr_type.pl | 36 ++++++++++++++++++------------------ Prolog-Library-Collection | 2 +- DOCUMENTATION: Added for GraphViz attributes processing.  45. commit f78b4f859295fd561bef8b168034b563e6203300\n1 file changed, 1 insertion(+), 1 deletion(-) gv_file.pl | 2 +- Sync to PLC.  46. commit 310936292c5fbbce7260ebe51380f829990dcc97\nMerge branch 'temp' Merge: f78b4f8 3109362  47. commit df0ab09e882cc7b9ddc1d3fb12ef92612b9826ab\n11 files changed, 25 insertions(+), 8 deletions(-) plUri | 1 + plSvg | 1 + plHttp | 1 + plHtml | 2 +- plDcg | 2 +- load.pl | 9 ++++++--- gv_dot.pl | 2 +- gv_color.pl | 3 ++- gv_attrs.pl | 1 + Prolog-Library-Collection | 2 +- .gitmodules | 9 +++++++++ DEPLOYMENT: Added plHttp, plSvg, plUri.  48. commit 73e976b27beeda081abfa60931b7d85bea79ab96\n5 files changed, 5 insertions(+), 5 deletions(-) plUri | 2 +- plHttp | 2 +- plHtml | 2 +- plDcg | 2 +- Prolog-Library-Collection | 2 +- Upped submodules.  49. commit 090c25dfb4bdd81e95818c65bc8a3b39bc5566d8\n8 files changed, 7 insertions(+), 16 deletions(-) plUri | 1 - plSvg | 1 - plHttp | 1 - plHtml | 2 +- plDcg | 2 +- load_project.pl | 5 ++++- Prolog-Library-Collection | 2 +- .gitmodules | 9 --------- DEPLOYMENT: Removed several submodules.  50. commit daed8bfe18cb686c77eb0c0fd2a1ae7443992204\n13 files changed, 125 insertions(+), 124 deletions(-) plUri | 1 + plHtml | 2 +- plDcg | 2 +- load.pl | 2 - gv_numeral.pl | 100 +++++++++++++++++++++++++--------------------- gv_html.pl | 75 +++++++++++++++++----------------- gv_file.pl | 18 --------- gv_dot.pl | 39 ++++++++++-------- gv_color.pl | 1 + gv_attrs.pl | 3 +- gv_attr_type.pl | 1 + Prolog-Library-Collection | 2 +- .gitmodules | 3 ++ 6. DEPLOYMENT: Added plUri. 5. Sync to submodules. 4. CLEANUP: Spacing in GraphViz HTML-like label syntax. 3. CLEANUP: Markdown code block markup. 2. CLEANUP: Rewrote part of the GraphViz numeral grammar to be easier to process. 1. DOC: Added documentation for GraphViz numeral grammar.  51. commit 528b9af184c39b53f8f5c6bc383a993f1400a71e\n1 file changed, 4 insertions(+), 4 deletions(-) gv_color.pl | 8 ++++---- minor  52. commit e594ae6c5b4c633db0fef804161071337af3a78d\n1 file changed, 1 insertion(+), 1 deletion(-) gv_color.pl | 2 +- minor  53. commit bbefbf7ce3c322755ce29a18c4cf1c0dd15ef57e\n5 files changed, 98 insertions(+), 20 deletions(-) load_project.pl | 25 ++++++++++++--------- gv_color.pl | 10 --------- debug_project.pl | 66 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++ debug.pl | 9 ++++++++ README.md | 8 +++++++ Updated load procedure.  54. commit 0cc5421aa59c8eac6e8fed89327f2b27bdbf43d2\ndebug_project.pl debug.pl Conflicts: Merge branch 'master' of https://github.com/wouterbeek/plGraphViz Merge: 0cc5421 bbefbf7  55. commit dbc602d82db54d2b604b86dde60b835b81021d0b\n2 files changed, 3 insertions(+), 4 deletions(-) plHtml | 2 +- gv_color.pl | 5 ++--- CLEANUP: GraphViz color persistent store now reuses PLC support module.  56. commit a2456df77c592e7303311540f9578c5c401a9cda\n1 file changed, 1 insertion(+), 1 deletion(-) gv_numeral.pl | 2 +- FIXED: Do not write the plus sign for positive integer GraphViz numberals.  57. commit 20c60172730ce564528fad1ae6a43b6fdde21dac\n3 files changed, 3 insertions(+), 3 deletions(-) plUri | 2 +- plDcg | 2 +- Prolog-Library-Collection | 2 +- Upped submodules.  58. commit f694d776f9e329832a492602cf5161019d293f89\n12 files changed, 545 insertions(+), 263 deletions(-) plUri | 2 +- plHtml | 2 +- plDcg | 2 +- gv_html.pl | 221 ++++++++++++++++++++++++++++------------------ gv_file.pl | 202 +++++++++++++++++++++++++----------------- gv_dot.pl | 129 +++++++++++++++------------ gv_attrs.pl | 63 +++++++------ gv_attr_type.pl | 76 +++++++++++++--- example2.png | Bin 0 -\u0026gt; 8121 bytes example1.png | Bin 0 -\u0026gt; 4166 bytes README.md | 109 ++++++++++++++++++++++- Prolog-Library-Collection | 2 +- 6. FIXED: Various fixes while using HTML-like labels for the first time. 5. CLEANUP: Simplified method and output options. 4. ENHANCED: Added support for many more method and output values. 3. CLEANUP: Simplified attribute value generation: write directly i.o. first typechecking. 2. FIXED: Quote escString. Not clear from GV grammar. 1. DOC: Added documentation on top-level use.  59. commit af5d96dfda6172b8a13f3030d810bd2709031111\n1 file changed, 38 insertions(+), 4 deletions(-) README.md | 42 ++++++++++++++++++++++++++++++++++++++---- DOC: Added documentation.  60. commit ab4b616bb9e2251a496c37afd0a7e56937b944b9\n2 files changed, 3 insertions(+), 3 deletions(-) gv_dot.pl | 4 ++-- gv_attr_type.pl | 2 +- FIXED: GraphViz strings surrounded must be enclosed by double quotes.  61. commit 74bd19d68c153b8ca75d5926b2a2131f7bb844d0\n1 file changed, 8 insertions(+) README.md | 8 ++++++++ DOC: Added installation.  62. commit 8ffff6f0c98e4207c773ad995563f6a8433e3f73\nMerge branch 'master' of https://github.com/wouterbeek/plGraphViz Merge: 8ffff6f 74bd19d  63. commit ac3423a3430ed91079209d895191cb911609cdc3\n1 file changed, 1 insertion(+), 1 deletion(-) Prolog-Library-Collection | 2 +- Upped submodules.  64. commit 57932e48a824da4670dbaf89d8f8a2e238954b50\n1 file changed, 1 insertion(+), 1 deletion(-) gv_file.pl | 2 +- rename  65. commit 315b16ed91a4138cbfe7c79aad89dad7e48f1870\n1 file changed, 4 deletions(-) gv_file.pl | 4 ---- CLEANUP: Removed redundant declaration and module import.  66. commit 898b5d2ccb3dc13754a1de853bd62e3dda1ef6e9\n1 file changed, 19 insertions(+), 11 deletions(-) gv_file.pl | 30 +++++++++++++++++++----------- CLEANUP: Renamed gif-\u0026gt;export_graph.  67. commit 4279a49aa9e92a73f702edd0c2b6c90131a50556\n2 files changed, 10 insertions(+), 10 deletions(-) gv_html.pl | 16 ++++++++-------- gv_dot.pl | 4 ++-- CEANUP: Use Markdown notation.  68. commit c173073758805b29105db834aa14c51fea65156c\n2 files changed, 2 insertions(+), 2 deletions(-) gv_color.pl | 2 +- gv_attrs.pl | 2 +- Syc to plHtml.  69. commit 107c515057dc9ef9d4b2fe7b6ed12923b7826eae\n1 file changed, 4 insertions(+), 4 deletions(-) gv_attrs.pl | 8 ++++---- minor  70. commit 8f574bb2cbf341b17734a8269a329276148221e7\n1 file changed, 2 insertions(+), 2 deletions(-) gv_dot.pl | 4 ++-- Sync to plDcg.  71. commit d7088dd180fdf3295f14e65c614f2e643235cdc2\n1 file changed, 2 insertions(+), 2 deletions(-) README.md | 4 ++-- DOC: Sync to self.  72. commit 94ed05d9e4a46ca4b111e0312a31b1423c84495e\n1 file changed, 1 insertion(+) gv_file.pl | 1 + deb  73. commit f48106006fc0ea042800de086191c56ea939d324\n3 files changed, 29 insertions(+), 53 deletions(-) gv_file.pl | 8 +++---- gv_dot.pl | 65 +++++++++++++++++---------------------------------------- gv_attr_type.pl | 9 ++++++-- 4. FIXED: Added PDF file type registration. 3. FIXED: Removed the requirement of a given GraphViz output file having a file extension that matches its media type. 2. FIXED: Double quoted string support for GraphViz was broken. 1. FIXED: Dobule quotes are now auto-escaped in GraphViz escStrings.  74. commit ce492efd1bb82bdbb7611d52ae3d1092b9cdcf8b\n2 files changed, 1 insertion(+), 3 deletions(-) gv_html.pl | 2 -- gv_attr_type.pl | 2 +- 2. FIXED: Use of HTML-like labels revealed typo. 1. FIXED: Removed ambiguity for linebreak specification in GraphViz HTML-like labels.  75. commit ddef555cdb626a0ab6afc9e3d727cb4149ba6ed0\n2 files changed, 2 insertions(+), 2 deletions(-) gv_dot.pl | 2 +- gv_color.pl | 2 +- minor  76. commit af27fdd8f2f08169cb445a48002894f088e4fa93\n2 files changed, 43 insertions(+), 41 deletions(-) gv_numeral.pl | 67 ++++++++++++++++++++++++++++++--------------------------- gv_attr_type.pl | 17 +++++++-------- ENHANCED: Rewrite of GraphViz numerals.  77. commit f390238d2ec4965ca62f09850307fdc438e43ffb\n1 file changed, 4 insertions(+), 1 deletion(-) gv_numeral.pl | 5 ++++- Sync to plDcg.  78. commit c5f7d822cbc6ba77814581c071fb8f74130979af\n3 files changed, 5 insertions(+), 2 deletions(-) gv_numeral.pl | 2 +- gv_color.pl | 3 ++- gv_attr_type.pl | 2 ++ FIXED: Missing module imports.  79. commit acf64671787994db76761c96da10a3eca42f0d65\n2 files changed, 4 insertions(+), 3 deletions(-) gv_numeral.pl | 2 ++ gv_attr_type.pl | 5 ++--- FIXED: Use float// i.o. detailed double implementation (scientific notation issue).  80. commit 6656a2d769a8e2e7ec1a38a4f58fb6be58bdf735\n4 files changed, 4 insertions(+), 4 deletions(-) plUri | 2 +- plHtml | 2 +- plDcg | 2 +- Prolog-Library-Collection | 2 +- Upped submodules.  81. commit 256c9cec27b53f609ad80ab8f66cb0d0cb6b6530\n11 files changed, 111 insertions(+), 73 deletions(-) plDcg | 1 - load.pl | 1 - gv_numeral.pl | 15 +++++++-------- gv_html.pl | 6 +++--- gv_file.pl | 24 ++++++++++++------------ gv_dot.pl | 18 +++++++++--------- gv_color.pl | 27 +++++++++++++++------------ gv_attrs.pl | 23 ++++++++++++----------- gv_attr_type.pl | 16 ++++++++-------- debug_project.pl | 50 +++++++++++++++++++++++++++++++++++++++++++++----- .gitmodules | 3 --- Sync to submodules.  82. commit bf4ebead2a5fb2bb5772632676e636c756b256b5\n6 files changed, 53 insertions(+), 18 deletions(-) plUri | 2 +- plHtml | 2 +- plDcg | 2 +- gv_attrs.pl | 13 ++++-------- debug_project.pl | 50 ++++++++++++++++++++++++++++++++++++++++++----- Prolog-Library-Collection | 2 +- merge  83. commit 70aec99207ccbb33e23b3af547346ef1a2923fc1\nmerge Merge: 70aec99 bf4ebea  84. commit e06e6ba9af125b82c1f19b4481e748559f847ba6\n2 files changed, 2 insertions(+), 2 deletions(-) plUri | 2 +- plHtml | 2 +- Upped submodules  85. commit 0fd12ca246d674d21d912881698711dde72bd0d3\n1 file changed, 12 insertions(+), 15 deletions(-) README.md | 27 ++++++++++++--------------- DOC: spacing  86. commit 67c415721c41e9e05cbdba40bb4735f3951f11bb\n2 files changed, 28 insertions(+), 16 deletions(-) gv_color.pl | 22 ++++++++++++++-------- gv_attrs.pl | 22 ++++++++++++++-------- ENHANCED: Print progress/problems of initializing GraphViz colors and attributes to the console.  87. commit b972e2b2e40c6f50b3055873bdec06836d687c91\n1 file changed, 10 insertions(+), 11 deletions(-) gv_file.pl | 21 ++++++++++----------- Sync to process update in PLC.  88. commit 8bbc84c721b287890d8fa305e5b700b5ec4fa00b\n7 files changed, 32 insertions(+), 40 deletions(-) run.pl | 2 ++ plUri | 2 +- plHtml | 2 +- gv_file.pl | 62 ++++++++++++++++++++--------------------------- README.md | 1 - Prolog-Library-Collection | 2 +- .gitignore | 1 + Sync to PLC.  89. commit 033fa1448bea11bd52bbf85e1296b8788b313ede\n2 files changed, 9 insertions(+), 3 deletions(-) gv_attrs.pl | 4 ++-- gv_attr_type.pl | 8 +++++++- Sync to PLC.  90. commit fdb5a9e7bd35c963bc12c9cf2da47310576c981a\nmerge Merge: 8bbc84c fdb5a9e  91. commit 6ec582e33df1feff0eca315974a4daf7555e3878\n2 files changed, 2 insertions(+), 2 deletions(-) gv_color.pl | 2 +- gv_attrs.pl | 2 +- Sync to plHtml.  92. commit 68b53b8f39e5500b7bf7f6527e358fcfe755e938\n2 files changed, 2 insertions(+), 2 deletions(-) gv_color.pl | 2 +- gv_attrs.pl | 2 +- Sync to plHtml.  93. commit 46e8f3ce8458bae27a39985b7e2d6ab01c1e70a7\n1 file changed, 2 insertions(+), 2 deletions(-) gv_file.pl | 4 ++-- DOC: Small fix to documentation.  94. commit 3162d883a592da6feb510bc183d89e03a88726d4\n4 files changed, 4 insertions(+), 2 deletions(-) gv_dot.pl | 1 + gv_color.pl | 2 +- gv_attrs.pl | 1 + gv_attr_type.pl | 2 +- FIXED: Module imports.  95. commit 714b2e0424dbe8f892e9f1bbf288a3e76236d4a3\n1 file changed, 1 insertion(+), 1 deletion(-) gv_attr_type.pl | 2 +- FIXED: Module import conflict.  96. commit af7a3871a7525e0c4c27905989ad6c12e1b3dcd9\n2 files changed, 4 insertions(+), 3 deletions(-) gv_numeral.pl | 5 +++-- gv_color.pl | 2 +- FIXED: Sync to PLC.  97. commit 7b434e315484e5160f9e0f9201bdb9643f47de08\n3 files changed, 272 insertions(+), 285 deletions(-) gv_graph.pl | 229 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ gv_file.pl | 127 ++++++++++----------------------- gv_dot.pl | 201 ++-------------------------------------------------- Started simplifying stuff.  98. commit dcbcb4d01410d71b4e1cdf8e2ab7a6ce5cff96ca\n8 files changed, 389 insertions(+), 137 deletions(-) gv_util.pl | 260 ++++++++++++++++++++++++++++++++++++++++++++++ gv_html.pl | 4 +- gv_file.pl | 9 +- gv_dot.pl | 102 +++++++++--------- gv_color.pl | 29 ++++-- gv_attrs.pl | 78 +++++++------- gv_attr_type.pl | 42 ++++---- Prolog-Library-Collection | 2 +- Many utils from PLC are needed...  99. commit 50a3dbc39532e583ace2d71cfed7eeb0db813c87\n17 files changed, 98 insertions(+), 630 deletions(-) run.pl | 11 -- plUri | 1 - plHtml | 1 - load_project.pl | 125 ---------------------- load.pl | 13 --- gv_util.pl | 260 ---------------------------------------------- gv_numeral.pl | 20 ++-- gv_html.pl | 17 ++- gv_graph.pl | 26 ++--- gv_file.pl | 2 + gv_dot.pl | 57 +++++----- gv_color.pl | 24 ++--- gv_attrs.pl | 13 ++- gv_attr_type.pl | 44 ++++---- debug_project.pl | 106 ------------------- debug.pl | 7 -- Prolog-Library-Collection | 1 - Sync to updated PLC.  100. commit a97e8e1fec071b7306a9aa6ad43749d08780d96f\n12 files changed, 272 insertions(+), 216 deletions(-) test/test.pl | 10 + test/debug.pl | 15 ++ gv_numeral.pl =\u0026gt; prolog/gv/gv_numeral.pl | 1 - gv_html.pl =\u0026gt; prolog/gv/gv_html.pl | 2 +- gv_dot.pl =\u0026gt; prolog/gv/gv_graph_comp.pl | 264 ++++++++++++++------------- gv_graph.pl =\u0026gt; prolog/gv/gv_graph.pl | 19 +- gv_file.pl =\u0026gt; prolog/gv/gv_file.pl | 7 +- gv_color.pl =\u0026gt; prolog/gv/gv_color.pl | 34 +--- gv_attrs.pl =\u0026gt; prolog/gv/gv_attrs.pl | 40 ++-- gv_attr_type.pl =\u0026gt; prolog/gv/gv_attr_type.pl | 66 +++---- pack.pl | 9 + LICENSE.txt | 21 +++ ADDED: Created full Prolog Pack.  101. commit 9513a9be8a25ceb2ce966b3d4ed4b63407c42716\n1 file changed, 9 insertions(+), 7 deletions(-) prolog/gv/gv_color.pl | 16 +++++++++------- FIXED: Non-determinism in downloading the GraphViz color table.  102. commit 7163f602709cfede798f72fd36980cbbe8816545\n1 file changed, 1 insertion(+), 1 deletion(-) pack.pl | 2 +- Pack version 0.0.2  103. commit b2f4aef718c0cd2f190a4bbea1855af89bae6cbe\n2 files changed, 3 insertions(+), 2 deletions(-) prolog/gv/gv_graph_comp.pl | 3 ++- pack.pl | 2 +- FIXED: Attributes represented as compound terms.  104. commit ba30c25127b0f70c041a4bf4c7c57a242591fdcf\n2 files changed, 13 insertions(+), 7 deletions(-) prolog/gv/gv_file.pl | 18 ++++++++++++------ pack.pl | 2 +- ENHANCED: Make up an output file name in case none is given.  105. commit 0eea41b6c6c2e70118b1921d5e531f6e2ed016ee\n5 files changed, 41 insertions(+), 6 deletions(-) prolog/gv/gv_html.pl | 2 +- prolog/gv/gv_dom.pl | 35 +++++++++++++++++++++++++++++++++++ prolog/gv/gv_color.pl | 4 ++-- prolog/gv/gv_attrs.pl | 4 ++-- pack.pl | 2 +- ADDED: gv_dom/3.  106. commit c1691bd808d6880f39fc486617c5faa1a3a68674\n4 files changed, 373 insertions(+), 11 deletions(-) test/test.pl | 19 +- prolog/gv/gv_attrs.pl | 3 +- prolog/graph/build_export_graph.pl | 360 +++++++++++++++++++++++++++++++++++++ pack.pl | 2 +- ADDED: build_export_graph/3.  107. commit 3de9fc2a336afab3994d30c3c4a2f98475ab9652\n3 files changed, 17 insertions(+), 5 deletions(-) prolog/gv/gv_color.pl | 10 ++++++++-- prolog/gv/gv_attrs.pl | 10 ++++++++-- pack.pl | 2 +- FIXED: No longer use persistency_ext which gave permission errors.  108. commit cb34d89fd0cce9b5a4fbf3bf6434f6771081c67a\n2 files changed, 4 insertions(+), 3 deletions(-) prolog/gv/gv_graph.pl | 5 +++-- pack.pl | 2 +- FIXED: Typo in GraphViz DOT generation.  109. commit 7f0e20fd402f669cb59621a07203f08866cbff04\n2 files changed, 19 insertions(+), 19 deletions(-) prolog/graph/build_export_graph.pl | 36 ++++++++++++++++++------------------ pack.pl | 2 +- FIXED: Name-value pairs to option compounds.  110. commit c16a7a7cd7bec0fa9f65e9835478c351d396677b\n3 files changed, 5 insertions(+), 5 deletions(-) prolog/gv/gv_graph_comp.pl | 2 +- prolog/gv/gv_graph.pl | 6 +++--- pack.pl | 2 +- FIXED: Added determinism to GraphViz DOT generation.  111. commit 8bbb08c76fac066a3fa22a840a3bd4bd64e7293c\n4 files changed, 13 insertions(+), 8 deletions(-) prolog/gv/gv_file.pl | 9 +++++++-- prolog/gv/gv_color.pl | 6 +++--- prolog/gv/gv_attrs.pl | 4 ++-- pack.pl | 2 +- Sync to PLC.  112. commit 34c8b1a9c74ba8cbf8f5985638b220ad573fe6ce\n2 files changed, 5 insertions(+), 2 deletions(-) prolog/graph/build_export_graph.pl | 5 ++++- pack.pl | 2 +- FIXED: Support for edge/2 besides edge/3 compound terms.  113. commit d883d0607e5ba30ce42e845fdc6d4459ea2fab2f\n2 files changed, 3 insertions(+), 2 deletions(-) prolog/graph/build_export_graph.pl | 3 ++- pack.pl | 2 +- FIXED: By default the label of a graph is the empty string.  114. commit 66ac0a091089347967dcc64ee8832f30acb91ce2\n2 files changed, 3 insertions(+), 3 deletions(-) prolog/gv/gv_attr_type.pl | 4 ++-- pack.pl | 2 +- FIXED: escaping of double quotes labels was broken.  115. commit ab5a1028be0707fea663d35fa1e76a9a62b78262\n3 files changed, 971 insertions(+), 1 deletion(-) gv_color.log | 802 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ gv_attrs.log | 169 +++++++++++++ .gitignore | 1 - DEPLOYMENT: Include default version of settings files since GraphViz Web site is often offline.  116. commit 65f43b8ebe93dd39c5a75f8506cc957ae817a8fe\n7 files changed, 984 insertions(+), 15 deletions(-) test/gv_attrs.log | 169 ++++++++++ prolog/gv/gv_graph_comp.pl | 14 +- prolog/gv/gv_color.pl | 4 +- prolog/gv/gv_color.log | 802 +++++++++++++++++++++++++++++++++++++++++++++ prolog/gv/gv_attrs.pl | 6 +- pack.pl | 2 +- .gitignore | 2 - merge  117. commit c6de3d1b6f875da1868a26b81855d96f9799196b\nmerge Merge: c6de3d1 65f43b8  118. commit cab2231f8ca7bc9ce02552cddcb74079ff3cb386\n1 file changed, 169 insertions(+) prolog/gv/gv_attrs.log | 169 +++++++++++++++++++++++++++++++++++++++++++++++++ ADDED: atts log.  119. commit 008c5e632ccdcf0f58199ba24a24b06f7a73a87c\n1 file changed, 1 insertion(+), 1 deletion(-) pack.pl | 2 +- 0.0.16  120. commit dba5c72fafb666266f6494de7d8d6542c2e12e75\n1 file changed, 1 insertion(+), 1 deletion(-) pack.pl | 2 +- 0.0.17  121. commit eff64ee3c829d1ab86f734d36b6a9ebd0915f9bc\n1 file changed, 15 deletions(-) test/debug.pl | 15 --------------- DEBUG: cleanup.  122. commit 89eb423af6cf856a936e8c0cdcaa7ba667f0c9c6\n4 files changed, 7 insertions(+), 9 deletions(-) test/test.pl | 2 -- prolog/gv/gv_graph_comp.pl | 4 ++-- prolog/gv/gv_graph.pl | 6 +++--- prolog/gv/gv_attr_type.pl | 4 ++-- Thanks to Markus Triska. CLEANUP: Use * i.o. '*' for predicate names.  123. commit 2346997feabccf63c0dde7abe7de810fbbf53f6b\n2 files changed, 8 insertions(+), 10 deletions(-) prolog/graph/build_export_graph.pl | 9 ++++++++- .gitmodules | 9 --------- ADDED: Wrapper build_export_graph/2.  124. commit d22d50e477d8b53eade745f23d64fc5c7177ac79\n1 file changed, 218 insertions(+) install | 218 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ ADDED: Install script.  125. commit e64cc3593e4a6d15a00d32b3dda690536d52c414\n3 files changed, 27 insertions(+), 31 deletions(-) prolog/gv/gv_file.pl | 48 ++++++++++++++++++++++-------------------------- prolog/gv/gv_color.pl | 6 +++--- prolog/gv/gv_attrs.pl | 4 ++-- CLEAN: various cleanups.  126. commit 763a529e2b01af1a5f8da6a89f19bc7d6d8119a2\nMerge branch 'master' of https://github.com/wouterbeek/plGraphViz Merge: 763a529 e64cc35  127. commit d962f818fa3094e1f3ccab245a94232147a5e7cf\n1 file changed, 218 deletions(-) install | 218 ---------------------------------------------------------------- CLEAN: no install  128. commit 63a5cd72e1751cb08e8a304e0eaefd6ba6454d82\n2 files changed, 17 insertions(+), 15 deletions(-) prolog/gv/gv_color.pl | 5 +++-- prolog/gv/gv_attrs.pl | 27 ++++++++++++++------------- Sync to PLC.  129. commit ce95c3c892470ce2fe09bb364d428059c99e6ca0\n2 files changed, 20 insertions(+), 15 deletions(-) prolog/gv/gv_graph_comp.pl | 28 +++++++++++++++------------- prolog/gv/gv_attr_type.pl | 7 +++++-- FIXED: Support for strings/atoms. DEBUG: Throw exceptions in several spots of the DOT grammar.  130. commit 44cd5a661f0811904e11770a6388dd1495540620\n1 file changed, 35 insertions(+), 30 deletions(-) prolog/graph/build_export_graph.pl | 65 ++++++++++++++++++++------------------ EHANCED: `build_export_graph/[2,3]' support S-represented ugraphs.  131. commit c0c5e1890ea65a0f67c37e4e9d4c2d29ccdf8111\n10 files changed, 1154 insertions(+), 2166 deletions(-) prolog/gv/gv_color.pl | 79 +---- prolog/gv/gv_color.log | 802 ------------------------------------------------ prolog/gv/gv_color.data | 802 ++++++++++++++++++++++++++++++++++++++++++++++++ prolog/gv/gv_attrs.pl | 148 +-------- prolog/gv/gv_attrs.log | 169 ---------- prolog/gv/gv_attrs.data | 169 ++++++++++ gv_color.log | 802 ------------------------------------------------ gv_attrs.log | 169 ---------- data/gv_color_scrape.pl | 56 ++++ data/gv_attrs_scrape.pl | 124 ++++++++ Library percistency is too unreliable to do this, as is the GV Web site. DEPLOYMENT: Distribute scripts for scraping the GraphViz Web site.  132. commit 603344fe57e9747bf1f2f7e90537ee2e4fe20c36\n1 file changed, 9 insertions(+), 4 deletions(-) prolog/gv/gv_file.pl | 13 +++++++++---- ENHANCED: Specify that module gv_file requires program dot to be installed. CLEAN: Use PLC supplied abstraction predicate for running an external process. Allows Prolog to show warnings when running a program that depends on DOT support when it's not currently installed.  133. commit 267925349145c9919435cc83625479c87ceb904c\n3 files changed, 103 insertions(+), 5 deletions(-) test/test.pl | 2 ++ prolog/gv/gv_file.pl | 19 ++++++++--- prolog/fca/fca_export.pl | 87 ++++++++++++++++++++++++++++++++++++++++++++++++ ADDED: Module fca_export providing fca_export/[2,3] and three vertex label writers. DOC: Fixed mode for gv_export/[2,3]'s output file argument. ADDED: Wrapper gv_export/2. Added support for exporting FCA lattices.  134. commit a5e20f86f351a3d8ab562fd3e0a76bf6c959ddbc\n1 file changed, 7 insertions(+), 2 deletions(-) prolog/fca/fca_export.pl | 9 +++++++-- ENHANCED: Do not display reflexive edges in FCA lattice export.  135. commit bc3c50241b899b7201647cd475d66f74073c4b6f\n4 files changed, 73 insertions(+), 52 deletions(-) prolog/gv/gv_graph_comp.pl | 68 ++++++++++++++------------------------ prolog/gv/gv_graph.pl | 2 +- prolog/graph/build_export_graph.pl | 31 ++++++++++++++--- prolog/fca/fca_export.pl | 24 +++++++++++--- ADDED: Generate ranks for exported graphs based on rank assignment function for vertices.  136. commit 7ec98aac5f8783118fc4e1443cdd168bd2f854a1\n1 file changed, 2 insertions(+), 17 deletions(-) prolog/fca/fca_export.pl | 19 ++----------------- Use the new FCA Hasse construction predicate from PLC for exporting FCA diagrams.  137. commit 984d3b9ad1b22f5221e0d27ceccb6873e46b9ca5\n2 files changed, 48 insertions(+), 47 deletions(-) prolog/graph/build_export_graph.pl | 8 ++-- prolog/fca/fca_export.pl | 87 +++++++++++++++++++------------------- Improved the way in which FCE-specific options are passed to FCA export.  138. commit 4401e203e457575fedd614b8794360f3eb350cd5\n1 file changed, 35 insertions(+), 14 deletions(-) prolog/fca/fca_export.pl | 49 ++++++++++++++++++++++++++++++++++-------------- ADDED: Support for option `attribute_label/1'.  139. commit 22474664404e3b42da3137dfb33983c82eb40d9a\n2 files changed, 8 insertions(+), 8 deletions(-) prolog/gv/gv_graph_comp.pl | 12 ++++++------ prolog/gv/gv_graph.pl | 4 ++-- CLEAN: Sync to indent/tab updates in PLC.  140. commit f4a9322a1ff02370019c53e8c3ae673fe691010b\n3 files changed, 138 insertions(+), 218 deletions(-) prolog/gv/gv_graph_comp.pl | 71 +++++------- prolog/gv/gv_color.pl | 3 +- prolog/gv/gv_attr_type.pl | 282 ++++++++++++++++++--------------------------- Simplified DOT generating grammar.  141. commit 0d2712a7b0e2b5d4c32fbdccc0829e645b4d1601\n4 files changed, 86 insertions(+), 108 deletions(-) prolog/gv/gv_html.pl | 83 ++++++++++++++------------------------ prolog/gv/gv_graph_comp.pl | 14 +++---- prolog/gv/gv_graph.pl | 70 +++++++++++++++++++------------- prolog/graph/build_export_graph.pl | 27 ++++--------- CLEAN: Use dcg_ext to simplify grammars in gv_graph, gv_html and gv_graph_comp. CLEAN: Reuse option_has_var_value/1 from PLC to simplify code. Cleanups to sync with improved DCG support in PLC.  142. commit 35189854afd8cfb82985a6a1c40742f18ef0c671\n2 files changed, 46 insertions(+), 22 deletions(-) test/test.pl | 2 +- prolog/fca/{fca_export.pl =\u0026gt; fca_viz.pl} | 66 ++++++++++++++++++++++---------- ADDED: `fca_export/[2,3]' which can be reused by plRdf. CLEAN: Renamed `fca_export' -\u0026gt; `fca_viz' for consistency with other modules.  143. commit 322ca62bb5509825b5ccb1688ba9303bdeae9ead\n4 files changed, 57 insertions(+), 35 deletions(-) test/test.pl | 20 +++++----- prolog/gv/gv_graph_comp.pl | 2 +- prolog/graph/build_export_graph.pl | 5 +-- prolog/fca/{fca_export.pl =\u0026gt; fca_viz.pl} | 65 +++++++++++++++++++++----------- various  144. commit c4bf9eacf0960339a5dce8ca0d422f3e1ab829d0\n# test/test.pl # prolog/fca/fca_viz.pl # Conflicts: Merge branch 'master' of https://github.com/wouterbeek/plGraphViz Merge: c4bf9ea 322ca62  145. commit 2a6dafd998ef482cf9ea80003822f3b07ab9251e\n1 file changed, 4 insertions(+), 3 deletions(-) prolog/fca/fca_viz.pl | 7 ++++--- FIXED: Expand meta-options correctly.  146. commit 145615e02046b65d1fbf061dfa77fea462fb3b4f\n1 file changed, 15 insertions(+), 48 deletions(-) prolog/fca/fca_viz.pl | 63 ++++++++++++--------------------------------------- CLEAN: Simplified FCA concept label writing.  147. commit f16acca2418fbb9e0d879e9ef5e90bbf48fdb41e\n2 files changed, 22 insertions(+), 50 deletions(-) prolog/graph/build_export_graph.pl | 62 ++++++++++++-------------------------- prolog/fca/fca_viz.pl | 10 ++---- CLEAN: Simplified vertex label API.  148. commit 4e2d9f122f66784ae362c054118cc39ffa9f7f7c\n1 file changed, 6 insertions(+), 1 deletion(-) prolog/gv/gv_html.pl | 7 ++++++- DOC: Added attributes supported for FONT.  149. commit 6359c9ca232b6fbdeac6b75b6ac36576ce7ab6ac\n4 files changed, 87 insertions(+), 28 deletions(-) prolog/tree/tree_viz.pl | 62 +++++++++++++++++++++++++++++++++++++++++++++++++ prolog/gv/gv_file.pl | 25 +++++++------------- prolog/gv/gv_dom.pl | 4 ++-- prolog/fca/fca_viz.pl | 24 +++++++++++-------- CLEAN: Renamed some predicates for consistency. ADDED: Tree visualization module. ADDED: Options number_of_vertices/1 and process_cputime/1 for fca_viz/3.  150. commit 00537d0e997b0759cbd2494eaedb0a688a7ba270\n1 file changed, 4 insertions(+), 3 deletions(-) prolog/tree/tree_viz.pl | 7 ++++--- minor  151. commit acadc3940eb3822bbc1ae02a9dfbab2d0f7a8aab\n2 files changed, 19 insertions(+), 92 deletions(-) prolog/gv/gv_numeral.pl | 87 ---------------------------------------------- prolog/gv/gv_graph_comp.pl | 24 ++++++++++--- ENHANCED: Now using the grammar for GraphViz numberals.  152. commit 51359c6bc9865b90c02fce32e1fcbd3e37406982\n1 file changed, 4 insertions(+), 4 deletions(-) prolog/graph/build_export_graph.pl | 8 ++++---- CLEAN: lambda -\u0026gt; yall.  153. commit 73047b3b8e12f4a922a3ac73fa515b983b9fc8ee\n1 file changed, 11 insertions(+), 9 deletions(-) prolog/tree/tree_viz.pl | 20 +++++++++++--------- ENHANCED: Support both labeled and unlabeled trees in tree-2-graphviz conversion.  154. commit e4c4586bf31c358724bc00e6c0805682df0ab249\n3 files changed, 10 insertions(+), 8 deletions(-) test/test.pl | 4 +++- prolog/gv/gv_color.pl | 8 ++++---- prolog/gv/gv_attr_type.pl | 6 +++--- FIXED: Sync to updated to DCGs in PLC.  155. commit 7b991bb4cc9e47c2651023295ef20cdc268f8c6a\n9 files changed, 4 insertions(+), 11 deletions(-) prolog/gv/gv_html.pl | 1 - prolog/gv/gv_graph_comp.pl | 1 - prolog/gv/gv_graph.pl | 1 - prolog/gv/gv_color.pl | 1 - prolog/gv/gv_attrs.pl | 2 +- prolog/gv/gv_attr_type.pl | 1 - prolog/graph/build_export_graph.pl | 3 +-- prolog/fca/fca_viz.pl | 2 +- data/gv_attrs_scrape.pl | 3 +-- Sync to PLC.  156. commit fa1518fbfb15aec820ab5d54b452ec4fce811899\n2 files changed, 9 insertions(+), 4 deletions(-) prolog/gv/gv_graph_comp.pl | 4 +++- prolog/graph/build_export_graph.pl | 9 ++++++--- FIXED: gv_id should write numbers. FIXED: Yall does not work.  157. commit 8593ed6499a6b6a58ebf0cce4602aea05ca639de\n1 file changed, 7 insertions(+), 4 deletions(-) prolog/gv/gv_attrs.pl | 11 +++++++---- DEBUG: Exception when unknown GV attr encountered.  158. commit cc53b1ea7fbf553c17b191ce6b1af3fac33133da\n1 file changed, 1 insertion(+), 1 deletion(-) prolog/tree/tree_viz.pl | 2 +- FIXED: Typo in predicate name.  159. commit 202a241a884c68a46b1dd77e95929bfa31e9e9f8\n2 files changed, 2 insertions(+), 2 deletions(-) data/gv_color_scrape.pl | 2 +- data/gv_attrs_scrape.pl | 2 +- Sync to PLC.  160. commit 858b5fb43ded8c4df92935df002bf15586dd9569\n2 files changed, 5 insertions(+), 6 deletions(-) prolog/gv/gv_graph_comp.pl | 2 +- prolog/gv/gv_attrs.pl | 9 ++++----- Sync to PLC.  161. commit 260b62d34b352c2ccae4c085321497aa30f670ba\n1 file changed, 3 insertions(+), 9 deletions(-) prolog/gv/gv_dom.pl | 12 +++--------- minor cleanup  162. commit a6886ca8272a99b4d14f866b54fe16993b714011\n1 file changed, 2 insertions(+), 2 deletions(-) pack.pl | 4 ++-- pack  163. commit 41914a2d39ceca347ebcc4785cf5615c9c7f8376\n3 files changed, 4 insertions(+), 4 deletions(-) prolog/gv/gv_color.pl | 4 ++-- data/gv_color_scrape.pl | 2 +- data/gv_attrs_scrape.pl | 2 +- sync  164. commit 05a5fd2488c4e28c0eae9db4d9c9df4f550f4c3d\n1 file changed, 1 deletion(-) prolog/fca/fca_viz.pl | 1 - cleanup  165. commit fd6c59b31ebd0ac9927495460dcd4c762ac5681d\n2 files changed, 19 insertions(+), 27 deletions(-) data/gv_color_scrape.pl | 20 ++++++++------------ data/gv_attrs_scrape.pl | 26 +++++++++++--------------- CLEAN: Use module io for simplified stream calling @gv_attrs_scrape,gv_color_scrape  166. commit 121e68f9ab3b47128c9fb365aed6891f9e91a568\nThe shell code for generate navigation for source Tree  # git log --help ç‰¹åˆ«æœ‰ç”¨ #bash /e/gethead.sh \u0026gt; graph.log ## first part echo \u0026quot;+ [1. æºç æ¯”è¾ƒç›®å½•](#compare)\u0026quot; echo \u0026quot;+ [2. æ–‡ä»¶ç»†èŠ‚](#detail)\u0026quot; echo \u0026quot;+ [3. æ—¶é—´å˜åŒ–è¡¨](#time)\u0026quot; echo \u0026quot;+ [4. åˆ—å‡ºç®€è¦ä¿¡æ¯](#short)\u0026quot; ## second part echo \u0026quot;\u0026quot; echo \u0026quot;\u0026lt;h2 id=\\\u0026quot;compare\\\u0026quot;\u0026gt;1. æ¯”è¾ƒç›®å½•\u0026lt;/h2\u0026gt;\u0026quot; echo \u0026quot;\u0026quot; sign=0 count=1 for i in `git log --decorate --oneline|awk '{print $1}'|tac`; do if (( sign\u0026lt;1 )) then sign=2; before=$i; else #content[$count]=\u0026quot;\\[$count: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ $before å’Œå˜åŠ¨å $i\\]\\[$count\\]\u0026quot; echo \u0026quot;+ [$count: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ $before å’Œå˜åŠ¨å $i](#$count)\u0026quot; #content[$count]='[$count: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ $before å’Œå˜åŠ¨å $i][$count]' count=$(($count+1)) before=$i; fi done; ## third part echo \u0026quot;\u0026quot; echo \u0026quot;\u0026lt;h2 id=\\\u0026quot;detail\\\u0026quot;\u0026gt;2. æ–‡ä»¶ç»†èŠ‚\u0026lt;/h2\u0026gt;\u0026quot; echo \u0026quot;\u0026quot; sign=0 count=1 for i in `git log --decorate --oneline|awk '{print $1}'|tac`; do if (( sign\u0026lt;1 )) then sign=2; before=$i; else echo \\\u0026lt;h2 id=\\\u0026quot;$count\\\u0026quot;\\\u0026gt; $count: \u0026quot;æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰\u0026quot; $before \u0026quot;å’Œå˜åŠ¨å\u0026quot; $i \\\u0026lt;\\/h2\\\u0026gt; echo \u0026quot;[back to content](#compare)\u0026quot; #content[$count]=\u0026quot;\\[$count: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ $before å’Œå˜åŠ¨å $i\\]\\[$count\\]\u0026quot; #echo \u0026quot;[$count: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ $before å’Œå˜åŠ¨å $i][$count]\u0026quot; #content[$count]='[$count: æ­£åœ¨æ¯”è¾ƒå˜åŠ¨å‰ $before å’Œå˜åŠ¨å $i][$count]' echo \u0026quot; \u0026quot; echo \u0026quot;\\`\\`\\` diff\u0026quot; echo \u0026quot; \u0026quot; git diff $before $i echo \u0026quot; \u0026quot; echo \u0026quot;\\`\\`\\`\u0026quot; echo \u0026quot; \u0026quot; count=$(($count+1)) before=$i; fi done; echo \u0026quot;æ€»å…±è¿›è¡Œäº†\u0026quot; $count \u0026quot;æ¬¡æ¯”è¾ƒ\u0026quot; ## fourth part #echo \u0026quot;æ—¶é—´å˜åŒ–è¡¨:\u0026quot; echo \u0026quot;\u0026quot; echo \u0026quot;\u0026lt;h2 id=\\\u0026quot;time\\\u0026quot;\u0026gt;3. æ—¶é—´å˜åŒ–è¡¨\u0026lt;/h2\u0026gt;\u0026quot; echo \u0026quot;\u0026quot; #git log --pretty=format:\u0026quot;%h %cd %cr\u0026quot;|awk '{print \u0026quot;[\u0026quot;NR\u0026quot;. \u0026quot;$0\u0026quot;](#\u0026quot;NR\u0026quot;)\\n\u0026quot;}'|tac git log --pretty=format:\u0026quot;%h %cd %cr\u0026quot;|tac|awk '{print \u0026quot;[\u0026quot;NR\u0026quot;. \u0026quot;$0\u0026quot;](#\u0026quot;NR\u0026quot;)\\n\u0026quot;}' ## fifth part echo \u0026quot;\u0026quot; echo \u0026quot;\u0026lt;h2 id=\\\u0026quot;short\\\u0026quot;\u0026gt;4. åˆ—å‡ºç®€è¦ä¿¡æ¯\u0026lt;/h2\u0026gt;\u0026quot; echo \u0026quot;\u0026quot; echo \u0026quot;\\`\\`\\` vim\u0026quot; echo \u0026quot; \u0026quot; git log --stat|tac|awk -v count=1 '{if(/^commit/){gsub(/$/,\u0026quot;](#\u0026quot;count\u0026quot;)\u0026quot;);count=count+1}; print $0} ' |sed '/^Date/d'|sed '/^Author/d'|sed /^commit/'i```\\n'|sed /^commit/'a \\\\n``` vim' |awk -v count=1 '{if(/^commit/){gsub(/commit/,\u0026quot;[\u0026quot;count\u0026quot;. commit\u0026quot;);count=count+1};print $0;}' ## one bug ,you need to delete the last sentence generate by the code ","date":1474395200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1474395200,"objectID":"44d7e8054210164f9711c49a8bc0fe27","permalink":"/blog/2016/09/21/a-tool-to-navigate-the-achivement-in-the-source-tree/","publishdate":"2016-09-21T02:13:20+08:00","relpermalink":"/blog/2016/09/21/a-tool-to-navigate-the-achivement-in-the-source-tree/","section":"archives","summary":"We go to github, then download the souce code, go on looking into the code, dame it! So many codes ,so many branches, how to figure out the develop process?\nMaybe you can use the sourceTree to help you visulize the source tree, or the right below tool for helping navigating the source tree in the time and compare with each other continually.\n 1. æºç æ¯”è¾ƒç›®å½• 2. æ–‡ä»¶ç»†èŠ‚ 3. æ—¶é—´å˜åŒ–è¡¨ 4. åˆ—å‡ºç®€è¦ä¿¡æ¯ 5. shell code for navigating the source tree in the git repository ","tags":null,"title":"A tool to navigate the achivement in the source tree","type":"archives"},{"authors":null,"categories":["prolog"],"content":"Edsgar Dijkstarå†™è¿‡ä¸å°‘ç¨‹åºè¯­è¨€å’Œé€»è¾‘ç¼–ç¨‹çš„å¥½ä¹¦ï¼Œæ¯”å¦‚A Discipline of programming.\nå°¾éšä¹‹åçš„æ˜¯David Grieså†™çš„the science of programing. TSOP.\nåœ¨ç©ºæ°”åŠ¨åŠ›å­¦é¢†åŸŸï¼Œç”Ÿäº1937å¹´çš„John D. Andersonæ˜¯ä¸€ä½èˆªç©ºé¢†åŸŸå¤šäº§çš„ä½œå®¶ï¼Œå…¶ä¸­ç©ºæ°”åŠ¨åŠ›å­¦åŸºç¡€æ›´æ˜¯ç»å…¸çš„ç»å…¸ã€‚ è¥¿é—¨å­ä¹‹å‰æ ¹æ®Michel Geradimçš„Flexible Multibody Dynamics: a finite element approachç¼–å†™æœ‰é™å…ƒå¤šä½“åˆ†æè½¯ä»¶ç³»ç»Ÿï¼ˆå…·ä½“åå­—å¿˜è®°ï¼‰,ä¸ä¹‹ç±»ä¼¼çš„æ˜¯ç»¿çš®ä¹¦ Ahmed A. Shabanaç¼–å†™çš„Dynamics of Multibody Systemsä¹Ÿæ˜¯å¤šä½“åŠ¨åŠ›å­¦é¢†åŸŸä¸é”™çš„å¥½ä¹¦ã€‚ J.Blazekå†™äº†ä¸€æœ¬è®¡ç®—æµä½“åŠ¨åŠ›å­¦çš„å¥½ä¹¦Computational Fluid Dynamics:Principles and Applications]19.å½“ç„¶Pijush K. Kunduå†™çš„Fluid Mechanicä¹Ÿæ˜¯ç»å…¸ä¹‹è‘— ,, ä¹‹å‰ï¼ŒæåŠäº†ç¨‹åºè¯­è¨€ï¼Œåœ¨è¿™ä¸ªé¢†åŸŸä¸å¾—ä¸è¯´æ˜¯Dan Friedman.è¿™ä½è€é¡½ç«¥æ›¾ç»å†™è¿‡å¾ˆå¤šæœ¬å¤§è±¡ä¹¦ç±ï¼Œæ¯”å¦‚ the little scheme,TLS , the season scheme,TSS, the reason scheme,TRS,å†™å®ŒTRSä¹‹åæœ€ç»å¸¸è¯´çš„æ˜¯\u0026rdquo;Can it run backwardï¼Ÿ\u0026rdquo;, a little java,ALJ, the little mler,TLM, Essential of programing language,EOPL,ä»¥åŠè¿›ä¸€æ­¥ åƒé€»è¾‘å­¦é¢†åŸŸè¿›å†›çš„the little prover,ç«‹å¿—è¦å»ºä¸€ä¸ªç±»ä¼¼äºcoqçš„è¯æ˜å¼è¯­è¨€ç³»ç»Ÿ(æ³•å›½äººå†™çš„è½¯ä»¶ä¸€èˆ¬æ˜¯åŠ¨ç‰©ï¼Œæ¯”å¦‚ocamlï¼Œcoq),åˆšåˆšå»ºäº†ä¸€ä¸ªå¾ˆbangçš„J-Bobã€‚\nå…³äºå‡½æ•°å¼ç¼–ç¨‹ï¼Œè¿˜æœ‰ä¸€ç±»æ˜¯æ¯”è¾ƒçº¯å‡½æ•°å¼ç¼–ç¨‹æ¯”å¦‚Haskellï¼ŒMLç­‰ã€‚Haskellæœ‰å¾ˆå¤šä¸é”™çš„ä¹¦ç±æ¯”å¦‚Bryan O\u0026rsquo;Sullivanå†™çš„ Real World Haskellä»¥åŠæ¥è‡ªæ–¯æ´›æ–‡å°¼äºšçš„ Miran LipoVacaå†™çš„Learn You a Haskell for Great Good(ä¸­æ–‡ç‰ˆä¸ºHaskellè¶£å‘³æŒ‡å—) ,è€ŒMlè¯­è¨€æ¯”å¦‚Ocamlä¹Ÿåˆä¸é”™çš„æ¯”å¦‚Real World Ocaml, ç‰¹åˆ«æ˜¯çº¯å‡½æ•°è¯­è¨€å¯ä»¥åŠ æ·±ä½ å¯¹è¯­è¨€è®¾è®¡æ–¹é¢çš„ç†è§£ã€‚\nä¸‡ç‰©éƒ½æœ‰å…¶é“ï¼Œæœ‰å…¶é€»è¾‘ã€‚å½“é€»è¾‘è¢«è´¨ç–‘ï¼Œä¸èƒ½æˆç«‹ï¼Œåˆ™å¾—æ¨ç¿»ï¼Œè¿›è€Œé‡æ„ï¼Œå…³äºlogic programmingï¼Œé¦–å…ˆå¾—è®¤è¯†çš„æ˜¯Prologã€‚å¹¶ä»¥ä¸‰ä¸ªæ¯”è¾ƒå¥½çš„å…¥é—¨é˜¶æ®µå¼ä¹¦ç±\n William F. ClockSinçš„ Programming in prolog,ä»1984å¹´å¼€å§‹åˆ°2003å¹´. William F. Clocksinçš„ clauses and Effect P. Deransart çš„Prolog: the standard  å¦å¤–è¿˜æœ‰ä¸€äº›æ¯”è¾ƒç»å…¸çš„ä¹¦ç±æ˜¯ learn Prolog Now!,Logic Programming with Prolog,the-art-of-prolog è¿™æœ¬ä¹¦å…¥é—¨ä¹Ÿä¸é”™,prolog versue you. ä»¥åŠé¢å‘äººå·¥æ™ºèƒ½å’Œå›¾åƒå¤„ç†çš„æ–¹é¢çš„prologä¹¦ç±, æ¯”å¦‚PROLOG Programming for Artificial Intelligence (4th Revised edition) ,An Introduction to Language Processing with Perl and Prolog ,Language Processing with Perl and Prolog ,Intelligent Image Processing in Prolog\n","date":1468932737,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1468932737,"objectID":"0ae37cf3882049e53d3eb3f709563234","permalink":"/blog/2016/07/19/da-yin-de-shu-ji-prolog-plus-scheme-plus-kong-qi-dong-li-xue-fang-mian/","publishdate":"2016-07-19T20:52:17+08:00","relpermalink":"/blog/2016/07/19/da-yin-de-shu-ji-prolog-plus-scheme-plus-kong-qi-dong-li-xue-fang-mian/","section":"archives","summary":"Edsgar Dijkstarå†™è¿‡ä¸å°‘ç¨‹åºè¯­è¨€å’Œé€»è¾‘ç¼–ç¨‹çš„å¥½ä¹¦ï¼Œæ¯”å¦‚A Discipline of programming.\nå°¾éšä¹‹åçš„æ˜¯David Grieså†™çš„the science of programing. TSOP.\n","tags":null,"title":"æ‰“å°çš„ä¹¦ç±(prolog+scheme+ç©ºæ°”åŠ¨åŠ›å­¦æ–¹é¢)","type":"archives"},{"authors":null,"categories":["prolog"],"content":"prolog ä½œä¸ºä¸€é—¨logic programming language,é€»è¾‘æ¨ç†æ˜¯å®ƒçš„å¼ºé¡¹ã€‚æ¸¸æˆä¹Ÿæ˜¯ä¸€ä¸ªé€»è¾‘æ¨ç†çš„è¿‡ç¨‹ï¼Œprologç…§æ ·å¯ä»¥ï¼Œé€šè¿‡è¯¥æ¸¸æˆçš„å†™ä½œå¯ä»¥è®©ä½ ç†Ÿæ‚‰\n äº‹å®å’Œè§„åˆ™ã€‚ built-in predicates. IO cut-failæ“ä½œ  æ¸¸æˆæºä»£ç å¦‚ä¸‹ï¼Œè¿›ä¸€æ­¥å‚è€ƒprologæ•™ç¨‹.\n:-dynamic here/1. room(kitchen). room(office). room(hall). room('dining room'). room(cellar). door(office, hall). door(kitchen, office). door(hall, 'dining room'). door(kitchen, cellar). door('dining room', kitchen). location(desk, office). location(apple, kitchen). location(flashlight, desk). location('washing machine', cellar). location(nani, 'washing machine'). location(broccoli, kitchen). location(crackers, kitchen). location(knife, kitchen). location(computer, office). location(envelope, desk). location(stamp, envelope). location(key, envelope). /* more interesting thing*/ edible(apple). edible(crackers). tastes_yucky(broccoli). /* You are here now in the game.*/ here(kitchen). where_food(X,Y) :- location(X,Y),edible(X). where_food(X,Y) :- location(X,Y),tastes_yucky(X). connect(X,Y):-door(X,Y). connect(X,Y):-door(Y,X). /*list all things in the correspondign room*/ list_things(Place) :- location(X,Place),tab(2),write(X),nl,fail. list_things(_). /* always correct AnyPlace's value we don't care, åªèƒ½ç”¨_ underscore)*/ list_things_to_eat(Place) :- where_food(X,Place),tab(2),write(X),nl,fail. list_things_to_eat(_) . list_connections(Place) :- connect(X,Place),tab(2),write(X),nl,fail. list_connections(_). look:- here(Place), write('You are in the '),write(Place),write(' now!'),nl,write('You can see:'),nl, list_things(Place),write('what the things you can eat are below:'),nl,list_things_to_eat(Place), write('You can also go to '),nl,list_connections(Place). c_to_f(C,F):- F is C*9/5+32. freezeing(F):-F=\u0026lt;32. goto(Place) :- can_go(Place),move(Place),look. can_go(Place) :- here(X),connect(X,Place). can_go(_) :- write('You can''t get there from here.'),nl,fail. move(Place):- retract(here(Y)),asserta(here(Place)). take(X):- can_take(X),take_object(X). can_take(Thing) :-here(Place),location(Thing,Place). can_take(Thing) :- write('There is no '),write(Thing),write(' Here'),nl,fail. take_object(X):- retract(location(X,_)),asserta(hava(X)),write('taken'),nl. backtracking_assert(X):- asserta(X). backtracking_assert(X):- retract(X),fail. is_contained_in(T1,T2) :- location(T1,T2). is_contained_in(T1,T2) :- location(X,T2),is_contained_in(T1,X). object(candle,red ,small,1). object(apple ,red ,small,1). object(apple ,green ,small,1). object(apple ,blue ,big,50). object(desk,brwon,dimension(6,3,3),90). object(desk,color(brwon),size(dimension(6,3,3)),weight(90)). object(desk,color(brwon),size(large),weight(90)). location_s(object(candle,red ,small,1),kitchen). location_s(object(apple ,bluired ,small,1),kitchen). location_s(object(apple ,green ,small,1),kitchen). location_s(object(apple ,blue ,big,50),kitchen). can_take_s(Thing) :- here(Room),location_s(object(Thing,_,small,_),Room). can_take_s(Thing) :- here(Room),location_s(object(Thing,_,big,_),Room),write('The '),write(Thing), write(' is too big to carry!'),nl,fail. can_take_s(Thing) :- here(Room),not(location_s(object(Thing,_,_,_),Room)),write('There is no '), write(Thing),write('Here.'),nl,fail. list_things_s(Place) :- location_s(object(Thing,Color,Size,Weight),Place), write('A '),write(Size),tab(1),write(Color),tab(1),write(Thing),write(',weighing '), write_weight(Weight),nl,fail. list_things_s(_). write_weight(1):-write('1 pound'). write_weight(W):-W\u0026gt;1,write(W),write(' pounds'). loc_list([apple,broccoil,crackers],kitchen). loc_list([desk,computer],office). loc_list([flashlight,envelope],desk). loc_list([stamp,key],envelope). loc_list(['Washing machine'],cellar). loc_list([nani],'Washing machine'). loc_list([],hall). /* empty list*/ /*length1([zha,df,gs],H).*/ length1([],0). length1([H|T],N) :- length1(T,M),N is M+1. member(X,[X|List]). member(X,[Element|List]) :- member(X,List). prefix([],List). prefix([X|Prefix],[X|List]):- prefix(Prefix,List). suffix(Suffix,Suffix). prefix(Suffix,[X|List]) :- suffix(Suffix,List). vowel(X) :- member(X,[a,e,i,o,u]). digit(D) :- member(D,['0','1','2','3','4','5','6','7','8','9']). /*reverse([ ],[ ]). reverse([X|L],Rev) :- reverse(L,RL), append(RL,[X],Rev).*/ /*reverse([a,b,v],Rl).*/ reverse([ ],[ ]). reverse(L,RL) :- reverse(L,[ ],RL). reverse([ ],RL,RL). reverse([X|L],PRL,RL) :- reverse(L,[X|PRL],RL). /* isort([6,3,6,2,4,64,234],Sl) */ isort([ ],[ ]). isort([X|UnSorted],AllSorted) :- isort(UnSorted,Sorted), insert(X,Sorted,AllSorted). insert(X,[ ],[X]). insert(X,[Y|L],[X,Y|L]) :- X =\u0026lt; Y. insert(X,[Y|L],[Y|IL]) :- X \u0026gt; Y, insert(X,L,IL). facTail(0,1). facTail(N,F) :- N \u0026gt; 0, facTail(N,1,F). facTail(1,F,F). facTail(N,PP,F) :- N \u0026gt; 1, NPp is N*PP, M is N-1, facTail(M,NPp,F). fibTail(0,1). fibTail(1,1). fibTail(N,F) :- N \u0026gt; 1, fibTail(N,1,1,F). fibTail(2,F1,F2,F) :- F is F1 + F2. fibTail(N,F1,F2,F) :- N \u0026gt; 2, N1 is N - 1, NF1 is F1 + F2, fibTail(N1,NF1,F1,F). /* primes(PL) :- natlist(2,L2), sieve(L2,PL). sieve([ ],[ ]). sieve([P|L],[P|IDL]) :- sieveP(P,L,PL), sieve(PL,IDL). sieveP(P,[ ],[ ]). sieveP(P,[N|L],[N|IDL]) :- N mod P \u0026gt; 0, sieveP(P,L,IDL). sieveP(P,[N|L], IDL) :- N mod P =:= 0, sieveP(P,L,IDL). */ /* merge( List1, List2, List3 ) :- ( List1 = [], !, List3 = List2 ); ( List2 = [], !, List3 = List1 ); ( List1 = [X|L1], List2 = [Y|L2 ), ((X \u0026lt; Y, ! Z = X, merge( L1, List2, L3 ) ); ( Z = Y, merge( List1, L2, L3 ) )), List3 = [Z|L3]. */ merge([],List2,List2). merge(List1,[],List1). merge([X|List1],[Y|List2],[Z|List3]) :- X\u0026lt;Y,!,merge(List1,List2,List3). merge(List1,[Y|List2],[Y|List3]) :- merge(List1,List,List3). ","date":1468928137,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1468928137,"objectID":"fe302935b3dccd9263f80372dc2773ec","permalink":"/blog/2016/07/19/prologxiao-you-xi/","publishdate":"2016-07-19T19:35:37+08:00","relpermalink":"/blog/2016/07/19/prologxiao-you-xi/","section":"archives","summary":"","tags":null,"title":"prologå°æ¸¸æˆ","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"å¾ˆé•¿æ²¡æœ‰åšjavaå°ç»“ï¼ŒæŠŠæœ€è¿‘æµè§ˆçš„å‡ ä¸ªé“¾æ¥æ·»ä¸Šå»ã€‚\njavaå°ç»“\n Jpress æ˜¯ä¸€ä¸ªä¸é”™çš„cmså¼€æºå¹³å°ï¼Œæ…¢æ…¢å¯ä»¥å–ä»£wordpress,ä¸”é€Ÿåº¦è¾ƒå¿«ã€‚\n è·¯å°ç£Šçš„å·¥å…·åŒ…Hutools utilityæœ‰åœ¨æ›´æ–°ä¸­ã€‚\n sourceTreeå¯ä»¥ç”¨æ¥åšè½¯ä»¶å¼€å‘è·Ÿè¸ªï¼Œå†…æ ¸å½“ç„¶æ˜¯gitã€‚  ","date":1468924945,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1468924945,"objectID":"72d80b8bd8335a4d8b8c3426a800c2de","permalink":"/blog/2016/07/19/javaxiao-jie/","publishdate":"2016-07-19T18:42:25+08:00","relpermalink":"/blog/2016/07/19/javaxiao-jie/","section":"archives","summary":"å¾ˆé•¿æ²¡æœ‰åšjavaå°ç»“ï¼ŒæŠŠæœ€è¿‘æµè§ˆçš„å‡ ä¸ªé“¾æ¥æ·»ä¸Šå»ã€‚\n","tags":null,"title":"javaå°ç»“","type":"archives"},{"authors":null,"categories":["matlab"],"content":"æœ€è¿‘ï¼Œæœ‰åšä¸€ä¸ªå›¾åƒå¤„ç†çš„é¡¹ç›®ï¼Œæ€»ç»“å‡ºä¸€äº›æœ‰ç”¨çš„maltlabå°å·¥å…·ã€‚\n Numsubplot windRose å¤šé¡¹å¼æ‹Ÿåˆ ç®­å¤´ è¯¯å·®å¸¦ matlabç¼–ç¨‹é…ç½® cell and array  1. Numsubplot åœ¨è¿›è¡Œåˆ†æçš„æ—¶å€™ï¼Œæœ‰æ—¶å€™å¯èƒ½éœ€è¦å¤šå›¾æ‰“å°ï¼Œnumsubplotè¿˜æ˜¯æŒºæ–¹ä¾¿çš„ã€‚ä½¿ç”¨å¯ä»¥çœ‹æ³¨é‡Šéƒ¨åˆ†\nfunction [p,n]=numSubplots(n) % function [p,n]=numSubplots(n) % % Purpose % Calculate how many rows and columns of sub-plots are needed to % neatly display n subplots. % % Inputs % n - the desired number of subplots. % % Outputs % p - a vector length 2 defining the number of rows and number of % columns required to show n plots. % [ n - the current number of subplots. This output is used only by % this function for a recursive call.] % % % % Example: neatly lay out 13 sub-plots % \u0026gt;\u0026gt; p=numSubplots(13) % p = % 3 5 % for i=1:13; subplot(p(1),p(2),i), pcolor(rand(10)), end % % % Rob Campbell - January 2010 while isprime(n) \u0026amp; n\u0026gt;4, n=n+1; end p=factor(n); if length(p)==1 p=[1,p]; return end while length(p)\u0026gt;2 if length(p)\u0026gt;=4 p(1)=p(1)*p(end-1); p(2)=p(2)*p(end); p(end-1:end)=[]; else p(1)=p(1)*p(2); p(2)=[]; end p=sort(p); end %Reformat if the column/row ratio is too large: we want a roughly %square design while p(2)/p(1)\u0026gt;2.5 N=n+1; [p,n]=numSubplots(N); %Recursive! end  2. Winrose a. å¯ä»¥ç”¨äºç»˜åˆ¶é£ç«ç‘°å›¾ï¼Œä¹Ÿå°±æ˜¯é£å‘å˜é‡å’Œé£é€Ÿå˜é‡ b. ä¹Ÿå¯ä»¥ç”¨äºç»˜åˆ¶å•ä¸€å˜é‡çš„ç«ç‘°å›¾ï¼Œæ¯”å¦‚è§’åº¦ç«ç‘°å›¾\nfunction [figure_handle,colorSeq,barX,barY,count,speeds,directions,Table] = WindRose(direction,speed,varargin) % WindRose Draw a Wind Rose knowing direction and speed % % [figure_handle,count,speeds,directions,Table] = WindRose(direction,speed); % [figure_handle,count,speeds,directions,Table] = WindRose(direction,speed,'parameter1',value1,...); % % figure_handle is the handle of the figure containing the chart % count is the frequency for each speed (ncolumns = nspeeds) and for each direction (nrows = ndirections). % speeds is a 1 by n vector containing the values for the speed intervals % directions is a m by 1 vector containing the values in which direction intervals are centered % Table is a (4+m) by (3+m) cell array (excel-ready), containing Frequencies for each direction and for each speed. % % User can specify direction angle meaning North and East winds, so % the graphs is shown in the desired reference % % Example % d = 360 * rand(10000,1); % My reference is North = 0? East = 90? % v = 30*rand(10000,1); % % [figure_handle,count,speeds,directions,Table] = WindRose(d,v,'anglenorth',0,'angleeast',90,'freqlabelangle',45); % % PARAMETER CLASS DEFAULT VALUE DESCRIPTION %------------------------------------------------------------------------------------------------------------------------------------------------------------ % 'centeredin0' Logical. true Is first angular bin centered in 0 (-5 to 5)? -\u0026gt; CeteredIn0 = true // or does it start in 0 (0 to 10)? -\u0026gt; CeteredIn0 = false. % 'ndirections' Numeric. 36 Number of direction bins (subdivisions) to be shown. % 'freqround' Numeric. 1 Maximum frquency value will be rounded to the first higher whole multiple of FrequenciesRound. Only applies if 'maxfrequency' is specified. % 'nfreq' Numeric. 5 Draw this number of circles indicating frequency. % 'speedround' Numeric. [] (auto) Maximum wind speed will be rounded to the first higher whole multiple of WindSpeedRound. % 'nspeeds' Numeric. [] (auto) Draw this number of windspeeds subdivisions (bins). Default is 6 if 'speedround' is specified. Otherwise, default is automatic. % 'maxfrequency' Numeric. [] (auto) or 6 Set the value of the maximum frequency circle to be displayed. Be careful, because bins radius keep the original size. % 'freqlabelangle' Numeric. [] (auto) Angle in which frequecy labels are shown. If this value is empty, frequency labels will NOT be shown. Trigonometric reference. 0=Right, 90=Up. % 'titlestring' Cell/String. {'Wind Rose';' '} Figure title. It is recommended to include an empty line below the main string. % 'lablegend' String. 'Wind speeds in m/s' String that will appear at the top of the legend. Can be empty. % 'cmap' String. 'jet' String with the name of a colormap function. If you put inv before the name of the funcion, colors will be flipped (e.g. 'invjet', 'invautum', 'invbone', ...). Use any of the built-in functions (autumn, bone, colorcube, cool, copper, flag, gray, hot, hsv, jet, lines, pink, prism, spring, summer, white, winter). See doc colormap for more information. % 'height' Numeric. 2/3*screensize Figure inner height in pixels. Default is 2/3 of minimum window dimension; % 'width' Numeric. 2/3*screensize Figure inner width in pixels. % 'figcolor' Color Code. 'w' Figure color, any admitted matlab color format. Default is white. % 'textcolor' Color Code. 'k' Text and axis color, any admitted matlab color format. Default is black. % 'labels' CellString {'N','S','E','W'} Specify North South East West in a cell array of strings. % 'labelnorth' String. 'N' Label to indicate North. Be careful if you specify 'labels' and 'labelnorth'. Last parameter specified will be the one used. % 'labelsouth' String. 'S' Label to indicate South. Be careful if you specify 'labels' and 'labelsouth'. Last parameter specified will be the one used. % 'labeleast' String. 'E' Label to indicate East. Be careful if you specify 'labels' and 'labeleast' . Last parameter specified will be the one used. % 'labelwest' String. 'W' Label to indicate West. Be careful if you specify 'labels' and 'labelwest' . Last parameter specified will be the one used. % 'titlefontweight' String. 'bold' Title font weight. You can use 'normal','bold','light','demi' % 'legendvariable' String. 'W_S' Variable abbreviation that appears inside the legend. You can use TeX sequences. % 'anglenorth' Numeric. 90 Direction angle meaning North wind. Default is 90 for North (trigonometric reference). If you specify 'north' angle, you need to specify 'east' angle, so the script knows how angles are referenced. % 'angleeast' Numeric. 0 Direction angle meaning East wind. Default is 0 for East (counterclockwise). If you specify 'east' angle, you need to specify 'north' angle, so the script knows how angles are referenced. % 'minradius' Numeric 1/30 Minimum radius of the wind rose, relative to the maximum frequency radius. An empty circle of this size appears if greater than 0. % 'legendtype' Numeric 2 Legend type continuous = 1, separated boxes = 2 % % % by Daniel Pereira - dpereira@s2msolutions.com % % 2014/Jul/14 - First version %% Check funciton call if nargin\u0026lt;2 error('WindRose needs at least two inputs'); elseif mod(length(varargin),2)~=0 error('Inputs must be paired: WindRose(Speed,Direction,''PropertyName'',PropertyValue,...)'); elseif ~isnumeric(speed) || ~isnumeric(speed) error('Speed and Direction must be numeric arrays.'); elseif ~isequal(size(speed),size(direction)) error('Speed and Direction must be the same size.'); end %% Default parameters SCS = get(0,'screensize'); CeteredIn0 = true; ndirections = 36; FrequenciesRound = 1; NFrequencies = 5; WindSpeedRound = []; NSpeeds = []; circlemax = []; FreqLabelAngle = []; TitleString = {'Wind Rose';' '}; %lablegend = 'Wind Speeds in m/s'; lablegend = 'flow angle in Â°'; colorfun = 'jet'; height = min(SCS(3:4))*2/3; width = min(SCS(3:4))*2/3; figcolor = '[1,1,1]'; TextColor = '[0,0,0]'; % label.N = 'N'; % label.S = 'S'; % label.W = 'W'; % label.E = 'E'; label.N = '90Â°'; label.S = '270Â°'; label.W = '180Â°'; label.E = '0Â°'; titlefontweight = 'bold'; legendvariable = 'W_S'; RefN = 90; RefE = 0; min_radius = 1/30; LegendType = 2; %% User-.specified parameters for i=1:2:numel(varargin) switch lower(varargin{i}) case 'centeredin0' CeteredIn0 = varargin{i+1}; case 'ndirections' ndirections = varargin{i+1}; case 'freqround' FrequenciesRound = varargin{i+1}; case 'nfreq' NFrequencies = varargin{i+1}; case 'speedround' WindSpeedRound = varargin{i+1}; case 'nspeeds' NSpeeds = varargin{i+1}; case 'freqlabelangle' FreqLabelAngle = varargin{i+1}; case 'titlestring' TitleString = varargin{i+1}; case 'lablegend' lablegend = varargin{i+1}; case 'cmap' colorfun = varargin{i+1}; case 'height' height = varargin{i+1}; case 'width' width = varargin{i+1}; case 'figcolor' figcolor = varargin{i+1}; case 'textcolor' TextColor = varargin{i+1}; case 'min_radius' min_radius = varargin{i+1}; case 'maxfrequency' circlemax = varargin{i+1}; case 'titlefontweight' titlefontweight = varargin{i+1}; case 'legendvariable' legendvariable = varargin{i+1}; case 'legendtype' LegendType = varargin{i+1}; case 'labelnorth' label.N = varargin{i+1}; case 'labelsouth' label.S = varargin{i+1}; case 'labeleast' label.E = varargin{i+1}; case 'labelwest' label.W = varargin{i+1}; case 'labels' label.N = varargin{i+1}{1}; label.S = varargin{i+1}{2}; label.E = varargin{i+1}{3}; label.W = varargin{i+1}{4}; case 'anglenorth' k = any(arrayfun(@(x) strcmpi(x,'angleeast'),varargin)); if ~k error('Reference angles need to be specified for AngleEAST and AngleNORTH directions'); end case 'angleeast' k = find(arrayfun(@(x) strcmpi(x,'anglenorth'),varargin)); if isempty(k) error('Reference angles need to be specified for AngleEAST and AngleNORTH directions'); else RefE = varargin{i+1}; RefN = varargin{k+1}; end if abs(RefN-RefE)~=90 error('The angles specified for north and east must differ in 90 degrees'); end otherwise error([varargin{i} ' is not a valid property for WindRose function.']); end end speed = reshape(speed,[],1); % Convert wind speed into a column vector direction = reshape(direction,[],1); % Convert wind direction into a column vector NumberElements = numel(direction); % Coun the actual number of elements, to consider winds = 0 when calculating frequency. dir = mod((RefN-direction)/(RefN-RefE)*90,360); % Ensure that the direction is between 0 and 360? speed = speed(speed\u0026gt;0); % Only show winds higher than 0. ç¸’hy? See next comment. dir = dir(speed\u0026gt;0); % Wind = 0 does not have direction, so it cannot appear in a wind rose, but the number of appeareances must be considered. figure_handle = figure('color',figcolor,'units','pixels','position',[SCS(3)/2-width/2 SCS(4)/2-height/2 width height],'menubar','none','toolbar','none'); %% Bin Directions N = linspace(0,360,ndirections+1); % Create ndirections direction intervals (ndirections+1 edges) N = N(1:end-1); % N is the angles in which direction bins are centered. We do not want the 360 to appear, because 0 is already appearing. n = 180/ndirections; % Angle that should be put backward and forward to create the angular bin, 1st centered in 0 if ~CeteredIn0 % If user does not want the 1st bin to be centered in 0? N = N+n; % Bin goes from 0 to 2n (N to N+2n), instead of from -n to n (N-n to N+n), so Bin is not centered in 0 (N) angle, but in the n (N+n) angle end %% Wind speeds/velocities if ~isempty(WindSpeedRound) if isempty(NSpeeds); NSpeeds = 6; end % Default value for NSpeeds if not user specified vmax = ceil(max(speed)/WindSpeedRound)*WindSpeedRound; % Max wind speed rounded to the nearest whole multiple of WindSpeedRound (Use round or ceil as desired) if vmax==0; vmax=WindSpeedRound; end; % If max wind speed is 0, make max wind to be WindSpeedRound, so wind speed bins are correctly shown. vwinds = linspace(0,vmax,NSpeeds); % Wind speeds go from 0 to vmax, creating the desired number of wind speed intervals else figure2 = figure('visible','off'); plot(speed); % Plot wind speed vwinds = get(gca,'ytick'); delete(figure2); % Yaxis will automatically make divisions or us. if ~isempty(NSpeeds) vwinds = linspace(min(vwinds),max(vwinds),NSpeeds); end end %% Histogram in each direction + Draw count = PivotTableCount(N,n,vwinds,speed,dir,NumberElements); % For each direction and for each speed, value of the radius that the windorose must reach (Accumulated in speed). if isempty(circlemax) circlemax = ceil(max(max(count))/FrequenciesRound)*FrequenciesRound; % Round highest frequency to closest whole multiple of theFrequenciesRound (Use round or ceil as desired) end min_radius = min_radius*circlemax; DrawPatches(N,n,vwinds,count,colorfun,figcolor,min_radius);% Draw the windrose, knowing the angles, the range for each direction, the speed ranges, the count (frequency) values and the colormap used. %% Constant frequecy circles and x-y axes + Draw + Labels [x,y] = cylinder(1,50); x = x(1,:); y = y(1,:); % Get x and y for a unit-radius circle circles = linspace(0,circlemax,NFrequencies+1); circles = circles(2:end);% Radii of the circles that must be drawn (frequencies). We do not want to spend time drawing radius=0. radius = circles + min_radius; radiusmax = circlemax + min_radius; plot(x'*radius,y'*radius,':','color',TextColor); % Draw circles plot(x*radiusmax,y*radiusmax,'-','color',TextColor); % Redraw last circle axisangles = 0:30:360; axisangles = axisangles(1:end-1); % Angles in which to draw the radial axis (trigonometric reference) R = [min_radius;radiusmax]; plot(R*cosd(axisangles),R*sind(axisangles),':','color',TextColor); % Draw radial axis, in the specified angles FrequecyLabels(circles,radius,FreqLabelAngle,TextColor); % Display frequency labels CardinalLabels(radiusmax,TextColor,label); % Display N, S, E, W %% Title and Legend title(TitleString,'color',TextColor,'fontweight',titlefontweight); % Display a title set(gca,'outerposition',[0 0 1 1]); % Check that the current axis fills the figure. if LegendType==2 leyenda = CreateLegend(vwinds,lablegend,legendvariable); % Create a legend cell string l = legend(leyenda,'location','southwest'); % Display the legend wherever (position is corrected) PrettyLegend(l,TextColor); % Display the legend in a good position elseif LegendType==1 disp(vwinds); caxis([vwinds(1) vwinds(end)]); colorbar('YTick',vwinds); end %% Outputs [count,speeds,directions,Table,colorSeq,barX,barY] = CreateOutputs(count,vwinds,N,n,RefN,RefE); function count = PivotTableCount(N,n,vwinds,speed,dir,NumberElements) count = zeros(length(N),length(vwinds)); for i=1:length(N) d1 = mod(N(i)-n,360); % Direction 1 is N-n d2 = N(i)+n; % Direction 2 is N+n if d1\u0026gt;d2 % If direction 1 is greater than direction 2 of the bin (d1 = -5 = 355, d2 = 5) cond = or(dir\u0026gt;=d1,dir\u0026lt;d2); % The condition is satisfied whenever d\u0026gt;=d1 or d\u0026lt;d2 else % For the rest of the cases, cond = and(dir\u0026gt;=d1,dir\u0026lt;d2); % Both conditions must be met for the same bin end counter = histc(speed(cond),vwinds); % If vmax was for instance 25, counter will have counts for these intervals: [\u0026gt;=0 y \u0026lt;5] [\u0026gt;=5 y \u0026lt;10] [\u0026gt;=10 y \u0026lt;15] [\u0026gt;=15 y \u0026lt;20] [\u0026gt;=20 y \u0026lt;25] [\u0026gt;=25] if isempty(counter); counter = zeros(1,size(count,2)); end % If counter is empty for any reason, set the counts to 0. count(i,:) = cumsum(counter); % Computing cumsum will make count to have the counts for [\u0026lt;5] [\u0026lt;10] [\u0026lt;15] [\u0026lt;20] [\u0026lt;25] [\u0026gt;=25] (cumulative count, so we have the radius for each speed) end count = count/NumberElements*100; % Frequency in percentage function DrawPatches(N,n,vwinds,count,colorfun,figcolor,min_radius) inv = strcmp(colorfun(1:3),'inv'); % INV = First three letters in cmap are inv if inv; colorfun = colorfun(4:end); end % if INV, cmap is the rest, excluding inv color = feval(colorfun,256); % Create color map color = interp1(linspace(1,length(vwinds),256),color,1:length(vwinds));% Get the needed values. if inv; color = flipud(color); end; % if INV, flip upside down the colormap plot(0,0,'.','color',figcolor,'markeredgecolor',figcolor,'markerfacecolor',figcolor); % This will create an empty legend entry. hold on; axis square; axis off; for i=1:length(N) for j=length(vwinds)ğŸ‘1 if j\u0026gt;1 r(1) = count(i,j-1); else r(1) = 0; % For the first case, radius is 0 end r(2) = count(i,j); r = r+min_radius; alpha = linspace(-n,n,100)+N(i); x1 = r(1) * sind(fliplr(alpha)); y1 = r(1) * cosd(fliplr(alpha)); x = [x1 r(2)*sind(alpha)]; % Create circular sectors y = [y1 r(2)*cosd(alpha)]; fill(x,y,color(j,:),'edgecolor',hsv2rgb(rgb2hsv(color(j,:)).*[1 1 0.7])); % Draw them in the specified coloe. Edge is slightly darker. %text(x(1),y(1),num2str(count(i,j))); %% add label end end function FrequecyLabels(circles,radius,angulo,TextColor) s = sind(angulo); c = cosd(angulo); % Get the positions in which labels must be placed if c\u0026gt;0; ha = 'left'; elseif c\u0026lt;0; ha = 'right'; else ha = 'center'; end % Depending on the sign of the cosine, horizontal alignment should be one or another if s\u0026gt;0; va = 'bottom'; elseif s\u0026lt;0; va = 'top'; else va = 'middle'; end % Depending on the sign of the sine , vertical alignment should be one or another for i=1:length(circles) text(radius(i)*c,radius(i)*s,[num2str(circles(i)) '%'],'HorizontalAlignment',ha,'verticalalignment',va,'color',TextColor); % display the labels for each circle end rmin = radius(1)-abs(diff(radius(1:2))); if rmin\u0026gt;0 if c\u0026gt;0; ha = 'right'; elseif c\u0026lt;0; ha = 'left'; else ha = 'center'; end % Depending on the sign of the cosine, horizontal alignment should be one or another if s\u0026gt;0; va = 'top'; elseif s\u0026lt;0; va = 'bottom'; else va = 'middle'; end % Depending on the sign of the sine , vertical alignment should be one or another text(rmin*c,rmin*s,'0%','HorizontalAlignment',ha,'verticalalignment',va,'color',TextColor); % display the labels for each circle end function CardinalLabels(circlemax,TextColor,labels) text( circlemax,0,[' ' labels.E],'HorizontalAlignment','left' ,'verticalalignment','middle','color',TextColor); % East label text( circlemax*cos(30*pi/180),circlemax*sin(30*pi/180),[' 30Â°'],'HorizontalAlignment','left' ,'verticalalignment','middle','color',TextColor); % East label text( circlemax*cos(60*pi/180),circlemax*sin(60*pi/180),[' 60Â°'],'HorizontalAlignment','left' ,'verticalalignment','middle','color',TextColor); text( (circlemax+3)*cos(120*pi/180),(circlemax+3)*sin(120*pi/180),['120Â°'],'HorizontalAlignment','left' ,'verticalalignment','middle','color',TextColor); text( (circlemax+4)*cos(150*pi/180),(circlemax+4)*sin(150*pi/180),['150Â°'],'HorizontalAlignment','left' ,'verticalalignment','middle','color',TextColor); text( (circlemax+4)*cos(210*pi/180),(circlemax+4)*sin(210*pi/180),['210Â°'],'HorizontalAlignment','left' ,'verticalalignment','middle','color',TextColor); text( (circlemax+3)*cos(240*pi/180),(circlemax+3)*sin(240*pi/180),['240Â°'],'HorizontalAlignment','left' ,'verticalalignment','middle','color',TextColor); text( circlemax*cos(300*pi/180),circlemax*sin(300*pi/180),[' 300Â°'],'HorizontalAlignment','left' ,'verticalalignment','middle','color',TextColor); text( circlemax*cos(330*pi/180),circlemax*sin(330*pi/180),[' 330Â°'],'HorizontalAlignment','left' ,'verticalalignment','middle','color',TextColor); text(-circlemax,0,[labels.W ' '],'HorizontalAlignment','right' ,'verticalalignment','middle','color',TextColor); % West label text(0, circlemax,labels.N ,'HorizontalAlignment','center','verticalalignment','bottom','color',TextColor); % North label text(0,-circlemax,labels.S ,'HorizontalAlignment','center','verticalalignment','top' ,'color',TextColor); % South label xlim([-circlemax circlemax]); ylim([-circlemax circlemax]); function leyenda = CreateLegend(vwinds,lablegend,legendvariable) leyenda = cell(length(vwinds),1); % Initialize legend cell array for j=1:length(vwinds) if j==length(vwinds) % When last index is reached string = sprintf('%s %s %g',legendvariable,'\\geq',vwinds(j)); % Display wind \u0026lt;= max wind else % For the rest of the indices string = sprintf('%g %s %s \u0026lt; %g',vwinds(j),'\\leq',legendvariable,vwinds(j+1)); % Set v1 \u0026lt;= v2 \u0026lt; v1 end string = regexprep(string,'0 \\leq','0 \u0026lt;'); % Replace \u0026quot;0 \u0026lt;=\u0026quot; by \u0026quot;0 \u0026lt;\u0026quot;, because wind speed = 0 is not displayed in the graph. leyenda{length(vwinds)-j+1} = string; end leyenda = [lablegend; leyenda]; % Add the title for the legend function PrettyLegend(l,TextColor) set(l,'units','normalized','box','off'); % Do not display the box POS = get(l,'position'); % get legend position (width and height) set(l,'position',[0 1-POS(4) POS(3) POS(4)],'textcolor',TextColor); % Put the legend in the upper left corner uistack(l,'bottom'); % Put the legend below the axis function [count,speeds,directions,Table,colorSeq,barX,barY] = CreateOutputs(count,vwinds,N,n,RefN,RefE) count = [count(:,1) diff(count,1,2)]; % Count had the accumulated frequencies. With this line, we get the frequency for each single direction and each single speed with no accumulation. speeds = vwinds; % Speeds are the same as the ones used in the Wind Rose Graph directions = mod(RefN - N'/90*(RefN-RefE),360); % Directions are the directions in which the sector is centered. Convert function reference to user reference vwinds(end+1) = inf; % Last wind direction is inf (for creating intervals) [directions,i] = sort(directions); % Sort directions in ascending order count = count(i,:); % Sort count in the same way. wspeeds = cell(1,length(vwinds)-1); for i=1:(length(vwinds)-1) if vwinds(i) == 0; s1 = '('; else s1 = '['; end % If vwinds(i) =0 interval is open, because count didn't compute windspeed = 0. wspeeds{i} = [s1 num2str(vwinds(i)) ' , ' num2str(vwinds(i+1)) ')'];% Create wind speed intervals end wdirs = cell(length(directions),1); for i=1:length(directions) wdirs{i} = sprintf('[%g , %g)',mod(directions(i)-n,360),directions(i)+n); % Create widn direction intervals end % countMark = find(count == max(max(count))); % countColumnLength = length(directions); % foundIndex = countMark -countColumnLength * floor(countMark/countColumnLength); % colorSeq = [mod(directions(foundIndex)-n,360),directions(foundIndex)+n]; WindZeroFreqency = 100-sum(sum(count)); % Wind speed = 0 appears 100-sum(total) % of the time. It does not have direction. WindZeroFreqency = WindZeroFreqency*(WindZeroFreqency/100\u0026gt;eps); % If frequency/100% is lower than eps, do not show that value. Table = [{'Frequencies (%)'},{''},{'Wind Speed Interval'},repmat({''},1,numel(wspeeds));'Direction Interval (?','Direction ~',wspeeds,'TOTAL';[wdirs num2cell(directions) num2cell(count) num2cell(sum(count,2))]]; % Create table cell. Ready to xlswrite. Table(end+1,:) = [{'[0 , 360)','TOTAL'},num2cell(sum(count,1)),{sum(sum(count))}]; Table(end+1,1:2) = {'No Direction', 'Wind Speed = 0'}; % Show Wind Speed = 0 on table. %% find max count colorBar1 = sum(count,2); foundIndex = find(colorBar1 == max(colorBar1)); colorSeq = [mod(directions(foundIndex)-n,360),directions(foundIndex)+n]; barIndex = find(colorBar1\u0026gt;0); barX = []; barY = []; for i = 1:length(barIndex) barX(i) = directions(i); barY(i) = colorBar1(i); end %bp = bar(barX,barY); %bp(1).LineWidth = 3; %bp(foundIndex).EdgeColor = 'red'; Table{end,end} = WindZeroFreqency;  3. å¤šé¡¹å¼æ‹Ÿåˆ å¯ä»¥è‡ªå·±æ›´æ”¹nä¸ºä¸åŒçš„å¤šé¡¹å¼\nfunction [t,y1,a]=getfitLine(x,y,TapeLine) n=5; p = polyfit(x,y,n); for i=1:n+1 a(i)= p(i); end t = linspace(x(1),x(length(x)),TapeLine); if n==1; y1=a(1)*t+a(2); elseif n==2; y1=a(1)*t.^2+a(2)*t+a(3); elseif n==3; y1 = a(1)*t.^3 + a(2)*t.^2 + a(3)*t + a(4); elseif n==4; y1 = a(1)*t.^4 + a(2)*t.^3 + a(3)*t.^2 + a(4)*t+a(5); elseif n==5 y1= a(1)*t.^5+a(2)*t.^4+a(3)*t.^3+a(4)*t.^2+a(5)*t+a(6); end end  4. ä¸é”™çš„åœ¨å›¾ç‰‡ä¸­ç»˜åˆ¶ç®­å¤´ function hn=arrow3(p1,p2,s,w,h,ip,alpha,beta) % ARROW3 (R13) % ARROW3(P1,P2) draws lines from P1 to P2 with directional arrowheads. % P1 and P2 are either nx2 or nx3 matrices. Each row of P1 is an % initial point, and each row of P2 is a terminal point. % % ARROW3(P1,P2,S,W,H,IP,ALPHA,BETA) can be used to specify properties % of the line, initial point marker, and arrowhead. S is a character % string made with one element from any or all of the following 3 % columns: % % Color Switches LineStyle LineWidth % ------------------ ------------------- -------------------- % k blacK (default) - solid (default) 0.5 points (default) % y Yellow : dotted 0 no lines % m Magenta -. dashdot / LineWidthOrder % c Cyan -- dashed % r Red * LineStyleOrder _______ __ % g Green ^ | % b Blue / \\ | % w White Arrowhead / \\ Height % a Asparagus / \\ | % d Dark gray / \\ | % e Evergreen /___ ___\\ __|__ % f Firebrick | | | | % h Hot pink |-- Width --| % i Indigo | | | | % j Jade | | % l Light gray | | % n Nutbrown | | % p Pear | | % q kumQuat Line --\u0026gt;| |\u0026lt;--LineWidth % s Sky blue | | % t Tawny | | % u bUrgundy | | % v Violet | | % z aZure | | % x random Initial / \\ % o colorOrder Point --\u0026gt;( )\u0026lt;--IP % | magnitude Marker \\_ _/ % % ------------------------------------------------------------- % Color Equivalencies % ------------------------------------------------------------- % ColorOrder Arrow3 | Simulink Arrow3 % ---------- ---------- | ---------- ---------- % Color1 Blue | LightBlue aZure % Color2 Evergreen | DarkGreen Asparagus % Color3 Red | Orange kumQuat % Color4 Sky blue | Gray Light gray % Color5 Violet | % Color6 Pear | % Color7 Dark gray | % ------------------------------------------------------------- % % The components of S may be specified in any order. Invalid % characters in S will be ignored and replaced by default settings. % % Prefixing the color code with '_' produces a darker shade, e.g. % '_t' is dark tawny; prefixing the color code with '^' produces a % lighter shade, e.g. '^q' is light kumquat. The relative brightness % of light and dark color shades is controlled by the scalar parameter % BETA. Color code prefixes do not affect black (k), white (w), or % the special color switches (xo|). % % ColorOrder may be achieved in two fashions: The user may either % set the ColorOrder property (using RGB triples) or define the % global variable ColorOrder (using a string of valid color codes). % If the color switch is specified with 'o', and the global variable % ColorOrder is a string of color codes (color switches less 'xo|', % optionally prefixed with '_' or '^'), then the ColorOrder property % will be set to the sequence of colors indicated by the ColorOrder % variable. The color sequence 'bersvpd' matches the default % ColorOrder property. If the color switch is specified with 'o', and % the global variable ColorOrder is empty or invalid, then the current % ColorOrder property will be used. Note that the ColorOrder variable % takes precedence over the ColorOrder property. % % The magnitude color switch is used to visualize vector magnitudes % in conjunction with a colorbar. If the color switch is specified % with '|', colors are linearly interpolated from the current ColorMap % according to the length of the associated line. This option sets % CLim to [MinM,MaxM], where MinM and MaxM are the minimum and maximum % magnitudes, respectively. % % The current LineStyleOrder property will be used if LineStyle is % specified with '*'. MATLAB cycles through the line styles defined % by the LineStyleOrder property only after using all colors defined % by the ColorOrder property. If however, the global variable % LineWidthOrder is defined, and LineWidth is specified with '/', % then each line will be drawn with sequential color, linestyle, and % linewidth. % % W (default = 1) is a vector of arrowhead widths; use W = 0 for no % arrowheads. H (default = 3W) is a vector of arrowhead heights. If % vector IP is neither empty nor negative, initial point markers will % be plotted with diameter IP; for default diameter W, use IP = 0. % The units of W, H and IP are 1/72 of the PlotBox diagonal. % % ALPHA (default = 1) is a vector of FaceAlpha values ranging between % 0 (clear) and 1 (opaque). FaceAlpha is a surface (arrowhead and % initial point marker) property and does not affect lines. FaceAlpha % is not supported for 2D rendering. % % BETA (default = 0.4) is a scalar that controls the relative % brightness of light and dark color shades, ranging between 0 (no % contrast) and 1 (maximum contrast). % % Plotting lines with a single color, linestyle, and linewidth is % faster than plotting lines with multiple colors and/or linestyles. % Plotting lines with multiple linewidths is slower still. ARROW3 % chooses renderers that produce the best screen images; exported % or printed plots may benefit from different choices. % % ARROW3(P1,P2,S,W,H,'cone',...) will plot cones with bases centered % on P1 in the direction given by P2. In this instance, P2 is % interpreted as a direction vector instead of a terminal point. % Neither initial point markers nor lines are plotted with the 'cone' % option. % % HN = ARROW3(P1,P2,...) returns a vector of handles to line and % surface objects created by ARROW3. % % ARROW3 COLORS will plot a table of named colors with default % brightness. ARROW3('colors',BETA) will plot a table of named % colors with brightness BETA. % % ARROW3 attempts to preserve the appearance of existing axes. In % particular, ARROW3 will not change XYZLim, View, or CameraViewAngle. % ARROW3 does not, however, support stretch-to-fill scaling. AXIS % NORMAL will restore the current axis box to full size and remove any % restrictions on the scaling of units, but will likely result in % distorted arrowheads and initial point markers. See % (arrow3_messes_up_my_plots.html). % % If a particular aspect ratio or variable limit is required, use % DASPECT, PBASPECT, AXIS, or XYZLIM commands before calling ARROW3. % Changing limits or aspect ratios after calling ARROW3 may alter the % appearance of arrowheads and initial point markers. ARROW3 sets % XYZCLimMode to manual for all plots, sets DataAspectRatioMode to % manual for linear plots, and sets PlotBoxAspectRatioMode to manual % for log plots and 3D plots. CameraViewAngleMode is also set to % manual for 3D plots. % % ARROW3 UPDATE will restore the appearance of arrowheads and % initial point markers that have become corrupted by changes to % limits or aspect ratios. ARROW3('update',SF) will redraw initial % point markers and arrowheads with scale factor SF. If SF has one % element, SF scales W, H and IP. If SF has two elements, SF(1) % scales W and IP, and SF(2) scales H. If SF has three elements, % SF(1) scales W, SF(2) scales H, and SF(3) scales IP. All sizes are % relative to the current PlotBox diagonal. % % ARROW3 UPDATE COLORS will update the magnitude coloring of % arrowheads, initial point markers, and lines to conform to the % current ColorMap. % % HN = ARROW3('update',...) returns a vector of handles to updated % objects. % % EXAMPLES: % % % 2D vectors % arrow3([0 0],[1 3]) % arrow3([0 0],[1 2],'-.e') % arrow3([0 0],[10 10],'--x2',1) % arrow3(zeros(10,2),50*rand(10,2),'x',1,3) % arrow3(zeros(10,2),[10*rand(10,1),500*rand(10,1)],'u') % arrow3(10*rand(10,2),50*rand(10,2),'x',1,[],1) % % % 3D vectors % arrow3([0 0 0],[1 1 1]) % arrow3(zeros(20,3),50*rand(20,3),'--x1.5',2) % arrow3(zeros(100,3),50*rand(100,3),'x',1,3) % arrow3(zeros(10,3),[10*rand(10,1),500*rand(10,1),50*rand(10,1)],'a') % arrow3(10*rand(10,3),50*rand(10,3),'x',[],[],0) % % % 3D animation % t=(0:pi/40:8*pi)'; u=cos(t); v=sin(t); % plot3(20*t,u,v) % axis([0,600,-1.5,1.5,-1.5,1.5]) % grid on, view(35,25) % hold on % pbaspect([1.8,1.4,1]) % arrow3(zeros(3),diag([500,1.5,1.5]),'l',0.7,[],0) % p=[20*t,u,v]; inc=4:1:length(t); % p2=p(inc,:); p1=p(inc-1,:); % hn=arrow3(p1(1,:),p2(1,:),'0_b',0.7); % for i=2:1:length(p1) % delete(hn) % hn=arrow3(p1(i,:),p2(i,:),'0_b',0.7); % pause(0.01) % end % hold off % % % Cone plot % t=(pi/8:pi/8:2*pi)'; p1=[cos(t) sin(t) t]; p2=repmat([0 0 1],16,1); % arrow3(p1,p2,'x',2,4,'cone'), hold on % plot3(p1(:,1),p1(:,2),p1(:,3)), hold off % pause % change cone size % arrow3('update',[1,2]) % % % Just for fun % arrow3(zeros(100,3),50*rand(100,3),'x',8,4,[],0.95) % light('position',[-10 -10 -10],'style','local') % light('position',[60,60,60]), lighting gouraud % % % ColorOrder variable, color code prefixes, and Beta % global ColorOrder, ColorOrder='^ui^e_hq^v'; % theta=[0:pi/22:pi/2]'; % arrow3(zeros(12,2),[cos(theta),sin(theta)],'1.5o',1.5,[],[],[],0.5) % % % ColorOrder property, LineStyleOrder, and LineWidthOrder % global ColorOrder, ColorOrder=[]; % set(gca,'ColorOrder',[1,0,0;0,0,1;0.25,0.75,0.25;0,0,0]) % set(gca,'LineStyleOrder',{'-','--','-.',':'}) % global LineWidthOrder, LineWidthOrder=[1,2,4,8]; % w=[1,2,3,4]; h=[4,6,4,2]; % arrow3(zeros(4,2),[10*rand(4,1),500*rand(4,1)],'o*/',w,h,0) % % % Magnitude coloring % colormap spring % arrow3(20*randn(20,3),50*randn(20,3),'|',[],[],0) % set(gca,'color',0.7*[1,1,1]) % set(gcf,'color',0.5*[1,1,1]), grid on, colorbar % pause % change the ColorMap and update colors % colormap hot % arrow3('update','colors') % % % LogLog plot % set(gca,'xscale','log','yscale','log'); % axis([1e2,1e8,1e-2,1e-1]); hold on % p1=repmat([1e3,2e-2],15,1); % q1=[1e7,1e6,1e5,1e4,1e3,1e7,1e7,1e7,1e7,1e7,1e7,1e6,1e5,1e4,1e3]; % q2=1e-2*[9,9,9,9,9,7,5,4,3,2,1,1,1,1,1]; p2=[q1',q2']; % global ColorOrder, ColorOrder=[]; % set(gca,'ColorOrder',rand(15,3)) % arrow3(p1,p2,'o'), grid on, hold off % % % SemiLogX plot % set(gca,'xscale','log','yscale','linear'); % axis([1e2,1e8,1e-2,1e-1]); hold on % p1=repmat([1e3,0.05],15,1); % q1=[1e7,1e6,1e5,1e4,1e3,1e7,1e7,1e7,1e7,1e7,1e7,1e6,1e5,1e4,1e3]; % q2=1e-2*[9,9,9,9,9,7,5,4,3,2,1,1,1,1,1]; p2=[q1',q2']; % arrow3(p1,p2,'x'), grid on, hold off % % % SemiLogY plot % set(gca,'xscale','linear','yscale','log'); % axis([2,8,1e-2,1e-1]); hold on % p1=repmat([3,2e-2],17,1); % q1=[7,6,5,4,3,7,7,7,7,7,7,7,7,6,5,4,3]; % q2=1e-2*[9,9,9,9,9,8,7,6,5,4,3,2,1,1,1,1,1]; p2=[q1',q2']; % set(gca,'LineStyleOrder',{'-','--','-.',':'}) % arrow3(p1,p2,'*',1,[],0), grid on, hold off % % % Color tables % arrow3('colors') % default color table % arrow3('colors',0.3) % low contrast color table % arrow3('colors',0.5) % high contrast color table % % % Update initial point markers and arrowheads % % relative to the current PlotBox diagonal % arrow3('update') % redraw same size % arrow3('update',2) % redraw double size % arrow3('update',0.5) % redraw half size % arrow3('update',[0.5,2,1]) % redraw W half size, % % H double size, and % % IP same size % % See also (arrow3_examples.html), (arrow3_messes_up_my_plots.html). % Copyright(c)2002-2011 Version 5.14 % Tom Davis (tdavis@metzgerwillard.com) % Jeff Chang % Revision History: % % 07/27/11 - Added animation example. (TD) % 05/13/09 - Corrected spelling errors (TD) % 03/16/08 - Updated contact information (TD) % 10/23/07 - Corrected zero magnitude exclusion (TD) % 09/08/07 - Added cone plot option; removed adaptive grid % spacing; corrected scale factor; removed \u0026quot;nearly\u0026quot; % tight limits (TD) % 07/24/07 - Ignore zero-magnitude input (TD) % 07/08/07 - Modified named colors to match named Simulink % colors; added light and dark shades for basic % colors (ymcrgb) (TD) % 07/01/07 - Modified named colors to match default ColorOrder % colors (TD) % 06/24/07 - Error checking for empty P1, P2 (TD) % 06/17/07 - Trim colors,W,H,IP,ALPHA to LENGTH(P1) (TD) % 05/27/07 - Magnitude coloring and documentation revision (TD) % 03/10/07 - Improved code metrics (TD) % 02/21/07 - Preserve existing axis appearance; % use relative sizes for W, H, and IP; % removed version checking; minor bug fixes (TD) % 01/09/04 - Replaced calls to LINSPACE, INTERP1, and % COLORMAP (TD) % 12/17/03 - Semilog examples, CAXIS support, magnitude % coloring, and color updating; use CData instead % of FaceColor; minor bug fixes (TD) % 07/17/03 - Changed 2D rendering from OpenGL to ZBuffer; % defined HN for COLORS and UPDATE options (TD) % 02/27/03 - Replaced calls to RANDPERM, VIEW, REPMAT, SPHERE, % and CYLINDER; added ZBuffer for log plots, RESET % for CLA and CLF, and ABS for W and H (TD) % 02/01/03 - Added UPDATE scale factor and MATLAB version % checking, replaced call to CROSS (TD) % 12/26/02 - Added UserData and UPDATE option (TD) % 11/16/02 - Added more named colors, color code prefix, % global ColorOrder, ALPHA , and BETA (TD) % 10/12/02 - Added global LineWidthOrder, % vectorized W, H and IP (TD) % 10/05/02 - Changed CLF to CLA for subplot support, % added ColorOrder and LineStyleOrder support (TD) % 04/27/02 - Minor log plot revisions (TD) % 03/26/02 - Added log plot support (TD) % 03/24/02 - Adaptive grid spacing control to trade off % appearance vs. speed based on size of matrix (JC) % 03/16/02 - Added \u0026quot;axis tight\u0026quot; for improved appearance (JC) % 03/12/02 - Added initial point marker (TD) % 03/03/02 - Added aspect ratio support (TD) % 03/02/02 - Enhanced program's user friendliness (JC) % (lump Color, LineStyle, and LineWidth together) % 03/01/02 - Replaced call to ROTATE (TD) % 02/28/02 - Modified line plotting, % added linewidth and linestyle (TD) % 02/27/02 - Minor enhancements on 3D appearance (JC) % 02/26/02 - Minor enhancements for speed (TD\u0026amp;JC) % 02/26/02 - Optimize PLOT3 and SURF for speed (TD) % 02/25/02 - Return handler, error handling, color effect, % generalize for 2D/3D vectors (JC) % 02/24/02 - Optimize PLOT3 and SURF for speed (TD) % 02/23/02 - First release (JC\u0026amp;TD) %------------------------------------------------------------------------- % Error Checking global LineWidthOrder ColorOrder if nargin\u0026lt;8 || isempty(beta), beta=0.4; end beta=abs(beta(1)); if nargout, hn=[]; end if strcmpi(p1,'colors') % plot color table if nargin\u0026gt;1, beta=abs(p2(1)); end LocalColorTable(1,beta); return end fig=gcf; ax=gca; if strcmpi(p1,'update'), ud=get(ax,'UserData'); % update LocalLogCheck(ax); if size(ud,2)\u0026lt;13, error('Invalid UserData'), end set(ax,'UserData',[]); sf=[1,1,1]; flag=0; if nargin\u0026gt;1 if strcmpi(p2,'colors'), flag=1; % update colors elseif ~isempty(p2) % update surfaces sf=p2(1)*sf; n=length(p2(:)); if n\u0026gt;1, sf(2)=p2(2); if n\u0026gt;2, sf(3)=p2(3); end, end end end H=LocalUpdate(fig,ax,ud,sf,flag); if nargout, hn=H; end, return end InputError=['Invalid input, type HELP ',upper(mfilename),... ' for usage examples']; if nargin\u0026lt;2, error(InputError), end [r1,c1]=size(p1); [r2,c2]=size(p2); if c1\u0026lt;2 || c1\u0026gt;3 || r1*r2==0, error(InputError), end if r1~=r2, error('P1 and P2 must have same number of rows'), end if c1~=c2, error('P1 and P2 must have same number of columns'), end p=sum(abs(p2-p1),2)~=0; cone=0; if nargin\u0026gt;5 \u0026amp;\u0026amp; ~isempty(ip) \u0026amp;\u0026amp; strcmpi(ip,'cone') % cone plot cone=1; p=sum(p2,2)~=0; if ~any(p), error('P2 cannot equal 0'), end set(ax,'tag','Arrow3ConePlot'); elseif ~any(p), error('P1 cannot equal P2') end if ~all(p) warning('Arrow3:ZeroMagnitude','Zero magnitude ignored') p1=p1(p,:); p2=p2(p,:); [r1,c1]=size(p1); end n=r1; Zeros=zeros(n,1); if c1==2, p1=[p1,Zeros]; p2=[p2,Zeros]; elseif ~any([p1(:,3);p2(:,3)]), c1=2; end L=get(ax,'LineStyleOrder'); C=get(ax,'ColorOrder'); ST=get(ax,'DefaultSurfaceTag'); LT=get(ax,'DefaultLineTag'); EC=get(ax,'DefaultSurfaceEdgeColor'); if strcmp(get(ax,'nextplot'),'add') \u0026amp;\u0026amp; strcmp(get(fig,'nextplot'),'add') Xr=get(ax,'xlim'); Yr=get(ax,'ylim'); Zr=get(ax,'zlim'); [xs,ys,xys]=LocalLogCheck(ax); restore=1; if xys, mode='auto'; if any([p1(:,3);p2(:,3)]), error('3D log plot not supported'), end if (xs \u0026amp;\u0026amp; ~all([p1(:,1);p2(:,1)]\u0026gt;0)) || ... (ys \u0026amp;\u0026amp; ~all([p1(:,2);p2(:,2)]\u0026gt;0)) error('Nonpositive log data not supported') end else mode='manual'; if strcmp(get(ax,'WarpToFill'),'on') warning('Arrow3:WarpToFill',['Stretch-to-fill scaling not ',... 'supported;\\nuse DASPECT or PBASPECT before calling ARROW3.']); end end set(ax,'XLimMode',mode,'YLimMode',mode,'ZLimMode',mode,... 'CLimMode','manual'); else restore=0; cla reset; xys=0; set(fig,'nextplot','add'); if c1==2, azel=[0,90]; else azel=[-37.5,30]; end set(ax,'UserData',[],'nextplot','add','View',azel); end %------------------------------------------------------------------------- % Style Control [vc,cn]=LocalColorTable(0); prefix=''; OneColor=0; if nargin\u0026lt;3, [c,ls,lw]=LocalValidateCLSW;% default color, linestyle/width else [c,ls,lw]=LocalValidateCLSW(s); if length(c)\u0026gt;1, if sum('_^'==c(1)), prefix=c(1); end, c=c(2); end if c=='x' % random named color (less white) [ignore,i]=sort(rand(1,23)); c=cn(i,:); %#ok elseif c=='o' % ColorOrder if length(ColorOrder) [c,failed]=LocalColorMap(lower(ColorOrder),vc,cn,beta); if failed, ColorOrderWarning=['Invalid ColorOrder ',... 'variable, current ColorOrder property will be used']; warning('Arrow3:ColorOrder',ColorOrderWarning) else C=c; end end, c=C; elseif c=='|', map=get(fig,'colormap'); % magnitude coloring M=(p1-p2); M=sqrt(sum(M.*M,2)); minM=min(M); maxM=max(M); if maxM-minM\u0026lt;1, minM=0; end set(ax,'clim',[minM,maxM]); c=LocalInterp(minM,maxM,map,M); elseif ~sum(vc==c), c='k'; ColorWarning=['Invalid color switch, ',... 'default color (black) will be used']; warning('Arrow3:Color',ColorWarning) end end if length(c)==1 % single color c=LocalColorMap([prefix,c],vc,cn,beta); OneColor=1; end set(ax,'ColorOrder',c); c=LocalRepmat(c,[ceil(n/size(c,1)),1]); if ls~='*', set(ax,'LineStyleOrder',ls); end % LineStyleOrder if lw=='/' % LineWidthOrder if length(LineWidthOrder) lw=LocalRepmat(LineWidthOrder(:),[ceil(n/length(LineWidthOrder)),1]); else lw=0.5; LineWidthOrderWarning=['Undefined LineWidthOrder, ',... 'default width (0.5) will be used']; warning('Arrow3:LineWidthOrder',LineWidthOrderWarning) end end if nargin\u0026lt;4 || isempty(w), w=1; end % width w=LocalRepmat(abs(w(:)),[ceil(n/length(w)),1]); if nargin\u0026lt;5 || isempty(h), h=3*w; end % height h=LocalRepmat(abs(h(:)),[ceil(n/length(h)),1]); if nargin\u0026gt;5 \u0026amp;\u0026amp; ~isempty(ip) \u0026amp;\u0026amp; ~cone % ip ip=LocalRepmat(ip(:),[ceil(n/length(ip)),1]); i=find(ip==0); ip(i)=w(i); else ip=-ones(n,1); end if nargin\u0026lt;7 || isempty(alpha), alpha=1; end a=LocalRepmat(alpha(:),[ceil(n/length(alpha)),1]); % FaceAlpha %------------------------------------------------------------------------- % Log Plot if xys units=get(ax,'units'); set(ax,'units','points'); pos=get(ax,'position'); set(ax,'units',units); if strcmp(get(ax,'PlotBoxAspectRatioMode'),'auto') set(ax,'PlotBoxAspectRatio',[pos(3),pos(4),1]); end par=get(ax,'PlotBoxAspectRatio'); set(ax,'DataAspectRatio',[par(2),par(1),par(3)]); % map coordinates onto unit square q=[p1;p2]; xr=Xr; yr=Yr; if xs, xr=log10(xr); q(:,1)=log10(q(:,1)); end if ys, yr=log10(yr); q(:,2)=log10(q(:,2)); end q=q-LocalRepmat([xr(1),yr(1),0],[2*n,1]); dx=xr(2)-xr(1); dy=yr(2)-yr(1); q=q*diag([1/dx,1/dy,1]); q1=q(1:n,:); q2=q(n+1:end,:); else xs=0; ys=0; dx=0; dy=0; xr=0; yr=0; end %------------------------------------------------------------------------- % Line if ~cone set(ax,'DefaultLineTag','arrow3'); if length(lw)==1 if lw\u0026gt;0 if OneColor \u0026amp;\u0026amp; ls(end)~='*' \u0026amp;\u0026amp; n\u0026gt;1 % single color, linestyle/width P=zeros(3*n,3); i=1:n; P(3*i-2,:)=p1(i,:); P(3*i-1,:)=p2(i,:); P(3*i,1)=NaN; H1=plot3(P(:,1),P(:,2),P(:,3),'LineWidth',lw); else % single linewidth H1=plot3([p1(:,1),p2(:,1)]',[p1(:,2),p2(:,2)]',... [p1(:,3),p2(:,3)]','LineWidth',lw); end else H1=[]; end else % use LineWidthOrder ls=LocalRepmat(cellstr(L),[ceil(n/size(L,1)),1]); H1=Zeros; for i=1:n H1(i)=plot3([p1(i,1),p2(i,1)],[p1(i,2),p2(i,2)],... [p1(i,3),p2(i,3)],ls{i},'Color',c(i,:),'LineWidth',lw(i)); end end else % cone plot P=zeros(3*n,3); i=1:n; P(3*i-2,:)=p1(i,:); P(3*i-1,:)=p1(i,:); P(3*i,1)=NaN; H1=plot3(P(:,1),P(:,2),P(:,3)); end %------------------------------------------------------------------------- % Scale if ~restore, axis tight, end ar=get(ax,'DataAspectRatio'); ar=sqrt(3)*ar/norm(ar); set(ax,'DataAspectRatioMode','manual'); if xys, sf=1; else xr=get(ax,'xlim'); yr=get(ax,'ylim'); zr=get(ax,'zlim'); sf=norm(diff([xr;yr;zr],1,2)./ar')/72; end %------------------------------------------------------------------------- % UserData c=c(1:n,:); w=w(1:n); h=h(1:n); ip=ip(1:n); a=a(1:n); set(ax,'UserData',[get(ax,'UserData');p1,p2,c,w,h,ip,a]); %------------------------------------------------------------------------- % Arrowhead whip=sf*[w,h,ip]; if xys, whip=whip*sqrt(2)/72; p1=q1; p2=q2; end w=whip(:,1); h=whip(:,2); ip=whip(:,3); if cone % cone plot delete(H1), H1=[]; p2=p2./LocalRepmat(sqrt(sum(p2.*p2,2)),[1,3]); p2=p1+p2.*LocalRepmat(ar,[n,1]).*LocalRepmat(h,[1,3]); end W=(p1-p2)./LocalRepmat(ar,[n,1]); W=W./LocalRepmat(sqrt(sum(W.*W,2)),[1,3]); % new z direction U=[-W(:,2),W(:,1),Zeros]; N=sqrt(sum(U.*U,2)); i=find(N\u0026lt;eps); j=length(i); U(i,:)=LocalRepmat([1,0,0],[j,1]); N(i)=ones(j,1); U=U./LocalRepmat(N,[1,3]); % new x direction V=[W(:,2).*U(:,3)-W(:,3).*U(:,2),... % new y direction W(:,3).*U(:,1)-W(:,1).*U(:,3),... W(:,1).*U(:,2)-W(:,2).*U(:,1)]; m=20; % surface grid spacing set(ax,'DefaultSurfaceTag','arrow3','DefaultSurfaceEdgeColor','none'); r=[0;1]; theta=(0:m)/m*2*pi; Ones=ones(1,m+1); x=r*cos(theta); y=r*sin(theta); z=r*Ones; G=surface(x/2,y/2,z); dar=diag(ar); X=get(G,'XData'); Y=get(G,'YData'); Z=get(G,'ZData'); H2=Zeros; [j,k]=size(X); for i=1:n % translate, rotate, and scale H2(i)=copyobj(G,ax); xyz=[w(i)*X(:),w(i)*Y(:),h(i)*Z(:)]*[U(i,:);V(i,:);W(i,:)]*dar; x=reshape(xyz(:,1),j,k)+p2(i,1); y=reshape(xyz(:,2),j,k)+p2(i,2); z=reshape(xyz(:,3),j,k)+p2(i,3); LocalSetSurface(xys,xs,ys,dx,dy,xr,yr,... x,y,z,a(i),c(i,:),H2(i),2,m+1); end delete(G); %------------------------------------------------------------------------- % Initial Point Marker if any(ip\u0026gt;0) theta=(-m:2:m)/m*pi; phi=(-m:2:m)'/m*pi/2; cosphi=cos(phi); x=cosphi*cos(theta); y=cosphi*sin(theta); z=sin(phi)*Ones; G=surface(x*ar(1)/2,y*ar(2)/2,z*ar(3)/2); X=get(G,'XData'); Y=get(G,'YData'); Z=get(G,'ZData'); H3=zeros(n,1); for i=1:n % translate if ip(i)\u0026gt;0 H3(i)=copyobj(G,ax); x=p1(i,1)+X*ip(i); y=p1(i,2)+Y*ip(i); z=p1(i,3)+Z*ip(i); LocalSetSurface(xys,xs,ys,dx,dy,xr,yr,... x,y,z,a(i),c(i,:),H3(i),m+1,m+1); end end, delete(G); else H3=[]; end %------------------------------------------------------------------------- % Finish if restore, xr=Xr; yr=Yr; zr=Zr; if xys, set(ax,'DataAspectRatioMode','auto'); end else axis tight xr=get(ax,'xlim'); yr=get(ax,'ylim'); zr=get(ax,'zlim'); set(ax,'nextplot','replace'); end azel=get(ax,'view'); if abs(azel(2))==90, renderer='ZBuffer'; else renderer='OpenGL'; c1=3; end set(fig,'Renderer',renderer); set(ax,'LineStyleOrder',L,'ColorOrder',C,'DefaultLineTag',LT,... 'DefaultSurfaceTag',ST,'DefaultSurfaceEdgeColor',EC,... 'xlim',xr,'ylim',yr,'zlim',zr,'clim',get(ax,'CLim')); if c1==3, set(ax,'CameraViewAngle',get(ax,'CameraViewAngle'),... 'PlotBoxAspectRatio',get(ax,'PlotBoxAspectRatio')); end if nargout, hn=[H1(:);H2(:);H3(:)]; end %------------------------------------------------------------------------- % Local Functions %------------------------------------------------------------------------- % Update function H=LocalUpdate(fig,ax,ud,sf,flag) global ColorOrder p1=ud(:,1:3); p2=ud(:,4:6); c=ud(:,7:9); a=ud(:,13); w=sf(1)*ud(:,10); h=sf(2)*ud(:,11); ip=sf(3)*ud(:,12); H=get(ax,'children'); tag=get(H,'tag'); type=get(H,'type'); delete(H(strcmp(tag,'arrow3') \u0026amp; strcmp(type,'surface'))); set(fig,'nextplot','add'); set(ax,'nextplot','add'); H1=[]; if flag, map=get(fig,'colormap'); % update colors M=(p1-p2); M=sqrt(sum(M.*M,2)); minM=min(M); maxM=max(M); H1=H(strcmp(tag,'arrow3') \u0026amp; strcmp(type,'line')); MagnitudeWarning=['Cannot perform magnitude coloring on lines ',... 'that\\nwere drawn with a single color, linestyle, and linewidth']; if length(H1)\u0026gt;1 for i=1:length(H1) % update line colors x=get(H1(i),'xdata'); y=get(H1(i),'ydata'); z=get(H1(i),'zdata'); if length(x)\u0026gt;2 % multiple lines warning('Arrow3:Magnitude',MagnitudeWarning), continue end m=sqrt((x(1)-x(2))^2+(y(1)-y(2))^2+(z(1)-z(2))^2); c=LocalInterp(minM,maxM,map,m); set(H1(i),'color',c); end elseif length(H1)==1 warning('Arrow3:Magnitude',MagnitudeWarning) end c=LocalInterp(minM,maxM,map,M); end set(ax,'ColorOrder',c); % update surfaces ColorOrder=[]; if strcmp(get(ax,'tag'),'Arrow3ConePlot') H=arrow3(p1,p2,'o' ,w,h,'cone',a); % update cones else H=arrow3(p1,p2,'o0',w,h, ip,a); end, H=[H1(:);H(:)]; set(ax,'nextplot','replace'); %------------------------------------------------------------------------- % SetSurface function LocalSetSurface(xys,xs,ys,dx,dy,xr,yr,x,y,z,a,c,H,n,m) if xys x=x*dx+xr(1); y=y*dy+yr(1); if xs, x=10.^x; end if ys, y=10.^y; end end cd=zeros(n,m,3); cd(:,:,1)=c(1); cd(:,:,2)=c(2); cd(:,:,3)=c(3); set(H,'XData',x,'YData',y,'ZData',z,'CData',cd,'FaceAlpha',a); %------------------------------------------------------------------------- % ColorTable function [vc,cn]=LocalColorTable(n,beta) vc='kymcrgbadefhijlnpqstuvzw'; % valid color codes % k y m c cn=[0.00,0.00,0.00; 1.00,1.00,0.00; 1.00,0.00,1.00; 0.00,1.00,1.00; % r g b a 1.00,0.00,0.00; 0.00,1.00,0.00; 0.00,0.00,1.00; 0.42,0.59,0.24; % d e f h 0.25,0.25,0.25; 0.00,0.50,0.00; 0.70,0.13,0.13; 1.00,0.41,0.71; % i j l n 0.29,0.00,0.51; 0.00,0.66,0.42; 0.50,0.50,0.50; 0.50,0.20,0.00; % p q s t 0.75,0.75,0.00; 1.00,0.50,0.00; 0.00,0.75,0.75; 0.80,0.34,0.00; % u v z w 0.50,0.00,0.13; 0.75,0.00,0.75; 0.38,0.74,0.99; 1.00,1.00,1.00]; % Named Simulink Colors (zaql) % LightBlue = 0.38 0.74 0.99 = aZure % DarkGreen = 0.42 0.59 0.24 = Asparagus % Orange = 1.00 0.50 0.00 = kumQuat % Gray = 0.50 0.50 0.50 = Light gray % % Default ColorOrder Property Colors (bersvpd) % Color1 = 0.00 0.00 1.00 = Blue % Color2 = 0.00 0.50 0.00 = Evergreen % Color3 = 1.00 0.00 0.00 = Red % Color4 = 0.00 0.75 0.75 = Sky blue % Color5 = 0.75 0.00 0.75 = Violet % Color6 = 0.75 0.75 0.00 = Pear % Color7 = 0.25 0.25 0.25 = Dark gray if n, clf reset % plot color table name={'blacK','Yellow','Magenta','Cyan',... 'Red','Green','Blue','Asparagus',... 'Dark gray','Evergreen','Firebrick','Hot pink',... 'Indigo','Jade','Light gray','Nutbrown',... 'Pear','kumQuat','Sky blue','Tawny',... 'bUrgundy','Violet','aZure','White'}; c=['yptn';'gjae';'czsb';'hmvi';'qrfu';'wldk']; set(gcf,'DefaultAxesXTick',[],'DefaultAxesYTick',[],... 'DefaultAxesXTickLabel',[],'DefaultAxesYTickLabel',[],... 'DefaultAxesXLim',[0,0.75],'DefaultAxesYLim',[0,0.75],... 'DefaultRectangleEdgeColor','none'); for i=1:24, subplot(4,6,i); box on j=find(vc==c(i)); title(name{j}); dark=LocalBrighten(cn(j,:),-beta); light=LocalBrighten(cn(j,:),beta); rectangle('Position',[0,0.00,0.75,0.25],'FaceColor',dark); rectangle('Position',[0,0.25,0.75,0.25],'FaceColor',cn(j,:)); rectangle('Position',[0,0.50,0.75,0.25],'FaceColor',light); rectangle('Position',[0,0.00,0.75,0.75],'EdgeColor','k'); if rem(i,6)==1 set(gca,'YTickLabel',{'dark','normal','light'},... 'YTick',[0.125,0.375,0.625]); if i==19 text(0,-0.25,['{\\bf\\itARROW3} Named Color Table ',... '( \\beta = ',num2str(beta),' )']); end end end end %------------------------------------------------------------------------- % ColorMap function [C,failed]=LocalColorMap(c,vc,cn,beta) n=length(c); failed=0; C=zeros(n,3); i=1; j=1; while 1 if ~sum([vc,'_^']==c(i)), failed=1; break, end if sum('_^'==c(i)) if i+1\u0026gt;n, failed=1; break, end if ~sum(vc==c(i+1)), failed=1; break, end cc=cn(vc==c(i+1),:); gamma=beta; if c(i)=='_', gamma=-beta; end C(j,:)=LocalBrighten(cc,gamma); i=i+2; else C(j,:)=cn(vc==c(i),:); i=i+1; end if i\u0026gt;n, break, end, j=j+1; end if n\u0026gt;j, C(j+1:n,:)=[]; end %------------------------------------------------------------------------- % Brighten function C=LocalBrighten(c,beta) if sum([c==0,c==1])==3 \u0026amp;\u0026amp; sum(c==0)\u0026lt;3 \u0026amp;\u0026amp; sum(c==1)\u0026lt;3 if beta\u0026lt;0 C=(1+beta)*c; else C=c; C(C==0)=beta; end else C=c.^((1-min(1-sqrt(eps),abs(beta)))^sign(beta)); end %------------------------------------------------------------------------- % Repmat function B=LocalRepmat(A,siz) if length(A)==1, B(prod(siz))=A; B(:)=A; B=reshape(B,siz); else [m,n]=size(A); mind=(1:m)'; nind=(1:n)'; mind=mind(:,ones(1,siz(1))); nind=nind(:,ones(1,siz(2))); B=A(mind,nind); end %------------------------------------------------------------------------- % Interp function v=LocalInterp(xmin,xmax,y,u) [m,n]=size(y); h=(xmax-xmin)/(m-1); p=length(u); v=zeros(p,n); k=min(max(1+floor((u-xmin)/h),1),m-1); s=(u-xmin)/h-k+1; for j=1:n, v(:,j)=y(k,j)+s.*(y(k+1,j)-y(k,j)); end v(v\u0026lt;0)=0; v(v\u0026gt;1)=1; %------------------------------------------------------------------------- % Check for supported log scales function [xs,ys,xys]=LocalLogCheck(ax) xs=strcmp(get(ax,'xscale'),'log'); ys=strcmp(get(ax,'yscale'),'log'); zs=strcmp(get(ax,'zscale'),'log'); if zs, error('Z log scale not supported'), end xys=xs+ys; if xys, azel=get(ax,'view'); if abs(azel(2))~=90, error('3D log plot not supported'), end end %------------------------------------------------------------------------- % Generate valid value for color, linestyle and linewidth function [c,ls,lw]=LocalValidateCLSW(s) if nargin\u0026lt;1, c='k'; ls='-'; lw=0.5; else % identify linestyle if findstr(s,'--'), ls='--'; s=strrep(s,'--',''); elseif findstr(s,'-.'), ls='-.'; s=strrep(s,'-.',''); elseif findstr(s,'-'), ls='-'; s=strrep(s,'-',''); elseif findstr(s,':'), ls=':'; s=strrep(s,':',''); elseif findstr(s,'*'), ls='*'; s=strrep(s,'*',''); else ls='-'; end % identify linewidth tmp=double(s); tmp=find(tmp\u0026gt;45 \u0026amp; tmp\u0026lt;58); if length(tmp) if any(s(tmp)=='/'), lw='/'; else lw=str2double(s(tmp)); end s(tmp)=''; else lw=0.5; end % identify color if length(s), s=lower(s); if length(s)\u0026gt;1, c=s(1:2); else c=s(1); end else c='k'; end end  5. è¯¯å·®å¸¦ æœ‰æ—¶å€™å¯èƒ½è¾“å…¥å¹³å‡å€¼ï¼Œå’Œä¸Šä¸‹çº¿è¯¯å·®ï¼Œè¯¥ç¨‹åºæ¯”å†…ç½®çš„errorbaræ›´å¥½ç”¨ä¸€äº› ```matlab function errorbare(sty,x,y,xbar,ybar,symbol) % ERRORBARE Enhanced Errorbar Function. % ERRORBARE(STY,X,Y,Xbar,Ybar,symbol) % It can draw errorbar along X/Y/Dual axis % in normal,semilog,loglog coordinate system, % and adjust length of top line automatically, % can also control dotstyle and color in the same way with errorbar. % % If the lower and upper error range of x/y is different, they should be % input as [lower,upper] if x/y is a column vector; % for a row vector, they should be [lower;uper]. % % parameter STY include 12 types: % v,h,d,vlogx,hlogx,dlogx,vlogy,hlogy, % dlogy,vlogd,hlogd,dlogd % where % v stands for vertical errorbarï¼Œ % h draws horizontal errorbarï¼Œ % d means dual direction, % logx corresponding to semilogxï¼Œcan use preffix v/h/d % logy corresponding to semilogyï¼Œcan use preffix v/h/d % logd corresponding to loglogï¼Œcan use preffix v/h/d % è¯¯å·®æ£’å‡½æ•°å¢å¼ºç‰ˆ % ERRORBARE(STY,X,Y,Xbar,Ybar,symbol) % å¯åœ¨å„ä¸ªåæ ‡ç³»ä¸­æ²¿Xè½´ï¼ŒYè½´æ–¹å‘ï¼Œæˆ–è€…ä¸¤è½´æ–¹å‘ç»˜åˆ¶è¯¯å·®æ£’ï¼Œ % èƒ½å¤Ÿæ ¹æ®æ‰€é€‰åæ ‡ç±»å‹è°ƒæ•´ç«¯ç‚¹çº¿é•¿ã€‚ % å¢åŠ å¯¹è¯¯å·®æ£’çš„çº¿å‹æ§åˆ¶ï¼Œç”¨æ³•ä¸åŸerrorbarå‡½æ•°ä¸­ç›¸åŒ % % è‹¥ä¸Šä¸‹é™èŒƒå›´ä¸åŒï¼ŒXä¸ºåˆ—å‘é‡æ—¶åº”æŒ‰ç…§ % [ä¸‹é™,ä¸Šé™] çš„æ ¼å¼è¾“å…¥ï¼Œè‹¥ä¸ºè¡Œå‘é‡åˆ™ä¸º [ä¸‹é™;ä¸Šé™] % % STY å‚æ•°åŒ…æ‹¬ v,h,d,vlogx,hlogx,dlogx,vlogy,hlogy, %\tdlogy,vlogd,hlogd,dlogd å…±12ç§ % v è¡¨ç¤ºè¯¯å·®æ£’å‚ç›´ï¼Œ % h è¡¨ç¤ºè¯¯å·®æ£’æ°´å¹³ï¼Œ % d (dual) æ˜¾ç¤ºåŒè½´è¯¯å·®ï¼Œ % logx å¯¹åº” semilogxï¼Œå‰ç¼€ v,h,d æ„ä¹‰åŒä¸Š % logy å¯¹åº” semilogyï¼Œå‰ç¼€ v,h,d æ„ä¹‰åŒä¸Š % logd å¯¹åº” loglogï¼Œå‰ç¼€ v,h,d æ„ä¹‰åŒä¸Š % For example, %\tx = 1:10; %\ty = sin(x)+2; %\te = std(y)*ones(size(x)); %\terrorbare(x,y,e)\t% use function \"errorbar\" directly %\terrorbare(x,y,e,'or') %\terrorbare('v',x,y,e)\t% \"e\" is error of \"y\" %\terrorbare('v',x,y,[e;2*e]) % try different error limits %\terrorbare('hlogx',x,y,e) % \"e\" is error of \"x\" hereï¼Œ %\terrorbare('d',x,y,e,e) %\terrorbare('d',x,y,e,e,'or') %\terrorbare('dlogd',x,y,e,e) % % by Henry Sting Email: henrysting@hotmail.com % $Revision: 1.2 $ $Date: 2010-2-8 $ lx=[];ux=[];ly=[];uy=[]; % è¯¯å·®æ£’ä¸Šä¸‹é™ xl=[];xr=[];yl=[];yr=[]; % ç«¯ç‚¹çŸ­çº¿å·¦å³é™ if ~isstr(sty) if nargin == 3 errorbar(sty,x,y) return elseif nargin == 4 errorbar(sty,x,y,xbar) return elseif nargin  4 error('Please assign adopted coordinate system with symbol parameters.') end elseif isstr(sty) if size(x)~=size(y) error('Coordinate array should be equal.') end if nargin == 4 symbol='ob'; if length(x)~=length(xbar) error('Format of Xbar is illegal.') end if sty(1) == 'v' ybar=xbar;xbar=[]; elseif sty(1) == 'h' ybar=[]; elseif sty(1) == 'd' error('Parameters are not enough.') else error('Symbol parameter is illegal.') end elseif nargin == 5 \u0026 ~isstr(ybar) symbol='ob'; if length(x)~=length(xbar) error('Format of Xbar is illegal.') elseif length(y)~=length(ybar) error('Format of Ybar is illegal.') end elseif nargin == 5 \u0026 isstr(ybar) symbol=ybar;ybar=[]; if length(x)~=length(xbar) error('Format of Xbar is illegal.') end if sty(1) == 'v' ybar=xbar;xbar=[]; elseif sty(1) == 'h' ybar=[]; elseif sty(1) == 'd' error('Parameters are not enough.') else error('Symbol parameter is illegal.') end elseif nargin == 6 if length(x)~=length(xbar) error('Format of Xbar is illegal.') elseif length(y)~=length(ybar) error('Format of Ybar is illegal.') end if ~isstr(symbol) error('Symbol should be string') end end end [ls,col,mark,msg] = colstyle(symbol); if ~isempty(msg), error(msg); end symbol = [ls mark col]; % Use marker only on data part esymbol = ['-' col]; % Make sure bars are solid % è½¬æ¢ä¸ºåˆ—è·é˜µ [a,b]=size(x); if a 6. ä¸€ç§matlabç¼–ç¨‹é…ç½®å†™æ³• é…ç½®æ–‡ä»¶ Initial.db\n 0%%%%%%Configure 0.01 0.99 0.01 0.99 0%%%%%%getLine 100 15 0 30 90 50 0%%%%%HSV 0 25 170 255 30 170 30 170 0%%%%pile process cut 100 %[100~200] 0.8 %[0~1] 0.73 %[0~1] 0.47 %[0~0.5]  è¯»å–éƒ¨åˆ†çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªx_coordinate.\nfunction [x_coordinate] = readConfTest(filename) RowNumber=getRowFromFile(filename); f = fopen(filename) ; tline = cell(1, RowNumber) ; for i = 1 : RowNumber tline{i} = fgetl(f); y = sscanf( tline{i} , '%f') ; x_coordinate(i)=y; end end function row=getRowFromFile(filename) fid=fopen(filename,'rt'); % tæ˜¯å‘Šè¯‰freadæ˜¯è¿™é‡Œæ–‡æœ¬æ–‡ä»¶ row=1; while ~feof(fid) % ä¸€æ¬¡æ€§è¯»å–10000å­—ç¬¦ï¼Œè®¡ç®—å…¶ä¸­çš„å›è½¦ä¸ªæ•°ï¼Œå…¶ä¸­10æ˜¯å›è½¦çš„ASCIIç¼–ç  % '*char'è¡¨ç¤ºæ¯æ¬¡è¯»å–ä¸€ä¸ªå­—ç¬¦ï¼Œ*è¡¨ç¤ºè¾“å‡ºä¹Ÿæ˜¯å­—ç¬¦ % æ”¾å¿ƒfreadç°åœ¨å·²ç»å¯ä»¥è‡ªåŠ¨è¯†åˆ«ä¸­æ–‡äº†ï¼Œä¸‡ä¸€è¿˜æ˜¯è¯†åˆ«ä¸äº†ï¼Œ % è¯·åœ¨fopenä¸­æŒ‡å®šæ–‡ä»¶ç¼–ç æ ¼å¼ï¼Œæ¯”å¦‚gbk row=row+sum(fread(fid,10000,'*char')==char(10)); % ä¸‹é¢è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼çš„æ–¹æ³•ï¼Œä½†æ˜¯æ•ˆç‡ä½å¾ˆå¤šï¼Œå¤§æ¦‚æ˜¯ä¸Šé¢çš„ä¸€åŠ % 'char'è¡¨ç¤ºæ¯æ¬¡è¯»å–ä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯é»˜è®¤è¾“å‡ºdoubleï¼Œ % ä¹Ÿå°±æ˜¯è¯´è¯»å–charç„¶åè½¬æ¢doubleä¸­é—´æœ‰è½¬æ¢èƒ½å¿«å—ï¼Ÿ % row=row+sum(fread(fid,10000,'char')==10); end fclose(fid); %row=row+1; end  7. Cell and array a. è°ƒç”¨cellæ•°æ®çš„æ–¹å¼æ˜¯{} åŒºåˆ†äºarrayï¼ˆä½¿ç”¨[]åˆ›å»ºarrayï¼‰çš„()è°ƒç”¨æ•°ç»„æ•°æ®ã€‚\n","date":1468924917,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1468924917,"objectID":"1c5d87561f5f41882bedac4dc3fa9a10","permalink":"/blog/2016/07/19/matlabxiao-jie/","publishdate":"2016-07-19T18:41:57+08:00","relpermalink":"/blog/2016/07/19/matlabxiao-jie/","section":"archives","summary":"æœ€è¿‘ï¼Œæœ‰åšä¸€ä¸ªå›¾åƒå¤„ç†çš„é¡¹ç›®ï¼Œæ€»ç»“å‡ºä¸€äº›æœ‰ç”¨çš„maltlabå°å·¥å…·ã€‚\n Numsubplot windRose å¤šé¡¹å¼æ‹Ÿåˆ ç®­å¤´ è¯¯å·®å¸¦ matlabç¼–ç¨‹é…ç½® cell and array ","tags":null,"title":"matlabå°ç»“","type":"archives"},{"authors":null,"categories":["prolog"],"content":"prologç¼–ç¨‹å·¥å…·: swi-prolog\n 1. cut-fail 2. prolog ç›¸å…³é“¾æ¥ 3. prolog è°ƒè¯• 4. å¯ä»¥å°è¯•è¿›è¡Œçš„ä¸»é¢˜é˜…è¯»æ–¹å¼ 5. prologåŸºç¡€çŸ¥è¯†ç‚¹ 6. if-then-elseçš„å†™æ³• 7. DCSå†™æ³• 8. p99é—®é¢˜é›† 9. å‡ æœ¬ä¸é”™çš„é€»è¾‘ä¹¦ç± 10. æˆ‘è´­ä¹°çš„å‡ æœ¬ä¹¦ç±  1. cut-fail ç»“åˆThe Science Of programming å’Œ Learn prolog now,è§‰å¾—cut-failçš„ç›´è§‰åº”è¯¥å¦‚ä¸‹ï¼š\næŠŠproof developmentçš„è¿‡ç¨‹å’Œprologçš„è¿‡ç¨‹ ç»“åˆèµ·æ¥ï¼ ä¹Ÿå°±æ˜¯cut-failå…¶å®å°±æ˜¯åªè¿›è¡Œå†…å±‚çš„å¾ªç¯ï¼Œè€Œä¸è·³å‡ºæ¥ï¼Œå³å†…å±‚æ‰§è¡Œå®Œåˆ™ç»“æŸã€‚ å‚è€ƒTSOP P52 some general hints on developping proofs.\n2. prolog ç›¸å…³é“¾æ¥\na. swi-prolog . æ³¨æ„SWI-Prologæ¯”è¾ƒå¼ºå¤§çš„åœ°æ–¹æ˜¯å¼€æºï¼Œè€Œä¸”æä¾›è¾ƒå¤šçš„libraries,æä¾›è¾ƒå¤šçš„predicates. b. scisTus . æ–‡æ¡£ä»‹ç»å¾—ä¸é”™ï¼Œä¸å¥½çš„åœ°æ–¹å°±æ˜¯not free. æ‰€ä»¥å¯ä»¥å½“ä½œå­¦ä¹ çš„åœ°æ–¹ã€‚ c. Learn Prolog Now!. ä¸€ä¸ªå¾ˆå¥½çš„å…¥é—¨æ•™ç¨‹ å¯ä»¥ç»“åˆLeo Sterlingçš„The art of prolog,å’ŒWilliam F. ClockSinçš„Programming in Prolog(2003) å¯ä»¥è¿›ä¸€æ­¥æŸ¥æŸ¥githubæ–¹å‘ç›¸å…³èµ„æ–™ d. Artificial Intelligence Programming in Prolog (AIPP), EdinBurgh(prologç ”ç©¶åŸºåœ°ï¼‰çš„è¯¾ç¨‹,å†…æœ‰å¾ˆå¤špdfå’Œpptã€‚ e. samer_prolog æä¾›äº†å¾ˆå¤šçš„åº“ï¼Œå€¼å¾—å­¦ä¹ ã€‚ f. learn prolog nowè¯¾ç¨‹. é™„å¸¦ä¸€ä¸ªä¸­æ–‡ç¿»è¯‘. g. cs9414. INTRODUCTION TO PROLOG PROGRAMMING. åˆšå¼€å§‹å…¥é—¨çš„å°±æ˜¯å®ƒã€‚ h. J.R.Fisher æ•™ç¨‹ j. ä¸ªäººå°ä»‹ç»3. prolog è°ƒè¯•\na. trace è¿›è¡Œè¯¦ç»†çš„è·Ÿè¸ªï¼Œä¼šcall exitï¼ˆæ­£å¸¸é€€å‡ºï¼‰ ï¼Œå¦‚æœå¤±è´¥åˆ™failï¼Œfailåˆ™ä¼šæ‰§è¡Œredoï¼Œç›´åˆ°exitæˆ–è€…failé€€å‡ºã€‚ b. notrace ä½¿ç”¨notraceé€€å‡ºè¯¦ç»†çš„è·Ÿè¸ªã€‚ ç±»ä¼¼çš„debug,nodebug.\nåˆå§‹ç•Œé¢ æ·»åŠ predicateçš„trace 4. å¯ä»¥å°è¯•è¿›è¡Œçš„ä¸»é¢˜é˜…è¯»æ–¹å¼\nä¸»é¢˜ï¼šLists\tShort Description: ä¸€ä¸ªç»å…¸çš„æ•°æ®ç»“æ„ï¼Œå…¶ä¸­çš„append/3å°†ä¼šç”¨äºdifferentiate listsä¸­ï¼Œè¿›ä¸€æ­¥çš„è¿ç”¨äºDCS(define clause statement) The art of prolog(1986) Sterling and shapiro :\tTAOP\tLearn Prolog Now Patrick Blackburn, Johan Bosand Kristina Striegnitz :\tLPN\tåˆ†ä¸¤æ­¥è®²è§£ï¼š1.Lists 2.More Lists(append reverse) The Craft of Prolog Richard A.O Keefe :\tTCOP\tAdventure in Prolog(1990) Dennis Merriitt\tAIP\tAn Introduction to prolog programming (1990) Patrick Saint-Dizier\tAITPP\tProlog Verses you(1989) An Intouduction to logic Programming A. -L. Johansson A.Ericson-Granskog A.Edman\tPVY\tProgramming in prolog(2003) using ISO Wiliam F. Clocksin ,Chrisopher S. Mellish\tPIP\tCases and effects William F.clockSin(1997)\tCAE\tProlog the standard P. DeranSart ,A.Eddbail, L. Cervoni\tPTS\tProlog and Natural-Language Analysis Fernando C. N. Pereira and Stuart M. Shieber(1987)\tPANLA\t 5. prologåŸºç¡€çŸ¥è¯†ç‚¹\na. cd(\u0026lsquo;è·¯å¾„\u0026rsquo;). è·¯å¾„æ˜¯ä½ çš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ã€‚ b. pwd.\nå¯ä»¥æ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„è·¯å¾„ã€‚ c. [main]\nå…¶å®ç›¸å½“äºä¼šå»æŸ¥è¯¢å½“å‰ç›®å½•ä¸‹çš„main.plå¹¶æŠŠå®ƒåŠ è½½è¿›æ¥(ç±»ä¼¼äºconsult(\u0026lsquo;è·¯å¾„/main.pl\u0026rsquo;).)ï¼Œå¯ä»¥è°ƒç”¨mainé‡Œå¤´çš„æ‰€æœ‰çš„predicatesã€‚ å½“ç„¶åœ¨æ–‡ä»¶å†…ä¹Ÿå¯ä»¥å†™ä¸ºï¼š\n:- [main].  d. file_search_path(demo,\u0026lsquo;è·¯å¾„\u0026rsquo;) demoå¯ä»¥æ˜¯ä»»ä½•çš„å­—ç¬¦ä¸²ï¼Œè·¯å¾„å†™å¯¹äº†ï¼Œä»¥åæƒ³è¦è®¿é—®è·¯å¾„ä¸‹çš„æ–‡ä»¶åªéœ€è¦\n:- [demo(æ–‡ä»¶å)].  6. if-then-elseçš„å†™æ³•ï¼š (A - B; C). å¦‚æœAæˆç«‹åˆ™æ‰§è¡ŒBï¼Œå¿½ç•¥Cï¼Œå¦‚æœAä¸æˆç«‹ï¼Œåˆ™æ‰§è¡ŒCï¼Œå¿½ç•¥B. 7. DCSå†™æ³• s --\u0026gt; simple_s,conj,simple_s. s --\u0026gt; simple_s. simple_s --\u0026gt; np(subject), vp. np(_) --\u0026gt; det, n;det,adjectives,n. np(X) --\u0026gt; pro(X). vp --\u0026gt; v, np(object). vp --\u0026gt; v. det --\u0026gt; [the]. det --\u0026gt; [a]. n --\u0026gt; [woman]. n --\u0026gt; [man]. v --\u0026gt; [shoots]. adjectives --\u0026gt; adjective. adjectives --\u0026gt; adjective,adjective. adjective --\u0026gt; [young]. adjective --\u0026gt; [beautiful]. adjective --\u0026gt; [sunshine]. adjective --\u0026gt; [lovely]. adjective --\u0026gt; [sweet]. adjective --\u0026gt; [handsome]. pro(subject) --\u0026gt; [he]. pro(subject) --\u0026gt; [she]. pro(subject) --\u0026gt; [i]. pro(object) --\u0026gt; [him]. pro(object) --\u0026gt; [her]. pro(object) --\u0026gt; [me]. conj --\u0026gt; [and]. conj --\u0026gt; [or]. conj --\u0026gt; [but]. conj --\u0026gt; [so].  8. p99é—®é¢˜é›†.\nç¼–ç¨‹ç•Œé¢å’Œç¼–ç¨‹æƒ³æ³•:å¤šæ–‡ä»¶å¤šåº“ç¼–ç¨‹ï¼Œæœ€å¥½è¿˜æ˜¯ç±»ä¼¼æ­ç§¯æœ¨çš„è¿‡ç¨‹ã€‚\n9. å‡ æœ¬ä¸é”™çš„é€»è¾‘ä¹¦ç±\n A Discipline of Programming (Edsgar Dijkstarå†™çš„ä¹¦ï¼Œè¾ƒéš¾æ‡‚ï¼‰\n The-Science-Of-Programmingï¼ˆEdsgar Dijkstar æ›¿ä½œè€…Grieså†™äº†ä¹¦è¯„è¾ƒåŸºç¡€ æ˜¯1çš„ç®€åŒ–å¹¶åŠ å…¥äº†å¾ˆå¤šä¾‹å­ï¼‰\n Heijenoort.From Frege to Godel.A Source Book in Mathematical Logic_ 1879-1931. ç±»ä¼¼äºä¸Šé¢çš„æ•°å­¦é€»è¾‘ã€‚\n  10. æˆ‘è´­ä¹°çš„å‡ æœ¬ä¹¦ç± ä¹¦ç±\n","date":1468924873,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1468924873,"objectID":"6abb3e6506f78d9cc05bdd51411f4111","permalink":"/blog/2016/07/19/prologxiao-jie/","publishdate":"2016-07-19T18:41:13+08:00","relpermalink":"/blog/2016/07/19/prologxiao-jie/","section":"archives","summary":"prologç¼–ç¨‹å·¥å…·: swi-prolog\n 1. cut-fail 2. prolog ç›¸å…³é“¾æ¥ 3. prolog è°ƒè¯• 4. å¯ä»¥å°è¯•è¿›è¡Œçš„ä¸»é¢˜é˜…è¯»æ–¹å¼ 5. prologåŸºç¡€çŸ¥è¯†ç‚¹ 6. if-then-elseçš„å†™æ³• 7. DCSå†™æ³• 8. p99é—®é¢˜é›† 9. å‡ æœ¬ä¸é”™çš„é€»è¾‘ä¹¦ç± 10. æˆ‘è´­ä¹°çš„å‡ æœ¬ä¹¦ç± ","tags":null,"title":"prologå°ç»“","type":"archives"},{"authors":null,"categories":null,"content":"","date":1461715200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461715200,"objectID":"d1311ddf745551c9e117aa4bb7e28516","permalink":"/project/external-project/","publishdate":"2016-04-27T00:00:00Z","relpermalink":"/project/external-project/","section":"project","summary":"An example of linking directly to an external project website using `external_link`.","tags":["Demo"],"title":"External Project","type":"project"},{"authors":null,"categories":null,"content":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1461715200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461715200,"objectID":"8f66d660a9a2edc2d08e68cc30f701f7","permalink":"/project/internal-project/","publishdate":"2016-04-27T00:00:00Z","relpermalink":"/project/internal-project/","section":"project","summary":"An example of using the in-built project page.","tags":["Deep Learning"],"title":"Internal Project","type":"project"},{"authors":["Ye Zhaoliang"],"categories":["Demo"],"content":" Create a free website with Academic using Markdown, Jupyter, or RStudio. Choose a beautiful color theme and build anything with the Page Builder - over 40 widgets, themes, and language packs included!\nCheck out the latest demo of what you\u0026rsquo;ll get in less than 10 minutes, or view the showcase of personal, project, and business sites.\n ğŸ‘‰ Get Started ğŸ“š View the documentation ğŸ’¬ Ask a question on the forum ğŸ‘¥ Chat with the community ğŸ¦ Twitter: @source_themes @GeorgeCushen #MadeWithAcademic ğŸ’¡ Request a feature or report a bug â¬†ï¸ Updating? View the Update Guide and Release Notes â¤ï¸ Support development of Academic:  â˜•ï¸ Donate a coffee ğŸ’µ Become a backer on Patreon ğŸ–¼ï¸ Decorate your laptop or journal with an Academic sticker ğŸ‘• Wear the T-shirt ğŸ‘©â€ğŸ’» Contribute      Academic is mobile first with a responsive design to ensure that your site looks stunning on every device.   Key features:\n Page builder - Create anything with widgets and elements Edit any type of content - Blog posts, publications, talks, slides, projects, and more! Create content in Markdown, Jupyter, or RStudio Plugin System - Fully customizable color and font themes Display Code and Math - Code highlighting and LaTeX math supported Integrations - Google Analytics, Disqus commenting, Maps, Contact Forms, and more! Beautiful Site - Simple and refreshing one page design Industry-Leading SEO - Help get your website found on search engines and social media Media Galleries - Display your images and videos with captions in a customizable gallery Mobile Friendly - Look amazing on every screen with a mobile friendly version of your site Multi-language - 15+ language packs including English, ä¸­æ–‡, and PortuguÃªs Multi-user - Each author gets their own profile page Privacy Pack - Assists with GDPR Stand Out - Bring your site to life with animation, parallax backgrounds, and scroll effects One-Click Deployment - No servers. No databases. Only files.  Themes Academic comes with automatic day (light) and night (dark) mode built-in. Alternatively, visitors can choose their preferred mode - click the sun/moon icon in the top right of the Demo to see it in action! Day/night mode can also be disabled by the site admin in params.toml.\nChoose a stunning theme and font for your site. Themes are fully customizable.\nEcosystem  Academic Admin: An admin tool to import publications from BibTeX or import assets for an offline site Academic Scripts: Scripts to help migrate content to new versions of Academic  Install You can choose from one of the following four methods to install:\n one-click install using your web browser (recommended) install on your computer using Git with the Command Prompt/Terminal app install on your computer by downloading the ZIP files install on your computer with RStudio  Then personalize and deploy your new site.\nUpdating View the Update Guide.\nFeel free to star the project on Github to help keep track of updates.\nLicense Copyright 2016-present George Cushen.\nReleased under the MIT license.\n","date":1461110400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555459200,"objectID":"279b9966ca9cf3121ce924dca452bb1c","permalink":"/post/getting-started/","publishdate":"2016-04-20T00:00:00Z","relpermalink":"/post/getting-started/","section":"post","summary":"Create a beautifully simple website in under 10 minutes.","tags":["Academic"],"title":"Academic: the website builder for Hugo","type":"post"},{"authors":null,"categories":["scheme"],"content":"å†™äº†å¾ˆå¤šçš„matlabï¼Œæ„Ÿè§‰å°±é‚£æ ·ï¼ ç¼–äº†é‚£ä¹ˆå¤šæ•°å€¼fortranä»£ç ï¼Œä¹Ÿä¸è§è‡ªå·±ç¼–ç¨‹æœ‰å¤šå‰å®³ï¼ ç»ƒäº†é‚£ä¹ˆå¤šçš„javaé¡¹ç›®ï¼Œä¹Ÿæ„Ÿè§‰è‡ªå·±çš„æŠ€æœ¯è¿˜ä¸è§é£æ¶¨ï¼ ç”¨cè¯­è¨€æ‘¸ç´¢äº†å¥½å‡ å¹´ï¼Œä¹Ÿæ²¡è§å¾—æœ‰å¤ªæ·±çš„è§åœ°ï¼\nçœŸæ­£å†³å®šä½ å¯¹ç¨‹åºçš„æ·±å…¥ç†è§£ï¼Œéœ€è¦ä½ å»è®¤è¯†EOPLæˆ–è€…SICPï¼Œäº¦æˆ–è€…æ›´ç®€å•çš„TLS. ä»–ä»¬ä¹Ÿè®¸ä¸èƒ½æ•™ä½ ä»¬åšå¤§çš„é¡¹ç›®ï¼Œå´çœŸåˆ‡æ•™ä¼šä½ ç¼–å†™ç¨‹åºï¼Œæ€è€ƒç¨‹åºã€‚\nå›æƒ³èµ·ä¹‹å‰å†™çš„javaé¡¹ç›®ï¼Œååå¤å¤å°±ä¸ºäº†æ„é€ ä¸€é—¨è§£é‡Šå™¨è¯­è¨€ï¼Œç”¨æ¥è¾“é€æ•°æ®åˆ°æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œä¸æ–­ åœ¨ä¸­é—´è¿›è¡ŒéªŒè¯ï¼Œä¿è¯ä¼ é€’æ•°æ®çš„æœ‰æ•ˆæ€§ï¼Œä¸ºäº†æ­ä¸Šè¿™æ ·çš„ä¸€ä¸ªå¹³å°ï¼Œåå¤é‡æ„äº†ä»£ç ï¼Œé‡‡ç”¨äº†æ–°æŠ€æœ¯ï¼Œ ä¸æ–­é‡‡ç”¨æ¥å£æ¥æŠ½è±¡ï¼Œå‰²åˆ†å…·ä½“çš„å…³ç³»ï¼Œé˜²æ­¢æ•°æ®çš„æ±¡æŸ“ã€‚\nè€Œè¿™æ ·åšæ˜¯ä¸ºä½•ï¼Ÿ æˆ‘ä¹‹å‰æ²¡ç†è§£ï¼Œåæ¥åšäº†ä¸€é˜¶æ®µç¨‹åºè¯­è¨€è®¾è®¡æ–¹é¢çš„å·¥ä½œï¼Œå†™äº†å¤šä¸ªè§£é‡Šå™¨ä¹‹åï¼Œæˆ‘æ‰å‘ç°æ€»æ˜¯åŸºäº å­˜åœ¨ï¼ˆä»»æ„ï¼‰æŸä¸€å˜é‡æŸä¸€ç¨‹åºä¾›ä½ ä½¿ç”¨ï¼Œä½ çš„ç›®çš„å°±æ˜¯ä½¿ç”¨è¿™ä¸ªç¨‹åºæˆ–è€…å˜é‡æ¥å®ç°ä»–çš„èƒ½åŠ›ï¼ç„¶è€Œä¸ºäº†æ‡’æƒ°ï¼Œ ä½ åˆ›å»ºäº†å¾ˆå¤šå·¥å…·ï¼ˆå…¶å®ï¼Œåº”è¯¥æ˜¯é‡æ„ï¼Œé‡å†™ï¼‰æ¥ä¸æ–­è®©ä½ çš„å†™çš„ä¸œè¥¿å°‘ç‚¹ï¼ŒåŒæ—¶èƒ½å¤Ÿè¾¾åˆ°æ›´å¤šçš„åŠŸèƒ½ã€‚\nè¿™è¿‡ç¨‹ä¸å¥½ç»å†ï¼Œä¹Ÿä¸å¥½åšï¼Œå¾ˆå¤šäººä¹Ÿå¾ˆå°‘åšï¼Œæœ‰äº›äººä¸éœ€è¦åšï¼Œæ›´å¤šäººæ²¡æƒ³åšã€‚å¤§éƒ¨åˆ†çš„ä¼ä¸šçº§ç¨‹åºä¹Ÿä¸ä¼šæ•™ä½ å»å®ç°è¿™ä¸€è¿‡ç¨‹ï¼Œ ä¹Ÿä¸ä¼šè·Ÿä½ ä»ç¨‹åºç†è®ºå»ä»‹ç»ã€‚æ¶ç©ºç¨‹åºç†è®ºï¼Œå®Œæˆä¸€ç³»åˆ—çš„å·¥ç¨‹é¡¹ç›®æˆä¸ºäº†å¾ˆå¤šäººç¼–ç¨‹çš„ä¸»è¦ç›®çš„ã€‚å‡å°‘æ·±å…¥æ€è€ƒçš„æ—¶é—´ï¼Œ è¿½é€æ•æ·æ€§ç¼–ç¨‹æ–¹å¼ï¼Œå¿½ç•¥äº†é—²æš‡çš„ç¼–ç¨‹æ—¶é—´ï¼Œä¸€å‘³ç€å®ç°éœ€æ±‚ï¼Œä¸ªäººæ„Ÿè§‰ä¸æ˜¯ä¸€ä¸ªå¥½çš„å½’å®¿ã€ç›®çš„ã€è¿½æ±‚ï¼Œä½†å´æ˜¯ä¸€ç§å¥½çš„ç”Ÿæ´»æ‰‹æ®µã€å·¥ä½œæ–¹å¼ã€æ•ˆç‡å®ç°ã€‚\nç¼–ç¨‹åœ¨æˆ‘çœ¼é‡Œæ˜¯æ…¢å·¥å‡ºç»†æ´»ï¼Œæ‰€è°“çš„å¿«é€Ÿå¼€å‘çš„æå‡ºï¼Œæˆ‘å°±ä¸å¥½å¥‡ï¼Œå› ä¸ºæˆ‘ä¸åˆé€‚å®ƒã€‚çœŸæ­£èƒ½å¤Ÿè¿›ä¸€æ­¥æä¾›è‡ªå·±å¯¹äºå†™è¿‡ç¨‹åºç†è§£ï¼Œåº”è¯¥è¦è‡ªå·±èƒ½å¤Ÿå†™å‡ºä¸€ä¸ªè§£é‡Šå™¨è§£é‡Šä½ å†™çš„ç¨‹åºï¼Œè¿™ä¸ªå¯ä»¥ä½“ç°åœ¨TLS, TSS EOPL, SICPç­‰ã€‚\n letè§£é‡Šå™¨ letrecè§£é‡Šå™¨ procè§£é‡Šå™¨ stateè§£é‡Šå™¨ cpsè§£é‡Šå™¨ typeè§£é‡Šå™¨ ooè§£é‡Šå™¨ typeooè§£é‡Šå™¨ ","date":1460728210,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1460728210,"objectID":"2716cf2622e7178693ad638896dec4fc","permalink":"/blog/2016/04/15/neng-zhen-zheng-jiao-hui-ni-bian-cheng-neng-li-de-shi-zhong-xie/","publishdate":"2016-04-15T21:50:10+08:00","relpermalink":"/blog/2016/04/15/neng-zhen-zheng-jiao-hui-ni-bian-cheng-neng-li-de-shi-zhong-xie/","section":"archives","summary":"å†™äº†å¾ˆå¤šçš„matlabï¼Œæ„Ÿè§‰å°±é‚£æ ·ï¼ ç¼–äº†é‚£ä¹ˆå¤šæ•°å€¼fortranä»£ç ï¼Œä¹Ÿä¸è§è‡ªå·±ç¼–ç¨‹æœ‰å¤šå‰å®³ï¼ ç»ƒäº†é‚£ä¹ˆå¤šçš„javaé¡¹ç›®ï¼Œä¹Ÿæ„Ÿè§‰è‡ªå·±çš„æŠ€æœ¯è¿˜ä¸è§é£æ¶¨ï¼ ç”¨cè¯­è¨€æ‘¸ç´¢äº†å¥½å‡ å¹´ï¼Œä¹Ÿæ²¡è§å¾—æœ‰å¤ªæ·±çš„è§åœ°ï¼\nçœŸæ­£å†³å®šä½ å¯¹ç¨‹åºçš„æ·±å…¥ç†è§£ï¼Œéœ€è¦ä½ å»è®¤è¯†EOPLæˆ–è€…SICPï¼Œäº¦æˆ–è€…æ›´ç®€å•çš„TLS. ä»–ä»¬ä¹Ÿè®¸ä¸èƒ½æ•™ä½ ä»¬åšå¤§çš„é¡¹ç›®ï¼Œå´çœŸåˆ‡æ•™ä¼šä½ ç¼–å†™ç¨‹åºï¼Œæ€è€ƒç¨‹åºã€‚\n","tags":null,"title":"èƒ½çœŸæ­£æ•™ä¼šä½ ç¼–ç¨‹èƒ½åŠ›çš„æ˜¯é‡å†™","type":"archives"},{"authors":null,"categories":["Fast"],"content":"Fast8.15åœ¨4-15åˆå‘å¸ƒäº†æ–°ç‰ˆæœ¬ï¼Œå¢åŠ äº†ç›¸å…³åŠŸèƒ½ï¼Œå…·ä½“å‚è€ƒFastV8.15. ä¸‹é¢å°±32bit ubuntuæœºå­çš„å®‰è£…è¿‡ç¨‹åšç®€è¦è®°å½•ã€‚\n è¿è¡Œfastæºæ–‡ä»¶ä¸‹çš„Compling çš„makefile\ngfortran: error: ../bin/libmap-1.20.10.so: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½• makefile:733: recipe for target '../bin/FAST_glin32' failed make: [../bin/FAST_glin32] Error 1   ç›´æ¥è¿è¡Œmakeï¼Œç¼ºå°‘libmap,å¯ä»¥å‚è€ƒfastå®‰è£…\n å®‰è£…LibMap  æŠŠlibMap-1çš„Complingåº•ä¸‹çš„driver_makefileä¿®æ”¹ä¸€ä¸‹ä½ çš„FASTæœ¬åœ°è·¯å¾„ã€‚\n#FAST_DIR = ../Source #FAST_DIR = C:/Users/bjonkman/Documents/DATA/DesignCodes/simulators/FAST/SVNdirectory/branches/BJonkman/Source FAST_DIR = /paper/FAST_8.15/  ç›´æ¥å®šä½åˆ°MapDir/srcçš„makefileï¼Œè¿›è¡Œmakeä¸€ä¸‹\n/usr/bin/ld: cannot find -llapacke /usr/bin/ld: cannot find -llapacke collect2: error: ld returned 1 exit status makefile:81: recipe for target 'all' failed make: *** [all] Error 1  è¿™ä¸ªåŸå› æ˜¯å› ä¸ºç¼ºå°‘lapackeå¼€å‘è€…åº“,å‚è€ƒFASTå®‰è£…ã€‚\napt-get install lapacke-dev*  ç„¶åå°±å¯ä»¥makeï¼Œå¹¶æŠŠç”Ÿæˆçš„libmap-1.2.soæ”¾å…¥åˆ°fastdirçš„binæ–‡ä»¶å¤¹ï¼Œæ²¡æœ‰åˆ™åˆ›å»ºã€‚ è¿™æ ·å°±å®Œæˆäº†\n æµ‹è¯•   Test02.fst\n./FAST_glin32 Test02.fst ************************************************************************************************** FAST (v8.15.00a-bjj, 12-Apr-2016) Copyright (C) 2016 National Renewable Energy Laboratory This program comes with ABSOLUTELY NO WARRANTY. See the \u0026quot;license.txt\u0026quot; file distributed with this software for details. ************************************************************************************************** Running FAST (v8.15.00a-bjj, 12-Apr-2016), compiled as a 32-bit application using single precision linked with NWTC Subroutine Library (v2.08.00, 5-Apr-2016) Heading of the FAST input file: FAST Certification Test #02: AWT-27CR2 with many DOFs with startup and shutdown and steady wind Running ElastoDyn (v1.03.02a-bjj, 8-Apr-2016). Running AeroDyn (v15.02.03, 12-Apr-2016). Running AirfoilInfo (v1.01.00a-bjj, 5-Apr-2016). Running BEM (v1.01.00a, 12-Apr-2016). Running InflowWind (v3.02.00a-bjj, 11-Apr-2016). Opening InflowWind input file: ./AWT27/Test02_InflowWind.dat Running ServoDyn (v1.05.00a-bjj, 11-Mar-2016). Timestep: 0 of 20 seconds. Timestep: 2 of 20 seconds. Estimated final completion at 15:12:15. Timestep: 4 of 20 seconds. Estimated final completion at 15:12:14. Timestep: 6 of 20 seconds. Estimated final completion at 15:12:14. Timestep: 8 of 20 seconds. Estimated final completion at 15:12:14. Timestep: 10 of 20 seconds. Estimated final completion at 15:12:14. Timestep: 12 of 20 seconds. Estimated final completion at 15:12:14. Timestep: 14 of 20 seconds. Estimated final completion at 15:12:14. Timestep: 16 of 20 seconds. Estimated final completion at 15:12:14. Timestep: 18 of 20 seconds. Estimated final completion at 15:12:14. Timestep: 20 of 20 seconds. Estimated final completion at 15:12:14. Total Real Time: 9.788 seconds Total CPU Time: 9.708 seconds Simulation CPU Time: 9.636 seconds Simulated Time: 20 seconds Time Ratio (Sim/CPU): 2.0756 FAST terminated normally.  Test26.fst\n  ä¸é€šè¿‡çš„åŸå› æ˜¯æ²¡æœ‰ç¼–è¯‘DISCON_DLL.\nâ ./FAST_glin32 Test26.fst ************************************************************************************************** FAST (v8.15.00a-bjj, 12-Apr-2016) Copyright (C) 2016 National Renewable Energy Laboratory This program comes with ABSOLUTELY NO WARRANTY. See the \u0026quot;license.txt\u0026quot; file distributed with this software for details. ************************************************************************************************** Running FAST (v8.15.00a-bjj, 12-Apr-2016), compiled as a 32-bit application using single precision linked with NWTC Subroutine Library (v2.08.00, 5-Apr-2016) Heading of the FAST input file: FAST Certification Test #26: NREL 5.0 MW Baseline Wind Turbine (Onshore) Running ElastoDyn (v1.03.02a-bjj, 8-Apr-2016). Running BeamDyn (v1.01.03, 12-Apr-2016). Running BeamDyn (v1.01.03, 12-Apr-2016). Running BeamDyn (v1.01.03, 12-Apr-2016). Running AeroDyn (v15.02.03, 12-Apr-2016). Running AirfoilInfo (v1.01.00a-bjj, 5-Apr-2016). Running BEM (v1.01.00a, 12-Apr-2016). Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 1, Blade = 1 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 2, Blade = 1 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 3, Blade = 1 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 4, Blade = 1 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 1, Blade = 2 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 2, Blade = 2 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 3, Blade = 2 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 4, Blade = 2 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 1, Blade = 3 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 2, Blade = 3 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 3, Blade = 3 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 4, Blade = 3 Running InflowWind (v3.02.00a-bjj, 11-Apr-2016). Opening InflowWind input file: ./5MW_Baseline/NRELOffshrBsline5MW_InflowWind_12mps.dat Reading a 31x31 grid (145 m wide, 17.5 m to 162.5 m above ground) with a characteristic wind speed of 12 m/s. This full-field file was generated by TurbSim (v1.06.00, 21-Sep-2012) on 07-Jan-2014 at 12:50:45. Processed 1442 time steps of 20-Hz full-field data (72.05 seconds). Running ServoDyn (v1.05.00a-bjj, 11-Mar-2016). Running ServoDyn Interface for Bladed Controllers (using GNU Fortran for Linux, 14-Oct-2015). FAST_InitializeAll:SrvD_Init:BladedInterface_Init:The dynamic library ./5MW_Baseline/ServoData/DISCON_win32.dll could not be loaded. Check that the file exists in the specified location and that it is compiled for 32-bit applications. FAST encountered an error during module initialization. Simulation error level: FATAL ERROR Aborting FAST.   è§£å†³Test26æ— æ³•è¿è¡Œ  é¦–å…ˆï¼Œå®šä½åˆ°Fastçš„Complingç›®å½•ï¼ŒåŸºæœ¬å°šä¸ä¿®æ”¹ï¼Œæµ‹è¯•makeï¼ˆé»˜è®¤32bitï¼‰,é€šè¿‡ã€‚\nmake -f makefile_DISCON_DLL gfortran -O2 -m32 -fbacktrace -ffree-line-length-none -x f95-cpp-input -C -DIMPLICIT_DLLEXPORT -fPIC -c ../CertTest/5MW_Baseline/ServoData/Source/DISCON.f90 -o Obj_lin32/DISCON.obj -J Obj_lin32 -B Obj_lin32 gfortran -shared -O2 -m32 -fbacktrace -fPIC -I Obj_lin32 -o ../CertTest/5MW_Baseline/ServoData/DISCON_glin32.so \\ Obj_lin32/DISCON.obj  æ³¨æ„ä¸€å®šå¾—æŠŠ ç”Ÿæˆçš„DISCON_glin32.soè·¯å¾„å†™å…¥åˆ°å¯¹åº”çš„NREL5MW Servodataçš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚\nTest26.fstæ–‡ä»¶ï¼š \u0026quot;5MW_Baseline/NRELOffshrBsline5MW_Onshore_ServoDyn.dat\u0026quot; ServoFile - Name of file containing control and electrical-drive input parameters (quoted string) \u0026quot;unused\u0026quot; HydroFile - Name of file containing hydrodynamic input parameters (quoted string) NRELOffshrBsline5MW_Onshore_ServoDyn.dat æ›´æ”¹å¯¹åº”çš„DLL_FileName ä¸º ServoData/DISCON_glin32.so  æ³¨æ„è¿˜æ˜¯å¾—æŒ‰ç…§FAST éwindowså¹³å°çš„ç¼–è¯‘é¡ºåºæŠŠregisterç¼–è¯‘å¥½,ç„¶åä¸€æ¬¡MAP++ å’ŒFASTï¼Œä»¥åŠDISCONDLL.\nâ”€â ../bin/FAST_glin32 Test26.fst ************************************************************************************************** FAST (v8.15.00a-bjj, 12-Apr-2016) Copyright (C) 2016 National Renewable Energy Laboratory This program comes with ABSOLUTELY NO WARRANTY. See the \u0026quot;license.txt\u0026quot; file distributed with this software for details. ************************************************************************************************** Running FAST (v8.15.00a-bjj, 12-Apr-2016), compiled as a 32-bit application using single precision linked with NWTC Subroutine Library (v2.08.00, 5-Apr-2016) Heading of the FAST input file: FAST Certification Test #26: NREL 5.0 MW Baseline Wind Turbine (Onshore) Running ElastoDyn (v1.03.02a-bjj, 8-Apr-2016). Running BeamDyn (v1.01.03, 12-Apr-2016). Running BeamDyn (v1.01.03, 12-Apr-2016). Running BeamDyn (v1.01.03, 12-Apr-2016). Running AeroDyn (v15.02.03, 12-Apr-2016). Running AirfoilInfo (v1.01.00a-bjj, 5-Apr-2016). Running BEM (v1.01.00a, 12-Apr-2016). Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 1, Blade = 1 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 2, Blade = 1 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 3, Blade = 1 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 4, Blade = 1 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 1, Blade = 2 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 2, Blade = 2 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 3, Blade = 2 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 4, Blade = 2 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 1, Blade = 3 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 2, Blade = 3 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 3, Blade = 3 Warning: Turning off Unsteady Aerodynamics because C_nalpha is 0. BladeNode = 4, Blade = 3 Running InflowWind (v3.02.00a-bjj, 11-Apr-2016). Opening InflowWind input file: ./5MW_Baseline/NRELOffshrBsline5MW_InflowWind_12mps.dat Reading a 31x31 grid (145 m wide, 17.5 m to 162.5 m above ground) with a characteristic wind speed of 12 m/s. This full-field file was generated by TurbSim (v1.06.00, 21-Sep-2012) on 07-Jan-2014 at 12:50:45. Processed 1442 time steps of 20-Hz full-field data (72.05 seconds). Running ServoDyn (v1.05.00a-bjj, 11-Mar-2016). Running ServoDyn Interface for Bladed Controllers (using GNU Fortran for Linux, 14-Oct-2015). Timestep: 0 of 20 seconds. FAST_Solution0:CalcOutputs_And_SolveForInputs:SolveOption2:SrvD_CalcOutput:Running with torque and pitch control of the NREL offshore 5MW baseline wind turbine from DISCON.dll as written by J. Jonkman of NREL/NWTC for use in the IEA Annex XXIII OC3 studies. Timestep: 1 of 20 seconds. Estimated final completion at 16:45:58. Timestep: 2 of 20 seconds. Estimated final completion at 16:45:53. Timestep: 3 of 20 seconds. Estimated final completion at 16:45:58. Timestep: 4 of 20 seconds. Estimated final completion at 16:45:57. Timestep: 5 of 20 seconds. Estimated final completion at 16:45:57. Timestep: 6 of 20 seconds. Estimated final completion at 16:45:53. ","date":1460702764,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1460702764,"objectID":"1d21d601ba4bb86c20f258e16de18504","permalink":"/blog/2016/04/15/ubuntu15-dot-10-32bit-an-zhuang-fastv8-dot-15/","publishdate":"2016-04-15T14:46:04+08:00","relpermalink":"/blog/2016/04/15/ubuntu15-dot-10-32bit-an-zhuang-fastv8-dot-15/","section":"archives","summary":"Fast8.15åœ¨4-15åˆå‘å¸ƒäº†æ–°ç‰ˆæœ¬ï¼Œå¢åŠ äº†ç›¸å…³åŠŸèƒ½ï¼Œå…·ä½“å‚è€ƒFastV8.15. ä¸‹é¢å°±32bit ubuntuæœºå­çš„å®‰è£…è¿‡ç¨‹åšç®€è¦è®°å½•ã€‚\n","tags":null,"title":"Ubuntu15.10-32bit-å®‰è£…FastV8.15","type":"archives"},{"authors":null,"categories":["scheme"],"content":"A program is like an essay. The first version is a draft, and drafts demand editing. Program is also can be seen as data.\n ç›´è§‰è®¤è¯†proc,æå–bodyã€‚ å¯¹æ¯”è¯†åˆ«ã€‚ åŠ å£³ã€‚ ä¸‰è¡Œè¡¨æ ¼ï¼Œnåˆ—è¿­ä»£ã€‚  (value-of (proc (var body)) env) = (value-of (proc-exp (procedure (var body env)) val) env) = (value-of body ([var=val] env))  å‡½æ•°å…¶å®ä¹Ÿæ˜¯expressionï¼Œå®ƒå¯ä»¥è¢«consumeä¹Ÿå¯ä»¥è¢«produce.å‡­ç€è¿™ä¸ªè„‘ä¸­çš„ å°è±¡æ˜¯å¦å¯ä»¥å¸®åŠ©ä½ ç»§ç»­ç†è§£abstrationå’Œç¨‹åºå³æ•°æ®çš„æ€æƒ³ã€‚\næ‰€æœ‰çš„å‡½æ•°å’Œæ•°æ®çŠ¹å¦‚èŠ±ç”Ÿçš„å£³å’Œä»çš„å…³ç³»ã€‚\nåªæœ‰åŠ å£³å°±ç›¸å½“äºæ˜¯åˆ›å»ºä¸€å±‚æŠ½è±¡ï¼ŒæŠŠç±»ä¼¼çš„ä¸œè¥¿åŒ…è£¹èµ·æ¥ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥æ¢ç€ä¸€ç§æ€è·¯ ï¼ˆæ¯ä¸ªå£³é‡Œé¢éƒ½åŒ…ç€ç±»ä¼¼çš„èŠ±ç”Ÿä»ï¼Œåªä¸è¿‡å¯èƒ½å­˜åœ¨äº›è®¸ä¸åŒï¼‰\nTwo similar functions ; Los -\u0026gt; Boolean ; does l contain \u0026quot;dog\u0026quot; (define (contains-dog? l) (cond [(empty? l) #false] [else (or (string=? (first l) \u0026quot;dog\u0026quot;) (contains-dog? (rest l)))])) ; Los -\u0026gt; Boolean ; does l contain \u0026quot;cat\u0026quot; (define (contains-cat? l) (cond [(empty? l) #false] [else (or (string=? (first l) \u0026quot;cat\u0026quot;) (contains-cat? (rest l)))]))  åŠ å£³ åŠ ä¸Šä¸€ä¸ªå‡½æ•°çš®ï¼Œå¹¶å°ä¸Šä¸€å±‚ã€‚\n; String Los -\u0026gt; Boolean ; determines whether l contains the string s (define (contains? s l) (cond [(empty? l) #false] [else (or (string=? (first l) s) (contains? s (rest l)))]))  ç„¶åæˆ‘ä»¬å°±å¯ä»¥ç±»ä¼¼çš„æ”¹å†™äº†\n; Los -\u0026gt; Boolean ; does l contain \u0026quot;dog\u0026quot; (define (contains-dog? l) (contains? \u0026quot;dog\u0026quot; l)) ; Los -\u0026gt; Boolean ; does l contain \u0026quot;cat\u0026quot; (define (contains-cat? l) (contains? \u0026quot;cat\u0026quot; l))  è¿™ä¸ªå…¸å‹çš„è¿‡ç¨‹å°±æ˜¯å‡½æ•°æŠ½è±¡ã€‚è¿›ä¸€æ­¥å¯ä»¥å‚è€ƒHowToDesginProgramå’ŒTheLittleScheme. Note: ä½ éœ€è¦è§£æçš„å…¶å®æ˜¯èŠ±ç”Ÿä»ï¼Œä½†æ˜¯ä½ ä¸å¾—ä¸å…ˆæŠŠå£³æ‰“å¼€æˆ–è€…é€šè¿‡å¦å¤–ä¸€ç§æ–¹å¼ï¼Œæ¯”å¦‚çº¢å¤–çº¿ç­‰æŠ€æœ¯æŠŠå®ƒè¯†åˆ«å‡ºæ¥ã€‚\nä¹Ÿå°±æ˜¯è¯´è¿›ä¸€æ­¥å½’çº³çš„è¯ï¼Œä½ é¦–å…ˆå¾—recogniseè¯†åˆ«å‡ºæ¥ï¼Œç„¶åæ‰èƒ½è¿›è¡Œè§£æï¼ˆæå–å…¶ä¸­çš„è›‹ç™½è´¨ã€è„‚è‚ªã€çƒ­é‡ç­‰ï¼‰ã€‚\nä¿æŠ¤å®ƒçš„å£³ï¼Œç»™å®ƒæä¾›è¥å…»ï¼Œé˜²æ­¢å®ƒå—åˆ°æ„ŸæŸ“å’Œä¼¤å®³ã€‚\nè¡¨æ ¼è½¬æ¢é“¾æ¥.\n  index 0 1 2 â€¦   M a+S a+1*W+S a+2*W+S â€¦   f at M f(a+S) f(a+1*W+S) f(a+2*W+S) â€¦   Area W*f(a+S) W*f(a+1*W+S) W*f(a+2*W+S) â€¦   residual 60.00% 50.00% 40.00% â€¦      æ…¢å·¥æ‰èƒ½å‡ºç»†æ´»ï¼Œé€šè¿‡ä¸‰è¡Œè¡¨æ ¼nåˆ—è¿­ä»£çš„å½¢å¼(ä¹Ÿå¯ä»¥è¿›ä¸€æ­¥åŠ å¤§è®¡ç®—é‡å˜æˆnè¡Œè¡¨æ ¼nåˆ—è¿­ä»£)ç†è§£é€’å½’è¿­ä»£çš„è¿‡ç¨‹,åœ¨ä¸€å®šçš„æ—¶é—´ï¼Œè¿›è¡Œä¸€ç³»åˆ—çš„åˆ—è®¡ç®—ï¼Œå¹¶è®©æ—¶é—´æ¨è¿›ï¼Œç›´åˆ°æ»¡è¶³ä½ æƒ³è¦çš„ç»“æœã€‚\n","date":1459315401,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1459315401,"objectID":"cfc100aff1a612f33a272379e2a98884","permalink":"/blog/2016/03/30/program-as-data/","publishdate":"2016-03-30T13:23:21+08:00","relpermalink":"/blog/2016/03/30/program-as-data/","section":"archives","summary":"A program is like an essay. The first version is a draft, and drafts demand editing. Program is also can be seen as data.\n ç›´è§‰è®¤è¯†proc,æå–bodyã€‚ å¯¹æ¯”è¯†åˆ«ã€‚ åŠ å£³ã€‚ ä¸‰è¡Œè¡¨æ ¼ï¼Œnåˆ—è¿­ä»£ã€‚ ","tags":null,"title":"program-as-data","type":"archives"},{"authors":null,"categories":["scheme"],"content":"schemeçš„è§£é‡Šå™¨çš„æ„é€ ï¼Œéƒ½éœ€è¦enviromentç±»å‹çš„å‚ä¸ï¼Œenvironmentç±»å‹çš„æŠ½è±¡ç¡®æ˜¯å½±å“åˆ°è¯­è¨€çš„å…·ä½“æ€§èƒ½ã€‚\nä¸»è¦æœ‰ä»¥ä¸‹å››ç§ç±»å‹(å¦ä¸€ç§æœªå®ç°)\n ç¯å¢ƒå…³è”è¡¨å½¢å¼å‡ºç°(cons cons\u0026hellip;) ç¯å¢ƒçš„åˆ—è¡¨å‡ºç° (list var val env) ç¯å¢ƒçš„è¿‡ç¨‹å®ç°(lambda ()å½¢å¼) ç¯å¢ƒçš„ä¸€ç§è¾ƒä¸ºç‰¹æ®Šçš„å½¢å¼æˆå †å˜é‡çš„å®ç°(list (list var) (list val))  1. ç¯å¢ƒå…³è”è¡¨å½¢å¼å‡ºç°  æ­¤æ—¶æ˜¯æ¯ä¸€æ¬¡éƒ½æŠŠä¸€ä¸ªé”®å€¼å¯¹å­˜å…¥åˆ°ç¯å¢ƒä¸­ï¼Œé€æ¬¡å­˜å…¥çš„è¿‡ç¨‹(é‡‡ç”¨ cons consçš„å½¢å¼)ã€‚\n((a . 1) (b . 1) (c . 1)) empty-env is '()  å…·ä½“å®ç°å¦‚ä¸‹æ‰€ç¤º\n(define empty-env (lambda() '())) (define extend-env (lambda (var val env) (cons (cons var val) env))) (define apply-env (lambda (env search-var) (cond ((null? env) (report-no-binding-found search-var)) ((eqv? (caar env) search-var) (cdr (car env))) (else (apply-env (cdr env) search-var))))) (define report-no-binding-found (lambda (search-var) (error 'apply-env \u0026quot;No binding for: \u0026quot; search-var))) (define e (extend-env 'd 6 (extend-env 'y 8 (extend-env 'x 7 (extend-env 'y 14 (empty-env)))))) (equal?? (apply-env e 'd) 6) (equal?? (apply-env e 'y) 8) (equal?? (apply-env e 'x) 7) (equal?? (apply-env e 'd) 6)  ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„å°±æ˜¯\na=1 b=2 a=3 c=5 ((a 1 3) (b 2) (c 5)) empty-env is '()  é’ˆå¯¹å½“å‰çš„å…³è”è¡¨çš„ä¸€ä¸ªå¾ˆå°çš„æ‹“å±•\nå¢åŠ ä¸€ä¸ªhas-binding å®ç° (define has-binding? (lambda (env var) (cond ((null? env) #f) ((eqv? (caar env) var) #t) (else (has-binding? (cdr env) var))))) (define e (extend-env 'd 6 (extend-env 'y 8 (extend-env 'x 7 (extend-env 'y 14 (empty-env)))))) (equal?? (has-binding? e 'd) #t) (equal?? (has-binding? e 'y) #t) (equal?? (has-binding? e 'x) #t) (equal?? (has-binding? e 'z) #f)  æ‹“å±•ä¸€ä¸ªåˆ—è¡¨è¾“å…¥çš„åŠŸèƒ½extend-env* (define extend-env* (lambda (var-list val-list env) (if (null? var-list) env (let ((var (car var-list)) (val (car val-list))) (extend-env* (cdr var-list) (cdr val-list) (extend-env var val env)))))) (equal?? (has-binding? (extend-env* '(A) '(1) e) 'A) #t) (equal?? (has-binding? (extend-env* '(A B C) '(1 2 3) e) 'C) #t)  2.ç¯å¢ƒçš„åˆ—è¡¨å‡ºç°  æ­¤æ—¶ä½¿ç”¨ä¸€ä¸ªæ ‡å¿—ä½extend-envæ¯ä¸€æ¬¡éƒ½æŠŠä¸€ä¸ªé”®å€¼å¯¹å­˜å…¥åˆ°listç¯å¢ƒä¸­ï¼ŒåµŒå¥—å­˜å…¥çš„è¿‡ç¨‹(é‡‡ç”¨ cons consçš„å½¢å¼)ã€‚\n(extend (list 'extend-env var exp (extend ;;;====å…¶å®'extend-env æœ‰ç‚¹å¤šä½™ (list 'extend-env var exp (extend ;;;====å…¶å®'extend-env æœ‰ç‚¹å¤šä½™ (empty-env)))))) (1 (2 (3 6)))  ä¸”çœ‹å…·ä½“å®ç°å¦‚ä¸‹\n;; empty-env : () -\u0026gt; Env (define empty-env (lambda () (list 'empty-env))) ;; extend-env : Var * Schemeval * Env -\u0026gt; Env (define extend-env (lambda (var val env) (list 'extend-env var val env))) ;;;;;;;==================\u0026gt;å…³é”®ä½ç½® ;; apply-env : Env * Var -\u0026gt; Schemeval (define apply-env-rec (lambda (env search-var all) (cond ((eqv? (car env) 'empty-env) (report-no-binding-found search-var all)) ((eqv? (car env) 'extend-env) (let ((saved-var (cadr env)) ;;;;;;;==================\u0026gt;å…³é”®ä½ç½® (saved-val (caddr env)) ;;;;;;;==================\u0026gt;å…³é”®ä½ç½® (saved-env (cadddr env))) ;;;;;;;==================\u0026gt;å…³é”®ä½ç½® (if (eqv? search-var saved-var) saved-val (apply-env-rec saved-env search-var all)))) ;;;;;;;==================\u0026gt;ä¸æ–­æ›´æ–°æœ€æ–°çš„ä½ç½®look up variable in the saved-env (else (report-invalid-env env))))) (define apply-env (lambda (env search-var) (apply-env-rec env search-var env))) (define display-env-rec (lambda (env) (if (eqv? (car env) 'extend-env) (let ((saved-var (cadr env)) (saved-env (cadddr env))) (printf \u0026quot; ~a \u0026quot; saved-var) (display-env-rec saved-env))))) (define display-env (lambda (env) (printf \u0026quot;env: \u0026quot;) (display-env-rec env) (newline))) (display-env e) (define report-no-binding-found (lambda (search-var all) (display-env all) (error 'apply-env \u0026quot;No binding for\u0026quot; search-var))) (define report-invalid-env (lambda (env) (error 'apply-env \u0026quot;Bad environment\u0026quot; env))) (define e (extend-env 'd 6 (extend-env 'y 8 (extend-env 'x 7 (extend-env 'y 14 (empty-env)))))) (equal?? (apply-env e 'd) 6) (equal?? (apply-env e 'y) 8) (equal?? (apply-env e 'x) 7)  3.ç¯å¢ƒçš„è¿‡ç¨‹å®ç° ç¯å¢ƒçš„è¿‡ç¨‹å®ç°æ˜¯æ¯”è¾ƒéš¾ç†è§£çš„ï¼Œå› ä¸ºè¯¥è¿‡ç¨‹æ›´å°‘äº†é€’å½’çš„é€æ¸å‡å°‘çš„è¡¨åƒï¼Œæ„Ÿè§‰æ‰€æœ‰éƒ½ä¸å˜ã€‚\nå…·ä½“å®ç°å¦‚ä¸‹ï¼š\n;; data definition: ;; Env = Var -\u0026gt; Schemeval ;; empty-env : () -\u0026gt; Env (define empty-env (lambda () (cons (lambda (search-var) (report-no-binding-found search-var)) (lambda () #t)))) ;; extend-env : Var * Schemeval * Env -\u0026gt; Env (define extend-env (lambda (saved-var saved-val saved-env) (cons (lambda (search-var) (if (eqv? search-var saved-var) saved-val (apply-env saved-env search-var))) (lambda () #f)))) ;; apply-env : Env * Var -\u0026gt; Schemeval (define apply-env (lambda (env search-var) ((car env) search-var))) (define empty-env? (lambda (env) ((cdr env)))) (define report-no-binding-found (lambda (search-var) (error 'apply-env \u0026quot;No binding for ~s\u0026quot; search-var))) (define report-invalid-env (lambda (env) (error 'apply-env \u0026quot;Bad environment: ~s\u0026quot; env))) (define e (extend-env 'd 6 (extend-env 'y 8 (extend-env 'x 7 (extend-env 'y 14 (empty-env)))))) (equal?? (apply-env e 'd) 6) (equal?? (apply-env e 'y) 8) (equal?? (apply-env e 'x) 7) (equal?? (empty-env? (empty-env)) #t) (equal?? (empty-env? e) #f)  4.ç¯å¢ƒçš„ä¸€ç§è¾ƒä¸ºç‰¹æ®Šçš„å½¢å¼çš„å®ç°  å¦‚æœè‹¥æœ‰çš„å®šä¹‰æ‰å †å­˜åœ¨å‘¢ï¼Ÿä¹Ÿå°±æ˜¯æŠŠæ‰€æœ‰å˜é‡æ”¾åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œå€¼æ”¾åœ¨ä¸€ä¸ªåˆ—è¡¨é‡Œé¢ã€‚\nx=3 y=4 z=5 c=6 è¡¨ç°ä¸º ((x y z c) (3 4 5 6)) æ­¤æ—¶ empty-env is (() ())  (define empty-env (lambda() '())) (define extend-env (lambda (var val env) (cons (list (list var) (list val)) env))) (define extend-env* (lambda (var-list val-list env) (if (null? var-list) env (cons (list var-list val-list) env)))) ;; return a pair, for distinguish with val is #f (define apply-current (lambda (vars vals search-var) (if (null? vars) (cons #f '()) (if (eqv? (car vars) search-var) (cons #t (car vals)) (apply-current (cdr vars) (cdr vals) search-var))))) (define apply-env (lambda (env search-var) (if (null? env) (report-no-binding-found search-var) (let ((val (apply-current (caar env) (cadar env) search-var))) (if (car val) (cdr val) (apply-env (cdr env) search-var)))))) (define report-no-binding-found (lambda (search-var) (error 'apply-env \u0026quot;No binding for: \u0026quot; search-var))) (define has-binding? (lambda (env var) (if (null? env) #f (let ((val (apply-current (caar env) (cadar env) var))) (if (car val) #t (has-binding? (cdr env) var)))))) (define e (empty-env)) (equal?? e '()) (define e (extend-env 'z 10 e)) (equal?? e '(((z) (10)))) (define e (extend-env* '(a b c d) '(1 2 3 4) e)) (equal?? e '(((a b c d) (1 2 3 4)) ((z) (10)))) (equal?? (apply-env e 'z) 10) (equal?? (apply-env e 'd) 4) (equal?? (has-binding? e 'z) #t) (equal?? (has-binding? e 'd) #t) (equal?? (has-binding? e 'm) #f)  ç»“è®º ä¸Šè¿°æ‰€è°ˆçš„4ç§ç¯å¢ƒçš„å®ç°ï¼Œå…¶å®ä¹Ÿå°±å¯¹åº”ç€å››ç§ä¸åŒçš„è§£é‡Šå™¨çš„å®ç°ã€‚ç¯å¢ƒå®ç°çš„ä¸åŒï¼Œå¯¹åº”è€…æ•´ä¸ªè§£é‡Šå™¨çš„æå–è¿‡ç¨‹ä¹Ÿå°±ä¸ä¸€æ ·ã€‚ æ•´ä¸ªè§£é‡Šå™¨ç‹¬ç«‹çš„è§£é‡Šæ¯ä¸€ä¸ªè¡¨è¾¾å¼çš„æ—¶å€™ï¼Œæ‰€é‡‡ç”¨çš„æ–¹æ³•ä¹Ÿå°±ä¼šæœ‰æ‰€ä¸ä¸€æ ·ã€‚æ‰€ä»¥è®¾è®¡ä¸€ä¸ªå¥½çš„environmentï¼Œå¯¹åº”çš„å°±æ˜¯è®¾è®¡ä¸€ä¸ªå¥½çš„ æ•°æ®ç»“æ„ï¼Œç”¨äºç¨‹åºprogramè§£æçš„æ—¶å€™éœ€è¦ä½¿ç”¨åˆ°çš„å˜é‡æˆ–è€…è¡¨è¾¾å¼æ•°æ®ï¼Œè‡³å…³é‡è¦ï¼\n","date":1456941932,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1456941932,"objectID":"f3822117b8298975741254056376a66b","permalink":"/blog/2016/03/03/schemehuan-jing-de-ji-chong-biao-xian-xing-shi-represtations/","publishdate":"2016-03-03T02:05:32+08:00","relpermalink":"/blog/2016/03/03/schemehuan-jing-de-ji-chong-biao-xian-xing-shi-represtations/","section":"archives","summary":"schemeçš„è§£é‡Šå™¨çš„æ„é€ ï¼Œéƒ½éœ€è¦enviromentç±»å‹çš„å‚ä¸ï¼Œenvironmentç±»å‹çš„æŠ½è±¡ç¡®æ˜¯å½±å“åˆ°è¯­è¨€çš„å…·ä½“æ€§èƒ½ã€‚\n","tags":null,"title":"schemeç¯å¢ƒçš„å‡ ç§è¡¨ç°å½¢å¼-represtations","type":"archives"},{"authors":null,"categories":["scheme"],"content":"æ’åºç®—æ³•æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸è§çš„ç®—æ³•ï¼Œä¸€èˆ¬åŒ…æ‹¬å†’æ³¡æ’åºï¼Œæ’å…¥æ’åºï¼Œå¿«é€Ÿæ’åºç­‰ã€‚ æœ¬æ–‡ä¸»è¦æ˜¯å…³äºæ’å…¥æ’åºã€‚\nå¦‚ä½•æŠŠä¸€ä¸ªæ•°å­—æ’å…¥åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ ;; using insert sort here (define insert (lambda (lst elem) (cond ((null? lst) (list elem)) ((\u0026lt; elem (car lst)) (cons elem lst)) (else (cons (car lst) (insert (cdr lst) elem)))))) (define sort-rec (lambda (prev now) (if (null? now) prev (sort-rec (insert prev (car now)) (cdr now))))) (define sort (lambda (lst) (sort-rec '() lst)))  æå–å‡ºåˆ¤æ–­æ¡ä»¶ åˆ©ç”¨predä»£è¡¨å°äºå·\n(define insert (lambda (lst elem pred) (cond ((null? lst) (list elem)) ((pred elem (car lst)) (cons elem lst)) (else (cons (car lst) (insert (cdr lst) elem pred))))))  ç»“æœï¼š\n(insert '(1 2 3) '4 \u0026lt;) (1 2 3 4) (insert '(1 2 3) '0 \u0026lt;) (0 1 2 3) (insert '(1 3 2) '4 \u0026lt;) (1 3 2 4) ==\u0026gt; è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„  åˆ†æå‘ç° insertä»…ä»…æ˜¯åœ¨åˆ¤æ–­æ»¡è¶³æ¡ä»¶çš„æ—¶å€™ï¼Œç›´æ¥é€€å‡ºï¼Œä¸ç®¡åé¢çš„å¤§å°é—®é¢˜ï¼Œ æˆ‘ä»¬ä¸å¯ä»¥åˆ¤æ–­è¯¥å…ƒç´ ä¹‹åçš„æ‰€æœ‰çš„å­—ç¬¦çš„æƒ…å†µã€‚\nç„¶è€Œè¯¥ç¨‹åºå½“ä½œä¸€ä¸ªæœ€å°çš„æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯åŠ å…¥æˆ‘é€ä¸ªæå‡ºåˆ¤æ–­åˆ—è¡¨ï¼Œæœ€ç»ˆå®ç°çš„æ˜¯æ¯æå–ä¸€ä¸ªå…ƒç´  éƒ½å’Œæ–°æ„æˆçš„æ’åºåˆ—è¡¨è¿›è¡Œåˆ¤æ–­ï¼Œé‚£ä¹ˆä¹Ÿå°±ç®—åˆ¤æ–­å®Œæˆã€‚\nå¯¹ä¸€ä¸ªåˆ—è¡¨è¿›è¡Œæ’å…¥æ’åº åœ¨åŸå…ˆinsertçš„åŸºç¡€ä¸Šï¼Œä¹¦å†™äº†sort-recå’Œsort-predicate\n sort-rec é€ä¸ªåˆ¤æ–­æœ€æ–°çš„å…ƒç´ å’Œæ–°çš„ä¸´æ—¶åˆ—è¡¨çš„æ¯”è¾ƒ sort-predicate ä»…ä»…æ˜¯é€‰æ‹©åˆ¤æ–­çš„æ ‡å‡†ã€‚\n(define sort-rec (lambda (prev now pred) (if (null? now) prev (sort-rec (insert prev (car now) pred) (cdr now) pred)))) (define sort/predicate (lambda (pred lst) (sort-rec '() lst pred)))  sort-recçš„prevåœ¨é€æ¸çš„å˜å¤§ï¼Œè€Œnowçš„éƒ¨åˆ†åœ¨ä¸æ–­çš„å˜å°\n ä¹Ÿå°±æ˜¯ sort-rec çš„ç¬¬ä¸€å·ä½ç½®ä¸æ–­å˜å¤§ï¼Œç¬¬äºŒå·ä½ç”±äºcdrä½œç”¨ä¸æ–­å˜å°ã€‚\n(sort/predicate \u0026lt; '(1 6 5 7)) prev now 1. () (1 6 5 7) 2. (1) (6 5 7) 3. (1 6) (5 7) 4. (1 5 6) (7) 5. (1 5 6 7) () è®¡ç®—ç»“æŸï¼Œè¿”å›prevçš„å€¼   äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥è·å¾—æ­£ç¡®çš„ç»“æœ\n(sort/predicate \u0026lt; '(1 6 5 7)) (1 5 6 7)  åˆ©ç”¨å†…éƒ¨defineå’Œletrecæ”¹å†™ç¨‹åº  é‡‡ç”¨å†…éƒ¨çš„defineå®ç°  å¯ä»¥ä¿æŠ¤å‡½æ•°çš„å®ç°ï¼ˆåªè¢«ä½¿ç”¨ä¸€æ¬¡ï¼‰\n(define sort/predicate1 (lambda (pred lst) (define sort-rec (lambda (prev now pred) (if (null? now) prev (sort-rec (insert prev (car now) pred) (cdr now) pred)))) (define insert (lambda (lst elem pred) (cond ((null? lst) (list elem)) ((pred elem (car lst)) (cons elem lst)) (else (cons (car lst) (insert (cdr lst) elem pred)))))) (sort-rec '() lst pred))) (sort/predicate1 \u0026lt; '(1 6 5 7))   é‡‡ç”¨letrecå®ç°sort/predicate,ä¸»è¦æ˜¯ç”¨(letrec (() ...) ...) ç»“æ„\n(define sort/predicate2 (lambda (pred lst) (letrec ((sort-rec (lambda (prev now pred) (if (null? now) prev (sort-rec (insert prev (car now) pred) (cdr now) pred)))) (insert (lambda (lst elem pred) (cond ((null? lst) (list elem)) ((pred elem (car lst)) (cons elem lst)) (else (cons (car lst) (insert (cdr lst) elem pred))))))) (sort-rec '() lst pred)))) (sort/predicate2 \u0026lt; '(1 6 5 7))   ç»“è®º  æ¯éš”ç¦»ä¸€å±‚æŠ½è±¡ï¼Œç›¸å½“äºå¢åŠ äº†ä¸€ç§å˜åŒ– äº†è§£æ’å…¥æ’åºçš„å®ç°è¿‡ç¨‹ã€‚ ","date":1456648974,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1456648974,"objectID":"f86bbb7889390afbf87ff3a469bd8d9f","permalink":"/blog/2016/02/28/cha-ru-pai-xu/","publishdate":"2016-02-28T16:42:54+08:00","relpermalink":"/blog/2016/02/28/cha-ru-pai-xu/","section":"archives","summary":"æ’åºç®—æ³•æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸è§çš„ç®—æ³•ï¼Œä¸€èˆ¬åŒ…æ‹¬å†’æ³¡æ’åºï¼Œæ’å…¥æ’åºï¼Œå¿«é€Ÿæ’åºç­‰ã€‚ æœ¬æ–‡ä¸»è¦æ˜¯å…³äºæ’å…¥æ’åºã€‚\n","tags":null,"title":"æ’å…¥æ’åº","type":"archives"},{"authors":null,"categories":["scheme"],"content":"letrecçš„ä½œç”¨æ˜¯å¯ä»¥å®šä¹‰å†…éƒ¨å‡½æ•°ã€‚å®ƒçš„å®ç°ç±»ä¼¼äºletï¼Œåªä¸è¿‡letå®ç°çš„ä¸»è¦æ˜¯å±€éƒ¨å˜é‡ï¼Œè€Œä»–æ˜¯å±€éƒ¨çš„è¿‡ç¨‹ï¼ˆæŒä¿ç•™æ„è§)\né”™è¯¯1.  (define-datatype environment environment? (empty-env) (extend-env (bvar symbol?) ;;;è¿™è¾¹æ˜¯ä¸€ä¸ª æ‰€ä»¥æ˜¯symbol? (bval expval?) (saved-env environment?)) (extend-env-rec (id symbol?) (bvar (list-of symbol?)) ;;è¿™è¾¹å’Œproc-valçš„å®šä¹‰å‘ç”Ÿäº†å†²çª ä¸€ä¸ªæ˜¯symbol? å¦å¤–ä¸€ä¸ªåˆ™æ˜¯(list-of symbol?) (body expression?) (saved-env environment?)))  è€Œåœ¨å®é™…çš„extend-env-recçš„å®ç°ä¸­ï¼Œåˆ™æ˜¯è°ƒç”¨äº†proc-valï¼Œæ‰€ä»¥å¹¶ä¸”ä¼ å…¥åˆ°proc-valï¼Œä¸ºäº†ä¿è¯ä¸€è‡´æ€§\n;;;;;;;;;;;;;;;; environment constructors and observers ;;;;;;;;;;;;;;;; (define apply-env (lambda (env search-sym) (cases environment env (empty-env () (error 'apply-env \u0026quot;No binding for ~s\u0026quot; search-sym)) (extend-env (var val saved-env) (if (eqv? search-sym var) val (apply-env saved-env search-sym))) (extend-env-rec (p-name b-var p-body saved-env) (if (eqv? search-sym p-name) ;; (proc-val (procedure b-var p-body env)) ;;;æ³¨æ„è¿™é‡Œçš„å˜åŒ–ï¼ (proc-val (procedure b-var p-body env #t)) ;;ä¿®æ”¹äº†ä¸€ä¸ªbug ç›®çš„æ˜¯å¯ä»¥è¿½è¸ªçš„ä½œç”¨ (apply-env saved-env search-sym))))))  æ‰€ä»¥éœ€è¦å¯¹åº”çš„ä¿®æ”¹proc-val\n ;; proc? : SchemeVal -\u0026gt; Bool ;; procedure : Var * Exp * Env -\u0026gt; Proc (define-datatype proc proc? ;;;æ³¨æ„è¿™è¾¹çš„å˜åŒ– å½±å“åˆ°apply-procedure (procedure ;(var symbol?) ;;;ä¸ºäº†ä¿è¯å’Œenvironmentçš„define-datatypeä¸€ç›´æ”¹ä¸º(list-of symbol?) (var (list-of symbol?)) (body expression?) (env environment?) (trace boolean?))) ;;;éœ€è¦è€ƒè™‘#t #f  é”™è¯¯2. \u0026gt; (run \u0026quot;letrec double(x)=+(x,6) in (double 10)\u0026quot;) enter: (x) = #(struct:num-val 10) . . cdr: contract violation expected: pair? given: (num-val 10)  åŸå› åœ¨äºåŸå…ˆçš„call-expå¹¶æ²¡æœ‰éå†çš„è¿‡ç¨‹ï¼Œè€Œæ–°æ”¹è¿›çš„apply-procedureåˆ™æ˜¯éœ€è¦éå†ï¼Œ\n (call-exp (rator rand) (let ((proc (expval-\u0026gt;proc (value-of rator env))) (arg (value-of rand env))) (apply-procedure proc arg)))  æ”¹è¿›çš„call-exp\n (call-exp (rator rands) (let ((proc (expval-\u0026gt;proc (value-of rator env))) (args (map (lambda (x) (value-of x env)) rands))) (apply-procedure proc args)))  é¢å¤–é”™è¯¯  data-structures.scm:7:11: all-defined: not a provide sub-form in: (all-defined)  è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºç°åœ¨éƒ½æ˜¯åœ¨ä½¿ç”¨(all-defined-out)\nä¸ºä»€ä¹ˆè¿˜æ˜¯ä¼šå‡ºç°å¦‚ä¸‹çš„é”™è¯¯ \u0026gt; (run \u0026quot;letrec double(x) = if zero?(x) then 0 else -((double -(x,1)), 2) in (double 6)\u0026quot;) . . extend-env-rec: bad value for bvar field: '(x) \u0026gt; (run \u0026quot;if zero?(3) then 0 else -(3,2)\u0026quot;) (num-val 1) ","date":1456610577,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1456610577,"objectID":"8300e0ed62739337477bd32ec3c0988d","permalink":"/blog/2016/02/28/the-fifth-interpreter-with-the-implementation-of-letrec-important/","publishdate":"2016-02-28T06:02:57+08:00","relpermalink":"/blog/2016/02/28/the-fifth-interpreter-with-the-implementation-of-letrec-important/","section":"archives","summary":"letrecçš„ä½œç”¨æ˜¯å¯ä»¥å®šä¹‰å†…éƒ¨å‡½æ•°ã€‚å®ƒçš„å®ç°ç±»ä¼¼äºletï¼Œåªä¸è¿‡letå®ç°çš„ä¸»è¦æ˜¯å±€éƒ¨å˜é‡ï¼Œè€Œä»–æ˜¯å±€éƒ¨çš„è¿‡ç¨‹ï¼ˆæŒä¿ç•™æ„è§)\n","tags":null,"title":"The Fifth interpreter with the implementation of letrec(Important)","type":"archives"},{"authors":null,"categories":["scheme"],"content":"ç¨‹åºçš„è¿‡ç¨‹è¿½è¸ªèƒ½åŠ›ä½“ç°ç€ä¸€ä¸ªç‹¬ç‰¹çš„ä¼˜åŠ¿ï¼Œæœ¬æ–‡åœ¨First Interpreter,Second Interpreter,Third InterpreteråŸºç¡€ä¸Šå®ç°æ–°çš„è§£é‡Šå™¨åŠŸèƒ½ã€‚\nå®ç°æ•ˆæœ:\n enter: x = #(struct:num-val 30) exting: result = #(struct:num-val 29)  è€é˜®ä¸ç‹‚è°ä¼šå¾—ï¼Ÿå‡ºé—¨ä¸€ç¬‘å¤§æ±Ÿæ¨ªï¼\nlang.scmä¿®æ”¹ç¨‹åºè¿½è¸ªéƒ¨åˆ† ;;å¢åŠ äº†trace-proc (expression (\u0026quot;traceproc\u0026quot; \u0026quot;(\u0026quot; identifier \u0026quot;)\u0026quot; expression) traceproc-exp)  è‡³äºprocçš„è¯­æ³•å¹¶ä¸éœ€è¦åšä»»ä½•çš„ä¿®æ”¹ã€‚\ndata-structures.scm è¿›è¡Œéƒ¨åˆ†ä¿®æ”¹  åœ¨ä¿®æ”¹trace-procå®ç°çš„æƒ…å†µä¸‹è¿˜å¾—ä¿®æ”¹proc?  åŸå…ˆçš„proc?å®ç°\n;; proc? : SchemeVal -\u0026gt; Bool ;; procedure : Var * Exp * Env -\u0026gt; Proc (define-datatype proc proc? (procedure (var symbol?) (body expression?) (env environment?)))  æ”¹è¿›åçš„proc?å®ç°,æ³¨æ„trace æ˜¯boolean?ç±»å‹ã€‚\n;; proc? : SchemeVal -\u0026gt; Bool ;; procedure : Var * Exp * Env -\u0026gt; Proc (define-datatype proc proc? (procedure (var symbol?) (body expression?) (env environment?) (trace boolean?)))  interp.scm ä¿®æ”¹ç¨‹åºè¿½è¸ªéƒ¨åˆ† ç”±äºproc?çš„ç±»å‹å®ç°å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œå¯¹åº”çš„ä¿®æ”¹apply-procedureå’Œvalue-ofã€‚\napply-procedureçš„ä¿®æ”¹ åŸå…ˆçš„apply-procedureå®ç°ï¼š\n(define apply-procedure (lambda (proc1 val) (cases proc proc1 (procedure (var body saved-env) (value-of body (extend-env var val saved-env))))))  æ”¹è¿›åçš„apply-procedureå¢åŠ äº†trace?çš„åˆ¤æ–­\n;; apply-procedure : Proc * ExpVal -\u0026gt; ExpVal ;; Page: 79 (define apply-procedure (lambda (proc1 val) (cases proc proc1 (procedure (var body saved-env trace?) (if trace? (printf \u0026quot;enter: ~a = ~a\\n\u0026quot; var val) '**proc**) (let ((value (value-of body (extend-env var val saved-env)))) (if trace? (printf \u0026quot;exting: result = ~a\\n\u0026quot; value) '**proc**) value)))))  value-of çš„ä¿®æ”¹ åŸå…ˆçš„value-ofå®ç°ï¼š\n(proc-exp (var body) (proc-val (procedure var body env)))  æ–°æ”¹è¿›çš„çš„value-of å®ç°:\n(proc-exp (var body) (proc-val (procedure var body env #f))) (traceproc-exp (var body) (proc-val (procedure var body env #t)))  æµ‹è¯•è¿½è¸ªä¿®æ”¹çš„ç»“æœ (run \u0026quot;proc(x) -(x, 1)\u0026quot;) (run \u0026quot;(proc(x) -(x,1) 30)\u0026quot;) (run \u0026quot;let f = traceproc (x) -(x,1) in (f 30)\u0026quot;) (run \u0026quot;(proc(f)(f 30) proc(x)-(x,1))\u0026quot;) (run \u0026quot;let x = 3 in -(x,1)\u0026quot;) (proc-val (procedure 'x (diff-exp (var-exp 'x) (const-exp 1)) (list (list 'i (num-val 1)) (list 'v (num-val 5)) (list 'x (num-val 10))) #f)) (num-val 29) enter: x = #(struct:num-val 30) exting: result = #(struct:num-val 29) (num-val 29) (num-val 29) (num-val 2)  è€é˜®ä¸ç‹‚è°ä¼šå¾—ï¼Ÿå‡ºé—¨ä¸€ç¬‘å¤§æ±Ÿæ¨ªï¼\n","date":1456580958,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1456580958,"objectID":"da1095f45a987a19aa8a589cc000630e","permalink":"/blog/2016/02/27/the-fourth-interpreter-about-the-traceproc/","publishdate":"2016-02-27T21:49:18+08:00","relpermalink":"/blog/2016/02/27/the-fourth-interpreter-about-the-traceproc/","section":"archives","summary":"ç¨‹åºçš„è¿‡ç¨‹è¿½è¸ªèƒ½åŠ›ä½“ç°ç€ä¸€ä¸ªç‹¬ç‰¹çš„ä¼˜åŠ¿ï¼Œæœ¬æ–‡åœ¨First Interpreter,Second Interpreter,Third InterpreteråŸºç¡€ä¸Šå®ç°æ–°çš„è§£é‡Šå™¨åŠŸèƒ½ã€‚\nå®ç°æ•ˆæœ:\n enter: x = #(struct:num-val 30) exting: result = #(struct:num-val 29) ","tags":null,"title":"The Fourth Interpreter about the traceproc","type":"archives"},{"authors":null,"categories":["scheme"],"content":"Schemeè§£é‡Šå™¨çš„å¥½å¤„æ˜¯å¯ä»¥ä¸æ–­çš„æ‹“å±•è‡ªå·±è¯­è¨€çš„èƒ½åŠ›ï¼Œ\n é€šè¿‡The First-interpreter-from-eoplåˆ›å»ºäº†ä¸€ä¸ªè¾ƒä¸ºç®€å•let-languageï¼Œå®ç°äº†è¾ƒä¸ºç®€å•çš„å‡æ³•è¿ç®—å’Œletå±€éƒ¨å˜é‡èµ‹å€¼ç­‰åŠŸèƒ½ã€‚ The Second Interpreter from onç¬¬ä¸€æ¬¡æ‰©å±•äº†åŸºç¡€çš„let-languageï¼Œå®ç°äº†å››åˆ™è¿ç®—ï¼Œé€»è¾‘åˆ¤æ–­ï¼Œåˆ—è¡¨æ“ä½œ,åˆ—è¡¨èµ‹å€¼ç­‰ã€‚ è¿™ä¸ªç‰ˆæœ¬çš„è§£é‡Šå™¨è¿›ä¸€æ­¥æ‹“å±•äº†è¿‡ç¨‹å®šä¹‰å’Œè¿‡ç¨‹è°ƒç”¨çš„åŠŸèƒ½ã€‚   1. proc-language çš„å®ç° 2. Y-comb çš„å®ç°è¿‡ç¨‹ 3. æ–°è¯­è¨€çš„Y+å®ç°  1. proc-language çš„å®ç°  lang.scmå¢åŠ äº†è¿‡ç¨‹å®šä¹‰å’Œè°ƒç”¨ ;;;new stuff (expression (\u0026quot;proc\u0026quot; \u0026quot;(\u0026quot; identifier \u0026quot;)\u0026quot; expression) proc-exp) (expression (\u0026quot;(\u0026quot; expression expression \u0026quot;)\u0026quot;) call-exp)  interp.scmå¢åŠ äº†è¿‡ç¨‹å®šä¹‰å’Œè°ƒç”¨  value-of å¢åŠ äº†proc-expå’Œcall-expçš„å†…éƒ¨è¯­è¨€å½¢å¼\n;;;æ–°å¢çš„proc-exp å’Œcall-exp (proc-exp (var body) (proc-val (procedure var body env))) (call-exp (rator rand) (let ((proc (expval-\u0026gt;proc (value-of rator env))) (arg (value-of rand env))) (apply-procedure proc arg)))  apply-procedure ç”¨äºprocçš„å®ç°\n;; proc-exp ;; apply-procedure : Proc * ExpVal -\u0026gt; ExpVal ;; Page: 79 (define apply-procedure (lambda (proc1 val) (cases proc proc1 (procedure (var body saved-env) (value-of body (extend-env var val saved-env))))))   data-structures.scmå¢åŠ äº†è¿‡ç¨‹å®šä¹‰å’Œè°ƒç”¨  åœ¨expvalä¸­æ‹“å±•äº†proc?çš„åˆ¤æ–­\n(define-datatype expval expval? (num-val (value number?)) (bool-val (boolean boolean?)) (pair-val (car expval?) (cdr expval?)) (emptylist-val) ;;æ–°å¢çš„proc-exp (proc-val (proc proc?)) )  å¢åŠ expval-\u0026gt;procç±»å‹è½¬æ¢çš„è¿‡ç¨‹\n  procå…¶å®å°±æ˜¯ä¸€ä¸ªclosureçš„å…·ä½“å®ç°ã€‚\n;;;æ–°å¢çš„expval-\u0026gt;proc å’Œprocç±» ;; expval-\u0026gt;proc : ExpVal -\u0026gt; Proc (define expval-\u0026gt;proc (lambda (v) (cases expval v (proc-val (proc) proc) (else (expval-extractor-error 'proc v))))) ;; proc? : SchemeVal -\u0026gt; Bool ;; procedure : Var * Exp * Env -\u0026gt; Proc (define-datatype proc proc? (procedure (var symbol?) (body expression?) (env environment?)))  å¢åŠ è¿‡ç¨‹å®šä¹‰å’Œè°ƒç”¨çš„æµ‹è¯•ç»“æœ é”™è¯¯1  . data-structures.scm:102:11: expression?: unbound identifier in module in: expression?  é”™è¯¯2 å¦‚æœæŒ‰ç…§é”™è¯¯1,æŠŠå…·ä½“çš„expression?å®ç°æ”¾å…¥data-structures.scmä¸­ï¼Œåˆ™ä¼šå‡ºç°é”™è¯¯1çš„é—®é¢˜ã€‚\nexpression?ç°åœ¨å®šä¹‰å¦‚ä¸‹,å…·ä½“å‚è€ƒSome notations:\nexpression ::= (var-exp ()) ::= (const-exp ()) ::= (zero?-exp ()) ::= (if-exp ()) ::= (diff-exp ()) ::= (cons-exp ()) ::= (car-exp ()) ::= (cdr-exp ()) ::= (null?-exp ()) ::= (emptylist-exp) ::= (list-exp ()) ::= (let-exp ()) ::= (proc-exp ()) ::= (call-exp ()) ::= (letrec-exp ()) ;;å¹¶æœªå†æ­¤ä½“ç° ::= (less?-exp ()) ::= (greater?-exp ()) ::= (equal?-exp ()) ::= (print-exp ()) ::= (unpack-exp ()) ::= (cond-exp ()) ::= (add-exp ()) ::= (mult-exp ()) ::= (div-exp ()) ::= (let*-exp ())  expression?å®ç°å¦‚ä¸‹:\n ;; datatype ;;; (define-datatype expression expression? (var-exp (id symbol?)) (const-exp (num number?)) (zero?-exp (expr expression?)) (if-exp (predicate-exp expression?) (true-exp expression?) (false-exp expression?)) ;;å››åˆ™è¿ç®— (minus-exp (body-exp expression?)) (diff-exp (exp1 expression?) (exp2 expression?)) (add-exp (exp1 expression?) (exp2 expression?)) (mult-exp (exp1 expression?) (exp2 expression?)) (div-exp (exp1 expression?) (exp2 expression?)) ;;é€»è¾‘æ¯”è¾ƒ (equal?-exp (exp1 expression?) (exp2 expression?)) (less?-exp (exp1 expression?) (exp2 expression?)) (greater?-exp (exp1 expression?) (exp2 expression?)) ;;åˆ—è¡¨æ“ä½œ (emptylist-exp) (cons-exp (exp1 expression?) (exp2 expression?)) (car-exp (body expression?)) (cdr-exp (body expression?)) (null?-exp (body expression?)) ;;listå®ç° (list-exp (args (list-of expression?))) ;; condå®ç° (cond-exp (conds (list-of expression?)) (acts (list-of expression?))) ;;let let* (let-exp (vars (list-of symbol?)) ;;;symbolä¸èƒ½å†™æˆsymbols (vals (list-of expression?)) (body expression?)) (let*-exp (vars (list-of symbol?)) ;(vars (list-of symbols?)) (vals (list-of expression?)) (body expression?)) ;;printå®ç° (print-exp (arg expression?)) ;;unpackå®ç° (unpack-exp (args (list-of symbol?));(args (list-of identifier?)) (vals expression?) (body expression?)) ;;proc (proc-exp (var (list-of symbol?)) (body expression?)) (call-exp (rator expression?) (rand (list-of expression?))) )  ä¸ºä»€ä¹ˆæ·»åŠ ä¸Šexpressionï¼Ÿåè€Œå‡ºç°å¦‚ä¸‹çš„é”™è¯¯ï¼Ÿ\n(require \u0026quot;data-structures.scm\u0026quot;) (require \u0026quot;lang.scm\u0026quot;) =ã€‹ There are some problems here. top.scm:8:11: module: identifier already imported from: \u0026quot;data-structures.scm\u0026quot; at: expression in: \u0026quot;lang.scm\u0026quot; #(174 21) #(235 10) module: identifier already imported from a different source in: expression \u0026quot;lang.scm\u0026quot; \u0026quot;data-structures.scm\u0026quot;  åˆ†æå‘ç°æ˜¯å› ä¸ºlang.scmå…¶å®å·²ç»å®šä¹‰äº†expression?, sllgen:make-define-datatypesä¸­é€šè¿‡the grammerå®šä¹‰äº†æ‰€æœ‰çš„expression?çš„å®ç°ã€‚ æ‰€ä»¥å¦‚æœåœ¨top.scmä¸­åŒæ—¶å¯¼å…¥lang.scm å’Œdata-structures.scmåˆ™ä¼šæŠ¥é”™ï¼Œé‡å¤å®šä¹‰ã€‚ äºæ˜¯ä»…ä»…åœ¨data-structures.scmä¸­å¢åŠ require \u0026quot;lang.scm\u0026quot;å³å¯, ç»“æœé€šè¿‡ï¼\næ­£ç¡®çš„æµ‹è¯•ç»“æœ (run \u0026quot;proc(x) -(x, 1)\u0026quot;) (run \u0026quot;(proc(x) -(x,1) 30)\u0026quot;) (run \u0026quot;(proc(f)(f 30) proc(x)-(x,1))\u0026quot;) (run \u0026quot;let x = 3 in -(x,1)\u0026quot;) ;;new stuff, the Currying (run \u0026quot;let f = proc (x) proc (y) -(x, -(0, y)) in ((f 10) 20)\u0026quot;) (proc-val (procedure 'x (diff-exp (var-exp 'x) (const-exp 1)) (list (list 'i (num-val 1)) (list 'v (num-val 5)) (list 'x (num-val 10))))) (num-val 29) (num-val 29) (num-val 2) (num-val 30)  2. ä¸€ä¸ªy-combinationçš„å®ç°  å…³äºy-combinationå¯ä»¥å‚è€ƒä»lambdaåˆ°simple+complexè§£é‡Šå™¨å†åˆ°æ ‘å½¢æŠ½è±¡ç–‘é—®å…³äºy-combçš„å®ç°ã€‚ è¿›ä¸€æ­¥å¯ä»¥å‚è€ƒ:\n Fixed-point combinator Church and Turing Neil Jonesçš„computation and complexity,ä½¿ç”¨ä¸€ç§whileè¯­è¨€ Matthias Felleisen å’Œ Matthew Flatt çš„ã€ŠProgramming Languages and Lambda Calculiã€‹ æ•™ä½ è®¤è¯†lambda æœ€ç»å…¸çš„Y combinator çœ‹äº†10éä»¥ä¸Š  Y-combåŸºæœ¬æ€æƒ³  é€šè¿‡å¢åŠ ä¸€å±‚lambdaè¡¨è¾¾å¼ï¼Œè¿›è¡Œæ›´é«˜ä¸€çº§æŠ½è±¡ betaè§„çº¦åŸåˆ™  æ¯”å¦‚\n(define fact (lambda (op) (lambda ( x y) (op x y))))  æ¯”å¦‚\n(f arg) == (lambda (arg) (f arg))  æœ€ä¸ºåŸºæœ¬çš„factå®ç°æ˜¯(æ„å»ºä¸å·²ç»å­˜åœ¨çš„fact)\n(define fact (lambda (x) (if (zero? x) 0 (fact (- x 1))))) (fact 5) 120  è€Œå¦‚æœè¿ç”¨æ€æƒ³1(ä¹Ÿå°±æ˜¯éšè—factçš„è°ƒç”¨ï¼Œè€Œä½¿ç”¨å±€éƒ¨è¿‡ç¨‹å˜é‡procedure),åˆ™å˜æ¢ä¸º\n(define fact (lambda (procedure) (lambda (x) (if (zero? x) 0 (procedure (- x 1)))))) ((fact fact) 5) 120  äºæ˜¯æœ‰äº†ä¸‹é¢çš„æ¨å¯¼è¿‡ç¨‹(æŠŠfactçš„è¡¨è¾¾å¼å¤šç»™ä»–è¿˜åŸ ï¼Œå¯ä»¥å‚è€ƒè¿˜åŸæ–¹æ³•Some-notations)\n(define fact ((lambda (procedure) ((lambda (func-arg) ;;å¸æ”¶5 (lambda (n) (if (zero? n) 1 (* n (func-arg (- n 1)))))) (lambda (arg) ((procedure procedure) arg)))) (lambda (procedure) ((lambda (func-arg) ;;å¸æ”¶5 (lambda (n) (if (zero? n) 1 (* n (func-arg (- n 1)))))) (lambda (arg) ((procedure procedure) arg)))))) (((lambda (procedure) (lambda (n) (if (zero? n) 1 (* n ((procedure procedure) (- n 1)))))) (lambda (procedure) (lambda (n) (if (zero? n) 1 (* n ((procedure procedure) (- n 1))))))) 5) (define fact1 (lambda (x) (letrec ((F (lambda (procedure) ((lambda (func-arg) ;;å¸æ”¶5 (lambda (n) (if (zero? n) 1 (* n (func-arg (- n 1)))))) (lambda (arg) ((procedure procedure) arg)))))) ((F F) x)))) (define Y (lambda (X) ((lambda (procedure) (X (lambda (arg) ((procedure procedure) arg)))) (lambda (procedure) (X (lambda (arg) ((procedure procedure) arg))))))) (((lambda (X) ((lambda (procedure) (X (lambda (arg) ((procedure procedure) arg)))) (lambda (procedure) (X (lambda (arg) ((procedure procedure) arg)))))) (lambda (func-arg) (lambda (n) (if (zero? n) 1 (* n (func-arg (- n 1))))))) 5) ;;å¦‚ä½•å¸æ”¶F å½¢æˆ(F F)çš„å½¢å¼ äº§ç”Ÿå¾ªç¯çš„è°ƒç”¨è¿‡ç¨‹ ;; åªèƒ½æ˜¯é€šè¿‡lambda ç®—å­ æ„é€ proc ä»è€Œè·å¾—å®Œæ•´çš„è¡¨è¾¾å¼ (((lambda (X) ((lambda (F) (lambda (arg) ((F F) arg))) ;;ä¸€å®šè¦ä¿è¯lambdaå°é—­ (lambda (procedure) (X (lambda (arg) ((procedure procedure) arg)))))) (lambda (func-arg) (lambda (n) (if (zero? n) 1 (* n (func-arg (- n 1))))))) 5) (define Y (lambda (X) ((lambda (F) (lambda (arg) ((F F) arg))) ;;ä¸€å®šè¦ä¿è¯lambdaå°é—­ (lambda (procedure) (X (lambda (arg) ((procedure procedure) arg))))))) ((Y (lambda (func-arg) (lambda (n) (if (zero? n) 1 (* n (func-arg (- n 1))))))) 5)  å¯ä»¥çœ‹åˆ°æ¯å¢åŠ ä¸€å±‚(lambada (arg) \u0026hellip;) ï¼Œä¹Ÿå°±æ˜¯(lambda (arg) (lambda (arg2) (lambda (arg) \u0026hellip; )))ï¼Œ ä¹Ÿå°±æ˜¯ \u0026lt;procedure\u0026gt;::= (lambda (arg) (\u0026lt;expression\u0026gt; |\u0026lt;procedure\u0026gt;)) | \u0026lt;procedure\u0026gt;ã€‚\næ–°è¯­è¨€çš„Y+å®ç° (run \u0026quot;let makemult = proc (maker) proc (x) if zero?(x) then 0 else -(((maker maker) -(x,1)), -4) in let times4 = proc (x) ((makemult makemult) x) in (times4 3)\u0026quot;) ;; ==\u0026gt; (num-val 12) ;;times (run \u0026quot;let makemult = proc (maker) proc (x) proc(y) if zero?(x) then 0 else -((((maker maker) -(x, 1)) y), -(0, y)) in let times = proc(x) proc(y) (((makemult makemult) x) y) in ((times 3) 8)\u0026quot;) ;; -\u0026gt; (num-val 24) (run \u0026quot;let makemult = proc (maker) proc (x) proc(y) if zero?(x) then 0 else -((((maker maker) -(x, 1)) y), -(0, y)) in let times = proc(x) proc(y) (((makemult makemult) x) y) in let f = proc(func) proc(num) if zero?(num) then 1 else ((times ((func func) -(num, 1))) num) in let fact = proc (x) ((f f) x) in (fact 5)\u0026quot;) (num-val 12) (num-val 24) (num-val 120)  æœ€ç»ˆæå–ä¸€ä¸ªæ›´ä¸ºç²¾ç®€çš„y-comb\n(run \u0026quot;let makerec = proc (f) let d = proc (x) proc (z) ((f (x x)) z) in proc (n) ((f (d d)) n) in let maketimes4 = proc (f) proc (x) if zero?(x) then 0 else -((f -(x,1)), -4) in let times4 = (makerec maketimes4) in (times4 3)\u0026quot;) (num-val 12)  ç»“è®º Y-combæ˜¯ä¸€ä¸ªç—›è‹¦å’Œå¸Œæœ›çš„æ‰¿è½½è€…(æŒä¿ç•™æ„è§)ï¼ŒéŸµå‘³åè¶³.åˆåƒä¸€ä¸ªèµ°è¿‡å²æœˆå¹´è½®ï¼Œåœ¨å®¶ç­‰å¾…ç€å½’å®¶å„¿å¥³çš„æ€å¦‡ï¼Œç¥ˆç¥·ï¼Œæ‰¿æ‹…ã€‚ Y-Combéœ€è¦ä¸ä¸å®é™,é›¨å¤œé£˜è¿‡ã€‚\n","date":1456554950,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1456554950,"objectID":"7af182e9b300b7d814bbc0c9e806cd72","permalink":"/blog/2016/02/27/the-third-interpreter-implementing-proc/","publishdate":"2016-02-27T14:35:50+08:00","relpermalink":"/blog/2016/02/27/the-third-interpreter-implementing-proc/","section":"archives","summary":"Schemeè§£é‡Šå™¨çš„å¥½å¤„æ˜¯å¯ä»¥ä¸æ–­çš„æ‹“å±•è‡ªå·±è¯­è¨€çš„èƒ½åŠ›ï¼Œ\n é€šè¿‡The First-interpreter-from-eoplåˆ›å»ºäº†ä¸€ä¸ªè¾ƒä¸ºç®€å•let-languageï¼Œå®ç°äº†è¾ƒä¸ºç®€å•çš„å‡æ³•è¿ç®—å’Œletå±€éƒ¨å˜é‡èµ‹å€¼ç­‰åŠŸèƒ½ã€‚ The Second Interpreter from onç¬¬ä¸€æ¬¡æ‰©å±•äº†åŸºç¡€çš„let-languageï¼Œå®ç°äº†å››åˆ™è¿ç®—ï¼Œé€»è¾‘åˆ¤æ–­ï¼Œåˆ—è¡¨æ“ä½œ,åˆ—è¡¨èµ‹å€¼ç­‰ã€‚ è¿™ä¸ªç‰ˆæœ¬çš„è§£é‡Šå™¨è¿›ä¸€æ­¥æ‹“å±•äº†è¿‡ç¨‹å®šä¹‰å’Œè¿‡ç¨‹è°ƒç”¨çš„åŠŸèƒ½ã€‚ ","tags":null,"title":"The third Interpreter implementing Proc","type":"archives"},{"authors":null,"categories":["scheme"],"content":"åœ¨First Interpreter From EOPLä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæœ€ä¸ºåŸºæœ¬çš„è§£é‡Šå™¨ï¼ŒåŒ…å«è§£é‡Šä»¥ä¸‹è§£é‡Šéƒ¨åˆ†\n const-exp diff-exp zero?-exp if-exp var-exp let-exp  è¿™å…­ç§æ˜¯æ¯”è¾ƒåŸºç¡€çš„å½¢å¼ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæˆ‘ä»¬å¯ä»¥å¢åŠ å››åˆ™è¿ç®—ï¼ŒåŠ å…¥listæ“ä½œï¼ŒåŠ å…¥é€»è¾‘æ¯”è¾ƒ\n 1. å¢åŠ å››åˆ™è¿ç®—  1.1 lang.scmä¿®æ”¹å››åˆ™è¿ç®— 1.2 interp.scmä¿®æ”¹å››åˆ™è¿ç®— 1.3 æµ‹è¯•å››åˆ™è¿ç®—ç»“æœ  2. å¢åŠ é€»è¾‘æ¯”è¾ƒ  2.1 lang.scmä¿®æ”¹é€»è¾‘æ¯”è¾ƒ 2.2 interp.scmä¿®æ”¹é€»è¾‘æ¯”è¾ƒ 2.3 æµ‹è¯•é€»è¾‘æ¯”è¾ƒç»“æœ  3. åŠ å…¥åˆ—è¡¨æ“ä½œ  3.1 lang.scmä¿®æ”¹åˆ—è¡¨æ“ä½œ 3.2 interp.scmä¿®æ”¹åˆ—è¡¨æ“ä½œ 3.3 data-structures.scmå¢åŠ äº†expvalå€¼ç±»å‹å’Œ4ä¸ªæ“ä½œ 3.4 æµ‹è¯•ä¿®æ”¹åˆ—è¡¨æ“ä½œç»“æœ  4. listå…·ä½“å®ç°  4.1 lang.scmä¿®æ”¹listå…·ä½“å®ç° 4.2 interp.scmä¿®æ”¹listå…·ä½“å®ç° 4.3 data-structures.scmä¿®æ”¹listçš„å…·ä½“å®ç° 4.3 æµ‹è¯•listå…·ä½“å®ç°ç»“æœ  5. condæ¡ä»¶æ¯”è¾ƒ  5.1 lang.scmä¿®æ”¹condæ¡ä»¶æ¯”è¾ƒ 5.2 interp.scmä¿®æ”¹condæ¡ä»¶æ¯”è¾ƒ 5.3 æµ‹è¯•condæ¡ä»¶æ¯”è¾ƒç»“æœ  6. printæ˜¾ç¤º  6.1 lang.scmä¿®æ”¹printæ˜¾ç¤º 6.2 interp.scmä¿®æ”¹printæ˜¾ç¤º 6.3 æµ‹è¯•printæ˜¾ç¤ºç»“æœ  7. letçš„æ”¹è¿›å’Œlet*çš„åŠ å…¥  7.1 letæ”¹è¿›ä¹‹interp.scm 7.2 letæ”¹è¿›ä¹‹lang.scm 7.3 letæ”¹è¿›ç»“æœ 7.4 let*çš„lang.scmå…·ä½“å®ç° 7.5 let*çš„interp.scmå…·ä½“å®ç° 7.6 let*çš„æµ‹è¯•ç»“æœ  8. unpackåˆ—è¡¨èµ‹å€¼  8.1 unpackçš„interp.scmä¿®æ”¹ 8.2 unpackçš„lang.scmä¿®æ”¹ 8.3 æµ‹è¯•unpackä¿®æ”¹ç»“æœ   1. å¢åŠ å››åˆ™è¿ç®—  1.1 lang.scmä¿®æ”¹å››åˆ™è¿ç®— åœ¨the-grammerå¢åŠ å¦‚ä¸‹expressions\n;;;new add + * / (expression (\u0026quot;+\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;,\u0026quot; expression \u0026quot;)\u0026quot;) add-exp) (expression (\u0026quot;*\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;,\u0026quot; expression \u0026quot;)\u0026quot;) mult-exp) (expression (\u0026quot;/\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;,\u0026quot; expression \u0026quot;)\u0026quot;) div-exp)  1.2 interp.scmä¿®æ”¹å››åˆ™è¿ç®— åœ¨value-ofå¢åŠ å¦‚ä¸‹expressions\n(add-exp (exp1 exp2) (let ((val1 (value-of exp1 env)) (val2 (value-of exp2 env))) (let ((num1 (expval-\u0026gt;num val1)) (num2 (expval-\u0026gt;num val2))) (num-val (+ num1 num2))))) (mult-exp (exp1 exp2) (let ((val1 (value-of exp1 env)) (val2 (value-of exp2 env))) (let ((num1 (expval-\u0026gt;num val1)) (num2 (expval-\u0026gt;num val2))) (num-val (* num1 num2))))) (div-exp (exp1 exp2) (let ((val1 (value-of exp1 env)) (val2 (value-of exp2 env))) (let ((num1 (expval-\u0026gt;num val1)) (num2 (expval-\u0026gt;num val2))) (num-val (/ num1 num2)))))  1.3 æµ‹è¯•å››åˆ™è¿ç®—ç»“æœ åœ¨åŸå…ˆå‡æ³•çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¹˜æ³•ã€åŠ æ³•å’Œé™¤æ³•ã€‚\n(run \u0026quot;let x = -(4,1) in +(x,1)\u0026quot;) (run \u0026quot;let x = -(4,1) in *(x,2)\u0026quot;) (run \u0026quot;let x = -(4,1) in /(x,2)\u0026quot;) ç»“æœ: (num-val 4) (num-val 6) (num-val 1 1/2)  2. å¢åŠ é€»è¾‘æ¯”è¾ƒ  2.1 lang.scmä¿®æ”¹é€»è¾‘æ¯”è¾ƒ ;;å¢åŠ é€»è¾‘æ¯”è¾ƒ (expression (\u0026quot;equal?\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;,\u0026quot; expression \u0026quot;)\u0026quot;) equal?-exp) (expression (\u0026quot;less?\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;,\u0026quot; expression \u0026quot;)\u0026quot;) less?-exp) (expression (\u0026quot;greater?\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;,\u0026quot; expression \u0026quot;)\u0026quot;) greater?-exp) (expression (\u0026quot;minus\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;)\u0026quot;) minus-exp)  2.2 interp.scmä¿®æ”¹é€»è¾‘æ¯”è¾ƒ ``` scheme (equal?-exp (exp1 exp2) (let ((val1 (value-of exp1 env)) (val2 (value-of exp2 env))) (let ((num1 (expval-num val1)) (num2 (expval-num val2))) (bool-val (= num1 num2))))) (less?-exp (exp1 exp2) (let ((val1 (value-of exp1 env)) (val2 (value-of exp2 env))) (let ((num1 (expval-num val1)) (num2 (expval-num val2))) (bool-val (num val1)) (num2 (expval-num val2))) (bool-val ( num1 num2))))) (minus-exp (body-exp) (let ((val1 (value-of body-exp env))) (let ((num (expval-num val1))) (num-val (- 0 num))))) ``` 2.3 æµ‹è¯•å¢åŠ é€»è¾‘æ¯”è¾ƒç»“æœ (run \u0026quot;if less?(1, 2) then 1 else 2\u0026quot;) (run \u0026quot;if greater?(2, 1) then minus(1) else minus(2)\u0026quot;) (num-val 1) (num-val -1)  3. åŠ å…¥åˆ—è¡¨æ“ä½œ  3.1 lang.scmä¿®æ”¹åˆ—è¡¨æ“ä½œ ;;; å¢åŠ listæ¯”è¾ƒ ;;new stuff (expression (\u0026quot;cons\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;,\u0026quot; expression \u0026quot;)\u0026quot;) cons-exp) (expression (\u0026quot;car\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;)\u0026quot;) car-exp) (expression (\u0026quot;cdr\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;)\u0026quot;) cdr-exp) (expression (\u0026quot;emptylist\u0026quot;) emptylist-exp) (expression (\u0026quot;null?\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;)\u0026quot;) null?-exp)  3.2 interp.scmä¿®æ”¹åˆ—è¡¨æ“ä½œ ;;;å¢åŠ äº†listæ“ä½œ (emptylist-exp () (emptylist-val)) (cons-exp (exp1 exp2) (let ((val1 (value-of exp1 env)) (val2 (value-of exp2 env))) (pair-val val1 val2))) (car-exp (body) (expval-car (value-of body env))) (cdr-exp (body) (expval-cdr (value-of body env))) (null?-exp (exp) (expval-null? (value-of exp env)))  3.3 data-structures.scmå¢åŠ äº†expvalå€¼ç±»å‹å’Œ4ä¸ªæ“ä½œ  ä¿®æ”¹expvaléƒ¨åˆ†  å¢åŠ äº†pair-valå’Œemptylist-val ä¸¤ä¸ªè¯­è¨€çš„æ–°å€¼ï¼Œè¿™ä¹Ÿæ˜¯åŒºåˆ†ä¹‹å‰çš„å››åˆ™è¿ç®—å’Œé€»è¾‘æ¯”è¾ƒçš„è¿‡ç¨‹\n(pair-val (car expval?) (cdr expval?)) (emptylist-val)   å¢åŠ äº†4ä¸ªexpvalç±»å‹å˜æ¢æ“ä½œ\n;;å¢åŠ 4ä¸ªexpval-\u0026gt;æ“ä½œ (define expval-\u0026gt;pair (lambda (v) (cases expval v (pair-val (car cdr) (cons car cdr)) (else (expval-extractor-error 'pair v))))) (define expval-car (lambda (v) (cases expval v (pair-val (car cdr) car) (else (expval-extractor-error 'car v))))) (define expval-cdr (lambda (v) (cases expval v (pair-val (car cdr) cdr) (else (expval-extractor-error 'cdr v))))) (define expval-null? (lambda (v) (cases expval v (emptylist-val () (bool-val #t)) (else (bool-val #f)))))   3.4 æµ‹è¯•ä¿®æ”¹åˆ—è¡¨æ“ä½œç»“æœ (run \u0026quot;cons(1, 2)\u0026quot;) (run \u0026quot;car (cons (1, 2))\u0026quot;) (run \u0026quot;cdr (cons (1, 2))\u0026quot;) (run \u0026quot;null? (emptylist)\u0026quot;) (run \u0026quot;null? (cons (1, 2))\u0026quot;) (run \u0026quot;let x = 4 in cons(x, cons(cons(-(x,1), emptylist), emptylist))\u0026quot;) (pair-val (num-val 1) (num-val 2)) (num-val 1) (num-val 2) (bool-val #t) (bool-val #f) (pair-val (num-val 4) (pair-val (pair-val (num-val 3) (emptylist-val)) (emptylist-val)))  é”™è¯¯çš„æµ‹è¯•ï¼š\n\u0026gt; (run \u0026quot;car (3 5 3)\u0026quot;) . . parsing: at line 1: looking for \u0026quot;)\u0026quot;, found number 5 in production ((string \u0026quot;car\u0026quot;) (string \u0026quot;(\u0026quot;) (non-term expression) (string \u0026quot;)\u0026quot;) (reduce #\u0026lt;procedure:car-exp\u0026gt;)) \u0026gt; (run \u0026quot;car (3,5)\u0026quot;) . . parsing: at line 1: looking for \u0026quot;)\u0026quot;, found literal-string111 \u0026quot;,\u0026quot; in production ((string \u0026quot;car\u0026quot;) (string \u0026quot;(\u0026quot;) (non-term expression) (string \u0026quot;)\u0026quot;) (reduce #\u0026lt;procedure:car-exp\u0026gt;)) \u0026gt; (run \u0026quot;null? ()\u0026quot;) . . parsing: at line 1: nonterminal \u0026lt;expression\u0026gt; can't begin with literal-string111 \u0026quot;)\u0026quot; \u0026gt; (run \u0026quot;car (cons (3,5))\u0026quot;) (num-val 3)  å…·ä½“åŸå› æ˜¯car-expçš„å®šä¹‰æ˜¯é€šè¿‡expval-carçš„å®ç°ï¼Œè€Œexpval-caræ¥å—çš„æ˜¯consåˆ›é€ çš„æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥å‡ºç°äº†é—®é¢˜ã€‚\n(car-exp (body) (expval-car (value-of body env))) (pair-val (car expval?) (cdr expval?)) (emptylist-val) (define expval-car (lambda (v) (cases expval v (pair-val (car cdr) car) ;;våœ¨è¿™è¾¹æ˜¯expvalç±»å‹,æ›´å…·ä½“æ¥è¯´æ˜¯pair-val,å…¶ä»–ç±»å‹æ²¡æœ‰å¯¹åº”çš„æ“ä½œ ;;è€Œåœ¨å½“å‰çš„æƒ…å†µç»† pair-valåªèƒ½é€šè¿‡consåˆ›å»ºï¼ï¼ (else (expval-extractor-error 'car v))))) å¹¶éœ€è¦å¢åŠ pair-var?çš„æ•°æ®ç±»å‹ (define-datatype expval expval? (num-val (value number?)) (bool-val (boolean boolean?)) (pair-val (car expval?) (cdr expval?)) (emptylist-val)) å¯ä»¥å‚è€ƒvalue-ofä¸­å…³äºcons-expçš„å®šä¹‰ï¼š (cons-exp (exp1 exp2) (let ((val1 (value-of exp1 env)) (val2 (value-of exp2 env))) (pair-val val1 val2)))  æ³¨æ„æ“ä½œç¬¦åé¢ä¸æ˜¯å¿…é¡»ç›´æ¥è·Ÿä¸Šæ‹¬å·(ç©ºæ ¼ä¼šè¢«ç›´æ¥å¿½ç•¥) è€Œæ˜¯åº”è¯¥ä¿è¯æ‹¬å·çš„å¯¹ç§°æ€§ã€‚ \u0026gt; (run \u0026quot;* (3,4\u0026quot;) . . parsing: at line 1: looking for \u0026quot;)\u0026quot;, found end-marker #f in production ((string \u0026quot;*\u0026quot;) (string \u0026quot;(\u0026quot;) (non-term expression) (string \u0026quot;,\u0026quot;) (non-term expression) (string \u0026quot;)\u0026quot;) (reduce #\u0026lt;procedure:mult-exp\u0026gt;)) \u0026gt; (run \u0026quot;+(3,4)\u0026quot;) (num-val 7) \u0026gt; (run \u0026quot;*(3,4)\u0026quot;) (num-val 12)  4.listçš„å…·ä½“å®ç°  4.1 lang.scmä¿®æ”¹listå…·ä½“å®ç° (expression (\u0026quot;list\u0026quot; \u0026quot;(\u0026quot; (separated-list expression \u0026quot;,\u0026quot;) \u0026quot;)\u0026quot; ) list-exp)  4.2 interp.scmä¿®æ”¹listå…·ä½“å®ç°  å¢åŠ ä¸€ä¸ªapply-elmç”¨äºlistæ“ä½œã€‚\n;; used as map for the list (define apply-elm (lambda (env) (lambda (elem) (value-of elem env))))  å¢åŠ äº†listç±»å‹\n;;; å¢åŠ äº†listæ“ä½œ (list-exp (args) (list-val (map (apply-elm env) args)))   4.3 data-structures.scmä¿®æ”¹listçš„å…·ä½“å®ç°  å¢åŠ äº†list-valçš„å®ç°:\n;;;å¢åŠ äº†listçš„å…·ä½“å®ç° (define list-val (lambda (args) (if (null? args) (emptylist-val) (pair-val (car args) (list-val (cdr args))))))  4.4 æµ‹è¯•listå…·ä½“å®ç°çš„ç»“æœ (run \u0026quot;list(1, 2, 3)\u0026quot;) (run \u0026quot;car(cdr(list(1, 2, 3)))\u0026quot;) (run \u0026quot;let x = 4 in list(x, -(x,1), -(x,3))\u0026quot;) (pair-val (num-val 1) (pair-val (num-val 2) (pair-val (num-val 3) (emptylist-val)))) (num-val 2) (pair-val (num-val 4) (pair-val (num-val 3) (pair-val (num-val 1) (emptylist-val))))  5. condæ¡ä»¶æ¯”è¾ƒ  5.1 lang.scmä¿®æ”¹condæ¡ä»¶æ¯”è¾ƒ  ;;å¢åŠ äº†condå…·ä½“è¯­æ³• ;; new stuff (expression (\u0026quot;cond\u0026quot; (arbno expression \u0026quot;==\u0026gt;\u0026quot; expression) \u0026quot;end\u0026quot;) cond-exp)  5.2 interp.scmä¿®æ”¹condæ¡ä»¶æ¯”è¾ƒ   å¢åŠ ä¸€ä¸ªcond-valï¼Œä¹‹æ‰€ä»¥ä¸åœ¨ç±»ä¼¼åŠ å…¥åˆ—è¡¨å®ç°å’Œlistå…·ä½“å®ç°æ·»åŠ valè½¬æ¢ï¼Œæ˜¯å› ä¸ºcond-valæ¶‰åŠåˆ°value-of ç¨‹åºï¼Œæ‰€ä»¥éœ€è¦æ”¾åœ¨interp.scmä¸­,æ”¾åœ¨apply-elmä¹‹åå³å¯.\n;;å¢åŠ äº†cond-valçš„å¤„ç† ;;new stuff (define cond-val (lambda (conds acts env) (cond ((null? conds) (error 'cond-val \u0026quot;No conditions got into #t\u0026quot;)) ((expval-\u0026gt;bool (value-of (car conds) env)) (value-of (car acts) env)) (else (cond-val (cdr conds) (cdr acts) env)))))  åœ¨value-ofä¸­å¢åŠ äº†å…·ä½“çš„å®ç°\n;;;å¢åŠ äº†condæ“ä½œ (cond-exp (conds acts) (cond-val conds acts env))   5.3 æµ‹è¯•condæ¡ä»¶æ¯”è¾ƒç»“æœ (run \u0026quot;less?(1, 2)\u0026quot;) (run \u0026quot;cond less?(1, 2) ==\u0026gt; 2 end\u0026quot;) (run \u0026quot;cond less?(2, 1) ==\u0026gt; 1 greater?(2, 2) ==\u0026gt; 2 greater?(3, 2) ==\u0026gt; 3 end\u0026quot;) (bool-val #t) (num-val 2) (num-val 3)  6. printæ˜¾ç¤º  6.1 lang.scmä¿®æ”¹printæ˜¾ç¤º ;; new stuff (expression (\u0026quot;print\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;)\u0026quot;) print-exp)  6.2 interp.scmä¿®æ”¹printæ˜¾ç¤º ;;;å¢åŠ äº†print (print-exp (arg) (let ((val (value-of arg env))) ;(print val) ;;ç¼–è¯‘ä¸é€šè¿‡ æ”¹ä¸ºdisplay (display val) ; (num-val 1)))  6.3 æµ‹è¯•printæ˜¾ç¤ºç»“æœ (run \u0026quot;print( less? (1, 2))\u0026quot;) #(struct:bool-val #t)(num-val 1)  7. letçš„æ”¹è¿›å’Œlet*çš„åŠ å…¥  ä¸€ä¸ªé—®é¢˜ æ€ä¹ˆä¼šæœ‰é—®é¢˜ï¼Ÿ\n (run \u0026quot;let x = 30 in let x = -(x,1) y = -(x,2) in -(x, y)\u0026quot;) . . parsing: at line 3: looking for \u0026quot;in\u0026quot;, found identifier y in production ((string \u0026quot;let\u0026quot;) (term identifier) (string \u0026quot;=\u0026quot;) (non-term expression) (string \u0026quot;in\u0026quot;) (non-term expression) (reduce #\u0026lt;procedure:let-exp\u0026gt;))  åˆ†æåŸå…ˆçš„letè®¾è®¡ç¨‹åº\n (let-exp (var exp1 body) (let ((val1 (value-of exp1 env))) (value-of body (extend-env var val1 env))))  åœ¨è¿™ä¸ªå…·ä½“å®ç°å…¶å®å¹¶æ²¡æœ‰å®ç°å¤šé‡letçš„è¿‡ç¨‹ï¼Œæ‰€ä»¥å¯¼è‡´æœ‰é—®é¢˜ï¼Œæ‰€ä»¥ä¸‹ä¸€æ­¥çš„å…³é”®é—®é¢˜æ˜¯å¦‚ä½•å®ç°åµŒå¥—çš„let-expè§£æã€‚\nletæ”¹è¿›ä¹‹interp.scm ä¿®æ”¹   å¢åŠ ä¸¤ä¸ªlet-expçš„è¾…åŠ©ç¨‹åº\n;; let-expçš„åµŒå¥—å®ç° (define value-of-vals (lambda (vals env) (if (null? vals) '() (cons (value-of (car vals) env) (value-of-vals (cdr vals) env))))) (define extend-env-list (lambda (vars vals env) (if (null? vars) env (let ((var1 (car vars)) (val1 (car vals))) (extend-env-list (cdr vars) (cdr vals) (extend-env var1 val1 env))))))  æ”¹å˜letexpçš„å…·ä½“å®ç°\n; (let-exp (var exp1 body) ; (let ((val1 (value-of exp1 env))) ; (value-of body ; (extend-env var val1 env)))) (let-exp (vars vals body) (let ((_vals (value-of-vals vals env))) (value-of body (extend-env-list vars _vals env))))   7.2 letæ”¹è¿›ä¹‹lang.scm  ; (expression ; (\u0026quot;let\u0026quot; identifier \u0026quot;=\u0026quot; expression \u0026quot;in\u0026quot; expression) ; let-exp) (expression (\u0026quot;let\u0026quot; (arbno identifier \u0026quot;=\u0026quot; expression) \u0026quot;in\u0026quot; expression) let-exp)  è¿˜æ˜¯æ²¡æ”¹å¥½ï¼Ÿ\nlink: bad variable linkage; reference to a variable that is uninitialized reference phase level: 0 variable module: \u0026quot;/home/canbetter/let-lang/lang.scm\u0026quot; variable phase: 0 reference in module: \u0026quot;/home/canbetter/let-lang/interp.scm\u0026quot; in: a-program?  åŸå› å‡ºç°åœ¨letè¯­æ³•ä¸­å¢åŠ äº† (arbno ...)æ“ä½œã€‚\nè¿™ä¸ªé—®é¢˜å¯ä»¥èµ˜è¿°åˆ°cond-expçš„å®ç°,å…¶ä¸­ä¹Ÿæ¶‰åŠåˆ°arbnoçš„ç¬¬ä¸€æ¬¡é”®å…¥ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆä¼šå‡ºç°æœªåˆå§‹åŒ–å˜é‡çš„æƒ…å†µï¼Ÿ\nä½†æ˜¯ä¸»è¦è¿˜æ˜¯å› ä¸ºä¿å­˜å¾—ä¸å½»åº•ï¼ï¼å¯¼è‡´äº†å¹¶æœªåˆå§‹åŒ–ï¼Œé‡æ–°ä¿å­˜å³å¯ã€‚\n7.3 letæ”¹è¿›ç»“æœ  (run \u0026quot;let x = -(4,1) in let x =+(x,1) in -(x,10)\u0026quot;) (num-val -6) (run \u0026quot;let x = -(4,1) in let x =+(x,1) y=-(x,10) in -(x,y)\u0026quot;) (num-val 11) ;; x=4 y=-(3,10)=-7 æ‰€ä»¥-(x,y)=11è€Œä¸æ˜¯ 10  é‚£ä¹ˆå¦‚ä½•å®ç°ä¸€ä¸ªlet*ï¼Œä½¿å¾—letä¸­çš„xå˜åŒ–çš„å€¼ç«‹å³åæ˜ åˆ°yä¸­ã€‚\n7.4 let*çš„lang.scmå…·ä½“å®ç°  è¯¥å®ç°æ–¹å¼åŸºæœ¬ä¸Šå’Œletçš„è¯­æ³•ä¸€æ ·\n(expression (\u0026quot;let*\u0026quot; (arbno identifier \u0026quot;=\u0026quot; expression) \u0026quot;in\u0026quot; expression) let*-exp)  7.5 let*çš„interp.scmå…·ä½“å®ç°   å¢åŠ äº†ä¸€ä¸ªextend-env-list-iteræ“ä½œ,ç”±äºä¹Ÿæ˜¯å­˜åœ¨value-ofæ‰€ä»¥æ”¾å…¥interp.scmä¸­ã€‚\n(define extend-env-list-iter (lambda(vars vals env) (if (null? vars) env (let ((var1 (car vars)) (val1 (value-of (car vals) env))) (extend-env-list-iter (cdr vars) (cdr vals) (extend-env var1 val1 env))))))  let*çš„ç±»å‹å®šä¹‰\n(let*-exp (vars vals body) (value-of body (extend-env-list-iter vars vals env)))   7.6 let*çš„æµ‹è¯•ç»“æœ  (run \u0026quot;let x = 30 in let x = -(x,1) y = -(x,2) in -(x, y)\u0026quot;) (run \u0026quot;let x = 30 in let* x = -(x,1) y = -(x,2) in -(x, y)\u0026quot;) (num-val 1) (num-val 2)  8. unpackåˆ—è¡¨èµ‹å€¼  8.1 unpackçš„interp.scmä¿®æ”¹   å¢åŠ äº†extend-env-list-expçš„æ“ä½œï¼Œç”¨äºé’ˆå¯¹unpackçš„ç‰¹æ®Šçš„ç¯å¢ƒæ‹“å±•,å½“ç„¶å¯ä»¥æŠŠå®ƒæ”¾åœ¨data-structures.scmä¸­\n;;; å…³äºunpackçš„æ“ä½œ (define extend-env-list-exp (lambda (vars vals env) (if (null? vars) env (let ((var1 (car vars)) (val1 (expval-car vals))) (extend-env-list-exp (cdr vars) (expval-cdr vals) (extend-env var1 val1 env))))))  unpack-expçš„å…·ä½“å®ç°:\n(unpack-exp (vars vals body) (let ((_vals (value-of vals env))) (value-of body (extend-env-list-exp vars _vals env))))   8.2 unpackçš„lang.scmä¿®æ”¹  ;;new stuff (expression (\u0026quot;unpack\u0026quot; (arbno identifier) \u0026quot;=\u0026quot; expression \u0026quot;in\u0026quot; expression) unpack-exp)  8.3 æµ‹è¯•unpackä¿®æ”¹ç»“æœ  ;; new testcase (run \u0026quot;let u = 7 in unpack x y = cons(u, cons(3,emptylist)) in -(x,y)\u0026quot;) (num-val 4) ;;;(x y)= (7 3) -(7,3)=4  ç»“è®º è¿™æ˜¯è¿™å¯¹First Interpreter From EOPL çš„8ä¸ªæ–¹é¢çš„æ‹“å±•ï¼Œå¯¹äºè®¤è¯†è¯­è¨€çš„è®¾è®¡æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚\n","date":1456506292,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1456506292,"objectID":"84b7ca5e180acf43197c90859f1066e0","permalink":"/blog/2016/02/27/the-second-interpreter-from-one/","publishdate":"2016-02-27T01:04:52+08:00","relpermalink":"/blog/2016/02/27/the-second-interpreter-from-one/","section":"archives","summary":"åœ¨First Interpreter From EOPLä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæœ€ä¸ºåŸºæœ¬çš„è§£é‡Šå™¨ï¼ŒåŒ…å«è§£é‡Šä»¥ä¸‹è§£é‡Šéƒ¨åˆ†\n const-exp diff-exp zero?-exp if-exp var-exp let-exp  è¿™å…­ç§æ˜¯æ¯”è¾ƒåŸºç¡€çš„å½¢å¼ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæˆ‘ä»¬å¯ä»¥å¢åŠ å››åˆ™è¿ç®—ï¼ŒåŠ å…¥listæ“ä½œï¼ŒåŠ å…¥é€»è¾‘æ¯”è¾ƒ\n","tags":null,"title":"The Second Interpreter from One","type":"archives"},{"authors":null,"categories":["Linux"],"content":"å…³äºYDIffå¤„ç†å·²ç»åœ¨ä½¿ç”¨Ydiffå·¥å…·ç”Ÿæˆæ–‡ä»¶å·®å¼‚æ¯”è¾ƒæ–‡ä»¶ä¸­æåŠï¼Œä½†æ˜¯åªæ˜¯æ¯”è¾ƒäº†ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¹‹é—´çš„æ–‡ä»¶ï¼Œ è€Œå¦‚æœæ˜¯è¾ƒä¸ºç®€å•çš„å•ä¸ªæ–‡ä»¶çš„æ‰€æœ‰æ–‡ä»¶çš„æ¯”è¾ƒï¼Ÿç±»ä¼¼æ€è·¯å¦‚ä¸‹æ‰€ç¤ºï¼Œ\nä¸€å®šè¦æ³¨æ„æ•°ç»„ä½¿ç”¨çš„æ˜¯å°æ‹¬å·åŒ…æ‹¬èµ·æ¥ï¼Œå¦åˆ™ç¨‹åºæœ‰é—®é¢˜ã€‚\n#éå†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ å¹¶è¿›è¡Œæ¯”è¾ƒ æœ€ç»ˆç»“æœå­˜å…¥final-result #array1=`ls *.scm` array1=(`ls *.scm`) # å¿…é¡»åŠ ä¸Šæ‹¬å· mkdir final-result for i in `seq 0 $((${#array1[@]}-1))`; do #éå†ä»iä¹‹åçš„æ–‡ä»¶ for j in ${array1[@]:$i+1:${#array1[@]}}; do #echo ${array1[$i]},$j; dir1=${array1[$i]}; dir2=$j; # é€‰å–å¯¹åº”æ–‡ä»¶å¤¹ä¸‹çš„scmæ–‡ä»¶ #export TestVari=$i /home/happycamp-of-lisp/wangying/ydiff/diff-lisp $dir1 ${dir2} done; done; mv *.html final-result cp ./nav.js ./diff.css final-result  lsä¼šæ‰¾å‡ºå½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰scmæ–‡ä»¶ï¼Œç„¶ååˆ©ç”¨bashä¸­çš„æ•°ç»„æ“ä½œï¼Œä½¿ç”¨åŒé‡ å¾ªç¯è¿›è¡Œéå†å³å¯ã€‚\n","date":1456482548,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1456482548,"objectID":"fab5745e70e75652d3ed8268bec01bd3","permalink":"/blog/2016/02/26/ydiffdan-wen-jian-jia-de-suo-you-scmwen-jian-bi-jiao/","publishdate":"2016-02-26T18:29:08+08:00","relpermalink":"/blog/2016/02/26/ydiffdan-wen-jian-jia-de-suo-you-scmwen-jian-bi-jiao/","section":"archives","summary":"å…³äºYDIffå¤„ç†å·²ç»åœ¨ä½¿ç”¨Ydiffå·¥å…·ç”Ÿæˆæ–‡ä»¶å·®å¼‚æ¯”è¾ƒæ–‡ä»¶ä¸­æåŠï¼Œä½†æ˜¯åªæ˜¯æ¯”è¾ƒäº†ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¹‹é—´çš„æ–‡ä»¶ï¼Œ è€Œå¦‚æœæ˜¯è¾ƒä¸ºç®€å•çš„å•ä¸ªæ–‡ä»¶çš„æ‰€æœ‰æ–‡ä»¶çš„æ¯”è¾ƒï¼Ÿç±»ä¼¼æ€è·¯å¦‚ä¸‹æ‰€ç¤ºï¼Œ\n","tags":null,"title":"Ydiffå•æ–‡ä»¶å¤¹çš„æ‰€æœ‰scmæ–‡ä»¶æ¯”è¾ƒ","type":"archives"},{"authors":null,"categories":["scheme"],"content":"What does it mean by Kleene star? What can it be used for? It is not so important,but a good tools to record the grammer of the language.ç›®çš„å°±æ˜¯å¦‚ä½•æ›´ç®€æ´åœ°å®šä¹‰è¯­æ³•ã€‚\nå‡ ä¸ªåŸºæœ¬å­—ç¬¦ Nonterminal Symbols æŒ‡ä»£è¢«å®šä¹‰çš„é›†åˆåå­—(These are the names of the sets being defined)ï¼Œæ¯”å¦‚List-of-Int,List-of-Char\u0026hellip;, è¿™äº›é›†åˆæœ‰æ—¶å€™ä¹Ÿè¢«å«åšè¯­ä¹‰åˆ†ç±»(syntactic categories)\nè€Œä¸”ä¸€èˆ¬æ˜¯ofè¿æ¥è¯æ˜¯å°å†™ï¼Œå…¶ä»–è¡¨å¾ç±»å‹çš„æ˜¯å¤§å†™(capitalized)ã€‚ è¿™æ˜¯ä¸€ä¸ªä¹ æƒ¯ï¼Œå½“ç„¶å¦‚æœæŒ‡å¼•æŸä¸ªå•ä¸€çš„å…ƒç´ çš„æ—¶å€™æˆ‘ä»¬ä¼šç”¨å°å†™å­—æ¯ï¼Œ æ¯”å¦‚ Expression is a nonterminal, å¯ä»¥å†™æˆ\n e \u0026lt;- Expression or e is an expression  å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å†™æˆæ›´ä¸ºç®€å•çš„å½¢å¼ï¼Œå«åšBackus-Naur Form(BNF),å³ç”¨å°–æ‹¬å·åŒ…è£¹å°å†™å­—æ¯è¡¨è¾¾å¼ï¼Œ\n \u0026lt;expression\u0026gt;  Terminal Symbols:  left parenthesis å·¦æ‹¬å· ( right parenthesis å³æ‹¬å· ) period å¥å· ç‚¹å· .  Production(The rules) The rules are called productions.æ¯ä¸€ä¸ªProductionåŒ…å«left-handsideï¼ˆlhs),right-handside(rhs),å¹¶ç”¨::=æ¥è¿æ¥ lhså’Œrhsï¼Œ::=ä¹Ÿè¢«è¯»ä½œis or can be\n lhsä¸€èˆ¬æ˜¯nonterminal symbol,è¡¨å¾çš„æ˜¯è¯­ä¹‰ç±»(syntactic category) rhsä¸€èˆ¬æ˜¯ç”±terminal symbols(æ¯”å¦‚left and right parenthesis ,or period)å’Œnonterminal symbols ç»„åˆèµ·æ¥ã€‚ rhsçš„ä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥æŒ‰ç…§å…¶ä»–è¯­ä¹‰åˆ†ç±»(æ¯ä¸€è¡Œéƒ½å«åšä¸€ç§è¯­ä¹‰åˆ†ç±»ï¼‰å’ŒTerminal symbolslæŒ‡å®š(specify)å¯¹åº”è¯­ä¹‰ç±» çš„æ„é€ æˆå‘˜çš„æ–¹æ³•(a method of constructing the members of the syntactic category)   Int ::= (1 2 3 ....)\n Double ::= (1.11246 1.2 1.3 ...)\n Char ::= (a b c ...)\n Float ::= (1.1 1.2 1.3 ...)\n List-of-Int ::= () List-of-Int ::= (Int . List-of-Int)\n Lists ::= ()|(Scheme Val . List)\n  å½“ç„¶æœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿå¯ä»¥å¿½ç•¥ç¬¬äºŒä¸ªè¯­ä¹‰ç±»çš„List-of-Int,æ¯”å¦‚\n List-of-Int ::= () ::= (Int . List-of-Int)  å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åªç”¨ä¸€è¡Œæ¥è¡¨ç¤ºè¯­ä¹‰ç±»ï¼ˆå½’ä¸€ä¸ºä¸€æ¡è¯­ä¹‰ï¼‰ï¼šä½¿ç”¨vertical bar(| ),ä¹Ÿè¢«è¯»ä½œor\n List-of-Int ::= ()|(Int . List-of-Int)  å¦å¤–æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ç§æ›´ä¸ºç®€æ´çš„å½¢å¼ï¼š ä½¿ç”¨ Kleene Staråˆ©ç”¨å¤§æ‹¬å·(flower braces), {}*\n List-of-Int ::= ({Int}*)  å…¶ä¸­*è¡¨ç¤ºçš„æ˜¯0ä¸ªæˆ–è€…0ä¸ªä»¥ä¸Šï¼Œä¹Ÿå¯ä»¥å˜æ¢ä¸º+ã€‚ +:è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªæˆ–è€…ä¸€ä¸ªä»¥ä¸Š.\n List-of-Int ::= ({Int}+)  å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥è§„å®šIntä¹‹é—´çš„åˆ†å‰²æ ‡å¿—,åˆ©ç”¨seperation list\n List-of-Int ::= ({Int}*(,)) è¡¨ç¤ºçš„æ˜¯\n8 1,2 3,4,6  List-of-Int ::= ({Int}*(;))\n8 1;2 3;4;6   è¯­ä¹‰æ¨å¯¼(Syntactic derivation)ç»ƒä¹   (14 . ()) is a List-of-Int?\nList-of-Int =\u0026gt; (Int . (List-of-Int)) =\u0026gt; (14 . (List-of-Int)) =\u0026gt; (14 . ()) so, it is true.  (-7 . (3 . (14 . ()))) is a List-of-Int?\nList-of-Int =\u0026gt; (Int . (List-of-Int)) =\u0026gt; (-7 . (List-of-Int)) =\u0026gt; (-7 . (3 . (List-of-Int))) =\u0026gt; (-7 . (3 . (14 . (List-of-Int)))) =\u0026gt; (-7 . (3 . (14 . ()))) so, it is true.  (a b c) is a S-list?\n  å› ä¸º\nS-list = ({S-exp}(`*`)) S-exp = Symbol | S-list  S-list =\u0026gt; ({S-exp}(*)) =\u0026gt; {Symbol | S-list}(*) =\u0026gt; {a | S-list}(*) =\u0026gt; {a b |S-list}(*) =\u0026gt; {a b c} so, it is S-list   (bar (biz 4 6) (foo 1 2)) is a binary tree?  äºŒå‰æ ‘æ˜¯éå¸¸é‡è¦çš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„å®šä¹‰å½¢å¼æ˜¯\n Bintree ::= Int| (Symbol Bintree Bintree)  æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·è§£æ\n Bintree =\u0026gt;(Int|(Symbol Bintree Bintree)) =\u0026gt;(bar (Int|(Symbol Bintree Bintree)) (Int|(Symbol Bintree Bintree))) =\u0026gt;(bar (biz (Int|(Symbol Bintree Bintree)) (Int|(Symbol Bintree Bintree))) (foo (Int|(Symbol Bintree Bintree)) (Int|(Symbol Bintree Bintree)))) =\u0026gt;(bar (biz 4 6) (foo (Int|(Symbol Bintree Bintree)) (Int|(Symbol Bintree Bintree)))) =\u0026gt;(bar (biz 4 6) (foo 1 2)) So,it is true   (lambda (x) (+ x 6)) is a lambda calculus  lambda calculus æ˜¯ç¨‹åºè¯­è¨€è®¾è®¡ä¸­ååˆ†é‡è¦çš„å°å‹è¯­è¨€ã€‚è¯¥é—¨è¯­è¨€ä»…ä»…åŒ…å«\n å˜é‡å¼•ç”¨(varient references) å•å‚è¿‡ç¨‹(procedures that takes a single argument) è¿‡ç¨‹è°ƒç”¨(procedure calls)  å®šä¹‰å¦‚ä¸‹\n LcExp ::= Identifier ::= (lambda (Identifier) LcExp) ::= (LcExp LcExp)  æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ¤æ–­å¦‚ä¸‹\n LcExp =\u0026gt; Identifier|(lambda (Identifier) LcExp)|(LcExp LcExp) =\u0026gt; (lambda (Identifier) LcExp) =\u0026gt; (lambda (x) Identifier|(lambda (Identifier) LcExp)|(LcExp LcExp)) =\u0026gt; (lambda (x) (LcExp LcExp)) =\u0026gt; (lambda (x) (+ Identifier|(lambda (Identifier) LcExp)|(LcExp LcExp) Identifier|(lambda (Identifier) LcExp)|(LcExp LcExp))) =\u0026gt; (lambda (x) (+ x Identifier|(lambda (Identifier) LcExp)|(LcExp LcExp))) =\u0026gt; (lambda (x) (+ x 6)) So, it is true.  ç»“è®º ä¸Šç±³é‚£è¯´çš„List-of-Int,Bintreeï¼ŒLambda calculusç­‰éƒ½å¯ä»¥å«åšä¸€ç§è¯­ä¹‰ç±»ï¼Œæ˜¯ä¸€é—¨è¯­è¨€ åŒ…å«çš„åŸå§‹ç±»å‹ã€‚ä¸Šé¢çš„syntatic derivationä¹Ÿå¯ä»¥è¢«ç”¨æ¥å½“ä½œç†è®ºè¯æ˜çš„ä¸€ç§å…¥é—¨ï¼Œæœ¬è´¨æ˜¯é€’å½’ç†è®ºã€‚\nè€Œå…¶å®ä»–ä»¬éƒ½å¯ä»¥å½“ä½œæœ€ä¸ºåŸºæœ¬çš„è§£é‡Šå™¨ï¼Œå› ä¸ºä»–ä»¬åœ¨ä¸æ–­çš„è§£æä»–ä»¬æ‰€è¯†åˆ«çš„expressionsï¼Œä¸Šé¢çš„LcExp, List-expç­‰éƒ½å«åšexpressionsï¼Œä¹Ÿæ˜¯è§£é‡Šå™¨çš„å…ƒç´ ã€‚\nè€Œå‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°\nnth-element : List * Int -\u0026gt; SchemeVal  ä»–è¯´æ˜çš„æ˜¯nth-elementæ˜¯ä¸€ä¸ªæ¥å—Listå’ŒIntä½œä¸ºå½¢å‚å¹¶è¿”å›SchemeValçš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯å®ƒå±äºLcExpèŒƒç•´ã€‚\nsubsté‡‡ç”¨kleene starè¿›è¡Œä¹¦å†™ substçš„å®šä¹‰æ˜¯\nsubst : Sym * Sym * S-list -\u0026gt; S-list  ä¸‹é¢çš„å®ç°è¿‡ç¨‹ä»æœ€ä¸ºåŸå§‹çš„åªèƒ½å¤„ç†latçš„å½¢å¼å˜ä¸ºèƒ½å¤Ÿå¤„ç†ä»»æ„åµŒå¥—çš„expressionså½¢å¼ã€‚\n#lang racket ;;æ›¿æ¢åœ¨slistä¸­oldå€¼å‡ºç°çš„å€¼ä¸ºnewå€¼ï¼ˆå¼•ç”¨å€¼ï¼‰ (define subst-original (lambda (new old slist) (if (null? slist) '() (cons (if (eqv? (car slist) old) new (car slist)) (subst new old (cdr slist)))))) ;;mapæ”¹è¿›å¤±è´¥ (define subst-wrong (lambda (new old lst) (map (lambda (x) (if (eq? x old) new old)) lst))) ;;é€šè¿‡map ç®€åŒ–subst-originalçš„åŸå§‹å†™æ³• (define subst-map (lambda (new old lst) (map (lambda (x) (if (eq? x old) new x)) lst))) ;;;é€šè¿‡substæ”¹è¿›S-expression to list-expression (define subst (lambda (new old slist) (if (null? slist) '() (cons (let ((sexp (car slist))) (if (symbol? sexp) (if (eqv? sexp old) new sexp) (subst new old sexp))) (subst new old (cdr slist)))))) ;;;é€šè¿‡map æ”¹è¿›subst (define subst-map-improve (lambda (new old lst) (map (lambda (x) (if (symbol? x) (if (eq? x old) new x) (subst-map new old x))) lst))) (subst-original 'a 'b '(a b c (b b) d b)) ;'(a a c (a a) d a) (subst-map 'a 'b '(a b c (b b) d b)) ;'(a a c (b b) d a) (subst-wrong 'a 'b '(a b c (b b) d b)) ;;;é”™è¯¯åœ¨äºæ‰€æœ‰çš„éoldå€¼éƒ½æ›¿æ¢ä¸ºoldå€¼äº† ;'(b a b b b a) (subst 'a 'b '(a b c (b b) d b)) ;;'(a a c (a a) d a) (subst-map-improve 'a 'b '(a b c (b b) d b)) ;'(a a c (a a) d a)  è¿™ä¸ªæ‹“å±•çš„ä¾‹å­è™½ç„¶å’Œè¡¨è¾¾å¼çš„æ³¨é‡Šä¸»é¢˜å…³ç³»ä¸å¤§ï¼Œä½†æ˜¯ç¡®æ˜¯å¯¹äºé€’å½’é€’å½’ç†è®ºçš„è¿›ä¸€æ­¥é˜è¿°ã€‚é€’å½’è¦æ±‚æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ã€‚\n é€’å½’å‡ºå£(null? slt) (zero? (car lst)) \u0026hellip; é€æ¸æœå‘é€’å½’å‡ºå£çš„ç®—å­ (cdr lst) (- n 1) \u0026hellip;  define-datatypeçš„è¿ç”¨ å…·ä½“å®ç°å¯ä»¥æŸ¥çœ‹The Implementation of Define-datatype.\nLc-Exp å’ŒS-listçš„å…·ä½“å®ç° ä¸Šæ–‡æ‰€æè®°å¾—Lc-Expçš„å®šä¹‰ä¸ºï¼š\n lc-exp ::=identifier ::=(lambda (identifier) Lc-exp ::=(lc-exp lc-exp)  å®ƒä½¿ç”¨define-datatypeçš„å®ç°å¦‚ä¸‹ï¼š\n(define-datatype lc-exp lc-exp? (var-exp (var identifier?)) (lambda-exp (bound-var identifier?) (body lc-exp?)) (app-exp (rator lc-exp?) (rand lc-exp?)) )  è€ŒS-listçš„å®šä¹‰å†ç°ï¼š\n S-list ::=({S-exp}*) S-exp:=Symbol|S-list  ä»–å¯¹åº”çš„å®ç°å¦‚ä¸‹\n(define-datatype s-list s-list? (empty-s-list) (non-empty-s-list (first s-exp?) (rest s-list?)) ) (define-datatype s-exp s-exp? (symbol-s-exp (sym symbol?)) (s-list-s-exp (slst s-list?)) )  expression å’Œ expvalçš„å…·ä½“å®šä¹‰å’Œå®ç° åœ¨Interpreterçš„è¿‡ç¨‹ä¸­è‚¯å®šæ¶‰åŠåˆ°expressionçš„è®¾è®¡å’Œvalueå€¼çš„è¡¨ç°ï¼ˆæŠŠexpå’Œvalçš„é”®å€¼å¯¹å«åšè§£é‡Šå™¨çš„å­—å…¸ï¼‰ expressionçš„å…·ä½“å®šä¹‰æ˜¯\nexpression ::= (var-exp ()) ::= (const-exp ()) ::= (zero?-exp ()) ::= (if-exp ()) ::= (diff-exp ()) ::= (cons-exp ()) ::= (car-exp ()) ::= (cdr-exp ()) ::= (null?-exp ()) ::= (emptylist-exp) ::= (list-exp ()) ::= (let-exp ()) ::= (proc-exp ()) ::= (call-exp ()) ::= (letrec-exp ()) ;;å¹¶æœªå†æ­¤ä½“ç°  å…·ä½“å®ç°å¦‚ä¸‹æ‰€ç¤º:\n;;; datatype ;;; (define-datatype expression expression? (var-exp (id symbol?)) (const-exp (num number?)) (zero?-exp (expr expression?)) (if-exp (predicate-exp expression?) (true-exp expression?) (false-exp expression?)) (diff-exp (exp1 expression?) (exp2 expression?)) (emptylist-exp) (cons-exp (exp1 expression?) (exp2 expression?)) (car-exp (body expression?)) (cdr-exp (body expression?)) (null?-exp (body expression?)) (list-exp (args (list-of expression?))) (let-exp (vars (list-of symbols?)) (vals (list-of expression?)) (body expression?)) (proc-exp (var (list-of symbol?)) (body expression?)) (call-exp (rator expression?) (rand (list-of expression?))))  expvalçš„å®šä¹‰(ä¸»è¦æ˜¯ç”¨äºscheme value)å¦‚ä¸‹:\n expval ::= (num-val ()) ::= (bool-val ()) ::= (proc-val ()) ::= (pair-val ()) ::= (emptylist-val)  å…·ä½“å®ç°å¦‚ä¸‹ æ‰€ç¤ºï¼š\n;;; an expressed value is either a number, a boolean or a procval. (define-datatype expval expval? (num-val (value number?)) (bool-val (boolean boolean?)) (proc-val (proc proc?)) (pair-val (car expval?) (cdr expval?)) (emptylist-val))  procçš„å…·ä½“å®šä¹‰å¦‚ä¸‹ï¼Œ\n proc ::= (procedure ())  procçš„å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š\n;; proc? : SchemeVal -\u0026gt; Bool ;; procedure : Var * Exp * Env -\u0026gt; Proc (define-datatype proc proc? (procedure (var (list-of symbol?)) (body expression?) (env environment?)))  å½“ç„¶å…·ä½“çš„Define-datatypeçš„å®šä¹‰è¿˜å¾—é…åˆcasesçš„ä½œç”¨è¿›è¡Œå®ç°ã€‚\n","date":1456472117,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1456472117,"objectID":"d9e1f9e5572ffff4d06372a7ec9def4f","permalink":"/blog/2016/02/26/some-notations-in-the-design-of-the-language/","publishdate":"2016-02-26T15:35:17+08:00","relpermalink":"/blog/2016/02/26/some-notations-in-the-design-of-the-language/","section":"archives","summary":"What does it mean by Kleene star? What can it be used for? It is not so important,but a good tools to record the grammer of the language.ç›®çš„å°±æ˜¯å¦‚ä½•æ›´ç®€æ´åœ°å®šä¹‰è¯­æ³•ã€‚\n","tags":null,"title":"Some notations in the design of the language","type":"archives"},{"authors":null,"categories":["scheme"],"content":"è¿™æ˜¯EOPLä¸€ä¸ªæœ€ä¸ºåŸºæœ¬çš„è§£é‡Šå™¨ï¼Œåé¢çš„è§£é‡Šå™¨éƒ½åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œæ”¹é€ ï¼Œæ‰€ä»¥ å¾—ç†è§£å„ä¸ªéƒ¨åˆ†ï¼Œå¹¶çŸ¥é“å¦‚ä½•ä½¿ç”¨å’Œæ”¹é€ ã€‚æœ€ç»ˆå‘Šè¯‰çš„æ˜¯è§£é‡Šå™¨å¦‚ä½•è§£é‡Šè¡¨è¾¾å¼(æ¯ä¸€ç§è¯­è¨€çš„è¡¨è¾¾å¼)ã€‚ è§£é‡Šå™¨è§£é‡Šè¡¨è¾¾å¼çš„é—®é¢˜ã€‚\n 1. æµ‹è¯•Interpreterç¨‹åº 2. æµ‹è¯•ç»“æœ 3. åæ€ç»“æœ  3.1 éexpressionséƒ¨åˆ† 3.2 expressionséƒ¨åˆ†  4. æ˜¯è§£å†³é—®é¢˜ï¼Œè¿˜æ˜¯æŠ½è±¡é—®é¢˜ï¼Ÿç§‘å­¦æ€§ä½•åœ¨?  4.1 ç§‘å­¦æ€§é—®é¢˜ä½•åœ¨ï¼Ÿ 4.2 ä¸€ä¸ªè§£é‡Šå™¨è¯¥è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ 4.3 æŠ½è±¡çš„ç›®çš„æ˜¯ä»€ä¹ˆ  5.ä¸€ä¸ªè§£é‡Šå™¨çš„å…·ä½“å®ç°  5.1 è¯­è¨€å‰ç«¯è¡¨ç°å½¢å¼ lang 5.2 è¯­è¨€æ•°æ®ç»“æ„ data-structures 5.3 è¯­è¨€ä¸­é—´é˜¶æ®µ environments 5.4 è¯­è¨€æ ¸å¿ƒé˜¶æ®µ interpreter 5.5 è¯­è¨€çš„åˆå§‹åŒ– drscheme-init 5.6 è¯­è¨€çš„æµ‹è¯•ç¨‹åº tests 5.7 è¯­è¨€å‰ç«¯å°è£…æµ‹è¯•Top   1. æµ‹è¯•Interpreterç¨‹åº  ;;æµ‹è¯•ä¸€ä¸ª (run-tests! run equal-answer? '( (positive \u0026quot;11\u0026quot; 11) )) ;;æµ‹è¯•äºŒä¸ª (run-tests! run-fn equal-answer? '( (positive \u0026quot;11\u0026quot; 11) (if-eval-test-true \u0026quot;if zero?(-(11,11)) then 3 else 4\u0026quot; 3) ))  2. æµ‹è¯•ç»“æœ  one test: positive\ntest: positive correct no bugs found  two tests:positive if-else\ntest: positive correct test: if-eval-test-true correct no bugs found   3. åæ€ç»“æœ ç»“æœæµ‹è¯•å¾ˆç†æƒ³å¹¶æ²¡æœ‰é”™è¯¯ï¼Œå¹¶ä¸”å¯ä»¥åœ¨testä¸­ä¸æ–­å¢åŠ åˆ¤æ–­è¯­å¥ã€‚ è€Œrun-testçš„è§£æåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†\n expressions è¿™éƒ¨åˆ†çš„å·¥ä½œä¸»è¦æ˜¯value-of éexpressions è¿™éƒ¨åˆ†çš„ä¸»è¦å·¥ä½œå°±æ˜¯sligené€šè¿‡the-grammerçš„å®šä¹‰è¿›è¡Œè§£æ  3.1 éexpressionséƒ¨åˆ† è¿™éƒ¨åˆ†éœ€è¦é…åˆvalue-ofçš„define-datatypeè¿›è¡Œå¯¹åº”çš„å˜åŒ–ï¼Œä¸”çœ‹the-grammerä»£ç \n(define the-grammar '((program (expression) a-program) (expression (number) const-exp) (expression (\u0026quot;-\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;,\u0026quot; expression \u0026quot;)\u0026quot;) diff-exp) (expression (\u0026quot;zero?\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;)\u0026quot;) zero?-exp) (expression (\u0026quot;if\u0026quot; expression \u0026quot;then\u0026quot; expression \u0026quot;else\u0026quot; expression) if-exp) (expression (identifier) var-exp) (expression (\u0026quot;let\u0026quot; identifier \u0026quot;=\u0026quot; expression \u0026quot;in\u0026quot; expression) let-exp) ))  å¯ä»¥çœ‹åˆ°if,then,elseéƒ½è¢«å½“ä½œä¸å˜çš„åœ°æ–¹ï¼Œè€Œå…¶ä¸­ä¸‰ä¸ªexpressionsè¢«ä¼ åŠ¨åˆ°value-ofåšè¿›ä¸€æ­¥çš„è§£æã€‚\n3. expressionséƒ¨åˆ† ç»§ç»­çœ‹value-ofçš„éƒ¨åˆ†ï¼Œåˆ™æ˜¯å¯¹if-exp,var-exp,let-exp,letrec-exp,diff-exp,zerp?-exp?ç­‰è¿›è¡Œè§£æçš„è¿‡ç¨‹ã€‚\n(define value-of (lambda (exp env) (cases expression exp (const-exp (num) (num-val num)) (var-exp (var) (apply-env env var)) (diff-exp (exp1 exp2) (let ((val1 (value-of exp1 env)) (val2 (value-of exp2 env))) (let ((num1 (expval-\u0026gt;num val1)) (num2 (expval-\u0026gt;num val2))) (num-val (- num1 num2))))) (zero?-exp (exp1) (let ((val1 (value-of exp1 env))) (let ((num1 (expval-\u0026gt;num val1))) (if (zero? num1) (bool-val #t) (bool-val #f))))) (if-exp (exp1 exp2 exp3) (let ((val1 (value-of exp1 env))) (if (expval-\u0026gt;bool val1) (value-of exp2 env) (value-of exp3 env)))) (let-exp (var exp1 body) (let ((val1 (value-of exp1 env))) (value-of body (extend-env var val1 env)))) )))  å¯ä»¥å‚è€ƒcasesçš„å®ç°,ä»¥åŠcasesçš„ä½œç”¨ å½“ç„¶TLSä¹Ÿæä¾›äº†æ¯”å¦‚*const,*applicationç­‰çš„å®šä¹‰\n;ç¬¬ä¸€å¤§éƒ¨åˆ† å®šä¹‰å¥½æ•´ä½“æ¡†æ¶ (define value (lambda (e) (meaning e (quote ())))) (define meaning (lambda (e table) ((expression-to-action e) e table))  å…¶ä¸­çš„(expression-to-action)å°±ä¼šäº§ç”Ÿå¯¹åº”çš„*const*,*identifier*,*lambda* ,*cond*,*quote*,*application*ä»¥åŠTSSä¸­æ–°å¢åŠ çš„*set*,*define*,*let*ã€‚\nè¿™ä¸¤ä¸ªéƒ¨åˆ†æ˜¯æ¯”è¾ƒæœ‰è¶£çš„åœ°æ–¹ï¼Œè§„èŒƒäº†è¯­è¨€çš„å‰ç«¯éƒ¨åˆ†ï¼ŒçŠ¹å¦‚å·¦å³æ‰‹äº¤æ¢æ¥äº¤æ¢å»å’Œpenrose-stair,è¿›ä¸€æ­¥å¯ä»¥çœ‹çœ‹ç›—å¢“ç¬”è®°(inception)çš„è¯„è¿°\n4. æ˜¯è§£å†³é—®é¢˜ï¼Œè¿˜æ˜¯æŠ½è±¡é—®é¢˜ï¼Ÿç§‘å­¦æ€§ä½•åœ¨? ç§‘å­¦è¿›æ­¥çš„æ¯ä¸€æ­¥å‘å±•ï¼Œä¸æ˜¯é€šè¿‡ä¸æ–­æŠ½è±¡æ¥ç›´è§‰æŠ½å–å‡ºè¿›æ­¥ï¼Œè€Œæ˜¯é€šè¿‡ç›´è§‰å‘ç°é—®é¢˜ï¼Œåœ¨åˆ©ç”¨æŠ½è±¡çš„æ–¹å¼è¿›è¡Œæ±‚è§£ï¼Œä»è€Œè·å¾—è¿›æ­¥ã€‚ è€ŒæŠ½è±¡å…¶å®å°±æ˜¯é€šè¿‡interfaceå’Œimplementationæ¥è¿›è¡Œï¼Œ\n interfaceçš„å®šä¹‰å°±æ˜¯é€šè¿‡define-datatypeè¿›è¡Œï¼Œ implementationåˆ™æ˜¯é€šè¿‡casesè¿›è¡Œã€‚  4.1 ç§‘å­¦æ€§é—®é¢˜ä½•åœ¨ï¼Ÿ ç°è±¡å’Œæœ¬è´¨çš„æ¢å¯»ï¼Œé€è¿‡ç°è±¡çœ‹åˆ°æœ¬è´¨ï¼Œç°è±¡çš„äº§ç”Ÿéƒ½æœ‰å…¶å†…åœ¨çš„åŸç†ï¼Œç§‘å­¦å…³æ³¨çš„æ˜¯å†…åœ¨çš„æœ¬è´¨è”ç³»ã€‚ schemeè¿™é—¨è¯­è¨€å¯ä»¥é€è¿‡ä¸æ–­çš„æŠ½è±¡ï¼Œäº§ç”Ÿè®¸è®¸å¤šå¤šçš„è¯­è¨€ï¼Œä½†æ˜¯è¿™äº›è¯­è¨€å±‚æ˜¯å¦çœŸçš„å¯¹ç§‘å­¦é—®é¢˜æœ‰å¸®åŠ©ï¼Œ è¿™æ˜¯å€¼å¾—æ€€ç–‘çš„åœ°æ–¹ï¼ç§‘å­¦å¿…é¡»è¦æœ‰æ€€ç–‘ï¼ç§‘å­¦å¿…é¡»æ‰¾å¯»é—®é¢˜æ‰€åœ¨ï¼Œä»è€Œæ¢ç´¢äº§ç”ŸåŸå› ï¼ˆæŒä¿ç•™æ„è§ï¼‰ã€‚\n4.2 ä¸€ä¸ªè§£é‡Šå™¨è¯¥è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ æœ€åŸºæœ¬çš„æˆ‘è§‰å¾—åº”è¯¥æœ‰ä¸¤ä¸ªï¼š\n è¯æ³•è§£æé—®é¢˜ è§£å†³æˆ‘è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œè¯¥å¦‚ä½•ç”±scan\u0026amp;parseè¿›è¡Œè§£æ è¯­ä¹‰è§£æé—®é¢˜ è§£å†³æˆ‘å¾—åˆ°çš„è¡¨è¾¾å¼(expression),å®ƒæ€ä¹ˆç”±value-ofè¿›è¡Œè§£æï¼Œåˆ°åº•æ˜¯const-exp,var-exp,proc-exp,let-expç­‰  å…¶å®è¯­è¨€ç³»åˆ—çš„è¡¨è¾¾ä¸»è¦æœ‰\n imperative language(C,fortran) functional programming language(Lisp,ML,Haskell,Scheme) message passing language(OOP: Java,C++,)  ä»–ä»¬åœ¨è§£æç¨‹åºçš„è¿‡ç¨‹ä¸­éƒ½ç¦»ä¸å¼€ä¸Šè¿°çš„ä¸¤ä¸ªåŸºæœ¬é—®é¢˜çš„è§£æï¼Œä»–ä»¬ä¹Ÿè¢«å«åšå‰ç«¯(front-end)ã€‚è€Œä»»ä½•è¯­è¨€å¦‚æœä»…ä»…æœ‰è¿™ä¸ªvalueçš„è¿‡ç¨‹ï¼Œè€Œä¸ä¼šäº§ç”Ÿä»»ä½•çš„effectsï¼Œ æ¯”å¦‚ï¼š\n print read modify the memory state or file system  é‚£å°±å¤ªæ²¡æœ‰æ„æ€äº†ï¼Œæ‰€ä»¥è¯­è¨€çš„å®Œæˆéœ€è¦ä»–æ‹“å……åˆ°æ“ä½œç³»ç»Ÿçš„å¤„ç†ã€IOå¤„ç†ã€æ˜¾ç¤ºå¤„ç†ï¼Œå¢åŠ å®ƒçš„è¶£å‘³æ€§ï¼Œè€Œä¸æ˜¯ä¸€å‘³çš„è§£å†³é—®é¢˜ï¼ˆæŒä¿ç•™æ„è§ï¼‰\n è¯æ³•è§£æä½¿æˆ‘ä»¬è·å¾—ä»å­—ç¬¦ä¸²åˆ°å¯¹åº”çš„è¯­è¨€çš„const-expç­‰çš„expå½¢å¼ è¯­ä¹‰è§£æéƒ¨åˆ†åˆ™æ˜¯æˆ‘ä»¬å¯¹const-expç­‰çš„å…·ä½“å®ç°éƒ¨åˆ†  æ‰€ä»¥æœ¬è´¨ä¸Šæ¥è¯´è¿™ä¸¤ç‚¹ä¹Ÿæ˜¯æŠ½è±¡çš„ç»„æˆéƒ¨åˆ†ï¼ˆæ¥å£å’Œå®ç°ï¼‰,æ‰€ä»¥æœ¬è´¨ä¸Šè§£å†³è§£é‡Šå™¨çš„å®ç°é—®é¢˜ï¼Œå…¶å®å°±æ˜¯å¦‚ä½•æŠ½è±¡çš„é—®é¢˜?ã€‚\n4.3 æŠ½è±¡çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ åœ¨äºè§£å†³ç°å®å‡ºç°çš„ç§‘å­¦é—®é¢˜ã€‚ ä¹Ÿå°±æ˜¯è¿™äº›é—®é¢˜éƒ½èƒ½å¤Ÿè¢«è®¾å®šçš„æ¥å£å’Œå®ç°é€šè¿‡é€’å½’è¿›è¡Œè§£é‡Šï¼Œå¹¶æœ€ç»ˆè·å¾—ç»“æœ(result or outcome)ã€‚\nè€Œä¸ºä»€ä¹ˆè¦ç»•æ¥ç»•å»çš„è°ˆè¿™äº›é—®é¢˜å‘¢ï¼Ÿ å› ä¸ºinterpreterçš„å®ç°è¿‡ç¨‹æœ¬è´¨ä¹Ÿæ˜¯é€’å½’çš„æ€æƒ³ï¼Œåœ¨ä¸æ–­è§„çº¦åˆ°ä¸€ä¸ªç»“è®ºã€‚\n5. ä¸€ä¸ªè§£é‡Šå™¨çš„å…·ä½“å®ç° å‚è€ƒEOPLç¬¬ä¸‰ç« .\nä¸€èˆ¬è¿‡ç¨‹æ˜¯å…ˆæ€è€ƒæ–°è¯­è¨€çš„è¡¨ç°å½¢å¼lang.scmï¼Œè®¾å®šå‡ ä¸ªæ•°æ®ç±»å‹æ”¾å…¥data-structures.scmä¸­, ç„¶åæˆ‘ä»¬éœ€è¦ç»™è¿™ä¸¤ä¸ªé˜¶æ®µè®¾å®šbridgeï¼Œä¹Ÿå°±æ˜¯ç¯å¢ƒå°è£….è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å†™ä¸€ä¸ªè§£é‡Šå™¨interpreter,è§£é‡Šå¹¶è·å¾—æœ€ç»ˆç»“æœã€‚ ç®€è€Œè¨€ä¹‹ï¼Œå…¶å®æˆ‘ä»¬å°±æ˜¯æƒ³çœ‹çœ‹è®¡ç®—æœºæ˜¯å¦‚ä½•è§£é‡Šæˆ‘ä»¬è¾“å…¥çš„è¿™å¥è¯ï¼Œå…·ä½“å°±æ˜¯è§£é‡Šå™¨å¦‚ä½•è§£æè¾“å…¥çš„è¡¨è¾¾å¼\n è¯­è¨€å‰ç«¯è¡¨ç°å½¢å¼ lang è¯­è¨€æ•°æ®ç»“æ„ data-structures è¯­è¨€ä¸­é—´é˜¶æ®µ environments è¯­è¨€æ ¸å¿ƒé˜¶æ®µ interpreter è¯­è¨€çš„åˆå§‹åŒ– drscheme-init è¯­è¨€çš„æµ‹è¯•ç¨‹åº tests è¯­è¨€å‰ç«¯å°è£…æµ‹è¯•Top  5.1 å‰ç«¯è¡¨ç°å½¢å¼ ä¿å­˜ä¸ºlang.scm\nè¯¥é˜¶æ®µçš„ä¸»è¦ç›®çš„å°±æ˜¯å®šä¹‰æ–°ç”Ÿæˆçš„è¯­è¨€è¯¥æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼Ÿä¹Ÿå°±æ˜¯è¯­æ³•éƒ¨åˆ†ã€‚\n(module lang ;; grammar for the LET language (lib \u0026quot;eopl.ss\u0026quot; \u0026quot;eopl\u0026quot;) (require \u0026quot;drscheme-init.scm\u0026quot;) (provide (all-defined-out)) ;;;;;;;;;;;;;;;; grammatical specification ;;;;;;;;;;;;;;;; (define the-lexical-spec '((whitespace (whitespace) skip) (comment (\u0026quot;%\u0026quot; (arbno (not #\\newline))) skip) (identifier (letter (arbno (or letter digit \u0026quot;_\u0026quot; \u0026quot;-\u0026quot; \u0026quot;?\u0026quot;))) symbol) (number (digit (arbno digit)) number) (number (\u0026quot;-\u0026quot; digit (arbno digit)) number) )) (define the-grammar '((program (expression) a-program) (expression (number) const-exp) (expression (\u0026quot;-\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;,\u0026quot; expression \u0026quot;)\u0026quot;) diff-exp) (expression (\u0026quot;zero?\u0026quot; \u0026quot;(\u0026quot; expression \u0026quot;)\u0026quot;) zero?-exp) (expression (\u0026quot;if\u0026quot; expression \u0026quot;then\u0026quot; expression \u0026quot;else\u0026quot; expression) if-exp) (expression (identifier) var-exp) (expression (\u0026quot;let\u0026quot; identifier \u0026quot;=\u0026quot; expression \u0026quot;in\u0026quot; expression) let-exp) )) ;;;;;;;;;;;;;;;; sllgen boilerplate ;;;;;;;;;;;;;;;; (sllgen:make-define-datatypes the-lexical-spec the-grammar) (define show-the-datatypes (lambda () (sllgen:list-define-datatypes the-lexical-spec the-grammar))) (define scan\u0026amp;parse (sllgen:make-string-parser the-lexical-spec the-grammar)) (define just-scan (sllgen:make-string-scanner the-lexical-spec the-grammar)) )  5.2 æ•°æ®ç»“æ„ ä¿å­˜ä¸ºdata-structures.scm\nè¯¥é˜¶æ®µçš„ä¸»è¦ç›®çš„å°±æ˜¯å®šä¹‰å¯¹åº”çš„ç±»å‹è¯¥å…·æœ‰ä»€ä¹ˆæ ·çš„æ¥å£ï¼Œè¿™äº›æ¥å£çš„å®ç°éƒ¨åˆ†åœ¨ç¬¬å››éƒ¨åˆ†æœ‰å…·ä½“çš„ä½“ç°ã€‚ è¿™éƒ¨åˆ†å°±æ˜¯ç¨‹åºçš„ç±»å‹æ¥å£çš„è½¬æ¢éƒ¨åˆ†ã€‚\n(module data-structures (lib \u0026quot;eopl.ss\u0026quot; \u0026quot;eopl\u0026quot;) ;; data structures for let-lang. (provide (all-defined-out)) ; too many things to list ;;;;;;;;;;;;;;;; expressed values ;;;;;;;;;;;;;;;; ;;; an expressed value is either a number, a boolean or a procval. (define-datatype expval expval? (num-val (value number?)) (bool-val (boolean boolean?))) ;;; extractors: ;; expval-\u0026gt;num : ExpVal -\u0026gt; Int ;; Page: 70 (define expval-\u0026gt;num (lambda (v) (cases expval v (num-val (num) num) (else (expval-extractor-error 'num v))))) ;; expval-\u0026gt;bool : ExpVal -\u0026gt; Bool ;; Page: 70 (define expval-\u0026gt;bool (lambda (v) (cases expval v (bool-val (bool) bool) (else (expval-extractor-error 'bool v))))) (define expval-extractor-error (lambda (variant value) (eopl:error 'expval-extractors \u0026quot;Looking for a ~s, found ~s\u0026quot; variant value))) ;;;;;;;;;;;;;;;; environment structures ;;;;;;;;;;;;;;;; ;; example of a data type built without define-datatype (define empty-env-record (lambda () '())) (define extended-env-record (lambda (sym val old-env) (cons (list sym val) old-env))) (define empty-env-record? null?) (define environment? (lambda (x) (or (empty-env-record? x) (and (pair? x) (symbol? (car (car x))) (expval? (cadr (car x))) (environment? (cdr x)))))) (define extended-env-record-\u0026gt;sym (lambda (r) (car (car r)))) (define extended-env-record-\u0026gt;val (lambda (r) (cadr (car r)))) (define extended-env-record-\u0026gt;old-env (lambda (r) (cdr r))) )  5.3 ä¸­é—´é˜¶æ®µ ä¿å­˜ä¸ºenvironments.scm\nè¯¥é˜¶æ®µçš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è§£é‡Šå½“é‡åˆ°ä¸€äº›å˜é‡æˆ–è€…ä¹‹åçš„è§£é‡Šå™¨çš„lambdaï¼ˆå°†åœ¨ä¸‹ä¸€ä¸ªç‰ˆæœ¬è§£é‡Šå™¨ä½“ç°ï¼‰ï¼Œå¦‚ä½•ä¿å­˜ä¸‹æ¥ ï¼Œå¹¶ä¾›å¯¹åº”ç¨‹åºä½¿ç”¨ã€‚\n(module environments (lib \u0026quot;eopl.ss\u0026quot; \u0026quot;eopl\u0026quot;) ;; builds environment interface, using data structures defined in ;; data-structures.scm. (require \u0026quot;data-structures.scm\u0026quot;) (provide init-env empty-env extend-env apply-env) ;;;;;;;;;;;;;;;; initial environment ;;;;;;;;;;;;;;;; ;; init-env : () -\u0026gt; Env ;; usage: (init-env) = [i=1, v=5, x=10] ;; (init-env) builds an environment in which i is bound to the ;; expressed value 1, v is bound to the expressed value 5, and x is ;; bound to the expressed value 10. ;; Page: 69 (define init-env (lambda () (extend-env 'i (num-val 1) (extend-env 'v (num-val 5) (extend-env 'x (num-val 10) (empty-env)))))) ;;;;;;;;;;;;;;;; environment constructors and observers ;;;;;;;;;;;;;;;; (define empty-env (lambda () (empty-env-record))) (define empty-env? (lambda (x) (empty-env-record? x))) (define extend-env (lambda (sym val old-env) (extended-env-record sym val old-env))) (define apply-env (lambda (env search-sym) (if (empty-env? env) (eopl:error 'apply-env \u0026quot;No binding for ~s\u0026quot; search-sym) (let ((sym (extended-env-record-\u0026gt;sym env)) (val (extended-env-record-\u0026gt;val env)) (old-env (extended-env-record-\u0026gt;old-env env))) (if (eqv? search-sym sym) val (apply-env old-env search-sym)))))) )  5.4 æ ¸å¿ƒé˜¶æ®µ ä¿å­˜ä¸ºinterp.scm\nè¯¥é˜¶æ®µçš„ä¸»è¦ç›®çš„å°±æ˜¯ç¼–å†™é’ˆå¯¹ç¬¬3é˜¶æ®µç”Ÿæˆçš„var-expã€const-expç­‰expvalçš„è§£æï¼Œç®—æ˜¯æ ¸å¿ƒéƒ¨åˆ†ï¼Œæœ€ç»ˆçš„ç»“æœçš„äº§ç”Ÿåœ°ï¼Œ åé¢çš„å‡ ä¸ªé˜¶æ®µåªä¸è¿‡æ˜¯é’ˆå¯¹è¿™éƒ¨åˆ†å†…å®¹åšäº†ä¸€äº›å‰ç«¯çš„å‡†å¤‡ï¼Œç®—æ˜¯æ­»é—¨ï¼Œè€Œè¿™éƒ¨åˆ†å’Œå‰é¢çš„è¯æ³•è§£æã€ç±»å‹è½¬æ¢æ¥å£ç®—æ˜¯ä¸€ä¸ªè¯­è¨€çš„ç”Ÿé—¨éƒ¨åˆ†ã€‚\n(module interp (lib \u0026quot;eopl.ss\u0026quot; \u0026quot;eopl\u0026quot;) ;; interpreter for the LET language. The \\commentboxes are the ;; latex code for inserting the rules into the code in the book. ;; These are too complicated to put here, see the text, sorry. (require \u0026quot;drscheme-init.scm\u0026quot;) (require \u0026quot;lang.scm\u0026quot;) (require \u0026quot;data-structures.scm\u0026quot;) (require \u0026quot;environments.scm\u0026quot;) (provide value-of-program value-of) ;;;;;;;;;;;;;;;; the interpreter ;;;;;;;;;;;;;;;; ;; value-of-program : Program -\u0026gt; ExpVal ;; Page: 71 (define value-of-program (lambda (pgm) (cases program pgm (a-program (exp1) (value-of exp1 (init-env)))))) ;; value-of : Exp * Env -\u0026gt; ExpVal ;; Page: 71 (define value-of (lambda (exp env) (cases expression exp (const-exp (num) (num-val num)) (var-exp (var) (apply-env env var)) (diff-exp (exp1 exp2) (let ((val1 (value-of exp1 env)) (val2 (value-of exp2 env))) (let ((num1 (expval-\u0026gt;num val1)) (num2 (expval-\u0026gt;num val2))) (num-val (- num1 num2))))) (zero?-exp (exp1) (let ((val1 (value-of exp1 env))) (let ((num1 (expval-\u0026gt;num val1))) (if (zero? num1) (bool-val #t) (bool-val #f))))) (if-exp (exp1 exp2 exp3) (let ((val1 (value-of exp1 env))) (if (expval-\u0026gt;bool val1) (value-of exp2 env) (value-of exp3 env)))) (let-exp (var exp1 body) (let ((val1 (value-of exp1 env))) (value-of body (extend-env var val1 env)))) ))) )  5.5 åˆå§‹åŒ– ä¿å­˜ä¸ºdrscheme-init.scm\nè¯¥é˜¶æ®µä¸»è¦ç›®çš„æ˜¯ç¼–å†™æµ‹è¯•éœ€è¦çš„å¥—ä»¶ï¼Œæä¾›æµ‹è¯•æ˜¯å¦æˆåŠŸçš„åˆ¤æ–­æ ‡å‡†ã€‚\n;; drscheme-init.scm - compatibility file for DrScheme ;; usage: (require \u0026quot;drscheme-init.scm\u0026quot;) ;;; makes structs printable, and provides basic functionality for ;;; testing. This includes pretty-printing and tracing. (module drscheme-init mzscheme ;; show the contents of define-datatype values (print-struct #t) (require (lib \u0026quot;pretty.ss\u0026quot;)) (provide (all-from (lib \u0026quot;pretty.ss\u0026quot;))) (require (lib \u0026quot;trace.ss\u0026quot;)) (provide (all-from (lib \u0026quot;trace.ss\u0026quot;))) (provide make-parameter) (provide run-experiment run-tests! stop-after-first-error run-quietly ) ;; safely apply procedure fn to a list of args. ;; if successful, return (cons #t val) ;; if eopl:error is invoked, returns (cons #f string), where string is the ;; format string generated by eopl:error. If somebody manages to raise a ;; value other than an exception, then the raised value is reported. (define apply-safely (lambda (proc args) (with-handlers ([(lambda (exn) #t) ; catch any error (lambda (exn) ; evaluate to a failed test result (cons #f (if (exn? exn) (exn-message exn) exn)))]) (let ([actual (apply proc args)]) (cons #t actual))))) ;; run-experiment : ;; ((a ...) -\u0026gt; b) * (a ...) * b * (b * b -\u0026gt; bool) ;; -\u0026gt; (cons bool b) ;; usage: (run-experiment fn args correct-answer equal-answer?) ;; Applies fn to args. Compares the result to correct-answer. ;; Returns (cons bool b) where bool indicates whether the ;; answer is correct. (define run-experiment (lambda (fn args correct-answer equal-answer?) (let* ((result (apply-safely fn args)) ;; ans is either the answer or the args to eopl:error (error-thrown? (not (car result))) (ans (cdr result))) (cons (if (eqv? correct-answer 'error) error-thrown? (equal-answer? ans correct-answer)) ans)))) (define stop-after-first-error (make-parameter #f)) (define run-quietly (make-parameter #t)) ;; run-tests! : (arg -\u0026gt; outcome) * (any * any -\u0026gt; bool) * (list-of test) ;; -\u0026gt; unspecified ;; where: ;; test ::= (name arg outcome) ;; outcome ::= ERROR | any ;; usage: (run-tests! run-fn equal-answer? tests) ;; for each item in tests, apply run-fn to the arg. Check to see if ;; the outcome is right, comparing values using equal-answer?. ;; print a log of the tests. ;; at the end, print either \u0026quot;no bugs found\u0026quot; or the list of tests ;; failed. ;; Normally, run-tests! will recover from any error and continue to ;; the end of the test suite. This behavior can be altered by ;; setting (stop-after-first-error #t). (define (run-tests! run-fn equal-answer? tests) (let ((tests-failed '())) (for-each (lambda (test-item) (let ((name (car test-item)) (pgm (cadr test-item)) (correct-answer (caddr test-item))) (printf \u0026quot;test: ~a~%\u0026quot; name) (let* ((result (run-experiment run-fn (list pgm) correct-answer equal-answer?)) (correct? (car result)) (actual-answer (cdr result))) (if (or (not correct?) (not (run-quietly))) (begin (printf \u0026quot;~a~%\u0026quot; pgm) (printf \u0026quot;correct outcome: ~a~%\u0026quot; correct-answer) (printf \u0026quot;actual outcome: \u0026quot;) (pretty-display actual-answer))) (if correct? (printf \u0026quot;correct~%~%\u0026quot;) (begin (printf \u0026quot;incorrect~%~%\u0026quot;) ;; stop on first error if stop-after-first? is set: (if (stop-after-first-error) (error name \u0026quot;incorrect outcome detected\u0026quot;)) (set! tests-failed (cons name tests-failed))))))) tests) (if (null? tests-failed) (printf \u0026quot;no bugs found~%\u0026quot;) (printf \u0026quot;incorrect answers on tests: ~a~%\u0026quot; (reverse tests-failed))))) )  5.6 æµ‹è¯•ç¨‹åº ä¿å­˜ä¸ºtests.scm\nè¯¥é˜¶æ®µçš„ä¸»è¦ç›®çš„å°±æ˜¯ç¼–å†™æµ‹è¯•è¯­å¥ï¼ŒåŒ…æ‹¬å¸¸é‡ã€å˜é‡ã€è¡¨è¾¾å¼ã€ifã€diffã€letç­‰è¯­å¥çš„ä½¿ç”¨ã€‚\n(module tests mzscheme (provide test-list) ;;;;;;;;;;;;;;;; tests ;;;;;;;;;;;;;;;; (define test-list '( ;; simple arithmetic (positive-const \u0026quot;11\u0026quot; 11) (negative-const \u0026quot;-33\u0026quot; -33) (simple-arith-1 \u0026quot;-(44,33)\u0026quot; 11) ;; nested arithmetic (nested-arith-left \u0026quot;-(-(44,33),22)\u0026quot; -11) (nested-arith-right \u0026quot;-(55, -(22,11))\u0026quot; 44) ;; simple variables (test-var-1 \u0026quot;x\u0026quot; 10) (test-var-2 \u0026quot;-(x,1)\u0026quot; 9) (test-var-3 \u0026quot;-(1,x)\u0026quot; -9) ;; simple unbound variables (test-unbound-var-1 \u0026quot;foo\u0026quot; error) (test-unbound-var-2 \u0026quot;-(x,foo)\u0026quot; error) ;; simple conditionals (if-true \u0026quot;if zero?(0) then 3 else 4\u0026quot; 3) (if-false \u0026quot;if zero?(1) then 3 else 4\u0026quot; 4) ;; test dynamic typechecking (no-bool-to-diff-1 \u0026quot;-(zero?(0),1)\u0026quot; error) (no-bool-to-diff-2 \u0026quot;-(1,zero?(0))\u0026quot; error) (no-int-to-if \u0026quot;if 1 then 2 else 3\u0026quot; error) ;; make sure that the test and both arms get evaluated ;; properly. (if-eval-test-true \u0026quot;if zero?(-(11,11)) then 3 else 4\u0026quot; 3) (if-eval-test-false \u0026quot;if zero?(-(11, 12)) then 3 else 4\u0026quot; 4) ;; and make sure the other arm doesn't get evaluated. (if-eval-test-true-2 \u0026quot;if zero?(-(11, 11)) then 3 else foo\u0026quot; 3) (if-eval-test-false-2 \u0026quot;if zero?(-(11,12)) then foo else 4\u0026quot; 4) ;; simple let (simple-let-1 \u0026quot;let x = 3 in x\u0026quot; 3) ;; make sure the body and rhs get evaluated (eval-let-body \u0026quot;let x = 3 in -(x,1)\u0026quot; 2) (eval-let-rhs \u0026quot;let x = -(4,1) in -(x,1)\u0026quot; 2) ;; check nested let and shadowing (simple-nested-let \u0026quot;let x = 3 in let y = 4 in -(x,y)\u0026quot; -1) (check-shadowing-in-body \u0026quot;let x = 3 in let x = 4 in x\u0026quot; 4) (check-shadowing-in-rhs \u0026quot;let x = 3 in let x = -(x,1) in x\u0026quot; 2) )) )  5.7 å‰ç«¯å°è£…æµ‹è¯• ä¿å­˜ä¸ºtop.scm\nè¯¥é˜¶æ®µçš„ç›®çš„å°±æ˜¯æµ‹è¯•è¿™ä¸ªæ–°çš„è§£é‡Šå™¨è¯­è¨€åˆ°åº•æœ‰æ²¡æœ‰ç”¨ï¼Ÿä»–æ˜¯å¦èƒ½å¤Ÿè§£é‡Šä»testsä¸­å¯¼å…¥çš„ ç¨‹åºç‰‡æ®µï¼Ÿæ˜¯å¦æµ‹è¯•é€šè¿‡ã€‚\n(module top (lib \u0026quot;eopl.ss\u0026quot; \u0026quot;eopl\u0026quot;) ;; top level module. Loads all required pieces. ;; Run the test suite with (run-all). (require \u0026quot;drscheme-init.scm\u0026quot;) (require \u0026quot;data-structures.scm\u0026quot;) ; for expval constructors (require \u0026quot;lang.scm\u0026quot;) ; for scan\u0026amp;parse (require \u0026quot;interp.scm\u0026quot;) ; for value-of-program (require \u0026quot;tests.scm\u0026quot;) ; for test-list ;; since this is the top-level module, we don't really need to ;; provide anything, but we do so just in case. (provide run run-all) (provide test-all) (define (test-all) (run-all)) ;; here are some other things that could be provided: ;; (provide (all-defined-out)) ;; (provide (all-from \u0026quot;interp.scm\u0026quot;)) ;; (provide (all-from \u0026quot;lang.scm\u0026quot;)) ;;;;;;;;;;;;;;;; interface to test harness ;;;;;;;;;;;;;;;; ;; run : String -\u0026gt; ExpVal ;; Page: 71 (define run (lambda (string) (value-of-program (scan\u0026amp;parse string)))) ;; run-all : () -\u0026gt; unspecified ;; runs all the tests in test-list, comparing the results with ;; equal-answer? (define run-all (lambda () (run-tests! run equal-answer? test-list))) (define equal-answer? (lambda (ans correct-ans) (equal? ans (sloppy-\u0026gt;expval correct-ans)))) (define sloppy-\u0026gt;expval (lambda (sloppy-val) (cond ((number? sloppy-val) (num-val sloppy-val)) ((boolean? sloppy-val) (bool-val sloppy-val)) (else (eopl:error 'sloppy-\u0026gt;expval \u0026quot;Can't convert sloppy value to expval: ~s\u0026quot; sloppy-val))))) ;; run-one : symbol -\u0026gt; expval ;; (run-one sym) runs the test whose name is sym (define run-one (lambda (test-name) (let ((the-test (assoc test-name test-list))) (cond ((assoc test-name test-list) =\u0026gt; (lambda (test) (run (cadr test)))) (else (eopl:error 'run-one \u0026quot;no such test: ~s\u0026quot; test-name)))))) ;; (run-all) )  ","date":1456370409,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1456370409,"objectID":"05d02b7623dbcc8a74e62b7c745fac45","permalink":"/blog/2016/02/25/first-interpreter-from-eopl/","publishdate":"2016-02-25T11:20:09+08:00","relpermalink":"/blog/2016/02/25/first-interpreter-from-eopl/","section":"archives","summary":"è¿™æ˜¯EOPLä¸€ä¸ªæœ€ä¸ºåŸºæœ¬çš„è§£é‡Šå™¨ï¼Œåé¢çš„è§£é‡Šå™¨éƒ½åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œæ”¹é€ ï¼Œæ‰€ä»¥ å¾—ç†è§£å„ä¸ªéƒ¨åˆ†ï¼Œå¹¶çŸ¥é“å¦‚ä½•ä½¿ç”¨å’Œæ”¹é€ ã€‚æœ€ç»ˆå‘Šè¯‰çš„æ˜¯è§£é‡Šå™¨å¦‚ä½•è§£é‡Šè¡¨è¾¾å¼(æ¯ä¸€ç§è¯­è¨€çš„è¡¨è¾¾å¼)ã€‚ è§£é‡Šå™¨è§£é‡Šè¡¨è¾¾å¼çš„é—®é¢˜ã€‚\n","tags":null,"title":"First Interpreter from EOPL","type":"archives"},{"authors":null,"categories":["scheme"],"content":"æˆ‘åœ¨å¬SICPçš„ä¼˜é…·è§†é¢‘æ—¶ï¼Œå¬åˆ°â€œèŠåŠ å“¥ä¹Ÿå¯ä»¥è¯´æ˜¯å…·æœ‰7ä¸ªå­—ç¬¦ï¼ŒåŒæ—¶ä»–ä¹Ÿå¯ä»¥è¡¨è¿°ä¸ºç¾å›½çš„ä¸­è¥¿éƒ¨ä¼Šåˆ©è¯ºä¼Šå·çš„å…¨ç¾ç¬¬ä¸‰å¤§å›½é™…å¤§éƒ½å¸‚â€. å®ƒå¯ä»¥ä»…ä»…è¡¨ç¤ºè¯­è¨€çš„è¡¨é¢æ„æ€ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºè¯­è¨€ä¸­çš„éšå«æ„æ€ã€‚è¿™ä½“ç°äº†è¯­è¨€å®ç°çš„ä¸€ç§é­…åŠ›ï¼ŒChicago really only has 7 characters?\nValue  Valueï¼Œä»·å€¼ã€‚ schemeçš„æ¯ä¸€ä¸ªç¨‹åºéƒ½æ˜¯ç”±exressionsæ„æˆï¼Œæ¯ä¸€ä¸ªexpressionéƒ½å¯¹åº”ä¸€ä¸ªexpression valueï¼Œç®€ç§°expvalã€‚ expvalå¯¹åº”çš„æœ‰exp-valå’Œden-valã€‚ exp-valè¡¨ç¤ºè¡¨è¾¾å¼çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å¯èƒ½æ˜¯å˜é‡ç»‘å®šä¹Ÿå¯èƒ½æ˜¯åˆ—è¡¨(è¡¨è¾¾å¼)çš„å€¼ï¼›è€Œden-valå•å•åªæ˜¯å˜é‡ç»‘å®šã€‚  ä¸ºäº†åˆ†ææ¯ä¸€ä¸ªä»·å€¼çš„è¿‡ç¨‹ï¼Œå§‘ä¸”æŠŠç¨‹åºå†™ä¸º\u0026lt;\u0026gt;\nå¦‚æœexpressions=((lambda (x) (+ x 3)) 10)\né‚£ä¹ˆschemeå¦‚ä½•è§£æï¼Ÿ\nå‡å®šæˆ‘ä»¬çš„è§£æç¨‹åºå«åšvalue-of,init-envæ˜¯æˆ‘ä»¬çš„åˆå§‹ç¯å¢ƒ(å˜é‡ç»‘å®šæˆ–è€…å­—å…¸),[10]è¡¨ç¤ºscheme-val(æ¯ä¸€ç§è¯­è¨€éƒ½æœ‰ç€è‡ªå·±çš„value), [x=10]init-envè¡¨ç¤ºæ‹“å±•çš„ç¯å¢ƒ\n(value-of \u0026lt;\u0026lt;expressions\u0026gt;\u0026gt;) =(value-of \u0026lt;\u0026lt;((lambda (x) (+ x 3)) 10)\u0026gt;\u0026gt;) =(value-of ((lambda (x) (+ x 3)) 10) init-env) =(apply-procedure (value-of \u0026lt;\u0026lt;(lambda (x) (+ x 3))\u0026gt;\u0026gt; init-env) (value-of 10 init-env)) =(apply-procedure (procedure x \u0026lt;\u0026lt;(+ x 3))\u0026gt;\u0026gt; init-env) [10]) =(value-of \u0026lt;\u0026lt;(+ x 3))\u0026gt;\u0026gt; [x=10]init-env) =(apply-procedure (value-of + [x=10]init-env) (value-of x [x=10]init-env) (value-of 3 [x=10]init-env) ) = (apply-procedure (procedure + [x=10]init-env) [10] [3] ) =(+ (val-num [10]) (val-num [3])) =(+ 10 3)  åˆšå¼€å§‹ + ä¹Ÿè®¸ä½ ä¸å¯èƒ½æ›¿ä»£\u0026lt;\u0026lt;\u0026gt;\u0026gt;è¡¨è¾¾å¼çš„æ„æ€ï¼Œ + ä½ ä¹Ÿå¯èƒ½ä¸ç†è§£è§£æ10çš„è¿‡ç¨‹ï¼Œ + ä½ ä¹Ÿåˆ†ä¸æ¸…å‡ºè§£ælambdaå’Œ+çš„ä¸åŒï¼ˆä¸€ç§æ˜¯è‡ªå®šä¹‰ç¨‹åºï¼Œä¸€ç§æ˜¯å†…ç½®operatorï¼‰ï¼Œ + ç”šè‡³ä½ ä¸å¯ä»¥é™ä¸‹å¿ƒæ¥å¥½å¥½åˆ†ææˆ‘æ­£åœ¨è¯´çš„è¯ã€‚\næˆ‘æƒ³è¡¨è¾¾çš„æ˜¯ï¼Œç¨‹åºç»™ä½ çš„æ˜¯program or dataï¼Œè€Œä½ ä½œä¸ºè¯­è¨€çš„åˆ›é€ è€…æˆ–è€…ä½¿ç”¨è€…ï¼Œä½ éœ€è¦è¿›ä¸€æ­¥ä½“å‘³programæ˜¯ä»€ä¹ˆï¼Ÿ Does program really has only 7 characters?(æ€è€ƒä½ å†™è¿‡çš„ç¨‹åºçš„å„ä¸ªéƒ¨åˆ†çš„ç”¨é€”ï¼Œå¦‚ä½•æ¥çš„ï¼Ÿ)\nè¿›ä¸€æ­¥çš„è§£æå¯ä»¥å‚è€ƒã€‚\næºè¯­è¨€åˆ°ç›®æ ‡è¯­è¨€çš„è½¬å˜ æœ‰ä¸€ç§ç¨‹åºå‘˜å–œæ¬¢åˆ©ç”¨å„ç§è¯­è¨€æ‰€å…·æœ‰çš„ç‰¹è‰²ï¼Œç»„åˆä½¿ç”¨è¯­è¨€å½¢æˆè‡ªå·±çš„ç¨‹åºï¼Œå†…éƒ¨æ˜¯æ§åˆ¶æµåŠ¨å’Œæ•°æ®æµåŠ¨ã€‚è€Œä»ç¬¬ä¸€ç§è¯­è¨€ ä¹Ÿå°±æ˜¯æºè¯­è¨€(source language)å¼€å§‹ï¼Œåˆ©ç”¨å˜æ¢ï¼Œè¾“å…¥åˆ°ç¬¬äºŒç§ã€ç¬¬ä¸‰ç§â€¦â€¦ ï¼Œæœ€ç»ˆè¾“å…¥åˆ°ç›®æ ‡è¯­è¨€(target language).ç¨‹åºå¹¶ä¸æ˜¯ æˆ‘ä»¬æƒ³çš„å•ä¸€æ€§çš„è¯­è¨€è°ƒç”¨ï¼Œæ¯ä¸€ä¸ªé—®é¢˜éƒ½å¯ä»¥é€šè¿‡æ–°æ„é€ ä¸€ç§æ–°çš„è¯­è¨€è¿›è¡Œæ±‚è§£(æŒä¿ç•™æ„è§)ã€‚ç°åœ¨å·²ç»æœ‰äººèƒ½å¤Ÿä½œå‡ºè¾“å…¥ä¸€ç§è¾“å…¥å’Œè¾“å‡º ç»“æœï¼Œä»è€Œäº§ç”Ÿä½ è¦çš„schemeç¨‹åºï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿå¯¹åº”çš„è¯­è¨€è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç„¶è€Œæˆ‘ä»¬æ›´éœ€è¦æ€è€ƒçš„æ˜¯å˜çš„è¡¨é¢å«ä¹‰ã€‚\u0026rdquo;å˜\u0026rdquo;çš„æ˜¯ä»€ä¹ˆï¼Ÿ å¯æ·±å…¥äº†è§£Dan. Friedmançš„EOPLç¨‹åºè®¾è®¡ä¹¦ç±ã€‚\n","date":1456305570,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1456305570,"objectID":"8d711b638fd46586fde743f9b941239f","permalink":"/blog/2016/02/24/chicago-really-only-has-7-characters/","publishdate":"2016-02-24T17:19:30+08:00","relpermalink":"/blog/2016/02/24/chicago-really-only-has-7-characters/","section":"archives","summary":"æˆ‘åœ¨å¬SICPçš„ä¼˜é…·è§†é¢‘æ—¶ï¼Œå¬åˆ°â€œèŠåŠ å“¥ä¹Ÿå¯ä»¥è¯´æ˜¯å…·æœ‰7ä¸ªå­—ç¬¦ï¼ŒåŒæ—¶ä»–ä¹Ÿå¯ä»¥è¡¨è¿°ä¸ºç¾å›½çš„ä¸­è¥¿éƒ¨ä¼Šåˆ©è¯ºä¼Šå·çš„å…¨ç¾ç¬¬ä¸‰å¤§å›½é™…å¤§éƒ½å¸‚â€. å®ƒå¯ä»¥ä»…ä»…è¡¨ç¤ºè¯­è¨€çš„è¡¨é¢æ„æ€ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºè¯­è¨€ä¸­çš„éšå«æ„æ€ã€‚è¿™ä½“ç°äº†è¯­è¨€å®ç°çš„ä¸€ç§é­…åŠ›ï¼ŒChicago really only has 7 characters?\n","tags":null,"title":"Chicago really only has 7 characters?","type":"archives"},{"authors":null,"categories":["scheme"],"content":"ä¸ºä»€ä¹ˆè¦å®ç°cases,ç›®çš„åœ¨äºè¿›ä¸€æ­¥æŠ½è±¡ç®€åŒ–è¿‡ç¨‹ã€‚\nåŸå…ˆçš„ç¨‹åº  procedure : Var * Exp * Env -\u0026gt; Proc apply-procedure : Proc * ExpVal -\u0026gt; ExpVal  ;; procedure : Var * Exp * Env -\u0026gt; Proc ;; Page: 79 (define procedure (lambda (var body env) (lambda (val) (value-of body (extend-env var val env))))) ;; apply-procedure : Proc * ExpVal -\u0026gt; ExpVal ;; Page: 79 (define apply-procedure (lambda (proc val) (proc val)))  ç®€åŒ–çš„ç¨‹åº apply-procedure : Proc * ExpVal -\u0026gt; ExpVal  ;; apply-procedure : Proc * ExpVal -\u0026gt; ExpVal ;; Page: 79 (define apply-procedure (lambda (proc1 val) (cases proc proc1 (procedure (var body saved-env) (value-of body (extend-env var val saved-env))))))   é€šè¿‡casesçš„proc1æ‰¾åˆ°è¾“å…¥çš„expressionsï¼ˆschemeçš„expressionså³æ˜¯æ•°æ®ï¼‰,è½¬ç§»valåˆ†é…åˆ°extend-envä¸­ï¼Œ é€šè¿‡å˜é‡åå’Œå˜é‡åˆ—è¡¨(var body...)å¼•å…¥varï¼Œ å¹¶å½¢æˆ(var val)è¯æ±‡è¡¨æ‰“å…¥saved-envï¼Œ æœ€ååˆ©ç”¨value-ofè§£æbodyï¼Œä¹Ÿå°±æ˜¯è§£æç”±(var body saved-env)æ„æˆçš„closureï¼Œé€’å½’è§£ææ‰€æœ‰çš„body, å¦‚æœproc1æ»¡è¶³(procedure (var body saved-env))çš„å½¢å¼ï¼Œåˆ™é€šè¿‡value-ofè¿›è¡Œè§£æ.  saved-envæ˜¯å‡å®šçš„ä¿å­˜çš„ç¯å¢ƒå˜é‡ï¼Œè€Œå¯¹åº”çš„apply-procedureçš„æœ€ç»ˆç»“æœæ˜¯(proc1 val)\nvalue-ofå®ç° å®ƒæ˜¯åœ¨è¯­è¨€è®¾è®¡é˜¶æ®µæ¯”è¾ƒé‡è¦çš„å®ç°ï¼Œåœ¨å…¶ä¸­å¯ä»¥å­˜åœ¨å¾ˆå¤šçš„å˜ç§ã€‚\n;; value-of : Exp * Env -\u0026gt; ExpVal (define value-of (lambda (exp env) (cases expression exp ;\\commentbox{ (value-of (const-exp \\n{}) \\r) = \\n{}} (const-exp (num) (num-val num)) ;\\commentbox{ (value-of (var-exp \\x{}) \\r) = (apply-env \\r \\x{})} (var-exp (var) (apply-env env var)) ;\\commentbox{\\diffspec} (diff-exp (exp1 exp2) (let ((val1 (value-of exp1 env)) (val2 (value-of exp2 env))) (let ((num1 (expval-\u0026gt;num val1)) (num2 (expval-\u0026gt;num val2))) (num-val (- num1 num2))))) ;\\commentbox{\\zerotestspec} (zero?-exp (exp1) (let ((val1 (value-of exp1 env))) (let ((num1 (expval-\u0026gt;num val1))) (if (zero? num1) (bool-val #t) (bool-val #f))))) ;\\commentbox{\\ma{\\theifspec}} (if-exp (exp1 exp2 exp3) (let ((val1 (value-of exp1 env))) (if (expval-\u0026gt;bool val1) (value-of exp2 env) (value-of exp3 env)))) ;\\commentbox{\\ma{\\theletspecsplit}} (let-exp (var exp1 body) (let ((val1 (value-of exp1 env))) (value-of body (extend-env var val1 env)))) (proc-exp (var body) (proc-val (procedure var body env))) (call-exp (rator rand) (let ((proc (expval-\u0026gt;proc (value-of rator env))) (arg (value-of rand env))) (apply-procedure proc arg))) )))   åœ¨value-ofä¸­ï¼Œå¦‚æœexpæ»¡è¶³if-exp (exp1 exp2 exp3)åˆ™è§£æä¹˜å¯¹åº”çš„ï¼Œ ä¾æ¬¡ç±»æ¨,å½“çœ‹åˆ°let-exp (va exp1 body)çš„å½¢å¼åˆ™å¯¹åº”çš„è¿›è¡Œæ¼”å˜. ","date":1456200612,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1456200612,"objectID":"0da607236d93a043a1152fc8c87a109f","permalink":"/blog/2016/02/23/casesde-zuo-yong/","publishdate":"2016-02-23T12:10:12+08:00","relpermalink":"/blog/2016/02/23/casesde-zuo-yong/","section":"archives","summary":"ä¸ºä»€ä¹ˆè¦å®ç°cases,ç›®çš„åœ¨äºè¿›ä¸€æ­¥æŠ½è±¡ç®€åŒ–è¿‡ç¨‹ã€‚\n","tags":null,"title":"casesçš„ä½œç”¨","type":"archives"},{"authors":null,"categories":["scheme"],"content":" é€šè¿‡IO monadçš„open-input-file è¯»å–æ–‡ä»¶ é€šè¿‡read-line è¯»å–æ¥å£æ–‡ä»¶ é€šè¿‡name-loopå‘½åloopæ¥å¾ªç¯è¯»å–æ–‡ä»¶ã€‚   é€šè¿‡æ–‡ä»¶å¥æŸ„è¯»å–æ–‡ä»¶ï¼Œè¿™è¾¹æ¥å£å°±æ˜¯æ–‡ä»¶å¥æŸ„ ç°åœ¨è¿˜ä¸æ¸…æ¥šæ–‡ä»¶æ¨¡å¼çš„å‡ ç§ç±»å‹  text append writeï¼ˆæ˜¯å¦æœ‰ï¼‰  eof-object?åˆ¤æ–­æ˜¯å¦æ–‡ä»¶æœ«å°¾\n(define read-file (lambda (filename) (let ([port (open-input-file filename #:mode 'text)]) (let loop ([line (read-line port)] [all \u0026quot;\u0026quot;]) (cond [(eof-object? line) all] [else (loop (read-line port) (string-append all line \u0026quot;\\n\u0026quot;))])))))   ä»è¿™è¾¹æå–å‡ºä¸€ä¸ªæœ€å¸¸ç”¨çš„let loopå¾ªç¯å¯ä»¥ç”¨äºå¾ˆå¤šåœ°æ–¹ï¼Œé‡å¤å‡ æ¡è¯­å¥åˆ†ææ‰€æœ‰ç¨‹åº\n(let loop ([start 0] [toks '()]) (letv ([(tok newstart) (scan1 s start)]) (cond [(eq? tok 'eof) (reverse toks)] [else (loop newstart (cons tok toks))])))))  å¦å¤–ï¼Œæ¯”å¦‚onstack? ç”¨äºåˆ¤æ–­æ˜¯å¦å­˜äºæ ˆ\n(define onstack? (lambda (u v stk) (let loop ([stk stk] [trace '()]) (cond [(null? stk) #f] [(and (eq? u (car (car stk))) (eq? v (cdr (car stk)))) (reverse (cons (car stk) trace))] [else (loop (cdr stk) (cons (car stk) trace))])))) ","date":1456152861,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1456152861,"objectID":"dbae704b41babc9e9e0c80d83f078927","permalink":"/blog/2016/02/22/tong-guo-schemedu-qu-wen-jian/","publishdate":"2016-02-22T22:54:21+08:00","relpermalink":"/blog/2016/02/22/tong-guo-schemedu-qu-wen-jian/","section":"archives","summary":" é€šè¿‡IO monadçš„open-input-file è¯»å–æ–‡ä»¶ é€šè¿‡read-line è¯»å–æ¥å£æ–‡ä»¶ é€šè¿‡name-loopå‘½åloopæ¥å¾ªç¯è¯»å–æ–‡ä»¶ã€‚ ","tags":null,"title":"é€šè¿‡Schemeè¯»å–æ–‡ä»¶","type":"archives"},{"authors":null,"categories":["Linux"],"content":"Ydiffæ˜¯ä¸€ä¸ªä¸é”™çš„lispè¯­æ³•åˆ†æå·¥å…·(ç‹å ç¼–åˆ¶).ä¸‹é¢æ˜¯è¯¥å·¥å…·ç®€å•ç”¨é€”å’Œä½¿ç”¨è¯´æ˜ã€‚\n ç”¨é€” ä¸»è¦æ˜¯jsï¼Œcppï¼Œå’Œlispçš„åˆ†æï¼Œç°åœ¨ä¹Ÿæœ‰python,rubyçš„åˆ†æå·¥å…·ã€‚\n ä½¿ç”¨è¯´æ˜\n  ç¼–è¯‘çš„æ—¶å€™ä»…ä»…åœ¨é¡¹ç›®ä¸‹è½½ä¹‹åï¼Œmakeä¸€ä¸‹å³å¯ç”Ÿæˆå¯¹åº”çš„diff-cpp,diff-js,diff-lispåˆ†æå·¥å…·. æ–‡ä»¶åˆ†ä¸ºå•æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ä¸¤ç§ã€‚\nå•æ–‡ä»¶ä½¿ç”¨è¯´æ˜ diff-lisp *.scm *1.scm  æ–‡ä»¶å¤¹ä½¿ç”¨æ–¹å¼ ä¿å­˜ä¸‹é¢æºä»£ç ä¸ºprocess-lisp.sh\ndir1=let-lang dir2=letrec-lang for i in `ls ${dir1}/*.scm` do export TestVari=$i /home/happycamp-of-lisp/wangying/ydiff/diff-lisp $i ${dir2}/${TestVari##*\\/} done  å½“ç„¶ä¹Ÿå¯ä»¥æ”¹ä¸º\ndir1=let-lang dir2=letrec-lang for i in `ls ${dir1}/*.scm` do /home/happycamp-of-lisp/wangying/ydiff/diff-lisp $i ${dir2}/${i##*\\/} done  åªè¦ä¿®æ”¹å¯¹åº”çš„æ–‡ä»¶å¤¹dir1,dir2,å°±å¯ä»¥åˆ†æå¯¹åº”æ–‡ä»¶å¤¹çš„scmæ‰€æœ‰æ–‡ä»¶,ç„¶åè¿ç”¨ä¸‹é¢å‘½ä»¤è¡Œï¼Œå³å¯ç”Ÿæˆ å¯¹åº”çš„htmlæ–‡ä»¶,æ–¹ä¾¿é˜…è¯»\nbash process-lisp.sh  æ•°ç»„å¼•å…¥è¿›ä¸€æ­¥ä¿®æ”¹å¤„ç†ç¨‹åº æ•°ç»„çš„shellæ“ä½œå‚è€ƒå¦‚ä¸‹,\n å®šä¹‰çš„æ—¶å€™é€šè¿‡å°æ‹¬å·åŒ…è£¹ è°ƒç”¨çš„æ—¶å€™é€šè¿‡${}  æ³¨æ„ æ•°æ®è¿ç®—å’Œåˆ¤æ–­(æ³¨æ„åªæœ‰åœ¨åŒæ‹¬å·çš„å°äºå·æ‰æ˜¯å°äºå·)çš„ä¸¤ä¸ªä¸­æ‹¬å·\nseq 1 $((${#array1[@]}-1))  æµ‹è¯•è¿‡å¾ˆå¤šé”™è¯¯çš„æƒ…å†µï¼Œæ¯”å¦‚\narray1=(`ls -l|grep ^d|awk '{print $9}'`); echo ${array1[@]:0:${#array1[@]}-1}; export length1=${!array1[@]}; for i in ${array1[@]:1:length1-1}; do for j in ${array1[@]:$i:length1}; do echo $i,$j; done; done;  åŸå› åœ¨äº,${!}æ“ä½œå¹¶ä¸æ˜¯æŠŠå®ƒå½“ä½œæ•°ç»„å½¢å¼ï¼Œæ‰€ä»¥æ”¹ä¸ºæ•°ç»„å³å¯ï¼Œä½¿ç”¨seqã€‚\nlength1=${!array1[@]} echo $length1 0 1 2 3 echo ${#length1[@]} 1  æ­£ç¡®çš„è¿‡ç¨‹(æ³¨æ„$i+1)\narray1=(`ls -l|grep ^d|awk '{print $9}'`); for i in `seq 1 $((${#array1[@]}-1))`; do for j in ${array1[@]:$i+1:${#array1[@]}}; do echo ${array1[$i]},$j; done; done;  ç»“æœ,æ»¡è¶³ç»„åˆå…¬å¼\n1,letrec-lang 1,lexaddr-lang 1,proc-lang 2,lexaddr-lang 2,proc-lang 3,proc-lang  æ‰¹å¤„ç†è§£æscmæ–‡ä»¶ å½“æ–‡ä»¶å¤¹ä¸‹å­˜åœ¨å¦‚ä¸‹æ–‡ä»¶ä¸‹ï¼Œåˆ™å¯ä»¥è¿›ä¸€æ­¥åˆ©ç”¨ç¨‹åºè¿›è¡Œåˆ†æï¼Œæ³¨æ„æ‹·è´nav.jså’Œdiff.cssè¿›è¡Œæ¸²æŸ“\nlsâ”Œâ”€[root][canbetter-N53SM][Â±][master ?:10 âœ—][2.2.1][/home/happycamp-of-lisp/EOPL2014/DF-eopl/chapter3/proc-lang/ds-rep] â””â”€â ls compiled data-structures.scm drscheme-init.scm environments.scm interp.scm lang.scm tests.scm top.scm  æ‰¹å¤„ç†ç¨‹åº\narray1=(`ls -l|grep ^d|awk '{print $9}'`); # éå†æ‰€æœ‰æ–‡ä»¶å¤¹ é™¤äº†æœ€åä¸€ä¸ª for i in `seq 1 $((${#array1[@]}-1))`; do #éå†ä»iä¹‹åçš„æ–‡ä»¶ for j in ${array1[@]:$i:${#array1[@]}}; do #echo ${array1[$i]},$j; dir1=${array1[$i]}; dir2=$j; mkdir ${dir1}-${dir2} # é€‰å–å¯¹åº”æ–‡ä»¶å¤¹ä¸‹çš„scmæ–‡ä»¶ for k in `ls ${dir1}/*.scm` do #export TestVari=$i /home/happycamp-of-lisp/wangying/ydiff/diff-lisp $k ${dir2}/${k##*\\/} done mv *.html ${dir1}-${dir2} cp ./nav.js ./diff.css ${dir1}-${dir2} done; done;  ç„¶åå¯ä»¥åœ¨terminalè¿è¡Œ\npython -m SimpleHTTPServer Serving HTTP on 0.0.0.0 port 8000 ...  åœ¨æµè§ˆå™¨è¾“å…¥ http://localhost:8000/\næœ‰é—®é¢˜çš„æ•°ç»„ä¸‹æ ‡ æ•°ç»„ä¸‹è¡¨æ˜¯ä»0å¼€å§‹çš„ï¼\narray1=(`ls -l|grep ^d|awk '{print $9}'`); # éå†æ‰€æœ‰æ–‡ä»¶å¤¹ é™¤äº†æœ€åä¸€ä¸ª for i in `seq 0 $((${#array1[@]}-1))`; do #éå†ä»iä¹‹åçš„æ–‡ä»¶ for j in ${array1[@]:$i+1:${#array1[@]}}; do #echo ${array1[$i]},$j; dir1=${array1[$i]}; dir2=$j; mkdir ${dir1}-${dir2} # é€‰å–å¯¹åº”æ–‡ä»¶å¤¹ä¸‹çš„scmæ–‡ä»¶ for k in `ls ${dir1}/*.scm` do #export TestVari=$i /home/happycamp-of-lisp/wangying/ydiff/diff-lisp $k ${dir2}/${k##*\\/} done mv *.html ${dir1}-${dir2} cp ./nav.js ./diff.css ${dir1}-${dir2} done; done; mkdir final-result for i in `seq 0 $((${#array1[@]}-1))`; do #éå†ä»iä¹‹åçš„æ–‡ä»¶ for j in ${array1[@]:$i+1:${#array1[@]}}; do #echo ${array1[$i]},$j; dir1=${array1[$i]}; dir2=$j; mv ${dir1}-${dir2} final-result done; done;  è¿™æ ·å°±å®Œæˆäº†æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å¯¹æ¯”æ“ä½œï¼Œå½“ç„¶å¾—ç¡®ä¿è¯¥æ–‡ä»¶å¤¹ä¸‹å­˜åœ¨scmæ–‡ä»¶ã€‚\nè¿›ä¸€æ­¥ä¿®æ”¹YDiffï¼Ÿ","date":1456140293,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1456140293,"objectID":"7ae26aa70222eb1bc5790fdc6afc9712","permalink":"/blog/2016/02/22/shi-yong-ydiffgong-ju-sheng-cheng-wen-jian-chai-yi-bi-jiao-wen-jian/","publishdate":"2016-02-22T19:24:53+08:00","relpermalink":"/blog/2016/02/22/shi-yong-ydiffgong-ju-sheng-cheng-wen-jian-chai-yi-bi-jiao-wen-jian/","section":"archives","summary":"Ydiffæ˜¯ä¸€ä¸ªä¸é”™çš„lispè¯­æ³•åˆ†æå·¥å…·(ç‹å ç¼–åˆ¶).ä¸‹é¢æ˜¯è¯¥å·¥å…·ç®€å•ç”¨é€”å’Œä½¿ç”¨è¯´æ˜ã€‚\n","tags":null,"title":"ä½¿ç”¨Ydiffå·¥å…·ç”Ÿæˆæ–‡ä»¶å·®å¼‚æ¯”è¾ƒæ–‡ä»¶","type":"archives"},{"authors":null,"categories":["scheme"],"content":"è®¾è®¡ä¸€ä¸ªè¯­è¨€å¾ˆé‡è¦çš„ä¸€ç‚¹å°±æ˜¯æœ‰ä¸€ä¸ªå·¥å…·æ¥åˆ›å»ºæ¥å£ï¼Œdefine-datatypeå’Œcaseså°±æ˜¯è¿™ç§å·¥å…·\ndefine-datatype ;; NOTE: datatypes are currently transparent, for the sake of EoPL's ;; use of `equal?' #lang racket/base (require (for-syntax racket/base \u0026quot;private/utils.rkt\u0026quot;)) (define-syntax (define-datatype stx) (syntax-case stx () [(_ name pred-name (variant-name (field-name field-pred) ...) ...) (let ([variant-names (syntax-\u0026gt;list #'(variant-name ...))]) ;; More syntax checks... (unless (identifier? #'name) (raise-syntax-error #f \u0026quot;expected an identifier for the datatype name\u0026quot; stx #'name)) (unless (identifier? #'pred-name) (raise-syntax-error #f \u0026quot;expected an identifier for the predicate name\u0026quot; stx #'pred-name)) (for ([vt (in-list variant-names)] [fields (in-list (syntax-\u0026gt;list #'((field-name ...) ...)))]) (unless (identifier? vt) (raise-syntax-error 'cases \u0026quot;expected an identifier for the variant name\u0026quot; stx vt)) (for ([field (in-list (syntax-\u0026gt;list fields))]) (unless (identifier? field) (raise-syntax-error 'cases \u0026quot;expected an identifier for the field name\u0026quot; stx field)))) ;; Count the fields for each variant: (with-syntax ([(variant-field-count ...) (for/list ([x (in-list (syntax-\u0026gt;list #'((field-name ...) ...)))]) (datum-\u0026gt;syntax (quote-syntax here) (length (syntax-\u0026gt;list x)) #f))] [(variant? ...) (for/list ([vn (in-list variant-names)]) (datum-\u0026gt;syntax vn (string-\u0026gt;uninterned-symbol (format \u0026quot;~a?\u0026quot; (syntax-e vn)))))] [(variant-accessor ...) (for/list ([vn (in-list variant-names)]) (datum-\u0026gt;syntax vn (string-\u0026gt;uninterned-symbol (format \u0026quot;~a-accessor\u0026quot; (syntax-e vn)))))] [(variant-mutator ...) (generate-temporaries variant-names)] [(make-variant ...) (generate-temporaries variant-names)] [(struct:variant ...) (generate-temporaries variant-names)] [(make-variant-name ...) (for/list ([vn (in-list variant-names)]) (datum-\u0026gt;syntax vn (string-\u0026gt;symbol (format \u0026quot;make-~a\u0026quot; (syntax-e vn)))))]) #'(begin (define-syntax name ;; Note: we're back to the transformer environment, here. ;; Also, this isn't a transformer function, so any direct ;; use of the name will trigger a syntax error. The name ;; can be found by `syntax-local-value', though. (let ([cert (syntax-local-certifier #t)]) (make-dt (cert #'pred-name) (list (make-vt (cert #'variant-name) (cert #'variant?) (cert #'variant-accessor) variant-field-count) ...)))) ;; Bind the predicate and selector functions: (define-values (pred-name variant-name ... variant? ... variant-accessor ...) ;; Create a new structure for the datatype (using the ;; datatype name in `struct', so it prints nicely). (let-values ([(struct:x make-x x? acc mut) (make-struct-type 'name #f 0 0 #f null (make-inspector))]) (let-values ([(struct:variant make-variant variant? variant-accessor variant-mutator) (make-struct-type 'variant-name struct:x variant-field-count 0 #f null (make-inspector))] ...) ;; User-available functions: (values x? ;; The datatype predicate ;; Create the constructor functions: (let* ([vname 'variant-name] [variant-name (lambda (field-name ...) (unless (field-pred field-name) (error vname \u0026quot;bad value for ~a field: ~e\u0026quot; 'field-name field-name)) ... (make-variant field-name ...))]) variant-name) ... variant? ... variant-accessor ...)))) ;; Compatibility bindings (define-values (make-variant-name ...) (values variant-name ...)))))] [(_ name pred-name variant ...) ;; Must be a bad variant... (for ([variant (in-list (syntax-\u0026gt;list #'(variant ...)))]) (syntax-case variant () [(variant-name field ...) (let ([name #'variant-name]) (unless (identifier? name) (raise-syntax-error #f \u0026quot;expected an identifier for the variant name\u0026quot; stx name)) ;; Must be a bad field: (for ([field (in-list (syntax-\u0026gt;list #'(field ...)))]) (syntax-case field () [(field-name field-pred) (let ([name #'field-name]) (unless (identifier? name) (raise-syntax-error #f \u0026quot;expected an identifier for the field name\u0026quot; stx name)))] [_else (raise-syntax-error #f \u0026quot;expected a field name followed by a predicate expression, all in parentheses\u0026quot; stx field)])))] [_else (raise-syntax-error #f \u0026quot;expected a variant name followed by a sequence of field declarations, all in parentheses\u0026quot; stx variant)]))] [(_ name) (raise-syntax-error #f \u0026quot;missing predicate name and variant clauses\u0026quot; stx)]))  cases (define-syntax (cases stx) (syntax-case stx () [(_ datatype expr clause ...) ;; Get datatype information: (let ([dt (and (identifier? #'datatype) (syntax-local-value #'datatype (lambda () #f)))]) (unless (dt? dt) (raise-syntax-error 'cases \u0026quot;not a datatype name\u0026quot; stx #'datatype)) ;; Parse clauses: (define-values (vts field-idss bodys else-body) (let loop ([clauses (syntax-\u0026gt;list #'(clause ...))] [saw-cases null]) (if (null? clauses) (values null null null #f) (let ([clause (car clauses)]) (syntax-case* clause () (lambda (a b) (and (eq? (syntax-e b) 'else) (not (identifier-binding b)))) [(variant (field-id ...) body0 body1 ...) (let* ([variant #'variant] [vt (ormap (lambda (dtv) (define vt-name (vt-name-stx dtv)) (and (free-identifier=? variant vt-name) dtv)) (dt-variants dt))] [orig-variant (and vt (vt-name-stx vt))]) (unless orig-variant (raise-syntax-error #f (format \u0026quot;not a variant of `~a'\u0026quot; (syntax-\u0026gt;datum #'datatype)) stx variant)) (let ([field-ids (syntax-\u0026gt;list #'(field-id ...))]) (for ([fid (in-list field-ids)]) (unless (identifier? fid) (raise-syntax-error #f \u0026quot;expected an identifier for a field\u0026quot; stx fid))) (let ([dtv (variant-assq variant (dt-variants dt))]) (unless (= (length field-ids) (vt-field-count dtv)) (raise-syntax-error #f (format \u0026quot;variant case `~a' for `~a' has wrong field count (expected ~a, found ~a)\u0026quot; (syntax-\u0026gt;datum variant) (syntax-\u0026gt;datum #'datatype) (vt-field-count dtv) (length field-ids)) stx clause))) ;; Check for duplicate local field ids: (let ([dup (check-duplicate-identifier field-ids)]) (when dup (raise-syntax-error #f \u0026quot;duplicate field identifier\u0026quot; stx dup))) ;; Check for redundant case: (when (memq orig-variant saw-cases) (raise-syntax-error #f \u0026quot;duplicate case\u0026quot; stx clause)) ;; This clause is ok: (let-values ([(vts idss bodys else) (loop (cdr clauses) (cons orig-variant saw-cases))]) (values (cons vt vts) (cons field-ids idss) (cons #'(begin body0 body1 ...) bodys) else))))] [(else body0 body1 ...) (begin (unless (null? (cdr clauses)) (raise-syntax-error #f \u0026quot;else clause must be last\u0026quot; stx clause)) (values null null null #'(begin body0 body1 ...)))] [_else (raise-syntax-error #f \u0026quot;bad clause\u0026quot; stx clause)]))))) ;; Missing any variants? (unless (or else-body (= (length vts) (length (dt-variants dt)))) (define here (map vt-name-stx vts)) (define missing (let loop ([l (dt-variants dt)]) (cond [(null? l) \u0026quot;\u0026quot;] [(ormap (lambda (i) (free-identifier=? (vt-name-stx (car l)) i)) here) (loop (cdr l))] [else (format \u0026quot; ~a~a\u0026quot; (syntax-e (vt-name-stx (car l))) (loop (cdr l)))]))) (raise-syntax-error #f (format \u0026quot;missing cases for the following variants:~a\u0026quot; missing) stx)) ;; Create the result: (with-syntax ([pred (dt-pred-stx dt)] [(variant? ...) (map vt-predicate-stx vts)] [((field-extraction ...) ...) (for/list ([vt (in-list vts)]) (with-syntax ([accessor (vt-accessor-stx vt)]) (let loop ([n 0]) (if (= n (vt-field-count vt)) null (cons #`(accessor v #,n) (loop (add1 n)))))))] [((field-id ...) ...) field-idss] [(body ...) bodys] [else-body (or else-body #'(error 'cases \u0026quot;no variant case matched\u0026quot;))]) #'(let ([v expr]) (if (not (pred v)) (error 'cases \u0026quot;not a ~a: ~s\u0026quot; (quote datatype) v) (cond [(variant? v) (let ([field-id field-extraction] ...) body)] ... [else else-body])))))]))  provide-datatype (define-syntax (provide-datatype stx) (syntax-case stx () [(_ datatype) (let ([dt (syntax-local-value #'datatype (lambda () #f))]) (unless (dt? dt) (raise-syntax-error #f \u0026quot;not a datatype name\u0026quot; stx #'datatype)) (with-syntax ([pred (dt-pred-stx dt)] [(orig-variant ...) (map vt-name-stx (dt-variants dt))]) #'(provide datatype pred orig-variant ...)))])) (provide define-datatype cases provide-datatype)  åŸºæœ¬å½¢å¼ (define-datatype typename type-predicate-name {(varient-name {(field-name predicate)}*)}+ ) (cases type-name expression {(variant-name ({field-name}*) consequent)}* (else default) )  ä¸€èˆ¬type-predicate-name å’Œpredicate éƒ½æ˜¯èƒƒè¯åˆ¤æ–­\nlambda church lambda church expression(lc-exp)::=identifier ::=(lambda (identifier) Lc-exp ::=(lc-exp lc-exp)\n(define-datatype lc-exp lc-exp? (var-exp (var identifier?)) (lambda-exp (bound-var identifier?) (body lc-exp?)) (app-exp (rator lc-exp?) (rand lc-exp?)) )  S-list::=({s-exp}*) s-exp:=Symbol|S-list\n(define-datatype s-list s-list? (empty-s-list) (non-empty-s-list (first s-exp?) (rest s-list?)) ) (define-datatype s-exp s-exp? (symbol-s-exp (sym symbol?)) (s-list-s-exp (slst s-list?)) )  è¿›ä¸€æ­¥ä½¿ç”¨ï¼Ÿ","date":1455853228,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1455853228,"objectID":"39c4a7d37db9f264325a4e7934e8e090","permalink":"/blog/2016/02/19/the-implementation-of-define-datetype/","publishdate":"2016-02-19T11:40:28+08:00","relpermalink":"/blog/2016/02/19/the-implementation-of-define-datetype/","section":"archives","summary":"è®¾è®¡ä¸€ä¸ªè¯­è¨€å¾ˆé‡è¦çš„ä¸€ç‚¹å°±æ˜¯æœ‰ä¸€ä¸ªå·¥å…·æ¥åˆ›å»ºæ¥å£ï¼Œdefine-datatypeå’Œcaseså°±æ˜¯è¿™ç§å·¥å…·\n","tags":null,"title":"The implementation of define-datatype","type":"archives"},{"authors":null,"categories":["vim"],"content":"vimæœ‰å¾ˆå¤šåŸºç¡€æ•™ç¨‹ï¼Œæˆ‘çœ‹è¿‡æ¯”è¾ƒå¥½çš„æ˜¯learn vim progressivelyã€‚\n % : Go to the corresponding (, {, [ * (resp. #) : go to next (resp. previous) occurrence of the word under the cursor  Abstractï¼š  1ï¼‰åœ¨å±å¹•ä¸­ç§»åŠ¨å…‰æ ‡ 2ï¼‰åœ¨è¡Œå†…ç§»åŠ¨å…‰æ ‡ 3ï¼‰å±å¹•æ»šåŠ¨ 4ï¼‰å¤šå±æ“ä½œ\n 4.1 å¯åŠ¨æ—¶å€™åˆ†å±  4.2 è¿è¡ŒæœŸé—´åˆ†å± 4.3 è¿è¡ŒæœŸé—´å…‰æ ‡ç§»å± 4.4 è¿è¡ŒæœŸé—´å±å¹•åˆ‡æ¢ 4.5 è¿è¡ŒæœŸé—´è°ƒæ•´çª—å£å¤§å° 4.6 è¿è¡ŒæœŸé—´å…³é—­çª—å£  vi \u0026amp; vim æœ‰ç¼–è¯‘æ¨¡å¼ä¸å‘½ä»¤æ¨¡å¼ï¼Œä¸‹è¿°å…‰æ ‡ç§»åŠ¨æ“ä½œå‡ä¸ºå‘½ä»¤æ¨¡å¼ä¸‹æ“ä½œï¼›\n ä¸‹æ–‡ä¸­ä»¥ ^ ç¬¦è¡¨ç¤º Ctrl é”®è¢«æŒ‰ä¸‹ï¼Œå¦‚ ^F æ ‡ç¤º Ctrl ä¸ F é”®è¢«åŒæ—¶æŒ‰ä¸‹ï¼›\n ä¸‹æ–‡ä¸­ä»¥ + å·è¡¨ç¤ºæŒ‰ä¸‹æŸé”®åå†æŒ‰å¦å¤–æŒ‰é”®ï¼Œå¦‚ z + Enter è¡¨ç¤ºå…ˆæŒ‰ä¸‹ z é”®ï¼Œå†æŒ‰ä¸‹ Enter é”®ï¼›\n  1ï¼Œåœ¨å±å¹•ä¸­ç§»åŠ¨å…‰æ ‡ï¼š vi \u0026amp; vim å‘½ä»¤è¡Œæ¨¡å¼æ“ä½œç§»åŠ¨å…‰æ ‡ä½ç½®éƒ½æ˜¯æŒ‡ç§»åŠ¨åˆ°è¦ç¼–è¾‘å•è¯ã€å­—æ¯çš„å‰é¢ã€‚\n æŒ‰é”® æ“ä½œæè¿° h å…‰æ ‡å·¦ç§»ä¸€ä¸ªå­—ç¬¦ï¼› j å…‰æ ‡ä¸‹ç§»ä¸€è¡Œï¼› k å…‰æ ‡ä¸Šç§»ä¸€è¡Œï¼› l å…‰æ ‡å³ç§»ä¸€ä¸ªå­—ç¬¦ï¼› æ•°å€¼ + G å…‰æ ‡ç§»è‡³â€œæ•°å€¼â€æ‰€æŒ‡è¡Œçš„è¡Œé¦–ï¼› ^H å…‰æ ‡ç§»è‡³å½“å‰å±å¹•æ˜¾ç¤ºé¦–è¡Œçš„è¡Œé¦–ï¼› ^M å…‰æ ‡ç§»è‡³å½“å‰å±å¹•æ˜¾ç¤ºçš„ä¸­é—´è¡Œçš„è¡Œé¦–ï¼› ^L å…‰æ ‡ç§»è‡³å½“å‰å±å¹•æ˜¾ç¤ºçš„æœ€åä¸€è¡Œçš„è¡Œé¦–ï¼›  2ï¼Œåœ¨æ–‡ä»¶è¡Œå†…ç§»åŠ¨å…‰æ ‡ï¼š  vi \u0026amp; vim å‘½ä»¤è¡Œæ¨¡å¼æ“ä½œå…‰æ ‡è¡Œå†…ç§»åŠ¨ï¼Œå•è¯é—´ä»¥ç©ºæ ¼ä½œä¸ºåˆ†éš”å­—ç¬¦ï¼Œæ ‡ç‚¹ç¬¦å·çœ‹ä½œä¸€ä¸ªå•è¯ã€‚ æŒ‰é”® æ“ä½œæè¿° 0 ï¼ˆæ•°å­—é›¶ï¼‰ å…‰æ ‡ç§»åŠ¨åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œé¦–ï¼› $ å…‰æ ‡ç§»åŠ¨åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œæœ«ï¼› w å…‰æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„é¦–å­—æ¯å‰ï¼› b å…‰æ ‡ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå•è¯çš„é¦–å­—æ¯å‰ï¼› e å…‰æ ‡ç§»åŠ¨åˆ°å½“å‰å…‰æ ‡æ‰€åœ¨å•è¯çš„æœ€åå­—ç¬¦å‰ï¼›  3ï¼Œå±å¹•æ»šåŠ¨ï¼š  æŒ‰é”® æ“ä½œæè¿° ^F å±å¹•å‘ä¸‹æ»šåŠ¨ä¸€å±ï¼›==\u0026gt;å± ^B å±å¹•å‘ä¸Šæ»šåŠ¨ä¸€å±ï¼› ^D å±å¹•å‘ä¸‹æ»šåŠ¨åŠå±ï¼›==\u0026gt;åŠå± ^U å±å¹•å‘ä¸Šæ»šåŠ¨åŠå±ï¼› ^E å±å¹•å‘ä¸‹æ»šåŠ¨ä¸€è¡Œï¼›==\u0026gt;è¡Œ ^Y å±å¹•å‘ä¸Šæ»šåŠ¨ä¸€è¡Œï¼› z + Enter æ»šåŠ¨å±å¹•ï¼Œä½¿å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œå¤„äºå±å¹•ç¬¬ä¸€è¡Œï¼› z + . æ»šåŠ¨å±å¹•ï¼Œä½¿å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œå¤„äºå±å¹•ä¸­é—´è¡Œï¼› z + - æ»šåŠ¨å±å¹•ï¼Œä½¿å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œå¤„äºå±å¹•æœ€åä¸€è¡Œï¼›  4, å¤šå±æ“ä½œ 4.1 å¯åŠ¨æ—¶å€™åˆ†å±  vim -on/-On filename1 filename2....   å°å†™çš„oè¡¨ç¤ºæ°´å¹³æ‹†åˆ†ï¼Œ å¤§å†™çš„Oè¡¨ç¤ºå‚ç›´æ‹†åˆ†ï¼Œ nè¡¨ç¤ºéœ€è¦æ‹†åˆ†çš„ä¸ªæ•°ï¼Œæœ€åé¢è·Ÿä¸Šæ‹†åˆ†åéœ€è¦æ‰“å¼€çš„æ–‡ä»¶åç§°  4.2 è¿è¡ŒæœŸé—´åˆ†å±   æŒ‰é”® æ“ä½œæè¿° :sp [filename] æ°´å¹³æ‹†åˆ†å‡ºä¸€ä¸ªçª—æ ¼ï¼Œåé¢å¯ä»¥æ¥è¦æ‰“å¼€çš„æ–‡ä»¶åï¼Œå¦‚æœæ²¡æœ‰åˆ™å°†å½“å‰çª—å£è¿›è¡Œæ‹†åˆ† :vsp [filename] å‚ç›´æ‹†åˆ†å‡ºä¸€ä¸ªçª—æ ¼ :new [filename] æ°´å¹³æ‹†åˆ† ^w+s ç­‰æ•ˆäº:spä¸å¸¦filenameæ•ˆæœ ^w+v ç­‰æ•ˆäº:vspä¸å¸¦filenameæ•ˆæœ  4.3 è¿è¡ŒæœŸé—´å…‰æ ‡ç§»å±   æŒ‰é”® æ“ä½œæè¿° ^w+h å…‰æ ‡ç§»åŠ¨åˆ°å·¦è¾¹çª—å£ ^w+j å…‰æ ‡ç§»åŠ¨åˆ°ä¸‹é¢çª—å£ ^w+k å…‰æ ‡ç§»åŠ¨åˆ°ä¸Šé¢çª—å£ ^w+l å…‰æ ‡ç§»åŠ¨åˆ°å³è¾¹çª—å£  4.4 è¿è¡ŒæœŸé—´å±å¹•åˆ‡æ¢   æŒ‰é”® æ“ä½œæè¿° ^w+H å°†å½“å‰çª—å£ç§»åŠ¨åˆ°æœ€å·¦è¾¹ ^w+J å°†å½“å‰çª—å£ç§»åŠ¨åˆ°æœ€ä¸‹é¢ ^w+K å°†å½“å‰çª—å£ç§»åŠ¨åˆ°æœ€ä¸Šé¢ ^w+L å°†å½“å‰çª—å£ç§»åŠ¨åˆ°æœ€å³è¾¹  4.5 è¿è¡ŒæœŸé—´è°ƒæ•´çª—å£å¤§å°   æŒ‰é”® æ“ä½œæè¿° ^w+= ä¸€æ ·å¤§é«˜åº¦ ^w+- å‡å°é«˜åº¦ ^w++ å¢åŠ é«˜åº¦ ^w+\u0026lt; å‡å°å®½åº¦ ==\u0026gt;åæ¥æ‰çŸ¥é“åˆ†ç€è¿™ä¹ˆç»† ^w+\u0026gt; å¢å¤§å®½åº¦  4.6 è¿è¡ŒæœŸé—´å…³é—­å±å¹•   æŒ‰é”® æ“ä½œæè¿° ^w+o åªç•™ä¸‹å½“å‰çª—å£,å…¶ä»–çª—å£éƒ½è¿›è¡Œå…³é—­ ===\u0026gt;æ”¹å‘½ä»¤å¾ˆæœ‰ä½œç”¨ï¼ ^w+c å…³é—­å½“å‰çª—å£ï¼Œè‹¥æ˜¯æœ€åä¸€ä¸ª æç¤ºæ˜¯å¦å…³é—­ ^w+q å…³é—­å½“å‰çª—å£ï¼Œè‹¥æ˜¯æœ€åä¸€ä¸ª ä»ç„¶ä¸ææ˜¯å…³é—­ ^w+\u0026lt; å‡å°å®½åº¦ ^w+\u0026gt; å¢å¤§å®½åº¦ ","date":1455735343,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1455735343,"objectID":"80f55ac579d1ec6736de22f353c7da00","permalink":"/blog/2016/02/18/vimde-le-qu/","publishdate":"2016-02-18T02:55:43+08:00","relpermalink":"/blog/2016/02/18/vimde-le-qu/","section":"archives","summary":"vimæœ‰å¾ˆå¤šåŸºç¡€æ•™ç¨‹ï¼Œæˆ‘çœ‹è¿‡æ¯”è¾ƒå¥½çš„æ˜¯learn vim progressivelyã€‚\n % : Go to the corresponding (, {, [ * (resp. #) : go to next (resp. previous) occurrence of the word under the cursor ","tags":null,"title":"vimçš„ä¹è¶£","type":"archives"},{"authors":null,"categories":["scheme"],"content":"CPSå…¶å®æ˜¯å®ç°branchåˆ†æ”¯çš„ä¸€ç§schemeæŠ€æœ¯ï¼Œå¯¹äºç¨‹åºæµç¨‹çš„æ§åˆ¶å…·æœ‰ é‡è¦çš„ä½œç”¨ã€‚ä¸‹é¢å°±ä¸€ä¸ªç»†èŠ‚å¯¹CPSè¿›è¡Œç®€å•è¯´æ˜ã€‚\n(define r #f) (+ 1 (call/cc (lambda (k) (set! r k) (+ 2 (k 3))))) (r 0) (r 10) ç»“æœï¼š 4 ==\u0026gt; (+ 1 3) 1 ==\u0026gt; (+ 1 0) 11 ==\u0026gt; (+ 1 10) åˆ†æï¼š ä¸€èˆ¬å½¢å¼æ˜¯ (+ 1 []) []ä»£è¡¨ç€continuationçš„å€¼ï¼Œè€Œæ•´ä¸ªcontinuationçš„è¿”å›å€¼ç¡®æ˜¯(+ 3 [c]) åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹æ˜¯3,ç´§æ¥ç€0,æœ€å10  å¦‚æœæ”¹å˜+1 ä¸º+3å‘¢ï¼Ÿ (+ 3 (call/cc (lambda (k) (set! r k) (+ 2 (k 3))))) (r 0) (r 10) ç»“æœ: 6 ==\u0026gt;(+ 3 3) 3 ==\u0026gt;(+ 3 0) 13 ==\u0026gt;(+ 3 10) åˆ†æï¼š ä¸€èˆ¬å½¢å¼æ˜¯ (+ 3 []) []ä»£è¡¨ç€continuationçš„å€¼ï¼Œè€Œæ•´ä¸ªcontinuationçš„è¿”å›å€¼ç¡®æ˜¯(+ 3 [c]) åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹æ˜¯3,ç´§æ¥ç€0,æœ€å10  CPSåˆ†ææœ€å¥½è®°ä½ä¸‹é¢çš„åˆ†ææ–¹æ³• å…·ä½“çš„è¿‡ç¨‹å‚è€ƒDead_Program,åŒ…æ‹¬rember8çš„ä¿®æ”¹ã€‚\nLet's trace (rember8 (lambda (x) x)) ls | k '(1 2 8 3 4 6 7 8 5) | (lambda (x) x) = id '(2 8 3 4 6 7 8 5) | (lambda (x) (id (cons 1 x))) = k2 '(8 3 4 6 7 8 5) | (lambda (x) (k2 (cons 2 x))) = k3 ==\u0026gt;ä¸æ–­å­˜å‚¨è®¡ç®—ç»“æœ Once we hit the 8, we apply (k (cdr ls)) where k is k3 and ls is '(8 3 4 6 7 8 5) (k3 '(3 4 6 7 8 5)) = (k2 (cons 2 '(3 4 6 7 8 5))) ==\u0026gt; what is k2? (k2 '(2 3 4 6 7 8 5)) = (id (cons 1 '(2 3 4 6 7 8 5))) ==\u0026gt; what is id? (id '(1 2 3 4 6 7 8 5)) = '(1 2 3 4 6 7 8 5) ==\u0026gt; what is final result? And we're done.  ä¹‹æ‰€ä»¥å†™è¿™ä¸ªnoteçš„ç›®çš„ä¹Ÿæ˜¯ä¸ºäº†èƒ½å¤Ÿåˆ†æcontinuationçš„è¿”å›å€¼ã€‚\n","date":1455699350,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1455699350,"objectID":"80342999d2d4c3e2032cc64d03739af6","permalink":"/blog/2016/02/17/ji-yu-continuationde-cpsbiao-da-shi-bao-cun-ji-suan-guo-cheng/","publishdate":"2016-02-17T16:55:50+08:00","relpermalink":"/blog/2016/02/17/ji-yu-continuationde-cpsbiao-da-shi-bao-cun-ji-suan-guo-cheng/","section":"archives","summary":"CPSå…¶å®æ˜¯å®ç°branchåˆ†æ”¯çš„ä¸€ç§schemeæŠ€æœ¯ï¼Œå¯¹äºç¨‹åºæµç¨‹çš„æ§åˆ¶å…·æœ‰ é‡è¦çš„ä½œç”¨ã€‚ä¸‹é¢å°±ä¸€ä¸ªç»†èŠ‚å¯¹CPSè¿›è¡Œç®€å•è¯´æ˜ã€‚\n","tags":null,"title":"åŸºäºcontinuationçš„cpsè¡¨è¾¾å¼ï¼Œä¿å­˜è®¡ç®—è¿‡ç¨‹","type":"archives"},{"authors":null,"categories":["scheme"],"content":"schemeä¸­IOçš„å®ç°ç±»ä¼¼äºCPSåœ¨åŸæ¥å‡½æ•°çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªæ§åˆ¶å˜é‡ã€‚\nä¹‹å‰æ›¾ç»å†™è¿‡CPSçš„æ§åˆ¶è¿‡ç¨‹\noriginal style (define rember8 (lambda (ls) (cond [(null? ls) '()] [(= (car ls) 8) (cdr ls)] [else (cons (car ls) (rember8 (cdr ls)))])))  cps style ;1 (define rember8 (lambda (ls k) (cond [(null? ls) (k '())] ==\u0026gt; k [(= (car ls) 8) (cdr ls)] [else (cons (car ls) (rember8 (cdr ls)))]))) ;2 (define rember8 (lambda (ls k) (cond [(null? ls) (k '())] [(= (car ls) 8) (k (cdr ls))] ==\u0026gt;k [else (rember8 (cdr ls) (lambda (x) (cons (car ls) x)))]))) ==\u0026gt; rember8 ;3 (define rember8 (lambda (ls k) (cond [(null? ls) (k '())] [(= (car ls) 8) (k (cdr ls))] [else (rember8 (cdr ls) (lambda (x) (k (cons (car ls) x)))]))) ==\u0026gt; k  è¿™ä¸ªkçš„ä½œç”¨å°†åœ¨IOä¸­ä½“ç°å‡ºæ¥ã€‚\n(define o (open-output-file \u0026quot;greeting.txt\u0026quot;)) (display \u0026quot;hello\u0026quot; o) (write-char #\\space o) (display 'world o) (newline o) (close-output-port o)  ç»“æœï¼š  å…¶ä»–IOè¯­æ³•  open-input-file\n;;æ‰“å¼€æ–‡ä»¶å¥æŸ„ ç”¨äºè¯»æ“ä½œ (define in10 (open-input-file \u0026quot;greeting.txt\u0026quot;)) ;;åˆ©ç”¨read-char è¯»å–å•ä¸ªå­—ç¬¦char (read-char in10) (read-char in10) (read-char in10) ;;åˆ©ç”¨read è¯»å–ä¸€ä¸ªå­—word (read in10) (read in10) ;;åˆ©ç”¨read-lineè¯»å–ä¸€è¡Œå­—ç¬¦ (read-line in10) (read-line in10) (read in10) ;;ç»“æœ #\\h ==\u0026gt;read-char #\\e ==\u0026gt;read-char #\\l ==\u0026gt;read-char 'lo ==\u0026gt;read 'world ==\u0026gt;read \u0026quot;\u0026quot; ==\u0026gt;read-line \u0026quot;made in DaXi\u0026quot; ==\u0026gt;read-line #\u0026lt;eof\u0026gt; ==\u0026gt;read  open-input-string\n(define i (open-input-string \u0026quot;hello world\u0026quot;)) (read-char i) #\\h ==\u0026gt;read-char (read-char i) #\\e ==\u0026gt;read-char (read-char i) #\\l ==\u0026gt;read-char (read i) 'lo ==\u0026gt;read (read i) 'world ==\u0026gt;read (read i) #\u0026lt;eof\u0026gt; ==\u0026gt;read  open-output-string\n;;;å®šä¹‰å­—ç¬¦ä¸²å˜é‡ (define op (open-output-string)) (write 'hello op) (write-char #\\, op) (display \u0026quot; \u0026quot; op) (display \u0026quot;world\u0026quot; op) ;;è·å–å­˜å–çš„å€¼ (get-output-string op) ;;ç»“æœ \u0026quot;hello,world\u0026quot; ==\u0026gt; get-output-string   å…¶ä¸­oçš„ä½œç”¨å…¶å®å°±æ˜¯ç±»ä¼¼äºkçš„ä½œç”¨ï¼Œéƒ½æ˜¯ä½“ç°è€…ä¸€ç§ç¨‹åºçš„æ§åˆ¶ä¸€ç§ç»­å»¶ï¼ˆå…·ä½“æœªè®²çš„ååˆ†æ¸…æ¥šï¼Œå¾…ä»¥åè¡¥å……loadç­‰ï¼‰ã€‚\n","date":1455677926,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1455677926,"objectID":"4312900381788b68a51806659c800b88","permalink":"/blog/2016/02/17/scheme-ioshi-xian-lai-zi-yu-cpshuo-zhe-haskellde-monodfan-chou-si-xiang/","publishdate":"2016-02-17T10:58:46+08:00","relpermalink":"/blog/2016/02/17/scheme-ioshi-xian-lai-zi-yu-cpshuo-zhe-haskellde-monodfan-chou-si-xiang/","section":"archives","summary":"schemeä¸­IOçš„å®ç°ç±»ä¼¼äºCPSåœ¨åŸæ¥å‡½æ•°çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªæ§åˆ¶å˜é‡ã€‚\n","tags":null,"title":"scheme IOå®ç°æ¥è‡ªäºCPSæˆ–è€…haskellçš„monodèŒƒç•´æ€æƒ³","type":"archives"},{"authors":null,"categories":["scheme"],"content":"é¢å‘å¯¹è±¡å·²ç»å¤§è¡Œå…¶é“ï¼Œè€Œåœ¨schemeæ˜¯å¦‚ä½•å®ç°ï¼Œæœ¬æ–‡ä»…ä»…æ˜¯åˆ¹é‚£çš„æ€è·¯ï¼Œ å¯ä»¥é€šè¿‡letæ¥å®šä¹‰å±€éƒ¨å˜é‡ï¼Œè€Œå¯ä»¥é€šè¿‡letrecå®šä¹‰methodçš„è¿‡ç¨‹æ¥å®ç° é¢å‘å¯¹è±¡çš„æ•°æ®æŠ½è±¡çš„èƒ½åŠ›ã€‚\nlet ä¸å…·å¤‡å±€éƒ¨ä¼ é€’åŠŸèƒ½ (define x 10) ;;; xçš„å€¼ä¸ä¼šå½±å“åˆ°å±€éƒ¨å˜é‡çš„å€¼ (let ((x 1) (y 2) (z 3)) (list x y z)) (define x 10) ;;;xçš„å€¼ä¼šå½±å“åˆ°å±€éƒ¨å˜é‡çš„å€¼ (let ((x 1) (y x) (z 3)) (list x y z)) ;ç»“æœ (1 2 3) (1 10 3)  ç¬¬ä¸€æ¬¡æ³¨æ„çœ‹letçš„å®ç° (define-syntax (syntax-rules () ((let ((var expr) ...) body ...) ((lambda (var ...) body ...) expr ...))))  (let ((x 2) (y 3)) (+ x y)) è½¬å˜ä¸º ((lambda (x y) (+ x y)) 2 3) çš„å½¢å¼.\nlet star å…·å¤‡å±€éƒ¨ä¼ é€’åŠŸèƒ½ (let* (( x 1) (y x) (z 3)) (list x y z)) ;ç»“æœ (1 1 3)  å¦å¤–æœ‰ä¸€ç§å«åšfluid-letçš„æš‚æ—¶æ²¡æœ‰åœ¨è¿™è¾¹å‡ºç°\nletrec å…·å¤‡è‡ªæŒ‡çš„èƒ½åŠ›(é€’å½’) å¦‚æœæƒ³å®šä¹‰ä¸€ä¸ªprocedureå±€éƒ¨å˜é‡ï¼Ÿ å¦‚æœç”¨let æˆ–è€…let*éƒ½æ— æ³•è¾¾åˆ°æ­¤ç›®çš„ï¼Œå› ä¸ºä»–ä»¬ä¸èƒ½è‡ªæŒ‡ï¼ˆä¹Ÿå°±æ˜¯æ²¡æœ‰é€’å½’çš„èƒ½åŠ›ï¼‰ è€Œå¦‚æœæ˜¯letrecåˆ™æ˜¯æ‹¥æœ‰æ­¤åŠŸèƒ½\n(letrec ((my-even? (lambda (x) (if (zero? x) #t (my-odd? (- x 1))))) (my-odd? (lambda (x) (if (zero? x) #f (my-even? (- x 1)))))) (my-even? 10) ; (my-odd? 10) ;;åªä¼šæ‰“å°å‡ºæœ€åä¸€ä¸ªç»“æœ ) ;ç»“æœ #f  Named Let ä¸€ç§æ›´åŠ ç´§å‡‘çš„letrec åœ¨ä¸Šæ–‡ï¼Œletæ˜¯ç”¨æ¥æŒ‡å®šå±€éƒ¨å˜é‡ï¼Œè€Œletrecæ˜¯æ¥æŒ‡å®šprocedureï¼Œ ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨Named letæ¥ä½¿letrecå†™èµ·æ¥æ›´åŠ ç´§å‡‘äº›ï¼Œä½†æ˜¯ ä¸é€‚åˆä¹¦å†™å¤šä¸ªå±€éƒ¨æ–¹æ³•çš„æƒ…å†µï¼Œæ¯”å¦‚ï¼š\n(letrec ((countdown (lambda (i) (if(= i 0) 'ole (begin (display i) (newline) (countdown (- i 1))))))) (countdown 10)) ç»“æœ: 10 9 8 7 6 5 4 3 2 1 'ole  (let countdown ((i 10)) (if (= i 0) 'ole (begin (display i) (newline) (countdown (- i 1))))) ç»“æœ: 10 9 8 7 6 5 4 3 2 1 'ole  è¿›ä¸€æ­¥å®ç°ç•™å¾…ä»¥å","date":1455629715,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1455629715,"objectID":"11269e6db47e9e702617eb32a84b7e02","permalink":"/blog/2016/02/16/let-and-letrec-makes-programming-orient-object/","publishdate":"2016-02-16T21:35:15+08:00","relpermalink":"/blog/2016/02/16/let-and-letrec-makes-programming-orient-object/","section":"archives","summary":"é¢å‘å¯¹è±¡å·²ç»å¤§è¡Œå…¶é“ï¼Œè€Œåœ¨schemeæ˜¯å¦‚ä½•å®ç°ï¼Œæœ¬æ–‡ä»…ä»…æ˜¯åˆ¹é‚£çš„æ€è·¯ï¼Œ å¯ä»¥é€šè¿‡letæ¥å®šä¹‰å±€éƒ¨å˜é‡ï¼Œè€Œå¯ä»¥é€šè¿‡letrecå®šä¹‰methodçš„è¿‡ç¨‹æ¥å®ç° é¢å‘å¯¹è±¡çš„æ•°æ®æŠ½è±¡çš„èƒ½åŠ›ã€‚\n","tags":null,"title":"let and letrec makes programming orient object","type":"archives"},{"authors":null,"categories":["scheme"],"content":"æœ‰å¾ˆå¤šæ—¶å€™åœ¨æ€è€ƒengineæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿ å¶å°”åœ¨ä¸€æœ¬ä¹¦ä¸­çœ‹åˆ°EngineåŒ…å«ä¸‰ä¸ªéƒ¨åˆ†\n clock ticksæ—¶é—´æˆ³ï¼ˆä»€ä¹ˆæ—¶å€™åšä»€ä¹ˆäº‹æƒ…ï¼‰ success procedure failure procedure  ä¹Ÿå°±æ˜¯ä¸€ä¸ªEngineäº¤ä»£äº†æŒ‰ç…§æ—¶é—´çš„å‘å±•ï¼Œæ»¡è¶³æŸä¸ªæ¡ä»¶ è¯¥åšä»€ä¹ˆäº‹æƒ…ï¼Œå¦‚æœå¤±è´¥äº†è¯¥åšä»€ä¹ˆä¸œè¥¿ã€‚ åœ¨ä¸Šä¸€ç¯‡åšæ–‡å¹¶æœªè¯¦ç»†è¯´å‡ºä¸€ä¸ªæ•°æ®æŠ½è±¡Data Abstraction å…¶å®å°±æ˜¯ç”±åŸºæœ¬çš„ åˆ›å»ºéƒ¨åˆ†å’Œåˆ¤æ–­éƒ¨åˆ†ä¸¤éƒ¨åˆ†ç»„æˆã€‚åˆ›å»ºéƒ¨åˆ†ä¹Ÿå«åšconstructoræ¯”å¦‚ä¸Šä¸€ç¯‡åšæ–‡çš„ zeroï¼Œsuccessorï¼Œpredecessorã€‚è€Œåˆ¤æ–­éƒ¨åˆ†ä¹Ÿå«åšèƒƒè¯éƒ¨åˆ†predicateã€‚\n constructor  add delete modify \u0026hellip;  observer  false? null? zero? atom? \u0026hellip;   è€Œç»¼åˆEngineå’ŒData Abstraction,å…¶å®Engineä¹Ÿæ˜¯ç”±ç€constructorå’Œobserverä¸¤éƒ¨åˆ†ç»„æˆè¿›è¡Œæ•°æ®æŠ½è±¡ï¼Œåªä¸è¿‡å¯èƒ½å¼•å…¥æ—¶é—´çš„æ¦‚å¿µã€‚\nè€Œä¸‹åˆååœ¨å±±é—´ï¼Œæ„Ÿå—ç€æ½ºæ½ºçš„æµæ°´ï¼ŒEngineæ­£å¦‚è¿™æ½ºæ½ºçš„æ³‰æ°´ï¼Œç»µç»µä¸æ¯ã€‚ä¸€ç›´æƒ³ç€è®©ç¨‹åºä¸­å¤åˆå“²å­¦ã€å¿ƒç†é—¨ï¼Œ å¤šä¸€äº›äººæƒ…å‘³ï¼Œè€Œä¸æ˜¯æœºå™¨çš„å‘†æ¿å‘³ã€‚è€ŒEngineçš„CPSæ€æƒ³æ­£å¥½è®©ç¨‹åºä½“ç°çš„å˜åŒ–å’ŒæµåŠ¨çš„æ„Ÿè§‰ï¼ŒçŠ¹å¦‚æ½ºæ½ºçš„æ³‰æ°´,é‡ç‰©åˆ™ç»•ï¼Œæœ‰è·¯åˆ™è¡Œã€‚\nä¸€ç›˜æ± æ°´ï¼Œæµä¸‹äº†ä¼¼æ°´æµå¹´ï¼Œè§„åˆ™ä¾ç„¶ åšä¿¡ä»»ä½•ç§‘å­¦é—®é¢˜éƒ½å¯ä»¥é€šè¿‡å­è¯­è¨€è¿›è¡Œæ±‚è§£ï¼Œå½“å‰è¯­è¨€æ— æ³•è§£å†³åªèƒ½è¯´ç°åœ¨çš„è¯­è¨€å¯¹é—®é¢˜çš„è§£é‡Šä¸æ¸…æ¥šï¼Œå¾—è¿›ä¸€æ­¥è¿›è¡Œè¯­è¨€åˆ†å±‚, æ¯ä¸€ä¸ªæœªè§£ä¹‹è°œéƒ½æ˜¯è¦è¢«è§£å¼€çš„ã€‚\n","date":1455614763,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1455614763,"objectID":"986b8337573b72a267214d9d73e70b42","permalink":"/blog/2016/02/16/engine-your-life/","publishdate":"2016-02-16T17:26:03+08:00","relpermalink":"/blog/2016/02/16/engine-your-life/","section":"archives","summary":"æœ‰å¾ˆå¤šæ—¶å€™åœ¨æ€è€ƒengineæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿ å¶å°”åœ¨ä¸€æœ¬ä¹¦ä¸­çœ‹åˆ°EngineåŒ…å«ä¸‰ä¸ªéƒ¨åˆ†\n clock ticksæ—¶é—´æˆ³ï¼ˆä»€ä¹ˆæ—¶å€™åšä»€ä¹ˆäº‹æƒ…ï¼‰ success procedure failure procedure  ä¹Ÿå°±æ˜¯ä¸€ä¸ªEngineäº¤ä»£äº†æŒ‰ç…§æ—¶é—´çš„å‘å±•ï¼Œæ»¡è¶³æŸä¸ªæ¡ä»¶ è¯¥åšä»€ä¹ˆäº‹æƒ…ï¼Œå¦‚æœå¤±è´¥äº†è¯¥åšä»€ä¹ˆä¸œè¥¿ã€‚ ","tags":null,"title":"Engine your life","type":"archives"},{"authors":null,"categories":["scheme"],"content":"æˆ‘ä»¬è®¾å®šä¸€ä¸ªæ¥å£ï¼Œè¯¥æ¥å£å®ç°åŒ…æ‹¬ä¸‰ä¸ªconstructorå’Œ1ä¸ªobserver\n zero successor predecessor zero?  å½“ç„¶ä¹Ÿå¯ä»¥æ‹“å±•è¯¥æ¥å£åŒ…æ‹¬scheme-val-\u0026gt;my-val,my-val-\u0026gt;scheme-val,plusç­‰ã€‚ ä¸‹é¢çœ‹ä¸€ä¸‹å¦‚ä½•å®ç°ä¸‰ä¸ªç›¸åŒæ¥å£çš„å®ç°ï¼Œä»è€Œä½“å‘³data abstraction(data representation or data boundary).\nunary implementation è¾…åŠ©æµ‹è¯•ç¨‹åº (define-syntax equal?? (syntax-rules () ((_ test-exp correct-ans) (let ((evaluate-ans test-exp)) (if (not (equal? evaluate-ans correct-ans)) (printf \u0026quot;~s returned ~s~%, should have returned ~s~%\u0026quot; 'test-exp evaluate-ans correct-ans) 'OK))))) (define report-unit-tests-completed (lambda (fn-name) (printf \u0026quot;unit tests completed: ~s~%\u0026quot; fn-name)))  (let () (define zero (lambda () '())) (define is-zero? (lambda (n) (null? n))) (define successor (lambda (n) (cons #t n))) (define predecessor (lambda (n) (cdr n))) (define plus (lambda (x y) (if (is-zero? x) y (successor (plus (predecessor x) y))))) (report-unit-tests-completed 'unary-representation) )  scheme value implementation (let() (define zero (lambda () 0)) (define is-zero? (lambda (n) (zero? n))) (define successor (lambda (n) (+ n 1))) (define predecessor (lambda (n) (- n 1))) (define plus (lambda (x y) (if (is-zero? x) y (successor (plus (predecessor x) y))))) (equal?? (plus 3 7) 10) (printf \u0026quot;~s test completed.~% \u0026quot; 'scheme-number-presentation) )  5-inverse implementation (let () (define zero (lambda () 5)) (define is-zero? (lambda (n) (= n 5))) (define successor (lambda (n) (- n 5))) (define predecessor (lambda (n) (+ n 5))) (define plus (lambda (x y) (if (is-zero? x) y (successor (plus (predecessor x) y))))) (define scheme-int-\u0026gt;my-int (lambda (n) (if (zero? n) (zero) (successor (scheme-int-\u0026gt;my-int (- n 1)))))) (define my-int-\u0026gt;scheme-int (lambda (n) (if (is-zero? n) 0 (+ 1 (my-int-\u0026gt;scheme-int (predecessor n)))))) (equal?? (my-int-\u0026gt;scheme-int (plus (scheme-int-\u0026gt;my-int 3) (scheme-int-\u0026gt;my-int 7))) 10) (printf \u0026quot;~s unit tested completed\u0026quot; 'reverse-number-representation) )  æ‹“å±•æ•´ä½“çš„æ¥å£ç¨‹åº åœ¨ä¸Šé¢çš„(let \u0026hellip;.) ä¸­éƒ½å¯ä»¥æ·»åŠ å¦‚ä¸‹çš„æ¥å£slots, ä½ ä¼šå‘ç°ä»–ä»¬çš„å®ç°åœ¨ä»»æ„ä¸€ç§å®ç°éƒ½æ˜¯ä¸€æ ·çš„è¿‡ç¨‹ï¼Œåªè¦4ä¸ªåŸºæœ¬æ¥å£ å®ç°ä¸€æ ·é‚£ä»–ä»¬çš„result is the same.\n(define scheme-int-\u0026gt;my-int (lambda (n) (if (zero? n) (zero) (successor (scheme-int-\u0026gt;my-int (- n 1)))))) (define my-int-\u0026gt;scheme-int (lambda (n) (if (is-zero? n) 0 (+ 1 (my-int-\u0026gt;scheme-int (predecessor n)))))) (define plus (lambda (x y) (if (is-zero? x) y (successor (plus (predecessor x) y)))))  é€šè¿‡è€…ä¸‰ä¸ªå®ç°è¿‡ç¨‹è®¤è¯†[v] is the data representation of the v in certain interface. åªè¦ç¡®å®šæ¥å£ï¼Œé‚£ä¹ˆå®ç°æœ‰nç§æƒ…å†µåªè¦æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œä»è€Œè¾¾åˆ°é—®é¢˜çš„ æ±‚è§£ã€‚\n","date":1455525566,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1455525566,"objectID":"72761e29afd008ac944a69e20daf93db","permalink":"/blog/2016/02/15/data-representation-the-same-interface-with-different-implementation/","publishdate":"2016-02-15T16:39:26+08:00","relpermalink":"/blog/2016/02/15/data-representation-the-same-interface-with-different-implementation/","section":"archives","summary":"æˆ‘ä»¬è®¾å®šä¸€ä¸ªæ¥å£ï¼Œè¯¥æ¥å£å®ç°åŒ…æ‹¬ä¸‰ä¸ªconstructorå’Œ1ä¸ªobserver\n zero successor predecessor zero?  å½“ç„¶ä¹Ÿå¯ä»¥æ‹“å±•è¯¥æ¥å£åŒ…æ‹¬scheme-val-\u0026gt;my-val,my-val-\u0026gt;scheme-val,plusç­‰ã€‚ ä¸‹é¢çœ‹ä¸€ä¸‹å¦‚ä½•å®ç°ä¸‰ä¸ªç›¸åŒæ¥å£çš„å®ç°ï¼Œä»è€Œä½“å‘³data abstraction(data representation or data boundary).\n","tags":null,"title":"Data Representation-The Same interface with Different implementation","type":"archives"},{"authors":null,"categories":["scheme"],"content":"è¿™ä¸ªç¨‹åºæ˜¯å‚è€ƒæ´—ç‰Œè€Œæ¥ï¼Œä¸»è¦å®šä½äºschemeçš„ç®—æ³•è¿ç”¨å®ç°ã€‚\næºä»£ç å¦‚ä¸‹ï¼š\n#lang racket ;å››ç§èŠ±è‰²åˆ†åˆ«ä¸ºé»‘æ¡ƒ(spade)ã€çº¢å¿ƒ(heart)ã€æ¢…èŠ±(club)ã€æ–¹å—(diamond) (define suits '(\u0026quot;ç‹\u0026quot; \u0026quot;é»‘æ¡ƒ\u0026quot; \u0026quot;çº¢æ¡ƒ\u0026quot; \u0026quot;æ¢…èŠ±\u0026quot; \u0026quot;æ–¹å—\u0026quot;)) (define faces '(\u0026quot;B\u0026quot; \u0026quot;L\u0026quot; \u0026quot;A\u0026quot; \u0026quot;2\u0026quot; \u0026quot;3\u0026quot; \u0026quot;4\u0026quot; \u0026quot;5\u0026quot; \u0026quot;6\u0026quot; \u0026quot;7\u0026quot; \u0026quot;8\u0026quot; \u0026quot;9\u0026quot; \u0026quot;10\u0026quot; \u0026quot;J\u0026quot; \u0026quot;Q\u0026quot; \u0026quot;K\u0026quot;)) ;ç”Ÿæˆä¸€å¼ ç‰Œ (define (creat-card suit face) (cons suit face) ) ;ç”Ÿæˆnå‰¯ç‰Œ (define (creat-cards n mysuits myfaces) (define (afaces suit myfaces) (if (null? myfaces) myfaces (append (list (creat-card suit (car myfaces))) (afaces suit (cdr myfaces)) ) ) ) (define (asuits suits myfaces) (if (null? suits) suits (append (afaces (car suits) myfaces) (asuits (cdr suits) myfaces) ) ) ) ;(make-list n (asuits mysuits myfaces)) (define (n-cards n alist return) (if (= n 0) return (n-cards (- n 1) alist (append return alist)) ) ) ;(n-cards 4 '(a b c d e) '()) (n-cards n (asuits mysuits myfaces) '()) ) ;æ˜¾ç¤ºç‰Œ (define (print-cards alist . number) (define (iter alist n num) (if (= 0 (remainder n num)) (newline) 'ok ) (if (null? alist) (newline) (begin (display (car alist)) (display \u0026quot; \u0026quot;) (iter (cdr alist) (+ n 1) num) ) ) ) (if (null? number) (iter alist 0 5) (iter alist 0 (car number)) ) ) ;è·å–ç‰Œçš„èŠ±è‰² (define (get-suit card) ((lambda (x) (cond ((equal? x \u0026quot;é»‘æ¡ƒ\u0026quot;) 4) ((equal? x \u0026quot;çº¢æ¡ƒ\u0026quot;) 3) ((equal? x \u0026quot;æ¢…èŠ±\u0026quot;) 2) ((equal? x \u0026quot;æ–¹å—\u0026quot;) 1) ((equal? x \u0026quot;ç‹\u0026quot;) 0) ) ) (car card) ) ) ;è·å–ç‰Œçš„æ•°å€¼ (define (get-face card) ((lambda (x) (cond ((equal? x \u0026quot;A\u0026quot;) 1) ((equal? x \u0026quot;2\u0026quot;) 2) ((equal? x \u0026quot;3\u0026quot;) 3) ((equal? x \u0026quot;4\u0026quot;) 4) ((equal? x \u0026quot;5\u0026quot;) 5) ((equal? x \u0026quot;6\u0026quot;) 6) ((equal? x \u0026quot;7\u0026quot;) 7) ((equal? x \u0026quot;8\u0026quot;) 8) ((equal? x \u0026quot;9\u0026quot;) 9) ((equal? x \u0026quot;10\u0026quot;) 10) ((equal? x \u0026quot;J\u0026quot;) 11) ((equal? x \u0026quot;Q\u0026quot;) 12) ((equal? x \u0026quot;K\u0026quot;) 13) ((equal? x \u0026quot;B\u0026quot;) 30) ((equal? x \u0026quot;L\u0026quot;) 20) ) ) (cdr card) ) ) ;æ´—ç‰Œ (define (shuffle-card cards) (define (append-amb x y return) (cond ((and (null? x) (null? y)) return) ((null? x) (append return y)) ((null? y) (append return x)) (else (append-amb (cdr y) (cdr x) (append return (append (list (car x)) (list (car y)))) ) ) ) ) ;-- (define (shuffle scards) ((lambda (x) (append-amb (list-tail scards x) (list-head scards x) '())) (random (length scards)) ) ) ;-- (define (iter cards n) (if (= n 0) cards (iter (shuffle cards) (- n 1)) ) ) ;-- (iter cards (length cards)) ;(shuffle cards) ) ;åˆ†ç‰Œ(deal-card '(1 2 3 4 5 6 7 8) 4) =\u0026gt; return ((1 5) (2 6) (3 7) (4 8)) ;;è¿˜æ²¡å®Œæˆ (define (deal-card alist n) (define (iter alist n return) (if (null? alist) return ;(append ) 'ok ) ) (iter alist n '()) ) ;-------------------------------- ;è¿”å›listä¸­kä»¥å‰çš„sublist (define (list-head lst k) (if (zero? k) '() (append (list (car lst)) (list-head (cdr lst) (- k 1)) ) ) ) ;-------------test--------------- (define x (creat-card \u0026quot;æ¢…èŠ±\u0026quot; \u0026quot;8\u0026quot;)) (define k (creat-cards 1 (cdr suits) (cdr (cdr faces)))) (define n '(1 2 3 4 5 6 7 8 9 10)) (print-cards k) (print-cards (list-head k 9)) (print-cards (list-tail k 9) 13) ;(print-cards (shuffle-card k)) ;------------------ ;(display (shuffle-card n))  è¿è¡Œç»“æœ (é»‘æ¡ƒ . A) (é»‘æ¡ƒ . 2) (é»‘æ¡ƒ . 3) (é»‘æ¡ƒ . 4) (é»‘æ¡ƒ . 5) (é»‘æ¡ƒ . 6) (é»‘æ¡ƒ . 7) (é»‘æ¡ƒ . 8) (é»‘æ¡ƒ . 9) (é»‘æ¡ƒ . 10) (é»‘æ¡ƒ . J) (é»‘æ¡ƒ . Q) (é»‘æ¡ƒ . K) (çº¢æ¡ƒ . A) (çº¢æ¡ƒ . 2) (çº¢æ¡ƒ . 3) (çº¢æ¡ƒ . 4) (çº¢æ¡ƒ . 5) (çº¢æ¡ƒ . 6) (çº¢æ¡ƒ . 7) (çº¢æ¡ƒ . 8) (çº¢æ¡ƒ . 9) (çº¢æ¡ƒ . 10) (çº¢æ¡ƒ . J) (çº¢æ¡ƒ . Q) (çº¢æ¡ƒ . K) (æ¢…èŠ± . A) (æ¢…èŠ± . 2) (æ¢…èŠ± . 3) (æ¢…èŠ± . 4) (æ¢…èŠ± . 5) (æ¢…èŠ± . 6) (æ¢…èŠ± . 7) (æ¢…èŠ± . 8) (æ¢…èŠ± . 9) (æ¢…èŠ± . 10) (æ¢…èŠ± . J) (æ¢…èŠ± . Q) (æ¢…èŠ± . K) (æ–¹å— . A) (æ–¹å— . 2) (æ–¹å— . 3) (æ–¹å— . 4) (æ–¹å— . 5) (æ–¹å— . 6) (æ–¹å— . 7) (æ–¹å— . 8) (æ–¹å— . 9) (æ–¹å— . 10) (æ–¹å— . J) (æ–¹å— . Q) (æ–¹å— . K) (é»‘æ¡ƒ . A) (é»‘æ¡ƒ . 2) (é»‘æ¡ƒ . 3) (é»‘æ¡ƒ . 4) (é»‘æ¡ƒ . 5) (é»‘æ¡ƒ . 6) (é»‘æ¡ƒ . 7) (é»‘æ¡ƒ . 8) (é»‘æ¡ƒ . 9) (é»‘æ¡ƒ . 10) (é»‘æ¡ƒ . J) (é»‘æ¡ƒ . Q) (é»‘æ¡ƒ . K) (çº¢æ¡ƒ . A) (çº¢æ¡ƒ . 2) (çº¢æ¡ƒ . 3) (çº¢æ¡ƒ . 4) (çº¢æ¡ƒ . 5) (çº¢æ¡ƒ . 6) (çº¢æ¡ƒ . 7) (çº¢æ¡ƒ . 8) (çº¢æ¡ƒ . 9) (çº¢æ¡ƒ . 10) (çº¢æ¡ƒ . J) (çº¢æ¡ƒ . Q) (çº¢æ¡ƒ . K) (æ¢…èŠ± . A) (æ¢…èŠ± . 2) (æ¢…èŠ± . 3) (æ¢…èŠ± . 4) (æ¢…èŠ± . 5) (æ¢…èŠ± . 6) (æ¢…èŠ± . 7) (æ¢…èŠ± . 8) (æ¢…èŠ± . 9) (æ¢…èŠ± . 10) (æ¢…èŠ± . J) (æ¢…èŠ± . Q) (æ¢…èŠ± . K) (æ–¹å— . A) (æ–¹å— . 2) (æ–¹å— . 3) (æ–¹å— . 4) (æ–¹å— . 5) (æ–¹å— . 6) (æ–¹å— . 7) (æ–¹å— . 8) (æ–¹å— . 9) (æ–¹å— . 10) (æ–¹å— . J) (æ–¹å— . Q) (æ–¹å— . K) ","date":1455431863,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1455431863,"objectID":"e746ceb7db86d57e0d8d1340e9207802","permalink":"/blog/2016/02/14/shuffle-cards/","publishdate":"2016-02-14T14:37:43+08:00","relpermalink":"/blog/2016/02/14/shuffle-cards/","section":"archives","summary":"è¿™ä¸ªç¨‹åºæ˜¯å‚è€ƒæ´—ç‰Œè€Œæ¥ï¼Œä¸»è¦å®šä½äºschemeçš„ç®—æ³•è¿ç”¨å®ç°ã€‚\n","tags":null,"title":"shuffle cards","type":"archives"},{"authors":null,"categories":["scheme"],"content":"ä½œä¸ºä¸€ä¸ªschemerï¼Œä½ å¾—å»å­¦ä¹ ï¼Œç¼–ç¨‹ï¼Œç¤¾äº¤ï¼Œå·¥ä½œï¼Œä¿æŒç•…é€šç­‰, å½“ç„¶ä½ æœ€ä¸è¯¥é”™è¿‡çš„æ˜¯æ–¯åŸºæ‘©æ–¯çš„ä¹å›­ã€‚\nå­¦ä¹   FAQ textbooksä¹¦æœ¬ videos blogs standards æ ‡å‡†æ‰‹å†Œ tutorials å…¥é—¨ä¹¦ç± bibliography å‚è€ƒæ–‡çŒ® other documents å…¶ä»–æ–‡æ¡£ education æ•™è‚²  é€šè¿‡ä»¥ä¸Šå‡ ä¸ªéƒ¨åˆ†å¯ä»¥å®Œæˆä½ å­¦ä¹ çš„è¿‡ç¨‹ã€‚\nç¼–ç¨‹  implementation é€šè¿‡å®ç°ä¸€é—¨è¯­è¨€ libraries é€šè¿‡è°ƒç”¨åº“ environments é€šè¿‡æ­å»ºç¯å¢ƒ äº†è§£ç¯å¢ƒ Scheme Requests for Implementation  ç¤¾äº¤  ä¸­å›½lispç»„ç»‡ googleè®¨è®ºç»„ å¼€å‘è€…é‚®ç®±  å·¥ä½œ ä»å·¥ä½œä¸­è·å¾—æ¶ˆæ¯\nä¿æŒç•…é€š ä»ä¸€äº›å…·ä½“çš„æ–°é—»äº‹ä»¶ä¸­è·å–æ¶ˆæ¯\næ–¯åŸºæ‘©æ–¯æ¸…å• å…·ä½“ä¸‹é¢çš„äº‹é¡¹å‚çœ‹é¦–é¡µ\n(case (what-would-you-like-to-do?) ((learn) (choose-from FAQ textbooks videos blogs standards tutorials bibliography other documents education)) ((program) (choose-from implementations libraries environments SRFIs)) ((socialize) (choose-from ABQ Lisp/Scheme - Albuquerque, NM, USA Chinese Lisp Users Group - China Bay Area Lisp \u0026amp; Scheme - Bay Area, CA, USA Scheme Boston and Boston Lisp Announce - Boston, MA, USA Denver Lispers - Denver, CO, USA Scheme UK - London, UK munich-lisp - Munich, Germany CRACL - Los Angeles, CA, USA Lambdaheads - Vienna, Austria FringeDC - Washington, DC, USA)) ((work) (choose-from jobs)) ((stay-informed) (choose-from events)) (else (choose-from the lighter side wares other resources))) ","date":1455430314,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1455430314,"objectID":"3b1efa8cdc6ca6a6864743dfcdab47c0","permalink":"/blog/2016/02/14/si-ji-mo-si-de-le-yuan-schemers/","publishdate":"2016-02-14T14:11:54+08:00","relpermalink":"/blog/2016/02/14/si-ji-mo-si-de-le-yuan-schemers/","section":"archives","summary":"ä½œä¸ºä¸€ä¸ªschemerï¼Œä½ å¾—å»å­¦ä¹ ï¼Œç¼–ç¨‹ï¼Œç¤¾äº¤ï¼Œå·¥ä½œï¼Œä¿æŒç•…é€šç­‰, å½“ç„¶ä½ æœ€ä¸è¯¥é”™è¿‡çš„æ˜¯æ–¯åŸºæ‘©æ–¯çš„ä¹å›­ã€‚\n","tags":null,"title":"æ–¯åŸºæ‘©æ–¯çš„ä¹å›­schemers","type":"archives"},{"authors":null,"categories":["scheme"],"content":"å®ƒçš„ä¸»è¦ä½ç”¨é€‚ç”¨äºäº§ç”Ÿexeæ–‡ä»¶ï¼Œå¹¶ä¸”å¯¹åº”äº§ç”Ÿçš„cä»£ç æ›´åŠ çš„æœ‰æ•ˆï¼Œ è¿è¡Œæ•ˆç‡è¾ƒé«˜ã€‚\näº§ç”Ÿå¯è¿è¡Œæ–‡ä»¶ è¯¥å¯è¿è¡Œçš„æ–‡ä»¶æ˜¯é€šè¿‡chickenç”Ÿæˆeggæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯cè¯­è¨€,ç„¶åç¼–è¯‘æˆæœºå™¨ä»£ç ã€‚ æ‰€ä»¥è¿è¡Œæ•ˆç‡æ›´é«˜ä¸€äº›ã€‚\n;;; hello-world.scm (print \u0026quot;Hello, world!\u0026quot;) ;;; Running it interpreted: $ csi -s hello-world.scm Hello, world! ;;; Compiling and running the executable binary: $ csc hello-world.scm $ ./hello-world Hello, world!  chicken-scheme\n","date":1455429168,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1455429168,"objectID":"1a607aa7b69ebd22337ceee4e7708d79","permalink":"/blog/2016/02/14/chicken-scheme/","publishdate":"2016-02-14T13:52:48+08:00","relpermalink":"/blog/2016/02/14/chicken-scheme/","section":"archives","summary":"å®ƒçš„ä¸»è¦ä½ç”¨é€‚ç”¨äºäº§ç”Ÿexeæ–‡ä»¶ï¼Œå¹¶ä¸”å¯¹åº”äº§ç”Ÿçš„cä»£ç æ›´åŠ çš„æœ‰æ•ˆï¼Œ è¿è¡Œæ•ˆç‡è¾ƒé«˜ã€‚\n","tags":null,"title":"chicken-scheme","type":"archives"},{"authors":null,"categories":["scheme"],"content":"The notes is published for rethinking what I am reading in the book called ã€ŠTeach Yourself Scheme in Fixnum Daysã€‹. It is a good book for introducing scheme(you\u0026rsquo;d better have read the TLS)\nForms All expression can be inducted into Forms,such as define,begin,set! forms. Before, I only said the define,begin,set! expression without forms.\nData Types  list vector procedure port (åŸæ¥portä¹Ÿæ˜¯æ•°æ®ç±»å‹çš„ä¸€ç§ï¼Œè¿™æ ·å°±å¹¶å…¥äº†æ–‡ä»¶çš„IO) å½“ç„¶ä¹ŸåŒ…æ‹¬open-string-portç›¸å½“äºåˆ›å»ºäº†fortrançš„å†…éƒ¨æ–‡ä»¶çš„ä½œç”¨ã€‚  æ‰€æœ‰çš„å½¢å¼(forms)åœ¨schemeå…¶å®éƒ½æ˜¯ä¸€ç§å¯¹äºæ•°æ®çš„representation.è¦åå¤æ€è€ƒè¿™ä¸ªè¿‡ç¨‹ã€‚\n Data abstraction divides a data type into two pieces: an interface and an implementation. The interface tells us what the data of the type represents,what the operations on the data are,and what properties these operations may be relied to have.The implementation provides a specific representation of the data and code for the operations that make use of that data representation.\n implicit and explicit lambda çš„å†…éƒ¨è‡ªå¸¦(begin \u0026hellip;)çš„ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è¿æ¥å¤šä¸ªexpressionsï¼ˆformsï¼‰ã€‚ è€Œifæ²¡æœ‰ï¼Œå¯¹åº”çš„whenï¼Œunless conditionsåˆ™æ˜¯å­˜åœ¨éšå¼çš„implicit beginçš„ä½œç”¨ã€‚ å¹¶ä¸”whenå’Œunlesså…¶å®å°±å·®åœ¨ä¸€ä¸ªnotè¡¨è¾¾å¼\n lambda implicit begin when implicit begin unless implicit begin if explicit begin  macro expansion  `(.. , \u0026hellip;) å«åšcomon å½¢å¼ `(\u0026hellip; ,@ \u0026hellip;) å«åšcomon sliceå½¢å¼  Jumps(CPS) Continuation is the special contribution of the book.\nå¾ˆå¤šå…¶ä»–çš„schemeè§£é‡Šå™¨å’Œç¼–è¯‘å™¨. Mit_scheme\n","date":1455422184,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1455422184,"objectID":"db5232f9d0f61bfe9f437b084cd5bdcd","permalink":"/blog/2016/02/14/notes-from-teach-yourself-scheme/","publishdate":"2016-02-14T11:56:24+08:00","relpermalink":"/blog/2016/02/14/notes-from-teach-yourself-scheme/","section":"archives","summary":"The notes is published for rethinking what I am reading in the book called ã€ŠTeach Yourself Scheme in Fixnum Daysã€‹. It is a good book for introducing scheme(you\u0026rsquo;d better have read the TLS)\n","tags":null,"title":"Notes from Teach yourself scheme","type":"archives"},{"authors":null,"categories":["scheme"],"content":"Data types such as list,vector,array,linkedlist,tree etc, all have the self operations to add,delete,modify the content referred.\nList (define list-sum (lambda (lst) (if (null? lst) 0 (+ (car lst) (list-sum (cdr lst)))))) (list-sum '(1 2 3 4))  Vector (define vector-sum (lambda (vec) (define vector-sum-help (lambda (vec n) ;(if (eq? n 0) (if (zero? n) (vector-ref vec 0) (+ (vector-ref vec n) (vector-sum-help vec (- n 1)))))) (let ((n (vector-length vec))) (if (zero? n) 0 (vector-sum-help vec (- n 1)))))) ;;;wrong (n) (vector-sum (vector 1 2 3 4))  The box function in the TSS box çš„ä½œç”¨è™½ç„¶æœ‰ç‚¹ç±»ä¼¼ kons kar kdr (define kons (lambda (kar kdr) (lambda (selector) (selector kar kdr)))) (define kar (lambda (c) (c (lambda (a d) a)))) (define kdr (lambda (c) (c (lambda (a d) d)))) (define kdr2 (lambda (c) (c (lambda (a d) (quote d))))) (kar (kons 'a 'b)) (kdr (kons 'a 'b)) (kdr2 (kons 'a 'b))  Now let's see the function of the box.  (define (box it) (lambda (sel) (sel it (lambda (new) (set! it new))))) (define (setbox box new) (box (lambda (it set) (set new)))) (define (unbox box) (box (lambda (it set) it)))  æˆ‘ä»¬ä½¿ç”¨çš„å‰ææ˜¯é€šè¿‡boxè¿›è¡Œconsçš„ä½œç”¨ æ¯”å¦‚setbox   ((lambda (it set) (set new)) it (lambda (new) (set! it new)))  ä¹Ÿå°±æ˜¯ itå¯¹ä¸€ä¸ªit è€Œsetå¯¹åº” (lambda (new) (set! it new)) æ‰€ä»¥è¿™è¾¹çœŸæ­£èµ·ä½œç”¨çš„å°±æ˜¯ç¬¬ä¸€ä¸ªlambdaé‡Œé¢çš„(set new)è¿”å›å€¼ æ¯”å¦‚unbox\n ((lambda (it set) it) it (lambda (new) (set! it new)))  ä¹Ÿå°±æ˜¯æ­¤æ—¶ itä¾ç„¶å¯¹åº”it setå¯¹åº”çš„æ˜¯(lambda (new) (set! it new)) æ‰€ä»¥è¿™è¾¹çœŸæ­£èµ·ä½œç”¨çš„å°±æ˜¯ç¬¬ä¸€ä¸ªlambdaé‡Œé¢çš„itè¿”å›å€¼\næ‰€ä»¥boxåªä¸è¿‡æ˜¯æä¾›äº†ä¸€ç§æ˜ å°„ç»“æ„ï¼Œæƒ³åˆ°é‚£å…³äºæ•°æ®ç»“æ„çš„åˆ›å»ºï¼ŒæŠŠæ‰€æœ‰çš„åŸºäºè¿™ä¸ªæ¡†æ¶çš„ å˜ä½“æ”¾å…¥é¦–ä¸ªä½ç½®ï¼Œç±»ä¼¼closureçš„tableä½ç½® ","date":1455341586,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1455341586,"objectID":"585370f036276f83d1a85eb1fa2dd99b","permalink":"/blog/2016/02/13/different-data-types-decide-the-different-operations/","publishdate":"2016-02-13T13:33:06+08:00","relpermalink":"/blog/2016/02/13/different-data-types-decide-the-different-operations/","section":"archives","summary":"Data types such as list,vector,array,linkedlist,tree etc, all have the self operations to add,delete,modify the content referred.\n","tags":null,"title":"Different data types decide the different operations","type":"archives"},{"authors":null,"categories":["scheme"],"content":"All programs are data. All intepreters are program. All Handware and software,or type checkers etc are interpreter.\nI think data conceives the soul,not only the fixed process,but changing vari-language.\n 1.The Little Scheme interpreter 2.The Season Scheme interpreter 3.The CPS control struture  3.1 how to add arguments? 3.2 what is the small stuff?  4. how to evaluate or interpreter a procedre?  4.1 ordinary tracing 4.2 cps tracing  5. It is not the end  The Little Scheme Here below is the interpreter from TLS\n#lang racket ;;ç®€å•ç¯å¢ƒé…ç½® (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) ;ç¬¬ä¸€å¤§éƒ¨åˆ† å®šä¹‰å¥½æ•´ä½“æ¡†æ¶ (define value (lambda (e) (meaning e (quote ())))) (define meaning (lambda (e table) ((expression-to-action e) e table))) ;;ç¬¬äºŒå¤§éƒ¨åˆ† è§£æatom and list action (define expression-to-action (lambda (e) (cond ((atom? e) (atom-to-action e)) (else (list-to-action e))))) (define atom-to-action (lambda (e) (cond ((number? e) *const) ((eq? e #t) *const) ((eq? e #f) *const) ((eq? e (quote cons)) *const) ((eq? e (quote car)) *const) ((eq? e (quote cdr)) *const) ((eq? e (quote null?)) *const) ((eq? e (quote eq?)) *const) ((eq? e (quote atom?)) *const) ((eq? e (quote zero?)) *const) ((eq? e (quote add1)) *const) ((eq? e (quote sub1)) *const) ((eq? e (quote number?)) *const) (else *identifier)))) (define list-to-action (lambda (e) (cond ((atom? (car e)) (cond ((eq? (car e) (quote quote)) *quote) ((eq? (car e) (quote lambda)) *lambda) ((eq? (car e) (quote cond)) *cond) (else *application))) (else *application)))) ;; ç¬¬ä¸‰å¤§éƒ¨åˆ† å®šä¹‰ 6æ˜Ÿ==5ä¸ªspecial forms å’Œä¸€ä¸ªgeneral formsï¼ˆ*application) ;;;ç¯å¢ƒé¢å¤–é…ç½® è¿™äº›é…ç½®ä»…ä»…æ˜¯ä¸ºäº†å¢åŠ å¯è¯»æ€§ æ— ä»»ä½•ç¼–ç¨‹æŠ€å·§ (define first (lambda (p) (cond (else (car p))))) (define second (lambda (p) (cond (else car (cdr p))))) (define third (lambda (p) (cond (else car (cdr (cdr p)))))) (define text-of second) ;; *identifier (define table-of first) (define formals-of second) (define body-of third) ;;*cond (define question-of first) (define answer-of second) (define cond-lines-of cdr) ;;*application (define function-of car) (define arguments-of cdr) (define build (lambda (s1 s2) (cond (else (cons s1 (cons s2 (quote ()))))))) ;;1st star (define *const (lambda (e table) (cond ((number? e) e) ((eq? e #t) #t) ((eq? e #f) #f) (else (build (quote primitive) e))))) ;;2nd star (define *quote (lambda (e table) (text-of e))) ;;3rd star (define *lambda (lambda (e table) (build (quote non-primitive) (cons table (cdr e))))) ;;4th star (define *identifier (lambda (e table) (lookup-in-table e table initial-table))) (define initial-table (lambda (name) (car (quote ())))) (define lookup-in-table (lambda (name table table-f) (cond ((null? table) (table-f name)) (else (lookup-in-entry name (car table) ; (lambda (name) ; (cdr table) ; (table-f))))))) (lambda (name) (lookup-in-table name (cdr table) table-f))))))) (define lookup-in-entry (lambda (name entry entry-f) (lookup-in-entry-help name (first entry) (second entry) entry-f))) (define lookup-in-entry-help (lambda (name names values entry-f) (cond ((null? names) (entry-f name)) ((eq? (car names) name) (car values)) (else (lookup-in-entry-help name (cdr names) (cdr values) entry-f))))) ;; 5th star (define *cond (lambda (e table) (evcon (cond-lines-of e) table))) (define evcon (lambda (lines table) (cond ((else? (question-of (car lines))) (meaning (answer-of (car lines)) table)) ((meaning (question-of (car lines)) table) (meaning (answer-of (car lines)) table)) (else (evcon (cdr lines) table))))) (define else? (lambda (x) (cond ((atom? x) (eq? x (quote else))) (else #f)))) ;;6th star ä½ éœ€è¦è§£æargumentsçš„å„ä¸ªéƒ¨åˆ†è¿™æ˜¯evlisçš„å·¥ä½œ (define *application (lambda (e table) (apply (meaning (function-of e) table) (evlis (arguments-of e) table)))) (define evlis (lambda (args table) (cond ((null? args) (quote ())) (else (cons (meaning (car args) table) (evlis (cdr args) table)))))) ;;ç¬¬å››å¤§éƒ¨åˆ† è¿›è¡Œ applyçš„å®šä¹‰ åå‘è¿ç”¨primitiveå’Œnon-primitive å»é™¤æ ¸å¿ƒçš„primitiveå’Œnon-primitiveå‰ç¼€ï¼Œå¹¶å‡çº§ç¯å¢ƒ (define apply (lambda (fun vals) (cond ((primitive? fun) (apply-primitive (second fun) vals)) ((non-primitive? fun) (apply-closure (second fun) vals))))) (define primitive? (lambda (l) (eq? (first l) (quote primitive)))) (define non-primitive? (lambda (l) (eq? (first l) (quote non-primitive)))) (define apply-primitive (lambda (name vals) (cond ((eq? name (quote cons)) (cons (first vals) (second vals))) ((eq? name (quote car)) (car (first vals))) ((eq? name (quote cdr)) ((eq? name (quote cdr)) (cdr (first vals))) ((eq? name (quote null?)) (null? (first vals))) ((eq? name (quote eq?)) (eq? (first vals) (second vals))) ((eq? name (quote atom?)) (:atom? (first vals))) ((eq? name (quote zero?)) (zero? (first vals))) ((eq? name (quote add1)) (add1 (first vals))) ((eq? name (quote sub1)) (sub1 (first vals))) ((eq? name (quote number?)) (number? (first vals))))))) (define :atom? (lambda (x) (cond ((atom? x) #t) ((null? x) #f) ((eq? (car x) (quote primitive)) #t) ((eq? (car x) (quote non-primitive)) #t) (else #f)))) ;;closure=table+arguments+body ;;arguments é€šè¿‡formals-ofè·å– body-ofè·å–body (define apply-closure (lambda (closure vals) (meaning (body-of closure) (extend-table (new-entry (formals-of closure) vals) (table-of closure))))) (define new-entry build) (define extend-table cons) ;;æµ‹è¯•è¿™ä¸ªè§£é‡Šå™¨ ;(value (cons (* (+ 1 3) 4) 'hello)) ;;ä¸é€šè¿‡ (value (+ 2 4)) (value (* 15 (+ 2 4))) ;;(value (cons (quote (* (+ 1 3) 4)) (cons 'h '()))) ;;æµ‹è¯•ä¸é€šè¿‡  The Season scheme Here below is the interpreter from TLS\n#lang racket ;; The Seasoned Schemer ;; chapter 20 ;; What's in Store ? (define abort '()) (define global-table '()) (define (add1 n) (+ n 1)) (define (sub1 n) (- n 1)) (define (atom? a) (and (not (pair? a)) (not (null? a)))) (define (text-of x) (cadr x)) (define (formals-of x) (cadr x)) (define (body-of x) (cddr x)) (define (ccbody-of x) (cddr x)) (define (name-of x) (cadr x)) (define (right-side-of x) (if (null? (cddr x)) 0 (caddr x))) (define (cond-lines-of x) (cdr x)) (define (else? x) (if (atom? x) (eq? x 'else) #f)) (define (question-of x) (car x)) (define (answer-of x) (cadr x)) (define (function-of x) (car x)) (define (arguments-of x) (cdr x)) (define (lookup table name) (table name)) (define (extend name1 val table) (lambda (name2) (if (eq? name1 name2) val (table name2)))) (define (define? e) (eq? (and (pair? e) (car e)) 'def)) (define (*define e) (set! global-table (extend (name-of e) (box (the-meaning (right-side-of e))) global-table))) (define (box it) (lambda (sel) (sel it (lambda (new) (set! it new))))) (define (setbox box new) (box (lambda (it set) (set new)))) (define (unbox box) (box (lambda (it set) it))) (define (the-meaning e) (meaning e lookup-in-global-table)) (define (lookup-in-global-table name) (lookup global-table name)) (define (meaning e table) ((expression-to-action e) e table)) (define (*quote e table) (text-of e)) (define (*identifier e table) (unbox (lookup table e))) (define (*set e table) (setbox (lookup table (name-of e)) (meaning (right-side-of e) table))) (define (*lambda e table) (lambda (args) (beglis (body-of e) (multi-extend (formals-of e) (box-all args) table)))) ;; (define (beglis es table) ;; (cond ;; ((null? (cdr es)) ;; (meaning (car es) table)) ;; (else ((lambda (val) ;; (beglis (cdr es) table)) ;; (meaning (car es) table))))) ;; (define (beglis es table) ;; (let ((m (meaning (car es) table))) ;; (if (null? (cdr es)) ;; m ;; ((lambda (val) ;; (beglis (cdr es) table)) m)))) ;; (define (beglis es table) ;; (let ((m (meaning (car es) table))) ;; (if (null? (cdr es)) ;; m ;; (let ((val m)) ;; (beglis (cdr es) table))))) (define (beglis es table) (let ((m (meaning (car es) table)) (d (cdr es))) (if (null? d) m (beglis d table)))) ;; (define (box-all vals) ;; (if (null? vals) ;; '() ;; (cons (box (car vals)) ;; (box-all (cdr vals))))) ;; (define (box-all vals) ;; (letrec ;; ((rec ;; (lambda (vals acc) ;; (if (null? vals) ;; acc ;; (rec (cdr vals) ;; (cons (box (car vals)) acc)))))) ;; (rec (reverse vals) '()))) (define (box-all vals) (let loop ((vals (reverse vals)) (acc '())) (if (null? vals) acc (loop (cdr vals) (cons (box (car vals)) acc))))) (define (multi-extend names vals table) (if (null? names) table (extend (car names)(car vals) (multi-extend (cdr names)(cdr vals) table)))) (define (*application e table) ((meaning (function-of e) table) (evlis (arguments-of e) table))) ;; (define (evlis args table) ;; (if (null? args) ;; '() ;; ((lambda (val) ;; (cons val ;; (evlis (cdr args) table))) ;; (meaning (car args) table)))) ;; (define (evlis args table) ;; (if (null? args) ;; '() ;; (cons (meaning (car args) table) ;; (evlis (cdr args) table)))) ;; (define (evlis args table) ;; (letrec ;; ((rec ;; (lambda (args table acc) ;; (if (null? args) ;; acc ;; (rec (cdr args) ;; table ;; (cons (meaning (car args) table) ;; acc)))))) ;; (rec (reverse args) table '()))) (define (evlis args table) (let loop ((args (reverse args)) (table table) (acc '())) (if (null? args) acc (loop (cdr args) table (cons (meaning (car args) table) acc))))) (define (a-prim p) (lambda (args-in-a-list) (p (car args-in-a-list)))) (define (b-prim p) (lambda (args-in-a-list) (p (car args-in-a-list) (cadr args-in-a-list)))) (define (*const e table) (cond ((number? e) e) ((eq? e #t) #t) ((eq? e #f) #f) ((eq? e 'cons)(b-prim cons)) ((eq? e 'car )(a-prim car)) ((eq? e 'cdr)(a-prim cdr)) ((eq? e 'eq?)(b-prim eq?)) ((eq? e 'atom?)(a-prim atom?)) ((eq? e 'null?)(a-prim null?)) ((eq? e 'zero?)(a-prim zero?)) ((eq? e 'add1)(a-prim add1)) ((eq? e 'sub1)(a-prim sub1)) ((eq? e 'number)(a-prim number?)))) (define (*cond e table) (evcon (cond-lines-of e) table)) (define (evcon lines table) (cond ((else? (question-of (car lines))) (meaning (answer-of (car lines)) table)) ((meaning (question-of (car lines)) table) (meaning (answer-of (car lines)) table)) (else (evcon (cdr lines) table)))) (define (*letcc e table) (let/cc skip (beglis (ccbody-of e) (extend (name-of e) (box (a-prim skip) table))))) (define (value e) (let/cc the-end (set! abort the-end) (if (define? e) (*define e) (the-meaning e)))) (define (the-empty-table name) (abort (cons 'no-answer (cons name '())))) (define (expression-to-action e) (if (atom? e) (atom-to-action e) (list-to-action e))) (define (atom-to-action e) (cond ((number? e) *const) ((eq? e #t) *const) ((eq? e #f) *const) ((eq? e 'cons) *const) ((eq? e 'car) *const) ((eq? e 'cdr) *const) ((eq? e 'null?) *const) ((eq? e 'eq?) *const) ((eq? e 'atom?) *const) ((eq? e 'zero?) *const) ((eq? e 'add1) *const) ((eq? e 'sub1) *const) ((eq? e 'number?) *const) (else *identifier))) (define (list-to-action e) (let ((a (car e))) (if (atom? a) (let ((prim-of? (lambda (x) (eq? x a )))) (cond ((prim-of? 'quote) *quote) ((prim-of? 'lambda) *lambda) ((prim-of? 'letcc) *letcc) ((prim-of? 'set!) *set) ((prim-of? 'cond) *cond) (else *application))) *application))) (set! global-table (lambda (name) (the-empty-table name))) (value (cons 'a 'b)) (value (+ (- 3 2) 6))  The CPS control struture Here below is the method how to change the ordinary subroutine to the continuation passing style Ref..\n First rule: whenever we see a lambda in the code we want to CPS, we have to add an argument, and then process the body\n Second rule: \u0026ldquo;Don\u0026rsquo;t sweat the small stuff!\u0026rdquo;  how to add argument?  orignial style:\n(define rember8 (lambda (ls) (cond [(null? ls) '()] [(= (car ls) 8) (cdr ls)] [else (cons (car ls) (rember8 (cdr ls)))])))  incompleted cps style:\n(define rember8 (lambda (ls k) (cond [(null? ls) '()] [(= (car ls) 8) (cdr ls)] [else (cons (car ls) (rember8 (cdr ls)))])))   what is the small stuff? Small stuff is stuff we know will terminate right away. Don\u0026rsquo;t sweat the small stuff if we know it will be evaluated. Don\u0026rsquo;t sweat the small stuff if it might be evaluated, but instead pass it to k.\nä¸ºäº†æ›´å¥½è¾¨åˆ«ï¼Œæˆ‘ä»¬æ”¹ä¸ºå¦‚ä¸‹å½¢å¼\n(define rember8 (lambda (ls k) (cond [(null? ls) (*k* '())] [(= (car ls) 8) (*k* (cdr ls))] [else (*rember8* (cdr ls) (lambda (x) (*k* (cons (car ls) x))))])))  å‡¡æ˜¯åŠ ä¸Š*å·çš„ï¼Œéƒ½ä»£è¡¨è€…continuationçš„è¿‡ç¨‹ã€‚ Why don\u0026rsquo;t null?, =, car, cdr, and cons count? Because they\u0026rsquo;re just small stuff, and when we combine small stuff together in small ways, the combination remains small.\nSecond, all arguments are small stuff. Yep, even the lambda in the else line, because lambda is *always* small stuff.   complete cps style:\n(define rember8 (lambda (ls k) (cond [(null? ls) (k '())] [(= (car ls) 8) (k (cdr ls))] [else (rember8 (cdr ls) (lambda (x) (k (cons (car ls) x)))])))   how to evaluate or interpreter a procedre? ordinary tracing we will develop a unimplemented language to do give an explanation to it.\nHere below is the main language(we can change it ,but now it is not the main cause.)\n;1 eval (define eval (lambda (Exp Env ) (cond ((number? Exp) Exp) ((symbol? Exp) (looking Exp Env)) ((eq? (car Exp) 'QUADE) (cadr Exp)) ((eq? (car Exp) 'lambda) (list 'Closure (cdr Exp) Env)) ((eq? (car Exp) 'Cond) ï¼ˆEvcond (cadr Expï¼‰ Env)) (else (apply (eval (car Exp) Env) (Evlist (cdr Exp) Env)))))) ;2 apply (define apply (lambda (PROC ARGS) (cond ((primitive? PROC) (Apply-primitive Proc ARGS)) ((EQ? (car proc) 'closure) (EVAL (cadadr proc) (Bind (caadr proc) ARGS (Caddr proc)))) (else error))))) ;;;Attention, primitvie? apply-primitive is not finished ;3 Evlist (define Evlist (lambda (l Env) (cond ((eq? (car l) '()) '()) (else (cons (eval (car l) Env) (eval (cdr l) Env)))))) ;4 Evcond (define Evcond (lambda (clauses Env) (cond ((eq? clauses '()) '()) ((eq? (caar clauses) 'else) (eval (cadar clauses) Env)) ((false? (Eval (caar clauses) Env)) (Evcond (cdr clauses) Env)) (else (Eval (cadar clauses) Env))))) ;;;Attention false? is not finished. ;5 looking (define looking (lambda (sym env) (cond ((eq? env '()) (error 'unbound-value)) (else ((lambda (vcell) (cond ((eq? vcell '()) (looking sym (cdr env))) (else (cdr vcell)))) (assq sym (car env))))))) ;6 assq (define assq (lambda (syms alist) (cond ((eq? alist '()) '()) ((eq? syms (caar alist)) (car alist)) (else (assq syms (cdr alist)))))) ;7 Bind (define Bind (lambda (vars vals Env) (cons (pair-up vars vals) env))) ;8 Pair-up (define Pair-up (lambda (vars vals) (cond ((eq? vars '()) (cond ((eq? vals? '()) '()) (else (error 'Too-much-arguments)))) ((eq? vals '()) (error 'Too-few-arguments)) (else (cons (cons (car vars) (car vals)) (pair-up (cdr vars) (cdr vals))))))  So now we can use the language below to interpret the form\n(eval '(((lambda (xï¼‰ï¼ˆlambda (y) (+ x y))) 3) 4) e0)  Good explanation begin(kernal part)ï¼š\n (apply (eval '((lambda (x) (lambda (y) (+ x y))ï¼‰ 3ï¼‰ e0) (Evlist '(4) e0)) (apply (eval '((lambda (x) (lambda (y) (+ x y))ï¼‰ 3ï¼‰ e0) ï¼ˆcons (eval '(4) e0) (evlist '() e0))) (apply (eval '((lambda (x) (lambda (y) (+ x y))ï¼‰ 3ï¼‰ e0) ï¼ˆcons 4 '())) (apply (eval '((lambda (x) (lambda (y) (+ x y))ï¼‰ 3ï¼‰ e0) '(4)) (apply (apply (eval '(lambda (x) (lambda (y) (+ x y)) e0) '(3) ) '(4)) (apply (apply '(closure ((x) (lambad (y) (+ x y))) e0) '(3) ) '(4)) (apply (eval (lambda (y) (+ x y)) e1) '(4)) (apply '(closure ((y) (+ x y)) e1) '(4)) (eval '(+ x y) e2) (apply (Eval '+ e2) (Evlist '(x y) e2)) (apply '(add0101) '(3 4)) ;add0101 is the assemble executable binary code(speed fast) ï¼ˆ+ 3 4ï¼‰ = 7  Finished~ Good ~ Well done.\ncps tracing Let's trace (rember8 (lambda (x) x)) ls | k '(1 2 8 3 4 6 7 8 5) | (lambda (x) x) = id '(2 8 3 4 6 7 8 5) | (lambda (x) (id (cons 1 x))) = k2 '(8 3 4 6 7 8 5) | (lambda (x) (k2 (cons 2 x))) = k3 Once we hit the 8, we apply (k (cdr ls)) where k is k3 and ls is '(8 3 4 6 7 8 5) (k3 '(3 4 6 7 8 5)) = (k2 (cons 2 '(3 4 6 7 8 5))) (k2 '(2 3 4 6 7 8 5)) = (id (cons 1 '(2 3 4 6 7 8 5))) (id '(1 2 3 4 6 7 8 5)) = '(1 2 3 4 6 7 8 5) And we're done.  It is not the end how to change the procedure above? Leave to you.\n","date":1455031218,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1455031218,"objectID":"0cac98d749871e545ed01c4bd0ad1684","permalink":"/blog/2016/02/09/its-a-dead-program-dot-how-to-let-it-alive/","publishdate":"2016-02-09T23:20:18+08:00","relpermalink":"/blog/2016/02/09/its-a-dead-program-dot-how-to-let-it-alive/","section":"archives","summary":"All programs are data. All intepreters are program. All Handware and software,or type checkers etc are interpreter.\nI think data conceives the soul,not only the fixed process,but changing vari-language.\n","tags":null,"title":"It's a dead program.How to let it alive?","type":"archives"},{"authors":null,"categories":["Lisp"],"content":"As you all know we can use defun to define a function in the common lisp,\n(defun add (x) (+ x 1)) (defun foo (a b c) (list a b c))  Definition above is the most essential method to create a function. Due to the\nconvience we will have to think about the variables and functions again.\nWriting thinking path: from thinking the variables to functions and get the knowledge of the common lisp.\nI. Variables We we execute one function ,we should let the interpreter know:\n call the Mac first? or call the compiler first? Mac will not get the value of the variables ,but change the expression to another forms But compiler will directly get the value of the variables.  Variables can be shown with \u0026amp;key,\u0026amp;optional,\u0026amp;rest,\u0026amp;body forms etc.\nkeyword variables The variables start with colon( it means :) is the keyword variables, but there are exception,\nsuch as in the defsystem(asdf grammer), you can depends on other system (depends on :macro-utilities)\nhere macro-utilities is called as a system,not the keyword variables.\n(defun foo (\u0026amp;key a (b 20) (c 30 c-p)) (list a b c c-p))  optional variables (defun foo (a \u0026amp;optional (b 20) (c 30 c-p)) ;;c-supplied-p (list a b c c-p)) ;; it means the variables b and c is optional ,if b is not written in the ;; the parameter list, the interpreter will set b = 20,similary c. (defun make-rectangle (width \u0026amp;optional (height width)) ...) ;;; the rectangle will set height =width when height is not supplied. (defun foo (a \u0026amp;optional (b 20) (c 30 c-supplied-p)) (list a b c c-supplied-p))  rest variables (defun format (stream string \u0026amp;rest values) ...) (defun + (\u0026amp;rest numbers) ...) (defmacro when (condition \u0026amp;rest body) `(if (not ,condition) (progn ,@body) ;; The difference between , and ,@ in the `() is ,@ will delete the brace more than once ;; (if condition then-part [else-part]) )  body variables  macro definition I think Mac(Macro-\u0026gt; defmacro) is a form to change the input of the variables.Actually it is\nmost powerful tool in the lisp programming\n(format t \u0026quot;hello world\u0026quot;) (defun backwords (str) (reverse str)) (backwords (\u0026quot;hello world\u0026quot; t format)) ;; take care not (backwords '(\u0026quot;hello world\u0026quot; t format))  So when you execute the backwords macro, the interpreter will tell the Mac to do the works.\nWhen he finished his work. The compiler will continue execute the result of the Mac. That\nis the process of the macro function.\nII. Functions Orient Object Programming\u0026rsquo;s CLOS is to tell you how to rearrange the functions and variables into one class.\n III. Format function format is a most powerful decorate function to output in the common lisp.\nso every field in the format function , you should take note ~ ,such as ~a, ~{~}, ~%, ~:a, ~r,~d etc\n added-later\n","date":1446369983,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1446369983,"objectID":"e40db4436f8851d84219577c75dcf8ac","permalink":"/blog/2015/11/01/think-in-the-variable-and-macro-in-the-common-lisp/","publishdate":"2015-11-01T17:26:23+08:00","relpermalink":"/blog/2015/11/01/think-in-the-variable-and-macro-in-the-common-lisp/","section":"archives","summary":"As you all know we can use defun to define a function in the common lisp,\n(defun add (x) (+ x 1)) (defun foo (a b c) (list a b c))  Definition above is the most essential method to create a function. Due to the\nconvience we will have to think about the variables and functions again.\nWriting thinking path: from thinking the variables to functions and get the knowledge of the common lisp.\n","tags":null,"title":"Think in the variable and macro in the common lisp","type":"archives"},{"authors":null,"categories":["life"],"content":"ç»å¸¸æ—¶ä¸æ—¶åœ°å›å»é€›ç‹å çš„åšå®¢ï¼Œæ¥è§¦å®ƒå¹¶ä¸æ˜¯å› ä¸ºä»–ç‰¹ç«‹ç‹¬è¡Œï¼Œä»–ä»æ¸…åé€€å­¦ï¼Œä¸»è¦æ˜¯ åœ¨é€šè¿‡ä»–ï¼Œè®¤è¯†äº†schemeçš„ç®€å•å’Œå¼ºå¤§ï¼Œå½“ç„¶è¿™ä¸æ˜¯æœ¬æ–‡çš„ä¸»é¢˜ã€‚\nå½“ç„¶ä¹Ÿæ˜¯å› ä¸ºä»–åœ¨å…¶åšæ–‡ä»‹ç»äº†The Design of Everyday Things.è¿™æœ¬ä¹¦çš„ç¡®å¯¹æˆ‘å¾ˆæœ‰å¯å‘,è¿™æ˜¯ä¸€æœ¬è®©ä½ ä»¥äººä¸ºæœ¬çš„è®¾è®¡ä¹¦ï¼Œç¨‹åºå‘˜ä¹Ÿéœ€è¦ç»å¸¸é˜…è¯»ã€‚\nçŸ¥è¯†åˆ†ä¸ºå¤–åœ¨çŸ¥è¯†(Knowledge in the world)å’Œå†…åœ¨çŸ¥è¯†(Knowledge in the head).\næˆ‘ä»¬æ¯å¤©å¯èƒ½å¸¦ç€ç›®çš„(goal)|é—®é¢˜(problem),å—åˆ°worldçš„å½±å“(1.signifier:ä¿¡å· æ¯”å¦‚ç¯å…‰ã€é¢œè‰² 2.Constraintsç‰©ç†çº¦æŸ,æ–‡åŒ–çº¦æŸç­‰ 3.Natural Mapping æ­£å¸¸çš„è‡ªç„¶ç°è±¡), æ¥è§‚å¯Ÿæˆ‘ä»¬åœ¨å¹²ä»€ä¹ˆï¼Œå¾—åˆ°ä»€ä¹ˆï¼Œäº¦æˆ–è€…ä»ä¸­å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ä»è€Œè·å¾—å¼€å¿ƒã€å¹¸ç¦ã€‚\nè¿™æ˜¯è¿™æœ¬ä¹¦ç»™æˆ‘çš„æ„Ÿè§‰ã€‚å½“ç„¶è¿›ä¸€æ­¥åœ°ä½ å¯ä»¥ç»§ç»­å»é˜…è¯»ä»–ã€‚\nç²—ç•¥æ„Ÿè§‰ 1. Goal 2. Plan 7. Perceive 3. Specify 6. Interpret 4. Perform 5. Perceive\nStage 2-4 is called execute stage (Feedforward process)\nStage 5-7 is called evaluation stage (Feedback process)\n2 and 7 is called Reflective Brain Conscious Control Processing\n3 and 6 is called Behavioral Brain Conscious Control Processing\n4 and 5 is called Visceral without Brain Processing(Muscles and your sense)\nè€Œä»Šå¤©çœ‹åˆ°äº†ä¸­å›½å¼æ„Ÿè§‰çš„è§£é‡Šå¦‚ä½•åšäº‹æƒ….\n è®¤æ¸…æ¥šè¿™ä»¶äº‹æƒ…ï¼› åˆ†æä¸è¿™ä»¶äº‹æƒ…æœ‰å…³çš„ä¸€åˆ‡çš„ä¸€åˆ‡ï¼› åˆ¶å®šåšå¥½è¿™ä»¶äº‹æƒ…çš„è®¡åˆ’ï¼› å®æ–½è®¡åˆ’ï¼› éªŒè¯è¿™ä»¶äº‹æƒ…çš„ç»“æœï¼›  æˆ‘ä»¬å¯ä»¥ç®€åŒ–ä¸ºï¼š\n è®¤å®šä½ çš„äº‹æƒ… åšå®ƒ æ£€éªŒ ","date":1445689855,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1445689855,"objectID":"ed80391f78633b68e2139d3f28d38279","permalink":"/blog/2015/10/24/zhong-guo-ban-de-the-design-of-everyday-things/","publishdate":"2015-10-24T20:30:55+08:00","relpermalink":"/blog/2015/10/24/zhong-guo-ban-de-the-design-of-everyday-things/","section":"archives","summary":"ç»å¸¸æ—¶ä¸æ—¶åœ°å›å»é€›ç‹å çš„åšå®¢ï¼Œæ¥è§¦å®ƒå¹¶ä¸æ˜¯å› ä¸ºä»–ç‰¹ç«‹ç‹¬è¡Œï¼Œä»–ä»æ¸…åé€€å­¦ï¼Œä¸»è¦æ˜¯ åœ¨é€šè¿‡ä»–ï¼Œè®¤è¯†äº†schemeçš„ç®€å•å’Œå¼ºå¤§ï¼Œå½“ç„¶è¿™ä¸æ˜¯æœ¬æ–‡çš„ä¸»é¢˜ã€‚\nå½“ç„¶ä¹Ÿæ˜¯å› ä¸ºä»–åœ¨å…¶åšæ–‡ä»‹ç»äº†The Design of Everyday Things.è¿™æœ¬ä¹¦çš„ç¡®å¯¹æˆ‘å¾ˆæœ‰å¯å‘,è¿™æ˜¯ä¸€æœ¬è®©ä½ ä»¥äººä¸ºæœ¬çš„è®¾è®¡ä¹¦ï¼Œç¨‹åºå‘˜ä¹Ÿéœ€è¦ç»å¸¸é˜…è¯»ã€‚\n","tags":null,"title":"ä¸­å›½ç‰ˆçš„The Design Of Everyday Things","type":"archives"},{"authors":null,"categories":["Linux"],"content":"é€šè¿‡Bash_Itçš„å­¦ä¹ ï¼Œç¬¬ä¸€æ¬¡æ„è¯†åˆ°Shellæ•°ç»„çš„ä¸ä¸€æ ·çš„å†™æ³•ã€‚ å¹¶ä¸”ä¹Ÿçœ‹åˆ°Pattern Matchçš„ä¸€äº›ç”¨é€”ã€‚\n1 Array 1.1 Bashæ•°ç»„å®šä¹‰ é€šè¿‡(1,2,3)åŒºåˆ†äºfortranè¯­è¨€çš„(/1,2,3/).\nbash1=(34,5,6,4)\nbash2=(\u0026ldquo;34\u0026rdquo;,\u0026ldquo;5\u0026rdquo;,\u0026ldquo;5\u0026rdquo;,\u0026ldquo;4\u0026rdquo;)\n1.2 Bashå…³è”æ•°ç»„å®šä¹‰ é€šè¿‡ -Aå¼€å…³é€‰é¡¹å®šä¹‰ä¸€ä¸ªå…³è”æ•°ç»„ã€‚\ndeclare -A bash1\nbash1[\u0026ldquo;34\u0026rdquo;]=\u0026ldquo;53\u0026rdquo;\nbash1[\u0026ldquo;56\u0026rdquo;]=\u0026ldquo;45\u0026rdquo;\ndeclare -A array for subscript in a b c d e do array[$subscript]=\u0026quot;$subscript $RANDOM\u0026quot; done  ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œä½¿ç”¨\n a=($(ls)) #è€Œä¸æ˜¯a=$(ls) #è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ ${a[1]}  1.3 Bashæ•°ç»„æ·»åŠ æ•°æ® bash1+=\u0026ldquo;54\u0026rdquo;\n1.4 Bashæ•°ç»„æ˜¾ç¤ºæ•°æ®å’Œä¾¿åˆ© ##å•ä¸ªæ˜¾ç¤º printf \u0026quot;%s\\n\u0026quot; \u0026quot;${array[\u0026quot;c\u0026quot;]}\u0026quot; ##éå† printf \u0026quot;%s\\n\u0026quot; \u0026quot;${array[@]}\u0026quot; printf \u0026quot;%s\\n\u0026quot; \u0026quot;${array[*]}\u0026quot;  1.5 æ‹“å±•çš„æ“ä½œ #è¡¨ç¤ºé•¿åº¦çš„ä½œç”¨\n ${#array2} ç°å®ç¬¬äºŒä¸ªæ•°ç»„å…ƒç´ çš„é•¿åº¦ ${#array[@]} æ˜¾ç¤ºå…¨éƒ¨æ•°ç»„å…ƒç´ çš„é•¿åº¦ ${#array[*]} æ˜¾ç¤ºå…¨éƒ¨æ•°ç»„å…ƒç´ çš„é•¿åº¦ ${#array[@]:2:3} è·å–ç¬¬2ä¸ªåˆ°3ä¸ªçš„é•¿åº¦ ${!array[@]} !çš„ä½œç”¨æ˜¯ç°å®æ‰€æœ‰çš„keyåœ¨æ•°ç»„å½“ä¸­ã€‚  è¿›ä¸€æ­¥å‚è€ƒ\npro_Bash_programmingç¬¬äº”ç«  arrayéƒ¨åˆ†\n2. PATTERN MATCH ?(pattern-list) Matches zero or one occurrence of the given patterns *(pattern-list) Matches zero or more occurrences of the given patterns +(pattern-list) Matches one or more occurrences of the given patterns @(pattern-list) Matches one of the given patterns !(pattern-list) Matches anything except one of the given patterns  æ¯”å¦‚ï¼š\n $ ls +(ab|def)*+(.jpg|.gif)  è¿›ä¸€æ­¥å‚è€ƒ lsä½¿ç”¨PATTERN-MATCH\nLinuxåŸºç¡€èµ„æ–™å‚è€ƒ\nGNUå®˜ç½‘\né¸Ÿå“¥è®ºå›\nLinux_About\nCN_Blogsçš„ä¸€ä¸ªæ”¶é›†\n3 äº‹æƒ…æµç¨‹  è®¤å®šä½ çš„äº‹æƒ… åš æ£€éªŒ  æ‹“å±•ä¸º:\n è®¤æ¸…æ¥šè¿™ä»¶äº‹æƒ…ï¼› åˆ†æä¸è¿™ä»¶äº‹æƒ…æœ‰å…³çš„ä¸€åˆ‡çš„ä¸€åˆ‡ï¼› åˆ¶å®šåšå¥½è¿™ä»¶äº‹æƒ…çš„è®¡åˆ’ï¼› å®æ–½è®¡åˆ’ï¼› éªŒè¯è¿™ä»¶äº‹æƒ…çš„ç»“æœï¼› ","date":1445672217,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1445672217,"objectID":"550daac43f442ddea5c4e8c27e21b51b","permalink":"/blog/2015/10/24/bash-array-he-tuo-zhan-de-pattern-match/","publishdate":"2015-10-24T15:36:57+08:00","relpermalink":"/blog/2015/10/24/bash-array-he-tuo-zhan-de-pattern-match/","section":"archives","summary":"é€šè¿‡Bash_Itçš„å­¦ä¹ ï¼Œç¬¬ä¸€æ¬¡æ„è¯†åˆ°Shellæ•°ç»„çš„ä¸ä¸€æ ·çš„å†™æ³•ã€‚ å¹¶ä¸”ä¹Ÿçœ‹åˆ°Pattern Matchçš„ä¸€äº›ç”¨é€”ã€‚\n","tags":null,"title":"bash Array å’Œæ‹“å±•çš„pattern match","type":"archives"},{"authors":null,"categories":["Linux"],"content":"Bash Supportå®ç°ä¸€ä¸ªvimçš„bash IDEå·¥å…·ã€‚å¥½å¤„å¼å¯ä»¥è¾ƒå¿«æ·çš„ è¾“å…¥å‘½ä»¤å’Œç¼–ç¨‹ä»¥åŠè°ƒè¯•(bashdb)ã€‚\næ”¯æŒçš„å‡ ç§åç¼€æ–‡ä»¶  c çš„.c c++ çš„.cc .cpp cc perl çš„.pl awkçš„.awk shellçš„.sh vimçš„.vimæ–‡ä»¶  æŸ¥çœ‹ç³»ç»Ÿçš„å„ç§template å½“ä½ æ–°å»ºä¸€ä¸ª*.shæ–‡ä»¶ ä¸€å®šè¦è®°ä½çš„ä¸€ä¸ªå‘½ä»¤ \\ntl,é€šè¿‡å®ƒå¯ä»¥çŸ¥é“å„ä¸ªtemplateç³»ç»Ÿæ–‡ä»¶ éƒ½åœ¨å¹²ä»€ä¹ˆï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨é‚£äº›å¿«æ·å‘½ä»¤ï¼Œæ¯”å¦‚\\ckc \\css \\cfu \\cc \\cs \\se \\sf ç­‰ã€‚\nå‡ ä¸ªå¸¸è§çš„Macro  |FILENAME| |AUTHOR| |DATE| |TIME| |EMAIL| |ORGANIZATION| |AUTHORREF|  ä½ å¯ä»¥åœ¨.vim/bundle/bash-support.vim/bash-support/templates/Templateæ–‡ä»¶( è¿™è¾¹ä½¿ç”¨çš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œæˆ‘æ˜¯é€šè¿‡bundleè¿›è¡Œç®¡ç†vimæ’ä»¶).\ncss çš„ç¨‹åºå‡ ä¸ªå¤§çš„éƒ¨åˆ†çš„æ³¨é‡Š å½“ä½ æ•²å…¥\\cssä¼šåœ¨vimçš„ä¸‹ç«¯å‡ºç°ä¸€ä¸ªè¾“å…¥æ ï¼Œæœ‰ä¸‹é¢å‡ ä¸ªé€‰é¡¹\n \u0026lsquo;GLOBAL DECLARATIONS\u0026rsquo; : \u0026lsquo;GLOBAL DECLARATIONS\u0026rsquo;, \u0026lsquo;COMMAND LINE PROCESSING\u0026rsquo; : \u0026lsquo;COMMAND LINE PROCESSING\u0026rsquo;, \u0026lsquo;SANITY CHECKS\u0026rsquo; : \u0026lsquo;SANITY CHECKS\u0026rsquo;, \u0026lsquo;FUNCTION DEFINITIONS\u0026rsquo; : \u0026lsquo;FUNCTION DEFINITIONS\u0026rsquo;, \u0026lsquo;TRAPS\u0026rsquo; : \u0026lsquo;TRAPS\u0026rsquo;, \u0026lsquo;MAIN SCRIPT\u0026rsquo; : \u0026lsquo;MAIN SCRIPT\u0026rsquo;, \u0026lsquo;STATISTICS AND CLEAN-UP\u0026rsquo; : \u0026lsquo;STATISTICS AND CLEAN-UP\u0026rsquo;,  å…·ä½“å¯ä»¥æŸ¥çœ‹ä½ çš„bash-support.vim/bash-support/templates/comment.templates åœ¨è¯¥æ–‡ä»¶çš„ä¸€å¼€å¤´å°±defineäº†shellæ–‡ä»¶çš„æ³¨é‡Šå¤´ã€‚\næŠ€å·§å¯ä»¥é€šè¿‡ Gç„¶åTABå°±å¯ä»¥ç›´æ¥è¡¥å…¨äº†ã€‚ ä¹‹æ‰€ä»¥è¯´ä»–ç‰¹åˆ«å¥½æ˜¯å› ä¸ºï¼Œæ ¹æ®ã€ŠPro Bash Programmingã€‹, æå‡ºçš„å…³äº å†™æ›´å¥½çš„shell scriptçš„å»ºè®®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n Comments æ–‡ä»¶å¼€å¤´çš„æ³¨é‡Šï¼Œä»¥åŠå•è¡Œæ³¨é‡Šã€å‡½æ•°æ³¨é‡Šã€å—æ³¨é‡Š Initialization of variables å˜é‡å£°æ˜ Function definitions å‡½æ•°å®šä¹‰ Runtime configuration (parse options, read configuration file, and so on) é€šè¿‡getoptè§£æè„šæœ¬é€‰é¡¹å’Œè¿è¡Œæ‰€éœ€çš„é…ç½®æ–‡ä»¶çš„å¯¼å…¥ Sanity check (are all values reasonable?) ä¸€äº›åˆ¤æ–­ã€æ£€æŸ¥ Command Run ç¨‹åºè¿è¡Œ Process information (calculate, slice and dice lines, I/O, and so on)\n#: Title: wfe - List words ending with PATTERN #: Synopsis: wfe [-c|-h|-v] REGEX #: Date: 2009-04-13 #: Version: 1.0 #: Author: Chris F.A. Johnson #: Options: -c - Include compound words #: -h - Print usage information #: -v - Print version number set -x export PS4='+ $LINENO : ' ## Script metadata scriptname=${0##*/} description=\u0026quot;List words ending with REGEX\u0026quot; usage=\u0026quot;$scriptname [-c|-h|-v] REGEX\u0026quot; date_of_creation=2009-04-13 version=1.0 author=\u0026quot;Chris F.A. Johnson\u0026quot; ## File locations dict=$HOME/words wordfile=$dict/singlewords compoundfile=$dict/Compounds ## Default is not to show compound words compounds= ## Reular expression supplied on the command line pattern=$1 ## Function definitions die() #@ DESCRIPTION: print error message and exit with supplied return code { #@ USAGE: die STATUS [MESSAGE] error=$1 shift [ -n \u0026quot;$*\u0026quot; ] printf \u0026quot;%s\\n\u0026quot; \u0026quot;$*\u0026quot; \u0026gt;\u0026amp;2 exit \u0026quot;$error\u0026quot; } usage() #@ DESCRIPTION: print usage information { #@ USAGE: usage #@ REQUIRES: variable defined: $scriptname printf \u0026quot;%s - %s\\n\u0026quot; \u0026quot;$scriptname\u0026quot; \u0026quot;$description\u0026quot; printf \u0026quot;USAGE: %s\\n\u0026quot; \u0026quot;$usage\u0026quot; } version() #@ DESCRIPTION: print version information { #@ USAGE: version #@ REQUIRES: variables defined: $scriptname, $author and $version printf \u0026quot;%s version %s\\n\u0026quot; \u0026quot;$scriptname\u0026quot; \u0026quot;$version\u0026quot; printf \u0026quot;by %s, %d\\n\u0026quot; \u0026quot;$author\u0026quot; \u0026quot;${date_of_creation%%-*}\u0026quot; #printf \u0026quot;by %s, %d\\n\u0026quot; \u0026quot;$author\u0026quot; \u0026quot;${date_of_creation%%-*\u0026quot; æŒ‡çš„é‚£è¾¹é”™è¯¯ä¸æ˜¯çœŸæ­£çš„é”™è¯¯ï¼ä¸€èˆ¬éœ€è¦å¾€ä¸Šæ‰¾ } ## parse command-line options, -c, -h, and -v echo $(( $OPTIND )) while getopts chv var do case $var in c) compounds=$compoundfile ;; h) usage; exit ;; v) version; exit ;; esac done shift $(( $OPTIND - 1 )) ## move out one parameter and then position to the right by one step ## å³ç§»æ“ä½œ regex=$1 echo $(( $regex )) ## sanity check if [ -z \u0026quot;$pattern\u0026quot; ] then { echo \u0026quot;Search term missing\u0026quot; usage } \u0026gt;\u0026amp;2 exit 1 fi ## Search $wordfile and $compounds if it is defined { cat \u0026quot;$wordfile\u0026quot; if [ -n \u0026quot;$compounds\u0026quot; ] # not null -n ~ -z n :nonzero z:zero then cut -f1 \u0026quot;$compounds\u0026quot; fi #}| grep -i \u0026quot;.$regex$\u0026quot; |sort -fu #errror }| grep -i \u0026quot;.$regex$\u0026quot; |sort -fu ## Case-insensitive sort; remove duplicates   ckcçš„å‡ ç§æ³¨é‡Šå…³é”®å­— å½“ä½ æ•²å…¥\\ckcä¼šåœ¨vimçš„ä¸‹ç«¯å‡ºç°ä¸€ä¸ªè¾“å…¥æ ï¼Œæœ‰ä¸‹é¢å‡ ä¸ªé€‰é¡¹\n \u0026lsquo;bug\u0026rsquo; : \u0026lsquo;:BUG:|DATE| |TIME|:|AUTHORREF|: \u0026rsquo;, \u0026lsquo;todo\u0026rsquo; : \u0026lsquo;:TODO:|DATE| |TIME|:|AUTHORREF|: \u0026rsquo;, \u0026lsquo;tricky\u0026rsquo; : \u0026lsquo;:TRICKY:|DATE| |TIME|:|AUTHORREF|: \u0026rsquo;, \u0026lsquo;warning\u0026rsquo; : \u0026lsquo;:WARNING:|DATE| |TIME|:|AUTHORREF|: \u0026rsquo;, \u0026lsquo;workaround\u0026rsquo; : \u0026lsquo;:WORKAROUND:|DATE| |TIME|:|AUTHORREF|: \u0026rsquo;, \u0026lsquo;new keyword\u0026rsquo; : \u0026lsquo;::|DATE| |TIME|:|AUTHORREF|: {+COMMENT+}\u0026lsquo;,  è¿›ä¸€æ­¥çš„å¸®åŠ©å‚è€ƒBash Style Guide\n","date":1445531280,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1445531280,"objectID":"249e589a4bba2e757aa66c11e3bd0a46","permalink":"/blog/2015/10/23/bash-support-idede-xin-fa-xian/","publishdate":"2015-10-23T00:28:00+08:00","relpermalink":"/blog/2015/10/23/bash-support-idede-xin-fa-xian/","section":"archives","summary":"Bash Supportå®ç°ä¸€ä¸ªvimçš„bash IDEå·¥å…·ã€‚å¥½å¤„å¼å¯ä»¥è¾ƒå¿«æ·çš„ è¾“å…¥å‘½ä»¤å’Œç¼–ç¨‹ä»¥åŠè°ƒè¯•(bashdb)ã€‚\n","tags":null,"title":"Bash Support IDEçš„æ–°å‘ç°","type":"archives"},{"authors":null,"categories":["Linux"],"content":"åœ¨ä½¿ç”¨octopressçš„ruby+railsæ­å»ºçš„githubåšå®¢ç³»ç»Ÿæ—¶å€™ï¼Œæœ‰æ—¶å€™ä¼šå‡ºç° ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æ­å»ºä¸æˆåŠŸç­‰ï¼Œå…·ä½“ä¸æåŠã€‚æœ¬æ–‡ä»…ä»…è§£å†³ä¸€ä¸ªrakeæ–°åšæ–‡çš„æ—¶å€™ å¯èƒ½é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ã€‚\né—®é¢˜å†ç° /usr/local/bin/rake:23:in `load': cannot load such file -- /usr/share/rubygems-integration/all/gems/rake-10.3.2/bin/rake (LoadError) from /usr/local/bin/rake:23:in `\u0026lt;main\u0026gt;'  è§£å†³åŠæ³• source /usr/local/rvm/scripts/rvmè¿™æ˜¯ä¸€ä¸ªbugï¼Œç»å¸¸éœ€è¦æ‰§è¡Œè¿™ä¸ªï¼Œå› ä¸ºå¯èƒ½rvmå°±è¢«å…³æ‰äº†ï¼Œä¸€å…³æ‰ï¼Œrakeå°±æŠ¥é”™ï¼ï¼ï¼åˆ‡è®°\nå¯ä»¥æŠŠè¿™å¥è¯æ”¾åˆ°~/.bashrcå½“ä¸­ã€‚\n","date":1445528466,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1445528466,"objectID":"601530e162b8d4ac223c9feb77d64acb","permalink":"/blog/2015/10/22/ru-he-jie-jue-rake-new-post-chu-xian-load-errorcuo-wu/","publishdate":"2015-10-22T23:41:06+08:00","relpermalink":"/blog/2015/10/22/ru-he-jie-jue-rake-new-post-chu-xian-load-errorcuo-wu/","section":"archives","summary":"åœ¨ä½¿ç”¨octopressçš„ruby+railsæ­å»ºçš„githubåšå®¢ç³»ç»Ÿæ—¶å€™ï¼Œæœ‰æ—¶å€™ä¼šå‡ºç° ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æ­å»ºä¸æˆåŠŸç­‰ï¼Œå…·ä½“ä¸æåŠã€‚æœ¬æ–‡ä»…ä»…è§£å†³ä¸€ä¸ªrakeæ–°åšæ–‡çš„æ—¶å€™ å¯èƒ½é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ã€‚\n","tags":null,"title":"å¦‚ä½•è§£å†³rake new_post[]å‡ºç°load erroré”™è¯¯","type":"archives"},{"authors":null,"categories":["Fast"],"content":"FAST(Fatigue,Aerodynamic,Struture,Turbulence),æ˜¯ä¸€æ¬¾é£åŠ›æœºçš„æ°”åŠ¨ã€æ°´åŠ¨åŠ›ã€ åŠ±ç£ã€ç»“æ„ç­‰å‡ ä¸ªéƒ¨åˆ†çš„æ¨¡æ‹Ÿå·¥å…·\né£åŠ›æœºç³»ç»Ÿçš„æ•´ä½“å¸¦å…¥æµé£ç‰©ç†æµåŠ¨ç°è±¡:\nè€Œæœ¬æ–‡ä¸»è¦è®²çš„æ˜¯å¦‚ä½•åœ¨ubuntu64bitç³»ç»Ÿç¼–è¯‘FASTä½¿å…¶å¯ä»¥ä½¿ç”¨ã€‚\n1 æ“ä½œç³»ç»Ÿçš„ä½æ•° æ‰¾åˆ°Compilingæ–‡ä»¶å¤¹ä¸‹çš„makefileï¼Œç„¶åå°†bits=32 æ”¹ä¸º64  2.register.exeç¼–è¯‘ é¦–å…ˆç¼–è¯‘Source/dependecy/Registry çš„makefileï¼Œç„¶åç”Ÿæˆä¸€ä¸ªregister.exe ä¾›ç»™fast makefileä½¿ç”¨\n3. MAP++ç”Ÿæˆlibmap.so ä»å®˜ç½‘https://nwtc.nrel.gov/MAP ä¸‹è½½mapæºæ–‡ä»¶ï¼Œç„¶åç¼–è¯‘ ç”Ÿæˆä¸€ä¸ªlibmap.so æ³¨æ„ï¼š å¿…é¡»æ˜¯ lapack developerç‰ˆæœ¬æ‰å¯ä»¥ï¼Œ\n apt-get install lapack*  å¹¶æŠŠsoæ–‡ä»¶æ”¾åˆ°FASTç›®å½•ä¸‹çš„binæ–‡ä»¶å¤¹ï¼ˆæ²¡æœ‰åˆ™åˆ›å»ºï¼‰ï¼Œç„¶åmake fastçš„makefileå³å¯ã€‚\n4 DISCON_DLLç¼–è¯‘ä½¿å¾—NREL 5MWä¹Ÿèƒ½è¿è¡Œ ä¹‹å‰çš„ä¸‰ä¸ªæ­¥éª¤,åœ¨binç›®å½•ç”Ÿæˆçš„FAST_glint64åªèƒ½è¿è¡ŒTest1-18.fstå¯¹åº”çš„æœºå‹.\nå¦‚æœæƒ³è¿è¡ŒNrel-5MWï¼ˆTest18-26.fst)å¿…é¡»æ˜¯ç¼–è¯‘makefile_DISCON_DLL,å¹¶ä¿®æ”¹ CertTest/5MW_Baseline/ServDyn çš„CertTest/5MW_Baseline/NRELOffshrBsline5MW_Onshore_ServoDyn.dat æ›´æ”¹å¯¹åº”çš„DLL_FileName ä¸º ServoData/DISCON_glin64.so\n4.1 ç¼–è¯‘æ–¹å¼  make -f makefile_DISCON_DLL  4.2æ³¨æ„æœ‰å¯èƒ½ç¼–è¯‘ä¸é€šè¿‡ï¼š å¿…é¡»åœ¨makefile_DISCON_DLLä¸­çš„ FFLAGSåŠ å…¥ -fPIC\nFFLAGS = -O2 -m$(BITS) -fbacktrace -ffree-line-length-none -x f95-cpp-input -fPIC -C  é’ˆå¯¹ä¸Fastå¼€å‘è€…å¯ä»¥å‚è€ƒFAST-Developers\n","date":1445528313,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1445528313,"objectID":"7107fd7eb130034a7b911de47705a020","permalink":"/blog/2015/10/22/fast-in-ubuntu64bit-bian-yi-zhu-yi-shi-xiang/","publishdate":"2015-10-22T23:38:33+08:00","relpermalink":"/blog/2015/10/22/fast-in-ubuntu64bit-bian-yi-zhu-yi-shi-xiang/","section":"archives","summary":"FAST(Fatigue,Aerodynamic,Struture,Turbulence),æ˜¯ä¸€æ¬¾é£åŠ›æœºçš„æ°”åŠ¨ã€æ°´åŠ¨åŠ›ã€ åŠ±ç£ã€ç»“æ„ç­‰å‡ ä¸ªéƒ¨åˆ†çš„æ¨¡æ‹Ÿå·¥å…·\né£åŠ›æœºç³»ç»Ÿçš„æ•´ä½“å¸¦å…¥æµé£ç‰©ç†æµåŠ¨ç°è±¡:\nè€Œæœ¬æ–‡ä¸»è¦è®²çš„æ˜¯å¦‚ä½•åœ¨ubuntu64bitç³»ç»Ÿç¼–è¯‘FASTä½¿å…¶å¯ä»¥ä½¿ç”¨ã€‚\n","tags":null,"title":"FAST In Ubuntu64Bit ç¼–è¯‘æ³¨æ„äº‹é¡¹","type":"archives"},{"authors":null,"categories":["Linux"],"content":"ä¿¡æ¯ä¸çŸ¥è¯†çš„ä¸åŒåœ¨äºï¼Œä¿¡æ¯æ˜¯æš‚æ—¶ä¸è¢«ç†è§£çš„çŸ¥è¯†ï¼Œè€Œå½“å®ƒè¢«ç†è§£ï¼Œå¹¶è¢«ç»„ç»‡ï¼Œä»–ä¹Ÿå°±æˆäº†çŸ¥è¯†ã€‚\nä½ çš„è¯¾é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ ä¸å†æ˜¯è€å¸ˆå¸ƒç½®çš„é¢˜ç›®ï¼Œè€Œæ˜¯åŸºäºç°å®ï¼Œå……åˆ†è°ƒç ”ï¼Œæå–ä½ éœ€è¦çš„ä¿¡æ¯ï¼Œ è¿›è¡Œåˆ†å¸ƒå¼æŠ½è±¡ï¼Œåˆç†åˆ†ç±»ï¼Œæ„å»ºçŸ¥è¯†ç³»ç»Ÿï¼Œä»è€Œæ¨¡æ‹Ÿä½ æ‰€expectedçš„ç°å®ï¼Œ æ¥è®ºè¯ç†è®ºâ€¦â€¦\nçŸ¥è¯†çš„å­˜åœ¨å°±å› ä¸ºè¢«interpreted or made sense,namely some what happened have been interpreted and compared ,finnaly stored into your knowledge system in the memory(in your head not in the world),æ›´è¿›ä¸€æ­¥å¯ä»¥é˜…è¯» ã€ŠThe Design of Everyday Thingsã€‹.\nè·å–çŸ¥è¯†çš„é€”å¾„ï¼Ÿ  A goal \u0026ndash;\u0026gt; Your expected things.What do you want? B plan \u0026ndash;\u0026gt; what\u0026rsquo;s your actions to get what you want C specify \u0026ndash;\u0026gt; what action can I do now? Design a conceptual model D perform \u0026ndash;\u0026gt; How do I do it! Get affordance to execute the action E perceive \u0026ndash;\u0026gt; What happened after you done the action? F interpret \u0026ndash;\u0026gt; explain what happened? G compare \u0026ndash;\u0026gt; it is okay? is it what you want? compare with what you want?  bcd is called the stage of execute while efg is called the stage of evaluation. Also ,you can call bcd stage as FeedForward which aid in understanding the process of what can you do.And efg stage can be also looked at as FeedBack stage which aid in understanding the process of what happened.\nIn the stage of perceive, you can use some signifiers such as light,colors etc in order to communicate with people sucessfully. In the stage of interpret, it means mapping the knowledge.\nå¤§é‡æ–‡ç« çš„é˜…è¯»æ–¹æ³•  å‰è¨€ï¼ˆå¼•è¨€ï¼‰çš„ç¬¬ä¸‰æ®µè®²è¿°ä½œè€…ä¸ºä»€ä¹ˆè¦è¿›è¡Œè¿™é¡¹å·¥ä½œã€ä¾æ®ã€æ–¹æ³•ï¼ˆå¯èƒ½ä¸€äº›ç»“æœï¼‰ æ–‡ç« ä¸­çš„å›¾è¡¨ï¼ˆæå‡ºçš„è¡¨å¾æ–¹æ³•å’Œæ€§èƒ½å˜åŒ–ï¼‰\u0026ndash;æŠ€æœ¯æ‰‹æ®µ\u0026ndash;ç ”ç©¶è·¯çº¿ ç»“è®ºï¼ˆè¿™äº›è¡¨å¾æ–¹æ³•æ˜¯å¦å®ç°äº†æ—¢å®šçš„ç›®æ ‡ä»¥åŠæ˜¯å¦è¿˜éœ€è¦ä¼˜åŒ–ï¼ˆäº§ç‰©çš„æ€§èƒ½æ€ä¹ˆæ ·ï¼Ÿæ¨¡æ‹Ÿçš„ç²¾åº¦ï¼Ÿæœªå‘ç°çš„è‡ªç„¶ç°è±¡ï¼Ÿï¼‰  æ‘˜è¦çš„é˜…è¯»æ–¹æ³• ä¸€èˆ¬åˆ†ä¸ºä¸‰å¥è¯ã€‚\n ç¬¬ä¸€å¥è¯å¯¹åº”å¼•è¨€ç¬¬ä¸€æ®µã€‚æ¯”å¦‚è¯´æŸä¸ªä¸œè¥¿å¤šNBã€‚ ç¬¬äºŒå¥åŒ–å¯¹åº”å¼•è¨€ç¬¬äºŒæ®µã€‚è¿™ä¸ªNBä¸œè¥¿çš„å·¥ä½œæœºç†æ¿€å‘äº†æˆ‘ä»¬è®¾è®¡æ–°çš„æ–¹æ¡ˆçš„çµæ„Ÿ ç¬¬ä¸‰å¥è¯å¯¹åº”Here we reportã€‚ã€‚å›ç­”å››ä¸ªé—®é¢˜ 1.æˆ‘ä»¬åˆ°åº•åšäº†ç”šï¼Ÿ2.æ€ä¹ˆåšçš„3.ä¸ºä»€ä¹ˆèƒ½åšåˆ°ï¼Ÿ4.ç»“æœæ€ä¹ˆæ ·ï¼Ÿ  æƒ³æŠŠä¸€ä¸ªç ”ç©¶å·¥ä½œè®²æˆä¸€ä¸ªå¥½æ•…äº‹ï¼Œæœ€å…³é”®å¼è¯¥å·¥ä½œå–å¾—å¥½çš„ç»“æœã€‚ä¸Šè¿°è¿‡ç¨‹ä¹Ÿæ»¡è¶³ SQCAåŸåˆ™ï¼ŒSQCAï¼ˆsituations\u0026mdash;conflict\u0026ndash;Questions\u0026mdash;Answers),å¾ˆå¤šäººé’ˆå¯¹situationså’ŒconflictsåŸºæœ¬ä¸Šéƒ½ä¸æŒ‰ç« å‡ºç‰Œã€‚\nè¿™äº›éƒ½æ˜¯å‰äººçš„ä¸€äº›ç»éªŒï¼ŒåŠ æ²¹ä½ çš„topicã€‚\n","date":1444010687,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1444010687,"objectID":"1331faec89476bee0734c6809786101d","permalink":"/blog/2015/10/05/ji-yu-xian-shi-chou-xiang-xian-shi-mo-ni-xian-shi/","publishdate":"2015-10-05T10:04:47+08:00","relpermalink":"/blog/2015/10/05/ji-yu-xian-shi-chou-xiang-xian-shi-mo-ni-xian-shi/","section":"archives","summary":"ä¿¡æ¯ä¸çŸ¥è¯†çš„ä¸åŒåœ¨äºï¼Œä¿¡æ¯æ˜¯æš‚æ—¶ä¸è¢«ç†è§£çš„çŸ¥è¯†ï¼Œè€Œå½“å®ƒè¢«ç†è§£ï¼Œå¹¶è¢«ç»„ç»‡ï¼Œä»–ä¹Ÿå°±æˆäº†çŸ¥è¯†ã€‚\n","tags":null,"title":"åŸºäºç°å®ï¼ŒæŠ½è±¡ç°å®ï¼Œæ¨¡æ‹Ÿç°å®","type":"archives"},{"authors":["Ye Zhaoliang","Robert Ford"],"categories":null,"content":" Click the Cite button above to demo the feature to enable visitors to import publication metadata into their reference management software.    Click the Slides button above to demo Academic\u0026rsquo;s Markdown slides feature.   Supplementary notes can be added here, including code and math.\n","date":1441065600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1441065600,"objectID":"966884cc0d8ac9e31fab966c4534e973","permalink":"/publication/journal-article/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/publication/journal-article/","section":"publication","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":["Source Themes"],"title":"An example journal article","type":"publication"},{"authors":null,"categories":["Fast"],"content":"TurbSim,æ˜¯NRELæä¾›çš„ä¸€ä¸ªå°çš„å¼€æºå·¥å…·ï¼Œ ç”¨äºäº§ç”Ÿæ¹æµé£ï¼Œè®¾ç½®çš„æ—¶å€™å¯èƒ½å¯¹äºä¸åŒæ¨¡å‹ä¼šæœ‰ä¸åŒçš„å‚æ•°ï¼ŒåŸºäºèŒƒæœ¬è¿›è¡Œäº†ä¸€ç•ªåˆ†æã€‚å½“ç„¶æµ‹è¯•æ–‡ä»¶åœ¨TurbSimçš„Testæ–‡ä»¶ä¸‹çš„inpæ–‡ä»¶å¤¹ä¸‹ã€‚\nå¦‚æœå¯¹é‚£äº›æ¹æµæ¨¡å‹åšä¸€ä¸ªå¯¹æ¯”ï¼Œé‚£æ ·æ˜¯å¦å¯ä»¥æ›´åŠ æ¸…æ™°çš„çœ‹å‡ºä¸åŒå‘¢ï¼Ÿ äºæ˜¯å°±æœ‰äº†ä¸‹é¢çš„shellåˆ†æè„šæœ¬ã€‚\nTurbSimäº§ç”Ÿçš„é£åŠ›æœºä¸€åœˆçš„å…¥æµæˆªé¢æ¨¡å‹ï¼ˆä»…ä»…ä¸€ä¸ªæˆªé¢ï¼Œå…¨åœºæ˜¯å› ä¸ºæ•æ‰äº†å¾ˆå¤šä¸ªæˆªé¢ï¼‰\nShellè§£æè„šæœ¬ #!/bin/bash - #=============================================================================== # # FILE: a.sh # # USAGE: ./a.sh # # DESCRIPTION: # # OPTIONS: --- # REQUIREMENTS: --- # BUGS: --- # NOTES: --- # AUTHOR: Ye Zhaoliang (), zhaoturkkey@163.com # ORGANIZATION: YZL # CREATED: 2015å¹´08æœˆ10æ—¥ 00:26 # REVISION: --- #=============================================================================== #--- FUNCTION ---------------------------------------------------------------- # NAME: _repeat1 # DESCRIPTION: ä¼˜åŒ–ç‰ˆæœ¬ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- _repeat1() { #@ ä½¿ç”¨æ–¹å¼ï¼š _repeat è¦é‡å¤çš„å­—ç¬¦ä¸² é‡å¤æ¬¡æ•° #@ Usage : _repeat string number _REPEAT1=$1 #set and not empty, or unlimit recycle while [[ ${#_REPEAT1} -lt $2 ]] do _REPEAT1=$_REPEAT1$_REPEAT1$_REPEAT1 ## 3æ¬¡ä¼˜åŒ– done _REPEAT1=${_REPEAT1:0:$2} ##Trimåˆ°æˆ‘ä»¬éœ€è¦çš„é•¿åº¦ } alert() #@ Description äº§ç”Ÿä¸€ä¸ªæ–¹æ¡†çš„æ³¨é‡Š { #@ Usage alert \u0026quot;è¯è¯­\u0026quot; _repeat1 \u0026quot;${2:-#}\u0026quot; $(( ${#1} + 8 )) ## ${2:-#} å¦‚æœ$2æœªå®šä¹‰åˆ™ä½¿ç”¨# printf '%s\\n' \u0026quot;$_REPEAT1\u0026quot; ## \\a=BEL printf '%2.2s %s %2.2s\\n' \u0026quot;$_REPEAT1\u0026quot; \u0026quot;$1\u0026quot; \u0026quot;$_REPEAT1\u0026quot; ## \\a=BEL printf '%s\\n' \u0026quot;$_REPEAT1\u0026quot; } #alert \u0026quot;Do you really want to delete all the files?\u0026quot; ## RandSeed1 åœ¨ä¸åŒæ¹æµæ¨¡å‹é…ç½®çš„ä¸åŒ { alert \u0026quot;RandSeed1\u0026quot; grep -n \u0026quot;RandSeed1\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;RandSeed2\u0026quot; grep -n \u0026quot;RandSeed2\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;WrBHHTP\u0026quot; grep -n \u0026quot;WrBHHTP\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;WrFHHTP\u0026quot; grep -n \u0026quot;WrFHHTP\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;WrADHH\u0026quot; grep -n \u0026quot;WrADHH\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;WrADFF\u0026quot; grep -n \u0026quot;WrADFF\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;WrBLFF\u0026quot; grep -n \u0026quot;WrBLFF\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;WrADTWR\u0026quot; grep -n \u0026quot;WrADTWR\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;WrFMTFF\u0026quot; grep -n \u0026quot;WrFMTFF\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;WrACT\u0026quot; grep -n \u0026quot;WrACT\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;NumGrid_Z\u0026quot; grep -n \u0026quot;NumGrid_Z\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;NumGrid_Y\u0026quot; grep -n \u0026quot;NumGrid_Y\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;HubHt\u0026quot; grep -n \u0026quot;HubHt\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;GridHeight\u0026quot; grep -n \u0026quot;GridHeight\u0026quot; *.inp|awk -F: '{print $1,$3}'|sed '/HubHt/d'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;GridWidth\u0026quot; grep -n \u0026quot;GridWidth\u0026quot; *.inp|awk -F: '{print $1,$3}'|sed '/HubHt/d'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;VFlowAng\u0026quot; grep -n \u0026quot;VFlowAng\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;HFlowAng\u0026quot; grep -n \u0026quot;HFlowAng\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;TurbModel\u0026quot; grep -n \u0026quot;TurbModel\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;IECstandard\u0026quot; grep -n \u0026quot;IECstandard\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;IECturbc\u0026quot; grep -n \u0026quot;IECturbc\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;IEC_WindType\u0026quot; grep -n \u0026quot;IEC_WindType\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;ETMc\u0026quot; grep -n \u0026quot;ETMc\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;WindProfileType\u0026quot; grep -n \u0026quot;WindProfileType\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;RefHt\u0026quot; grep -n \u0026quot;RefHt\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;URef\u0026quot; grep -n \u0026quot;URef\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;ZJetMax\u0026quot; grep -n \u0026quot;ZJetMax\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;PLExp\u0026quot; grep -n \u0026quot;PLExp\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;Z0\u0026quot; grep -n \u0026quot;Z0\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;RICH_NO\u0026quot; grep -n \u0026quot;RICH_NO\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;ZI\u0026quot; grep -n \u0026quot;ZI\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;PC_UW\u0026quot; grep -n \u0026quot;PC_UW\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;PC_UV\u0026quot; grep -n \u0026quot;PC_UV\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;PC_VW\u0026quot; grep -n \u0026quot;PC_VW\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;CohExp\u0026quot; grep -n \u0026quot;CohExp\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;CTEventPath\u0026quot; grep -n \u0026quot;CTEventPath\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;CTEventFile\u0026quot; grep -n \u0026quot;CTEventFile\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;Randomize\u0026quot; grep -n \u0026quot;Randomize\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;DistScl\u0026quot; grep -n \u0026quot;DistScl\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;CTLy\u0026quot; grep -n \u0026quot;CTLy\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;CTLz\u0026quot; grep -n \u0026quot;CTLz\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t alert \u0026quot;CTStartTime\u0026quot; grep -n \u0026quot;CTStartTime\u0026quot; *.inp|awk -F: '{print $1,$3}'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t } \u0026gt; summary.out  æ”¹è¿›  å»é™¤æ— ç”¨çš„Turbulence and Boundary å¢åŠ äº†å¯¹GridWidth and GridHeightçš„å¤„ç†\ngrep -n \u0026quot;GridHeight\u0026quot; *.inp|awk -F: '{print $1,$3}'|sed '/HubHt/d'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t grep -n \u0026quot;GridWidth\u0026quot; *.inp|awk -F: '{print $1,$3}'|sed '/HubHt/d'|awk '{print substr($1,0,length($1)-4),\u0026quot;\\t\\t\u0026quot;,$2}'|column -t   3.\nshelläº§ç”Ÿçš„ç»“æœå¦‚ä¸‹ï¼š ################# ## RandSeed1 ## ################# GPLLJ 234516 HYDRO_TIDAL 2318573 Kaimal_15 123456 Kaimal 123456 KHtest 123456 smooth 4433456 vonKarm_15 123456 vonKarm 123456 ################# ## RandSeed2 ## ################# GPLLJ 789012 HYDRO_TIDAL RANLUX Kaimal_15 789012 Kaimal 789012 KHtest \u0026quot;RanLux\u0026quot; smooth \u0026quot;RanLux\u0026quot; vonKarm_15 789012 vonKarm 789012 ############### ## WrBHHTP ## ############### GPLLJ False HYDRO_TIDAL False Kaimal_15 False Kaimal False KHtest False smooth True vonKarm_15 False vonKarm False ############### ## WrFHHTP ## ############### GPLLJ True HYDRO_TIDAL True Kaimal_15 False Kaimal False KHtest False smooth False vonKarm_15 True vonKarm True ############## ## WrADHH ## ############## GPLLJ False HYDRO_TIDAL True Kaimal_15 False Kaimal False KHtest False smooth False vonKarm_15 True vonKarm True ############## ## WrADFF ## ############## GPLLJ True HYDRO_TIDAL False Kaimal_15 False Kaimal False KHtest False smooth False vonKarm_15 False vonKarm False ############## ## WrBLFF ## ############## GPLLJ False HYDRO_TIDAL True Kaimal_15 False Kaimal False KHtest True smooth True vonKarm_15 False vonKarm False ############### ## WrADTWR ## ############### GPLLJ False HYDRO_TIDAL False Kaimal_15 False Kaimal False KHtest False smooth False vonKarm_15 False vonKarm False ############### ## WrFMTFF ## ############### GPLLJ False HYDRO_TIDAL False Kaimal_15 True Kaimal True KHtest False smooth False vonKarm_15 False vonKarm False ############# ## WrACT ## ############# GPLLJ True HYDRO_TIDAL False Kaimal_15 False Kaimal False KHtest True smooth True vonKarm_15 False vonKarm False ################# ## NumGrid_Z ## ################# GPLLJ 5 HYDRO_TIDAL 5 Kaimal_15 5 Kaimal 5 KHtest 5 smooth 5 vonKarm_15 5 vonKarm 5 ################# ## NumGrid_Y ## ################# GPLLJ 5 HYDRO_TIDAL 5 Kaimal_15 5 Kaimal 5 KHtest 5 smooth 5 vonKarm_15 5 vonKarm 5 ############# ## HubHt ## ############# GPLLJ 90.00 HYDRO_TIDAL 10 Kaimal_15 37.00 Kaimal 37.00 KHtest 37.00 smooth 84.00 vonKarm_15 37.00 vonKarm 37.00 ################## ## GridHeight ## ################## GPLLJ 80.00 HYDRO_TIDAL 9.00 Kaimal_15 30.00 Kaimal 30.00 KHtest 50.00 smooth 70.00 vonKarm_15 30.00 vonKarm 30.00 ################# ## GridWidth ## ################# GPLLJ 600.0 GPLLJ 90.0 GPLLJ 80.00 HYDRO_TIDAL 600 HYDRO_TIDAL 40 HYDRO_TIDAL 9.00 Kaimal_15 600.0 Kaimal_15 55.8 Kaimal_15 30.00 Kaimal 600.0 Kaimal 55.8 Kaimal 30.00 KHtest 600.0 KHtest 100.0 KHtest 50.00 smooth 600.0 smooth 100.0 smooth 70.00 vonKarm_15 600.0 vonKarm_15 55.8 vonKarm_15 30.00 vonKarm 600.0 vonKarm 55.8 vonKarm 30.00 ################ ## VFlowAng ## ################ GPLLJ 0 HYDRO_TIDAL 0 Kaimal_15 5 Kaimal 5 KHtest 0 smooth 0 vonKarm_15 5 vonKarm 0 ################ ## HFlowAng ## ################ GPLLJ 0 HYDRO_TIDAL 0 Kaimal_15 10 Kaimal 10 KHtest 0 smooth 0 vonKarm_15 10 vonKarm 0 ################# ## TurbModel ## ################# GPLLJ \u0026quot;GP_LLJ\u0026quot; HYDRO_TIDAL \u0026quot;TIDAL\u0026quot; Kaimal_15 \u0026quot;IECKAI\u0026quot; Kaimal \u0026quot;IECKAI\u0026quot; KHtest \u0026quot;NWTCUP\u0026quot; smooth \u0026quot;SMOOTH\u0026quot; vonKarm_15 \u0026quot;IECVKM\u0026quot; vonKarm \u0026quot;IECVKM\u0026quot; ################### ## IECstandard ## ################### GPLLJ 1 HYDRO_TIDAL \u0026quot;1-ED3\u0026quot; Kaimal_15 \u0026quot;1-ED2\u0026quot; Kaimal 1 KHtest 1 smooth 1 vonKarm_15 1 vonKarm 1 ################ ## IECturbc ## ################ GPLLJ \u0026quot;A\u0026quot; HYDRO_TIDAL \u0026quot;A\u0026quot; Kaimal_15 \u0026quot;18.0\u0026quot; Kaimal \u0026quot;C\u0026quot; KHtest \u0026quot;KHtest\u0026quot; smooth \u0026quot;A\u0026quot; vonKarm_15 16.0 vonKarm \u0026quot;A\u0026quot; #################### ## IEC_WindType ## #################### GPLLJ NTM HYDRO_TIDAL \u0026quot;NTM\u0026quot; Kaimal_15 NTM Kaimal NTM KHtest NTM smooth NTM vonKarm_15 NTM vonKarm NTM ############ ## ETMc ## ############ GPLLJ default HYDRO_TIDAL default Kaimal_15 default Kaimal default KHtest default smooth default vonKarm_15 default vonKarm default ####################### ## WindProfileType ## ####################### GPLLJ default HYDRO_TIDAL \u0026quot;H2L\u0026quot; Kaimal_15 default Kaimal default KHtest default smooth default vonKarm_15 default vonKarm default ############# ## RefHt ## ############# GPLLJ 85.00 HYDRO_TIDAL 18 Kaimal_15 10.00 Kaimal 10.00 KHtest 37.00 smooth 84.00 vonKarm_15 10.00 vonKarm 10.00 ############ ## URef ## ############ GPLLJ 12.0 HYDRO_TIDAL 18 HYDRO_TIDAL 1.2 Kaimal_15 15.0 Kaimal 6.0 KHtest 13.0 smooth 17.0 vonKarm_15 15.0 vonKarm 6.0 ############### ## ZJetMax ## ############### GPLLJ 350 HYDRO_TIDAL default Kaimal_15 350 Kaimal 350 KHtest 350 smooth 350 vonKarm_15 350 vonKarm 260 ############# ## PLExp ## ############# GPLLJ default HYDRO_TIDAL default Kaimal_15 default Kaimal default KHtest default smooth 1.527 vonKarm_15 default vonKarm default ########## ## Z0 ## ########## GPLLJ default HYDRO_TIDAL default Kaimal_15 default Kaimal default KHtest default smooth default vonKarm_15 default vonKarm default ############### ## RICH_NO ## ############### GPLLJ 0.05 HYDRO_TIDAL 0.05 Kaimal_15 0.05 Kaimal 0.05 KHtest 0.02 smooth 0.05 vonKarm_15 0.05 vonKarm 0.05 ########## ## ZI ## ########## GPLLJ default HYDRO_TIDAL default Kaimal_15 default Kaimal default KHtest default smooth default vonKarm_15 default vonKarm default ############# ## PC_UW ## ############# GPLLJ default HYDRO_TIDAL default Kaimal_15 default Kaimal default KHtest default smooth default vonKarm_15 default vonKarm default ############# ## PC_UV ## ############# GPLLJ default HYDRO_TIDAL default Kaimal_15 default Kaimal default KHtest default smooth default vonKarm_15 default vonKarm default ############# ## PC_VW ## ############# GPLLJ default HYDRO_TIDAL default Kaimal_15 default Kaimal default KHtest default smooth default vonKarm_15 default vonKarm default ############## ## CohExp ## ############## GPLLJ default HYDRO_TIDAL default Kaimal_15 default Kaimal default KHtest default smooth default vonKarm_15 default vonKarm default ################### ## CTEventPath ## ################### GPLLJ \u0026quot;.\\EventData\u0026quot; HYDRO_TIDAL \u0026quot;/home/lkilcher/work/nwtc/turbsim/trunk/Test/EventData/\u0026quot; Kaimal_15 \u0026quot;.\\EventData\u0026quot; Kaimal \u0026quot;.\\EventData\u0026quot; KHtest \u0026quot;.\\EventData\u0026quot; smooth \u0026quot;.\\EventData\u0026quot; vonKarm_15 \u0026quot;.\\EventData\u0026quot; vonKarm \u0026quot;.\\EventData\u0026quot; ################### ## CTEventFile ## ################### GPLLJ LES HYDRO_TIDAL \u0026quot;Random\u0026quot; Kaimal_15 random Kaimal random KHtest \u0026quot;les\u0026quot; smooth \u0026quot;les\u0026quot; vonKarm_15 random vonKarm random ################# ## Randomize ## ################# GPLLJ true HYDRO_TIDAL true HYDRO_TIDAL 1.0 HYDRO_TIDAL 0.5 HYDRO_TIDAL 0.5 Kaimal_15 true Kaimal true KHtest true smooth true vonKarm_15 true vonKarm true ############### ## DistScl ## ############### GPLLJ 1.0 HYDRO_TIDAL 1.0 Kaimal_15 1.0 Kaimal 1.0 KHtest 1.0 smooth 1.0 vonKarm_15 1.0 vonKarm 1.0 ############ ## CTLy ## ############ GPLLJ 0.5 HYDRO_TIDAL 0.5 Kaimal_15 0.5 Kaimal 0.5 KHtest 0.5 smooth 0.5 vonKarm_15 0.5 vonKarm 0.5 ############ ## CTLz ## ############ GPLLJ 0.5 HYDRO_TIDAL 0.5 Kaimal_15 0.5 Kaimal 0.5 KHtest 0.5 smooth 0.5 vonKarm_15 0.5 vonKarm 0.5 ################### ## CTStartTime ## ################### GPLLJ 30.0 HYDRO_TIDAL 30.0 Kaimal_15 30.0 Kaimal 30.0 KHtest 0.0 smooth 10.0 vonKarm_15 30.0 vonKarm 30.0  è¿›ä¸€æ­¥çš„ç»†èŠ‚å¯ä»¥å‚è€ƒTurbsim UserGuide\n","date":1439139647,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1439139647,"objectID":"f68d115ebcc6335b05af927579eadd1f","permalink":"/blog/2015/08/10/turbsim-8ge-tuan-liu-mo-xing-de-dui-bi/","publishdate":"2015-08-10T01:00:47+08:00","relpermalink":"/blog/2015/08/10/turbsim-8ge-tuan-liu-mo-xing-de-dui-bi/","section":"archives","summary":"TurbSim,æ˜¯NRELæä¾›çš„ä¸€ä¸ªå°çš„å¼€æºå·¥å…·ï¼Œ ç”¨äºäº§ç”Ÿæ¹æµé£ï¼Œè®¾ç½®çš„æ—¶å€™å¯èƒ½å¯¹äºä¸åŒæ¨¡å‹ä¼šæœ‰ä¸åŒçš„å‚æ•°ï¼ŒåŸºäºèŒƒæœ¬è¿›è¡Œäº†ä¸€ç•ªåˆ†æã€‚å½“ç„¶æµ‹è¯•æ–‡ä»¶åœ¨TurbSimçš„Testæ–‡ä»¶ä¸‹çš„inpæ–‡ä»¶å¤¹ä¸‹ã€‚\nå¦‚æœå¯¹é‚£äº›æ¹æµæ¨¡å‹åšä¸€ä¸ªå¯¹æ¯”ï¼Œé‚£æ ·æ˜¯å¦å¯ä»¥æ›´åŠ æ¸…æ™°çš„çœ‹å‡ºä¸åŒå‘¢ï¼Ÿ äºæ˜¯å°±æœ‰äº†ä¸‹é¢çš„shellåˆ†æè„šæœ¬ã€‚\nTurbSimäº§ç”Ÿçš„é£åŠ›æœºä¸€åœˆçš„å…¥æµæˆªé¢æ¨¡å‹ï¼ˆä»…ä»…ä¸€ä¸ªæˆªé¢ï¼Œå…¨åœºæ˜¯å› ä¸ºæ•æ‰äº†å¾ˆå¤šä¸ªæˆªé¢ï¼‰\n","tags":null,"title":"TurbSim 8ä¸ªæ¹æµæ¨¡å‹çš„å¯¹æ¯”","type":"archives"},{"authors":null,"categories":["fortran"],"content":"ä»»ä½•è¯­è¨€åº”è¯¥éƒ½å¯ä»¥æœ‰ç±»ä¼¼å®«æ®¿çš„æƒ³æ³•ï¼Œåœ¨çºµæ¨ªäº¤é”™çš„è¡—é“ä¸­ï¼Œèƒ½è¿‡æ‰¾åˆ°è¿›å£å’Œå‡ºå£ï¼Œ å¹¶å¯ä»¥ä½¿ç”¨å¾ˆå¤šæ¡é“è·¯å®Œæˆä½ æƒ³å»çš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯æ‹˜æ³¥äºä¸€æ¡é“è·¯ã€‚Fortranä¹Ÿæ˜¯å¦‚æ­¤ã€‚ è¯ç”Ÿäº1951å¹´å·¦å³çš„ç¬¬ä¸€ä¸ªé¢å‘å¯¹è±¡çš„é«˜çº§è¯­è¨€Fortran è¯­è¨€ï¼Œä¹Ÿå·²ç»65å²å·¦å³äº†ï¼Œå®ƒä»¥å…¶ å¿«é€Ÿæœ‰æ•ˆçš„ç§‘å­¦æ•°å€¼è®¡ç®—ï¼Œä¸€ç›´è¿ç”¨äºç§‘å­¦ç ”ç©¶é¢†åŸŸä¸­ã€‚ æµ…æ˜¾é’ˆå¯¹fortrançš„ç†è§£\u0026mdash;-å®«æ®¿å¼çš„ä»‹ç».\nå®«æ®¿ å®«æ®¿è•´å«ç€çºµæ¨ªäº¤é”™ï¼Œé˜¡é™Œäº¤é€šï¼Œä½†æ˜¯ç¡®å®é›¶è½æœ‰åºï¼Œå¤åˆè§„å¾‹ã€‚é€šè¿‡å®«æ®¿ç¾¤æ¥è®¤è¯†è¿™é—¨ç§‘å­¦è¯­è¨€ã€‚\nfortran fortranåŒ…å«ä»¥ä¸‹ä¸»è¦å‡ ä¸ªéƒ¨åˆ†\n è¿›å£(åˆå§‹åŒ–) æ•°ç»„ è¿‡ç¨‹å®šä¹‰(å­ç¨‹åºå’Œå‡½æ•°) æ¨¡å— å‡ºå£ æ–‡ä»¶ç»„åˆ  è¿›å£ ç¨‹åºåœ¨å¼€å§‹è®¾è®¡çš„æ—¶å€™ï¼Œéœ€è¦å˜é‡åˆå§‹åŒ–ï¼Œä¹Ÿå°±æ˜¯è¿›è¡Œè¿›å£çš„å¸ƒç½®ã€‚\næ•°ç»„arrays and allocatable  æœ‰æ—¶å€™æˆ‘ä»¬å‘ç°ä¸€æ¡è¡—åˆ°åº”è¯¥ç›¸åŒçš„æ ·å¼ï¼Œäºæ˜¯æˆ‘ä»¬é‡‡ç”¨æ•°ç»„æŠŠå…·æœ‰ç›¸åŒçš„ æ•°æ®å½¢æˆæ”¾è¿›ä¸€ä¸ªä¸€ä¸ªçš„æˆ¿å±‹ã€‚fortrançš„dimensionæ˜¯ç›¸å½“å¸¸è§çš„å½¢å¼ï¼Œå› ä¸ºä»–å°±æ˜¯æ•°ç»„çš„ä½“ç°ã€‚ ä¸€èˆ¬æˆ¿å±‹çš„å»ºé€ éƒ½æ˜¯éœ€è¦allocatableçš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯æ”¿åºœæŒ‡å®šçš„å¯ç”¨åœ°ï¼Œåˆ©ç”¨allocateå»ºæˆ¿ï¼Œä½¿ç”¨å®Œï¼ŒåºŸå¼ƒäº†ï¼Œå°±deallocateã€‚subroutine and function æˆ¿å±‹ä¸€å¤šæˆ‘ä»¬å‘ç°æ²¡æ³•ç®¡ç†ï¼Œäºæ˜¯æˆ‘ä»¬å°±æŠŠå¾ˆå¤šçš„æˆ¿å±‹æ”¾åœ¨å¯¹åº”çš„è¡—é“ä¸­å»,ä¹Ÿå°±æ˜¯ subroutineæˆ–è€…functionå½“ä¸­ã€‚\nå¦å¤–æœ‰æ—¶å€™æœ‰ä¸€äº›å·²ç»åœ¨å¤–å»ºçš„subroutineå’Œfunctionä¸€å®šå¾—æŠŠä»–ä»¬çš„å¤´å’Œå‚æ•°ç±»å‹å’Œendéƒ¨åˆ†æäº¤åˆ°programï¼ˆæ”¿åºœï¼‰å½“ä¸­çš„INTERFACEå½“ä¸­ï¼Œè¿™æ ·æ‰èƒ½ç¡®å®šè¿™å—åœ°çš„åˆæ³•æ€§ç­‰ã€‚ è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆfortranä¸­æœ‰æ—¶ä¼šæœ‰é¢å¤–çš„å­ç¨‹åºçš„å®šä¹‰ï¼ˆå’Œä¸»æ–‡ä»¶ä¸åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹å½“ä¸­ï¼‰ï¼Œä¸ºäº†è®©ä¸»æ–‡ä»¶èƒ½å¤Ÿè¯†åˆ«ï¼Œä½¿ç”¨INTERFACEæŠŠå®ƒåµŒå…¥è¿›æ¥(åæ¥å¼•å…¥moduleå‡å°‘äº†interfaceçš„ä½œç”¨)ã€‚\nå‡çº§ç‰ˆçš„module ä¸ºäº†ç®¡ç†å’Œç»´æŠ¤æˆ¿é—´(arrays)å’Œè¡—é“(subs)ï¼Œäºæ˜¯æˆ‘ä»¬æŠŠä»–ä»¬æ”¾åœ¨ä¸€ä¸ªä¸€ä¸ªåŒºåŸŸå½“ä¸­ã€‚å‡ºå£  å½“æˆ‘ä»¬ç»•è¿‡äº†æ•´ä¸ªå®«æ®¿åï¼Œè¿˜éœ€è¦å¸ƒç½®ä¸€ä¸ªæˆ–å¤šä¸ªçš„å‡ºå£ã€‚ ![output][5] ç„¶è€Œæˆ‘ä»¬å‘ç°æˆ‘ä»¬éœ€è¦æ›´å¤§çš„è¿›å£è¯´æ˜ æœ‰æ—¶å€™æˆ‘ä»¬è¿›ä¸€æ­¥ç»„è£…å¤šä¸ªè¾“å…¥æ–‡ä»¶ï¼Œè€Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬æŠŠä»–ä»¬ç»„è£…æˆä¸€ä¸ªæ›´å¤§çš„è¿›å£è£…ç½®ï¼Œæ”¾ç½®åœ¨æœ€å‰é¢ã€‚\nåç»­ æ— è®ºæ¨¡å—åŒ–ï¼Œè¿˜æ˜¯å‡½æ•°åŒ–ï¼Œäº¦æˆ–è€…æ¨¡å¼åŒ–ï¼Œéƒ½æ˜¯åŸºäºåŸå…ˆå¤§çš„è¿‡ç¨‹å¼å˜æˆçš„æ”¹æˆï¼Œ åªä¸è¿‡æ˜¯ä¸ºäº†å‡å°‘å†—ä½™ã€é‡å¤ï¼ŒåŒæ—¶ç®€åŒ–å’Œæ–¹ä¾¿é˜…è¯»ï¼Œå¦å¤–è¿˜æœ‰å°±æ˜¯æ–¹ä¾¿æ‹“å±•ã€‚ ä»ç°åœ¨å¼€å§‹å¯ä»¥å»ºç«‹ä½ è‡ªå·±çš„fortranlibrary modal (ä¸€ä¸ªä¸é”™çš„å»ºè®®)\nfortran2003å‡ºæ¥äº†ä¸ªtypeè¿™ä¸ªæ•°æ®ç»“æ„çš„åˆ›å»ºï¼Œæ–¹ä¾¿çš„æŠŠå¤šä¸ªå˜é‡æˆ–è€…æ•°ç»„ç»„åˆæˆä¸ºä¸€ç§æ•°æ®ç±»å‹ï¼Œè¿™å°±æœ‰ç‚¹åƒ3Dæ‰“å°çš„åŠŸèƒ½ï¼š\n type creat_a real :: a integer :: b real,allocatable :: c(:) end type creat_a type(creat_a) :: creat_b,creat_c creat_b%a = 1.0 creat_b%b = 2 allocate (creat_b%c(3)) creat_b%c = 6.0 creat_c = creat_b creat_c%b = 8  typeçš„ä½œç”¨ç±»ä¼¼Hashkellçš„dataçš„ä½œç”¨ï¼Œæ²¡æœ‰è¡Œä¸ºåªæœ‰æ•°æ®ç±»å‹ã€‚ å…ˆå¼€ä¸ªå¤´â€¦â€¦\n","date":1439103998,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1439103998,"objectID":"4addc1be82d30132b9e32d7a3deb6cd5","permalink":"/blog/2015/08/09/fortrangong-dian/","publishdate":"2015-08-09T15:06:38+08:00","relpermalink":"/blog/2015/08/09/fortrangong-dian/","section":"archives","summary":"ä»»ä½•è¯­è¨€åº”è¯¥éƒ½å¯ä»¥æœ‰ç±»ä¼¼å®«æ®¿çš„æƒ³æ³•ï¼Œåœ¨çºµæ¨ªäº¤é”™çš„è¡—é“ä¸­ï¼Œèƒ½è¿‡æ‰¾åˆ°è¿›å£å’Œå‡ºå£ï¼Œ å¹¶å¯ä»¥ä½¿ç”¨å¾ˆå¤šæ¡é“è·¯å®Œæˆä½ æƒ³å»çš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯æ‹˜æ³¥äºä¸€æ¡é“è·¯ã€‚Fortranä¹Ÿæ˜¯å¦‚æ­¤ã€‚ è¯ç”Ÿäº1951å¹´å·¦å³çš„ç¬¬ä¸€ä¸ªé¢å‘å¯¹è±¡çš„é«˜çº§è¯­è¨€Fortran è¯­è¨€ï¼Œä¹Ÿå·²ç»65å²å·¦å³äº†ï¼Œå®ƒä»¥å…¶ å¿«é€Ÿæœ‰æ•ˆçš„ç§‘å­¦æ•°å€¼è®¡ç®—ï¼Œä¸€ç›´è¿ç”¨äºç§‘å­¦ç ”ç©¶é¢†åŸŸä¸­ã€‚ æµ…æ˜¾é’ˆå¯¹fortrançš„ç†è§£\u0026mdash;-å®«æ®¿å¼çš„ä»‹ç».\n","tags":null,"title":"fortranå®«æ®¿","type":"archives"},{"authors":null,"categories":["Linux"],"content":"shellçš„å¼ºå¤§ä¹‹å¤„åœ¨äºçŸ­å°ç²¾æ‚ï¼Œå¯¹äºIOå¤„ç†ç›¸å½“æ–¹ä¾¿ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å…¼æ‚å°å‹çš„æ•°å€¼è®¡ç®—ï¼ˆå¾ˆå°‘ï¼‰ã€‚ shellè„šæœ¬åœ¨ç¼–å†™è¿‡ç¨‹ä¸­ä¹Ÿä¼šäº§ç”Ÿå¾ˆå¤šbugã€‚æœ¬æ–‡å€Ÿé‰´ã€ŠPro-Bash-Programmingã€‹ä¸€ä¹¦æ‰€æå€¡çš„ï¼š\n comment å†™ä¸Šå¼€å¤´æ³¨é‡Š Initialization of variables å˜é‡åˆå§‹åŒ– Function definitions å‡½æ•°å®šä¹‰ Runtime configuration è§£æé€‰é¡¹ï¼Œè¯»å–é…ç½®æ–‡ä»¶ç­‰ Sanity Check ç»è¿‡Runtimeé…ç½®ä¹‹åï¼Œå¯èƒ½ä¿®æ”¹æŸäº›å€¼ï¼Œæ¯”å¦‚shiftæ“ä½œï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­å˜é‡çš„åˆç†æ€§ Process information æœ€åæ‰æ˜¯è®¡ç®—ã€IOç­‰  é€šè¿‡è¿™ä¸­ç¼–å†™æ¡†æ¶ï¼Œå¯ä»¥å‡å°‘é”™è¯¯ã€‚\na. é¦–å…ˆä¿å­˜æœ€åçš„shellä»£ç åˆ°ä¸€ä¸ªæ–‡ä»¶wfe.sh b. å…¶æ¬¡ä¸‹è½½æ‰€éœ€è¦çš„å­—å…¸æ–‡ä»¶\n mkdir ~/words cd ~/words wget http://cfaj.freeshell.org/wordfinder/Compounds wget http://cfaj.freeshell.org/wordfinder/singlewords  c. è¿è¡Œè„šæœ¬\n1. è·å–å¸®åŠ© bash wfe.sh -h 2. è·å–ç‰ˆæœ¬ä¿¡æ¯ bash wfe.sh -v 3.å•ä¸ªå•è¯æŸ¥æ‰¾ bash wfe.sh bro 4. å¤åˆå•è¯å†…æŸ¥æ‰¾ï¼ˆåŒ…å«å•ä¸ªå•è¯ï¼‰ bash wfe.sh -c bro  d. æºç æ–‡ä»¶ï¼š\n#: Title: wfe - List words ending with PATTERN #: Synopsis: wfe [-c|-h|-v] REGEX #: Date: 2009-04-13 #: Version: 1.0 #: Author: Chris F.A. Johnson #: Options: -c - Include compound words #: -h - Print usage information #: -v - Print version number set -x export PS4='+ $LINENO : ' ## å˜é‡åˆå§‹åŒ– ## Script metadata scriptname=${0##*/} description=\u0026quot;List words ending with REGEX\u0026quot; usage=\u0026quot;$scriptname [-c|-h|-v] REGEX\u0026quot; date_of_creation=2009-04-13 version=1.0 author=\u0026quot;Chris F.A. Johnson\u0026quot; ## File locations dict=$HOME/words wordfile=$dict/singlewords compoundfile=$dict/Compounds # æºä»£ç ä½œè€…åœ¨è¿™è¾¹è®¾ä¸‹é™·é˜±1 con--\u0026gt;com ## Default is not to show compound words compounds= ## Reular expression supplied on the command line pattern=$1 ## Function definitions å‡½æ•°å®šä¹‰ #æå€¡ä½¿ç”¨è¿™æ ·ç¼–å†™å‡½æ•°@ Description @Usageï¼š die() #@ DESCRIPTION: print error message and exit with supplied return code { #@ USAGE: die STATUS [MESSAGE] error=$1 shift [ -n \u0026quot;$*\u0026quot; ] printf \u0026quot;%s\\n\u0026quot; \u0026quot;$*\u0026quot; \u0026gt;\u0026amp;2 exit \u0026quot;$error\u0026quot; } usage() #@ DESCRIPTION: print usage information { #@ USAGE: usage #@ REQUIRES: variable defined: $scriptname printf \u0026quot;%s - %s\\n\u0026quot; \u0026quot;$scriptname\u0026quot; \u0026quot;$description\u0026quot; printf \u0026quot;USAGE: %s\\n\u0026quot; \u0026quot;$usage\u0026quot; } version() #@ DESCRIPTION: print version information { #@ USAGE: version #@ REQUIRES: variables defined: $scriptname, $author and $version printf \u0026quot;%s version %s\\n\u0026quot; \u0026quot;$scriptname\u0026quot; \u0026quot;$version\u0026quot; printf \u0026quot;by %s, %d\\n\u0026quot; \u0026quot;$author\u0026quot; \u0026quot;${date_of_creation%%-*}\u0026quot; #printf \u0026quot;by %s, %d\\n\u0026quot; \u0026quot;$author\u0026quot; \u0026quot;${date_of_creation%%-*\u0026quot; æŒ‡çš„é‚£è¾¹é”™è¯¯ä¸æ˜¯çœŸæ­£çš„é”™è¯¯ï¼ä¸€èˆ¬éœ€è¦å¾€ä¸Šæ‰¾ } ## parse command-line options, -c, -h, and -v è§£æ echo $(( $OPTIND )) while getopts chv var do case $var in c) compounds=$compoundfile ;; h) usage; exit ;; v) version; exit ;; esac done shift $(( $OPTIND - 1 )) ## move out one parameter and then position to the right by one step ## å³ç§»æ“ä½œ regex=$1 ## è®¾ä¸‹é™·é˜±2 æ²¡æœ‰æ³¨å†Œregexå˜é‡ï¼Œå´ç›´æ¥è°ƒç”¨$regex echo $(( $regex )) ## sanity check è®¾ä¸‹é™·é˜±3 æ²¡æœ‰è¿›è¡Œé”™è¯¯æ£€æŸ¥ if [ -z \u0026quot;$pattern\u0026quot; ] then { echo \u0026quot;Search term missing\u0026quot; usage } \u0026gt;\u0026amp;2 exit 1 fi ## Search $wordfile and $compounds if it is defined { cat \u0026quot;$wordfile\u0026quot; if [ -n \u0026quot;$compounds\u0026quot; ] # not null -n ~ -z n :nonzero z:zero then cut -f1 \u0026quot;$compounds\u0026quot; fi #}| grep -i \u0026quot;.$regex$\u0026quot; |sort -fu #errror }| grep -i \u0026quot;.$regex$\u0026quot; |sort -fu ## Case-insensitive sort; remove duplicates ","date":1439102250,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1439102250,"objectID":"aa520637149501d9902866c68ce6dae4","permalink":"/blog/2015/08/09/shell-programming-with-fewer-bugs/","publishdate":"2015-08-09T14:37:30+08:00","relpermalink":"/blog/2015/08/09/shell-programming-with-fewer-bugs/","section":"archives","summary":"shellçš„å¼ºå¤§ä¹‹å¤„åœ¨äºçŸ­å°ç²¾æ‚ï¼Œå¯¹äºIOå¤„ç†ç›¸å½“æ–¹ä¾¿ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å…¼æ‚å°å‹çš„æ•°å€¼è®¡ç®—ï¼ˆå¾ˆå°‘ï¼‰ã€‚ shellè„šæœ¬åœ¨ç¼–å†™è¿‡ç¨‹ä¸­ä¹Ÿä¼šäº§ç”Ÿå¾ˆå¤šbugã€‚æœ¬æ–‡å€Ÿé‰´ã€ŠPro-Bash-Programmingã€‹ä¸€ä¹¦æ‰€æå€¡çš„ï¼š\n comment å†™ä¸Šå¼€å¤´æ³¨é‡Š Initialization of variables å˜é‡åˆå§‹åŒ– Function definitions å‡½æ•°å®šä¹‰ Runtime configuration è§£æé€‰é¡¹ï¼Œè¯»å–é…ç½®æ–‡ä»¶ç­‰ Sanity Check ç»è¿‡Runtimeé…ç½®ä¹‹åï¼Œå¯èƒ½ä¿®æ”¹æŸäº›å€¼ï¼Œæ¯”å¦‚shiftæ“ä½œï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­å˜é‡çš„åˆç†æ€§ Process information æœ€åæ‰æ˜¯è®¡ç®—ã€IOç­‰  é€šè¿‡è¿™ä¸­ç¼–å†™æ¡†æ¶ï¼Œå¯ä»¥å‡å°‘é”™è¯¯ã€‚\n","tags":null,"title":"Shell_Programming_with_fewer_bugs","type":"archives"},{"authors":null,"categories":["Linux"],"content":" findçš„ä½¿ç”¨ æ›´æ–°äº†æ³¨é‡Š  #!/bin/bash - #=============================================================================== # # FILE: browserNew.sh # # USAGE: ./browserNew.sh # # DESCRIPTION: # # OPTIONS: --- # REQUIREMENTS: --- # BUGS: --- # NOTES: --- # AUTHOR: Ye Zhaoliang (), zhaoturkkey@163.com # ORGANIZATION: YZL # CREATED: 2015å¹´06æœˆ27æ—¥ 15:19 # REVISION: --- #=============================================================================== #--- FUNCTION ---------------------------------------------------------------- # NAME: generateChapter # DESCRIPTION: é’ˆå¯¹ä¸åŒé¢æ–‡ä»¶é‡‡ç”¨ä¸åŒçš„å¤„ç†æ–¹æ³•ï¼Œåˆ¤æ–­ç›®å½• å’Œåˆ¤æ–­è„šæœ¬æ˜¯ä¸€ä¸ªé‡è¦çš„æ“ä½œ # ä½†æ˜¯æ›´ä¸ºé‡è¦çš„æ˜¯ findè·å¾—æ–‡é›†æ‹¿çš„ç»å¯¹è·¯å¾„(ç›¸å¯¹äºå½“å‰æ–‡ä»¶) # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- ## Function definition generateChapter() # @Description : å¯¹ä¸åŒæ–‡ä»¶è¿›è¡Œä¸åŒå¤„ç† # @usage : generatechapter { # å¦™ç”¨find å¾—åˆ°å½“å‰ç›®å½•çš„ç›¸å¯¹è·¯å¾„ ä¸éœ€è¦ä¸æ–­çš„è¿›å…¥ç›®å½• for var in `find . -name \u0026quot;*\u0026quot;` do if [[ -d $var ]] # \u0026lt; cannot . Error then echo \u0026quot;${currentDir}${var#.}æ˜¯ä¸€ä¸ªç›®å½•\u0026quot; # ä½¿ç”¨#å·æ¥åˆ é™¤ä¹‹å‰çš„ç‚¹å· # ä¸ºä»€ä¹ˆä¼šæƒ³åˆ°ä½¿ç”¨ ${var##*/}å› ä¸ºvaræ˜¯ä¸€ä¸ªç›¸å¯¹å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œæ‰€ä»¥ç»è¿‡æµ‹è¯•å‘ç°ä»–å’Œ${0}ç­‰æ•ˆå¦‚æœæˆªå–åˆ°æœ€å¤§é•¿åº¦çš„/çš„è¯ elif [[ \u0026quot;${var##*/}\u0026quot; == \u0026quot;${0}\u0026quot; ]] # ä¸€å®šè¦æ³¨æ„ç­‰å¼ä¸¤è¾¹æœ‰ç©ºæ ¼ then echo \u0026quot;${currentDir}${var#.} ${0} è„šæœ¬æ–‡ä»¶ä¸å¤„ç†\u0026quot; else getFile ${currentDir}${var#.} # è¿™è¾¹éœ€è¦å»é™¤åˆ°ç¬¬ä¸€ä¸ªç‚¹å·,è¿™æ˜¯æ‰å¾—åˆ°çš„å¤„ç†æ–¹æ³• fi done } #--- FUNCTION ---------------------------------------------------------------- # NAME: getFile # DESCRIPTION: åœ¨æ¯ä¸ªæ–‡ä»¶çš„å¤´éƒ¨æ·»åŠ ä¸€äº›ä¿¡æ¯ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- getFile() #@ Description: ç»†èŠ‚å¤„ç† åŒ…æ‹¬äº§ç”Ÿå¼€å¤´ äº§ç”Ÿè¾¹æ¡†ç­‰ #@ Usage : getFile { startString=\u0026quot;# -------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026quot;$1\u0026quot; started\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------#\u0026quot; endString=\u0026quot;# --------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026quot;$1\u0026quot; ended \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------#\u0026quot; #echo \u0026quot;\u0026quot; \u0026gt;\u0026gt;summary.sh #echo -e \u0026quot;\\033[44;37m -------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026quot;$1\u0026quot; started\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------\\033[0m\u0026quot; \u0026gt;\u0026gt;summary.sh #echo \u0026quot;# -------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026quot;$1\u0026quot; started\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------\u0026quot; \u0026gt;\u0026gt;summary.sh echo $startString \u0026gt;\u0026gt; summary.sh echo \u0026quot;#`printf \u0026quot;%$(( ${#startString}-2 ))s\u0026quot; \u0026quot; \u0026quot;`#\u0026quot; \u0026gt;\u0026gt;summary.sh echo \u0026quot;#`printf \u0026quot;%$(( ${#startString}-2 ))s\u0026quot; \u0026quot; \u0026quot;`#\u0026quot; \u0026gt;\u0026gt;summary.sh echo \u0026quot;#`printf \u0026quot;%$(( ${#startString}-2 ))s\u0026quot; \u0026quot; \u0026quot;`#\u0026quot; \u0026gt;\u0026gt;summary.sh ### ä¸åŠ ä¸Š$åè€Œä¸è¡Œ # echo \u0026quot;#\u0026quot; \u0026gt;\u0026gt;summary.sh # echo \u0026quot;#\u0026quot; \u0026gt;\u0026gt;summary.sh sed '1,7d' $1 \u0026gt;\u0026gt; summary.sh echo \u0026quot;#`printf \u0026quot;%$(( ${#endString}-2 ))s\u0026quot; \u0026quot; \u0026quot;`#\u0026quot; \u0026gt;\u0026gt;summary.sh echo \u0026quot;#`printf \u0026quot;%$(( ${#endString}-2 ))s\u0026quot; \u0026quot; \u0026quot;`#\u0026quot; \u0026gt;\u0026gt;summary.sh echo \u0026quot;#`printf \u0026quot;%$(( ${#endString}-2 ))s\u0026quot; \u0026quot; \u0026quot;`#\u0026quot; \u0026gt;\u0026gt;summary.sh #echo \u0026quot;#\u0026quot; \u0026gt;\u0026gt;summary.sh #echo \u0026quot;#\u0026quot; \u0026gt;\u0026gt;summary.sh #echo -e \u0026quot;\\033[43;37m --------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026quot;$1\u0026quot; ended \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------\\033[0m\u0026quot; \u0026gt;\u0026gt; summary.sh #echo \u0026quot;# --------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026quot;$1\u0026quot; ended \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------\u0026quot; \u0026gt;\u0026gt; summary.sh echo $endString \u0026gt;\u0026gt; summary.sh echo \u0026quot;\u0026quot; \u0026gt;\u0026gt;summary.sh echo \u0026quot;\u0026quot; \u0026gt;\u0026gt;summary.sh echo \u0026quot;\u0026quot; \u0026gt;\u0026gt;summary.sh } ## variable initial currentDir=`pwd` ## processing information # å¦‚æœå­˜åœ¨ summary.sh è¯æ˜å·²ç»å­˜åœ¨äº†ï¼Œå°±å…ˆæŠŠåˆ æ‰ï¼Œ å› ä¸ºè¿™é‡Œæ˜¯ # é‡‡ç”¨è¿½åŠ çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯å†™å…¥ã€‚ if [[ -e ./summary.sh ]] then rm -rf ./summary.sh fi # è°ƒç”¨äº§ç”Ÿæ‰€æœ‰çš„æ–‡ä»¶å¤¹å†…çš„æ•°æ®åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ generateChapter ","date":1439100223,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1439100223,"objectID":"63dacf7baa9c5c2ead8810022aada9f7","permalink":"/blog/2015/08/09/allfilesinfoldstoonefile/","publishdate":"2015-08-09T14:03:43+08:00","relpermalink":"/blog/2015/08/09/allfilesinfoldstoonefile/","section":"archives","summary":" findçš„ä½¿ç”¨ æ›´æ–°äº†æ³¨é‡Š ","tags":null,"title":"AllFilesInFoldsToOneFile","type":"archives"},{"authors":null,"categories":["incompact3d"],"content":"Incompact3dæ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºfortranè¯­è¨€ç¼–å†™çš„DNSæ±‚è§£å™¨ï¼Œä¹Ÿæ˜¯æˆ‘ç ”ç©¶ç”ŸæœŸé—´ä½¿ç”¨çš„å¼€æºæºä»£ç ã€‚ Incompact3dæ•´ä½“æ¡†æ¶çš„ä»‹ç»å¯ä»¥å‚è€ƒè½¯ä»¶çš„user-guideå’Œæ–‡çŒ®High-order-compact schemes for incompressible flows: a simple and effcient method with the quasi-spectral accuary,è¿˜å¯ä»¥æœç´¢sylvain Laziet ç›¸å…³çš„æ–‡ç«  ï¼Œåªä¸è¿‡ä»–å¹¶ä¸æ˜¯æˆç†Ÿçš„è½¯ä»¶ï¼Œå¾ˆå¤šçš„ç¼–è¯‘å’Œåå¤„ç†éƒ½å¯èƒ½å‡ºç°é—®é¢˜ï¼Œä¸‹é¢æ˜¯æˆ‘ä½¿ç”¨è¿‡ç¨‹é‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚ å½“ç„¶ä¸»è¦è¿‡ç¨‹æ˜¯ï¼Œé€šè¿‡makefileç¼–è¯‘ï¼Œç„¶åè¿è¡Œincompact3dï¼Œæœ€åå¤„ç†è®¡ç®—ç»“æœã€‚\n#1 å¦‚ä½•æ¨¡æ‹Ÿï¼Ÿ\nä»¥å‘¨æœŸæ€§æ§½é“æµåŠ¨(å½“ç„¶æˆ‘ä¹Ÿå°±ä¼šè¿™ä¹ˆä¸€ç§ï¼Œå…¶ä»–éƒ½åªæ˜¯èµ°äº†ä¸€å°åŠï¼‰ä¸ºä¾‹ã€‚\n é¦–å…ˆæ˜¯å¾—åˆ°(ä¸å¾—ä¸è¯´ï¼Œæˆ‘ä¹Ÿæœ‰ç‚¹å¿˜è®°)ä¸€ä¸ªå®Œå…¨å‘å±•çš„æ—‹è½¬æ§½é“æµåŠ¨(æ³¨æ„æ—‹è½¬æºé¡¹çš„æ·»åŠ ) (ä¸€èˆ¬è®¾ç½®20000æ­¥å¯ä»¥äº†ï¼Œåªè¦æ”¶æ•›å³å¯ å¤§æ¦‚ä¸€å¤©) ç„¶åæ˜¯è·å¾—å®Œå…¨å‘å±•æ§½é“æµåŠ¨(ä¹Ÿå°±æ˜¯ä¸åŠ ä¸Šæ—‹è½¬æºé¡¹)(ä¼°è®¡å¾—ä¸‰ä¸‡æ­¥ä»¥ä¸Š å¤§æ¦‚ä¸€å¤©) æœ€åæ˜¯è·å¾—ç»Ÿè®¡çš„å®Œå…¨å‘å±•æ§½é“æµåŠ¨.å› ä¸ºDNSè·å¾—çš„ç»“æœæ˜¯éå®šå¸¸çš„ï¼Œæ‰€ä»¥ä½ å¾—è¿›è¡Œæ—¶å‡å¤„ç†(å½“ç„¶æ—¶å‡ç¨‹åºå¾—æ‰“å¼€æ—¶å‡ç»Ÿè®¡é¡¹ umeanç­‰)(æˆ‘ç»Ÿè®¡äº†20ä¸‡æ­¥ï¼Œå¤§æ¦‚èŠ±äº†4å¤©æ—¶é—´ã€‚)  æ­¥éª¤å°±æ˜¯è¿™æ ·,å¤§æ¦‚ä¸€ä¸ªè¾ƒå°çš„æµç¨‹éœ€è¦ä¸€å‘¨å·¦å³ã€‚\nIncompact3dæ¯”è¾ƒç‰¹æ®Šçš„æ˜¯æ”¶æ•›æ€§åˆ¤å®šé—®é¢˜ï¼Œä¸Šé¢çš„å‡ ä¸ªè¿‡ç¨‹éƒ½éœ€è¦ä½¿ç”¨å®æ—¶ç›‘æ§å°ç¨‹åº æ¥è§‚çœ‹é€Ÿåº¦æ•£åº¦å’Œè´¨é‡æµé‡(è´¨é‡æµé‡æ˜¯å‘¨æœŸæ€§æ§½é“æµåŠ¨æ‰€ç‰¹æœ‰çš„ï¼Œæ‰€ä»¥æœ€å¥½è¿›è¡Œå®æ—¶æ˜¾ç¤º)çš„æ”¶æ•›æƒ…å†µ.å¦å¤–ä½ å¯ä»¥é€šè¿‡pythonçš„ä¸€ä¸ªå°è„šæœ¬ æ¥è·å¾—å®æ—¶æ˜¾ç¤ºçš„å›¾ç‰‡ï¼Œè¿™æ ·å°±èƒ½çœ‹åˆ°ç¨‹åºæ¨¡æ‹Ÿå¾—æ€ä¹ˆæ ·äº†ï¼Œå…·ä½“æŸ¥çœ‹pythonå±€åŸŸç½‘ä¸Šä¼ å’Œä¸‹è½½. #2 åå¤„ç†æ–¹æ³• å‚è€ƒæˆ‘çš„pathlineå¤„ç†æ–¹æ³• ä¸€å®šè¦æ³¨æ„(real 8) å¦åˆ™å¾—åˆ°çš„ç»“æœè‚¯å®šæ˜¯é”™è¯¯çš„ï¼Œè¿™ä¹Ÿæ˜¯å›°æ‰°æˆ‘å‡ æ˜ŸæœŸçš„é—®é¢˜ã€‚\n#3 å…³äºMakefileç¼–è¯‘\n#======================================================================= # Makefile for Imcompact3D #======================================================================= # Choose pre-processing options # -DSHM\t- enable shared-memory implementation # -DDOUBLE_PREC - use double-precision OPTIONS = -DDOUBLE_PREC # Choose an FFT engine, available options are: # essl - IBM Blue Gene ESSL Library # fftw3 - FFTW version 3.x # generic - A general FFT algorithm (no 3rd-party library needed) #FFT= essl # I ignore FFT = generic # Paths to FFTW 3 FFTW3_PATH= # full path of FFTW installation if using fftw3 engine above FFTW3_INCLUDE = -I$(FFTW3_PATH)/include FFTW3_LIB = -L$(FFTW3_PATH)/lib -lfftw3 -lfftw3f # Paths to ESSL ESSL_PATH=/bgsys/drivers/ppcfloor/comm/xl ESSL_INCLUDE = ESSL_LIB = -L$(ESSL_PATH)/lib -L/opt/ibmmath/lib64 -lesslbg # Specify Fortran and C compiler names and flags here # Normally, use MPI wrappers rather than compilers themselves # Supply a Fortran pre-processing flag together with optimisation level flags # Some examples are given below: #FC = #OPTFC = #CC = #CFLAGS = # PGI #FC = ftn #OPTFC = -fast -O3 -Mpreprocess #CC = cc #CFLAGS = -O3 # PathScale #FC = ftn #OPTFC = -Ofast -cpp #CC = cc #CFLAGS = -O3 # GNU é€‰ç”¨mpif90è¿›è¡Œç¼–è¯‘ FC = mpif90 OPTFC = -O0 -g -fdefault-real-8 -fdefault-double-8 -funroll-loops -ftree-vectorize -fcray-pointer -cpp CC = mpicc CFLAGS = -O0 PLATFORM=gnu #Blue Gene/Q : EDF R\u0026amp;D #PREP=/bgsys/drivers/ppcfloor/comm/xl/bin/ #FC = $(PREP)mpixlf95_r #OPTFC= -O3 -qsuffix=cpp=f90 -qinitauto -qautodbl=dbl4 ##OPT_LK= -O3 -qinitauto -qautodbl=dbl4 #CFLAGS= -O3 -qinitauto -qautodbl=dbl4 #CC=$(PREP)mpixlc_r #PLATFORM=bgq_xlf # Cray #FC = ftn #OPTFC = -e Fm #CC = cc #CFLAGS = #----------------------------------------------------------------------- # Normally no need to change anything below # include PATH ifeq ($(FFT),generic) INC= else ifeq ($(FFT),fftw3) INC=$(FFTW3_INCLUDE) else ifeq ($(FFT),essl) INC=$(ESSL_INCLUDE) endif # library path ifeq ($(FFT),generic) LIBFFT= else ifeq ($(FFT),fftw3) LIBFFT=$(FFTW3_LIB) else ifeq ($(FFT),essl) LIBFFT=$(ESSL_LIB) endif # List of source files # æ³¨æ„è¿™è¾¹ç¼–è¯‘çš„æ¨¡å—ï¼Œä¸€èˆ¬æ˜¯éœ€è¦çš„modç”Ÿæˆæ”¾åœ¨å‰é¢é¦–å…ˆç¼–è¯‘ï¼Œå¦‚æœä¸æ”¾å‰é¢ä¼šæŠ¥é”™ï¼Œè§£å†³åŠæ³• å°±æ˜¯æ–‡ä»¶åæ”¾åœ¨å‰é¢å³å¯,å…·ä½“å¯ä»¥æŸ¥çœ‹å…³äºMakefile Fortran SRC = decomp_2d.f90 glassman.f90 fft_$(FFT).f90 module_param.f90 io.f90 variables.f90 poisson.f90 schemes.f90 implicit.f90 convdiff.f90 user_module.f90 incompact3d.f90 navier.f90 derive.f90 parameters.f90 tools.f90 visu.f90 #----------------------------------------------------------------------- # Normally no need to change anything below ifneq (,$(findstring DSHM,$(OPTIONS))) SRC := FreeIPC.f90 $(SRC) OBJ =\t$(SRC:.f90=.o) alloc_shm.o FreeIPC_c.o else OBJ =\t$(SRC:.f90=.o) endif\tOPTION=$(OPTIONS) from:=-D to:=-WF,-D TMP=$(subst $(from),$(to),$(OPTIONS)) ifeq ($(PLATFORM),bgp_xlf) OPTION=$(TMP) endif ifeq ($(PLATFORM),bgq_xlf) OPTION=$(TMP) endif all: incompact3d alloc_shm.o: alloc_shm.c $(CC) $(CFLAGS) -c $\u0026lt; FreeIPC_c.o: FreeIPC_c.c $(CC) $(CFLAGS) -c $\u0026lt; incompact3d : $(OBJ) $(FC) -O0 -g -o $@ $(OBJ) $(LIBFFT) %.o : %.f90 $(FC) $(OPTFC) $(OPTION) $(INC) -c $\u0026lt; .PHONY: clean clean: rm -f *~ *.o *.mod incompact3d .PHONY: realclean realclean: clean rm -f *~ \\#*\\#  è¿è¡Œæ–¹å¼: æˆ‘çš„ç”µè„‘åˆšå¥½æ˜¯8çº¿ç¨‹ï¼Œå°±ç”¨8çº¿ç¨‹è¿è¡Œï¼Œä½ ä¹Ÿå¯ä»¥é€‰ç”¨4æˆ–è€…æ›´å¤š.\nmpirun -np 8 incompact3d \u0026gt; tail.out \u0026amp;  #4 The Algorithm of the DNS in Incompact3d\nIncompact3dçš„æ‰§è¡Œæµç¨‹åŸºæœ¬ä¸Šæ˜¯ä¸‹é¢å‡ ä¸ª(å½“ç„¶å¾—ä»”ç»†é˜…è¯»ï¼Œå¹¶åå¤æ¯”å¯¹).æˆ‘å†™å¾—è¿™æ®µè‹±æ–‡å¤§ä½“èƒ½å¤Ÿå¯¹å¾—ä¸Š.\n1. Initial the velocity field with noise(init subroutine). 2. Start the iterative process by guessing the pressure field. First we use convdiff subroutine take convection and diffusion of the flow into consideration.And then use pre_correc subroutine to correction the velocity value with the specified boundary condition. 3. Use the values of u,v,and w to get the initialize of the pp3 in the spectral space from subroutine divergence(â€¦pp3,1â€¦)(first sign to turbulent spot).Then we use poisson solver decomp_2d_poisson_stag to get the value of the pp3 in the spectral space. 4. Since they were obtained from the guessed values of u,v,w,the values pp3,when substituted into the divergence equation,will not necessarily satisfy that that equation.Hence ,using the gradp subroutine,get the pressure gradients in the physics space,then using corgp subroutine ,get the velocity correction by the pressure gradient in the physics space.Use subroutine divergence(â€¦dv3,2â€¦) to do another monitor for turbulent spot(second sign to turbulent spot) .At the end of the current step, we go to step2 again until the simulation have been fully developed. ","date":1434963140,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1434963140,"objectID":"c3f6bf71f723790992ec0e7549b20430","permalink":"/blog/2015/06/22/incompact3dde-makefileji-dnssuan-fa/","publishdate":"2015-06-22T16:52:20+08:00","relpermalink":"/blog/2015/06/22/incompact3dde-makefileji-dnssuan-fa/","section":"archives","summary":"Incompact3dæ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºfortranè¯­è¨€ç¼–å†™çš„DNSæ±‚è§£å™¨ï¼Œä¹Ÿæ˜¯æˆ‘ç ”ç©¶ç”ŸæœŸé—´ä½¿ç”¨çš„å¼€æºæºä»£ç ã€‚ Incompact3dæ•´ä½“æ¡†æ¶çš„ä»‹ç»å¯ä»¥å‚è€ƒè½¯ä»¶çš„user-guideå’Œæ–‡çŒ®High-order-compact schemes for incompressible flows: a simple and effcient method with the quasi-spectral accuary,è¿˜å¯ä»¥æœç´¢sylvain Laziet ç›¸å…³çš„æ–‡ç«  ï¼Œåªä¸è¿‡ä»–å¹¶ä¸æ˜¯æˆç†Ÿçš„è½¯ä»¶ï¼Œå¾ˆå¤šçš„ç¼–è¯‘å’Œåå¤„ç†éƒ½å¯èƒ½å‡ºç°é—®é¢˜ï¼Œä¸‹é¢æ˜¯æˆ‘ä½¿ç”¨è¿‡ç¨‹é‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚ å½“ç„¶ä¸»è¦è¿‡ç¨‹æ˜¯ï¼Œé€šè¿‡makefileç¼–è¯‘ï¼Œç„¶åè¿è¡Œincompact3dï¼Œæœ€åå¤„ç†è®¡ç®—ç»“æœã€‚\n","tags":null,"title":"Incompact3dçš„MakefileåŠDNSç®—æ³•","type":"archives"},{"authors":null,"categories":["incompact3d"],"content":"Incompact3Dè·å¾—çš„æ•°æ®éƒ½æ˜¯äºŒè¿›åˆ¶çš„æ•°æ®æ–‡ä»¶ï¼Œä¸ºäº†è·å¾—å†…éƒ¨çš„æ–‡ä»¶ éœ€è¦è¿›ä¸€æ­¥é€šè¿‡ç¼–ç¨‹è·å¾—ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªè·å¾—pathlineçš„æºä»£ç ã€‚\nè¯´æ˜ï¼š\n é€šè¿‡ module.f90æ–‡ä»¶è¯»å– nx ny nzçš„å€¼ æŠŠä¸‹é¢çš„æºä»£ç ç¼–è¯‘å¹¶æ”¾åœ¨ux uy uzæ‰€åœ¨çš„æ–‡ä»¶å¤¹å½“ä¸­ è¿›ä¸€æ­¥çš„ç›¸å…³ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒæ³¨é‡Šã€‚\nPROGRAM b IMPLICIT NONE Integer,parameter :: nx=128,ny=129,nz=84 INTEGER :: I,J,K,COUNT,LN=128,COL=129,VOL=84 REAL(8),DIMENSION(nx,ny,nz) :: ux,uy,uz CHARACTER(len=12)::NAME1=\u0026quot;Incompact3d\u0026quot;,NAME2=\u0026quot;ux\u0026quot;,NAME3=\u0026quot;uy\u0026quot;,NAME4=\u0026quot;uz\u0026quot; character(len=15) :: temp,temp1,temp2,temp3 CHARACTER(len=20) :: CFILEux integer :: num real,dimension(nx):: y1 real,dimension(ny):: y2 real,dimension(nz):: y3 !generation of the mesh do i=1,nx y1(i)=(i-1)*0.098174770425 !0.8 is DX ! incompact3d.prmçš„é…ç½®é•¿åº¦é™¤ä»¥ç½‘æ ¼å°ºåº¦å³å¯ã€‚ enddo do j=1,ny y2(j)=(j-1)*0.015503875968992248 !0.8 is DY enddo do k=1,nz y3(k)=(k-1)*0.04986655005702381!0.8 is DZ enddo ! ä¸‹é¢åªæ˜¯å¯¹äºè¯»å–æ–‡ä»¶è¿›è¡Œçš„ä¸€ä¸ªåå¤„ç†ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿æ‰¹å¤„ç†è€Œå·² 22 format(I1) 23 format(I2) DO num=1,30 if(num .lt. 10) then write(temp,22) num temp1 =trim(NAME2)//trim('00')//trim(temp) temp2 =trim(NAME3)//trim('00')//trim(temp) temp3 =trim(NAME4)//trim('00')//trim(temp) else write(temp,23) num temp1 =trim(NAME2)//trim('0')//trim(temp) temp2 =trim(NAME3)//trim('0')//trim(temp) temp3 =trim(NAME4)//trim('0')//trim(temp) end if ! äº§ç”Ÿå®é™…çš„æ–‡ä»¶å CFILEux=trim('./pathchange/')//trim(temp1)//'.dat' !read the ux è¯»å–ux00*çš„æ•°æ® OPEN(10,FILE=temp1,FORM='UNFORMATTED',\u0026amp; ACCESS='DIRECT', RECL=8, STATUS='OLD') ! read the uy OPEN(11,FILE=temp2,FORM='UNFORMATTED',\u0026amp; ACCESS='DIRECT', RECL=8, STATUS='OLD') !read the uz OPEN(12,FILE=temp3,FORM='UNFORMATTED',\u0026amp; ACCESS='DIRECT', RECL=8, STATUS='OLD') ! æ–°å»ºä¸€ä¸ªç»“æœæ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä¸Štecplotçš„æ•°æ®å¤´ OPEN(20,FILE=CFILEux,FORM='FORMATTED') WRITE (20,'(A6,A12)') 'TITLE=',TRIM(ADJUSTL(NAME1)) WRITE (20,'(A36)') 'VARIABLES=\u0026quot;X\u0026quot;,\u0026quot;Y\u0026quot;,\u0026quot;Z\u0026quot;,\u0026quot;VX\u0026quot;,\u0026quot;VY\u0026quot;,\u0026quot;VZ\u0026quot;' WRITE (20,'(A7,I4,A1,A2,I4,A1,A2,I4,A1,A7)') 'ZONE I=',LN,',','J=',COL,',','K=',VOL,',','F=POINT' COUNT = 1 DO K=1,nz DO J=1,ny DO I=1,nx READ(10,REC=COUNT) ux(I,J,K) READ(11,REC=COUNT) uy(I,J,K) READ(12,REC=COUNT) uz(I,J,K) ! WRITE(20,30) I,J,K,ux(I,J,K),uy(I,J,K),uz(I,J,K) WRITE(20,30) y1(i),y2(j),y3(k),ux(I,J,K),uy(I,J,K),uz(I,J,K) 30 format(I3,1X,I3,1X,I3,1X,E11.4,1x,E11.4,1x,E11.4) COUNT = COUNT + 1 ENDDO ENDDO ENDDO ENDDO CLOSE(10) CLOSE(11) CLOSE(10) CLOSE(20) END PROGRAM b  ","date":1434961248,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1434961248,"objectID":"917f1fbbbc961ef697cf2bd6b1dca271","permalink":"/blog/2015/06/22/incompact3dru-he-tong-guo-jie-guo-chu-li-chu-ji-xian/","publishdate":"2015-06-22T16:20:48+08:00","relpermalink":"/blog/2015/06/22/incompact3dru-he-tong-guo-jie-guo-chu-li-chu-ji-xian/","section":"archives","summary":"Incompact3Dè·å¾—çš„æ•°æ®éƒ½æ˜¯äºŒè¿›åˆ¶çš„æ•°æ®æ–‡ä»¶ï¼Œä¸ºäº†è·å¾—å†…éƒ¨çš„æ–‡ä»¶ éœ€è¦è¿›ä¸€æ­¥é€šè¿‡ç¼–ç¨‹è·å¾—ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªè·å¾—pathlineçš„æºä»£ç ã€‚\n","tags":null,"title":"Incompact3då¦‚ä½•é€šè¿‡ç»“æœå¤„ç†å‡ºè¿¹çº¿","type":"archives"},{"authors":null,"categories":["fortran"],"content":"ç§¯ç´¯ï¼Œä½ æ‰èƒ½åšç§¯è€Œè–„å‘ã€‚ é‡å†™ï¼Œä½ æ‰èƒ½è¿›ä¸€æ­¥è®¤è¯†ä½ çš„ç§¯ç´¯. é‡å†™æœ‰æ—¶å€™ä¼šå¸¦æ¥å¯¹äºçŸ¥è¯†çš„è¿›ä¸€æ­¥æ·±å…¥çš„ç†è§£.\nä»Šå¤©å¬äº†Fcodeçš„ä¸€ä¸ªè§†é¢‘è®²åº§ï¼Œä¸€ä¸ªç«‹å¿—äºå¼€æºçš„éè¥åˆ©å°å›¢é˜Ÿï¼Œè¿˜æœ‰ä¸€ä¸ªä¸“é—¨çš„Fortran Coderçš„qqç¾¤ã€‚å¬å®Œæ„Ÿè§‰ï¼Œè‡ªå·±çœŸçš„å¾ˆæœ‰ç¼ºç‚¹ï¼Œä¹‹å‰ä¸Šè¿‡ä¸€ä¸ªjavaåŸ¹è®­ç­ï¼Œå…¶å®å¥—è·¯éƒ½ä¸€æ ·ï¼Œå†™ä»£ç ï¼Œé‡å¤å†™ï¼Œç›´åˆ°ä½ ç¡è§‰é†’æ¥è¿˜èƒ½å†™ï¼Œå–äº†åŠæ–¤52åº¦äºŒé”…å¤´è¿˜èƒ½å†™ã€‚\nå¹¶ä¸”éœ€è¦åœ¨ä¸€å®šçš„æ—¶é—´å†…å›é¡¾ï¼Œé‡å†™ä¹‹å‰ä½ å†™è¿‡çš„ä¸œè¥¿ï¼Œè™½ç„¶å¬èµ·æ¥å¾ˆç®€å•ï¼Œå¯æ˜¯æˆ‘ç»å¸¸ä¹Ÿæ˜¯å¿˜è®°äº†è¿™ä¸ªè¯¥åšçš„å·¥ä½œã€‚\n ç§¯ç´¯ é‡å†™  è¿™ä¸¤é¡¹å¯¹äºå­¦ä¹ ä»»ä½•ä¸€ä¸ªç§‘ç›®éƒ½è‡³å…³é‡è¦å’Œå¿…ä¸å¯å°‘ã€‚æ­¦åŠŸå†é«˜,ä¹Ÿè¦ç»ƒæ“ã€‚\nfortranæ˜¯ç®€å•ï¼Œè€Œä¸”æ˜¯åŸºäºè§£å†³æ•°å­¦ã€ç‰©ç†é—®é¢˜,æ“…é•¿ç§‘å­¦è®¡ç®—ï¼Œè€Œä¸æ˜¯åˆ©ç”¨å®ƒåšä¸€ä¸ªæ¼‚äº®çš„ç•Œé¢ã€‚åŸºæœ¬ä¸Šfortrançš„å¾ˆå¤šç®—æ³•éƒ½å¯ä»¥é€šè¿‡ç½‘ç»œèµ„æºæœç´¢å¾—åˆ°ï¼Œå¹¶è¿›è¡Œé€‚å½“ä¿®æ”¹ï¼Œè¿™ä¹Ÿéœ€è¦ä½ å»ç§¯ç´¯ã€‚ä½†æ˜¯fortranç»™ä½ æ€ç»´å±‚æ¬¡çš„æ”¹é€ ä¸æ˜¯ç‰¹åˆ«æ˜æ˜¾ï¼Œæ‰€ä»¥ä»è¿™ä¸ªè§’åº¦æ¥è¯´ï¼Œæˆ‘å¹¶ä¸è§‰å¾—ä»–æ˜¯ä¸€é—¨å¥½çš„è¯­è¨€ï¼Œä½†æ˜¯ä»–çš„è®¡ç®—èƒ½åŠ›è¿˜çœŸçš„ä¸é”™ï¼Œç‰¹åˆ«æ˜¯çŸ©é˜µè®¡ç®—èƒ½åŠ›ã€‚ä¹Ÿè®¸æˆ‘ä¹Ÿè¯¥ç»å¸¸æ•´ç†fortranç›¸å…³çš„ç¼–ç¨‹çŸ¥è¯†ã€‚\n","date":1434958519,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1434958519,"objectID":"1ba8d57562b6d5cbe70ec1cfe75d77f2","permalink":"/blog/2015/06/22/ji-lei-he-zhong-xie-dui-yu-cheng-xu-yuan-hen-zhong-yao/","publishdate":"2015-06-22T15:35:19+08:00","relpermalink":"/blog/2015/06/22/ji-lei-he-zhong-xie-dui-yu-cheng-xu-yuan-hen-zhong-yao/","section":"archives","summary":"ç§¯ç´¯ï¼Œä½ æ‰èƒ½åšç§¯è€Œè–„å‘ã€‚ é‡å†™ï¼Œä½ æ‰èƒ½è¿›ä¸€æ­¥è®¤è¯†ä½ çš„ç§¯ç´¯. é‡å†™æœ‰æ—¶å€™ä¼šå¸¦æ¥å¯¹äºçŸ¥è¯†çš„è¿›ä¸€æ­¥æ·±å…¥çš„ç†è§£.\n","tags":null,"title":"ç§¯ç´¯å’Œé‡å†™å¯¹äºç¨‹åºå‘˜å¾ˆé‡è¦","type":"archives"},{"authors":null,"categories":["life"],"content":"å¤§å¤šæ•°äººä¸ä¼šè§‰å¾—è‡ªå·±çš„åˆ¤æ–­æ˜¯é”™è¯¯çš„,ä»–ä»¬è§‰å¾—è‡ªå·±èƒ½å¤Ÿèµ¢ä¸‹ä¸ç¡®å®šæ€§ã€‚ æˆ‘ä»¬å¾ˆå¤šäººå¯¹è‡ªå·±çš„è¡Œä¸ºçœŸçš„æ— æ³•åšåˆ°æ¸…æ¥šçš„è§£é‡Š,ç”Ÿæ´»ä¸­çš„å¾ˆå¤šé—®é¢˜éƒ½æ˜¯ æ¦‚ç‡æ€§é—®é¢˜ï¼ŒçœŸå“è¿˜æ˜¯èµå“ï¼Ÿéœ€è¦è¿˜æ˜¯ä¸éœ€è¦ï¼Ÿç­‰ã€‚ä¸ç¡®å®šæ€§æ€»æ˜¯æˆ‘ä»¬ç”Ÿæ´»ä¸­ ä¸å¯ç¼ºå°‘çš„è‡ªæ¼”ï¼Œè€Œå¾ˆå¤šèµŒå¾’å´æ˜¯ç›¸ä¿¡è‡ªå·±çš„è¿æ°”ï¼Œè€ŒèµŒåœºå´ç›¸ä¿¡ç§‘å­¦ã€‚è§å¥½å°±æ”¶ èƒ½å¤Ÿèˆå†›ä¿å¸…çš„äººæ°¸è¿œæ˜¯å°‘æ•°ã€‚æ‰€ä»¥å¾ˆå¤šæƒ…å†µä¸‹æ˜¯ï¼Œæˆ¿ä»·é•¿çš„æ—¶å€™ï¼Œå¥½å¥½åœ°ï¼Œæˆ¿ä»· è·Œçš„æ—¶å€™ï¼Œç»å¸¸å°±ä¼šæœ‰è·³æ¥¼äº‹ä»¶ï¼ˆè‚¡å¸‚ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰ã€‚ å‚è€ƒ å­™æƒŸå¾®ï¼šã€ŠèµŒå®¢ä¿¡æ¡ï¼šä½ ä¸å¯ä¸çŸ¥çš„è¡Œä¸ºç»æµå­¦ã€‹ã€‚è¿™æ˜¯ä¸€æœ¬ç›¸å½“æœ‰è¶£çš„äººç±»è¡Œä¸ºå­¦æ–¹é¢çš„ä¹¦ç±ã€‚ â€œå›ºå®ˆç°çŠ¶â€å¹¶éç°çŠ¶çœŸçš„å¤šä¹ˆå¸å¼•äººï¼Œæ ¹æœ¬åŸå› åœ¨äºäººä»¬å®³æ€•æ‡Šæ‚”ï¼ŒåŒæ¶æ‚”æ¨ã€‚ä½ è§‰å¾—è‡ªå·±å®³æ€•æ‡Šæ‚”å’ŒåŒæ¶æ‚”æ¨ï¼Ÿ\näººç”Ÿè€Œéœ€è¦é¢å¯¹æœªæ¥ï¼Œè€Œæœªæ¥æ€»æœ‰è¯¸å¤šçš„ä¸ç¡®å®šæ€§ã€‚éœ€è¦æˆ‘ä»¬ä¸æ–­åœ°ä½œå‡ºé€‰æ‹©ã€‚å› è€Œäººç”Ÿè€Œä¸ºâ€œèµŒå®¢â€ã€‚ ä¸ç¡®å®šæ€§çš„æ¥æºä¸»è¦æœ‰ä¸¤ç§ï¼šè‡ªç„¶çš„ä¸ç¡®å®šæ€§ä¸å…¶ä»–èµŒå®¢é‡‡å–è¡ŒåŠ¨çš„ä¸ç¡®å®šæ€§ã€‚ å¤§éƒ¨åˆ†ç”Ÿæ´»ä¸­æœ€é‡è¦çš„é—®é¢˜ï¼Œéƒ½åªæ˜¯æ¦‚ç‡çš„é—®é¢˜ã€‚ ä½ æ˜¯ä¸ªâ€œè§å¥½å°±æ”¶â€çš„äººå—?æŠ•èµ„æ—¶ï¼Œå¤šæ•°äººçš„è¡¨ç°æ˜¯â€œèµ”åˆ™æ‹–ï¼Œèµ¢å¿…èµ°â€ã€‚åœ¨è‚¡å¸‚ä¸­ï¼Œæ™®éæœ‰ä¸€ç§â€œå–å‡ºæ•ˆåº”â€ï¼Œä¹Ÿå°±æ˜¯æŠ•èµ„è€…å–å‡ºè·åˆ©çš„æ„å‘ï¼Œè¦è¿œè¿œå¤§äºå–å‡ºäºæŸè‚¡ç¥¨çš„æ„å‘ã€‚è¿™ä¸â€œå¯¹åˆ™æŒï¼Œé”™å³æ”¹â€çš„æŠ•èµ„æ ¸å¿ƒç†å¿µèƒŒé“è€Œé©°ã€‚ ä¹°å½©ç¥¨æ˜¯èµŒè‡ªå·±ä¼šèµ°è¿ï¼Œä¹°ä¿é™©æ˜¯èµŒè‡ªå·±ä¼šå€’éœ‰ã€‚è¿™æ˜¯ä¸¤ç§å¾ˆå°‘å‘ç”Ÿçš„äº‹æƒ…ï¼Œä½†äººä»¬å´ååˆ†çƒ­è¡·ã€‚ ä½•è°“å°æ¦‚ç‡äº‹ä»¶?å°±æ˜¯å‡ ä¹ä¸å¯èƒ½å‘ç”Ÿçš„äº‹ä»¶ã€‚ æˆ¿åœ°äº§å…¬å¸æ‹ä¸‹â€œåœ°ç‹â€ï¼Œå°±å¦‚åŒä¸€ä¸ªç™¾è´§å…¬å¸å¼€ä¸€å®¶å¥¢ä¾ˆå“åº—ï¼Œèµšä¸èµšé’±å…¶å®ä¸é‡è¦ï¼Œå…³é”®æ˜¯æå‡è¿™ä¸ªç™¾è´§å…¬å¸çš„æ¡£æ¬¡ã€‚ å¦‚æœä½ æ´»åœ¨ä¸€ä¸ªä¸å¤ªè§„åˆ™çš„å•†ä¸šæ°›å›´é‡Œï¼Œå°±è¦é€šæ™“æ¢å®ç§‹è€å…ˆç”Ÿçš„æ€ä»·è‰ºæœ¯------è¦æœ‰æ€äººçš„èƒ†é‡ã€é’“é±¼çš„è€å¿ƒã€æ”¿æ²»å®¶çš„è„¸çš®ã€‚ æ”¶å…¥æœ¬æ¥å°±ä¸å¤šçš„â€œæœˆå…‰æ—â€ï¼Œåè€Œä¸¥é‡çƒ§åŒ…ï¼Œè¿™ä¹Ÿå°±æ˜¯å­Ÿå­è¯´çš„â€œæ— æ’äº§è€…æ— æ’å¿ƒâ€ã€‚ äººä»¬åœ¨èµ¢é’±ä¹‹åï¼Œå°±æ„¿æ„å†’æ›´å¤§çš„é£é™©ã€‚ å¤šåƒä¸å®œå¥åº·ï¼Œè¿™é“ç†è°éƒ½æ‡‚ï¼Œå¯æ˜¯åœ¨è‡ªåŠ©é¤å…åƒå…«åˆ†é¥±çš„äººè¿˜æ˜¯å°‘æ•°ã€‚ èµŒåœºä¹‹æ‰€ä»¥å­˜åœ¨ï¼Œå°±æ˜¯å› ä¸ºå¤§æ‰¹æ¦‚ç‡ç›²çš„å­˜åœ¨ã€‚ èµŒåšä¸šæœ¬è´¨ä¸Šæ˜¯å¨±ä¹ä¸šã€‚ä»æœ¬è´¨ä¸Šè®¤è¯†äº†èµŒåœºï¼Œå°±å¦‚åŒæ¥ç§äº†èµŒåšç–«è‹—ï¼Œä»æ­¤æœ‰äº†æŠ—ç—…æ€èµŒåšçš„å…ç–«èƒ½åŠ›ã€‚ èµŒå®¶ç›¸ä¿¡çš„æ˜¯è¿æ°”ï¼ŒèµŒåœºç›¸ä¿¡çš„æ˜¯æ•°å­¦ã€‚ å¤§æ•°æ³•åˆ™æ˜¯ä¿é™©å…¬å¸ã€èµŒåœºã€æ’éª—çš„éª—å¾’ï¼Œèµ–ä»¥å­˜åœ¨çš„åŸºç¡€ã€‚ åƒé‡‘éš¾ä¹°æ—©çŸ¥é“ã€‚ æˆ¿ä»·ä¸Šæ¶¨çš„æ—¶å€™ä¸ä¼šæ­»äººï¼Œä½†æˆ¿ä»·ä¸‹è·Œçš„æ—¶å€™å´ä¸€å®šä¼šæ­»äººã€‚ è‡ªè´Ÿçš„ç–¯å­å¸¸å¸¸èƒ½å¤Ÿå¸å¼•è¿½éšè€…ï¼Œå†…çœçš„æ™ºè€…ç¼ºä¹å¸å¼•åŠ›ã€‚ â€œå›ºå®ˆç°çŠ¶â€å¹¶éç°çŠ¶çœŸçš„å¤šä¹ˆå¸å¼•äººï¼Œæ ¹æœ¬åŸå› åœ¨äºäººä»¬å®³æ€•æ‡Šæ‚”ï¼ŒåŒæ¶æ‚”æ¨ã€‚ åˆ«æ— é€‰æ‹©ä¸é€‰æ‹©è¿‡å¤šçš†æ˜¯çƒ¦æ¼ã€‚ ç»å¯¹ç†æ€§ï¼Œå…¶å®æ˜¯ä¸€ç§éç†æ€§ã€‚ è¿œè§å¤ªè¿œï¼Œä¹Ÿæ˜¯ä¸€ç§è´ªå©ªã€‚ ä¸ä»…è´§å¸æœ‰æ—¶é—´ä»·å€¼ï¼Œç¤¾ä¼šè¡Œä¸ºä¹Ÿæœ‰æ—¶é—´ä»·å€¼ã€‚ å£°èª‰æœ‰æ—¶é—´ä»·å€¼ï¼Œå¼ çˆ±ç²å‘¼åï¼šæˆåè¦è¶æ—©ã€‚ æ„Ÿæƒ…æœ‰æ—¶é—´ä»·å€¼ï¼Œæ°‘è°šæ—©æ€»ç»“ï¼šè¡£ä¸å¦‚æ–°ï¼Œäººä¸å¦‚æ—§ã€‚ å†¯ä»‘æ›¾æœ‰å¦™è¯­ï¼šæ—¶é—´å†³å®šä¸€ä»¶äº‹æƒ…çš„æ€§è´¨ï¼šèµµå››å°å§16å²å»å¤§å¸…åºœè·Ÿå¼ å­¦è‰¯ï¼Œå¥¹å»ä¸€å¹´ï¼Œæ˜¯ä½œé£é—®é¢˜;å»ä¸‰å¹´ï¼Œæ˜¯çæ…å’Œ;ä¸€å»ä¸‰åå¹´ï¼Œé‚£å°±æ˜¯çˆ±æƒ…ã€‚ å½“ä¸‹çš„å¿«ä¹è¦æ¯”å°†æ¥çš„å¿«ä¹æœ‰ä»·å€¼ã€‚ äººä»¬æ„¿æ„æ¶ˆè´¹åˆ†æ•£åˆ°å„ä¸ªæ—¶æœŸï¼Œè€Œä¸æ˜¯é›†ä¸­åœ¨ä¸€ä¸ªæ—¶æœŸã€‚äººä»¬æ›´æ„¿æ„åœ¨30åˆ†é’Ÿå†…æ…¢æ…¢åƒæ‰ä¸€ä¸²è‘¡è„ï¼Œè€Œä¸æ˜¯ä¸€åˆ†é’Ÿå…¨å¹²æ‰ã€‚ â€œå‚»ç“œåŠ›é‡å¤§â€ï¼Œæ˜¯æœ‰ä¸€å®šé“ç†çš„ã€‚åœ¨è‡ªç„¶é€‰æ‹©çš„è¿‡ç¨‹ä¸­ï¼Œâ€œè‡ªæ¬ºâ€å¯ä»¥ç»™äººå‹‡æ°”ï¼Œå¯ä»¥â€œæ¬ºéª—â€å¯¹æ‰‹ï¼Œä»è€Œåœ¨æ–—äº‰ä¸­å­˜æ´»ä¸‹æ¥ã€‚ å…¶å®ï¼Œè¿‡å¤šçš„èµ„è®¯å¯¹æŠ•èµ„è€…æ¥è¯´å¹¶æ— å¸®åŠ©ï¼Œæœ‰æ—¶åè€Œæ›´è±¡ä¸€ç§å™ªéŸ³ã€‚ åªæœ‰å°†ä¸ç¡®å®šæ€§å˜ä¸ºç¡®å®šæ€§ï¼Œäººç±»æ‰èƒ½è·å¾—å®‰å…¨æ„Ÿï¼Œæ‰èƒ½ç¡å¾—é¦™ï¼Œè¿™æ˜¯äº˜å¤ä¸å˜çš„æ€ç»´ä¹ æƒ¯ã€‚ é«˜æ‰‹ï¼Œå°±æ˜¯å¯¹è‡ªå·±è¯šå®çš„äººã€‚ é¢„æµ‹å‡†ç¡®åº¦è¶Šé«˜çš„äººï¼Œè¶Šå°‘å‡ºç°è¿‡åº¦è‡ªä¿¡çš„ç°è±¡ã€‚ æ­£æ‰€è°“ï¼šâ€œä¸€ç“¶å­ä¸æ»¡ï¼ŒåŠç“¶å­æ™ƒè¡â€ã€‚é¡¶çº§äº¤æ˜“å‘˜ã€æ¡¥ç‰Œé«˜æ‰‹ã€ä¸“ä¸šèµŒå¾’å¾ˆå°‘ä¼šè¡¨ç°å‡ºè¿‡åº¦è‡ªä¿¡ã€‚å°¤å…¶æŠ•èµ„æ–°æ‰‹ï¼Œåˆšåˆšä¸Šæ‰‹æ—¶ï¼Œé‚£ç§è‡ªä¿¡ï¼Œæº¢äºè¨€è¡¨ã€‚ äººç±»çš„ç»ˆæè¿½æ±‚æ˜¯å¹¸ç¦ï¼Œè€Œä¸æ˜¯é‡‘é’±ã€‚ æ›¾æœ‰ä¸€ä¸ªå¯Œäººè§¦çŠ¯åˆ‘å¾‹ï¼Œè¦è¢«å‰¥å¤ºç”Ÿå‘½ã€‚æœ€åä»–è‡ªæ„¿æå‡ºä»·å€¼æ•°ç™¾äº¿ç¾å…ƒçš„æ²¹ç”°ï¼Œä»¥æ±‚å…æ­»ã€‚åœ¨ç”Ÿå‘½é¢å‰ï¼Œå…¶ä»–çš„ä¸œè¥¿çœŸçš„å¾ˆå»‰ä»·ã€‚ â€œè¡ŒåŠ¨çš„æ‡Šæ‚”â€å¤šæ˜¯çŸ­æœŸçš„ï¼Œå¯æ˜¯è¯¥åšçš„äº‹æƒ…æ²¡æœ‰åšï¼Œå°±é•¿æœŸæ¥çœ‹å´æ›´ä¸ºç—›è‹¦ã€‚ æ¦‚ç‡æ³•åˆ™ï¼Œæ˜¯å¶ç„¶ä¸­çš„å¿…ç„¶ã€‚ å¯æ˜¯ï¼Œæœ‰äº›äººå°±æ˜¯ä¸è‚¯æ‰¿è®¤è¿æ°”ã€‚æŠŠè¿æ°”è§†ä¸ºå”¯å¿ƒä¸»ä¹‰çš„äººï¼Œæ‰æ˜¯çœŸæ­£çš„å”¯å¿ƒä¸»ä¹‰è€…ã€‚ ç»å¤§å¤šæ•°äººéƒ½æ˜¯æ¦‚ç‡ç›²ï¼Œå°±å¦‚åŒæœ‰äº›äººå¤©ç”Ÿå°±æ˜¯è·¯ç—´ä¸€æ ·ã€‚ ","date":1434616530,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1434616530,"objectID":"f0017ab9e6e44004e95353074e1c5140","permalink":"/blog/2015/06/18/ren-de-du-tu-xin-li/","publishdate":"2015-06-18T16:35:30+08:00","relpermalink":"/blog/2015/06/18/ren-de-du-tu-xin-li/","section":"archives","summary":"å¤§å¤šæ•°äººä¸ä¼šè§‰å¾—è‡ªå·±çš„åˆ¤æ–­æ˜¯é”™è¯¯çš„,ä»–ä»¬è§‰å¾—è‡ªå·±èƒ½å¤Ÿèµ¢ä¸‹ä¸ç¡®å®šæ€§ã€‚ æˆ‘ä»¬å¾ˆå¤šäººå¯¹è‡ªå·±çš„è¡Œä¸ºçœŸçš„æ— æ³•åšåˆ°æ¸…æ¥šçš„è§£é‡Š,ç”Ÿæ´»ä¸­çš„å¾ˆå¤šé—®é¢˜éƒ½æ˜¯ æ¦‚ç‡æ€§é—®é¢˜ï¼ŒçœŸå“è¿˜æ˜¯èµå“ï¼Ÿéœ€è¦è¿˜æ˜¯ä¸éœ€è¦ï¼Ÿç­‰ã€‚ä¸ç¡®å®šæ€§æ€»æ˜¯æˆ‘ä»¬ç”Ÿæ´»ä¸­ ä¸å¯ç¼ºå°‘çš„è‡ªæ¼”ï¼Œè€Œå¾ˆå¤šèµŒå¾’å´æ˜¯ç›¸ä¿¡è‡ªå·±çš„è¿æ°”ï¼Œè€ŒèµŒåœºå´ç›¸ä¿¡ç§‘å­¦ã€‚è§å¥½å°±æ”¶ èƒ½å¤Ÿèˆå†›ä¿å¸…çš„äººæ°¸è¿œæ˜¯å°‘æ•°ã€‚æ‰€ä»¥å¾ˆå¤šæƒ…å†µä¸‹æ˜¯ï¼Œæˆ¿ä»·é•¿çš„æ—¶å€™ï¼Œå¥½å¥½åœ°ï¼Œæˆ¿ä»· è·Œçš„æ—¶å€™ï¼Œç»å¸¸å°±ä¼šæœ‰è·³æ¥¼äº‹ä»¶ï¼ˆè‚¡å¸‚ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰ã€‚ ","tags":null,"title":"äººçš„èµŒå¾’å¿ƒç†","type":"archives"},{"authors":null,"categories":["life"],"content":"å’±ä»¬éƒ½æƒ³ç€èº«ä½“å¥åº·ï¼Œæ°”è¡€é€šç•…ï¼Œç²¾æ°”ç¥åè¶³ï¼Œå¯æ˜¯éšç€å¹´é¾„çš„å¢é•¿ï¼Œæˆ‘ä»¬å‘ç° å–é…’ã€æŠ½çƒŸã€ç†¬å¤œã€å¤œé£Ÿã€é…—é…’ç­‰æ— ä¸åœ¨ä¾µèš€ç€æˆ‘ä»¬å¥åº·çš„èº«ä½“ã€‚æˆ‘ä»¬éœ€è¦å¥åº· çš„ä½œæ¯ä¹ æƒ¯å’Œç”Ÿæ´»ä¹ æƒ¯ï¼Œæ¥ç»´æŒæˆ‘ä»¬çš„å¥åº·ã€‚ 1. ä½œæ¯æ—¶é—´ 2. è¡¥å……è¥å…» 3. é€‚å½“è¿åŠ¨ 1ã€è®°ä½âˆ¶ç¡è§‰æ˜¯å…»ç”Ÿç¬¬ä¸€è¦ç´ ã€‚ç¡è§‰çš„æ—¶é—´åº”è¯¥æ˜¯æ™š21âˆ¶00~æ—©3âˆ¶00ã€‚å› ä¸ºè¿™ä¸ªæ—¶é—´æ˜¯ä¸€å¤©çš„å†¬å­£ï¼Œå†¬å­£ä¸»è—ï¼Œå†¬å­£ä¸è—åˆ™æ˜¥å¤ä¸é•¿ï¼Œå³ç¬¬2å¤©æ²¡ç²¾ç¥ã€‚ 2ã€ä¸€åˆ‡è¯ç‰©å¯¹æ²»ç—…æ¥è¯´éƒ½æ˜¯æ²»æ ‡,ä¸æ˜¯æ²»æœ¬,ä¸ç®¡æ˜¯ä¸­åŒ»è¿˜æ˜¯è¥¿åŒ».å› ä¸ºä¸€åˆ‡çš„ç—…éƒ½æ˜¯é”™è¯¯çš„å› äº§ç”Ÿé”™è¯¯çš„æœ.é”™è¯¯çš„å› ä¸é™¤,é”™è¯¯çš„æœå°±ä¸ä¼šç»æ ¹.å¥åº·çš„æ ¹æœ¬åœ¨å¿ƒ.ä¸€åˆ‡æ³•ä»å¿ƒç”Ÿ.å¿ƒå‡€åˆ™èº«å‡€.æ‰€ä»¥å¾—ç—…äº†,ä¸è¦å‘å¤–æ±‚,è¦é è‡ªå·±è‡ªèº«çš„ä¿®å¤ç³»ç»Ÿæ¥ä¿®å¤è‡ªå·±çš„ç–¾ç—….å…¶å®äººå’ŒåŠ¨ç‰©æ˜¯ä¸€æ ·çš„,åŠ¨ç‰©çš„ç—…éƒ½æ˜¯é è‡ªå·±,äººä¹Ÿèƒ½. 3ã€æ­£ç¡®çš„è§‚å¿µè¿œæ¯”æ˜‚è´µçš„è¯ç‰©å’Œå±é™©çš„æ‰‹æœ¯æ›´èƒ½å¸®åŠ©æ‚£è€…æ¶ˆé™¤ç–¾ç—…ã€‚æœ‰äº†æ­£ç¡®çš„è§‚å¿µï¼Œä½ å°±ä¼šæœ‰æ­£ç¡®çš„å†³å®šï¼Œä½ å°±ä¼šæœ‰æ­£ç¡®çš„è¡Œä¸ºï¼Œä½ å°±å¯ä»¥é¢„é˜²è®¸å¤šç–¾ç—…çš„å‘ç”Ÿã€‚ 4ã€äººæ‰€å…·æœ‰çš„ä¸€åˆ‡æ™ºæ…§ï¼Œç»å¯¹ä¸æ˜¯ä»ä¹¦æœ¬é‡Œå­¦æ¥çš„ï¼Œè€Œæ˜¯ä»è‡ªå·±çš„çœŸè¯šå¿ƒã€æ¸…å‡€å¿ƒ(å°±æ˜¯ä½›å®¶æ‰€è¯´çš„è©æå¿ƒ)ï¼Œä»å®šä¸­ç”Ÿå‡ºæ¥çš„ã€‚ 5ã€äººæ˜¯ä¸€åˆ‡ç”Ÿç‰©ä¸­æ„é€ æœ€å®Œç¾çš„çµä½“ï¼Œå¥åº·çš„èº«ä½“æ˜¯äººç”Ÿæ¥å°±å…·è¶³çš„;äººçš„å¥åº·çŠ¶å†µçš„è°ƒèŠ‚æ˜¯é äººä½“æœ¬èº«æ‰€å…·æœ‰çš„è°ƒèŠ‚ä¿®å¤ç³»ç»Ÿæ¥å®Œæˆçš„ï¼Œè€Œä¸æ˜¯é å¤–éƒ¨å› ç´ ï¼Œå¤–éƒ¨å› ç´ åªèƒ½èµ·è¾…åŠ©ä½œç”¨ 6ã€äººçš„å¤§éƒ¨åˆ†ç”Ÿç—…ç°è±¡æ˜¯äººä½“åœ¨è°ƒèŠ‚ã€æ¸…ç†èº«ä½“åƒåœ¾æ—¶æ‰€è¡¨ç°çš„ç°è±¡ï¼Œæ˜¯äººä½“è‡ªåŠ¨è°ƒèŠ‚å¹³è¡¡æ‰€è¡¨ç°å‡ºçš„çŠ¶æ€ï¼Œæ‰€ä»¥åº”è¯¥æŠŠå®ƒä»¬å½“æˆæ­£å¸¸çš„ç”Ÿç†ç°è±¡ï¼Œè€Œä¸åº”è¯¥å»æŠŠå®ƒå½“æˆç—…å› æ¥æ¶ˆç­ã€‚æ‰€ä»¥å½“äººåœ¨ç”Ÿç—…çš„æ—¶å€™ï¼Œä¸€å®šä¸è¦æœ‰æ€¨æ¨å—”æš(huÃ¬)å¿ƒï¼Œå¿ƒé‡Œè¦å®‰å®šï¼Œå¿ƒå®šåˆ™æ°”é¡ºï¼Œæ°”é¡ºåˆ™è¡€ç•…ï¼Œæ°”é¡ºè¡€ç•…åˆ™ç™¾ç—…æ¶ˆã€‚ 7ã€äººçš„å¥åº·ç¦»ä¸å¼€ä¸¤å¤§è¦ç´ âˆ¶1)è¶³å¤Ÿçš„æ°”è¡€;2)ç•…é€šçš„ç»ç»œ(åŒ…æ‹¬è¡€ç®¡å’Œæ’æ³„åƒåœ¾çš„é€šé“)ã€‚ 8ã€è¶³å¤Ÿçš„æ°”è¡€é âˆ¶è¶³å¤Ÿçš„é£Ÿç‰©+èƒ†æ±+å¿…è¦æ—¶é—´å†…(æ™šä¸Šå¤©é»‘å¾Œ~åˆå¤œ1ç‚¹40)ä¼˜è´¨çš„ç¡çœ (è¿™ä¸ªæ—¶å€™å¤§è„‘å®Œå…¨ä¸å·¥ä½œï¼Œç”±æ¤ç‰©ç¥ç»ä¸»å¯¼)+è‰¯å¥½çš„ç”Ÿæ´»ä¹ æƒ¯ã€‚ 9ã€ç•…é€šçš„ç»ç»œéœ€è¦âˆ¶æ¸…å‡€å¿ƒã€‚ä¸€åˆ‡ä¸ƒæƒ…å…­æ¬²éƒ½ä¼šç ´åæ¸…å‡€å¿ƒï¼Œä»è€Œç ´åç»ç»œçš„æ­£å¸¸è¿è¡Œã€‚ 10ã€ç»´æŒå¥åº·çš„èº«ä½“ä¸ä»…éœ€è¦â€œå¢æ”¶(å¢åŠ æ°”è¡€)â€ï¼Œä¹Ÿéœ€è¦â€œèŠ‚æ”¯(å‡å°‘è¡€æ°”çš„æŸè€—)â€ã€‚ 11ã€è¿‡åº¦åœ°å¢åŠ é£Ÿç‰©ä¸ä»…ä¸ä¼šå¢åŠ è¡€æ°”ï¼Œè€Œä¸”ä¼šæˆä¸ºèº«ä½“ä¸­çš„åƒåœ¾è´Ÿæ‹…ï¼Œåè¿‡æ¥è¿˜å¾—é æ¶ˆè€—è¡€æ°”æ¥æŠŠä»–ä»¬æ¸…ç†æ‰ã€‚äº”è„å…­è…‘æ˜¯ä¸€ä¸ªè¡€æ°”åŠ å·¥å‚ï¼Œé£Ÿç‰©æ˜¯åŸææ–™ï¼ŒåŠ å·¥èƒ½åŠ›æ˜¯æœ‰é™çš„ï¼Œè€Œé£Ÿç‰©æ˜¯æ— é™çš„ï¼Œæ‰€ä»¥é£Ÿç‰©çš„æ•°é‡å¿…é¡»å¾—åˆ°æ§åˆ¶ã€‚ 12ã€é€‚å½“è¿åŠ¨å¯ä»¥å¸®åŠ©äººçš„æ°”è¡€è¿è¡Œï¼Œä½†åŒæ—¶ä¹Ÿåœ¨æ¶ˆè€—äººçš„æ°”è¡€ã€‚äººä½“çš„å¾®å¾ªç¯ä¸»è¦åº”è¯¥é æ¾é™æ¥è¾¾åˆ°çš„ï¼Œè¿™ä¹Ÿæ˜¯å¥åº·å¿…ä¸å¯å°‘çš„ã€‚ 13ã€äººä½“ä¸­çš„åƒåœ¾è¶Šå¤šï¼Œå°±è¶Šéœ€è¦æ›´å¤šçš„è¡€æ°”æ¥æ¸…é™¤å®ƒä»¬ï¼Œä½†äººçš„è¡€æ°”å› ä¸ºåƒåœ¾çš„å¢å¤šå’Œè¡€è„‰çš„é˜»å¡è€Œå‡å°‘ï¼Œè¿™å°±å½¢æˆäº†æ¶æ€§å¾ªç¯ï¼Œè¿™ä¹Ÿæ­£æ˜¯äººè¡°è€çš„æœºç†ã€‚æ‰€ä»¥ï¼Œäººè¦æƒ³å¥åº·ä¸è€ï¼Œå°±è¦âˆ¶1)å‡å°‘ä½“å†…çš„åƒåœ¾;2)å¢åŠ è¡€è„‰ç»ç»œçš„ç•…é€š;3)å¢åŠ ä½“å†…çš„æ°”è¡€ã€‚ 14ã€ä¸å…¶ç›¸ä¿¡è¯ç‰©ï¼Œç›¸ä¿¡æ£€æŸ¥çš„èµ„æ–™ï¼Œä¸å¦‚ç›¸ä¿¡è‡ªå·±çš„æ„Ÿè§‰ï¼Œç›¸ä¿¡è‡ªå·±æ‰€å…·è¶³çš„è‡ªæˆ‘è°ƒèŠ‚èƒ½åŠ›ã€‚ä½†è¿™éœ€è¦åœ¨ä½ å¾—é“(æ™ºæ…§å¼€äº†)çš„å‰æä¹‹ä¸‹ï¼Œæ‰èƒ½åˆ†è¾¨è¿™ä¸€åˆ‡ã€‚ 15ã€å¥åº·ï¼Œä»è°ƒèŠ‚å¿ƒæ€§å¼€å§‹ã€‚ä¸ºäº†ä½ çš„å¥åº·ï¼Œä½ å­¦ä½›å§ã€‚å­¦ä½›å¾—åˆ°çš„å¿«ä¹æ˜¯äººç”Ÿæœ€é«˜çš„äº«å—ã€‚ 16ã€å¯¹æ–¼ä¸€ä¸ªæœ‰å®¿ç–¾çš„äººæ¥è¯´ï¼Œåªæœ‰æ°”è¡€å……è¶³äº†(ä¸€æ˜¯é€šè¿‡è¿™é‡Œæ‰€ä»‹ç»çš„è¡¥å……æ°”è¡€çš„æ–¹æ³•ï¼ŒäºŒæ˜¯é€šè¿‡é™åæ‰“é€šæ°”æœº)ï¼Œç—…æƒ…æ‰ä¼šæ˜¾ç°å‡ºæ¥ã€‚æ‰€ä»¥ç»ƒåŠŸçš„äººåœ¨åŠŸå¤«è¾¾åˆ°ä¸€å®šæ°´å‡†å¾Œéƒ½ä¼šå‡ºç°ä¸€äº›â€œæœ‰ç—…â€çš„ç°è±¡ã€‚è¿™ä¸ªæ—¶å€™è¦æ²‰ä½æ°”ï¼Œå®šä¸‹å¿ƒæ¥å¤šåšäº›é™åŠŸæ¥å¢åŠ è‡ªå·±çš„æ°”è¡€ï¼Œä»¥å°½å¿«åº¦è¿‡è¿™ä¸ªæ—¶æœŸã€‚ 17ã€äººè¿èƒŒäº†å…»ç”Ÿæ³•åˆ™ï¼Œè™½ä¸ä¸€å®šä¼šç«‹å³å¾—ç—…ï¼Œä½†ä¸€æ—¦å½¢æˆä¹ æƒ¯ï¼Œå°±ä¼šå¤§å¤§å¢åŠ å¾—ç—…çš„æœºä¼šã€‚è¿™å°±å’Œäº¤é€šè§„åˆ™ä¸€æ ·ï¼Œä½ è¿èƒŒäº†äº¤é€šè§„åˆ™ï¼Œä¸ä¸€å®šä¼šå‡ºäº‹æ•…ï¼Œä½†å…¶å±é™©æ€§æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ 18ã€äººä¸ºä»€éº½å¿…é¡»ä¿æŒä¸€å®šçš„é¥¥æ¸´æ‰æ˜¯å¯¹å…»ç”Ÿæœ‰åˆ©å‘¢?å…¶å®è¿™å°±æ˜¯â€œè™šâ€çš„å¦™ç”¨ã€‚é“å®¶è®²ï¼Œè™šåˆ™çµã€‚è¿™å’Œè°¦è™šä½¿äººè¿›æ­¥ï¼Œè‡ªæ»¡ä½¿äººè½å¾Œä¸€æ ·ï¼Œæ‰€ä»¥äººå¿…é¡»ç»å¸¸ä¿æŒâ€œè™šçµâ€çš„çŠ¶æ€ï¼Œæ‰èƒ½æ—¶æ—¶ä¿æŒæ¸…é†’ï¼Œä¿æŒå¥åº·ã€‚ 22ã€å…¶å®ï¼Œè®¸å¤šçœŸæ­£çš„å‘ç°å’Œå‘æ˜ï¼Œæ‰€éœ€è¦çš„ä¸æ˜¯æ‰€è°“ç³»ç»Ÿçš„ä¹¦æœ¬çŸ¥è¯†;æ°æ°ç›¸åï¼Œä¸€ä¸ªæ²¡æœ‰å—è¿‡ä»»ä½•ç³»ç»Ÿæ•™è‚²ï¼Œä½†æ‚Ÿæ€§æé«˜çš„ã€å…·æœ‰å¼€æ”¾æ€ç»´çš„äººï¼Œä»–å¾€å¾€çœŸæ­£æ‚Ÿåˆ°çœŸç›¸ã€‚ 23ã€äººç”Ÿæœ€å¿Œæ˜¯ä¸ªä¹±å­—ï¼Œå¿ƒä¹±äº†ï¼Œå¯¹å¤–å¯ä»¥ç´Šäº‹ï¼Œå¯¹å†…å¯ä»¥æ‰“æ‰°è¡€æ°”ï¼Œä½¿å¤±æ­£å¸¸ã€‚å‡¡æ¼æ€’ææ€–å–œå¿§æ˜ç–‘ï¼Œéƒ½æ˜¯ä¹±ï¼Œä¸ºå¤šç—…çŸ­å¯¿çš„æ ¹æºï¼Œä¸ä½†å…»ç—…æ—¶ä¸åº”ä¹±ï¼Œå³å¹³å±…æ—¶äº¦å¿Œå¿ƒä¹±ã€‚ 24ã€å¤šå—”ä¼¤è‚ï¼Œå¤šæ·«ä¼¤è‚¾ï¼Œå¤šé£Ÿåˆä¼¤è„¾èƒƒã€‚å¿§æ€ä¼¤è„¾ï¼Œæ„¤æ€’ä¼¤è‚ï¼ŒåŠ³è™‘ä¼¤ç¥ã€‚ 25ã€èº«ç—…ä¹‹èµ·ï¼Œæ— ä¸ç”±å¿ƒè™šå¼±ï¼Œå¤–é‚ªä¹˜å…¥ã€‚è€Œå¿ƒè™šæ°”å¼±ï¼Œæ¯ç”±å¿ƒé­‚æ¼ä¹±ï¼ŒçœŸä½“ä¸å……ï¼Œå‘ç°ç§ç§ä¸å®‰ã€‚è´ªé£Ÿè´ªèƒœè´ªå¾—è´ªä¹é€¸ï¼Œçš†è¶³ä»¥è‡´ç—…ã€‚ä»¥è´ªä¹‹ä¸å¾—ï¼Œæ–¼æ˜¯ä¹å—”ã€‚è´ªå—”å¯ä½¿å¿ƒè¡æ°”ä¿ƒï¼Œèƒ†æƒŠè‚æ—ºï¼Œå…­è„‰éœ‡åŠ¨ï¼Œäº”è„æ²¸è…¾ï¼Œå¤–é‚ªåŒæ—¶å…¥ï¼Œæ­¤ç—…ä¹‹èµ·å› ã€‚ 26ã€å‡¡äººæ¬²æ±‚é•¿å¯¿ï¼Œåº”å…ˆé™¤ç—…ã€‚æ¬²æ±‚é™¤ç—…ï¼Œå½“æ˜ç”¨æ°”ã€‚æ¬²æ˜ç”¨æ°”ï¼Œå½“å…ˆå…»æ€§ã€‚å…»æ€§ä¹‹æ³•ï¼Œå½“å…ˆè°ƒå¿ƒã€‚ 27ã€äººå—äº”è¡Œä¹‹æ°”è€Œæ²»ç”Ÿï¼Œæ•…è‚‰èº«ä»¥æ°”ä¸ºä¸»ã€‚æ°”äºåˆ™ç—…ï¼Œæ°”æ»åˆ™ç—…ã€‚æ¬²æ²»å…¶ç—…ï¼Œå…ˆæ²»å…¶æ°”ã€‚ 28ã€æ°”ä»¥è¡Œè¡€ï¼Œè¡€ä»¥è¡¥æ°”ï¼ŒäºŒè€Œä¸€ä¹Ÿã€‚å‡¡äººè§†åˆ™ä¼¤è¡€ã€ä¹…å§ä¼¤æ°”ã€ä¹…åä¼¤è‚‰ã€ä¹…ç«‹ä¼¤éª¨ã€ä¹…è¡Œä¼¤ç­‹ï¼Œä¸ƒæƒ…å…­æ¬²ä¹‹è¿‡åˆ™ä¼¤å…ƒæ°”ã€ä¼¤å¿ƒè‚¾ã€‚ç›¸ç«æ—ºï¼ŒçœŸé˜³è€—ï¼Œ 29ã€æ²»äº”è„ä¹‹ç—…ï¼Œè«å…ˆæ–¼è¡¥æ°”ã€‚è‚¾çŠ¹äºŸç„‰ã€‚è¡¥æ°”åœ¨å‹¿åŠ¨å¿ƒï¼Œå¿ƒåŠ¨åˆ™è‚æ—ºï¼Œå„è„‰éœ‡æƒŠï¼ŒçœŸæ°´è€—æŸã€‚å¿ƒä¸ºæ‰‡ï¼Œä¸»å¼•é£ã€‚é£åŠ¨åˆ™ç«æ—ºï¼Œç«æ—ºåˆ™æ°´å¹²ï¼Œæ°´å¹²åˆ™åœ°æŸã€‚ 30ã€å¿ƒå®šç¥ä¸€ï¼Œå—æ²»è€…ä¿¡åšå¿ƒä¸“ï¼Œä¸¤å¿ƒç›¸åˆï¼Œå¯ä»¥ç»Ÿæ²»ç™¾ç—…ï¼Œæ— ä¸ç¥æ•ˆã€‚ ç”·äººå¥åº·å…»ç”Ÿçš„å››ä¸ªåŸºæœ¬ç‚¹ 1ã€å¥½ä¹ æƒ¯çš„å…»æˆ æ—¥å¸¸ç”Ÿæ´»ä¸­çš„ä¸€äº›å¥½ä¹ æƒ¯çš„å…»æˆï¼Œä¹Ÿæ˜¯ç”·æ€§ä¿å¥çš„å…³é”®ï¼Œå¹³æ—¶ç”Ÿæ´»ä¸­åº”å¢å¼ºä¿å¥æ„è¯†ï¼ŒåŠ å¼ºå¥åº·ç»´æŠ¤;å‡å°‘å¥åº·å¨èƒå› ç´ ï¼Œæ”¹å˜ä¸è‰¯ç”Ÿæ´»ä¹ æƒ¯;æ ‘ç«‹ç”Ÿæ´»ä¿¡å¿ƒï¼Œå¯»æ±‚æœ‰æ•ˆå¸®åŠ©;æ¶ˆé™¤é™ˆæ—§çš„ä¿å¥è§‚å¿µï¼ŒçŸ«æ­£é”™è¯¯çš„å¥åº·è®¤çŸ¥ã€‚ 2ã€å¿…ä¸å¯ç¼ºçš„æ°´ é¦–å…ˆæ˜¯å¥åº·ç”·æ€§å¿…ä¸å¯ç¼ºçš„æ°´ã€‚å°¤å…¶æ˜¯è‚Œè‚‰å‘è¾¾çš„ç”·æ€§æ›´åº”å¤šé¥®æ°´ã€‚è‚Œè‚‰ä¸­çš„æ°´å«é‡æ¯”è„‚è‚ªå¤š2å€ã€‚æ°´å¯ä»¥ä¿è¯å…³èŠ‚çš„æ»‘æ¶¦ï¼Œè°ƒèŠ‚ä½“æ¸©ï¼Œå‡å°‘æ³Œå°¿ç³»ç‚ç—‡å’Œç»“çŸ³çš„å‘ç—…ï¼Œè¿˜ä¸ºä½“å†…å„ç»„ç»‡æä¾›çŸ¿ç‰©è´¨ã€‚ä¸­ç­‰ä¸ªå­çš„ç”·äººï¼Œæ¯å¤©è‡³å°‘åº”è¡¥å……1500â€”2000æ¯«å‡æ°´ï¼Œå¤©æ°”ç‚çƒ­åŠçˆ±è¿åŠ¨çš„ç”·äººï¼Œæ›´åº”å¤šé¥®æ°´ã€‚ 3ã€ç»´ç”Ÿç´ çš„æ‘„å…¥ åœ¨ç”·æ€§ä¿å¥çš„è¿‡ç¨‹ä¸­ï¼Œæ³¨æ„å¯¹ç»´ç”Ÿç´ çš„æ‘„å…¥åŒæ ·å¾ˆé‡è¦ã€‚ç»´ç”Ÿç´ Cæ˜¯ç»´ç”Ÿç´ ä¹‹â€œç‹â€ï¼Œèƒ½å¢å¼ºå¯¹æ„ŸæŸ“çš„æŠµæŠ—åŠ›ï¼Œé˜²æ­¢è‚¿ç˜¤ã€å¿ƒè¡€ç®¡ç–¾ç—…å’Œä¸­é£ï¼Œå¯¹ç‰™é½¿ã€ç‰™é¾ˆã€çœ¼ç›æœ‰ç›Šï¼Œæœ‰åŠ©äºå»¶ç¼“è¡°è€ï¼Œé˜²æ­¢å“®å–˜å’Œç”·æ€§ä¸è‚²ã€‚é’æ¤’åŠè‰è“ã€æ¡”å­ã€æŸ æª¬ç­‰æ°´æœä¸­å«æœ‰ä¸°å¯Œçš„ç»´ç”Ÿç´ Cã€‚ä¸“å®¶è®¤ä¸ºï¼ŒæŠ½çƒŸçš„äººåº”æ‘„å–æ›´å¤šçš„ç»´ç”Ÿç´ Cã€‚ ä¸€èˆ¬çš„è”¬æœä¸­éƒ½å«æœ‰å¤§é‡çš„ç»´ç”Ÿç´ Cï¼Œå°¤å…¶åƒèƒ¡èåœã€ç»¿è‰²è”¬èœã€è‰è“ã€æ¢¨ã€é¦™è•‰ã€è‹¹æœä¸­é™¤äº†å«ç»´ç”Ÿç´ Cï¼Œè¿˜å«æœ‰ä¸°å¯Œçš„çº¤ç»´ç´ A;ç»´ç”Ÿç´ Aæœ‰åŠ©äºæé«˜å…ç–«åŠ›ã€ä¿æŠ¤è§†åŠ›ï¼Œè¿˜æœ‰é˜²ç™ŒåŠŸæ•ˆã€‚èƒ¡èåœã€é±¼ç±»ã€åŠ¨ç‰©è‚è„ã€å¥¶åˆ¶å“ã€æåŠé¦™ç“œä¸­å«æœ‰ç»´ç”Ÿç´ A;ç»´ç”Ÿç´ B6èƒ½å‡å°‘è‚¾ç»“çŸ³çš„å‘ç”Ÿç‡ï¼Œåƒé¦™è•‰ã€é±¼ã€é¸¡è‚‰ã€åŠ¨ç‰©è‚è„ã€åœŸè±†ã€ç²—ç²®åŠè‘µèŠ±ç±½ä¸­ä¹Ÿå«æœ‰ç»´ç”Ÿç´ B6ã€‚ 4ã€å¾®é‡é‡‘å±å…ƒç´  å¾®é‡é‡‘å±å…ƒç´ æ˜¯ç”·æ€§å¥åº·å¿…ä¸å¯å°‘çš„ã€‚æ¯ä¸ªç”·äººéƒ½å¸Œæœ›ä¿æŒæ€§ç”Ÿæ´»æ´»åŠ›ï¼Œå¾®é‡å…ƒç´ é”Œå¯¹æ­¤å¤§æœ‰è£¨ç›Šã€‚é”Œç¼ºä¹å®¹æ˜“å¯¼è‡´é˜³èå‘ç”Ÿã€‚ç‰›è‚‰ã€é¸¡è‚‰ã€æµ·äº§å“ã€ç²—ç²®å’Œè±†ç±»æ¤ç‰©ä¸­å«æœ‰ä¸°å¯Œçš„é”Œå…ƒç´ ;é™¤é”Œä¹‹å¤–ï¼Œé•åœ¨è¿™æ–¹é¢çš„ä½œç”¨ä¹Ÿä¸å°ï¼Œå®ƒèƒ½å¢å¼ºç²¾å­çš„æ´»åŠ›ï¼Œä»è€Œå¢åŠ å—å­•æˆåŠŸçš„æœºä¼šã€‚ é¦™è•‰ã€è±†ç±»ã€åœŸè±†ã€ç‡•éº¦ã€å¶ç±»è”¬èœã€æµ·äº§å“ç­‰é£Ÿç‰©ä¸­å¯Œå«é•å…ƒç´ ;å½“ç„¶é•å¯¹ä¿è¯å¿ƒè„çš„æ­£å¸¸è¿è½¬ä¸å¯ç¼ºã€‚å®ƒæœ‰åŠ©äºé™ä½è¡€å‹ï¼Œå‡å°‘æ‚£å¿ƒè„ç—…çš„å±é™©;é“¬å¯¹ç”·æ€§æ¥è¯´ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ä¸€ç§å…ƒç´ ã€‚å®ƒæœ‰åŠ©äºä½¿ç”·æ€§ä½“å†…çš„èƒ†å›ºé†‡ä¿æŒæ­£å¸¸æ°´å¹³ï¼Œä¿ƒè¿›è‚Œè‚‰ç”Ÿé•¿ï¼Œå¢å¼ºæœºä½“çš„è€åŠ›ã€‚ ","date":1434614719,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1434614719,"objectID":"bda9fa4c0d5b9193c3c748938a619631","permalink":"/blog/2015/06/18/nan-ren-jian-kang-yang-sheng-zhuan/","publishdate":"2015-06-18T16:05:19+08:00","relpermalink":"/blog/2015/06/18/nan-ren-jian-kang-yang-sheng-zhuan/","section":"archives","summary":"å’±ä»¬éƒ½æƒ³ç€èº«ä½“å¥åº·ï¼Œæ°”è¡€é€šç•…ï¼Œç²¾æ°”ç¥åè¶³ï¼Œå¯æ˜¯éšç€å¹´é¾„çš„å¢é•¿ï¼Œæˆ‘ä»¬å‘ç° å–é…’ã€æŠ½çƒŸã€ç†¬å¤œã€å¤œé£Ÿã€é…—é…’ç­‰æ— ä¸åœ¨ä¾µèš€ç€æˆ‘ä»¬å¥åº·çš„èº«ä½“ã€‚æˆ‘ä»¬éœ€è¦å¥åº· çš„ä½œæ¯ä¹ æƒ¯å’Œç”Ÿæ´»ä¹ æƒ¯ï¼Œæ¥ç»´æŒæˆ‘ä»¬çš„å¥åº·ã€‚ 1. ä½œæ¯æ—¶é—´ 2. è¡¥å……è¥å…» 3. é€‚å½“è¿åŠ¨ ","tags":null,"title":"ç”·äººå¥åº·å…»ç”Ÿ(è½¬)","type":"archives"},{"authors":null,"categories":["Linux"],"content":"æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç»Ÿè®¡ä¸€ç¯‡è®ºæ–‡å½“ä¸­æŸä¸ªå­—ç¬¦ä¸²çš„å‡ºç°é¢‘ç‡ã€‚ è¯•éªŒäº†ï¼Œgrepï¼Œawkï¼Œsedï¼Œwc -lç­‰ï¼Œæœ€ç»ˆå‘ç°awkçš„RS å®Œç¾çš„è§£å†³äº†é—®é¢˜ã€‚\nRSçš„ç”¨æ³• ç»Ÿè®¡æ¬¡æ•°\nå…³é”®å­—æ–‡ä»¶ï¼ˆå¯ä»¥ä¸æ–­çš„æ·»åŠ ä½ è¦åˆ†æçš„å­—æ®µ):\né£åŠ›æœº æ°”åŠ¨åŠ› å¤±è° åèˆª é˜µé£ æ‰­çŸ© åŠŸç‡ é£åˆ‡å˜ è½¬é€Ÿ é£é€Ÿ å‡åŠ›ç³»æ•° é˜»åŠ›ç³»æ•° å‡é˜»æ¯”  çŸ­çŸ­çš„å‡ è¡Œshellè¯­å¥è§£å†³äº†é—®é¢˜ï¼Œä¼˜é›…ã€‚ shellæ–‡ä»¶ï¼š\n#!/bin/bash - #=============================================================================== # # FILE: analysis.sh # # USAGE: ./analysis.sh # # DESCRIPTION: # # OPTIONS: --- # REQUIREMENTS: --- # BUGS: --- # NOTES: --- # AUTHOR: Ye Zhaoliang (), zhaoturkkey@163.com # ORGANIZATION: YZL # CREATED: 2015å¹´06æœˆ14æ—¥ 01:18 # REVISION: --- #=============================================================================== while read lines do awk -v RS=\u0026quot;$lines\u0026quot; 'END{print RS,--NR}' qiu.org #å‡å‡è¡¨ç¤ºå‡1 done \u0026lt; \u0026quot;analysis.data\u0026quot;  æœç´¢å†…å®¹  grep -n \u0026ldquo;å†…å®¹å…³é”®å­—\u0026rdquo; æ–‡ä»¶åè·¯å¾„ awk \u0026lsquo;{if($0~å…³é”®å­—){}}\u0026rsquo;  ç­‰ã€‚ 3. sed \u0026lsquo;/å…³é”®å­—/p\u0026rsquo;\nç»“æœ â”Œâ”€[root][javazhao-N53SM][/paper] â””â”€â sh analysis.sh é£åŠ›æœº 379 æ°”åŠ¨åŠ› 397 å¤±è° 31 åèˆª 353 é˜µé£ 63 æ‰­çŸ© 171 åŠŸç‡ 139 é£åˆ‡å˜ 59 è½¬é€Ÿ 172 é£é€Ÿ 353 å‡åŠ›ç³»æ•° 27 é˜»åŠ›ç³»æ•° 13 å‡é˜»æ¯” 2 ","date":1434217824,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1434217824,"objectID":"7cf90c42511aeed6635a718d17fd512c","permalink":"/blog/2015/06/14/zi-fu-chuan-guan-jian-zi-de-chu-xian-pin-lu-tong-ji/","publishdate":"2015-06-14T01:50:24+08:00","relpermalink":"/blog/2015/06/14/zi-fu-chuan-guan-jian-zi-de-chu-xian-pin-lu-tong-ji/","section":"archives","summary":"æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç»Ÿè®¡ä¸€ç¯‡è®ºæ–‡å½“ä¸­æŸä¸ªå­—ç¬¦ä¸²çš„å‡ºç°é¢‘ç‡ã€‚ è¯•éªŒäº†ï¼Œgrepï¼Œawkï¼Œsedï¼Œwc -lç­‰ï¼Œæœ€ç»ˆå‘ç°awkçš„RS å®Œç¾çš„è§£å†³äº†é—®é¢˜ã€‚\n","tags":null,"title":"å­—ç¬¦ä¸²å…³é”®å­—çš„å‡ºç°é¢‘ç‡ç»Ÿè®¡","type":"archives"},{"authors":null,"categories":["Linux"],"content":"åœ¨Linuxåœ°ä¸‹ï¼Œè„šæœ¬(script)ç¼–ç¨‹æ˜¯ä¸€ä¸ªå¿«æ·çš„æ–¹å¼å’Œå†…æ ¸(kernel)è¿›è¡Œäº¤æµã€‚ é€šå¸¸åŒ…å«ä»¥ä¸‹å‡ ç§è„šæœ¬ç¼–ç¨‹:\n bash shell(å…¶ä»–shellä¹Ÿç±»ä¼¼) perl python ruby ç­‰ç­‰  æˆ‘ç°åœ¨å‘ç°æˆ‘ä»¬æ—¢å¯ä»¥å¤„ç†æ–‡ä»¶ä¸­çš„ä¿¡æ¯ï¼Œä¹ŸåŒæ—¶å¯ä»¥å¤„ç†ç¡¬ä»¶çš„ä¸œè¥¿ï¼Œè¿™äº›å…¶å®æˆ‘å°±æ¸…æ¥šï¼Œæ¯”å¦‚linuxæŠŠå¾ˆå¤šçš„è®¾å¤‡éƒ½è™šæ‹Ÿä¸ºæ–‡ä»¶ï¼Œåªä¸è¿‡ä¹‹å‰ä¸çŸ¥é“æ€ä¹ˆç”¨ã€‚ æ¥è§¦åˆ°shellä¹‹åï¼Œæˆ‘æ‰å‘ç°æ¯”å¦‚é”®ç›˜çš„ä¸œè¥¿éƒ½å¯ä»¥è¢«å†™è¿›è„šæœ¬çš„ï¼Œä¹Ÿå°±æ˜¯ç”µè„‘ä¸Šçš„å¤–æ¥è®¾å¤‡ä¹Ÿæ˜¯å¯ä»¥è¢«å†™è¿›ç¨‹åºå½“ä¸­çš„ï¼Œå½“ä½œè®¡ç®—æœºé‡Œé¢çš„ä¸€ç§æ¦‚å¿µã€‚\nvimçš„è„šæœ¬åŒ–æ“ä½œ æŠŠä¸‹æ®µçš„ä»£ç ä¿å­˜ä¸ºc.sh,ä¸»è¦åŠŸèƒ½æ˜¯æŠŠåŒä¸ªé™¤å·æ”¹ä¸ºäº•å·ï¼Œå½“ä½œæ³¨é‡Šã€‚ è¿™æ ·å°±å¯ä»¥æŠŠvimçš„actionè¡Œä¸ºå½•ä¸ºè„šæœ¬ã€‚\nvim ./cData \u0026lt;\u0026lt;VIM \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 :%s#//#\\## :wq VIM   /dev/null 2\u0026gt;\u0026amp;1 æ‹†ä¸ºå››éƒ¨åˆ†æ¥åˆ†æä¸‹:\n  é¦–å…ˆ 0\u0026gt; è¡¨ç¤ºstdinæ ‡å‡†è¾“å…¥; 1\u0026gt; è¡¨ç¤ºstdoutæ ‡å‡†è¾“å‡º; 2\u0026gt; è¡¨ç¤ºstderré”™è¯¯è¾“å‡º; ç¬¦å· \u0026gt; ç­‰ä»·äº 1\u0026gt; (ç³»ç»Ÿé»˜è®¤ä¸º1,çœç•¥äº†å…ˆ); æ‰€ä»¥\u0026rdquo;\u0026gt;/dev/null\u0026rdquo;ç­‰åŒäº \u0026ldquo;1\u0026gt;/dev/null\u0026rdquo; /dev/null ä»£è¡¨ç©ºè®¾å¤‡æ–‡ä»¶ \u0026amp; å¯ä»¥ç†è§£ä¸ºæ˜¯\u0026rdquo;ç­‰åŒäº\u0026rdquo;çš„æ„æ€ï¼Œ2\u0026gt;\u0026amp;1ï¼Œå³è¡¨ç¤º2çš„è¾“å‡ºé‡å®šå‘ç­‰åŒäº1 å› æ­¤ï¼Œ\u0026gt;/dev/null 2\u0026gt;\u0026amp;1 ä¹Ÿå¯ä»¥å†™æˆâ€œ1\u0026gt; /dev/null 2\u0026gt; \u0026amp;1â€  é‚£ä¹ˆæœ¬æ–‡æ ‡é¢˜çš„è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸ºï¼š 1\u0026gt;/dev/null ï¼šé¦–å…ˆè¡¨ç¤ºæ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°ç©ºè®¾å¤‡æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸è¾“å‡ºä»»ä½•ä¿¡æ¯åˆ°ç»ˆç«¯ï¼Œè¯´ç™½äº†å°±æ˜¯ä¸æ˜¾ç¤ºä»»ä½•ä¿¡æ¯ã€‚ 2\u0026gt;\u0026amp;1 ï¼šæ¥ç€ï¼Œå°†æ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘ åˆ° æ ‡å‡†è¾“å‡ºï¼Œå› ä¸ºä¹‹å‰æ ‡å‡†è¾“å‡ºå·²ç»é‡å®šå‘åˆ°äº†ç©ºè®¾å¤‡æ–‡ä»¶ï¼Œæ‰€ä»¥æ ‡å‡†é”™è¯¯è¾“å‡ºä¹Ÿé‡å®šå‘åˆ°ç©ºè®¾å¤‡æ–‡ä»¶ã€‚\nç±»ä¼¼è¿˜æœ‰cat\ncat \u0026gt;\u0026gt; /etc/man.config \u0026lt;\u0026lt;EOF MANPATH /srv/httpd/man/ EOF cat \u0026gt;\u0026gt; /etc/profile.d/http.sh \u0026lt;\u0026lt;EOF export PATH=/srv/httpd/bin:$PATH EOF  mysqlçš„è„šæœ¬åŒ–æ“ä½œ mysql -u$user -p$password \u0026lt;\u0026lt; EOF FLUSH TABLES WITH READ LOCK; system lvcreate --snapshot -n $snap -L$snapsize /dev/$vg/$lv; UNLOCK TABLES; quit EOF  gnuplotçš„è„šæœ¬åŒ–æ“ä½œ gnuplot\u0026lt;\u0026lt;EOF set ter 'png' set out '$i/cpUp.png' plot \u0026quot;$i/cpUp.txt\u0026quot; t 'cp' w lp EOF  è·å¾—é”®ç›˜è¾“å…¥çš„ä¸¤ç§æ–¹å¼ ä½¿ç”¨read read -p \u0026quot;input a val:\u0026quot; val echo $val  ä½¿ç”¨stty get_char(){ SAVEDSTTY=`stty -g` stty -echo stty raw dd if=/dev/tty bs=1 count=1 2\u0026gt; /dev/null stty -raw stty echo stty $SAVEDSTTY } echo \u0026quot;Press any key to continue...\u0026quot; char=`get_char` read k echo $k  ä¸é”™çš„ä¸€ä¸ªèœå•è¾“å…¥ #å­—é¢œè‰²ï¼š30â€”â€“37 #å­—èƒŒæ™¯é¢œè‰²èŒƒå›´ï¼š40â€”â€“47 while : do echo \u0026quot;\\033[5m 1) china \\033[0m\u0026quot; echo \u0026quot;\\033[32m 2) America \\033[0m\u0026quot; echo \u0026quot;\\033[33m 3) Japan \\033[0m\u0026quot; echo \u0026quot;\\033[34m 4) England \\033[0m\u0026quot; echo \u0026quot;\\033[35m 5) France \\033[0m\u0026quot; echo \u0026quot;\\033[36m 6) Spain \\033[0m\u0026quot; echo \u0026quot;\\033[37m 7) Brazil \\033[0m\u0026quot; echo \u0026quot;\\033[40;37m 8) Turkey \\033[0m\u0026quot; echo \u0026quot;\\033[41;37m 9) Italy \\033[0m\u0026quot; echo \u0026quot;\\033[42;37m 10) Germany \\033[0m\u0026quot; echo \u0026quot;\\033[43;37m 11) Arabi \\033[0m\u0026quot; read -p \u0026quot;Please Enter the number [1-11]\u0026quot; val case $val in 1) echo \u0026quot;\\033[5m 1) You input the --\u0026gt; china\\n \\033[0m\u0026quot; ;; 2) echo \u0026quot;\\033[32m 2) You input the --\u0026gt; America \\n\\033[0m\u0026quot; ;; 3) echo \u0026quot;\\033[33m 3) You input the --\u0026gt; Japan\\n \\033[0m\u0026quot; ;; 4) echo \u0026quot;\\033[34m 4) You input the --\u0026gt; England \\n\\033[0m\u0026quot; ;; 5) echo \u0026quot;\\033[35m 5) You input the --\u0026gt; France \\n \\033[0m\u0026quot; ;; 6) echo \u0026quot;\\033[36m 6) You input the --\u0026gt; Spain\\n \\033[0m\u0026quot; ;; 7) echo \u0026quot;\\033[37m 7) You input the --\u0026gt; Brazil\\n \\033[0m\u0026quot; ;; 8) echo \u0026quot;\\033[40;37m 8) You input the --\u0026gt; Turkey\\n \\033[0m\u0026quot; ;; 9) echo \u0026quot;\\033[41;37m 9) You input the --\u0026gt; Italy\\n \\033[0m\u0026quot; ;; 10) echo \u0026quot;\\033[42;37m 10) You input the --\u0026gt; Germany\\n \\033[0m\u0026quot; ;; 11) echo \u0026quot;\\033[43;37m 11) You input the --\u0026gt; Arabi\\n \\033[0m\u0026quot; ;; *) exit 0 ;; esac echo \u0026quot;\u0026quot; done  æŒç»­æ›´æ–°æœ¬æ–‡çš„scriptçš„å†…å®¹\u0026hellip;.\n","date":1434196858,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1434196858,"objectID":"e7b184d4a067e6bbb638eadb155d50b9","permalink":"/blog/2015/06/13/ba-shi-jian-he-jian-pan-xie-jin-script/","publishdate":"2015-06-13T20:00:58+08:00","relpermalink":"/blog/2015/06/13/ba-shi-jian-he-jian-pan-xie-jin-script/","section":"archives","summary":"åœ¨Linuxåœ°ä¸‹ï¼Œè„šæœ¬(script)ç¼–ç¨‹æ˜¯ä¸€ä¸ªå¿«æ·çš„æ–¹å¼å’Œå†…æ ¸(kernel)è¿›è¡Œäº¤æµã€‚ é€šå¸¸åŒ…å«ä»¥ä¸‹å‡ ç§è„šæœ¬ç¼–ç¨‹:\n bash shell(å…¶ä»–shellä¹Ÿç±»ä¼¼) perl python ruby ç­‰ç­‰  æˆ‘ç°åœ¨å‘ç°æˆ‘ä»¬æ—¢å¯ä»¥å¤„ç†æ–‡ä»¶ä¸­çš„ä¿¡æ¯ï¼Œä¹ŸåŒæ—¶å¯ä»¥å¤„ç†ç¡¬ä»¶çš„ä¸œè¥¿ï¼Œè¿™äº›å…¶å®æˆ‘å°±æ¸…æ¥šï¼Œæ¯”å¦‚linuxæŠŠå¾ˆå¤šçš„è®¾å¤‡éƒ½è™šæ‹Ÿä¸ºæ–‡ä»¶ï¼Œåªä¸è¿‡ä¹‹å‰ä¸çŸ¥é“æ€ä¹ˆç”¨ã€‚ æ¥è§¦åˆ°shellä¹‹åï¼Œæˆ‘æ‰å‘ç°æ¯”å¦‚é”®ç›˜çš„ä¸œè¥¿éƒ½å¯ä»¥è¢«å†™è¿›è„šæœ¬çš„ï¼Œä¹Ÿå°±æ˜¯ç”µè„‘ä¸Šçš„å¤–æ¥è®¾å¤‡ä¹Ÿæ˜¯å¯ä»¥è¢«å†™è¿›ç¨‹åºå½“ä¸­çš„ï¼Œå½“ä½œè®¡ç®—æœºé‡Œé¢çš„ä¸€ç§æ¦‚å¿µã€‚\n","tags":null,"title":"æŠŠæ—¶é—´å’Œé”®ç›˜å†™è¿›script","type":"archives"},{"authors":null,"categories":["python"],"content":"æˆ‘æœ‰ä¸¤å°ç”µè„‘ï¼Œéƒ½æœ‰IPï¼Œå¤„äºç›¸åŒçš„å±€åŸŸç½‘ã€‚ æˆ‘æƒ³ä¼ é€’æ–‡ä»¶ï¼Œç„¶è€Œæˆ‘åˆä¸æƒ³ç”¨Uç›˜ï¼Œæˆ‘ä¹Ÿä¸æƒ³ç”¨teamviewï¼Œæ›´ä¸æƒ³ç”¨æ¯”å¦‚ç™¾åº¦ç›˜ã€æ–°æµªç›˜ï¼Œæœ‰é“äº‘ç¬”è®°ç­‰ã€‚ æˆ‘æƒ³è¦ç”¨å‘½ä»¤è¡Œè§£å†³ã€‚pythonæä¾›äº†ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ pythonå†…éƒ¨æ”¯æŒSimplehttpserveræœåŠ¡ï¼Œæ‰€ä»¥åªè¦è£…ä¸Špythonå³å¯\npython Simplehttpserver  é»˜è®¤æµè§ˆå™¨æ‰“å¼€ 127.0.0.1:8000 å½“ç„¶ä½ ä¹Ÿæ˜¯å¯ä»¥æŒ‡å®šç«¯å£æ¯”å¦‚801\npython Simplehttpserver -m 801  æ­¤æ—¶æ‰“å¼€æµè§ˆå™¨è¾“å…¥ï¼š 127.0.0.1:801\nå½“ç„¶å¦‚æœæœ¬æœºçš„Ipä¸º121.195.172.217é‚£ä¹ˆï¼Œå¦ä¸€å°ç”µè„‘çš„æµè§ˆå™¨åªéœ€è¦è¾“å…¥ 121.195.172.217:801å³å¯æ‰“å¼€æœ¬æœºçš„å…±äº«ç›®å½•ï¼Œéå¸¸æ–¹ä¾¿ã€‚\nå‡çº§ç‰ˆçš„Simplehttpserver æ”¯æŒä¸Šä¼  æŠŠä¸‹é¢çš„æºä»£ç ä¿å­˜ä¸ºSimplehttpserverwithupload.pyå³å¯ï¼Œç„¶åè¿è¡Œä»–\n#!/usr/bin/env python \u0026quot;\u0026quot;\u0026quot;Simple HTTP Server With Upload. This module builds on BaseHTTPServer by implementing the standard GET and HEAD requests in a fairly straightforward manner. \u0026quot;\u0026quot;\u0026quot; __version__ = \u0026quot;0.1\u0026quot; __all__ = [\u0026quot;SimpleHTTPRequestHandler\u0026quot;] __author__ = \u0026quot;bones7456\u0026quot; __home_page__ = \u0026quot;http://li2z.cn/\u0026quot; import os import posixpath import BaseHTTPServer import urllib import cgi import shutil import mimetypes import re try: from cStringIO import StringIO except ImportError: from StringIO import StringIO class SimpleHTTPRequestHandler(BaseHTTPServer.BaseHTTPRequestHandler): \u0026quot;\u0026quot;\u0026quot;Simple HTTP request handler with GET/HEAD/POST commands. This serves files from the current directory and any of its subdirectories. The MIME type for files is determined by calling the .guess_type() method. And can reveive file uploaded by client. The GET/HEAD/POST requests are identical except that the HEAD request omits the actual contents of the file. \u0026quot;\u0026quot;\u0026quot; server_version = \u0026quot;SimpleHTTPWithUpload/\u0026quot; + __version__ def do_GET(self): \u0026quot;\u0026quot;\u0026quot;Serve a GET request.\u0026quot;\u0026quot;\u0026quot; f = self.send_head() if f: self.copyfile(f, self.wfile) f.close() def do_HEAD(self): \u0026quot;\u0026quot;\u0026quot;Serve a HEAD request.\u0026quot;\u0026quot;\u0026quot; f = self.send_head() if f: f.close() def do_POST(self): \u0026quot;\u0026quot;\u0026quot;Serve a POST request.\u0026quot;\u0026quot;\u0026quot; r, info = self.deal_post_data() print r, info, \u0026quot;by: \u0026quot;, self.client_address f = StringIO() f.write('\u0026lt;!DOCTYPE html PUBLIC \u0026quot;-//W3C//DTD HTML 3.2 Final//EN\u0026quot;\u0026gt;') f.write(\u0026quot;\u0026lt;html\u0026gt;\\n\u0026lt;title\u0026gt;Upload Result Page\u0026lt;/title\u0026gt;\\n\u0026quot;) f.write(\u0026quot;\u0026lt;body\u0026gt;\\n\u0026lt;h2\u0026gt;Upload Result Page\u0026lt;/h2\u0026gt;\\n\u0026quot;) f.write(\u0026quot;\u0026lt;hr\u0026gt;\\n\u0026quot;) if r: f.write(\u0026quot;\u0026lt;strong\u0026gt;Success:\u0026lt;/strong\u0026gt;\u0026quot;) else: f.write(\u0026quot;\u0026lt;strong\u0026gt;Failed:\u0026lt;/strong\u0026gt;\u0026quot;) f.write(info) f.write(\u0026quot;\u0026lt;br\u0026gt;\u0026lt;a href=\\\u0026quot;%s\\\u0026quot;\u0026gt;back\u0026lt;/a\u0026gt;\u0026quot; % self.headers['referer']) f.write(\u0026quot;\u0026lt;hr\u0026gt;\u0026lt;small\u0026gt;Powered By: bones7456, check new version at \u0026quot;) f.write(\u0026quot;\u0026lt;a href=\\\u0026quot;http://li2z.cn/?s=SimpleHTTPServerWithUpload\\\u0026quot;\u0026gt;\u0026quot;) f.write(\u0026quot;here\u0026lt;/a\u0026gt;.\u0026lt;/small\u0026gt;\u0026lt;/body\u0026gt;\\n\u0026lt;/html\u0026gt;\\n\u0026quot;) length = f.tell() f.seek(0) self.send_response(200) self.send_header(\u0026quot;Content-type\u0026quot;, \u0026quot;text/html\u0026quot;) self.send_header(\u0026quot;Content-Length\u0026quot;, str(length)) self.end_headers() if f: self.copyfile(f, self.wfile) f.close() def deal_post_data(self): boundary = self.headers.plisttext.split(\u0026quot;=\u0026quot;)[1] remainbytes = int(self.headers['content-length']) line = self.rfile.readline() remainbytes -= len(line) if not boundary in line: return (False, \u0026quot;Content NOT begin with boundary\u0026quot;) line = self.rfile.readline() remainbytes -= len(line) fn = re.findall(r'Content-Disposition.*name=\u0026quot;file\u0026quot;; filename=\u0026quot;(.*)\u0026quot;', line) if not fn: return (False, \u0026quot;Can't find out file name...\u0026quot;) path = self.translate_path(self.path) fn = os.path.join(path, fn[0]) while os.path.exists(fn): fn += \u0026quot;_\u0026quot; line = self.rfile.readline() remainbytes -= len(line) line = self.rfile.readline() remainbytes -= len(line) try: out = open(fn, 'wb') except IOError: return (False, \u0026quot;Can't create file to write, do you have permission to write?\u0026quot;) preline = self.rfile.readline() remainbytes -= len(preline) while remainbytes \u0026gt; 0: line = self.rfile.readline() remainbytes -= len(line) if boundary in line: preline = preline[0:-1] if preline.endswith('\\r'): preline = preline[0:-1] out.write(preline) out.close() return (True, \u0026quot;File '%s' upload success!\u0026quot; % fn) else: out.write(preline) preline = line return (False, \u0026quot;Unexpect Ends of data.\u0026quot;) def send_head(self): \u0026quot;\u0026quot;\u0026quot;Common code for GET and HEAD commands. This sends the response code and MIME headers. Return value is either a file object (which has to be copied to the outputfile by the caller unless the command was HEAD, and must be closed by the caller under all circumstances), or None, in which case the caller has nothing further to do. \u0026quot;\u0026quot;\u0026quot; path = self.translate_path(self.path) f = None if os.path.isdir(path): if not self.path.endswith('/'): # redirect browser - doing basically what apache does self.send_response(301) self.send_header(\u0026quot;Location\u0026quot;, self.path + \u0026quot;/\u0026quot;) self.end_headers() return None for index in \u0026quot;index.html\u0026quot;, \u0026quot;index.htm\u0026quot;: index = os.path.join(path, index) if os.path.exists(index): path = index break else: return self.list_directory(path) ctype = self.guess_type(path) try: # Always read in binary mode. Opening files in text mode may cause # newline translations, making the actual size of the content # transmitted *less* than the content-length! f = open(path, 'rb') except IOError: self.send_error(404, \u0026quot;File not found\u0026quot;) return None self.send_response(200) self.send_header(\u0026quot;Content-type\u0026quot;, ctype) fs = os.fstat(f.fileno()) self.send_header(\u0026quot;Content-Length\u0026quot;, str(fs[6])) self.send_header(\u0026quot;Last-Modified\u0026quot;, self.date_time_string(fs.st_mtime)) self.end_headers() return f def list_directory(self, path): \u0026quot;\u0026quot;\u0026quot;Helper to produce a directory listing (absent index.html). Return value is either a file object, or None (indicating an error). In either case, the headers are sent, making the interface the same as for send_head(). \u0026quot;\u0026quot;\u0026quot; try: list = os.listdir(path) except os.error: self.send_error(404, \u0026quot;No permission to list directory\u0026quot;) return None list.sort(key=lambda a: a.lower()) f = StringIO() displaypath = cgi.escape(urllib.unquote(self.path)) f.write('\u0026lt;!DOCTYPE html PUBLIC \u0026quot;-//W3C//DTD HTML 3.2 Final//EN\u0026quot;\u0026gt;') f.write(\u0026quot;\u0026lt;html\u0026gt;\\n\u0026lt;title\u0026gt;Directory listing for %s\u0026lt;/title\u0026gt;\\n\u0026quot; % displaypath) f.write(\u0026quot;\u0026lt;body\u0026gt;\\n\u0026lt;h2\u0026gt;Directory listing for %s\u0026lt;/h2\u0026gt;\\n\u0026quot; % displaypath) f.write(\u0026quot;\u0026lt;hr\u0026gt;\\n\u0026quot;) f.write(\u0026quot;\u0026lt;form ENCTYPE=\\\u0026quot;multipart/form-data\\\u0026quot; method=\\\u0026quot;post\\\u0026quot;\u0026gt;\u0026quot;) f.write(\u0026quot;\u0026lt;input name=\\\u0026quot;file\\\u0026quot; type=\\\u0026quot;file\\\u0026quot;/\u0026gt;\u0026quot;) f.write(\u0026quot;\u0026lt;input type=\\\u0026quot;submit\\\u0026quot; value=\\\u0026quot;upload\\\u0026quot;/\u0026gt;\u0026lt;/form\u0026gt;\\n\u0026quot;) f.write(\u0026quot;\u0026lt;hr\u0026gt;\\n\u0026lt;ul\u0026gt;\\n\u0026quot;) for name in list: fullname = os.path.join(path, name) displayname = linkname = name # Append / for directories or @ for symbolic links if os.path.isdir(fullname): displayname = name + \u0026quot;/\u0026quot; linkname = name + \u0026quot;/\u0026quot; if os.path.islink(fullname): displayname = name + \u0026quot;@\u0026quot; # Note: a link to a directory displays with @ and links with / f.write('\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;%s\u0026quot;\u0026gt;%s\u0026lt;/a\u0026gt;\\n' % (urllib.quote(linkname), cgi.escape(displayname))) f.write(\u0026quot;\u0026lt;/ul\u0026gt;\\n\u0026lt;hr\u0026gt;\\n\u0026lt;/body\u0026gt;\\n\u0026lt;/html\u0026gt;\\n\u0026quot;) length = f.tell() f.seek(0) self.send_response(200) self.send_header(\u0026quot;Content-type\u0026quot;, \u0026quot;text/html\u0026quot;) self.send_header(\u0026quot;Content-Length\u0026quot;, str(length)) self.end_headers() return f def translate_path(self, path): \u0026quot;\u0026quot;\u0026quot;Translate a /-separated PATH to the local filename syntax. Components that mean special things to the local file system (e.g. drive or directory names) are ignored. (XXX They should probably be diagnosed.) \u0026quot;\u0026quot;\u0026quot; # abandon query parameters path = path.split('?',1)[0] path = path.split('#',1)[0] path = posixpath.normpath(urllib.unquote(path)) words = path.split('/') words = filter(None, words) path = os.getcwd() for word in words: drive, word = os.path.splitdrive(word) head, word = os.path.split(word) if word in (os.curdir, os.pardir): continue path = os.path.join(path, word) return path def copyfile(self, source, outputfile): \u0026quot;\u0026quot;\u0026quot;Copy all data between two file objects. The SOURCE argument is a file object open for reading (or anything with a read() method) and the DESTINATION argument is a file object open for writing (or anything with a write() method). The only reason for overriding this would be to change the block size or perhaps to replace newlines by CRLF -- note however that this the default server uses this to copy binary data as well. \u0026quot;\u0026quot;\u0026quot; shutil.copyfileobj(source, outputfile) def guess_type(self, path): \u0026quot;\u0026quot;\u0026quot;Guess the type of a file. Argument is a PATH (a filename). Return value is a string of the form type/subtype, usable for a MIME Content-type header. The default implementation looks the file's extension up in the table self.extensions_map, using application/octet-stream as a default; however it would be permissible (if slow) to look inside the data to make a better guess. \u0026quot;\u0026quot;\u0026quot; base, ext = posixpath.splitext(path) if ext in self.extensions_map: return self.extensions_map[ext] ext = ext.lower() if ext in self.extensions_map: return self.extensions_map[ext] else: return self.extensions_map[''] if not mimetypes.inited: mimetypes.init() # try to read system mime.types extensions_map = mimetypes.types_map.copy() extensions_map.update({ '': 'application/octet-stream', # Default '.py': 'text/plain', '.c': 'text/plain', '.h': 'text/plain', }) def test(HandlerClass = SimpleHTTPRequestHandler, ServerClass = BaseHTTPServer.HTTPServer): BaseHTTPServer.test(HandlerClass, ServerClass) if __name__ == '__main__': test() ","date":1434034809,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1434034809,"objectID":"c27cd756556e99ae28c303c6d243afa1","permalink":"/blog/2015/06/11/ji-yu-pythonde-ju-yu-wang-wen-jian-gong-xiang-ruan-jian-simplehttpserverwithupload/","publishdate":"2015-06-11T23:00:09+08:00","relpermalink":"/blog/2015/06/11/ji-yu-pythonde-ju-yu-wang-wen-jian-gong-xiang-ruan-jian-simplehttpserverwithupload/","section":"archives","summary":"æˆ‘æœ‰ä¸¤å°ç”µè„‘ï¼Œéƒ½æœ‰IPï¼Œå¤„äºç›¸åŒçš„å±€åŸŸç½‘ã€‚ æˆ‘æƒ³ä¼ é€’æ–‡ä»¶ï¼Œç„¶è€Œæˆ‘åˆä¸æƒ³ç”¨Uç›˜ï¼Œæˆ‘ä¹Ÿä¸æƒ³ç”¨teamviewï¼Œæ›´ä¸æƒ³ç”¨æ¯”å¦‚ç™¾åº¦ç›˜ã€æ–°æµªç›˜ï¼Œæœ‰é“äº‘ç¬”è®°ç­‰ã€‚ æˆ‘æƒ³è¦ç”¨å‘½ä»¤è¡Œè§£å†³ã€‚pythonæä¾›äº†ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ ","tags":null,"title":"åŸºäºpythonçš„å±€åŸŸç½‘æ–‡ä»¶å…±äº«è½¯ä»¶SimpleHTTPServerWithUpload","type":"archives"},{"authors":null,"categories":["markdown"],"content":"pandocæ˜¯markdownå‡çº§ç‰ˆå·¥å…·ï¼Œç”¨äºåˆ¶ä½œå¹»ç¯ç‰‡ç›¸å½“å¥½ç”¨ï¼Œç„¶è€Œä½¿ç”¨è¿‡ç¨‹éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ã€‚\n markdownæ–‡ä»¶ # å¤§æ ‡é¢˜ä¸èƒ½è·Ÿä¸Šæ–‡æœ¬ ## äºŒæ ‡é¢˜æ‰å¯ä»¥è·Ÿæ–‡æœ¬ï¼Œä¸”æ˜¯ä¸€å¼ å¹»ç¯ ç‰‡ã€‚ orgæ–‡ä»¶ä½¿ç”¨ \u0026mdash;\u0026mdash;\u0026mdash;æ¥å¼ºåˆ¶æ‰§è¡Œåˆ›å»ºæ–°çš„å¹»ç¯ç‰‡  markdown % Ye Zhaoliang % Openfoam Introduction % 11th June,2015 # Openfoamç®€ä»‹ ## 1æ±‚è§£å™¨(Solver æ•°å€¼ç»“ç®—) openfoamé‡‡ç”¨c++ç¼–å†™çš„ç±»åº“ï¼Œå¼€æºå…è´¹ã€‚æ‰€ä»¥å¯ä»¥æŠŠå®ƒå½“ä½œä¸€ç§ç±»ä¼¼äºStringçš„åŸºæœ¬ç±»æ¥ä½¿ç”¨ã€‚ openfoamæ¡†æ¶ä»ä½¿ç”¨çº§åˆ«æ¥çœ‹ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š - æµä½“è®¡ç®— - åŒ–å­¦ååº” - æ¢çƒ­ - ç»“æ„åŠ¨åŠ›å­¦ - ç”µç£åœº - é‡‘èè¯„ä¼°ç­‰ ## 2å·¥å…·(Utility) - å‰å¤„ç† + å»ºæ¨¡ + ç½‘æ ¼ + è¾¹ç•Œæ¡ä»¶ - åå¤„ç† + è®¡ç®—ç»“æœæ˜¾ç¤º ## cavity case cavity caseçš„æ–‡ä»¶å¤¹ç®€ä»‹ï¼ˆç­‰ä»·äºfluentçš„.cas,åªä¸è¿‡fluenté›†æˆä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œopenfoamæ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹) # è¿™ä¾¿ä½¿ç”¨ä»£ç å¿«åŒ…è£¹ â”œâ”€â”€ 0 (åˆå§‹æ¡ä»¶æ–‡ä»¶å¤¹) â”‚Â â”œâ”€â”€ p â”‚Â â””â”€â”€ U â”œâ”€â”€ constant â”‚Â â”œâ”€â”€ polyMesh(ç½‘æ ¼æ–‡ä»¶å¤¹) â”‚Â â”‚Â â””â”€â”€ blockMeshDict â”‚Â â””â”€â”€ transportProperties(æµä½“ç‰©æ€§å‚æ•° ä¼ çƒ­ç‰©æ€§å‚æ•°) â””â”€â”€ system â”œâ”€â”€ controlDict(æ§åˆ¶å­—å…¸) â”œâ”€â”€ fvSchemes(ç¦»æ•£æ ¼å¼ æ›´é«˜çº§çš„è¿ç”¨) â””â”€â”€ fvSolution(æ±‚è§£æ–¹æ³•) # è¿ç”¨çš„ä¸‰ä¸ªçº§åˆ«[%] ## ä¸‰ä¸ªçº§åˆ« - [ ] ç›´æ¥åˆ©ç”¨è§£é‡Šå™¨(æ›¿ä»£å•†ä¸šæ±‚è§£å™¨ åˆå§‹ç‚¹) - [ ] è‡ªå®šä¹‰æ±‚è§£å™¨(å…³æ³¨ç‚¹) + æ ¹æ®è‡ªå·±çš„æ±‚è§£æµç¨‹ç»„åˆæ±‚è§£å™¨(ç±»åº“è°ƒç”¨) + ä¸éœ€è¦å…³å¿ƒå¯¹æµé¡¹å’Œæ‰©æ•£é¡¹æ˜¯å¦‚ä½•ç¦»æ•£çš„ + ä¹Ÿä¸éœ€è¦å…³å¿ƒæ¹æµæ¨¡å‹ - [ ] æ›´é«˜çº§çš„è¿ç”¨:ç¼–å†™ç¦»æ•£æ ¼å¼ ## è‡ªå®šä¹‰æ±‚è§£å™¨ æŒ‰ç…§è‡ªå·±çš„_æ±‚è§£æµç¨‹_ç¼–å†™æ±‚è§£ã€‚ ##ä¸å…³å¿ƒ + ç¦»æ•£æ ¼å¼(æ—¶é—´é¡¹å’Œå¯¹æµé¡¹) + å¤§å‹ä»£æ•°æ–¹ç¨‹çš„æ±‚è§£ï¼Œå¦‚ä½•åŠ é€Ÿç­‰ã€‚ ## ä¼ çƒ­æ±‚è§£ è¿™è¾¹ä½¿ç”¨ä»£ç å¿«åŒ…è£¹ å¼€å§‹ | åˆå§‹å€¼ | -----------------\u0026lt;------------------------------ | | ç”¨CFDè¿›è¡Œå®¤å†…æ¸©åº¦è®¡ç®— | | | ^ è¾å°„ä¼ çƒ­è®¡ç®—Qri å¯¼çƒ­è®¡ç®—Qcdi | | | | ç”±çƒ­å¹³è¡¡æ±‚æ–°çš„å¯¹æµä¼ çƒ­é‡Qcvi^(m+1) | | | æ”¶æ•›æ¡ä»¶ --------\u0026gt;-----------------------------| | ç»“æŸ ## è‡ªå®šä¹‰ç¦»æ•£æ ¼å¼ é’ˆå¯¹äºç ”ç©¶ç¦»æ•£æ ¼å¼å’Œä»£æ•°æ±‚è§£å™¨çš„ç”¨æˆ· ç›®çš„ï¼š åˆ›é€ æ›´é«˜æ•ˆæ›´ç²¾ç¡®çš„ç¦»æ•£æ–¹æ³• æ“ä½œï¼š ä¿®æ”¹finiteVolumn... å°¤å…¶æ˜¯å¯¹æµé¡¹ã€‚openfoam æä¾›äº†NVDå’ŒTVDçš„æ¨¡æ¿ï¼ˆ40ä»¥ä¸Šï¼‰ å¯¹æµé¡¹ç¦»æ•£ä¾ç„¶æ˜¯ä¸€ç§ç ”ç©¶æ–¹å‘ã€‚ ## cavityæºç æ–‡ä»¶çš„ä¸»è¦æ„æˆéƒ¨åˆ† + location - \u0026quot;system\u0026quot; - \u0026quot;constant\u0026quot; - \u0026quot;0\u0026quot; + class - dictionary - volVectorField - volScalarField ## + object - dictionary + fvschemeså¯¹è±¡ + fvsolutionå¯¹è±¡ + controldictå¯¹è±¡ + blockmeshdict + transportproperties - volVectorField + Uå¯¹è±¡ - volScalarField + på¯¹è±¡  org-mode * Openfoamç®€ä»‹ openfoamé‡‡ç”¨c++ç¼–å†™çš„ç±»åº“ï¼Œå¼€æºå…è´¹ã€‚æ‰€ä»¥å¯ä»¥æŠŠå®ƒå½“ä½œä¸€ç§ç±»ä¼¼äºStringçš„åŸºæœ¬ç±»æ¥ä½¿ç”¨ã€‚ openfoamæ¡†æ¶ä»ä½¿ç”¨çº§åˆ«æ¥çœ‹ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š ---------- ** 1æ±‚è§£å™¨(Solver æ•°å€¼ç»“ç®—) - æµä½“è®¡ç®— - åŒ–å­¦ååº” - æ¢çƒ­ - ç»“æ„åŠ¨åŠ›å­¦ - ç”µç£åœº - é‡‘èè¯„ä¼°ç­‰ ** 2å·¥å…·(Utility) - å‰å¤„ç† + å»ºæ¨¡ + ç½‘æ ¼ + è¾¹ç•Œæ¡ä»¶ - åå¤„ç† + è®¡ç®—ç»“æœæ˜¾ç¤º ---------------------- ** cavity case cavity caseçš„æ–‡ä»¶å¤¹ç®€ä»‹ï¼ˆç­‰ä»·äºfluentçš„.cas,åªä¸è¿‡fluenté›†æˆä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œopenfoamæ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹) #+begin_src sh â”œâ”€â”€ 0 (åˆå§‹æ¡ä»¶æ–‡ä»¶å¤¹) â”‚Â â”œâ”€â”€ p â”‚Â â””â”€â”€ U â”œâ”€â”€ constant â”‚Â â”œâ”€â”€ polyMesh(ç½‘æ ¼æ–‡ä»¶å¤¹) â”‚Â â”‚Â â””â”€â”€ blockMeshDict â”‚Â â””â”€â”€ transportProperties(æµä½“ç‰©æ€§å‚æ•° ä¼ çƒ­ç‰©æ€§å‚æ•°) â””â”€â”€ system â”œâ”€â”€ controlDict(æ§åˆ¶å­—å…¸) â”œâ”€â”€ fvSchemes(ç¦»æ•£æ ¼å¼ æ›´é«˜çº§çš„è¿ç”¨) â””â”€â”€ fvSolution(æ±‚è§£æ–¹æ³•) #+end_src * è¿ç”¨çš„ä¸‰ä¸ªçº§åˆ«[%] - [ ] ç›´æ¥åˆ©ç”¨è§£é‡Šå™¨(æ›¿ä»£å•†ä¸šæ±‚è§£å™¨ åˆå§‹ç‚¹) - [ ] è‡ªå®šä¹‰æ±‚è§£å™¨(å…³æ³¨ç‚¹) + æ ¹æ®è‡ªå·±çš„æ±‚è§£æµç¨‹ç»„åˆæ±‚è§£å™¨(ç±»åº“è°ƒç”¨) + ä¸éœ€è¦å…³å¿ƒå¯¹æµé¡¹å’Œæ‰©æ•£é¡¹æ˜¯å¦‚ä½•ç¦»æ•£çš„ + ä¹Ÿä¸éœ€è¦å…³å¿ƒæ¹æµæ¨¡å‹ - [ ] æ›´é«˜çº§çš„è¿ç”¨:ç¼–å†™ç¦»æ•£æ ¼å¼ --------- ** è‡ªå®šä¹‰æ±‚è§£å™¨ æŒ‰ç…§è‡ªå·±çš„_æ±‚è§£æµç¨‹_ç¼–å†™æ±‚è§£ã€‚ ** ä¸å…³å¿ƒ + ç¦»æ•£æ ¼å¼(æ—¶é—´é¡¹å’Œå¯¹æµé¡¹) + å¤§å‹ä»£æ•°æ–¹ç¨‹çš„æ±‚è§£ï¼Œå¦‚ä½•åŠ é€Ÿç­‰ã€‚ ---------- ** ä¼ çƒ­æ±‚è§£ #+begin_src sh å¼€å§‹ | åˆå§‹å€¼ | -----------------\u0026lt;------------------------------ | | ç”¨CFDè¿›è¡Œå®¤å†…æ¸©åº¦è®¡ç®— | | | ^ è¾å°„ä¼ çƒ­è®¡ç®—Qri å¯¼çƒ­è®¡ç®—Qcdi | | | | ç”±çƒ­å¹³è¡¡æ±‚æ–°çš„å¯¹æµä¼ çƒ­é‡Qcvi^(m+1) | | | æ”¶æ•›æ¡ä»¶ --------\u0026gt;-----------------------------| | ç»“æŸ #+end_src -------------------------------- ** è‡ªå®šä¹‰ç¦»æ•£æ ¼å¼ é’ˆå¯¹äºç ”ç©¶ç¦»æ•£æ ¼å¼å’Œä»£æ•°æ±‚è§£å™¨çš„ç”¨æˆ· ç›®çš„ï¼š åˆ›é€ æ›´é«˜æ•ˆæ›´ç²¾ç¡®çš„ç¦»æ•£æ–¹æ³• æ“ä½œï¼š ä¿®æ”¹finiteVolumn... å°¤å…¶æ˜¯å¯¹æµé¡¹ã€‚openfoam æä¾›äº†NVDå’ŒTVDçš„æ¨¡æ¿ï¼ˆ40ä»¥ä¸Šï¼‰ å¯¹æµé¡¹ç¦»æ•£ä¾ç„¶æ˜¯ä¸€ç§ç ”ç©¶æ–¹å‘ã€‚ ------- ** cavityæºç æ–‡ä»¶çš„ä¸»è¦ç»„æˆéƒ¨åˆ† + location - \u0026quot;system\u0026quot; - \u0026quot;constant\u0026quot; - \u0026quot;0\u0026quot; + class - dictionary - volVectorField - volScalarField ----------- + object - dictionary + fvschemeså¯¹è±¡ + fvsolutionå¯¹è±¡ + controldictå¯¹è±¡ + blockmeshdict + transportproperties - volVectorField + Uå¯¹è±¡ - volScalarField + på¯¹è±¡ ","date":1433997013,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1433997013,"objectID":"7bf2a2186626e4dafd194728371cde37","permalink":"/blog/2015/06/11/pandoc-mdzhu-yi-dian/","publishdate":"2015-06-11T12:30:13+08:00","relpermalink":"/blog/2015/06/11/pandoc-mdzhu-yi-dian/","section":"archives","summary":"pandocæ˜¯markdownå‡çº§ç‰ˆå·¥å…·ï¼Œç”¨äºåˆ¶ä½œå¹»ç¯ç‰‡ç›¸å½“å¥½ç”¨ï¼Œç„¶è€Œä½¿ç”¨è¿‡ç¨‹éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ã€‚\n","tags":null,"title":"pandoc markdownæ³¨æ„ç‚¹","type":"archives"},{"authors":null,"categories":["openfoam"],"content":" å½“ä½ é˜…è¯»æºä»£ç ä½ æ˜¯å¦åŒå€¦äº†cdæ¥cdå»ï¼Œäºæ˜¯æƒ³æŠŠä»–ä»¬å †åœ¨ä¸€ä¸ªæ–‡ä»¶å†… è€Œå †èµ·æ¥åˆä¸å¥½çœ‹ï¼Œäºæ˜¯æƒ³è¦æ‰“æ‰®ä¸€ä¸‹  äºæ˜¯å†™äº†ä¸‹é¢çš„å°ç¨‹åºï¼Œä¼°è®¡å¯¹äºé˜…è¯»æœ‰å¸®åŠ©ï¼Œä¸»è¦ç”¨åˆ°\n shellå˜é‡å¤„ç† shellå˜é‡é•¿åº¦ findæ˜¾ç¤ºç›¸å¯¹å…¨è·¯ç» ==ä¸¤è¾¹ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œç„¶è€Œåœ¨èµ‹å€¼çš„æ—¶å€™å¿…é¡»æ²¡æœ‰ç©ºæ ¼ åˆ©ç”¨å‡½æ•°æ€æƒ³ï¼Œå°è£…å°å¯’æ•° ç¾è§‚ï¼ŒæŠŠä¸€ä¸ªæ–‡ä»¶å½“ä½œä¸€ä¸ªå¤¹å­è¿›è¡Œæ˜¾ç¤º  æ³¨æ„é’ˆå¯¹æ¯ä¸€ä¸ªç‰ˆæœ¬éƒ½éœ€è¦è¿›è¡Œé€‚å½“çš„ä¿®æ”¹.åœ¨getFileä¸­æœ‰ä¸€ä¸ªsedå‘½ä»¤ä¸€å®šè¦æ³¨æ„ï¼Œé‚£æ˜¯åˆ é™¤è¡Œé¦–çš„7è¡Œï¼Œé’ˆå¯¹ä¸åŒæ–‡ä»¶ï¼Œéœ€è¦é€‚å½“ä¿®æ”¹.\n#!/bin/bash - #=============================================================================== # # FILE: browser.sh # # USAGE: ./browser.sh # # DESCRIPTION: æ³¨æ„é’ˆå¯¹æ¯ä¸€ä¸ªç‰ˆæœ¬éƒ½éœ€è¦è¿›è¡Œé€‚å½“çš„ä¿®æ”¹ # # OPTIONS: --- # REQUIREMENTS: --- # BUGS: --- # NOTES: --- # AUTHOR: Ye Zhaoliang (), zhaoturkkey@163.com # ORGANIZATION: YZL # CREATED: 2015å¹´06æœˆ10æ—¥ 21:50 # REVISION: --- #=============================================================================== #--- FUNCTION ---------------------------------------------------------------- # NAME: generateChapter # DESCRIPTION: é’ˆå¯¹ä¸åŒé¢æ–‡ä»¶é‡‡ç”¨ä¸åŒçš„å¤„ç†æ–¹æ³•ï¼Œåˆ¤æ–­ç›®å½• å’Œåˆ¤æ–­è„šæœ¬æ˜¯ä¸€ä¸ªé‡è¦çš„æ“ä½œ # ä½†æ˜¯æ›´ä¸ºé‡è¦çš„æ˜¯ findè·å¾—æ–‡é›†æ‹¿çš„ç»å¯¹è·¯å¾„(ç›¸å¯¹äºå½“å‰æ–‡ä»¶) # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- generateChapter() { # å¦™ç”¨find å¾—åˆ°å½“å‰ç›®å½•çš„ç›¸å¯¹è·¯å¾„ ä¸éœ€è¦ä¸æ–­çš„è¿›å…¥ç›®å½• for var in `find . -name \u0026quot;*\u0026quot;` do if [[ -d $var ]] # \u0026lt; cannot . Error then echo \u0026quot;${currentDir}${var#.}æ˜¯ä¸€ä¸ªç›®å½•\u0026quot; # ä½¿ç”¨#å·æ¥åˆ é™¤ä¹‹å‰çš„ç‚¹å· elif [[ \u0026quot;${var##*/}\u0026quot; == \u0026quot;${0}\u0026quot; ]] # ä¸€å®šè¦æ³¨æ„ç­‰å¼ä¸¤è¾¹æœ‰ç©ºæ ¼ then echo \u0026quot;${currentDir}${var#.} ${0} è„šæœ¬æ–‡ä»¶ä¸å¤„ç†\u0026quot; else getFile ${currentDir}${var#.} fi done } #--- FUNCTION ---------------------------------------------------------------- # NAME: getFile # DESCRIPTION: åœ¨æ¯ä¸ªæ–‡ä»¶çš„å¤´éƒ¨æ·»åŠ ä¸€äº›ä¿¡æ¯ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- getFile() { startString=\u0026quot;# -------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026quot;$1\u0026quot; started\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------#\u0026quot; endString=\u0026quot;# --------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026quot;$1\u0026quot; ended \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------#\u0026quot; #echo \u0026quot;\u0026quot; \u0026gt;\u0026gt;summary.sh #echo -e \u0026quot;\\033[44;37m -------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026quot;$1\u0026quot; started\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------\\033[0m\u0026quot; \u0026gt;\u0026gt;summary.sh #echo \u0026quot;# -------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026quot;$1\u0026quot; started\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------\u0026quot; \u0026gt;\u0026gt;summary.sh echo $startString \u0026gt;\u0026gt; summary.sh echo \u0026quot;#`printf \u0026quot;%$(( ${#startString}-2 ))s\u0026quot; \u0026quot; \u0026quot;`#\u0026quot; \u0026gt;\u0026gt;summary.sh echo \u0026quot;#`printf \u0026quot;%$(( ${#startString}-2 ))s\u0026quot; \u0026quot; \u0026quot;`#\u0026quot; \u0026gt;\u0026gt;summary.sh echo \u0026quot;#`printf \u0026quot;%$(( ${#startString}-2 ))s\u0026quot; \u0026quot; \u0026quot;`#\u0026quot; \u0026gt;\u0026gt;summary.sh ### ä¸åŠ ä¸Š$åè€Œä¸è¡Œ # echo \u0026quot;#\u0026quot; \u0026gt;\u0026gt;summary.sh # echo \u0026quot;#\u0026quot; \u0026gt;\u0026gt;summary.sh sed '1,7d' $1 \u0026gt;\u0026gt; summary.sh echo \u0026quot;#`printf \u0026quot;%$(( ${#endString}-2 ))s\u0026quot; \u0026quot; \u0026quot;`#\u0026quot; \u0026gt;\u0026gt;summary.sh echo \u0026quot;#`printf \u0026quot;%$(( ${#endString}-2 ))s\u0026quot; \u0026quot; \u0026quot;`#\u0026quot; \u0026gt;\u0026gt;summary.sh echo \u0026quot;#`printf \u0026quot;%$(( ${#endString}-2 ))s\u0026quot; \u0026quot; \u0026quot;`#\u0026quot; \u0026gt;\u0026gt;summary.sh #echo \u0026quot;#\u0026quot; \u0026gt;\u0026gt;summary.sh #echo \u0026quot;#\u0026quot; \u0026gt;\u0026gt;summary.sh #echo -e \u0026quot;\\033[43;37m --------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026quot;$1\u0026quot; ended \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------\\033[0m\u0026quot; \u0026gt;\u0026gt; summary.sh #echo \u0026quot;# --------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026quot;$1\u0026quot; ended \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------\u0026quot; \u0026gt;\u0026gt; summary.sh echo $endString \u0026gt;\u0026gt; summary.sh echo \u0026quot;\u0026quot; \u0026gt;\u0026gt;summary.sh echo \u0026quot;\u0026quot; \u0026gt;\u0026gt;summary.sh echo \u0026quot;\u0026quot; \u0026gt;\u0026gt;summary.sh } currentDir=`pwd` # å¦‚æœå­˜åœ¨ summary.sh è¯æ˜å·²ç»å­˜åœ¨äº†ï¼Œå°±å…ˆæŠŠåˆ æ‰ï¼Œ å› ä¸ºè¿™é‡Œæ˜¯ # é‡‡ç”¨è¿½åŠ çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯å†™å…¥ã€‚ if [[ -e ./summary.sh ]] then rm -rf ./summary.sh fi # è°ƒç”¨äº§ç”Ÿæ‰€æœ‰çš„æ–‡ä»¶å¤¹å†…çš„æ•°æ®åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ generateChapter #sed -i '/C++/d' summary |sed '/=========/d'|sed '/OpenFOAM/d' | sed '/Version/d' | sed '/Web/d'|sed '/anipulation/d'  ç»“æœæ˜¾ç¤º # -------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;/openfoamF708/tutorials/incompressible/icoFoam/cavity/system/fvSolution started\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------# # # # # # # FoamFile { version 2.0; format ascii; class dictionary; location \u0026quot;system\u0026quot;; object fvSolution; } // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * // solvers { p { solver PCG; preconditioner DIC; tolerance 1e-06; relTol 0; } U { solver smoothSolver; smoother symGaussSeidel; tolerance 1e-05; relTol 0; } } PISO { nCorrectors 2; nNonOrthogonalCorrectors 0; pRefCell 0; pRefValue 0; } # # # # # # # --------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;/openfoamF708/tutorials/incompressible/icoFoam/cavity/system/fvSolution ended \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------# # -------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;/openfoamF708/tutorials/incompressible/icoFoam/cavity/system/fvSchemes started\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;-------------------# ","date":1433949582,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1433949582,"objectID":"5b1efc17be0cd1f6225211b29f46f2b6","permalink":"/blog/2015/06/10/yue-du-openfoamyuan-dai-ma-de-xiao-gong-ju/","publishdate":"2015-06-10T23:19:42+08:00","relpermalink":"/blog/2015/06/10/yue-du-openfoamyuan-dai-ma-de-xiao-gong-ju/","section":"archives","summary":" å½“ä½ é˜…è¯»æºä»£ç ä½ æ˜¯å¦åŒå€¦äº†cdæ¥cdå»ï¼Œäºæ˜¯æƒ³æŠŠä»–ä»¬å †åœ¨ä¸€ä¸ªæ–‡ä»¶å†… è€Œå †èµ·æ¥åˆä¸å¥½çœ‹ï¼Œäºæ˜¯æƒ³è¦æ‰“æ‰®ä¸€ä¸‹  äºæ˜¯å†™äº†ä¸‹é¢çš„å°ç¨‹åºï¼Œä¼°è®¡å¯¹äºé˜…è¯»æœ‰å¸®åŠ©ï¼Œä¸»è¦ç”¨åˆ°\n shellå˜é‡å¤„ç† shellå˜é‡é•¿åº¦ findæ˜¾ç¤ºç›¸å¯¹å…¨è·¯ç» ==ä¸¤è¾¹ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œç„¶è€Œåœ¨èµ‹å€¼çš„æ—¶å€™å¿…é¡»æ²¡æœ‰ç©ºæ ¼ åˆ©ç”¨å‡½æ•°æ€æƒ³ï¼Œå°è£…å°å¯’æ•° ç¾è§‚ï¼ŒæŠŠä¸€ä¸ªæ–‡ä»¶å½“ä½œä¸€ä¸ªå¤¹å­è¿›è¡Œæ˜¾ç¤º ","tags":null,"title":"é˜…è¯»openfoamæºä»£ç çš„å°å·¥å…·","type":"archives"},{"authors":null,"categories":["Linux"],"content":"ubuntuç³»ç»Ÿï¼Œæ¯”å¦‚ä½ ç”¨\ntar -cvf \\*.tar.gz æŸä¸ªæ–‡ä»¶å¤¹  ä¼šå‘ç°å¯ä»¥å¤šçª—å£åœ°æ‰§è¡Œã€‚å…¶å®è¿™ä¹Ÿè¯´æ˜äº†ä¸€ç‚¹linuxç³»ç»Ÿçš„å¤šç”¨æˆ·ã€å¤šçº¿ç¨‹åœ°å¼€å‘ç³»ç»Ÿã€ä½¿ç”¨ç³»ç»Ÿã€‚\nshell-scriptæ˜¯ä¸€ä¸ªæ¯”è¾ƒæœ‰ç”¨çš„å·¥å…·ï¼Œæ²Ÿé€šç€ç”¨æˆ·(user)å’Œå†…æ ¸(kernel)ä¹‹é—´,æˆ‘çš„ç†è§£æ˜¯shellå°±æ˜¯ä¸€ä¸ªè§£é‡Šå™¨(ä»lispçš„è§£é‡Šå™¨çš„è§’åº¦æ¥è¯´,ç›¸äº’å­¦ä¹ ä»å‡½æ•°å¼è¿‡æ¸¡åˆ°å‘½ä»¤å¼)\næ‰€ä»¥æˆ‘ä¼šå°è¯•ç€æŠŠæˆ‘æ‰€æœ‰éœ€è¦å®‰è£…çš„software(app),éƒ½å›Šæ‹¬åœ¨ä¸€ä¸ªshæ–‡ä»¶å½“ä¸­ï¼Œæ‰€ä»¥æˆ‘é‡è£…çš„æ—¶å€™åªéœ€è¦ä¸€ä¸ªæ‰¹å¤„ç†å³å¯ã€‚\nä¸‹é¢æˆ‘åˆ†æˆä»¥ä¸‹5ä¸ªéƒ¨åˆ†\n 1ç³»ç»Ÿçš„Gitç®¡ç† 2å›¾å½¢éƒ¨åˆ† 3è¯­è¨€éƒ¨åˆ† 4ç¼–è¾‘éƒ¨åˆ† 5é…ç½®éƒ¨åˆ†  ä¸€ä¸€å†™ä¸Šæˆ‘ä¼šæ‰§è¡Œçš„æ“ä½œï¼Œå½“ç„¶è¿™äº›ç¨‹åºç»„åˆæˆä¸ºæˆ‘è‡ªå·±ä½¿ç”¨çš„linuxç³»ç»Ÿã€‚æ–¹ä¾¿æˆ‘å’Œlinuxçš„å†…æ ¸è¿›è¡Œäº¤æµã€‚\n1ç³»ç»Ÿçš„Gitç®¡ç† apt-get install git,gitk,git-doc #rememeber how to configure apt-get install git-flow #å‡çº§ç‰ˆçš„ç®¡ç† git config --global user.name \u0026quot;ye zhaoliang\u0026quot; git config --global user.email \u0026quot;zhaoturkkey@163.com\u0026quot; ssh-keygen -t rsa -C \u0026quot;zhaoturkkey@163.com\u0026quot;  2å›¾å½¢éƒ¨åˆ† æœ‰æ—¶å€™ä½ å¸Œæœ›æŠŠä½ çš„ç›¸å…³æ•°æ®æ‰“å°æˆå›¾ç‰‡ï¼Œè¿™æ ·æ–¹ä¾¿äº¤æµ\napt-get install gnuplot apt-get install graphviz  3è¯­è¨€éƒ¨åˆ† ä»æ›´ç»†å°çš„ç¨‹åº¦ç†è§£ä½ çš„æ€ç»´ï¼Œéœ€è¦ä¸€äº›ç¼–ç¨‹è¯­è¨€\napt-get install gfortran apt-get install gcc apt-get install python # drracket # haskell  4ç¼–è¾‘éƒ¨åˆ† apt-get install vim #rememeber how to configure apt-get install vim-gtk apt-get install emacs  5é…ç½®éƒ¨åˆ† åœ¨ubuntuç®¡ç†ç³»ç»Ÿç»å¸¸ä¼šéœ€è¦é…ç½®ç”¨æˆ·ç›®å½•ä¸‹çš„dotfilesï¼Œ æ¯”å¦‚ç™»å½•ç›¸å…³æ–‡ä»¶.bashrc,.bash_logout,.bash_profile. æˆ‘ä¼šå°è¯•ç€æŠŠæˆ‘ç›¸å…³éœ€è¦çš„æ–‡ä»¶å¤¹å¤‡ä»½åœ¨ä¸€ä¸ªtaråŒ…ã€‚\ntar -xvf ./bash-it.tar.gz -C ~ # remember vcprompt tar -xvf ./vim.tar.gz -C ~ # remember vim :BundleInstall  #ç»“è®º é€šè¿‡ä¸Šé¢äº”ä¸ªéƒ¨åˆ†ï¼Œæ— æ³•ä½“ç°æˆ‘ä½¿ç”¨linuxçš„åŸºæœ¬æ„Ÿè§‰\nrecur() { æŸ¥æ‰¾(è¿›å…¥æŸä¸ªç›®å½•) åˆ¤æ–­(If,case) ä¿®æ”¹ï¼ˆé…ç½® export è®¾ç½®ç¯å¢ƒå˜é‡ï¼‰ recur }  cfajå†™çš„å’Œ ä¸»è¦æ•™ä¼šæˆ‘ä»¬çš„æ˜¯æˆ‘ä½¿ç”¨ä¸‹åˆ’çº¿æ–°å»ºä¸€ä¸ªä¸´æ—¶å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ä¸‹åˆ’çº¿å‡½æ•°çš„å¤§å†™å­—æ¯æ¥è¡¨å¾å‡½æ•°çš„è¿”å›å€¼ã€‚ç„¶åä½¿ç”¨${}å˜é‡å¼•ç”¨æ¥å®ç° ç‰ˆæœ¬å·çš„æˆªå–å¹¶ä½¿ç”¨caseè¿›è¡Œåˆ†ç±»é€‰æ‹©ï¼Œè¿˜æœ‰æ¯”å¦‚ä¸åŒçš„ç³»ç»Ÿçš„caseé€‰æ‹©ã€‚\nè¡¥å……ä¸€ä¸ªæ“ä½œ å¦‚æœä½ æƒ³è¦ä½¿å¾—å­ç¨‹åºå¯ä»¥æ‰å“¦ä½ ä¸ªå‡½æ•°ï¼Œå¿…é¡»ä½¿ç”¨exportå‘½ä»¤å¯¼å‡ºï¼Œç±»ä¼¼äºå˜é‡\nfunction func() { echo \u0026quot;å¯¼å‡ºå‡½æ•°\u0026quot; } export -f func # ä½¿ç”¨export -f å¯¼å‡ºå‡½æ•°ï¼Œåªç”¨äºbash # ä½¿ç”¨export DATE ç­‰ï¼Œå¯¼å‡ºç³»ç»Ÿå˜é‡  åªæœ‰ç»è¿‡è¿™æ ·ä½ çš„funcæ‰å˜æˆå…¬æœ‰åŒ–ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥æŠŠè„šæœ¬æ·»åŠ åˆ°pathè·¯å¾„ä¸­ã€‚\nè°¨è®°ä¸€ä¸ªå¤±è¯¯ æ— è®ºæ˜¯ä½¿ç”¨tar -cvf æ‰“åŒ…ï¼Œè¿˜æ˜¯ç”ŸæˆæŸä¸ªç¨‹åºç­‰ï¼Œä¸€å®šè¦æ£€æŸ¥ä¸€éï¼Œæ˜¯å¦èƒ½å¤Ÿè¿è¡Œï¼Œ å½“æ—¶å°±ç¡®è®¤ä½ çš„æ“ä½œæ— è¯¯ï¼Œå¦åˆ™åæ¥ä¼šåæ‚”(æ›¾ç»æ‰“åŒ…äº†ä¸€ä¸ªç³»ç»Ÿ å‘ç°éƒ½ä¸èƒ½ç”¨äº†ï¼ è€Œé‚£ä¸ªç³»ç»Ÿä¹Ÿè¢«æˆ‘åˆ æ‰äº†ï¼Œå¯è§æˆ‘æœ‰å¤šæ‡Šæ¼)\ntar: è·³è½¬åˆ°ä¸‹ä¸€ä¸ªå¤´ tar: ç”±äºå‰æ¬¡é”™è¯¯ï¼Œå°†ä»¥ä¸Šæ¬¡çš„é”™è¯¯çŠ¶æ€é€€å‡º å½“ç„¶æœ‰äººè¯´çœ‹çœ‹æ˜¯ä¸æ˜¯éœ€è¦ä½¿ç”¨tar -zxvf è€Œä¸æ˜¯tar -xvf æˆ‘è¯´æˆ‘å‹ç¼©çš„æ—¶å€™æ ¹æœ¬å°±æ²¡æœ‰ç”¨gzipï¼Œå½“ç„¶æˆ‘ä¹Ÿè¯•äº†æ²¡æ•ˆæœï¼Œåæ¥éƒ½åˆ æ‰äº†ã€‚ ","date":1433915455,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1433915455,"objectID":"bcbff769d17e41da5aae7e156ad9f5cd","permalink":"/blog/2015/06/10/ubuntuxi-tong-yun-yong/","publishdate":"2015-06-10T13:50:55+08:00","relpermalink":"/blog/2015/06/10/ubuntuxi-tong-yun-yong/","section":"archives","summary":"ubuntuç³»ç»Ÿï¼Œæ¯”å¦‚ä½ ç”¨\ntar -cvf \\*.tar.gz æŸä¸ªæ–‡ä»¶å¤¹  ä¼šå‘ç°å¯ä»¥å¤šçª—å£åœ°æ‰§è¡Œã€‚å…¶å®è¿™ä¹Ÿè¯´æ˜äº†ä¸€ç‚¹linuxç³»ç»Ÿçš„å¤šç”¨æˆ·ã€å¤šçº¿ç¨‹åœ°å¼€å‘ç³»ç»Ÿã€ä½¿ç”¨ç³»ç»Ÿã€‚\nshell-scriptæ˜¯ä¸€ä¸ªæ¯”è¾ƒæœ‰ç”¨çš„å·¥å…·ï¼Œæ²Ÿé€šç€ç”¨æˆ·(user)å’Œå†…æ ¸(kernel)ä¹‹é—´,æˆ‘çš„ç†è§£æ˜¯shellå°±æ˜¯ä¸€ä¸ªè§£é‡Šå™¨(ä»lispçš„è§£é‡Šå™¨çš„è§’åº¦æ¥è¯´,ç›¸äº’å­¦ä¹ ä»å‡½æ•°å¼è¿‡æ¸¡åˆ°å‘½ä»¤å¼)\n","tags":null,"title":"ubuntuç³»ç»Ÿè¿ç”¨","type":"archives"},{"authors":null,"categories":["git"],"content":"ç°åœ¨æœ‰å¾ˆå¤šçš„å…¬å¼€çš„ä»£ç æœåŠ¡å™¨ æ¯”å¦‚æœ€ä¸ºå‡ºåçš„æ˜¯github Haskellå¼€å‘çš„Darcs å›½å†…æ¯”è¾ƒå‡ºåçš„æ˜¯\n å¼€æºä¸­å›½ äº¬ä¸œ  ç„¶è€Œï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸æƒ³æŠŠæ‰€æœ‰çš„ä¸œè¥¿éƒ½å…¬å¼€ï¼Œäºæ˜¯æƒ³æœ‰ä¸€ä¸ªç§æœ‰çš„äº‘å¹³å°ï¼Œè¿™æ · æˆ‘ä»¬å°±å¯ä»¥è®©å¾ˆå¤šå†…éƒ¨çš„äººå‘˜(å±€åŸŸç½‘)ä½¿ç”¨äº†ï¼Œgitlabæ­£æ˜¯ä¸ºä¸€å †æ¯”è¾ƒæ‡’çš„äººè®¾è®¡çš„åŸºäºgitçš„å¹³å°æ­å»ºã€‚\nå‚è€ƒé“¾æ¥  CentOSä¸‹ä¸€é”®å®‰è£…GitLab gitlabä¸€é”®å®‰è£…ç¬”è®° ä½¿ç”¨Gitlabä¸€é”®å®‰è£…åŒ…åçš„æ—¥å¸¸å¤‡ä»½æ¢å¤ä¸è¿ç§» ä¸€é”®å®‰è£… gitlab7 on rhel6.4 å¹¶è®¾ç½®é‚®ä»¶å‘é€  å¼€å§‹å®‰è£… å®˜ç½‘ä¸‹è½½(æˆ‘ç°åœ¨ä¸‹è½½çš„ç‰ˆæœ¬æ˜¯7.11.4.0 ä¹‹å‰ç”¨çš„æ˜¯7.1.1.0) https://bitnami.com/stack/gitlab/installer\ngitlab(æ›´æ–°ç‰ˆæœ¬çš„é‡‡ç”¨çš„æ˜¯å›¾å½¢ç•Œé¢ï¼Œä¹‹å‰çš„ç‰ˆæœ¬é‡‡ç”¨çš„æ˜¯å‘½ä»¤æµ,å…¨é¢çš„å›¾å½¢åŒ–æ›´æ–¹ä¾¿äº›ã€‚ç°åœ¨æ˜¯è¿å¯åŠ¨éƒ½æ˜¯å›¾å½¢ç•Œé¢äº†,æ¯”å¦‚gitlabci ä¹Ÿç›´æ¥ä¸éœ€è¦ç”¨./ctlscript.sh start) EmaikAddress : -977962857@qq.com Login :xinran passowrd:+++++++ é…ç½®gmailï¼ˆçœçš„è‡ªå·±é…ç½®)  ä½¿ç”¨çš„è¿‡ç¨‹æ—¢å¯ä»¥æ˜¯åœ¨ç½‘é¡µä¸­ç›´æ¥ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ç±»ä¼¼githubçš„å‘½ä»¤æµæ“ä½œï¼Œ ä½†æ˜¯å‰ææ˜¯å¿…é¡»é…ç½®å¥½æœåŠ¡å™¨ï¼Œç±»ä¼¼äºgithubçš„é…ç½®è¿‡ç¨‹\nå®‰è£…å®Œæ¯•ï¼Œè¿›è¡Œsshé…ç½®çš„æ³¨æ„ç‚¹ é—®é¢˜æ˜¯rakegemes.rbé‡Œçš„ä¸€ä¸ªblock æœ‰é—®é¢˜ï¼Œæé†’rake is not the part of the gem æˆ‘åˆ†äº«ä¸€ä¸‹è§£å†³æ–¹æ³•ï¼Œæˆ‘çš„ç™»å½•ç”¨æˆ·å‡å¦‚æ˜¯fluid,é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨ä½¿ç”¨\nssh-keygen -t rsa -C \u0026quot;ä½ çš„ç™»å½•é‚®ç®±gitlabè´¦æˆ·\u0026quot;  ç„¶åä½ å°±å¯ä»¥å¤åˆ¶åœ¨/home/fluid/.ssh/id_rsa.pubï¼Œç²˜å¸–åˆ°ä½ çš„gitlabçš„ç½‘é¡µç®¡ç†ä¸­æ·»åŠ ssh keys , ä»¥å‰æˆ‘çŠ¯çš„é”™è¯¯æ˜¯ä»¥ä¸ºæå–gitlabåœ¨å®‰è£…çš„æ—¶å€™æ–°å»ºçš„git ç”¨æˆ·çš„authority_keys,ç°åœ¨çœ‹æ¥è¿˜çœŸæ˜¯è·Ÿgithubçš„é…ç½®æœ‰ç‚¹åƒï¼Œè¿™æ ·ä¹‹åè¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œ ä½ å¾—æ˜¯åœ¨ç™»å½•ç”¨æˆ·fluidæ‰æ˜¯å¯ä»¥git pushç­‰åŸºæœ¬æ“ä½œï¼Œè€Œåœ¨rootç”¨æˆ·åˆ™æ˜¯æœ‰æƒé™é™åˆ¶ï¼Œä½†æ˜¯ç´§æ¥ç€æˆ‘åœ¨rootç”¨æˆ·ä¸‹å†æ¬¡ssh-keygenâ€¦ è¿™æ ·åœ¨/root/.ssh/id_rsa.pubåˆæœ‰ä¸€ä¸ªæ–°çš„keyï¼Œä½ åªè¦ä¹ŸæŠŠä»–æ·»åŠ åˆ°gitlabç®¡ç†ç•Œé¢çš„profile settingé‡Œçš„ssh keys æ·»åŠ ä¸€ä¸‹å°±å¯ä»¥äº†. æ‰€ä»¥å˜æˆå’Œgithubä¸€æ ·å¯ä»¥ç”¨rootç”¨æˆ·ï¼Œå…¶å®ç½—å—¦é‚£ä¹ˆä¹…è¿˜æ˜¯ssh-keygené—®é¢˜ï¼Œè¿˜æœ‰è®°å¾—å¯¹åº”ç”¨æˆ·çš„keyé—®é¢˜\nå¼€å§‹ä½¿ç”¨ æˆ‘åœ¨ç½‘é¡µä¸Šåˆ›å»ºäº†ä¸€ä¸ªé¡¹ç›® å¾—åˆ°äº†å¦‚ä¸‹ä¿¡æ¯:\nGlobal Setting\ngit config --global user.name \u0026quot;Administrator\u0026quot; git config --global user.email \u0026quot;977962857@qq.com\u0026quot;  Create a new repository\ngit clone git@127.0.1.1:xinran/f708OpenFoam.git cd f708OpenFoam touch README.md git add README.md git commit -m \u0026quot;add README\u0026quot; git push -u origin master  Existing folder or Git repository\ncd existing_folder git init git remote add origin git@127.0.1.1:xinran/f708OpenFoam.git git push -u origin master  ç„¶åæˆ‘cd /root/.ssh/ å› ä¸ºæˆ‘ä¹‹å‰å·²ç»è®¾ç½®å¥½äº†gité…ç½®ï¼Œä¸æ‡‚çš„äººå¯ä»¥å‚è€ƒgitå’Œgithubçš„é…ç½® ç„¶åæ‹·è´id.pubçš„å†…å®¹\næµ‹è¯•æ˜¯å¦èµ°é€šäº† æˆ‘ä»¬å¾ˆæƒ³çŸ¥é“åˆ°åº•æˆ‘ä»¬å·²ç»é…ç½®å¥½äº†æœåŠ¡å™¨?ä¹Ÿå¾ˆæƒ³çŸ¥é“å±€åŸŸç½‘å†…çš„å®¢æˆ·ç«¯æ˜¯å¦å¯ä»¥è®¿é—®æœåŠ¡å™¨ï¼Ÿ\næµ‹è¯•æ–¹æ³•ï¼š\nroot at fluidman-OptiPlex-990 in /opt/gitlab-7.1.1-0[21:17:36ä¸‹åˆ] $ ssh -T git@127.0.1.1 Welcome to GitLab, Anonymous!  å±€åŸŸç½‘äººå‘˜æµ‹è¯•:\næ¯”å¦‚æˆ‘çš„127.195.172.64åˆ«äººåªè¦åœ¨æµè§ˆå™¨è¾“å…¥ 127.195.172.64:80ç„¶åå°±å¯ä»¥äº†ï¼ï¼  reate Repositoryï¼ˆåˆ›å»ºä»“åº“ï¼‰ mkdir common-util cd common-util git init touch README git add README git commit -m 'first commit' git remote add origin git@127.0.0.1:devteam/common-util.git git push -u origin master  å¯¹äºå·²å­˜åœ¨Gité¡¹ç›®ï¼š cd existing_git_repo git remote add origin git@127.0.0.1:devteam/common-util.git git push -u origin master  å¼€å‘å®Œä¹‹åï¼Œä½ è¿›è¡Œ\n æµ‹è¯• æ£€æŸ¥ å†æµ‹è¯•ç­‰è¿‡ç¨‹  è¿˜éœ€è¦è¿›è¡Œæäº¤.\nå¤šç”¨æˆ·é—®é¢˜ æ³¨æ„éªŒè¯ç”¨æˆ· ä¼šè¢«å¼„åˆ°åƒåœ¾é‚®ä»¶å½“ä¸­ï¼Œ å¹¶ä¸”éªŒè¯é“¾æ¥éœ€è¦æ³¨æ„çš„æ˜¯ä¸€å®šå¾—æ”¹ä¸€ä¸‹IPï¼Œ æ¯”å¦‚ï¼š\nhttp://127.0.1.1/users/confirmation?confirmation_token=AEHLjx2WR21sb3zULW5h  æˆ‘çš„å†…ç½‘IPæ˜¯(ubuntu :ifconfig windows: cmd\u0026ndash;\u0026gt; ipconfig è¿›è¡ŒæŸ¥çœ‹) 121.195.172.217 é‚£ä¹ˆå°±å˜ä¸º\nhttp://121.195.172.217/users/confirmation?confirmation_token=AEHLjx2WR21sb3zULW5h  è¿™æ­¥çš„ä¸€ä¸ªå®Œç¾è§£å†³æ–¹æ¡ˆæ˜¯åœ¨è£…gitlabçš„æ—¶å€™domainä¸è¦å¡«127.0.1.1è€Œåº”è¯¥å¡«ä½ çš„å›ºæœ‰IPï¼ˆåŠ¨æ€è·å–çš„IPçš„è¯ï¼Œæœ€å¥½ä¿æŒä¸æ–­ç½‘ï¼ŒåŸºæœ¬ä¸Šä¹Ÿèƒ½å¤Ÿç»´æŒIPä¸å˜ï¼‰è¿™æ ·ä»¥åå°±ä¸è®¸è¦ä¿®æ”¹äº†\næˆ‘çš„ç›®å½•åˆ†é—¨åˆ«ç±»(ç›®çš„æ˜¯ä¸€ä¸ªé¡¹ç›®ä¸€ä¸ªæ–‡ä»¶å¤¹) / â”œâ”€â”€ dns-of-incompact3d â”œâ”€â”€ dns-of-semtex â”œâ”€â”€ fortran-learning-and-some-tools â”œâ”€â”€ lisper â”œâ”€â”€ nreal-fast  æˆ‘çš„ä¸€æ¬¡ä½¿ç”¨æäº¤ root at fluidman-OptiPlex-990 in /latex-chines-english[10:05:08ä¸Šåˆ] on git:develop running make, make, make, and make $ git push -u origin develop Counting objects: 208, done. Delta compression using up to 8 threads. Compressing objects: 100% (205/205), done. Writing objects: 100% (208/208), 23.27 MiB | 7.67 MiB/s, done. Total 208 (delta 40), reused 0 (delta 0) To git@127.0.1.1:xinran/latex-chines-english.git * [new branch] develop -\u0026gt; develop åˆ†æ”¯ develop è®¾ç½®ä¸ºè·Ÿè¸ªæ¥è‡ª origin çš„è¿œç¨‹åˆ†æ”¯ developã€‚  å¾ˆå¤šäº‹æƒ…å…³é”®åœ¨äºåšæŒ,ä»£ç æœåŠ¡å™¨ç°åœ¨æœ‰äº†ï¼Œå…³é”®æ˜¯å‡ ä¸ªäººååŠ›åˆä½œçš„é—®é¢˜,æ¯”å¦‚ä¸€èµ·å¾€openfoamçš„é£ç”µ(ç–¯ç™«)æ–¹å‘å‘å±•ã€‚\n","date":1433848927,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1433848927,"objectID":"f132ef48b34ac4fe979bdf4b74122543","permalink":"/blog/2015/06/09/da-jian-gitlabfu-wu-qi-ji-shi-yong/","publishdate":"2015-06-09T19:22:07+08:00","relpermalink":"/blog/2015/06/09/da-jian-gitlabfu-wu-qi-ji-shi-yong/","section":"archives","summary":"ç°åœ¨æœ‰å¾ˆå¤šçš„å…¬å¼€çš„ä»£ç æœåŠ¡å™¨ æ¯”å¦‚æœ€ä¸ºå‡ºåçš„æ˜¯github Haskellå¼€å‘çš„Darcs å›½å†…æ¯”è¾ƒå‡ºåçš„æ˜¯\n å¼€æºä¸­å›½ äº¬ä¸œ  ç„¶è€Œï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸æƒ³æŠŠæ‰€æœ‰çš„ä¸œè¥¿éƒ½å…¬å¼€ï¼Œäºæ˜¯æƒ³æœ‰ä¸€ä¸ªç§æœ‰çš„äº‘å¹³å°ï¼Œè¿™æ · æˆ‘ä»¬å°±å¯ä»¥è®©å¾ˆå¤šå†…éƒ¨çš„äººå‘˜(å±€åŸŸç½‘)ä½¿ç”¨äº†ï¼Œgitlabæ­£æ˜¯ä¸ºä¸€å †æ¯”è¾ƒæ‡’çš„äººè®¾è®¡çš„åŸºäºgitçš„å¹³å°æ­å»ºã€‚\n","tags":null,"title":"æ­å»ºgitlabæœåŠ¡å™¨åŠä½¿ç”¨","type":"archives"},{"authors":null,"categories":["markdown"],"content":"ç¬¬ä¸€æ¬¡çœ‹åˆ°github.ioå±…ç„¶å¯ä»¥æ”¾ä¸Šå¹»ç¯ç‰‡,æœ‰ç‚¹è§‰å¾—ä¸å¯æ€è®® sed_and_awkæ•™ç¨‹ã€‚åæ¥è°ƒç ”å‘ç°è¿™æ˜¯é‡‡ç”¨äº† + è½»é‡slideshowï¼ˆby markdownã€pandocã€revealjsï¼‰ + Markdown+Pandocâ†’HTMLå¹»ç¯ç‰‡é€Ÿæˆ  + pandocå°†markdownè½¬æ¢è¾“å‡ºHTML slide \næˆ‘æ–°å»ºäº†ä¸€ä¸ªæ–‡ä»¶å¤¹\nmkdir genereateSlides cd generateSlides mkdir targets #å¹¶åœ¨targetsä¸­æ”¾ä¸Šreveal.js,ç›¸ä¿¡å¤§å®¶çŸ¥é“æ€ä¹ˆä¸‹è½½ git clone https://github.com/hakimel/reveal.js  ç„¶åæˆ‘æŠ›å¼ƒæ‰dzslides,s5,slideous,slidyç­‰ï¼Œç°åœ¨åªæ˜¯ä½¿ç”¨reveal.js\n å®ƒæ”¯æŒmdå’Œorgæ ¼å¼ï¼Œè¿™æ˜¯æˆ‘æ¬£èµçš„ å®ƒæ”¯æŒä¸€æ ‡é¢˜æ˜¯æ°´å¹³åˆ‡æ¢ï¼ŒäºŒæ ‡é¢˜æ˜¯çºµå‘åˆ‡æ¢ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æ‰€æ¬£èµï¼Œå½±å“æˆ‘çš„æ€ç»´  æ‰€ä»¥é’ˆå¯¹markdownä½ éœ€è¦æ€è€ƒä½•æ—¶ä½¿ç”¨#å·ä¸ªæ•° å¾ˆå¯¹org-modeä½ éœ€è¦è€ƒè™‘ä½•æ—¶ä½¿ç”¨*å·ä¸ªæ•°  å®ƒæ”¯æŒåˆ—è¡¨ é€ä¸ªæ˜¾ç¤ºï¼Œä¹Ÿå°±æ˜¯+/-/1. ç­‰å¦‚æœå˜å¼‚çš„æ—¶å€™åŠ ä¸Š-ié€‰é¡¹åˆ™ä¼šé€ä¸ªæ˜¾ç¤ºã€‚ å¯ä»¥ç”¨ \u0026mdash;\u0026mdash;\u0026mdash;-å¤šä¸ªç ´æŠ˜å·å¼ºåˆ¶ç”Ÿæˆæ–°çš„å¹»ç¯ç‰‡  åœ¨å¼€å§‹å†™ä½œä¹‹å‰é¦–å…ˆå¾—æ³¨æ„mdå¼€å¤´çš„å‰ä¸‰è¡Œï¼š\n% Ye Zhaoliang % Direct Numerical Simulation for Homogenuous Turbulence % June 07, 2015  pandoc slides.md -o targets/slides.html -t revealjs -s -V theme=beige  ä¹‹å‰ï¼Œè¿›è¡Œå‡ æ¬¡å®éªŒï¼Œå‘ç°ç»“æœä¸å¯¹ï¼ä½†æ˜¯å…¶å®å°±æ˜¯ç”¨äº†ä¸Šè¿°çš„å‘½ä»¤ï¼Œè€Œå¤šè¯•å‡ éåˆå¯ä»¥äº†ï¼ŒThis is strange!But now it works\nå‡ ç§ä¸åŒçš„å¹»ç¯ç‰‡æ ·å¼:  defaultï¼šï¼ˆé»˜è®¤ï¼‰æ·±ç°è‰²èƒŒæ™¯ï¼Œç™½è‰²æ–‡å­— beigeï¼šç±³è‰²èƒŒæ™¯ï¼Œæ·±è‰²æ–‡å­— skyï¼šå¤©è“è‰²èƒŒæ™¯ï¼Œç™½è‰²ç»†æ–‡å­— nightï¼šé»‘è‰²èƒŒæ™¯ï¼Œç™½è‰²ç²—æ–‡å­— serifï¼šæµ…è‰²èƒŒæ™¯ï¼Œç°è‰²è¡¬çº¿æ–‡å­— simpleï¼šç™½è‰²èƒŒæ™¯ï¼Œé»‘è‰²æ–‡å­— solarizedï¼šå¥¶æ²¹è‰²èƒŒæ™¯ï¼Œæ·±é’è‰²æ–‡å­—  æ§åˆ¶ä»£ç é«˜äº®é£æ ¼çš„é€‰é¡¹æœ‰ï¼š  \u0026ndash;highlight-style pygments \u0026ndash;highlight-style kate \u0026ndash;highlight-style monochrome \u0026ndash;highlight-style espresso \u0026ndash;highlight-style haddock \u0026ndash;highlight-style tango \u0026ndash;highlight-style zenburn ","date":1433669689,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1433669689,"objectID":"c499a78c6cd2d004ff1338a491660540","permalink":"/blog/2015/06/07/pandoczhi-zuo-huan-deng-pian-with-revealjs/","publishdate":"2015-06-07T17:34:49+08:00","relpermalink":"/blog/2015/06/07/pandoczhi-zuo-huan-deng-pian-with-revealjs/","section":"archives","summary":"ç¬¬ä¸€æ¬¡çœ‹åˆ°github.ioå±…ç„¶å¯ä»¥æ”¾ä¸Šå¹»ç¯ç‰‡,æœ‰ç‚¹è§‰å¾—ä¸å¯æ€è®® sed_and_awkæ•™ç¨‹ã€‚åæ¥è°ƒç ”å‘ç°è¿™æ˜¯é‡‡ç”¨äº† + è½»é‡slideshowï¼ˆby markdownã€pandocã€revealjsï¼‰ + Markdown+Pandocâ†’HTMLå¹»ç¯ç‰‡é€Ÿæˆ  + pandocå°†markdownè½¬æ¢è¾“å‡ºHTML slide \n","tags":null,"title":"pandocåˆ¶ä½œå¹»ç¯ç‰‡with revealjs","type":"archives"},{"authors":null,"categories":["Linux"],"content":"ä¸€ä¸ªelegantçš„æç¤ºçª—å£çš„åˆ¶ä½œã€‚ä»_repeatåˆ°å‡çº§çš„ä¼˜åŒ–ç‰ˆæœ¬ï¼ˆé‡‡ç”¨ä¸‰æ­¥ä¼˜åŒ–ï¼‰ï¼Œç„¶ååˆ°åæ¥ç»„è£…æˆalertå‡½æ•°ã€‚\n_repeat() { #@ ä½¿ç”¨æ–¹å¼ï¼š _repeat è¦é‡å¤çš„å­—ç¬¦ä¸² é‡å¤æ¬¡æ•° #@ Usage : _repeat string number _REPEAT= #set but empty echo $2 while [[ ${#_REPEAT} -lt $2 ]] do _REPEAT=$_REPEAT$1 done }  _repeat \u0026quot;hello\u0026quot; 30 echo $_REPEAT  #--- FUNCTION ---------------------------------------------------------------- # NAME: _repeat1 # DESCRIPTION: ä¼˜åŒ–ç‰ˆæœ¬ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- _repeat1() { #@ ä½¿ç”¨æ–¹å¼ï¼š _repeat è¦é‡å¤çš„å­—ç¬¦ä¸² é‡å¤æ¬¡æ•° #@ Usage : _repeat string number _REPEAT1=$1 #set and not empty, or unlimit recycle while [[ ${#_REPEAT1} -lt $2 ]] do _REPEAT1=$_REPEAT1$_REPEAT1$_REPEAT1 ## 3æ¬¡ä¼˜åŒ– done _REPEAT1=${_REPEAT1:0:$2} ##Trimåˆ°æˆ‘ä»¬éœ€è¦çš„é•¿åº¦ } repeat() { _repeat \u0026quot;$@\u0026quot; printf \u0026quot;%s\\n\u0026quot; \u0026quot;$_REPEAT1\u0026quot; }  _repeat1 \u0026quot;hello\u0026quot; 30 echo $_REPEAT1 repeat \u0026quot;hello 30\u0026quot;  alert() { _repeat1 \u0026quot;${2:-#}\u0026quot; $(( ${#1} + 8 )) ## ${2:-#} å¦‚æœ$2æœªå®šä¹‰åˆ™ä½¿ç”¨# printf '\\a%s\\n' \u0026quot;$_REPEAT1\u0026quot; ## \\a=BEL printf '%2.2s %s %2.2s\\n' \u0026quot;$_REPEAT1\u0026quot; \u0026quot;$1\u0026quot; \u0026quot;$_REPEAT1\u0026quot; ## \\a=BEL printf '%s\\n' \u0026quot;$_REPEAT1\u0026quot; } alert \u0026quot;Do you really want to delete all the files?\u0026quot; ","date":1433423613,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1433423613,"objectID":"bb0c6752677c99b76a67e229c9bd99f5","permalink":"/blog/2015/06/04/bashti-xing-kuang-de-zhi-zuo/","publishdate":"2015-06-04T21:13:33+08:00","relpermalink":"/blog/2015/06/04/bashti-xing-kuang-de-zhi-zuo/","section":"archives","summary":"ä¸€ä¸ªelegantçš„æç¤ºçª—å£çš„åˆ¶ä½œã€‚ä»_repeatåˆ°å‡çº§çš„ä¼˜åŒ–ç‰ˆæœ¬ï¼ˆé‡‡ç”¨ä¸‰æ­¥ä¼˜åŒ–ï¼‰ï¼Œç„¶ååˆ°åæ¥ç»„è£…æˆalertå‡½æ•°ã€‚\n","tags":null,"title":"bashæé†’æ¡†çš„åˆ¶ä½œ","type":"archives"},{"authors":null,"categories":[""],"content":"I have many years experience in the shell command, so I categoried some commands into many categories,which let me understand the commands more clearly. You can first practice how to play with bash shell,then you can catch the topic afterward cfaj network\nbit  programming language :  c ,c++ c#,java lisp,scheme,haskell etc bash,python,perl,ruby,etc javascript   word  programming language :\n c ,c++ c#,java lisp,scheme,haskell etc bash,python,perl,ruby,etc\n $() == () == `` means in the subshell closure the commands; $(( )) == (( )): mainly some algorithm operations ${} == {} means in the current shell closure the commands; ${{ }} == {{ }}\n ${#f} calculate the variable f\u0026rsquo;s length ${f:6} get the string from 6 to end of the string ${f:6:4} get the string from 6 to (6+4) of the string. ${f:${pos}:${len}} ${f: -8} get the reverse from end to end+8\u0026rsquo;s string. ${f/path?/x} \u0026ndash;single replace ${f//path?/x} \u0026ndash;globle replace ${f#*/} delete the characters until get across a / from left to right(From means start point. To means end point)  ${var#*o} remove the shortest string that matches PATTERN (the character \u0026lsquo;o\u0026rsquo;) from the begining of the expanded value  ${f##*/} delete the caaracters until all the / symbols have been got across from left to right.  ${0##*/} extract the name of a script from the $0 parameter,which contains the full path to the script similarly, you can use \u0026ldquo;${1%/}\u0026ldquo;,\u0026rdquo;${2%/}\u0026rdquo; \u0026hellip;.  ${f%*/} delete the characters until get across a / from right to left ${f%%*/} delete the caaracters until all the / symbols have been got across from right to left. variable (- is used to set the unset value; + is used to set the set value)  ${var:-default} checks to see whether a variable is unset or empty,if yes,then expands to a default string to var(if omit the colon? see below)unset var or var=  ${var:=default} å’Œ${var:-default}å¾ˆåƒï¼Œåªä¸è¿‡ä»–è¿˜å¤šåšäº†ä¸€ä¸ªé¢å¤–çš„åŠŸèƒ½ï¼Œassign the default value to the variable.è€Œåœ¨${var:-|+default}çš„æƒ…å†µä¸‹ï¼Œå¹¶æ²¡æœ‰æŒ‡æ´¾ç»™å˜é‡å€¼ã€‚  ${var-default} checks to see whether a variable is unset,if yes,then expands to a default string to var, unset var,almost the same with colon ${var:+alternative} use alternative value if $var is set and not empty ${var+alternative} use alternative value if $var is set,it does matter whether $var is empty or not  ${var1} ${var^2} ## matches all characters from a to m inclusive! if match change to uppercase.NOTE:Only in Bash \u0026gt;=4.0 ${var^^} uppercase the string,such as toronto change to TORONTO ${var^} Captitalize the string, such as toronto change to Toronto ${var,,} such as var=TORONTO change to toronto ${var,,[N-Q]} such as var=TORONTO changes to ToRonTo ARRAY(use ${} to get the value of the array) Note: not POSIX standard ,but fit for bash shell  printf \u0026ldquo;%s\\n\u0026rdquo; \u0026ldquo;${BASH_VERSINFO[0]}\u0026rdquo; print the first element of the array BASH_VERSINFO bulit in the shell bash printf \u0026ldquo;%s\\n\u0026rdquo; \u0026ldquo;${BASH_VERSINFO[1]}\u0026rdquo; print the second element of the array BASH_VERSINFO bulit in the shell bash printf \u0026ldquo;%s\\n\u0026rdquo; \u0026ldquo;${BASH_VERSINFO[*]}\u0026rdquo; print the all element of the array BASH_VERSINFO bulit in the shell bash in one line as string printf \u0026ldquo;%s\\n\u0026rdquo; \u0026ldquo;${BASH_VERSINFO[@]}\u0026rdquo; print the all element of the array BASH_VERSINFO bulit in the shell bash in different line printf \u0026ldquo;%s\\n\u0026rdquo; \u0026ldquo;${BASH_VERSINFO[@]:1:2}\u0026rdquo; print the secondth and thirdth line element of the array BASH_VERSINFO bulit in the shell bash printf \u0026ldquo;%s\\n\u0026rdquo; \u0026ldquo;${#BASH_VERSINFO[*]}\u0026rdquo; print the length of the array BASH_VERSINFO bulit in the shell bash construct an array 1  unset a a[${#a[@]}]=\u0026ldquo;1 $RANDOM\u0026rdquo; ## #{#a[@]} is 0 a[${#a[@]}]=\u0026ldquo;2 $RANDOM\u0026rdquo; ## #{#a[@]} is 1 a[${#a[@]}]=\u0026ldquo;3 $RANDOM\u0026rdquo; ## #{#a[@]} is 2 a[${#a[@]}]=\u0026ldquo;4 $RANDOM\u0026rdquo; ## #{#a[@]} is 3 \u0026mdash;\u0026gt; finally we have a fourth element array a printf \u0026ldquo;%s\\n\u0026rdquo; \u0026ldquo;${a[@]}\u0026rdquo;  construct an array 2  province=(Beijing Fujian Liaoning) printf \u0026ldquo;%s\\n\u0026rdquo; \u0026ldquo;${province[@]}\u0026rdquo;  construct an array (Associative Arrays must be declared before)  declare -A array1 ## if not declare -A array1 only keep the last one assignment operation. for subsricpt in a b c d e do array[$subscript]=\u0026ldquo;$subscript $RANDOM\u0026rdquo; done printf \u0026ldquo;:%s:\\n\u0026rdquo; \u0026ldquo;${array[\u0026ldquo;c\u0026rdquo;]}\u0026rdquo; ## print one value printf \u0026ldquo;:%s:\\n\u0026rdquo; \u0026ldquo;${array[@]}\u0026rdquo; ## print one value    $[[ ]] == [[ ]] \u0026ndash;\u0026gt; [ =~ ]\n some special remarks:\n *(pattern [|pattern] \u0026hellip;) the match occurence \u0026gt;=0 +(pattern [|pattern] \u0026hellip;) the match occurence \u0026gt;=1 @(pattern [|pattern] \u0026hellip;) the match occurence ==1 ?(pattern [|pattern] \u0026hellip;) the match occurence ? I am a little confuse! \u0026amp; let the command execute backward `` redirect an command output to the argument of another command ; command separator | pipe symbol, put a command output redirect to another command\u0026rsquo;s input $# the numbers of the parameters while execute the shell scripts $@ the parameters while execute the shell scripts(know every parameters) .Note use \u0026ldquo;$@\u0026rdquo; $* the parameters as a string while execute the shell scripts $! the PID number  ${!var} è¡¨ç¤ºçš„æ˜¯é—´æ¥è°ƒç”¨å˜é‡var,æ¯”å¦‚x=yes,var=x,å¦‚æœç›´æ¥ä½¿ç”¨echo $xå¾—åˆ°yes,å¦‚æœç›´æ¥echo $var å¾—åˆ°çš„æ˜¯xï¼Œå¦‚æœä½¿ç”¨echo ${!var}åˆ™æ˜¯yes ${!}ç»™ä½ çš„æ„Ÿè§‰ä¼šå¥½è±¡æ˜¯å‡½æ•°å¼å˜é‡ï¼Œä¸æ–­çš„å˜åŒ–ä¸­,ç±»ä¼¼çš„æ¯”å¦‚set \u0026ndash;å…·æœ‰æ›´æ¢positional parametersçš„ä½œç”¨ã€‚  caseä¸­[!0-9]) è¡¨ç¤º éæ•°å­— ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä¸€èˆ¬æ˜¯ä½¿ç”¨[^0-9] \u0026rdquo;\u0026rdquo; å­—ç¬¦ä¸²ä¸­åŠ ä¸ŠåŒå¼•å·çš„ä½œç”¨æ˜¯\u0026rdquo;$a\u0026rdquo; ï¼Œ[ \u0026ldquo;$a\u0026rdquo; == \u0026ldquo;abc str\u0026rdquo;] é¿å…å¤ªå¤šå‚æ•°çš„æŠ¥é”™ï¼\u0026rdquo;\u0026ldquo;èµ·ç€è¿æ¥çš„ä½œç”¨,å˜é‡çš„å€¼åŒ…èµ·æ¥ï¼Œé˜²æ­¢ä¸­é—´æœ‰ç©ºæ ¼ï¼Œä¸€èˆ¬å­—ç¬¦ä¸²åè€Œä¸éœ€è¦.è¿™è¾¹åˆæ‰¯åˆ°å¦ä¸€ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚[[ $foo == bar ]]ä¸ä¼šå±•å¼€fooçš„å€¼,ä¹Ÿå°±æ˜¯æŠŠç©ºæ ¼ä¹Ÿå½“ä½œå­—ç¬¦ä¸²å­—é¢å€¼çš„æ•´ä½“ï¼Œè€Œ[ $foo == bar ] åˆ™ä¼šå±•å¼€fooçš„å€¼,ä¹Ÿå°±ç©ºæ ¼ä¼šåˆ†éš”åŸæ¥çš„fooå­—ç¬¦ä¸²ï¼Œè¿™æ ·å¯èƒ½ä¼šå‡ºç°å¤šå‚æ•°é”™è¯¯ã€‚æ‰€ä»¥åŠ ä¸ŠåŒå¼•å·æœ‰å¥½å¤„ï¼Œæš‚æ—¶æ— å(é’ˆå¯¹å˜é‡)   javascript\n  tr\n tr -d \u0026lsquo;abc\u0026rsquo; tr \u0026lsquo;[a-z]\u0026rsquo; \u0026lsquo;[A-Z]\u0026rsquo;  seq\n  ç±»ä¼¼çš„å¯ä»¥å‚è€ƒshellç¬¦å·,å¹¶ä¸”æ³¨æ„shellå½“ä¸­ä¸€ä¸ª æ¯”è¾ƒå¤§çš„ä¹¦å†™é—®é¢˜æ˜¯ï¼šç­‰å·ä¸¤è¾¹ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œæ‹¬å·å’Œä¸­æ‹¬å·ä¸¤è¾¹æœ€å¥½æœ‰ç©ºæ ¼(æ¯”å¦‚æœ€å¤šçš„ifåˆ¤æ–­ï¼‰ã€‚\nline  head tail sed grep(egrep)  grep -nR \u0026ldquo;neededWord\u0026rdquo; *  awk(actually it can be categoried into word manipulation) sort  sort -r -t : -k 2  cut -d\u0026rdquo;:\u0026rdquo; -f5 read echo uniq join paste (much simpler than join , just separte two parts with Tab) shift  shift 3 To remove the first three parameters(To means going to do,it is a target) shift \u0026ldquo;$#\u0026rdquo; To remove all the parameters,$# contains the number of all the positional parameters shift $(( $# - 2 )) Remove all but the last two positional parameters.Remember there are blank between (( and $ also between 2 and )).  set \u0026ndash; Newparameters ## which is just replace the parameters with Newparameters  sh \\_max3(){ [ $# -ne 3 ] \u0026amp;\u0026amp; return 5 [ $1 -gt $2 ] \u0026amp;\u0026amp; { set -- $2 $1 $3; } ## line a if $1\u0026gt;$2 replace $2 with $1 ,$1 with $2, the bigger in the righter [ $2 -gt $3 ] \u0026amp;\u0026amp; { set -- $1 $3 $2; } ## line b: $1 is the last time's $1 ,but $3 is the last time's $3(in line a) [ $1 -gt $2 ] \u0026amp;\u0026amp; { set -- $2 $1 $3; } ## line c _MAX3=$3 _MID3=$2 _MIN3=$1 }   content  cat  file  ls find -name \u0026ldquo;\u0026rdquo; src/ locate touch wc -l rm -f cp mv source == . ==\u0026gt; sourch *.sh == . *.sh source .bashrc == . bashrc \u0026gt; == 1\u0026gt; \u0026gt;\u0026gt; == 1\u0026gt;\u0026gt; \u0026lt; == \u0026lt;1 split  split -b 300k \u0026hellip; split -l 300 (line=300 as an file)  vim gnuplot graghviz  fildfolder  cd mkdir rmdir cp -r mv tar  tar -cvf src.tar.gz src/ tar -xvf src.tar.gz   system  alias (make the command become convinient) unalias ulimit -a (try to think if there are ten person enter the Linux at the same time, and open th 1G file at the same time, the main machine means 10G. So the machine wil become busy.) set unset env history  !! the last command(you can use the up and down arrow) !66 the 66th command !line-number !al run the command begin with \u0026lsquo;al\u0026rsquo; nearest.!command  type kill -9 crontab -e which who dmesg du -sh . make (for compiling the system) fsck -c System Transplant  wget -R [website] curl -l git clone hg clone svn clone  system enter  ssh telnet ftp  ifconfig all files with map relationship can form an ecosystem.  Network topology  node (one computer one system) server (only supply with services) NIC (network interface card) RJ-45  network interface port which abstracted by the NIC .  route -n  bit \u0026ndash;\u0026gt; word \u0026ndash;\u0026gt; line \u0026ndash;\u0026gt; content \u0026ndash;\u0026gt; file \u0026ndash;\u0026gt; system. ++Actually, you can use the function to abstraction several command. What\u0026rsquo;s more ,you can use module or filefolder to do another bigger abstraction++.\nyou can find that from bit manipulation to file manipulation,there are many commands used in the Linux system\n a-m ^ a-m ^  ","date":1433333898,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1433333898,"objectID":"472c1bd67a419fc2a35f94db248e0080","permalink":"/blog/2015/06/03/bashming-ling-fen-lei-jia-gou-zai-wen-jian-xi-tong-ji-bie/","publishdate":"2015-06-03T20:18:18+08:00","relpermalink":"/blog/2015/06/03/bashming-ling-fen-lei-jia-gou-zai-wen-jian-xi-tong-ji-bie/","section":"archives","summary":"I have many years experience in the shell command, so I categoried some commands into many categories,which let me understand the commands more clearly. You can first practice how to play with bash shell,then you can catch the topic afterward cfaj network\n","tags":null,"title":"bashå‘½ä»¤åˆ†ç±»--æ¶æ„åœ¨æ–‡ä»¶ç³»ç»Ÿçº§åˆ«","type":"archives"},{"authors":null,"categories":["Linux"],"content":"è¯æ³•ç¼–ç¨‹æœ€å¼€å§‹æ˜¯æœ‰1984ï¼ŒDonald Knuthæå‡ºçš„è¯æ³•ç¼–ç¨‹. å¦å¤–å¯ä»¥å‚è€ƒemacs org-mode è¯æ³•ç¼–ç¨‹å’Œ emacs orgmodeçš„é«˜çº§è¯æ³•ç¼–ç¨‹ æˆ‘çš„ç†è§£æ˜¯è¯æ³•ç¼–ç¨‹ï¼Œå°±æ˜¯åœ¨æ–‡æœ¬å’Œä»£ç ä¸­äº¤å‰å®ç°ï¼Œä¸è®©ä»£ç åªæ˜¯ä»£ç ï¼Œæ–‡æœ¬åªæ˜¯æ–‡æœ¬ï¼Œå…¶å®è¿™æ ¹å‡½æ•°å¼ç¼–æˆçš„æ€æƒ³æ˜¯ç›¸ä¼¼çš„ï¼Œä»£ç å³æ•°æ®ï¼Œæ•°æ®å³ä»£ç ã€‚\n#+begin_src sh ls hostname -I #+end_src #+results: | activate.org | | activate.png | | activity.png | | broken.png | | communication.png | | data | | digraph2.png | | ditaa.org | | ditta.png | | emacs-chats | | emacsconf2015 | | emacs-notes | | gnuplot.org | | gnuplot.png | | #GTD.org# | | gv01.png | | javaTalentTest.org | | javaweb5.org | | javaWriteRules.org | | latex.org | | Learn.html | | lispfile.org | | literate-programming.org | | meeting_states.png | | multi.png | | named.png | | newLearningTakecar.el | | newLearningTakecar.org | | newLearningTakecar.org_archive | | normal_task_states.png | | object.org | | object.png | | orgmode-babel-ditaa3.png | | org-mode-doc | | org-mode.org | | orgTest.org | | outcome.sh | | phone_states.png | | plantuml_example_states.png | | plantuml.org | | scales.png | | schemeToTime.org | | sequence.png | | some_filename.png | | somefile.png | | state.org | | style | | style.tar.gz | | table.png | | task.org | | teaching.org | | test-act2.png | | test-act2.txt | | test-act3.png | | test-act3.txt | | test-act4.png | | test-act4.txt | | test-act.png | | test-act.txt | | testChines.org | | testgraph.org | | thinking.org | | time.png | | usecase.org | | usecase.png | | vimium | | 172.17.36.2 | ** You must add the section :properties: and ğŸ”š ,or nothing show. :PROPERTIES: :var: name1=\u0026quot;hello\u0026quot; :END: #+begin_src sh :var hosts=\u0026quot;10.0.2.1\u0026quot; echo $hosts echo $name1 #+end_src #+results: | 10.0.2.1 | | hello | #+header: :var Dir=\u0026quot;/home/\u0026quot; #+begin_src sh cd $Dir ls -lsh #+end_src #+results: | æ€»ç”¨é‡ | 28K | | | | | | | | | | 4.0K | drwx------ | 43 | root | root | 4.0K | 5æœˆ | 30 | 15:19 | happycamp-of-fortran | | 4.0K | drwx------ | 5 | root | root | 4.0K | 5æœˆ | 30 | 15:36 | happycamp-of-gnuplot | | 4.0K | drwx------ | 31 | root | root | 4.0K | 6æœˆ | 3 | 13:32 | happycamp-of-lisp | | 4.0K | drwxr-xr-x | 50 | javazhao | javazhao | 4.0K | 6æœˆ | 3 | 14:22 | javazhao | | 4.0K | drwxr-xr-x | 7 | javazhao | javazhao | 4.0K | 4æœˆ | 30 | 16:28 | lispbox-0.7 | | 4.0K | -rw-r--r-- | 1 | root | root | 1 | 5æœˆ | 13 | 23:37 | MyOrgHome | | 4.0K | drwxr-xr-x | 7 | root | root | 4.0K | 4æœˆ | 10 | 22:18 | StudyCenter |  å½“ç„¶emacsä¸­ä¹Ÿæ˜¯å¯ä»¥ç»“åˆgnuplot ,latex, plantuml,graphvizç­‰ã€‚ å…·ä½“å¯ä»¥å‚çœ‹ http://www.3zso.com/archives/orgmode-babel.html\n","date":1433313350,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1433313350,"objectID":"66b01c5ea3f11a30c574c4645f55fefc","permalink":"/blog/2015/06/03/emacszhong-you-qu-de-ci-fa-bian-cheng/","publishdate":"2015-06-03T14:35:50+08:00","relpermalink":"/blog/2015/06/03/emacszhong-you-qu-de-ci-fa-bian-cheng/","section":"archives","summary":"è¯æ³•ç¼–ç¨‹æœ€å¼€å§‹æ˜¯æœ‰1984ï¼ŒDonald Knuthæå‡ºçš„è¯æ³•ç¼–ç¨‹. å¦å¤–å¯ä»¥å‚è€ƒemacs org-mode è¯æ³•ç¼–ç¨‹å’Œ emacs orgmodeçš„é«˜çº§è¯æ³•ç¼–ç¨‹ æˆ‘çš„ç†è§£æ˜¯è¯æ³•ç¼–ç¨‹ï¼Œå°±æ˜¯åœ¨æ–‡æœ¬å’Œä»£ç ä¸­äº¤å‰å®ç°ï¼Œä¸è®©ä»£ç åªæ˜¯ä»£ç ï¼Œæ–‡æœ¬åªæ˜¯æ–‡æœ¬ï¼Œå…¶å®è¿™æ ¹å‡½æ•°å¼ç¼–æˆçš„æ€æƒ³æ˜¯ç›¸ä¼¼çš„ï¼Œä»£ç å³æ•°æ®ï¼Œæ•°æ®å³ä»£ç ã€‚\n","tags":null,"title":"emacsä¸­æœ‰è¶£çš„è¯æ³•ç¼–ç¨‹","type":"archives"},{"authors":null,"categories":["Linux"],"content":"Bash-itæ˜¯ä¸€ä¸ªå¼€æºçš„bashæ¡†æ¶ï¼Œ æˆ‘çš„ç¬¬ä¸€æ„Ÿè§‰æ˜¯ä»–çš„themesä¸»é¢˜ä¸é”™ï¼Œæ‰€ä»¥å°±ç”¨äº†ï¼Œè¿™æ˜¯æˆ‘é‡‡ç”¨çš„rjorgensonçš„ä¸»é¢˜ Bash-itæ˜¯æºè‡ªäºoh-my-zsh, zshçš„ä¸€äº›ç›¸å…³å±•ç¤º ä¸»è¦æ˜¯è°ƒç”¨äº†ä¸€äº›pythonå’Œrubyçš„ç›¸å…³æ’ä»¶ã€‚\n##å®‰è£…æ­¥éª¤\nå¾ˆç®€å•\n git clone \u0026ndash;depth=1 https://github.com/jueqingsizhe66/bash-it ~/.bash-it (å¦‚æœä¸åŠ å…¥\u0026ndash;depth=1ä¼šå°‘ä¸€äº›æ–‡ä»¶,æ²¡æœ‰Enableæ–‡ä»¶å¤¹) (æˆ–è€…æŠŠinstall.shé‡Œé¢çš„enableæ”¹æˆavailableå³å¯(å› ä¸ºä½œè€…å¯èƒ½åˆ æ‰äº†enable) ) cd ~/.bash-it ./install  å½“ç„¶è¿˜éœ€è¦å®‰è£…ä¸€äº›é¢å¤–çš„æ’ä»¶\n apt-get install docker()(æœ‰æ—¶å€™å¯èƒ½ä¸éœ€è¦)  sudo apt-get install docker.io sudo ln -sf /usr/bin/docker.io /usr/local/bin/docker sudo sed -i \u0026lsquo;$acomplete -F _docker docker\u0026rsquo; /etc/bash_completion.d/docker.io chmod 777 /var/run/docker.sock  pip install arg (é¦–å…ˆå¾—å®‰è£…python-pip) å®‰è£…chruby https://github.com/postmodern/chruby apt-get install libpq-dev  ç°åœ¨å®‰è£…å®Œä¹‹åçš„æ„Ÿè§‰å°±æ˜¯ç•Œé¢å˜å¾—æ›´å¥½çœ‹äº›ï¼Œå…¶ä»–æ²¡ä»€ä¹ˆæ”¹å˜ã€‚\næ³¨æ„ Bash_itçš„é…ç½®è„šæœ¬å’Œopenfoamçš„é…ç½®è„šæœ¬å†²çªï¼Œæš‚æ—¶æœªæ‰¾åˆ°åŸå› ã€‚\nè¡¥å……themeé…ç½® å½“ä½ æ‰§è¡Œç©Bash-itçš„installè„šæœ¬åï¼Œåœ¨~ç›®å½•ä¸‹ä¼šæœ‰~/.bashrcæ–‡ä»¶ï¼Œä¿®æ”¹å…¶ä¸­çš„bash themeä¸»é¢˜å˜é‡å³å¯ã€‚ æˆ‘ç°åœ¨ä½¿ç”¨çš„æ˜¯doubletime_multiline_pyonlyæ„Ÿè§‰è¿˜ä¸é”™\n","date":1433311184,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1433311184,"objectID":"0aef9f7dfca9dfa79861eb92a9292306","permalink":"/blog/2015/06/03/wo-de-bash-it/","publishdate":"2015-06-03T13:59:44+08:00","relpermalink":"/blog/2015/06/03/wo-de-bash-it/","section":"archives","summary":"Bash-itæ˜¯ä¸€ä¸ªå¼€æºçš„bashæ¡†æ¶ï¼Œ æˆ‘çš„ç¬¬ä¸€æ„Ÿè§‰æ˜¯ä»–çš„themesä¸»é¢˜ä¸é”™ï¼Œæ‰€ä»¥å°±ç”¨äº†ï¼Œè¿™æ˜¯æˆ‘é‡‡ç”¨çš„rjorgensonçš„ä¸»é¢˜ ","tags":null,"title":"æˆ‘çš„Bash-It","type":"archives"},{"authors":null,"categories":["Linux"],"content":" åŠ å…¥äº† seq 1 8 æ™ºèƒ½äº§ç”Ÿåºåˆ—çš„æ–¹æ³• ä½¿å¾—30åº¦æ”»è§’çš„å®éªŒå€¼ä¹Ÿå¯ä»¥å¤„ç†ã€‚ åˆ¤æ–­æ–‡ä»¶å¤¹å†…æ˜¯å¦å­˜åœ¨æ–‡ä»¶ [ -e \u0026ldquo;å®éªŒ*.txt\u0026rdquo; ] æ— æ³•æ‰§è¡Œæ­£åˆ™è¡¨è¾¾å¼ å› ä¸ºæœ‰å¯èƒ½æ²¡æœ‰å¯¹åº”æ”»è§’çš„  deleteDensity() { echo \u0026quot;åˆ é™¤å¯†åº¦å’Œæ¥æµ\u0026quot; if [ -d \u0026quot;modified\u0026quot; ] then echo \u0026quot;modifiedæ–‡ä»¶å¤¹å·²å­˜åœ¨\u0026quot; else mkdir modified fi for i in `ls *.txt` do #echo $i # ä¹‹æ‰€ä»¥åŠ å…¥ iconvæ˜¯å› ä¸º å­—ç¬¦ç¼–ç é—®é¢˜ æ€•æ‰¾ä¸åˆ° å¯†åº¦ å’Œæ¥æµåŠ¨å‹è¡Œ iconv -f gb18030 -t utf-8 $i|awk '{print}'|awk '{if ($0 ~ /æ”»è§’/) {print $3;}else if($0 ~ /å‡åŠ›/){print $1,$4,$5}else if($0 ~ /^$/){print ''}else {print $3,$5;}}' |sed '/å¯†åº¦/d'|sed '/æ¥æµåŠ¨å‹/d'|sed '/^$/d' \u0026gt;modified/$i done } # åˆ›å»ºæ–‡ä»¶å¤¹ ä»-10æ”»è§’åˆ°25åº¦æ”»è§’ #--- FUNCTION ---------------------------------------------------------------- # NAME: fenLei # DESCRIPTION: å¯¹æ”»è§’å®è¡Œåˆ†ç±»ï¼ŒæŒ‰ç…§ä¸åŒçš„æ”»è§’åˆ›å»ºä¸åŒçš„æ–‡ä»¶å¤¹ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- fenLei(){ cd modified # æ³¨æ„ä¸‹é¢çš„æ‰€æœ‰å‡½æ•° éƒ½è¿è¡Œåœ¨modifiedæ–‡ä»¶å¤¹ä¸‹ #for j in -10.00 -9.00 -8.00 -7.00 -6.00 -5.00 -4.00 -3.00 -2.00 -1.00 0.00 1.00 2.00 3.00 4.00 5.00 6.00 7.00 8.00 9.00 10.00 11.00 12.00 13.00 14.00 15.00 16.00 17.00 18.00 19.00 20.00 21.00 22.00 23.00 24.00 25.00 26.00 27.00 28.00 29.00 30.00 for j in `seq -10.00 30.00` do if ! [ -d \u0026quot;a\u0026quot;$j ] then mkdir \u0026quot;a\u0026quot;$j fi done } # å¯¼å…¥å¯¹åº”æ”»è§’æ–‡ä»¶åˆ°æ–‡ä»¶å¤¹å†… #--- FUNCTION ---------------------------------------------------------------- # NAME: getFileIntoDir # DESCRIPTION: ä½¿ç”¨AwkæŒ‰ç…§ä¸åŒçš„æ”»è§’å€¼ åˆ©ç”¨ printçš„åŠŸèƒ½è°ƒç”¨shellï¼ŒæŠŠå¯¹åº”æ–‡ä»¶æ‹·è´åˆ°å¯¹åº”æ”»è§’æ–‡ä»¶å¤¹ä¸‹ # æ³¨æ„-våœ¨awkè¡¨ç¤ºå®šä¹‰å˜é‡çš„é—´éš”ç¬¦ # å·²åºŸå¼ƒ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- getFileIntoDir(){ #cd modified #for j in -10.00 -9.00 -8.00 -7.00 -6.00 -5.00 -4.00 -3.00 -2.00 -1.00 0.00 1.00 2.00 3.00 4.00 5.00 6.00 7.00 8.00 9.00 10.00 11.00 12.00 13.00 14.00 15.00 16.00 17.00 18.00 19.00 20.00 21.00 22.00 23.00 24.00 25.00 26.00 27.00 28.00 29.00 30.00 for j in `seq -10.00 30.00` do for i in `ls *.txt` do awk '{print}' $i |awk -v B=\u0026quot;$i\u0026quot; -v A=\u0026quot;æ”»è§’ï¼š\u0026quot;\u0026quot;$j\u0026quot; -v C=\u0026quot;a\u0026quot;\u0026quot;$j\u0026quot; '$0~A{print \u0026quot;cp \u0026quot;,B,\u0026quot; \u0026quot;C\u0026quot;/\u0026quot;B|\u0026quot;/bin/bash\u0026quot;}' done done } #--- FUNCTION ---------------------------------------------------------------- # NAME: getFileIntoDirNew # DESCRIPTION: æ–°ç‰ˆæœ¬çš„getFileIntoDir æ–¹å¼ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- #grep \u0026quot;æ”»è§’ï¼š25.00\u0026quot; *.txt|awk -F[:] '{print $1}' getFileIntoDirNew(){ #for j in -10.00 -9.00 -8.00 -7.00 -6.00 -5.00 -4.00 -3.00 -2.00 -1.00 0.00 1.00 2.00 3.00 4.00 5.00 6.00 7.00 8.00 9.00 10.00 11.00 12.00 13.00 14.00 15.00 16.00 17.00 18.00 19.00 20.00 21.00 22.00 23.00 24.00 25.00 26.00 27.00 28.00 29.00 30.00 for j in `seq -10.00 30.00` do grep \u0026quot;æ”»è§’ï¼š$j\u0026quot; *.txt|awk -F[:] '{print $1}'|xargs -i mv {} \u0026quot;a\u0026quot;\u0026quot;$j\u0026quot; done } ## æ¸…é™¤ç©ºè¡Œ #--- FUNCTION ---------------------------------------------------------------- # NAME: blankEmptyLine # DESCRIPTION: åˆ©ç”¨sed -iå‘½ä»¤ç›´æ¥å¤„ç†æ–‡ä»¶ä¸­å¤šä½™çš„ç©ºè¡Œ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- blankEmptyLine(){ # åœ¨æ¯ä¸ªæ–‡ä»¶å¤¹è¿è¡Œè¿™äº›å‘½ä»¤ æ¸…é™¤ç©ºè¡Œ #cd modified for i in `ls -d */` do #if [ -e $i/\u0026quot;å®éªŒ*.txt\u0026quot; ] #ç”±äºä¸å­˜åœ¨ä»»ä½•*.txtç›¸å…³çš„ä¸œè¥¿ æ‰€ä»¥æŠ¥é”™ï¼ ä½†æ˜¯ä¸å½±å“ç¨‹åºçš„è¿›è¡Œ æ‰€ä»¥å¿½ç•¥ #numBlank=`ls $i/*.txt|wc -l` # å¦‚æœåŠ ä¸Š.txtåè€Œä¸æ–­æŠ¥é”™ numBlank=`ls $i/|wc -l` # è¿™æ ·å°±å¯ä»¥å¿½ç•¥æ‰ a26.00 --a30.00ä¸ºç©ºçš„æƒ…å†µ echo $i\u0026quot;--Blank--\u0026quot;$numBlank if [ $numBlank -gt 0 ] then sed -i '/^\\s*$/d' $i/*.txt fi done } #--- FUNCTION ---------------------------------------------------------------- # NAME: cal # DESCRIPTION: æŠŠæ¯ä¸ªæ”»è§’ä¸‹çš„æ–‡ä»¶ï¼Œåˆ©ç”¨awkæ‰§è¡Œæ”»è§’å¹³å‡ å‡åŠ›ç³»æ•°å¹³å‡ å’Œå‹åŠ›ç³»æ•°å¹³å‡ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- cal(){ # åœ¨æ¯ä¸ªæ–‡ä»¶å¤¹ä¸‹éƒ½è¿è¡Œæ­¤è®¡ç®—å¹³å‡å€¼ ç¨‹åº #cd modified for i in `ls -d */` do #if [ -e $i/\u0026quot;å®éªŒ*.txt\u0026quot; ] #numCal=`ls $i/*.txt|wc -l` numCal=`ls $i/|wc -l` echo $i\u0026quot;--Cal--\u0026quot;$numCal if [ $numCal -gt 0 ] then #echo \u0026quot;$i ok\u0026quot; awk -F\u0026quot;[ ï¼š]\u0026quot; 'BEGIN{num=0;}{if($0 ~/æ”»è§’/){f[FNR]=$1;g[FNR]=$4;num+=1;}else if($0 ~/å‡åŠ›ç³»æ•°/){f[fNR]=$1;g[FNR]+=$4;a[FNR]=$5;b[FNR]+=$9;}else if($0 ~/å‹åŠ›ç³»æ•°/){f[FNR]=$1;g[FNR]=$2}else{f[FNR]+=$1;g[FNR]+=$2;if(nbr\u0026lt;FNR) {nbr=FNR;}}}END{for(i=0;i\u0026lt;=nbr;i++){print f[i]/num,g[i]/num,a[i]/num,b[i]/num;} print num;};' $i/*.txt\u0026gt;$i/modified.txt fi done } #--- FUNCTION ---------------------------------------------------------------- # NAME: plot # DESCRIPTION: å‡½æ•°ç”¨äºç”»å›¾ è°ƒç”¨gnuplot # ä½¿ç”¨ä¸‹é¢å‡½æ•°ä¹‹å‰å¾—å®‰è£…gnuplot # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- plot(){ #for i in `ls`;do num=`ls $i|wc -l`;let num=$[$num-1];sed -n '2p' $i/\u0026quot;modified.txt\u0026quot;|awk -v A=$i -v B=$num-2 '{print A,$2*B}' \u0026gt;\u0026gt; a.txt;sed -n '3p' $i/\u0026quot;modified.txt\u0026quot;|awk '{print $2}' \u0026gt;\u0026gt; a.txt;done; # sed 'N;s/\\n/ :/' a.txt # for i in `ls`;do num=`ls $i|wc -l`;let num=$[$num-1];sed -n '2p' $i/\u0026quot;modified.txt\u0026quot;|awk -v A=$i -v B=$num-2 '{print $2*B}' \u0026gt;\u0026gt; a.txt;sed -n '3p' $i/\u0026quot;modified.txt\u0026quot;|awk '{print $2}' \u0026gt;\u0026gt; a.txt;done; for i in `ls -d */` ## ç”¨æ³•æ€æƒ³å’Œcpçš„å¤„ç†ä¸€æ · do #if [ -e $i/\u0026quot;å®éªŒæ•°æ®*.txt\u0026quot; ] # ä¸æ”¯æŒæ­£åˆ™å†™æ³• #if [ -e $i/\u0026quot;å®éªŒæ•°æ®*.txt\u0026quot; ] #numPlot=`ls $i/\u0026quot;*.txt\u0026quot;|wc -l` # é”™è¯¯å†™æ³• ä¸è¦ç”¨åŒå¼•å· #numPlot=`ls $i/*.txt|wc -l` numPlot=`ls $i/|wc -l` #echo $i\u0026quot;--cl-cd--\u0026quot;$numPlot if [ $numPlot -gt 0 ] then num=`ls $i|wc -l` num=$(($num-1)) #print $i,$num sed -n '2p' $i/\u0026quot;modified.txt\u0026quot;|awk -v A=$i -v B=$num '{print $2*B}' \u0026gt;\u0026gt; shengli.txt sed -n '3p' $i/\u0026quot;modified.txt\u0026quot;|awk '{print $2}' \u0026gt;\u0026gt; shengli.txt sed -n '2p' $i/\u0026quot;modified.txt\u0026quot;|awk -v A=$i -v B=$num '{print $2*B}' \u0026gt;\u0026gt; zuli.txt sed -n '3p' $i/\u0026quot;modified.txt\u0026quot;|awk '{print $4}' \u0026gt;\u0026gt; zuli.txt fi done # è¿™æ˜¯ä¸€ä¸ªç›¸å½“æ£’çš„æŠ€å·§ æŠŠä¸¤è¡Œåˆå¹¶ä¸ºä¸€è¡Œ sed -i 'N;s/\\n/ /' shengli.txt sort -n shengli.txt \u0026gt; shenglimodified.txt sed -i 'N;s/\\n/ /' zuli.txt sort -n zuli.txt \u0026gt; zulimodified.txt # ä¸¤å¼ å›¾ ç¬¬ä¸€å¼ æ˜¯cl ç¬¬äºŒç« å›¾æ˜¯cd gnuplot\u0026lt;\u0026lt;EOF set ter 'png' set out 'shengli.png' plot \u0026quot;shenglimodified.txt\u0026quot; t 'cl' w lp EOF gnuplot\u0026lt;\u0026lt;EOF set ter 'png' set out 'zuli.png' plot \u0026quot;zulimodified.txt\u0026quot; t 'cd' w lp EOF rm -rf zuli.txt rm -rf shengli.txt } #--- FUNCTION ---------------------------------------------------------------- # NAME: plotCp # DESCRIPTION: ç”¨äºæ‰“å°cpæ›²çº¿ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- plotCp(){ # ä¹‹æ‰€ä»¥æ·»åŠ ä¸Š -d */ çš„ä½œç”¨æ˜¯ ä¸è¦å¤„ç†ä¸Šä¸€æ­¥äº§ç”Ÿçš„shengli.png ç­‰æ–‡ä»¶ï¼Œè€Œåªå¤„ç†æ–‡ä»¶å¤¹å³å¯! for i in `ls -d */` # æ³¨æ„ä¸€å®šæ˜¯ */ å•ç‹¬ä½¿ç”¨ ls -dæ²¡æœ‰æ•ˆæœ do #if [ -d $i ] \u0026amp;\u0026amp; [ -e $i/\u0026quot;å®éªŒæ•°æ®*txt\u0026quot; ] ;; ä¸æ”¯æŒæ­£åˆ™å†™æ³• # æ–°æ”¹è¿›çš„åœ°æ–¹ æƒ³åˆ™ä¼šé‡‡ç”¨ å¼•è¿›lså·¥å…· å¹¶è°ƒç”¨wc # #IF [Â·Â·Â·] -a [Â·Â·Â·] è¿™æ ·ä¸è¡Œã€‚ å¾—æ”¹æˆ if [ ... -a ...] æˆ–è€… If [...] \u0026amp;\u0026amp; [..] #è¿™æ ·å§ï¼ŒIF [Â·Â·Â·] \u0026amp;\u0026amp; [Â·Â·Â·] numPlotCp=`ls $i/|wc -l` #numPlotCp=`ls $i/*.txt|wc -l` #echo $i\u0026quot;--Cp--\u0026quot;$numPlotCp if [ $numPlotCp -gt 0 ] then sed -n '6,47p' $i/\u0026quot;modified.txt\u0026quot; \u0026gt;\u0026gt; $i/\u0026quot;cpUp.txt\u0026quot;;sed -n '49,93p' $i/\u0026quot;modified.txt\u0026quot; |sort -k 2 -nr \u0026gt;\u0026gt; $i/\u0026quot;cpUp.txt\u0026quot;;cpGrid fi done } #--- FUNCTION ---------------------------------------------------------------- # NAME: cpGrid # DESCRIPTION: æ³¨æ„ gnuplotå¿…é¡»æ”¾åœ¨å¥é¦– # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- cpGrid(){ gnuplot\u0026lt;\u0026lt;EOF set ter 'png' set out '$i/cpUp.png' set xtics rotate by -45 set ytics rotate by -45 plot \u0026quot;$i/cpUp.txt\u0026quot; t 'cp' w lp EOF } # æ‰§è¡Œå‡½æ•° cd $1 pwd deleteDensity fenLei getFileIntoDirNew blankEmptyLine cal plot plotCp ","date":1433226957,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1433226957,"objectID":"7474e2f7a397a5a13cbaf0b867d6e42b","permalink":"/blog/2015/06/02/bashzhi-neng-fen-lei-sheng-ji-ban/","publishdate":"2015-06-02T14:35:57+08:00","relpermalink":"/blog/2015/06/02/bashzhi-neng-fen-lei-sheng-ji-ban/","section":"archives","summary":" åŠ å…¥äº† seq 1 8 æ™ºèƒ½äº§ç”Ÿåºåˆ—çš„æ–¹æ³• ä½¿å¾—30åº¦æ”»è§’çš„å®éªŒå€¼ä¹Ÿå¯ä»¥å¤„ç†ã€‚ åˆ¤æ–­æ–‡ä»¶å¤¹å†…æ˜¯å¦å­˜åœ¨æ–‡ä»¶ [ -e \u0026ldquo;å®éªŒ*.txt\u0026rdquo; ] æ— æ³•æ‰§è¡Œæ­£åˆ™è¡¨è¾¾å¼ å› ä¸ºæœ‰å¯èƒ½æ²¡æœ‰å¯¹åº”æ”»è§’çš„ ","tags":null,"title":"bashæ™ºèƒ½åˆ†ç±»å‡çº§ç‰ˆ","type":"archives"},{"authors":null,"categories":["incompact3d "],"content":"è¿™ä¸ªgnuplotè„šæœ¬æ˜¯æˆ‘ç”¨äºå¤„ç†Incompact3däº§ç”Ÿå‡ºæ¥çš„ç»Ÿè®¡ç»“æœ(å¦‚ä½•ç»Ÿè®¡éƒ¨åˆ†ï¼Œæš‚æ—¶æœªå†™)çš„ç”»å›¾è„šæœ¬ã€‚\næ•°æ®æ®µ æ³¨æ„gnuplotå¤„ç†æ•°æ®æ–‡ä»¶æŒ‰ç…§ç©ºè¡Œåˆ’åˆ†indexéƒ¨åˆ†ã€‚æ‰€ä»¥ä¸‹é¢çš„éƒ¨åˆ†æ€»å…±æœ‰å››ä¸ªindexï¼Œè°ƒç”¨æ–¹å¼æ˜¯\n plot \u0026ldquo;æ–‡ä»¶å\u0026rdquo; index 0 ç¬¬ä¸€éƒ¨åˆ†æ–‡ä»¶ä¿¡æ¯çš„æ‰“å° plot \u0026ldquo;æ–‡ä»¶å\u0026rdquo; index 1 plot \u0026ldquo;æ–‡ä»¶å\u0026rdquo; index 2 plot \u0026ldquo;æ–‡ä»¶å\u0026rdquo; index 3  å…·ä½“çœ‹gnuplotè„šæœ¬éƒ¨åˆ†ã€‚\n0 2.9684e-24 0.7369 0.73552 1.4746 1.4677 2.2139 2.195 2.9556 2.915 3.7005 3.6242 4.4495 4.3184 5.2034 4.9934 5.9631 5.6455 6.7295 6.2713 7.5034 6.8686 8.2859 7.4358 9.078 7.9722 9.8806 8.4777 10.695 8.9528 11.522 9.3986 12.363 9.8162 13.219 10.207 14.092 10.573 14.983 10.916 15.894 11.236 16.825 11.537 17.779 11.819 18.759 12.084 19.764 12.334 20.799 12.569 21.864 12.791 22.963 13.001 24.099 13.201 25.273 13.391 26.49 13.572 27.753 13.745 29.065 13.911 30.431 14.071 31.855 14.225 33.343 14.374 34.899 14.52 36.529 14.661 38.24 14.8 40.04 14.936 41.936 15.07 43.936 15.202 46.052 15.333 48.292 15.464 50.669 15.594 53.196 15.725 55.887 15.856 58.756 15.989 61.819 16.124 65.096 16.262 68.603 16.402 72.361 16.544 76.389 16.69 80.706 16.838 85.33 16.988 90.276 17.139 95.557 17.288 101.18 17.434 107.14 17.572 113.42 17.7 120 17.813 126.85 17.906 133.91 17.975 141.11 18.017 148.4 18.03 5 0 5 20 30 0 30 20 120 0 120 20  gnuplotå¤„ç†éƒ¨åˆ† set ter 'png' set out 'fit1.png' set xlabel \u0026quot;Y+\u0026quot; set ylabel \u0026quot;U+\u0026quot; set xtics font 'Times-Roman, 15' f(x)=a*x+b g(x)=1/k*log(x)+B fit [0:5] f(x) \u0026quot;umfit.dat\u0026quot; index 0 via a,b print \u0026quot;a:=\u0026quot;,a,\u0026quot;b=\u0026quot;,b fit [30:148] g(x) \u0026quot;umfit.dat\u0026quot; index 0 via k,B print \u0026quot;k=\u0026quot;,k,\u0026quot;B=\u0026quot;,B set xtics 20 set samples 1280 set key right bottom box set arrow from 20,5 to 5,2 set label sprintf(\u0026quot;viscous sub-layer fit:\\n f(x)=%g*x +%g\u0026quot;, a,b) at 20,6 set arrow from 90,12 to 70,16 set label sprintf(\u0026quot;logarithm range fit:\\n f(x)=1/%g*log(x) +%g\u0026quot;,k,B) at 90,11 #set logscale x #set xrange #set yrange [0:0.5] #[0:220][0:0.04] # the most important place is here plot [0:148][0:20] \u0026quot;umfit.dat\u0026quot; index 0 w lp pt 1 t \u0026quot;U+--Y+\u0026quot;,f(x) w l lt -1 lw 2 t \u0026quot;linear-fit\u0026quot;,g(x) w l lt 3 lw 2 t \u0026quot;log-fit\u0026quot;,\\ \u0026quot;\u0026quot; index 1 w l lt 0 t \u0026quot;linear-fit-end\u0026quot;,\u0026quot;\u0026quot; index 2 w l lt 0 t \u0026quot;log-law-start\u0026quot;,\u0026quot;\u0026quot; index 3 w l lt 0 t \u0026quot;log-law-end\u0026quot;  å¤„ç†ç»“æœ ä¸€äº›å®æ—¶ç›‘æµ‹éƒ¨åˆ† æ‰§è¡Œéƒ¨åˆ†ï¼š a.sh\nmpirun -np 8 incompact3d \u0026gt;\u0026gt; tail.out \u0026amp;  è·å–ä¿¡æ¯éƒ¨åˆ† image.sh\nmore tail.out | grep DIV | grep U* |grep Max|sed '/final/d'| awk -F'=' '{print $2}' |sed '1,3d'\u0026gt; divu more tail.out | grep UT | awk '{print $4}'|sed '1,2d' \u0026gt; flow-rate-correction-factor #more tail.out | grep zhao | awk '{print $2,$3,$4}' \u0026gt; stretching more tail.out | grep PHI | grep max|awk -F'=' '{print $2}' \u0026gt; PHImax more tail.out | grep PHI|grep MOYEN | awk -F\u0026quot;:\u0026quot; '{print $2*10^4}'\u0026gt; PHImoyen #gnuplot monitorFLOWRATE.gnu bash monitor.sh  æ‰“å°éƒ¨åˆ† monitor.sh\n#!/bin/bash #=============================================================================== # # FILE: monitor.sh # # USAGE: ./monitor.sh # # DESCRIPTION: # # OPTIONS: --- # REQUIREMENTS: --- # BUGS: --- # NOTES: --- # AUTHOR: Ye Zhaoliang (YZL), zhaoturkkey@163.com # COMPANY: NCEPU # VERSION: 1.0 # CREATED: 2014å¹´10æœˆ28æ—¥ 09æ—¶42åˆ†15ç§’ CST # REVISION: --- #=============================================================================== # set yrange [0:2] # set xlabel # set ylabel function mainpoint() { # echo $0; # echo $1; gnuplot\u0026lt;\u0026lt;EOF set ter 'png' set out '$1.png' set grid plot '$1' w p pt 2 EOF } function mainline() { # echo $0; # echo $1; gnuplot\u0026lt;\u0026lt;EOF set ter 'png' set out '$1.png' set grid set yrange [0:2] plot '$1' w l lt 2 EOF } #mainpoint ux2 #mainpoint uy2 #mainpoint uz2 #mainpoint ux5 #mainpoint uy5 #mainpoint uz5 #mainline uy2 mainpoint divu mainpoint flow-rate-correction-factor #mainpoint stretching mainpoint PHImax mainpoint PHImoyen #mainpoint averageux2 #mainpoint averageux5 #mainpoint rxx2 #mainpoint rxx5 #mainpoint dudy_bottom_spatial_only #mainpoint dudy_top_spatial_only #mainpoint dudy_bottom_spatial_time #mainpoint dudy_top_spatial_time #new add stress #mainpoint umean #mainpoint vmean #mainpoint wmean ##mainpoint uu ##mainpoint vv #mainpoint ww #mainpoint stressu #mainpoint stressv #mainpoint stressw #mainpoint stressuv #mainpoint stressuw #mainpoint stressvw  æ•´åˆéƒ¨åˆ† cut -cçš„ç›®çš„æ˜¯è·å–å…·ä½“å¯¹åº”çš„æ—¶é—´æ­¥,ç„¶åæŠŠæ‰€æœ‰çš„pngç›¸å…³ä¿¡æ¯ æ”¾åˆ°å¯¹åº”æ—¶é—´æ­¥æ–‡ä»¶å¤¹ä¸­ã€‚\ncd /home/Cedric/diric/src \u0026amp;\u0026amp; more tail.out |grep Time|awk '{print $4}' |tail -1|cut -c 1-6 |awk '{cmd=\u0026quot;mkdir step\u0026quot;$1;system(cmd);system(\u0026quot;sh image.sh\u0026quot;);cmd2=\u0026quot;mv *.png step\u0026quot;$1;system(cmd2);} ' # END{cmd3=\u0026quot;mv dudy* umean stress step\u0026quot;$1;system(cmd3)}  å®æ—¶æµè§ˆ åˆ‡æ¢åˆ°å¯¹åº”çš„æ–‡ä»¶å¤¹ $ python -m SimpleHTTPServer  ç„¶åå°±å¯ä»¥æ‰“å¼€ 127.0.0.1:8000è¿›è¡Œæµè§ˆäº†ã€‚\nYou can also use crontab to execute program in real time crontab -e  Then you can copy the info below,but modified the datatime.\n0 23 19 6 * sh /home/simulation2_128-117-128Re4200/main.sh 30 23 19 6 * sh /home/simulation2_128-117-128Re4200/main.sh 0 0 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 30 0 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 0 1 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 30 1 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 0 2 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 30 2 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 0 3 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 30 3 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 0 4 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 30 4 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 0 5 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 30 5 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 0 6 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 30 6 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 0 7 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh 30 7 20 6 * sh /home/simulation2_128-117-128Re4200/main.sh ","date":1433035865,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1433035865,"objectID":"8aec96c306f69220b6339de453b8d494","permalink":"/blog/2015/05/31/u-plus-y-plus/","publishdate":"2015-05-31T09:31:05+08:00","relpermalink":"/blog/2015/05/31/u-plus-y-plus/","section":"archives","summary":"è¿™ä¸ªgnuplotè„šæœ¬æ˜¯æˆ‘ç”¨äºå¤„ç†Incompact3däº§ç”Ÿå‡ºæ¥çš„ç»Ÿè®¡ç»“æœ(å¦‚ä½•ç»Ÿè®¡éƒ¨åˆ†ï¼Œæš‚æ—¶æœªå†™)çš„ç”»å›¾è„šæœ¬ã€‚\n","tags":null,"title":"U+-Y+","type":"archives"},{"authors":null,"categories":["git"],"content":"gitæ˜¯ä¸€ä¸ªLinuså¼€å‘çš„ä¸€ä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿè€Œå·²ã€‚ ä¸‹é¢æ˜¯æˆ‘æ€»ç»“çš„ä¸€äº›æ“ä½œæ­¥éª¤ï¼Œæœ€ç»ˆçš„ç›®çš„æ˜¯ä½ å¯ä»¥æäº¤ä¿¡æ¯åˆ°githubï¼Œ å¹¶äº†è§£gitå’Œgithubä¹‹é—´çš„å…³ç³»ã€‚\n1. æ‰“å¼€git 2. é…ç½®æœ¬åœ°gitç¯å¢ƒ 3. Github æ³¨å†Œç”¨æˆ· è´¦å·é‚®ç®±æœ€å¥½æ˜¯ä½ åˆšæ‰gitæœ¬åœ°é…ç½®ï¼ å¯†ç è‡ªå·±é€‰\n4. ssh å…¬åŒ™ç”Ÿæˆï¼ˆä¸€è·¯å›è½¦ å°±å¥½ï¼Œç”±äºæˆ‘å·²ç»é…ç½®å¥½äº†å…¬åŒ™æ‰€ä»¥æ˜¾ç¤ºæ˜¯å¦è¦†ç›–ã€‚ã€‚ã€‚ã€‚ã€‚ï¼‰ 5. æ‹·è´å…¬åŒ™åˆ°é»è´´æ¿ï¼ˆubuntu å¾—å®‰è£…clipå‘½ä»¤ï¼š apt-get install clip 6. ç™»é™†ä½ çš„githubç”¨æˆ· è‡ªåŠ¨åˆ‡æ¢åˆ°ç™»é™†åçš„ç•Œé¢ ç„¶åï¼Œä½ ç‚¹å‡»é…ç½®ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ æŒ‰ç…§ä¸Šå›¾ï¼Œæ‰“å¼€æ·»åŠ å…¬åŒ™ç•Œé¢ï¼Œç„¶ååˆ©ç”¨ä¸‹å›¾çš„Add SSH keyæ·»åŠ å…¬åŒ™ã€‚Titleçš„å†…å®¹éšä¾¿å†™ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ä¸»è¦æ˜¯æŠŠå…¬åŒ™æ¡†å¡«å¥½å³å¯ ç½‘ä¸Šè¯´è¦æµ‹è¯•ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†æƒ…å†µï¼Œè¿™æ ·å°±ç®—é€šè¿‡äº†ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‰ç…§https://help.github.com/articles/generating-ssh-keys/ è¿™ä¸ªè¿æ¥çš„è¯´æ³•è¿›è¡Œæµ‹è¯•ï¼Œã€‚ã€‚ã€‚ã€‚ã€‚ã€‚æˆ‘ç°åœ¨ä¸€èˆ¬ä¸æµ‹è¯•ã€‚ã€‚ã€‚ã€‚\n7. ç°åœ¨å¼€å§‹ä¸‹è½½RupengFanYi/fanyi çš„åŸå§‹ç‰ˆæœ¬å†…å®¹ æˆ‘æ˜¯æƒ³æŠŠå·²ç»ç¿»è¯‘çš„æ”¾åœ¨Finishedæ–‡ä»¶å¤¹ä¸‹ æˆ‘ä»¬ç°åœ¨å¼€å§‹å…‹éš†è¿™ä¸ªé¡¹ç›®ã€Š\u0026mdash;\u0026ndash;åšæ­£äº‹äº†ï¼ï¼\nGit clone è®°ä½ï¼Œä½ å¯ä»¥åˆ‡æ¢åˆ°ä»»æ„ç›®å½•ä¸‹è¿›è¡Œgit clone,ä½ ä¹Ÿå¯ä»¥æŠŠä½ çš„è¿™ä¸ªfanyiæ–‡ä»¶å¤¹æ‹·è´åˆ°ä»»æ„æ–‡ä»¶å¤¹ Cd f:/ å°±è¡¨ç¤ºåˆ‡æ¢åˆ°fç›˜ æ—¢ç„¶å·²ç»git clone äº†ä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨å¼€å§‹è¿›è¡Œç¬¬å…«æ­¥\n8. æŠŠä½ å·²ç»ç¿»è¯‘çš„æ–‡ä»¶ æ¯”å¦‚*.html å¤åˆ¶åˆ°Finished æ–‡ä»¶å¤¹è¡¨ç¤ºå·²ç»ç¿»è¯‘çš„ ä¸€èˆ¬ä¸åŠ¨fanyiæ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹ï¼æˆ‘ä»¬åªæ˜¯æŠŠç¿»è¯‘å¥½çš„æ–‡ä»¶æ‹·è´åˆ°Finishedç„¶åä¸Šä¼ \nç„¶åå†åˆ‡å›åˆ°ä¸»å·¥ä½œåŒºï¼ˆè¡¨ç¤º fanyiæ–‡ä»¶å¤¹ä¸‹ï¼‰ ä¸‹é¢å­—ç¬¦ç•Œé¢æ“ä½œæµç¨‹ï¼š ä½†æ˜¯ä¹Ÿå¯èƒ½pushå‡ºç°é—®é¢˜ï¼Œ \u0007æ¯”å¦‚Gtkç¿»è¯‘01çŠ¯çš„é”™è¯¯ è¿™ä¸ªæ˜¯å› ä¸ºï¼Œæˆ‘å®ç°æ›´æ–°äº†æ–‡ä»¶ï¼Œè€Œä»–çš„å½“å‰æ–‡ä»¶å¤¹æ²¡æœ‰ï¼æ‰€ä»¥å‘ç”Ÿäº†å†²çª\u0008\nè¿™å°±æ˜¯æŠ¥é”™çš„å†…å®¹ï¼Œæ‰€ä»¥ä½ ç°åœ¨çš„è§£å†³åŠæ³•åŠæ³•æ˜¯ï¼š ç„¶åå°±okäº† æ€»ç»“ ä»¥åæˆ‘ä»¬å¯ä»¥è¿™æ ·åš Gtkç¿»è¯‘01è¯´æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼šï¼ˆä»…ä¾›å¤§å®¶å‚è€ƒï¼‰ ","date":1432905279,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432905279,"objectID":"9e74724a34820e50b90e22b0d6fa73d2","permalink":"/blog/2015/05/29/githe-githubpei-zhi/","publishdate":"2015-05-29T21:14:39+08:00","relpermalink":"/blog/2015/05/29/githe-githubpei-zhi/","section":"archives","summary":"gitæ˜¯ä¸€ä¸ªLinuså¼€å‘çš„ä¸€ä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿè€Œå·²ã€‚ ä¸‹é¢æ˜¯æˆ‘æ€»ç»“çš„ä¸€äº›æ“ä½œæ­¥éª¤ï¼Œæœ€ç»ˆçš„ç›®çš„æ˜¯ä½ å¯ä»¥æäº¤ä¿¡æ¯åˆ°githubï¼Œ å¹¶äº†è§£gitå’Œgithubä¹‹é—´çš„å…³ç³»ã€‚\n","tags":null,"title":"gitå’Œgithubé…ç½®","type":"archives"},{"authors":null,"categories":["Haskell"],"content":"åŸºäºèŒƒç•´ç†è®ºï¼Œåœ¨æ¯ä¸€ä¸ªèŒƒç•´é‡Œé¢éƒ½åŒ…å«ä¸€ä¸ªobjectså’Œfmapå…³ç³»ï¼Œåˆ©ç”¨functoræ˜ å°„åˆ°ä¸åŒçš„categoryã€‚ å¯ä»¥ç»§ç»­æ€è€ƒçš„æ˜¯ä¸€ä¸ªfmap:(*-\u0026gt;*) ä¸€ä¸ªfmapæ˜¯å¯ä»¥å……å½“å½¢å‚çš„ï¼Œå› ä¸ºä»–æ­£å¦‚åœ¨ä¸€ä¸ªList moduleä¸­ ä¸€ä¸ªä¸€ä¸ªçš„ç ´æŠ˜å·å’Œç®­å¤´æ„æˆçš„mapå…³ç³»è¢«æ”¾è¿›Listè¿™ä¸ªcategoryä¸­ã€‚\nmodule List ( elemIndex, elemIndices, find, findIndex, findIndices, nub, nubBy, delete, deleteBy, (\\\\), deleteFirstsBy, union, unionBy, intersect, intersectBy, intersperse, transpose, partition, group, groupBy, inits, tails, isPrefixOf, isSuffixOf, mapAccumL, mapAccumR, sort, sortBy, insert, insertBy, maximumBy, minimumBy, genericLength, genericTake, genericDrop, genericSplitAt, genericIndex, genericReplicate, zip4, zip5, zip6, zip7, zipWith4, zipWith5, zipWith6, zipWith7, unzip4, unzip5, unzip6, unzip7, unfoldr, -- ...and what the Prelude exports -- []((:), []), -- This is built-in syntax map, (++), concat, filter, head, last, tail, init, null, length, (!!), foldl, foldl1, scanl, scanl1, foldr, foldr1, scanr, scanr1, iterate, repeat, replicate, cycle, take, drop, splitAt, takeWhile, dropWhile, span, break, lines, words, unlines, unwords, reverse, and, or, any, all, elem, notElem, lookup, sum, product, maximum, minimum, concatMap, zip, zip3, zipWith, zipWith3, unzip, unzip3 ) where  æˆ‘ä»¬æ‰€çœ‹åˆ°\ndata Bool = False | True deriving (Read, Show, Eq, Ord, Enum, Bounded) data Int = -65532|...|-1|0|1|2|...|65532 data Integer = ...-2|-1|0|1|2|3|4|...  ä»è¿™è¾¹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°False ï¼ŒTrueï¼Œ 1ï¼Œ2ï¼Œ3ï¼Œ4\u0026hellip;.å«åšData constructor è€ŒBool,Integerå«åšType Constructor,æ‰€ä»¥ä½ å®Œå…¨å¯ä»¥æŠŠç±»å‹å½“ä½œæ•°æ®ï¼Œè€Œè¿™ä¸ªç±»å‹åŒ…å«è¡¨è¾¾å¼ã€å‡½æ•°ã€æ•°æ®ã€‚\nç±»ä¹ŸåŒ…å« + åŸå­ç±»å‹ Integer Char Integer-\u0026gt;Char(functions mapping from Integer to Char) + ç»“æ„ç±»å‹ [Integer] æ•°å­—åˆ—è¡¨ (Integer,Char)æ•°å­—å­—ç¬¦tuple\næ¯”å¦‚ï¼š\n1::Int inc::Integer-\u0026gt;Integer [1]::[Integer] ('b',4)::[Char,Integer] ::å¯ä»¥è¯»ä½œ has typeç±»å‹ä¸º  æˆ‘ä»¬ä¹Ÿä¼šçœ‹åˆ°å¾ˆå¤šç±»çš„ç»§æ‰¿\nclass Foo a =\u0026gt; Bar a where ... instance (Eq a, Show a) =\u0026gt; Foo [a] where ... instance Num a =\u0026gt; Bar [a] where ... class (Eq a) =\u0026gt; Ord a where (\u0026lt;),(\u0026lt;=),(\u0026gt;=),(\u0026gt;)::a-\u0026gt;a-\u0026gt;Bool max,min ::a-\u0026gt;a-\u0026gt;a ----æ­¤æ—¶Eqå«åšOrdçš„å­ç±»  å…¶å®æ›´å¤šçš„å¯ä»¥å‚è€ƒHaskell 98 Report\nå½“ç„¶ä½ äº‹å…ˆå¾—çŸ¥é“ç±»çš„å®šä¹‰\nclass cx =\u0026gt; C u where { cbody }  class æ–¹æ³•è¢«å«åšhaskellé‡Œçš„é¡¶å±‚å£°æ˜ã€‚\nè€Œæœ‰ä¸€äº›æ¯”è¾ƒæœ‰è¶£çš„lambdaè½¬æ¢\n\\x-\u0026gt;\\y-\u0026gt;(+) x y ---\u0026gt; \\x y -\u0026gt; (+) x y (x+) --\u0026gt; \\y-\u0026gt;x+y (+y) --\u0026gt; \\x-\u0026gt;x+y (+) --\u0026gt; \\x y -\u0026gt; x+y (.) :: (b-\u0026gt;c) -\u0026gt;(a-b)-\u0026gt;(a-\u0026gt;c) f.g = \\x-\u0026gt; f (g x)  åœ¨ä½ ç¼–å†™å‡½æ•°çš„æ—¶å€™ï¼š ä¸€ä¸ªæ•°æ®ç»„å’Œå¯ä»¥å˜ä¸º(x:xs) == x+xså®Œæ•´çš„æ•°æ®ç»„å’Œ ï¼Œåªä¸è¿‡xä»£è¡¨è¿™ä¸ªæ•°æ®ç»„å’Œçš„headéƒ¨åˆ†ï¼Œè€Œxsè¡¨ç¤ºtailéƒ¨åˆ† è€Œå¦‚æœ s@(x:xs) å…¶ä¸­çš„sä»£è¡¨å°±æ˜¯æ•´ä¸ªæ•°æ®ç»„å’Œäº†ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸é”™çš„æŠ€å·§ã€‚\nf (x:xs) = xâŒxs f s@(x:xs) = x:s  å½“ç„¶ä½ ä¹Ÿå¯èƒ½é‡åˆ°Wild-cardsæƒ…å†µ\nhead (x:_) = x head (_:xs) = xs  å¦å¤–ä¸€ä¸ªåˆ†æ”¯å…³äºæ¨¡å¼åŒ¹é…çš„ç›¸ä¼¼æ•ˆæœæ˜¯caseå®šä¹‰ f p11 \u0026hellip; p1k = e1 \u0026hellip; f pn1 \u0026hellip; pnk = en å…¶ä¸­pijæ˜¯æ¨¡å¼ç»„åˆï¼Œ\nå¦‚æœä½ ä½¿ç”¨caseè¿›è¡Œä¹¦å†™\nf x1 x2 ... xk = case (x1,...,xk) of (p11,...,p1k) -\u0026gt; e1 ... (pn1,...,pnk)-\u0026gt;en  æ¯”å¦‚ä¸‹é¢ï¼š\n--é‡‡ç”¨æ¨¡å¼åŒ¹é…æ–¹å¼ take _ [] = [] take 0 [] = [] take n (x:xs) = x:take (n-1) xs --é‡‡ç”¨caseæ–¹å¼ take m ys = case (m,ys) of (0,_) -\u0026gt; [] (_,[]) -\u0026gt; [] (n,x:xs) -\u0026gt; x:take (n-1) xs  ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„functorçš„å®šä¹‰ï¼Œå› ä¸ºå®ƒç”¨äºèŒƒç•´ä¹‹é—´çš„é“¾æ¥ï¼Œä¸»è¦æ˜¯ä¸€ä¸ªFunctorç±»çš„å®ç°å’Œfmapå‡½æ•°çš„å®šä¹‰\nclass Functor f where fmap :: (a-\u0026gt;b) -\u0026gt; f a-\u0026gt;f b å¯¹åº”çš„Functorå®ä¾‹æ˜¯ instance Functor Tree where fmap f (Leaf x) = Leaf (f x) fmap f (Branch t1 t2) = Branch (f t1) (f t2) ä¹‹æ‰€ä»¥å†™ä¸Šè¿™ä¸ªä½ ä¼šå‘ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨ Date Tree a= Leaf a| Branch a a åªæ˜¯å®šä¹‰äº†ç±»å‹ï¼Œä½†æ˜¯è¯¥ç±»å‹ï¼ˆæˆ–è€…è¯´å¤§ç‚¹ï¼Œå«åšèŒƒç•´ï¼‰å¹¶æ²¡æœ‰å®šä¹‰fmapï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰çš„calssç±»å‹å®šä¹‰å®Œä¹‹åéƒ½éœ€è¦ä½¿ç”¨instance Functorè¿›è¡Œfmapçš„ å®šä¹‰,è¿™æ ·å¯¹è±¡å’Œæ˜ å°„çš„ç»„åˆæ‰å¤Ÿæˆäº†èŒƒç•´ã€‚  è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä»–æ¯”è¾ƒé‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½ä¸€ç›´åœ¨ç”¨ï¼Œä½†æ˜¯å¹¶æœªçŸ¥æ™“ã€‚å½“ç„¶ä¸Šé¢éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯å®ä¾‹å£°æ˜é¢æ—¶å€™ä½¿ç”¨çš„æ˜¯Treeï¼Œè€Œä¸æ˜¯Tree a. ä¹Ÿå°±æ˜¯haskellå’Œc++\\javaä¸åŒçš„æ˜¯ç±»å‹å˜é‡å’Œmethodsçš„å®šä¹‰æ˜¯åˆ†å¼€çš„ã€‚ Haskellç±»ç±»ä¼¼äºjavaçš„interfaceï¼Œå®šä¹‰çš„æ˜¯ä¸€ä¸ªåè®®ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå®šä¹‰ä¸€ä¸ªå¯¹è±¡æœ¬èº«ã€‚è€Œä¸”æœ€é‡è¦çš„ä¸€ä¸ªåŒºåˆ«æ˜¯haskellæ²¡æœ‰è®¿é—®æ§åˆ¶ ä¿®é¥°ç¬¦æ¯”å¦‚public ã€privateã€‚å–è€Œä»£ä¹‹çš„æ˜¯ä½¿ç”¨moduleæ¨¡å—ç³»ç»Ÿç”¨æ¥éšè—å’Œæ˜¾ç¤ºä¸€ä¸ªç±»çš„ç»„æˆã€‚\nå…¶å®å†™åˆ°è¿™è¾¹ï¼Œæ¨¡å—ç³»ç»Ÿä½ å¯èƒ½æœ‰æ‰€ç†è§£ï¼Œå½“ç„¶æ¨¡å¼åŒ¹é…åœ¨å‡½æ•°å®šä¹‰ä¸­ä¹Ÿæ˜¯è®­ç»ƒçš„å¾ˆå¤šï¼Œå‚è€ƒHaskellåº“æ–‡æ¡£ç»“æ„ ä½†æ˜¯å…³äºinstanceï¼Œä½ æ¥è§¦ã€ç»ƒä¹ è¿˜æ˜¯æœ‰ç‚¹å°‘ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†å†…å®¹å¯ä»¥ç»§ç»­æ¢ç´¢ï¼ŒåŒ…æ‹¬IOMonadï¼ˆä¸€ä¸ªæ–°çš„IOèŒƒç•´ï¼Œå¯ä»¥å½“åšä¸€ç§æŠ½è±¡æ•°æ®ç±»å‹ï¼‰ ä¹ŸåŒ…æ‹¬å›¾å½¢åŒ–çš„åˆ¶ä½œç­‰ã€‚\n","date":1432882784,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432882784,"objectID":"f9fc68b0b67fa997acb19bea3f2f3b22","permalink":"/blog/2015/05/29/haskellzai-nao-hai-li-de-zong-ji/","publishdate":"2015-05-29T14:59:44+08:00","relpermalink":"/blog/2015/05/29/haskellzai-nao-hai-li-de-zong-ji/","section":"archives","summary":"åŸºäºèŒƒç•´ç†è®ºï¼Œåœ¨æ¯ä¸€ä¸ªèŒƒç•´é‡Œé¢éƒ½åŒ…å«ä¸€ä¸ªobjectså’Œfmapå…³ç³»ï¼Œåˆ©ç”¨functoræ˜ å°„åˆ°ä¸åŒçš„categoryã€‚ å¯ä»¥ç»§ç»­æ€è€ƒçš„æ˜¯ä¸€ä¸ªfmap:(*-\u0026gt;*) ä¸€ä¸ªfmapæ˜¯å¯ä»¥å……å½“å½¢å‚çš„ï¼Œå› ä¸ºä»–æ­£å¦‚åœ¨ä¸€ä¸ªList moduleä¸­ ä¸€ä¸ªä¸€ä¸ªçš„ç ´æŠ˜å·å’Œç®­å¤´æ„æˆçš„mapå…³ç³»è¢«æ”¾è¿›Listè¿™ä¸ªcategoryä¸­ã€‚\n","tags":null,"title":"Haskellåœ¨è„‘æµ·é‡Œçš„è¸ªè¿¹","type":"archives"},{"authors":null,"categories":["life"],"content":"æ€è€ƒæ˜¯äººç±»ç‰¹æœ‰çš„ä¸€ç§æ€§è´¨ï¼Œé€»è¾‘æ€§çš„æ€è€ƒæ›´æ˜¯äººç±»éš¾èƒ½å¯è´µçš„ç‰¹æ€§ã€‚è¿™äº›éƒ½å¯ä»¥è¯´æˆæ˜¯å¿ƒæ™ºæ¨¡å¼æˆ–è€…å¿ƒæ™ºè§„å¾‹çš„ä¸€äº›ä¸“æœ‰åè¯ï¼Œå°±å¥½åƒä¸€æ‰‡åˆä¸€æ‰‡çš„çª—å£ã€‚  ä»·æ ¼ä¸ç­‰äºè´¨é‡ ä¸è¦ç›²ä»æƒå¨ã€‚ä¸ºä»€ä¹ˆå…»ç”Ÿä¸“å®¶ä¼šè¿™ä¹ˆç«ï¼Ÿå› ä¸ºäººä»¬éƒ½çˆ±ç›²ä»æƒå¨ï¼ ä¸è¦è½»æ˜“åšå‡ºæ‰¿è¯ºã€‚æˆ‘æœ€å°´å°¬çš„ä¸€æ¬¡åº”è¯¥å°±æ˜¯ä¹°ç‰›ä»”è£¤ã€‚åœ¨æ²¡é—®æ¸…ä»·æ ¼çš„æ—¶å€™ï¼Œæˆ‘æ„Ÿè§‰å¾ˆæ»¡æ„ï¼Œä¾¿å¯¹æœåŠ¡å‘˜è¯´ï¼šæˆ‘è¦äº†ã€‚ç»“æœä¸€é—®ä»·æ ¼ï¼Œohï¼Œgodå½“æ—¶æ¨ä¸å¾—æŒ–ä¸ªåœ°æ´é’»ä¸‹å»ã€‚å…¶ä»–çš„äº‹ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¸è¦è½»æ˜“åšå‡ºæ‰¿è¯ºï¼Œå¦åˆ™åˆ°å¤´æ¥å°´å°¬çš„æ˜¯ä½ ã€‚ çŸ¥é“è‡ªå·±çœŸæ­£éœ€è¦ä»€ä¹ˆã€‚ç»å¸¸æœ‰äº›å•†å®¶å®£å¸ƒä¿ƒé”€ï¼Œç„¶åä½ å°±è·Ÿé£å»æŠ¢è´­ï¼Ÿå…¶å®å…«æˆä½ ä¹°å›æ¥çš„æ˜¯ä»¥åä¸ä¼šç”¨åˆ°çš„ è®©ç»™ä½ æä¾›å¸®åŠ©çš„äººåšå‡ºæ‰¿è¯ºã€‚æ ¹æ®æ‰¿è¯ºå’Œä¸€è‡´åŸç†ï¼Œä¸€èˆ¬äººä»¬åšå‡ºäº†æ‰¿è¯ºï¼Œç‰¹åˆ«æ˜¯åœ¨å…¬å…±åœºåˆä¸‹åšå‡ºçš„æ‰¿è¯ºï¼Œè¢«éµå®ˆçš„æ¦‚ç‡ç›¸å½“çš„å¤§ã€‚å› ä¸ºäººç±»çš„ä¸€ä¸ªç¾å¾·å°±æ˜¯å§‹ç»ˆå¦‚ä¸€ï¼Œä¿æŒè¨€è¡Œä¸€è‡´ã€‚\n åœ¨å¯¹äº‹ç‰©ä»·å€¼è®¤è¯†ä¸ç¡®å®šçš„æ—¶å€™ï¼Œä¸€èˆ¬äººä¼šè®¤ä¸ºâ€œæ˜‚è´µ=ä¼˜è´¨â€ã€‚åœ¨ç”Ÿæ´»ä¸­æ€»ç»“å‡ºä¸€äº›äº‹æƒ…çš„å›ºå®šæ¨¡å¼(è®¾è®¡æ¨¡å¼)\n æ¨¡æ‹Ÿå™¨æœ‰ç‚¹ç±»ä¼¼äºschemeçš„è§£é‡Šå™¨ã€‚ å…¶å®æ¯ä¸ªäººçš„å¤´è„‘é‡Œæˆ–è€…å¿ƒé‡Œé¢éƒ½æœ‰ä¸€ä¸ªå¦‚æ„ç®—ç›˜ï¼Œå°±åƒè¿™ä¸ªæ¨¡æ‹Ÿå™¨ä¸€æ ·ã€‚å¤§è„‘æœ‰ä¸€å¥—å®Œå–„çš„å¯¹è±¡ã€è¿åŠ¨è¡Œä¸ºè§£é‡Šå™¨ã€‚çˆ¶æ¯è§£é‡Šå­©å­çš„è¡Œä¸ºï¼Œå¸¸å¹´éš”ç€ä¸€é“é¸¿æ²Ÿï¼Œè¿™æ˜¯ä¸€ä¸ªå¤§è„‘çš„è§£é‡Šå±‚é‡Œé¢ä¸œè¥¿ï¼Œé™¤éä½ å›åˆ°è¿‡å»é‡æ–°å¸®ä½ çš„çˆ¸å¦ˆä¿®æ”¹ç¨‹åºã€‚ è€Œä¹Ÿè®¸çˆ¸å¦ˆå¯ä»¥æ¢ä¸€ç§æ€è·¯æˆ–è€…å›ºæœ‰çš„æ¨¡å¼å»è§£é‡Šå­©å­ä»¬çš„è¡Œä¸º ã€‚ å½“çˆ¶æ¯çœ‹åˆ°å­©å­çš„åè¡Œä¸ºçš„æ—¶å€™ï¼Œä¾‹å¦‚å‘è„¾æ°”ï¼Œå“­é—¹ï¼Œæ‰§æ‹—ç­‰ç­‰ï¼Œå½“çˆ¶æ¯æƒ³è¦å½’å› åˆ°å­©å­èº«ä¸Šçš„æ—¶å€™ï¼Œç ”ç©¶äººå‘˜åªæ˜¯ç®€å•åœ°é‚€è¯·å’Œé¼“åŠ±çˆ¶æ¯å»ç»§ç»­æ€è€ƒå­©å­è¡Œä¸ºèƒŒåå¯èƒ½è¿˜æœ‰ä»€ä¹ˆåŸå› ï¼Œé™¤äº†â€œè¿™å­©å­å°±æ˜¯è„¾æ°”ä¸å¥½/çˆ±å“­/æ‰§æ‹—/é€†åâ€ç­‰è§£é‡Šä¹‹å¤–è¿˜æœ‰ä»€ä¹ˆå¯èƒ½çš„å…¶ä»–è§£é‡Šã€‚å°±è¿™ä¹ˆä¸€ä¸ªç®€å•çš„é‚€è¯·ï¼Œå°±æ‰“å¼€äº†çˆ¶æ¯åŸæœ¬ç‹­éš˜çš„æ€è·¯å’Œå›ºå®šçš„è§£é‡Šå€¾å‘ã€‚ä¾‹å¦‚å½“å­©å­å“­é—¹çš„æ—¶å€™ï¼ŒåŸæœ¬è®¤å®šå­©å­å°±æ˜¯çˆ±å“­çš„çˆ¶æ¯å¯èƒ½ä¼šè½¬è€Œæƒ³ï¼Œå­©å­æ˜¯ä¸æ˜¯å“ªé‡Œä¸èˆ’æœï¼Œæ˜¯ä¸æ˜¯éœ€è¦æ‹¥æŠ±ï¼Œç­‰ç­‰ï¼ˆå½“ç„¶ï¼Œå…·ä½“åŸå› è§†å­©å­å¹´é¾„å’Œå…·ä½“å®¶åº­ç¤¾ä¼šç¯å¢ƒè€Œå®šï¼‰ï¼Œç ”ç©¶äººå‘˜ä¼šé¼“åŠ±çˆ¶æ¯ä¸åœåœ°å»æƒ³å¯èƒ½çš„è§£é‡Šï¼Œå¹¶å°è¯•ä¸€äº›åšæ³•ï¼Œç•™æ„å­©å­çš„å“åº”ï¼Œç›´åˆ°æŸä¸ªè§£é‡Šçœ‹ä¸Šå»æˆç«‹ã€‚æˆ‘è®¤ä¸ºä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œè¿™ä¸ªå¹²é¢„å°±æ˜¯è¦è®©çˆ¶æ¯ç”¨ä¸€ä¸ªç§‘å­¦å®¶çš„å¿ƒæ€å»çœ‹å¾…å­©å­çš„è¡Œä¸ºï¼Œå»å¤§èƒ†æå‡ºå‡è®¾ï¼Œå¹¶å°å¿ƒä¸€ä¸€æ±‚è¯ï¼Œè€Œä¸æ˜¯å…ˆé¢„è®¾åè§ï¼Œé’»åˆ°çª„å··å­ï¼Œä¸€æ¡é“èµ°åˆ°é»‘ã€‚ä¹Ÿæ˜¯è¦è®©çˆ¶æ¯ç”¨ä¸€ä¸ªå¥½çš„è¯Šæ–­ç§‘åŒ»ç”Ÿçš„è§’åº¦å»çœ‹å¾…å­©å­çš„è¡Œä¸ºï¼Œå­¦ä¼šå¯¹è‡ªå·±è¯´â€œè¿™åªæ˜¯ç—‡çŠ¶ï¼Œè€Œä¸æ˜¯ç—…å› â€ã€‚äº‹å®ä¸Šï¼Œä¸€æ—¦çˆ¶æ¯æ‰“å¼€äº†æ€ï¼ˆnÇoï¼‰è·¯ï¼ˆdÃ²ngï¼‰ï¼Œå¾€å¾€ç«‹å³å°±ä¼šå°åˆ°ç”œå¤´ï¼Œå› ä¸ºå°±åƒæˆå¹´äººå¾ˆå¤šæ—¶å€™ä¹Ÿä¼šâ€œéä¸æƒ³ä¹ƒä¸èƒ½ä¹Ÿâ€ä¸€æ ·ï¼Œå­©å­æ›´æ˜¯å¦‚æ­¤ï¼Œå¾ˆå¤šäº‹æƒ…å­©å­å¹¶ä¸æ˜¯ä¸æƒ³ï¼Œè€Œæ˜¯å®ä¹ƒåšä¸åˆ°ï¼Œå½“çˆ¶æ¯ä»¥ä¸€ä¸ªç†è§£å’Œå¸®åŠ©è€…çš„è§’è‰²å‡ºç°ï¼Œç»™å­©å­éœ€è¦çš„åŒ…å®¹æˆ–æ”¯æŒï¼Œå­©å­çš„åé¦ˆå¾€å¾€ä¼šæ˜¯éå¸¸æ­£é¢çš„ã€‚ å½“ç„¶è¿™ç‚¹ä¹Ÿå¯ä»¥æµ“ç¼©ä¸ºå¿ƒæ™ºæ¨¡å¼çš„é¢†åŸŸï¼Œæˆ‘ä»¬è¿ç”¨æ¯ä¸ªäººç‹¬æœ‰çš„é¢†æ‚Ÿèƒ½åŠ›ï¼ˆå¿ƒæ™ºæ¨¡å¼ï¼‰å»æ€è€ƒæ‰€æœ‰å‘ç”Ÿçš„äº‹æƒ…ï¼Œæˆ‘ä»¬æ— æ³•ç†è§£ä¹Ÿè®¸å¯èƒ½æ˜¯å› ä¸ºæˆ‘ä»¬æœªæ›¾æ„Ÿå—ï¼Œæ‰€ä»¥ä¸æ›¾ä¿®æ”¹æˆ‘ä»¬çš„è§£é‡Šå™¨ï¼ˆå¿ƒæ™ºæ¨¡å¼ï¼‰ã€‚æ¨¡å¼ä¹Ÿè®¸å¯ä»¥å½’çº³ä¸ºä¼—å¤šç§‘å­¦è§„å¾‹çš„ä¸€äº›é›†åˆã€‚ æˆ‘ä»¬ä¹‹æ‰€ä»¥èƒ½å¤Ÿç†è§£ä»–äººçš„æƒ³æ³•ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„å¤§è„‘æ˜¯ä¸€ä¸ªè¶…çº§æ¨¡æ‹Ÿå™¨ï¼Œä¸ä»…èƒ½å¤Ÿæ¨¡æ‹Ÿç‰©ä½“é£è¡Œçš„è½¨è¿¹å’Œè½ç‚¹ï¼Œæ¨¡æ‹Ÿæœªæ¥å¯èƒ½å‘ç”Ÿçš„äº‹æƒ…ï¼Œè¿˜èƒ½æ¨¡æ‹Ÿä»–ä»¬å¤´è„‘ä¸­çš„æƒ³æ³•ã€æ„å›¾ï¼Œä»¥åŠä»–ä»¬å¯èƒ½é‡‡å–çš„è¡ŒåŠ¨ã€‚\nä»¥æ¶æ„è¿˜æ˜¯å–„æ„æ¥æ£åº¦ä»–äººçš„è¡Œä¸ºï¼Œæ˜¯æˆ‘ä»¬å¤§è„‘ä¸­çš„ç¤¾ä¼šåŒ–æ¨¡å—ä¸­ä¸€ä¸ªå¾ˆæ ¸å¿ƒçš„å‚æ•°ï¼Œå½±å“å‡ ä¹ä»»ä½•äººä¸äººçš„å…³ç³»ï¼Œç”±äºä¸ç®¡å€¾å‘æ˜¯å“ªè¾¹ï¼Œå¾ˆå¤§å¯èƒ½æ˜¯è‡ªè¯çš„ï¼Œæ‰éœ€è¦æ ¼å¤–ç•™å¿ƒã€‚ æ‰§(bing)ç€(tai) æ€(nao)è·¯(dong) è®¤è¯†åˆ°æˆ‘ä»¬å¤§è„‘å­˜åœ¨è¿™æ ·çš„â€œè§£é‡Šå±‚â€æ˜¯æå…¶é‡è¦çš„ï¼Œæˆ‘ä»¬å¹³å¸¸å¯¹ç»å¤§å¤šæ•°äº‹æƒ…çš„â€œæ¥æ”¶â€”â€”è§£é‡Šâ€”â€”ååº”â€ä¸€è¿ä¸²çš„è¿‡ç¨‹éƒ½åœ¨æˆ‘ä»¬ä¸çŸ¥ä¸è§‰å½“ä¸­å°±å‘ç”Ÿäº†ï¼Œè¿™æ˜¯ä¸€ä¸ªé«˜åº¦è‡ªåŠ¨åŒ–çš„ç³»ç»Ÿ. å¿ƒæ™ºæ¨¡å¼æ˜¯å¤§è„‘æ¥å—ä¿¡æ¯å¤„ç†çš„å¼€ç«¯ï¼Œå½±å“åˆ°å…¨å±€ä½œç”¨åŸŸã€‚\n  ä¸¤ä¸ªæç«¯ï¼šæ™ºåŠ›æ˜¯ä¸€ä¸ªå†…åœ¨çš„ã€å›ºå®šçš„ç‰¹è´¨ï¼Œè€Œä¸æ˜¯å¯ä»¥é€šè¿‡åŠªåŠ›å’ŒæŠ•å…¥å»æ”¹å˜çš„ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆæœ‰å‰è€…è¿™ç§è®¤è¯†çš„äººå°±ä¼šè¯•å›¾é¿å¼€é‚£äº›æŒ‘æˆ˜æ€§çš„å·¥ä½œï¼Œè€Œåè€…åˆ™ç›¸å. å…³äºå¿ƒæ™ºçš„ä¸€ä¸ªä¾‹å­ï¼š\næŸç§è¥å…¬å¸çš„æ–‡ç§˜å°åˆ˜æœ‰ä¸€ä¸ªåä¹ æƒ¯ï¼šä»€ä¹ˆæ–‡ä»¶ï¼Œå¥¹éƒ½ä¼šæ‹–åˆ°æœ€åçš„ä¸€åˆ»æ‰ä¼šæ‹¼å‘½åšã€‚è­¬å¦‚ï¼Œå…¬å¸å‘¨ä¸€å¼€äº†æ¬¡ä¼šè®®ï¼Œè€æ€»è®©å°åˆ˜æœ€è¿Ÿå‘¨å››äº¤ä¸Šæ•´ç†å¥½çš„ä¼šè®®è®°å½•ã€‚æ— è®ºå‘¨ä¸€ã€å‘¨äºŒæ—¶é—´å¤šä¹ˆå®½è£•ï¼Œå°åˆ˜éƒ½ä¸ä¼šå…ˆå®Œæˆè¿™ä»½è®°å½•ã€‚å¥¹ç»å¸¸æ˜¯ä¸€å¤©åæ¬¡ã€äºŒåæ¬¡åœ°åœ¨ç”µè„‘ä¸Šæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†æ¯å†™å‡ ä¸ªå­—å°±ä¼šåœä¸‹æ¥ï¼Œä¸€ä¸ªå­—éƒ½å†™ä¸ä¸‹å»ã€‚ç›´åˆ°å‘¨ä¸‰çš„ä¸‹åˆï¼Œå¥¹æ‰ä¼šåœ¨ç”µè„‘ä¸Šå¯¹ç€é”®ç›˜ä¸€é€šç‹‚æ•²ï¼Œå¦‚æœä¸‹åˆå®Œä¸æˆâ€”â€”â€”è¿™å¯¹å°åˆ˜æ˜¯å®¶å¸¸ä¾¿é¥­ï¼Œå¥¹å°±ä¼šæ‹–åˆ°æ™šä¸Šï¼Œæåˆ°æ™šä¸Šåä¸€äºŒç‚¹ç”šè‡³å¤œé‡Œä¸€ä¸¤ç‚¹æ‰ä¸‹ç­ã€‚å‘¨å››ï¼Œå¥¹ä¸€å®šä¼šä¸€æ—©æ¥åˆ°å•ä½ï¼Œçº¢ç€çœ¼ç›ã€å¸¦ç€ä¸€è„¸çš„ç–²æƒ«æŠŠæŠ¥å‘Šäº²è‡ªäº¤ç»™è€æ€»ã€‚å°åˆ˜ä¸‹äº†æ— æ•°æ¬¡å†³å¿ƒï¼Œå‘èª“è¦æ”¹å˜è‡ªå·±è¿™ä¸€ä½œé£ï¼Œä½†ä¸€å¹´å¹´ä¸‹å»ï¼Œæ²¡æœ‰ä»»ä½•æ•ˆæœã€‚ è¢è£äº²è¯´ï¼Œå°åˆ˜çŸ¥é“ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¶ä¹ ã€‚ä½†å¥¹ä¸€ç›´æ²¡æœ‰æƒ³è¿‡çš„æ˜¯ï¼Œè¿™ä¸ªæ¶ä¹ ç»™å¥¹å¸¦æ¥äº†ä¸å°‘å¥½å¤„ã€‚è­¬å¦‚ï¼ŒåŒäº‹ä»¬éƒ½çŸ¥é“å¥¹æ˜¯â€œåŠ ç­å¤§ç‹â€ï¼Œè¿™ä¸ªç§°å·ä¼ åˆ°è€æ€»è€³æœµé‡Œï¼Œè€æ€»ä¹Ÿä»ä¸æ‰¹è¯„å¥¹åšäº‹æ‹–æ²“ã€‚è¿™äº›å¥½å¤„æˆäº†å¥–åŠ±ï¼Œå¼ºåŒ–äº†å°åˆ˜åŠäº‹æ‹–æ²“çš„ä¹ æƒ¯ã€‚è¿™ä¸ªæ¶ä¹ è¿˜æœ‰æ›´æ·±å±‚çš„åŸå› ã€‚å°åˆ˜çš„çˆ¸çˆ¸å¯¹å°åˆ˜è¦æ±‚å¾ˆé«˜ï¼Œä¸Šå­¦çš„æ—¶å€™ï¼Œæ¯æ¬¡åšå®Œä½œä¸šï¼Œå¥¹çˆ¸çˆ¸éƒ½è¦æ£€æŸ¥ä¸€éï¼Œä¸€å‘ç°å·®é”™ï¼Œçˆ¸çˆ¸ä¼šç‹ ç‹ åœ°æ‰¹å¥¹ä¸€é¡¿ï¼Œæ–¥è´£å¥¹ä¸åŠªåŠ›ä¸è®¤çœŸã€‚æœ€åï¼Œå°åˆ˜å‘å±•å‡ºåº”å¯¹åŠæ³•ï¼šç†¬å¤œåœ¨æœ€åä¸€åˆ»æ‰æŠŠä½œä¸šå®Œæˆã€‚è¿™æ ·ï¼Œå³ä¾¿çˆ¸çˆ¸æ£€æŸ¥å‡ºäº†é”™è¯¯ï¼Œä½†å› ä¸ºçŸ¥é“å°åˆ˜ç†¬è¿‡å¤œï¼Œä¸ä»…ä¸æ–¥è´£å¥¹ï¼Œåè€Œä¼šå¤¸å¥¹ç”¨åŠŸã€‚å…¬å¸é‡Œå…¶å®ä¹Ÿä¸€æ ·ï¼Œè€æ€»æ˜¯ç”·æ€§ï¼Œé¢å¯¹è€æ€»å°±ä»¿ä½›æ˜¯é¢å¯¹è€çˆ¸ï¼Œå°åˆ˜å®³æ€•è€æ€»æ–¥è´£è‡ªå·±ä¸åŠªåŠ›ï¼Œæ‰€ä»¥ç”¨äº†ä»¥å¾€çš„åº”ä»˜æ–¹æ³•åº”å¯¹è€æ€»ã€‚  å…¶å®ä¸Šé¢çš„å¿ƒæ™ºæ¨¡å¼ï¼Œå¦‚æœå’Œæˆ‘ä»¬è‡ªç„¶ç•Œçš„å¼€æ™®æ–‡ä¸‰å¤§å®šå¾‹ã€ç‰›é¡¿å®šå¾‹æ¯”ä¸€ä¸‹ï¼Œä¹Ÿå¯ä»¥è¯´æˆæ˜¯å¿ƒæ™ºå®šå¾‹ï¼Œç„¶è€Œæ­£å¦‚è¿™äº›ç‰©ç†å®šå¾‹ä¼šéšç€æˆ‘ä»¬è®¤è¯†çš„æ·±å…¥ã€å‘å±•ï¼Œè€Œå˜å¾—æ›´åŠ ç²¾ç¡®ï¼Œæ‰€ä»¥å‘ç”Ÿæ”¹å˜ã€‚å¿ƒç†å®šå¾‹ä¹Ÿéœ€è¦ä¸å®šæ—¶çš„åœ¨æˆ‘ä»¬å¤§è„‘è¿›è¡Œæ›´æ–°ã€‚ å›½äººå¯¹äºé¢å­çš„é¡¾è™‘ï¼Œä»»ä½•è·Ÿå¿ƒç†ç–¾ç—…æ²¾ä¸Šè¾¹çš„åè¯è¿˜æ˜¯èº²è¿œç‚¹ä¸ºå¦™ï¼Œå³ä½¿æ”¹ç§°â€œå¿ƒç†å’¨è¯¢â€æˆ–â€œå¿ƒç†å¥åº·â€ä¹‹ç±»çš„è¯´æ³•ä¼¼ä¹æ•ˆæœä¹Ÿè¿˜æ˜¯å¥½ä¸åˆ°å“ªå». è¿‘äº›å¹´ï¼Œè¿™ä¸ªé¢†åŸŸå‡ºç°äº†ä¸€ä¸ªå¾ˆæœ‰å‰æ™¯çš„æ–¹æ³•ï¼Œå«åšCoherence Therapyï¼ŒCoherence Therapyä»ç€çœ¼ç‚¹æ¥è¯´è·Ÿå¿ƒç†åŠ¨åŠ›åˆ†ææ˜¯åŒæºï¼Œç€çœ¼äºé—®é¢˜çš„æ ¹æºâ€”â€”æƒ…ç»ªå¤§è„‘ï¼Œä½†åŒºåˆ«åœ¨äºï¼ŒCoherence Therapyæä¾›äº†ä¸€ç³»åˆ—çš„æŠ€æœ¯ï¼Œèƒ½å¤Ÿé«˜æ•ˆåœ°ã€åŒæ—¶å´ä¸å¹²æ‰°åœ°å¸®åŠ©æˆ‘ä»¬å»æ¢ç´¢åˆ°è‡ªå·±å†…å¿ƒéšè—æ·±å¤„çš„â€œæ‰§â€ï¼Œå¹¶é€šè¿‡æŠŠä»–å…·è±¡åŒ–æˆæ–‡å­—çš„å½¢å¼æ¥ä¿æŒå¯¹å…¶çš„è§‰çŸ¥ï¼Œä»è€Œåœ¨è§‰çŸ¥çš„è¿‡ç¨‹ä¸­è®©è¿™äº›â€œè¿‡æœŸâ€çš„åº”å¯¹æœºåˆ¶è·Ÿå¤§è„‘ä¸­çš„å…¶ä»–æƒ…æ„Ÿè‡ªç„¶å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œæœ€ç»ˆè‡ªè¡Œæ¶ˆè§£ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­æ²»ç–—å¸ˆçš„ä½œç”¨åªæ˜¯è¾…åŠ©æ€§å’ŒæŠ€æœ¯æ€§çš„ï¼Œè¿ç”¨çš„éƒ½æ˜¯å¯¹æ–¹è‡ªå·±å†…å¿ƒçš„åŠ›é‡ ä¹‹æ‰€ä»¥å¯¹è¿™ä¸ªæœ‰ç‚¹æ„Ÿå…´è¶£ï¼Œæ˜¯å› ä¸ºæˆ‘ä¹‹å‰å­¦ä¹ çš„æ˜¯èƒ½æºåŠ¨åŠ›ç›¸å…³ï¼Œå…³äºåŠ¨åŠ›ç›¸å…³çš„éƒ½æœ‰ç‚¹æƒ³äº†è§£ã€‚ Psychotherapyå‘å±•åˆ°ä»Šå¤©ï¼Œè™½ç„¶æ´¾ç³»ä¼—å¤šï¼Œä¸”æ–°åè¯å¥—è·¯å±‚å‡ºä¸ç©·ï¼Œä½†ç©¶å…¶æ ¹æœ¬ï¼Œç›®çš„éƒ½ç›¸åŒï¼Œå°±æ˜¯è§£é™¤äººä»¬å¿ƒç†çš„ç—›è‹¦ï¼Œè€Œæ‰€ç”¨çš„æ–¹æ³•ï¼Œæœ¬è´¨ä¸Šä¹Ÿä¸å¤–ä¹ä»ä»¥ä¸‹å‡ ä¸ªå±‚é¢å»ä»‹å…¥ï¼šè®¤çŸ¥å±‚ï¼ˆè®¤çŸ¥ç–—æ³•ï¼‰ï¼Œè¡Œä¸ºå±‚ï¼ˆè¡Œä¸ºç–—æ³•ï¼‰ï¼Œæƒ…ç»ªå±‚ï¼ˆå¿ƒç†åˆ†æï¼‰ã€‚ä»å†å²è§’åº¦æ¥è¯´ï¼Œå…ˆæ˜¯æœ‰å¼—æ´›ä¼Šå¾·çš„å¿ƒç†åˆ†ææ´¾ï¼Œåæ¥æœ‰æ–¯é‡‘çº³çš„è¡Œä¸ºæ´¾ï¼Œå†åæ¥éšç€è®¤çŸ¥ç§‘å­¦çš„å‘å±•å¸¦åŠ¨äº†è®¤çŸ¥æ´¾ã€‚å…¶ä¸­æœ€æµè¡Œï¼Œé€‚ç”¨èŒƒå›´æœ€å¹¿æ³›çš„å°±æ˜¯åŸºäºè®¤çŸ¥çš„ç–—æ³•ï¼ˆè¿˜æœ‰è®¤çŸ¥è¡Œä¸ºç»“åˆçš„è®¤çŸ¥è¡Œä¸ºç–—æ³•ï¼‰ã€‚ å¿ƒç†åŠ¨åŠ›å­¦å­˜åœ¨è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼Œä¹Ÿè®¸ä½ å¯ä»¥ä½“ä¼šä¸€ä¸‹ã€‚ åœ¨æœ‰äº›æ—¶å€™ï¼Œå½“å¿ƒç†åŠ¨åŠ›åˆ†æç¡®å®ç‚¹åˆ°äº†ç‚¹å­ä¸Šçš„æ—¶å€™ï¼Œå¯¹æ–¹ä¼šç»å†è¢«ç§°ä¸ºâ€œtransformationâ€çš„è¿‡ç¨‹ï¼Œåœ¨è¿™ä¸ªæ·±åˆ»çš„æ”¹å˜è¿‡ç¨‹ä¸­ï¼Œæƒ…ç»ªå¤§è„‘è¢«â€œæ›´æ–°â€ï¼ŒåŸæ¥çš„é—®é¢˜ä¼šä»æ ¹æœ¬ä¸Šä¸å¤å­˜åœ¨ã€‚å®é™…ä¸Šï¼Œtransformationä¸ç»è¿‡å¿ƒç†æ²»ç–—å¸ˆä¹‹æ‰‹ä¹Ÿä¼šåœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­è‡ªç„¶å‘ç”Ÿï¼Œç‰¹åˆ«æ˜¯å½“æˆ‘ä»¬ç»å†æä¸ºé‡å¤§çš„äº‹ä»¶çš„æ—¶å€™ï¼Œæœ‰çš„æ—¶å€™åŸæœ¬å›ºæœ‰å‡ åå¹´çš„æ‰§å¿µä¼šåœ¨â€œä¸€ç¬é—´â€æƒ³é€šäº†ï¼Œè¿™ä¸ªâ€œæƒ³é€šäº†â€å¹¶ä¸æ˜¯æˆ‘ä»¬é€šè¿‡ç†æ€§å¤§è„‘çš„é€»è¾‘æ¨æ¼”æ¥æƒ³é€šäº†ï¼Œè€Œæ˜¯æƒ…ç»ªå¤§è„‘è‡ªè¡Œâ€œé‡ç»„â€ï¼Œè€Œä½ çš„æ„è¯†åªæ˜¯æ„Ÿå—åˆ°äº†â€œæƒ³é€šäº†â€è¿™ä¹ˆä¸ªç»“æœï¼Œå°±åƒå±€å¤–äººä¸€æ ·.\næœ€åï¼Œå¿ƒæ™ºæ¨¡å¼ä¹Ÿæ˜¯ä¸ºäº†æ›´å¥½åœ°è®¤è¯†è‡ªå·±ï¼Œæ›´å¥½åœ°è®¤è¯†è¿™ä¸ªä¸–ç•Œï¼Œå½“ç„¶å¾ˆå¤šäººå¾ˆä¸åœ¨æ„åœ°è¯´æˆ‘æ ¹æœ¬ä¸æƒ³çŸ¥é“è¿™ä¸ªä¸–ç•Œé•¿æˆä»€ä¹ˆæ ·å­ï¼Œæˆ‘åªæƒ³è¯´æ”¾å¼€çœ¼ç•Œï¼Œå¤šå­¦çŸ¥è¯†ã€‚\n","date":1432801015,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432801015,"objectID":"93f26ccbe023089fbc8324848550d835","permalink":"/blog/2015/05/28/xin-zhi-mo-shi/","publishdate":"2015-05-28T16:16:55+08:00","relpermalink":"/blog/2015/05/28/xin-zhi-mo-shi/","section":"archives","summary":"æ€è€ƒæ˜¯äººç±»ç‰¹æœ‰çš„ä¸€ç§æ€§è´¨ï¼Œé€»è¾‘æ€§çš„æ€è€ƒæ›´æ˜¯äººç±»éš¾èƒ½å¯è´µçš„ç‰¹æ€§ã€‚è¿™äº›éƒ½å¯ä»¥è¯´æˆæ˜¯å¿ƒæ™ºæ¨¡å¼æˆ–è€…å¿ƒæ™ºè§„å¾‹çš„ä¸€äº›ä¸“æœ‰åè¯ï¼Œå°±å¥½åƒä¸€æ‰‡åˆä¸€æ‰‡çš„çª—å£ã€‚ ","tags":null,"title":"å¿ƒæ™ºæ¨¡å¼","type":"archives"},{"authors":null,"categories":["life"],"content":"ä¸ºä»€ä¹ˆè¦æƒ³åˆ°è¦å†™å…³äºæ¢å…¬çš„æ•…äº‹å’Œè‘—ä½œï¼Œå› ä¸ºä»–çœŸçš„æ˜¯ä»¥ ä¸€ä¸ªå­¦è€…çš„å¿ƒæ€åœ¨æ€è€ƒç€ç¤¾ä¼šã€å›½å®¶ã€å­¦é—®ç­‰äº‹æƒ…ã€‚ä»14å²èµ·ï¼Œ ä»–çš„è„‘è¢‹å°±å¼€å§‹å› ä¸ºä¸€ä¸ªåˆä¸€ä¸ªé—®é¢˜é“¾ï¼Œæœ‰äº†é—®é¢˜å°±å¼€å§‹è§£å†³é—®é¢˜ã€‚ æ¢å…¬æ˜¯ä¸€ä¸ªå“²å­¦å®¶ã€å„’å®¶å¤§å¸ˆã€æ€æƒ³å®¶ï¼Œæ›¾æœ‰ä¸€ä¸ªå¤–å›½äººä¸“ç¨‹è¿‡æ¥æ‰¾ä»–æ¥è®¨è®ºå“²å­¦é—®é¢˜ï¼Œå¹¶è‘—ä¹¦ã€‚å…¶å®æˆ‘æœ¬ä¸è¯¥å†™è¿™ç¯‡ï¼Œå› ä¸ºæˆ‘åšçš„åŠŸè¯¾ä¸å¤Ÿï¼Œå†™çš„æ²¡è´¨æ„Ÿï¼Œä¹Ÿç¼ºä¹æ·±åº¦ã€‚ æˆ‘åªæ˜¯æƒ³æŠŠè„‘è¢‹é‡Œå¯¹è€å…ˆç”Ÿçš„ä¸€ç‚¹å°è±¡å†™å‡ºæ¥ï¼Œå½“ç„¶æ–‡ç« å†™å‡ºæ¥ä¸åº”è¯¥åƒæ˜¯æ©¡çš®æ“¦ä¸€æ ·ï¼Œå°±ç›´æ¥å¿˜è®°äº†ï¼Œè€Œæ˜¯å½“åšä¸€ç§å›å¿†ï¼Œä¹Ÿç®—ä¸€ç§ä¼ æ’­ã€‚ä¸‹é¢æ˜¯æ¢å…¬çš„åŸºæœ¬è‘—ä½œï¼š\n æˆ‘ç”Ÿæœ‰æ¶¯æ„¿æ— å°½ ä¸­å›½æ–‡åŒ–è¦ä¹‰ äººå¿ƒä¸äººç”Ÿ ä¸œè¥¿æ–‡åŒ–åŠå…¶å“²å­¦   æ¯ä¸€æ¬¡ï¼Œçœ‹åˆ°æ¢å…¬ä¸€è„¸çš„ä¸¥è‚ƒï¼Œéƒ½è®©æˆ‘å®é™äº†ä¸€äº›ï¼Œå¤šäº†ä¸€äº›æ€è€ƒã€‚å†™å¾—ä¸å¤šå½“ä½œæ˜¯ä¸€ç‚¹å›å¿†ã€‚\nç„¶è€Œæˆ‘å€’æ˜¯æ¸…æ¥šä¸€ç‚¹ï¼Œåšå®¢ã€å¾®åšã€å¹¿å‘Šä¹‹ç±»çš„ä½œç”¨ï¼Œåº”è¯¥è·Ÿå…¬å…±çš„æ‰¿è®¤å’Œæ‰¿è¯ºä¸€æ ·ï¼Œèƒ½è®©äººå»éµå®ˆï¼Œæ‰€ä»¥å½“ä½ å†™å‡ºæ¥ï¼Œä½ å°±ä¼šå°½é‡æƒ³ç€å»è´´åˆä»–ã€‚\nä»å°åˆ°å¤§ï¼Œä½ æ˜¯ä¸æ˜¯æœ‰ç‚¹å¥½é«˜éª›è¿œï¼Œå·å¥¸è€æ»‘ï¼Œå…¶å®è¸å®ã€è®¤çœŸã€ä¸“æ³¨ç‚¹å°±å¥½ã€‚ æ¢å…¬æåˆ°çš„å…«å¤§å¢ƒç•Œï¼š\nç¬¬ä¸€å±‚å¢ƒç•Œï¼šå½¢æˆä¸»è§ ç”¨å¿ƒæƒ³ä¸€ä¸ªé—®é¢˜ï¼Œä¾¿ä¼šå¯¹è¿™ä¸ªé—®é¢˜æœ‰ä¸»è§ï¼Œå½¢æˆè‡ªå·±çš„åˆ¤æ–­.æ— è®ºå¤šæµ…ã€‚åˆ«å¤ªæŠŠè‡ªå·± å’Œè‡ªå·±çš„è§‚ç‚¹å½“ä¸€å›äº‹\nç¬¬äºŒå±‚å¢ƒç•Œï¼šå‘ç°ä¸èƒ½è§£é‡Šçš„äº‹æƒ… å†²çªä¸­æ‰¾åˆ°è‡ªå·±ã€‚ æœ‰ä¸»è§ï¼Œæ‰æœ‰ä½ è‡ªå·±ï¼›æœ‰è‡ªå·±ï¼Œæ‰æœ‰æ—äººï¼Œæ‰ä¼šå‘è§‰å‰åå·¦å³éƒ½æ˜¯ä¸æˆ‘æ„è§ä¸åŒçš„äººã€‚\nç¬¬ä¸‰å±‚å¢ƒç•Œï¼šèæ±‡è´¯é€š ä½ çœ‹åˆ°ä¸è‡ªå·±æƒ³æ³•ç›¸åŒçš„ï¼Œæ„Ÿåˆ°äº²åˆ‡ï¼›çœ‹åˆ°ä¸è‡ªå·±æƒ³æ³•ä¸åŒçš„ï¼Œæ„Ÿåˆ°éš”è†œã€‚æœ‰ä¸åŒï¼Œå°±éæ±‚è§£å†³ä¸å¯ï¼›æœ‰éš”è†œï¼Œå°±éæ±‚äº†è§£ä¸å¯ã€‚äºæ˜¯ï¼Œå¤äººä»Šäººæ‰€æ›¾ç”¨è¿‡çš„å¿ƒæ€ï¼Œæ…¢æ…¢èæ±‡åˆ°ä½ è‡ªå·±ã€‚\nç¬¬å››å±‚å¢ƒç•Œï¼šçŸ¥ä¸è¶³ ã€‚å› ä¸ºè‡ªå·±è§‰å¾—ä¸æ‡‚ï¼Œå°±å¯ä»¥é™¤å»ä¸€åˆ‡æµ®è§ï¼Œå®Œå…¨è™šå¿ƒåœ°å…ˆæ±‚äº†è§£å®ƒ\nç¬¬äº”å±‚å¢ƒç•Œï¼šä»¥ç®€å¾¡ç¹ å­¦é—®æµ…çš„äººè¯´è¯æ„ˆå¤šï¼Œæ€æƒ³ä¸æ¸…æ¥šçš„äººåè¯è¶Šå¤š(ä½†æ˜¯åˆšå¼€å§‹å¿…é¡»å¤šè¯´å¤šè®²)\nç¬¬å…­å±‚å¢ƒç•Œï¼šè¿ç”¨è‡ªå¦‚+ ç¬¬ä¸ƒå±‚å¢ƒç•Œï¼šä¸€è§ˆä¼—å±±å°+ ç¬¬å…«å±‚å¢ƒç•Œï¼šé€šé€+ æ’å¥åˆšåˆšå¬åˆ°çš„è¯(ä¹Ÿè®¸æˆ‘çš„å†™ä½œä¹Ÿåƒæ’è¯ä¸€æ ·ï¼Œå–œæ¬¢è·³è·ƒæ€§ï¼Œè¿™æ˜¯é€»è¾‘ä¸Šçš„ä¸€ç§ç¼ºé™·)ï¼Œç°åœ¨çš„ç¤¾ä¼šæ˜¯æ—¢è®©é©¬å„¿è·‘ï¼Œåˆæƒ³è®©é©¬å„¿åƒä¸Šè‰ã€‚åœ¨è¿™ä¸ªç¤¾ä¼šè·‘ç€ï¼Œå¯æ˜¯è·‘çš„å¤šäº†ï¼Œè‰ä¹Ÿæ²¡äº†ï¼Œåˆä¸ç§è‰ï¼Œé©¬å„¿èº«å¿ƒç–²ç´¯ã€‚é—®é¢˜åœ¨å“ªé‡Œï¼Ÿ ä¸­å›½åšå£«åç«™\n","date":1432789020,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432789020,"objectID":"c8eb84b2a783fbde9f5e25e013453d27","permalink":"/blog/2015/05/28/liang-gong-wen-ti-de-zhuan-zhu-zhe/","publishdate":"2015-05-28T12:57:00+08:00","relpermalink":"/blog/2015/05/28/liang-gong-wen-ti-de-zhuan-zhu-zhe/","section":"archives","summary":"ä¸ºä»€ä¹ˆè¦æƒ³åˆ°è¦å†™å…³äºæ¢å…¬çš„æ•…äº‹å’Œè‘—ä½œï¼Œå› ä¸ºä»–çœŸçš„æ˜¯ä»¥ ä¸€ä¸ªå­¦è€…çš„å¿ƒæ€åœ¨æ€è€ƒç€ç¤¾ä¼šã€å›½å®¶ã€å­¦é—®ç­‰äº‹æƒ…ã€‚ä»14å²èµ·ï¼Œ ä»–çš„è„‘è¢‹å°±å¼€å§‹å› ä¸ºä¸€ä¸ªåˆä¸€ä¸ªé—®é¢˜é“¾ï¼Œæœ‰äº†é—®é¢˜å°±å¼€å§‹è§£å†³é—®é¢˜ã€‚ ","tags":null,"title":"æ¢å…¬-é—®é¢˜çš„ä¸“æ³¨è€…","type":"archives"},{"authors":null,"categories":["life"],"content":" ä¸ºä»€ä¹ˆå†™ä½œï¼Ÿ è¯¥å†™ä»€ä¹ˆï¼Ÿ è¿˜éœ€è¦ä»€ä¹ˆï¼Ÿ   ä¸ºä»€ä¹ˆå†™ä½œï¼Ÿ åæ€è‡ªå·±çš„æ‰€ä½œæ‰€ä¸ºï¼Œè®°å¾—æœ‰ä¸€ä¸ªç”Ÿæ´»åŸ¹è®­æ•™ç¨‹ï¼Œæå‡ºäº†ä¸€ä¸ªé—®é¢˜æ–¹æ¡ˆï¼Œæ¥æé†’è‡ªå·±æ¯å¤©çš„è®°å½•ã€‚ - What did I enjoy doing today? ä»Šå¤©æˆ‘åšäº†ä»€ä¹ˆå¼€å¿ƒçš„äº‹æƒ… - What would I like to more of? æˆ‘æ„¿æ„ç»§ç»­åšï¼Ÿ - What would I like to do less of? æˆ‘ä¸æƒ³ç»§ç»­åšä»€ä¹ˆï¼Ÿ - What did I learn today? ä»Šå¤©æˆ‘å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ - What will I do differently tomorrow? æ˜å¤©æˆ‘å°†åšä»€ä¹ˆä¸åŒçš„ï¼Ÿ - Thought for the day  å†™ä½œçš„ç›®çš„å°±æ˜¯è®©ä½ ç†è§£è‡ªå·±ï¼Œç†è§£é—®é¢˜ï¼Œç†è§£è§„å¾‹ï¼Œç†è§£ç§‘å­¦ï¼Œç†è§£è‡ªç„¶ç•Œã€‚\nè¯¥å†™ä»€ä¹ˆï¼Ÿ é—®é¢˜åˆ†ä¸ºå¾ˆå¤šç§ï¼Œæš‚æ—¶ä½ å¯ä»¥çŸ¥é“çš„ç§‘å­¦é—®é¢˜ï¼Œå…³æ³¨çš„æ˜¯æŸç§äº‹ç‰©å…³äºæŸä¸ªå› ç´ çš„ å˜åŒ–è§„å¾‹;è€Œå·¥è‰ºé—®é¢˜åˆ™æ›´åŠ å…³æ³¨çš„æˆ‘ä»å‡ ç§æ–¹æ¡ˆä¸­ï¼Œé€‰æ‹©ä¸€ç§æ¯”è¾ƒç¬¦åˆç”Ÿäº§éœ€æ±‚å’Œåˆ©ç›Šéœ€æ±‚çš„æ–¹æ¡ˆï¼Œè€Œä¸ä¸€å®šæ˜¯ç§‘å­¦é—®é¢˜;å½“ç„¶è¿˜æœ‰ç¤¾ä¼šé—®é¢˜ã€‚ ç»™ä½ è‡ªå·±çš„æ·é”æ˜¯ä»é—®é¢˜çš„è§’åº¦è§¦å‘,æ³¨é‡ç›´è§‚è§£é‡Šï¼ˆä¹Ÿå°±æ˜¯ä½ å¯¹è¿™ä¸ªé—®é¢˜çš„çœ‹æ³•ï¼‰ã€‚ è®²æ¸…æ¥šé‡‡ç”¨è¿™ä¸ªæ–¹æ³•çš„èƒŒæ™¯æ˜¯ä»€ä¹ˆï¼Œè§£å†³é—®é¢˜èƒŒåçš„æ€ç»´è¿‡ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ + å½“æ—¶æ˜¯é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ + ç„¶åå‡ ä¸ªäººæ˜¯æ€ä¹ˆåˆ†æçš„ï¼Ÿ + æˆ‘ä»¬ç»è¿‡äº‰è¾©ï¼Œè°ƒæŸ¥ï¼Œæ¨ç† + æœ€åå‘ç°ç›®å‰æ‰€ä½¿ç”¨çš„æ–¹æ³•\næ¯”å¦‚æˆ‘é‡‡ç”¨å®šå¸¸è®¡ç®—é£åŠ›æœº30åº¦åèˆªè§’çš„æ—¶å€™ï¼Œå½“è¾¾åˆ°æ”¶æ•›çš„æ—¶å€™ï¼Œå¾—åˆ°çš„ç»“æœæ ¹æœ¬å°±ä¸å¯¹ï¼Œäºæ˜¯æˆ‘ä»¬å‡ ä¸ªäººè®¨è®ºè¿™ä¸ªé—®é¢˜ï¼ˆç»“æœä¸ç¬¦åˆå®é™…ï¼‰ã€‚æˆ‘ä»¬ä»æ–¹æ³•çš„è§’åº¦ï¼ŒæŒ‰é“ç†è¯´å®šå¸¸åªä¸è¿‡æ˜¯éå®šå¸¸çš„å¹³å‡ä¸åº”è¯¥å­˜åœ¨é‚£ä¹ˆå¤šçš„åå·®ï¼Œä½†æ˜¯æ–¹æ³•è§’åº¦,ä½ åˆæ— æ³•é€šè¿‡å‰–ææºç ï¼Œäºæ˜¯æˆ‘ä»¬ä»ç½‘æ ¼è§’åº¦ç»§ç»­è®¨è®ºï¼Œå®šå¸¸é‡‡ç”¨çš„æ˜¯å†»ç»“è½¬å­æ³•ï¼Œè¿™ç§æ–¹æ³•æ˜¯é‡‡ç”¨æŸä¸ªç‚¹åšä¸€ä¸ªæˆªé¢å¾—åˆ°çš„æ··åˆå¹³å‡çš„ç»“æœï¼Œè€Œä¸åƒéå®šå¸¸é‡‡ç”¨çš„æ˜¯æ»‘ç§»ç½‘æ ¼æ³•ã€‚æ‰€ä»¥å¦‚æœæ˜¯å‡åŒ€æ¥æµæƒ…å†µä¸‹ï¼Œå®šå¸¸å’Œéå®šå¸¸åŸºæœ¬ä¸Šä¸€æ ·ï¼Œä½†æ˜¯å¦‚æœæ˜¯å¤§åèˆªè§’çš„æƒ…å†µä¸‹ï¼Œç”±äºæ˜¯æŸä¸ªç‚¹å¹³é¢ï¼Œå¯èƒ½ä¸å‡†ç¡®ï¼Œæ‰€ä»¥è¯¯å·®å¾ˆå¤§ã€‚æœ€ç»ˆé€‰æ‹©éå®šå¸¸è®¡ç®—ã€‚(å½“ç„¶è¿˜å¾—è¿›ä¸€æ­¥è¯´æ˜åèˆªæ˜¯ä»€ä¹ˆï¼Ÿ å†»ç»“è½¬å­æ³•æ˜¯ä»€ä¹ˆï¼Ÿ æ»‘ç§»ç½‘æ ¼æ³•æ˜¯ä»€ä¹ˆï¼Ÿ å®šå¸¸å’Œéå®šå¸¸åˆéƒ½æ˜¯ä»€ä¹ˆï¼Ÿ) è¿™æ ·ä½ çš„æ–‡ç« æ‰ä¼šæ˜¯å¯¹åˆ«äººçš„ä¸€ç§å¸®åŠ©ã€‚ä¸€å®šè¦å†™å‡ºæ–¹æ³•èƒŒåçš„ç›´è§‚æ€æƒ³ã€‚  ä¸è¯¥å†™ä»€ä¹ˆï¼Ÿ ä¸€ä¸Šæ¥æ‰‘ä¸Šå¤ªå¤šçš„ç»†èŠ‚ï¼Œè™½ç„¶åˆšæ¥è§¦æ–°çš„ä¸œè¥¿éƒ½æ˜¯ä¸€å †æ–°çš„æ‚çš„ä¸œè¥¿ï¼Œä½†æ˜¯ä¹Ÿä¼šè®©äººèƒ†å´ã€‚åˆ—å‡ºæˆ‘å®šä¹‰ä»€ä¹ˆï¼Ÿ æˆ‘ä»¬åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤,å®Œå…¨ä¸æé—®é¢˜æ‰€åœ¨(è¿™å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜)ã€‚ ä½†æ˜¯ä¸€å¼€å§‹çš„ä¿¡æ¯çš„çˆ†ç‚¸æ€§å¸å–è¿˜æ˜¯å¿…è¦çš„ï¼Œä¸€å®šè¦å¬è¿‡è¿™ä¸€èŠ‚ï¼ˆåœ¨ä½ çŸ¥é“é—®é¢˜çš„æƒ…å†µä¸‹ï¼‰ã€‚\nä¸€äº›å¼•ç”³çš„ä¸œè¥¿ï¼Œèƒ½å¤Ÿä½“ç°å‡ºä½ å¯¹è¿™ä¸ªé—®é¢˜çš„ç†è§£å’Œè°ƒç ”çš„æ·±åº¦ï¼Œä½†æ˜¯è¿‡äºå‘æ•£ï¼Œå½°æ˜¾è‡ªå·±NBçš„æ—¶å€™ï¼Œä¹Ÿåœ¨å·¦2Bçš„äº‹æƒ…ï¼ŒæŠ“ä¸åˆ°é‡ç‚¹ï¼Œä¸è¦è¿‡äºæ³›æ»¥(å½“ç„¶ä¸€å®šè¦å¤šåŠ è”æƒ³ï¼Œè¿™æ˜¯å¤§è„‘çš„æœ¬æ€§ï¼Œå…³ç³»å­¦)ã€‚  è¿˜éœ€è¦ä»€ä¹ˆï¼Ÿ å‚è€ƒ åˆ˜æœªé¹ + å¸¦ç€é—®é¢˜ï¼Œæ€è€ƒï¼Œé˜…è¯» + æå‡ºè‡ªå·±å¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼Œå»éªŒè¯ã€‚ + å¯ä»¥æŠŠä¸€æœ¬å¥½ä¹¦åˆ†ä¸ºï¼š + é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ + æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ + ä¾‹å­æ˜¯ä»€ä¹ˆï¼Ÿ + å¯ä»¥æŠŠä¸€ä¸ªç°è±¡åˆ†ä¸ºï¼š + ç°è±¡æ˜¯ä»€ä¹ˆï¼Ÿ + è§£é‡Šæ˜¯ä»€ä¹ˆï¼Ÿ + æ”¯æ’‘è¿™ä¸ªè§£é‡Šçš„ç†ç”±æ˜¯ä»€ä¹ˆ + ä¾‹å­æ˜¯ä»€ä¹ˆ\n ä½ è¿˜å¯ä»¥åšä»€ä¹ˆï¼Œè®©äº‹æƒ…åšçš„æ›´å¥½æ›´é«˜æ•ˆï¼Ÿ ä½ åœ¨é‚£ä¸ªæƒ…å†µä¸‹ï¼ˆç¯å¢ƒï¼‰ ï¼Œè¯¥å¹²ä»€ä¹ˆäº‹ï¼Ÿ ä¸ºä»€ä¹ˆè¿™ä¹ˆå¹²ï¼Ÿ ä¸€å®šè¦é˜…è¯»ç»å…¸ï¼Œé˜…è¯»å¥½ä½œè€…ç›¸å…³çš„ä¹¦ç±ã€‚\næŠŠçŸ¥è¯†åš¼ç¢ åˆ«äººçš„æ–‡ç« æ˜¯ä¸€æ‰‡åˆä¸€æ‰‡çš„çª—æˆ·ï¼Œé€šå‘å¤–åœ¨çš„ä¸–ç•Œ.  ","date":1432715492,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432715492,"objectID":"78d7f1b74550763a49a2f2e3ac8490cf","permalink":"/blog/2015/05/27/gei-zi-ji-xie-zuo-de-ti-xing/","publishdate":"2015-05-27T16:31:32+08:00","relpermalink":"/blog/2015/05/27/gei-zi-ji-xie-zuo-de-ti-xing/","section":"archives","summary":" ä¸ºä»€ä¹ˆå†™ä½œï¼Ÿ è¯¥å†™ä»€ä¹ˆï¼Ÿ è¿˜éœ€è¦ä»€ä¹ˆï¼Ÿ  ","tags":null,"title":"ç»™è‡ªå·±å†™ä½œçš„æé†’","type":"archives"},{"authors":null,"categories":["Tecplot"],"content":"Tecplot æ˜¯å·¥ç¨‹ç»˜å›¾çš„ç¥å™¨ã€‚ ä¸‹é¢æ˜¯ä¸€ç§æ ¼å¼ï¼Œå¯¼å…¥tecplotå³å¯ã€‚ å‰é¢ä¸‰åˆ—æ˜¯x y zåé¢åˆ†åˆ«æ˜¯ux ï¼Œudxï¼Œä¸€å®šè¦å†™å¥½æ–‡ä»¶å¤´ã€‚\nTITLE= qvalue VARIABLES=\u0026quot;X\u0026quot;,\u0026quot;Y\u0026quot;,\u0026quot;Z\u0026quot;, ux,udx ZONE I= 1000,J= 10,K= 20,F=POINT 1 1 1 0.4160 0.0009 2 1 1 0.4160 0.0036 3 1 1 0.4161 0.0081 4 1 1 0.4162 0.0144 5 1 1 0.4164 0.0225 6 1 1 0.4166 0.0324 7 1 1 0.4170 0.0441 8 1 1 0.4175 0.0576 9 1 1 0.4182 0.0729 10 1 1 0.4190 0.0900 11 1 1 0.4200 0.1089 12 1 1 0.4212 0.1296 13 1 1 0.4226 0.1521 14 1 1 0.4242 0.1764 15 1 1 0.4261 0.2025 16 1 1 0.4283 0.2304 17 1 1 0.4307 0.2601 18 1 1 0.4335 0.2916 19 1 1 0.4366 0.3249 20 1 1 0.4400 0.3600 21 1 1 0.4438 0.3969 22 1 1 0.4479 0.4356 23 1 1 0.4525 0.4761 24 1 1 0.4575 0.5184 ","date":1432713321,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432713321,"objectID":"5c707d1a067cc1f9eb50a83ce32a978c","permalink":"/blog/2015/05/27/tecplotde-yun-tu/","publishdate":"2015-05-27T15:55:21+08:00","relpermalink":"/blog/2015/05/27/tecplotde-yun-tu/","section":"archives","summary":"Tecplot æ˜¯å·¥ç¨‹ç»˜å›¾çš„ç¥å™¨ã€‚ ä¸‹é¢æ˜¯ä¸€ç§æ ¼å¼ï¼Œå¯¼å…¥tecplotå³å¯ã€‚ å‰é¢ä¸‰åˆ—æ˜¯x y zåé¢åˆ†åˆ«æ˜¯ux ï¼Œudxï¼Œä¸€å®šè¦å†™å¥½æ–‡ä»¶å¤´ã€‚\n","tags":null,"title":"Tecplotçš„äº‘å›¾","type":"archives"},{"authors":null,"categories":["Linux"],"content":"Bashæ˜¯linuxåº•ä¸‹çš„ä¸€ç§shellå®ç°ï¼Œå¯ä»¥æ–¹ä¾¿linuxç”¨æˆ·è¿›è¡Œç³»ç»Ÿç®¡ç†ã€‚ä»–çš„æ ¸å¿ƒå°±æ˜¯ è°ƒç”¨æœ€æœ‰æ•ˆçš„å‘½ä»¤ç»„åˆå½¢æˆæ›´åŠ å¼ºå¤§å®Œç¾çš„ç®¡ç†å’Œåº”ç”¨ç¨‹åº,è¿™ä¹Ÿæ˜¯unixçš„å“²å­¦,é€šè¿‡è°ƒç”¨between programsçš„å…³ç³»æ¥get its powerè€Œä¸æ˜¯é€šè¿‡è‡ªå·±çš„ç¨‹åºã€‚ shellç¼–æˆçš„ç›®çš„å‡å°‘unixç›¸å…³ç³»ç»Ÿçš„ç®¡ç†å‘˜çš„äººç‰©\nä¸‹é¢ä»‹ç»ä¸»è¦æ˜¯bashè¯­æ³•ï¼Œä»¥åŠæœ‰bashè¯­æ³•è°ƒç”¨awkï¼Œsedï¼Œgrepç­‰linuxåº•ä¸‹å¼ºå¤§çš„å·¥å…·å®ç°ä¸€ä¸ªæ–‡ä»¶æ™ºèƒ½åˆ†ç±»ï¼Œå¹¶å¯¹ç›¸åº”æ–‡ä»¶å¤¹å–å¹³å‡ã€‚\nä¸€äº›åŸºæœ¬è¯­æ³•,è™½ç„¶æ‰æˆä¸€å›¢ï¼Œå´é™å¿ƒé€‰æ‹©ã€‚\nåœ¨å•è¡Œæ¨¡å¼ä¸‹å¯ä»¥ echo {userA,userB,userC}-{home,bin,data} echo {\u0026quot;userA\u0026quot;,\u0026quot;userB\u0026quot;,\u0026quot;userC\u0026quot;}-{\u0026quot;home\u0026quot;,\u0026quot;bin\u0026quot;,\u0026quot;data\u0026quot;} echo `{userA,userB,userC}-{home,bin,data}` #error echo '{userA,userB,userC}-{home,bin,data}' åˆ†å·çš„ä½œç”¨ æŒ¡ä»»è¿ç»­æŒ‡ä»¤çš„åŠŸèƒ½ï¼ï¼ˆå…¶å®ä¹Ÿå¯ä»¥ç”¨æ¢è¡Œä»£æ›¿ï¼‰ ä¸€å®šè¦æ³¨æ„çš„bashçš„ifè¯­æ³•ï¼Œæœ‰ç©ºæ ¼ï¼š if [ \u0026quot;$?\u0026quot; != 0 ] ç­‰ä»·äº if test \u0026quot;$?\u0026quot; != 0 ä¸€å®šè¦æ³¨æ„[]ä¹‹é—´æœ‰ç©ºæ ¼ ç­‰ä»·å…³ç³»æœ‰æ¡ä»¶ï¼š `command` ç­‰ä»·äº $(command) \u0026quot;\u0026quot; çº¦ç­‰äº '' ä½†æ˜¯å•å¼•å·ä¸è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ åŒå¼•å·ä¸è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ å¦å¤–éœ€è¦æ³¨æ„è¿™ç§æƒ…å†µï¼Œ${var} å’Œ$varçš„åŒºåˆ«ï¼š åŸºæœ¬ä¸Šä¸€æ ·ï¼Œ$1...$9è¿™ä¸ªæ²¡åŒºåˆ«ï¼Œä½†æ˜¯$10å‘¢ï¼Œ${var}çš„è¿™ç§å°±æ˜¯${10} è€Œ$varå´æ˜¯$10æ˜¯$1åè¾¹å¸¦ä¸ª0 å‡ ä¸ªdollarå¼€å¤´çš„å†…ç½®å‚æ•° $$ shellè„šæœ¬å· $* ä»¥ä¸€ä¸ªå•å­—ç¬¦æ˜¾ç¤ºæ‰€æœ‰è„šæœ¬ä¼ é€’çš„å‚æ•° $1 $# ä¼ ç»™shellç¨‹åºçš„ä½ç½®å‚æ•°ä¸ªæ•° $0 è„šæœ¬åç§° $n è„šæœ¬çš„ç¬¬å‡ ä¸ªå‚æ•° $((...)) ==\u0026gt; x=$(($x+1)) å¯¹æ‹¬å·å†…çš„è¡¨è¾¾å¼æ±‚å€¼ é€»è¾‘æ“ä½œç¬¦ç›¸å…³: and statement \u0026amp;\u0026amp; statement \u0026amp;\u0026amp; .. or statement || statement || .. æœ€å¸¸ç”¨çš„åˆ†æ”¯åˆ¤æ–­ï¼š if [ -f file_one ] \u0026amp;\u0026amp; [ -f file_two ] then echo \u0026quot;in if\u0026quot; else echo \u0026quot;in else fi bashä¹Ÿåœ¨æ”¹è¿›,æ¯”å¦‚ï¼š [[]] æ˜¯æé«˜ç‰ˆçš„test æ¯”å¦‚\\\u0026gt;å¿…é¡»åœ¨[]å’Œtestä¸­ä½¿ç”¨ åœ¨[[]]ç›´æ¥ä½¿ç”¨ï¼ # æ‰€ä»¥ä»¥åæ”¹ç”¨[[]] ä¸‹é¢å‡ ä¸ª${}å¼€å¤´çš„éƒ½æ˜¯é’ˆå¯¹å­—ç¬¦ä¸²çš„æ“ä½œï¼Œå¯ä»¥å‰ªåˆ‡æ›¿æ¢ ${name:-default} ä½¿ç”¨ä¸€ä¸ªé»˜è®¤å€¼ï¼ˆä¸€èˆ¬æ˜¯ç©ºå€¼ï¼‰æ¥ä»£æ›¿é‚£äº›ç©ºçš„æˆ–è€…æ²¡æœ‰èµ‹å€¼çš„å˜é‡nameï¼› ${name:=default}ä½¿ç”¨æŒ‡å®šå€¼æ¥ä»£æ›¿ç©ºçš„æˆ–è€…æ²¡æœ‰èµ‹å€¼çš„å˜é‡nameï¼› ${name:?message}å¦‚æœå˜é‡ä¸ºç©ºæˆ–è€…æœªèµ‹å€¼ï¼Œé‚£ä¹ˆå°±ä¼šæ˜¾ç¤ºå‡ºé”™è¯¯ä¿¡æ¯å¹¶ä¸­æ­¢è„šæœ¬çš„æ‰§è¡ŒåŒæ—¶è¿”å›é€€å‡ºç 1ã€‚ ${#name} ç»™å‡ºnameçš„é•¿åº¦ ${name%word} ä»nameçš„å°¾éƒ¨å¼€å§‹åˆ é™¤ä¸wordåŒ¹é…çš„æœ€å°éƒ¨åˆ†ï¼Œç„¶åè¿”å›å‰©ä½™éƒ¨åˆ† ${name%%word} ä»nameçš„å°¾éƒ¨å¼€å§‹åˆ é™¤ä¸wordåŒ¹é…çš„æœ€é•¿éƒ¨åˆ†ï¼Œç„¶åè¿”å›å‰©ä½™éƒ¨åˆ† ${name#word} ä»nameçš„å¤´éƒ¨å¼€å§‹åˆ é™¤ä¸wordåŒ¹é…çš„æœ€å°éƒ¨åˆ†ï¼Œç„¶åè¿”å›å‰©ä½™éƒ¨åˆ† ${name##word} ä»nameçš„å¤´éƒ¨å¼€å§‹åˆ é™¤ä¸wordåŒ¹é…çš„æœ€é•¿éƒ¨åˆ†ï¼Œç„¶åè¿”å›å‰©ä½™éƒ¨åˆ† ï¼ˆæ³¨ï¼Œnameä¸ºå˜é‡åï¼Œwordä¸ºè¦åŒ¹é…çš„å­—ç¬¦ä¸²ï¼‰ case${tao} in a) echo â€œaâ€ ;; b) echo â€œbâ€ ;; esac ## ä¸€äº›å½“è¡Œè¿è¡Œçš„æŒ‡ä»¤ï¼Œåªåœ¨promptè¿è¡Œçª—å£æ‰æœ‰æ•ˆ 1 let let \u0026quot;sus=2**3\u0026quot; echo \u0026quot;sus = $sus\u0026quot; sus=[[2**3]] echo \u0026quot;2**3\u0026quot; echo \u0026quot;sus = $sus\u0026quot;,$sus if [ 2**3 == 8] then echo \u0026quot;hello\u0026quot; else echo \u0026quot;fuck\u0026quot; fi æ³¨æ„åœ¨shell #çš„å‘½ä»¤è¡Œè¿è¡Œå¯ä»¥å†™ä¸Šåˆ†å· ## è™½ç„¶æœ‰äººè¯´å‡½æ•°åˆ›å»ºå¯ä»¥ä½¿ç”¨ [function] function_name[()]{ commands [return ...] } ä½†æ˜¯æˆ‘å‘ç°åŠ å…¥functionåè€Œä¸è¡Œï¼Œäºæ˜¯ä½¿ç”¨ function_name(){}çš„é£æ ¼  æ— ç”¨çš„åˆ†å·å‘½ä»¤ ï¼š è¯¥å‘½ä»¤ä»€ä¹ˆéƒ½ä¸åšï¼Œä½†æ‰§è¡Œåä¼šè¿”å›ä¸€ä¸ªæ­£ç¡®çš„é€€å‡ºä»£ç ï¼Œå³exit 0ã€‚æ¯”å¦‚åœ¨ifè¯­å¥ä¸­ï¼Œthenåé¢ä¸æƒ³åšä»»ä½•æ“ä½œï¼Œä½†æ˜¯åˆä¸èƒ½ç©ºç€ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨â€œ:â€æ¥è§£å†³ï¼Œå¦‚ä¸‹\nif [ \u0026quot;$i\u0026quot; -ne 1 ];then : else echo \u0026quot;$i is not equal 1\u0026quot; fi  ç‰¹æ®Šçš„ç‚¹å· ç‚¹å·+ æ–‡ä»¶åçš„ä½œç”¨ å’Œ source+æ–‡ä»¶åçš„ä½œç”¨ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨å½“å‰çš„shellæ‰§è¡Œå‘½ä»¤ è€Œ ./filename.sh åˆ™æ˜¯åœ¨å­shellæ‰§è¡Œå‘½ä»¤ã€‚ æ‰€ä»¥å¦‚æœæƒ³è¦è®¾ç½®ç¯å¢ƒå˜é‡å¾—ç”¨source+æ–‡ä»¶åæˆ–è€…. æ–‡ä»¶åçš„æ–¹å¼ã€‚\nå…³äºå¤§æ‹¬å·å’Œå°æ‹¬å·çš„åŒºåˆ« å¤§æ‹¬å·å’Œå°æ‹¬å·çš„ä½œç”¨éƒ½ä¸€æ ·ï¼Œéƒ½æ˜¯æŠŠå‡ ä¸ªå‘½ä»¤ç»„åˆåœ¨ä¸€èµ·ï¼Œç„¶è€Œä»–ä»¬ä¹Ÿæœ‰æ‰€åŒºåˆ«ã€‚ ()æ˜¯åœ¨äº§ç”Ÿçš„å­shellä¸‹æ‰§è¡Œï¼Œè€Œ{}æ˜¯åœ¨å½“å‰çš„shellä¸‹æ‰§è¡Œ ä¸å‰é¢è®²åˆ°æ˜¯ä½¿ç”¨\u0026rdquo;. filename.sh\u0026rdquo;å’Œ\u0026rdquo;./filename.sh\u0026rdquo;çš„åŒºåˆ«ä¸€æ ·\n# A=123 # (A=abc;echo $A);echo $A abc 123 # { A=abc;echo $A; };echo $A abc abc  ç”±æ­¤å¯è§ï¼Œ() å­shellè®¾ç½®å®Œï¼Œä¸ä¼šå½±å“åˆ°çˆ¶shellï¼Œå› ä¸ºçˆ¶ä¸ä¼šç»§æ‰¿å­ï¼Œå½±å“çš„åªæ˜¯ è‡ªèº«çš„shellã€‚ æ³¨æ„ï¼š()é‡Œé¢ä¸¤è¾¹å¯ä»¥ä¸ä½¿ç”¨ç©ºæ ¼ï¼Œ{}é‡Œé¢ä¸¤è¾¹å¿…é¡»ä½¿ç”¨ç©ºæ ¼ï¼Œä¸”æœ€åä¸€ä¸ªå‘½ä»¤ä¹Ÿéœ€è¦ä»¥â€œï¼›â€ç»“å°¾ï¼Œè¡¨ç¤ºå‘½ä»¤ç»“æŸã€‚\nä¸­æ‹¬å·ç”¨äºåˆ¤æ–­ [] ä¸testå‘½ä»¤ä¸€æ ·ï¼Œç”¨äºæ¯”è¾ƒå€¼ä»¥åŠæ£€æŸ¥æ–‡ä»¶ç±»å‹ã€‚å¦‚ä¸‹\n [ \u0026ldquo;$A\u0026rdquo; = 123 ]ï¼šæ˜¯å­—ç¬¦ä¸²çš„æµ‹è¯•ï¼Œä»¥æµ‹è¯• $A æ˜¯å¦ä¸º 1ã€2ã€3 è¿™ä¸‰ä¸ªè¿ç»­çš„\u0026rdquo;æ–‡å­—\u0026rdquo;ã€‚ [ \u0026ldquo;$A\u0026rdquo; -eq 123 ]ï¼šæ˜¯æ•´æ•°çš„æµ‹è¯•ï¼Œä»¥æµ‹è¯• $A æ˜¯å¦ç­‰äº\u0026rdquo;ä¸€ç™¾äºŒåä¸‰\u0026rdquo;ã€‚ [ -e \u0026ldquo;$A\u0026rdquo; ]ï¼šæ˜¯å…³äºæ–‡ä»¶çš„æµ‹è¯•ï¼Œä»¥æµ‹è¯• 123 è¿™ä»½\u0026rdquo;æ–‡ä»¶\u0026rdquo;æ˜¯å¦å­˜åœ¨ [ -f \u0026ldquo;$A\u0026rdquo; ] : åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–‡ä»¶ [ -d \u0026ldquo;$A\u0026rdquo; ] : åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–‡ä»¶å¤¹  å…³äº å•æ‹¬å·å’ŒåŒä¸­æ‹¬å·çš„åŒºåˆ« [[]]å¯ä»¥è¯´æ˜¯[]çš„â€œå¢å¼ºç‰ˆâ€ï¼Œå®ƒèƒ½å¤Ÿå°†å¤šä¸ªtestå‘½ä»¤æ”¯æŒçš„æµ‹è¯•ç»„åˆèµ·æ¥.\n# [[ (-d \u0026quot;$HOME\u0026quot;) \u0026amp;\u0026amp; (-w \u0026quot;$HOME\u0026quot;) ]] \u0026amp;\u0026amp; echo echo \u0026quot;home is a writable directory\u0026quot; home is a writable directory  ä¸¤è€…çš„ä¸»è¦åŒºåˆ«å¦‚ä¸‹ï¼š  æ•°å­—æµ‹è¯•ï¼š -eq -ne -lt -le -gt -geï¼Œ[[ ]]åŒ [ ]ä¸€è‡´  test int1 -eq int2 æµ‹è¯•æ•´æ•°æ˜¯å¦ç›¸ç­‰ test int1 -ge int2 æµ‹è¯•int1æ˜¯å¦\u0026gt;=int2 test int1 -gt int2 æµ‹è¯•int1æ˜¯å¦\u0026gt;int2 test int1 -le int2 æµ‹è¯•int1æ˜¯å¦\u0026lt;=int2 test int1 -lt int2 æµ‹è¯•int1æ˜¯å¦\u0026lt;int2 test int1 -ne int2 æµ‹è¯•æ•´æ•°æ˜¯å¦ä¸ç›¸ç­‰  æ–‡ä»¶æµ‹è¯•ï¼š -rã€-lã€-wã€-xã€-fã€-dã€-sã€-ntã€-otï¼Œ[[ ]]åŒ [ ]ä¸€è‡´  test -d file æŒ‡å®šæ–‡ä»¶æ˜¯å¦ç›®å½• test -f file æŒ‡å®šæ–‡ä»¶æ˜¯å¦å¸¸è§„æ–‡ä»¶ test -x file æŒ‡å®šæ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œ test -r file æŒ‡å®šæ–‡ä»¶æ˜¯å¦å¯è¯» test -w file æŒ‡å®šæ–‡ä»¶æ˜¯å¦å¯å†™ test -a file æŒ‡å®šæ–‡ä»¶æ˜¯å¦å­˜åœ¨ test -s file æ–‡ä»¶çš„å¤§å°æ˜¯å¦é0  å­—ç¬¦ä¸²æµ‹è¯•ï¼š \u0026gt; \u0026lt; =(åŒ==) != -n -zï¼Œä¸å¯ä½¿ç”¨â€œ\u0026lt;=â€å’Œâ€œ\u0026gt;=â€ï¼Œ[[ ]]åŒ [ ]ä¸€è‡´ï¼Œä½†åœ¨[]ä¸­ï¼Œ\u0026gt;å’Œ\u0026lt;å¿…é¡»ä½¿ç”¨\\è¿›è¡Œè½¬ä¹‰ï¼Œå³\u0026gt;å’Œ\u0026lt;  test str1=str2 æµ‹è¯•å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ test str1!=str2 æµ‹è¯•å­—ç¬¦ä¸²æ˜¯å¦ä¸ç›¸ç­‰ test str1 æµ‹è¯•å­—ç¬¦ä¸²æ˜¯å¦ä¸ä¸ºç©º test -n str1 æµ‹è¯•å­—ç¬¦ä¸²æ˜¯å¦ä¸ä¸ºç©º test -z str1 æµ‹è¯•å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º  é€»è¾‘æµ‹è¯•ï¼š []ä¸º -a -o ! [[ ]] ä¸º\u0026amp;\u0026amp; || ! æ•°å­¦è¿ç®—ï¼š [] ä¸å¯ä»¥ä½¿ç”¨ [[ ]]å¯ä»¥ä½¿ç”¨+ - * / % ç»„åˆï¼š å‡å¯ç”¨å„è‡ªé€»è¾‘ç¬¦å·è¿æ¥çš„æ•°å­—ï¼ˆè¿ç®—ï¼‰æµ‹è¯•ã€æ–‡ä»¶æµ‹è¯•ã€å­—ç¬¦æµ‹è¯•\n# [ a \\\u0026gt; 1 ] \u0026amp;\u0026amp; echo ture || echo false ture # [[ a \u0026gt; 1 ]] \u0026amp;\u0026amp; echo ture || echo false ture   åŒä¸­æ‹¬å·å’ŒåŒå°æ‹¬å· (())ä¸“é—¨æ¥åšæ•°å€¼è¿ç®—ï¼Œå¦‚æœè¡¨è¾¾å¼æ±‚å€¼ä¸º 0ï¼Œåˆ™è®¾ç½®é€€å‡ºçŠ¶æ€ä¸º 1ï¼›å¦‚æœæ±‚å€¼ä¸ºé 0 å€¼ï¼Œåˆ™è®¾ç½®ä¸º 0ã€‚ä¸éœ€è¦å¯¹ (( å’Œ )) ä¹‹é—´çš„æ“ä½œç¬¦è½¬ä¹‰ã€‚ç®—æœ¯åªå¯¹æ•´æ•°è¿›è¡Œã€‚é™¤ 0 ä¼šäº§ç”Ÿé”™è¯¯ï¼Œä½†ä¸ä¼šäº§ç”Ÿæº¢å‡ºã€‚å¯ä»¥æ‰§è¡Œ C è¯­è¨€ä¸­å¸¸è§çš„ç®—æœ¯ã€é€»è¾‘å’Œä½æ“ä½œã€‚\n((i=1+99));echo $i 100 i=99;((i++));echo $i 100 echo $((2**3)) 8  æ³¨æ„ï¼šä½¿ç”¨ (( )) æ—¶ï¼Œä¸éœ€è¦ç©ºæ ¼åˆ†éš”å„å€¼å’Œè¿ç®—ç¬¦ï¼Œä½¿ç”¨[]å’Œ[[ ]] æ—¶éœ€è¦ç”¨ç©ºæ ¼åˆ†éš”å„å€¼å’Œè¿ç®—ç¬¦\nfindè·³è¿‡æŒ‡å®šç›®å½• å¦‚æœåœ¨æŸ¥æ‰¾æ–‡ä»¶æ—¶å¸Œæœ›å¿½ç•¥æŸä¸ªç›®å½•ï¼Œå› ä¸ºä½ çŸ¥é“é‚£ä¸ªç›®å½•ä¸­æ²¡æœ‰ä½ æ‰€è¦æŸ¥æ‰¾çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨-pruneé€‰é¡¹æ¥æŒ‡å‡ºéœ€è¦å¿½ç•¥çš„ç›®å½•ã€‚ åœ¨ä½¿ç”¨ -pruneé€‰é¡¹æ—¶è¦å½“å¿ƒï¼Œå› ä¸ºå¦‚æœä½ åŒæ—¶ä½¿ç”¨äº†-depthé€‰é¡¹ï¼Œé‚£ä¹ˆ-pruneé€‰é¡¹å°±ä¼šè¢«findå‘½ä»¤å¿½ç•¥ã€‚\nUnix Tutorial for Beginner å¸¸ç”¨çš„bashå‘½ä»¤å­¦ä¹   wc -l sort -rn -t 2 -k : grep -n \u0026ldquo;bash\u0026rdquo; src join a.txt b.txt ä¸¤ä¸ªæ–‡ä»¶æœ‰ä¸€åˆ—æ˜¯ç›¸åŒçš„ find /usr -name \u0026ldquo;hello\u0026rdquo; -type d -exec ls -l {} \\; ä½¿ç”¨-okæ›´ä¸ºå®‰å…¨ã€‚ find . -type f -atime -7 -print 7å¤©å‰è¢«è®¿é—®çš„ find . -type f -size -100M +100M å¤§äº100M -100Må°äº10M\n b\u0026mdash;\u0026ndash;å—ï¼ˆ512å­—èŠ‚ï¼‰ c\u0026mdash;\u0026ndash;å­—èŠ‚ w\u0026mdash;\u0026ndash;å­—ï¼ˆ2å­—èŠ‚ï¼‰ k\u0026mdash;\u0026mdash;åƒå­—èŠ‚ï¼ˆ1024ä¸ªå­—èŠ‚ï¼‰ M\u0026mdash;\u0026ndash;å…†å­—èŠ‚ G\u0026mdash;\u0026mdash;å‰å­—èŠ‚ï¼ˆ1024Mï¼‰  tr \u0026lsquo;A-Z\u0026rsquo; \u0026lsquo;a-z\u0026rsquo;\n echo \u0026lsquo;this is my passwd\u0026rsquo; |tr \u0026lsquo;abcdefghijklmnopqrstuvwxyz\u0026rdquo;zyxwvutsrqponmlkjihgfedcba\u0026rsquo; trä¹Ÿå¯ä»¥ç”¨äºåŠ å¯† è§£å¯†ï¼š echo \u0026lsquo;gsrh rh nb kzhhdw\u0026rsquo; |tr \u0026lsquo;zyxwvutsrqponmlkjihgfedcba\u0026rdquo;abcdefghijklmnopqrstuvwxyz\u0026rsquo;\n  tr -d SET1 #ç”¨tråˆ é™¤å­—ç¬¦\necho \u0026lsquo;Hello1234 World11111 44\u0026rsquo; |tr -d \u0026lsquo;0-9\u0026rsquo;\nHelloWorld\n10. grep -oP \u0026lsquo;(?\u0026lt;=+)fx\u0026rsquo; *\ngrep -oP \u0026lsquo;(?\u0026lt;=+)fx(?=()\u0026rsquo; * grep -onP \u0026lsquo;(?\u0026lt;=+)fx(?=()\u0026rsquo; * 11. cut -d \u0026ldquo;:\u0026rdquo; -f 1,3 /etc/passwd ç±»ä¼¼äºawkçš„å­—åŸŸ cut -d \u0026ldquo;:\u0026rdquo; -f 1,3,7 /etc/passwd\nä¸€ä¸ªç»¼åˆæ€§çš„æ¡ˆä¾‹ #--- FUNCTION ---------------------------------------------------------------- # NAME: deleteDensity # DESCRIPTION: å»é™¤å¯†åº¦å’Œæ¥æµç»éªŒç­‰è¡Œ é‡‡ç”¨ awkå’Œsedç»„åˆåˆ é™¤ï¼ å¹¶æŠŠæœ‰ç”¨ä¿¡æ¯å¯¼å…¥modifiedæ–‡ä»¶å¤¹ä¸‹ # iconvä¸»è¦æ˜¯è€ƒè™‘åˆ°windowsä¸‹çš„ä¸­æ–‡å­—ç¬¦æ— æ³•è¢«è¯†åˆ«çš„é—®é¢˜ # è¿™ä¸ªæ­¥éª¤æ˜¯å¤åˆ¶ï¼Œè€Œç¬¬ä¸‰ä¸ªfileintoDirNewæ˜¯é€šè¿‡mvæ¥æ“ä½œçš„ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- deleteDensity() { echo \u0026quot;åˆ é™¤å¯†åº¦å’Œæ¥æµ\u0026quot; if [ -d \u0026quot;modified\u0026quot; ] then echo \u0026quot;modifiedæ–‡ä»¶å¤¹å·²å­˜åœ¨\u0026quot; else mkdir modified fi for i in `ls *.txt` do iconv -f gb18030 -t utf-8 $i|awk '{print}'|awk '{if ($0 ~ /æ”»è§’/) {print $3;}else if($0 ~ /å‡åŠ›/){print $1,$4,$5}else if($0 ~ /^$/){print ''}else {print $3,$5;}}' |sed '/å¯†åº¦/d'|sed '/æ¥æµåŠ¨å‹/d'|sed '/^$/d' \u0026gt;modified/$i done } # åˆ›å»ºæ–‡ä»¶å¤¹ ä»-10æ”»è§’åˆ°25åº¦æ”»è§’ #--- FUNCTION ---------------------------------------------------------------- # NAME: fenLei # DESCRIPTION: å¯¹æ”»è§’å®è¡Œåˆ†ç±»ï¼ŒæŒ‰ç…§ä¸åŒçš„æ”»è§’åˆ›å»ºä¸åŒçš„æ–‡ä»¶å¤¹ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- fenLei(){ cd modified # æ³¨æ„ä¸‹é¢çš„æ‰€æœ‰å‡½æ•° éƒ½è¿è¡Œåœ¨modifiedæ–‡ä»¶å¤¹ä¸‹ for j in -10.00 -9.00 -8.00 -7.00 -6.00 -5.00 -4.00 -3.00 -2.00 -1.00 0.00 1.00 2.00 3.00 4.00 5.00 6.00 7.00 8.00 9.00 10.00 11.00 12.00 13.00 14.00 15.00 16.00 17.00 18.00 19.00 20.00 21.00 22.00 23.00 24.00 25.00 do if ! [ -d \u0026quot;a\u0026quot;$j ] then mkdir \u0026quot;a\u0026quot;$j fi done } # å¯¼å…¥å¯¹åº”æ”»è§’æ–‡ä»¶åˆ°æ–‡ä»¶å¤¹å†… #--- FUNCTION ---------------------------------------------------------------- # NAME: getFileIntoDir # DESCRIPTION: ä½¿ç”¨AwkæŒ‰ç…§ä¸åŒçš„æ”»è§’å€¼ åˆ©ç”¨ printçš„åŠŸèƒ½è°ƒç”¨shellï¼ŒæŠŠå¯¹åº”æ–‡ä»¶æ‹·è´åˆ°å¯¹åº”æ”»è§’æ–‡ä»¶å¤¹ä¸‹ # æ³¨æ„-våœ¨awkè¡¨ç¤ºå®šä¹‰å˜é‡çš„é—´éš”ç¬¦ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- getFileIntoDir(){ #cd modified for j in -10.00 -9.00 -8.00 -7.00 -6.00 -5.00 -4.00 -3.00 -2.00 -1.00 0.00 1.00 2.00 3.00 4.00 5.00 6.00 7.00 8.00 9.00 10.00 11.00 12.00 13.00 14.00 15.00 16.00 17.00 18.00 19.00 20.00 21.00 22.00 23.00 24.00 25.00 do for i in `ls *.txt` do awk '{print}' $i |awk -v B=\u0026quot;$i\u0026quot; -v A=\u0026quot;æ”»è§’ï¼š\u0026quot;\u0026quot;$j\u0026quot; -v C=\u0026quot;a\u0026quot;\u0026quot;$j\u0026quot; '$0~A{print \u0026quot;cp \u0026quot;,B,\u0026quot; \u0026quot;C\u0026quot;/\u0026quot;B|\u0026quot;/bin/bash\u0026quot;}' done done } #--- FUNCTION ---------------------------------------------------------------- # NAME: getFileIntoDirNew # DESCRIPTION: æ–°ç‰ˆæœ¬çš„getFileIntoDir æ–¹å¼ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- #grep \u0026quot;æ”»è§’ï¼š25.00\u0026quot; *.txt|awk -F[:] '{print $1}' getFileIntoDirNew(){ for j in -10.00 -9.00 -8.00 -7.00 -6.00 -5.00 -4.00 -3.00 -2.00 -1.00 0.00 1.00 2.00 3.00 4.00 5.00 6.00 7.00 8.00 9.00 10.00 11.00 12.00 13.00 14.00 15.00 16.00 17.00 18.00 19.00 20.00 21.00 22.00 23.00 24.00 25.00 do grep \u0026quot;æ”»è§’ï¼š$j\u0026quot; *.txt|awk -F[:] '{print $1}'|xargs -i mv {} \u0026quot;a\u0026quot;\u0026quot;$j\u0026quot; done } ## æ¸…é™¤ç©ºè¡Œ #--- FUNCTION ---------------------------------------------------------------- # NAME: blankEmptyLine # DESCRIPTION: åˆ©ç”¨sed -iå‘½ä»¤ç›´æ¥å¤„ç†æ–‡ä»¶ä¸­å¤šä½™çš„ç©ºè¡Œ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- blankEmptyLine(){ # åœ¨æ¯ä¸ªæ–‡ä»¶å¤¹è¿è¡Œè¿™äº›å‘½ä»¤ æ¸…é™¤ç©ºè¡Œ #cd modified for i in `ls -d */` do sed -i '/^\\s*$/d' $i/*.txt done } #--- FUNCTION ---------------------------------------------------------------- # NAME: cal # DESCRIPTION: æŠŠæ¯ä¸ªæ”»è§’ä¸‹çš„æ–‡ä»¶ï¼Œåˆ©ç”¨awkæ‰§è¡Œæ”»è§’å¹³å‡ å‡åŠ›ç³»æ•°å¹³å‡ å’Œå‹åŠ›ç³»æ•°å¹³å‡ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- cal(){ # åœ¨æ¯ä¸ªæ–‡ä»¶å¤¹ä¸‹éƒ½è¿è¡Œæ­¤è®¡ç®—å¹³å‡å€¼ ç¨‹åº #cd modified for i in `ls -d */` do awk -F\u0026quot;[ ï¼š]\u0026quot; 'BEGIN{num=0;}{if($0 ~/æ”»è§’/){f[FNR]=$1;g[FNR]=$4;num+=1;}else if($0 ~/å‡åŠ›ç³»æ•°/){f[fNR]=$1;g[FNR]+=$4;a[FNR]=$5;b[FNR]+=$9;}else if($0 ~/å‹åŠ›ç³»æ•°/){f[FNR]=$1;g[FNR]=$2}else{f[FNR]+=$1;g[FNR]+=$2;if(nbr\u0026lt;FNR) {nbr=FNR;}}}END{for(i=0;i\u0026lt;=nbr;i++){print f[i]/num,g[i]/num,a[i]/num,b[i]/num;} print num;};' $i/*.txt\u0026gt;$i/modified.txt done } #--- FUNCTION ---------------------------------------------------------------- # NAME: plot # DESCRIPTION: å‡½æ•°ç”¨äºç”»å›¾ è°ƒç”¨gnuplot # ä½¿ç”¨ä¸‹é¢å‡½æ•°ä¹‹å‰å¾—å®‰è£…gnuplot # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- plot(){ #for i in `ls`;do num=`ls $i|wc -l`;let num=$[$num-1];sed -n '2p' $i/\u0026quot;modified.txt\u0026quot;|awk -v A=$i -v B=$num-2 '{print A,$2*B}' \u0026gt;\u0026gt; a.txt;sed -n '3p' $i/\u0026quot;modified.txt\u0026quot;|awk '{print $2}' \u0026gt;\u0026gt; a.txt;done; # sed 'N;s/\\n/ :/' a.txt # for i in `ls`;do num=`ls $i|wc -l`;let num=$[$num-1];sed -n '2p' $i/\u0026quot;modified.txt\u0026quot;|awk -v A=$i -v B=$num-2 '{print $2*B}' \u0026gt;\u0026gt; a.txt;sed -n '3p' $i/\u0026quot;modified.txt\u0026quot;|awk '{print $2}' \u0026gt;\u0026gt; a.txt;done; for i in `ls` do num=`ls $i|wc -l` num=$(($num-1)) #print $i,$num sed -n '2p' $i/\u0026quot;modified.txt\u0026quot;|awk -v A=$i -v B=$num '{print $2*B}' \u0026gt;\u0026gt; shengli.txt sed -n '3p' $i/\u0026quot;modified.txt\u0026quot;|awk '{print $2}' \u0026gt;\u0026gt; shengli.txt sed -n '2p' $i/\u0026quot;modified.txt\u0026quot;|awk -v A=$i -v B=$num '{print $2*B}' \u0026gt;\u0026gt; zuli.txt sed -n '3p' $i/\u0026quot;modified.txt\u0026quot;|awk '{print $4}' \u0026gt;\u0026gt; zuli.txt done sed -i 'N;s/\\n/ /' shengli.txt sort -n shengli.txt \u0026gt; shenglimodified.txt sed -i 'N;s/\\n/ /' zuli.txt sort -n zuli.txt \u0026gt; zulimodified.txt gnuplot\u0026lt;\u0026lt;EOF set ter 'png' set out 'shengli.png' plot \u0026quot;shenglimodified.txt\u0026quot; t 'cl' w lp EOF gnuplot\u0026lt;\u0026lt;EOF set ter 'png' set out 'zuli.png' plot \u0026quot;zulimodified.txt\u0026quot; t 'cd' w lp EOF rm -rf zuli.txt rm -rf shengli.txt } #--- FUNCTION ---------------------------------------------------------------- # NAME: plotCp # DESCRIPTION: ç”¨äºæ‰“å°cpæ›²çº¿ # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- plotCp(){ for i in `ls` do if [ -d $i ] then sed -n '6,47p' $i/\u0026quot;modified.txt\u0026quot; \u0026gt;\u0026gt; $i/\u0026quot;cpUp.txt\u0026quot;;sed -n '49,93p' $i/\u0026quot;modified.txt\u0026quot; |sort -k 2 -nr \u0026gt;\u0026gt; $i/\u0026quot;cpUp.txt\u0026quot;;cpGrid fi done } #--- FUNCTION ---------------------------------------------------------------- # NAME: cpGrid # DESCRIPTION: æ³¨æ„ gnuplotå¿…é¡»æ”¾åœ¨å¥é¦– # PARAMETERS: # RETURNS: #------------------------------------------------------------------------------- cpGrid(){ gnuplot\u0026lt;\u0026lt;EOF set ter 'png' set out '$i/cpUp.png' set xtics rotate by -45 set ytics rotate by -45 plot \u0026quot;$i/cpUp.txt\u0026quot; t 'cp' w lp EOF } # æ‰§è¡Œå‡½æ•° deleteDensity fenLei getFileIntoDirNew blankEmptyLine cal plot plotCp  shellè„šæœ¬é›†åˆ1 shellè„šæœ¬é›†åˆ2 shellè„šæœ¬é›†åˆ3\n","date":1432694184,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432694184,"objectID":"40a49daafd57facb4692a0a63b2c519b","permalink":"/blog/2015/05/27/bashzhi-neng-fen-lei-wen-jian-bing-qiu-zhi/","publishdate":"2015-05-27T10:36:24+08:00","relpermalink":"/blog/2015/05/27/bashzhi-neng-fen-lei-wen-jian-bing-qiu-zhi/","section":"archives","summary":"Bashæ˜¯linuxåº•ä¸‹çš„ä¸€ç§shellå®ç°ï¼Œå¯ä»¥æ–¹ä¾¿linuxç”¨æˆ·è¿›è¡Œç³»ç»Ÿç®¡ç†ã€‚ä»–çš„æ ¸å¿ƒå°±æ˜¯ è°ƒç”¨æœ€æœ‰æ•ˆçš„å‘½ä»¤ç»„åˆå½¢æˆæ›´åŠ å¼ºå¤§å®Œç¾çš„ç®¡ç†å’Œåº”ç”¨ç¨‹åº,è¿™ä¹Ÿæ˜¯unixçš„å“²å­¦,é€šè¿‡è°ƒç”¨between programsçš„å…³ç³»æ¥get its powerè€Œä¸æ˜¯é€šè¿‡è‡ªå·±çš„ç¨‹åºã€‚ shellç¼–æˆçš„ç›®çš„å‡å°‘unixç›¸å…³ç³»ç»Ÿçš„ç®¡ç†å‘˜çš„äººç‰©\nä¸‹é¢ä»‹ç»ä¸»è¦æ˜¯bashè¯­æ³•ï¼Œä»¥åŠæœ‰bashè¯­æ³•è°ƒç”¨awkï¼Œsedï¼Œgrepç­‰linuxåº•ä¸‹å¼ºå¤§çš„å·¥å…·å®ç°ä¸€ä¸ªæ–‡ä»¶æ™ºèƒ½åˆ†ç±»ï¼Œå¹¶å¯¹ç›¸åº”æ–‡ä»¶å¤¹å–å¹³å‡ã€‚\n","tags":null,"title":"Bashæ™ºèƒ½åˆ†ç±»æ–‡ä»¶å¹¶æ±‚å€¼","type":"archives"},{"authors":null,"categories":["gnuplot"],"content":"gnuplotæ˜¯ä¸€ç§ç§‘å­¦ç»˜å›¾çš„å¼€æºè½¯ä»¶ï¼Œæ¯”originå¼ºä¸Šä¸å°‘ã€‚ è€Œgnuplotçš„æ ¸å¿ƒå°±æ˜¯è¿™ä¸ªplotã€‚\næ•°æ®è¡¨ï¼š\næ³¨æ„ #+tblname:å­—æ®µæ˜¯emacsçš„org-modeå¯ä»¥è¯†åˆ«çš„,å¯ä»¥é€šè¿‡#+begin_src çš„:var data=data-tableæ¥å¼•ç”¨è¿™å¼ è¡¨çš„æ•°æ®ã€‚\n#+tblname: data-table | x | y1 | y2 | |---+----+----| | 0 | 3 | 6 | | 1 | 4 | 7 | | 2 | 5 | 8 |  å¦å¤–ï¼Œæœ¬æ–‡ä¸€ç›´ä¼šä½¿ç”¨çš„å¼•ç”¨emacsçš„babal_gnuplotåœ¨gnuplotå½“ä¸­çš„è¿ç”¨#begin_src gnuplot :var data=data-table :exports code :file foo.pngåˆ†åˆ«ä»£è¡¨çš„æ„æ€æ˜¯\n+ :var data=data-table When data is to be plotted from a table, it is helpful to use a heading right above the table in the form #+tblname=data-table, where \u0026quot;data-table\u0026quot; is replaced with some short name to identify the table to gnuplot. + :exports {code, results, both, none} When the code is run and the document exported (e.g. to HTML or \\LaTeX PDF), what should appear? Just the code block itself? Only the produced output (in this case a plot of some sort)? Both the code and the accompanying results? Or nothing? + :file foo.{png,eps,etc.} This option specifies where the resulting output should be put. If no option is given, a gnuplot window will open with the resultant plot. NOTE: Certain plot options may not output properly to gnuplot directly and thus must have the :file filename option in the header. If the error \u0026quot;Code block produced no output\u0026quot; recurs, try outputting to a file instead of directly to gnuplot.  å¦å¤–ä¸€ä¸ªä¸éœ€è¦è®°ä½çš„Named ticsçš„å†™æ³•å¦‚ä¸‹\n ä¸ºäº†å¢åŠ åˆ»åº¦æ ‡æ³¨\nset xtics (\u0026quot;Tic 1\u0026quot; -1, \u0026quot;Tic 2\u0026quot; 10, \u0026quot;Tic 3\u0026quot; 1001)  ä¸ºäº†å¢åŠ å¯è¯»æ€§\nYou can rotate tic marks for increased readability by specifying an angle at which to rotate their labels. Here is the syntax (substitute any angle value for -45): set xtics rotate by -45 set ytics rotate by -45  ä¸ºäº†é˜»æ­¢åŒè½´\nThe gnuplot default is for tics to show up on both sides and the top and bottom of the graph. In other words, the tics on the left y-axis and bottom x-axis are \u0026quot;mirrored\u0026quot; to the opposing side of the plot borders. Stop this (tics only on left/bottom) by using: set xtics nomirror set ytics nomirror   æ­¥å…¥æ­£é¢˜ Plot \u0026ndash; the core of the gnuplot plot what? function.\nf(x) = x**2 plot f(x)  data.\nplot data using x:y  plot how? plot data u 1:2 with lines  ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ç±»å‹ + points(p) + dots(d) + lines(l) + linespoints(lp) + impulses(i) + steps + boxes\nå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨(\u0026ndash;\u0026gt; è¡¨ç¤ºç®€å†™ä¸º) + lineweight \u0026ndash;\u0026gt; lw + with \u0026ndash;\u0026gt; w\ncall it what? ###ä½ ä¹Ÿå¯ä»¥ç»™ä¸€å¼ å›¾åŠ ä¸Štitleæ ‡é¢˜\nplot data u 1:2 w lines lw 2 title 'Data Set 1'  ä½ ä¹Ÿå¯ä»¥å¿½ç•¥ä¸€ä¸ªplotçš„keyï¼Œä½¿ç”¨notitle plot data u 1:2 w lines notitle, \\ data u 1:3 w points title 'Data Set 2', \\ data u 1:4 w lp title 'Data Set 3', \\ data u 1:5 w bars notitle  è¿™æ˜¯ä¸€ä¸ªç›¸å½“é‡è¦çš„æŠ€å·§ã€‚å¤šç»„æ•°æ®ä¸€èµ·æ‰“å°çš„æ—¶å€™ï¼Œä¸éœ€è¦æ‰“å°æ‰€æœ‰çš„æ ‡é¢˜ï¼Œè¿™æ—¶å€™notitleç‰¹åˆ«æœ‰æ•ˆï¼Œèƒ½è®©æ˜¾ç¤ºçš„æ—¶å€™ç‰¹åˆ«æ¸…æ™°ã€‚\nany more? ###æƒ³è¦å¤šå¼ å›¾æ”¾åœ¨ä¸€èµ·ï¼Ÿ\nf(x)=x**2 g(x)=x**3 h(x)=sqrt(x) plot f(x),g(x),h(x)  ###æƒ³è¦æ‰“å°ä¸€ä¸ªè¡¨æ ¼ï¼Ÿ\nplot data u 1:2 w lines, data u 1:3 w points, \\ data u 1:4 w lp  å¾ˆå¤šä¾‹å­ æ³¨æ„è¿™è¾¹çš„ #+begin_src #+end_src æ˜¯æˆ‘åœ¨gnuplotçš„orgmodeå¼€å¯bableæ¨¡å¼æ—¶å€™ä½¿ç”¨ï¼Œå…·ä½“ä½ å¯ä»¥çœ‹ä¸€ä¸‹å¦‚ä½•åœ¨gnuplotä½¿ç”¨org-mode\nç¬¬ä¸€ä¸ªå‡½æ•°æ‰“å° #+begin_src gnuplot :exports code :file gnuplot.png reset set title \u0026quot;Putting it All Together\u0026quot; set xlabel \u0026quot;X\u0026quot; set xrange [-8:8] set xtics -8,2,8 set ylabel \u0026quot;Y\u0026quot; set yrange [-20:70] set ytics -20,10,70 f(x) = x**2 g(x) = x**3 h(x) = 10*sqrt(abs(x)) plot f(x) w lp lw 1, g(x) w p lw 2, h(x) w l lw 3 #+end_src  #+results: basic-plotçš„æ•°æ®è¡¨ #+tblname:basic-plot | x | y1 | y2 | |-----+------------+------------| | 0.1 | 0.425 | 0.375 | | 0.2 | 0.3125 | 0.3375 | | 0.3 | 0.24999993 | 0.28333338 | | 0.4 | 0.275 | 0.28125 | | 0.5 | 0.26 | 0.27 | | 0.6 | 0.25833338 | 0.24999993 | | 0.7 | 0.24642845 | 0.23928553 | | 0.8 | 0.23125 | 0.2375 | | 0.9 | 0.23333323 | 0.2333332 | | 1 | 0.2225 | 0.22 |  gnuplotä¸­çš„æ‰“å°basic-plot #+begin_src gnuplot :var data=basic-plot :exports code :file table.png set title \u0026quot;Putting it All Together\u0026quot; set xlabel \u0026quot;X\u0026quot; set xrange [0:1] set xtics 0,0.1,1 set ylabel \u0026quot;Y\u0026quot; set yrange [0.2:0.5] set ytics 0.2,0.05,0.5 plot data u 1:2 w p lw 2 title 'x vs. y1', \\ data u 1:3 w lp lw 1 title 'x vx. y2' #+end_src  ##xticsæ•°æ®è¡¨\n#+tblname:xtics | Date | Distance | |-----------+----------| | 8/25/2010 | 3.2 | | 8/29/2010 | 3.0 | | 9/1/2010 | 2.4 | | 9/2/2010 | 2.5 | | 9/5/2010 | 2.3 | | 9//2010 | 2.0 |  gnuplotçš„gnuplotæ‰“å° #+begin_src gnuplot :var data=xtics :exports code :file time.png reset set title \u0026quot;Running Stats\u0026quot; set xlabel \u0026quot;Date\u0026quot; set xtics rotate by -45 set yrange [1:5] set ylabel \u0026quot;Distance (mi)\u0026quot; plot data u 2:xticlabels(1) w lp lw 2 notitle #+end_src  #+results: è¡¨æ ¼åŠ ä¸Šæ ‡é¢˜ #+CAPTION: è¡¨æ ¼çš„æ ‡é¢˜ | 1 | one | | 2 | two | | 3 | This is a long chunk of text | | 4 | four |  | | \u0026lt;6\u0026gt; | |---+--------| | 1 | one | | 2 | two | | 3 | This=\u0026gt; | | 4 | four |  è¡¨æ ¼çš„ç‰¹æ®Šä½¿ç”¨ ç”¨äºç»Ÿè®¡ | æ•°é‡ | å•ä»· | æ€»é¢ | |------+------+-------| | 2 | 3.55 | 6.9 | | 4 | 4.34 | 17.36 | | 5 | 3.44 | 17.2 | | 5 | 5.6 | 28. | #+TBLFM: $3=$1*$2  named-xtics æ•°æ®è¡¨ #+caption: time-history #+tblname: named-xtics | tic name | x-value | Dead (y) | Live(l) | |----------+---------+----------+---------| | Civil | 1861 | 0.62 | 0.63 | | WWI | 1914 | 9.8 | 9.9 | | WWII | 1939 | 24 | 25 | | Nam | 1955 | 1.5 | 1.6 | | Gulf | 1990 | 0.04 | 0.05 |  #+begin_src gnuplot :var data=named-xtics :exports code :file named.png reset set yrange [0:25] set ylabel \u0026quot;Deaths (MM)\u0026quot; set xtics (\u0026quot;1850\u0026quot; 1850, \u0026quot;2010\u0026quot; 2010) set xrange [1850:2010] set xlabel \u0026quot;Wars in Time\u0026quot; set title 'War Deaths' plot data using 2:3:xticlabels(1) w p lw 3 t 'set1',\\ data u 2:4:xticlabels(1) title 'Set2' #+end_src  #+results: multi-axesæ•°æ®è¡¨ #+tblname:multi-axes | Date | Time | Distance | |-----------+-------+----------| | 8/25/2010 | 17:14 | 3.2 | | 8/29/2010 | 14:00 | 2.4 | | 9/1/2010 | 15:13 | 2.5 | | 9/2/2010 | 13:45 | 2.3 | | 9/5/2010 | 13:20 | 2.0 | | 9//2010 | 16:35 | 2.8 |  #+begin_src gnuplot :var data=multi-axes :exports code :file multi.png reset set title \u0026quot;Running Stats\u0026quot; set size ratio square set key box linestyle -1 set xlabel \u0026quot;Date\u0026quot; set xtics nomirror rotate by -45 set yrange [9:21] set ylabel \u0026quot;Time (min)--Red\u0026quot; set ytics nomirror set y2range [1.5:3.5] set y2label \u0026quot;Distance (mi)--Green\u0026quot; set y2tics 0,0.5,3.5 set style data points plot data u 2:xticlabels(1) axis x1y1 lw 3 title 'Time', \\ data u 3:xticlabels(1) axis x1y2 lw 3 title 'Distance' #+end_src  #+results: diff-scalesæ•°æ®è¡¨ #+tblname:diff-scales | tic name | x-loc | Pop | | 10k BC | -10000 1 | | | | -9000 | 3 | | | -8000 | 5 | | | -7000 | 7 | | | -6000 | 10 | | | -5000 | 15 | | | -4000 | 20 | | | -3000 | 25 | | | -2000 | 35 | | | -1000 | 50 | | | -500 | 100 | | AD 1 | 1 | 200 | | 1000 | 1000 | 310 | | 1750 | 1750 | 791 | | 1800 | 1800 | 978 | | 1850 | 1850 | 1262 | | 1900 | 1900 | 1650 | | \\'50 | 1950 | 2519 | | | 1955 | 2756 | | | 1960 | 2982 | | | 1965 | 3335 | | | 1970 | 3692 | | \\'75 | 1975 | 4068 | | | 1980 | 4435 | | | 1985 | 4831 | | | 1990 | 5263 | | | 1995 | 5674 | | | 2000 | 6070 | | 2005 | 2005 | 6454 |  #+begin_src gnuplot :var data=diff-scales :exports code :file scales.png reset set xrange [ -10000 : 1 ] set yrange [ 0 : 7000 ] set xlabel \u0026quot;Time\u0026quot; set multiplot set size 0.275,1 set origin 0.0,0.0 set lmargin 10 set rmargin 0 set ylabel \u0026quot;Population (MM)\u0026quot; set ytics nomirror plot data using 2:3:xticlabels(1) with lines lw 3 notitle set origin 0.275,0.0 set size 0.15,1 set format y \u0026quot;\u0026quot; set noytics set lmargin 0 set rmargin 0 set xrange [2 : 1750] set ylabel \u0026quot;\u0026quot; plot data using 2:3:xticlabels(1) with lines lw 3 notitle set origin 0.425,0.0 set size 0.575,1 set format y \u0026quot;\u0026quot; set noytics set lmargin 0 set rmargin 2 set xrange [1751 : 2005] set ylabel \u0026quot;\u0026quot; plot data using 2:3:xticlabels(1) with lines lw 3 notitle set nomultiplot #+end_src  #+results: broken-axis æ•°æ®è¡¨ #+tblname: broken-axis | tic name | x-loc | Pre | Post | | 10,000 BC | 1600 | 1 | | | | 1650 | 15 | | | AD 1 | 1700 | 200 | | | 1750 | 1750 | | 791 | | 1800 | 1800 | | 978 | | 1850 | 1850 | | 1262 | | 1900 | 1900 | | 1650 | | \\'50 | 1950 | | 2519 | | | 1955 | | 2756 | | | 1960 | | 2982 | | | 1965 | | 3335 | | | 1970 | | 3692 | | \\'75 | 1975 | | 4068 | | | 1980 | | 4435 | | | 1985 | | 4831 | | | 1990 | | 5263 | | | 1995 | | 5674 | | | 2000 | | 6070 | | 2005 | 2005 | | 6454 |  #+begin_src gnuplot :var data=broken-axis :exports code :file broken.png reset A=1725 B=1600 C=2010 D=0 E=6500 xoff=.005*(C-B) yoff=.02*(E-D) set arrow 1 from A-xoff, D to A+xoff, D nohead lw 2 lc rgb \u0026quot;#ffffff\u0026quot; front set arrow 2 from A-xoff, E to A+xoff, E nohead lw 2 lc rgb \u0026quot;#ffffff\u0026quot; front set arrow 3 from A-xoff-xoff, D-yoff to A+xoff-xoff, D+yoff nohead front set arrow 4 from A-xoff+xoff, D-yoff to A+xoff+xoff, D+yoff nohead front set arrow 5 from A-xoff-xoff, E-yoff to A+xoff-xoff, E+yoff nohead front set arrow 6 from A-xoff+xoff, E-yoff to A+xoff+xoff, E+yoff nohead front set xrange [B:C] set yrange [D:E] set xlabel 'Time' set ylabel 'Population (MM)' set title 'World Population' plot data u 2:3:xticlabels(1) w l lw 3 notitle, data u 2:4:xticlabels(1) w l lw 3 lc 1 notitle #+end_src  ","date":1432655295,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432655295,"objectID":"e0c107a9a88e7aa7e400a3c2d12ce9d2","permalink":"/blog/2015/05/26/gnuplotde-he-xin-shi-plot/","publishdate":"2015-05-26T23:48:15+08:00","relpermalink":"/blog/2015/05/26/gnuplotde-he-xin-shi-plot/","section":"archives","summary":"gnuplotæ˜¯ä¸€ç§ç§‘å­¦ç»˜å›¾çš„å¼€æºè½¯ä»¶ï¼Œæ¯”originå¼ºä¸Šä¸å°‘ã€‚ è€Œgnuplotçš„æ ¸å¿ƒå°±æ˜¯è¿™ä¸ªplotã€‚\n","tags":null,"title":"gnuplotçš„æ ¸å¿ƒæ˜¯plot","type":"archives"},{"authors":null,"categories":["Haskell"],"content":"èŒƒç•´ç†è®ºæ˜¯æ•°å­¦ä¸Šçš„ä¸€ç§æ–°çš„è¯­è¨€å’Œæ¡†æ¶ç»“æ„. å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œå®ƒæ˜¯å¦ä¸€ç§æ€è€ƒæ–¹å¼ï¼Œä¸€ç§æåº¦æœ‰æ•ˆçš„æ–¹å¼æ¥æå–è§„å¾‹(Extremely efficient for generalization) Programming is doing Math.ç¼–æˆçš„å·¥ä½œå…¶å®å°±æ˜¯æ•°å­¦çš„å·¥ä½œã€‚\nèŒƒç•´æ˜¯ä¸€ç§è¡¨è¾¾äº‹ç‰©(things) å’Œè·¯å¾„(ways) to go between things. è¿™å¯ä»¥å‚è€ƒthinking like a gitï¼Œå› ä¸ºä»–ä¹Ÿæ˜¯ä¸€ç§åŸºäºèŒƒç•´ç†è®ºï¼Œ è€Œå»¶ä¼¸å‡ºæ¥çš„å®é™…äº§ç‰©ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜å¯¹äºdevelopmentçš„ç®¡ç†ã€‚\nA Category C is defined by:\n Objects ob(C), Morphisms hom(C), a Composition law (âˆ˜)  Functor : (ob-\u0026gt;ob) Functor : (hom-\u0026gt;hom) Endofunctors: Categories and functors form a category: Cat  ob(Cat) are categories hom(Cat) are functors âˆ˜ is functor composition  A Haskell Functor is a type F :: * -\u0026gt; * which belong to the type class Functor ; thus instantiate fmap :: (a -\u0026gt; b) -\u0026gt; (F a -\u0026gt; F b).  F: ob(Hask)â†’ob(Hask) \u0026amp; fmap: hom(Hask)â†’hom(Hask)  The couple (F,fmap) is a Hask\u0026rsquo;s functor if for any x :: F a: fmap id x = x fmap (f.g) x= (fmap f . fmap g) x ","date":1432213011,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432213011,"objectID":"179bbf512b83cfeeaf67e4031522dea9","permalink":"/blog/2015/05/21/wei-da-de-fan-chou-li-lun/","publishdate":"2015-05-21T20:56:51+08:00","relpermalink":"/blog/2015/05/21/wei-da-de-fan-chou-li-lun/","section":"archives","summary":"èŒƒç•´ç†è®ºæ˜¯æ•°å­¦ä¸Šçš„ä¸€ç§æ–°çš„è¯­è¨€å’Œæ¡†æ¶ç»“æ„. å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œå®ƒæ˜¯å¦ä¸€ç§æ€è€ƒæ–¹å¼ï¼Œä¸€ç§æåº¦æœ‰æ•ˆçš„æ–¹å¼æ¥æå–è§„å¾‹(Extremely efficient for generalization) Programming is doing Math.ç¼–æˆçš„å·¥ä½œå…¶å®å°±æ˜¯æ•°å­¦çš„å·¥ä½œã€‚\nèŒƒç•´æ˜¯ä¸€ç§è¡¨è¾¾äº‹ç‰©(things) å’Œè·¯å¾„(ways) to go between things. è¿™å¯ä»¥å‚è€ƒthinking like a gitï¼Œå› ä¸ºä»–ä¹Ÿæ˜¯ä¸€ç§åŸºäºèŒƒç•´ç†è®ºï¼Œ è€Œå»¶ä¼¸å‡ºæ¥çš„å®é™…äº§ç‰©ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜å¯¹äºdevelopmentçš„ç®¡ç†ã€‚\n","tags":null,"title":"ä¼Ÿå¤§çš„èŒƒç•´ç†è®º","type":"archives"},{"authors":null,"categories":["Haskell"],"content":"ä¸€äº›å¸¸ç”¨çš„èµ„æ–™æŸ¥è¯¢åœ°ã€‚\n 130 tutorials 46 articles on mathematicas 46 FAQ topics 186 articles on other Haskell communities Stackoverflow:more than 10,000 problems discussed Reddit:ç±»ä¼¼äºgoogle group (more than 10,000 subbscribers) Hackage æœ€ç»ˆçš„æ”¶é›†ç½‘å€ Hoogle:Haskellå­—å…¸  ","date":1432184473,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432184473,"objectID":"55b93acdc69430a86857dd20921f6ad1","permalink":"/blog/2015/05/21/haskellwiki/","publishdate":"2015-05-21T13:01:13+08:00","relpermalink":"/blog/2015/05/21/haskellwiki/","section":"archives","summary":"ä¸€äº›å¸¸ç”¨çš„èµ„æ–™æŸ¥è¯¢åœ°ã€‚ 130 tutorials 46 articles on mathematicas 46 FAQ topics 186 articles on other Haskell communities Stackoverflow:more than 10,000 problems discussed Reddit:ç±»ä¼¼äºgoogle group (more than 10,000 subbscribers) Hackage æœ€ç»ˆçš„æ”¶é›†ç½‘å€ Hoogle:Has","tags":null,"title":"HaskellWiki","type":"archives"},{"authors":null,"categories":["Haskell"],"content":"/src Folder for source-code Setup.hs Haskell build script app.cabal Cabal build script README Informative text file LICENCE Software licence statement  ä¸‹é¢æ˜¯æˆ‘çš„å»ºç«‹è¿‡ç¨‹:\n1æ–°å»ºä¸€ä¸ªHELLOæ–‡ä»¶å¤¹,åœ¨HELLOæ–‡ä»¶å¤¹æ–°å»ºä¸€ä¸ªsrc mkdir HELLO cd HELLO mdkir src  2 main.hs åœ¨srcå†…æ–°å»ºä¸€ä¸ªmain.hs module Main where import Control.Monad main=do putStrLn \u0026quot;Quit? y/n\u0026quot; ans \u0026lt;- getLine when (ans /= \u0026quot;y\u0026quot;) $ do putStrLn \u0026quot;not quiting\u0026quot; main  3 cabal init Return to the* top* directory, and run cabal init. It helps you fill out the following information:\n Package name Package version License Author name Maintainer email Project homepage URL Project synopsis Build type\ncabal init   ä¸€ä¸ªå¡«å†™æ¨¡æ¿\nè‡³æ­¤ç°åœ¨ä½ çš„æ–‡ä»¶ç»“æ„åº”è¯¥æ˜¯\n$ tree . |-- HELLO.cabal |-- LICENSE |-- Setup.hs `-- src `-- Main.hs  ç°åœ¨ä½ å°±å¯ä»¥åˆ†äº«ä½ çš„ç¨‹åºï¼Œè€Œå¦‚æœä½ è¦å®‰è£…ï¼Œåˆ™å¯ä»¥ç»§ç»­çœ‹ä¸‹é¢ç®€å•æ“ä½œ\nRun +cabal install+ at the project directory ç„¶åå°±ä¼šæŠŠä½ çš„æ‰§è¡Œç¨‹åºæ”¾åœ¨~/.cabal/binä¸­äº†\ncabal install  ä¸€å®šè¦æ³¨æ„ ä¿®æ”¹HELLO.cabalä¸­çš„main-is,ä¸è¦æ³¨é‡Šä»–ï¼Œé»˜è®¤æ˜¯æ³¨é‡Š å¹¶ä¸”å¡«å…¥srcçš„ä¸»æ–‡ä»¶å Main.hs\nexecutable HELLO -- .hs or .lhs file containing the Main module. main-is: Main.hs ä¸€å®šè¦è¡¥å¥½ï¼Œå¦åˆ™cabal install å¤±è´¥ -- Modules included in this executable, other than Main. -- other-modules: -- Other library packages from which modules are imported. build-depends: base ==4.6.* -- Directories containing source files. hs-source-dirs: src  ç»“æœæ˜¯ï¼š\n$ cabal install Resolving dependencies... Configuring HELLO-1.0.0... Building HELLO-1.0.0... Preprocessing executable 'HELLO' for HELLO-1.0.0... [1 of 1] Compiling Main ( src/Main.hs, dist/build/HELLO/HELLO-tmp/Main.o ) Linking dist/build/HELLO/HELLO ... Installing executable(s) in /home/javazhao/.cabal/bin Installed HELLO-1.0.0  æ­¤æ—¶çš„æ–‡æ¡£ç»“æ„å¦‚ä¸‹:\n$ tree . |-- dist | |-- build | | |-- autogen | | | |-- cabal_macros.h | | | `-- Paths_HELLO.hs | | `-- HELLO | | |-- HELLO | | `-- HELLO-tmp | | |-- Main.hi | | `-- Main.o | |-- package.conf.inplace | `-- setup-config |-- HELLO.cabal |-- LICENSE |-- Setup.hs `-- src `-- Main.hs  ä¸€äº›é¢å¤–çŸ¥è¯†ï¼š\nOpen up Main.hs and add some documentation \u0026ndash; | is the syntax for documenting function type signature, type declaration, or class declaration,è®°ä½\u0026ndash;å’Œ|ä¸­é—´æœ‰ä¸€ä¸ªç©ºæ ¼\nmodule Main where -- |This is the main function main :: IO() main = do putStrLn \u0026quot;What's your name?\u0026quot; name \u0026lt;- getLine putStrLn (\u0026quot;Hi \u0026quot; ++ name)  ç„¶åå°±å¯ä»¥ä½¿ç”¨Haddock(å‰ææ˜¯ä½ è¿è¡Œäº†cabal install,è¿™æ ·ä½ çš„æ–‡ä»¶å¤¹ä¸‹æ‰æœ‰dist) Haddock is a documentation engine\né¦–å…ˆéœ€è¦å®‰è£…alexï¼š\ncabal install alex Linking dist/build/alex/alex ... Installing executable(s) in /home/javazhao/.cabal/bin Installed alex-3.1.4  ç„¶åå®‰è£…happy\ncabal install happy Linking dist/build/happy/happy ... Installing executable(s) in /home/javazhao/.cabal/bin Installed happy-1.19.5  æœ€åå®‰è£…haddockï¼š\ncabal install haddock Linking dist/build/haddock/haddock ... Installing library in /home/javazhao/.cabal/lib/haddock-2.13.2.1/ghc-7.6.3 Installing executable(s) in /home/javazhao/.cabal/bin Registering haddock-2.13.2.1... Installed haddock-2.13.2.1  æœ€åè¿è¡Œç»“æœ\ncabal haddock --executables $ cabal haddock --executables Running Haddock for HELLO-1.0.0... Preprocessing executable 'HELLO' for HELLO-1.0.0... Warning: The documentation for the following packages are not installed. No links will be generated to these packages: base-4.6.0.1, rts-1.0, ghc-prim-0.3.0.0, integer-gmp-0.5.0.0 Haddock coverage: 50% ( 1 / 2) in 'Main' Warning: Main: could not find link destinations for: GHC.Types.IO Documentation created: dist/doc/html/HELLO/HELLO/index.html  ç„¶åä½ çš„æ–‡æ¡£å°±ä¼šå­˜åœ¨dist/doc/html/HELLO/HELLO/index.html è¿™å…¶å®å°±æ˜¯å®˜ç½‘çš„é‚£äº›ç±»åº“ç½‘é¡µçš„çš„äº§ç”Ÿæ–¹å¼.\næœ€ç»ˆçš„æ–‡æ¡£ç»“æ„ï¼š\n$ tree . |-- dist | |-- build | | |-- autogen | | | |-- cabal_macros.h | | | `-- Paths_HELLO.hs | | `-- HELLO | | |-- HELLO | | `-- HELLO-tmp | | |-- Main.hi | | `-- Main.o | |-- doc | | `-- html | | `-- HELLO | | `-- HELLO | | |-- doc-index.html | | |-- frames.html | | |-- haddock-util.js | | |-- HELLO.haddock | | |-- hslogo-16.png | | |-- index-frames.html | | |-- index.html | | |-- Main.html | | |-- mini_Main.html | | |-- minus.gif | | |-- ocean.css | | |-- plus.gif | | `-- synopsis.png | |-- package.conf.inplace | `-- setup-config |-- HELLO.cabal |-- LICENSE |-- Setup.hs `-- src `-- Main.hs  ä¸€ä¸ªæé†’ ä»¥åå†™ä»£ç çš„æ—¶å€™ï¼Œä¸€å®šè¦æ³¨æ„æ ‡æ³¨\n ä½¿ç”¨\u0026ndash; | ä½¿ç”¨{- -} é’ˆå¯¹å¿«æ³¨é‡Š  ä¸€ä¸ªé“¾æ¥å…³äºhaddockçš„ç”¨æˆ·æŒ‡å—\n","date":1432182462,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432182462,"objectID":"0110e4e5d728c7976ec5bc60142deb6a","permalink":"/blog/2015/05/21/haskellku-wen-dang-jie-gou/","publishdate":"2015-05-21T12:27:42+08:00","relpermalink":"/blog/2015/05/21/haskellku-wen-dang-jie-gou/","section":"archives","summary":"/src Folder for source-code Setup.hs Haskell build script app.cabal Cabal build script README Informative text file LICENCE Software licence statement  ä¸‹é¢æ˜¯æˆ‘çš„å»ºç«‹è¿‡ç¨‹:\n","tags":null,"title":"Haskellåº“æ–‡æ¡£ç»“æ„","type":"archives"},{"authors":null,"categories":["Haskell"],"content":"Haskellæ˜¯ä¸€é—¨å¾ˆæ·±çš„(deep)è¯­è¨€ï¼Œéœ€è¦ç»å¸¸å»è€ƒç©¶ï¼Œä¸‹é¢æœ‰ä¸€äº›æ¸ é“å¯ä»¥ ç»å¸¸å»æŸ¥é˜…ç±»å‹çš„æ¨ç†è¿‡ç¨‹ã€‚\nStandard PreludeåŒ…å«ç€åŸºæœ¬çš„PreudeåŠ è½½çš„æ¨¡å—ï¼Œç±»ï¼Œå‡½æ•°ç­‰ï¼Œç›¸å½“å…·ä½“ã€‚ ç°åœ¨ç»ˆäºå‘ç°haskellçš„ç±»å‹ç±»å…¶å®å°±æ˜¯æŠ½è±¡ç±»æˆ–è€…æ¯”æŠ½è±¡ç±»æ›´æŠ½è±¡çš„æ¥å£ç±»ï¼Œé€šè¿‡classæ¥å®šä¹‰(åœ¨javaä¸­æ— è®ºæ˜¯æŠ½è±¡ç±»è¿˜æ˜¯å®ä½“ç±»éƒ½ä½¿ç”¨class,ç°åœ¨haskellåŒºåˆ†æ¥classå®šä¹‰æŠ½è±¡ç±»æˆ–è€…æ¥å£ç±»,dateå®šä¹‰å®ä½“ç±»)\nå¿…é¡»ç»å¸¸å»æŸ¥æŸ¥è¿™äº›å‡½æ•°çš„å®ç°\n Data.Char 100å¤šä¸ª Data.List 200å¤šä¸ª Data.Map 200å¤šä¸ª Data.Set 100å¤šä¸ª  è¿˜æœ‰å…¶ä»–350ç§ä»¥ä¸Šè¿™ç§ç±»å‹ã€‚ã€‚ã€‚\nä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬å¿…é¡»ä¸ºè¦è¿›è¡Œæ¯”è¾ƒçš„ä¸åŒç±»å‹ä½¿ç”¨ä¸åŒåå­—çš„å‡½æ•°ã€‚è¿™å¾ˆä½æ•ˆä¸”ä»¤äººåŒçƒ¦ã€‚å¦‚æœèƒ½å¤Ÿåªä½¿ç”¨ == æ¥æ¯”è¾ƒä»»ä½•ä¸œè¥¿å°†æ–¹ä¾¿å¾ˆå¤šã€‚== åœ¨å®ç°åƒ /= è¿™æ ·çš„æ³›å‹å‡½æ•°ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œå‡ ä¹å¯¹ä»»ä½•äº‹ç‰©éƒ½æœ‰æ•ˆã€‚æœ‰äº†ä¸€ä¸ªå¯ä»¥æ¯”è¾ƒä»»æ„äº‹ç‰©çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è®©è‡ªå·±çš„ä»£ç æ›´é€šç”¨ï¼šå¦‚æœä¸€æ®µä»£ç åªæ˜¯éœ€è¦æ¯”è¾ƒä¸€äº›äº‹ç‰©ï¼Œå®ƒå°±åº”è¯¥å¯ä»¥æ¥å—ä»»æ„æ•°æ®ç±»å‹ï¼Œç¼–è¯‘å™¨çŸ¥é“å¦‚ä½•æ¯”è¾ƒå®ƒä»¬ã€‚å¹¶ä¸”ï¼Œå¦‚æœåæ¥å¢åŠ äº†æ–°çš„æ•°æ®ç±»å‹ï¼Œå·²æœ‰çš„ä»£ç ä¸éœ€è¦è¿›è¡Œä¿®æ”¹ã€‚\nç±»å‹ç±»å®šä¹‰ä¸€ç»„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¾èµ–äºæ‰€ç»™å®šçš„æ•°æ®çš„ç±»å‹å¯ä»¥æœ‰ä¸åŒçš„å®ç°ã€‚ç±»å‹ç±»çœ‹ä¸Šå»å¯èƒ½åƒé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„å¯¹è±¡ï¼Œä½†æ˜¯å®ƒä»¬ç¡®å®å¾ˆä¸ç›¸åŒã€‚ è®©æˆ‘ä»¬ç”¨ç±»å‹ç±»æ¥è§£å†³æœ¬ç« å‰é¢çš„ç›¸ç­‰æ€§æµ‹è¯•çš„éš¾é¢˜ã€‚é¦–å…ˆï¼Œå¿…é¡»å®šä¹‰ç±»å‹ç±»æœ¬èº«ã€‚æˆ‘ä»¬æƒ³è¦ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸¤ä¸ªç›¸åŒç±»å‹çš„å‚æ•°å¹¶è¿”å›ä¸€ä¸ªBoolå€¼æ¥è¡¨ç¤ºä¸¤ä¸ªå‚æ•°æ˜¯å¦ç›¸ç­‰ã€‚æˆ‘ä»¬ä¸å…³å¿ƒå‚æ•°çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Œåªæ˜¯éœ€è¦è¿™ç§ç±»å‹çš„ä¸¤ä¸ªé¡¹ã€‚è¿™æ˜¯æˆ‘ä»¬çš„ç±»å‹ç±»çš„ç¬¬ä¸€ä¸ªå®šä¹‰ï¼š\nâ€” file: ch06/eqclasses.hs class BasicEq a where isEqual :: a -\u0026gt; a -\u0026gt; Bool  è¿™é‡Œå£°æ˜äº†ä¸€ä¸ªåä¸ºBasicEqçš„ç±»å‹ç±»ï¼Œç”¨å­—æ¯aè¡¨ç¤ºå®ä¾‹çš„ç±»å‹ã€‚è¿™ä¸ªç±»å‹ç±»çš„å®ä¾‹æ˜¯ä»»ä½•å®ç°äº†å…¶ä¸­æ‰€å®šä¹‰çš„å‡½æ•°çš„ç±»å‹ã€‚è¿™ä¸ªç±»å‹ç±»å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å–ä¸¤ä¸ªå‚æ•°ï¼éƒ½æ˜¯è¿™ç§å®ä¾‹çš„ç±»å‹ï¼å¹¶ä¸”è¿”å›ä¸€ä¸ªBoolå€¼ã€‚\nHaskellçš„ç±»å‹ç±»è¢«è®¾è®¡æ¥åšè¿™äº›äº‹æƒ…ã€‚ Haskellä¸­å®šä¹‰ç±»å‹ç±»çš„å…³é”®å­—æ˜¯ classã€‚ä¸å¹¸çš„æ˜¯è¿™å¯èƒ½ä¼šè®©æ¥è‡ªé¢å‘å¯¹è±¡ç¼–ç¨‹çš„äººä»¬ææ··ï¼Œå› ä¸ºæˆ‘ä»¬æ‰€è¯´çš„å¹¶ä¸æ˜¯ä¸€å›äº‹ï¼ ç¬¬ä¸€è¡Œé‡Œé¢å‚æ•°åaæ˜¯ä»»æ„é€‰æ‹©çš„ã€‚å¯ä»¥ç”¨ä»»ä½•åå­—ã€‚å…³é”®ç‚¹æ˜¯ï¼Œåœ¨å‡½æ•°ä¸­è¦åˆ—å‡ºç±»å‹æ—¶ï¼Œå¿…é¡»ç”¨å®ä¾‹çš„åå­—ã€‚ + ä¸€äº›æ•°å€¼ç®—å­ï¼š\nNumeric ç±»å‹ Haskellæœ‰ä¸€ç»„éå¸¸å¼ºå¤§çš„æ•°å­—ç±»å‹ã€‚ä»å¿«é€Ÿçš„32ä½æˆ–64ä½æ•´æ•°åˆ°ä»»æ„ç²¾åº¦çš„æœ‰ç†æ•°éƒ½å¯ä»¥ä½¿ç”¨ã€‚ä½ å¯èƒ½å·²ç»çŸ¥é“äº†åƒè¿™æ ·çš„æ“ä½œç¬¦å¯ä»¥å¯¹æ‰€æœ‰è¿™äº›ç±»å‹ä½¿ç”¨ã€‚è¿™ä¸ªç‰¹æ€§æ˜¯ç”¨ç±»å‹ç±»å®ç°çš„ã€‚ä½œä¸ºé™„åŠ çš„å¥½å¤„ï¼Œå®ƒå…è®¸ä½ å®šä¹‰è‡ªå·±çš„æ•°å­—ç±»å‹ï¼Œå¹¶æŠŠå®ƒä½œä¸ºHaskellä¸­çš„ä¸€ç­‰å…¬æ°‘ã€‚\nåœ¨å¼€å§‹è®¨è®ºæ•°å­—ç±»å‹æ—¶ï¼Œå…ˆæŸ¥çœ‹ä¸‹è¿™äº›ç±»å‹æœ¬èº«ã€‚è¡¨6-1 â€œNumericç±»å‹ç²¾é€‰â€æè¿°äº†Haskellä¸­æœ€å¸¸ç”¨çš„æ•°å­—ç±»å‹ã€‚æ³¨æ„è¿˜æœ‰äº›å…¶ä»–çš„æ•°å­—ç±»å‹å¯ç”¨ï¼Œç”¨æ¥å®ç°ä¸Cäº¤äº’ç­‰ç‰¹å®šç”¨é€”ã€‚\n###Table 6.1. Numeric ç±»å‹ç²¾é€‰\nè¿™äº›æ˜¯ç›¸å½“å¤šä¸åŒçš„æ•°å­—ç±»å‹ã€‚æœ‰ä¸€äº›åƒç›¸åŠ è¿™æ ·çš„æ“ä½œï¼Œå¯ä»¥ç”¨åœ¨æ‰€æœ‰è¿™äº›ç±»å‹ä¸Šã€‚è¿˜æœ‰å…¶ä»–çš„å…¥ asinï¼Œåªç”¨åœ¨æµ®ç‚¹æ•°ç±»å‹ä¸Šã€‚è¡¨6ï¼2â€œNumericå‡½æ•°å’Œå¸¸é‡ç²¾é€‰â€é‡Œæ€»ç»“äº†æ“ä½œä¸åŒæ•°å­—ç±»å‹çš„å‡½æ•°ï¼Œè¡¨6-3 â€œNumericç±»çš„ç±»å‹ç±»å®ä¾‹â€å°†ç±»å‹ä¸å®ƒä»¬ç›¸åº”çš„ç±»å‹ç±»è¿›è¡ŒåŒ¹é…ã€‚åœ¨è¯»è¿™ä¸ªè¡¨æ—¶ï¼Œè®°ä½Haskellçš„æ“ä½œç¬¦åªæ˜¯å‡½æ•°ï¼š (+) 2 3 æˆ–è€… 2 + 3 ç»“æœéƒ½ä¸€æ ·ã€‚æŒ‰ç…§ä¹ æƒ¯ï¼ŒæŠŠæ“ä½œç¬¦ä½œä¸ºå‡½æ•°æ—¶ï¼Œå†™åœ¨æ‹¬å·é‡Œã€‚\n###Table 6.2. â€œNumericå‡½æ•°å’Œå¸¸é‡ç²¾é€‰â€\nç»å¸¸éœ€è¦åœ¨æ•°å­—ç±»å‹ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚è¡¨6-2 â€œâ€åˆ—å‡ºäº†å¾ˆå¤šå¯ä»¥ç”¨æ¥åšè½¬æ¢çš„å‡½æ•°ã€‚ç„¶è€Œå¦‚ä½•åœ¨ä»»æ„ä¸¤ä¸ªç±»å‹é—´è¿›è¡Œè½¬æ¢å¹¶ä¸æ€»æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚è¡¨6-4â€œåœ¨Numericç±»å‹é—´è½¬æ¢â€æä¾›äº†å¦‚ä½•åœ¨ä¸åŒç±»å‹é—´è½¬æ¢çš„ä¿¡æ¯ã€‚\nå¯ä»¥ç”¨ round, ceiling æˆ–è€… floor æ›¿ä»£ truncateã€‚\nåœ¨â€œæ‰©å±•å®ä¾‹ï¼šNumericç±»å‹â€ä¸€èŠ‚æœ‰å…¶ä»–çš„ä¾‹å­æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨è¿™äº›æ•°å­—ç±»å‹ç±»ã€‚ ç›¸ç­‰æ€§ï¼Œé¡ºåºæ€§ï¼ŒåŠæ¯”è¾ƒæˆ‘ä»¬å·²ç»è¯´è¿‡äº†ç®—æœ¯æ“ä½œç¬¦å¦‚ + å¯ä»¥ç”¨åœ¨æ‰€æœ‰ä¸åŒçš„æ•°å­—ä¸Šã€‚ä½†æ˜¯Haskellé‡Œè¿˜æœ‰äº›æ›´åŠ å¹¿æ³›çš„æ“ä½œç¬¦ã€‚æœ€æ˜æ˜¾çš„å½“ç„¶æ˜¯ç›¸ç­‰æ€§æµ‹è¯•ï¼š == å’Œ /=ã€‚è¿™äº›æ“ä½œç¬¦å®šä¹‰åœ¨ Eq ç±»é‡Œã€‚\nè¿˜æœ‰ \u0026gt;= å’Œ \u0026lt;= è¿™æ ·çš„æ¯”è¾ƒæ“ä½œç¬¦ã€‚å®ƒä»¬åœ¨ Ord ç±»å‹ç±»ä¸­å£°æ˜ã€‚å®ƒä»¬åœ¨å•ç‹¬çš„ç±»å‹ç±»ä¸­ï¼Œæ˜¯å› ä¸ºæœ‰äº›ç±»å‹å¦‚Handleï¼Œå¯ä»¥åšç›¸ç­‰æ€§æµ‹è¯•ï¼Œä½†æ˜¯æ²¡æœ‰åŠæ³•è¡¨è¾¾ç‰¹å®šçš„é¡ºåºã€‚æ‰€æœ‰Ordçš„å®ä¾‹éƒ½å¯ä»¥ç”¨ Data.List.sort æ¥æ’åºã€‚\nå‡ ä¹æ‰€æœ‰çš„Haskellç±»å‹éƒ½æ˜¯Eqçš„å®ä¾‹ï¼Œå¹¶ä¸”å¤§éƒ¨åˆ†æ˜¯Ordçš„å®ä¾‹ã€‚\n","date":1432176888,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432176888,"objectID":"f2786a1c1b286f9389a1e0055bab54ff","permalink":"/blog/2015/05/21/haskell-common-type-signature-synopsis/","publishdate":"2015-05-21T10:54:48+08:00","relpermalink":"/blog/2015/05/21/haskell-common-type-signature-synopsis/","section":"archives","summary":"Haskellæ˜¯ä¸€é—¨å¾ˆæ·±çš„(deep)è¯­è¨€ï¼Œéœ€è¦ç»å¸¸å»è€ƒç©¶ï¼Œä¸‹é¢æœ‰ä¸€äº›æ¸ é“å¯ä»¥ ç»å¸¸å»æŸ¥é˜…ç±»å‹çš„æ¨ç†è¿‡ç¨‹ã€‚\nStandard PreludeåŒ…å«ç€åŸºæœ¬çš„PreudeåŠ è½½çš„æ¨¡å—ï¼Œç±»ï¼Œå‡½æ•°ç­‰ï¼Œç›¸å½“å…·ä½“ã€‚ ç°åœ¨ç»ˆäºå‘ç°haskellçš„ç±»å‹ç±»å…¶å®å°±æ˜¯æŠ½è±¡ç±»æˆ–è€…æ¯”æŠ½è±¡ç±»æ›´æŠ½è±¡çš„æ¥å£ç±»ï¼Œé€šè¿‡classæ¥å®šä¹‰(åœ¨javaä¸­æ— è®ºæ˜¯æŠ½è±¡ç±»è¿˜æ˜¯å®ä½“ç±»éƒ½ä½¿ç”¨class,ç°åœ¨haskellåŒºåˆ†æ¥classå®šä¹‰æŠ½è±¡ç±»æˆ–è€…æ¥å£ç±»,dateå®šä¹‰å®ä½“ç±»)\n","tags":null,"title":"Haskell common type signature(synopsis)","type":"archives"},{"authors":null,"categories":["Haskell"],"content":"Haskell have many beautiful features,such as monad(combination),so we can write very elegant code(compact code).\nReference Here verbose:\nmodule Main where import System.IO main = do theInput \u0026lt;- readFile \u0026quot;input.txt\u0026quot; putStrLn (countLines theInput) countLines :: String -\u0026gt; String countLines str = (show (length (lines str)))  elegant:\nmodule Main where import System.IO main = readFile \u0026quot;input.txt\u0026quot; \u0026gt;\u0026gt;= print.length.lines  Function Application verbose:\nnot (odd 4) not $ odd 4  elegant: The . Function It composes functions in a readable manner\nf(g(h(k(x)))) is ugly (f.g.h.k)(x) is pretty (not.odd) 4 (length.head.words) \u0026quot;University of Virginia\u0026quot;  ä¸Šé¢å†™çš„eleganté£æ ¼éƒ½å¯ä»¥å«åšpoint-freeé£æ ¼ï¼Œå®ƒä½¿ç”¨Monadçš„ç»“åˆå¾‹ï¼Œ\næ¯”å¦‚ä¸‹é¢è½¬æ¢ä¸€èˆ¬ä»£ç åˆ°point-freeé£æ ¼çš„æ–¹æ³•ï¼š\nf x = 5 + 8/x f x = (+) 5 (8/x) f x = (+) 5 ((/) 8 x) f x = ((+) 5) ((/) 8 x) f x = ((+) 5) (((/) 8) x) f x = ((+) 5).(((/) 8)) x f= ((+) 5).((/) 8) f= (5+).(8/)  å¦ä¸€ä¸ªå¸¸ç”¨çš„è½¬æ¢å†™æ³•ï¼š\nadd a b = a+ b ---\u0026gt; add =(+) f s =length (head (words s)) ---\u0026gt; f= length.head.words  Add later\n","date":1432175335,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432175335,"objectID":"3298475eea6e4f97d9e6771cb610c8d4","permalink":"/blog/2015/05/21/haskell-one-line/","publishdate":"2015-05-21T10:28:55+08:00","relpermalink":"/blog/2015/05/21/haskell-one-line/","section":"archives","summary":"Haskell have many beautiful features,such as monad(combination),so we can write very elegant code(compact code).\n","tags":null,"title":"Haskell-one-line","type":"archives"},{"authors":null,"categories":["Haskell"],"content":"I have a question about how to call the function when we see the type declartion.æˆ‘æœ‰ä¸€ä¸ªå…³äºé˜…è¯»å‡½æ•°å£°æ˜æ—¶å€™ï¼Œå¦‚ä½•è°ƒç”¨å‡½æ•°çš„ç–‘é—®ã€‚ æ¯”å¦‚:\n It is one parameter, but it must be a tuple with three tuple elements   it must be a tuple with three tuple elements  ::Double-\u0026gt;Double-\u0026gt;Double What does it mean?\nareAsceneding :: Integer-\u0026gt;Integer-\u0026gt;Integer-\u0026gt;Bool areAsceneding a b c=a\u0026lt;b \u0026amp;\u0026amp; b\u0026lt;c areasceneding 1 2 3 --get true areasceneding 1 4 2 --get false  Actually ,multiply parameter can changed into one parameter method by currying!!\nYou must care about the () means tuple data structure. [] means list data structure.\nç»‘å®šBinding ã€€Haskellä½¿ç”¨=å®ç°ç»‘å®šï¼Œå‰é¢æˆ‘ä»¬è¯´=æ˜¯å¼•ç”¨é€æ˜çš„æ¡ˆä¾‹ï¼Œæ˜¯ä¸€ç§æ•°å­¦æ„ä¹‰ï¼Œå®é™…æ˜¯å°†ä¸¤è€…ç»‘å®šäº†ã€‚\nx = 2 -- ä¸¤ä¸ªè¿å­—ç¬¦å·è¡¨ç¤ºæ³¨è§£ y = 3 -- main = let z = x + y -- let å¼•å…¥ä¸€ä¸ªæœ¬åœ°ç»‘å®š in print z -- ç¨‹åºå°†æ‰“å° 5  Bindingåç§°ä¸èƒ½å¤§å†™ï¼Œç»‘å®šå¯ä»¥å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°çš„å‡½æ•°ï¼Œå‡½æ•°å’Œå‚æ•°ä½¿ç”¨ç©ºæ ¼ï¼Œè¿™æ˜¯HaskellåŒºåˆ«å…¶ä»–è¯­è¨€çš„ç®€æ´ä¹‹å¤„ï¼š\nadd arg1 arg2 = arg1 + arg2 -- å®šä¹‰å‡½æ•°add five = add 2 3 -- è°ƒç”¨å‡½æ•°add  ã€€æ‹¬å·å¯ä»¥åŒ…è£…å¤åˆè¡¨è¾¾å¼ï¼š\nbad = print add 2 3 -- error! (æ‰“å°åªèƒ½æœ‰ä¸€ä¸ªå‚æ•°) main = print (add 2 3) -- ok, ä½¿ç”¨ä¸€ä¸ªå‚æ•°5ä½œä¸ºæ‰“å°å‚æ•°  å˜é‡æ˜¯ä¸å¯å˜çš„ ã€€ä¸å‘½ä»¤å¼è¯­è¨€å˜é‡ä¸åŒ,Haskellç»‘å®šå˜é‡ ä¸å¯å˜çš„ï¼š\nx = 5 x = 6 -- é”™è¯¯, ä¸èƒ½å†ç»‘å®šx,ä½†æ˜¯åœ¨letä¸­åˆ™æ˜¯ä¸ä¸€æ ·  ç±»å‹æœ‰ä¸‹é¢å‡ ç§ï¼š\n Bool - æœ‰ä¸¤ä¸ªå…ƒç´ ï¼š True æˆ– False Char - unicodeç¬¦åˆé›†åˆ Int - å›ºå®šå¤§å°æ•´æ•° Integer - æ— é™å¤§å°æ•´æ•° Double - IEEE æµ®ç‚¹æ•°å­— type1 -\u0026gt; type2 - ä¸€ä¸ªè¾“å…¥ç±»å‹type1 åˆ°è¾“å‡ºç±»å‹ type2çš„å‡½æ•° (type1, type2, \u0026hellip;, typeN) - ç±»å‹æ•°ç»„tuple () - é›¶æ•°ç»„tuple, ç§°ä¸ºunit (ç±»ä¼¼Cçš„void); è¿™ä¸ªç±»å‹åªæœ‰ä¸€ä¸ªå€¼ï¼šç©ºã€‚ [Char]-\u0026gt; means list pk tuple. ","date":1432138350,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432138350,"objectID":"4b407977d50e01ffaff852da9afd984c","permalink":"/blog/2015/05/21/one-parameter-or-many-parameters/","publishdate":"2015-05-21T00:12:30+08:00","relpermalink":"/blog/2015/05/21/one-parameter-or-many-parameters/","section":"archives","summary":"I have a question about how to call the function when we see the type declartion.æˆ‘æœ‰ä¸€ä¸ªå…³äºé˜…è¯»å‡½æ•°å£°æ˜æ—¶å€™ï¼Œå¦‚ä½•è°ƒç”¨å‡½æ•°çš„ç–‘é—®ã€‚ æ¯”å¦‚:\n It is one parameter, but it must be a tuple with three tuple elements   it must be a tuple with three tuple elements  ::Double-\u0026gt;Double-\u0026gt;Double What does it mean?\n","tags":null,"title":"One-parameter-Or-many-parameters?","type":"archives"},{"authors":null,"categories":["Haskell"],"content":" The most important is:Hackage-haskell-Official Maintains a central repository of open source Hakell libraries called Hackage.   The hoogle-the haskell dictionary\n The hackage-wiki contains a section dedicated to information about particular Haskell libraries\n ä¸€ä¸ªä¸­æ–‡Real-world-haskellç¿»è¯‘\n ä½¿ç”¨Cabalï¼Œä¸€ä¸ªå‘½ä»¤è¡Œçš„å®‰è£…å·¥å…·ï¼Œç±»ä¼¼vimçš„bundles Installï¼Œubuntuçš„apt-get install, redhatçš„yum install *ç­‰ï¼Œæ¥å®‰è£… ä½ éœ€è¦çš„haskellçš„åŒ…å’Œä¾èµ– æ¯”å¦‚ å®‰è£…HTTP library\ncabal install HTTP  cabalå››ä¸ªé˜¶æ®µï¼š\n fetches è·å–\n configures é…ç½®\n compiles ç¼–è¯‘\n installs å®‰è£…\n  æ‰€ä»¥å®‰è£…HTTPåº“ï¼ˆä¸€èˆ¬åº“ä¹Ÿæ˜¯ä¸€æ ·)\n Refresh the list Download the recent list of packages\ncabal update  Install the package find any package from Hackage\ncabal install HTTP  Use Cabal takes care of installing the package. The library can now be imported\n---new file.hs import Network.HTTP  ä½¿ç”¨hackage.haskell.org/packages/HTTPæŸ¥çœ‹HTTPçš„ä½¿ç”¨æ–¹å¼ å¯ä»¥æŸ¥çœ‹è¿™ä¸ªç½‘é¡µä¸‹çš„ Modules Network åŒ…å«ç€ä¸€äº›ç›¸å…³çš„å‡½æ•°ã€‚ æ¯”å¦‚æˆ‘ä»¬ç‚¹å‡»ï¼ŒNetwork.HTTPå°±ä¼šç»™æˆ‘ä»¬ä¸€ä¸ªè¯¦ç»†çš„å‡½æ•°ä½¿ç”¨è¯´æ˜çš„ç½‘é¡µï¼Œä»–æ¥å—ä»€ä¹ˆç±»å‹ï¼Œè¿”å›ä»€ä¹ˆç±»å‹ã€‚ SimpleHTTP æ¥å—ä¸€ä¸ªRequest å¯¹è±¡ï¼Œç„¶åè¿”å›ä¸€ä¸ªIO Monadã€‚\nPrelude Network.HTTP\u0026gt; import Network.HTTP Prelude Network.HTTP\u0026gt; :t simpleHTTP simpleHTTP :: HStream ty =\u0026gt; Request ty -\u0026gt; IO (Network.Stream.Result (Response ty)) Prelude Network.HTTP\u0026gt; let myRequest=getRequest \u0026quot;http://www.baidu.com\u0026quot; Prelude Network.HTTP\u0026gt; simpleHTTP myRequest \u0026gt;\u0026gt;= getResponseBody å°±ä¼šå¾—åˆ°å¾ˆå¤šçš„å†…å®¹ï¼ï¼ï¼ \u0026gt;\u0026gt;=æ˜¯ä»€ä¹ˆç©æ„ï¼ï¼ Prelude Network.HTTP\u0026gt; :t (\u0026gt;\u0026gt;=) (\u0026gt;\u0026gt;=) :: Monad m =\u0026gt; m a -\u0026gt; (a -\u0026gt; m b) -\u0026gt; m b \u0026gt;\u0026gt;=å…¶å®å°±æ˜¯ç½‘ç»œç¼–ç¨‹çš„bindæ“ä½œï¼ˆç»‘å®šç«¯å£ï¼‰   Actually, go to https://wiki.haskell.org/Haskell, you will get resources you want.\n","date":1432132685,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432132685,"objectID":"373fd70a1bde20c5d31df4eb4086ac7c","permalink":"/blog/2015/05/20/haskell-someimportantresource/","publishdate":"2015-05-20T22:38:05+08:00","relpermalink":"/blog/2015/05/20/haskell-someimportantresource/","section":"archives","summary":" The most important is:Hackage-haskell-Official Maintains a central repository of open source Hakell libraries called Hackage. ","tags":null,"title":"Haskell-someImportantResource","type":"archives"},{"authors":null,"categories":["Haskell"],"content":"In haskell you can use () to embrace the function into an application\nnot odd 4 --\u0026gt;error not (odd 4) --\u0026gt;right  you can also use $ (called a function application),it makes functions right associative.\nnot $ odd 4  but more pretty and elegant method is use .\nIt composes functions in a readable manner f(g(h(k(x)))) is ugly (f.g.h.k)(x) is pretty\n(not.odd) 4 (length.head.words) \u0026quot;university of NCEPU\u0026quot;  Haskell\u0026rsquo;s all functions + Data.List + Data.Char + Data.Map + Data.Set \u0026hellip;..and more than 350 others\nIn the Data.List module: Main Data.List\u0026gt; concat [\u0026quot;under\u0026quot;,\u0026quot;stand\u0026quot;,\u0026quot;ing\u0026quot;] \u0026quot;understanding\u0026quot; Main Data.List\u0026gt; any (==0) [1,1,1,1,1,0,0] True Main Data.List\u0026gt; sort \u0026quot;helo\u0026quot; \u0026quot;ehlo\u0026quot; --And over 200 more!  Also there are Data.Char Main Data.List\u0026gt; import Data.Char Main Data.List Data.Char\u0026gt; isNumber 'h' False Main Data.List Data.Char\u0026gt; toUpper 't' Main Data.List Data.Char\u0026gt; Data.List.map ord ['A'..'F'] [65,66,67,68,69,70] --and over 100 more!  There are also some in Data.Map Main Data.List Data.Char\u0026gt; import Data.Map Main Data.List Data.Char Data.Map\u0026gt; let m = fromList[(\u0026quot;CS\u0026quot;,\u0026quot;Computer Science\u0026quot;),(\u0026quot;TLS\u0026quot;,\u0026quot;The Little Scheme\u0026quot;),(\u0026quot;TSS\u0026quot;,\u0026quot;The Season Scheme\u0026quot;)] Main Data.List Data.Char Data.Map\u0026gt; m fromList [(\u0026quot;CS\u0026quot;,\u0026quot;Computer Science\u0026quot;),(\u0026quot;TLS\u0026quot;,\u0026quot;The Little Scheme\u0026quot;),(\u0026quot;TSS\u0026quot;,\u0026quot;The Season Scheme\u0026quot;)] Main Data.List Data.Char Data.Map\u0026gt; keys m [\u0026quot;CS\u0026quot;,\u0026quot;TLS\u0026quot;,\u0026quot;TSS\u0026quot;] Main Data.List Data.Char Data.Map\u0026gt; Data.Map.lookup \u0026quot;CS\u0026quot; m Just \u0026quot;Computer Science\u0026quot; and over 200 more!!!!  We can continue see Data.Set Main Data.List Data.Char Data.Map Data.Set\u0026gt; let a =Data.Set.fromList[1..58] Main Data.List Data.Char Data.Map Data.Set\u0026gt; let b =Data.Set.fromList[53..100] Main Data.List Data.Char Data.Map Data.Set\u0026gt; Data.Set.intersection a b fromList [53,54,55,56,57,58] Main Data.List Data.Char Data.Map Data.Set\u0026gt; Data.Set.findMax $ Data.Set.union a b 100 --and even 100 more  There are one problem: Some function multiple definition in the Data.List and Data.Map,So take note!\nSolve the strong passwd\nstrong x = length x \u0026gt; 14 \u0026amp;\u0026amp; any isLower x \u0026amp;\u0026amp; any isUpper x \u0026amp;\u0026amp; any isDigit x -- Designed by Jared Candelaria --import Data.Char strong :: String -\u0026gt; Bool strong password = all ($ password) requirements where requirements = [minLength 15, any isUpper, any isLower, any isDigit] minLength n str = n \u0026lt;= length str ","date":1432114236,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432114236,"objectID":"d47a0307d8f2784364ba7c512d8af38b","permalink":"/blog/2015/05/20/thinking-about-the-dot-symbol-in-haskell/","publishdate":"2015-05-20T17:30:36+08:00","relpermalink":"/blog/2015/05/20/thinking-about-the-dot-symbol-in-haskell/","section":"archives","summary":"In haskell you can use () to embrace the function into an application\nnot odd 4 --\u0026gt;error not (odd 4) --\u0026gt;right  you can also use $ (called a function application),it makes functions right associative.\nnot $ odd 4  but more pretty and elegant method is use .\n","tags":null,"title":"Thinking about the dot symbol in haskell","type":"archives"},{"authors":null,"categories":["life"],"content":"Inceptionç›—æ¢¦ç©ºé—´ï¼Œè™½ç„¶æœªçœ‹è¿‡ï¼Œå¤§æ¦‚äº†è§£ä»–çš„é£æ ¼æ˜¯ä»ä¸€ä¸ªæ¢¦ä¸­è·³åˆ°å¦ä¸€ä¸ªæ¢¦ä¸­ï¼Œ è¿™æ ¹å‡½æ•°å¼ç¼–ç¨‹æœ‰ç‚¹åƒï¼ŒCPSå˜å¹»ç‚¹ï¼Œæœ€ç»ˆéƒ½ä¼šå›åˆ°åŸæ¥çš„é‚£ä¸ªç‚¹ï¼Œç„¶è€Œæˆ‘åªæ˜¯æƒ³ç”¨ å‰§ä¸­çš„ä¸€å¼ å›¾ï¼Œæ¥è¯´æ˜æ·±å…¥ä¸€ç‚¹ä½ å°†ä¼šè·å¾—æ›´å¤šï¼Œç”Ÿæ´»ä¹Ÿæ˜¯å¦‚æ­¤,Maybe,finally we will go to the original pointã€‚ ","date":1432102291,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432102291,"objectID":"9974e1478ac59e03e8a9e4bb54363383","permalink":"/blog/2015/05/20/weneedtogodeeper/","publishdate":"2015-05-20T14:11:31+08:00","relpermalink":"/blog/2015/05/20/weneedtogodeeper/","section":"archives","summary":"Inceptionç›—æ¢¦ç©ºé—´ï¼Œè™½ç„¶æœªçœ‹è¿‡ï¼Œå¤§æ¦‚äº†è§£ä»–çš„é£æ ¼æ˜¯ä»ä¸€ä¸ªæ¢¦ä¸­è·³åˆ°å¦ä¸€ä¸ªæ¢¦ä¸­ï¼Œ è¿™æ ¹å‡½æ•°å¼ç¼–ç¨‹æœ‰ç‚¹åƒï¼ŒCPSå˜å¹»ç‚¹ï¼Œæœ€ç»ˆéƒ½ä¼šå›åˆ°åŸæ¥çš„é‚£","tags":null,"title":"WeNeedToGoDeeper","type":"archives"},{"authors":null,"categories":["Haskell"],"content":"Reference Here\næ¨¡å—åŒ–ï¼Œè¿™æ ·æ‰èƒ½æ–¹ä¾¿æ„å»ºè¾ƒå¤§å‹çš„é¡¹ç›®ï¼Œè§£å†³æ›´åŠ å¤æ‚çš„é—®é¢˜ã€‚ å…¶ä¸­MyData.hsæ˜¯æ¨¡å—æ–‡ä»¶ æ³¨æ„ï¼Œæ¨¡å—ä¸­æ·»åŠ ç±»å‹æ—¶å€™ä½¿ç”¨(..); æ·»åŠ å‡½æ•°æ—¶å€™ç›´æ¥ä½¿ç”¨å‡½æ•°å TestMyData.hsæ˜¯æµ‹è¯•æ¨¡å—æ–‡ä»¶\n##åŸºæœ¬è¯­æ³•ç»“æ„ï¼š module MyData ( ç±»å‹(..) \u0026hellip;. å‡½æ•°å \u0026hellip;) where ç±»å‹å£°æ˜ \u0026hellip; å‡½æ•°å£°æ˜ \u0026hellip;\næ³¨æ„ MyData.hsä¸€å®šæ˜¯å’Œmoduleåé¢çš„MyDataä¸€æ ·çš„ï¼\nè°ƒç”¨æ–¹å¼ import MyData\nMyData.hs\nmodule MyData (MetricUnit(..), ImperialUnit(..), Measurement(..), convert ) where -- How to use this module -- new File Test.hs -- import MyData -- reportMeasurement :: Measurement-\u0026gt;String -- reportMeasurement (MyData.MetricMeasurement x u) -- = (show x) ++ \u0026quot; \u0026quot; ++ (show u) -- reportMesuarement m -- =reportMeasurement (convert m) -- N.B. If there are another file use Meter type,it will fail -- 1 data MetricUnit = Meter|Liter|KiloGram deriving (Show,Eq) -- 2 data ImperialUnit = Yard | Gallon | Pound deriving (Show,Eq) -- 3 data Measurement = MetricMeasurement Double MetricUnit | ImperialMeasurement Double ImperialUnit deriving (Show) --If not,it will not show,Only --in the type defition,but not function -- 4 convert :: Measurement-\u0026gt; Measurement -- Take attention for the () brace convert (MetricMeasurement x u) | u == Meter = ImperialMeasurement (1.0936*x) Yard | u == Liter = ImperialMeasurement (0.2642*x) Gallon | u == KiloGram = ImperialMeasurement (2.2046*x) Pound --wrong! -- | u == \u0026quot;Meter\u0026quot; = ImperialMeasurement (1.0936*x) Yard -- | u == \u0026quot;Liter\u0026quot; = ImperialMeasurement (0.2642*x) Gallon -- | u == \u0026quot;KiloGram\u0026quot; = ImperialMeasurement (2.2046*x) Pound convert (ImperialMeasurement x u) | u == Yard = MetricMeasurement (0.9144*x) Meter | u == Gallon = MetricMeasurement (3.7854*x) Liter | u == Pound = MetricMeasurement (0.4536*x) KiloGram  TestMyData.hs æ³¨æ„ï¼Œä¸€å®šä¸è¦æŠŠMeasurement-å†™æˆäº† Mesuarementç­‰é”™è¯¯çš„æ–‡å­—\nimport MyData reportMeasurement :: Measurement-\u0026gt;String reportMeasurement (MyData.MetricMeasurement x u) = (show x) ++ \u0026quot; \u0026quot; ++ (show u) reportMeasurement m =reportMeasurement (convert m) --reportMeasurement (MyData.ImperialMeasurement x u) -- = (show x) ++ \u0026quot; \u0026quot; ++ (show u) ---if imperial let m = MetricMeasuremnt 2 Meter ...  è¿è¡Œç»“æœ --Main\u0026gt; reportMeasurement (convert (ImperialMeasurement 5 Pound)) --\u0026quot;2.268 KiloGram\u0026quot; *Main\u0026gt; let m = ImperialMeasurement 5 Pound *Main\u0026gt; reportMeasurement m \u0026quot;2.268 KiloGram\u0026quot; *Main\u0026gt; reportMeasurement (MetricMeasurement 5 Meter) \u0026quot;5.0 Meter\u0026quot; ","date":1432100997,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432100997,"objectID":"f4691f710bda30c582e14c88bbe30d6a","permalink":"/blog/2015/05/20/haskellmodule/","publishdate":"2015-05-20T13:49:57+08:00","relpermalink":"/blog/2015/05/20/haskellmodule/","section":"archives","summary":"Reference Here\næ¨¡å—åŒ–ï¼Œè¿™æ ·æ‰èƒ½æ–¹ä¾¿æ„å»ºè¾ƒå¤§å‹çš„é¡¹ç›®ï¼Œè§£å†³æ›´åŠ å¤æ‚çš„é—®é¢˜ã€‚ å…¶ä¸­MyData.hsæ˜¯æ¨¡å—æ–‡ä»¶ æ³¨æ„ï¼Œæ¨¡å—ä¸­æ·»åŠ ç±»å‹æ—¶å€™ä½¿ç”¨(..); æ·»åŠ å‡½æ•°æ—¶å€™ç›´æ¥ä½¿ç”¨å‡½æ•°å TestMyData.hsæ˜¯æµ‹è¯•æ¨¡å—æ–‡ä»¶\n##åŸºæœ¬è¯­æ³•ç»“æ„ï¼š module MyData ( ç±»å‹(..) \u0026hellip;. å‡½æ•°å \u0026hellip;) where ç±»å‹å£°æ˜ \u0026hellip; å‡½æ•°å£°æ˜ \u0026hellip;\næ³¨æ„ MyData.hsä¸€å®šæ˜¯å’Œmoduleåé¢çš„MyDataä¸€æ ·çš„ï¼\nè°ƒç”¨æ–¹å¼ import MyData\n","tags":null,"title":"HaskellModule","type":"archives"},{"authors":null,"categories":["fortran"],"content":"Fortranï¼šä¸€é—¨å¤è€çš„è®¡ç®—æœºæ•°å€¼ç§‘å­¦è®¡ç®—è¯­è¨€,1950.\nFortrançš„å¼ºé¡¹å°±æ˜¯æ•°å€¼è®¡ç®—ï¼Œå›¾å½¢ç¼–ç¨‹æ˜¯ä¸€ä¸ªé¸¡è‚‹æ‰€åœ¨ï¼Œä½†æ˜¯æœ‰æ—¶å€™åˆéœ€è¦åšä¸€äº›å›¾å½¢çš„å±•ç¤ºï¼Œå€ŸåŠ©äºGTK+ projectå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬è¾¾åˆ°ç›®çš„.\nGTKæ˜¯cè¯­è¨€ç¼–å†™çš„æºç¨‹åºï¼Œè¿ç”¨åˆ°fortranéœ€è¦ç›¸åº”çš„åº“è½¬æ¢,åœ¨githubä¸Šæ‰¾åˆ°ä¸€ä¸ªgtk-fortranåº“.ä¸‹é¢æ˜¯ubuntuä¸Šé¢çš„æ­å»ºè¿‡ç¨‹(windows æœªå®ç°,å¯ä»¥å‚è€ƒ gtk+makefile)\nUbuntu æ­å»º ç¯å¢ƒæ­å»º GTK3+æ˜¯è·¨å¹³å°çš„ï¼Œæ—¢å¯ä»¥åœ¨windowsä¸Šä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨linuxä¸Šä½¿ç”¨ ä¸‹é¢çš„ä»£ç å¯ä»¥ç›´æ¥æ‰“åŒ…è¿›ä¸€ä¸ªgtk.shæ–‡ä»¶ï¼Œç›´æ¥è¿è¡Œsh gtk.shè¿›è¡Œå®‰è£…\n#1 åˆšè£…å¥½çš„Ubuntuç³»ç»Ÿä¸­å·²ç»æœ‰GCCäº†ï¼Œä½†æ˜¯è¿™ä¸ªGCCå‡ ä¹ä»€ä¹ˆæ–‡ä»¶éƒ½ä¸èƒ½ç¼–è¯‘ï¼Œå› ä¸ºç¼ºå°‘ä¸€äº›å¿…é¡»çš„å¤´æ–‡ä»¶ï¼Œæ‰€ä»¥è¦å®‰è£…build-essentialè¿™ä¸ªè½¯ä»¶åŒ… sudo apt-get install build-essential #2 å®‰è£…GTK/GNOMEå¼€å‘ç¯å¢ƒ éœ€è¦ä¸‹è½½ä¸€ç³»åˆ—çš„å®‰è£…åŒ…ï¼Œæ—¶é—´æ¯”è¾ƒé•¿ sudo apt-get install gnome-devel gnome-devel-docs #3 ç”¨äºåœ¨ç¼–è¯‘GTKç¨‹åºæ—¶è‡ªåŠ¨æ‰¾å‡ºå¤´æ–‡ä»¶åŠåº“æ–‡ä»¶ä½ç½®ã€€sudo apt-get install pkg-config #4å®‰è£… devhelp GTKæ–‡æ¡£æŸ¥çœ‹ç¨‹åº sudo apt-get install devhelp #5å®‰è£… gtk/glib çš„APIå‚è€ƒæ‰‹å†ŒåŠå…¶å®ƒå¸®åŠ©æ–‡æ¡£ sudo apt-get install libglib2.0-doc libgtk2.0-doc #6 å®‰è£…åŸºäºGTKçš„ç•Œé¢GTKæ˜¯å¼€å‘Gnomeçª—å£çš„c/c++è¯­è¨€å›¾å½¢åº“ sudo apt-get install glade libglade2-dev ##æˆ–è€…sudo apt-get install glade-gnome glade-common glade-doc #7å®‰è£…gtk3.0 æˆ–è€… å°†gtk+3.0æ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ç»Ÿé€šä¸‹è½½å®‰è£…å®Œæ¯• (å®‰è£…æ—¶é—´è¾ƒé•¿) sudo apt-get install libgtk3* ## æŸ¥çœ‹ä¿¡æ¯ # æŸ¥çœ‹ 2.x ç‰ˆæœ¬ #pkg-config --modversion gtk+-3.0 # æŸ¥çœ‹pkg-configçš„ç‰ˆæœ¬ #$pkg-config -version #æŸ¥çœ‹æ˜¯å¦å®‰è£…äº†gtk #pkg-config --list-all | grep gtk  è¿™ä¸ªæµç¨‹åšå®Œäº†ï¼Œå°±å¯ä»¥è¿›è¡Œgtkæµ‹è¯•,å½“ç„¶ä»…ä»…æ˜¯cè¯­è¨€çš„æµ‹è¯•\næµ‹è¯•æ–‡ä»¶ //Helloworld.c #include \u0026lt;gtk/gtk.h\u0026gt; int main(int argc,char *argv[]) { GtkWidget *window; GtkWidget *label; gtk_init(\u0026amp;argc,\u0026amp;argv); /* create the main, top level, window */ window = gtk_window_new(GTK_WINDOW_TOPLEVEL); /* give it the title */ gtk_window_set_title(GTK_WINDOW(window),\u0026quot;Hello World\u0026quot;); /* connect the destroy signal of the window to gtk_main_quit * when the window is about to be destroyed we get a notification and * stop the main GTK+ loop */ g_signal_connect(window,\u0026quot;destroy\u0026quot;,G_CALLBACK(gtk_main_quit),NULL); /* create the \u0026quot;Hello, World\u0026quot; label */ label = gtk_label_new(\u0026quot;GTKå¯ä»¥è¿è¡Œäº†ï¼\u0026quot;); /* and insert it into the main window */ gtk_container_add(GTK_CONTAINER(window),label); /* make sure that everything, window and label, are visible */ gtk_widget_show_all(window); /* start the main loop, and let it rest until the application is closed */ gtk_main(); return 0; }  ç¼–è¯‘ gcc -o Helloworld Helloworld.c `pkg-config --cflags --libs gtk+-3.0`  è¿è¡Œ ./Helloworld  å¦‚æœä½ å¾—åˆ°ä¸€ä¸ªå°çª—å£\u0026rdquo;GTKå¯ä»¥è¿è¡Œäº†\u0026rdquo; è¯æ˜ä½ çš„gtkç¯å¢ƒæ˜¯æ­£ç¡®çš„ã€‚\nç„¶åæˆ‘ä»¬å¼€å§‹è¿›ä¸€æ­¥é…ç½®gtk-fortran\n ä¸‹è½½ https://github.com/jueqingsizhe66/gtk-fortran ç¼–è¯‘\nmkdir build cd build åœ¨gtk-fortranç›®å½•ä¸‹ï¼š/home/happycamp-of-fortran/gtk-fortran/build cmake .. make make install   ä¼šå¾—åˆ°å¦‚ä¸‹ç»“æœ:\nInstall the project... -- Install configuration: \u0026quot;release\u0026quot; -- Installing: /usr/local/lib/libgtk-2-fortran.a -- Installing: /usr/local/lib/libgtk-2-fortran.so.0.1 -- Installing: /usr/local/lib/libgtk-2-fortran.so -- Installing: /usr/local/include/gtk-2-fortran/atk.mod -- Installing: /usr/local/include/gtk-2-fortran/cairo.mod -- Installing: /usr/local/include/gtk-2-fortran/gdk.mod -- Installing: /usr/local/include/gtk-2-fortran/gdk_pixbuf.mod -- Installing: /usr/local/include/gtk-2-fortran/g.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl_container.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl_button.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl_entry.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl_tree.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl_menu.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl_combobox.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl_spin_slider.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl_chooser.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl_dialog.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl_progress.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl_accelerator.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl_infobar.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl_assistant.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_hl_misc.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_draw_hl.mod -- Installing: /usr/local/include/gtk-2-fortran/gdk_pixbuf_hl.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_sup.mod -- Installing: /usr/local/include/gtk-2-fortran/pango.mod -- Installing: /usr/local/include/gtk-2-fortran/gdk_events.mod -- Installing: /usr/local/include/gtk-2-fortran/gtk_os_dependent.mod -- Installing: /usr/local/bin/gtk-2-fortran-modscan -- Installing: /usr/local/share/gtk-fortran/gtk-2-fortran-index.csv -- Installing: /usr/local/share/gtk-fortran/gtk-2-enumerators.lis -- Installing: /usr/local/lib/pkgconfig/gtk-2-fortran.pc -- Installing: /usr/local/share/man/man1/gtk-2-fortran-modscan.1  3: æµ‹è¯•è½¯ä»¶ ç„¶åä½ å°±ä¼šå‘ç° cd åˆ° /home/happycamp-of-fortran/gtk-fortran/examples ç„¶å\nroot at javazhao-N53SM \u001b[19:27:20Ã¤ï¿½ï¿½åˆ] in /home/happycamp-of-fortran/gtk-fortran/examples on git:master? $ gfortran gtkhello2.f90 -o gtkhello2 `pkg-config --cflags --libs gtk-2-fortran` å°±å¯ä»¥äº†. ä¸€å®šè®°ä½åŠ å…¥çš„æ˜¯gtk-2-fortran è¿™ä¸ªåº“ã€‚è€Œä¸æ˜¯gtk+-2.0æˆ–è€…gtk+-3.0,è¿™ä¸¤ä¸ªåº“æ˜¯é’ˆå¯¹cè¯­è¨€çš„ã€‚ $ ./gtkhello2 ","date":1432026205,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1432026205,"objectID":"dba3c92b64f70f1cf01c382eadc2d50c","permalink":"/blog/2015/05/19/ubuntu-gtk-fortran/","publishdate":"2015-05-19T17:03:25+08:00","relpermalink":"/blog/2015/05/19/ubuntu-gtk-fortran/","section":"archives","summary":"Fortranï¼šä¸€é—¨å¤è€çš„è®¡ç®—æœºæ•°å€¼ç§‘å­¦è®¡ç®—è¯­è¨€,1950.\nFortrançš„å¼ºé¡¹å°±æ˜¯æ•°å€¼è®¡ç®—ï¼Œå›¾å½¢ç¼–ç¨‹æ˜¯ä¸€ä¸ªé¸¡è‚‹æ‰€åœ¨ï¼Œä½†æ˜¯æœ‰æ—¶å€™åˆéœ€è¦åšä¸€äº›å›¾å½¢çš„å±•ç¤ºï¼Œå€ŸåŠ©äºGTK+ projectå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬è¾¾åˆ°ç›®çš„.\nGTKæ˜¯cè¯­è¨€ç¼–å†™çš„æºç¨‹åºï¼Œè¿ç”¨åˆ°fortranéœ€è¦ç›¸åº”çš„åº“è½¬æ¢,åœ¨githubä¸Šæ‰¾åˆ°ä¸€ä¸ªgtk-fortranåº“.ä¸‹é¢æ˜¯ubuntuä¸Šé¢çš„æ­å»ºè¿‡ç¨‹(windows æœªå®ç°,å¯ä»¥å‚è€ƒ gtk+makefile)\n","tags":null,"title":"Ubuntu gtk-fortran","type":"archives"},{"authors":null,"categories":["Haskell"],"content":"Haskell vimå¯ä»¥é€šè¿‡vimbar å®‰è£…åˆ°vimä¸­ã€‚vimballæ˜¯ä¸€ä¸ªvimæ’ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¸®ä½ å®‰è£…vbaæ ¼å¼çš„æ’ä»¶ã€‚\nç›´æ¥ç”¨vimæ‰“å¼€vbaæ ¼å¼çš„æ–‡ä»¶ï¼Œè¾“å…¥:so %å³å¯å®‰è£…ï¼Œç„¶å:qé€€å‡ºã€‚\nåˆ é™¤æ’ä»¶ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œç›´æ¥åœ¨vimé‡Œè¾“å…¥:RmVimball æ’ä»¶å\nä¸ç”¨å®‰è£…vimBall(vim7.3ä¹‹å è‡ªå¸¦)\næ–¹æ³•1ï¼šHaskell vimmodeå®‰è£…æ–‡ä»¶ä¸‹è½½\næ–¹æ³•2ï¼šä½¿ç”¨bundles\nBundle 'https://github.com/jueqingsizhe66/haskellmode-vim'  å®‰è£…è¯´æ˜ 1. vim vbafiles 2. :so %; 3. configure vimrc\néƒ½éœ€è¦é…ç½®docdirå’Œbrowserï¼Œdocå¦‚æœæ²¡æœ‰å»windowsåº•ä¸‹çš„haskell phamtomæ‹·è´ä¸€ä»½\nwindows:\nlet g:haddock_browser=\u0026quot;E:\\Program\\ Files\\Mozilla Firefox\\firefox.exe\u0026quot; let g:haddock_docdir=\u0026quot;C:\\Program\\ Files\\Haskell\\ Platform\\2014.2.0.0\\doc\\html\u0026quot;  ubuntu :\nlet g:haddock_browser=\u0026quot;/usr/bin/opera\u0026quot; let g:haddock_docdir=\u0026quot;/home/happycamp-of-lisp/doc\u0026quot;  æœ€åå»ºè®®è¿˜æ˜¯emacsæ¼‚äº®ä¸€äº›ï¼\n","date":1431929077,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431929077,"objectID":"576cebabce7f0499c24f14fae94a8d20","permalink":"/blog/2015/05/18/vim-haskell/","publishdate":"2015-05-18T14:04:37+08:00","relpermalink":"/blog/2015/05/18/vim-haskell/","section":"archives","summary":"Haskell vimå¯ä»¥é€šè¿‡vimbar å®‰è£…åˆ°vimä¸­ã€‚vimballæ˜¯ä¸€ä¸ªvimæ’ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¸®ä½ å®‰è£…vbaæ ¼å¼çš„æ’ä»¶ã€‚\n","tags":null,"title":"vim-haskell","type":"archives"},{"authors":null,"categories":["scheme"],"content":"è¿™éƒ¨åˆ†å†…å®¹æ˜¯æˆ‘ç»ƒä¹ TLSå’ŒTSSçš„å…¨éƒ¨å­¦ä¹ èµ„æ–™ï¼Œé‡Œé¢æœ‰è¯¦ç»†çš„è®°å½•å’Œä¸€äº›å¿ƒè·¯å†ç¨‹ï¼Œä»¥åæ…¢æ…¢ä¿®æ”¹ã€‚ æ€»è¡Œæ•°5800å·¦å³ã€‚\n#lang racket ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;; I will introuduce The little scheme From the angles below ;;; 1: ;;; why introuduce the concept ;;; 2: ;;; The main knowledge ;;; 3: ;;; Map-reduce ;;; ....... ;;; 4: How you describe the function works in your own words? ;;; 5: How do you determine the output when you apply a function?Is it what you want? ;;; no? why no? ;;;;Namely, Can you write down the definition of the function member? and its arguments ;;; and refer to them as you go through the next group of questions???? ;; Do not rush through this book! Read carefully ;;; From the introuduction chapter ;;; else implicit said that if the condition is wrong do it recurly ;;; also infer that after the recuring ,please go back to home along the Original road! ;;; COns 's function: save the buffer to the stack ;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;;;;;;;;;;;;;;;;The first part;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;; ;;; The Basic operator ;;; The primitive variables of scheme :: car ,cdr(is pronounced as \u0026quot;could_er\u0026quot;,cons, null? zero? ;;; eq?(compare two non-numericas atoms), ;;; or (or asks two questions,one at a time. If the first one is true ;;; .Otherwise it asks the second question and answers with whatever the ;;; second question answers) ;;; numbers,add1,sub1 ;;; COns 's function: save the buffer to the stack (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) ;;;; New added after myracet1.rkt ;;; I want to find ( a h fd fs) but not ( a h (fd s) fs),so I want to create the lat? ;;; can you describe what the function lat? does in your own words? ***************** ;;; lat? looks at each S-expression in a list ,in turn,and asks if each S-expression ;;; is an atom ,untill it runs out of S-expression. If it runs out without encountering ;;; a list,the value is #f. If it finds a list,the value is #f,false ;;; What is the meaning of the question *else* ?? ;;; *else* asks if else if true ;;; is *else* true? Yes,because the question else is always true! ;;; so what is (else #f) means? ----\u0026gt; as if else is true,If else is true--as it always is ;;; else implicit said that if the condition is wrong do it recurly ;;; also infer that after the recuring ,please go back to home along the Original road! ;;; ;;; --then the answer if #f ---false ;;; In a word: else is a question whose value is always (implicit) (define lat? (lambda (l) (cond ((null? l) #t) ((atom? (car l)) (lat? (cdr l))) (else #f)))) ;;;; New added after myracet1.rkt ;;; (define \u0026gt; (lambda (n m) (cond ((zero? n) #f) ((zero? m) #t) (else (\u0026gt; (sub1 n) (sub1 m)))))) ;;; What is the maning of (\u0026gt; (sub1 n) (sub1 m)) ;;; Recur, but with both arguments reduced by one (define dd (lambda (n m) (cond ((zero? n) #f) ((zero? m) #t) (else (\u0026gt; (sub1 n) (sub1 m)))))) ;;; Can you describe what leftmost does? ;;; Here is our description: ;;; \u0026quot;The function leftmost finds the leftmost atom in a non-empty list of S-expressions that does not ;;; contain the empty list\u0026quot; ;;; ;;; Is left a *-function? ;;; It works on lists of S-expressions,but it only recurs on the car(so no) ;;; ;;; Does leftmost need to ask questions about all three possible cases? ;;; No,it only needs to ask two questions,We agreed that leftmost works on non-empty ;;; list that don't contain empty list ;;; ;;; So in a word,the two discussed before,1:recur in car(not together with cdr) 2:2 questions ,not 3 questions which S-expressions ;;; ;;; ;;; Do you remember what (or ...) does? ;;; (or as questions one at a time until it finds one that is true.Then (or ...) stops,making its value true. ;;; If it cannot find a true argument,the value of (or...) is false ;;; ;;; After so many illustration ,can you put in your own words what (and ....) does ;;; We put in our words:(lispers' words) ;;; \u0026quot;(and ...) ask questions one at a time until it finds one whose value is false.Then (and ...) stops with false. ;;; If none of the expressions are false,(and ...) is true.\u0026quot; ;;; ;;; Both (and ...) and (or ...) can be expressed as abbreviations of (cond ...)-expressions: ;;; (and a b) == (cond a b) (else #f)) ;;; (or a b) == (cond (a #t) (else b)) (define leftmost (lambda (l) (cond ((atom? (car l)) (car l)) (else (leftmost(car l)))))) (define rember (lambda (a lat) (cond ((null? lat) (quote())) (else (cond ((eq? (car lat) a) (cdr lat)) (else (cons (car lat) (rember a (cdr lat))))))))) ;;; Can you write number? which is true if its argument is a numerica atom and false if it is anything else ;;; No:number? like add1,sub1,zero?,car , cdr, cons,null?, eq?,and atom? is a primitive function ;;; ;;; Can you write a function no-nums which gives as a final value a lat obtained by removing all the ;;; numbers from the lat. ;;; Remember to use = for numbers ;;; eq? for all other atoms(non-numericas atoms) ;;; eqan? contains two part to compare the two atoms: 1 a number 2:an atom ;;; Can you assume that all funtions written using eq? can be generalized by replacing eq? ;;; By eqan? ------------------Yes,excpet,of course ,for eqan? itself (define eqan? (lambda (a1 a2) (cond ((and (number? a1) (number? a2)) (= a1 a2)) ((or (number? a1) (number? a2)) #f) (else (eq? a1 a2))))) ;;;after the introuction of (and (or define leftmost ;;; What is eqlist? ;;; ;;; It is a function that determines if two lists are equals ;;; ;;; How many questions will eqlist? have to ask about it arguments? ;;; Nine --------------------------------------------------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;The first time so many questions! ;;; ;;; Can you explain why there are nine questions? ;;; Here are out words: ;;; \u0026quot;Each arguments may be either ;;; ----empty ;;; ----an atom consed onto a list,or ;;; ----a list consed onto a list ;;; For example,at the same time as the first argument may be the empty list,the ;;; seconds argument could be the empty list or have an atom or a list in the car position.\u0026quot; ;;; ;;; Is it okay to asK (atom? (car l2)) in the second question? ;;; Yes ,because we know that the second list cannot be empty.otherwise the first question would have been true. ;;; ;;; And why is the third question (null? l1)??? ;;; At that point ,we know that when the firs argument is empty,the second argument is neither empty list ;;; nor a list with an atom as the first element .If(null? l1) is true now,the second argument must be a list whose first element ;;; is also a list. ;;; ;;; Does this mean the questions (and (null? l1) (null? l2)) and (or (null? l1) (null? l2)) ;;; suffice to determine the answer in the first three cases? ;;; Yes .If the first question is true,eqlist? respoinse with #t; otherwise ,the answer if #f (define eqlist? (lambda (l1 l2) (cond ((and (null? l1) (null? l2)) #t) ((and (null? l1) (atom? (car l2))) #f) ((null? l1) #f) ((and (atom? (car l1)) (null? l2)) #f) ((and (atom? (car l1)) (atom? (car l2))) (and (eqan? (car l1) (car l2)) (eqlist? (cdr l1) (cdr l2)))) ((atom? (car l1)) #f) ((null? l2) #f) ((atom? (car l2)) #f) (else (and (eqlist? (car l1) (car l2)) (eqlist? (cdr l1) (cdr l2))))))) (define eqlist1? (lambda (l1 l2) (cond ((and (null? l1) (null? l2)) #t) ((or (null? l1) (null? l2)) #f) ((and (atom? (car l1)) (atom? (car l2))) (and (eqan? (car l1) (car l2)) (eqlist1? (cdr l1) (cdr l2)))) ((or (atom? (car l1)) (atom? (car l2))) #f) (else (and (eqlist1? (car l1) (car l2)) (eqlist1? (cdr l1) (cdr l2))))))) ;;; So What is an S-expresssion? ;;; An S-expression is either an atom or a (possibly empty) list of S-expressions. ;;; ;;; How many questions does equal? ask to determine whether two S-empty are the same? ;;; Four. The first argument may be an atom or a list of S-expressions at the same time as the second argument may be ;;; an atom or a list of S-expressions. ;;; can we summarize the second questions and the third question of the equal? ;;; as (or (atom? s1) (atom? s2)) ;;; Yes, we can (define equal? (lambda (s1 s2) (cond ((and (atom? s1) (atom? s2)) (eqan? s1 s2)) ((atom? s1) #f) ((atom? s2) #f) (else (eqlist? s1 s2))))) (define equal1? (lambda (s1 s2) (cond ((and (atom? s1) (atom? s2)) (eqan? s1 s2)) ((or (atom? s1) (atom? s1)) #f) (else (eqlist? s1 s2))))) ;;; The sixth chapter: ;;; Is 1,3,1+3,1+3*4,cookie,3^y_5 all arithmetic expression? Yes ,of course ;;; ;;; What is an arithmetic expression? in your words? ;;; In ours: ;;; \u0026quot;For the purpose of this chapter,an arithmetic expression is either an atom ;;; (including numbers),or two arithmetic expressions combined by +,-,*,/,or expr. ;;; ;;; Is (n+3) an arithmetic expression? ;;; Not really,since there are parentheses around n+3, our definition of arithmetic ;;; expression does not mention parentheses.... ;;; ;;; Could we think of (n+3) as an arithmetic expression? ;;; Yes if we keep in mind that the parentheses are not really there (the empire's new clothes) ;;; ;;; What would you call (n+3) ;;; we call it a representation for n+3 ;;; why is (n+3) a good representation? ;;; Because ;;; 1. (n+3) is an S-expression. ;;; It can therefore serve as an argument for a function ;;; 2.It stucturally resembles n+3 ;;; ;;; True or false: (numbered? x) True while x is 1 ;;; ;;; How do you represent 3+4*5 ? ------\u0026gt; (3+4*5) ;;; ;;; What is numbered? ;;; It is a function that determines whether a representation? of an arithmetic expression ;;; contains only number besides the +,* and expr ;;; ;;; Now you can write a skeleton for numbered? ;;; (define numbered? ;;; (lambda (axep) ;;; (cond ;;; (_________ _________) ;;; (_________ _________) ;;; (_________ _________) ;;; (_________ _________)))) ;;; ;;; What is the first question? --------------(atom? axep) ;;; What is (eq? (car (cdr aexp)) (quote +)) ------It is the second question ;;; can you guess the third one (eq? (car (cdr aexp)) (quote *)) ;;; And you must know the fourth one. (eq? (car (cdr aexp)) (quote )e) ;;; ;;; why do we ask four,instead of two, ;;; questions about the arithmetic expressions? ;;; after all,arithmetic expressions like (1+3) are lats ;;; ;;; ------------------------------Because we consider (1+3) as a representation of an arithmetic expression in ;;; list form,not as a list itself.And,an arithmetic expression is either a number,or two arithmetic expressions combined ;;; by + ,*,expr. ;;; (define numbered? (lambda (aexp) (cond ((atom? aexp) (number? aexp)) ((eq? (car (cdr aexp)) (quote +)) ...) ((eq? (car (cdr aexp)) (quote +)) ...) ((eq? (car (cdr aexp)) (quote +)) ...)))) (define numbered1? (lambda (aexp) (cond ((atom? aexp) (number? aexp)) ((eq? (car (cdr aexp)) (quote +)) (and (numbered? (car aexp)) (numbered? (car (cdr (cdr aexp)))))) ((eq? (car (cdr aexp)) (quote +)) (and (numbered? (car aexp)) (numbered? (car (cdr (cdr aexp)))))) ((eq? (car (cdr aexp)) (quote +)) (and (numbered? (car aexp)) (numbered? (car (cdr (cdr aexp))))))))) ;;; Since aexp was already understood to be an arithmetic expression,could we have written numbered? in a simpler way? (defin numbered2? (lambda (aexp) (cond ((atom? aexp) (number? aexp)) (else (and (numbered2? (car aexp)) (numbered2? (car (cdr (cdr aexp)))))))))) ;;; why can we simplify ??- ;;; because we know we've got the function right! ;;; We want to value the arithmetic expressions? ------------------ ;;; ;;; THe seventh commandments!! ;;; ;;; Recur on the subparts that are of the same nature: ;;; On the sublists of a list ;;; on the subexpressions of an arithmetic expression ;;; ;;; To (3 + 4) 's value (define value (lambda (nexp) (cond ((atom? nexp) nexp) ((eq? (car (cdr nexp)) (quote +)) (+ (value (car nexp)) (value (car (cdr (cdr nexp)))))) ((eq? (car (cdr nexp)) (quote *)) (+ (value (car nexp)) (value (car (cdr (cdr nexp)))))) (else (expr (value (car nexp)) (value (car (cdr (cdr nexp))))))))) ;;; Can you think of a different representation of arithmetic expressions? ;;; There are several of thme ;;; ;;; (3 4 +) ;;; (+ 3 4) ;;; (plus 3 4) ;;; (+ (* 3 6) (expr 8 2)) ;;; TO value (+ 3 4) (define value1 (lambda (nexp) (cond ((atom? nexp) nexp) ((eq? (car nexp) (quote +)) (+ (value1 (car (cdr nexp))) (value1 (car (cdr (cdr nexp)))))) ((eq? (car nexp) (quote *)) (+ (value1 (car (cdr nexp))) (value1 (car (cdr (cdr nexp)))))) (else (expr (value1 (car nexp)) (value1 (car (cdr (cdr nexp))))))))) ;;;(1 2) is not a arithmetic expressions ,so we violated The Seventh Commandments. (1 3) is not a subpart that is ;;; representation of an arithmetic expression! We obviosuly recurred on a list.But,remember,not alll lists are representations ;;; of arithmetic expressions. We have to recur subexpressions. ;;; (3) is the (cdr (cdr nexp)) ,but (3) is not an arithmetic expressions,because there are no parentheses in our ;;; definition of the arithmetic expressions. (define 1st-sub-exp (lambda (aexp) (cond (else (car (cdr aexp)))))) ;;; why do we ask else, ;;; because the first question is also the last question ;;; ;;; Can we get by without (cons. ..) if we don't need to ask questions? ;;; Yes remember one-liners from chapter4 ;;; (define 1st-sub-exp1 (lambda (aexp) (car (cdr aexp)))) (define 2nd-sub-exp (lambda (aexp) (cond (else (car (cdr (cdr aexp))))))) (define operator (lambda (aexp) (car aexp))) (define value2 (lambda (nexp) (cond ((atom? nexp) nexp) ((eq? (operator nexp) (quote +)) (+ (value (1st-sub-exp1 nexp)) (value (2nd-sub-exp nexp)))) ((eq? (operator nexp) (quote +)) (* (value (1st-sub-exp1 nexp)) (value (2nd-sub-exp nexp)))) (else (expr (value (1st-sub-exp1 nexp)) (value (2nd-sub-exp nexp))))))) ;;; so it we chang the (define operator ) and (1st-sub-exp1) exchangeabley ,the different form of arithmetic expressioned. ;;; ******************************************************************************** ;;; The Eighth Commandments: ;;; Use help functions to abstract from representation ;;; ******************************************************************************** ;;; ;;; ;;; ;;; Have we seen representation? before ;;; Yes ,we just did not tell you that were representations. ;;; For what entities have we used representations? ;;; Truth-values! Numbers! ;;; Numbers are representations? ;;; Yes ,for example 4 stands for the concpet four. we close the symbol because ;;; we are accustomed to arabic representation. ;;; What else could we have used? ;;; (() () () ()) would have serve just as well ;;; what about (((((((())))))))? How about (I V)\u0026quot; ;;; Do you know how many primitives we need for numbers? ;;; Four: number? ,zero?, add1,and sub1-------------------------------------------\u0026lt; ;;; ****Do You know how many primitives we need for list? ;;; Four: atom? null? car cdr ;;; Let's try anouther representation for numbers. How shall we represent zero now/ ;;; () is our choice ;;; How is one represented? ;;; (()) ;;; ;;; How is two represented? ;;; (() () ) ;;; Got it,What's Three? ;;; (() () ()) ;;; So now write thefunction to test zero (define sero? (lambda (n) (null? n))) ;;; write a function that is like add1 (define edd1 (lambda (n) (cons (quote ()) n))) ;;;what about sub1 (define zub1 (lambda (n) (cdr n))) ;;; so we can rewrite + (define plus (lambda (n m) (cond ((sero? m) n) (else (edd1 (+ n (zub1 m))))))) ;;; but what's lat????t ;;;(define lat? ;;; (lambda (l) ;;; (cond ;;; ((null? l) #t) ;;; ((atom? (car l)) (lat? (cdr l))) ;;; (else #f)))) ;;; So (lat? (1 2 3)) why did you ask??? but now (lat? ((()) (()()) (()()()))) It is very false,!!! ;;; So you must beware of shadows!!!bugs implicit!! ;;; ;;; Why dow we ask (number? aexp) when we know that aexp is an atom? ;;; Because we want to know if all arithmetic expressions that are atoms are numbers ;;; Does equal1? ask enough questions? --The first commandments!! ;;; Yes,The questions cover all four possible cases ;; Now rewrite the eqlist? using equal??? --------------equal? is the most common ,which S-expression as the arguments (define eqlist1? (lambda (l1 l2) (cond ((and (null? l1) (null? l2)) #t) ((or (null? l1) (null? l2)) #f) (else (and (equal? (car l1) (car l2)) (eqlist? (cdr l1) (cdr l2))))))) ;;;; THe sixth Commandments ;;; Simplify only after the function is correct. ---------------------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; ;;;; Can you describe what (rember1 a lat) do? ;;; It takes an atom and a lat as its *arguments*,and makes a new *lat* ;;; with the *first* occurrence of the atom in the old lat removed ;;; ;;; How do we(lispers,implicitly) ask questions? ;;; By using ;;; (cond ;;; (__________ ____________) ;;; (__________ ____________) ;;; (__________ ____________) ;;; ... ;;; (__________ ____________)). ;;; How do we remove the first occurrence of a in the rest of lat? ;;; (rember a (cdr lat)) ;;; ;;; ;;; Write down the function rember and its arguments, and refer to them as you go ;;; through the next sequence of questions(the unit test) ;;; In our words: ;;; \u0026quot;The function rember checked each atom of the lat , one at a time, ;;; to see if it was the same as the atom 'and'.If the car was not the ;;; same as the atom, we saved it to be consed to the final value later. ;;; when rember found the atom 'and',it dropped it ,and consed the previous ;;; atoms back onto the rest of the lat ;;; ---------------------------------cons -------------------------------------- (define rember (lambda (a lat) (cond ((null? lat) (quote ())) (else cond ((eq? (car lat) a) (cdr lat)) (else (cons (car lat) (rember a (cdr lat)))))))) ;;; Can you rewrite rember so that it reflects the abouve description ;;; (define rembersimple (lambda (a lat) (cond ((null? lat) (quote ())) ((eq? (car lat) a) (cdr lat)) (else (cons (car lat) (rember a (cdr lat))))))) ;;;; What is the meaning of the (cons (car lat) (rember a (cdr lat))) ;;; ;;; This says to refer to the funciton rember but with the ;;; argument lat replaced by (cdr lat) and that after we arrive at a value for ;;; (rember a (cdr lat)) we must cons (car lat) --bacon --onto it ;;; ;;; This also says we recur using the function rember, with the argument lat ;;; replaced by (cdr lat),and that after we arrive at a value for (rember a (cdr lat)) ;;; we must cons (car lat)---lettuce --onto it ;;; ;;; ;;; Here is rember1 after we replace lat by a list l of S-expression (define rember1 (lambda (s l) (cond ((null? l) (quote())) ((atom? (car l)) (cond ((equal? (car l) s) (cdr l)) (else (cons (car l) (rember1 s (cdr l)))))) (else (cond ((equal? (car l) s) (cdr l )) (else (cons (car l) (rember1 s (cdr l))))))))) ;;; And how does that differ? ;;; The funciton rember now removes the first matching S-expression s in l, ;;; instead of the first matching atom a in lat. ;;; Is rember a \u0026quot;star\u0026quot; function now? ;;; NO. ;;; Why not? ;;; because rember recurs with the cdr of l only (not togeterh with the car of l ,,correspoding to (define leftmost) ;;;; can we simplify rember1 ? (define rember2 (lambda (s l) (cond ((null? l) (quote())) (else (cond ((equal? (car l) s) (cdr l)) (else (cons (car l) (rember2 s (cdr l)0)))))))) ;;; Can rember2 be further simplified???????????????????????? ;;; Yes,the inner(cond...) asks questions that the outer(cond...) could ask1 (define rember3 (lambda (s l) (cond ((null? l) (quote ())) ((equal? (car l) s) (cdr l)) (else (cons (car l) (rember3 s (cdr l))))))) ;;; \u0026quot;...*\u0026quot; makes us think \u0026quot;oh my gawd\u0026quot; (define rember* (lambda (a l) (cond ((null? l ) (quote ())) ((atom? (car l)) (cond ((eq? (car l) a) (rember* a (cdr l))) (else (cons (car l) (rember* a (cdr l)))))) (else (cons (rember* a (car l)) (rember* a (cdr l))))))) ;; Notice that now we are recurring down the car of the list,instead of just the cdr of the list (define insertL (lambda (new old lat) (cond ((null? lat) (quote ())) (else (cond ((eq? (car lat) old) (cons new (cons old (cdr lat)))) (else (cons (car lat) (insertL new old (cdr lat))))))))) ;;;; after ------------------------------------\u0026lt;the (define firsts ;;;In your own words, what does (insertR new old lat) do? ;;; In our words: ;;; \u0026quot;It takes three arguments: the atoms new and old,and lat. ;;; The function insertR builds a lat with new inserted to the ;;; right of the *first* occurence of old ;;; ;;; ;;; Which arguments changes when we recur with insertR? ;;; lat, because we can only look at one of its atoms at a time. ;;; ;;; Which questions do we ask? ;;; First, we ask (null? lat) .Second we ask else,because else is ;;; always the last question. ;;; Which questions do we ask about the first elements?????? Still rember the typical element ;;; in the (define firsts) ;;; ;;; First,we ask (eq? (car lat) old ) .Then we ask else,because there are no other interesting cases ;;; ;;; COns 's function: save the buffer to the stack ;;; ;;; I want to write an procedure: which sort the list afterwards? ;;; So I want the change the function' return value????????????????????????? ;;; What I should do?? (define insertR (lambda (new old lat) (cond ((null? lat) (quote ())) (else (cond ((eq? (car lat) old) (cons old (cons new (cdr lat)))) (else (cons (car lat) (insertR new old (cdr lat))))))))) ;;;; after the (define makeset1) (define subset (lambda (new old lat) (cond ((null? lat) (quote ())) (else (cond ((eq? (car lat) old) (cons new (cdr lat))) (else (cons (car lat) (subset new old (cdr lat))))))))) (define subset2 (lambda (new o1 o2 lat) (cond ((null? lat) (quote ())) (else (cond ((eq? (car lat) o1) (cons new (cdr lat))) ((eq? (car lat) o2) (cons new (cdr lat))) (else (cons (car lat) (subset2 new o1 o2 (cdr lat))))))))) (define rember5 (lambda (a lat) (cond ((null? lat) (quote ())) ((eq? (car lat) a) (cdr lat)) (else (cons (car lat) (rember5 a (cdr lat))))))) (define factorial (lambda (x) (if (\u0026lt;= x 1) 1 (* x (factorial (- x 1)))))) ;;;; after rember ---------------------------------------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; ;;; In your own words , what does (firsts l) do ;;; We tried the following: ;;; \u0026quot;The function firsts takes one argument, a list,which is either ;;; a null list or contains only non-empty lists. It builds another list ;;; composed of the first S-expression(atom or list or pair) of each internal list ;;; ;;; REMEMBER THe Commandments ;;; ;;; Why (define firsts ;;; (lambda (l) ;;; ...) Because we always state the function name,(lambda,and the ;;; argument(s) of the function ;;; Why (cond ...) ;;; Because we need to ask questions about the actual arguments ;;; Why ((null? l) ...) ;;; The first Commandments ;;; Why (else ;;; Because we only have two equstions to ask about the list l: ;;; either It is the null list, ;;; or it contains at least one non-empty list. ;;; And Because the last question is always else ;;; Why (cons ;;; Because we are building a lsit -----The second commandments ;;; ;;; Why (firsts (cdr l)) ;;; Because we can only look at one S-expression at at time . ;;; To look at the rest,we must recur ;;; why ))) ;;; Because these are the matching parentheses for (cond, (lambda, ;;; and (define, and they always appear at the end of a function ;;; definition ;;; ;;; When we find a typical element of (firsts l) ;;; what do we do with it? ;;; --cons it onto the recursion --(firsts (cdr l)) ;;; ;;; ;;; The third commandments : ;;; When building a list, describe the first typical element,and then cons it onto the natural recursion ;;; So What is the first typical element? ;;; -----------------------\u0026gt; In the (define firsts The typical element is (car (car l)) ;;; What is the natural recursion? ;;; -----------------------\u0026gt; (firsts (cdr l)) ;;; ;;; ;;; ****************************we are still missing one important ingredient in our recipe! ;;; ;;; ;;; So what is the meaning of (cons (car (car l)) (firsts (cdr l))) ;;; Save (car (car l)) ,and recur with (firsts (cdr l)) (define firsts (lambda (l) (cond ((null? l) (quote ())) (else (cons (car (car l)) (firsts (cdr l))))))) (define multirember (lambda (a lat) (cond ((null? lat) (quote ())) (else (cond ((eq? (car lat) a) (multirember a (cdr lat))) (else (cons (car lat) (multirember a (cdr lat))))))))) ;;; What is the meaning of (cons (car lat) (multirember a (cdr lat))) ;;; Save (car lat) ---coffee ---- to be consed onto the value of (multirember a (cdr lat)) later ;;; Now determine (multirember a (cdr lat)) ;;; ;;; THe Fourth commandments: ;;; Always change at least one arguments while recuring.It must be changed to be closer to ;;; termination.The changing argument must be tested in the termination condition: ;;; When using cdr, test termination with null?, such as (null? lat) lat is the ;;; changing argument,so it occur in the terminal condition. (define multiinsertR (lambda (new old lat) (cond ((null? lat) (quote ())) (else (cond ((eq? (car lat) old) (cons (car lat) (cons new (multiinsertR new old (cdr lat))))) (else (cons (car lat) (multiinsertR new old (cdr lat))))))))) (define multiinsertL (lambda (new old lat) (cond ((null? lat) (quote ())) (else (cond ((eq? (car lat) old) (cons new (cons (car lat) (multiinsertL new old (cdr lat))))) (else (cons (car lat) (multiinsertL new old (cdr lat))))))))) (define multisubset (lambda (new old lat) (cond ((null? lat) (quote ())) (else (cond ((eq? (car lat) old) (cons new (multisubset new old (cdr lat)))) (else (cons (car lat) (multisubset new old (cdr lat))))))))) (define add1 (lambda (x) (+ x 1))) (define sub1 (lambda (x) (- x 1))) ; (define + ; (lambda (n m) ; (cond ; ((zero? m) n) ; (else (add1 (+ n (sub1 m))))))) ; ; (define - ; (lambda (n m) ; (cond ; ((zero? m) n) ; (else (sub1 (- n (sub1 m))))))) ; ; ; ;;; Can you describe how (- n m) works?? ;;; It takes two numbers as arguments,and reduces the second until it hits zeros. ;;; It subtracts one from the result as many times as it did to cause the second ;;; one to reach zero!!! ;if add the box above the wrong to the expr define ;;; What is the natural terminal condition for a list? ;;; (null? l) ;;; ;;; What is the natural terminal conditon for a tup? ;;; (null? tup) ;;; ;;; When we build a number from a list of numbers, what should the terminal condition line look like? ;;; ((null? tup) 0) ,just as ((null? l) (quote ())) is ofter the terminal conditon line ;;; for lists ;;; So what is the terminal condition line of addtup? ;;; What does addtup do? ;;; It builds a number by totalling all the numbers in its arguments ;;; ;;; ;;; What is used in the natural recursion on a list? ;;; (cdr lat) ;;; ;;; What is used in the natural recursion on a tup? ;;; (cdr tup) ;;; Why? ;;; Because the rest of a non-empty list is a list ;;; The rest of a non-empty tup is a tup ;;; ;;; ;;; How is a number defined? ;;; It is either zero or it is one added to a res, ;;; where rest is again a number ;;; ;;; what is the natural terminal condition for numbers? ;;; (zero? n) ;;; ;;; What is the natural recursion on a number? (sub1 n) (Cdr tup) (cdr l) ;;; (how many questions do we need to ask about a number? ---------------\u0026lt; two ;;; ;;; So The first commandments(revision) ;;; When recurring on a list of atoms,lat, ask two questions about it: (null? lat) and else ;;; When recurring on a number,n ,as two questions about it:(zero? n) and else ;;; ;;; ;;; and What is the terminal condition line of addtup ;;; ((null? tup) 0) ;;; So what is the natural recursion for addtup? ;;; (addtup (cdr tup)) ;;; ;;; what does addtup use to build a number? ;;; It uses + , because + builds numbers, too!!!!!!!!!!!!!!!!!!!!!!!!!!! ;;; ;;; (define addtup (lambda (tup) (cond ((null? tup) 0) (else (+ (car tup) (addtup (cdr tup))))))) ;;(cons (car tup) (addtup (cdr tup))))))) The last line of function rember is the similar to the one in the addtup!!!! ;; ;;;; The fourth commandments(revision) ;;; Always change at least one arguments while recurring. It must be changed to be closer to termination.The changing argument must ;;; be tested in the termination condition: ;;; when using cdr, test termination with null? and ;;; when using sub1, test termination with zero (define expr (lambda (n m) (cond ((zero? m) 1) (else (* n (expr n (sub1 m))))))) (define multiplication (lambda (n m) (cond ((zero? m) 0) (else (+ n (multiplication n (sub1 m))))))) (define divide (lambda ( n m) (cond ((\u0026lt; n m ) 0) (else (add1 (divide (- n m) m)))))) (define pick (lambda (n lat) (cond ((zero? (sub1 n)) (car lat)) (else (pick (sub1 n) (cdr lat)))))) ;;; Can you write number? which is true if its argument is a numerica atom and false if it is anything else ;;; No:number? like add1,sub1,zero?,car , cdr, cons,null?, eq?,and atom? is a primitive function ;;; ;;; Can you write a function no-nums which gives as a final value a lat obtained by removing all the ;;; numbers from the lat. ;;; after (define rempick) --------------------------------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; (define no-nums (lambda (lat) (cond ((null? lat) (quote ())) (else (cond ((number? (car lat)) (no-nums (cdr lat))) (else (cons (car lat) (no-nums (cdr lat))))))))) (define all-nums (lambda (lat) (cond ((null? lat) (quote ())) (else (cond ((number? (car lat)) (cons (car lat) (all-nums (cdr lat)))) (else (all-nums (cdr lat)))))))) ;;;; after the define of eqan? (define eqan?) ;;;what does occur do? ;;; the function occur which counts the number of times an atom a appears in a lat (define occur (lambda (a lat) (cond ((null? lat) 0) (else (cond ((eq? (car lat) a) (add1 (occur a (cdr lat)))) (else (occur a (cdr lat)))))))) (define one? (lambda (n) (cond ((zero? n) #f) (else (zero? (sub1 n)))))) (define one1? (lambda (n) (cond (= n 1) (else #f)))) (define one11? (lambda (n) (= n 1))) ;;; Guess how we can further simplify this function ,maing it a one-liner ;;; By removing the (cond )clause. (define negativeone? (lambda (n) (cond ((zero? n) #f) (else (zero? (add1 n)))))) (define rember* (lambda (a l) (cond ((null? l) (quote ())) ((atom? (car l)) (cond ((eq? (car l) a) (rember* a (cdr l))) (else (cons (car l) (rember* a (cdr l)))))) (else (cons (rember* a (car l)) (rember* a (cdr l))))))) ;;; After rember* (define rember*) -----------------------------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; ;;; How are insertR* and rember* similar? ;;; 0--------------------Each function asks three questions,. Each function recurs on the car ;;; of its argument when it finds out that the argument's car is a list ;;; namely,They both recur with car,whenever the car is alist,as well as with the cdr ;;; ****************************************************************************************************************** ;;; The first commandments(Final version) ;;; When recurring on a list of atoms,lat,ask two questions about it: ;;; (null? lat) and else ;;; When recurring on a number,n ,ask two questions about it: ;;; (zero? n) and else. ;;; When recurring on a list of S-expression,l ,ask three questtion,about it: ;;; (null? l),(atom? (car l)) , and else ;;; ;;; ;;; ****************************************************************************************************************** ;;; How are rember* and multirember different? ;;; The function multirember does not recur with the car. The function rember* recurs with the car when if ;;; finds out that the car is a list ;;; ;;; So how are all *-functions similar? ;;; They all ask three questions and recur with the car as well as with the cdr,whenever the car is a list ;;; Why? ;;; Because all *-functions work on lists that are either ;;; ---empty ;;; ---an atom consed onto a list,or ;;; ---a list consed onto a list ;;; ;;; ****************************************************************************************************************** ;;; ;;; TheFourthe commandments(final version) ;;; Always change at least one argument while recurring. ;;; when recurring on alist of atoms, lat,use (cdr lat. ;;; When recurring on a number,n ,use (sub1 n). And ;;; when recurring on a list of S-expressions,l,use (car l) and (cdr l) if neither (null? l) nor (atom? (car l) are true ;;; ;;; It must be changed to be closer to termination. The changing argument must be tested in the termination condition: ;;; When using cdr, test termination with null? and ;;; When using sub1, test termination with zero? ;;; ****************************************************************************************************************** (define insertR* (lambda (new old l) (cond ((null? l) (quote ())) ((atom? (car l)) (cond ((eq? (car l) old) (cons old (cons new (insertR* new old (cdr l))))) (else (cons (car l) (insertR* new old (cdr l))))) (else cons (insertR* new old (car l)) (insertR* new old (cdr l)))))) ;;; (define insertL* (lambda (new old l) (cond ((null? l) (quote ())) ((atom? (car l)) (cond ((eq? (car l) old) (cons new (cons old (insertR* new old (cdr l))))) (else (cons (car l) (insertL* new old (cdr l))))) (else cons (insertL* new old (car l)) (insertL* new old (cdr l)))))) (define occur* (lambda (a l) (cond ((null? l) 0) ((atom? (car l 0)) (cond ((eq? (car l) a) (add1 (occur* a (cdr l)))) (else (occur* a (cdr l))))) (else (+ (occur* a (car l)) (occur* a (cdr l))))))) ;;;; ;;; I introuduce how the (or (null? l) (atom? a)) works,Then I can go on ;;; introuducing the member ;;; else implicit said that if the condition is wrong do it recurly ;;; also infer that after the recuring ,please go back to home along the Original road! (define member* (lambda (a l) (cond ((null? l) #f) ((atom? (car l)) (or (eq? (car l) a) (member* a (cdr l)))) (else (or (member* a (car l)) (member* a (cdr l))))))) ;;; ;;; The function tells: ;;; (condition return values) ;;; Can you write down the definition of the function member? and its arguments ;;; and refer to them as you go through the next group of questions???? (define member? (lambda (a lat) (cond ((null? lat) #f) (else (or (eq? (car lat) a) (member? a (cdr lat))))))) (define first (lambda (p) (cond (else (car p))))) (define second (lambda (p) (cond (else (car (cdr p)))))) ;;;;Could after (define subset? ) write a function (intersect?) (define intersect? (lambda (set1 set2) (cond ((null? set1) #f) (else (cond ((member? (car set1) set2) #t) (else (intersect? (cdr set1) set2))))))) (define intersect1? (lambda (set1 set2) (cond ((null? set1) #f) ((member? (car set1) set2) #t) (else (intersect1? (cdr set1) set2))))) (define intersect2? (lambda (set1 set2) (cond ((null? set1) #f) (else (or (member? (car set1) set2) (intersect1? (cdr set1) set2)))))) (define intersect (lambda (set1 set2) (cond ((null? set1) (quote ())) ((member? (car set1) set2) (cons (car set1) (intersect (cdr set1) set2))) (else (intersect (cdr set1) set2))))) (define intersect (lambda (set1 set2) (cond ((null? set1) (quote ())) ((member? (car set1) set2) (cons (car set1) (intersect (cdr set1) set2))) (else (intersect (cdr set1) set2))))) ;;;; In our words: It is a function that return s all the atoms ;;;in set1 that are not in the set2,That is ,xxx is the (set) difference functions= (define xxx (lambda (set1 set2) (cond ((null? set1) (quote ())) ((member? (car set1) set2) (xxx (cdr set1) set2))) (else (cons (car set1) (xxx (cdr set1) set2))))) (define instersectall (lambda (l-set) (cond ((null? (cdr l-set)) (car l-set)) (else (interset (car l-set) (intersectall (cdr l-set))))))) (define union (lambda (set1 set2) (cond ((null? set1) set2) ((member? (car set1) set2) (union (cdr set1) set2)) (else (cons (car set1) (union (cdr set1) (set2))))))) (define build (lambda (s1 s2) (cond (else (cons s1 (cons s2 (quote ()))))))) ;;;;;;;;;;;;;;;;;;;;;;;The first part;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;; ;;; ;;;;;;;;;;;;;;;;;;;;;;;The second part;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;; myracet2.rkt ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;; ;;;Can you write a function insert-g that would insert either at the left or at the right!! ;;; ;;;Which pieces differ? ;;; The second lines differ from each other ,In insertL it is: ;;; ((eq? (car l) old) ;;; (cons new (cons old (cdr l)))) ;;; But in the insertR it is: ;;; ((eq? (car l) old) ;;; (cons new (cons old (cdr l)))) ;;; ;;; Put the difference in words! ;;; We say: ;;; \u0026quot;The two functions cons old and new in a different order onto the cdr of the list l ;;; ;;; So how can we get rid of the difference \u0026gt; ;;; You probably guessed it: by passing in a function that expresses tha appropriate consing. (define seqL (lambda (new old l) (cons new (cons old l)))) (define seqR (lambda (new old l) (cons old (cons new l)))) ;;; so you can (insert-g seqL) (insert-g seqR) ;;; (define insertL (insert-g seqL)) ;;; (define insertR (insert-g seqR)) ;;; ;;; (define insert-g (lambda (seq) (lambda (new old l) (cond ((null? l) (quote ())) ((eq? (car l) old) (seq new old (cdr l))) (else (cons (car l) ((insert-g seq) new old (cdr l)))))))) ;;; So we can define insertL again with insert-g *****************************^-^************************************ ;;; Do not pass in seqL this time. (define insertL1 (insert-g (lambda (new old l) (cons new (cons old l))))) ;;;;;; Perfect--- it is a great abstraction! ;;; ;;;Is it better? ;;; Yes,Because youu do not need to remember as many names,you can ;;; (rember func-name \u0026quot;your-mind\u0026quot;) ;;; Where func-name is seqL ;;; ;;; Do you remember the definition of subst ;;; Yes! it looks like insert-L insertR .Just the answer of the second cond-line is differenct (define subst (lambda (new old l) (cond ((null? l) (quote ())) ((eq? (car l) old) (cons new (cdr l))) (else (cons (car l) (subst new old (cdr l))))))) ;subst insertL insertR the common property is else and different ;operator so we can abstract them to the insert-g (define seqS (lambda (new old l) (cons new l))) (define subst1 (insert-g seqS)) (define seqrem (lambda (new old l) l)) (define yyy (lambda (a l) ((insert-g seqrem) #f a l))) ;;;;;What do you yyy is? ;;; Surprise ! It is our old friend rember, ;;; Step through the evaluation of (yyy a l) ;;; where ;;; a is sausage ;;; and l is (pizza with sausage and bacon) ;;; What role does #f paly? ;;; New in the insertL and insertR ,a is old in the insertL and insertR ;;; ;;; ;;; ********************************************************************** ;;; THe ninth commandments: ;;; Abstract the common patterns with a new function. ;;; ;;; ********************************************************************** ;;; ;;;So can you simplify the function (define value1) ;;; Can you write the funciton atom-to-function ;;; which: ;;; 1: Taes one argument x ;;; 2: returns the function + if (eq? x (quote +)) ;;; returns the function * if (eq? x (quote *)) ;;; returns the function expr if (eq? x (quote expr)) ;;; (define atom-to-function (lambda (x) (cond ((eq? x (quote +) +)) ((eq? x (quote *) *)) (else expr)))) ;;;(atom-to-function (operator nexp)) (define value3 (lambda (nexp) ((atom? nexp) nexp) (else ((atom-to-function (operator nexp)) (value3 (1st-sub-exp nexp)) (value3 (2nd-sub-exp nexp)))))) (define multirember (lambda (a lat) (cond ((null? lat) (quote ())) ((eq? (car lat) a) (multirember a (cdr lat))) (else (cons (car lat) (multirember a (cdr lat))))))) (define multirember-f (lambda (test?) (lambda (a lat) (cond ((null? lat) (quote ())) ((test? a (car lat)) ((multirember-f test?) a (cdr lat))) (else (cons (car lat) ((multirember test?) a (cdr lat)))))))) (define multirember-eq? (multirember-f 'eq?)) ;;; After the insturciton os a pair----\u0026gt; (define first (lambda (p) (cond (else (car p))))) (define second (lambda (p) (cond (else (car (cdr p)))))) (define third (lambda (p) (cond (else (car (cdr (cdr p))))))) (define third1 (lambda (l) (car (cdr (cdr l))))) (define build (lambda (s1 s2) (cond (else (cons s1 (cons s2 (quote ()))))))) ;;;; After the (define fun?) ;;; (define revrel (lambda (rel) (cond ((null? rel) (quote ())) (else (cons (build (second (car rel)) (first (car rel))) (revrel (cdr rel))))))) ;; maybe we can abstract the build part,because it's the pair part ;; ;; Now do you see how representabtion aids readability???? ;; second first is the (car (car rel)) second is (car (cdr (car rel) ;; so it can hide the build inverse process ;; ;; Suppose we had the funciton revpair that reversed the two componets of a pair like this: ;; (define revpair;;hide the build process (lambda (pair) (build (second pair) (first pair)))) (define revrel1 (lambda (rel) (cond ((null? rel) (quote ())) (else (cons (revpair (car rel));so it can be hided (revrel1 (cdr rel))))))) (define member? (lambda (a lat) (cond ((null? lat) #f) (else (or (eq? (car lat) a) (member? a (cdr lat))))))) ;;; The 7 chapter ,,after the numbered (define set? (lambda (lat) (cond ((null? lat) #t) (else (cond ((member? (car lat) (cdr lat)) #f ) (else (set? (cdr lat)))))))) ;;; simplify set? -------------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; (define set1? (lambda (lat) (cond ((null? lat) #t) ((member? (car lat) (cdr lat)) #f) (else (set? (cdr lat)))))) ;;; Were you surprised to see the function member? appear in the definition of set? ;;; You should not be,because we have written memeber? already,and now we can ;;; use it whenever we want (define makeset (lambda (lat) (cond ((null? lat) (quote ())) ((member? (car lat) (cdr lat)) (makeset (cdr lat))) (else (cons (car lat) (makeset (cdr lat))))))) (define makeset1 (lambda (lat) (cond ((null? lat) (quote ())) (else (cons (car lat) (makeset (multirember (car lat) (cdr lat)))))))) ;;; Describe in your own words how the second definition of makeset works????? ;;; Here are our words: ;;; \u0026quot;\u0026quot;THe function makeset remembers to cons the first atom in the lat onto the result of the ;;; natural recursion ,after removing all occurences of the first atom from the rest of the lat. ;;; (define subset? (lambda (set1 set2) (cond ((null? set1) #t) (else (cond ((member? (car set1) set2) (subset? (cdr set1) set2)) (else #f)))))) ;;; can you write a shorter version of subset? (define subset1? (lambda (set1 set2) (cond ((null? set1) #t ) ((member? (car set1) set2) (subset? (cdr set1) set2)) (else #f))) ;;; Try to write subset1? with (and ...) (define subset2? (lambda (set1 set2) (cond ((null? set1) #t) (else (and (member? (car set1) set2) (subset? (cdr set1) set2)))))) ;;; equip list ;;; (define eqset? (lambda (set1 set2) (cond ((subset? set1 set2) (subset? set2 set1)) (else #f)))) (define eqset1? (lambda (set1 set2) (cond (else (and (subset? set1 set2) (subset? set2 set1)))))) (define eqset2? (lambda (set1 set2) (and (subset? set1 set2) (subset? set2 set1)))) (define firsts (lambda (rel) (cond ((null? rel) (quote ())) (else (cons (first (car rel)) (firsts (cdr rel))))))) (define seconds (lambda (rel) (cond ((null? rel) (quote ())) (else (cons (second (car rel)) (seconds (cdr rel))))))) ;; one important known : in the (else,things is called recur ;; in the cond's first question is called the end condtion ;; multi and sigle is recognise by the doing's if satisfied the ;; questions! ;; ;; After te define (pair) ;; ;;Is fun? a simple one-liner? It sure is ;; ;;How do we reprensent a finite function? ;; For us(lispers)m ;; a finite function is a list of pairs in which ;; no first element of any pair is the same as any ;; other first element (define fun? (lambda (rel) (set? (firsts rel)))) ; (define fullfun?;;fun is also a relation (lambda (fun);;fullfun is based on the fun (set? (seconds fun)))) ;;fullfun's another name is one-to-one ;;so we can define it another way (define one-to-one? (lambda (fun) (fun? (revrel fun)))) (define expr (lambda (n m) (cond ((zero? m) 1) (else (* n (expr n (- m 1))))))) (define cookies (lambda () (bake (quote (350 degrees)) (quote (12 minitus)) (mix (quote (walnuts 1 cup)) (quote (chocolate-chips 16 ounces)) mix (mix (quote (flour 2 cups)) (quote (oatmeal 2 cups)) (quote (salt .5 teaspoon)) (quote (baking-powder 1 teaspoon)) (quote (baking-soda 1 teaspoon))) (mix (quote (eggs 2 large)) (quote (vanilla 1 teaspoon)) (cream (quote (butter 1 cup)) (quote (sugar 2 cups)))))))) ;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;Y ;;;The Fifth commandments: ;;; When building a value with +, always use 0 for the value of the terminating line,for adding 0 does not change the value of an addiction ;;; When building a value with *, always use 1 for the value of the termination line,for multiplying 1 does not change the value of a multiplication ;;; When building a value with cons, always consider () for the value of the terminating line ;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;Y ;;; ;;; What does (tup+ tup1 tup2) do? ;;; It adds the first number of tup1 to the first number of tup2,then it adds the second number of tup1 to the second number of tup2,etc ;;; building a tup of answers,for tups of the same length ;;; What is the unusal about tup+? ;;; It looks at each element of two tups at the same time,or in other words, it recus on two tups. ;;; ;;; If you recur on one tup how many questions do you have to ask? ;;; two,they are (null? tup) and else ;;; ;;; When recuring on two tups, how many question need to be asked about the tups? ;;; Four: if the first tup is empty or none-empty,and if the second tup is empty or non-emptyy ;;; Do you mean the questions (and (null? tup1) (null? tup2)) (null? tup1) (null? tup2) and else ;;; ;;; But can the first tup be () at the same time as the second is other than (). ;;; No ,because the tups must have the same length ;;; Does this mean (and (null? tup1) (null? tup2)) and else are the only questions we need to ask? ;;; Yes! (define tup+ (lambda (tup1 tup2) (cond ((and (null? tup1) (null? tup2)) (quote ())) (else (cons (+ (car tup1) (car tup2)) (tup+ (cdr tup1) (cdr tup2))))))) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;; Why does the natural recursion include the cdr of bouth arguments? ;;; Because the typical element of the final value use the car of both tups,so now ;;; we are ready to consider the rest of both tups -----------------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;Yes the right logic ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; (define tup++ (lambda (tup1 tup2) (cond ((and (null? tup1) (null? tup2)) (quote ())) ((null? tup1) tup2) ((null? tup2) tup1) (else (cons (+ (car tup1) (car tup2)) (tup++ (cdr tup1) (cdr tup2))))))) ;;;; can you simplify it????????????????????????????//// (define tup+++ (lambda (tup1 tup2) (cond ((null? tup1) tup2) ((null? tup2) tup1) (else (cons (+ (car tup1) (car tup2)) (tup+++ (cdr tup1) (cdr tup2))))))) (define atom-to-function (lambda (x) (cond ((eq? x (quote +)) +) ((eq? x (quote *)) *) ((eq? x (quote ^)) expr) ((eq? x (quote eq?)) eq?) (else -)))) ; (rember-f (atom-to-function 'eq?) 'ff '(dfds gi ff sd)) ; ; In the common lisp: ; L: (funcall test? (car l) a) ,use the funcall when invoking a function argument or a function that has ; not been defuned (define rember-f (lambda (test? a l) (cond ((null? l) (quote ())) (else (cond ((test? (car l) a) (cdr l));;I think here needs atom2function (else (cons (car l) (rember-f test? a (cdr l))))))))) ;;; The short version! (define rember1-f (lambda (test? a l) (cond ((null? l) (quote ())) ((test? (car l) a) (cdr l));;I think here needs atom2function (else (cons (car l) (rember-f test? a (cdr l))))))) ;;; What kind of values can functions return\u0026gt; ;;; Lists and atoms ;;; But in the eye of us ,all the things are the lists and atoms ;;; so we can return all the kind of values ;;; so what about function themselves? Yes ;;; such as (lambda (a l) ...) is a function of two arguments ,a and l! returns the function! ;;; This is calld \u0026quot;Curry-ing\u0026quot; ;;; In the scheme ,Using (define ...)give the preceding function a name, ;;; but in theCL: (define eq?-c (a) (function (lambda (x) (eq x a)))) ;;; while the scheme : (define eq?-c (lambda (a) (lambda (x) (eq? x a)))) (define insertL-f (lambda (test?) (lambda (new old l) (cond (( null? l) (quote ())) ((test? (car l) old) (cons new (cons old (cdr l)))) (else (cons (car l) ((insertL-f test?) new old (cdr l)))))))) (define insertR-f (lambda (test?) (lambda (new old l) (cond (( null? l) (quote ())) ((test? (car l) old) (cons old (cons new (cdr l)))) (else (cons (car l) ((insertR-f test?) new old (cdr l)))))))) ;;The basic principle ;;(name --\u0026gt;(null? ---\u0026gt;(eq? ---\u0026gt;single (cons new (cdr l)) --\u0026gt;(else ;; ---\u0026gt;multi (cons new (name (cdr l)))--\u0026gt;(else ;; ---\u0026gt;(eqan? ---\u0026gt;single (cons new (cdr l)) --\u0026gt;(else ;; ---\u0026gt;multi (cons new (name (cdr l)))--\u0026gt;(else ;; ---\u0026gt;(equal? ---\u0026gt;single (cons new (cdr l)) --\u0026gt;(else ;; ---\u0026gt;multi (cons new (name (cdr l)))--\u0026gt;(else ;; ---\u0026gt;(eqlist? ---\u0026gt;single (cons new (cdr l)) --\u0026gt;(else ;; ---\u0026gt;multi (cons new (name (cdr l)))--\u0026gt;(else ;;sometimes we abstuct the condition to adapt to different state ;; sometimes we abstuct the operations to simplify it (define multirember1 (lambda (a lat) (cond ((null? lat) (quote ())) ((eq? (car lat) a) (multirember a (cdr lat))) (else (cons (car lat) (multirember a (cdr lat))))))) (define multirember1-f (lambda (test?) (lambda (a lat) (cond ((null? lat) (quote ())) ((test? a (car lat)) ((multirember1-f test?) a (cdr lat))) (else (cons (car lat) ((multirember1-f test?) a (cdr lat)))))))) ;;((multirember1-f (atom-to-function 'eq?)) 'fd '(sgs fd gasdg fd)) ;;'(sgs gasdg) ;;(define multirember1-eq (multirember1-f (atom-to-function 'eq?))) ;;Actually: ;;((multirember1-f eq?) 'fd '(gsd fd gjsi fd go)) ;;direct apply function eq?,That doesn't need (eq?, I learn from ;; (multiremberT eq?-salad) (define rembern (lambda (a l) ((insert-g seqrem) #f a l)));;seqrem doesn't need (seqrem solve my ?. (define seqrem (lambda (new old l) l)) (define multiremberT (lambda (test? lat) (cond ((null? lat) (quote ())) ((test? (car lat)) (multiremberT test? (cdr lat))) (else (cons (car lat) (multiremberT test? (cdr lat))))))) (define eq?-c (lambda (a) (lambda (x) (eq? x a)))) (define eq?-salad (eq?-c 'salad)) ;;(multiremberT eq?-salad '(fsfd salad fsdf sald sg salad)) ;;; What is the name of the third arguments that multiremberco uses for the natural recursion? ;;; what is the name of the third argument ? And do you know what col stands for? ;;; The name col is short for \u0026quot;collector\u0026quot;, A collector is sometimes called a continuation (define multiremberco (lambda (a lat col) (cond ((null? lat) (col (quote ()) (quote ()))) ((eq? (car lat) a) (multiremberco a (cdr lat) (lambda (newlat seen) (col newlat (cons (car lat) seen))))) (else (multiremberco a (cdr lat) ) (lambda (newlat seen) (col (cons (car lat) newlat) seen))))))) (define a-friend (lambda (x y) (null? y))) ;(multiremberco 'tuna '(sfds tuna fsd jif) a-friend) ;#f ;\u0026gt; (multiremberco 'tuna '(sfds tuna1 fsd jif) a-friend) ;#t ;;how can you get another value in the col ;; ;;can you write this definition differently! Do you mean the new way where we put tuna into the definition? ;; col is to a-frined what (car lat) is to tuna. so we can replace the col with a-frined ;; (define new-friend (lambda (newlat seen) (a-friend newlat (cons (quote tuna) seen)))) ;;;; So ANd now? ;;; multiremberco finds out that(null? lat) is true, which means that it uses the collector on two empty lists. ;;; which collector is this? ;;; It is new-friend. ;;; how does a-friend differ from new-friend ? ;;; New-friend uses a-friend on the empty list and ;;; the value of (cons (quote tuna) (quote ())) ;;; ;;; And what does the old-collector do (a-friend) with such arguments? ;;; It answers #f,because its second argument is (tuna),which is not the empty list! ;;;;;;;; I don't know that the list length ,so easy but I don't think it clearly!!!! ;;;What is terminal condition ? (null? lat) ;;;what is terminal condition line ? ((null? lat) 0) (terminal_contition terminal_value) ;;;what is the (+1 (length (cdr lat))) ;;; build the number with +,so the terminal condition line is ((null? lat) 0) use (cdr lat) to closer the terminal! (define length (lambda (lat) (cond ((null? lat) 0) (else (+ 1 (length (cdr lat))))))) ;;; a is tuna and lat is (and tuna) col is a-friend (define latest-friend (lambda (newlat seen) (a-friend (cons (quotee and) newlat) seen)))) ;;The third collector : the last-friend (define last-friend (lambda (newlat seen) (length newlat))) ;;;;;;;;;;;;;**************************************************************************** ;;;;;;;;;;;;;**************************************************************************** ;;;;;;;;;;;;;**************************************************************************** ;;;;So what does (multiremberco a lat f) do? ;;; It looks at every atom of the lat to see whether ;;; it is eq? to a.Those atoms that are not are collected in one list ls1 ;;; it is eq? to a.The others which the answer is true are collected in second list ls2 ;;; ;;; Finally it determine the value of (f ls1 ls2) ;;; ;;; Namely under the process of time(timestep=0,1,2,3,n-1),In the col it classify the data: use cons ;;; while at the last time(timestep=n) in the a-friend (col) it determine the cons datas!! ;;;;;;;;;;;;;**************************************************************************** ;;;;;;;;;;;;;**************************************************************************** ;;;;;;;;;;;;;**************************************************************************** ;;;;;;;;;;;;;**************************************************************************** ;;; The Tenth commandments: ;;; Build functions to collect more than one value at a time. ;;; ;;;;;;;;;;;;;**************************************************************************** ;\u0026gt; (multiremberco 'tuna '(tunanfdfj tuan jsidjf tuna) last-friend) ;3 ;;actually ;;The basic principle ;;(name --\u0026gt;(null? (col (quote()...)---\u0026gt;(eq? ---\u0026gt;single (cons new (cdr l)) --\u0026gt;(else ;; ---\u0026gt;multi (cons new (name (cdr l)))--\u0026gt;(else ;; ---\u0026gt;(eqan? ---\u0026gt;single (cons new (cdr l)) --\u0026gt;(else ;; ---\u0026gt;multi (cons new (name (cdr l)))--\u0026gt;(else ;; ---\u0026gt;(equal? ---\u0026gt;single (cons new (cdr l)) --\u0026gt;(else ;; ---\u0026gt;multi (cons new (name (cdr l)))--\u0026gt;(else ;; ---\u0026gt;(eqlist? ---\u0026gt;single (cons new (cdr l)) --\u0026gt;(else ;; ---\u0026gt;multi (cons new (name (cdr l)))--\u0026gt;(else ;;sometimes we abstuct the condition to adapt to different state ;; sometimes we abstuct the operations to simplify it ;;multiremboco sometimes we want to change the return value,so co it (define multiinsertLR (lambda (new oldL oldR lat) (cond ((null? lat) (quote ())) ((eq? (car lat) oldL) (cons new (cons oldL (multiinsertLR new oldL oldR (cdr lat))))) ((eq? (car lat) oldR) (cons oldR (cons new (multiinsertLR new oldL oldR (cdr lat))))) (else (cons (car lat) (multiinsertLR new oldL oldR (cdr lat))))))) ;;;; The function multiinsertLRco is to multiinsertLR what multiremberco is to multirember ;;; Does this mean that multiinsertLRco takes one more argument than multiinsertLR? ;;; Yes! and what kind of argument is it? ;;; It is a collector function. (define multiinsertLRco (lambda (new oldL oldR lat col) (cond ((null? lat) (col (quote ()) 0 0)) ((eq? (car lat) oldL) (multiinsertLRco new oldL oldR (cdr lat) (lambda (newlat L R) (col (cons new (cons oldL newlat)) (+ 1 L) R)))) ((eq? (car lat) oldR) (multiinsertLRco new oldL oldR (cdr lat) (lambda (newlat L R) (col (cons oldR (cons new newlat)) L (+ 1 R))))) (else (multiinsertLRco new oldL oldR (cdr lat) (lambda (newlat L R) (col (cons (car lat) newlat) L R))))))) (define even? (lambda (n) (= (* (/ n 2) 2) n))) (define / ;rewrite the divide to replace the origianl divide from Drracket (lambda (n m) (cond ((\u0026lt; n m) 0) (else (+ 1 (/ (- n m) m)))))) (define evens-only* (lambda (l) (cond ((null? l) (quote ())) ((atom? (car l)) (cond ((even? (car l)) (cons (car l) (evens-only* (cdr l)))) (else (evens-only* (cdr l))))) (else (cons (evens-only* (car l)) (evens-only* (cdr l))))))) (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) ;;; Can you explain what (evens-only*co (carl) ...) accomplishes? ;;; It visits every number in the car of l and collects the list without odd numbers,the ;;; product of the even numbers,and the sum of the odd numbers. ;;; So it is the most complicated,actually not very easy to be understood! ;;; You can understand with another lat,so you how to associate two lat! ;;; Youknow (even? (car l)) is in a lat,so it do +*cons in the lat's number! ;;; (define evens-only*co (lambda (l col) (cond ((null? l) (col (quote ()) 1 0)) ((atom? (car l)) (cond ((even? (car l)) (evens-only*co (cdr l) (lambda (newl p s) (col (cons (car l) newl);if it is evens ,so cons it into the newl (* (car l) p) s)))) (else (evens-only*co (cdr l) (lambda (newl p s) (col newl p (+ (car l) s))))))) (else (evens-only*co (car l) (lambda (al ap as) (evens-only*co (cdr l) (lambda (dl dp ds) (col (cons al dl) (* ap dp) (+ as ds)))))))))) ;the fourth collector :: the last-last-friend (define the-last-last-friend (lambda (newl product sum) (cons sum (cons product newl)))) ;\u0026gt; (evens-only*co '(45389 63 45 6 4 234 6 4 23 52 43) the-last-last-friend) ;'(45563 7008768 6 4 234 6 4 52) ;;;; after the length !!!!(define length) -------------------------------------\u0026lt; ;;; use car !! zero? sub1 (define pick (lambda (n lat) (cond ((zero? (sub1 n)) (car lat)) (else (pick (sub1 n) (cdr lat)))))) (define rempick (lambda (n lat) (cond ((zero? (sub1 n)) (cdr lat)) (else (cons (car lat) (rempick (sub1 n) (cdr lat)))) ;;;; because n lat is occur in the terminal condition!!!!! ;;; use the function one? to rewrite the function rempick that removes the nth atom from a lat. ;;; ;;; (define rempick1 (lambda (n lat) (cond ((one? n) (cdr lat)) (else (cons (car lat) (rempick ((sub1 n) (cdr lat)))))))) (define keep-looking (lambda (a sorn lat) (cond ((number? sorn) (keep-looking a (pick sorn lat) lat)) (else (eq? sorn a))))) (define looking (lambda (a lat) (keep-looking a (pick 1 lat) lat))) ;\u0026gt; (looking 'cavier '(6 2 4 cavier 5 7 3)) ;#t (define eternity (lambda (x) (eternity x))) ;;it doesn't stop ,because the goal is not absolutely, rather then ;; ç›¸å¯¹çš„ ;;; This is trivival; It's not even recursive ;;; What does shift do? ;;; Here are our words: ;;; The shift function takes a pair whose first component is a pair and builds a pair ;;; by shifting the second part of the first component into the second component! ;;; ;;; So what is the meaning of component? --------Component can means atom,pair and list ;;; Now it means pair. (define shift (lambda (pair) (build (first (first pair)) (build (second (first pair)) (second pair))))) ;\u0026gt; (shift '((fsd fd)(fd gs))) ;'(fsd (fd (fd gs))) (define align (lambda (pora) (cond ((atom? pora) pora) ((a-pair? (first pora)) (align (shift pora))) (else (build (first pora) (align (second pora))))))) ;;; What does it have in common with keep-looking ;;; Both functions change their arguments for their recursive uses but in neither ;;; case is the change guaranteed to get us closer to the goal ;;; ;;; Why are we not guaranteed that align makes progress? ;;; In the second cond-line shift creates an argument for align that ;;; is not a part of the original argument. ;;; ;;; Which commandment does that violate? ;;; The Seventh Commandment. ;;; ;;; Is the new argument at least smaller than the original one? ;;; It does not look that way ;;; ;;; Why not? ;;; The function shift only rearranges the pair it gets. ;;; And? ;;; Both the result and the argument of shift have the same number of atoms. ;;; Can you write a function that counts the number of atoms ;;; After the (define intersectall) ;;; ;;;align do what shift can't do? ;;; Such as (align '(a b)) but (shift '(a b)) will get wrong message. (define a-pair? (lambda (x) (cond ((atom? x) #f) ((null? x) #f) ((null? (cdr x)) #f) ((null? (cdr (cdr x))) #t) (else #f)))) ;;; how can you refer to the first S-expression of a pair? ;;; By taking the car of the pari ;;; How can you refer to the second S-expression of a pair? ;;; By taking the car of the cdr of the pair ;;; ;;; How can you build a pair with two atoms? ;;; You cons the first ne onto the cons of the second one onto (). Thatis (cons x1 (cons x2 (quote ()))) ;;; ;;; How can you build a pair with two S-expressions? ;;; you cns the first one onto the cons of the second one onto ().That is ;;; (cons s1 (cons s2 (quote ()))) or (cons x1 (cons x2 (quote ()))) ;;; ;;; Did you notice the difference between the last two answers? ;;; No ,there aren't any ;;; ;;;Is align a partial function? ;;; We don't now yet.There may be arguments for which it keeps aligning things. ;;; ;;; Is there something else that changes about the arguments to align and its recursive uses? ;;; Yes, there is .The first component of a pair becomes simpler,though the second component becomes more complicated ;;; ;;; In what way is the first component simpler? ;;; IT is only a part (IT intelligent technique is equal to it) of the original pair's first component. ;;; ;;; Doesn't this mean that lenght * is the wrong function for determining the length of the argument? Can you find a better function ;;; A better function should pay more attention to the first component ;;; ;;; How much more attention should we pay to the first component? ;;; At least twice as much ;;; Do you mean something like weight* ;;; DOes This mean that the arguments get simpler? ;;; Yes ,the weigth* of align's arguments become successively smaller ;;; Is align a partial function? ;;; No,it yields a value for every argument rather than the partial function looking and looking again. ;;; (define length* (lambda (pora) (cond (( atom? pora) 1) (else (+ (length* (first pora)) (length* (second pora))))))) (define weight* (lambda (pora) (cond ((atom? pora) 1) (else (+ (* (weight* (first pora)) 2) (weight* (second pora))))))) ;;; Here is shuffle which is like align but uses revpair from chapter7, instead of shift:(when the first component is a-pair? ;;; THen do revpair. ;;; The function shuffle and revpair swap the components of pairs when the first component is a pair... ;;; ;;; Does this mean that shuffle is total? ;;; We don't know yet.(actually it is not.) ;;; Okay,let's do something interesting. What is the value of (shuffle x) where x is ((a b) (c d)) ;;; ;;; And how are you going to do that? ;;; We are going to determine the value (shuffle pora) where pora is ((c d) (a b)) ;;; ;;; Doesn't this mean that we need to know the value of (shuffle (revpair pora)) ;;; where (revpair pora) is ((a b) (c d)) , yes we do. ;;; ;;; And? ;;; The function shuffle is not total because it now swaps the components of the pair again, which means that we start all over. (define shuffle (lambda (pora) (cond ((atom? pora) pora) ((a-pair? (first pora)) (shuffle (revpair pora))) (else (build (first pora) (shuffle (second pora))))))) ;\u0026gt; (shuffle '(a (b c))) ;'(a (b c)) ;\u0026gt; (shuffle '(a b c)) ;'(a b) ;\u0026gt; (shuffle '(a b)) ;'(a b) ;;;; Thankyou ,Lother Collatz(1910-1990)! It doesn't yield a value for 0, but otherwise nobody knows. (define C (lambda (n) (cond ((one? n) 1) (else (cond ((even? n) (C (/ n 2))) (else (C (add1 (* 3 n))))))))) ;;;; Thank you,Wilhelm ackermann(1853-1946) (define A (lambda (n m) (cond ((zero? n) (+ 1 m)) ((zero? m) (A (- 1 n) 1)) (else (A (sub1 n) (A n (sub1 m))))))) ;;; What does A have in common with shuffle and looking? ;;; A's arguments ,like shuffle's and looking's, do not necessarily decrease for the recursion ;;; ;;; Dose A always give an answer? ;;; Yes,it's total ;;; ;;; Wouldn't it be great if we could write a function that tells us whether some function returns with a ;;; value for every argument. ;;; It sure would.Now that we have seen function that never return a value or return a value so lat that ;;; it is too late ,we should have some tool like this around ;;;Okay,let's write it ;;; ;;; It sounds complicated.A function can work for many different arguments ;;; Then let's make it simpler.For a warm-up exercise,let's focus on a function that checks whether some function stops ;;; for just the empty list,the simplest of all arguments. ;;; That world simplify it a lot ;;; Here is the beginning of this function: ;;; ;;; (define will-stop? (lambda (f) ...))) ;;; ;;; ;;; ;;; What does it do? Do will-stop? return a value for all arguments? ;;; That's the easy part: we said that it either returns #t or #f,depending on whether the argument stops when applied to () ;;; ;;; Is will-stop? total then? ;;; Yes,it is.It always return #t or #f ;;; ;;;okay here is a function that could be an interesting argument for will-stop? (define last-try (lambda(x) (and (will-stop? last-try) (eternity x))))) ;;; what is (will-stop? last-try) ;;; ;;; What does it do? ;;; ;;; Here is our meaning: ;;; \u0026quot;we took a really close look at the two possible cases.IF we can define will-stop?, ;;; then (will-stop? last-try) must yield either #t or #f.Bu it cannot- due to the very ;;; definition of what will-stop? is supposed to do.This must mean that will-stop? cannot ;;; be defined\u0026quot; ;;; ;;; Because you know,let's make up some examples. ;;; what is the value of (will-stop? last-try) (eternity (quote ())))) ;;; That depends on the value of (will-stop? last-try) ;;; ;;; we said that will-stop? will stop,so it must return #t or #f, ;;; let's say (will-stop? last-try) is #f ,yes,itis .we predict just the opposite ;;; if the value of (will-stop? last-try) is #f,which really means that last-try ;;; will not stop.. ;;; So we must have been wrong about (will-stop? last-try) (because it cannot be stopped) ;;; That's correct.It must return #t,because will-stop? always gives an answer. we ;;; said it total(assume) ;;; Fine. If(will-stop? last-try) is #t. What is the value of (last-try (quote ())) in the definition of last-try. ;;; Now we just need to determine the value of (and #t (eternity (quote ())) ;;; which is the same as the value of (eternity (quote ())) ;;; ;;; What is the value of (eternity (quote ())) ;;; It doesn't have a value.we know that it doesn't stop ;;; ! ;;; But that means that we were wrong again!!! The will-stop? neither return #f nor #t. What the hell ;;; will-stop? will return? ;;; ;;; So will-stop? cannot be defined. ;;; Is this unique? ;;; Yes , it is .It makes will-stop? the first function that we can describe percisely but cannot ;;; define in our language. ;;; ;;; Is there any way around this problem? ;;; No ,thank you ,Alan M. Turing (1912-1954) ;;; and Kurt Godel(1906-1978) ;;; ;;; What is (define...) ;;; That is an interesting question. We just saw that (define...) doesn't work for will-stop?. ;;; ;;; So what are the recurive definition? ;;; Hold tight,take a deep breath,and plunge forward when you're ready. ;;;;;;;;;;;;;;;;;;;;;;;The second part;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;;;;;;;;;;;;;;;;****************;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;; ;;; ;;; ;;;;;;;;;;;;;;;;;;;;;;;The third part;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;; myracet3.rkt;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; (define length (lambda (l) (cond ((null? l) 0) (else (+ 1 (length (cdr l))))))) (define eternity (lambda (x) (eternity x))) (lambda (l) (cond ((null? l ) 0) (else (+ 1 (eternity (cdr l)))))) ;length\u0026lt;=1 (lambda (l) (cond ((null? l) 0) (else (+ 1 ((lambda (l) (cond ((null? l) 0) (else (+ 1 (eternity (cdr l)))))) (cdr l)))))) ;length \u0026lt;=2 (lambda (l) (cond ((null? l) 0) (else (+ 1 ((lambda (l) (cond ((null? l) 0) (else (+ 1 ((lambda (l) (cond ((null? l) 0) (else (+ 1 (eternity (cdr l)))))) (cdr l)))))) (cdr l)))))) ;;; Now what do you thin recursion is? ;;; What do you mean? ;;; ;;; Well,we have seen how to determine the length of a list with no items,with no more that ;;; one item,with no more than two items,and so on. How could we get the function length back. ;;; If we could write an infinite function in the style of length0 ,length1,length2.. ;;; then we could write lengthinfinite,which would determine the length of all lists ;;; we can make. ;;; But we cannot write an infinite function. No we can't, (yes ,we can't mae it) ;;; ;;; And we still have all these repetitions and patterns in these functions. yes we do. ;;; ;;; What do these pattern look like? ;;; All these programs contain a function that looks like length.Perhaps we should ;;; abstract out this function: see The Ninth Commandment. ;;; We need a function that looks just lie length but starts with (lambda (length) ...). ;;; ;;;Do you mean this? ;;;((lambda (length) ;;;(lambda (l) (cond ((null? l) 0) (else (add1 (length (cdr l)))))) eternity) ;;; Yes,that's okay. It creates length0 ;;;so rewrite length1 in the same style ;;;See below. ;;; ;;; ;we need a function that looks just like length ;but starts with (lambda (length)...) and inside it is not ;(lambda (length) but maybe (lambda (l) ;length0 (lambda (legnth) (lambda (l) (cond ((null? l) 0) (else (add1 (length (cdr l)))))) eternity) ;length1 ((lambda (f) (lambda (l) (cond ((null? l) 0) (else (+ 1 (f (cdr l))))))) ((lambda (g) (lambda (l) (cond ((null? l) 0) (else (+ 1 (g (cdr l))))))) eternity)) ;; Do we have to use length to name the argument? ;; No ,we just used f and g. As long as we are consistent,everything's okay ;length2 ;;length \u0026lt;=2 ((lambda (length) (lambda (l) (cond ((null? l) 0) (else (+ 1 (length (cdr l))))))) ((lambda (length) (lambda (l) (cond ((null? l) 0) (else (+ 1 (length (cdr l))))))) ((lambda (length) (lambda (l) (cond ((null? l) 0) (else (+ 1 (length (cdr l))))))) eternity))) ;;; close, But there are still repetitions. True,let's get rid of it. ;;; ;;; Where should we start? ;;; Name the function that takes length as an argument and that returns a function that looks like length. ;;; What's a good-name for this function? ;;; how about mk-length for \u0026quot;make length\u0026quot; ;;; ;let eternity move ahead , eternity in the first part ((lambda (mk-length) (mk-length eternity)) (lambda (length) (lambda (l) (cond ((null? l) 0) (else (+ 1 (length (cdr l)))))))) ((lambda (mk-length) ;;æå–æ±  (mk-length (mk-length eternity))) ;;å‘ç”Ÿæ±  (lambda (length) (lambda (l) (cond ((null? l) 0) (else (+ 1 (length (cdr l)))))))) ;;length\u0026lt;=2 ((lambda (mk-length) ;;æå–æ±  (mk-length (mk-length (mk-length eternity)))) ;;å‘ç”Ÿæ±  (lambda (length) (lambda (l) (cond ((null? l) 0) (else (+ 1 (length (cdr l)))))))) ;;length \u0026lt;=3 ((lambda (mk-length) ;;æå–æ±  (mk-length (mk-length (mk-length (mk-length eternity))))) ;;;; So What is recursion like? ;;; It is like an infinite tower of applications of mk-length to ab arbitrary function. ;;; Do you really need an infinite tower? ;;; Not really of course.Everytime we use length we only need a finite number,but we never know ;;; know many. ;;; could we guess how many we need? ;;; Sure,but we may not guess a large enough number! ;;; When do we find out that we didn't guess a large enough number? ;;; When we apply the function eternity that is passed to innermost mk-length. ;;; What if we could create another application of mk-length to eternity at this point? ;;; That would only postpone the problem by one and besides,how could we do that? ;;; ;;; Well,since nobody cares what function we passwd to mk-length we could pass it mk-length initially. ;;; That's the right idea(right? ) And then we invoke mk-length on eternity and the ;;; result of this on the cdr so that we get one more piece of this tower. ;;å‘ç”Ÿæ±  (lambda (length) (lambda (l) (cond ((null? l) 0) (else (+ 1 (length (cdr l)))))))) ;;how if we replace the eternity with the mk-length ;length0; å› ä¸ºæ²¡æœ‰äººå…³å¿ƒæˆ‘ä»¬åˆ°åº•æˆ‘ä»¬ä¼ é€’ä»€ä¹ˆç»™mk-length å¦‚æœä»–æ˜¯æ— ç©·çš„è¯ ;é‚£æˆ‘ä»¬å¯ä¸å¯ä»¥ç¬¬ä¸€æ¬¡åˆå§‹åŒ–çš„æ—¶å€™å°±ä¼ é€’ç»™ä»– mk-length æ¥æ›¿ä»£eternityå‘¢ï¼Ÿ ;;; Yes,we could even use mk-length instead of length. ((lambda (mk-length) (mk-length mk-length)) (lambda (length) (lambda (l) (cond ((null? l) 0) (else (+ 1 (length (cdr l)))))))) ;;å’Œä¸Šé¢ä¸€æ · ((lambda (mk-length) (mk-length mk-length)) (lambda (mk-length) (lambda (l) (cond ((null? l) 0) (else (+ 1 (mk-length (cdr l)))))))) ;; WHy would we want to do that? ;; All names are equal, but some names are more equal than others! (with apologies to George Orwell(1903-1950) ;; True: as long as we use the names consistently ,we are just fine. ;; ;; And mk-length is a far more equal name than length. If we use a name like mk-length, it is a contstant reminder that ;; the first argument to mk-length is mk-length ;;æˆ‘ä»¬ä¸ºä»€ä¹ˆæƒ³ç€ä¸Šé¢çš„åšæ³•å‘¢ï¼Ÿ ;;å› ä¸ºæ‰€æœ‰çš„åå­—éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æœ‰äº›åå­—æ˜¯æ›´ä¸€æ ·æ¯”å…¶ä»– ((lambda (mk-length) (mk-length mk-length)) (lambda (mk-length) (lambda (l) (cond ((null? l) 0) (else (add1 ((mk-length eternity) (cdr l)))))))) ((lambda (mk-length) (mk-length mk-length)) (lambda (mk-length) ((lambda (length) (lambda (l) (cond ((null? l) 0) (else (add1 (length (cdr l))))))) (mk-length mk-length)))) ;;; How about this? ;;; Yes,this looks just fine. ;;; Let's see thether it works? ;;; Yes ,okay ;;; First,we need to know the value of it? ;;; what would you call this function above? ;;; It's length,of course ;;; ;;; How does it work? ;;; It keeps adding recurive uses by passing mk-length to itself,just as it is about to expire ;;; ;;; One problem is left: it no longer contains the function that looks like length. ;;; ;;; can you fix the (mk-length mk-length) .? ;;; We could extract this new application of mk-length to itself and call it length ;;; WHy? ;;; Because it really makes the function length. ;;since (mk-length mk-length returns a fucntion of one argument, ;;does (lambda (x) ((mk-length mk-length) x)) retrun a function of ;;one argument? Actually,it is a function ;; ;;Okay ,let's do this to the application of mk-length to itself ((lambda (mk-length) (mk-length mk-length)) (lambda (mk-length) (lambda (l) (cond ((null? l) 0) (else (add1 ((lambda (x) ((mk-length mk-length) x)) (cdr l)))))))) ;;move out the new function so that we get length back ;;Why can't you move out (lambda (x) ((mk-length mk-length) x)) ;; ;; Because you add the (lambda (length) which is like the definition of define.(actually are) ;; also here the meaning of length is (lambda(x) ((mk-length mk-length) x)),so you can use the ;; usage of lambda(length) and the definition of length in the same S-expressions!!(By zhaoliang) ;; You know the same S-expression (the same parathese here) ;; ;; Is it okay to move out the function? ;; Yes,we just always did the opposite by replacing a name with its value. Here we ;; extract a value and give it a name. ;; Can we extract the function in the box(p171) that looks like length and give it a name ;; Yes,it does not depend on mk-length at all! ((lambda (mk-length) (mk-length mk-length)) (lambda (mk-length) ((lambda (length) (lambda (l) (cond ((null? l) 0) (else (add1 (length (cdr l))))))) (lambda (x) ((mk-length mk-length) x))))) ;;;;;;;;;;;;;;;;;;;;;;;The third part;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;;;;;;;;;;;;;;;;***************;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;;;;;;;;;;;;;;;;The fourth part;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;; myracet4.rkt ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;; Is this the right function! ------you can check back the nottation above. ;;; ;;;Here the definition of le(lambda (length)...) and the usage of le (lambda (le)...) is in the same ;;;S-expressions!!(the same parathese) ;;; ((lambda (le) ((lambda (mk-length) (mk-length mk-length)) (lambda (mk-length) (le (lambda (x) ((mk-length mk-length) x)))))) (lambda (length) (lambda (l) (cond ((null? l) 0) (else (add1 (length (cdr l)))))))) ;;;; Let's separate the funtion that makes length from the function that looks like length. (lambda (le) ((lambda (mk-length) (mk-length mk-length)) (lambda (mk-length) (le (lambda (x) ((mk-length mk-length) x)))))) ;;; Does this function have a name? ;;; Yes ,it is called the application-order Y combinator. (define Y (lambda (le) ((lambda (f) (f f)) (lambda (f) (le (lambda (x) ((f f) x))))))) ;;; the above function is replace the mk-length with f ,so it looks more common! BUt ;;; it lacks the definition of (le) just the usage of le.so it means the Y combinator. ;;; ;;; (lambda (length) ;;; (lambda (l) ;;; ... ---\u0026lt; it is the definition of function length ;;; ;;; ((lambda (le) ;;; ... ;;; ) ;;; (lambda (length) ;;; ... ;;; )) ;;; ----\u0026lt; it is the definition of function le is the (lambda (length)...)) and the use ;;; of the le is in the (lambda (le) ...) Take care what the left parathese and right ;;; parathese I utilize. ;;; ----------------------which is similar to apply-closure that contains three part ;;; table-of form-of body-of ;; An entry is a pair of lists whose first list is a set. Also ,the two lists must be of equal ;; length.Make up some examples for entries ;; Here are some examples: ;; ((appetizer entree beverage) ;; (pate boeuf vin)) ;; ;; and ;; ((appetizer entree beverage) ;; (beer beer beer) ---------------------------\u0026lt; but the second list can be not a set ;; ;; and ;; (( beverage dessert) ;; ((food is) (number one with us))) ;; ;; ;;How can we build an entry from a set of names and a list of values? ;; (define new-entry build) ----\u0026gt;Try to build our examples with this function. ;; ;;What is (lookup-in-entry name entry) ;; where name is entree ;; ;; and entry is ((appetizer entree beverage) ;; (food tastes good)) ;; ------------------------------\u0026gt;tastes ;; ;; What if name is dessert ;; In this case we would like to leave the decision about what to do with the user of lookup-in-entry ;; How can we accomplish this? ;; lookup-in-entry takes an additional argument this is invoked when name is not found in the first ;; list of an entry. ;; ;; How many arguments do you think this extra function should take? ;; We think it should take one , name. Why? ;; ;;;;;;;;;;;;;;;;;;;;;;;The fourth part;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;;;;;;;;;;;;;;;;***************;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;;;;;;;;;;;;;;;;The fifth part;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;myracet5.rkt ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;; ;;; (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) (define build (lambda (s1 s2) (cond (else (cons s1 (cons s2 (quote ()))))))) ((lambda (nothing) (cond (nothing (quote something)) (else (quote nothing)))) #t) ;;;; Here is our dfinition of lookup-in-entry: (define lookup-in-entry (lambda (name entry entry-f) (lookup-in-entry-help name (first entry) (second entry) (entry-f)))) ;;;Finish the function lookup-in-entry-help----------------- ;;; ;;; (define lookup-in-entry-help (lambda (name names values entry-f) (cond ((null? names) (entry-f name)) ((eq? (car names) name) (car values)) (else (lookup-in-entry-help name (cdr names) (cdr values) entry-f))))) ;;; A table(based on entries) (also called an environment) is a list of entries.Here is one example: The empty table ;;; ,represented by () ;;; Make up some others. ;;; Here is another one: ;;; (((appetizer entree beverage) ;;; (pate boeuf vin)) ;;; ((beverage desert) ;;; ((food is) (number one with us))) ;;; ) ;;; ;;; Define the function extend-table which takes an entry and a table (possibly the empty one) ;;; and create a new table by putting the new entry in front of the old table. ;;; (define extend-table cons) ;;; ;;; What is ;;; (lookup-in-table name table table-f) ;;; where ;;; name is entree ;;; table is (((entree dessert) ;;; (spaghetti spumoni)) ;;; ((appetizer entree beverage) ;;; (food tastes good))) ;;; and ;;; table-f is (lambda (name) ...) ;;; ;;; -----\u0026gt; It could be either spaghetti or tastes,but lookup-in-table searches the list of entries in order ;;; So it is spaghetti ;;; ;;; Can you describe what the following function ;;; represents: ;;; (lambda (name) ;;; (lookup-in-table name ;;; (cdr table) ;;; table-f)) ;;; ;;; ---------------------------\u0026gt; This function is the action to take when the name is not found in the first entry ;;; In one table there are a set of entries (set means each of the entries is different ;;; from each other) ;;; ;;; Have we chosen a good representation for expressions? ;;; Yes .They are all S-expressions so they can be data for functions. ;;; What kind of functions? ;;; For example ,value(later on ,the value is defined as another name compiler.(like gcc gfortran ifort python perl etc) ;;; ;;; Do you remember value from chapter 6? ;;; Recall that value is the function that returns the natural value of expressions. ;;; ;;; What is the value of ;;; (car (quote (a b c))) ;;; We don't even know what (quote (a b c)) is .---------------------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt;The original state of you learning english! ;;; You don't know 'am' 'are' 'is' etc. ;;; ;;;What is the value of ;;; (cons rep-a ;;; (cons rep-b ;;; (cons rep-c ;;; (quote ())))) ;;; ;;; Where ;;; rep-a is a ;;; rep-b is b ;;; and ;;; rep-c is c ;;; ==================\u0026gt;\u0026gt; It is the same as (a b c) ;;; ;;;And what is the value of ;;; (cons rep-car ;;; (cons (cons rep-quote ;;; (cons ;;; (cons rep-a ;;; (cons rep-b ;;; (cons rep-c ;;; (quote ())))) ;;; (quote ()))) ;;; (quote ()))) ;;; where ;;; rep-car is car ;;; rep-quote is quote ;;; rep-a is a ;;; rep-b is b ;;; and ;;; rep-c is c ;;; ====================\u0026gt;\u0026gt; It is the representation of the expressions: ;;; (car (quote (a b c))) ;;; ;;; ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ;;; The above is what I say: Lisp is the data with program! ;;; Data can be code,code can also become data! ;;; ;;; What is value of ;;; (car (quote (a b c))) ;;; =====================\u0026gt;\u0026gt; a ;;; What is (value e) ;;; where ;;; e is (car (quote (a b c))) ;;; =====================\u0026gt;\u0026gt; a ;;; What is (value e) ;;; where ;;; e is (quote (car (quote (a b c)))) ;;; =====================\u0026gt;\u0026gt; (car (quote (a b c))) ;;; ;;; What is (value e) ;;; where ;;; e is (add1 6) ;;; ====================\u0026gt;\u0026gt; 7 ;;; What is (value e) ;;; where ;;; e is 6 ;;; ====================\u0026gt;\u0026gt; 6 .because numbers are constants ;;; What is (value e) ;;; where ;;; e is (quote nothing) ;;; ====================\u0026gt;\u0026gt; nothing ;;; What is (value e) ;;; where ;;; e is ((lambda (nothing) ;;; (cons nothing (quote ()))) ;;; (quote ;;; (from nothing comes something))) ;;; ====================\u0026gt;\u0026gt; ((from nothing come something)). ;;; ;;; ;;; ;;; What is (value e) ;;; where ;;; e is ((lambda (nothing) ;;; (cond ;;; (nothing (quote something)) ;;; (else (quote nothing)))) ;;; #t) -------------------------\u0026lt; It means nothing is #t(The semtatics of language (the infer of language)) ;;; ;;; =====================\u0026gt;\u0026gt; something ;;; ;;; What is the type of e ;;; where ;;; e is 6 ;;; ====================\u0026gt;\u0026gt; *const ;;; What is the type of e ;;; where ;;; e is #f ;;; ======================\u0026gt;\u0026gt; *const ;;; What is (value e) ;;; where ;;; e is #f ======================\u0026gt;\u0026gt; #f ;;;; What is the type of e ;;; where ;;; e is cons ;;; ======================\u0026gt;\u0026gt; *const -----------------------\u0026gt;I think is must be somethin wrong ;;; -----------------------\u0026gt;I think it is primitive car ;;; -----------------------\u0026gt;I am wrong ,primitive is also *const ;;;;; What is the type of e ;;; where ;;; e is car ;;; ======================\u0026gt;\u0026gt; (primitive car) ;;; ;;;;;; What is the type of e ;;; where ;;; e is (quote nothing) ;;; ======================\u0026gt;\u0026gt; *quote ;;; What is the type of e ;;; where ;;; e is nothing ;;; ======================\u0026gt;\u0026gt; *identifier ;;;;;; What is the type of e ;;; where ;;; e is (lambda (x y) (cons x y)) ;;; ======================\u0026gt;\u0026gt; *lambda ;;; What is the type of e ;;; where ;;; e is ((lambda (nothing) ;;; (cond ;;; (nothing (quote something)) ;;; (else (quote nothing)))) ;;; #t) ;;; ======================\u0026gt;\u0026gt; *application ;;; What is the type of e ;;; where ;;; e is (cond ;;; (nothing (quote something)) ;;; (else (quote nothing))) ;;; ======================\u0026gt;\u0026gt; *cond ;;; ;;; How many types do you think there are? ;;; we found six: ;;; *const ;;; *quote ;;; *identifier ;;; *lambda ;;; *cond ;;; and ;;; *application ;;; How do you think we should represent types? ;;; We choose functions.We call these functions \u0026quot;action\u0026quot;;------------------------------------\u0026lt;In python ,it is called as objects ;;; or,in oop(orient object programming) ,it is called as objects ;;; ;;; If actions are functions that do \u0026quot;the right thing\u0026quot; when applied to the appropriate type of expression, ;;; What should value do? ;;; You guessed it. It would have to find out the type of expression it was passed and then use the associated action. ;;; ;;; Do you remember atom-to-function from chapter8? ;;; We found atom-to-function usefule when we rewrote value for numbered expressions. ;;; ;;; (define lookup-in-table (lambda (name table table-f) (cond ((null? table) (table-f name)) (else (lookup-in-entry name (car table) (lambda (name) (lookup-in-table name (cdr table) (table-f)))))))) (lambda (name table table-f) (lookup-in-table name (cdr table) (table-f))) ;;; Below is a function that produces the correct action (or function) for each possible S-expression: ;;; ;;; The top level make-up (define expression-to-action (lambda (e) (cond ((atom? e) (atom-to-action e)) (else (list-to-action e))))) ;;; IN the III-formed S-expressions suchas (quote a b), () , (lambda (#t) #t),(lambda (4) 4) ,(lambda (car) car) ;;; (lambda a),(cond (3 c) (else b) (5 a)) , And (1 2) are not considered here.They can be detected by an ;;; appropriate function to which S-expressions are submitted before they are passed to value. (define atom-to-action (lambda (e) (cond ((number? e) *const) ((eq? e #t) *const) ((eq? e #f) *const) ((eq? e (quote cons)) *const) ((eq? e (quote car)) *const) ((eq? e (quote cdr)) *const) ((eq? e (quote null?)) *const) ((eq? e (quote eq?)) *const) ((eq? e (quote atom?)) *const) ((eq? e (quote zero?)) *const) ((eq? e (quote add1)) *const) ((eq? e (quote sub1)) *const) ((eq? e (quote number?)) *const) (else *identifier)))) ;;;; so *const is consed by three parts: primitive part ,number , #t or #f part.(not include string part, because string part is called *identifier) ;;; ;;;By zhaoliang ;;;It means that the following identifier can see the list as its function's argument! --------------------------\u0026lt; (define list-to-action (lambda (e) (cond ((atom? (car e)) (cond ((eq? (car e) (quote quote)) *quote) ((eq? (car e) (quote lambda)) *lambda) ((eq? (car e) (quote cond)) *cond) (else *application))) (else *application)))) ;;;;; So the compiler is comming on the way............................ ;;; If we assuming the expression-to-action works,we can use it to define value and meanning ;;; ;;; (define value (lambda (e) (meaning e (quote ())))) ;;;Now table is empty set. (define meaning (lambda (e table) ((expression-to-action e) e table))) ;;;; The function value, together with all the functions it uses ,is called an interpreter.(Note that: all the relevent function value use ;;; ;;;The function value approximates the function eval available in Schemes(and Lisp) ;;; ;;;How many arguments should actions take according to the above? ;;; ;;; Two,the expression e and a table ;;; ;;; ;;; Here is the action for constants: ;;; ;;; ;;; (define *const (lambda (e table) (cond ((number? e) e) ((eq? e #t) #t) ((eq? e #f) #f) (else (build (quote primitive) e))))) ;;;;-----------------\u0026lt;\u0026lt;\u0026lt;\u0026lt; Yes,primitive car,primitive con,primitive cdr ;;; Here is the action for constants: ;;; ;;; (define *quote (lambda (e table) (text-of e))) (define first (lambda (p) (cond (else (car p))))) (define second (lambda (p) (cond (else car (cdr p))))) (define third (lambda (p) (cond (else car (cdr (cdr p)))))) (define text-of second) ;;; Have we used the table yet? ;;; No, But we will in a moment. ;;; ;;; Why do we need the table? ;;; To remember the values of identifiers ;;; ;;;; Given that the table contains the values of identifiers ,write the action of *identifier ;;; (define *identifier (lambda (e table) (lookup-in-table e table initial-table))) ;;; Here is the initial-table ---------------------------------------------\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt; (define initial-table (lambda (name) (car (quote ())))) ;;; When is it used? ;;; Let's hope never. Why? ;; ;;What is the value of (lambda (x) x) ;; We don't know yet, But we know that it must be the representation for a non-primitive ;; function. ;; ;; How are non-primitive functions different from primitives? ;; We know what primitives do; non-primitives are defined by their argumentss and their function bodier ;; ^^^^^ ^^ ^^^^^ ^^^^^^^^^^ ^^^ ^^^^^ ^^^^^^^^ ^^^^^^ ;; What does it mean? ;; arguments (x y ...) function bodier: x ;; So when we want to use a non-primitive we need to remember its formal arguments and its function body. ;; At least. Fortunately this is just the cdr of a lambda expression! Because the car of the lambda expression is lambda ;; ;; And what else do we need to remember? ;; ;; We wll also put the table in,just in case we might need it later ;; ;; And How do we represent this? ;; In a list,of course. ;; ;; Here is the action *lambda ;; (define *lambda (lambda (e table) (build (quote non-primitive) (cons table (cdr e))))) ;;; What is (meanning a table) ;;; where ;;; e is (lambda (x) (cons x y)) ;;; and ;;; table is (((y z) ((8) 9))) ;;; ;;; ==========================================\u0026gt;\u0026gt;\u0026gt; (non-primitive ;;; ( (((y z) ((8) 9))) (x) (cons x y) )) ;;; ^^^^^^^^^^^^^^^^^ ^^^ ^^^^^^^^^^^^^^^ ;;; table formals body ;;;It is probably a good idea to define some help functions for getting back the parts in this three elements ;;;list (i.e. the tables,the formal arguments,and the body). ;;; (define table-of first) (define formals-of second) (define body-of third) ;;; Describe (cond...) in your own words ;;; ;;; It is a special form that takes any number of cond-lines. It considers ;;; each line in turn. If the question part on the left is false, it looks ;;; at the rest of the lines.Otherwise it proceeds to answer the right part. ;;; If it sees an else-line,it treats that cond-line as if its question part ;;; were true. ;;;; ;;; Here is the function evcon that does what we said in words ;;; (define evcon (lambda (lines table) (cond ((else? (question-of (car lines))) (meaning (answer-of (car lines)) table)) ((meaning (question-of (car lines)) table) (meaning (answer-of (car lines)) table)) (else (evcon (cdr lines) table))))) ;;;; else? determine whether the (car expression) is else or not! (define else? (lambda (x) (cond ((atom? x) (eq? x (quote else))) (else #f)))) ;;; didn't we violate the First Commandment? ;;; Yes,we don't ask (null? lines), so one of the questions in every cond better be true (define question-of first) (define answer-of second) ;;; Now use the function evcon to write the *cond action ;;; ;;; Here is the action for *cond ;;; (define *cond (lambda (e table) (evcon (cond-lines-of e) table))) ;;; Aren't these help functions useful? ;;; Yes they make things quite a bit more readable.But you already knew that. ;;; ;;; Do you understand *cond now? ;;; Perhaps not ;;; ;;; How can you become familiar with it? ;;; The best way is to try an example. ;;; A good one (examples ) is ;;; (*cond e table) ;;; where ;;; e is (cond (coffee klatsch) (else (party)) ;;; and ;;; table is (((coffee) (#t)) ;;; ((klatsch party) (5 (6)))) (define cond-lines-of cdr) ;;; Have we seen how the table gets used? ;;; Yes,*lambda and *identifier use it ;;; ;;;But how do the identifiers get into the table? ;;; In the only action we have not defined: ;;; *application ;;; ^^^^^^^^^^^^ ;;; |||||||||||| ;;; How is an application represented? ;;; ;;; An application us a list of expressions whose car position contains an expression whose value is a function. ;;; ;;;How does an application differ from a special form, like (and ...) (or ...) or (cond ...) ;;; An application must always determine the meaning of all its arguments. ;;; Before we can apply a function ,do we have to get the meaning of all of its arguments? ;;; Yes. ;;; ;;; Write a function evils that takes a list of (representations of) arguments and a table, and ;;; returns a list composed of the meaning of each argument ;;; (define evlis (lambda (args table) (cond ((null? args) (quote ())) (else (cons (meaning (car args) table) ;;; really importan for every argument! (evlis (cdr args) table)))))) ;;;; What else do we need before we can determine the meaning of an application? ;;; ;;;We need to find out what its function-of means ;;; ;;;And what then? ;;; ;;; Then we apply the meaning of the function to the meaning of the arguments ;;; ;;; Here is *application ;;; (define *application (lambda (e table) (apply (meaning (function-of e) table) (evlis (arguments-of e) table)))) ;;; Of course, we just have to define apply , function-of, and arguments-of correctly ;;; (define function-of car) (define arguments-of cdr) ;;;; How many different kinds of functions are there? ;;; ;;; Two: primitive and non-primitive ;;; What are the two representation of functions? ;;; ;;; (primitive primitive-name) ;;; and (non-primitive (table formals body)) ;;; The list (table formals body) is called a closure record. ;;; ;;; Write primitive? and non-primitive? (define primitive? (lambda (l) (eq? (first l) (quote primitive)))) (define non-primitive? (lambda (l) (eq? (first l) (quote non-primitive)))) ;;; ;;; If fun does not evaluate to either a primitive or a non-primitive as ;;; in the expression ((lambda (x) (x 5)) 3) ------\u0026lt;\u0026lt;\u0026lt; This expression cannot be detected in the now preocedure ;;; there is no answer. The function apply approximatly the funcion apply available in Scheme (and lisp) ;;; (define apply (lambda (fun vals) (cond ((primitive? fun) (apply-primitive (second fun) vals)) ((non-primitive? fun) (apply-closure (second fun) vals))))) ;;;; This is the definition of apply-primitive ;;; (define apply-primitive (lambda (name vals) (cond ((eq? name (quote cons)) (cons (first vals) (second vals))) ((eq? name (quote car)) (car (first vals))) ((eq? name (quote cdr)) (cdr (first vals))) ((eq? name (quote null?)) (null? (first vals))) ((eq? name (quote eq?)) (eq? (first vals) (second vals))) ((eq? name (quote atom?)) (:atom? (first vals))) ((eq? name (quote zero?)) (zero? (first vals))) ((eq? name (quote add1)) (add1 (first vals))) ((eq? name (quote sub1)) (sub1 (first vals))) ((eq? name (quote number?)) (number? (first vals)))))) (define :atom? (lambda (x) (cond ((atom? x) #t) ((null? x) #f) ((eq? (car x) (quote primitive)) #t) ((eq? (car x) (quote non-primitive)) #t) (else #f)))) ;;;Is apply-closure the only function left? ;;; Yes,and apply-closure must extent the table ;;; extent the table? ;;; ;;; how could we first find the result of (f a b) ;;; where ;;; f is (lambda (x y) (cons x y)) ;;; a is 1 ;;; and ;;; b is (2) ;;; ;;; ===================That's tricky. But we know what to do to find the meaning of (cons x y) ;;; where ;;; table is (((x y) ;;; (1 (2)))). ;;; ;;; Table is the contain of the variables defined by you!!! ;;; Why can we do this? ;;; Here ,we don't need apply-closure ;;; ;;; Can you generalize the last two steps? ;;; Applying a non-primitive function --a closure---to ;;; a list of values is the same as finding the meaning of ;;; closure's body with its table extended by an entry of the form ;;; (formals values) ;;; In this entry,formals is the formals of closure and values is ;;; the result of evils ;;; (define apply-closure (lambda (closure vals) (meaning (body-of closure) (extend-table (new-entry (formals-of closure) vals) (table-of closure))))) ;;;; This is a complicated function and it deserves an example. ;;; In the following, ;;; closure is ((((u v w) ;;; entry name ;;; (1 2 3)) ;;; entry value ;;; ((x y z) ;;;;entry name ;;; (4 5 6))) ;;;; entry value ;;; (x y) ;;; formal ;;; (cons z x)) ;;; body (define new-entry build) (define extend-table cons) ;;;;;;;;;;;;;;;;;;;;;;;The fifth part;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;;;;;;;;;;;;;;;;****************;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;;;;;;;;;;;;;;;;The sixth part;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;; myracet6.rkt ;;;;;;;;;;;;;;;;;;;;;;;;; ;;; ;;; (define member1? (lambda (a lat) (cond ((null? lat) #f) (else (or (eq? a (car lat)) (member1? a (cdr lat))))))) ;;the most common thinking,find it and then continul (define is-first? (lambda (a lat) (cond ((null? lat) #f) (else (eq? (car lat) a))))) (define two-in-a-row? (lambda (lat) (cond ((null? lat) #f) (else (or (is-first? (car lat) (cdr lat)) (two-in-a-row? (cdr lat))))))) ;;;the development, more close,but if-first-b must use ;;the two-in-a-row? ,so can we write a version which ;;didn't use two-in-a-row? at all? (define is-first-b? (lambda (a lat) (cond ((null? lat) #f) (else (or (eq? (car lat) a ) (two-in-a-row? lat)))))) (define two-in-a-row-b? (lambda (lat) (cond ((null? lat) #f) (else (is-first-b? (car lat) (cdr lat)))))) ;;the is-first-b? only do the job about eq?,so why can I ;;let is-first-b? also do another thing,recur. So I ;;don't need two-in-a-row? again. (define is-first-c? (lambda (preceding lat) (cond ((null? lat) #f) (else (or (eq? (car lat) preceding) (is-first-c? (car lat) (cdr lat))))))) (define two-in-a-row-c? (lambda (lat) (cond ((null? lat) #f) (else (is-first-c? (car lat) (cdr lat)))))) ;;although two-in-a-row-c? and two-in-a-row-b? look ;;the same in the shape; ;;but the essence is not the same! ;;version b, is just encasual the is-first? and two- ;;in-a-row? ;;version c, is updated version, used it by itself? (define sum-of-prefixes-b (lambda (sonssf tup) (cond ((null? tup) (quote ())) (else (cons (+ sonssf (car tup)) (sum-of-prefixes-b (+ sonssf (car tup));;thinking hole (cdr tup))))))) ;;not leave before,important for your thinking ;;(sum-of-prefixes-b 0 '(1 3 5)) ;;two arguments (define pick (lambda (n lat) (cond ((eq? n 1) (car lat)) (else (pick (- n 1) (cdr lat)))))) (define scramble-b (lambda (tup rev-pre) (cond ((null? tup) (quote ())) (else (cons (pick (car tup) (cons (car tup) rev-pre)) (scramble-b (cdr tup) (cons (car tup) rev-pre))))))) ;;\u0026gt; (scramble-b '(1 1 1 3 4 2 1 1 9 2) (quote ())) ;;'(1 1 1 1 1 4 1 1 1 9) ;;(scramble-b '(2 1 1 3 4 2 1 1 9 2) (quote ())) have a bug ;;\u0026gt; (scramble-b '(1 2 1 3 4 2 1 1 9 2) (quote ())) ;;'(1 1 1 2 2 4 1 1 1 9) ;;the base procedure ;;result rev-pre ;;1 1 ;;1 1 2(tup di er wei) 1 ;;1 1 1 1(tup di san wei) 2 1 ;;1 1 1 2 3 1 2 1 (from here to select the index 3 so is 2) ;;1 1 1 2 2 4 3 1 2 1 (select the index 4 of lat) ;;1 1 1 2 2 4 2 4 3 1 2 1 ;;1 1 1 2 2 4 1 1 2 4 3 1 2 1 ;;1 1 1 2 2 4 1 1 1 1 2 4 3 1 2 1 ;;1 1 1 2 2 4 1 1 1 9 1 1 2 4 2 1 2 1 ;;1 1 1 2 2 4 1 1 1 9 2 9 1 1 2 4 2 1 2 1 ;;actually in the list of the lat, ;;the first number in the rev-pre expose the target I ;;should get from the rev-pre,so on the one-hand,I should ;;pick-up the value according the index from varient and ;;increasing lat ,on the second hand I should constuct ;;the varient list of revpre! ;;step1 car the current tup ;;step2 and put it into the list of revpre ;;step3 watch the index it on the list of revpre ;;step4 put the index value into the results! ok! ;;;;;;;;;;;;;;;;;;;;;;;The sixth part;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; ; Chapter 11 of The Seasoned Schemer: ; Welcome Back to the Show ; ; Code examples assemled by Peteris Krumins (peter@catonmat.net). ; His blog is at http://www.catonmat.net -- good coders code, great reuse. ; ; Get yourself this wonderful book at Amazon: http://bit.ly/8cyjgw ; ; Remember member? from The Little Schemer? (http://bit.ly/4GjWdP) ; It finds if an element 'a' is in a list of atoms 'lat'. ; (define member? (lambda (a lat) (cond ((null? lat) #f) (else (or (eq? a (car lat)) (member? a (cdr lat))))))) ; member? helper function ; (define member1? (lambda (a l) (letrec ((yes? (lambda (l) (cond ((null? l) #f) ((eq? (car l) a) #t) (else (yes? (cdr l))))))) (yes? l)))) ; is-first? function finds out whether the next element in lat, if there is ; one, is identical to this element. ; (define is-first? (lambda (a lat) (cond ((null? lat) #f) (else (eq? (car lat) a))))) ; two-in-a-row? function determines whether any atom occurs twice in a row. ; (define two-in-a-row? (lambda (lat) (cond ((null? lat) #f) (else (or (is-first? (car lat) (cdr lat)) (two-in-a-row? (cdr lat))))))) ; Examples of two-in-a-row? ; (two-in-a-row? '(Italian sardines spaghetti parsley)) ; false (two-in-a-row? '(Italian sardines sardines spaghetti parsley)) ; true (two-in-a-row? '(Italian sardines more sardines spaghetti)) ; false ; Another version of two-in-a-row? that leaves decision of what to do to ; is-first-b? ; (define two-in-a-row-2? (lambda (lat) (cond ((null? lat) #f) (else (is-first-b? (car lat) (cdr lat)))))) ; is-first-b? function for two-in-a-row-2? ; (define is-first-b? (lambda (a lat) (cond ((null? lat) #f) (else (or (eq? (car lat) a) (two-in-a-row-2? lat)))))) ; Examples of two-in-a-row-2? ; (two-in-a-row-2? '(Italian sardines spaghetti parsley)) ; false (two-in-a-row-2? '(Italian sardines sardines spaghetti parsley)) ; true (two-in-a-row-2? '(Italian sardines more sardines spaghetti)) ; false ; Another version of two-in-a-row? that recurs itself instead of using ; is-first? ; (define two-in-a-row-b? (lambda (preceding lat) (cond ((null? lat) #f) (else (or (eq? (car lat) preceding) (two-in-a-row-b? (car lat) (cdr lat))))))) ; The final version of two-in-a-row? ; (define two-in-a-row-final? (lambda (lat) (cond ((null? lat) #f) (else (two-in-a-row-b? (car lat) (cdr lat)))))) (two-in-a-row-final? '(Italian sardines spaghetti parsley)) ; false (two-in-a-row-final? '(Italian sardines sardines spaghetti parsley)) ; true (two-in-a-row-final? '(Italian sardines more sardines spaghetti)) ; false ; Helper function for upcoming sum-of-prefixes function ; (define sum-of-prefixes-b (lambda (sonssf tup) ; sonssf stands for 'sum of numbers seen so far' (cond ((null? tup) '()) (else (cons (+ sonssf (car tup)) (sum-of-prefixes-b (+ sonssf (car tup)) (cdr tup))))))) ; sum-of-prefixes function finds the running sum of a list of numbers ; (define sum-of-prefixes (lambda (tup) (sum-of-prefixes-b 0 tup))) ; Examples of sum-of-prefixes ; (sum-of-prefixes '(2 1 9 17 0)) ; '(2 3 12 29 29) (sum-of-prefixes '(1 1 1 1 1)) ; '(1 2 3 4 5) (sum-of-prefixes '(1 1 1)) ; '(1 2 3) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; ; ; The eleventh commandment ; ; ; ; Use additional arguments when a function needs to know what the other ; ; arguments to the function have been like so far. ; ; ; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; Remember the pick function from chapter 4 of The Little Schemer? ; (define pick (lambda (n lat) (cond ((one? n) (car lat)) (else (pick (sub1 n) (cdr lat)))))) ; It uses one? and sub1 helper functions ; (define one? (lambda (n) (= n 1))) (define sub1 (lambda (n) (- n 1))) ; scramble-b is a helper function for scramble ; (define scramble-b (lambda (tup rev-pre) (cond ((null? tup) '()) (else (cons (pick (car tup) (cons (car tup) rev-pre)) (scramble-b (cdr tup) (cons (car tup) rev-pre))))))) ; scramble (define scramble (lambda (tup) (scramble-b tup '()))) ; Examples of scramble ; (scramble '(1 1 1 3 4 2 1 1 9 2)) ; '(1 1 1 1 1 4 1 1 1 9) (scramble '(1 2 3 4 5 6 7 8 9)) ; '(1 1 1 1 1 1 1 1 1) (scramble '(1 2 3 1 2 3 4 1 8 2 10)) ; '(1 1 1 1 1 1 1 1 2 8 2) ; ; Chapter 12 of The Seasoned Schemer: ; Take Cover ; ; Code examples assemled by Peteris Krumins (peter@catonmat.net). ; His blog is at http://www.catonmat.net -- good coders code, great reuse. ; ; Get yourself this wonderful book at Amazon: http://bit.ly/8cyjgw ; ; add1 primitive ; (define add1 (lambda (x) (+ x 1))) ; The Y-combinator ; (define Y (lambda (le) ((lambda (f) (f f)) (lambda (f) (le (lambda (x) ((f f) x))))))) ; length function written via Y-combinator and applied to '(a b c) ; ((Y (lambda (length) (lambda (l) (cond ((null? l) 0) (else (add1 (length (cdr l)))))))) '(a b c)) ; produces output 3 ; No need to pass 'a' around in multirember ; Use Y-combinator not to pass it around ; (define multirember (lambda (a lat) ((Y (lambda (mr) (lambda (lat) (cond ((null? lat) '()) ((eq? a (car lat)) (mr (cdr lat))) (else (cons (car lat) (mr (cdr lat)))))))) lat))) ; Example of multirember ; (multirember 'a '(a b c a a a x)) ; '(b c x) ; multirember via letrec ; (define multirember-letrec (lambda (a lat) ((letrec ((mr (lambda (lat) (cond ((null? lat) '()) ((eq? a (car lat)) (mr (cdr lat))) (else (cons (car lat) (mr (cdr lat)))))))) mr) lat))) ; Example of multirember-letrec ; (multirember-letrec 'a '(a b c a a a x)) ; '(b c x) ; Structure of letrec ; ; ((letrec ((mr ...)) mr) values) ; Another way to write multirember via letrec ; (define multirember-letrec-2 (lambda (a lat) (letrec ((mr (lambda (lat) (cond ((null? lat) '()) ((eq? a (car lat)) (mr (cdr lat))) (else (cons (car lat) (mr (cdr lat)))))))) (mr lat)))) ; Another test of applying multirember-letrec-2 ; (multirember-letrec-2 'a '(a b c a a a x)) ; '(b c x) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; ; ; The twelfth commandment ; ; ; ; Use (letrec ...) to remove arguments that do not change for recursive ; ; applications. ; ; ; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; Yet another way to write multirember via letrec ; (define multirember-letrec-3 (letrec ((mr (lambda (a lat) (cond ((null? lat) '()) ((eq? (car lat) a) (mr a (cdr lat))) (else (cons (car lat) (mr a (cdr lat)))))))) mr)) ; Test multirember-letrec-3 ; (multirember-letrec-3 'a '(a b c a a a x)) ; '(b c x) ; The member? function determines if the given element is in the list ; (define member? (lambda (a lat) (cond ((null? lat) #f) ((eq? (car lat) a) #t) (else (member? a (cdr lat)))))) ; Test member? ; (member? 'x '(a b c x d e f)) ; #t (member? 'x '(a b c d e f)) ; #f ; member? via letrec ; (define member-letrec? (lambda (a l) ((letrec ((yes? (lambda (l) (cond ((null? l) #f) ((eq? (car l) a) #t) (else (yes? (cdr l))))))) yes?) l))) ; Test member-letrec? ; (member-letrec? 'x '(a b c x d e f)) ; #t (member-letrec? 'x '(a b c d e f)) ; #f ; Another member? via letrec ; (define member-letrec-2? (lambda (a l) (letrec ((yes? (lambda (l) (cond ((null? l) #f) ((eq? (car l) a) #t) (else (yes? (cdr l))))))) (yes? l)))) ; Test member-letrec-2? ; (member-letrec-2? 'x '(a b c x d e f)) ; #t (member-letrec-2? 'x '(a b c d e f)) ; #f ; The union function takes two sets and merges them ; (define union (lambda (set1 set2) (cond ((null? set1) set2) ((member? (car set1) set2) (union (cdr set1) set2)) (else (cons (car set1) (union (cdr set1) set2)))))) ; Example of union ; (union '(tomatoes and macaroni casserole) '(macaroni and cheese)) ; '(tomatoes and macaroni casserole cheese) ; union via letrec ; (define union-letrec (lambda (set1 set2) (letrec ((U (lambda (set) (cond ((null? set) set2) ((member? (car set) set2) (U (cdr set))) (else (cons (car set) (U (cdr set)))))))) (U set1)))) ; Test of union-letrec ; (union-letrec '(tomatoes and macaroni casserole) '(macaroni and cheese)) ; '(tomatoes and macaroni casserole cheese) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; ; ; The thirteenth commandment ; ; ; ; Use (letrec ...) to hide and to protect functions. ; ; ; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; (define union-letrec-protected (lambda (set1 set2) (letrec ((U (lambda (set) (cond ((null? set) set2) ((M? (car set) set2) (U (cdr set))) (else (cons (car set) (U (cdr set))))))) (M? (lambda (a lat) (cond ((null? lat) #f) ((eq? (car lat) a) #t) (else (M? a (cdr lat))))))) (U set1)))) ; Test of union-letrec-protected ; (union-letrec-protected '(tomatoes and macaroni casserole) '(macaroni and cheese)) ; '(tomatoes and macaroni casserole cheese) ; Fixing M? to follow 12th commandment ; (define union-letrec-protected-12 (lambda (set1 set2) (letrec ((U (lambda (set) (cond ((null? set) set2) ((M? (car set) set2) (U (cdr set))) (else (cons (car set) (U (cdr set))))))) (M? (lambda (a lat) (letrec ((N? (lambda (lat) (cond ((null? lat) #f) ((eq? (car lat) a) #t) (else (N? (cdr lat))))))) (N? lat))))) (U set1)))) ; Test of union-letrec-protected-12 ; (union-letrec-protected-12 '(tomatoes and macaroni casserole) '(macaroni and cheese)) ; '(tomatoes and macaroni casserole cheese) ; The two-in-a-row? checks if a lat contains two equal elements ; (define two-in-a-row? (lambda (lat) (letrec ((W (lambda (a lat) (cond ((null? lat) #f) ((eq? a (car lat)) #t) (else (W (car lat) (cdr lat))))))) (cond ((null? lat) #f) (else (W (car lat) (cdr lat))))))) ; Test two-in-a-row? ; (two-in-a-row? '(Italian sardines spaghetti parsley)) ; #f (two-in-a-row? '(Italian sardines sardines spaghetti parsley)) ; #t (two-in-a-row? '(Italian sardines more sardines spaghetti)) ; #f ; Another version of two-in-a-row? ; (define two-in-a-row-2? (letrec ((W (lambda (a lat) (cond ((null? lat) #f) ((eq? a (car lat)) #t) (else (W (car lat) (cdr lat))))))) (lambda (lat) (cond ((null? lat) #f) (else (W (car lat) (cdr lat))))))) ; Test two-in-a-row-2? ; (two-in-a-row-2? '(Italian sardines spaghetti parsley)) ; #f (two-in-a-row-2? '(Italian sardines sardines spaghetti parsley)) ; #t (two-in-a-row-2? '(Italian sardines more sardines spaghetti)) ; #f ; The sum-of-prefixes finds the running sum of a list of numbers ; (define sum-of-prefixes (lambda (tup) (letrec ((S (lambda (sss tup) (cond ((null? tup) '()) (else (cons (+ sss (car tup)) (S (+ sss (car tup)) (cdr tup)))))))) (S 0 tup)))) ; Examples of sum-of-prefixes ; (sum-of-prefixes '(2 1 9 17 0)) ; '(2 3 12 29 29) (sum-of-prefixes '(1 1 1 1 1)) ; '(1 2 3 4 5) (sum-of-prefixes '(1 1 1)) ; '(1 2 3) (define intersect (lambda (set1 set2) (cond ((null? set1) '()) ; don't forget the 1st commandment ((member? (car set1) set2) (cons (car set1) (intersect (cdr set1) set2))) (else (intersect (cdr set1) set2))))) ; It needs member? helper function ; (define member? (lambda (a l) (letrec ((yes? (lambda (l) (cond ((null? l) #f) ((eq? (car l) a) #t) (else (yes? (cdr l))))))) (yes? l)))) ; Examples of intersect ; (intersect '(a b x c d) '(q w e x r t y a)) ; '(a x) (intersect '(a b x c d) '()) ; '() (intersect '() '()) ; '() (intersect '() '(a b x c d)) ; '() (intersect '(a b x c d) '(a b x c d)) ; '(a b x c d) ; We forgot the 12th commandment - use letrec to remove arguments ; that do not change for recursive applications ; (define intersect-letrec (lambda (set1 set2) (letrec ((I (lambda (set) (cond ((null? set) '()) ((member? (car set) set2) (cons (car set) (I (cdr set)))) (else (I (cdr set))))))) (I set1)))) ; Test of intersect-letrec ; (intersect-letrec '(a b x c d) '(q w e x r t y a)) ; '(a x) (intersect-letrec '(a b x c d) '()) ; '() (intersect-letrec '() '()) ; '() (intersect-letrec '() '(a b x c d)) ; '() (intersect-letrec '(a b x c d) '(a b x c d)) ; '(a b x c d) ; The intersectall function finds intersect of a bunch of sets ; (define intersectall (lambda (lset) (cond ((null? lset) '()) ((null? (cdr lset)) (car lset)) (else (intersect (car lset) (intersectall (cdr lset))))))) ; Examples of intersectall ; Examples of intersectall ; (intersectall '((a) (a) (a))) ; '(a) (intersectall '((a) () (a))) ; '() (intersectall '()) ; '() (intersectall '((a b c d) (b c d e) (c d e f))) ; '(c d) (define intersectall-letrec (lambda (lset) (letrec ((A (lambda (lset) (cond ((null? (cdr lset)) (car lset)) (else (intersect (car lset) (A (cdr lset)))))))) (cond ((null? lset) '()) (else (A lset)))))) ; Tests of intersectall-letrec ; (intersectall-letrec '((a) (a) (a))) ; '(a) (intersectall-letrec '((a) () (a))) ; '() (intersectall-letrec '()) ; '() (intersectall-letrec '((a b c d) (b c d e) (c d e f))) ; '(c d) ; Introducing letcc ; (define intersectall-letcc (lambda (lset) (call-with-current-continuation (lambda (hop) (letrec ((A (lambda (lset) (cond ((null? (car lset)) (hop '())) ((null? (cdr lset)) (car lset)) (else (intersect (car lset) (A (cdr lset)))))))) (cond ((null? lset) '()) (else (A lset)))))))) ; Tests of intersectall-letcc ; (intersectall-letcc '((a) (a) (a))) ; '(a) (intersectall-letcc '((a) () (a))) ; '() (intersectall-letcc '()) ; '() (intersectall-letcc '((a b c d) (b c d e) (c d e f))) ; '(c d) ; intersectall that returns abruptly and promptly ; (define intersectall-ap (lambda (lset) (call-with-current-continuation (lambda (hop) (letrec ((A (lambda (lset) (cond ;;;hop one ((null? (car lset)) (hop '())) ((null? (cdr lset)) (car lset)) (else (I (car lset) (A (cdr lset))))))) (I (lambda (s1 s2) (letrec ((J (lambda (s1) (cond ((null? s1) '()) ((member? (car s1) s2) ;;;get the one you need (cons (car s1) (J (cdr s1)))) (else (J (cdr s1))))))) (cond ;;;hop two ((null? s2) (hop '())) (else (J s1))))))) (cond ((null? lset) '()) (else (A lset)))))))) ; Tests of intersectall-ap ; (intersectall-ap '((a) (a) (a))) ; '(a) (intersectall-ap '((a) () (a))) ; '() (intersectall-ap '()) ; '() (intersectall-ap '((a b c d) (b c d e) (c d e f))) ; '(c d) ; rember function via letrec ; ; ; ; Chapter 14 of The Seasoned Schemer: ; Let There Be Names ; ; Code examples assemled by Peteris Krumins (peter@catonmat.net). ; His blog is at http://www.catonmat.net -- good coders code, great reuse. ; ; Get yourself this wonderful book at Amazon: http://bit.ly/8cyjgw ; ; atom? primitive ; (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) ; add1 primitive ; (define add1 (lambda (n) (+ n 1))) ; The leftmost function finds the leftmost atom in a non-empty list of ; s-expressions that does not contain the empty list. ; (define leftmost (lambda (l) (cond ((atom? (car l)) (car l)) (else (leftmost (car l)))))) ; Example of leftmost ; (leftmost '(((a) b) (c d))) ; 'a ; Example of not-applicable leftmost ; ; (leftmost '((() a) ())) ; not applicable because leftmost item is an empty list ; Let's fix this. ; (define leftmost-fixed (lambda (l) (cond ((null? l) '()) ((atom? (car l)) (car l)) (else (cond ((atom? (leftmost-fixed (car l))) (leftmost-fixed (car l))) (else (leftmost-fixed (cdr l)))))))) ; Examples of leftmost-fixed ; (leftmost-fixed '(((x) b) (c d))) ; 'x (leftmost-fixed '(((x) ()) () (e))) ; 'x (leftmost-fixed '(((() x) ()))) ; 'x (leftmost-fixed '(((()) ()))) ; '() (define leftmost-let (lambda (l) (cond ((null? l) '()) ((atom? (car l)) (car l)) (else (let ((a (leftmost-let (car l)))) (cond ((atom? a) a) (else (leftmost-let (cdr l))))))))) ; Tests of leftmost-let ; (leftmost-let '(((y) b) (c d))) ; 'y (leftmost-let '(((y) ()) () (e))) ; 'y (leftmost-let '(((() y) ()))) ; 'y (leftmost-let '(((()) ()))) ; '() ; The rember1* function removes the leftmost occurrence of a in l ; (define rember1* (lambda (a l) (cond ((null? l) '()) ((atom? (car l)) (cond ((eq? (car l) a) (cdr l)) (else (cons (car l) (rember1* a (cdr l)))))) (else (cond ((equal? (rember1* a (car l)) (car l)) ; if the list with 'a' removed doesn't change (cons (car l) (rember1* a (cdr l)))) ; then recurse (else (cons (rember1* a (car l)) (cdr l)))))))) ; otherwise remove 'a' ; Examples of rember1* ; (rember1* 'salad '((Swedish rye) (French (mustard salad turkey)) salad)) ; ==\u0026gt; '((Swedish rye) (French (mustard turkey)) salad) (rember1* 'meat '((pasta meat) pasta (noodles meat sauce) meat tomatoes)) ; ==\u0026gt; '((pasta) pasta (noodles meat sauce) meat tomatoes) ; rember1* rewritten using the 12th commandment ; (define rember1*-letrec (lambda (a l) (letrec ((R (lambda (l) (cond ((null? l) '()) ((atom? (car l)) (cond ((eq? (car l) a) (cdr l)) (else (cons (car l) (R (cdr l)))))) (else (cond ((equal? (R (car l)) (car l)) ; if the list with 'a' removed doesn't change (cons (car l) (R (cdr l)))) ; then recurse (else (cons (R (car l)) (cdr l))))))))) ; otherwise remove 'a' (R l)))) ; Tests of rember1*-letrec ; (rember1*-letrec 'salad '((Swedish rye) (French (mustard salad turkey)) salad)) ; ==\u0026gt; '((Swedish rye) (French (mustard turkey)) salad) (rember1*-letrec 'meat '((pasta meat) pasta (noodles meat sauce) meat tomatoes)) ; ==\u0026gt; '((pasta) pasta (noodles meat sauce) meat tomatoes) ; rember* rewritten using the 12th commandment and let ; (define rember1*-letrec-let (lambda (a l) (letrec ((R (lambda (l) (cond ((null? l) '()) ((atom? (car l)) (cond ((eq? (car l) a) (cdr l)) (else (cons (car l) (R (cdr l)))))) (else (let ((av (R (car l)))) (cond ((equal? (car l) av) ; if the list with 'a' removed didn't change (cons (car l) (R (cdr l)))) ; then recurse (else (cons av (cdr l)))))))))) ; otherwise remove 'a' (R l)))) ; Tests of rember1*-letrec-let ; (rember1*-letrec-let 'salad '((Swedish rye) (French (mustard salad turkey)) salad)) ; ==\u0026gt; '((Swedish rye) (French (mustard turkey)) salad) (rember1*-letrec-let 'meat '((pasta meat) pasta (noodles meat sauce) meat tomatoes)) ; ==\u0026gt; '((pasta) pasta (noodles meat sauce) meat tomatoes) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; ; ; The fifteenth commandment (preliminary version) ; ; ; ; Use (let ...) to name the values of repeated expressions. ; ; ; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; The depth* function finds the max depth of an s-expression ; (define depth* (lambda (l) (cond ((null? l) 1) ((atom? (car l)) (depth* (cdr l))) (else (cond ((\u0026gt; (depth* (cdr l)) (add1 (depth* (car l)))) (depth* (cdr l))) (else (add1 (depth* (car l))))))))) ; Examples of depth* ; (depth* '((pickled) peppers (peppers pickled))) ; 2 (depth* '(margarine ((bitter butter) (makes) (batter (bitter))) butter)) ; 4 (depth* '(c (b (a b) a) a)) ; 3 ; depth* rewritten using let ; (define depth*-let (lambda (l) (cond ((null? l) 1) ((atom? (car l)) (depth*-let (cdr l))) (else (let ((a (add1 (depth*-let (car l)))) (d (depth*-let (cdr l)))) (cond ((\u0026gt; d a) d) (else a))))))) ; Tests of depth*-let ; (depth*-let '((pickled) peppers (peppers pickled))) ; 2 (depth*-let '(margarine ((bitter butter) (makes) (batter (bitter))) butter)) ; 4 (depth*-let '(c (b (a b) a) a)) ; 3 ; Another version of depth* ; (define depth*-let-2 (lambda (l) (cond ((null? l) 1) (else (let ((d (depth*-let-2 (cdr l)))) (cond ((atom? (car l)) d) (else (let ((a (add1 (depth*-let-2 (car l))))) (cond ((\u0026gt; d a) d) (else a)))))))))) ; Tests of depth*-let ; (depth*-let-2 '((pickled) peppers (peppers pickled))) ; 2 (depth*-let-2 '(margarine ((bitter butter) (makes) (batter (bitter))) butter)) ; 4 (depth*-let-2 '(c (b (a b) a) a)) ; 3 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; ; ; The fifteenth commandment (revised version) ; ; ; ; Use (let ...) to name the values of repeated expressions in a function ; ; definition if they may be evaluated twice for one and the same use of the ; ; function. ; ; ; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; depth* via if ; (define depth*-if (lambda (l) (cond ((null? l) 1) ((atom? (car l)) (depth*-if (cdr l))) (else (let ((a (add1 (depth* (car l)))) (d (depth* (cdr l)))) (if (\u0026gt; d a) d a)))))) ; Tests of depth*-if ; (depth*-if '((pickled) peppers (peppers pickled))) ; 2 (depth*-if '(margarine ((bitter butter) (makes) (batter (bitter))) butter)) ; 4 (depth*-if '(c (b (a b) a) a)) ; 3 ; depth* via max ; (define depth*-max (lambda (l) (cond ((null? l) 1) ((atom? (car l)) (depth*-max (cdr l))) (else (max (add1 (depth*-max (car l))) (depth*-max (cdr l))))))) ; Tests of depth*-max ; (depth*-max '((pickled) peppers (peppers pickled))) ; 2 (depth*-max '(margarine ((bitter butter) (makes) (batter (bitter))) butter)) ; 4 (depth*-max '(c (b (a b) a) a)) ; 3 ; Not interested in scramble problem, skipping it. ; leftmost via letcc ; (define leftmost-letcc (lambda (l) (call-with-current-continuation (lambda (skip) (lm l skip))))) ; lm is leftmost-letcc's helper function ; (define lm (lambda (l out) (cond ((null? l) '()) ((atom? (car l)) (out (car l))) (else (let () ; can also use 'begin' (lm (car l) out) (lm (cdr l) out)))))) (leftmost-letcc '(((x) b) (c d))) ; 'x (leftmost-letcc '(((x) ()) () (e))) ; 'x (leftmost-letcc '(((() x) ()))) ; 'x (leftmost-letcc '(((()) ()))) ; '() ; letfmost following 13th and 14th commandments ; (define leftmost-1314 (letrec ((lm (lambda (l out) (cond ((null? l) '()) ((atom? (car l)) (out (car l))) (else (begin (lm (car l) out) (lm (cdr l) out))))))) (lambda (l) (call-with-current-continuation (lambda (skip) (lm l skip)))))) (leftmost-1314 '(((x) b) (c d))) ; 'x (leftmost-1314 '(((x) ()) () (e))) ; 'x (leftmost-1314 '(((() x) ()))) ; 'x (leftmost-1314 '(((()) ()))) ; '() ; another way to follow 13th and 14th commandments ; (define leftmost-13142 (lambda (l) (letrec ((lm (lambda (l out) (cond ((null? l) '()) ((atom? (car l)) (out (car l))) (else (begin (lm (car l) out) (lm (cdr l) out))))))) (call-with-current-continuation (lambda (skip) (lm l skip)))))) (leftmost-13142 '(((x) b) (c d))) ; 'x (leftmost-13142 '(((x) ()) () (e))) ; 'x (leftmost-13142 '(((() x) ()))) ; 'x (leftmost-13142 '(((()) ()))) ; '() ; yet another way ; (define leftmost-131422 (lambda (l) (call-with-current-continuation (lambda (skip) (letrec ((lm (lambda (l) (cond ((null? l) '()) ((atom? (car l)) (skip (car l))) (else (begin (lm (car l)) (lm (cdr l)))))))) (lm l)))))) (leftmost-131422 '(((x) b) (c d))) ; 'x (leftmost-131422 '(((x) ()) () (e))) ; 'x (leftmost-131422 '(((() x) ()))) ; 'x (leftmost-131422 '(((()) ()))) ; '() ; rember1* via letcc ; (define rember1*-letcc (lambda (a l) (letrec ((rm (lambda (a l oh) (cond ((null? l) (oh 'no)) ((atom? (car l)) (if (eq? (car l) a) (cdr l) (cons (car l) (rm a (cdr l) oh)))) (else (let ((new-car (call-with-current-continuation (lambda (oh) (rm a (car l) oh))))) (if (atom? new-car) (cons (car l) (rm a (cdr l) oh)) (cons new-car (cdr l))))))))) (let ((new-l (call-with-current-continuation (lambda (oh) (rm a l oh))))) (if (atom? new-l) l new-l))))) ; Tests of rember1*-letcc ; (rember1*-letcc 'salad '((Swedish rye) (French (mustard salad turkey)) salad)) ; ==\u0026gt; '((Swedish rye) (French (mustard turkey)) salad) (rember1*-letcc 'meat '((pasta meat) pasta (noodles meat sauce) meat tomatoes)) ; ==\u0026gt; '((pasta) pasta (noodles meat sauce) meat tomatoes) (rember1*-letcc 'a '((foo bar) baz)) ; ==\u0026gt; '((foo bar) baz) ; ; Chapter 16 of The Seasoned Schemer: ; Ready, Set, Bang! ; ; Code examples assemled by Peteris Krumins (peter@catonmat.net). ; His blog is at http://www.catonmat.net -- good coders code, great reuse. ; ; Get yourself this wonderful book at Amazon: http://bit.ly/8cyjgw ; ; sub1 primitive ; (define sub1 (lambda (n) (- n 1))) ; add1 primitive ; (define add1 (lambda (n) (+ n 1))) ; atom? primitive ; (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) ; member? helper function ; (define member? (lambda (a l) (letrec ((yes? (lambda (l) (cond ((null? l) #f) ((eq? (car l) a) #t) (else (yes? (cdr l))))))) (yes? l)))) ; Code examples start here ; (define sweet-tooth (lambda (food) (cons food (cons 'cake '())))) (define last 'angelfood) (sweet-tooth 'fruit) ; '(fruit cake) last ; 'angelfood ; The sweet-toothL function saves the last food ; (define sweet-toothL (lambda (food) (set! last food) (cons food (cons 'cake '())))) (sweet-toothL 'chocolate) ; '(chocolate cake) last ; 'chocolate (sweet-toothL 'fruit) ; '(fruit cake) last ; 'fruit (define ingredients '()) ; The sweet-toothR function builds a list of foods ; (define sweet-toothR (lambda (food) (set! ingredients (cons food ingredients)) (cons food (cons 'cake '())))) (sweet-toothR 'chocolate) ; '(chocolate cake) ingredients ; '(chocolate) (sweet-toothR 'fruit) ; '(fruit cake) ingredients ; '(fruit chocolate) (sweet-toothR 'cheese) ; '(cheese cake) ingredients ; '(cheese fruit chocolate) (sweet-toothR 'carrot) ; '(carrot cake) ingredients ; '(carrot cheese fruit chocolate) ; The deep function wraps pizza in n parenthesis ; (define deep (lambda (m) (cond ((zero? m) 'pizza) (else (cons (deep (sub1 m)) '()))))) ; Example of deep ; (deep 3) ; '(((pizza))) (deep 0) ; 'pizza ; The deepR1 function remembers the numbers deep has seen so far ; (define Ns1 '()) (define deepR1 (lambda (n) (set! Ns1 (cons n Ns1)) (deep n))) ; Examples of deepR1 ; (deepR1 3) ; '(((pizza))) Ns1 ; (3) (deepR1 0) ; 'pizza Ns1 ; (0 3) ; The deepR function remembers the numbers and the results ; (define Ns '()) (define Rs '()) (define deepR (lambda (n) (let ((result (deep n))) (set! Ns (cons n Ns)) (set! Rs (cons result Rs)) result))) ; Examples of deepR ; (deepR 3) ; '(((pizza))) Ns ; '(3) Rs ; '((((pizza)))) (deepR 5) ; '(((((pizza))))) Ns ; '(5 3) Rs ; '((((((pizza))))) (((pizza)))) (deepR 3) ; '(((pizza))) Ns ; '(3 5 3) Rs ; '((((pizza))) (((((pizza))))) (((pizza)))) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; ; ; The nineteenth commandment ; ; ; ; Use (set! ...) to remember valuable things between two distinct uses of a ; ; function. ; ; ; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; The find function finds pizza in Rs ; (define find (lambda (n Ns Rs) (letrec ((A (lambda (ns rs) (cond ((= (car ns) n) (car rs)) (else (A (cdr ns) (cdr rs))))))) (A Ns Rs)))) ; Examples of find ; (find 3 Ns Rs) ; '(((pizza))) (find 5 Ns Rs) ; '(((((pizza))))) ;(find 7 Ns Rs) ; not applicable at this time ; The deepM function either uses find or computes pizza (temporary version) ; (define deepM-tmp (lambda (n) (if (member? n Ns) (find n Ns Rs) (deepR n)))) Ns ; '(3 5 3) Rs ; '((((pizza))) (((((pizza))))) (((pizza)))) (set! Ns (cdr Ns)) (set! Rs (cdr Rs)) Ns ; '(5 3) Rs ; '((((((pizza))))) (((pizza)))) ; The final deepM version ; (define deepM (lambda (n) (if (member? n Ns) (find n Ns Rs) (let ((result (deep n))) (set! Rs (cons result Rs)) (set! Ns (cons n Ns)) result)))) ; Examples of deepM (deepM 3) ; '(((pizza))) (deepM 6) ; '((((((pizza)))))) ; Redefining deep ; (define deep (lambda (m) (cond ((zero? m) 'pizza) (else (cons (deepM (sub1 m)) '()))))) (deepM 9) ; '(((((((((pizza))))))))) Ns ; '(9 8 7 6 5 3) ; Redefining deepM to folow 16th commandment ; (define deepM (let ((Rs '()) (Ns '())) (lambda (n) (if (member? n Ns) (find n Ns Rs) (let ((result (deep n))) (set! Rs (cons result Rs)) (set! Ns (cons n Ns)) result))))) ; Tests of the new deepM ; (deepM 10) ; '((((((((((pizza)))))))))) (deepM 16) ; '((((((((((((((((pizza)))))))))))))))) ; Better answer for find on empty lists ; (define find (lambda (n Ns Rs) (letrec ((A (lambda (ns rs) (cond ((null? ns) #f) ((= (car ns) n) (car rs)) (else (A (cdr ns) (cdr rs))))))) (A Ns Rs)))) ; And a better deepM ; (define deepM (let ((Rs '()) (Ns '())) (lambda (n) (let ((exists (find n Ns Rs))) (if (atom? exists) (let ((result (deep n))) (set! Rs (cons result Rs)) (set! Ns (cons n Ns)) result) exists))))) ; Example of the new deepM ; (deepM 10) ; '((((((((((pizza)))))))))) (deepM 16) ; '((((((((((((((((pizza)))))))))))))))) (deepM 0) ; 'pizza ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; ; ; Take a deep breath or a deep pizza, now. ; ; ; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; Our good, old friend length ; (define lengthz (lambda (l) (cond ((null? l) 0) (else (add1 (lengthz (cdr l))))))) ; Test length ; (lengthz '()) ; 0 (lengthz '(a b x)) ; 3 ; length via set! ; (define lengthz (lambda (l) 0)) (set! lengthz (lambda (l) (cond ((null? l) 0) (else (add1 (lengthz (cdr l))))))) ; Test length ; (lengthz '()) ; 0 (lengthz '(a b x)) ; 3 ; length via set! again ; (define lengthz (let ((h (lambda (l) 0))) (set! h (lambda (l) (cond ((null? l) 0) (else (add1 (h (cdr l))))))) h)) ; Test length ; (lengthz '()) ; 0 (lengthz '(a b x)) ; 3 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; ; ; The seventeenth commandment (final version) ; ; ; ; Use (set! x ...) for (let ((x ...)) ...) only if there is at least one ; ; (lambda ... between it and the (let ...), or if the new value for x is a ; ; function that refers to x ; ; ; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; Another way to write length ; (define h1 ; h1 is actually an anonymous name (lambda (l) 0)) (define lengthz (let () (set! h1 (lambda (l) (cond ((null? l) 0) (else (add1 (h1 (cdr l))))))) h1)) ; Test length ; (lengthz '()) ; 0 (lengthz '(a b x)) ; 3 ; Another way ; (define h2 ; h2 is actually an anonymous name (lambda (l) (cond ((null? l) 0) (else (add1 (h2 (cdr l))))))) (define lengthz (let () h2)) ; Test length ; (lengthz '()) ; 0 (lengthz '(a b x)) ; 3 ; length again ; (define lengthz (let ((h (lambda (l) 0))) (set! h (lambda (l) (cond ((null? l) 0) (else (add1 (h (cdr l))))))) h)) ; Test length ; (lengthz '()) ; 0 (lengthz '(a b x)) ; 3 ; Let's eliminate parts that are specific to length ; (define L (lambda (lengthz) (lambda (l) (cond ((null? l) 0) (else (add1 (lengthz (cdr l)))))))) (define lengthz (let ((h (lambda (l) 0))) (set! h (L (lambda (arg) (h arg)))) h)) ; Test length ; (lengthz '()) ; 0 (lengthz '(a b x)) ; 3 ; Y-bang - the applicative-order imperative y-combinator ; (discovered by Peter Landin) ; (define Y-bang (lambda (f) (letrec ((h (f (lambda (arg) (h arg))))) h))) (define lengthz (Y-bang L)) ; Test length ; (lengthz '()) ; 0 (lengthz '(a b x)) ; 3 ; depth* via Y-bang ; (define D (lambda (depth*) (lambda (s) (cond ((null? s) 1) ((atom? (car s)) (depth* (cdr s))) (else (max (add1 (depth* (car s))) (depth* (cdr s)))))))) (define depth* (Y-bang D)) ; Test depth* ; (depth* '()) ; 1 (depth* '(((pizza)) ())) ; 3 ; The bizarre function ; (define biz (let ((x 0)) (lambda (f) (set! x (add1 x)) (lambda (a) (if (= a x) 0 (f a)))))) ; Another way to write bizarre ; (define x1 0) ; anonymous var (define biz (lambda (f) (set! x1 (add1 x1)) (lambda (a) (if (= a x1) 0 (f a))))) ; The Y-Combinator ; (define Y (lambda (le) ((lambda (f) (f f)) (lambda (f) (le (lambda (x) ((f f) x))))))) ((Y biz) 5) ; ((Y-bang biz) 5) ; doesn't compute... why? ; ; Chapter 17 of The Seasoned Schemer: ; We Change, Therefore We Are! ; ; Code examples assemled by Peteris Krumins (peter@catonmat.net). ; His blog is at http://www.catonmat.net -- good coders code, great reuse. ; ; Get yourself this wonderful book at Amazon: http://bit.ly/8cyjgw ; ; The atom? primitive ; (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) ; The sub1 primitive ; (define sub1 (lambda (n) (- n 1))) ; The add1 primitive ; (define add1 (lambda (n) (+ n 1))) ; The deep function wraps pizza in m parenthesis ; (define deep (lambda (m) (if (zero? m) 'pizza (cons (deep (sub1 m)) '())))) ; Examples of deep ; (deep 3) ; '(((pizza))) (deep 0) ; 'pizza ; The deepM function remembers calls to deep ; ; The deepM function uses find function to find n in Ns and return ; the correct value from Rs ; (define find (lambda (n Ns Rs) (letrec ((A (lambda (ns rs) (cond ((null? ns) #f) ((= (car Ns) n) (car Rs)) (else (A (cdr ns) (cdr rs))))))) (A Ns Rs)))) (define deepM (let ((Rs '()) (Ns '())) (letrec ((D (lambda (m) (if (zero? m) 'pizza (cons (deepM (sub1 m)) '()))))) (lambda (n) (let ((exists (find n Ns Rs))) (if (atom? exists) (let ((result (D n))) (set! Rs (cons result Rs)) (set! Ns (cons n Ns)) result) exists)))))) ; Examples of deepM ; (deepM 3) ; '(((pizza))) (deepM 0) ; 'pizza ; No need to use letrec in deepM ; (define deepM-letrec (let ((Rs '()) (Ns '()) (D (lambda (m) (if (zero? m) 'pizza (cons (deepM-letrec (sub1 m)) '()))))) (lambda (n) (let ((exists (find n Ns Rs))) (if (atom? exists) (let ((result (D n))) (set! Rs (cons result Rs)) (set! Ns (cons n Ns)) result) exists))))) ; Test of the new deepM ; (deepM-letrec 3) ; '(((pizza))) (deepM-letrec 0) ; 'pizza ; No need for D in deepM ; (define deepM-D (let ((Rs '()) (Ns '())) (lambda (n) (let ((exists (find n Ns Rs))) (if (atom? exists) (let ((result ((lambda (m) (if (zero? m) 'pizza (cons (deepM-D (sub1 m)) '()))) n))) (set! Rs (cons result Rs)) (set! Ns (cons n Ns)) result) exists))))) ; Test of the new deepM ; (deepM-D 3) ; '(((pizza))) (deepM-D 0) ; 'pizza ; No need for the 2nd lambda ; (define deepM-2nd (let ((Rs '()) (Ns '())) (lambda (n) (let ((exists (find n Ns Rs))) (if (atom? exists) (let ((result (if (zero? n) 'pizza (cons (deepM-2nd (sub1 n)) '())))) (set! Rs (cons result Rs)) (set! Ns (cons n Ns)) result) exists))))) ; Test of the new deepM ; (deepM-2nd 3) ; '(((pizza))) (deepM-2nd 0) ; 'pizza ; The consC function counts number of conses needed to build ; n-deep pizza ; (define consC (let ((N 0)) (lambda (x y) (set! N (add1 N)) (cons x y)))) ; No way to get N out of this consC, so we need the counter ; function that will hold the count ; (define counter 0) ; And a modification of consC ; (define consC (let ((N 0)) (set! counter (lambda() N)) (lambda (x y) (set! N (add1 N)) (cons x y)))) ; And we need to modify deep ; (define deep (lambda (m) (if (zero? m) 'pizza (consC (deep (sub1 m)) '())))) (deep 5) ; '(((((pizza))))) (counter) ; 5 (deep 7) ; '(((pizza)) (counter) ; 12 ;;; (5 + 7) ; Let's determine how many cons'es are necessary to find ; values of (deep 0) ... (deep 1000). ; (define supercounter (lambda (f) (letrec ((S (lambda (n) (if (zero? n) (f n) (let () (f n) (S (sub1 n))))))) (S 1000) (counter)))) ; Try out supercounter ; (supercounter deep) ; 500512 ;;; not 500500 as expected ; Need to wipe out counter before using it again ; (define set-counter 0) (define consC (let ((N 0)) (set! counter (lambda() N)) (set! set-counter (lambda (x) (set! N x))) (lambda (x y) (set! N (add1 N)) (cons x y)))) (set-counter 0) ; Try out supercounter again ; (supercounter deep) ; How many conses are used by (deepM 5)? ; Need to modify deepM to use consC first. ; (define deepM-consC (let ((Rs '()) (Ns '())) (lambda (n) (let ((exists (find n Ns Rs))) (if (atom? exists) (let ((result (if (zero? n) 'pizza (consC (deepM-consC (sub1 n)) '())))) (set! Rs (cons result Rs)) (set! Ns (cons n Ns)) result) exists))))) ; How many conses are used by (deepM 5)? ; (deepM 5) ; '(((((pizza))))) (counter) ; 500505 ;;; because we forgot to reset counter (set-counter 0) (deepM-consC 5) ; '(((((pizza))))) (counter) ; 5 (deep 7) ; (counter) ; ??? the book says it should be 0, I get 12, why? (supercounter deepM-consC) ; ??? how did this work? it didn't take an argument? ; Book has also talks about conses in rember* function but I am not interested ; in it at the moment. ; ; Chapter 18 of The Seasoned Schemer: ; We Change, Therefore We Are the Same! ; ; Code examples assemled by Peteris Krumins (peter@catonmat.net). ; His blog is at http://www.catonmat.net -- good coders code, great reuse. ; ; Get yourself this wonderful book at Amazon: http://bit.ly/8cyjgw ; ; The atom? primitive ; (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) ; The sub1 primitive ; (define sub1 (lambda (n) (- n 1))) ; The add1 primitive ; (define add1 (lambda (n) (+ n 1))) ; The lots function creates lots of eggs ; (define lots (lambda (n) (cond ((zero? n) '()) (else (cons 'egg (lots (sub1 n))))))) ; The lenkth function counts the eggs ; (define lenkth (lambda (l) (cond ((null? l) 0) (else (add1 (lenkth (cdr l))))))) ; Examples of lots and lenkth ; (lots 3) ; '(egg egg egg) (lots 5) ; '(egg egg egg egg egg) (lots 12) ; '(egg egg egg egg egg egg egg egg egg egg egg egg) (lenkth (lots 3)) ; 3 (lenkth (lots 5)) ; 5 (lenkth (lots 15)) ; 15 ; Create 4 eggs from 3 eggs ; (cons 'egg (lots 3)) ; '(egg egg egg egg) ; consC, counter, set-counter from chapter 17 ; (define counter (lambda() 0)) (define set-counter (lambda () 0)) (define consC (let ((N 0)) (set! counter (lambda() N)) (set! set-counter (lambda (x) (set! N x))) (lambda (x y) (set! N (add1 N)) (cons x y)))) ; Add an egg at the end ; (define add-at-end (lambda (l) (cond ((null? (cdr l)) (consC (car l) (cons 'egg-end '()))) (else (consC (car l) (add-at-end (cdr l))))))) ; Example of add-at-end ; (add-at-end (lots 3)) ; '(egg egg egg egg-end) (counter) ; 3 ; Add an egg at the end without making any new conses except for the last one ; (define add-at-end-too (lambda (l) (letrec ((A (lambda (ls) (cond ((null? (cdr ls)) (set-cdr! ls (cons 'egg-end2 '()))) (else (A (cdr ls))))))) (A l) l))) ; Example of add-at-end-too ; (set-counter 0) (add-at-end-too (lots 3)) ; '(egg egg egg egg-end2) (counter) ; 0 ; kons the magnificent ; (define kons (lambda (kar kdr) (lambda (selector) ; returns lambda (selector) (selector kar kdr)))) ; calls selector with kar and kdr arguments ; kar ; (define kar (lambda (c) ; applies selector on (a d) and returns 'a (car) (c (lambda (a d) a)))) ; kdr ; (define kdr (lambda (c) ; applies selector on (a d) and returns d (cdr) (c (lambda (a d) d)))) ; Examples of kons kar kdr ; (kar (kons 'a '())) ; 'a (kdr (kons 'a '())) ; '() (kar (kdr (kons 'a (kons 'b '())))) ; 'b (kar (kons 'a (kons 'b '()))) ; 'a ; Another cons ; (define bons (lambda (kar) (let ((kdr '())) (lambda (selector) (selector (lambda (x) (set! kdr x)) kar kdr))))) ; Another kar ; (define bar (lambda (c) (c (lambda (s a d) a)))) ; Another kdr ; (define bdr (lambda (c) (c (lambda (s a d) d)))) ; set-kdr ; (define set-kdr (lambda (c x) ((c (lambda (s a d) s)) x))) ; create kons using set-kdr and bons ; (define kons2 (lambda (a d) (let ((c (bons a))) (set-kdr c d) c))) ; Example of kons2 bar and bdr ; (bar (kons2 'a '(1 2 3))) ; 'a (bdr (kons2 'a '(1 2 3))) ; '(1 2 3) ; Now eggs again ; (define dozen (lots 12)) dozen ; '(egg egg egg egg egg egg egg egg egg egg egg egg) ; used 12 conses (define bakers-dozen (add-at-end dozen)) bakers-dozen ; '(egg egg egg egg egg egg egg egg egg egg egg egg egg-end) ; used 13 conses (25 total now) (define bakers-dozen-too (add-at-end-too dozen)) bakers-dozen-too ; '(egg egg egg egg egg egg egg egg egg egg egg egg egg-end egg-end2) ; used 1 cons (26 total) (define bakers-dozen-again (add-at-end dozen)) bakers-dozen-again ; '(egg egg egg egg egg egg egg egg egg egg egg egg egg-end egg-end2 egg-end) ; used 14 conses (40 total) (define same? (lambda (c1 c2) (cond ((and (null? c1) (null? c2)) #t) ((or (null? c1) (null? c2)) #f) (else (let ((t1 (cdr c1)) (t2 (cdr c2))) (set-cdr! c1 1) (set-cdr! c2 2) (let ((v (= (cdr c1) (cdr c2)))) (set-cdr! c1 t1) (set-cdr! c2 t2) v)))))) (same? dozen dozen) ; #t (same? dozen bakers-dozen) ; #f (same? dozen bakers-dozen-too) ; #t (same? dozen bakers-dozen-again) ; #f (same? bakers-dozen bakers-dozen-too) ; #f ;;; the book says #t??? ; The last-kons function returns the last cons in a non-empty kons-list ; (define last-kons (lambda (ls) (cond ((null? (cdr ls)) ls) (else (last-kons (cdr ls)))))) (define long (lots 12)) ; '(egg egg egg egg egg egg egg egg egg egg egg egg) (set-cdr! (last-kons long) long) ; #0 = '(egg egg egg egg egg egg egg egg egg egg egg . #0#) ; The finite-lenkth function returns length of a list ; or #f if it's an infinite list ; (define finite-lenkth (lambda (p) (call-with-current-continuation (lambda (infinite) (letrec ((C (lambda (p q) (cond ((same? p q) (infinite #f)) ((null? q) 0) ((null? (cdr q)) 1) (else (+ (C (sl p) (qk q)) 2))))) (qk (lambda (x) (cdr (cdr x)))) (sl (lambda (x) (cdr x)))) (cond ((null? p) 0) (else (add1 (C p (cdr p)))))))))) ; Examples of finite-lenkth ; (define not-so-long (lots 5)) ; '(egg egg egg egg egg) (finite-lenkth not-so-long) ; 5 (finite-lenkth long) ; #f ; Guy's Favorite Pie ; (define mongo (cons 'pie (cons 'a (cons 'la (cons 'mode '()))))) (set-cdr! (cdr (cdr (cdr mongo))) (cdr mongo)) ; mongo ; ; Chapter 19 of The Seasoned Schemer: ; Absconding with the Jewels ; ; Code examples assemled by Peteris Krumins (peter@catonmat.net). ; His blog is at http://www.catonmat.net -- good coders code, great reuse. ; ; Get yourself this wonderful book at Amazon: http://bit.ly/8cyjgw ; ; The atom? primitive ; (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) ; The sub1 primitive ; (define sub1 (lambda (n) (- n 1))) ; Our friend deep ; (define deep (lambda (m) (cond ((zero? m) 'pizza) (else (cons (deep (sub1 m)) '()))))) ; Example of deep ; (deep 6) ; '((((((pizza)))))) ; Six layers creates six layered pizza ; (define six-layers (lambda (p) (cons (cons (cons (cons (cons (cons p '()) '()) '()) '()) '()) '()))) ; Example of six-layers ; (six-layers 'pizza) ; '((((((pizza)))))) ; Four layers makes a four layered pizza ; (define four-layers (lambda (p) (cons (cons (cons (cons p '()) '()) '()) '()))) ; Example of four-layers ; (four-layers 'pizza) ; '((((pizza)))) ; The deepB function does layering ; (define toppings 0) (define deepB (lambda (m) (cond ((zero? m) (call-with-current-continuation (lambda (jump) (set! toppings jump) 'pizza))) (else (cons (deepB (sub1 m)) '()))))) ; Example of deepB ; (deepB 6) ; '((((((pizza)))))), but what does jump do? ; Six layers again ; (six-layers 'mozzarella) ; '((((((mozarella)))))) ; Now the toppings ; (toppings 'mozzarella) ; '((((((mozarella)))))) (toppings 'cake) ; '((((((cake)))))) (toppings 'pizza) ; '((((((pizza)))))) ; What about his ; (cons (toppings 'cake) '()) ; it's still '((((((cake)))))) and not '(((((((cake))))))) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; ; ; The twentieth commandment ; ; ; ; When thinking about a value created with (letcc ...), write down the ; ; function that is equivalent but does not forget. Then, when you use it, ; ; remember to forget. ; ; ; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ; Deep\u0026amp;co ; (define deep\u0026amp;co (lambda (m k) (cond ((zero? m) (k 'pizza)) (else (deep\u0026amp;co (sub1 m) (lambda (x) (k (cons x '())))))))) ; Examples of deep\u0026amp;co ; (deep\u0026amp;co 0 (lambda (x) x)) ; 'pizza (deep\u0026amp;co 6 (lambda (x) x)) ; '((((((pizza)))))) (deep\u0026amp;co 2 (lambda (x) x)) ; '((pizza)) ; Deep\u0026amp;coB ; (define deep\u0026amp;coB (lambda (m k) (cond ((zero? m) (let () (set! toppings k) (k 'pizza))) (else (deep\u0026amp;coB (sub1 m) (lambda (x) (k (cons x '())))))))) ; Examples of deep\u0026amp;coB ; (deep\u0026amp;coB 6 (lambda (x) x)) ; '((((((pizza)))))) (deep\u0026amp;coB 4 (lambda (x) x)) ; '((((pizza)))) ; toppings is now four-layers (toppings 'cake) ; '((((cake)))) (cons (toppings 'cake) (toppings 'cake)) ; '(((((cake)))) (((cake)))) ; Remember two-in-a-row? ; (define two-in-a-row? (letrec ((W (lambda (a lat) (cond ((null? lat) #f) (else (let ((nxt (car lat))) (or (eq? nxt a) (W nxt (cdr lat))))))))) (lambda (lat) (cond ((null? lat) #f) (else (W (car lat) (cdr lat))))))) ; Examples of two-in-a-row? ; (two-in-a-row? '(mozzarella cake mozzarella)) ; #f (two-in-a-row? '(mozzarella mozzarella cake)) ; #t ; walk ; (define leave '0) (define walk (lambda (l) (cond ((null? l) '()) ((atom? (car l)) (leave (car l))) (else (begin (walk (car l)) (walk (cdr l))))))) ; we need leave (define start-it (lambda (l) (call-with-current-continuation (lambda (here) (set! leave here) (walk l))))) ; Example of start-it ; (start-it '((potato) (chips (chips (with))) fish)) ; 'potato ; waddle, just like walk but remembers where it left ; (define fill 0) (define waddle (lambda (l) (cond ((null? l) '()) ((atom? (car l)) (begin (call-with-current-continuation (lambda (rest) (set! fill rest) (leave (car l)))) (waddle (cdr l)))) (else (begin (waddle (car l)) (waddle (cdr l))))))) ; A new start ; (define start-it2 (lambda (l) (call-with-current-continuation (lambda (here) (set! leave here) (waddle l))))) ; Example of start-it2 ; (start-it2 '((donuts) (cheerios (cheerios (spaghettios))) donuts)) ; ===\u0026gt; 'donuts ; get-next gets the next atom ; (define get-next (lambda (x) (call-with-current-continuation (lambda (here-again) (set! leave here-again) (fill 'go))))) ; Examples of get-next ; (get-next 'go) ; 'cheerios (get-next 'go) ; 'cheerios (get-next 'go) ; 'paghettios (get-next 'go) ; 'donuts (get-next 'go) ; '() ; get-first ; (define get-first (lambda (l) (call-with-current-continuation (lambda (here) (set! leave here) (waddle l) (leave '()))))) ; Examples of get-first and get-next ; (get-first '(fish (chips))) ; 'fish (get-next 'go) ; 'chips (get-next 'go) ; '() ; And now the two-in-a-row*? ; (define two-in-a-row*? (letrec ((T? (lambda (a) (let ((n (get-next 0))) (if (atom? n) (or (eq? n a) (T? n)) #f)))) (get-next (lambda (x) (call-with-current-continuation (lambda (here-again) (set! leave here-again) (fill 'go))))) (fill (lambda (x) x)) (waddle (lambda (l) (cond ((null? l) '()) ((atom? (car l)) (begin ; or (let() ... (call-with-current-continuation (lambda (rest) (set! fill rest) (leave (car l)))) (waddle (cdr l)))) (else (begin (waddle (car l)) (waddle (cdr l))))))) (leave (lambda (x) x))) (lambda (l) (let ((fst (call-with-current-continuation (lambda (here) (set! leave here) (waddle l) (leave '()))))) (if (atom? fst) (T? fst) #f))))) ; Examples of two-in-a-row*? ; (two-in-a-row*? '(((food) ()) (((food))))) ; #t (two-in-a-row*? '(a (b (c (d))) () () (d))) ; #t (two-in-a-row*? '()) ; #f (two-in-a-row*? '(((((a)))))) ; #f ","date":1431912311,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431912311,"objectID":"c157405b76363e5d775deb7a50e160f0","permalink":"/blog/2015/05/18/the-little-scheme-and-part-of-tss/","publishdate":"2015-05-18T09:25:11+08:00","relpermalink":"/blog/2015/05/18/the-little-scheme-and-part-of-tss/","section":"archives","summary":"è¿™éƒ¨åˆ†å†…å®¹æ˜¯æˆ‘ç»ƒä¹ TLSå’ŒTSSçš„å…¨éƒ¨å­¦ä¹ èµ„æ–™ï¼Œé‡Œé¢æœ‰è¯¦ç»†çš„è®°å½•å’Œä¸€äº›å¿ƒè·¯å†ç¨‹ï¼Œä»¥åæ…¢æ…¢ä¿®æ”¹ã€‚ æ€»è¡Œæ•°5800å·¦å³ã€‚\n","tags":null,"title":"The-Little-Scheme-And-Part-Of-TSS","type":"archives"},{"authors":null,"categories":["Haskell"],"content":"è€å­é“å¾·ç»è¯´é“ç”Ÿä¸€ï¼Œä¸€ç”ŸäºŒï¼ŒäºŒç”Ÿä¸‰ï¼Œä¸‰ç”Ÿä¸‡ç‰©ï¼Œè¿™å¥è¯ç¬¦åˆæ„é€ å®šå¾‹Constructal Law.\nå­¦ä¹ è¿‡gitçš„äººçŸ¥é“(å¯ä»¥å‚è€ƒgitå…¥é—¨)ï¼Œgitä½“ç°çš„æœ¬è´¨å…¶å®å°±æ˜¯åˆ†æ”¯çš„æ€æƒ³,ä»–å°±åƒæ˜¯ä¸€å—ä¸€å—çš„ç§¯æœ¨ä¸€æ ·ã€‚\nThinking like a gitæ•™ä¼šæˆ‘ä»¬ Facebookå…¶å®ä¹Ÿæ˜¯èŒƒç•´çš„é›†åˆ\n","date":1431873995,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431873995,"objectID":"77b4fca5dea5d05777ed0bdb80d4190c","permalink":"/blog/2015/05/17/jia-fa-zhi-hou-ye-xu-jian-fa/","publishdate":"2015-05-17T22:46:35+08:00","relpermalink":"/blog/2015/05/17/jia-fa-zhi-hou-ye-xu-jian-fa/","section":"archives","summary":"è€å­é“å¾·ç»è¯´é“ç”Ÿä¸€ï¼Œä¸€ç”ŸäºŒï¼ŒäºŒç”Ÿä¸‰ï¼Œä¸‰ç”Ÿä¸‡ç‰©ï¼Œè¿™å¥è¯ç¬¦åˆæ„é€ å®šå¾‹Constructal Law.\n","tags":null,"title":"åŠ æ³•ä¹‹åä¹Ÿéœ€å‡æ³•","type":"archives"},{"authors":null,"categories":["Haskell"],"content":"mainåœ¨Haskellå……å½“ç±»ä¼¼cç³»åˆ—è¯­è¨€çš„exeæ–‡ä»¶çš„å¤´å‡½æ•° mainå¯¹åº”çš„ç±»å‹æ˜¯IO Something æ¯”å¦‚ä¸‹åˆ—æºç ï¼š\nmain = do putStrLn \u0026quot;Hello Hello\u0026quot; putStrLn \u0026quot;Hello, what's your name?\u0026quot; name \u0026lt;- getLine putStrLn $ \u0026quot;Read this carefully, because this is your future: \u0026quot; ++ name  Windows è¾“å‡ºï¼š\nc:\\\u0026gt;ghc --make hello.hs -o Hello [1 of 1] Compiling Main ( hello.hs, hello.o ) Linking Hello.exe ... c:\\\u0026gt;Hello.exe Hello Hello Hello, what's your name? yezhaoliang Read this carefully, because this is your future: yezhaoliang  Ubuntu è¾“å‡º:\nroot at javazhao-N53SM \u001b[21:52:10Ã¤ï¿½ï¿½åˆ] in /home/happycamp-of-lisp on git:develop+? $ ghc --make hello12.hs -o hello12 [1 of 1] Compiling Main ( hello12.hs, hello12.o ) Linking hello12 ... root at javazhao-N53SM \u001b[21:52:25Ã¤ï¿½ï¿½åˆ] in /home/happycamp-of-lisp on git:develop+? $ ./hello12 Hello Hello Hello, what's your name? yezhaoliang Read this carefully, because this is your future: yezhaoliang  Haskellå¤©ç”Ÿçš„å…·å¤‡è·¨å¹³å°çš„ç‰¹ç‚¹\n","date":1431870483,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431870483,"objectID":"e16138cb36f51e67eb4f2664f57dea18","permalink":"/blog/2015/05/17/haskellde-io-main/","publishdate":"2015-05-17T21:48:03+08:00","relpermalink":"/blog/2015/05/17/haskellde-io-main/","section":"archives","summary":"mainåœ¨Haskellå……å½“ç±»ä¼¼cç³»åˆ—è¯­è¨€çš„exeæ–‡ä»¶çš„å¤´å‡½æ•° mainå¯¹åº”çš„ç±»å‹æ˜¯IO Something æ¯”å¦‚ä¸‹åˆ—æºç ï¼š\n","tags":null,"title":"Haskellçš„IO main","type":"archives"},{"authors":null,"categories":["Haskell"],"content":"Everything in Haskell has a Type Here are some Type declarations.\nThese are your greatest weapons.\nhead :: [a] -\u0026gt; a \u0026ndash; gets the first element of a list\ntail :: [a] -\u0026gt; [a] \u0026ndash; gets everything but the first element\nlast :: [a] -\u0026gt; a \u0026ndash; gets the last element of a list\ninit :: [a] -\u0026gt; [a] \u0026ndash; gets everything but the last element\n(++) :: [a] -\u0026gt; [a] -\u0026gt; [a] \u0026ndash; concatenates two lists together\n(:) :: a -\u0026gt; [a] -\u0026gt; [a] \u0026ndash; prepends an element to a list\nfst :: (a,b) -\u0026gt; a \u0026ndash; gets the first element of a tuple\nsnd :: (a,b) -\u0026gt; b \u0026ndash; gets the second element of a tuple\n(!!) :: [a]-\u0026gt;Int a\næ•°å­¦ä¸­Î»-calculusçš„è¡¨ç¤ºæ³•ä¸ºï¼š  Î»x.t Î»x[t]  â€œÎ»â€ä¸å…·æœ‰ä»»ä½•ç‰¹æ®Šæ„æ€ï¼Œæ ‡è¯†ç€å…¶è¡¨è¾¾å¼ä¸­çš„å¯å–ä¸€æ•°å€¼xå¸¦å…¥ã€‚ tæ˜¯è¡¨è¾¾å¼ï¼ˆä¾‹å¦‚x+3ã€x^2+2x+1ç­‰ï¼‰ã€‚\nä»£å…¥æ•°å€¼pçš„è¡¨ç¤ºæ³•ä¸ºï¼š  (Î»x.t)p (Î»x[t])p  Lisp|schemeçš„Î»è¡¨ç¤ºæ³•ä¸æ•°å€¼ä»£å…¥ï¼š (lambda (x) (+ x 1)) ((lambda (x) (+ x 1) 10))  Haskellï¼š \\x -\u0026gt; x+1 (\\x -\u0026gt; x+1)10 Prelude\u0026gt; map (\\x-\u0026gt;x+1) [1..10] [2,3,4,5,6,7,8,9,10,11] \\ para1 para2-\u0026gt;(return value) \\ (para1,para2) -\u0026gt; (return value)  Lambda Calculus å‰é¢æåˆ°äº†Haskellæ˜¯åŸºäºLambda Calculusçš„ï¼Œæ‰€ä»¥åœ¨å­¦ä¹ Haskellä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦äº†è§£ä¸€ä¸‹Lambda Caculusçš„ä¸€äº›åŸºæœ¬çš„å†…å®¹ï¼Œæ–¹ä¾¿æˆ‘ä»¬åé¢æ­£å¼ä»‹ç»Haskellã€‚å…¶å®ï¼ŒLambda Calculusæ˜¯æ‰€æœ‰å‡½æ•°å¼è¯­è¨€çš„åŸºç¡€ï¼Œè¦å­¦ä¹ FPï¼Œæœ€å¥½éƒ½äº†è§£ä¸€ä¸‹Lambda Calculusã€‚ä¸‹é¢å¯¹Lambda Calculusåšä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼š\nåŸºæœ¬çš„è¯­æ³•ï¼šLambda Calculusçš„æ ¸å¿ƒæ˜¯è¡¨è¾¾å¼(Expression)ï¼Œç”¨FPè¯­è¨€å†™çš„ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å¯¹è¡¨è¾¾å¼æ±‚å€¼çš„è¿‡ç¨‹ expression := variable | function | application funciton := Î»variable.expression (.å‰é¢éƒ¨åˆ†ä¸ºå®šä¹‰(definition)ï¼Œåé¢éƒ¨åˆ†ä¸ºå‡½æ•°ä½“(body)) application := expression expression\nå¦å¤–ä¸€ç§è¡¨è¿°æ–¹æ³•:\n\u0026lt;expr\u0026gt; ::= \u0026lt;identifier\u0026gt; \u0026lt;expr\u0026gt; ::= lambda \u0026lt;identifier-list\u0026gt;. \u0026lt;expr\u0026gt; \u0026lt;expr\u0026gt; ::= (\u0026lt;expr\u0026gt; \u0026lt;expr\u0026gt;)  å‰ä¸¤æ¡è¯­æ³•ç”¨äºç”Ÿæˆlambdaè¡¨è¾¾å¼ï¼ˆlambdaå‡½æ•°ï¼‰ï¼Œå¦‚ï¼š lambda x y. x + y haskellé‡Œé¢ä¸ºäº†ç®€æ´èµ·è§ç”¨â€œ\\â€æ¥ä»£æ›¿å¸Œè…Šå­—æ¯lambdaï¼Œå®ƒä»¬å½¢çŠ¶æ¯”è¾ƒç›¸ä¼¼ã€‚æ•…è€Œä¸Šé¢çš„å®šä¹‰ä¹Ÿå¯ä»¥å†™æˆï¼š \\ x y. x + y\nå˜é‡çš„boundä¸free: Î»x.xy â†’x is bound, y is free\nè¡¨è¾¾å¼åŒ–ç®€ï¼ˆReduction)çš„åŸºæœ¬æ³•åˆ™: Î±âˆ’reduction: Î»x.Eâ†’Î»y.E[y/x] Î²âˆ’reduction:((Î»x.E)z)â†’E[z/x] Î·âˆ’reduction(if x is not free in E): Î»x.(Ex)â†’E   Alphaè½¬æ¢å…¬ç†ï¼šä¾‹å¦‚ï¼Œâ€œlambda x y. x + yâ€è½¬æ¢ä¸ºâ€œlambda a b. a + bâ€ã€‚æ¢å¥è¯è¯´ï¼Œå‡½æ•°çš„å‚æ•°èµ·ä»€ä¹ˆåå­—æ²¡æœ‰å…³ç³»ï¼Œå¯ä»¥éšæ„æ›¿æ¢ï¼Œåªè¦å‡½æ•°ä½“é‡Œé¢å¯¹å‚æ•°çš„ä½¿ç”¨çš„åœ°æ–¹ä¹ŸåŒæ—¶æ³¨æ„ç›¸åº”æ›¿æ¢æ‰å°±æ˜¯äº†ã€‚\n Betaè½¬æ¢å…¬ç†ï¼šä¾‹å¦‚ï¼Œâ€œ(lambda x y. x + y) 2 3â€è½¬æ¢ä¸ºâ€œ2 + 3â€ã€‚è¿™ä¸ªå°±æ›´ç®€å•äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æŠŠä¸€ä¸ªlambdaå‡½æ•°ç”¨åˆ°å‚æ•°èº«ä¸Šæ—¶ï¼Œåªéœ€ç”¨å®é™…çš„å‚æ•°æ¥æ›¿æ¢æ‰å…¶å‡½æ•°ä½“ä¸­çš„ç›¸åº”å˜é‡å³å¯ã€‚\n  è½¯ä»¶å·¥ç¨‹é‡Œé¢çš„ä¸€æ¡é»„é‡‘å®šå¾‹ï¼šâ€œä»»ä½•é—®é¢˜éƒ½å¯ä»¥é€šè¿‡å¢åŠ ä¸€ä¸ªé—´æ¥å±‚æ¥è§£å†³\nå˜é‡æ›¿æ¢ [y/x]E â†’ substitute all occurrences of x in E to y\nä»¥ä¸Šæ˜¯Lambda Calculusçš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œè¯»è€…æœ‹å‹ç°åœ¨ä¸ç†è§£æ²¡æœ‰å…³ç³»ï¼Œç­‰åé¢è®²åˆ°Haskellä¸­ç›¸å…³çš„éƒ¨åˆ†å°±å¯ä»¥ç†è§£äº†ã€‚å¯¹äºæŠ‘åˆ¶ä¸ä½è‡ªå·²çš„å¥½å¥‡å¿ƒçš„æœ‹å‹ï¼Œå¯ä»¥åœ¨è¿™é‡Œï¼šhttp://en.wikipedia.org/wiki/Lambda_calculusåšè¿›ä¸€æ­¥çš„äº†è§£ã€‚\nåœ¨ä¹‹å‰åšçš„lambdaçš„æ¨å¯¼å…¶å®éƒ½åªæ˜¯é’ˆå¯¹å•ä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬Haskellä¹Ÿæ˜¯å¼ºè°ƒå•å‚æ•°çš„è°ƒç”¨ï¼Œå¦‚æœå¤šæƒ¨æ•°é‚£å°±æ˜¯ç”¨curryæ¥è§£å†³(funnyå¤šå‚æ•°) å…³äºå¤šå‚æ•°çš„lambdaæ¨åˆ°æ¯”è¾ƒå°‘è§ï¼Œä½†æ˜¯å¤šå‚æ•°éƒ½æ˜¯å¯ä»¥é€šè¿‡curryå®ç°ã€‚\næ¯”å¦‚Haskellçš„å®ç°:\nPrelude\u0026gt; :type take take :: Int -\u0026gt; [a] -\u0026gt; [a] Prelude\u0026gt; let takeFive = take 5 Prelude\u0026gt; :type takeFive takeFive :: [a] -\u0026gt; [a] Prelude\u0026gt; takeFive [1..] [1,2,3,4,5] ","date":1431860519,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431860519,"objectID":"45b2e3963518e474e34d9fc9af1093eb","permalink":"/blog/2015/05/17/the-greatest-weapons/","publishdate":"2015-05-17T19:01:59+08:00","relpermalink":"/blog/2015/05/17/the-greatest-weapons/","section":"archives","summary":"Everything in Haskell has a Type Here are some Type declarations.\nThese are your greatest weapons.\n","tags":null,"title":"The greatest weapons","type":"archives"},{"authors":null,"categories":["scheme"],"content":"å®šä¹‰ä¸€ä¸ªeternityå‡½æ•°ï¼Œå¹¶å°è¯•æ˜¯å¦å¯ä»¥æ‰§è¡Œ (define eternity (lambda (x) (eternity x)))  å…¶å®eternityæ°¸è¿œåœ¨æ‰§è¡Œç€ï¼Œæ— æ³•é€€å‡º\n1.ä¸‹é¢å¼å­åªèƒ½è®¡ç®—åˆ—è¡¨çš„é•¿åº¦\u0026lt;=0çš„,ä¸”æ°¸è¿œä¸ä¼šè°ƒç”¨eternity ; Function to calculate length of just empty list. ; ((lambda (len) (lambda (l) (cond ((null? l) 0) (else (+ 1 (len (cdr l))))))) eternity)\n2.ä¸‹é¢å¼å­åªèƒ½è®¡ç®—åˆ—è¡¨çš„é•¿åº¦\u0026lt;=1çš„,ä¸”æ°¸è¿œä¸ä¼šè°ƒç”¨eternity ; For lists with length \u0026lt;= 1 ; ((lambda (mk-length) (mk-length mk-length)) (lambda (mk-length) (lambda (l) (cond ((null? l) 0) (else (+ 1 ((mk-length eternity) (cdr l))))))))  3.ä¸‹é¢å¼å­åªèƒ½è®¡ç®—åˆ—è¡¨çš„é•¿åº¦\u0026lt;=2çš„,ä¸”æ°¸è¿œä¸ä¼šè°ƒç”¨eternity ; For lists with length \u0026lt;= 2 ; ((lambda (len) (lambda (l) (cond ((null? l) 0) (else (+ 1 (len (cdr l))))))) ((lambda (len) (lambda (l) (cond ((null? l) 0) (else (+ 1 (len (cdr l))))))) ((lambda (len) (lambda (l) (cond ((null? l) 0) (else (+ 1 (len (cdr l))))))) eternity)))  å¦‚æœæˆ‘ä»¬è¿›è¡Œä¸€æ¬¡å˜æ¢ 1.æŠŠeternityæ›¿æ¢æˆmk-length æˆ‘ä»¬å‘ç°ç»“æœæ˜¯å®ƒå¯ä»¥å˜æˆå¤„ç†æ— é™é•¿åº¦çš„åˆ—è¡¨äº†ã€‚\n(((lambda (mk-length) (mk-length mk-length)) (lambda (mk-length) (lambda (l) (cond ((null? l) 0) (else (+ 1 ((mk-length mk-length) (cdr l)))))))) '(a b c 1 g)) ; 5  ç„¶è€Œæˆ‘ä»¬å¯¹ä»–è¿›ä¸€æ­¥æå–å‘ç°æŠ¥é”™äº† ((lambda (mk-length) (mk-length mk-length)) (lambda (mk-length) ((lambda (len) (lambda (l) (cond ((null? l) 0) (else (+ 1 (len (cdr l))))))) (mk-length mk-length)))) ; Aborting!: maximum recursion depth exceeded  ä¸ºä»€ä¹ˆä¸è¡Œï¼Ÿ åŸå› åœ¨äº æˆ‘ä»¬éœ€è¦çš„æ˜¯lambdaç±»å‹çš„procedureæ‰å¯ä»¥ï¼Œè€Œå‡½æ•°è°ƒç”¨å½¢å¼åˆ™æ˜¯ä¸è¡Œã€‚ ç„¶è€Œæœ‰ä¸€ç§è½¬æ¢æ–¹å¼å¦‚ä¸‹ï¼š\n(f x) ==\u0026gt; (lambda (arg) (f arg) x)\näºæ˜¯æˆ‘ä»¬å¾—åˆ°æ–°çš„å‡çº§ç‰ˆçš„mk-length\n((lambda (mk-length) (mk-length mk-length)) (lambda (mk-length) ((lambda (len) (lambda (l) (cond ((null? l) 0) (else (+ 1 (len (cdr l))))))) (lambda (x) ((mk-length mk-length) x)))))  æˆ‘ä»¬å‘ç°è¿˜æ˜¯ä¸å¤Ÿæ»¡æ„ï¼Œæˆ‘ä»¬æƒ³æŠŠä¸­é—´çš„ä¸€å¨æ‹¿åˆ°åé¢å»ï¼Œäºæ˜¯å†æ¬¡æŠ½è±¡ä¸€å±‚ ä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦ æŠŠ(lambda (len) \u0026hellip; (cdr l))éƒ¨åˆ† ç§»åˆ°æœ€å¤–å¤´\n((lambda (le) ((lambda (mk-length) (mk-length mk-length)) (lambda (mk-length) (le (lambda (x) ((mk-length mk-length) x)))))) (lambda (len) (lambda (l) (cond ((null? l) 0) (else (+ 1 (len (cdr l))))))))  ç„¶è€Œå¦‚æœæˆ‘ä»¬æŠŠåé¢çš„(lambda (len))éƒ¨åˆ†å»æ‰\n(lambda (le) ((lambda (mk-length) (mk-length mk-length)) (lambda (mk-length) (le (lambda (x) ((mk-length mk-length) x))))))  ä»–å…¶å®å°±æ˜¯ä¸‹é¢çš„éª¨æ¶ï¼š\n(lambda (le) ((lambda () ()) (lambda () (le (lambda (x) (() x))))))  å¦‚æœæˆ‘ä»¬ä½¿ç”¨fæ¥å¡«åŠ ï¼š\n(lambda (le) ((lambda (f) (f f)) (lambda (f) (le (lambda (x) ((f f) x))))))  ä»–å…¶å®å°±æ˜¯Y-lambda. æˆ‘ä»¬æ‰€è°“çš„defineï¼Œlet,set!éƒ½å¯ä»¥ä»lambda æ¨å‡ºæ¥ã€‚\nletå® (define-syntax (syntax-rules () ((let ((var expr) ...) body ...) ((lambda (var ...) body ...) expr ...))))  ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä»¥åå®Œå…¨å¯ä»¥ç”¨\n(define Y (lambda (le) ((lambda (f) (f f)) (lambda (f) (le (lambda (x) ((f f) x)))))))  Y-lambda æ‰§è¡Œä¸€ä¸ª ä»£è¡¨lambdaçš„å‡½æ•°å­fã€‚\næ¯”å¦‚,æ±‚æœ€å¤§å€¼(æ³¨æ„ï¼š(lambda (func-arg) func-argæ˜¯å¯ä»¥ä¸å­˜åœ¨çš„éƒ¨åˆ†,æ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œ)):\n;; æ±‚ä¸ªæ•° ((Y (lambda (len) (lambda (l) (cond ((null? l) 0) (else (+ 1 (len (cdr l)))))))) '(3 2 3 6 1)) ;;; æ±‚æœ€å¤§å€¼ ((Y (lambda (func-arg) (lambda (l) (cond ((null? l) 'no-list) ((null? (cdr l)) (car l)) (else (max (car l) (func-arg (cdr l)))))))) '(3 2 5 3 425))  å¦å¤–æˆ‘ä»¬å‘ç°y-lambdaå¯ä»¥å†™æˆæ›´ä¼˜é›…ã€å¯¹ç§°çš„å½¢å¼:\n(define Y (lambda (le) ((lambda (f) (le (f f))) ;;; (lambda (f) (le (lambda (x) ((f f) x)))))))  Add le() is not necessay But the code can be More beautiful and symmetry\nç„¶è€Œå…¶å®æˆ‘çš„æƒ³æ³•åªä¸è¿‡æ˜¯ä»–çš„å¤åˆ¶ (define Y1 (lambda (le) ((lambda (fun) (fun fun)) ;; è¿™æ˜¯åŸºäºæŠ½è±¡çš„æ–¹å¼,ä¹Ÿå°±æ˜¯æŠŠåé¢çš„(lambda (f)) å¸¦å…¥å…¶ä¸­ (lambda (f) (le (lambda (x) ((f f) x))))))) ((Y1 (lambda (fun-arg) (lambda (l) (cond ((null? l) 0) (else (+ 1 (fun-arg (cdr l)))))))) '(3 5 2 42))  ç®€å•è®¡ç®—å™¨è§£é‡Šå™¨ æ¥è‡ªwangyin\n#lang racket ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;; ä»¥ä¸‹ä¸‰ä¸ªå®šä¹‰ env0, ent-env, lookup æ˜¯å¯¹ç¯å¢ƒ(environment)çš„åŸºæœ¬æ“ä½œ: ;; ç©ºç¯å¢ƒ (define env0 '()) ;; æ‰©å±•ã€‚å¯¹ç¯å¢ƒ env è¿›è¡Œæ‰©å±•ï¼ŒæŠŠ x æ˜ å°„åˆ° vï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„ç¯å¢ƒ (define ext-env (lambda (x v env) (cons `(,x . ,v) env))) ;; æŸ¥æ‰¾ã€‚åœ¨ç¯å¢ƒä¸­ env ä¸­æŸ¥æ‰¾ x çš„å€¼ (define lookup (lambda (x env) (let ([p (assq x env)]) (cond [(not p) x] [else (cdr p)])))) ;; é—­åŒ…çš„æ•°æ®ç»“æ„å®šä¹‰ï¼ŒåŒ…å«ä¸€ä¸ªå‡½æ•°å®šä¹‰ f å’Œå®ƒå®šä¹‰æ—¶æ‰€åœ¨çš„ç¯å¢ƒ (struct Closure (f env)) ;; è§£é‡Šå™¨çš„é€’å½’å®šä¹‰ï¼ˆæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¡¨è¾¾å¼ exp å’Œç¯å¢ƒ envï¼‰ ;; å…± 5 ç§æƒ…å†µï¼ˆå˜é‡ï¼Œå‡½æ•°ï¼Œè°ƒç”¨ï¼Œæ•°å­—ï¼Œç®—æœ¯è¡¨è¾¾å¼ï¼‰ (define interp1 (lambda (exp env) (match exp ; æ¨¡å¼åŒ¹é… exp çš„ä»¥ä¸‹æƒ…å†µï¼ˆåˆ†æ”¯ï¼‰ [(? symbol? x) (lookup x env)] ; å˜é‡ [(? number? x) x] ; æ•°å­— [`(lambda (,x) ,e) ; å‡½æ•° (Closure exp env)] [`(,e1 ,e2) ; è°ƒç”¨ (let ([v1 (interp1 e1 env)] [v2 (interp1 e2 env)]) (match v1 [(Closure `(lambda (,x) ,e) env1) (interp1 e (ext-env x v2 env1))]))] [`(,op ,e1 ,e2) ; ç®—æœ¯è¡¨è¾¾å¼ (let ([v1 (interp1 e1 env)] [v2 (interp1 e2 env)]) (match op ['+ (+ v1 v2)] ['- (- v1 v2)] ['* (* v1 v2)] ['/ (/ v1 v2)]))]))) ;; è§£é‡Šå™¨çš„â€œç”¨æˆ·ç•Œé¢â€å‡½æ•°ã€‚å®ƒæŠŠ interp1 åŒ…è£…èµ·æ¥ï¼Œæ©ç›–ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆå§‹å€¼ä¸º env0 (define interp (lambda (exp) (interp1 exp env0))) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; (interp (+ 2 65)) (interp (* 3 2)) (interp (/ 3 23))  å¤æ‚è§£é‡Šå™¨ åˆ†ä¸ºäº”ä¸ªéƒ¨åˆ† + *const + *cond + *identifier(loop-up-evironment) + *quote + *lambda + *Aplication(Not Promitive)\nå…·ä½“å¯ä»¥çœ‹#lang racket ;;don't look down on it, it is the full interpretor! ;;Take care to read it! (define atom? (lambda (x) (and (not (pair? x)) (not (null? x))))) (define build (lambda (s1 s2) (cond (else (cons s1 (cons s2 (quote ()))))))) ((lambda (nothing) (cond (nothing (quote something)) (else (quote nothing)))) #t) (define lookup-in-entry (lambda (name entry entry-f) (lookup-in-entry-help name (first entry) (second entry) (entry-f)))) (define lookup-in-entry-help (lambda (name names values entry-f) (cond ((null? names) (entry-f name)) ((eq? (car names) name) (car values)) (else (lookup-in-entry-help name (cdr names) (cdr values) entry-f))))) (define lookup-in-table (lambda (name table table-f) (cond ((null? table) (table-f name)) (else (lookup-in-entry name (car table) (lambda (name) (cdr table) (table-f)))))))) (lambda (name table table-f) (lookup-in-table name (cdr table) (table-f))) (define expression-to-action (lambda (e) (cond ((atom? e) (atom-to-action e)) (else (list-to-action e))))) (define *const (lambda (e table) (cond ((number? e) e) ((eq? e #t) #t) ((eq? e #f) #f) (else (build (quote primitive) e))))) (define atom-to-action (lambda (e) (cond ((number? e) *const) ((eq? e #t) *const) ((eq? e #f) *const) ((eq? e (quote cons)) *const) ((eq? e (quote car)) *const) ((eq? e (quote cdr)) *const) ((eq? e (quote null?)) *const) ((eq? e (quote eq?)) *const) ((eq? e (quote atom?)) *const) ((eq? e (quote zero?)) *const) ((eq? e (quote add1)) *const) ((eq? e (quote sub1)) *const) ((eq? e (quote number?)) *const) (else *identifier)))) (define list-to-action (lambda (e) (cond ((atom? (car e)) (cond ((eq? (car e) (quote quote)) *quote) ((eq? (car e) (quote lambda)) *lambda) ((eq? (car e) (quote cond)) *cond) (else *application))) (else *application)))) (define *quote (lambda (e table) (text-of e))) (define first (lambda (p) (cond (else (car p))))) (define second (lambda (p) (cond (else car (cdr p))))) (define third (lambda (p) (cond (else car (cdr (cdr p)))))) (define text-of second) (define table-of first) (define formals-of second) (define body-of third) (define *identifier (lambda (e table) (lookup-in-table e table initial-table))) (define initial-table (lambda (name) (car (quote ())))) (define *lambda (lambda (e table) (build (quote non-primitive) (cons table (cdr e))))) (define evcon (lambda (lines table) (cond ((else? (question-of (car lines))) (meaning (answer-of (car lines)) table)) ((meaning (question-of (car lines)) table) (meaning (answer-of (car lines)) table)) (else (evcon (cdr lines) table))))) (define else? (lambda (x) (cond ((atom? x) (eq? x (quote else))) (else #f)))) (define question-of first) (define answer-of second) (define *cond (lambda (e table) (evcon (cond-lines-of e) table))) (define cond-lines-of cdr) (define evlis (lambda (args table) (cond ((null? args) (quote ())) (else (cons (meaning (car args) table) (evlis (cdr args) table)))))) (define *application (lambda (e table) (apply (meaning (function-of e) table) (evlis (arguments-of e) table)))) (define function-of car) (define arguments-of cdr) (define primitive? (lambda (l) (eq? (first l) (quote primitive)))) (define non-primitive? (lambda (l) (eq? (first l) (quote non-primitive)))) (define apply (lambda (fun vals) (cond ((primitive? fun) (apply-primitive (second fun) vals)) ((non-primitive? fun) (apply-closure (second fun) vals))))) (define apply-primitive (lambda (name vals) (cond ((eq? name (quote cons)) (cons (first vals) (second vals))) ((eq? name (quote car)) (car (first vals))) ((eq? name (quote cdr)) ((eq? name (quote cdr)) (cdr (first vals))) ((eq? name (quote null?)) (null? (first vals))) ((eq? name (quote eq?)) (eq? (first vals) (second vals))) ((eq? name (quote atom?)) (:atom? (first vals))) ((eq? name (quote zero?)) (zero? (first vals))) ((eq? name (quote add1)) (add1 (first vals))) ((eq? name (quote sub1)) (sub1 (first vals))) ((eq? name (quote number?)) (number? (first vals)))))) (define :atom? (lambda (x) (cond ((atom? x) #t) ((null? x) #f) ((eq? (car x) (quote primitive)) #t) ((eq? (car x) (quote non-primitive)) #t) (else #f)))) (define apply-closure (lambda (closure vals) (meaning (body-of closure) (extend-table (new-entry (formals-of closure) vals) (table-of closure))))) (define new-entry build) (define extend-table cons) (define value (lambda (e) (meaning e (quote ())))) (define meaning (lambda (e table) ((expression-to-action e) e table))) (value (+ 3 4 (* 3 1)))  æ ‘å½¢æŠ½è±¡  ä¸€ä¸ªlat ä¸­çš„ä¸€ä¸ªåˆ é™¤\n(define rember3 (lambda (s l) (cond ((null? l) (quote ())) ((equal? (car l) s) (cdr l)) (else (cons (car l) (rember3 s (cdr l)))))))  ä¸€ä¸ªlistä¸­çš„ä¸€ä¸ªåˆ é™¤\n(define multirember (lambda (a lat) (cond ((null? lat) (quote ())) (else (cond ((eq? (car lat) a) (multirember a (cdr lat))) (else (cons (car lat) (multirember a (cdr lat)))))))))  ä¸€ä¸ªlistä¸­çš„å…¨éƒ¨åˆ é™¤\n(define rember* (lambda (a l) (cond ((null? l) (quote ())) ((atom? (car l)) (cond ((eq? (car l) a) (rember* a (cdr l))) (else (cons (car l) (rember* a (cdr l)))))) (else (cons (rember* a (car l)) (rember* a (cdr l)))))))   4 1ä¸­çš„remberå‡çº§ åŠ å…¥è°“è¯è¡¨è¾¾å¼çš„å‚æ•°\n(define rember-f (lambda (test? a l) (cond ((null? l) (quote ())) (else (cond ((test? (car l) a) (cdr l));;I think here needs atom2function (else (cons (car l) (rember-f test? a (cdr l)))))))))   2ä¸­çš„multiremberå‡çº§\n(define multirember-f (lambda (test?) (lambda (a lat) (cond ((null? lat) (quote ())) ((test? a (car lat)) ((multirember-f test?) a (cdr lat))) (else (cons (car lat) ((multirember test?) a (cdr lat)))))))) (define multirember-eq? (multirember-f 'eq?))  5ä¸­çš„multirember-fè¿›ä¸€æ­¥å‡çº§\n  åŠ å…¥äº†å¯ä»¥å¤„ç†çš„col,ä½œä¸ºä¸€ä¸ªåå¤„ç†å°ç¨‹åº\n(define multiremberco (lambda (a lat col) (cond ((null? lat) (col (quote ()) (quote ()))) ((eq? (car lat) a) (multiremberco a (cdr lat) (lambda (newlat seen) (col newlat (cons (car lat) seen))))) (else (multiremberco a (cdr lat) (lambda (newlat seen) (col (cons (car lat) newlat) seen))))))) (define a-friend (lambda (x y) (null? y))) ;(multiremberco 'tuna '(sfds tuna fsd jif) a-friend) ;#f ;\u0026gt; (multiremberco 'tuna '(sfds tuna1 fsd jif) a-friend) ;#t ;;how can you get another value in the col (define new-friend (lambda (newlat seen) (a-friend newlat (cons (quote tuna) seen))))  é¢å¤–è¯é¢˜ insertleft insertright eventonlyæ¯”è¾ƒä¸Šé¢çš„rember,ç†è§£col (define multiinsertLR (lambda (new oldL oldR lat) (cond ((null? lat) (quote ())) ((eq? (car lat) oldL) (cons new (cons oldL (multiinsertLR new oldL oldR (cdr lat))))) ((eq? (car lat) oldR) (cons oldR (cons new (multiinsertLR new oldL oldR (cdr lat)))))))) (define multiinsertLRco (lambda (new oldL oldR lat col) (cond ((null? lat) (col (quote ()) 0 0)) ((eq? (car lat) oldL) (multiinsertLRco new oldL oldR (cdr lat) (lambda (newlat L R) (col (cons new (cons oldL newlat)) (+ 1 L) R)))) ((eq? (car lat) oldR) (multiinsertLRco new oldL oldR (cdr lat) (lambda (newlat L R) (col (cons oldR (cons new newlat)) L (+ 1 R))))) (else (multiinsertLRco new oldL oldR (cdr lat) (lambda (newlat L R) (col (cons (car lat) newlat) L R))))))) (define evens-only*co (lambda (l col) (cond ((null? l) (col (quote ()) 1 0)) ((atom? (car l)) (cond ((even? (car l)) (evens-only*co (cdr l) (lambda (newl p s) (col (cons (car l) newl);if it is evens ,so cons it into the newl (* (car l) p) s)))) (else (evens-only*co (cdr l) (lambda (newl p s) (col newl p (+ (car l) s))))))) (else (evens-only*co (car l) (lambda (al ap as) (evens-only*co (cdr l) (lambda (dl dp ds) (col (cons al dl) (* ap dp) (+ as ds)))))))))) ;the fourth collector :: the last-last-friend (define the-last-last-friend (lambda (newl product sum) (cons sum (cons product newl)))) ;\u0026gt; (evens-only*co '(45389 63 45 6 4 234 6 4 23 52 43) the-last-last-friend) ;'(45563 7008768 6 4 234 6 4 52)   è¿›ä¸€æ­¥å‡çº§multirember æå–å…¬å…±å½¢å¼  insert-gå¯ä»¥å˜å¹»å‡º rember insert-r insert-l subsetç­‰\n(define rembern (lambda (a l) ((insert-g seqrem) #f a l)));;seqrem doesn't need (seqrem solve my ?. (define seqrem (lambda (new old l) l))  é‚£ä¹ˆinsert-gåˆ°åº•æ˜¯ä»€ä¹ˆ?\n(define insert-g (lambda (seq) (lambda (new old l) (cond ((null? l) (quote ())) ((eq? (car l) old) (seq new old (cdr l))) (else (cons (car l) ((insert-g seq) new old (cdr l))))))))  æ‰€ä»¥ç°åœ¨æˆ‘ä»¬å¯ä»¥å®šä¹‰subst\n(define seqS (lambda (new old l) (cons new l))) (define seqL (lambda (new old l) (cons new (cons old l)))) (define seqR (lambda (new old l) (cons (old (cons new l))))) (define subst1 (insert-g seqS)) (define insertL (insert-g seqL)) (define insertR (insert-g seqR))  ç»è¿‡è¿™å››ä¸ªçº§åˆ«çš„æŠ½è±¡æˆ‘ä»¬å¾—åˆ°ä¸€èˆ¬çš„å…·å¤‡å…¬å…±æ¨¡å¼çš„insert-g å½“ç„¶è¯¥å‡½æ•°è¿˜å¯ä»¥ç»§ç»­æŠ½è±¡ã€‚\n","date":1431833527,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431833527,"objectID":"bb93fac03e7ab17680ac4c85f3cf6920","permalink":"/blog/2015/05/17/cong-lambdadao-simple-plus-complexjie-shi-qi-zai-dao-shu-xing-chou-xiang/","publishdate":"2015-05-17T11:32:07+08:00","relpermalink":"/blog/2015/05/17/cong-lambdadao-simple-plus-complexjie-shi-qi-zai-dao-shu-xing-chou-xiang/","section":"archives","summary":"å®šä¹‰ä¸€ä¸ªeternityå‡½æ•°ï¼Œå¹¶å°è¯•æ˜¯å¦å¯ä»¥æ‰§è¡Œ (define eternity (lambda (x) (eternity x)))  å…¶å®eternityæ°¸è¿œåœ¨æ‰§è¡Œç€ï¼Œæ— æ³•é€€å‡º\n","tags":null,"title":"ä»lambdaåˆ°simple+complexè§£é‡Šå™¨å†åˆ°æ ‘å½¢æŠ½è±¡","type":"archives"},{"authors":null,"categories":["Haskell"],"content":" æ¨¡å¼åŒ¹é… = +èµ·ç€ä¸€ç§æ¨¡å¼åŒ¹é…ï¼Œ=ä¸è¦ç¿»è¯‘æˆç­‰äº æœ€å¥½ç¿»è¯‘ä¸ºå¦‚æœåŒ¹é…å‰é¢+ åˆ™ä»–çš„å€¼ä¸ºåé¢.-\u0026gt; ä¹Ÿèµ·ç€ä¸€ç§ç±»å‹çš„æ¨¡å¼åŒ¹é…ã€‚ åˆ†æ”¯ |åœ¨åˆ›å»ºå‡½æ•°çš„æ—¶å€™ ä½“ç°ç€ä¸€ç§åˆ†æ”¯çš„æ•ˆæœã€‚ if-else è¿™å…¶å®æ˜¯ä¸€ç§æ§åˆ¶è¯­å¥ï¼Œä¸èƒ½è¯´Haskellæ”¾æ‰äº†æ§åˆ¶è¯­å¥ï¼Œè€Œåº”è¯¥æ˜¯å¾ªç¯è¯­å¥ã€‚ ä¸€åˆ‡éƒ½æ˜¯å‡½æ•°ã€‚ æ ¹æ®monadçš„å†…ç½®ç»“æ„ï¼Œå‡½æ•°å¯ä»¥ç»„åˆç”Ÿæˆç±»ä¼¼äºæ•°å­¦çš„ç»„åˆå‡½æ•°ï¼ˆåŸ‹è—å†…éƒ¨çš„lambdaç»“æ„ï¼‰  å‡½æ•°åªæ˜¯å…³ç³»çš„è¡¨ç¤ºï¼Œå¯ä»¥è¯´å®ƒæ˜¯è¿‡ç¨‹ã€å˜æ¢ã€è¿åŠ¨ï¼ˆä»æ³›å‡½çš„è§’åº¦è§£é‡Šï¼‰ æœ¬æ¥å‡½æ•°å¼å˜æˆæ˜¯ä¸è€ƒè™‘ç©ºé—´çš„ï¼Œ è€Œé¢å‘å¯¹è±¡åˆ™æ˜¯å¼•å…¥ä¸å¿…è¦çš„ç©ºé—´é—®é¢˜ï¼Œæ¥æŒ‚ä¸Šå‡½æ•°ï¼Œæœ€ç»ˆéƒ½æ˜¯ä¸ºäº†å®ç°å‡½æ•°å˜æ¢æˆ–è€…å‡½æ•°è¿‡ç¨‹ï¼Œæˆ–è€…ç»Ÿç§°ä¸ºè¿åŠ¨ã€‚ å‡å¦‚å®‡å®™å­˜åœ¨æ ¹èŠ‚ç‚¹ï¼Œè¶Šé è¿‘æ ¹èŠ‚ç‚¹çš„è‚¯å®šè¶ŠæŠ½è±¡ï¼Œæˆ‘ä»¬ç°åœ¨æ˜¯å·¥ä½œåœ¨åº•å±‚çš„å…·è±¡èŠ‚ç‚¹ä¸‹ã€‚ \u0026gt; é¢å‘å¯¹è±¡å±äºåˆ†è§£ï¼Œå‡½æ•°ç¼–ç¨‹å±äºç»„åˆã€‚æœ‰ä»¥ä¸º åˆ©ï¼Œé€šè¿‡é¢å‘å¯¹è±¡æˆ‘ä»¬å°†ä¸€åˆ†è§£ä¸ºå¤šä¸ªï¼Œæ•°é‡å¤šäº†ï¼Œâ€œæœ‰â€ï¼Œè€Œå‡½æ•°ç¼–ç¨‹åˆ™æ˜¯å°†å¤šä¸ªç»„åˆæˆä¸€ä¸ªï¼Œæ•°é‡å°‘äº† ï¼Œâ€œæ— â€ï¼Œæ— æ‰èƒ½ç”¨ï¼Œåªæœ‰å¿½ç•¥äº‹ç‰©å†…éƒ¨çš„ç»†èŠ‚ï¼Œæˆ‘ä»¬æ‰ èƒ½ç”¨å®ƒï¼Œå¦åˆ™é™·å…¥ç»†èŠ‚è¿·å¤±æ–¹å‘ã€‚æ¢å¥è¯è¯´ï¼šæ•°å­¦åˆ†æ•°è€ƒå¾—å¥½ï¼Œä¸ä»£è¡¨åœ¨å®é™…ä¸­ç”¨æ•°å­¦ç”¨çš„å¥½ï¼Œç‰› é¡¿æ²¡æœ‰å‘æ˜å‡ ä½•å­¦ï¼Œä½†æ˜¯ç”¨äº†å‡ ä½•å­¦ï¼Œåˆ›é€ äº†å¾®ç§¯åˆ†ï¼Œç”¨å®ƒä»¬æ¨å¯¼ å‡ºä¸‡æœ‰å¼•åŠ›ï¼›çˆ±å› æ–¯å¦ç”¨äº†éå‡ ä½•å­¦æ¨å¯¼äº†ç›¸å¯¹è®ºã€‚\n###ä»æœ‰è‡³æ— æ–¹ä¸ºç”¨ï¼Œæœ‰ä¹ƒåˆ†ï¼Œæ— ä¹ƒåˆï¼Œå®‡å®™çš„èµ·ç‚¹æºäºæ— \nå­¦ä¹ æ˜¯ä¸€ç§åˆ†è§£èƒ½åŠ›ï¼Œä½¿ç”¨æ˜¯ä¸€ç§ç»„åˆèƒ½åŠ›ï¼Œè¿™æ˜¯ä¸¤ç§ä¸åŒçš„èƒ½åŠ›ã€‚ \u0026gt; å†çœ‹çœ‹è€å­é“å¾·ç»çš„ä¸€æ®µï¼šä¸‰åå¹…å…±ä¸€æ¯‚ï¼Œå½“å…¶æ— ï¼Œæœ‰è½¦ä¹‹ç”¨ã€‚åŸåŸ´ä»¥ä¸ºå™¨ï¼Œå½“å…¶æ— ï¼Œæœ‰å™¨ä¹‹ç”¨ã€‚å‡¿æˆ·ç‰–ä»¥ä¸ºå®¤ï¼Œå½“å…¶æ— ï¼Œæœ‰å®¤ä¹‹ç”¨ã€‚æ•…æœ‰ä¹‹ä»¥ä¸ºåˆ©ï¼Œæ— ä¹‹ ä»¥ä¸ºç”¨ã€‚ è¿™æ®µè¯æ„æ€æ˜¯ï¼šä¸‰åæ ¹æ£å­åšæˆçš„åœ†è½±è¾˜ï¼Œåªæœ‰å¿½è§†åœ†è½±è¾˜å†…éƒ¨è¿™ç§ç»“æ„ï¼Œç€çœ¼äºåœ†è½±è¾˜å¤–éƒ¨ï¼Œæ‰ä¼šå‘ç°å®ƒåŸæ¥æ˜¯å¯ä»¥åšè½¦çš„è½®å­è¿™ä¸€ç”¨å¤„ï¼Œä¸¤ä¸ªè½±è¾˜ä¸è½¦ æ¶ç»„åˆæˆä¸€è¾†è½¦ã€‚æ¯”å¦‚é—¨çª—ï¼Œåªæœ‰å¿½è§†å…¶å†…éƒ¨å¦‚ä½•ç»“æ„çš„æ„å»ºï¼Œæ‰ä¼šä»å¤–éƒ¨æƒ³åˆ°ç”¨å®ƒåœ¨æˆ¿é—´ç»„åˆä¸­ã€‚\næ ‘å½¢ç»“æ„æŠ½è±¡ç»†èŠ‚ æˆ‘ä»¬ä¹‹æ‰€ä»¥ä½¿ç”¨æ ‘å½¢ç»“æ„ï¼Œç”¨ä¸€ä¸ªæ ¹èŠ‚ç‚¹ä»£è¡¨å…¶èšåˆç¾¤ä½“ï¼Œç”¨ç»„é•¿ä»£è¡¨æ‰€æœ‰ç»„å‘˜ï¼Œç”¨åå­—ä»£è¡¨äººçš„å…¨éƒ¨ï¼Œç­‰ç­‰è¿™äº›ç»„åˆæŠ½è±¡çš„åŠæ³•å°±æ˜¯è®©æˆ‘ä»¬å¤§è„‘å»é™¤å¤§é‡ å¯¹è±¡å†…éƒ¨çš„ç»†èŠ‚ï¼Œç”¨ä¸€ä¸ªç¬¦å·ä»£æ›¿å®ƒä»¬ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½åŸºäºè¿™ä¸ªæ ‘çš„æ ¹èŠ‚ç‚¹å†ç»„åˆæˆæ–°çš„æ ‘å½¢ç»“æ„ã€‚\nèŒƒç•´ç†è®º-äº¤é™…çš„äº’è”ç½‘ èŒƒç•´ç†è®º(Category)æ€»æ˜¯é¼“åŠ±æˆ‘ä»¬ä»å¯¹è±¡å†…éƒ¨ç»†èŠ‚ä¸­è½¬ç§»å¼€æ¥ï¼Œåœ¨èŒƒç•´ç†è®ºä¸­ ä¸€ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªæŠ½è±¡æ¨¡ç³Šçš„å®ä½“ï¼Œä½ æ‰€æœ‰éœ€è¦çŸ¥é“çš„åªæ˜¯å®ƒå¦‚ä½•å’Œå…¶ä»–å¯¹è±¡äº¤äº’(å…³ç³»)ï¼Œå®ƒæ˜¯æ€ä¹ˆä½¿ç”¨ç®­å¤´å’Œå…¶ä»–å¯¹è±¡è¿æ¥çš„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆäº’è”ç½‘æœç´¢å¼•æ“ Google Baiduç­‰èƒ½å¤Ÿé€šè¿‡åˆ†æé“¾å…¥å’Œé“¾å‡ºçš„é“¾æ¥æ¥æ’åç½‘ç«™ä¸€æ ·ã€‚\næ— ä»¥ä¸ºç”¨\u0026ndash;ç»„åˆæ€æƒ³ å½’æ ¹åˆ°åº•ï¼Œè¿˜æ˜¯â€œæ— ä»¥ä¸ºç”¨â€è¿™ä¸ªèŒƒç•´çš„ç»„åˆæœ¬è´¨å¾ˆå¤šäººéƒ½æ²¡æœ‰ææ¸…æ¥šã€‚\n åªæœ‰å¿˜è®°å¯¹è±¡çš„ç»†èŠ‚æ‰èƒ½ç”¨å¥½å®ƒã€‚ä¸¤ä¸ªåŸå› æ€»ç»“ä¸€ä¸‹ï¼š  é¦–å…ˆï¼Œé¦–å…ˆäººè„‘çŸ­æ—¶è®°å¿†æœ‰é™ï¼Œå¦‚æœå¤§é‡å¯¹è±¡å†…éƒ¨ç»†èŠ‚å æ®å¤§è„‘ï¼Œè€Œæˆ‘ä»¬éœ€è¦ä»å¯¹è±¡å¤–éƒ¨ç»„åˆå®ƒä»¬ï¼Œ è¿™äº›ç»†èŠ‚æ˜¯å¹²æ‰°ã€‚ å…¶æ¬¡ï¼ŒèŒƒç•´ä¹Ÿè®¤ä¸ºç»„åˆå¯¹è±¡åªè¦å°†å¯¹è±¡çœ‹æˆæ¨¡ç³Šå®ä½“ï¼Œæ³¨é‡å®ƒä»¬ä¹‹é—´å…³ç³»ã€‚  å¿˜è®°å­¦ä¹ å¯¹è±¡çš„ç»†èŠ‚æ‰èƒ½ç”¨å¥½å®ƒï¼Œæ— ä»¥ä¸ºç”¨ï¼Œäº‹ç‰©çš„åˆ¶é€ è€…éƒ½ä¸ä¸€å®šèƒ½ç”¨å¥½å®ƒï¼Œé™¤éäº‹å…ˆæœ‰ç›®æ ‡åˆ¶é€ å®ƒã€‚ å› æ­¤ï¼Œå­¦å¹¶ä¸èƒ½è‡´ç”¨ï¼Œæ•°ç†åŒ–å­¦å¾—å¥½ä¸ä¸€å®šç”¨å¾—å¥½ï¼Œåšå£«ç»™è€æ¿æ‰“å·¥ï¼Œè€æ¿èµšå¤§å¤´ã€‚å› ä¸ºä»–æŠŠä½ çš„å­¦é—®ç”¨å¤„å‘æŒ¥äº†ã€‚è‡ªå·±å­¦è‡ªå·±ç”¨å› ä¸ºæ™ºåŠ›é™åˆ¶ä¹Ÿä¸å¯èƒ½ã€‚ ä¸­å›½æ•™è‚²çš„å…¸å‹ åœ¨å­¦ç”Ÿé˜¶æ®µ,ä¸­å›½å­¦ç”Ÿæ•°ç†åŒ–å¾ˆå¥½ï¼Œä½†æ˜¯æ¯•ä¸šåè¯ºè´å°”å¥–è·å¾—è€…å‡ ä¹æ²¡æœ‰ï¼Œä¸–ç•Œè‡ªç„¶ç§‘å­¦é¢†å†›äººç‰©å¾ˆå°‘ï¼Œé‚£äº›é«˜è€ƒçŠ¶å…ƒ å­¦ç¥éƒ½å“ªå„¿å»äº†ï¼Ÿå­¦å¾—å¥½ä¸ ä¸€å®šç”¨å¾—å¥½ï¼Œä¸­å›½æ•™è‚²åˆ¶åº¦æ˜¯ä»¥å­¦ä¹ èƒ½åŠ›è¯„ä»·å­¦ç”Ÿï¼Œå„ç§è€ƒè¯•å……æ–¥å¤§é‡ çŸ¥è¯†ç»†èŠ‚ï¼Œè®©å­¦ç”Ÿè€—è´¹18å¹´äºè¿™äº›å¯èƒ½ä»¥åæ— ç”¨çš„ç»†èŠ‚ä¸­ï¼Œæœ€ç»ˆä»–ä»¬å·²ç»æ²¡æœ‰æ™ºåŠ› ç©ºé—´æ¥æ€è€ƒå¦‚ä½•ä½¿ç”¨è¿™äº›å¤§é‡çš„çŸ¥è¯†ç»†èŠ‚äº†ã€‚ä¸­å›½æ•™è‚²åˆ¶åº¦å­˜åœ¨ä¸¥é‡çš„æœ¬è´¨é”™ è¯¯ã€‚ é¢å‘å¯¹è±¡çš„åˆ†è§£èƒ½åŠ›æ˜¯å¼ºï¼Œä½†æ˜¯ç»„åˆèƒ½åŠ›å¾ˆå¼±ï¼ å®é™…ä¸Šä»å‡½æ•°è¿ç®—çš„è§’åº¦ï¼Œä¸å­˜åœ¨å•çº¯çš„â€œå€¼â€ï¼Œ1åº”è¯¥æ˜¯=\u0026amp; gt;1ï¼Œæˆ–è€…è¯´ï¼Œæ‰€è°“çš„å¸¸é‡å€¼ä¹Ÿæ˜¯å‡½æ•°ï¼Œåªæ˜¯æ¯æ¬¡ä¸ç®¡è¾“å…¥ä»€ä¹ˆéƒ½è¾“å‡ºåŒæ ·çš„ç»“æœã€‚è¿™æ ·ä¸–ç•Œå°±åªæœ‰è¿ç®—ï¼Œå€¼æ˜¯æ²¡å¿…\u0026gt;è¦çš„ï¼Œæ›´æ²¡æœ‰çŠ¶æ€ã€‚ä½†è¿™æ˜¯ç¥çš„è§†è§’ï¼Œè€Œä¸€ æ—¦äººå¼€å§‹æ€è€ƒæ—¶ï¼Œç”±äºä¸å…·å¤‡ç¥çš„æ— é™çš„èƒ½åŠ›ï¼Œåªèƒ½åœ¨æ¯ä¸ªç¬é—´è¯•å›¾å»æŠŠæ¡ä¸–ç•Œï¼Œå°±çœ‹åˆ°äº†å€¼å’ŒçŠ¶æ€ä»¥åŠçŠ¶æ€å‘ˆç°æ—¶çš„context/stage/\u0026gt;èˆå°ã€‚ä½†äººå¸Œ æœ›èƒ½åƒç¥ä¸€æ ·å»ç†è§£ä¸–ç•Œï¼Œå°±åªå¥½ä»è¿™æ¯ä¸ªç¬é—´å‘ˆç°çš„ä¸€åˆ‡ä¸­å»å¯»æ‰¾å˜ä¸ä¸å˜çš„ä¸œè¥¿ï¼Œå½“ä»–ä»¬å†å°½è‰°è¾›æ‰¾åˆ°â€œä¸å˜â€çš„â€œå˜æ¢â€æ—¶å°±è¿«ä¸åŠå¾…åœ°å°†ä¹‹å‘½åä¸ºå®šå¾‹ã€‚  å…³äºä¸Šè¿°æ€æƒ³ï¼Œè®¡ç®—æœºé‚€è¯·Haskellå¸¦é¢†é¢†ç•¥ï¼ˆHaskellå¯ä»¥å­¦ä¹ ï¼Œä½†æ˜¯éœ€è¦æŠ•å…¥å¾ˆå¤šæ—¶é—´ï¼ŒåšæŒ\u0026hellip;ï¼‰\n ç»¼åˆæ€§å¸–å­ è¿™è¾¹ä¹Ÿæœ‰ä¸€äº›è¯¾ç¨‹ä»‹ç» What I Wish I Knew When Learning Haskell 2.2 ( Stephen Diehl ) How to learn haskell ç›¸å½“æ£’çš„è¶£å‘³æŒ‡å—\nä»ç°å®ä¸–ç•Œèµ°å…¥è®¡ç®—æœºï¼Œç»è¿‡è®¡ç®—æœºæ€è€ƒï¼Œå†ä»è®¡ç®—æœºèµ°å‡ºç°å®ä¸–ç•Œï¼Œè¿™å°±æ˜¯å‡½æ•°å¼æ€ç»´ã€‚ å‡½æ•°çš„contextå¼•å…¥äº†æ—¶é—´çš„å…³ç³»ã€‚æˆ‘ä»¬æ€è€ƒé€»è¾‘çš„æ—¶å€™ï¼Œå®šä¹‰å·²ç»æ˜¯ç¡®å®šçš„äº†ã€‚ä¹Ÿæ­£å› ä¸ºæ˜¯ç¡®å®šçš„ï¼Œæ‰å¯ä»¥é€»è¾‘æ€è€ƒã€‚ å‡½æ•°ä¸å­˜åœ¨çŠ¶æ€ï¼Œæ‰€ä»¥è®¡ç®—æœºåŠ å…¥äº†ä¸€ä¸ªç‰¹æ®Šçš„ä¸œè¥¿ï¼šæ—¶é’Ÿã€‚å€¼++æ—¶é—´=çŠ¶æ€++ï¼Œåœ¨å¯ä»¥å¿½è§†æ—¶åºé—®é¢˜æ—¶ï¼Œå¯ä»¥ç›´æ¥æœ‰å€¼=çŠ¶æ€ã€‚å¿½è§†æ—¶åºé—®é¢˜ï¼Œå°±ç›¸å½“äºæˆ‘ä»¬å¹³æ—¶è¯´çš„å¼‚æ­¥ã€‚è‹¥æœå•å•ä½¿ç”¨é”ï¼Œåªæ˜¯ä¸€ç§è€—è´¹èµ„æºæ‰‹æ®µã€‚è€Œæˆ‘ä»¬çœ‹åˆ°æ— è®ºæ˜¯å”¤é†’çº¿ç¨‹ï¼Œè¿˜æ˜¯å»¶æ—¶è¯»å–ï¼Œéƒ½æ˜¯ä¾èµ–æ—¶é’Ÿ ##+ å°ç»“ï¼š\n  ä¸€å¼ æ¡Œå­ä¸ºæ¡ˆä¾‹ï¼Œåˆ†è§£æ€ç»´çš„äººçœ‹åˆ°åé¦–å…ˆæƒ³åˆ°è¿™å¼ æ¡Œå­ç”±ä»€ä¹ˆæ„æˆï¼Œé•¿å®½é«˜å’Œæè´¨ï¼Œè¿™äº›éƒ½æ˜¯æ¡Œå­çš„å†…éƒ¨ç»†èŠ‚ï¼›è€Œç»„åˆæ€ç»´çš„äººçœ‹åˆ°åï¼Œç¯é¡¾å››å‘¨ï¼Œçœ‹çœ‹å…¶å¤„äºä»€ä¹ˆç¯å¢ƒï¼Œå¦‚æœæ”¾åœ¨æ•™å®¤ä¸­ï¼Œä»–åˆ¤æ–­è¿™æ˜¯ä¸€å¼ è¯¾æ¡Œï¼Œå¦‚æœæ”¾åœ¨é£Ÿå ‚ï¼Œä»–åˆ¤æ–­è¿™æ˜¯ä¸€å¼ é¥­æ¡Œã€‚\nä»è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºç»„åˆæ˜¯ä»è¡Œä¸ºï¼ˆè¿åŠ¨ã€å˜åŒ–ã€æ—¶é—´ï¼‰è§’åº¦çœ‹å¾… ä¸–ç•Œçš„ï¼Œâ€œè¯¾æ¡Œâ€ã€â€œé¥­æ¡Œâ€ä¸­çš„â€œè¯¾â€å’Œâ€œé¥­â€åœ¨è¿™é‡Œæ˜¯åŠ¨è¯ï¼Œæ„ä¸ºâ€œä¸Šè¯¾ç”¨â€ã€â€œåƒé¥­ç”¨â€çš„æ„æ€ï¼Œâ€œç”¨â€æ˜¯åŠ¨è¯ï¼ŒåŒä¸€ä¸ªæ¡Œå­å‡ºç°åœ¨ä¸åŒçš„ç¯å¢ƒä¸­å‘æŒ¥ä¸åŒçš„ ä½œç”¨ã€‚è€Œåˆ†è§£æ€ç»´åªç ”ç©¶ç©ºé—´ï¼Œåªç ”ç©¶æ¡Œå­çš„ç©ºé—´ç»“æ„æ˜¯ä»€ä¹ˆï¼Œç”šè‡³ä¸ç ”ç©¶ä¸ºä»€ä¹ˆæ˜¯å››æ¡è…¿ï¼Œä¸ºä»€ä¹ˆæ¯æ¡è…¿é•¿åº¦ç›¸åŒï¼Œåˆ†è§£æ€ç»´æ ¹æœ¬ä¸è€ƒè™‘è¿™äº›ï¼Œä¸ç”¨è€ƒè™‘ä»»ä½•æ¡Œå­ ä¹‹å¤–çš„ä¸–ç•Œï¼Œåœ¨åˆ†è§£æ€ç»´ä¸­æ²¡æœ‰ä¸‡æœ‰å¼•åŠ›ã€æ²¡æœ‰åœ°é¢çš„æ°´å¹³ã€æ²¡æœ‰ä¹¦æˆ¿å’Œé¤å…ï¼Œåªæœ‰ç©ºé—´ï¼Œåˆ†è§£åªè€ƒè™‘ç©ºé—´çš„ç»„æˆç»“æ„ã€‚çœ‹æ¥åˆ†è§£å’Œç»„åˆæ˜¯ç›¸äº’ä¾å­˜çš„ï¼Œåˆ†è§£æ—¶ç ”ç©¶ çš„æ˜¯ç©ºé—´ï¼Œç»„åˆæ—¶ç ”ç©¶çš„æ˜¯è¡Œä¸ºï¼ŒæŠŠæ¡Œå­æ”¾è¿›é¤å…çš„æ„ä¹‰æ˜¯æœŸå¾…ä½¿ç”¨å®ƒåƒé¥­è¿™æ ·ä¸€ç§è¿åŠ¨ã€‚  èŒƒç•´è‹±æ–‡æ˜¯Categoryï¼Œä¹Ÿæ˜¯++åˆ†ç±»++çš„æ„æ€ï¼Œæ‰“ä¸ªæ¯”å–»ï¼ŒGoogleèƒ½æ ¹æ®å“ªäº›ç½‘ç«™å¼•ç”¨ä½ çš„ç½‘ç«™è¿™ä¸ªå¤–éƒ¨ä¿¡æ¯è¿›è¡ŒPageRankè¯„åˆ†ï¼Œä»è€Œå¯¹ä½ çš„ç½‘ç«™æƒé‡è¿›è¡Œæ’åºï¼Œè¿™ä¸ªé“ç†å’Œæˆ‘ä»¬è¯„ä»·ä¸€ä¸ªäººæœ‰äº›ç±»ä¼¼ï¼Œçœ‹ä¸€ä¸ªä¸è®¤è¯†çš„äººæ€ä¹ˆæ ·ï¼Œé‚£å°±çœ‹çœ‹ä»–äº¤å¾€çš„ä»€ä¹ˆæœ‹å‹ï¼Œä»€ä¹ˆç¯å¢ƒï¼Œè¿‘å¢¨è€…é»‘ï¼Œäººä»¥ç¾¤åˆ†ï¼Œç‰©ä»¥ç±»èšï¼Œè¿™äº›éƒ½æ˜¯ä»äº‹ç‰©æ‰€åœ¨çš„åˆ†ç±»ç±»åˆ«ä¸­åˆ¤æ–­å…¶ä»·å€¼ï¼Œè€Œä¸æ˜¯ä»äº‹ç‰©å†…éƒ¨ç»†èŠ‚ã€‚ï¼ˆè¯„åˆ¤ä¸ªäººçš„ä»·å€¼æ ‡å‡†è·Ÿä¸åŒçš„äººåœ¨ä¸€èµ·ï¼Œæ„å‘³ç€ä½ çš„ä»·å€¼ä¸ä¸€æ ·.ï¼‰\nmonad éšè—lambda Monadæ˜¯ä¸€ç§ç»“æ„ï¼Œè¿™ç§ç»“æ„èƒ½å¤Ÿå°†ä¸€ä¸ªå€¼æ”¾å…¥ä¸€ä¸ªå¯è®¡ç®—çš„ä¸Šä¸‹æ–‡ä¸­ã€‚å› ä¸ºLambdaæ˜¯ä¸€ä¸ªå’Œä¸Šä¸‹æ–‡ç¯å¢ƒæœ‰å…³çš„è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œå¯¹Monadçš„ä¸Šä¸‹æ–‡ç†è§£å°±æ¯”è¾ƒå®¹æ˜“ã€‚ monadæ˜¯ä»èŒƒç•´è®ºå¼•å…¥ï¼Œ èŒƒç•´å…¶å®å°±æ˜¯ä¸€ä¸ªé›†åˆï¼Œåªä¸è¿‡å¯¹è¿™ä¸ªé›†åˆæœ‰ä¸€äº›çº¦æŸå®šä¹‰ï¼Œå¦‚æœ ç†Ÿæ‚‰ä¸šåŠ¡å»ºæ¨¡çš„äººå¯èƒ½å¯¹è¿™ç§æ€ç»´æ–¹å¼ä¸é™Œç”Ÿï¼Œç»å¸¸æˆ‘ä»¬ä¼šå¯¹æŠ½è±¡çš„äº‹ç‰©è¿›è¡Œå®šä¹‰ï¼Œæ•°å­¦ä¸ŠåŸºæœ¬å°±æ˜¯ç”¨é›†åˆæ¦‚å¿µï¼Œå®é™…ä¸Šä»ç½—ç´ æ‚–è®ºæ‹¯æ•‘äº†æ•°å­¦å¼€å§‹ï¼Œæ•°å­¦ç¦»ä¸å¼€é›†åˆï¼Œå¯¹äºä¸€ä¸ªå›½å®¶ç¤¾ä¼šï¼Œä¸ªäººä¸ç¤¾ä¼šä¹Ÿæ˜¯ä¸åŒçš„æ¦‚å¿µï¼Œç¤¾ä¼šæ˜¯ä¸€ä¸ª++é›†åˆ++æ¦‚å¿µï¼Œä»++é›†åˆè§’åº¦++è€ƒè™‘é—®é¢˜å’Œä»ä¸ªäººå…ƒç´ è§’åº¦è€ƒè™‘é—®é¢˜æ˜¯ä¸¤ç§æˆªç„¶ä¸åŒçš„æ€è·¯ï¼Œå¦‚æœä½ å¹³æ—¶æ³¨ é‡è¿™ç§åŒºåˆ«ï¼Œä½ å¯èƒ½ä¼šæœ‰ä¸¤ç§äººç”Ÿè§‚ã€‚ç¥ä½ è„‘æ´å¤§å¼€ã€‚\nå‡½æ•°å¼æ›¿ä»£sqlï¼Ÿ å‡½æ•°çš„é€»è¾‘æ€§ä¸å…³ç³»æ•°æ®åº“çš„æ˜¯ä¸€è‡´çš„ï¼Œè€Œé€»è¾‘åœ¨ä¸åŒè¯­è¨€ä¹‹é—´æ˜¯è‡ªç„¶è´¯ç©¿çš„ï¼Œä¹Ÿå°±æ˜¯è¯´è‹¥æœæ‰€æœ‰éƒ½ç”¨å‡½æ•°æ¥è¡¨è¾¾çš„ï¼Œå¯ä»¥ä½¿sqlæ¶ˆå¤±ï¼Œé‚£ä¹ˆç”±äºsqlå¼•å‘çš„é—®é¢˜è‡ªç„¶å°±æ¶ˆå¤±ã€‚ æ•°æ®åº“ = ä¸€ä¸ªé›†åˆ,è¿™å°±æ˜¯é¢å‘é›†åˆï¼Œmongodbå°±æ˜¯è¿™æ ·çš„æ€æƒ³\n","date":1431781910,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431781910,"objectID":"9dcdb6687e4a00c3cb62fb60e1f75be4","permalink":"/blog/2015/05/16/haskellji-ge-ji-ben-gai-nian-xue-er-wu-yong-wu-yi-wei-yong/","publishdate":"2015-05-16T21:11:50+08:00","relpermalink":"/blog/2015/05/16/haskellji-ge-ji-ben-gai-nian-xue-er-wu-yong-wu-yi-wei-yong/","section":"archives","summary":" æ¨¡å¼åŒ¹é… = +èµ·ç€ä¸€ç§æ¨¡å¼åŒ¹é…ï¼Œ=ä¸è¦ç¿»è¯‘æˆç­‰äº æœ€å¥½ç¿»è¯‘ä¸ºå¦‚æœåŒ¹é…å‰é¢+ åˆ™ä»–çš„å€¼ä¸ºåé¢.-\u0026gt; ä¹Ÿèµ·ç€ä¸€ç§ç±»å‹çš„æ¨¡å¼åŒ¹é…ã€‚ åˆ†æ”¯ |åœ¨åˆ›å»ºå‡½æ•°çš„æ—¶å€™ ä½“ç°ç€ä¸€ç§åˆ†æ”¯çš„æ•ˆæœã€‚ if-else è¿™å…¶å®æ˜¯ä¸€ç§æ§åˆ¶è¯­å¥ï¼Œä¸èƒ½è¯´Haskellæ”¾æ‰äº†æ§åˆ¶è¯­å¥ï¼Œè€Œåº”è¯¥æ˜¯å¾ªç¯è¯­å¥ã€‚ ä¸€åˆ‡éƒ½æ˜¯å‡½æ•°ã€‚ æ ¹æ®monadçš„å†…ç½®ç»“æ„ï¼Œå‡½æ•°å¯ä»¥ç»„åˆç”Ÿæˆç±»ä¼¼äºæ•°å­¦çš„ç»„åˆå‡½æ•°ï¼ˆåŸ‹è—å†…éƒ¨çš„lambdaç»“æ„ï¼‰ ","tags":null,"title":"Haskellå‡ ä¸ªåŸºæœ¬æ¦‚å¿µ--å­¦è€Œæ— ç”¨--æ— ä»¥ä¸ºç”¨","type":"archives"},{"authors":null,"categories":["Haskell"],"content":" è¯­è¨€å¯ä»¥å‰Šå°–æˆ‘ä»¬çš„æ€ç»´ã€‚ è¯­è¨€ä¹Ÿä¼šé™åˆ¶æˆ‘ä»¬çš„ä¸–ç•Œã€‚ å¥½çš„è¯­è¨€ä¸€å®šä¼šå½±å“ä½ çš„æ€ç»´æ–¹å¼,haskell,scheme,lisp   Language shapes the way we think, and determines what we can think about. Benjamin Lee Whorf\n  The limits of my language mean the limits of my world. Ludwig Wittgenstein\n  A language that doesnâ€™t affect the way you think about programming, is not worth knowing. Alan Perlis\n ##Who uses Haskell? + AT\u0026amp;T : automate form processing + Bank of America Merril Lynch : data transformation and loading + Bump : Haskell-based server + Facebook : manipulating PHP code base + Google : internal IT infrastructure + MITRE : cryptographic protocol analysis + NVIDIA : in-house tools + Qualcomm, Inc : generate Lua bindings\nTypes Every function in haskell has a Type signature.\nfoo :: Int -\u0026gt; String  I don\u0026rsquo;t know what foo means,but I know what it does!\nHaskellå¼•è¿›äº†å¾ˆå¤šæ¨¡å—åŒ–æ€æƒ³ï¼Œæ¯”å¦‚module,importå¯¼åŒ…çš„ï¼Œä¸‹é¢çš„è¿™äº›ä¹¦éƒ½å¯ä»¥åœ¨ æ–°æµªå¾®ç›˜æ‰¾åˆ°: ###ä¹¦ç± - Book1: Books for Learning Haskell - Book2: Learn You a Haskell for Great Good! (Important) - Book3: Real World Haskell(Important) - Book4: Beginning Haskell - Book5: Thinking Functionally with Haskell - Book6: Parallel and Concurrent Programming in Haskell - Book7: Programming in Haskell - Book8: Haskell: The Craft of Functional Programming (Important) - Book9: The Haskell School of Music - Book10:Developing Web Applications with Haskell and Yesod\n##Functional: * Haskell, Lisp, ML, Scheme, Erlang Focuses on the high-level \u0026ldquo;what\u0026rdquo;(Math thinking) ##Imperative: * C++, Java, Python, Pascal Focuses on the low-level \u0026ldquo;how\u0026rdquo;(Computer Thinking) Haskell Learning Center\n","date":1431764259,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431764259,"objectID":"c427048102b577dbd752c026149b9fd1","permalink":"/blog/2015/05/16/language-limits-the-world-of-you/","publishdate":"2015-05-16T16:17:39+08:00","relpermalink":"/blog/2015/05/16/language-limits-the-world-of-you/","section":"archives","summary":" è¯­è¨€å¯ä»¥å‰Šå°–æˆ‘ä»¬çš„æ€ç»´ã€‚ è¯­è¨€ä¹Ÿä¼šé™åˆ¶æˆ‘ä»¬çš„ä¸–ç•Œã€‚ å¥½çš„è¯­è¨€ä¸€å®šä¼šå½±å“ä½ çš„æ€ç»´æ–¹å¼,haskell,scheme,lisp   Language shapes the way we think, and determines what we can think about. Benjamin Lee Whorf\n","tags":null,"title":"language limits the world of you","type":"archives"},{"authors":null,"categories":["Haskell"],"content":"2001å¹´ï¼Œå‡ºç”Ÿäºè·å…°çš„è®¡ç®—æœºå¤§å¸ˆã€å›¾çµå¥–è·å¾—è€…EdsgerW.Dijkstraç»™å¾·å·å¤§å­¦é¢„ç®—å§”å‘˜ä¼šå†™ä¿¡ï¼ŒåŠ›åŠä¸è¦å°†è®¡ç®—æœºå…¥é—¨è¯¾ç¨‹æ”¹ä¸ºJavaã€‚ä¸å¹¸çš„æ˜¯ï¼Œå­¦æ ¡æœ€ç»ˆè¿˜æ˜¯ç”¨Javaè¯¾ç¨‹æ›¿æ¢äº†Haskellã€‚HaskellçœŸçš„ä¸è¡Œäº†ï¼Ÿå›½å†…æœ‰äº›äººçš„è¯„è®º\n Haskell:å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ Java : å‘½ä»¤ç¼–ç¨‹è¯­è¨€ å°½ç®¡Haskellä¸å®Œç¾ï¼Œä½†ä»ç„¶æ¯”Javaå¥½å‡ ä¸ªæ•°é‡çº§ï¼ŒJavaå°±æ˜¯ä¸€ä¸ªå¤§æ‚çƒ©(å®ƒæ˜¯é€šè¿‡å¤§èŒƒå›´çš„å¹¿å‘Šå’Œé”€å”®å‘˜å¤¸å¼ çš„å®£ä¼ æ‰è¾¾åˆ°å®ƒçš„å•†ä¸šæ¥å—)ã€‚   å¦‚æœåˆ«äººé—®ä½ Haskellèƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ ä¸€ä¸ªèƒ½å¤Ÿç¼–ç¨‹çš„ç¼–ç¨‹è¯­è¨€ï¼Œé«˜çº§å‡½æ•°ç¼–ç¨‹è¯­è¨€\n å¦‚æœåˆ«äººé—®ä½ Haskellå’Œschemeæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ æ¯”schemeæ›´å¼ºè°ƒç±»å‹ç†è®ºï¼Œä½†æ˜¯ç›¸å¯¹schemeç”±äºå¯¹äºtype theoryçš„è¿‡åº¦è¿½æ±‚ åè€Œæ›´åŠ éš¾äºç¼–ç¨‹\n  å¦‚æœåˆ«äººé—®ä½ Haskell å¦‚ä½•å®ç°å†’æ³¡æ³• ç›´æ¥æ’åº å¿«é€Ÿæ’åºï¼Ÿ å†’æ³¡æ’åº sort1 [x] = [x] sort1 (x:x1:xs) {-é€‰å–äº†ä¸€ä¸ªx1temp å€¼ xå½“åšé¦–æ•°ï¼Œx1:temp-} | x\u0026gt;x1 = x1:sort1 (x:xs) | otherwise = x:sort1 (x1:xs) mpsort [] = [] mpsort x = let tmp = sort1 x in mpsort (init tmp) ++ [(last tmp)]  ç›´æ¥æ’åº import Data.List selectsort::[Int] -\u0026gt; [Int] selectsort [] = [] selectsort [x] = [x] selectsort xs = minimum xs : selectsort ( delete ( minimum xs ) xs)  å¿«é€Ÿæ’åº1 quicksort :: (Ord a) =\u0026gt; [a] -\u0026gt; [a] quicksort [] = [] quicksort (x:xs) = let smallerSorted = quicksort [a | a \u0026lt;- xs, a \u0026lt;= x] biggerSorted = quicksort [a | a \u0026lt;- xs, a \u0026gt; x] in smallerSorted ++ [x] ++ biggerSorted  å¿«é€Ÿæ’åº2 quicksort :: (Ord a) =\u0026gt; [a] -\u0026gt; [a] quicksort [] = [] quicksort (x:xs) = let smallerSorted = quicksort (filter (\u0026lt;=x) xs) biggerSorted = quicksort (filter (\u0026gt;x) xs) in smallerSorted ++ [x] ++ biggerSorted  å¦‚æœåˆ«äººé—®ä½ é€’å½’æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ å¦‚æœåˆ«äººé—®ä½ å¦‚ä½•æ„é€ Fibonaaciæ•°ï¼Ÿ å¦‚æœåˆ«äººé—®ä½ :: =\u0026gt; -\u0026gt;æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ  aè¡¨ç¤ºäººæ„çš„ç±»å‹ \u0026mdash;\u0026mdash;\u0026mdash;æ³›å½¢ \u0026mdash;å¤šæ€å‡½æ•°æŒ‚é’©ã€‚ã€‚ã€‚ã€‚   aè¡¨ç¤ºäººæ„çš„ç±»å‹ \u0026mdash;\u0026mdash;\u0026mdash;æ³›å½¢ \u0026mdash;å¤šæ€å‡½æ•°æŒ‚é’©ã€‚ã€‚ã€‚ã€‚   aè¡¨ç¤ºäººæ„çš„ç±»å‹ \u0026mdash;\u0026mdash;\u0026mdash;æ³›å½¢ \u0026mdash;å¤šæ€å‡½æ•°æŒ‚é’©ã€‚ã€‚ã€‚ã€‚   aè¡¨ç¤ºäººæ„çš„ç±»å‹ \u0026mdash;\u0026mdash;\u0026mdash;æ³›å½¢ \u0026mdash;å¤šæ€å‡½æ•°æŒ‚é’©ã€‚ã€‚ã€‚ã€‚   aè¡¨ç¤ºäººæ„çš„ç±»å‹ \u0026mdash;\u0026mdash;\u0026mdash;æ³›å½¢ \u0026mdash;å¤šæ€å‡½æ•°æŒ‚é’©ã€‚ã€‚ã€‚ã€‚   \u0026mdash;æ³›å½¢ \u0026mdash;å¤šæ€å‡½æ•°æŒ‚é’©ã€‚ã€‚ã€‚ã€‚  :: è¯»ä½œä»–çš„ç±»å‹ä¸º ï¼ˆç±»ä¼¼ !! ä»listå»é™¤ ç¬¬å‡ ä¸ªå…ƒç´  \u0026lt;- å±äº elemæ˜¯ä»€ä¹ˆçš„å…ƒç´  mod å¯ä»¥å’Œä»€ä¹ˆé™¤ã€‚ã€‚\nå¦‚æœæœ‰äººé—®ä½ å¦‚ä½•ç”¨haskellç¼–å†™å‡½æ•°ï¼Ÿ ä»–å’Œschemeæœ‰å¾ˆå¤§çš„ä¸åŒï¼Œschemeç”¨çš„æ˜¯(define) è€Œhaskellç”¨çš„æ˜¯æ¨¡å¼åŒ¹é…ï¼Œæ¯”å¦‚ä¸‹é¢çš„æ±‚æœ€å¤§å€¼çš„ç¨‹åº\nmaximum' :: (Ord a) =\u0026gt; [a] -\u0026gt; a maximum' [] = error \u0026quot;maximum of empty list\u0026quot; maximum' [x] = x maximum' (x:xs) | x \u0026gt; maxTail = x | otherwise = maxTail where maxTail = maximum' xs  å¦‚æœåˆ«äººå«ä½ ç®€åŒ–ä¸Šé¢çš„maximumç¨‹åº maximum' :: (Ord a) =\u0026gt; [a] -\u0026gt; a maximum' [] = error \u0026quot;maximum of empty list\u0026quot; maximum' [x] = x maximum' (x:xs) = max x (maximum' xs)  å¦‚æœåˆ«äººé—®ä½ Haskellåˆ°åº•é•¿æˆå•¥å­æ ·å­ï¼Ÿ ä½ ä¼šå‘Šè¯‰ä»–ä»–æ¶¨èµ·æ¥çœŸçš„æ˜¯ä¸€èŠ‚ä¸€èŠ‚çš„ï¼Œä¸€æ®µä¸€æ®µçš„ï¼Œæœ‰æ£±æœ‰è§’\nå¦‚æœæœ‰äººé—®ä½ replicate 3 5æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ replicate' :: (Num i, Ord i) =\u0026gt; i -\u0026gt; a -\u0026gt; [a] replicate' n x | n \u0026lt;= 0 = [] | otherwise = x:replicate' (n-1) x  å¦‚æœæœ‰äººé—®ä½ takeæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ drop? take' :: (Num i, Ord i) =\u0026gt; i -\u0026gt; [a] -\u0026gt; [a] take' n _ | n \u0026lt;= 0 = [] take' _ [] = [] take' n (x:xs) = x : take' (n-1) xs  å¦‚æœæœ‰äººé—®ä½ _ ä¸‹åˆ’çº¿è¡¨ç¤ºä»€ä¹ˆæ„æ€ï¼Ÿ _ ä»£è¡¨ä»»æ„ä¸œè¥¿\nå¦‚æœæœ‰äººé—®ä½ reverseå¦‚ä½•å®ç°ï¼Ÿ reverse' :: [a] -\u0026gt; [a] reverse' [] = [] reverse' (x:xs) = reverse' xs ++ [x]  å¦‚æœæœ‰äººé—®ä½ repeatå¦‚ä½•å®ç°ï¼Ÿ repeat' :: a -\u0026gt; [a] repeat' x = x:repeat' x  å¦‚æœæœ‰äººåšäº†ä¸€ä¸ªtuple ï¼Œæƒ³è¦ç”¨zipäº§ç”Ÿæ›´å¤štuplesï¼Ÿ zip' :: [a] -\u0026gt; [b] -\u0026gt; [(a,b)] zip' _ [] = [] zip' [] _ = [] zip' (x:xs) (y:ys) = (x,y):zip' xs ys  å¦‚æœæœ‰äººé—®ä½ modçš„ç±»ä¼¼å‡½æ•° elemçš„å®ç°ï¼Ÿ elem' :: (Eq a) =\u0026gt; a -\u0026gt; [a] -\u0026gt; Bool elem' a [] = False elem' a (x:xs) | a == x = True | otherwise = a `elem'` xs  å¦‚æœæœ‰äººé—®ä½ typeclassæœ‰å“ªé‡Œç±»ï¼Ÿ åˆ©ç”¨ type è‡ªå·±æŸ¥å»\nå¦‚æœæœ‰äººé—®ä½ Haskellæœ‰æ²¡æœ‰ç±»ä¼¼schemeçš„lambdaå‡½æ•°ï¼Ÿ å‘Šè¯‰ä»–æœ‰ï¼Œè€Œä¸”æ›´åŠ ç›´æ¥ï¼Œè™½ç„¶åˆšå¼€å§‹ä¹¦å†™èµ·æ¥ä¸æ–¹ä¾¿\nschemeç‰ˆçš„lambda:\n (lambda (x y) (+ x y))  Haskellç‰ˆçš„lambda:\n (\\y -\u0026gt; y + 3ï¼‰ å…¶ä¸­\\åé¢è·Ÿç€å‚æ•° -\u0026gt;åé¢è·Ÿç€å‡½æ•°ä½“  18.å¦‚æœæœ‰äººé—®haskellæœ‰æ²¡æœ‰å­˜åœ¨é«˜é˜¶å‡½æ•°ï¼Ÿ æœ‰ ã€‚ map ,filter\nmap (\\y-\u0026gt; y+3) [3,5,6]  19.å¦‚æœæœ‰äººé—®ä½ flipæœ‰ä»€ä¹ˆå«ä¹‰ï¼Ÿ let f x y = x / y Prelude\u0026gt; map (f 2) [1,2,3] [2.0,1.0,0.6666666666666666] Prelude\u0026gt; map (flip f 2) [1,2,3] [0.5,1.0,1.5]  20. å¦‚ä½•æœ‰äººé—® å¦‚ä½•è¿è¡Œ 2048 $ runhaskell putchar_test.hs use runhaskell to run the *.hs programme  21. å¦‚æœæœ‰äººé—®haskellå®ç°é€’å½’çš„è‡ªç„¶è¡¨è¾¾å¼ï¼Ÿ quicksort (x:xs) = elem' a (x:xs) zip' (x:xs) (y:ys) = (x,y):zip' xs ys reverse' (x:xs) = reverse' xs ++ [x] take' n (x:xs) = x : take' (n-1) xs maximum' (x:xs) = max x (maximum' xs) maximum' (x:xs)  ä½ å¯ä»¥çœ‹è§æ¯ä¸€ä¸ªå½¢å¼éƒ½æœ‰å‡½æ•°å,å‡½æ•°ä½¿ç”¨æ–¹å¼,å‡½æ•°çš„å‚æ•°è¡¨\nè¿™æ˜¯ä¸€ç§æ¨¡å¼,å› ä¸ºHaskellä½¿ç”¨å‡½æ•°çš„æ—¶å€™ï¼Œå…ˆå†™å‡ºå‡½æ•°ï¼Œç„¶åç©ºæ ¼ å†™å‡ºå˜é‡ ç´§æ¥ç€å…¶ä»–å¯é€‰å˜é‡ æ‰€ä»¥ä½ ä¹Ÿå‡½æ•°åŒ¹é…æ¨¡å¼ ä¹Ÿåº”è¯¥æ˜¯è¿™æ ·æ¥å†™ åŸºäºè¿™ç§æ€æƒ³ï¼Œä½ é‡æ–°å›è¿‡å¤´çœ‹å‡½æ•°å®šä¹‰ï¼Œä½ ä¼šå‘ç°è¿˜çœŸçš„æ˜¯è¿™æ ·é¢ï¼Ÿï¼ ä»å‡½æ•°çš„å®šä¹‰çŸ¥é“ä»–çš„ç”¨æ³•ï¼Œè¿™å°±æ˜¯Haskellä¸ä¼—ä¸åŒçš„ä¸€ç‚¹ã€‚\n22. å¦‚æœæœ‰äººé—®å¦‚ä½•å†™å‡ºé˜¶ä¹˜å½¢å¼ï¼Ÿ å‘Šè¯‰ä»–ç”¨å‡½æ•°ï¼Œå‘Šè¯‰ä»–ç”¨å‡½æ•°åŒ¹é…ï¼Œå‘Šè¯‰ä»–ç”¨é€’å½’ã€‚ã€‚ã€‚ã€‚ã€‚\nfactorial :: (Integral a) =\u0026gt; a -\u0026gt; a factorial 0 = 1 factorial n = n * factorial (n - 1)  23. å¦‚æœåˆ«äººé—®ä½ Haskellå¦‚ä½•æ–°å»ºä¸€ä¸­ç±»å‹ï¼Ÿ æš‚æ—¶ä¸å¤ªæ‡‚ ä½†æ˜¯æˆ‘çŸ¥é“ Haskellä½¿ç”¨ dataæ¥å®šä¹‰ç±»åˆ« juliaä½¿ç”¨typeæ¥å®šä¹‰\n24. å¦‚æœåˆ«äººé—®ä½ monads æ˜¯ä»€ä¹ˆç©æ„ï¼Ÿ å…¶å®è¿™ä¸ªæ˜¯æ›´åŠ æ·±å±‚æ¬¡çš„è¿ç”¨Haskell,åœ¨schemeä¹Ÿæœ‰. æ¯”å¦‚IO monad,å¯ä»¥æƒ³è±¡ä¸ºä¸€ç§æŠ½è±¡æ•°æ®ç±»å‹ã€‚\n25. å¦‚æœåˆ«äººé—®ä½ å¦‚ä½•å­¦ä¹ haskellï¼Ÿ å‘Šè¯‰ä»–æœ‰ä¸€ç¯‡æ–‡ç« å«åš å¦‚æ­¤æœ‰è¶£çš„å­¦ä¹ Haskell Haskellè¶£å­¸æŒ‡å— http://learnyouahaskell-zh-tw.csie.org/zh-cn/chapters.html è¿˜ä¸é”™ ï¼Œè¿™ä¸ªæ•™ç¨‹\nå­¦ä¹ Haskell ï¼Œè¦æ˜¯ä½ èƒ½å¤Ÿå¯¹äºç©ºæ ¼ç‰¹åˆ«æ•æ„Ÿï¼Œä¼šå¯¹ä½ æœ‰æ‰€å¥½å¤„ï¼Œå› ä¸ºå¾ˆå¤šåœ°æ–¹éƒ½æ˜¯ç”¨ç©ºæ ¼åˆ†å¼€ è€Œä¸æ˜¯ï¼ˆï¼‰ [] ä¹‹ç±»çš„ã€‚ç©ºæ ¼æœ‰å®é™…æ„ä¹‰ï¼Œåˆ†å¼€ä¸åŒçš„å­—æ®µ\n26. å¦‚æœåˆ«äººé—®ä½  | æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ åˆ†ç±»è¯´æ˜\nbmiTell :: (RealFloat a) =\u0026gt; a -\u0026gt; a -\u0026gt; String bmiTell weight height | weight / height ^ 2 \u0026lt;= 18.5 = \u0026quot;You're underweight, you emo, you!\u0026quot; | weight / height ^ 2 \u0026lt;= 25.0 = \u0026quot;You're supposedly normal. Pffft, I bet you're ugly!\u0026quot; | weight / height ^ 2 \u0026lt;= 30.0 = \u0026quot;You're fat! Lose some weight, fatty!\u0026quot; | otherwise = \u0026quot;You're a whale, congratulations!\u0026quot;  æ¯ä¸€ä¸ªå‡½æ•°å®šä¹‰çš„æ—¶å€™ï¼Œåœ¨Haskellçœ‹æ¥åªæ˜¯å…¶ä¸­çš„ä¸€ç§æ¨¡å¼ï¼Œä¸€ä¸ªæ¨¡å¼ä¸‹å¯ä»¥æœ‰å¾ˆå¤šçš„åˆ†ç±»ï¼Œå¦‚æœä»–æ‰¾ä¸åˆ°æ¨¡å¼ å°±è¯´æ‰¾ä¸åˆ°ï¼Œæ‰€ä»¥å®šä¹‰çš„æ—¶å€™ï¼Œå°½å¯èƒ½çš„å®Œå–„å®šä¹‰ã€‚ æ¯”å¦‚ä¸‹é¢çš„luckyå‡½æ•° å’ŒsayMe å‡½æ•° luckyå‡½æ•°:\nlucky :: (Integral a) =\u0026gt; a -\u0026gt; String lucky 7 = \u0026quot;LUCKY NUMBER SEVEN!\u0026quot; lucky x = \u0026quot;Sorry, you're out of luck, pal!\u0026quot;  saymeå‡½æ•°:\nsayMe :: (Integral a) =\u0026gt; a -\u0026gt; String sayMe 1 = \u0026quot;One!\u0026quot; sayMe 2 = \u0026quot;Two!\u0026quot; sayMe 3 = \u0026quot;Three!\u0026quot; sayMe 4 = \u0026quot;Four!\u0026quot; sayMe 5 = \u0026quot;Five!\u0026quot; sayMe x = \u0026quot;Not between 1 and 5\u0026quot;  27. å¦‚æœåˆ«äººå«ä½ ç®€åŒ–bmiTellå‡½æ•° ä½¿ç”¨where\nbmiTell :: (RealFloat a) =\u0026gt; a -\u0026gt; a -\u0026gt; String bmiTell weight height | bmi \u0026lt;= 18.5 = \u0026quot;You're underweight, you emo, you!\u0026quot; | bmi \u0026lt;= 25.0 = \u0026quot;You're supposedly normal. Pffft, I bet you're ugly!\u0026quot; | bmi \u0026lt;= 30.0 = \u0026quot;You're fat! Lose some weight, fatty!\u0026quot; | otherwise = \u0026quot;You're a whale, congratulations!\u0026quot; where bmi = weight / height ^ 2  28. å¦‚æœåˆ«äººé—®ä½  whereå¯ä»¥è·Ÿå¤šå°‘ä¸ªå˜é‡ ï¼Ÿ è·Ÿä»–è¯´ å¾ˆå¤šä¸ªã€‚\nbmiTell :: (RealFloat a) =\u0026gt; a -\u0026gt; a -\u0026gt; String bmiTell weight height | bmi \u0026lt;= skinny = \u0026quot;You're underweight, you emo, you!\u0026quot; | bmi \u0026lt;= normal = \u0026quot;You're supposedly normal. Pffft, I bet you're ugly!\u0026quot; | bmi \u0026lt;= fat = \u0026quot;You're fat! Lose some weight, fatty!\u0026quot; | otherwise = \u0026quot;You're a whale, congratulations!\u0026quot; where bmi = weight / height ^ 2 skinny = 18.5 normal = 25.0 fat = 30.0  å‡½æ•°åœ¨ where ç»‘å®šä¸­å®šä¹‰çš„åå­—åªå¯¹æœ¬å‡½æ•°å¯è§ï¼Œå› æ­¤æˆ‘ä»¬ä¸å¿…æ‹…å¿ƒå®ƒä¼šæ±¡æŸ“å…¶ä»–å‡½æ•°çš„å‘½åç©ºé—´ã€‚æ³¨æ„ï¼Œå…¶ä¸­çš„åå­— éƒ½æ˜¯ä¸€åˆ—å‚ç›´æ’å¼€ï¼Œå¦‚æœä¸è¿™æ ·è§„èŒƒï¼ŒHaskell å°±æä¸æ¸…æ¥šå®ƒä»¬åœ¨å“ªä¸ªåœ°æ–¹äº†\n29. å¦‚æœæœ‰äººé—®ä½  whereå½“ä¸­å¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…å—ï¼Ÿ å¯ä»¥ã€‚\nwhere bmi = weight / height ^ 2 (skinny, normal, fat) = (18.5, 25.0, 30.0)  30. å¦‚æœåˆ«äººå«ä½ å†™ä¸€ä¸ªshowç±»å‹çš„å‡½æ•°ï¼Ÿ tell :: (Show a) =\u0026gt; [a] -\u0026gt; String tell [] = \u0026quot;The list is empty\u0026quot; tell (x:[]) = \u0026quot;The list has one element: \u0026quot; ++ show x tell (x:y:[]) = \u0026quot;The list has two elements: \u0026quot; ++ show x ++ \u0026quot; and \u0026quot; ++ show y tell (x:y:_) = \u0026quot;This list is long. The first two elements are: \u0026quot; ++ show x ++ \u0026quot; and \u0026quot; ++ show y  è¿™ä¸ªå‡½æ•°é¡¾åŠäº†ç©º Listï¼Œå•å…ƒç´  Listï¼ŒåŒå…ƒç´  List ä»¥åŠè¾ƒé•¿çš„ Listï¼Œæ‰€ä»¥è¿™ä¸ªå‡½æ•°å¾ˆå®‰å…¨ã€‚(x:[]) ä¸ (x:y:[]) ä¹Ÿå¯ä»¥å†™ä½œ [x] å’Œ x,yã€‚ä¸è¿‡ (x:y:_)è¿™æ ·çš„æ¨¡å¼å°±ä¸è¡Œäº†ï¼Œå› ä¸ºå®ƒåŒ¹é…çš„ List é•¿åº¦ä¸å›ºå®šã€‚\n31. å¦‚æœåˆ«äººé—®ä½ Int å’ŒIntegerçš„åŒºåˆ«ï¼Ÿ Int æœ‰ä¸Šä¸‹çº¿ Integeræ²¡æœ‰\nPrelude\u0026gt; minBound :: Int -9223372036854775808 Prelude\u0026gt; min min minBound minimum Prelude\u0026gt; minBound :: Integer \u0026lt;interactive\u0026gt;:247:1: No instance for (Bounded Integer) arising from a use of `minBound'  32. å¦‚æœåˆ«äººé—®ä½ char and [char] çš„åŒºåˆ«ï¼Ÿ Prelude\u0026gt; :t 'a' 'a' :: Char Prelude\u0026gt; :t \u0026quot;a\u0026quot; \u0026quot;a\u0026quot; :: [Char] Prelude\u0026gt; :t \u0026quot;dfasdf\u0026quot; \u0026quot;dfasdf\u0026quot; :: [Char] Prelude\u0026gt;  33. å¦‚æœåˆ«äººé—®ä½ å˜é‡æœ‰ç±»å‹ï¼Œé‚£ä¹ˆå‡½æ•°æ˜¯ä¸æ˜¯ä¹Ÿæœ‰ç±»å‹ï¼Ÿ removeNonUppercase :: [Char] -\u0026gt; [Char] removeNonUppercase st = [ c | c \u0026lt;- st, c `elem` ['A'..'Z']]  removeNonUppercase çš„ç±»å‹ä¸º [Char]-\u0026gt;[Char]ï¼Œä»å®ƒçš„å‚æ•°å’Œå›ä¼ å€¼çš„ç±»å‹ä¸Šå¯ä»¥çœ‹å‡ºï¼Œ å®ƒå°†ä¸€ä¸ªå­—ä¸²æ˜ å°„ä¸ºå¦ä¸€ä¸ªå­—ä¸²ã€‚[Char] ä¸ String æ˜¯ç­‰ä»·çš„ï¼Œä½†ä½¿ç”¨ String ä¼šæ›´æ¸…æ™°ï¼š removeNonUppercase :: String -\u0026gt; Stringã€‚ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ£€æµ‹å‡ºå®ƒçš„ç±»å‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ ‡æ˜äº† å®ƒçš„ç±»å‹å£°æ˜ã€‚è¦æ˜¯å¤šä¸ªå‚æ•°çš„å‡½æ•°è¯¥æ€æ ·ï¼Ÿå¦‚ä¸‹ä¾¿æ˜¯ä¸€ä¸ªå°†ä¸‰ä¸ªæ•´æ•°ç›¸åŠ çš„ç®€å•å‡½æ•° å‚æ•°ä¹‹é—´ç”± -\u0026gt; åˆ†éš”ï¼Œè€Œä¸å›ä¼ å€¼ä¹‹é—´å¹¶æ— ç‰¹æ®Šå·®å¼‚\n34. å¦‚æœåˆ«äººé—®ä½ æœ‰æ²¡æœ‰æ¯”è¾ƒå¥½ç”¨çš„ç¼–ç¨‹å·¥å…·ï¼Ÿ å‘Šè¯‰ä»–Haskellï¼\nè¯¥å¦‚ä½•å­¦ä¹ ï¼Ÿ å‘Šè¯‰ä»–å®‰è£… ghci,å¹¶ä¸”åœ¨è½¯ä»¶ä¸­è¾“å…¥ :brower å°±èƒ½è§‚å¯Ÿåˆ°å¾ˆå¤šçš„ç±»å‹ å¹¶ä¸”æ”¯æŒtabé”®ã€‚ :brower ä¼šåˆ—å‡ºå†…ç½®å‡½æ•°çš„ ç±»å‹ï¼Œä»¥åŠä»–çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•\n35. å¦‚æœåˆ«äººé—®ä½ é«˜é˜¶å‡½æ•°æ˜¯å¦‚ä½•å®šä¹‰ï¼Ÿ é«˜é˜¶å‡½æ•°\nmap f lst --å°†lstæŒ‰ç…§å‡½æ•°fæ˜ å°„å¾—åˆ°ä¸€ä¸ªæ–°çš„æ•°åˆ— map :: (a-\u0026gt;b) -\u0026gt; [a] -\u0026gt; map f [] = [] map f (x:xs) = f x : map f xs  36. å¦‚æœåˆ«äººé—®ä½ å¦‚ä½•ä½¿ç”¨ :brower æä¾›çš„å‡½æ•°ç±»å‹ï¼Ÿ æ¯”å¦‚ï¼š\n36.1 Prelude\u0026gt; :t product product :: Num a =\u0026gt; [a] -\u0026gt; a Prelude\u0026gt; product [3,5,2] 30 36.2 readFile :: FilePath -\u0026gt; IO String Prelude\u0026gt; readFile \u0026quot;/tmp/a.txt\u0026quot; \u0026quot;fdsf\u0026quot; Prelude\u0026gt; let d=readFile \u0026quot;/tmp/a.txt\u0026quot; Prelude\u0026gt; d \u0026quot;fdsf\u0026quot;  37. å¦‚æœåˆ«äººé—®ä½ å¦‚ä½•åˆ‡æ–­ä¸€ä¸ªæ•°ç»„åœ¨æŸä¸ªä½ç½®ï¼Ÿ splitAt :: Int -\u0026gt; [a] -\u0026gt; ([a], [a]) Prelude\u0026gt; splitAt 3 [3,5,6,2,3,6,3] ([3,5,6],[2,3,6,3])  38. å¦‚æœåˆ«äººé—®ä½ ä¸ºä»€ä¹ˆä½ è¿™æ ·ä½¿ç”¨subtract? å‘Šè¯‰ä»–ï¼Œæˆ‘æ˜¯çœ‹ç€å®šä¹‰æ¥ä½¿ç”¨çš„ã€‚\nsubtract :: Num a =\u0026gt; a -\u0026gt; a -\u0026gt; a Prelude\u0026gt; subtract 20 3 -17 Prelude\u0026gt; subtract [30,3] [3,3]  39. å¦‚æœåˆ«äººé—®ä½  zipç›¸å…³çš„å‡½æ•°ï¼Ÿ  Prelude\u0026gt; unzip [(3,4)] ([3],[4]) Prelude\u0026gt; unzip [(3,4),(3,7)] ([3,3],[4,7]) Prelude\u0026gt; unzip [(3,4),(3,7),(7,4)] ([3,3,7],[4,7,4]) Prelude\u0026gt; unzip [(3,4),(3,7),(7,4),(8,9)] ([3,3,7,8],[4,7,4,9]) Prelude\u0026gt; unzip [((3,4),(3,7)),((7,4),(8,9))] ([(3,4),(7,4)],[(3,7),(8,9)]) unzip3 :: [(a, b, c)] -\u0026gt; ([a], [b], [c]) Prelude\u0026gt; unzip3 [(3,6,3)] ([3],[6],[3]) Prelude\u0026gt; unzip3 [(3,6,3),(3,5,9)] ([3,3],[6,5],[3,9]) Prelude\u0026gt; unzip3 [(3,6,3),(3,5,9),(8,9,0)] ([3,3,8],[6,5,9],[3,9,0]) Prelude\u0026gt; unzip3 [(3,6,3,5),(3,5,9,3),(8,9,0,6)] \u0026lt;interactive\u0026gt;:172:9: Couldn't match expected type `(a0, b0, c0)' with actual type `(t0, t1, t2, t3)'  40. å¦‚æœåˆ«äººé—®ä½ unç›¸å…³çš„å‡½æ•°ï¼Ÿ Prelude\u0026gt; unlines [\u0026quot;ds\u0026quot;,\u0026quot;dfsf\u0026quot;] \u0026quot;ds\\ndfsf\\n\u0026quot; until :: (a -\u0026gt; Bool) -\u0026gt; (a -\u0026gt; a) -\u0026gt; a -\u0026gt; a unwords :: [String] -\u0026gt; String Prelude\u0026gt; unwords [\u0026quot;dsf\u0026quot;,\u0026quot;fdsf\u0026quot;] \u0026quot;dsf fdsf\u0026quot;  41. å¦‚æœæ¯”äººé—®ä½ å¦‚ä½•ä½¿ç”¨ sinç­‰ä¸‰è§’å‡½æ•°ï¼Ÿ è½¬æ¢ä¸ºå¼§åº¦åˆ¶\nPrelude\u0026gt; sin (45/180*pi) 0.7071067811865475 Prelude\u0026gt; sin (45*pi/180) 0.7071067811865475  42. å¦‚æœåˆ«äººé—®ä½ Haskellé’ˆå¯¹å­—ç¬¦çš„å‡½æ•°ï¼Ÿ Haskellä¸­é¢„å®šä¹‰çš„é’ˆå¯¹å­—ç¬¦çš„å‡½æ•°æœ‰:\n isAscii, isLatin1, isControl, isPrint, isSpace, isUpper, isLower, isAlpha, isDigit, isOctDigit, isHexDigit, isAlphaNum, digitToInt, intToDigit, toUpper, toLower, ord, chr,ç­‰  ordå°†å­—æ¯è½¬æ¢ä¸ºæ•°å­—, chråä¹‹.\n43. å¦‚æœåˆ«äººé—®ä½ æ„é€ æ•°ç»„çš„å‡ ç§æ–¹å¼ï¼Ÿ æ•°åˆ—æ˜¯é€šè¿‡[]æ¥è¿›è¡Œæè¿°çš„\n43.1 æ•°ç»„æ„é€  æ•°åˆ—æ˜¯ç”¨[]å’Œ(:)æ„é€ çš„, []æ˜¯ä¸€ä¸ªç©ºçš„æ•°åˆ—, x:xsçš„å«ä¹‰æ˜¯å…ƒç´ xé™„åŠ åˆ°æ•°åˆ—xsçš„å‰é¢ç»„æˆä¸€ä¸ªæ›´é•¿çš„æ•°åˆ—. æ¯”å¦‚, 1:[] ç­‰äº[1], 2:3:1:[]ç­‰äº[2,3,1], è¿ç®—ç¬¦(:)æ˜¯ä»å³å‘å·¦è¿ç®—çš„. æ‰€æœ‰çš„æ•°åˆ—éƒ½å¯ä»¥çœ‹ä½œæ˜¯ä»[]å¼€å§‹, å°†å„å…ƒç´ ç”¨(:)é™„åˆ°ä¸Šé¢å½¢æˆçš„. åœ¨å®é™…ç¼–ç¨‹ä¸­æœ‰ä¸€äº›ç®€è®°æ³•å¯ä»¥å¿«é€Ÿåœ°æ„é€ æ•°åˆ—.\n43.2 åˆ—ä¸¾æ³• å°†æ•°åˆ—çš„å…ƒç´ ä¸€ä¸€åˆ—ä¸¾, æ¯”å¦‚: [1,2,3], [\u0026lsquo;A\u0026rsquo;,\u0026lsquo;B\u0026rsquo;,\u0026rsquo;d\u0026rsquo;], [[1,2], [4,5,6]]ç­‰ç­‰, æ•°åˆ—çš„ç±»å‹ç”¨\u0026rdquo;[å…ƒç´ ç±»å‹]\u0026ldquo;æ¥è¡¨ç¤º, è¿™å‡ ä¸ªä¾‹å­çš„ç±»å‹ä¾æ¬¡ä¸º: [Int], [Char], [[Int]].\n43.3 èŒƒå›´æ³• é€‚ç”¨äºæ„é€ ç­‰å·®æ•°åˆ—, æ¯”å¦‚: [1..5]ç­‰äº[1,2,3,4,5], [\u0026lsquo;a\u0026rsquo;..\u0026rsquo;d\u0026rsquo;]ç­‰äº[\u0026lsquo;a\u0026rsquo;,\u0026lsquo;b\u0026rsquo;,\u0026lsquo;c\u0026rsquo;,\u0026rsquo;d\u0026rsquo;]ç­‰äº\u0026rdquo;abcd\u0026rdquo;å› ä¸ºtype String=[Char]. é»˜è®¤çš„ç­‰å·®ä¸º1, ä¹Ÿå¯ä»¥ç»™å‡ºå‰ä¸¤ä¸ªå…ƒç´ æŒ‡å®šç­‰å·®, æ¯”å¦‚: [2,4..8]ç­‰äº[2,4,6,8], [2,4..7]ç­‰äº[2,4,6], [2.5,4..9.5]ç­‰äº [2.5,4.0,5.5,7.0,8.5,10.0].\n43.3 æè¿°æ³• æè¿°æ³•ç»™å‡ºæ•°åˆ—ä¸­å…ƒç´ å–å€¼çš„èŒƒå›´ä»¥åŠæ‰€æ»¡è¶³çš„æ¡ä»¶, ä¸æ•°å­¦ä¸­é›†åˆçš„æè¿°æ³•æ˜¯ä¸€æ ·çš„. ä¾‹å¦‚: [3*x+2| x\u0026lt;-[3,6,9]] \u0026ndash;è®°å·\u0026rdquo;\u0026lt;-\u0026ldquo;è¡¨ç¤ºå±äº,xä¾æ¬¡å–3,6,9,ä»£å…¥3*x+2,å¾—åˆ°æ•°åˆ—[11,20,29] [x*x| x\u0026lt;-[1..9], x `rem` 3==1] \u0026ndash;ç»™å‡ºxçš„èŒƒå›´,è¿˜é™å®šxé™¤3ä½™1 [(x,y)|x\u0026lt;-[1,2,3],y\u0026lt;-[x..3]] \u0026ndash;ç­‰äº [(1,1),(1,2),(1,3),(2,2),(2,3),(3,3)]\n44. å¦‚æœåˆ«äººè·Ÿä½ è¯´Haskellå¯ä»¥write poet? ç¬¬ä¸€æ¬¡è¯­æ–‡ æ•°å­¦ è®¡ç®—æœºçš„ç»“åˆ\nPrelude\u0026gt; let nouns = [\u0026quot;he\u0026quot;,\u0026quot;she\u0026quot;,\u0026quot;I\u0026quot;] Prelude\u0026gt; let adjectives=[\u0026quot;lazy\u0026quot;,\u0026quot;handsome\u0026quot;,\u0026quot;something\u0026quot;] Prelude\u0026gt; [adjective ++ \u0026quot; \u0026quot; ++ noun | adjective \u0026lt;-adjectives ,noun\u0026lt;-nouns] [\u0026quot;lazy he\u0026quot;,\u0026quot;lazy she\u0026quot;,\u0026quot;lazy I\u0026quot;,\u0026quot;handsome he\u0026quot;,\u0026quot;handsome she\u0026quot;,\u0026quot;handsome I\u0026quot;,\u0026quot;something he\u0026quot;,\u0026quot;something she\u0026quot;,\u0026quot;something I\u0026quot;] *Main\u0026gt; let nouns = [\u0026quot;he\u0026quot;,\u0026quot;she\u0026quot;,\u0026quot;I\u0026quot;] *Main\u0026gt; let adjectives=[\u0026quot;lazy\u0026quot;,\u0026quot;handsome\u0026quot;,\u0026quot;something\u0026quot;] *Main\u0026gt; [adjective ++ \u0026quot; \u0026quot; ++ noun | adjective \u0026lt;-adjectives ,noun\u0026lt;-nouns] [\u0026quot;lazy he\u0026quot;,\u0026quot;lazy she\u0026quot;,\u0026quot;lazy I\u0026quot;,\u0026quot;handsome he\u0026quot;,\u0026quot;handsome she\u0026quot;,\u0026quot;handsome I\u0026quot;,\u0026quot;something he\u0026quot;,\u0026quot;something she\u0026quot;,\u0026quot;something I\u0026quot;]  ###45. å¦‚æœåˆ«äººè·Ÿä½ è¯´Haskellå¯ä»¥è·Ÿå‡ ä½•å¹¶è½¨ï¼Ÿ ç¬¬ä¸€æ¬¡å’Œå‡ ä½•çš„è§¦ç¢°\nPrelude\u0026gt; let triangels=[(a,b,c)|c\u0026lt;-[1..10],b\u0026lt;-[1..c],a\u0026lt;-[1..b],c^2==a^2+b^2,a+b+c==24] Prelude\u0026gt; triangels [(6,8,10)]  46. å¦‚æœåˆ«äººé—®ä½ Haskellçš„cabalæ˜¯ä»€ä¹ˆï¼Ÿ ç±»ä¼¼äºubuntuçš„apt-get\nscilab çš„atoms pythonçš„ easy_install æˆ–è€…pip redhat çš„yum\n47. å¦‚æœåˆ«äººé—®ä½ æœ‰å‡ ä¸ªåŸºæœ¬çš„TypeClass? ç±»å‹ç±»æ˜¯haskellä¸­ç«™åœ¨è¾ƒé«˜ä½ç½®çš„è¯­è¨€è®¤è¯†ã€‚å‡ ç§åŸºæœ¬çš„ç±»å‹ç±»åŒ…æ‹¬Eq,Ord,Show,Read,Enumç­‰ã€‚\n47.1 Eq åŒ…å«å¯åˆ¤æ–­ç›¸ç­‰æ€§çš„ç±»å‹ã€‚æä¾›å®ç°çš„å‡½æ•°æ˜¯ == å’Œ /=ã€‚æ‰€ä»¥ï¼Œ åªè¦ä¸€ä¸ªå‡½æ•°æœ‰Eqç±»çš„ç±»å‹é™åˆ¶ï¼Œé‚£ä¹ˆå®ƒå°±å¿…å®šåœ¨å®šä¹‰ä¸­ç”¨åˆ°äº† == å’Œ /=\n47.2 Ord åŒ…å«å¯æ¯”è¾ƒå¤§å°çš„ç±»å‹ã€‚é™¤äº†å‡½æ•°ä»¥å¤–ï¼Œæˆ‘ä»¬ç›®å‰æ‰€è°ˆåˆ°çš„æ‰€æœ‰ç±»å‹éƒ½å±äº Ord ç±»ã€‚Ord åŒ…ä¸­åŒ…å«äº† \u0026lt;, \u0026gt;, \u0026lt;=, \u0026gt;= ä¹‹ç±»ç”¨äºæ¯”è¾ƒå¤§å°çš„å‡½æ•°ã€‚compare å‡½æ•°å–ä¸¤ä¸ª Ord ç±»ä¸­çš„ç›¸åŒç±»å‹çš„å€¼ä½œå‚æ•°ï¼Œå›ä¼ æ¯”è¾ƒçš„ç»“æœã€‚è¿™ä¸ªç»“æœæ˜¯å¦‚ä¸‹ä¸‰ç§ç±»å‹ä¹‹ä¸€ï¼šGT, LT, EQã€‚\n47.3 Show çš„æˆå‘˜ä¸ºå¯ç”¨å­—ä¸²è¡¨ç¤ºçš„ç±»å‹ã€‚ç›®å‰ä¸ºæ­¢ï¼Œé™¤å‡½æ•°ä»¥å¤–çš„æ‰€æœ‰ç±»å‹éƒ½æ˜¯ Show çš„æˆå‘˜ã€‚ æ“ä½œ Show Typeclassï¼Œæœ€å¸¸ç”¨çš„å‡½æ•°è¡¨ç¤º showã€‚å®ƒå¯ä»¥å–ä»»ä¸€Showçš„æˆå‘˜ç±»å‹å¹¶å°†å…¶è½¬ä¸ºå­—ä¸²\n47.4 Read æ˜¯ä¸ Show ç›¸åçš„ Typeclassã€‚read å‡½æ•°å¯ä»¥å°†ä¸€ä¸ªå­—ä¸²è½¬ä¸º Read çš„æŸæˆå‘˜ç±»å‹ã€‚\n47.5 Enum çš„æˆå‘˜éƒ½æ˜¯è¿ç»­çš„ç±»å‹ \u0026ndash; ä¹Ÿå°±æ˜¯å¯æšä¸¾ã€‚Enum ç±»å­˜åœ¨çš„ä¸»è¦å¥½å¤„å°±åœ¨äºæˆ‘ä»¬å¯ä»¥åœ¨ Range ä¸­ç”¨åˆ°å®ƒçš„æˆå‘˜ç±»å‹ï¼š æ¯ä¸ªå€¼éƒ½æœ‰åç»§å­ (successer) å’Œå‰ç½®å­ (predecesor)ï¼Œåˆ†åˆ«å¯ä»¥é€šè¿‡ succ å‡½æ•°å’Œ pred å‡½æ•°å¾—åˆ°ã€‚ è¯¥ Typeclass åŒ…å«çš„ç±»å‹æœ‰ï¼š(), Bool, Char, Ordering, Int, Integer, Float å’Œ Doubleã€‚\n47.6 Bounded çš„æˆå‘˜éƒ½æœ‰ä¸€ä¸ªä¸Šé™å’Œä¸‹é™ã€‚\n47.7 Num Num æ˜¯è¡¨ç¤ºæ•°å­—çš„ Typeclassï¼Œå®ƒçš„æˆå‘˜ç±»å‹éƒ½å…·æœ‰æ•°å­—çš„ç‰¹å¾ã€‚æ£€æŸ¥ä¸€ä¸ªæ•°å­—çš„ç±»å‹ï¼š\n47.8 Integral åŒæ ·æ˜¯è¡¨ç¤ºæ•°å­—çš„ Typeclassã€‚Num åŒ…å«æ‰€æœ‰çš„æ•°å­—ï¼šå®æ•°å’Œæ•´æ•°ã€‚è€Œ Integral ä»…åŒ…å«æ•´æ•°ï¼Œå…¶ä¸­çš„æˆå‘˜ç±»å‹æœ‰ Int å’Œ Integerã€‚\n47.9 Floating ä»…åŒ…å«æµ®ç‚¹ç±»å‹ï¼šFloat å’Œ Doubleã€‚ å¯ä»¥ç”¨ä¸€å¼ å›¾æ¥è¡¨ç¤ºï¼š 48. æˆ‘æƒ³ç”¨Haskelläº§ç”Ÿä¸€ä¸ªä¸‰è§’å½¢ let triangels=[(a,b,c)|c\u0026lt;-[1..10],b\u0026lt;-[1..10],a\u0026lt;-[1..10]] let righttriangels=[(a,b,c)|c\u0026lt;-[1..10],b\u0026lt;-[1..c],a\u0026lt;-[1..b],a^2+b^2==c^2] let righttriangelsc=[(a,b,c)|c\u0026lt;-[1..10],b\u0026lt;-[1..c],a\u0026lt;-[1..b],a^2+b^2==c^2,a+b+c==24]  49. å¦‚æœåˆ«äººé—®ä½ å¦‚ä½•è¡¨ç¤ºæ•°å­¦çš„é›†åˆï¼Ÿ Prelude\u0026gt; [x*2|x \u0026lt;- [1..10]] [2,4,6,8,10,12,14,16,18,20] Prelude\u0026gt; [x*2|x\u0026lt;- [1..10],x*2 \u0026gt;=12 ] [12,14,16,18,20] Prelude\u0026gt; [x | x \u0026lt;- [50..100], x `mod` 7 ==3] [52,59,66,73,80,87,94]  50. å¦‚æœåˆ«äººé—®ä½ !! ä»£è¡¨ä»€ä¹ˆä¸œè¥¿ï¼Ÿ [3, 5,6] !!2 *Main\u0026gt; [3, 5,6] !!2 6  51. å‡ ä¸ªå¸¸ç”¨çš„æ•°ç»„æå–å‡½æ•°ï¼Ÿ å¹¶ä¸”æ˜¯ä»0å¼€å§‹çš„ å¸¸ç”¨å‡ ä¸ªlistå‡½æ•°\n*Main\u0026gt; head [5,6,4] 5 *Main\u0026gt; last [5,6,4] 4 *Main\u0026gt; tail [5,6,4] [6,4] *Main\u0026gt; init [5,6,6,43,6] [5,6,6,43]  length null reverse takeç­‰å‡½æ•° å…·ä½“è¯´ä¸€ä¸‹take\n*Main\u0026gt; take 4 [5,6,7,4,3,8] [5,6,7,4] *Main\u0026gt; take 3 [5,6,7,4,3,8] [5,6,7] *Main\u0026gt; take 2 [5,6,7,4,3,8] [5,6] *Main\u0026gt;  åŒç†ç±»ä¼¼çš„drop\n","date":1431757822,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431757822,"objectID":"4b33b56ed4bc2ce642f45204b1098a47","permalink":"/blog/2015/05/16/haskellbi-ji/","publishdate":"2015-05-16T14:30:22+08:00","relpermalink":"/blog/2015/05/16/haskellbi-ji/","section":"archives","summary":"2001å¹´ï¼Œå‡ºç”Ÿäºè·å…°çš„è®¡ç®—æœºå¤§å¸ˆã€å›¾çµå¥–è·å¾—è€…EdsgerW.Dijkstraç»™å¾·å·å¤§å­¦é¢„ç®—å§”å‘˜ä¼šå†™ä¿¡ï¼ŒåŠ›åŠä¸è¦å°†è®¡ç®—æœºå…¥é—¨è¯¾ç¨‹æ”¹ä¸ºJavaã€‚ä¸å¹¸çš„æ˜¯ï¼Œå­¦æ ¡æœ€ç»ˆè¿˜æ˜¯ç”¨Javaè¯¾ç¨‹æ›¿æ¢äº†Haskellã€‚HaskellçœŸçš„ä¸è¡Œäº†ï¼Ÿå›½å†…æœ‰äº›äººçš„è¯„è®º\n Haskell:å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ Java : å‘½ä»¤ç¼–ç¨‹è¯­è¨€ å°½ç®¡Haskellä¸å®Œç¾ï¼Œä½†ä»ç„¶æ¯”Javaå¥½å‡ ä¸ªæ•°é‡çº§ï¼ŒJavaå°±æ˜¯ä¸€ä¸ªå¤§æ‚çƒ©(å®ƒæ˜¯é€šè¿‡å¤§èŒƒå›´çš„å¹¿å‘Šå’Œé”€å”®å‘˜å¤¸å¼ çš„å®£ä¼ æ‰è¾¾åˆ°å®ƒçš„å•†ä¸šæ¥å—)ã€‚   å¦‚æœåˆ«äººé—®ä½ Haskellèƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ ä¸€ä¸ªèƒ½å¤Ÿç¼–ç¨‹çš„ç¼–ç¨‹è¯­è¨€ï¼Œé«˜çº§å‡½æ•°ç¼–ç¨‹è¯­è¨€\n å¦‚æœåˆ«äººé—®ä½ Haskellå’Œschemeæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ æ¯”schemeæ›´å¼ºè°ƒç±»å‹ç†è®ºï¼Œä½†æ˜¯ç›¸å¯¹schemeç”±äºå¯¹äºtype theoryçš„è¿‡åº¦è¿½æ±‚ åè€Œæ›´åŠ éš¾äºç¼–ç¨‹\n ","tags":null,"title":"Haskellç¬”è®°","type":"archives"},{"authors":null,"categories":["scheme"],"content":"æˆ‘ä»¬æ¯å¤©éƒ½åœ¨åšçš„äº‹æƒ… 1.æ‰“å¼€ç”µè„‘ï¼Œæ‰¾åˆ°æˆ‘ä»¬è¦åšçš„äº‹æƒ…ï¼Œä¿å­˜æˆ‘ä»¬åšå®Œçš„äº‹æƒ…ï¼Œæäº¤,æˆ‘ä»¬å¯èƒ½æŒ¨è®­ï¼Œä¹Ÿå¯èƒ½åŠ ç­ 2.æˆ‘ä»¬å¯èƒ½å»æ‰“çƒï¼Œæˆ‘ä»¬å¯èƒ½è·Ÿæœ‹å‹ã€äº²äººèŠå¤© 3.æˆ‘ä»¬å¯èƒ½åœ¨å‘¨æœ«çš„æ—¶å€™ï¼Œè·Ÿå¥³æœ‹å‹ã€å®¶äººå»çœ‹ç”µå½±ï¼Œå»éƒŠæ¸¸ 4.æˆ‘ä»¬å¯èƒ½å»å‚åŠ ä¸€äº›å›¢ä½“æ´»åŠ¨â€¦â€¦\næˆ‘ä»¬æŠŠæˆ‘ä»¬è¦åœ¨ç”µè„‘ã€ç”Ÿæ´»ä¸Šåšçš„äº‹æƒ…å¯ä»¥æŠ½è±¡åŒ–ï¼Œè™½ç„¶æˆ‘ä»¬ä¸çŸ¥ä¸è§‰çš„åšç€è¿™äº›äº‹æƒ…ï¼Œ ä½†æ˜¯è¿™æ˜¯ç¬¬ä¸€æ­¥å«åšäº‹ä»¶æŠ½è±¡ï¼ˆè¿‡ç¨‹æŠ½è±¡ï¼‰ã€‚éšç€å‘å±•ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œé€»è¾‘æŠ½è±¡ï¼Œå¹¶æœ€ç»ˆè¾¾åˆ°è¯­è¨€æŠ½è±¡.\næˆ‘ä»¬ä¼šå‘ç°æˆ‘ä»¬æ‰€ä½¿ç”¨çš„è®¡ç®—æœºè¯­è¨€åŒ…å«ç€ä¸»è¦çš„ä¸œè¥¿æ˜¯ 1. å˜é‡ 2. å‡½æ•° 3. è°ƒç”¨\nå¯ä»¥å‚çœ‹ç‹å çš„è®¡ç®—å™¨,é‡Œé¢ç¬¬ä¸‰èŠ‚ä¸­æåˆ°Lambda Calculusæ˜¯ä»€ä¹ˆ 1. å˜é‡: x 2. å‡½æ•°: (lambda (x) e) 3. è°ƒç”¨: (e1 e2)\nè¿™æ˜¯ä»»ä½•ä¸€é—¨è¯­è¨€ä¸å¯ç¼ºå°‘çš„é€»è¾‘è¯­è¨€æŠ½è±¡éƒ¨ä»¶ï¼Œå°±å¥½åƒæ•°å­¦å®¶å¾ˆæ—©å°±è®¤è¯†åˆ°åºåˆ—æ±‚å’Œä¸­çš„æŠ½è±¡æ¨¡å¼.\nè¯­è¨€æœ¬èº«å…¶å®å°±æ˜¯ä¸€ä¸ªæ±‚å€¼å™¨ \u0026gt; The evaluator, which determines the meaning of expressions in a programming language, is just another program. æ‰€ä»¥äº‹å®ä¸Šï¼Œå¯ä»¥å‡ ä¹æŠŠä»»ä½•ç¨‹åºçœ‹ä½œæ˜¯æŸä¸ªè¯­è¨€çš„æ±‚å€¼å™¨ï¼Œå®ƒæœ¬èº«ä¸è¿‡å°±æ˜¯å¦ä¸€ä¸ªç¨‹åºè€Œå·²ã€‚\nè€Œä¸ºäº†æ›´å¥½åœ°æ“ä½œè¿™äº›è¯­è¨€çš„å…ƒç´ ï¼Œè¿›è¡Œå¤§å‹çš„ç³»ç»Ÿæ¨¡å—åŒ–è®¾è®¡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¼•è¿›ä¸¤ç§æ¨¡å¼ 1.å¯¹è±¡å®ç°(ä»¥ä¸å˜çš„ä¸–ç•Œåæ ‡ç³»æ¥è¯´ï¼Œå…¶å®å¯¹è±¡æ˜¯ä¸æ–­å˜åŒ–çš„ï¼Œæ¯”å¦‚ä½ç½®ï¼›æ­¤æ—¶åæ ‡ç³»æ˜¯å…¨å±€çš„) 2.æµå®ç°(ä»¥å˜åŒ–å›ºä½“çš„è§’åº¦æ¥è¯´ï¼Œå…¶å®ä»–æ˜¯ä¸å˜çš„ï¼›æ­¤æ—¶åæ ‡ç³»æ˜¯å±€éƒ¨çš„)\nå…³äºschemeçš„éƒ¨åˆ†ä»¥åå†è¡¥ä¸Šã€‚\n","date":1431570108,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431570108,"objectID":"41d00bc8597823e0bc2623c20f136327","permalink":"/blog/2015/05/14/yu-yan-chou-xiang/","publishdate":"2015-05-14T10:21:48+08:00","relpermalink":"/blog/2015/05/14/yu-yan-chou-xiang/","section":"archives","summary":"æˆ‘ä»¬æ¯å¤©éƒ½åœ¨åšçš„äº‹æƒ… 1.æ‰“å¼€ç”µè„‘ï¼Œæ‰¾åˆ°æˆ‘ä»¬è¦åšçš„äº‹æƒ…ï¼Œä¿å­˜æˆ‘ä»¬åšå®Œçš„äº‹æƒ…ï¼Œæäº¤,æˆ‘ä»¬å¯èƒ½æŒ¨è®­ï¼Œä¹Ÿå¯èƒ½åŠ ç­ 2.æˆ‘ä»¬å¯èƒ½å»æ‰“çƒï¼Œæˆ‘ä»¬å¯èƒ½è·Ÿæœ‹å‹ã€äº²äººèŠå¤© 3.æˆ‘ä»¬å¯èƒ½åœ¨å‘¨æœ«çš„æ—¶å€™ï¼Œè·Ÿå¥³æœ‹å‹ã€å®¶äººå»çœ‹ç”µå½±ï¼Œå»éƒŠæ¸¸ 4.æˆ‘ä»¬å¯èƒ½å»å‚åŠ ä¸€äº›å›¢ä½“æ´»åŠ¨â€¦â€¦\n","tags":null,"title":"è¯­è¨€æŠ½è±¡","type":"archives"},{"authors":null,"categories":["scheme"],"content":"å°¾é€’å½’çš„å¥½å¤„å°±æ˜¯å¿«é€Ÿè®¡ç®—ï¼Œå°¾é€’å½’å®é™…ä¸Šæ˜¯åœ¨é€’å½’è®¡ç®—çš„è¿‡ç¨‹ä¸­ï¼Œ ï¼ˆå°è±¡ä¸­é€’å½’è¿‡ç¨‹[è¡¨ç¤ºè¯­æ³•å½¢å¼-è°ƒç”¨è‡ªå·±]å’Œé€’å½’è®¡ç®—è¿‡ç¨‹[è¡¨æ­£çº¿æ€§æ–¹å¼ å’Œéçº¿æ€§æ–¹å¼]æ˜¯ä¸ä¸€æ ·çš„ï¼‰, åŠ å…¥äº†è¿­ä»£çš„æ€æƒ³ï¼Œä¸æ–­çš„ä¿®æ”¹äº†productå’Œcounterçš„å€¼ï¼Œ ä¸éœ€è¦æ ‘å½¢å±•å¼€ã€‚\n(define (fact n) (cond ((= n 1) 1) (else (* n (fact (- n 1)))))) (define (fact1 n) (define (fact-iter product counter) (cond ((= counter 1) product) (else (fact-iter (* product counter) (- counter 1))))) (fact-iter 1 n)) ;;;Solve 4! (fact 4) (fact1 4)  ;;; æ±‚å¹‚\n(define (expr b n) (if (= n 0) 1 (* b (expt b (- n 1))))) ;;;iter form (define (expr1 b n) (define (expr-iter b counter product) (if (= counter 0) product (expr-iter b (- counter 1) (* b product)))) (expr-iter b n 1)) (expr 4 5) (expr1 4 5)  ===\u0026gt;å¦å¤–è¿˜æœ‰ä¸€ç§æ›´å¿«é€Ÿçš„æ–¹æ³• ;; b^n =(b^(n/2))^2, n is even ;; b^n =(b*b^(n-1)) , n is odd\n(define (fast-iter b n) (cond ((= n 0) 1) ((even? n) (square (fast))) (else (* b (fast-iter b (- n 1))))))  ====\u0026gt;å¹¶æœ€ç»ˆå¾—åˆ°å°¾é€’å½’çš„ä¸€èˆ¬å½¢å¼ ç»“åˆæ±‚å®šç§¯åˆ†\n===\u0026gt;\n(define (sum term a next b) (define (sum-iter a result) (if \u0026lt;???\u0026gt; \u0026lt;???\u0026gt; (iter \u0026lt;???\u0026gt; \u0026lt;???\u0026gt;))) (sum-iter \u0026lt;???\u0026gt; \u0026lt;???\u0026gt;) ) ","date":1431521772,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431521772,"objectID":"9c888d6f8f5669e42b49475055d430d3","permalink":"/blog/2015/05/13/wei-di-gui/","publishdate":"2015-05-13T20:56:12+08:00","relpermalink":"/blog/2015/05/13/wei-di-gui/","section":"archives","summary":"å°¾é€’å½’çš„å¥½å¤„å°±æ˜¯å¿«é€Ÿè®¡ç®—ï¼Œå°¾é€’å½’å®é™…ä¸Šæ˜¯åœ¨é€’å½’è®¡ç®—çš„è¿‡ç¨‹ä¸­ï¼Œ ï¼ˆå°è±¡ä¸­é€’å½’è¿‡ç¨‹[è¡¨ç¤ºè¯­æ³•å½¢å¼-è°ƒç”¨è‡ªå·±]å’Œé€’å½’è®¡ç®—è¿‡ç¨‹[è¡¨æ­£çº¿æ€§æ–¹å¼ å’Œéçº¿æ€§æ–¹å¼]æ˜¯ä¸ä¸€æ ·çš„ï¼‰, åŠ å…¥äº†è¿­ä»£çš„æ€æƒ³ï¼Œä¸æ–­çš„ä¿®æ”¹äº†productå’Œcounterçš„å€¼ï¼Œ ä¸éœ€è¦æ ‘å½¢å±•å¼€ã€‚\n","tags":null,"title":"å°¾é€’å½’","type":"archives"},{"authors":null,"categories":["scheme"],"content":"(define (cube x) (* x x x)) ;;;ç´¯åŠ  (define (sum-integer a b) (if (\u0026gt; a b) 0 (+ a (sum-integer (+ a 1) b)))) (sum-integer 1 10) ;;;ç«‹æ–¹ç´¯åŠ  (define (sum-cube a b) (if (\u0026gt; a b) 0 (+ (cube a) (sum-cube (+ a 1) b)))) (sum-cube 1 3) ;;; æ±‚Pi å€¼ åˆ†æ•°ç´¯åŠ  (define (sum-pi a b) (if (\u0026gt; a b) 0 (+ (/ 1.0 (* a (+ a 2))) (sum-pi (+ a 4) b)))) (sum-pi 1 9)  è§‚å¯Ÿä¸Šé¢çš„ç§¯åˆ†è¿‡ç¨‹ ##æœ€ç»ˆæå–å‡ºå…¬å…±çš„å½¢å¼ Sum\n;; (define (\u0026lt;name\u0026gt; a b) ;; (if (\u0026gt; a b) ;; 0 ;; (+ (\u0026lt;term\u0026gt; a) (\u0026lt;name\u0026gt; (\u0026lt;next\u0026gt;a) b))))  äºæ˜¯æˆ‘ä»¬å¯ä»¥å¾—åˆ° (define (sum term a next b) (if (\u0026gt; a b) 0 (+ (term a) (sum term (next a) next b))))  And Apply the sum to get the sum-integer2 sum-cube2 sum-pi2 (define (sum-integer2 a b) (sum (lambda (x) x) ((lambda (x) (+ x 1)) a) (lambda (x) (+ x 1)) b)) ;;;--\u0026gt;There is some problems ;\u0026gt; (sum-integer2 1 10) ;54 ------------------------\u0026gt;Why ;\u0026gt; (sum-integer 1 10) ;55 (define (identity x) x) (define (inc x) (+ x 1)) (define (sum-integer3 a b) (sum identity a inc b)) (sum-integer3 1 3) (define (sum-cube2 a b) (sum cube a inc b)) (sum-cube2 1 3) (define (sum-pi2 a b) (define (pi-term x) (/ 1.0 (* x (+ x 2)))) (define (pi-next x) (+ x 4)) (sum pi-term a pi-next b)) (sum-pi2 1 9) (* 8 (sum-pi2 1 1000))  ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç°åœ¨å¯ä»¥è®¡ç®—ç§¯åˆ†äº†ï¼ æˆ‘ä»¬çš„é—®é¢˜æ˜¯æ±‚è§£ä¸‹é¢çš„å®šç§¯åˆ†ï¼š ;;;; So now we can do the integrate computing ;;Because integrate will have the same function but different next function ;;;a-b ä¹‹é—´å…³äºfå‡½æ•°çš„å®šç§¯åˆ†çš„æ±‚æ³• (define (integral f a b dx) (define (add-dx x) (+ x dx)) (define (update-a a dx) (+ a (/ dx 2.0))) (* (sum f (update-a a dx) add-dx b) dx)) (integral cube 0 1 0.01) (integral cube 0 1 0.001) (integral cube 0 1 0.0001) (/ 1 4.0) (/ (* 1 (cube 1)) 4.0) ;result: ;0.24998750000000042 ;0.249999875000001 ;0.24999999874993412 ;0.25 ;0.25  ä¸ºäº†æ›´ç²¾ç¡®çš„æ±‚è§£ç§¯åˆ†ï¼Œæˆ‘ä»¬ä½¿ç”¨æ›´ä¸ºç²¾å¦™çš„è¾›æ™®æ£®ç§¯åˆ† ###åŒ…å«å¥‡æ•°çš„ä¸¤å€ å’Œå¶æ•°çš„å››å€ï¼Œä¸¤è¾¹ä¸åŠ å€\n h = (b-a)/n yk= f(a+kh) \u0026mdash;\u0026gt; next (even? k) (odd? k) y0 =a yn= b  a. è®¾è®¡çš„è¿‡ç¨‹é‡åˆ°çš„é—®é¢˜æ˜¯ å‚æ•°çš„é—®é¢˜ éœ€è¦è®¾ç½®kï¼Ÿ b. ä¸­é—´è¿‡ç¨‹çš„é—®é¢˜ï¼Œå¦‚ä½•åˆ’åˆ†ä¸‰ç§æƒ…å†µ b.1 kä¸º0å’Œnçš„æƒ…å†µ b.2 kä¸ºå¥‡æ•°çš„æƒ…å†µ b.3 kä¸ºå¶æ•°çš„æƒ…å†µ\næœ€ç»ˆ, åˆ©ç”¨Factçš„æ€æƒ³ è¿›è¡Œæ±‚ç§¯åˆ†\n;;; ä¸‹é¢æ˜¯ä¸€ä¸ªè¾ƒä¸ºæ··ä¹±çš„è®¾è®¡ï¼Œä¸”æ²¡æœ‰è€ƒè™‘ä½¿ç”¨sum\n(define (simpson-integral f a b n) (let ((h (/ (- b a) n)) (k 0)) (define inc (+ a (* k h))) (define inc2 (* 2 f(inc))) (define inc4 (* 4 f(inc))) (cond ((= k 0) (f a)) ((= k n) (f b)) ((even? k) (+ (* 2 f((+ a (* k h)))) )))  è¡¥å……ï¼Œå¥½æ€æƒ³:ä¿è¯æœ€åä¸€ä¸ªä¸ºå¶æ•°\n(define (round-to-next-even x) (+ x (remainder x 2)) )  äºæ˜¯æœ‰äº†ä¸‹é¢è¾ƒå¥½çš„ç‰ˆæœ¬ï¼Œæ€è€ƒï¼Œä¹‹å‰çš„Sumå…¶å®æ˜¯å·²ç»æä¾›äº†incé€’å¢çš„a ä»¥åŠèŒƒå›´ï¼Œæˆ‘ä»¬ä¸»è¦çš„ç›®çš„å°±æ˜¯å†™å¥½termå³å¯ï¼è€Œ termå…¶å®å°±æ˜¯æ¶‰åŠåˆ°ä½ éœ€è¦æ€è€ƒçš„ä¸‰ç§æƒ…å†µ ä¹‹å‰ä½ ä¹‹æ‰€ä»¥å›æƒ³ä¸æ¸…æ¥šï¼Œå› ä¸ºä½ æ²¡æœ‰æ–©æ–­å¿µå¤´ï¼Œtermåªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œ è¿™ä¸ªå‚æ•°å…¶å®å°±æ˜¯ä½ ä¸€ç›´æƒ³çš„kï¼Œæ‰€ä»¥simpson-termçš„ä¸€ä¸ªå‚æ•°å°±æ˜¯kï¼Œåˆ©ç”¨å®ƒ å¼€å§‹åšæ–‡ç« å³å¯\n(define (simpson-integral f a b n) (define (round-to-next-even x) (+ x (remainder x 2))) (define fixed-n (round-to-next-even n)) (define h (/ (- b a) fixed-n)) (define (simpson-term k) (define y (f (+ a (* k h)))) (cond ((or (= k 0) (= k fixed-n)) (* 1 y)) ((even? k) (* 2 y)) (else (* 4 y)))) (* (/ h 3) (sum simpson-term 0 inc fixed-n)) )) ;(simpson-integral cube 0 1 10) ;1/4  å¦å¤–è¿˜æœ‰å‡ ç§å˜ä½“ï¼Œåªä¸è¿‡æ€»ä½“æ€è·¯éƒ½åœ¨ä¸Šé¢ç±»ä¼¼ã€‚\na1:breaking the problem into four parts: (f y0), (f yn) and two sums,one over even k and another over odd k\n(define (another-simpson-integral f a b n) (define h (/ (- b a) n)) (define (add-2h x) (+ x (* 2 h))) (* (/ h 3.0) (+ (f a) (* 4.0 (sum f (+ a h) add-2h (- b h))) (* 2.0 (sum f (add-2h a) add-2h (- b h))) (f (+ a (* h n))))))  a2:Here\u0026rsquo;s a version that sums over pairs of terms (2 y_k + 4 y_k+1). No conditionals or special cases are needed anywhere, but there\u0026rsquo;s an extra term [f(b) - f(a)] to be added to the final count.\n(define (simpson f a b n) (define h (/ (- b a) n)) (define (y k) (f (+ a (* k h)))) (define (ypair k) (+ (* 2 (y k)) (* 4 (y (+ k 1))))) (define (add-2 k) (+ k 2)) (* (/ h 3) (+ (sum ypair 0 add-2 (- n 1)) (- (f b) (f a)))))  å½“ç„¶ä¹Ÿå¯ä»¥å†™æˆä¸‹é¢çš„æ ¼å¼ï¼š\n(define (sim-integral f a b n) (define h (/ (- a b) n)) (define (y k) (f (+ a (* k h)))) (define (coeff k) (if (is-even? k) 2 4)) (define (part-term k) (* (coeff k) (y k))) (define part-value (sum part-term 1 inc (- n 1))) (* (/ h 3) (+ (y 0) (y n) part-value)))  ##ä¸‹é¢æ˜¯æˆ‘é‡æ–°å†™çš„ä¸€éï¼ŒåŒ…å«ä¸€äº›è®¡ç®—é—®é¢˜çš„ä¿®æ­£ 1. åŠ å…¥äº†nçš„ä¿®æ­£ 2. é‡æ–°è®¤è¯†äº†simpsonç®—æ³•çš„ï¼Œå½“ç„¶è¿˜æœ‰äº›é—®é¢˜æ²¡æœ‰ç†è§£ï¼Œæ¯”å¦‚f(b)-f(a), åœ¨simpson-anthother-integrateä¸­\næ–°çš„æºç å¦‚ä¸‹:\n;;; (let \u0026lt;var\u0026gt; \u0026lt;bindings\u0026gt; \u0026lt;body\u0026gt;) (define (cube x) (* x x x)) (define (sum-integer a b) (if (\u0026gt; a b) 0 (+ a (sum-integer (+ a 1) b)))) (sum-integer 1 10) (define (sum-cube a b) (if (\u0026gt; a b) 0 (+ (cube a) (sum-cube (+ a 1) b)))) (sum-cube 1 3) (define (sum-pi a b) (if (\u0026gt; a b) 0 (+ (/ 1.0 (* a (+ a 2))) (sum-pi (+ a 4) b)))) (sum-pi 1 10) (sum-pi 1 100) (define (sum term a next b) (if (\u0026gt; a b) 0 (+ (term a) (sum term (next a) next b)))) (define (sum-integer2 a b) (define (identity x) x) (define (inc x) (+ x 1)) (sum identity a inc b)) (sum-integer2 1 10) (define (sum-cube2 a b) (define (cube x) (* x x x)) (define (inc x) (+ x 1)) (sum cube a inc b)) (sum-cube2 1 3) (define (sum-pi2 a b) (define (pi-term x) (/ 1.0 (* x (+ x 2)))) (define (pi-next x) (+ x 4)) (sum pi-term a pi-next b)) (sum-pi2 1 10) (define (integral f a b dx) (define const_a (+ a (/ dx 2.0))) (define (add_dx x) (+ x dx)) (* (sum f const_a add_dx b) dx)) (integral cube 0 1 0.001) (define (simpson-integral f a b n) (define (round-to-next-even x) (+ x (remainder x 2))) (define fixed-n (round-to-next-even n)) (define (inc x) (+ x 1)) (define h (/ (- b a) fixed-n)) (define (simpson-term k) (define y (f (+ a (* h k)))) (cond ((or (= k 0) (= k fixed-n)) (* 1 y)) ((even? k) (* 2 y)) (else (* 4 y)))) ; (* (/ h 3) (sum simpson-term 0 inc b))) ;;; 0çš„æ„æ€è¡¨ç¤ºä»k=0å¼€å§‹,ä¸èƒ½å†™æˆbï¼Œå¦‚æœå†™æˆbè¡¨ç¤ºä½ æ²¡æœ‰ç†è§£ï¼Œå› ä¸º0 fixed-néƒ½ä»£è¡¨çš„æ˜¯K ;;è¿™æ˜¯æ¬¡æ•°çš„è¯´æ³•ï¼Œè€Œä¸æ˜¯ä»£è¡¨ç€a-bä¹‹é—´çš„æ±‚å€¼èŒƒå›´ï¼Œè€Œæ˜¯æŒ‡æ±‚èŒçš„æ¬¡æ•°ï¼ (* (/ h 3) (sum simpson-term 0 inc fixed-n))) (simpson-integral cube 0 1 10) (simpson-integral cube 0 1 11) ;;ä¸€ç§å˜ä½“ æ€è·¯åŒä¸Š ;; æ¯”è¾ƒæœ‰è¶£çš„åœ°æ–¹æ˜¯åˆ†ä¸ºå››ä¸ªèŠ‚ç‚¹å‡º ;; 1 f(a) ----ã€‹ y0 ;; 2 f(a+h) å¥‡æ•°çš„å¼€å§‹åœ°æ–¹ add-2hæ–¹å¼ç´¯åŠ éƒ½æ˜¯å¥‡æ•° åŒæ—¶ç»ˆç‚¹æ˜¯b-h ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºbåœ¨ä¸‹é¢è¢«æš‚ç”¨--ã€‹æŠŠå®ƒçœ‹å¾…æ˜¯ä¸€ä¸ªå¥‡æ•°ç´¯åŠ çš„è¿‡ç¨‹ y1 y3 y5 ;; 3 f(a+2h) å¶æ•°çš„å¼€å§‹åœ°æ–¹ add-2hæ–¹å¼ç´¯åŠ éƒ½æ˜¯å¶æ•° åŒæ—¶ç»ˆç‚¹æ˜¯b-h--ã€‹æŠŠå®ƒçœ‹å¾…æ˜¯ä¸€ä¸ªå¶æ•°ç´¯åŠ çš„è¿‡ç¨‹ y2 y4 y6.. ;; 4 f(b) æœ€åä¸€éƒ¨åˆ† yn (define (simpson-another-integral f a b n) (define h (/ (- b a) n)) (define (add-2h x) (+ x (* 2.0 h))) ;;; (* (/ h 3.0) (+ (f a) (* 4.0 (sum f (+ a h) add-2h (- b h))) ;;; (+a h)è¡¨ç¤ºèµ·å§‹ç‚¹ (- b h) è¡¨ç¤ºçš„æ˜¯ç»ˆç‚¹ (* 2.0 (sum f (add-2h a) add-2h (- b h))) ;; æ³¨æ„è¿™è¾¹çš„(add2h a)è¡¨ç¤ºçš„æ˜¯èµ·å§‹ç‚¹ (f (+ a (* h n)))))) ;; ä¹Ÿå¯ä»¥æ˜¯(f b) ;\u0026gt; (simpson-another-integral cube 0 1 11) ;0.1782892789654623 ;\u0026gt; (simpson-another-integral cube 0 1 12) ;0.2499999999999999' (define (simpson-another-integral-improve f a b n) (define (round-to-next-even x) (+ x (remainder x 2))) (define fixed-n (round-to-next-even n)) (define h (/ (- b a) fixed-n)) (define (add-2h x) (+ x (* 2.0 h))) ;;; (* (/ h 3.0) (+ (f a) (* 4.0 (sum f (+ a h) add-2h (- b h))) ;;; (+a h)è¡¨ç¤ºèµ·å§‹ç‚¹ (- b h) è¡¨ç¤ºçš„æ˜¯ç»ˆç‚¹ (* 2.0 (sum f (add-2h a) add-2h (- b h))) ;; æ³¨æ„è¿™è¾¹çš„(add2h a)è¡¨ç¤ºçš„æ˜¯èµ·å§‹ç‚¹ (f (+ a (* h fixed-n)))))) ;;; (f b)çš„æ•ˆæœæ˜¯ä¸€æ · ä½†æ˜¯ä¸æ­£ç¡®ï¼ ç°åœ¨ (simpson-another-integral cube 0 1 11) (simpson-another-integral cube 0 1 12) (simpson-another-integral cube 0 1 111);;; å¦‚æœæ˜¯å¥‡æ•°çš„è¯ï¼Œç°åœ¨è§£å†³çš„åŠæ³•å°±æ˜¯å¤šå¢åŠ ä¸€äº›è®¡ç®—ï¼ ;;;;;è¿‡ç¨‹æ²¡é”™ï¼ï¼ï¼ ä¸çŸ¥é“å“ªè¾¹å¤šåŠ äº†ï¼ (define (simpson-pair-integral f a b n) (define (round-to-next-even x) (+ x (remainder x 2))) (define fixed-n (round-to-next-even n)) (define h (/ (- b a) fixed-n)) (define (y k) ( f (+ a (* k h)))) (define (ypair k) (+ (* 2 (y k)) (* 4 (y (+ k 1))))) (define (add-2 k) (+ k 2)) (* (/ h 3) (+ (sum ypair 0 add-2 (- fixed-n 1)) (- (f b) (f a))))) ;;; ä¸ºä»€ä¹ˆæ˜¯å‡å· ä½ å¯ä»¥çœ‹åˆ°è¿™è¾¹çš„æ€æƒ³æ˜¯æŠ½å‡ºä¸­é—´çš„å¶æ•°å¯¹çš„æ•°æ®ï¼ˆå¥‡æ•°åŠ ä¸Šå¶æ•° ç†å½“æ˜¯åŠ èµ·æ¥çš„) ;;;å› ä¸ºæœ€åä¸€ä¸ª ä¸ºä»€ä¹ˆè¦è®¡ç®— [f(b) - f(a)] (simpson-pair-integral cube 1 3 1) (simpson-pair-integral cube 1 3 2) ;;;sim-integral æé«˜ç‰ˆ åŠ å…¥äº† round-to-next-evenä½¿å¾—è®¡ç®—å‡†ç¡®ï¼Œå…ˆå‰çš„sim-integralæœ‰é—®é¢˜ (define (sim-integral f a b n) (define (round-to-next-even x) (+ x (remainder x 2))) ;;;å¾—åŠ ä¸Šè¿™ä¸ª æ‰å¯ä»¥ç®—å‡†ï¼ï¼ (define fixed-n (round-to-next-even n)) (define h (/ (- b a) fixed-n)) (define (y k) (f (+ a (* k h)))) (define (coeff k) (if (even? k) 2 4)) (define (part-term k) (* (coeff k) (y k))) (define (inc x) (+ x 1)) (define part-value (sum part-term 1 inc (- fixed-n 1))) (* (/ h 3) (+ (y 0) (y n) part-value))) (sim-integral cube 1 3 10) ;;; æœ‰é—®é¢˜ å·²è§£å†³ (sim-integral cube 1 3 11) ;;; æœ‰é—®é¢˜ å·²è§£å†³ ","date":1431516460,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431516460,"objectID":"2bdc3f575ab8ce51db73326e57f53a33","permalink":"/blog/2015/05/13/qiu-ding-ji-fen/","publishdate":"2015-05-13T19:27:40+08:00","relpermalink":"/blog/2015/05/13/qiu-ding-ji-fen/","section":"archives","summary":"","tags":null,"title":"æ±‚å®šç§¯åˆ†","type":"archives"},{"authors":null,"categories":["scheme"],"content":"##Beautiful code!\næ•°xä¸ºå‡½æ•°çš„fçš„ä¸åŠ¨ç‚¹ï¼ˆfå¯ä»¥ä»£è¡¨N-Sæ–¹ç¨‹ï¼‰ï¼Œå¦‚æœæ»¡è¶³f(x)=x,åˆ™ç§°x ä¸ºå‡½æ•°fçš„ä¸åŠ¨ç‚¹ã€‚ æ€§è´¨ f(x),f(f(x)),f(f(f(x)))\u0026hellip;., change the x\u0026rsquo;s value if f(x)=x,then you found!\nSource code (define tolerance 0.000001) (define (fixed-point f first-guess) (define (close-enough? v1 v2) (\u0026lt; (abs (- v1 v2)) tolerance)) (define (try guess) (let ((next (f guess))) (if (close-enough? guess next) next (try next)))) (try first-guess)) ;;;solve cos(x)=x (fixed-point cos 1.0) ;;(cos 0.7390855263619245) ;;0.7390848683867142 ;;(abs (- (cos 0.7390855263619245) 0.7390855263619245)) ;;6.579752103164083e-07 ;;;solve y=siny+cosy x=f(x) ====\u0026gt; Navier Stokes equation (fixed-point (lambda (y) (+ (sin y) (cos y))) 1.0) ;;It is what we want!!! ;;;(abs (- ((lambda (y) (+ (sin y) (cos y))) 1.2587277968014188) 1.2587277968014188)) ;;6.26112570678572e-07 ;;;;One method to calculate the square value ;;because x^2 = y so x = y/x (x =f (x) next we will use the fixed-point thinking) we should continue change the x's value! (define (sqrt-iter guess x) (if (good-enough? guess x) guess (sqrt-iter (improve guess x) x))) (define (square x) (* x x)) ;;;good-enough? is similar to close-enoughï¼Ÿ (define (good-enough? x y) (\u0026lt; (abs (- (square x) y)) 0.00001)) ;;x^2=y x=y/x x+x=y/x+x x=(y/x+x)/2 (define (improve guess x) (average guess (/ x guess))) (define (mysqrt x) (sqrt-iter 1.0 x)) ;;(mysqrt 4) ;;2.0000000929222947 ;;;Use fixed-point thinking (define (mysqrt_death_fixed x) (fixed-point (lambda (y) (/ x y)) 1.0)) ;;(mysqrt_death_fixed 4) ;;;wrong !!! can not convenge!!!! why? ;;because y2= x/y1 y3=x/y2=x/(x/y1)=y1 ====\u0026gt;death recycle===\u0026gt; so we use average (define (mysqrt_fixed x) (fixed-point (lambda (y) (average y (/ x y))) 1.0)) (mysqrt_fixed 4) ;;;ok fine ;;2.000000000000002====\u0026gt;è¿™ä¹Ÿå«åšå¹³å‡é˜»å°¼å®šä¹‰ï¼å¸¸ç”¨äºæ•°å€¼è®¡ç®—å½“ä¸­ ;;åœ¨ä¸åŠ¨ç‚¹çš„æœå¯»ä¸­ï¼Œä½œä¸ºå¸®åŠ©æ”¶æ•›çš„æ‰‹æ®µï¼ï¼ï¼ï¼ ","date":1431371630,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431371630,"objectID":"5a132e949397293a1d6bd498f7de359b","permalink":"/blog/2015/05/12/zhao-chu-han-shu-de-bu-dong-dian-navier-stokesfang-cheng/","publishdate":"2015-05-12T03:13:50+08:00","relpermalink":"/blog/2015/05/12/zhao-chu-han-shu-de-bu-dong-dian-navier-stokesfang-cheng/","section":"archives","summary":"##Beautiful code!\næ•°xä¸ºå‡½æ•°çš„fçš„ä¸åŠ¨ç‚¹ï¼ˆfå¯ä»¥ä»£è¡¨N-Sæ–¹ç¨‹ï¼‰ï¼Œå¦‚æœæ»¡è¶³f(x)=x,åˆ™ç§°x ä¸ºå‡½æ•°fçš„ä¸åŠ¨ç‚¹ã€‚ æ€§è´¨ f(x),f(f(x)),f(f(f(x)))\u0026hellip;., change the x\u0026rsquo;s value if f(x)=x,then you found!\n","tags":null,"title":"æ‰¾å‡ºå‡½æ•°çš„ä¸åŠ¨ç‚¹--Navier-Stokesæ–¹ç¨‹","type":"archives"},{"authors":null,"categories":["scheme"],"content":"You want to solve F(x)=0, if f(a)\u0026lt;0\u0026lt;f(b), so the value must be inside the [a,b].\n#lang racket (define (close-enough? x y) (\u0026lt; (abs (- x y)) 0.00001)) (define (average a b) (/ (+ a b) 2.0)) (define (search f neg-point pos-point) (let ((midpoint (average neg-point pos-point))) (if (close-enough? neg-point pos-point) midpoint (let ((test-value (f midpoint))) (cond ((positive? test-value) (search f neg-point midpoint)) ((negative? test-value) (search f midpoint pos-point)) (else midpoint)))))) ;;å¿…é¡»åˆ¤æ–­ä¸€ä¸‹ï¼Œå¦‚æœåŒå·åˆ™æ— æ³•ä½¿ç”¨æŠ˜åŠæŸ¥æ‰¾ (define (half-interval-method f a b) (let ((a-value (f a)) (b-value (f b))) (cond ((and (negative? a-value) (positive? b-value)) (search f a b)) ((and (negative? b-value) (positive? a-value)) (search f a b)) (else (error \u0026quot;values are not of opposite sign\u0026quot; a b))))) (half-interval-method (lambda (x) (- (* x x x) (* 2 x) 3)) 1.0 2.0) ","date":1431369963,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431369963,"objectID":"13a172b1d1dbaae073d877b0b75d10ff","permalink":"/blog/2015/05/12/zhe-ban-chao-zhao-you-tiao-jian/","publishdate":"2015-05-12T02:46:03+08:00","relpermalink":"/blog/2015/05/12/zhe-ban-chao-zhao-you-tiao-jian/","section":"archives","summary":"You want to solve F(x)=0, if f(a)\u0026lt;0\u0026lt;f(b), so the value must be inside the [a,b].\n","tags":null,"title":"æŠ˜åŠæŸ¥æ‰¾æœ‰æ¡ä»¶","type":"archives"},{"authors":null,"categories":["scheme"],"content":"So beautiful\n(define (f x y) (define (f-helper a b) (+ (* (square a)) (* y b) (* a b))) (f-helper (+ 1 (* x y)) (- 1 y)))  ====\u0026gt; f(x,y)=x(1+xy)^2 + y(1-y)+(1+xy)(1-y) ==\u0026gt; a= 1+xy b= (1-y) f(x,y)=xa^2+yb+ab\n====\u0026gt;Continue\n(define (f x y) ((lambda (a b) (+ (* x (square a)) (* y b) (* a b))) (+ 1 (* x y)) (- 1 y)))  ====\u0026gt;Use let to define the local variables\n(define (f x y) (let ((a (+ 1 (* x y))) (b (- 1 y))) (+ (* x (square a)) (* y b) (* a b))))  let is just the coat of the ((lambda (a b))\nOf course we can use define\n(define (f x y) (define a (+ 1 (* x y))) (define b (- 1 y)) (+ (* x (square a)) (* y b) (* a b)))  SICP_P42\n","date":1431368951,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431368951,"objectID":"5fe9feff39d9d934b247114525e35565","permalink":"/blog/2015/05/12/so-beautiful-code/","publishdate":"2015-05-12T02:29:11+08:00","relpermalink":"/blog/2015/05/12/so-beautiful-code/","section":"archives","summary":"So beautiful\n(define (f x y) (define (f-helper a b) (+ (* (square a)) (* y b) (* a b))) (f-helper (+ 1 (* x y)) (- 1 y))) ","tags":null,"title":"So beautiful code","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š ç¬¬ä¸€éƒ¨åˆ† ï¼Œå…ˆæ˜¯è¯•ç”¨äº†zipinputstreamçš„ç”¨æ³• ç¬¬äºŒéƒ¨åˆ†ï¼Œ æ˜¯è¿›ä¸€æ­¥è¯•ç”¨äº†å‹ç¼©æµzipoutputStreamå’ŒåŠ å¯†çš„æ–¹æ³• ç¬¬ä¸‰éƒ¨åˆ† ï¼Œ åˆ™æ˜¯å¯¹ä¸Šè¿°è¿‡ç¨‹å°è£…ä¸ºä¸€ä¸ªOOZipç±»\nåŠŸèƒ½ç®€è¿°ï¼š åˆ†ä¸ºæ™®é€šçš„å‹ç¼©å’ŒåŠ å¯†çš„å‹ç¼©ï¼Œå¯¹åº”çš„è§£å‹ç¼© ã€‚æ™®é€šçš„å‹ç¼©ï¼šæ–‡ä»¶å’Œæ–‡ä»¶å¤¹éƒ½å¯ä»¥ã€‚ åŠ å¯†çš„å‹ç¼©ï¼šæ–‡ä»¶å’Œæ–‡ä»¶å¤¹éƒ½å¯ä»¥ï¼Œå½“åŠ å¯†çš„æ—¶å€™ï¼Œåˆ™ç”Ÿæˆçš„zipæ–‡ä»¶é‡Œé¢çš„æ–‡ä»¶æ‰“å¼€æ—¶ä¹±ç ï¼Œå¿…é¡»ç”¨å¯¹åº”çš„unzipCryptoæ–¹æ³•è¿›è¡Œè§£å‹æ‰æœ‰æ•ˆã€‚å½“ç„¶ä¸ä¼šåƒwinzipä¼šæé†’ä½ è¾“å…¥å¯†ç ï¼Œå¯ä»¥è®©ä½ æ‰“å¼€ï¼Œåªä¸è¿‡æ‰“å¼€çš„æ˜¯ä¹±ç ã€‚\n1ï¼š å…ˆä»com.rupeng.gtk4jæŒ–å‡ºäº†zipInputStreamçš„ç”¨æ³•ï¼Œç”¨äºè§£å‹ç¼©ï¼Œæµ‹è¯•åªèƒ½é’ˆå¯¹zipæ–‡ä»¶ã€‚ äºæ˜¯å°±æœ‰äº†åˆå§‹ç‰ˆæœ¬çš„è§£å‹ç¼©æµï¼š\nimport java.io.Closeable; import java.io.File; import java.io.FileInputStream; import java.io.FileNotFoundException; import java.io.FileOutputStream; import java.io.IOException; import java.io.InputStream; import java.io.OutputStream; import java.io.PrintWriter; import java.io.StringWriter; import java.util.zip.ZipEntry; import java.util.zip.ZipInputStream; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ12æ—¥ä¸‹åˆ1:19:18 * @version TestZipInputStream V1.0 */ public class TestZipInputStream { /** * @param args */ public static void main(String[] args) { //unZipShared(\u0026quot;e:\\\\test\\\\test.zip\u0026quot;); //unZipShared(\u0026quot;e:\\\\test\\\\test1.zip\u0026quot;); //raræš‚æ—¶æ— æ³•è§£å‹å‡ºæ¥ï¼Œä½†æ˜¯zipæ–‡ä»¶æ˜¯å¯ä»¥çš„ unZipShared(\u0026quot;e:\\\\test\\\\test1.zip\u0026quot;,\u0026quot;e:\\\\testOutput\u0026quot;); } /** * è§£å‹ç¼© zipæ–‡ä»¶ï¼Œåªèƒ½é™åˆ¶ä¸ºrar * @param zipName å¾…è§£å‹çš„zipæ–‡ä»¶ * @param outputfolder è§£å‹zipæ–‡ä»¶åˆ°outputFoleræ–‡ä»¶å¤¹ä¸‹ */ public static void unZipShared(String zipName,String outputfolder) { File gtkDir = new File(outputfolder);// *.dllæ”¾çš„æ–‡ä»¶å¤¹ if (!gtkDir.exists()) { gtkDir.mkdirs(); } InputStream inStream = null; try { inStream = new FileInputStream(zipName); } catch (FileNotFoundException e1) { // TODO Auto-generated catch block e1.printStackTrace(); } //InputStream inStream = Utils.class.getResourceAsStream(\u0026quot;/gtkshare.zip\u0026quot;); if (inStream == null) { throw new UnsatisfiedLinkError(\u0026quot;æ²¡æ‰¾åˆ°\u0026quot;+zipName); } try { unZip(inStream, gtkDir.toString()); System.out.println(gtkDir.toString()); } catch (IOException e) { System.err.println(\u0026quot;è§£å‹ç¼©gtkshare.zipå¤±è´¥\u0026quot; + toFullString(e)); } } /** * æŠŠstreamToZipè¿™ä¸ªzipæ–‡ä»¶æµè§£å‹åˆ°ç¡¬ç›˜çš„destDiræ–‡ä»¶å¤¹ï¼Œæ”¯æŒå¤šçº§ç›®å½• * @param streamToZip * @param destDir * @throws IOException */ public static void unZip(InputStream streamToZip,String destDir)throws IOException { ZipInputStream zipStream = new ZipInputStream(streamToZip); try { ZipEntry zipEntry = null; //é€šè¿‡zipEntryæ–¹å¼æ”¯æŒå¤šçº§ç›®å½• while((zipEntry=zipStream.getNextEntry())!=null) { if(zipEntry.isDirectory()) { File dir = new File(destDir,zipEntry.getName()); if(!dir.exists()) { dir.mkdirs(); } } else { FileOutputStream fileOutStream = new FileOutputStream(new File(destDir,zipEntry.getName())); try { copy(zipStream, fileOutStream); } finally { close(fileOutStream); } } } } finally { close(zipStream); } } /** * ä»zipæ–‡ä»¶åŒ…ä¸­æ‹·è´æ–‡ä»¶ * @param inStream zipEntryçš„æŸä¸ªæ–‡ä»¶ * @param outStream è¾“å‡ºçš„æŸä¸ªæ–‡ä»¶æµ * @throws IOException */ static void copy(InputStream inStream, OutputStream outStream) throws IOException { byte[] buffer = new byte[512 * 1024];// 0.5MB çš„ç¼“å†²åŒº int len; while ((len = inStream.read(buffer)) \u0026gt;= 0) { outStream.write(buffer, 0, len); } } /** * æ‘˜è‡ªrupeng.gtk4j ä¸æ˜ç™½å…·ä½“çš„ä½œç”¨ éä¸»è¦é—®é¢˜ * @param throwable * @return */ static String toFullString(Throwable throwable) { StringWriter sw = null; PrintWriter pw = null; try { sw = new StringWriter(); pw = new PrintWriter(sw); throwable.printStackTrace(pw); return sw.toString(); } finally { close(sw); close(pw); } } /** * è®©æ–‡ä»¶æµå®‰é™çš„å…³é—­ * @param closeable å…³é—­æ¥å£ */ static void close(Closeable closeable) { if (closeable != null) { try { closeable.close(); } catch (IOException e) { } } } }  2ï¼šåæ¥æƒ³ç€æœ‰è§£å‹ç¼©ï¼Œå¿…ç„¶ä¹Ÿæ˜¯æœ‰ç€å‹ç¼©ï¼Œäºæ˜¯å°±æ‘†äº†ä¸€ä¸‹ï¼Œå‚è€ƒäº†ä¸€ç¯‡ç™¾åº¦çŸ¥é“æ–‡ç«  2.1 é¦–å…ˆåŠ å…¥äº†zipçš„æ–¹æ³• 2.2 æ”¹è¿›äº†zipæ–¹æ³•çš„æ–‡ä»¶å‹ç¼©æµçš„å†™å…¥è¿‡ç¨‹ï¼Œåˆ©ç”¨buffersize 2.3 å¸¸ä½¿ç”¨äº†æ–‡ç« ä¸­çš„åŠ å¯†è¿‡ç¨‹ï¼Œæ·»åŠ äº†åŠ å¯†å‹ç¼©å’ŒåŠ å¯†è§£å‹ç¼©çš„è¿‡ç¨‹ 2.4 æƒ³ç€å®ç”¨å‘½ä»¤æµæ¥è¿›ä¸€æ­¥å®ç° å‹ç¼©å’Œè§£å‹ç¼©çš„è°ƒç”¨ï¼Œåæ¥å¼ƒç”¨ï¼Œæ”¹ç”¨å°è£…ä¸€ä¸ªOOZipç±»æ¥å®ç°\näºæ˜¯å°±æœ‰äº†ä¸‹é¢çš„å‡çº§ç‰ˆçš„å‹ç¼©å’Œè§£å‹ç¼©çš„ç¨‹åºï¼š\nimport java.io.Closeable; import java.io.File; import java.io.FileInputStream; import java.io.FileNotFoundException; import java.io.FileOutputStream; import java.io.IOException; import java.io.InputStream; import java.io.OutputStream; import java.io.PrintWriter; import java.io.StringWriter; import java.security.InvalidAlgorithmParameterException; import java.security.InvalidKeyException; import java.security.NoSuchAlgorithmException; import java.security.spec.InvalidKeySpecException; import java.util.Random; import java.util.zip.ZipEntry; import java.util.zip.ZipInputStream; import java.util.zip.ZipOutputStream; import javax.crypto.BadPaddingException; import javax.crypto.Cipher; import javax.crypto.IllegalBlockSizeException; import javax.crypto.NoSuchPaddingException; import javax.crypto.SecretKey; import javax.crypto.SecretKeyFactory; import javax.crypto.interfaces.PBEKey; import javax.crypto.spec.PBEKeySpec; import javax.crypto.spec.PBEParameterSpec; import javax.crypto.spec.SecretKeySpec; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ12æ—¥ä¸‹åˆ5:22:31 * @version TestZipInputStreamUpdate V1.0 å¢åŠ äº†å‹ç¼© * V2.0 ZipSharedåŠ å…¥äº† zosTemp.close(); ä¿®å¤äº† å‹ç¼©çš„bugï¼Œåˆ æ‰åˆ™æ— æ³•å‹ç¼© * V3.0 å‡çº§äº†ZipShared ä½¿ç”¨äº†copyå‡½æ•°ã€‚ * V4.0 å¢åŠ äº†åŠ å¯†å‹ç¼© å’Œè§£åŠ å¯†å‹ç¼© */ public class TestZipInputStreamUpdate { /** * @param args */ private static final String ALGORITHM = \u0026quot;PBEWithMD5AndDES\u0026quot;; public static void main(String[] args) { // TODO Auto-generated method stub TestZipInputStreamUpdate tisu = new TestZipInputStreamUpdate(); //ä¸éœ€è¦å†æ¬¡åŠ å…¥zipæ–‡ä»¶åç¼€äº† //tisu.ZipShared(\u0026quot;e://test1222bak\u0026quot;,\u0026quot;e://test1222\u0026quot;); tisu.ZipSharedCrypto(\u0026quot;e://test1222bak\u0026quot;, \u0026quot;e://test1222passwdByZhao.zip\u0026quot;, \u0026quot;123456\u0026quot;); tisu.unzipCrypto(\u0026quot;e://test1222passwdByZhao.zip\u0026quot;,\u0026quot;c://laoliang\u0026quot;,\u0026quot;123456\u0026quot;); // tisu.unzipCrypto(\u0026quot;e://test1222passwdByZhao.zip\u0026quot;,\u0026quot;c://laoliang\u0026quot;,\u0026quot;1234565\u0026quot;); /* * ä½ æ­£åœ¨è¿›å…¥e:\\test1222bakæ–‡ä»¶å¤¹ ä½ æ­£åœ¨è¿›å…¥e:\\test1222bak\\test1222æ–‡ä»¶å¤¹ ä½ æ­£åœ¨å‹ç¼©a1.zip ä½ æ­£åœ¨å‹ç¼©test123.txt ä½ æ­£åœ¨å‹ç¼©test124.txt é€šè¿‡è¿™ä¸ªå®éªŒæ€»ç»“äº†ï¼šæ‰€æœ‰æ“ä½œç³»ç»Ÿå†…éƒ¨çš„æ–‡ä»¶éƒ½æ˜¯æ–‡ä»¶ï¼Œæ— è®ºæ˜¯æ™®é€šçš„æ–‡ä»¶ è¿˜æ˜¯æ–‡ä»¶å¤¹æ–‡ä»¶ï¼Œè¿˜æ˜¯ç®¡é“æ–‡ä»¶ï¼Œè¿˜æ˜¯ç´¢å¼•æ–‡ä»¶ï¼Œè¿˜æ˜¯è®¾å¤‡æ–‡ä»¶ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ æ–‡ä»¶ï¼Œåªä¸è¿‡æ˜¯åœ¨æ–‡ä»¶çš„å¤´ä¸Šé¢å¢åŠ äº†ä¸€äº›ç‰¹æ®Šçš„æ ‡è®°ï¼Œæ¯”å¦‚è¯´ä½ éœ€è¦åœ¨æ–‡ä»¶å¤¹ çš„è·¯å¾„å¢åŠ ä¸€ä¸ª\\è·¯å¾„æ ‡å¿— åæ–œæ çš„é“ç†æ˜¯ä¸€æ ·çš„ã€‚ */ /* è¿™æ˜¯ä¸€ä¸ªå‘½ä»¤æµçš„ä½¿ç”¨æ–¹å¼ï¼šï¼š * if(args.length==2){ String name = args[1]; Zip zip = new Zip(); if(args[0].equals(\u0026quot;-zip\u0026quot;)) { zipname = args[2]; zip.doZip(name); } else if(args[0].equals(\u0026quot;-unzip\u0026quot;)) { outputfolder = args[2]; zip.unZip(name); } } else{ System.out.println(\u0026quot;Usage:\u0026quot;); System.out.println(\u0026quot;å‹ç¼©:java Zip -zip directoryName zipname\u0026quot;); System.out.println(\u0026quot;è§£å‹:java Zip -unzip fileName.zip outputfolder\u0026quot;); throw new Exception(\u0026quot;Arguments error!\u0026quot;); } */ } public void ZipShared(String fileinput,String zos) { try { //åŠ å…¥\u0026quot;zip\u0026quot;åç¼€ï¼ ZipOutputStream zosTemp = new ZipOutputStream(new FileOutputStream(zos+\u0026quot;zip\u0026quot;)); File fApple = new File(fileinput); ZipShared(fApple,zosTemp,\u0026quot;\u0026quot;); try { /// ä¸ºä»€ä¹ˆåŠ å…¥è¿™ä¸ªå°±å¯ä»¥ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ // ä¸åŠ å…¥è¿™æœ‰å¼‚å¸¸ï¼Ÿï¼Ÿï¼Ÿï¼Ÿwhy Tell me zosTemp.close(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } catch (FileNotFoundException e) { // TODO Auto-generated catch block e.printStackTrace(); } } public void ZipShared(File fileinput,ZipOutputStream zos,String base) { //ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(outputZipName)); //File fileinput = new File(outputZipName); if(fileinput.isDirectory()) { System.out.println(\u0026quot;ä½ æ­£åœ¨è¿›å…¥\u0026quot;+fileinput+\u0026quot;æ–‡ä»¶å¤¹\u0026quot;); File[] fBanana = fileinput.listFiles(); try { //ä¼ è¿›ä¸€ä¸ªæ–‡ä»¶å¤¹æ ‡å¿— zos.putNextEntry(new ZipEntry(base+\u0026quot;/\u0026quot;)); //è®©baseåŠ ä¸Šä¸€ä¸ª/ base = base.length()==0?\u0026quot;\u0026quot;:base+\u0026quot;/\u0026quot;; for(int i = 0; i \u0026lt; fBanana.length; i++) { ZipShared(fBanana[i],zos,base+fBanana[i].getName()); } } catch (IOException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;å‹ç¼©æ–‡ä»¶å¤¹å¤±è´¥\u0026quot;+e.getMessage()); } }else { try { zos.putNextEntry(new ZipEntry(base)); FileInputStream fis = new FileInputStream(fileinput); //æ”¹è¿›å†™å…¥çš„æ–¹å¼ /*int b; while((b = fis.read())!= -1) { zos.write(b); //æ•ˆç‡å¾ˆå®šä¸é«˜ æ¯ä¸€ä¸ªå­—ç¬¦ è¿›è¡Œä¸€æ¬¡ç¼“å†² //zos.flush(); }*/ copy(fis,zos); //åˆ©ç”¨æ±é¹ç‰ˆçš„copyå‡½æ•° System.out.println(\u0026quot;ä½ æ­£åœ¨å‹ç¼©\u0026quot;+fileinput.getName()); //fis.close(); //zos.close(); } catch (IOException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;å‹ç¼©æ–‡ä»¶å¤±è´¥\u0026quot;+e.getMessage()); } //ä¸ºä»€ä¹ˆåŠ å…¥åˆ™é”™è¯¯ /*finally { try { zos.close(); }catch(IOException e) { System.out.println(\u0026quot;æ‰“å¼€æµé”™è¯¯ï¼\u0026quot;); } }*/ } } public void ZipSharedCrypto(String fileinput,String zosFile,String pwd) { try { File f1 = new File(fileinput); //é‡‡ç”¨å’ŒZipSharedä¸€æ ·çš„FileOutputStream ZipOutputStream zos = null; zos = new ZipOutputStream(new FileOutputStream(zosFile)); ZipSharedCrypto(f1,zos,\u0026quot;\u0026quot;, pwd); try { zos.close(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } catch (FileNotFoundException e) { // TODO Auto-generated catch block e.printStackTrace(); } System.out.println(\u0026quot;æˆäº†\u0026quot;); } public void ZipSharedCrypto(File fileinput,ZipOutputStream zos,String base,String pwd) { if(fileinput.isDirectory()) { System.out.println(\u0026quot;ä½ æ­£åœ¨è¿›å…¥\u0026quot;+fileinput+\u0026quot;æ–‡ä»¶å¤¹\u0026quot;); File[] fApples = fileinput.listFiles(); //å› ä¸ºZipEntryçš„isDirectory()æ–¹æ³•ä¸­ï¼Œç›®å½•ä»¥\u0026quot;/\u0026quot;ç»“å°¾ try { zos.putNextEntry(new ZipEntry(base+\u0026quot;/\u0026quot;)); base = base.length()==0?\u0026quot;\u0026quot;:(base+\u0026quot;/\u0026quot;); //ä¸€ç§æ¯”è¾ƒæ–°å‹çš„æ–¹å¼å¾ªç¯è¯»å†™ä¸œè¥¿ã€‚ for(File ftemp:fApples) { ZipSharedCrypto(ftemp,zos,base+ftemp.getName(),pwd); } }catch(IOException e) { System.out.println(\u0026quot;æ–‡ä»¶å¤¹åŠ å¯†å‹ç¼©å¤±è´¥\u0026quot;); } }else { try { zos.putNextEntry(new ZipEntry(base)); FileInputStream fis = new FileInputStream(fileinput); System.out.println(\u0026quot;ä½ æ­£åœ¨å¼€å§‹åŠ å¯†å‹ç¼©\u0026quot;+fileinput+\u0026quot;æ–‡ä»¶\u0026quot;); PBEKeySpec keySpec = new PBEKeySpec(pwd.toCharArray()); SecretKeyFactory keyFactory = null; try { keyFactory = SecretKeyFactory.getInstance(ALGORITHM); } catch (NoSuchAlgorithmException e) { // TODO Auto-generated catch block e.printStackTrace(); } SecretKey passwordKey = keyFactory.generateSecret(keySpec); //ç”Ÿæˆä¸€ä¸ªç‚¸å¼¹ è¿›è¡ŒåŠ å¯† byte[] bomb = new byte[8]; Random rnd = new Random(); rnd.nextBytes(bomb); int iterations = 100; PBEParameterSpec parameterSpec = new PBEParameterSpec(bomb, iterations); Cipher cipher = null; try { cipher = Cipher.getInstance(ALGORITHM); } catch (NoSuchAlgorithmException | NoSuchPaddingException e) { // TODO Auto-generated catch block e.printStackTrace(); } cipher.init(Cipher.ENCRYPT_MODE, passwordKey,parameterSpec); //å¾€è¾“å‡ºæµ æ·»åŠ ç‚¸å¼¹ zos.write(bomb); //æ·»åŠ åŠ å¯†çš„ä¸»æ–‡ä»¶å†…å®¹ 1KBç¼“å­˜åŒº byte[] inputBuffer = new byte[1024]; int bytesRead = 0; //å¦‚æœæ²¡æœ‰è¯»åˆ°ä¿¡æ¯åˆ™ä¸º-1 while((bytesRead = fis.read(inputBuffer))!= -1) { //æ¯ä¸ªç¼“å†²åŒº è¿›è¡ŒåŠ å¯†å†™å…¥ byte[] output = cipher.update(inputBuffer); if(output != null) { zos.write(output); } } //åŠ å¯†ç»“æŸè¯­ byte[] outputFinal =null; try { outputFinal = cipher.doFinal(); } catch (IllegalBlockSizeException | BadPaddingException e) { // TODO Auto-generated catch block e.printStackTrace(); } if(outputFinal != null) { zos.write(outputFinal); } /* fis.close(); zos.flush(); zos.close();*/ }catch(InvalidKeySpecException | InvalidKeyException | InvalidAlgorithmParameterException | IOException e) { System.out.println(\u0026quot;åŠ å¯†å¤±è´¥\u0026quot;); } } } /** * è§£å‹ç¼© zipæ–‡ä»¶ï¼Œåªèƒ½é™åˆ¶ä¸ºrar * @param zipName å¾…è§£å‹çš„zipæ–‡ä»¶ * @param outputfolder è§£å‹zipæ–‡ä»¶åˆ°outputFoleræ–‡ä»¶å¤¹ä¸‹ */ public static void unZipShared(String zipName,String outputfolder) { File gtkDir = new File(outputfolder);// *.dllæ”¾çš„æ–‡ä»¶å¤¹ //æŒ‡å®šçš„ç›®å½•ä¸å­˜åœ¨ åˆ™åˆ›å»ºä¹‹ if (!gtkDir.exists()) { gtkDir.mkdirs(); } InputStream inStream = null; try { inStream = new FileInputStream(zipName); } catch (FileNotFoundException e1) { // TODO Auto-generated catch block e1.printStackTrace(); } //InputStream inStream = Utils.class.getResourceAsStream(\u0026quot;/gtkshare.zip\u0026quot;); if (inStream == null) { throw new UnsatisfiedLinkError(\u0026quot;æ²¡æ‰¾åˆ°\u0026quot;+zipName); } try { unZip(inStream, gtkDir.toString()); System.out.println(gtkDir.toString()); } catch (IOException e) { System.err.println(\u0026quot;è§£å‹ç¼©gtkshare.zipå¤±è´¥\u0026quot; + toFullString(e)); } } /** * æŠŠstreamToZipè¿™ä¸ªzipæ–‡ä»¶æµè§£å‹åˆ°ç¡¬ç›˜çš„destDiræ–‡ä»¶å¤¹ï¼Œæ”¯æŒå¤šçº§ç›®å½• * @param streamToZip * @param destDir * @throws IOException */ public static void unZip(InputStream streamToZip,String destDir)throws IOException { ZipInputStream zipStream = new ZipInputStream(streamToZip); try { ZipEntry zipEntry = null; //é€šè¿‡zipEntryæ–¹å¼æ”¯æŒå¤šçº§ç›®å½• while((zipEntry=zipStream.getNextEntry())!=null) { if(zipEntry.isDirectory()) { System.out.println(\u0026quot;ä½ æ­£åœ¨åˆ›å»ºæ–‡ä»¶å¤¹æ–‡ä»¶ æ¯”è¾ƒç‰¹æ®Š\u0026quot;); File dir = new File(destDir,zipEntry.getName()); //å¦‚æœæŒ‡å®šçš„ç›®å½•ä¸å­˜åœ¨ åˆ™åˆ›å»ºä¹‹ if(!dir.exists()) { dir.mkdirs(); } } else { FileOutputStream fileOutStream = new FileOutputStream(new File(destDir,zipEntry.getName())); try { copy(zipStream, fileOutStream); } finally { close(fileOutStream); } System.out.println(\u0026quot;ä½ æ­£åœ¨è§£å‹ç¼©å‹ç¼©\u0026quot;+zipEntry.getName()); } } } finally { close(zipStream); } } /** * ä»zipæ–‡ä»¶åŒ…ä¸­æ‹·è´æ–‡ä»¶ ï¼ŒæŒ‰ç…§0.5MBçš„ç¼“å†²å†™å…¥æ–‡ä»¶(é»˜è®¤æ–¹å¼ï¼‰ * @param inStream zipEntryçš„æŸä¸ªæ–‡ä»¶ * @param outStream è¾“å‡ºçš„æŸä¸ªæ–‡ä»¶æµ * @throws IOException */ static void copy(InputStream inStream, OutputStream outStream) throws IOException { byte[] buffer = new byte[512 * 1024];// 0.5MB çš„ç¼“å†²åŒº int len; while ((len = inStream.read(buffer)) \u0026gt;= 0) { outStream.write(buffer, 0, len); } } /** * æ‘˜è‡ªrupeng.gtk4j ä¸æ˜ç™½å…·ä½“çš„ä½œç”¨ éä¸»è¦é—®é¢˜ * @param throwable * @return */ static String toFullString(Throwable throwable) { StringWriter sw = null; PrintWriter pw = null; try { sw = new StringWriter(); pw = new PrintWriter(sw); throwable.printStackTrace(pw); return sw.toString(); } finally { close(sw); close(pw); } } /** * è®©æ–‡ä»¶æµå®‰é™çš„å…³é—­ * @param closeable å…³é—­æ¥å£ */ static void close(Closeable closeable) { if (closeable != null) { try { closeable.close(); } catch (IOException e) { } } } // åŠ å¯†è§£å‹ç¼© /** * åŠŸèƒ½æè¿°ï¼šå°†å‹ç¼©æ–‡ä»¶è§£å‹åˆ°æŒ‡å®šçš„æ–‡ä»¶ç›®å½•ä¸‹ * @param zipFileName å‹ç¼©æ–‡ä»¶åç§°(å¸¦è·¯å¾„) * @param outputDirectory æŒ‡å®šè§£å‹ç›®å½• * @return * @throws Exception */ public void unzipCrypto(String zipFileName, String outputDirectory, String pwd) { ZipInputStream inputStream; try { inputStream = new ZipInputStream(new FileInputStream(zipFileName)); unzipCrypto(inputStream, outputDirectory, pwd); } catch (Exception e) { // TODO Auto-generated catch block e.printStackTrace(); } } public void unzipCrypto(ZipInputStream inputStream, String outputDirectory, String pwd) throws Exception { ZipEntry zipEntry = null; FileOutputStream outputStream = null; try{ while ((zipEntry = inputStream.getNextEntry()) != null) { if (zipEntry.isDirectory()) { System.out.println(\u0026quot;ä½ æ­£åœ¨è¿›å…¥\u0026quot;+zipEntry.getName()+\u0026quot;æ–‡ä»¶å¤¹\u0026quot;); String name = zipEntry.getName(); name = name.substring(0, name.length() - 1); File file = new File(outputDirectory + File.separator + name); file.mkdir(); } else { File file = new File(outputDirectory + File.separator + zipEntry.getName()); file.createNewFile(); outputStream = new FileOutputStream(file); System.out.println(\u0026quot;ä½ æ­£åœ¨è§£å‹ç¼©\u0026quot;+file.getName()+\u0026quot;æ–‡ä»¶\u0026quot;); PBEKeySpec keySpec = new PBEKeySpec(pwd.toCharArray()); SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(ALGORITHM); SecretKey passwordKey = keyFactory.generateSecret(keySpec); byte[] salt = new byte[8]; inputStream.read(salt); int iterations = 100; PBEParameterSpec parameterSpec = new PBEParameterSpec(salt, iterations); Cipher cipher = Cipher.getInstance(ALGORITHM); cipher.init(Cipher.DECRYPT_MODE, passwordKey, parameterSpec); byte[] input = new byte[1024]; int bytesRead; while ((bytesRead = inputStream.read(input)) != -1) { byte[] output = cipher.update(input, 0, bytesRead); if (output != null) { outputStream.write(output); } } byte[] output = cipher.doFinal(); if (output != null) { outputStream.write(output); } /* outputStream.flush(); outputStream.close();*/ } } //inputStream.close(); } catch(IOException ex) { throw new Exception(\u0026quot;è§£å‹è¯»å–æ–‡ä»¶å¤±è´¥\u0026quot;); } catch(Exception ex) { throw new Exception(\u0026quot;è§£å‹æ–‡ä»¶å¯†ç ä¸æ­£ç¡®\u0026quot;); } /* finally { inputStream.close(); outputStream.flush(); outputStream.close(); }*/ } }  3ï¼šè¿›ä¸€æ­¥ å®ç°å…ˆå‰çš„æƒ³æ³•ï¼Œå°è£…ä¸€ä¸ªOOZipç±»ï¼Œ åŸºæœ¬æ€æƒ³ï¼š 1ï¼šæŠ½å–å¸¸ç”¨å˜é‡ï¼Œæ¯”å¦‚bufferSize ç¼“å†²åŒºå¤§å° bufç¼“å†²åŒºï¼› æœ¬æƒ³ç€åŠ å…¥å‹ç¼©å’Œè§£å‹ç¼©çš„æµå˜é‡ï¼Œåæ¥åˆ æ‰äº† 2ï¼šå®šä¹‰æ„é€ å‡½æ•°ï¼Œ è®¾ç½®ç¼“å†²åŒºå¤§å° 3ï¼šå¤åˆ¶ä¹‹å‰çš„æ–¹æ³•ï¼Œå¹¶åˆ©ç”¨buffersizeå’Œbufæ”¹å†™copyå‡½æ•°å’Œ æ–‡ä»¶çš„å¤åˆ¶çš„å‡½æ•° 4ï¼šè¿›è¡Œç®€å•åœ°å‹ç¼©å’Œè§£å‹ç¼©æ–‡ä»¶å¤¹ åŠ å¯†å‹ç¼©å’Œè§£åŠ å¯†å‹ç¼©æ–‡ä»¶å¤¹ çš„æµ‹è¯•ã€‚ å¹¶æ‰¾åˆ°äº†å‹ç¼©å•ä¸ªæ–‡ä»¶çš„bug 5ï¼šbugä¿®å¤\nå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š\nimport java.io.Closeable; import java.io.File; import java.io.FileInputStream; import java.io.FileNotFoundException; import java.io.FileOutputStream; import java.io.IOException; import java.io.InputStream; import java.io.OutputStream; import java.io.PrintWriter; import java.io.StringWriter; import java.security.InvalidAlgorithmParameterException; import java.security.InvalidKeyException; import java.security.NoSuchAlgorithmException; import java.security.spec.InvalidKeySpecException; import java.util.Random; import java.util.zip.ZipEntry; import java.util.zip.ZipInputStream; import java.util.zip.ZipOutputStream; import javax.crypto.BadPaddingException; import javax.crypto.Cipher; import javax.crypto.IllegalBlockSizeException; import javax.crypto.NoSuchPaddingException; import javax.crypto.SecretKey; import javax.crypto.SecretKeyFactory; import javax.crypto.spec.PBEKeySpec; import javax.crypto.spec.PBEParameterSpec; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ12æ—¥ä¸‹åˆ9:51:11 * @version OOZip ç”¨äºå‹ç¼©å’Œè§£å‹ç¼© * V1.0 å¢åŠ äº†å‹ç¼© * V2.0 ZipSharedåŠ å…¥äº† zosTemp.close(); ä¿®å¤äº† å‹ç¼©çš„bug * V3.0 æ”¹è¿›äº†æ„é€ å‡½æ•° åˆ©ç”¨å…·æœ‰ç¼“å†²åŒºçš„å‹ç¼© * V4.0 å‡çº§äº†ZipShared ä½¿ç”¨äº†copyå‡½æ•°ã€‚ * V5.0 å¢åŠ äº†åŠ å¯†å‹ç¼© å’Œè§£åŠ å¯†å‹ç¼© * V6.0 æ”¹ç”¨äº†é¢å‘å¯¹è±¡æ–¹å¼ä¿®æ”¹äº†ä¸€ç•ª * V7.0 åŠ å…¥äº†ä¸€äº›å‹ç¼©å’Œè§£å‹ç¼©å®Œæˆçš„çš„consoleæ ‡è®° * V8.0 ä¿®å¤äº†å•ä¸ªæ–‡ä»¶æ— æ³•åŠ å¯†çš„bug new ZipEntry(base) æ”¹ä¸º * new ZipEntry(base+fileinput.getName())ï¼Œæœªæ·»å…¥åˆ°zipentryçš„ç¼˜æ•… * è€Œè‹¥æ˜¯æ–‡ä»¶å¤¹éå†çš„æ—¶å€™åˆ™æ˜¯æœ‰åŠ å…¥æ–‡ä»¶åçš„æ ‡è®°ï¼æ‰€ä»¥åœ¨å•ä¸ªæ–‡ä»¶çš„æ—¶å€™ä¹Ÿéœ€è¦åŠ å…¥æ–‡ä»¶åçš„ * æ ‡è®° * V9.0 è‹¥æœ‰ä¸­æ–‡é—®é¢˜ï¼Œå¯ä»¥è¿›ä¸€æ­¥é‡‡ç”¨import org.apache.tools.zip.* çš„zipåŒ…ï¼ æ›´å¥½çš„æ”¯æŒä¸­æ–‡ * å…·ä½“å‚çœ‹http://blog.csdn.net/liu149339750/article/details/7887701 * http://szhnet.iteye.com/blog/199059 ï¼Œè¿™ä¸ªé“¾æ¥å½“ä¸­æä¾›äº†antç‰ˆæœ¬ * å½“ç„¶æ­¤ç‰ˆæœ¬ï¼Œä¸éœ€è¦org.apache.tool.zipåŒ…ä¹Ÿä¸éœ€è¦antåŒ… é™„å½•äº†antç‰ˆæœ¬çš„ä»£ç ï¼Œçš„ç¡®çœ‹èµ·æ¥ * æ˜¯ç®€å•çš„ã€‚ */ public class OOZip { /** * è¿™å‡ ä¸ªç§æœ‰å˜é‡çš„æ§åˆ¶ï¼Œä¸»è¦ä½“ç°åœ¨é’ˆå¯¹å…·ä½“çš„æ–‡ä»¶çš„å¤åˆ¶è¿‡ç¨‹ä¸­ */ private int bufSize ; //å‹ç¼©å’Œè§£å‹ç¼©ä¼šç”¨åˆ°ã€‚ ä¸€æ¬¡ä»å‹ç¼©æ–‡ä»¶zipè¯»å–å¤šå°‘æ–‡ä»¶ä¿¡æ¯ //æˆ–è€…ä¸€æ¬¡å†™å…¥å¤šå°‘æ–‡ä»¶ä¿¡æ¯åˆ°å‹ç¼©æµ private byte[] buf; //å†™å…¥æˆ–è€…å†™å‡ºå‹ç¼©æµçš„å­—èŠ‚æ•°ç»„ private int readBytes = 0; //å®é™…å†™å…¥æˆ–è€…å†™å‡ºæ–‡ä»¶æµçš„å¤§å°ã€‚ private static final String ALGORITHM = \u0026quot;PBEWithMD5AndDES\u0026quot;; //æ„é€ å‡½æ•°çš„å®šä¹‰ public OOZip(){ // 1025*512 //è®¾ç½®è¾“å…¥è¾“å‡ºæµçš„ç¼“å†²åŒºçš„å¤§å° ï¼Œç»Ÿä¸€è®¾ç½® this(1024*512); } public OOZip(int bufSize){ this.bufSize = bufSize; this.buf = new byte[this.bufSize]; } //å¸¸ç”¨çš„ç±»ä¸­ å†…éƒ¨å‡½æ•° public static void main(String[] args) { // TODO Auto-generated method stub OOZip oz = new OOZip(); //å•ä¸ªæ–‡ä»¶åŠ å¯†å’ŒéåŠ å¯†æµ‹è¯•æš‚æ—¶å¤±è´¥ oz.ZipShared(\u0026quot;e://student.txt\u0026quot;, \u0026quot;e://laoliang\u0026quot;); //oz.ZipSharedCrypto(\u0026quot;e://student.txt\u0026quot;, \u0026quot;e://laoliang\u0026quot;,\u0026quot;1234\u0026quot;); //è¾“å…¥æ–‡ä»¶å¤¹è·¯å¾„åˆ™åŠ å¯†å’ŒéåŠ å¯†æµ‹è¯•é€šè¿‡ //oz.ZipShared(\u0026quot;e://test1222bak\u0026quot;, \u0026quot;e://laoliang\u0026quot;); //å·²æµ‹è¯•é€šè¿‡ //oz.ZipSharedCrypto(\u0026quot;e://test1222bak\u0026quot;, \u0026quot;e://laoliang\u0026quot;, \u0026quot;123456\u0026quot;); //è§£å‹ç¼©ï¼Œä¸ç”¨è¾“å…¥.zipåç¼€ï¼Œåªéœ€è¦è¾“å…¥æ–‡ä»¶å //oz.unzipCrypto(\u0026quot;e://laoliang\u0026quot;, \u0026quot;c://laozi\u0026quot;,\u0026quot;123456\u0026quot;); //æµ‹è¯•æˆåŠŸ } /** * å‹ç¼©åå­—ä¸ºfileinputå˜é‡å†…å®¹çš„æ–‡ä»¶å¤¹ * @param fileinput æ–‡ä»¶å¤¹åå­— * @param zos zipæ–‡ä»¶å¤¹åå­— */ public void ZipShared(String fileinput,String zos) { try { //åŠ å…¥\u0026quot;zip\u0026quot;åç¼€ï¼ ZipOutputStream zosTemp = new ZipOutputStream(new FileOutputStream(zos+\u0026quot;.zip\u0026quot;)); File fApple = new File(fileinput); ZipShared(fApple,zosTemp,\u0026quot;\u0026quot;); try { /// ä¸ºä»€ä¹ˆåŠ å…¥è¿™ä¸ªå°±å¯ä»¥ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ // ä¸åŠ å…¥è¿™æœ‰å¼‚å¸¸ï¼Ÿï¼Ÿï¼Ÿï¼Ÿwhy Tell me zosTemp.close(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } catch (FileNotFoundException e) { // TODO Auto-generated catch block e.printStackTrace(); } System.out.println(\u0026quot;success to create\u0026quot;+zos+\u0026quot;.zip\u0026quot;); } /** * å‹ç¼©æ–‡ä»¶å¤¹çš„ä¸­é—´å‡½æ•° * @param fileinput è¾“å…¥å‡½æ•°çš„æ–‡ä»¶å¯¹è±¡ * @param zos å‹ç¼©è¾“å‡ºæµå¯¹è±¡ * @param base ä¸€èˆ¬æ˜¯\u0026quot;\u0026quot; è¡¨ç¤ºå­ç›®å½•çš„ä½œç”¨ï¼Œåœ¨é€’å½’ç›®å½•çš„æ—¶å€™ä¼šç”¨åˆ°ï¼Œåœ¨æ–‡ä»¶å¤¹é€’å½’ä¸­ï¼Œæ¶‰åŠåˆ°æ”¹å˜ï¼› */ public void ZipShared(File fileinput,ZipOutputStream zos,String base) { if(fileinput.isDirectory()) { System.out.println(\u0026quot;ä½ æ­£åœ¨è¿›å…¥\u0026quot;+fileinput+\u0026quot;æ–‡ä»¶å¤¹\u0026quot;); File[] fBanana = fileinput.listFiles(); try { //ä¼ è¿›ä¸€ä¸ªæ–‡ä»¶å¤¹æ ‡å¿— zos.putNextEntry(new ZipEntry(base+\u0026quot;/\u0026quot;)); //è®©baseåŠ ä¸Šä¸€ä¸ª/ base = base.length()==0?\u0026quot;\u0026quot;:base+\u0026quot;/\u0026quot;; for(int i = 0; i \u0026lt; fBanana.length; i++) { ZipShared(fBanana[i],zos,base+fBanana[i].getName()); } } catch (IOException e) { System.out.println(\u0026quot;å‹ç¼©æ–‡ä»¶å¤¹å¤±è´¥\u0026quot;+e.getMessage()); } }else { try { zos.putNextEntry(new ZipEntry(base+fileinput.getName())); FileInputStream fis = new FileInputStream(fileinput); //æ”¹è¿›å†™å…¥çš„æ–¹å¼ /*int b; while((b = fis.read())!= -1) { zos.write(b); //æ•ˆç‡å¾ˆå®šä¸é«˜ æ¯ä¸€ä¸ªå­—ç¬¦ è¿›è¡Œä¸€æ¬¡ç¼“å†² //zos.flush(); }*/ copy(fis,zos); //åˆ©ç”¨æ±é¹ç‰ˆçš„copyå‡½æ•° System.out.println(\u0026quot;ä½ æ­£åœ¨å‹ç¼©\u0026quot;+fileinput.getName()); } catch (IOException e) { System.out.println(\u0026quot;å‹ç¼©æ–‡ä»¶å¤±è´¥\u0026quot;+e.getMessage()); } } } /** * åŠ å¯†å‹ç¼©æ–‡ä»¶å¤¹ * @param fileinput æ–‡ä»¶å¤¹å­—ç¬¦ä¸² * @param zosFile å‹ç¼©å­—ç¬¦ä¸²åå­— * @param pwd åŠ å¯†çš„å¯†ç  */ public void ZipSharedCrypto(String fileinput,String zosFile,String pwd) { try { File f1 = new File(fileinput); //é‡‡ç”¨å’ŒZipSharedä¸€æ ·çš„FileOutputStream ZipOutputStream zos = null; zos = new ZipOutputStream(new FileOutputStream(zosFile+\u0026quot;.zip\u0026quot;)); ZipSharedCrypto(f1,zos,\u0026quot;\u0026quot;, pwd); try { zos.close(); } catch (IOException e) { e.printStackTrace(); } } catch (FileNotFoundException e) { System.out.println(\u0026quot;æœªæ‰¾åˆ°æ–‡ä»¶\u0026quot;+e.getMessage()); } System.out.println(\u0026quot;success to create crypto \u0026quot;+zosFile+\u0026quot;.zip\u0026quot;); } /** * åŠ å¯†å‹ç¼©æ–‡ä»¶å¤¹ * @param fileinput å‹ç¼©æ–‡ä»¶å¤¹çš„Fileå¯¹è±¡ * @param zos zipå‹ç¼©è¾“å‡ºæµZipOutputStream * @param base ä¸€èˆ¬æ˜¯\u0026quot;\u0026quot; * @param pwd å‹ç¼©çš„å¯†ç  */ public void ZipSharedCrypto(File fileinput,ZipOutputStream zos,String base,String pwd) { if(fileinput.isDirectory()) { System.out.println(\u0026quot;ä½ æ­£åœ¨è¿›å…¥\u0026quot;+fileinput+\u0026quot;æ–‡ä»¶å¤¹\u0026quot;); File[] fApples = fileinput.listFiles(); //å› ä¸ºZipEntryçš„isDirectory()æ–¹æ³•ä¸­ï¼Œç›®å½•ä»¥\u0026quot;/\u0026quot;ç»“å°¾ try { zos.putNextEntry(new ZipEntry(base+\u0026quot;/\u0026quot;)); base = base.length()==0?\u0026quot;\u0026quot;:(base+\u0026quot;/\u0026quot;); //ä¸€ç§æ¯”è¾ƒæ–°å‹çš„æ–¹å¼å¾ªç¯è¯»å†™ä¸œè¥¿ã€‚ for(File ftemp:fApples) { ZipSharedCrypto(ftemp,zos,base+ftemp.getName(),pwd); } }catch(IOException e) { System.out.println(\u0026quot;æ–‡ä»¶å¤¹åŠ å¯†å‹ç¼©å¤±è´¥\u0026quot;); } }else { try { zos.putNextEntry(new ZipEntry(base)); FileInputStream fis = new FileInputStream(fileinput); System.out.println(\u0026quot;ä½ æ­£åœ¨å¼€å§‹åŠ å¯†å‹ç¼©\u0026quot;+fileinput+\u0026quot;æ–‡ä»¶\u0026quot;); //åŠ å¯†è¿‡ç¨‹çš„å¼€å§‹ PBEKeySpec keySpec = new PBEKeySpec(pwd.toCharArray()); SecretKeyFactory keyFactory = null; try { keyFactory = SecretKeyFactory.getInstance(ALGORITHM); } catch (NoSuchAlgorithmException e) { // TODO Auto-generated catch block e.printStackTrace(); } SecretKey passwordKey = keyFactory.generateSecret(keySpec); //ç”Ÿæˆä¸€ä¸ªç‚¸å¼¹ è¿›è¡ŒåŠ å¯† byte[] bomb = new byte[8]; Random rnd = new Random(); rnd.nextBytes(bomb); int iterations = 100; PBEParameterSpec parameterSpec = new PBEParameterSpec(bomb, iterations); Cipher cipher = null; try { cipher = Cipher.getInstance(ALGORITHM); } catch (NoSuchAlgorithmException | NoSuchPaddingException e) { // TODO Auto-generated catch block e.printStackTrace(); } cipher.init(Cipher.ENCRYPT_MODE, passwordKey,parameterSpec); //å¾€è¾“å‡ºæµ æ·»åŠ ç‚¸å¼¹ zos.write(bomb); //æ·»åŠ åŠ å¯†çš„ä¸»æ–‡ä»¶å†…å®¹ 1KBç¼“å­˜åŒº //byte[] inputBuffer = new byte[1024]; //int bytesRead = 0; //å¦‚æœæ²¡æœ‰è¯»åˆ°ä¿¡æ¯åˆ™ä¸º-1 //æ”¹ç”¨ readBytes bufåœ¨ç±»å¤´å®šä¹‰çš„ç§æœ‰å˜é‡ï¼Œè¿›è¡Œç»Ÿä¸€çš„bufferç¼“å­˜åŒºå¤§å°çš„æ§åˆ¶ while((this.readBytes = fis.read(this.buf))!= -1) { //æ¯ä¸ªç¼“å†²åŒº è¿›è¡ŒåŠ å¯†å†™å…¥ byte[] output = cipher.update(this.buf); if(output != null) { zos.write(output); } } //åŠ å¯†ç»“æŸè¯­-------------åŠ å¯†ç»“æŸ byte[] outputFinal =null; try { outputFinal = cipher.doFinal(); } catch (IllegalBlockSizeException | BadPaddingException e) { // TODO Auto-generated catch block e.printStackTrace(); } if(outputFinal != null) { zos.write(outputFinal); } }catch(InvalidKeySpecException | InvalidKeyException | InvalidAlgorithmParameterException | IOException e) { System.out.println(\u0026quot;åŠ å¯†å¤±è´¥\u0026quot;); } } } /** * è§£å‹ç¼© zipæ–‡ä»¶ï¼Œåªèƒ½é™åˆ¶ä¸ºzip ,raræ— æ³•è¿›è¡Œï¼Œåˆ©ç”¨å¦‚é¹ç‰ˆçš„ * @param zipName å¾…è§£å‹çš„zipæ–‡ä»¶ * @param outputfolder è§£å‹zipæ–‡ä»¶åˆ°outputFoleræ–‡ä»¶å¤¹ä¸‹ */ public void unzip(String zipName,String outputfolder) { File gtkDir = new File(outputfolder);// *.dllæ”¾çš„æ–‡ä»¶å¤¹ //æŒ‡å®šçš„ç›®å½•ä¸å­˜åœ¨ åˆ™åˆ›å»ºä¹‹ if (!gtkDir.exists()) { gtkDir.mkdirs(); } InputStream inStream = null; try { //ä¸ç”¨è¾“å…¥.zipåç¼€ï¼Œåªéœ€è¦è¾“å…¥æ–‡ä»¶å inStream = new FileInputStream(zipName+\u0026quot;.zip\u0026quot;); } catch (FileNotFoundException e1) { // TODO Auto-generated catch block e1.printStackTrace(); } //InputStream inStream = Utils.class.getResourceAsStream(\u0026quot;/gtkshare.zip\u0026quot;); if (inStream == null) { throw new UnsatisfiedLinkError(\u0026quot;æ²¡æ‰¾åˆ°\u0026quot;+zipName); } try { unzip(inStream, gtkDir.toString()); //System.out.println(gtkDir.toString()); System.out.println(\u0026quot;æˆåŠŸè§£å‹ç¼©\u0026quot;+zipName+\u0026quot;.zip\u0026quot;+\u0026quot;æ–‡ä»¶ åˆ°\u0026quot;+outputfolder+\u0026quot;æ–‡ä»¶å¤¹ä¸‹\u0026quot;); } catch (IOException e) { System.err.println(\u0026quot;è§£å‹ç¼©\u0026quot;+zipName+\u0026quot;.zipå¤±è´¥\u0026quot; + toFullString(e)); } } /** * æŠŠstreamToZipè¿™ä¸ªzipæ–‡ä»¶æµè§£å‹åˆ°ç¡¬ç›˜çš„destDiræ–‡ä»¶å¤¹ï¼Œæ”¯æŒå¤šçº§ç›®å½• * @param streamToZip * @param destDir * @throws IOException */ public void unzip(InputStream streamToZip,String destDir)throws IOException { ZipInputStream zipStream = new ZipInputStream(streamToZip); try { ZipEntry zipEntry = null; //é€šè¿‡zipEntryæ–¹å¼æ”¯æŒå¤šçº§ç›®å½• while((zipEntry=zipStream.getNextEntry())!=null) { if(zipEntry.isDirectory()) { System.out.println(\u0026quot;ä½ æ­£åœ¨åˆ›å»ºæ–‡ä»¶å¤¹æ–‡ä»¶ æ¯”è¾ƒç‰¹æ®Š\u0026quot;); File dir = new File(destDir,zipEntry.getName()); //å¦‚æœæŒ‡å®šçš„ç›®å½•ä¸å­˜åœ¨ åˆ™åˆ›å»ºä¹‹ if(!dir.exists()) { dir.mkdirs(); } } else { FileOutputStream fileOutStream = new FileOutputStream(new File(destDir,zipEntry.getName())); try { copy(zipStream, fileOutStream); } finally { close(fileOutStream); } System.out.println(\u0026quot;ä½ æ­£åœ¨è§£å‹ç¼©å‹ç¼©\u0026quot;+zipEntry.getName()); } } } finally { close(zipStream); } } /** * ä»zipæ–‡ä»¶åŒ…ä¸­æ‹·è´æ–‡ä»¶ ï¼ŒæŒ‰ç…§0.5MBçš„ç¼“å†²å†™å…¥æ–‡ä»¶(é»˜è®¤æ–¹å¼ï¼‰ * @param inStream zipEntryçš„æŸä¸ªæ–‡ä»¶ * @param outStream è¾“å‡ºçš„æŸä¸ªæ–‡ä»¶æµ * @throws IOException */ public void copy(InputStream inStream, OutputStream outStream) throws IOException { //byte[] buffer = new byte[512 * 1024];// 0.5MB çš„ç¼“å†²åŒº //int len; while ((this.readBytes = inStream.read(this.buf)) \u0026gt;= 0) { outStream.write(this.buf, 0, this.readBytes); } } /** * æ‘˜è‡ªrupeng.gtk4j ä¸æ˜ç™½å…·ä½“çš„ä½œç”¨ éä¸»è¦é—®é¢˜ * @param throwable * @return */ public String toFullString(Throwable throwable) { StringWriter sw = null; PrintWriter pw = null; try { sw = new StringWriter(); pw = new PrintWriter(sw); throwable.printStackTrace(pw); return sw.toString(); } finally { close(sw); close(pw); } } /** * è®©æ–‡ä»¶æµå®‰é™çš„å…³é—­ * @param closeable å…³é—­æ¥å£ */ public void close(Closeable closeable) { if (closeable != null) { try { closeable.close(); } catch (IOException e) { } } } // åŠ å¯†è§£å‹ç¼© /** * åŠŸèƒ½æè¿°ï¼šå°†å‹ç¼©æ–‡ä»¶è§£å‹åˆ°æŒ‡å®šçš„æ–‡ä»¶ç›®å½•ä¸‹ * @param zipFileName å‹ç¼©æ–‡ä»¶åç§°(å¸¦è·¯å¾„) * @param outputDirectory æŒ‡å®šè§£å‹ç›®å½• * @return * @throws Exception */ public void unzipCrypto(String zipFileName, String outputDirectory, String pwd) { ZipInputStream inputStream; File outputDir; try { //ä¸ç”¨è¾“å…¥.zipåç¼€ï¼Œåªéœ€è¦è¾“å…¥æ–‡ä»¶å inputStream = new ZipInputStream(new FileInputStream(zipFileName+\u0026quot;.zip\u0026quot;)); outputDir = new File(outputDirectory); unzipCrypto(inputStream, outputDir, pwd); } catch (Exception e) { // TODO Auto-generated catch block e.printStackTrace(); } System.out.println(\u0026quot;æˆåŠŸè§£å‹ç¼©\u0026quot;+zipFileName+\u0026quot;.zip\u0026quot;+\u0026quot;æ–‡ä»¶ åˆ°\u0026quot;+outputDirectory+\u0026quot;æ–‡ä»¶å¤¹ä¸‹\u0026quot;); } public void unzipCrypto(ZipInputStream inputStream, File outputDir, String pwd) throws Exception { ZipEntry zipEntry = null; FileOutputStream outputStream = null; try{ while ((zipEntry = inputStream.getNextEntry()) != null) { //å¦‚æœæ˜¯æ–‡ä»¶å¤¹ åˆ™éå† if (zipEntry.isDirectory()) { System.out.println(\u0026quot;ä½ æ­£åœ¨è¿›å…¥\u0026quot;+zipEntry.getName()+\u0026quot;æ–‡ä»¶å¤¹\u0026quot;); String name = zipEntry.getName(); name = name.substring(0, name.length() - 1); File file = new File(outputDir + File.separator + name); file.mkdir(); } //å¯¹å•ä¸ªæ™®é€šæ–‡ä»¶è¿›è¡Œå¤„ç† else { File file = new File(outputDir + File.separator + zipEntry.getName()); file.createNewFile(); outputStream = new FileOutputStream(file); System.out.println(\u0026quot;ä½ æ­£åœ¨è§£å‹ç¼©\u0026quot;+file.getName()+\u0026quot;æ–‡ä»¶\u0026quot;); //è§£å‹åŠ å¯†è¿‡ç¨‹çš„å¼€å§‹ PBEKeySpec keySpec = new PBEKeySpec(pwd.toCharArray()); SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(ALGORITHM); SecretKey passwordKey = keyFactory.generateSecret(keySpec); //å‡†å¤‡æ’é™¤åŠ å¯†çš„ç‚¸å¼¹å¤´ byte[] apple = new byte[8]; //åœ¨zipè¾“å…¥æµæ·»åŠ read inputStream.read(apple); int iterations = 100; PBEParameterSpec parameterSpec = new PBEParameterSpec(apple, iterations); Cipher cipher = Cipher.getInstance(ALGORITHM); cipher.init(Cipher.DECRYPT_MODE, passwordKey, parameterSpec); //byte[] input = new byte[1024]; //int bytesRead; //åˆ©ç”¨å…¨å±€çš„ç§æœ‰å˜é‡this.buf this.readBytes ,å·²åœ¨ç±»å¼€å¤´å®šä¹‰ï¼Œç»Ÿä¸€æ§åˆ¶ while ((this.readBytes = inputStream.read(this.buf)) != -1) { byte[] output = cipher.update(this.buf, 0, this.readBytes); if (output != null) { outputStream.write(output); } } byte[] output = cipher.doFinal(); if (output != null) { outputStream.write(output); } } } } catch(IOException ex) { throw new Exception(\u0026quot;è§£å‹è¯»å–æ–‡ä»¶å¤±è´¥\u0026quot;); } catch(Exception ex) { throw new Exception(\u0026quot;è§£å‹æ–‡ä»¶å¯†ç ä¸æ­£ç¡®\u0026quot;); } } } /* * é™„å½•antç‰ˆæœ¬çš„å‹ç¼©å®ç°http://szhnet.iteye.com/blog/199059 * å¯ä»¥åŠ å…¥æŸäº›æ–‡ä»¶å’Œåˆ é™¤æŸäº›æ–‡ä»¶ * package net.szh.zip; import java.io.File; import org.apache.tools.ant.Project; import org.apache.tools.ant.taskdefs.Zip; import org.apache.tools.ant.types.FileSet; public class ZipCompressorByAnt { private File zipFile; public ZipCompressorByAnt(String pathName) { zipFile = new File(pathName); } public void compress(String srcPathName) { File srcdir = new File(srcPathName); if (!srcdir.exists()) throw new RuntimeException(srcPathName + \u0026quot;ä¸å­˜åœ¨ï¼\u0026quot;); Project prj = new Project(); Zip zip = new Zip(); zip.setProject(prj); zip.setDestFile(zipFile); FileSet fileSet = new FileSet(); fileSet.setProject(prj); fileSet.setDir(srcdir); //fileSet.setIncludes(\u0026quot;**//*.java\u0026quot;); åŒ…æ‹¬å“ªäº›æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ eg:zip.setIncludes(\u0026quot;*.java\u0026quot;); //fileSet.setExcludes(...); æ’é™¤å“ªäº›æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ zip.addFileset(fileSet); zip.execute(); } } antç‰ˆæœ¬çš„ä½¿ç”¨ï¼š package net.szh.zip; public class TestZip { public static void main(String[] args) { ZipCompressorByAnt zca = new ZipCompressorByAnt(\u0026quot;E:\\\\szhzipant.zip\u0026quot;); zca.compress(\u0026quot;E:\\\\test\u0026quot;); } } * */ ","date":1431327527,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327527,"objectID":"6a2b7831c1f1d39f79bd5d99e610a9b4","permalink":"/blog/2015/05/11/ya-suo-wen-jian-ioliu-de-shi-yong-he-jian-dan-feng-zhuang-0213/","publishdate":"2015-05-11T14:58:47+08:00","relpermalink":"/blog/2015/05/11/ya-suo-wen-jian-ioliu-de-shi-yong-he-jian-dan-feng-zhuang-0213/","section":"archives","summary":"","tags":null,"title":"å‹ç¼©æ–‡ä»¶IOæµçš„ä½¿ç”¨å’Œç®€å•å°è£…ï¼ˆ0213ï¼‰","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"2ï¼šåå°„æœºåˆ¶ ä¸è¡Œï¼Œåˆ™é€†ç€æ¥. ç±»ï¼ˆClassï¼‰ ä¸‰ç§æ–¹å¼\n//Test class //************************************************************* //ç¬¬ä¸€ç§æ–¹å¼è·å¾—ç±» System.out.println(\u0026quot;//*************************************************************\u0026quot;); Class clazz1 = Person.class; //ç¬¬äºŒç§æ–¹å¼è·å¾—ç±» System.out.println(\u0026quot;ç¬¬ä¸€ç§æ–¹å¼è·å¾—ç±»\u0026quot;+clazz1.getName()); Person personClass = new Person(); Class clazz2 = personClass.getClass(); System.out.println(\u0026quot;ç¬¬äºŒç§æ–¹å¼è·å¾—ç±»\u0026quot;+clazz1.getName()); //ç¬¬ä¸‰ç§æ–¹å¼è·å¾—ç±» try { Class clazz3 = Class.forName(\u0026quot;com.reflect.test.Person\u0026quot;); System.out.println(\u0026quot;ç¬¬ä¸‰ç§æ–¹å¼è·å¾—ç±»\u0026quot;+clazz1.getName()); System.out.println(\u0026quot;ä¸‰ç§ç±»æ–¹å¼éƒ½æ˜¯åŒä¸€ä¸ªç±»ï¼å› ä¸ºç±»åªåŠ è½½ä¸€æ¬¡\u0026quot;+(clazz2==clazz1)+(clazz2==clazz3)); System.out.println(\u0026quot;åŒ…çš„åå­—\u0026quot;+clazz3.getPackage().getName()); System.out.println(\u0026quot;ç®€å•ç±»åå­—ï¼ˆä¸å¸¦åŒ…ï¼‰\u0026quot;+clazz3.getSimpleName()); System.out .println(\u0026quot;------------------------------é€šè¿‡Classå¯¹è±¡è·å¾—ç±»çš„æ„é€ å‡½æ•°---------------------\u0026quot;); Constructor[] constructors = clazz3.getConstructors(); for (Constructor constructor : constructors) { System.out.println(constructor); } System.out.println(\u0026quot;------------------é€šè¿‡Classå¯¹è±¡è·å¾—ç±»çš„å­—æ®µ----------------\u0026quot;); Field[] fields = clazz3.getDeclaredFields(); for (Field field : fields) { System.out.println(field); } System.out.println(\u0026quot;--------é€šè¿‡Classå¯¹è±¡è·å¾—ç±»çš„æ–¹æ³•----------\u0026quot;); Method[] methods = clazz3.getMethods();// è¿”å›æ‰€æœ‰çš„public æ–¹æ³•,åŒ…æ‹¬çˆ¶ç±»å£°æ˜çš„publicæ–¹æ³• for (Method method : methods) { System.out.println(method); } } catch (ClassNotFoundException e1) { // TODO Auto-generated catch block e1.printStackTrace(); }  java æœ€ä¸»è¦çš„æ˜¯Class.forName();\nå­—æ®µ\nè®¾ç½®å­—æ®µçš„å±æ€§ï¼Œå¹¶ä½¿ç”¨åˆ›å»ºçš„å¯¹è±¡è°ƒç”¨æ–¹æ³•.\n//************************************************************* //TestField æµ‹è¯•å­—æ®µå¼€å§‹ //************************************************************* System.out.println(\u0026quot;//*************************************************************\u0026quot;); try { /** * æ‰“å°å‡ºæ‰€æœ‰å­—æ®µ * * å­—æ®µç±»çš„ä¸€ä¸ªç‰¹ç‚¹è®¾ç½® */ Field[] fields = clazz.getDeclaredFields(); for(Field temp : fields) { System.out.println(temp); } Person personLiMing = (Person) clazz.newInstance(); /** * æµ‹è¯•æ·»åŠ ä¸€ä¸ªåå­—çš„å­—æ®µ */ //Field nameField = clazz.getField(\u0026quot;Name\u0026quot;); //ä¼šæŠ¥å¼‚å¸¸ //Field nameField = clazz.getDeclaredField(\u0026quot;name\u0026quot;); //æ³¨æ„åŒºåˆ†å¤§å°å†™ Field nameField = clazz.getDeclaredField(\u0026quot;Name\u0026quot;); //ä¸€å®šå¾—è®¾ç½®ï¼Ÿ nameField.setAccessible(true); nameField.set(personLiMing,\u0026quot;ææ˜\u0026quot;); Object o = nameField.get(personLiMing); System.out.println(o); personLiMing.sayHi(); } catch (InstantiationException | IllegalAccessException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;åˆ›å»ºæ–°çš„å®ä¾‹å¼‚å¸¸\u0026quot;); }catch( NoSuchFieldException | SecurityException e) { System.out.println(\u0026quot;æ²¡æœ‰é‚£ä¸ªå­—æ®µ\u0026quot;); }  java\næ„é€ å‡½æ•°\nä¸»è¦ä½œç”¨ï¼šäº§ç”Ÿå¯¹è±¡\n/** * åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†æµ‹è¯•æ„é€ å‡½æ•° * 1ï¼š æœ‰å‚çš„ ï¼Œæ³¨æ„æœ‰å‚çš„æ—¶å€™String.class int.class * 2ï¼š æ— å‚çš„ */ //TestConstructor /** * æ‰“å°æ‰€æœ‰çš„ç±»çš„æ„é€ å‡½æ•° */ try { Constructor con1 = clazzConstructor.getDeclaredConstructor(); Object o = con1.newInstance(); Person personWanghao = (Person)o; personWanghao.sayHi(); System.out.println(\u0026quot;------------------------\u0026quot;); Constructor\u0026lt;Person\u0026gt; con2 = clazzConstructor.getDeclaredConstructor(String.class,int.class); Object o2 = con2.newInstance(\u0026quot;æ±ªå³°\u0026quot;,22); //å¾ˆæµ…æ˜¾çš„é“ç† åªæœ‰æ„é€ å‡½æ•°å¯ä»¥æ–°å»ºå¯¹è±¡ï¼ï¼ä¸Šé¢çš„ä»£ç æ­£æ˜¯ //ä½“ç°å¦‚æ­¤ï¼ Person personWangfeng = (Person)o2; personWangfeng.sayHi(); } catch (NoSuchMethodException | SecurityException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;è·å–æ„é€ å‡½æ•°å¼‚å¸¸\u0026quot;); }catch (InstantiationException | IllegalAccessException | IllegalArgumentException | InvocationTargetException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºå®ä¾‹å¼‚å¸¸\u0026quot;); }  java\næ–¹æ³•\nInvokeå‡½æ•°ï¼Œè°ƒç”¨å¯¹è±¡çš„æ–¹æ³•\n//************************************************************* //TestMethod /** * å¼€å§‹æµ‹è¯• æ‰€æœ‰Personç±»çš„æ™®é€šæ–¹æ³• * * æ–¹æ³•ç±»çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œæ–¹æ³•å¯¹åº”å…·ä½“çš„å‚æ•°ï¼ç±»ä¼¼äºæ„é€ å‡½æ•° * éƒ½éœ€è¦è€ƒè™‘é‡è½½çš„é—®é¢˜ */ System.out.println(\u0026quot;//*************************************************************\u0026quot;); System.out.println(\u0026quot;å¼€å§‹æµ‹è¯• æ‰€æœ‰Personç±»çš„æ™®é€šæ–¹æ³•---------\u0026quot;); Method[] methods = clazzMethod.getDeclaredMethods(); for(Method temp: methods) { System.out.println(temp); } //æµ‹è¯•Personçš„sayHiæ–¹æ³• try { Method sayHi = clazzMethod.getDeclaredMethod(\u0026quot;sayHi\u0026quot;); //Method singSong = clazz.getDeclaredMethod(\u0026quot;singSong\u0026quot;); Object o = clazzMethod.newInstance(); Person personPig = (Person)o; personPig.sayHi(); System.out.println(\u0026quot;é€šè¿‡æ™®é€šæ–¹æ³•1 è¿›è¡ŒInvoke1ï¼ï¼ï¼\u0026quot;); sayHi.invoke(o); System.out.println(\u0026quot;é€šè¿‡æ™®é€šæ–¹æ³•1 è¿›è¡ŒInvoke2ï¼ï¼ï¼\u0026quot;); //åå°„çš„æ„Ÿè§‰æœ‰ç‚¹åƒï¼Œé€†ç€æ¥çš„æ„Ÿè§‰ //é€šè¿‡æ–¹æ³•è°ƒç”¨å¯¹è±¡ï¼ï¼å¹¶æ‰§è¡ŒæŸä¸ªåŠ¨ä½œï¼ //è€Œä¸æ˜¯é€šè¿‡å¯¹è±¡è°ƒç”¨æ–¹æ³•æ‰§è¡ŒæŸä¸ªåŠ¨ä½œ sayHi.invoke(personPig); Class returnType = sayHi.getReturnType(); System.out.println(\u0026quot;Personç±» sayHiçš„è¿”å›å€¼ç±»å‹\u0026quot;+returnType); int modifies = sayHi.getModifiers(); //private çš„å€¼ä¸º0 publicçš„å€¼ä¸º1 System.out.println(\u0026quot;æ˜¯private?:\u0026quot;+Modifier.isPrivate(modifies)); System.out.println(modifies); /** * å¿…é¡»éšè— ï¼å¦åˆ™ä¸‹é¢çš„æ— æ³•æ‰§è¡Œï¼ æœ‰å¯¹åº”çš„å‚æ•° éœ€è¦è®¾ç½®ä¸Š å‚æ•°æ‰å¯ä»¥ * å¦åˆ™æ‰¾ä¸åˆ° singSong() æ— å‚çš„å‡½æ•° */ /* Method singSong = clazzMethod.getDeclaredMethod(\u0026quot;singSong\u0026quot;); System.out.println(singSong);*/ Method singSong2 = clazzMethod.getDeclaredMethod(\u0026quot;singSong\u0026quot;, String.class); Person personDandan = new Person(\u0026quot;æ·¡æ·¡\u0026quot;,22); singSong2.invoke(personDandan, \u0026quot;å¥½æ±‰æ­Œ\u0026quot;); System.out.println(singSong2.getReturnType()); //System.out.println(\u0026quot;Personç±»singSongçš„è¿”å›å€¼ç±»å‹\u0026quot;+clazz.getDeclaredMethod(\u0026quot;singSong\u0026quot;).getReturnType()); } catch (NoSuchMethodException | SecurityException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;æ²¡æœ‰å¯¹åº”çš„æ–¹æ³•\u0026quot;+e.getMessage()); }catch (InstantiationException | IllegalAccessException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;è·å–å®ä¾‹å¼‚å¸¸\u0026quot;+e.getMessage()); }catch (IllegalArgumentException | InvocationTargetException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;Invokeå¼‚å¸¸\u0026quot;+e.getMessage()); }  ä¸€ä¸ªé¤å…çš„èœå•å®ä¾‹ï¼š\né€šè¿‡ä¸€ä¸ªfoodæ¥å£ï¼Œåˆ›å»ºå¤šæ ·èœå•ï¼Œå¹¶ä¸”æ˜“äºæ‹“å±•æ€§ã€‚\nFood.properties: Apple=com.reflect.test.food.Apple Banana=com.reflect.test.food.Banana HongShaoRou=com.reflect.test.food.HongShaoRou QingJiaoRouSi=com.reflect.test.food.QingJiaoRouSi SuanTaiChaoRou=com.reflect.test.food.SuanTaiChaoRou TangCuLiYu=com.reflect.test.food.TangCuLiYu XiaoChaoRou=com.reflect.test.food.XiaoChaoRou  Foodæ¥å£ï¼š\npackage com.reflect.test.food; public interface Food { String getFoodName(); }  ä¾æ¬¡åˆ›å»ºå„ä¸ªé£Ÿç‰©ï¼šï¼ˆç±»ä¼¼æ–¹æ³•ï¼‰ çº¢çƒ§è‚‰ï¼š\npackage com.reflect.test.food; public class HongShaoRou implements Food { public static final String foodName = \u0026quot;çº¢çƒ§è‚‰\u0026quot;; @Override public String getFoodName() { return foodName; } }  é’æ¤’è‚‰ä¸ï¼š\npackage com.reflect.test.food; public class QingJiaoRouSi implements Food { public static final String foodName = \u0026quot;é’æ¤’è‚‰ä¸\u0026quot;; @Override public String getFoodName() { return foodName; } }  ã€‚ã€‚ã€‚ã€‚ é¤å…ç±»çš„å®ç°ï¼š\n/** * æƒ…æ™¯ : æœ‰ä¸€å®¶é¤å…,æ—¶å¸¸æ›´æ¢èœå“ , å®¢äººè¿›åº—æ—¶å‘å®¢äººå±•ç¤ºæ‰€æœ‰çš„èœå“, * è¦æ±‚å¼€å‘ä¸€ä¸ªæ‰©å……æ€§å¥½çš„ç¨‹åº,å°±æ˜¯æ›´æ¢èœå“æ—¶åªéœ€è¦åšä¸€äº›ç®€å•çš„é…ç½®å°±å¯ä»¥ * * åå°„åŸºæœ¬ä¸Š è‡ªå·±è‡ªå­¦ çœ‹çš„ è§†é¢‘æ²¡æ€ä¹ˆå¬ */ package com.reflect.test; import java.util.ArrayList; /** * é€šè¿‡ä¸‹é¢çš„é¤å…ç±» å¾ˆæ–¹ä¾¿çš„é€šè¿‡Foodæ¥å£ * æ·»åŠ æ›´å¤šçš„æ–°èœï¼ åªè¦ä½ æœ‰æ–°å®šä¹‰ä¸€ä¸ª é£Ÿç‰©.java ç„¶ååœ¨ * food.propertiesæ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹å³å¯ */ /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ3æ—¥ä¸‹åˆ4:44:15 * @version com.reflect.testRestaurant V1.0 */ import com.reflect.test.food.*; import java.util.*; import java.io.FileInputStream; import java.io.IOException; import java.io.InputStream; public class Restaurant { /** * @param args */ //æ²¡æœ‰æƒ³åˆ°ç”¨listè¡¨æ¥æ¥æ•°æ®ï¼ˆä¸€å®šè¦æœ‰é›†åˆçš„æ¦‚å¿µï¼‰ private List\u0026lt;Food\u0026gt; foods = new ArrayList\u0026lt;Food\u0026gt;(); //å®šä¹‰ä¸€ä¸ªinitå‡½æ•° ç”¨äºåœ¨æ„é€ å‡½æ•°å†…éƒ¨ è°ƒç”¨ï¼Œå¹¶åˆå§‹åŒ–èœå•ï¼å‡†å¤‡å¼€å¼  å¼€åº—é“º public Restaurant() { } public void init() { try { InputStream is = Restaurant.class.getResourceAsStream(\u0026quot;food.properties\u0026quot;); Properties prop = new Properties(); /** * è¦çŸ¥é“ food.properties çš„key-valueçš„å†™æ³• * Propå¯¹è±¡å°±æ˜¯ä¸€ä¸ªmapå¯¹è±¡ * å…ˆå‰åªå†™ä¸Šä¸€ä¸ªå€¼æ˜¯é”™è¯¯çš„ï¼ å¿…é¡»å†™ä¸Š * Apple=com.reflect.test.food.Apple */ //å¿…é¡»åŠ åœ¨srcåº•ä¸‹ //prop.load(new FileInputStream(\u0026quot;food.properties\u0026quot;)); try { prop.load(is); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } Collection coll1 = prop.values(); for(Object foodClassName:coll1) { Class temp; temp = Class.forName((String)(foodClassName)); Food food = (Food)temp.newInstance(); foods.add(food); } }catch (ClassNotFoundException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;æœªæ‰¾åˆ°å¯¹åº”çš„ç±»\u0026quot;); }catch (InstantiationException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;äº§ç”Ÿå®ä¾‹çš„å¼‚å¸¸\u0026quot;); } catch (IllegalAccessException e) { // TODO Auto-generated catch block e.printStackTrace(); } } public void showFoods() { for(Food temp:foods) { //Foodæ¥å£åˆ›å»ºçš„ä¸€ä¸ªå”¯ä¸€æ¥å£æ–¹æ³• System.out.println(temp.getFoodName()); } } public static void main(String[] args) { // TODO Auto-generated method stub //å¼€äº†ä¸€å®¶åº— Restaurant res = new Restaurant(); System.out.println(\u0026quot;æ¬¢é¥®å„ä½å®¾å®¢çš„åˆ°æ¥-- é­ç‚®å“èµ·\u0026quot;); System.out.println(\u0026quot;******************************\u0026quot;); res.showFoods(); } }  3ï¼šå†…çœ\nåœ¨æ»¡è¶³javaBeanè§„èŒƒçš„ç±»ä¸­ï¼Œåœ¨ä¸æ¸…æ¥šå­—æ®µçš„å‰æä¸‹ï¼Œé€šè¿‡getter \u0026amp;setterè·å¾—æ‰€æœ‰çš„å­—æ®µï¼Œä¸€èˆ¬å’Œåå°„è”åˆä½¿ç”¨ã€‚\nJavabean å…¶å®å°±æ˜¯æ»¡è¶³è§„èŒƒï¼Œå…·ä½“è§„èŒƒæ˜¯æœ‰\nç§æœ‰å˜é‡ Getter andsetteræ–¹æ³• è‡³å°‘æœ‰ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°\nç„¶åå¯ä»¥é€šè¿‡ ç±» Introspector æ¥è·å–æŸä¸ªå¯¹è±¡çš„ BeanInfo ä¿¡æ¯ï¼Œç„¶åé€šè¿‡ BeanInfo æ¥è·å–å±æ€§çš„æè¿°å™¨ï¼ˆ PropertyDescriptor ï¼‰ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§æè¿°å™¨å°±å¯ä»¥è·å–æŸä¸ªå±æ€§å¯¹åº”çš„ getter/setter æ–¹æ³•ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡åå°„æœºåˆ¶æ¥è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚javabeançš„å®ä¾‹å¯¹è±¡ç§°ä¹‹ä¸ºå€¼å¯¹è±¡ï¼ˆValueObjectï¼‰,å› ä¸ºè¿™äº›beanä¸­é€šå¸¸åªæœ‰ä¸€äº›ä¿¡æ¯å­—æ®µå’Œå­˜å‚¨æ–¹æ³•ï¼Œæ²¡æœ‰åŠŸèƒ½æ€§æ–¹æ³•ã€‚ åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œåªæ˜¯è®¾ç½®æˆ–è€…å¾—åˆ°æŸä¸ªå…·ä½“çš„å­—æ®µ\nä¸¤å¤–ä¸€ç§æ˜¯è·å¾—æ‰€æœ‰çš„å­—æ®µã€‚\n/** * */ package com.introspect.test; import java.beans.BeanInfo; import java.beans.IntrospectionException; import java.beans.Introspector; import java.beans.PropertyDescriptor; import java.lang.reflect.InvocationTargetException; import java.lang.reflect.Method; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ3æ—¥ä¸‹åˆ6:34:08 * @version com.introspect.testTestStudentIntrospect V1.0 */ public class TestStudentIntrospect { /** * @param args */ public static void main(String[] args) { // TODO Auto-generated method stub Student wangxiuyan = new Student();//new Student(\u0026quot;001\u0026quot;,\u0026quot;ç‹ç§€è‰³\u0026quot;,30); String fieldName=\u0026quot;Age\u0026quot;; //é€šè¿‡javabeans--\u0026gt;å…·ä½“æŸä¸ªå±æ€§---\u0026gt; é€šè¿‡åå°„è·å–æ–¹æ³•ï¼ --\u0026gt;å†è°ƒç”¨æ–¹æ³• getProperty(wangxiuyan, fieldName); setProperty(wangxiuyan, fieldName); getProperties(wangxiuyan, fieldName); } private static void getProperties(Student stu,String fieldName) { try { BeanInfo beanInfo = Introspector.getBeanInfo(stu.getClass()); PropertyDescriptor[] pro = beanInfo.getPropertyDescriptors(); for(PropertyDescriptor temp : pro) { if(temp.getName().equals(fieldName)) { Method methodx = temp.getReadMethod(); System.out.println(methodx.invoke(stu)); } } } catch (IntrospectionException e) { // TODO Auto-generated catch block e.printStackTrace(); }catch (IllegalAccessException | IllegalArgumentException | InvocationTargetException e) { // TODO Auto-generated catch block e.printStackTrace(); } } private static void getProperty(Student stu,String fieldName) { try { PropertyDescriptor pro = new PropertyDescriptor(fieldName, Student.class); Method methodx = pro.getReadMethod(); // Object ojx = methodx.invoke(stu); System.out.println(ojx); } catch (IntrospectionException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;å±æ€§æè¿°è·å–å¤±è´¥\u0026quot;); }catch(IllegalAccessException | IllegalArgumentException | InvocationTargetException e) { System.out.println(\u0026quot;invokeè°ƒç”¨å¤±è´¥ï¼\u0026quot;); } } private static void setProperty(Student stu,String fieldName) { try { PropertyDescriptor pro = new PropertyDescriptor(fieldName, Student.class); Method methodx = pro.getWriteMethod(); // methodx.invoke(stu,8); System.out.println(stu.getAge()); } catch (IntrospectionException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;å±æ€§æè¿°è·å–å¤±è´¥\u0026quot;); }catch(IllegalAccessException | IllegalArgumentException | InvocationTargetException e) { System.out.println(\u0026quot;invokeè°ƒç”¨å¤±è´¥ï¼\u0026quot;); } } }  ORMçš„å®ç°åœ¨ï¼šhttp://www.rupeng.com/forum/thread-44526-1-1.html\n4ï¼šæ­£åˆ™è¡¨è¾¾å¼\nå­—ç¬¦ä¸²å†…ç½®å‡½æ•°ï¼š\nStringçš„splitã€replaceã€replaceAllå‡½æ•°ã€‚\nåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­$è¡¨ç¤ºåœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­è·å–æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²åŒ¹é…çš„å°ç»„å·ï¼Œ$1è¡¨ç¤ºç¬¬ä¸€ä¸ªã€‚ã€‚\n \\1 è¡¨ç¤ºåœ¨åŒä¸€ä¸ªåŒ¹é…æ­£åˆ™è¡¨è¾¾å¼è·å¾—ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹(\\2åˆ™è¡¨ç¤ºåœ¨åŒä¸€ä¸ªåŒ¹é…æ­£åˆ™è¡¨è¾¾å¼è·å¾—ç¬¬äºŒä¸ªå¼•ç”¨çš„åŒ¹é…é¡¹)  //å­—ç¬¦ä¸²æµ‹è¯• System.out.println(\u0026quot;fdasfsd\u0026quot;.indexOf('d')); System.out.println(\u0026quot;fdasfsd\u0026quot;.lastIndexOf('d')); String[] temp =\u0026quot;sdfddfdsgsdfddg\u0026quot;.split(\u0026quot;([a-z])\\\\1+\u0026quot;); for(String p : temp) { System.out.println(p); } System.out.println(\u0026quot;sdfddfdsgsdfddg\u0026quot;.replaceAll(\u0026quot;([a-z])\\\\1+\u0026quot;,\u0026quot;*\u0026quot;)); System.out.println(\u0026quot;sdfddfdsgsdfddg\u0026quot;.replaceAll(\u0026quot;([a-z])\\\\1+\u0026quot;,\u0026quot;$1\u0026quot;));  Pattern\u0026amp;Matcherç»„åˆ\n//å·¥ä½œä¸­çš„ æ­£åˆ™è·å–æ–¹å¼ System.out.println(\u0026quot;2020\u0026quot;.matches(\u0026quot;\\\\d{3,10}\u0026quot;)); String pat = \u0026quot;Welcome to china to have a pinny lunch ! Start the lesson\u0026quot;; Pattern p = Pattern.compile(\u0026quot;\\\\b[a-z]{5}\\\\b\u0026quot;); Matcher m = p.matcher(pat); while(m.find()) { System.out.println(m.group()); }  å¸¸è§çš„å­˜å‚¨ç»“æ„ï¼š\n|\u0026mdash;\u0026ndash;é¡ºåºå­˜å‚¨ç»“æ„ ç‰¹ç‚¹æ˜¯å€ŸåŠ©äºæ•°æ®å…ƒç´ çš„ç›¸å¯¹å­˜å‚¨ä½ç½®æ¥è¡¨ç¤ºæ•°æ®å…ƒç´ ä¹‹é—´çš„é€»è¾‘ç»“æ„ï¼› |\u0026mdash;\u0026ndash;é“¾å¼å­˜å‚¨ç»“æ„ ç‰¹ç‚¹æ˜¯å€ŸåŠ©äºæŒ‡ç¤ºæ•°æ®å…ƒç´ åœ°å€çš„æŒ‡é’ˆè¡¨ç¤ºæ•°æ®å…ƒç´ ä¹‹é—´çš„é€»è¾‘ç»“æ„ã€‚ |\u0026mdash;\u0026ndash;æ•£åˆ—å­˜å‚¨ç»“æ„ é¡ºåº+ç®—åˆ—ã€‚ |\u0026mdash;\u0026ndash;ç´¢å¼•å­˜å‚¨ç»“æ„ é¡ºåº+ç´¢å¼•ã€‚\nå¸¸è§çš„é€»è¾‘ç»“æ„ï¼š å¯¹æ•°æ®åŠå…¶å…³ç³»çš„æŠ½è±¡é€»è¾‘æè¿°ï¼Œå¯¹ç«‹ä¸è®¡ç®—æœºï¼Œä¸æœºå™¨å®ç°æ— å…³ã€‚ æ ¹æ®å®šä¹‰çš„å…³ç³»ä¸åŒï¼Œæ•°æ®çš„é€»è¾‘ç»“æ„åˆ†ä¸ºå››ç§ï¼š |\u0026mdash;\u0026ndash;é›†åˆç»“æ„ã€‚æ•°æ®å…ƒç´ ä¹‹é—´æœªå®šä¹‰ä»»ä½•å…³çš„æ¾æ•£é›†åˆã€‚ |\u0026mdash;\u0026ndash;çº¿æ€§ç»“æ„ã€‚æ•°æ®å…ƒç´ ä¹‹é—´å®šä¹‰äº†æ¬¡åºå…³ç³»çš„é›†åˆï¼ˆå…¨åºé›†åˆï¼‰ï¼Œæè¿°çš„æ˜¯1å¯¹1å…³ç³»ã€‚ |\u0026mdash;\u0026ndash;æ ‘å½¢ç»“æ„ã€‚æ•°æ®å…ƒç´ ä¹‹é—´å®šä¹‰äº†å±‚æ¬¡å…³ç³»çš„é›†åˆï¼ˆååºé›†åˆï¼‰ï¼Œæè¿°çš„æ˜¯1å¯¹å¤šå…³ç³»ã€‚ |\u0026mdash;\u0026ndash;å›¾çŠ¶ç»“æ„ã€‚æ•°æ®å…ƒç´ ä¹‹é—´å®šä¹‰äº†ç½‘çŠ¶å…³ç³»çš„é›†åˆï¼Œæè¿°çš„æ˜¯å¤šå¯¹å¤šå…³ç³»ã€‚\næ•°æ®ç»“æ„ï¼Œå°±æ˜¯ç›¸äº’ä¹‹é—´å­˜åœ¨ä¸€ç§æˆ–å¤šç§ç‰¹å®šå…³ç³»çš„æ•°æ®å…ƒç´ çš„é›†åˆã€‚å¯ä»¥ç®€å•è¡¨ç¤ºä¸ºï¼šæ•°æ®ç»“æ„ = æ•°æ® + å…³ç³»ã€‚åŒä¸€æ•°æ®å…ƒç´ é›†åˆï¼Œæ‰€å®šä¸€çš„å…³ç³»ä¸åŒï¼Œæ„æˆä¸åŒçš„æ•°æ®ç»“æ„ã€‚ æ•°æ®ç»“æ„åŒ…æ‹¬é€»è¾‘ç»“æ„å’Œå­˜å‚¨ç»“æ„ä¸¤ä¸ªæ–¹é¢\n","date":1431327526,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327526,"objectID":"ff5db4a08cbeeadfcf8bb10afca467c4","permalink":"/blog/2015/05/11/fan-she-ji-zhi-nei-sheng-zheng-ze/","publishdate":"2015-05-11T14:58:46+08:00","relpermalink":"/blog/2015/05/11/fan-she-ji-zhi-nei-sheng-zheng-ze/","section":"archives","summary":"","tags":null,"title":"åå°„æœºåˆ¶å†…çœæ­£åˆ™","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"æœ‰æ—¶å€™ï¼Œå¯èƒ½éœ€è¦åšä¸€ä¸ªåŠ¨æ€çš„ä»£ç æ¼”ç¤ºçš„çª—å£ï¼Œå½“ç„¶ç”¨pptä¹Ÿå¯ä»¥åšï¼Œç”¨å…¶ä»–çš„ç›¸å…³è½¯ä»¶ä¹Ÿå¯ä»¥åšã€‚ç„¶è€Œè‡ªå·±å†™ä»£ç ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ç›¸ä¿¡å¤§å®¶åœ¨å¬æ¨è€å¸ˆè®²è§£treeviewçš„æ—¶å€™ï¼Œè€æ¨ç§€çš„ä»£ç åˆ†æå°ç¨‹åºï¼Œå‡­ç€å°è±¡ï¼Œè‡ªå·±ä¹Ÿç¢ç£¨ç€å†™äº†è¿™ä¸€ä¸ªç®€æ˜“çš„ä»£ç è¿è¡Œæ¨¡æ‹Ÿçª—å£ã€‚ä»£ç æ¶‰åŠåˆ°çš„ä¸»è¦æ˜¯treeviewå’Œtextviewä»¥åŠæŒ‰é’®äº‹ä»¶æ§åˆ¶ï¼Œå¦å¤–åŠ ä¸Šcairoçš„ç”»å›¾å¤„ç†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥åˆ©ç”¨GtkImageè½½å…¥å›¾ç‰‡ï¼ˆå¯èƒ½éœ€è¦éšè—æ§ä»¶ï¼Œè¾¾åˆ°ç®­å¤´ä¸‹ç§»çš„ç›®çš„ï¼‰ è¿™è¾¹çš„ç¼ºç‚¹æ˜¯ï¼Œæš‚æ—¶ä¸çŸ¥é“æ€ä¹ˆé”€æ¯æ‰Cairoä¹‹å‰ç»˜åˆ¶çš„å›¾å½¢ï¼Œå…¶ä»–è¿˜æœ‰å¾ˆå¤šç¼ºç‚¹.\nimport com.rupeng.gtk4j.Cairo; import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ3æ—¥ä¸Šåˆ10:24:23 * @version TestTeacher V1.0 ä¸€ä¸ªç®€æ˜“çš„ä»£ç è¿è¡Œæ¨¡æ‹Ÿçª—å£ï¼ŒæœªåŠ å…¥ä»£ç çš„é«˜äº®ï¼Œé‡‡ç”¨å›¾ç‰‡æ§åˆ¶ * ä¸»è¦é‡‡ç”¨textview treeview cairoä¸‰ä¸ªæŠ€æœ¯å…³é”®ç‚¹ */ public class TestTeacher { /** * @param args */ //éƒ¨åˆ†ç±»å˜é‡çš„å®šä¹‰ static int window; static int gridHouse; static int liststore; static int listiter; static int treeViewApple; static int imagePosition = 0; static int rowPosition = 0; //static int dan ; static int start = 0; static int circlePointx = 200; static int circlePointy = 45; static int circleRectangex = 200; static int circleRectangey = 0; static int EndCirclex = 0; static int EndCircley = 0; static String note = \u0026quot;æŒ‡é’ˆä¸‹ç§»\u0026quot;; static int labelResult; //static String loveWords; public static void main(String[] args) { // TODO Auto-generated method stub //GTKåˆå§‹åŒ– GTK.gtk_init(); //çª—å£å¯¹è±¡æ ‡è¯†çš„åˆ›å»º window= GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); //æ˜¾ç¤ºçª—å£ GTK.gtk_widget_show(window); //å®‰é™å…³é—­çª—å£ GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub GTK.gtk_main_quit(); } }, null); //è®¾ç½®ç½‘æ ¼å¸ƒå±€ gridHouse = GTK.gtk_grid_new(); GTK.gtk_widget_show(gridHouse); //æ·»åŠ ç½‘æ ¼å¸ƒå±€åˆ°windowä¸­ GTK.gtk_container_add(window, gridHouse); //å®šä¹‰ä¸€äº›å¸¸ç”¨çš„æ§ä»¶ //åˆ›å»ºä¸€ä¸ªtreeview ç”¨äºæ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ createSingleTreeView(gridHouse,start); //åˆ›å»ºä¸€ä¸ªç¬‘è„¸ createDrawLaughFace(window,gridHouse,start,circlePointx,circlePointy); start = 3; //åˆ›å»ºä¸€ä¸ªæ ‡ç­¾ createLabel(\u0026quot;æºä»£ç ------\u0026gt;\u0026quot;,gridHouse,start); start = 4; //åˆ›å»ºä¸€ä¸ªæºç çš„textviewçª—å£ï¼Œä¸å¯ç¼–è¾‘ createSingleTextView(window,gridHouse,start); createRectangleFace(window,gridHouse,3,circlePointx,circlePointy); start = 4; //åˆ›å»ºä¸€ä¸ªæŒ‰é’® int textViewOutput = GTK.gtk_text_view_new(); createNextButton(gridHouse,textViewOutput,start); start =3; //åˆ›å»ºä¸€ä¸ªæ ‡ç­¾ labelResult = GTK.gtk_label_new(\u0026quot;è¾“å‡ºç»“æœï¼š\u0026quot;); GTK.gtk_widget_show(labelResult); GTK.gtk_grid_attach(gridHouse, labelResult,7, start, 1, 1); start = 4; //åˆ›å»ºä¸€ä¸ªè¾“å‡ºç•Œé¢ï¼Œç”¨äºæ˜¾ç¤ºæºç è¾“å‡ºåœ°ç»“æœ createOutputTextView(window,gridHouse,start,textViewOutput); //å¯åŠ¨å¾ªç¯ GTK.gtk_main(); } /** * * @param labelName æ ‡ç­¾æ˜¾ç¤ºçš„å­—ç¬¦ä¸² * @param gridHouse ç½‘æ ¼å¯¹è±¡æ ‡è¯† * @param start æ ‡ç­¾åœ¨ç½‘æ ¼å¯¹è±¡æ ‡è¯†çš„èµ·å§‹ä½ç½® * @purpose åˆ›å»ºä¸€ä¸ªæ ‡ç­¾å¯¹è±¡è¡¨ç¤ºï¼Œå¹¶æ˜¾ç¤ºåœ¨çª—å£ä¸­ */ public static void createLabel(String labelName,int gridHouse,int start) { int labelTitle = GTK.gtk_label_new(labelName); GTK.gtk_widget_show(labelTitle); GTK.gtk_grid_attach(gridHouse, labelTitle, 0, start, 1, 1); } /** * * @param scrolledBar æ»šåŠ¨æ¡å¯¹è±¡æ ‡è¯† * @param textview textviewçš„å¯¹è±¡æ ‡è¯† * @param gridHouse ç½‘æ ¼å¯¹è±¡çš„å¯¹è±¡æ ‡è¯† * @param start textviewåœ¨ç½‘æ ¼å¯¹è±¡å¸ƒå±€çš„èµ·å§‹ä½ç½® * @purpose åˆ›å»ºtextViewçš„æ»šåŠ¨æ¡ */ public static void createTextviewScrollBar(int scrolledBar,int textview,int gridHouse,int start) { scrolledBar = GTK.gtk_scrolled_window_new(); GTK.gtk_widget_show(scrolledBar); GTK.gtk_grid_attach(gridHouse, scrolledBar, 0, start, 2, 2); GTK.gtk_widget_set_size_request(scrolledBar, 400, 400); GTK.gtk_container_add(scrolledBar,textview); } /** * * @param scrolledBar æ»šåŠ¨æ¡å¯¹è±¡æ ‡è¯† * @param textview textviewçš„å¯¹è±¡æ ‡è¯† * @param gridHouse ç½‘æ ¼å¯¹è±¡çš„å¯¹è±¡æ ‡è¯† * @param start textviewåœ¨ç½‘æ ¼å¯¹è±¡å¸ƒå±€çš„èµ·å§‹ä½ç½® * @purpose åˆ›å»ºå¸¦æ»šåŠ¨æ¡çš„treeviewå¯¹è±¡æ ‡è¯†,ç”¨äºè¾“å‡ºä¿¡æ¯ */ public static void createTreeviewScrollBar(int scrolledBar,int textview,int gridHouse,int start) { scrolledBar = GTK.gtk_scrolled_window_new(); GTK.gtk_widget_show(scrolledBar); GTK.gtk_grid_attach(gridHouse, scrolledBar, 0, start, 2, 3); GTK.gtk_widget_set_size_request(scrolledBar, 200, 200); GTK.gtk_container_add(scrolledBar,textview); } /** * * @param scrolledBar æ»šåŠ¨æ¡å¯¹è±¡æ ‡è¯† * @param textview textviewçš„å¯¹è±¡æ ‡è¯† * @param gridHouse ç½‘æ ¼å¯¹è±¡çš„å¯¹è±¡æ ‡è¯† * @param start textviewåœ¨ç½‘æ ¼å¯¹è±¡å¸ƒå±€çš„èµ·å§‹ä½ç½® * @purpose åˆ›å»ºå¸¦æ»šåŠ¨æ¡çš„treeviewå¯¹è±¡æ ‡è¯†ï¼Œç”¨äºæ˜¾ç¤ºä¿¡æ¯ */ public static void createTreeviewOutputScrollBar(int scrolledBar,int textview,int gridHouse,int start) { scrolledBar = GTK.gtk_scrolled_window_new(); GTK.gtk_widget_show(scrolledBar); GTK.gtk_grid_attach(gridHouse, scrolledBar,8, start, 2, 3); GTK.gtk_widget_set_size_request(scrolledBar, 200, 200); GTK.gtk_container_add(scrolledBar,textview); } /** * * @param window çª—å£å¯¹è±¡æ ‡è¯† * @param gridHouse ç½‘æ ¼å¸ƒå±€å¯¹è±¡æ ‡è¯† * @param start textviewå¯¹è±¡åœ¨ç½‘æ ¼å¸ƒå±€å¯¹è±¡ä¸­çš„èµ·å§‹ä½ç½® * @purpose åˆ›å»ºä¸€ä¸ªtextviewçš„æºä»£ç çª—å£å¯¹è±¡ */ public static void createSingleTextView(int window, int gridHouse, int start) { final int tvGirl = GTK.gtk_text_view_new(); GTK.gtk_text_view_set_wrap_mode(tvGirl, GTK.GTK_WRAP_WORD); int scrollBar = 0 ; //æ·»åŠ æ§ä»¶ GTK.gtk_text_view_set_editable(tvGirl, false); createTextviewScrollBar(scrollBar,tvGirl,gridHouse,start); //GTK.gtk_grid_attach(gridHouse, tvGirl, 0, start+1, 1, 1); //æ˜¾ç¤ºæ§ä»¶ GTK.gtk_widget_show(tvGirl); String loveWords = \u0026quot;if(!GTK.gtk_tree_model_get_iter_first(liststore.listiter))\u0026quot; + \u0026quot;\\n{\\n\\tSystem.out.println(\\\u0026quot;100å—é’±éƒ½ä¸ç»™ï¼ŒçœŸåï¼\\\u0026quot;);\\n}\\nelse\\n{\\n\\tdo\u0026quot; + \u0026quot;\\n\\t{\\n\\t\\tSystem.out.println(\\\u0026quot;æˆ‘åœ¨doå¾ªç¯é‡Œé¢\\\u0026quot;);\\n\\t}while(GTK.gtk_tree_model_iter_next(liststore, iter));\u0026quot; + \u0026quot;\\n}\\nGTK.gtk_text_iter_free(iter);\u0026quot;; //è¯»å–æ–‡æœ¬æ¡†é‡Œé¢çš„å†…å®¹ ï¼Œåªé€‚ç”¨å°é‡çš„æ–‡æœ¬ï¼Œä¸€èˆ¬ç”¨è¿­ä»£å™¨ //æ–¹æ³•1 å…ˆä»TextViewè·å–int TextBuffer // ç„¶åå†ä»TextBufferè·å–text final int textbuffer= GTK.gtk_text_view_get_buffer(tvGirl); //å¯ä»¥ç›´æ¥é€šè¿‡ç¼“å†²åŒºç¼–å· è®¾ç½®ä¿¡æ¯ GTK.gtk_text_buffer_set_text(textbuffer, loveWords); } /** * * @param window çª—å£å¯¹è±¡æ ‡è¯†ï¼ˆå¯çœç•¥ï¼‰ * @param gridHouse ç½‘æ ¼å¯¹è±¡æ ‡è¯† * @param start ç½‘æ ¼å¯¹è±¡çš„èµ·å§‹ä½ç½®æ ‡è¯† * @param tvGirl treeviewå¯¹è±¡æ ‡è¯† * @purpose åˆ›å»ºä¸€ä¸ªTextViewå¯¹è±¡æ ‡è¯†ï¼ŒåŠ å…¥æ»šåŠ¨æ¡ï¼Œå¹¶æ˜¾ç¤ºã€‚ */ public static void createOutputTextView(int window, int gridHouse, int start,int tvGirl) { //tvGirl = GTK.gtk_text_view_new(); GTK.gtk_text_view_set_wrap_mode(tvGirl, GTK.GTK_WRAP_WORD); int scrollBar = 0 ; //æ·»åŠ æ§ä»¶ GTK.gtk_text_view_set_editable(tvGirl, false); createTreeviewOutputScrollBar(scrollBar,tvGirl,gridHouse,start); //GTK.gtk_grid_attach(gridHouse, tvGirl, 0, start+1, 1, 1); //æ˜¾ç¤ºæ§ä»¶ GTK.gtk_widget_show(tvGirl); String loveWords = \u0026quot;\u0026quot;; //è¯»å–æ–‡æœ¬æ¡†é‡Œé¢çš„å†…å®¹ ï¼Œåªé€‚ç”¨å°é‡çš„æ–‡æœ¬ï¼Œä¸€èˆ¬ç”¨è¿­ä»£å™¨ //æ–¹æ³•1 å…ˆä»TextViewè·å–int TextBuffer // ç„¶åå†ä»TextBufferè·å–text final int textbuffer= GTK.gtk_text_view_get_buffer(tvGirl); //å¯ä»¥ç›´æ¥é€šè¿‡ç¼“å†²åŒºç¼–å· è®¾ç½®ä¿¡æ¯ GTK.gtk_text_buffer_set_text(textbuffer, loveWords); } /** * * @param gridHouse ç½‘æ ¼å¯¹è±¡æ ‡è¯† * @param start ç½‘æ ¼å¯¹è±¡çš„èµ·å§‹ä½ç½®æ ‡è¯† * @purpose åˆ›å»ºä¸€ä¸ªTreeViewå¯¹è±¡æ ‡è¯†ï¼Œå†™å…¥å­—æ®µï¼Œæ·»åŠ è®°å½•ï¼ŒåŠ å…¥æ»šåŠ¨æ¡ï¼Œå¹¶æ˜¾ç¤ºã€‚ */ public static void createSingleTreeView(int gridHouse,int start) { //3 treeview æ˜¯ä¸€ä¸ªç•Œé¢ï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªæ·˜å®å‰å°ï¼Œ V Vçš„ä½œç”¨ treeViewApple = GTK.gtk_tree_view_new(); //4 å»ºç«‹å­—æ®µ æ¯”è¾ƒè´¹åŠ² //4.1åˆ›å»ºå­—æ®µ int columnID = GTK.gtk_tree_view_column_new_with_attributes(\u0026quot;ID\u0026quot;, GTK.gtk_cell_renderer_text_new(), 0); //4.2æ·»åŠ å­—æ®µ GTK.gtk_tree_view_append_column(treeViewApple, columnID); //4.3åˆ›å»ºå­—æ®µ int columnName = GTK.gtk_tree_view_column_new_with_attributes(\u0026quot;Names\u0026quot;,GTK.gtk_cell_renderer_text_new(),1); //4.4æ·»åŠ å­—æ®µ GTK.gtk_tree_view_append_column(treeViewApple,columnName); //4.5åˆ›å»ºå­—æ®µ int columnAge = GTK.gtk_tree_view_column_new_with_attributes(\u0026quot;Ages\u0026quot;,GTK.gtk_cell_renderer_text_new(),2); GTK.gtk_tree_view_append_column(treeViewApple,columnAge); //åˆ›å»ºæ§ä»¶ //1 list_store æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„åº“ï¼Œç›¸å½“äºä¸€ä¸ªä»“åº“ M modelçš„ä½œç”¨ liststore = GTK.gtk_list_store_new(3); //3ä»£è¡¨ä¸‰ä¸ªå­—æ®µï¼šID Names Age // GTK.gtk_list_store_append(list_store, iter); //2 list_iter,list_iteræ˜¯ä¸€ä¸ªå†…éƒ¨çš„æ•°æ®è¿­ä»£çš„æ§åˆ¶è¿‡ç¨‹ï¼Œä¸éœ€è¦æ˜¾ç¤º Cçš„ä½œç”¨ï¼Œæ§åˆ¶ listiter = GTK.gtk_tree_iter_new(); //5 ç¬¬äº”æ­¥ æŠŠ iterå’ŒlistStoreè”ç³»èµ·æ¥ //GTK.gtk_text_buffer_get_end_iter ç±»ä¼¼äºtreeviewçš„bufferå’Œiterè”ç³»èµ·æ¥ // ä»¥åå°±å¯ä»¥é€šè¿‡GTK.gtk_text_buffer_inserté»˜è®¤æ˜¯ä¸€ä¸ªä¸€ä¸ªiterçš„æ‰§è¡Œã€‚ GTK.gtk_list_store_append(liststore, listiter); //æŒ‡é’ˆå¼€å§‹æŒ‡åˆ°ç¬¬ä¸€ä¸ªä½ç½® // 6 é€ä¸ªiteræ·»åŠ æ•°æ®åˆ°liststoreå½“ä¸­:æ¯ä¸ªiterçš„æ„æ€ï¼Œå°±æ˜¯é€è¡Œæˆ–è€…é€ä¸ªè®°å½•ã€‚ GTK.gtk_list_store_set_value(liststore, listiter, 0, \u0026quot;001\u0026quot;); GTK.gtk_list_store_set_value(liststore, listiter, 1, \u0026quot;YinMuHuaDao\u0026quot;); GTK.gtk_list_store_set_value(liststore, listiter, 2, \u0026quot;35\u0026quot;); GTK.gtk_list_store_append(liststore, listiter); //å¦‚æœä¸åŠ å…¥ï¼ŒæŒ‡é’ˆä¸ä¸‹ç§»ï¼Œåªä¼šè¦†ç›–æ‰å‰é¢çš„æ•°æ® GTK.gtk_list_store_set_value(liststore, listiter, 0, \u0026quot;002\u0026quot;); GTK.gtk_list_store_set_value(liststore, listiter, 1, \u0026quot;Taiyanghua\u0026quot;); GTK.gtk_list_store_set_value(liststore, listiter, 2, \u0026quot;29\u0026quot;); GTK.gtk_list_store_append(liststore, listiter); GTK.gtk_list_store_set_value(liststore, listiter, 0 ,\u0026quot;003\u0026quot;); GTK.gtk_list_store_set_value(liststore, listiter, 1 ,\u0026quot;Xiaojun\u0026quot;); GTK.gtk_list_store_set_value(liststore, listiter, 2 ,\u0026quot;10\u0026quot;); // ä¹‹æ‰€ä»¥æ·»åŠ 9æ¬¡æ˜¯å› ä¸º 3ä¸ªå­—æ®µ*3æ¡è®°å½• == 9 //7 ä½¿ç”¨å®Œiterä¹‹åä¸€å®šè¦è®°å¾— å…³æ‰å®ƒ GTK.gtk_tree_iter_free(listiter); //8 å…³é”®çš„ä¸€æ­¥ï¼ŒæŠŠæ•°å­—æ˜¾ç¤ºå‡ºæ¥ GTK.gtk_tree_view_set_model(treeViewApple, liststore); //å¹¶åŒæ—¶æŠŠå®ƒæ˜¾ç¤ºå‡ºæ¥ï¼Œå‰å°å¿…é¡»æ˜¾ç¤º GTK.gtk_widget_show(treeViewApple); //æ·»åŠ åˆ°æ»šåŠ¨æ¡ä¸­ int scrolledbar2 = 0; createTreeviewScrollBar(scrolledbar2,treeViewApple,gridHouse,start); //è®¾ç½®éƒ¨åˆ†å‚æ•° int column =GTK.gtk_tree_view_get_column(treeViewApple, 1); GTK.gtk_tree_view_column_set_sort_column_id(column, 1); GTK.gtk_tree_view_column_set_resizable(column, true); GTK.gtk_tree_view_column_set_reorderable(column, true); } /** * * @param window çª—å£çš„å¯¹è±¡æ ‡è¯† * @param gridHouse ç½‘æ ¼å¸ƒå±€çš„å¯¹è±¡æ ‡è¯† * @param start å¯¹è±¡æ‰€åœ¨çš„ç½‘æ ¼å¸ƒå±€èµ·å§‹ä½ç½® * @param circlePointx ç”»ç¬”çš„xè½´ä½ç½® * @param circlePointy ç”»ç¬”çš„yè½´ä½ç½® * @purpose ç»˜åˆ¶ä¸€ä¸ªç¬‘è„¸ */ public static void createDrawLaughFace(int window,int gridHouse,int start,final int circlePointx,final int circlePointy) { //åˆ›å»ºç”»å›¾æ¿ æˆ–è€…å«ç”»å¸ƒ int dan = GTK.gtk_drawing_area_new(); //åˆ›å»ºæº //æ·»åŠ æ§ä»¶ start = 0; GTK.gtk_grid_attach(gridHouse, dan, 1, start, 1, 1); //æ˜¾ç¤ºç”»å¸ƒ GTK.gtk_widget_show(dan); //è®¾ç½®ç”»å¸ƒçš„å¤§å° GTK.gtk_widget_set_size_request(dan, 300, 300); //å¼€å§‹ç»˜åˆ¶ åˆ©ç”¨äº‹ä»¶draw æ¥ä¸æ–­çš„ç»˜åˆ¶ GTK.g_signal_connect(dan, \u0026quot;draw\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //eventDateæ‰æ˜¯ç”»å¸ƒæº //è®¾ç½®ç”»ç¬”çš„é¢œè‰² //Cairo.cairo_destroy(eventData); Cairo.cairo_set_source_rgb(eventData, 1, 0, 0); //è®¾ç½®ç”»ç¬”çš„å¤§å° Cairo.cairo_set_line_width(eventData, 3); Cairo.cairo_move_to(eventData, circlePointx-20, circlePointy); Cairo.cairo_line_to(eventData, circlePointx-70, circlePointy); Cairo.cairo_line_to(eventData, circlePointx-60, circlePointy-5); Cairo.cairo_move_to(eventData, circlePointx-70, circlePointy); Cairo.cairo_line_to(eventData, circlePointx-60, circlePointy+5); Cairo.cairo_stroke(eventData); //ç”»ä¸€ä¸ªåœ† Cairo.cairo_arc(eventData, circlePointx, circlePointy, 10, 0, 2*3.1415926); //ç”»ä¸€ä¸ªåœ†å¼§ //Cairo.cairo_arc(eventData, 200, 200, 70,1.5*3.1415925, 2*3.1415926); //æ˜¾ç¤ºç”»ç¬” Cairo.cairo_stroke(eventData); //Cairo.cairo_fill(eventData)ä¸åŒçš„æ•ˆæœ //ç”»ä¸€ä¸ªåœ†å¼§ æœ‰ä¸‹é¢å®éªŒçŸ¥é“æ˜¯ä»xè½´æ²¿é¡ºæ—¶é’ˆå¼€å§‹ç”»å›¾ //å˜´å·´çš„ç»˜åˆ¶ double Pi = 3.1415926; Cairo.cairo_arc(eventData, circlePointx, circlePointy, 5, 0.25*Pi, 0.75*Pi); Cairo.cairo_fill(eventData); //ç»˜åˆ¶ä¸¤åªçœ¼ç› Cairo.cairo_arc(eventData, circlePointx-5, circlePointy-5, 3, 0, 2*Pi); Cairo.cairo_arc(eventData, circlePointx+5, circlePointy-5, 3, 0, 2*Pi); Cairo.cairo_fill(eventData); //ç”»æ–‡å­— Cairo.cairo_move_to(eventData, circlePointx+10, circlePointy+5); Cairo.cairo_set_source_rgb(eventData, 0.4, 0.3, 0.2); Cairo.cairo_set_font_size(eventData, 16); //é€‰æ‹©æ–‡å­—ç±»å‹ Cairo.cairo_select_font_face(eventData, \u0026quot;å®‹ä½“\u0026quot;, Cairo.CAIRO_FONT_SLANT_ITALIC, Cairo.CAIRO_FONT_WEIGHT_BOLD); Cairo.cairo_show_text(eventData,note); //Cairo.cairo_stroke(eventData); //ä¸éœ€è¦è¿™å¥è¯ä¹Ÿå¯ä»¥ } }, null); } /** * * @param window çª—å£çš„å¯¹è±¡æ ‡è¯† * @param gridHouse ç½‘æ ¼å¸ƒå±€çš„å¯¹è±¡æ ‡è¯† * @param start çŸ©å½¢å¯¹è±¡æ‰€åœ¨çš„ç½‘æ ¼å¸ƒå±€èµ·å§‹ä½ç½® * @param circlePointx ç”»ç¬”çš„xè½´ä½ç½® * @param circlePointy ç”»ç¬”çš„yè½´ä½ç½® * @purpose ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢å›¾åƒ */ public static void createRectangleFace(int window,int gridHouse,int start,final int circlePointx,final int circlePointy) { //åˆ›å»ºç”»å›¾æ¿ æˆ–è€…å«ç”»å¸ƒ int dan = GTK.gtk_drawing_area_new(); //åˆ›å»ºæº //æ·»åŠ æ§ä»¶ start = 4; GTK.gtk_grid_attach(gridHouse, dan, 0, start, 1, 1); //æ˜¾ç¤ºç”»å¸ƒ GTK.gtk_widget_show(dan); //è®¾ç½®ç”»å¸ƒçš„å¤§å° GTK.gtk_widget_set_size_request(dan, 300, 300); //å¼€å§‹ç»˜åˆ¶ åˆ©ç”¨äº‹ä»¶draw æ¥ä¸æ–­çš„ç»˜åˆ¶ GTK.g_signal_connect(dan, \u0026quot;draw\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //eventDateæ‰æ˜¯ç”»å¸ƒæº //è®¾ç½®ç”»ç¬”çš„é¢œè‰² //Cairo.cairo_destroy(eventData); Cairo.cairo_set_source_rgb(eventData, 0, 1, 0); //è®¾ç½®ç”»ç¬”çš„å¤§å° Cairo.cairo_set_line_width(eventData, 3); //Cairo.cairo_move_to(eventData, circlePointx-20, circlePointy); //ç”»ä¸€ä¸ªçŸ©å½¢ Cairo.cairo_rectangle(eventData, circleRectangex-150, circleRectangey+120, 250, 20); Cairo.cairo_stroke(eventData); //ç”»æ–‡å­— Cairo.cairo_move_to(eventData, circleRectangex+10, circleRectangey+100); Cairo.cairo_set_source_rgb(eventData, 0, 0, 1); Cairo.cairo_set_font_size(eventData, 18); //é€‰æ‹©æ–‡å­—ç±»å‹ Cairo.cairo_select_font_face(eventData, \u0026quot;å®‹ä½“\u0026quot;, Cairo.CAIRO_FONT_SLANT_NORMAL, Cairo.CAIRO_FONT_WEIGHT_BOLD); Cairo.cairo_show_text(eventData,\u0026quot;å¾ªç¯ç¬¬\u0026quot;+Integer.toString(rowPosition)+\u0026quot;æ¬¡\u0026quot;);// //Cairo.cairo_stroke(eventData); //ä¸éœ€è¦è¿™å¥è¯ä¹Ÿå¯ä»¥ } }, null); } /** * * @param window çª—å£çš„å¯¹è±¡æ ‡è¯† * @param gridHouse ç½‘æ ¼å¸ƒå±€çš„å¯¹è±¡æ ‡è¯† * @param start çŸ©å½¢å¯¹è±¡æ‰€åœ¨çš„ç½‘æ ¼å¸ƒå±€èµ·å§‹ä½ç½® * @param circlePointx ç”»ç¬”çš„xè½´ä½ç½® * @param circlePointy ç”»ç¬”çš„yè½´ä½ç½® * @purpose ç»˜åˆ¶ä¸€ä¸ªåœ†åœˆå›¾åƒ + ç»ˆæ­¢è¡¨ç¤ºï¼ */ public static void createCircleFace(int window,int gridHouse,int start,final int circlePointx,final int circlePointy) { //åˆ›å»ºç”»å›¾æ¿ æˆ–è€…å«ç”»å¸ƒ int dan = GTK.gtk_drawing_area_new(); //åˆ›å»ºæº //æ·»åŠ æ§ä»¶ start = 4; GTK.gtk_grid_attach(gridHouse, dan, 0, start, 1, 1); //æ˜¾ç¤ºç”»å¸ƒ GTK.gtk_widget_show(dan); //è®¾ç½®ç”»å¸ƒçš„å¤§å° GTK.gtk_widget_set_size_request(dan, 300, 300); //å¼€å§‹ç»˜åˆ¶ åˆ©ç”¨äº‹ä»¶draw æ¥ä¸æ–­çš„ç»˜åˆ¶ GTK.g_signal_connect(dan, \u0026quot;draw\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //eventDateæ‰æ˜¯ç”»å¸ƒæº //è®¾ç½®ç”»ç¬”çš„é¢œè‰² //Cairo.cairo_destroy(eventData); Cairo.cairo_set_source_rgb(eventData, 1, 0, 1); //è®¾ç½®ç”»ç¬”çš„å¤§å° Cairo.cairo_set_line_width(eventData, 3); //Cairo.cairo_move_to(eventData, circlePointx-20, circlePointy); //ç”»ä¸€ä¸ªçŸ©å½¢ Cairo.cairo_arc(eventData, EndCirclex+150, EndCircley+200, 100, 0, 6.28); Cairo.cairo_stroke(eventData); //ç”»æ–‡å­— Cairo.cairo_move_to(eventData, EndCirclex+50, EndCircley+200); Cairo.cairo_set_source_rgb(eventData, 1, 0, 1); Cairo.cairo_set_font_size(eventData, 18); //é€‰æ‹©æ–‡å­—ç±»å‹ Cairo.cairo_select_font_face(eventData, \u0026quot;å®‹ä½“\u0026quot;, Cairo.CAIRO_FONT_SLANT_NORMAL, Cairo.CAIRO_FONT_WEIGHT_BOLD); Cairo.cairo_show_text(eventData,\u0026quot;å¾ªç¯ç¬¬\u0026quot;+Integer.toString(rowPosition+1)+\u0026quot;æ¬¡,ç¨‹åºç»ˆæ­¢é€€å‡ºï¼\u0026quot;);// //Cairo.cairo_stroke(eventData); //ä¸éœ€è¦è¿™å¥è¯ä¹Ÿå¯ä»¥ } }, null); } /** * * @param gridHouse ç½‘æ ¼å¸ƒå±€å¯¹è±¡æ ‡è¯† * @param textViewOutput textviewçš„å¯¹è±¡æ ‡è¯† * @param start textviewå¯¹è±¡åœ¨ç½‘æ ¼å¸ƒå±€çš„èµ·å§‹ä½ç½® * @purpose åˆ›å»ºä¸€ä¸ªä¸‹ä¸€æ­¥buttonï¼Œå¹¶æ·»åŠ äº‹ä»¶ç›‘å¬ */ public static void createNextButton(int gridHouse,int textViewOutput,int start) { int btnApple = GTK.gtk_button_new_with_label(\u0026quot;ä¸‹ä¸€æ­¥\u0026quot;); GTK.gtk_widget_show(btnApple); GTK.gtk_grid_attach(gridHouse, btnApple, 6, start, 1, 1); insertNextEvent(btnApple,textViewOutput); } /** * * @param btnSin buttonä¸‹ä¸€æ­¥çš„å¯¹è±¡æ ‡è¯† * @param textViewOutput textviewçš„å¯¹è±¡æ ‡è¯† * @purpose å»ºç«‹buttonä¸‹ä¸€æ­¥çš„äº‹ä»¶ç›‘å¬ */ public static void insertNextEvent(final int btnSin,final int textViewOutput) { GTK.g_signal_connect(btnSin, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); if(rowPosition \u0026lt; getNumberOfListstore(liststore)) { circlePointy = circlePointy+20; //åˆ›å»ºç¬‘è„¸ createDrawLaughFace(window,gridHouse,start,circlePointx,circlePointy); //åˆ›å»ºçŸ©å½¢æ¡† createRectangleFace(window,gridHouse,start+1,circleRectangex,circleRectangey); printRecord(liststore); InsertStringToTextViewFunction(textViewOutput,\u0026quot;æˆ‘åœ¨doå¾ªç¯é‡Œé¢ \\n\u0026quot;); rowPosition = rowPosition +1; } else { //note = \u0026quot;æŒ‡é’ˆæ— æ³•ä¸‹ç§»\u0026quot;; circlePointy = circlePointy+20; if(rowPosition \u0026gt; getNumberOfListstore(liststore)) { createDrawLaughFace(window,gridHouse,start,circlePointx,circlePointy); } createRectangleFace(window,gridHouse,start+1,circleRectangex,circleRectangey); createCircleFace(window,gridHouse,start,EndCirclex,EndCircley); InsertStringToTextViewFunction(textViewOutput,\u0026quot;åˆ«å—¯äº†ï¼ç¨‹åºæ²¡æœ‰æ•°æ®äº†\\n\u0026quot;); showInfo(\u0026quot;æ²¡æœ‰æ•°æ®äº†\u0026quot;,\u0026quot;æŒ‡é’ˆæ— æ³•ä¸‹ç§»\u0026quot;); } } }, null); } /** * * @param liststore liststoreæ˜¯treeviewçš„åŸå§‹æ•°æ® * @return è¿”å›liststoreçš„è®°å½•ä¸ªæ•° */ public static int getNumberOfListstore(int liststore) { int sum = 0; int iter = GTK.gtk_tree_iter_new(); if(!GTK.gtk_tree_model_get_iter_first(liststore, iter)) { return sum; } do { sum++; }while(GTK.gtk_tree_model_iter_next(liststore, iter)); return sum; } /** * * @param liststore liststoreæ˜¯treeviewçš„åŸå§‹æ•°æ® * @purpose æ‰“å°liststoreçš„æ‰€æœ‰å†…å®¹ */ public static void printRecord(int liststore) { //å¿…é¡»æ–°å»ºï¼Œä¸èƒ½åˆ©ç”¨åŸå…ˆçš„listiter,å“ªè¾¹éœ€è¦ç”¨æ§åˆ¶ï¼Œå°±éœ€è¦å»ºä¸€ä¸ªæ§ä»¶ã€‚ï¼ï¼ï¼å¦åˆ™æŠ¥é”™ï¼ï¼ä¸èƒ½ç”¨å…¨å±€çš„ listiter int iter = GTK.gtk_tree_iter_new(); int i =0; /* if(GTK.gtk_tree_model_get_iter_first(liststore, listiter)) { do { String ID = GTK.gtk_tree_model_get_value(liststore, listiter, 0); String Names = GTK.gtk_tree_model_get_value(liststore, listiter, 1); String Ages = GTK.gtk_tree_model_get_value(liststore, listiter, 2); //showInfo(\u0026quot;è¿™ä¸ªå‘˜å·¥çš„IDæ˜¯\u0026quot;+ID+\u0026quot;,ä»–çš„åå­—æ˜¯\u0026quot;+Names+\u0026quot;,å¹¶ä¸”å®ƒçš„å¹´é¾„æ˜¯\u0026quot;+Ages,\u0026quot;æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯\u0026quot;); System.out.println(\u0026quot;è¿™ä¸ªå‘˜å·¥çš„IDæ˜¯\u0026quot;+ID+\u0026quot;,ä»–çš„åå­—æ˜¯\u0026quot;+Names+\u0026quot;,å¹¶ä¸”å®ƒçš„å¹´é¾„æ˜¯\u0026quot;+Ages); }while(GTK.gtk_tree_model_iter_next(liststore,listiter)); }else { System.out.println(\u0026quot;è¡¨ä¸­æ— æ•°æ®\u0026quot;); }*/ // å‡å°‘ä»£ç çš„æ·±åº¦ã€‚ if(!GTK.gtk_tree_model_get_iter_first(liststore, iter)) { System.out.println(\u0026quot;treeviewæ²¡æœ‰æ•°æ® è¯·æ·»åŠ è®°å½•\u0026quot;); return; } do { if(rowPosition == i) { String ID = GTK.gtk_tree_model_get_value(liststore, iter, 0); String Names = GTK.gtk_tree_model_get_value(liststore, iter, 1); String Ages = GTK.gtk_tree_model_get_value(liststore, iter, 2); showInfo(\u0026quot;è¿™ä¸ªå‘˜å·¥çš„IDæ˜¯\u0026quot;+ID+\u0026quot;,ä»–çš„åå­—æ˜¯\u0026quot;+Names+\u0026quot;,å¹¶ä¸”å®ƒçš„å¹´é¾„æ˜¯\u0026quot;+Ages,\u0026quot;æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯\u0026quot;); //System.out.println(\u0026quot;è¿™ä¸ªå‘˜å·¥çš„IDæ˜¯\u0026quot;+ID+\u0026quot;,ä»–çš„åå­—æ˜¯\u0026quot;+Names+\u0026quot;,å¹¶ä¸”å®ƒçš„å¹´é¾„æ˜¯\u0026quot;+Ages); return; } i++; }while(GTK.gtk_tree_model_iter_next(liststore,iter)); GTK.gtk_tree_iter_free(iter);//é‡Šæ”¾äº† è¿˜æ˜¯æœ‰é”™è¯¯ã€‚ã€‚ã€‚ } /** * * @param message è¾“å…¥ä¸€ä¸ªæ¶ˆæ¯ï¼Œæ˜¾ç¤ºåœ¨æ¶ˆæ¯æ¡† * @param title æ¶ˆæ¯æ¡†çš„æ ‡é¢˜ * @purpose åˆ›å»ºä¸€ä¸ªæ¶ˆæ¯æç¤ºå¯¹è¯æ¡† */ public static void showInfo( String message,String title) { int msgDlg = GTK.gtk_message_dialog_new(0, GTK.GTK_DIALOG_DESTROY_WITH_PARENT| GTK.GTK_DIALOG_MODAL,GTK.GTK_MESSAGE_INFO, GTK.GTK_BUTTONS_OK,message); GTK.gtk_window_set_title(msgDlg, title); int ret = GTK.gtk_dialog_run(msgDlg); if( ret == GTK.GTK_RESPONSE_OK) { GTK.gtk_widget_destroy(msgDlg); }else { GTK.gtk_widget_destroy(msgDlg); } } public static void createSelection(int gridHouse,int start) { } /** * * @param textview textviewå¯¹è±¡æ ‡è¯† * @param temp å¾…æ’å…¥textviewçš„å­—ç¬¦ä¸² * @purpose æ’å…¥ä¸€è¡Œæ•°æ®å²›textviewå½“ä¸­ */ public static void InsertStringToTextViewFunction(int textview,String temp) { //TextIteræ˜¯ä¸€ä¸ªTextViewçš„è¿­ä»£å™¨ã€‚ int textBuffer = GTK.gtk_text_view_get_buffer(textview); int textIter = GTK.gtk_text_iter_new(); //è¿™æ˜¯ä¸€ä¸ªç©ºçš„iterï¼Œéœ€è¦ç”¨textBufferè¿›è¡Œèµ‹å€¼ //GTK.gtk_text_iter_forward_to_end(textIter); GTK.gtk_text_buffer_get_end_iter(textBuffer, textIter);// æˆ–è€…textviewçš„textBufferçš„æœ«å°¾ï¼ GTK.gtk_text_buffer_insert(textBuffer, textIter, temp); //GTK.gtk_text_buffer_g GTK.gtk_text_iter_free(textIter); } }  å¤åˆ¶ä»£ç \næœ‰ä»€ä¹ˆæ„è§ï¼Œæ¬¢è¿äº¤æµï¼Œæœ‰ä»€ä¹ˆæƒ³æ³•ï¼Œæ¬¢è¿äº¤æµã€‚~-~\n","date":1431327526,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327526,"objectID":"f2ecfe907c1433eb5d661e4ec3d6987c","permalink":"/blog/2015/05/11/jian-yi-de-dai-ma-yun-xing-mo-ni-chuang-kou/","publishdate":"2015-05-11T14:58:46+08:00","relpermalink":"/blog/2015/05/11/jian-yi-de-dai-ma-yun-xing-mo-ni-chuang-kou/","section":"archives","summary":"æœ‰æ—¶å€™ï¼Œå¯èƒ½éœ€è¦åšä¸€ä¸ªåŠ¨æ€çš„ä»£ç æ¼”ç¤ºçš„çª—å£ï¼Œå½“ç„¶ç”¨pptä¹Ÿå¯ä»¥åšï¼Œç”¨å…¶ä»–çš„ç›¸å…³è½¯ä»¶ä¹Ÿå¯ä»¥åšã€‚ç„¶è€Œè‡ªå·±å†™ä»£ç ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ç›¸ä¿¡å¤§å®¶åœ¨å¬æ¨è€å¸ˆè®²è§£treeviewçš„æ—¶å€™ï¼Œè€æ¨ç§€çš„ä»£ç åˆ†æå°ç¨‹åºï¼Œå‡­ç€å°è±¡ï¼Œè‡ªå·±ä¹Ÿç¢ç£¨ç€å†™äº†è¿™ä¸€ä¸ªç®€æ˜“çš„ä»£ç è¿è¡Œæ¨¡æ‹Ÿçª—å£ã€‚ä»£ç æ¶‰åŠåˆ°çš„ä¸»è¦æ˜¯treeviewå’Œtextviewä»¥åŠæŒ‰é’®äº‹ä»¶æ§åˆ¶ï¼Œå¦å¤–åŠ ä¸Šcairoçš„ç”»å›¾å¤„ç†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥åˆ©ç”¨GtkImageè½½å…¥å›¾ç‰‡ï¼ˆå¯èƒ½éœ€è¦éšè—æ§ä»¶ï¼Œè¾¾åˆ°ç®­å¤´ä¸‹ç§»çš„ç›®çš„ï¼‰ è¿™è¾¹çš„ç¼ºç‚¹æ˜¯ï¼Œæš‚æ—¶ä¸çŸ¥é“æ€ä¹ˆé”€æ¯æ‰Cairoä¹‹å‰ç»˜åˆ¶çš„å›¾å½¢ï¼Œå…¶ä»–è¿˜æœ‰å¾ˆå¤šç¼ºç‚¹.\n","tags":null,"title":"ç®€æ˜“çš„ä»£ç è¿è¡Œæ¨¡æ‹Ÿçª—å£","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"å¤ä¹ ç›®å½• 1é›†åˆæ¡†æ¶\u0026hellip; 2 ArrayList: 2 æ ˆçš„å®ç°ï¼ˆå…ˆè¿›åå‡ºï¼‰\u0026hellip; 3 é˜Ÿåˆ—çš„å®ç°ï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰\u0026hellip; 5 LinkedList: 8 å°ç»“ï¼š\u0026hellip; 10 HashSet: 10 TreeSet. 14 LinkedHashSet: 22 HashMap: 23 1.ä½è¿ç®—ç¬¦\u0026hellip; 25 2.å­—èŠ‚çš„æˆªæ–­å·¥å…·ï¼š\u0026hellip; 29 3.ç†è§£é‡æ–°è°ƒæ•´å¤§å°\u0026hellip; 39 4.ç†è§£æ·»åŠ \u0026hellip; 41 5.ç†è§£è¯´æ˜ï¼š\u0026hellip; 44 6.HashMapå’ŒHashSetçš„åŒºåˆ«\u0026hellip; 44 7.ç†è§£Hashç®—æ³•\u0026hellip; 45 TreeMap: 45 LinkedHashMap: 45 Iterator: 45 æ³›å‹\u0026hellip; 45 Arrays: 46 Collections: 46 å¤šé‡æ•°æ®ç»“æ„çš„å®ç°ï¼š\u0026hellip; 48 ToString. 49 2ï¼šåå°„æœºåˆ¶\u0026hellip; 49 ç±»ï¼ˆClassï¼‰\u0026hellip; 50 å­—æ®µ\u0026hellip; 51 æ„é€ å‡½æ•°\u0026hellip; 52 æ–¹æ³•\u0026hellip; 53 3ï¼šå†…çœ\u0026hellip; 58 4ï¼šæ­£åˆ™è¡¨è¾¾å¼\u0026hellip; 61 å­—ç¬¦ä¸²å†…ç½®å‡½æ•°ï¼š\u0026hellip; 61 Pattern\u0026amp;Matcherç»„åˆï¼š\u0026hellip; 62\n1é›†åˆæ¡†æ¶ é›†åˆæ˜¯å­˜å‚¨å¯¹è±¡çš„å¯¹è±¡ã€‚ ç”¨äºå­˜å‚¨æ•°æ®çš„æ•°æ®ç»“æ„ï¼Œé‡è¦ï¼è¿›è¡Œæºç åˆ†æã€‚ è¦æ±‚ï¼šç†Ÿç»ƒæŒæ¡å¢åˆ æŸ¥æ”¹ï¼ˆé’ˆå¯¹æ¯ä¸€ç§æ•°æ®ç»“æ„ï¼‰ï¼å—å¢åˆ æŸ¥æ”¹ç­‰ç­‰ã€‚å¹¶æŒæ¡æ¯ä¸€ç§æ•°æ®ç»“æ„çš„æœ¬è´¨ï¼Œä¼˜ç¼ºç‚¹\n|\u0026ndash;Collection |\u0026mdash;List |\u0026mdash;\u0026mdash;-ArrayList |\u0026mdash;\u0026mdash;-LinkedList |\u0026mdash;\u0026mdash;-HashLinkedList |\u0026mdash;Set |\u0026mdash;\u0026mdash;-HashSet |\u0026mdash;\u0026mdash;-TreeSet |\u0026ndash;Map |\u0026mdash;\u0026mdash;-HashMap |\u0026mdash;\u0026mdash;-TreeMap |\u0026mdash;\u0026mdash;-LinkedHashMap ä¸¤ä¸ªå·¥å…·ç±»(é»˜è®¤æ˜¯é™æ€ç±»static æ–¹æ³•)ï¼š |\u0026mdash;Arrays |\u0026mdash;Collections\né‡ç‚¹ï¼šArrayList , LinkedList, HashMap,è¿›è¡ŒHashMapçš„æºç è¿½è¸ªã€‚\nArrayList: æœ¬è´¨ï¼šæ•°ç»„ï¼Œå…ƒç´ æœ‰åºï¼Œå¯ä»¥é‡å¤ ä¼˜ç‚¹ï¼šæŸ¥æ‰¾(æˆ–è€…å«åšè·å–getæ–¹æ³•æ•ˆç‡æé«˜)å’Œéå† ç¼ºç‚¹ï¼šå¢åŠ å’Œåˆ é™¤ ArrayListå’ŒLinkedListæ›¿æ¢æ‰Vector,Vectoråœ¨é•¿åº¦ä¸è¶³æ—¶å€™æ˜¯ç™¾åˆ†ç™¾å¢é•¿ï¼Œè€Œå‰é¢ä¸¤ä¸ªæ˜¯50%ã€‚è‡³äºçº¿ç¨‹çš„ç‹¬ç«‹æ€§å¯ä»¥è®©ArrayListå’ŒLinkedListæ¥ç»­Serializable\nVectorçš„æ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„(Synchronized),æ˜¯çº¿ç¨‹å®‰å…¨çš„(thread-safe)ï¼Œè€ŒArrayListçš„æ–¹æ³•ä¸æ˜¯ï¼Œç”±äºçº¿ç¨‹çš„åŒæ­¥å¿…ç„¶è¦å½±å“æ€§èƒ½ï¼Œå› æ­¤,ArrayListçš„æ€§èƒ½æ¯”Vectorå¥½ã€‚ å½“Vectoræˆ–ArrayListä¸­çš„å…ƒç´ è¶…è¿‡å®ƒçš„åˆå§‹å¤§å°æ—¶,Vectorä¼šå°†å®ƒçš„å®¹é‡ç¿»å€,è€ŒArrayListåªå¢åŠ 50%çš„å¤§å°ï¼Œè¿™æ ·,ArrayListå°±æœ‰åˆ©äºèŠ‚çº¦å†…å­˜ç©ºé—´ æ ˆçš„å®ç°ï¼ˆå…ˆè¿›åå‡ºï¼‰\n/** * å †æ ˆæ˜¯å…ˆè¿›åå‡º */ package com.collections.test; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ23æ—¥ä¸‹åˆ7:47:29 * @version com.collections.testTestStack V1.0 */ import java.util.*; public class TestStack { /** * @param args */ private static List\u0026lt;String\u0026gt; list1 = new ArrayList\u0026lt;String\u0026gt;(); /** * * @param apple æ·»åŠ å­—ç¬¦ä¸²åˆ°å †æ ˆä¸­ */ public void push(String apple) { //list1.addLast(apple); //list1.addOffer(apple); list1.add(apple); } /** * * @return è¿”å›å¾…åˆ é™¤çš„å­—ç¬¦ä¸² */ public String pop() { int length = getListLength(); //ç¬¨è›‹ ç›´æ¥ç”¨ list1.size()å°±å¯ä»¥äº† //System.out.println(\u0026quot;é•¿åº¦ä¸ºï¼š\u0026quot;+length); String apple = list1.get(length-1); //String apple = list1.get(length-1); //ç¬¬ä¸€ç§æ–¹æ³• //return list1.removeLast() æ›´æ–¹ä¾¿IE //ç¬¬äºŒç§æ–¹æ³• //return list1.pollLast(); list1.remove(length-1); return apple; } /** * å¾—åˆ°å †æ ˆçš„é•¿åº¦ * @return */ private static int getListLength() { int sum =0; Iterator\u0026lt;String\u0026gt; it = list1.iterator(); while(it.hasNext()) { sum++; it.next(); } return sum; } public void sayStatck() { Iterator\u0026lt;String\u0026gt; it = list1.iterator(); while(it.hasNext()) { System.out.println(it.next()); } } public static void main(String[] args) { // TODO Auto-generated method stub TestStack ts = new TestStack(); ts.push(\u0026quot;apple\u0026quot;); ts.push(\u0026quot;banana\u0026quot;); ts.push(\u0026quot;orange\u0026quot;); ts.sayStatck(); String text = ts.pop(); ts.sayStatck(); } }  java é˜Ÿåˆ—çš„å®ç°ï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰\n/** * */ package com.collections.test; import java.util.ArrayList; import java.util.Iterator; import java.util.List; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ23æ—¥ä¸‹åˆ8:07:29 * @version com.collections.testTestQueue V1.0 */ public class TestQueue { /** * @param args */ private static List\u0026lt;String\u0026gt; list1 = new ArrayList\u0026lt;String\u0026gt;(); /** * * @param apple æ·»åŠ å­—ç¬¦ä¸²åˆ°å †æ ˆä¸­ */ public void push(String apple) { list1.add(apple); } /** * * @return è¿”å›å¾…åˆ é™¤çš„å­—ç¬¦ä¸² */ public String pop() { //System.out.println(\u0026quot;é•¿åº¦ä¸ºï¼š\u0026quot;+length); String apple = list1.get(0); //String apple = list1.get(length-1); list1.remove(0); return apple; } public void sayStatck() { Iterator\u0026lt;String\u0026gt; it = list1.iterator(); while(it.hasNext()) { System.out.println(it.next()); } } /** * @param args */ public static void main(String[] args) { // TODO Auto-generated method stub // TODO Auto-generated method stub TestQueue ts = new TestQueue(); ts.push(\u0026quot;apple\u0026quot;); ts.push(\u0026quot;banana\u0026quot;); ts.push(\u0026quot;orange\u0026quot;); ts.sayStatck(); String text = ts.pop(); System.out.println(\u0026quot;Popå€¼ï¼š\u0026quot;+text); ts.sayStatck(); String text1 = ts.pop(); System.out.println(\u0026quot;Popå€¼ï¼š\u0026quot;+text1); ts.sayStatck(); } }  ArrayListæºç è¿½è¸ªéƒ¨åˆ†ï¼š\nè°ƒæŸ¥ArrayListå‘ç°äº†LastIndexOfçš„ä¸€ä¸ªç§’çš„åœ°æ–¹ï¼Œå€’ç€è¿‡æ¥æ‰¾\npublic int lastIndexOf(Object o) { if (o == null) { for (int i = size-1; i \u0026gt;= 0; i--) if (elementData==null) return i; } else { for (int i = size-1; i \u0026gt;= 0; i--) //ç§’ï¼ if (o.equals(elementData)) return i; } return -1; }  ä¸‹é¢çš„ArrayList.this.addçœŸçš„æ˜¯å€¼å¾—å­¦ä¹ \npublic void add(E e) { checkForComodification(); try { int i = cursor; ArrayList.this.add(i, e); cursor = i + 1; lastRet = -1; expectedModCount = modCount; } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } }  è¿™æ ·çš„è¯ ä¼šç›´æ¥å®šä¹‰åˆ°æœ¬ç±»çš„addæ–¹æ³•ï¼Œè€Œä¸ä¼šæ˜¯åˆ«çš„\npublic void add(int index, E element) { rangeCheckForAdd(index); ensureCapacityInternal(size + 1); // Increments modCount!! System.arraycopy(elementData, index, elementData, index + 1, size - index); elementData[index] = element; size++; }  LinkedList: æœ¬è´¨ï¼šé“¾è¡¨ï¼Œæœ‰åºï¼Œå¯ä»¥é‡å¤ ä¼˜ç‚¹ï¼šå¢åŠ å’Œåˆ é™¤ ç¼ºç‚¹ï¼šæŸ¥æ‰¾ï¼ˆè·å–ï¼‰\nListIteratorçš„å¸¸ç”¨æ–¹æ³•ï¼š\nboolean hasNext( ) //åˆ¤æ–­æ˜¯å¦è¿˜è¦ä¸‹ä¸€ä¸ªå…ƒç´ \nObject next( ) //å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ,å¹¶æŠŠæŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ \nint nextIndex( ) //ä¸‹ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•\nboolean hasPrevious() //åˆ¤æ–­æ˜¯å¦æœ‰å‰ä¸€ä¸ªå…ƒç´ \nObject previous( ) //å–å‡ºå‰ä¸€ä¸ªå…ƒç´ ,å¹¶æŠŠæŒ‡é’ˆç§»åŠ¨åˆ°å‰ä¸€ä¸ªå…ƒç´ \nint previousIndex( ) //å‰ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•\nvoid add(Object o) //æ·»åŠ ä¸€ä¸ªå…ƒç´ \nvoid remove( ) //åˆ é™¤æŒ‡é’ˆæŒ‡å‘çš„å½“å‰å…ƒç´ \nvoid set(Object o) //ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„å½“å‰å…ƒç´ \npackage com.collections.test;\nimport java.util.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ23æ—¥ä¸‹åˆ12:15:42 * @version com.collections.testListTest V1.0 */ public class ListTest { /** * @param args */ public static void main(String[] args) { // TODO Auto-generated method stub // Collection c = new LinkedList(); /** * æµ‹è¯•listå†…éƒ¨æœ‰åˆ«äºCollectionçš„ç‰¹æœ‰çš„æ–¹æ³• */ List\u0026lt;String\u0026gt; list1 = new ArrayList\u0026lt;String\u0026gt;(); list1.add(\u0026quot;abc0\u0026quot;); list1.add(\u0026quot;abc1\u0026quot;); list1.add(\u0026quot;abc2\u0026quot;); System.out.println(list1); list1.add(1, \u0026quot;abchaha\u0026quot;); System.out.println(list1); for(int i = 0 ; i \u0026lt; list1.size(); i++) { System.out.println(\u0026quot;list1[\u0026quot;+i+\u0026quot;]=\u0026quot;+list1.get(i)); } for(Object o:list1) { System.out.println(o); } list1.set(3, \u0026quot;fdsf\u0026quot;); System.out.println(list1); System.out.println(\u0026quot;fdsfåœ¨list1çš„ç¬¬\u0026quot;+list1.indexOf(\u0026quot;fdsf\u0026quot;)+\u0026quot;ä½\u0026quot;); //æœ€åä¸€æ¬¡abc1å‡ºç°çš„ä½ç½® System.out.println(list1.lastIndexOf(\u0026quot;abc1\u0026quot;)); List list2 = list1.subList(1, 4); System.out.println(\u0026quot;list2:\u0026quot;+list2); ListIterator lit = list1.listIterator(); while(lit.hasNext()) { Object o = lit.next(); System.out.println(\u0026quot;List:\u0026quot;+o); } } }  å°ç»“ï¼š 1ï¼šåªæƒ³éå† å°±ä¼šArrayList 2ï¼šå¸Œæœ›ä¸æ–­æ·»åŠ  æœ€å¥½å°±æ˜¯LinkedList 3ï¼šå¯ä»¥ä½¿ç”¨Collections.synchronizedList()è·å¾—ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ArrayList and LinkedList\nHashSet: æœ¬è´¨ï¼šæ•°ç»„+é“¾è¡¨ï¼Œç”±entryé“¾æ„æˆçš„æ•°ç»„ï¼Œæ— åºï¼Œä¸å¯é‡å¤ã€‚æœ¬è´¨æ˜¯HashMap ä¼˜ç‚¹ï¼šæ·»åŠ å’Œåˆ é™¤æ•ˆç‡é«˜ ç¼ºç‚¹ï¼šè·å–æ…¢ï¼ˆéå†éƒ½ä¸€æ ·ï¼‰,åªèƒ½éå†ä¸€éï¼ŒSeté›†åˆæ— æ³•ç›´æ¥è·å–æŸä¸ªå…ƒç´ \næ·»åŠ ï¼š1 è®¡ç®—hashcode 2. æ ¹æ®hashcodeå®šä½åˆ°æŸä¸€ç´¢å¼•å¤„ï¼ˆæ•°ç»„ï¼‰ 3. æ·»åŠ å€¼åˆ°ç´¢å¼•å¤„çš„é“¾è¡¨ï¼ˆåˆ¤æ–­æ˜¯å¦é‡å¤ï¼‰\næ‰€ä»¥hashset == æ•°ç»„ï¼ˆå­˜æ”¾hashcodeï¼‰+é“¾è¡¨ï¼ˆå­˜å€¼ï¼‰ï¼ˆå…¶å®å°±æ˜¯ä¸ºäº†æé«˜å¤§é“¾è¡¨çš„æ·»åŠ å’Œéå†çš„é€Ÿåº¦ï¼‰ HashSetçš„æºç å†…éƒ¨å…¶å®æ˜¯HashMap\n1:é‡å†™hashCode and equals\næ³¨æ„ï¼šhashCode and equalsçš„ç”Ÿæˆæ–¹å¼ï¼š å³é”®â€•\u0026gt;source\u0026mdash;\u0026gt;hashCode and equalså³å¯è‡ªåŠ¨ ç”Ÿæˆã€‚\npackage com.collections.test; import java.util.HashSet; import java.util.Iterator; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ23æ—¥ä¸‹åˆ8:35:46 * @version com.collections.testTestHashSet V1.0 */ public class TestHashSet { /** * @param args */ public static void main(String[] args) { // TODO Auto-generated method stub HashSet\u0026lt;String\u0026gt; hs = new HashSet\u0026lt;String\u0026gt;(); hs.add(\u0026quot;abc0\u0026quot;); hs.add(\u0026quot;abc1\u0026quot;); hs.add(\u0026quot;abc2\u0026quot;); hs.add(\u0026quot;abc3\u0026quot;); hs.add(\u0026quot;abc4\u0026quot;); hs.add(\u0026quot;abc0\u0026quot;); System.out.println(hs); //seté›†åˆæ²¡æœ‰ç´¢å¼• index æ‰€ä»¥å¿…é¡»ç”¨iterator Iterator it = hs.iterator(); while(it.hasNext()) { System.out.println(it.next()); } /** * Personç±»çš„hashCodeè¢«æ‰§è¡Œ Personç±»çš„hashCodeè¢«æ‰§è¡Œ Personç±»çš„hashCodeè¢«æ‰§è¡Œ Personç±»çš„hashCodeè¢«æ‰§è¡Œ Personç±»çš„hashCodeè¢«æ‰§è¡Œ Personç±»çš„equalsæ–¹æ³•è¢«æ‰§è¡Œ */ Person p1 = new Person(\u0026quot;zhao\u0026quot;,32); Person p2 = new Person(\u0026quot;zhao1\u0026quot;,34); Person p5 = new Person(\u0026quot;zhao1\u0026quot;,34); Person p3 = new Person(\u0026quot;zhao2\u0026quot;,35); Person p4 = new Person(\u0026quot;zhao3\u0026quot;,36); HashSet\u0026lt;Person\u0026gt; hs1 = new HashSet\u0026lt;Person\u0026gt;(); hs1.add(p1); hs1.add(p2); hs1.add(p3); hs1.add(p4); hs1.add(p5); Iterator it1 = hs1.iterator(); while(it1.hasNext()) { Person p11 = (Person)it1.next(); //System.out.println(p11.getName()+\u0026quot;:\u0026quot;+p11.getAge()); System.out.println(p11); } } } //è‡ªå®šç±»ä¸­åŠ å…¥setéœ€è¦é‡å†™hashCodeå’Œequalsæ–¹æ³• é›†åˆçš„ä¸å¯é‡å¤æ€§ï¼ï¼æ‰€ä»¥å¿…é¡» //æ·»åŠ hashcodeå’Œequalsè¿™ç§æ¯”è¾ƒä½çº§çš„ï¼å¦‚æœæ˜¯TreeSetè¿˜å¾—è€ƒè™‘å¤§å°ï¼å¿…é¡»æ˜¯ ///Comparable class Person { /*public int compareTo(String anotherString) { return Name.compareTo(anotherString); }*/ private int Age; private String Name; public Person( String name,int age) { //super(); this.Age = age; this.Name = name; } public int getAge() { return this.Age; } public void setAge(int age) { this.Age = age; } public String getName() { return this.Name; } public void setName(String name) { this.Name = name; } /// å³é”®source---ã€‹ generate equals and hashcode method @Override public int hashCode() { System.out.println(\u0026quot;Personç±»çš„hashCodeè¢«æ‰§è¡Œ\u0026quot;); final int prime = 31; int result = 1; result = prime * result + Age; result = prime * result + ((Name == null) ? 0 : Name.hashCode()); return result; } @Override public boolean equals(Object obj) { System.out.println(\u0026quot;Personç±»çš„equalsæ–¹æ³•è¢«æ‰§è¡Œ\u0026quot;); if (this == obj) return true; if (obj == null) return false; if (getClass() != obj.getClass()) return false; Person other = (Person) obj; if (Age != other.Age) return false; if (Name == null) { if (other.Name != null) return false; } else if (!Name.equals(other.Name)) return false; return true; } @Override public String toString() { return \u0026quot;Person [Age=\u0026quot; + Age + \u0026quot;, Name=\u0026quot; + Name + \u0026quot;]\u0026quot;; } }  TreeSet\næœ¬è´¨ï¼šäºŒå‰æ ‘ï¼Œæ³¨æ„æŸ¥çœ‹rootèŠ‚ç‚¹ï¼ˆè¿™æ˜¯äºŒå‰æ ‘ç»“æ„çš„æ ‡å¿—ï¼‰ TreeSetå…³é”®æ˜¯æ’åºï¼ï¼ˆä¸æ˜¯æ’å…¥ å’Œè·å–å…ƒç´ ï¼‰ ä¼˜ç‚¹ï¼šå¢åŠ å’Œåˆ é™¤ ç¼ºç‚¹ï¼šè·å–\nTreeSetå³èŠ‚ç‚¹å€¼å¤§äºçˆ¶èŠ‚ç‚¹ å·¦èŠ‚ç‚¹å€¼å°äºçˆ¶èŠ‚ç‚¹,æ ¹æ®è¿™ç§æ¨æ–­ï¼Œæœ€å°çš„æ˜¯å­˜åœ¨äºå·¦è¾¹çš„æœ€ä¸‹è¾¹ï¼ åˆ©ç”¨é€’å½’æ¨æ–­ã€‚\n1:é‡å†™equals and hashcode 2:å®ç°ä¸€ä¸ªcomparableæ¥å£æˆ–è€…ä¸€ä¸ªComparatorç±»\nç¬¬ä¸€ç§æ–¹æ³•ï¼šå®ç°comparableæ¥å£\nåªéœ€è¦åœ¨Personç±»ä¸­å¢åŠ implements comparableå¹¶é‡å†™compareTo(Object o)æ¥å£å³å¯ï¼š\nclass Person implements Comparable { /*public int compareTo(String anotherString) { return Name.compareTo(anotherString); }*/ private int Age; private String Name; public Person( String name,int age) { //super(); this.Age = age; this.Name = name; } public int getAge() { return this.Age; } public void setAge(int age) { this.Age = age; } public String getName() { return this.Name; } public void setName(String name) { this.Name = name; } /// å³é”®source---ã€‹ generate equals and hashcode method @Override public int hashCode() { System.out.println(\u0026quot;Personç±»çš„hashCodeè¢«æ‰§è¡Œ\u0026quot;); final int prime = 31; int result = 1; result = prime * result + Age; result = prime * result + ((Name == null) ? 0 : Name.hashCode()); return result; } @Override public boolean equals(Object obj) { System.out.println(\u0026quot;Personç±»çš„equalsæ–¹æ³•è¢«æ‰§è¡Œ\u0026quot;); if (this == obj) return true; if (obj == null) return false; if (getClass() != obj.getClass()) return false; Person other = (Person) obj; if (Age != other.Age) return false; if (Name == null) { if (other.Name != null) return false; } else if (!Name.equals(other.Name)) return false; return true; } @Override public String toString() { return \u0026quot;Person [Age=\u0026quot; + Age + \u0026quot;, Name=\u0026quot; + Name + \u0026quot;]\u0026quot;; } @Override public int compareTo(Object o) { // TODO Auto-generated method stub //æŒ‰ç…§å¹´é¾„è¿›è¡Œæ’åº if(this == o) { return 0; } if(this == null) { return -1; } if(!(o instanceof Person)) { return -1; } Person p1 = (Person)o; //å…ˆæŒ‰ç…§å¹´é¾„æ’åº int temp = p1.Age - this.Age; if(temp ==0) { if(this.Name == null) { if(p1.Name == null) { return 0; }else { return -1; } }else { return this.Name.compareTo(p1.Name); } } return 0; } } //ç¬¬äºŒç§æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ¯”è¾ƒç±»ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼Œåœ¨TreeSetçš„å¯¹è±¡å®šä¹‰ä¸­ä½¿ç”¨ class Comparators { public Comparator getComparator() { return new Comparator() { // 0 è¡¨ç¤º o1 o2ç›¸ç­‰ // è´Ÿæ•° è¡¨ç¤º o1 \u0026lt; o2 // æ•´æ•° è¡¨ç¤º o1 \u0026gt; o2 @Override public int compare(Object o1, Object o2) { if(o1 instanceof String) { //å­—ç¬¦ä¸²çš„æ¯”è¾ƒ return compare((String) o1,(String) o2); }else if(o1 instanceof Integer) { //æ•´æ•°çš„æ¯”è¾ƒ return compare((Integer) o1,(Integer) o2); }else if(o1 instanceof Boolean) { //å¸ƒå°”ç±»å‹çš„æ¯”è¾ƒ return compare((Boolean) o1,(Boolean) o2); }else if(o1 instanceof Person) { //å¸ƒå°”ç±»å‹çš„æ¯”è¾ƒ return compare((Person) o1,(Person) o2); }else { System.out.println(\u0026quot;æœªæ‰¾åˆ°åˆé€‚çš„æ¯”è¾ƒå™¨ \u0026quot;); return 1; //é»˜è®¤å¤§äº0 } } //ç”¨äºæ¯”è¾ƒå­—ç¬¦ä¸² public int compare(String o1, String o2) { //æš‚æ—¶å¤‡ä»½ä¸€ä¸‹ å­—ç¬¦ä¸² String s1 = (String)o1; String s2 = (String)o2; //è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ int len1 = s1.length(); int len2 = s2.length(); //è·å–æœ€å°å€¼ int n = Math.min(len1, len2); //è½¬åŒ–ä¸ºå­—ç¬¦æ•°ç»„ char[] v1 = s1.toCharArray(); char[] v2 = s2.toCharArray(); //è®¾ç½®ä½ç½®å‚æ•° int pos = 0; //ä»æœªåˆ°å¤´ æŒ‰ç…§indexä¸‹è¡¨ä»å¤´åˆ°å°¾è¿›è¡Œåˆ¤æ–­ while(n-- != 0) { char c1 = v1[pos]; char c2 = v2[pos]; if(c1 != c2) { return c1 - c2; } pos++; } return len1-len2; //ç›¸ååˆ™æ˜¯ååº é™åº } //ç”¨äºæ¯”è¾ƒæ•´æ•° public int compare(Integer o1, Integer o2) { int val1 = o1.intValue(); int val2 = o2.intValue(); //return (val1 \u0026lt; val2 ? -1 :(val1 == val2 ? 0 : 1)); // return (val1 \u0026gt; val2 ? 1 :(val1 == val2 ? 0 : -1)); //å‡åº //return (val2 \u0026gt; val1 ? -1 :(val1 == val2 ? 0 : 1)); //é™åº return (val2 \u0026gt; val1 ? 1 :(val1 == val2 ? 0 : -1)); } //ç”¨äºæ¯”è¾ƒå¸ƒå°”å€¼ public int compare(Boolean o1,Boolean o2) { return (o1.equals(o2)? 0: (o1.booleanValue()==true)?1:-1); } public int compare(final Person o1, final Person o2) { String Name1 = o1.getName(); String Name2 = o2.getName(); int Age1 = o1.getAge(); int Age2 = o2.getAge(); Boolean sex1 = o1.getSex(); Boolean sex2 = o2.getSex(); /*//ç¬¬ä¸€æ¬¡ çº¿æ¯”è¾ƒå¹´é¾„ return (compare(Age1,Age2)==0? //ç¬¬äºŒæ¬¡æ¯”è¾ƒåå­— (compare(Name1,Name2)==0? //ç¬¬ä¸‰æ¬¡æ¯”è¾ƒæ€§åˆ« (compare(sex1,sex2)==0? 0 :compare(sex1,sex2)): compare(Name1,Name2)): compare(Age1,Age2));*/ //ç¬¬ä¸€æ¬¡ æ¯”è¾ƒå¹´é¾„ return (compare(Name1,Name2)==0? //ç¬¬äºŒæ¬¡æ¯”è¾ƒ å²æ•° (compare(Age1,Age2)==0? //ç¬¬ä¸‰æ¬¡æ¯”è¾ƒå²æ•° (compare(sex1,sex2)==0?0:compare(sex1,sex2)): compare(Age1,Age2)): compare(Name1,Name2)); } }; } }  å¹¶åœ¨TreeSetå®šä¹‰å¯¹è±¡æ—¶å€™ï¼Œé‡‡ç”¨å¦‚ä¸‹æ–¹å¼ï¼š\n//TreeSet\u0026lt;Person\u0026gt; ts2 = new TreeSet\u0026lt;Person\u0026gt;(); //æ‰¾åˆ°è§£å†³åŠæ³•äº† TreeSet\u0026lt;Person\u0026gt; ts2 = new TreeSet\u0026lt;Person\u0026gt;(new Comparators().getComparator());  æ¯”è¾ƒä¹‹å‰çš„\nTreeSet\u0026lt;Person1\u0026gt; ts1 = new TreeSet\u0026lt;Person1\u0026gt;();  å¦å¤–æ­¤ç§æ–¹æ³•ä¹Ÿè¿ç”¨åœ¨Arrays.Sortå½“ä¸­ï¼šå…¶ä¸­pdian æ˜¯ä¸€ä¸ªpersonçš„æ•°ç»„\nPerson[] pdian = new Person[] { new Person(\u0026quot;yezhao\u0026quot;,34,Boolean.TRUE), new Person(\u0026quot;xinran\u0026quot;,10,Boolean.FALSE), new Person(\u0026quot;zhaoliang\u0026quot;,33,Boolean.TRUE), new Person(\u0026quot;zhaidc\u0026quot;,30,Boolean.FALSE), new Person(\u0026quot;zhaidc\u0026quot;,31,Boolean.FALSE), }; Arrays.sort(pdian, new Comparators().getComparator());  å¦å¤–çš„å¯ä»¥é€šè¿‡åŒ¿åç±»æ¥å®ç°ï¼š\nArrays.sort(pdian, new Comparator\u0026lt;Object\u0026gt;() { // 0 è¡¨ç¤º o1 o2ç›¸ç­‰ // è´Ÿæ•° è¡¨ç¤º o1 \u0026lt; o2 // æ•´æ•° è¡¨ç¤º o1 \u0026gt; o2 @Override public int compare(Object o1, Object o2) { if(o1 instanceof String) { //å­—ç¬¦ä¸²çš„æ¯”è¾ƒ return compare((String) o1,(String) o2); }else if(o1 instanceof Integer) { //æ•´æ•°çš„æ¯”è¾ƒ return compare((Integer) o1,(Integer) o2); }else if(o1 instanceof Boolean) { //å¸ƒå°”ç±»å‹çš„æ¯”è¾ƒ return compare((Boolean) o1,(Boolean) o2); }else if(o1 instanceof PersonMan) { //å¸ƒå°”ç±»å‹çš„æ¯”è¾ƒ return compare((PersonMan) o1,(PersonMan) o2); }else { System.out.println(\u0026quot;æœªæ‰¾åˆ°åˆé€‚çš„æ¯”è¾ƒå™¨ \u0026quot;); return 1; //é»˜è®¤å¤§äº0 } } //ç”¨äºæ¯”è¾ƒå­—ç¬¦ä¸² public int compare(String o1, String o2) { //æš‚æ—¶å¤‡ä»½ä¸€ä¸‹ å­—ç¬¦ä¸² String s1 = (String)o1; String s2 = (String)o2; //è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ int len1 = s1.length(); int len2 = s2.length(); //è·å–æœ€å°å€¼ int n = Math.min(len1, len2); //è½¬åŒ–ä¸ºå­—ç¬¦æ•°ç»„ char[] v1 = s1.toCharArray(); char[] v2 = s2.toCharArray(); //è®¾ç½®ä½ç½®å‚æ•° int pos = 0; //ä»æœªåˆ°å¤´ æŒ‰ç…§indexä¸‹è¡¨ä»å¤´åˆ°å°¾è¿›è¡Œåˆ¤æ–­ while(n-- != 0) { char c1 = v1[pos]; char c2 = v2[pos]; if(c1 != c2) { return c1 - c2; } pos++; } return len1-len2; //ç›¸ååˆ™æ˜¯ååº é™åº } //ç”¨äºæ¯”è¾ƒæ•´æ•° public int compare(Integer o1, Integer o2) { int val1 = o1.intValue(); int val2 = o2.intValue(); //return (val1 \u0026lt; val2 ? -1 :(val1 == val2 ? 0 : 1)); // return (val1 \u0026gt; val2 ? 1 :(val1 == val2 ? 0 : -1)); //å‡åº //return (val2 \u0026gt; val1 ? -1 :(val1 == val2 ? 0 : 1)); //é™åº return (val2 \u0026gt; val1 ? -1 :(val1 == val2 ? 0 : 1)); } //ç”¨äºæ¯”è¾ƒå¸ƒå°”å€¼ public int compare(Boolean o1,Boolean o2) { return (o1.equals(o2)? 0: (o1.booleanValue()==true)?1:-1); } public int compare(final PersonMan o1, final PersonMan o2) { String Name1 = o1.getName(); String Name2 = o2.getName(); int Age1 = o1.getAge(); int Age2 = o2.getAge(); Boolean sex1 = o1.getSex(); Boolean sex2 = o2.getSex(); /*//ç¬¬ä¸€æ¬¡ çº¿æ¯”è¾ƒå¹´é¾„ return (compare(Age1,Age2)==0? //ç¬¬äºŒæ¬¡æ¯”è¾ƒåå­— (compare(Name1,Name2)==0? //ç¬¬ä¸‰æ¬¡æ¯”è¾ƒæ€§åˆ« (compare(sex1,sex2)==0? 0 :compare(sex1,sex2)): compare(Name1,Name2)): compare(Age1,Age2));*/ //ç¬¬ä¸€æ¬¡ æ¯”è¾ƒå¹´é¾„ return (compare(Name1,Name2)==0? //ç¬¬äºŒæ¬¡æ¯”è¾ƒ å²æ•° (compare(Age1,Age2)==0? //ç¬¬ä¸‰æ¬¡æ¯”è¾ƒå²æ•° (compare(sex1,sex2)==0?0:compare(sex1,sex2)): compare(Age1,Age2)): compare(Name1,Name2)); } });  LinkedHashSet: æœ¬è´¨ï¼šé“¾è¡¨+ æœ‰åº ä¼˜ç‚¹ï¼šå¢åŠ å’Œåˆ é™¤ ç¼ºç‚¹ï¼šæŸ¥æ‰¾ï¼ˆè·å–ï¼‰ Linkedlistä¹Ÿæ˜¯æœ‰åºä½†æ˜¯å¯é‡å¤ LinkedHashSet ä¸å¯é‡å¤ï¼ hashSetçš„é«˜æ•ˆç‡ï¼Œä½†æ˜¯æ— é¡»ï¼ LinkedHashSetå¯ä»¥å½“åšHashSetæ¥ä½¿ç”¨\nMapé›†åˆåŸºæœ¬æ“ä½œï¼š\nl æ·»åŠ \nV put(K key, V value) //æŠŠä¸€ä¸ªé”®å€¼å¯¹å­˜å…¥mapé›†åˆä¸­\nvoid putAll(Map\u0026lt;? extends K,? extends V\u0026gt; m) //æŠŠä¸€ç»„é”®å€¼å¯¹å­˜å…¥åˆ°mapé›†åˆä¸­\nl åˆ é™¤\nV remove(Object key) //åˆ é™¤keyä¸ºæŒ‡å®šå¯¹è±¡çš„é”®å€¼å¯¹\nvoid clear() //æƒ…å†µmapä¸­çš„æ‰€æœ‰å…ƒç´ \nl åˆ¤æ–­\nboolean containsKey(Object key) //åˆ¤æ–­æ˜¯å¦åŒ…å«keyä¸ºæŒ‡å®šå¯¹è±¡çš„é”®å€¼å¯¹\nboolean containsValue(Object value) //åˆ¤æ–­æ˜¯å¦åŒ…å«valueä¸ºæŒ‡å®šå¯¹è±¡çš„å…ƒç´ \nboolean isEmpty() //åˆ¤æ–­mapé›†åˆæ˜¯å¦åŒ…å«å…ƒç´ \nl è·å–\nV get(Object key) //è·å¾—æŒ‡å®škeyå¯¹åº”çš„value\nSet keySet() //è·å¾—æ‰€æœ‰keyç»„æˆçš„Seté›†åˆ\nCollection values() //è·å¾—æ‰€æœ‰valueç»„æˆçš„Seté›†åˆ\nSet\u0026gt; entrySet() //è·å¾—æ‰€æœ‰é”®å€¼å¯¹å¯¹è±¡ç»„æˆçš„Seté›†åˆ\nint size() //è·å¾—mapé›†åˆçš„å¤§å°(å­˜äº†å¤šå°‘å…ƒç´ )\n","date":1431327526,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327526,"objectID":"8abcb92b33864b7b00316628df63e045","permalink":"/blog/2015/05/11/wang-luo-bian-cheng-8-12jie-bi-ji-dai-ma-march18th/","publishdate":"2015-05-11T14:58:46+08:00","relpermalink":"/blog/2015/05/11/wang-luo-bian-cheng-8-12jie-bi-ji-dai-ma-march18th/","section":"archives","summary":"","tags":null,"title":"ç½‘ç»œç¼–ç¨‹8-12èŠ‚ç¬”è®°ä»£ç March18th","type":"archives"},{"authors":null,"categories":["Mysql"],"content":"1ã€MYSQLå®˜æ–¹ç‰ˆä¸‹è½½åœ°å€ï¼ˆä¸æ¨èåˆå­¦è€…ä½¿ç”¨ï¼‰ï¼šhttp://www.mysql.com/downloads/ å¦‚é¹ç½‘ç‰ˆç»¿è‰²å…å®‰è£…ç‰ˆMYSQLï¼ˆæ¨èåˆå­¦è€…ä½¿ç”¨ï¼‰ï¼šhttp://pan.baidu.com/s/1c0COfGc 2ã€ å¸¸ç”¨æ¦‚å¿µ ä¸€èˆ¬æˆ‘ä»¬è¯´çš„æ•°æ®åº“æ˜¯æŒ‡DBMSï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œæ¯”å¦‚â€œä½ ç”¨äº†ä»€ä¹ˆæ•°æ®åº“â€ï¼Œâ€œä½ ä¼šç”¨ä»€ä¹ˆæ•°æ®åº“â€,â€ä½ æŠŠæ•°æ®åº“åˆ äº†â€ã€‚å‰ä¸¤ä¸ªæ˜¯DBMSï¼Œç¬¬ä¸‰ä¸ªæ˜¯æŒ‡çš„æ˜¯çœŸå®çš„æ•°æ® åº“ï¼ˆdatabaseï¼‰ï¼šä¼—å¤šäº‹ç‰©çš„é›†åˆ è¡¨(table)ï¼šå°±æ˜¯ä¸€ç±»äº‹ç‰©çš„é›†åˆ åˆ—(column)ï¼šæŸç±»äº‹ç‰©çš„å…·ä½“çš„å­—æ®µã€‚ä¹Ÿå«åšå­—æ®µã€‚\n3.è§£å‹åè¿è¡Œ mysqlæ–‡ä»¶å¤¹ä¸‹çš„mysqld.exe,å¯åŠ¨mysqlæœåŠ¡å™¨ 4.è¿è¡Œmysql C:\\mysql\\bin\u0026gt;mysql-uroot â€“proot å¤åˆ¶ä»£ç \n5:æ˜¾ç¤ºå½“å‰æ‰€æœ‰çš„ä»“åº“\nmysql\u0026gt; show databases; +--------------------+ | Database | +--------------------+ | information_schema| | customer | | mysql | | performance_schema| | study | | t_employees | +--------------------+ 6 rows in set (0.39sec)  6ï¼šåˆ›å»ºäº†ä¸€ä¸ªdatabase\nmysql\u0026gt; create database test; Query OK, 1 rowaffected (0.10 sec)  7:çœŸçš„æœ‰äº†test\nmysql\u0026gt; show databases; +--------------------+ | Database | +--------------------+ | information_schema| | customer | | mysql | | performance_schema| | study | | t_employees | | test | +--------------------+  8ï¼šä½¿ç”¨teståº“\nmysql\u0026gt; use test; Database changed  9ï¼šæ˜¾ç¤ºè¡¨æ ¼ï¼Œä¸€ä¸ªè¡¨æ ¼éƒ½æ²¡æœ‰\nmysql\u0026gt; show tables; Empty set (0.04 sec)  10ï¼šåˆ›å»ºè¡¨æ ¼ ä¸»é”®ï¼šprimary key ä¸€èˆ¬ä¸€å¼ è¡¨ä¸€ä¸ªä¸»é”®ï¼Œä¸”è¯¥ä¸»é”®ä¸€èˆ¬æ˜¯æ²¡æœ‰ä»»ä½•çš„ç‰©ç†æ„ä¹‰æˆ–è€…ä¸šåŠ¡æ„ä¹‰çš„æ•°å­—ï¼Œæ¯”å¦‚èº«ä»½è¯ID Auto_increment:è‡ªå¢é•¿çš„å¥½å¤„ï¼Œæ˜¯å¯ä»¥ä¸å¿…è®¾ç½®è¯¥åˆ—çš„å€¼ï¼Œè‡ªåŠ¨å¢é•¿ï¼ˆè‡ªåŠ¨å¢é•¿çš„æ­¥æ•°ä¸€èˆ¬ä¸º1ï¼Œä¹Ÿå¯ä»¥æ›´æ”¹ï¼Œshow variables like â€˜%auto_inc%â€™æŸ¥è¯¢å¦‚ä½•è®¾ç½®ã€‚ï¼‰ Engine:ä¸€æŠŠæ˜¯è®¾ç½®ä¸ºinnodbï¼Œä¹Ÿå¯ä»¥æœ‰å…¶ä»–çš„æ¯”å¦‚myisamï¼Œmemoryç­‰ Not nullï¼šæ˜¯æ¯”è¾ƒå¥½çš„è®¾è®¡è¡¨çš„æ–¹å¼ï¼Œæ®è¯´å¯ä»¥åŠ å¿«è¡¨çš„ç´¢å¼•é€Ÿåº¦ï¼Œè¡¨ç¤ºéç©º\nDefault: é»˜è®¤ è¡¨ç¤ºé»˜è®¤å€¼ ä¸€èˆ¬æ˜¯default value;\nmysql\u0026gt; create table apple( -\u0026gt; id int auto_increment primary key, -\u0026gt; name varchar(20) not null default '')engine = innodb; Query OK, 0 rowsaffected (0.69 sec)  10ï¼šçš„ç¡®æ˜¯æœ‰äº†ä¸€å¼ appleè¡¨\nmysql\u0026gt; show tables; +----------------+ | Tables_in_test | +----------------+ | apple | +----------------+ 1 row in set (0.00sec)  11ï¼šæŸ¥çœ‹appleè¡¨ç»“æ„\nmysql\u0026gt; desc apple; +-------+-------------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | +-------+-------------+------+-----+---------+----------------+ | id | int(11) | NO | PRI | NULL | auto_increment | | name | varchar(20) | NO | | | | +-------+-------------+------+-----+---------+----------------+ 2 rows in set (0.09sec)  ç±»ä¼¼çš„æŸ¥çœ‹æ–¹å¼1ï¼š\nmysql\u0026gt; explain apple; +-------+-------------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | +-------+-------------+------+-----+---------+----------------+ | id | int(11) | NO | PRI | NULL | auto_increment | | name | varchar(20) | NO | | | | +-------+-------------+------+-----+---------+----------------+ 2 rows in set (0.00sec)  ç±»ä¼¼çš„æŸ¥çœ‹æ–¹å¼2ï¼š\nmysql\u0026gt; show columns from apple; +-------+-------------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | +-------+-------------+------+-----+---------+----------------+ | id | int(11) | NO | PRI | NULL | auto_increment | | name | varchar(20) | NO | | | | +-------+-------------+------+-----+---------+----------------+ 2 rows in set (0.00sec)  æœ€æœ¬è´¨çš„æŸ¥çœ‹è¡¨ç»“æ„çš„æ–¹å¼ï¼š\nmysql\u0026gt; show create table apple\\G; ***************************1. row *************************** Table: apple Create Table: CREATETABLE `apple` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(20) NOT NULL DEFAULT '', PRIMARY KEY (`id`) ) ENGINE=InnoDBDEFAULT CHARSET=latin1 1 row in set (0.00sec) ERROR: No query specified  13æ’å…¥è¡¨æ•°æ®\nmysql\u0026gt; insert into apple values (1,'tab'),(2,'ctrl'),(3,'shift'); Query OK, 3 rowsaffected (0.39 sec) Records: 3 Duplicates: 0 Warnings: 0  14 æŸ¥çœ‹è¡¨æ•°æ®\nmysql\u0026gt; select *from apple; +----+-------+ | id | name | +----+-------+ | 1 | tab | | 2 | ctrl | | 3 | shift | +----+-------+ 3 rows in set (0.00sec)  15 æ’å…¥æ•°æ®\nmysql\u0026gt; insert into apple(id,name) values(4,'caps'); Query OK, 1 rowaffected (0.08 sec) mysql\u0026gt; insert intoapple values (6,'tomato'); Query OK, 1 rowaffected (0.09 sec)  ä¸ºä»€ä¹ˆè¿™ç§æ–¹å¼ä¸è¡Œå‘¢ï¼Ÿ æ­£åœ¨æŸ¥\nmysql\u0026gt; insert into apple values ('tomato'); ERROR 1136 (21S01):Column count doesn't match value count at row 1 åˆ©ç”¨mysqlçš„æœ€ä½³å·¥å…·help mysql\u0026gt; helpauto_increment; Name:'AUTO_INCREMENT' Description: â€¦. Examples: CREATE TABLE animals( id MEDIUMINT NOT NULL AUTO_INCREMENT, name CHAR(30) NOT NULL, PRIMARY KEY (id) ); INSERT INTO animals(name) VALUES ('dog'),('cat'),('penguin'), ('lax'),('whale'),('ostrich');  æ‰€ä»¥è§£å†³æ–¹æ³•æ˜¯ï¼š\nmysql\u0026gt; insert into apple (name) values(\u0026quot;backspace\u0026quot;); Query OK, 1 rowaffected (0.10 sec) mysql\u0026gt; select * from apple; +----+-----------+ | id | name | +----+-----------+ | 1 | tab | | 2 | ctrl | | 3 | shift | | 4 | caps | | 6 | tomato | | 7 | backspace | +----+-----------+ 6 rows in set (0.00 sec)  16:æ— æ„ä¸­æ·»åŠ äº†ä¸€è¡Œæ²¡æœ‰å¿…è¦çš„æ•°æ®\nmysql\u0026gt; insert into apple (name) values(\u0026quot;luanqibazhao\u0026quot;); Query OK, 1 row affected (0.11 sec) mysql\u0026gt; select * from apple; +----+--------------+ | id | name | +----+--------------+ | 1 | tab | | 2 | ctrl | | 3 | shift | | 4 | caps | | 6 | tomato | | 7 | backspace | | 8 | luanqibazhao | +----+--------------+ 7 rows in set (0.00 sec)  17ï¼šåˆ æ‰id=8çš„æ•°æ®\nmysql\u0026gt; delete * from apple where id=8 andname=\u0026quot;luanqibazhao\u0026quot;; ERROR 1064 (42000): You have an error in your SQL syntax; check themanual that corresponds to your MySQL server version for the right syntax to usenear '* fro m apple where id=8 and name=\u0026quot;luanqibazhao\u0026quot;' at line 1  ä¸ºä»€ä¹ˆä¸è¡Œï¼Ÿ æŸ¥çœ‹å¸®åŠ©\nmysql\u0026gt; help delete; Name: 'DELETE' Description: Syntax: DELETE is a DML statement that removes rows from a table. Single-Table Syntax DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM tbl_name [PARTITION(partition_name,...)] [WHERE where_condition] [ORDER BY ...] [LIMIT row_count] The DELETE statement deletes rows fromtbl_name and returns the number of deleted rows. To check the number ofdeleted rows, call the ROW_COUNT() function describedin  åŸæ¥æ˜¯è¯­æ³•é”™è¯¯\nmysql\u0026gt; delete from apple where id=8 andname=\u0026quot;luanqibazhao\u0026quot;; Query OK, 1 row affected (0.11 sec)  çœŸçš„åˆ æ‰äº†ï¼\nmysql\u0026gt; select * from apple; +----+-----------+ | id | name | +----+-----------+ | 1 |tab | | 2 |ctrl | | 3 |shift | | 4 |caps | | 6 |tomato | | 7 |backspace | +----+-----------+ 6 rows in set (0.00 sec)  18.æœ‰æ—¶å€™æˆ‘ä»¬è¿˜æƒ³ç€æ›´æ–°æŸä¸ªidçš„å€¼\nmysql\u0026gt; update apple set name=caps1 from id=4; ERROR 1064 (42000): You have an error in yourSQL syntax; check the manual that corresponds to your MySQL server version forthe right syntax to use near 'from id =4' at line 1  ä¸ºä»€ä¹ˆæŠ¥é”™å‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨show errors æŸ¥çœ‹æŠ¥é”™ä¿¡æ¯ç±»ä¼¼çš„show warnings;\næŸ¥è¯¢å¸®åŠ©ï¼š\nmysql\u0026gt; help update Name: 'UPDATE' Description: Syntax: Single-table syntax: UPDATE [LOW_PRIORITY] [IGNORE]table_reference SETcol_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ... [WHERE where_condition] [ORDER BY ...] [LIMIT row_count]  å¸®åŠ©ä¸­æ˜¾ç¤ºå¹¶æ²¡æœ‰fromçš„åç¼€ï¼Œäºæ˜¯æŠŠfromæ”¹ä¸ºwhereï¼Œç„¶åå†è®©caps1åŠ ä¸Šå•å¼•å·ã€‚ ç¬¬ä¸€ä¸ªé”™è¯¯ä¿®æ­£åŠ ä¸Šå•å¼•å· ç¬¬äºŒä¸ªé”™è¯¯ä¿®æ­£ fromæ”¹ä¸ºwhere\nmysql\u0026gt; update apple set name='caps1' whereid =4; Query OK, 1 row affected (0.16 sec) Rows matched: 1 Changed: 1 Warnings: 0  åˆ°è¿™è¾¹ä¸ºæ­¢ï¼Œæ˜¯å…¨å¥—çš„mysqlçš„å¸¸ç”¨åŸºæœ¬æŒ‡ä»¤ï¼ŒåŒ…å«å»ºåº“ï¼Œå»ºè¡¨ï¼Œæ’å…¥è¡¨æ•°æ®ï¼Œåˆ é™¤è¡¨æ•°æ®ï¼Œæ›´æ–°è¡¨æ•°æ®ï¼ŒæŸ¥è¯¢åº“ï¼ŒæŸ¥è¯¢è¡¨ï¼ŒæŸ¥è¯¢è¡¨æ•°æ®ã€‚å½“ç„¶å¯èƒ½å°‘äº†æ¸…ç©ºè¡¨æ•°æ®ï¼ˆtruncate table appleï¼‰åˆ é™¤è¡¨ï¼ˆdrop table appleï¼‰,åˆ é™¤åº“ï¼ˆdrop database testï¼‰\næœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¿®æ”¹è¡¨çš„ç»“æ„\näºæ˜¯æˆ‘ä»¬é¦–å…ˆæŸ¥è¯¢è¡¨ï¼Œå¹¶å¢åŠ äº†ä¸€ä¸ªageå­—æ®µï¼Œè¯¥å­—æ®µæ˜¯ä»€ä¹ˆæ•°æ®ç±»å‹ï¼Ÿã€€ä¿è¯æ•°æ®å­˜å‚¨ï¼Œå¹¶é«˜æ•ˆã€‚\nmysql\u0026gt; desc apple; +-------+-------------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | +-------+-------------+------+-----+---------+----------------+ | id | int(11) | NO | PRI | NULL | auto_increment | | name | varchar(20) | NO | | | | +-------+-------------+------+-----+---------+----------------+  å°å§äº†å¦‚ä¸‹çš„æ•´å½¢æ•°æ®çš„è®¾è®¡è€ƒè™‘ï¼š åˆ†ä¸ºä¸¤ç±»ä¸€ç±»æ˜¯ç²¾å‡†æ•°å€¼ç±»å‹ï¼Œå¦ä¸€ç±»ä¸ºéç²¾å‡†å‹ åŒ…å«æ•´æ•°å’Œå°æ•°\nTinyInt :(-128-127 æˆ–è€…unsigned æ˜¯ 0-256) ä¸€èˆ¬ç”¨äº Age å¹´é¾„å­—æ®µï¼ˆæ ‘çš„å¹´é¾„å¯èƒ½è¿‡å¤§\nSmallIntï¼šå…·ä½“çš„æ•°å€¼èŒƒå›´å¯ä»¥ç”¨help smallintæŸ¥åˆ° ä¸€èˆ¬ç”¨äºæŠ€èƒ½å€¼ ids mediumint ä¸€èˆ¬ç”¨äº Auto_increment Row number è¡Œæ•°æ˜¯å¤Ÿçš„ï¼ï¼ è¡Œæ•°ä¸€èˆ¬ä¹Ÿæ˜¯1600è¡Œ æœ€å¤§çš„æš‚æ—¶æœ‰åšåˆ°8äº¿ï¼Œä½†æ˜¯æ•°æ®ä¸€å¤§ä¼šå½±å“ åˆ°mysqlçš„å­˜å‚¨é—®é¢˜ï¼Œæ‰€ä»¥ä¸€èˆ¬æ˜¯åˆ†åº“åˆ†è¡¨ int(integer) ï¼š ä¸€èˆ¬ç”¨äº Auto_increment æ¯”å¦‚ money ï¼Œ salary å°±å¤Ÿäº†ï¼ˆæ¸¸æˆå½“ä¸­çš„é’±ã€€é€šå¸¸ä¼šè¾ƒå¤§ï¼‰\nBigInt : ä¸€èˆ¬ç”¨äºç§‘å­¦è®¡ç®— äººå£æ•° Population\nç²¾å‡†æ€§æœ‰ä¸€ç±»æ¯”è¾ƒç‰¹æ®Šçš„DECIMAL(DEC) DECIMAL(f,g) fè¡¨ç¤ºæ€»çš„ä½æ•° gè¡¨ç¤ºå°æ•°ç‚¹åçš„ä½æ•° æ¯”å¦‚ money DECIMAL(12,2) é‚£ä¹ˆå­˜å‚¨ä¼šæ¶ˆè€— æ•´æ•°éƒ¨åˆ†ï¼šï¼ˆ12-2ï¼‰ = 9(==4ä¸ªå­—èŠ‚ è§„å®š ) + 1\u0026frasl;2 =5 å°æ•°éƒ¨åˆ†ï¼š 2\u0026frasl;2 = 1 æ€»æ¶ˆè€—ï¼š 5+1 =6 ä¸ªå­—èŠ‚\néç²¾å‡†å‹ï¼š Float(p) Real pè¡¨ç¤ºprecise DOUBLE PRECISE\näºæ˜¯æˆ‘ä»¬é€‰æ‹©age å­—æ®µä¸ºtinyintå³å¯ã€‚\nmysql\u0026gt; alter table apple add age tinyint not null default 0; Query OK, 0 rows affected (0.89 sec) Records: 0 Duplicates: 0 Warnings: 0  å†æ¬¡æŸ¥è¯¢è¡¨ç»“æ„\nmysql\u0026gt; desc apple; +-------+-------------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | +-------+-------------+------+-----+---------+----------------+ | id | int(11) | NO | PRI | NULL | auto_increment | | name | varchar(20) | NO | | | | | age | tinyint(4) | NO | | 0 | | +-------+-------------+------+-----+---------+----------------+ 3 rows in set (0.05 sec)  æŸ¥è¯¢è¡¨æ•°æ®ï¼š\nmysql\u0026gt; select * from apple; +----+-----------+-----+ | id | name | age | +----+-----------+-----+ | 1 | tab | 0 | | 2 | ctrl | 0 | | 3 | shift | 0 | | 4 | caps1 | 0 | | 6 | tomato | 0 | | 7 | backspace | 0 | +----+-----------+-----+ 6 rows in set (0.00 sec)  æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¿®æ”¹è¡¨çš„ç»“æ„ äºæ˜¯æˆ‘ä»¬é¦–å…ˆæŸ¥è¯¢è¡¨ï¼Œå¹¶å¢åŠ äº†ä¸€ä¸ªageå­—æ®µï¼Œè¯¥å­—æ®µæ˜¯ä»€ä¹ˆæ•°æ®ç±»å‹ï¼Œæ‰èƒ½ä¿è¯æ›´åŠ é«˜æ•ˆã€‚\nmysql\u0026gt; desc apple; +-------+-------------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | +-------+-------------+------+-----+---------+----------------+ | id | int(11) | NO | PRI | NULL | auto_increment | | name | varchar(20) | NO | | | | +-------+-------------+------+-----+---------+----------------+  åˆ†ä¸ºä¸¤ç±»ä¸€ç±»æ˜¯ç²¾å‡†æ•°å€¼ç±»å‹ï¼Œå¦ä¸€ç±»ä¸ºéç²¾å‡†å‹\nåŒ…å«æ•´æ•°å’Œå°æ•°\nè®¾è®¡è€ƒè™‘ï¼š\nTinyInt :(-128-127 æˆ–è€…unsigned æ˜¯ 0-256)\n ä¸€èˆ¬ç”¨äº Age å¹´é¾„å­—æ®µï¼ˆæ ‘çš„å¹´é¾„å¯èƒ½è¿‡å¤§  SmallIntï¼šï¼ˆå¯ä»¥æŸ¥è¯¢help smallint æ¥æŸ¥çœ‹æ•°å€¼èŒƒå›´ï¼‰\n ä¸€èˆ¬ç”¨äºæŠ€èƒ½å€¼ ids  mediumint ä¸€èˆ¬ç”¨äº Auto_increment\n Row number è¡Œæ•°æ˜¯å¤Ÿçš„ï¼ï¼ è¡Œæ•°ä¸€èˆ¬ä¹Ÿæ˜¯1600è¡Œ æœ€å¤§çš„æš‚æ—¶æœ‰åšåˆ°8äº¿ï¼Œä½†æ˜¯æ•°æ®ä¸€å¤§ä¼šå½±å“ åˆ°mysqlçš„å­˜å‚¨é—®é¢˜ï¼Œæ‰€ä»¥ä¸€èˆ¬æ˜¯åˆ†åº“åˆ†è¡¨  int(integer) ï¼š\n ä¸€èˆ¬ç”¨äº Auto_increment æ¯”å¦‚ money salary å°±å¤Ÿäº†  BigInt : ä¸€èˆ¬ç”¨äºç§‘å­¦è®¡ç®—\n äººå£æ•° Population  ç²¾å‡†æ€§æœ‰ä¸€ç±»æ¯”è¾ƒç‰¹æ®Šçš„DECIMAL(DEC)\nDECIMAL(f,g) fè¡¨ç¤ºæ€»çš„ä½æ•° gè¡¨ç¤ºå°æ•°ç‚¹åçš„ä½æ•°\næ¯”å¦‚ money DECIMAL(12,2)\n é‚£ä¹ˆå­˜å‚¨ä¼šæ¶ˆè€— æ•´æ•°éƒ¨åˆ†ï¼šï¼ˆ12-2ï¼‰ = 9(==4ä¸ªå­—èŠ‚ è§„å®š ) + 1/2 =5 å°æ•°éƒ¨åˆ†ï¼š 2/2 = 1 æ€»æ¶ˆè€—ï¼š 5+1 =6 ä¸ªå­—èŠ‚  éç²¾å‡†å‹ï¼š\nFloat(p)\nReal pè¡¨ç¤ºprecise\nDOUBLE PRECISE\näºæ˜¯æˆ‘ä»¬é€‰æ‹©age å­—æ®µä¸ºtinyintå³å¯ã€‚\nmysql\u0026gt; alter table apple add age tinyint not null default 0; Query OK, 0 rows affected (0.89 sec) Records: 0 Duplicates: 0 Warnings: 0  å†æ¬¡æŸ¥è¯¢è¡¨ç»“æ„\nmysql\u0026gt; desc apple; +-------+-------------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | +-------+-------------+------+-----+---------+----------------+ | id | int(11) | NO | PRI | NULL | auto_increment | | name | varchar(20) | NO | | | | | age | tinyint(4) | NO | | 0 | | +-------+-------------+------+-----+---------+----------------+ 3 rows in set (0.05 sec)  æŸ¥è¯¢ç»“æœï¼š\nmysql\u0026gt; select * from apple; +----+-----------+-----+ | id | name | age | +----+-----------+-----+ | 1 | tab | 0 | | 2 | ctrl | 0 | | 3 | shift | 0 | | 4 | caps1 | 0 | | 6 | tomato | 0 | | 7 | backspace | 0 | +----+-----------+-----+ 6 rows in set (0.00 sec)  charä¸varcharçš„æ¯”è¾ƒ åˆ†ä¸¤ä¸ªéƒ¨åˆ†è¿›è¡Œæ¯”è¾ƒ 1:åˆ›å»ºè¡¨æ—¶å€™ 2:æ·»åŠ è¡¨æ•°æ®çš„æ—¶å€™\næŸ¥çœ‹helpå¸®åŠ©ä¿¡æ¯\nmysql\u0026gt; help char Name: 'CHAR' Description: [NATIONAL] CHAR[(M)] [CHARACTER SET charset_name] [COLLATE collation_name] A fixed-length string that is always right-padded with spaces to the specified length when stored. M represents the column length in characters. The range of M is 0 to 255. If M is omitted, the length is 1. *Note*: Trailing spaces are removed when CHAR values are retrieved unless the PAD_CHAR_TO_FULL_LENGTH SQL mode is enabled.  sql_modeçš„pad_char_to_full_length,è¿™æ˜¯ä¸€ä¸ªç‰¹åˆ«çš„æ¨¡å¼ï¼Œå°†ä¼šåœ¨ä¸‹æ–‡åˆ—å‡ºï¼Œè‡³äºM is from 0 to 255æ˜¯æŒ‡char(256)ä¼šæŠ¥é”™ï¼\nå†æ¬¡æŸ¥çœ‹varcharçš„å¸®åŠ©ä¿¡æ¯\nmysql\u0026gt; help varchar Name: 'VARCHAR' Description: [NATIONAL] VARCHAR(M) [CHARACTER SET charset_name] [COLLATE collation_name] A variable-length string. M represents the maximum column length in characters. The range of M is 0 to 65,535. The effective maximum length of a VARCHAR is subject to the maximum row size (65,535 bytes, which is shared among all columns) and the character set used. For example, utf8 characters can require up to three bytes per character, so a VARCHAR column that uses the utf8 character set can be declared to be a maximum of 21,844 characters. See  å¯ä»¥çœ‹åˆ°æœ€å¤§é•¿åº¦ä¸º 65535ï¼Œ å¹¶ä¸”åœ¨utf8å­—ç¬¦çš„æ—¶å€™ï¼ˆä¹Ÿå°±æ˜¯national varchar)çš„æƒ…å†µä¸‹ï¼Œæœ€å¤§é˜´è™š21844, ä¹Ÿå°±æ˜¯national varchar(21845)ä¼šæŠ¥é”™ 21844*3 =65532ï¼ˆè®¡ç®—å™¨ï¼‰ï¼ˆå¯èƒ½è¿˜å‰©ä¸‹3ä¸ªå­—ç¬¦ï¼Œæ‘†æ”¾éœ€è¦çš„è®¾ç½®ç¬¦ï¼‰ è¯´æ˜å½“å‰æˆ‘çš„ç‰ˆæœ¬çš„mysql 5.6çš„utfæ‰€å ç”¨çš„æ˜¯ä¸‰ä¸ªå­—èŠ‚ï¼Œæ®è¯´æ–°ç‰ˆæœ¬çš„æ˜¯4ä¸ªå­—èŠ‚çš„\næ–°å»ºä¸€ä¸ªæµ‹è¯•çš„orangeè¡¨\nmysql\u0026gt; create table orange( -\u0026gt; col1 char(6) not null default '', -\u0026gt; col2 varchar(65510)); Query OK, 0 rows affected, 1 warning (0.55 sec)  \u0026mdash;ä¹ æƒ¯çš„æŸ¥è¯¢ä¸€ä¸‹è¡¨çš„æ ·å¼\næ–°å¢ä¸€ä¸ªvarchar(100)å­—æ®µåšæµ‹è¯•\nmysql\u0026gt; alter table orange add col3 varchar(100); ERROR 1118 (42000): Row size too large. The maximum row size for the used tabl type, not counting BLOBs, is 65535. This includes storage overhead, check the nual. You have to change some columns to TEXT or BLOBs mysql\u0026gt; alter table orange add col3 varchar(100);  ä¸ºä»€ä¹ˆï¼Ÿå†æ·»åŠ varchar(100ï¼‰åˆ™ä¼šä¸€ç›´æŠ¥é”™.Maximum(varchar)=65535 ç°åœ¨ä½¿ç”¨äº†65510 ï¼Œå†åŠ ä¸Š25å‘¢ï¼Ÿå¦‚æœæ”¹ä¸ºvarcahr\nmysql\u0026gt; alter table orange add col3 varchar(100); Query OK, 0 rows affected (0.85 sec) Records: 0 Duplicates: 0 Warnings: 0  mysql\u0026gt; alter table orange add col3 varchar(22); ERROR 1118 (42000): Row size too large. The maximum row size for the us type, not counting BLOBs, is 65535. This includes storage overhead, che nual. You have to change some columns to TEXT or BLOBs mysql\u0026gt; alter table orange add col3 varchar(1); Query OK, 0 rows affected (0.69 sec) Records: 0 Duplicates: 0 Warnings: 0  ä¸€ç›´æŠ¥é”™ï¼ï¼\nå†æ¬¡æ˜¾ç¤ºè¡¨ç»“æ„\nmysql\u0026gt; desc orange; +-------+----------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------------+------+-----+---------+-------+ | col1 | char(6) | NO | | | | | col2 | varchar(65510) | YES | | NULL | | | col3 | varchar(1) | YES | | NULL | | +-------+----------------+------+-----+---------+-------+ 3 rows in set (0.00 sec)  ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\nmysql\u0026gt; show variables like '%sql_mode%'; +---------------+-------------------+ | Variable_name | Value | +---------------+-------------------+ | sql_mode | STRICT_ALL_TABLES | +---------------+-------------------+ 1 row in set (0.00 sec)  å½“å‰çš„sqlæ¨¡å¼æ˜¯ä¸¥æ ¼è¡¨æ¨¡å¼ï¼Œsql_modeå˜é‡ç‰¹åˆ«é‡è¦ï¼Œæ‰€ä»¥æˆ‘è¿›è¡Œäº†æµ‹è¯•ï¼å‡è®¾æˆ‘ä»¬ç°åœ¨æ”¹å›å»é»˜è®¤çš„ç©ºæ¨¡å¼ï¼›\nmysql\u0026gt; set sql_mode=''; Query OK, 0 rows affected (0.00 sec) å¤åˆ¶ä»£ç  é‡æ–°åˆ›å»ºä¸€å¼ é¦™è•‰è¡¨banana: mysql\u0026gt; create table banana( -\u0026gt; col1 char(6), -\u0026gt; col2 varchar(65510)); Query OK, 0 rows affected (0.32 sec)  æ˜¾ç¤ºè¡¨ç»“æ„ä¿¡æ¯ï¼š\nmysql\u0026gt; desc banana; +-------+----------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+----------------+------+-----+---------+-------+ | col1 | char(6) | YES | | NULL | | | col2 | varchar(65510) | YES | | NULL | | +-------+----------------+------+-----+---------+-------+ 2 rows in set (0.01 sec)  å‘ç°è¿˜æ˜¯ä¼šæŠ¥é”™çš„ï¼š\nmysql\u0026gt; alter table banana add col3 varchar(100); ERROR 1118 (42000): Row size too large. The maximum row size for the used tabl type, not counting BLOBs, is 65535. This includes storage overhead, check the nual. You have to change some columns to TEXT or BLOBs  \u0026mdash;ç»ˆäºç»™æˆ‘æŠ¥é”™äº†\nmysql\u0026gt; alter table orange add col5 char(258); ERROR 1074 (42000): Column length too big for column 'col5' (max = 255); use BLO B or TEXT instead mysql\u0026gt; alter table orange add col6 char(65537); ERROR 1074 (42000): Column length too big for column 'col6' (max = 255); use BLO B or TEXT instead  æ€»ç»“varcharæœ€å¤§é‡ä¸èƒ½è¶…è¿‡65530.ã€‚ã€‚charä¸èƒ½è¶…è¿‡256.ã€‚ã€‚ ä¸Šé¢æ˜¯ä¸€äº›åˆ›å»ºcharå’Œvarcharè¡¨çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°çš„ä¸€äº›æƒ…å†µã€‚ æ¥ä¸‹æ¥æµ‹è¯•æ·»åŠ æ•°æ®ï¼š\nmysql\u0026gt; alter table banana modify col2 varchar(6); Query OK, 0 rows affected (0.81 sec) Records: 0 Duplicates: 0 Warnings: 0 mysql\u0026gt; desc banana; +-------+------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+------------+------+-----+---------+-------+ | col1 | char(6) | YES | | NULL | | | col2 | varchar(6) | YES | | NULL | | +-------+------------+------+-----+---------+-------+ 2 rows in set (0.02 sec)  ä¸æ˜¯ç‰¹åˆ«èƒ½å¤Ÿæ˜¾ç¤ºå…¶ä¸­çš„åŒºåˆ«ï¼š\nmysql\u0026gt; insert into banana values('abc','abc'); Query OK, 1 row affected (0.04 sec) mysql\u0026gt; select * from banana; +--------+------+ | col1 | col2 | +--------+------+ | abc | abc | +--------+------+ 1 row in set (0.00 sec)  å¦‚æœåŠ å…¥\nmysql\u0026gt; select concat(col1,'-'),concat(col2,'-') from banana; +------------------+------------------+ | concat(col1,'-') | concat(col2,'-') | +------------------+------------------+ | abc - | abc- | +------------------+------------------+ 1 row in set (0.00 sec)  å†æ¬¡æ¯”è¾ƒ\nmysql\u0026gt; select length(col1),length(col2) from banana; +--------------+--------------+ | length(col1) | length(col2) | +--------------+--------------+ | 6 | 3 | +--------------+--------------+ 1 row in set (0.02 sec)  å¯è§åœ¨sql_mode=pad_char_to_full_lengthçš„æƒ…å†µä¸‹ï¼Œcharå³ä½¿èµ‹çš„å€¼æ˜¯abcä¸‰ä¸ªå­—ç¬¦ï¼Œè¯¥ç±»å‹ä¹Ÿä¼šå¡«å……åˆ°6ä¸ªå­—ç¬¦ è€Œvarcharåˆ™æ˜¯ä¸‰ä¸ªå­—ç¬¦å°±ä¸‰ä¸ªå­—ç¬¦ è€Œå¦‚æœsql_mode = \u0026ldquo; å‘¢ï¼Ÿ sql_mode =\u0026lsquo;strict_all_tables\u0026rsquo;å‘¢ï¼Ÿ\nå¦‚æœæ˜¯sql_mode= \u0026ldquo;\nmysql\u0026gt; set sql_mode=''; Query OK, 0 rows affected (0.00 sec) mysql\u0026gt; select concat(col1,'-'),concat(col2,'-') from banana; +------------------+------------------+ | concat(col1,'-') | concat(col2,'-') | +------------------+------------------+ | abc- | abc- | +------------------+------------------+ 1 row in set (0.00 sec) mysql\u0026gt; select length(col1),length(col2) from banana; +--------------+--------------+ | length(col1) | length(col2) | +--------------+--------------+ | 3 | 3 | +--------------+--------------+ 1 row in set (0.00 sec)  å¦‚æœæ˜¯sql_mode=strict_all_tables?\nmysql\u0026gt; set sql_mode='strict_all_tables'; Query OK, 0 rows affected (0.00 sec) mysql\u0026gt; select concat(col1,'-'),concat(col2,'-') from banana; +------------------+------------------+ | concat(col1,'-') | concat(col2,'-') | +------------------+------------------+ | abc- | abc- | +------------------+------------------+ 1 row in set (0.00 sec) mysql\u0026gt; select length(col1),length(col2) from banana; +--------------+--------------+ | length(col1) | length(col2) | +--------------+--------------+ | 3 | 3 | +--------------+--------------+ 1 row in set (0.00 sec)  å¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥å°ç»“ åœ¨pad_char_to_full_lengthçš„æƒ…å†µä¸‹ï¼Œcharä¼šè‡ªåŠ¨å¡«å……åˆ°å®šä¹‰çš„å­—ç¬¦ï¼Œè€Œvarcharä¸ä¼š åœ¨å…¶ä»–çš„sql_modeæ¨¡å¼ä¸‹ï¼Œcharå’Œvarcharæ„Ÿè§‰æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ« varcharä¸€ä¸ªè¡¨çš„æœ€å¤§é•¿åº¦æ˜¯65535 charåœ¨ä¸€ä¸ªè¡¨çš„æœ€å¤§é•¿åº¦æ˜¯255\næ‰€åœ¨åœ¨å­˜å‚¨ç©ºé—´å…è®¸çš„æƒ…å†µä¸‹ï¼Œå°½é‡ä½¿ç”¨char åœ¨éœ€è¦æ›´å¤§çš„æ–‡æœ¬å¯ä»¥ç”¨blodæˆ–è€…textã€‚\nå­—ç¬¦ä¸²ç±»å‹ï¼Œä¸€èˆ¬ä½¿ç”¨charè¾ƒå¤šã€‚ char varchar smallblod,mediumblod,longblod smalltext,mediumtext,longtext\næšä¸¾ç±»å­—æ®µçš„åˆ›å»ºæ˜¯ä¸ºäº†è®©ç”¨æˆ·åªèƒ½é€‰å–æŸä¸ªå€¼èŒƒå›´ã€‚ åˆ›å»ºä¸€ä¸ªæšä¸¾è¡¨è¿›è¡Œæµ‹è¯•\nmysql\u0026gt; create table enum_t( -\u0026gt; col1 enum('F','M','UN')); Query OK, 0 rows affected (0.29 sec)  æ’å…¥æ•°æ®ï¼š\nmysql\u0026gt; insert into enum_t values('F'); Query OK, 1 row affected (0.10 sec) mysql\u0026gt; insert into enum_t values('M'); Query OK, 1 row affected (0.06 sec) mysql\u0026gt; insert into enum_t values('F,M'); Query OK, 1 row affected, 1 warning (0.10 sec) mysql\u0026gt; insert into enum_t values('UN'); Query OK, 1 row affected (0.07 sec) mysql\u0026gt; insert into enum_t values('F,M,UN'); Query OK, 1 row affected, 1 warning (0.04 sec)  æ˜¾ç¤ºæ•°æ®ï¼š\nmysql\u0026gt; select col1,col1+0 from enum_t; +------+--------+ | col1 | col1+0 | +------+--------+ | F | 1 | | M | 2 | | | 0 | | UN | 3 | | | 0 | +------+--------+ 5 rows in set (0.00 sec)  å‘ç°ç¬¬ä¸‰åˆ—å’Œç¬¬äº”åˆ—çš„col1çš„å­—æ®µå€¼ç¼ºå¤±ï¼Œæ˜¯å› ä¸ºæ²¡æœ‰åœ¨æšä¸¾ç±»ä¸­è¯¥å€¼ï¼ç„¶è€Œmysqlè¿˜æœ‰å¦å¤–ä¸€ç§ç±»å‹å«åšsetï¼Œå´æ˜¯å¯ä»¥å­˜åœ¨ä¸åŒçš„æƒ…å†µ\n\u0026mdash;\u0026mdash;å†æ¬¡è¿”å›åˆ°sql_modeæœ‰é—®é¢˜çš„é‚£éƒ¨åˆ†\nmysql\u0026gt; desc enum_t; +-------+--------------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+--------------------+------+-----+---------+-------+ | col1 | enum('F','M','UN') | YES | | NULL | | +-------+--------------------+------+-----+---------+-------+ 1 row in set (0.00 sec) mysql\u0026gt; insert into enum_t values('a'); Query OK, 1 row affected, 1 warning (0.09 sec)  \u0026mdash;æœ‰è­¦å‘Šä¸€èˆ¬æ˜¯å’Œsql_modeæœ‰å…³ï¼Œå¦‚æœæ˜¯strict_all_tablesä¸€èˆ¬æ˜¯error\n\u0026mdash;è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå’Œenumç‰¹åˆ«åƒçš„set\nmysql\u0026gt; create table set_t( -\u0026gt; col1 set('F','M','UN')); Query OK, 0 rows affected (0.25 sec)  æ’å…¥è¡¨æ•°æ®\nmysql\u0026gt; insert into set_t values('F'); Query OK, 1 row affected (0.07 sec) mysql\u0026gt; insert into set_t values('M'); Query OK, 1 row affected (0.08 sec) mysql\u0026gt; insert into set_t values('F,M'); Query OK, 1 row affected (0.08 sec) mysql\u0026gt; insert into set_t values('UN'); Query OK, 1 row affected (0.05 sec) mysql\u0026gt; insert into set_t values('F,M,UN'); Query OK, 1 row affected (0.07 sec)  æ˜¾ç¤ºè¡¨æ•°æ®ä¿¡æ¯ï¼š\nmysql\u0026gt; select col1,col1+0 from set_t; +--------+--------+ | col1 | col1+0 | +--------+--------+ | F | 1 | | M | 2 | | F,M | 3 | | UN | 4 | | F,M,UN | 7 | +--------+--------+ 5 rows in set (0.00 sec)  å¯ä»¥å‘ç°F,Mè™½ç„¶æ²¡æœ‰å®šä¹‰ï¼Œä½†æ˜¯ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨ï¼ï¼ï¼åªè¦ä¸é‡å¤éƒ½å¯ä»¥åœ¨setä¸­å‡ºç°ï¼Œå¹¶éµå¾ªä¸‹é¢çš„è®¡ç®—æ–¹å¼ï¼š å› ä¸ºåœ¨setæ¨¡å¼ä¸‹ï¼Œé»˜è®¤å­˜å‚¨å®¤ F 1 M 10 UN 100 æ‰€ä»¥F,M 11 F,M,UN 111\nå¼•å…¥äº†äºŒè¿›åˆ¶ï¼Œäºæ˜¯å­¦ä¹ äº†mysqlç‰¹æ®Šçš„ä¸€ç§äºŒè¿›åˆ¶ç±»å‹binary,å’Œbitç±»å‹ï¼ˆbit(4) å°±è¡¨ç¤ºæœ€å¤§å€¼ä¸º1111 ä¹Ÿå°±æ˜¯15ï¼‰\nmysql\u0026gt; help binary Name: 'BINARY' Description: BINARY(M) The BINARY type is similar to the CHAR type, but stores binary byte strings rather than nonbinary character strings. M represents the column length in bytes.  å¯ä»¥çœ‹åˆ°binaryç±»ä¼¼äºcharåªä¸è¿‡æ˜¯å­˜å‚¨äºŒè¿›åˆ¶å½¢å¼\nmysql\u0026gt; create table binary_t( -\u0026gt; col1 binary(4)); Query OK, 0 rows affected (0.33 sec)  æ’å…¥æ•°æ®ï¼šè¶…è¿‡5ä¸ªå­—èŠ‚å°±é”™è¯¯äº†\nmysql\u0026gt; desc binary_t; +-------+-----------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+-----------+------+-----+---------+-------+ | col1 | binary(4) | YES | | NULL | | +-------+-----------+------+-----+---------+-------+ 1 row in set (0.05 sec) mysql\u0026gt; insert into binary_t values('a'); Query OK, 1 row affected (0.07 sec) mysql\u0026gt; insert into binary_t values('abcd'); Query OK, 1 row affected (0.07 sec) mysql\u0026gt; insert into binary_t values('abcde'); ERROR 1406 (22001): Data too long for column 'col1' at row 1  ä¸Šè¿°çš„è¿‡ç¨‹ç±»ä¼¼äºcharï¼Œä½†æ˜¯binaryå’Œcharåˆ°åº•ä½“ç°åœ¨å“ªé‡Œçš„åŒºåˆ«ï¼Ÿ\nmysql\u0026gt; select * from binary_t; +------+ | col1 | +------+ | a | | abcd | +------+ 2 rows in set (0.00 sec) mysql\u0026gt; select col1='a' from binary_t; +----------+ | col1='a' | +----------+ | 0 | | 0 | +----------+ 2 rows in set (0.00 sec)  ä¸ºä»€ä¹ˆæ˜æ˜æœ‰aå´æ˜¯æ— æ³•æ‰¾åˆ°ï¼Ÿæ˜¯ä¸æ˜¯è·Ÿsql_modeæœ‰å…³ç³»ï¼Ÿ\nmysql\u0026gt; show variables like '%sql_mode%'; +---------------+-------------------+ | Variable_name | Value | +---------------+-------------------+ | sql_mode | STRICT_ALL_TABLES | +---------------+-------------------+ 1 row in set (0.00 sec)  é‡æ–°è®¾ç½®ä¸ºç©ºçŠ¶æ€ï¼ˆé»˜è®¤ä¸€èˆ¬æ˜¯ç©ºçš„çŠ¶æ€ï¼‰ï¼Œå†æ¬¡å°è¯•ï¼š\nmysql\u0026gt; select * from binary_t; +------+ | col1 | +------+ | a | | abcd | +------+ 2 rows in set (0.00 sec) mysql\u0026gt; select col1='a' from binary_t; +----------+ | col1='a' | +----------+ | 0 | | 0 | +----------+ 2 rows in set (0.00 sec)  å¯ä»¥çœ‹åˆ°ä¾ç„¶ä¸è¡Œï¼Œè¿™å°±æ˜¯äºŒè¿›åˆ¶çš„ä¸€äº›å°åŒºåˆ«ï¼Œä¸æ˜¯ç±»ä¼¼äºcharåœ¨pad_char_to_full_length(ä¸“é—¨é’ˆå¯¹char) è¿™æ—¶å€™éœ€è¦ç”¨ä¸“é—¨çš„æµ‹è¯•æ–¹æ³•\nmysql\u0026gt; select col1='a\\0\\0\\0' from binary_t; +----------------+ | col1='a\\0\\0\\0' | +----------------+ | 1 | | 0 | +----------------+ 2 rows in set (0.00 sec)  å¯ä»¥äº†ï¼ï¼å› ä¸ºbinaryæ˜¯ä¸ºé»˜è®¤åŠ ä¸Š\\0\\0\\0 ï¼Œè€Œcharåœ¨sql=\u0026lsquo;pad_char_to_full_length\u0026rsquo;ä¼šé»˜è®¤åŠ ä¸Šç©ºæ ¼ã€‚è¿™å°±æ˜¯ä¸€ä¸ªåŒºåˆ«ï¼Œæ…ç”¨ï¼Œä¸€èˆ¬ç”¨charå³å¯ï¼Œ ä¹Ÿè®¸binaryå¯èƒ½æ˜¯å­˜å‚¨å°‘å ç©ºé—´ã€‚\nä¸€ä¸ªç‰¹åˆ«çš„æ•°æ®ç±»å‹Bitçš„ç”¨æ³•ï¼ˆä»–æ˜¯ä¸€ä¸ªè·Ÿè®¡ç®—æœºçš„æœ€å°å•å…ƒbitä½æœ‰å…³ç³»çš„ï¼‰ æ‰‹åˆç—’äº†ï¼Œå¿…é¡»å†æ¥ä¸ªbit_tä¸å¯\nmysql\u0026gt; create table bit_t( -\u0026gt; ids bit(4)); Query OK, 0 rows affected (0.20 sec)  \u0026ndash;bit(4) yä¹Ÿå°±æ˜¯è¯´ 1111 æœ€å¤šæ˜¯ï¼Œç±»ä¼¼åœ°int(4) char(4) varchar(4) binary(4) ç­‰æœ‰ç€å…¶ç‰¹æ®Šçš„å«ä¹‰\n\u0026mdash;ç”¨ä¸¥æ ¼æ¨¡å¼æµ‹è¯•ä¸€ä¸‹\nmysql\u0026gt; help int Name: 'INT' Description: INT[(M)] [UNSIGNED] [ZEROFILL] mysql\u0026gt; insert into bit_t values(1); Query OK, 1 row affected (0.11 sec)  æ˜¾ç¤ºæ•°æ®ï¼š\nmysql\u0026gt; select ids,ids+0,bin(ids) from bit_t; +------+-------+----------+ | ids | ids+0 | bin(ids) | +------+-------+----------+ | \u0001 | 1 | 1 | +------+-------+----------+ 1 row in set (0.05 sec)  æ˜¾ç¤ºäºŒè¿›åˆ¶ä¿¡æ¯ä¸€èˆ¬æ˜¯ä½¿ç”¨+0è¿›è¡Œæ•°æ®éšå¼è½¬æ¢ï¼Œæˆ–è€…ç”¨binå‡½æ•°ï¼›\n\u0026ndash;å†æŸ¥ä¸€ä¸‹è¡¨ç»“æ„\nmysql\u0026gt; desc bit_t; +-------+--------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+--------+------+-----+---------+-------+ | ids | bit(4) | YES | | NULL | | +-------+--------+------+-----+---------+-------+ 1 row in set (0.00 sec)  å†æ¬¡æ’å…¥è¡¨æ•°æ®ï¼š\nmysql\u0026gt; insert into bit_t values(1); Query OK, 1 row affected (0.09 sec) mysql\u0026gt; insert into bit_t values(0); Query OK, 1 row affected (0.09 sec) mysql\u0026gt; insert into bit_t values(3); Query OK, 1 row affected (0.05 sec)  æ˜¾ç¤ºæ–°çš„è¡¨çš„ä¿¡æ¯\nmysql\u0026gt; select ids,ids+0,bin(ids) from bit_t; +------+-------+----------+ | ids | ids+0 | bin(ids) | +------+-------+----------+ | \u0001 | 1 | 1 | | \u0001 | 1 | 1 | | | 0 | 0 | | \u0003 | 3 | 11 | +------+-------+----------+ 4 rows in set (0.00 sec)  å½“æ’å…¥æ•°æ®è¿‡å¤§åˆ™æŠ¥é”™ï¼š\nmysql\u0026gt; insert into bit_t values(16); ERROR 1406 (22001): Data too long for column 'ids' at row 1 mysql\u0026gt; insert into bit_t values(15); Query OK, 1 row affected (0.11 sec) mysql\u0026gt; select ids,ids+0,bin(ids) from bit_t; +------+-------+----------+ | ids | ids+0 | bin(ids) | +------+-------+----------+ | \u0001 | 1 | 1 | | \u0001 | 1 | 1 | | | 0 | 0 | | \u0003 | 3 | 11 | | \u000f | 15 | 1111 | +------+-------+----------+ 5 rows in set (0.00 sec)  æœ€å¤§çš„çš„ç¡®æ˜¯4ä¸ª1111 æ»¡è¶³äº†æˆ‘ä»¬çš„æ„¿æœ›ã€‚\nmysql\u0026gt; select ids,ids+0,length(bin(ids)) from bit_t; +------+-------+------------------+ | ids | ids+0 | length(bin(ids)) | +------+-------+------------------+ | \u0001 | 1 | 1 | | \u0001 | 1 | 1 | | | 0 | 1 | | \u0003 | 3 | 2 | | \u000f | 15 | 4 | +------+-------+------------------+ 5 rows in set (0.06 sec) mysql\u0026gt; select ids,ids+0,length(ids+0),bin(ids),length(bin(ids)) from bit_t; +------+-------+---------------+----------+------------------+ | ids | ids+0 | length(ids+0) | bin(ids) | length(bin(ids)) | +------+-------+---------------+----------+------------------+ | \u0001 | 1 | 1 | 1 | 1 | | \u0001 | 1 | 1 | 1 | 1 | | | 0 | 1 | 0 | 1 | | \u0003 | 3 | 1 | 11 | 2 | | \u000f | 15 | 2 | 1111 | 4 | +------+-------+---------------+----------+------------------+ 5 rows in set (0.00 sec)  \u0026mdash;\u0026ndash;ä¸ä¸€æ ·çš„æ’å…¥é¢\nmysql\u0026gt; insert into bit_t values (4),(5),(6); Query OK, 3 rows affected (0.03 sec) Records: 3 Duplicates: 0 Warnings: 0 ----insert into bit_t set ids =4 mysql\u0026gt; insert into bit_t set ids=7; Query OK, 1 row affected (0.05 sec)  å†æ¬¡æ˜¾ç¤ºæ–°çš„æ•°æ®\nmysql\u0026gt; select ids,ids+0,length(ids+0),bin(ids),length(bin(ids)) from bit_t; +------+-------+---------------+----------+------------------+ | ids | ids+0 | length(ids+0) | bin(ids) | length(bin(ids)) | +------+-------+---------------+----------+------------------+ | \u0001 | 1 | 1 | 1 | 1 | | \u0001 | 1 | 1 | 1 | 1 | | | 0 | 1 | 0 | 1 | | \u0003 | 3 | 1 | 11 | 2 | | \u000f | 15 | 2 | 1111 | 4 | | \u0004 | 4 | 1 | 100 | 3 | | \u0005 | 5 | 1 | 101 | 3 | | \u0006 | 6 | 1 | 110 | 3 | | | 7 | 1 | 111 | 3 | +------+-------+---------------+----------+------------------+ 9 rows in set (0.00 sec)  \u0026mdash;\u0026ndash;é€šè¿‡binå‡½æ•°è¿›è¡Œé€‰æ‹©\nmysql\u0026gt; select bin(ids) from bit_t where ids=7; +----------+ | bin(ids) | +----------+ | 111 | +----------+ 1 row in set (0.00 sec) mysql\u0026gt; select bin(ids) from bit_t where bin(ids)=111; +----------+ | bin(ids) | +----------+ | 111 | +----------+ 1 row in set (0.00 sec) mysql\u0026gt; delete from bit_t where bin(ids)=1; Query OK, 2 rows affected (0.09 sec)  æ˜¾ç¤ºæœ€æ–°çš„æ•°æ®ï¼š\nmysql\u0026gt; select ids,ids+0,length(ids+0),bin(ids),length(bin(ids)) from bit_t; +------+-------+---------------+----------+------------------+ | ids | ids+0 | length(ids+0) | bin(ids) | length(bin(ids)) | +------+-------+---------------+----------+------------------+ | | 0 | 1 | 0 | 1 | | \u0003 | 3 | 1 | 11 | 2 | | \u000f | 15 | 2 | 1111 | 4 | | \u0004 | 4 | 1 | 100 | 3 | | \u0005 | 5 | 1 | 101 | 3 | | \u0006 | 6 | 1 | 110 | 3 | | | 7 | 1 | 111 | 3 | +------+-------+---------------+----------+------------------+ 7 rows in set (0.00 sec)  æ‰€ä»¥ ä¸€å¥è¯ï¼šbitè¦æ³¨æ„ä½æ•°å’Œ binå‡½æ•°çš„ä½¿ç”¨ï¼\nåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½æ¥è§¦æ—¶é—´è¿™ä¸€æ•°æ®ç±»å‹äºæ˜¯è€ƒå¯Ÿäº†æŸ¥è¯¢äº†year,time,datetime,timestampç­‰ä¿¡æ¯ï¼Œæ˜¾ç¤ºå…¶å€¼çš„èŒƒå›´\nmysql\u0026gt; help year; Name: 'YEAR' Description: Syntax: YEAR(date) Returns the year for date, in the range 1000 to 9999, or 0 for the \u0026quot;zero\u0026quot; date. mysql\u0026gt; help Timestamp Name: 'TIMESTAMP' Description: TIMESTAMP[(fsp)] A timestamp. The range is '1970-01-01 00:00:01.000000' UTC to '2038-01-19 03:14:07.999999' UTC. TIMESTAMP values are stored as the mysql\u0026gt; help datetime Name: 'DATETIME' Description: DATETIME[(fsp)] A date and time combination. The supported range is '1000-01-01 00:00:00.000000' to '9999-12-31 23:59:59.999999'. MySQL displays mysql\u0026gt; help date Name: 'DATE' Description: DATE A date. The supported range is '1000-01-01' to '9999-12-31'. MySQL mysql\u0026gt; help time Name: 'TIME' Description: TIME[(fsp)] A time. The range is '-838:59:59.000000' to '838:59:59.000000'. MySQL  åˆ›å»ºä¸€å¼ è¡¨year_tè¿›è¡Œæµ‹è¯•ï¼š\nmysql\u0026gt; create table year_t( -\u0026gt; col1 year(2), -\u0026gt; col2 year(4), -\u0026gt; col3 year(100)); Query OK, 0 rows affected, 2 warnings (0.27 sec)  æ˜¾ç¤ºè¡¨ç»“æ„ä¿¡æ¯ï¼Œå‘ç°éƒ½æ˜¯year(4)çš„å¤§å°ç»“æ„\nmysql\u0026gt; desc year_t; +-------+---------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+---------+------+-----+---------+-------+ | col1 | year(4) | YES | | NULL | | | col2 | year(4) | YES | | NULL | | | col3 | year(4) | YES | | NULL | | +-------+---------+------+-----+---------+-------+ 3 rows in set (0.06 sec)  æ’å…¥è¡¨ä¿¡æ¯ï¼š\nmysql\u0026gt; insert into year_t values(77,2000,2055); Query OK, 1 row affected (0.06 sec)  æ˜¾ç¤ºè¡¨æ•°æ®ï¼š\nmysql\u0026gt; select * from year_t; +------+------+------+ | col1 | col2 | col3 | +------+------+------+ | 1977 | 2000 | 2055 | +------+------+------+ 1 row in set (0.00 sec)  ä¸ºä»€ä¹ˆæ˜¯1977ï¼Ÿ è€Œä¸æ˜¯2077ï¼Ÿ æŸ¥è¯¢åˆ°ä¸€ä¸ªç»“æœï¼š year(4) 1901-2155 year(2) 1970-2069 year 1000-9999ï¼ˆè¿™ç§è§£é‡Šæœ‰ç‚¹ä¸å¯é ï¼‰\nä¸ºä»€ä¹ˆå†è¿›è¡Œdesc year_t æ˜¾ç¤ºçš„å¤šæ˜¯year(4)æš‚æ—¶æœªæ¸…é™¤ã€‚æ®æ¨æµ‹ï¼Œæ˜¾ç¤ºæœ‰é—®é¢˜ï¼ŒåŸºæœ¬å’Œsql_modeç›¸å…³\nmysql\u0026gt; show variables like '%sql_mode%'; +---------------+------------------------+ | Variable_name | Value | +---------------+------------------------+ | sql_mode | NO_ENGINE_SUBSTITUTION | +---------------+------------------------+ 1 row in set (0.00 sec)  \u0026mdash;\u0026ndash;æ€»ç»“sql_modeçš„8ç§é£æ ¼ SET sql_mode =\u0026ldquo;; \u0026mdash;default style SET sql_mode=\u0026lsquo;PAD_CHAR_TO_FULL_LENGTH\u0026rsquo;; \u0026ndash; ä¼šå¡«å……åˆ°ä¸€å®šçš„é•¿åº¦ SET sql_mode = \u0026lsquo;STRICT_ALL_TABLES\u0026rsquo;; \u0026ndash; ä¹Ÿå°±æ˜¯å½“è¶…è¿‡æœ€å¤§é•¿åº¦ ä¼šæŠ¥é”™è€Œä¸æ˜¯æˆªæ–­ SET sql_mode = \u0026lsquo;STRICT_ALL_TABLES,ERROR_FOR_DIVISION_BY_ZERO\u0026rsquo;; SET sql_mode = \u0026lsquo;STRICT_ALL_TABLES, NO_ZERO_DATE,NO_ZERO_IN_DATE\u0026rsquo;; SET sql_mode = \u0026lsquo;ALLOW_INVALID_DATES\u0026rsquo;; \u0026mdash; å…è®¸æ— æ•ˆçš„æ—¥æœŸ SET sql_mode = \u0026lsquo;STRICT_ALL_TABLES,ALLOW_INVALID_DATES\u0026rsquo;; SET sql_mode = â€˜real_as_floatâ€™; ï¼ˆreal_as_float æ˜¯æŒ‡é»˜è®¤æƒ…å†µreal(10,2)è€Œä¸èƒ½ä½¿ç”¨real(10) å› ä¸ºreal(10,2)å…¶å®ç­‰æ•ˆäºdoubleï¼Œåªæœ‰è®¾ç½®real_as_floatä¹‹åæ‰å¯ä»¥ä½¿ç”¨real(10)ï¼‰\næ”¹æˆä¸¥æ ¼æ¨¡å¼å†æ¬¡å°è¯•ï¼š\nmysql\u0026gt; set sql_mode='strict_all_tables'; Query OK, 0 rows affected (0.06 sec)  å†æ¬¡æ˜¾ç¤ºæ–°çš„æ¨¡å¼ä¸‹çš„è¡¨ç»“æ„ä¿¡æ¯ï¼š\nmysql\u0026gt; desc year_t; +-------+---------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+---------+------+-----+---------+-------+ | col1 | year(4) | YES | | NULL | | | col2 | year(4) | YES | | NULL | | | col3 | year(4) | YES | | NULL | | +-------+---------+------+-----+---------+-------+ 3 rows in set (0.05 sec)  è®¾ç½®äº†ä¸¥æ ¼æ¨¡å¼ï¼Œå‘ç°æ²¡æœ‰ä»»ä½•æ”¹å˜ã€‚\nmysql\u0026gt; show create table year_t\\G; *************************** 1. row *************************** Table: year_t Create Table: CREATE TABLE `year_t` ( `col1` year(4) DEFAULT NULL, `col2` year(4) DEFAULT NULL, `col3` year(4) DEFAULT NULL ) ENGINE=InnoDB DEFAULT CHARSET=latin1 1 row in set (0.00 sec)  å†æ¬¡æŸ¥çœ‹è¡¨ç»“æ„ï¼Œä¾ç„¶æ— æ³•è§£é‡Šï¼Œäºæ˜¯å°è¯•å®šä¹‰ä¸ºyear(4)çš„æ–¹å¼ï¼Œæ–°å»ºäº†å¦ä¸€å¼ è¡¨year_t1\nmysql\u0026gt; create table year_t1( -\u0026gt; col1 year(4), -\u0026gt; col2 year(4), -\u0026gt; col3 year(4)); Query OK, 0 rows affected (0.33 sec) mysql\u0026gt; desc year_t1; +-------+---------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +-------+---------+------+-----+---------+-------+ | col1 | year(4) | YES | | NULL | | | col2 | year(4) | YES | | NULL | | | col3 | year(4) | YES | | NULL | | +-------+---------+------+-----+---------+-------+ 3 rows in set (0.04 sec)  å†æ¬¡æ’å…¥è¡¨çš„æ•°æ®ï¼š\nmysql\u0026gt; insert into year_t1 values(77,2000,2055); Query OK, 1 row affected (0.05 sec) mysql\u0026gt; select * from year_t1; +------+------+------+ | col1 | col2 | col3 | +------+------+------+ | 1977 | 2000 | 2055 | +------+------+------+ 1 row in set (0.00 sec)  ä¾ç„¶æ˜¯1977 ï¼Œé‡åˆ°ä¸€ä¸ªæš‚æ—¶æ— æ³•è§£ç­”çš„é—®é¢˜ã€‚åˆ°åº•æœ‰æ²¡æœ‰year(2) year(4)çš„é—®é¢˜ï¼Ÿ æš‚æ—¶ç•™ç€ï¼\nä¸‹é¢ä»‹ç»æ¯”è¾ƒå¸¸è§çš„timestampçš„ä½¿ç”¨æ–¹å¼ï¼š \u0026mdash;-åˆ›å»ºä¸€å¼ è‹¹æœè¡¨ï¼›\nmysql\u0026gt; create table apple( -\u0026gt; timeme timestamp default current_timestamp -\u0026gt; on update current_timestamp, -\u0026gt; id smallint);  ä¹‹æ‰€ä»¥æ˜¯on update current_timestampæ˜¯æŒ‡å½“è¡¨ä¸­çš„æŸè¡Œæ•°æ®æ›´æ–°æ—¶å€™ï¼Œé¡ºä¾¿ä¼šæŠŠtimemeçš„æ•°æ®æ›´æ–°ä¸ºå½“å‰ç³»ç»Ÿçš„æœ€æ–°çš„çŠ¶æ€ï¼ˆä¹‹æ‰€ä»¥æ˜¯ç³»ç»Ÿæœ€æ–°çŠ¶æ€ï¼Œå¯ä»¥æŸ¥çœ‹ show variables like \u0026ldquo;%time_zone%\u0026ldquo;;å°†åœ¨ä¸‹æ–‡ç»™å‡ºï¼‰\n\u0026mdash;-æ˜¾ç¤ºè‹¹æœè¡¨çš„ä¿¡æ¯\nmysql\u0026gt; desc apple; +--------+-------------+------+-----+-------------------+----------------------- ------+ | Field | Type | Null | Key | Default | Extra | +--------+-------------+------+-----+-------------------+----------------------- ------+ | timeme | timestamp | NO | | CURRENT_TIMESTAMP | on update CURRENT_TIME STAMP | | id | smallint(6) | YES | | NULL | | +--------+-------------+------+-----+-------------------+----------------------- ------+ 2 rows in set (0.01 sec)  æ’å…¥æ•°æ®ä¿¡æ¯ï¼š\nmysql\u0026gt; insert into apple values(now(),200); Query OK, 1 row affected (0.25 sec)  æ˜¾ç¤ºè¡¨æ•°æ®ï¼š\nmysql\u0026gt; select * from apple; +---------------------+------+ | timeme | id | +---------------------+------+ | 2015-02-14 11:54:11 | 200 | +---------------------+------+ 1 row in set (0.00 sec)  \u0026mdash;\u0026mdash;-æ˜¾ç¤ºç³»ç»Ÿå˜é‡\nmysql\u0026gt; show variables like \u0026quot;%time_zone%\u0026quot;; +------------------+--------+ | Variable_name | Value | +------------------+--------+ | system_time_zone | | | time_zone | SYSTEM | +------------------+--------+ 2 rows in set, 1 warning (0.00 sec)  \u0026mdash;\u0026mdash;\u0026ndash;æ˜¾ç¤ºå­—ç¬¦é›†\nmysql\u0026gt; show character set; +----------+-----------------------------+---------------------+--------+ | Charset | Description | Default collation | Maxlen | +----------+-----------------------------+---------------------+--------+ | big5 | Big5 Traditional Chinese | big5_chinese_ci | 2 | | dec8 | DEC West European | dec8_swedish_ci | 1 | | cp850 | DOS West European | cp850_general_ci | 1 | | hp8 | HP West European | hp8_english_ci | 1 | | koi8r | KOI8-R Relcom Russian | koi8r_general_ci | 1 |  å¦å¤–é™„å½•åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™éœ€è¦è€ƒè™‘ä¸‹é¢çš„ä¿¡æ¯ \u0026mdash;\u0026mdash;åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™å¿…é¡»ä¸»è¦çš„å­—æ®µ å±æ€§ å½±å“å­˜å‚¨æ€§èƒ½ï¼ˆæ¯”å¦‚Not NULL)å’Œè¿è¡Œæ•ˆæœ æ¯”å¦‚zerofill; 1: AUTO_INCREMENT ç”¨äºä¸»é”® çš„è‡ªåŠ¨ç¼–å· 2: LAST_INSERT_ID() 3: UNSIGNED æ— ç¬¦å·ï¼ˆä¸€æŠŠæ˜¯intæ•°æ®ï¼‰ 4: ZEROFILL å¡«å…… 0ï¼ˆä¸€æŠŠæ˜¯intæ•°æ®ï¼‰ 5: NULL/NOT NULL ä¸€èˆ¬ä½¿ç”¨éç©ºï¼Œå¢å¼ºmysqlçš„æ€§èƒ½ï¼ˆä¸€èˆ¬è®¾ç½®ä¸ºéç©ºå±æ€§ï¼‰ 6: DEFAULT value é»˜è®¤å€¼ 7: CHARACTER SET å­—ç¬¦é›†\næ·»åŠ ä¸€ä¸ªnullè¡Œçš„æ•°æ®ï¼ˆnullä¸çŸ¥é“çš„å€¼ï¼Œç±»ä¼¼äºjavaçš„å¯¹è±¡ã€‚ï¼‰ ç”±äºon update current_timestampæ‰€ä»¥æ’å…¥å½“å‰ç³»ç»Ÿçš„æœ€æ–°æ—¶é—´\nmysql\u0026gt; insert into apple values(null,100); Query OK, 1 row affected (0.15 sec) mysql\u0026gt; select * from apple; +---------------------+------+ | timeme | id | +---------------------+------+ | 2015-02-14 11:54:11 | 200 | | 2015-02-14 13:06:37 | 100 | +---------------------+------+ 2 rows in set (0.00 sec)  \u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;é»˜è®¤ä¸ºnullæ—¶å€™æ·»åŠ  now()çš„å€¼ å¦‚æœæ·»åŠ å…¥ä¸åˆé€‚çš„å€¼ï¼ˆå†sql_mode = \u0026ldquo; åˆ™æ˜¯è­¦å‘Šï¼Œå¦‚æœæ˜¯sql_mode=\u0026lsquo;strict_all_tables\u0026rsquo;åˆ™æ˜¯é”™è¯¯æç¤º errorsäº§ç”Ÿï¼‰\nmysql\u0026gt; insert into apple value(\u0026quot;123\u0026quot;,100); Query OK, 1 row affected, 1 warning (0.10 sec) mysql\u0026gt; show warnings; +---------+------+---------------------------------------------+ | Level | Code | Message | +---------+------+---------------------------------------------+ | Warning | 1265 | Data truncated for column 'timeme' at row 1 | +---------+------+---------------------------------------------+ 1 row in set (0.00 sec)  \u0026mdash;\u0026ndash;å½“æ’å…¥çš„å€¼ä¸åˆé€‚æ—¶å€™ åˆ™ç”¨000æ›¿æ¢ï¼ï¼\nmysql\u0026gt; select * from apple; +---------------------+------+ | timeme | id | +---------------------+------+ | 2015-02-14 11:54:11 | 200 | | 2015-02-14 13:06:37 | 100 | | 0000-00-00 00:00:00 | 100 | +---------------------+------+ 3 rows in set (0.00 sec)  çœç•¥è¿‡ç¨‹å¾—åˆ°æ–°çš„è¡¨æ•°æ®å¦‚ä¸‹ï¼š\nmysql\u0026gt; select * from apple; +---------------------+------+ | timeme | id | +---------------------+------+ | 2015-02-14 11:54:11 | 200 | | 2015-02-14 13:06:37 | 100 | | 0000-00-00 00:00:00 | 100 | | 2015-02-14 13:09:20 | 400 | | 0000-00-00 00:00:00 | 500 | +---------------------+------+ 5 rows in set (0.00 sec)  \u0026mdash;-ç°åœ¨æˆ‘è¦æ›´æ–° id=500çš„å€¼\nmysql\u0026gt; update apple set id=600 where id=500; Query OK, 1 row affected (0.27 sec) Rows matched: 1 Changed: 1 Warnings: 0 mysql\u0026gt; select * from apple; +---------------------+------+ | timeme | id | +---------------------+------+ | 2015-02-14 11:54:11 | 200 | | 2015-02-14 13:06:37 | 100 | | 0000-00-00 00:00:00 | 100 | | 2015-02-14 13:09:20 | 400 | | 2015-02-14 13:10:47 | 600 | \u0026lt;-----------------timestameçš„å€¼ï¼ä¹Ÿè·Ÿç€å˜åŒ–ï¼å› ä¸ºon updateçš„ä½œç”¨ +---------------------+------+ 5 rows in set (0.00 sec)  è¿™å°±æ˜¯timestampå’Œyearçš„éƒ¨åˆ†ç”¨æ³•ã€‚\nå¸¸ç”¨çš„showå‘½ä»¤æ±‡æ€»show tables; show databases; show current_user(); show user(); show columns from apple; \u0026mdash;\u0026gt;æ˜¾ç¤ºappleè¡¨ç»“æ„ï¼Œç±»ä¼¼explain å’Œdesc show variables like \u0026lsquo;%sql_mode%\u0026rsquo; \u0026mdash;-\u0026gt;å’Œæ˜¾å¼ç›¸å…³ï¼Œæ˜¯mysqlæ¯”è¾ƒé‡è¦çš„å‚æ•° show variables like \u0026lsquo;log%\u0026rsquo; \u0026mdash;-\u0026gt;ä¼šæ˜¾ç¤ºæ—¥å¿—ç›¸å…³ä¿¡æ¯ show variables like \u0026lsquo;max_connect%\u0026rsquo; \u0026mdash;-\u0026gt;æ˜¾å¼mysqlä¾›ç”¨æˆ·çš„æœ€å¤§è¿æ¥æ•° show variables like \u0026lsquo;%innodb%\u0026rsquo; \u0026mdash;-\u0026gt;æ˜¾å¼innodbç›¸å…³çš„ä¿¡æ¯ show variables like \u0026lsquo;%data%\u0026rsquo; \u0026mdash;-\u0026gt;æ˜¾å¼mysql æ•°æ®çš„å­˜å‚¨ç›¸å…³ä¿¡æ¯ show variables like \u0026lsquo;%time_zone%\u0026rsquo; \u0026mdash;\u0026ndash;\u0026gt;æ˜¾å¼æ—¶åŒºç›¸å…³ä¿¡æ¯ show variables like \u0026lsquo;%character%\u0026rsquo;; \u0026mdash;-\u0026gt;æ˜¾å¼å­—ç¬¦é›†å’Œç¼–ç çš„ç›¸å…³ä¿¡æ¯ ä¸€äº›ä¸å¸¸ç”¨çš„show variables show variables like \u0026lsquo;%query_cache%\u0026rsquo; \u0026mdash;-\u0026gt;æŸ¥è¯¢ç¼“å­˜ï¼Œä¸æƒ³æ·±å…¥ï¼Œæ®è¯´æ˜¯è·Ÿä¼˜åŒ–æœ‰å…³ï¼ŒDBAé€‰æ‰‹å¯ä»¥æ·±å…¥ï¼Œæœ‰ä¸€ä¸ªå·¥ä¸šæ ‡å‡†ã€‚ show variables like \u0026lsquo;%key_buffer%\u0026rsquo; \u0026mdash;\u0026mdash;\u0026gt;ä¹Ÿå’Œä¼˜åŒ–ç›¸å…³ï¼Œä¹Ÿæœ‰å·¥ä¸šæ ‡å‡†å€¼\nè¿˜æœ‰ä¸€äº›æ²¡æƒ³èµ·æ¥çš„ï¼Œä»¥åå†å†™ã€‚ å¦å¤–è¿˜å¯ä»¥æ˜¾ç¤ºå½“å‰ç³»ç»Ÿçš„çŠ¶æ€çš„è¯¦ç»†å€¼ show status; show status like \u0026lsquo;%\u0026hellip;%\u0026rsquo; \u0026mdash;-\u0026gt;æ˜¾ç¤ºæŸä¸ªå€¼çš„ä¿¡æ¯ mysql\u0026gt; show status like \u0026lsquo;%buffer%\u0026rsquo;;\nä¿¡æ¯å€¼ä¸æ˜¯ç‰¹åˆ«äº†è§£ã€‚ã€‚ã€‚\nstatus æ˜¾å¼mysqlå½“å‰åº“çš„ä½¿ç”¨æƒ…å†µï¼š\nmysql\u0026gt; status -------------- mysql Ver 14.14 Distrib 5.6.20, for Win32 (x86) Connection id: 2 è¿æ¥çš„id Current database: test å½“å‰æ•°æ®åº“ Current user: root@localhost å½“å‰ç”¨æˆ· SSL: Not in use æ˜¯å¦ä½¿ç”¨åŠ å¯†çš„sslåè®® Using delimiter: ; ä½¿ç”¨çš„ç»ˆæ­¢ç¬¦ Server version: 5.6.20 MySQL Community Server (GPL) Protocol version: 10 Connection: localhost via TCP/IP Server characterset: latin1 Db characterset: latin1 æ•°æ®åº“çš„å­—ç¬¦é›† Client characterset: gbk å®¢æˆ·ç«¯çš„å­—ç¬¦é›† Conn. characterset: gbk TCP port: 3306 å¼€æ”¾çš„ç«¯å£å· Uptime: 5 hours 20 min 1 sec ç™»å½•æ—¶é—´ ä¸€äº›å½“å‰çº¿ç¨‹ä¿¡æ¯ Threads: 1 Questions: 182 Slow queries: 0 Opens: 96 Flush tables: 1 bles: 72 Queries per second avg: 0.009 --------------  create database ch charset = utf8; \u0026mdash;-\u0026gt;ä¼šæ”¹å˜Db charactersetçš„å€¼ set names utf8 \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-\u0026gt;ä¼šæ”¹å˜client characerset å’ŒConn.characternetçš„å€¼ï¼\ndelimiter $$ åˆ™æ¯ä½¿ç”¨ä¸€ä¸ªmysqlè¯­å¥å¿…é¡»æ˜¯ç”¨$$ç»“å°¾ è€Œä¸æ˜¯;åˆ†å·ç»“å°¾äº†ï¼\nè¡¥å……æ•°æ®ç±»å‹çš„åˆ†ç±»ï¼šï¼ˆæ‘˜è‡ªå¦‚é¹ï¼‰ æ–‡æœ¬ï¼š\nCHAR()ï¼šæœ€å¤š255ä¸ªå­—èŠ‚çš„å®šé•¿å­—ç¬¦ä¸²ï¼Œå®ƒçš„é•¿åº¦å¿…é¡»åœ¨åˆ›å»ºæ—¶æŒ‡å®š VARCHAR()ï¼šæœ€å¤š255ï¼ˆ65535ï¼‰ä¸ªå­—èŠ‚çš„å¯å˜é•¿åº¦å­—ç¬¦ä¸²ï¼Œå®ƒçš„é•¿åº¦å¿…é¡»åœ¨åˆ›å»ºæ—¶æŒ‡å®š TEXTï¼šæœ€å¤§é•¿åº¦ä¸º64Kå­—ç¬¦çš„å˜é•¿æ–‡æœ¬ TINYTEXTï¼šæœ€å¤§é•¿åº¦ä¸º255å­—ç¬¦çš„å˜é•¿æ–‡æœ¬ MEDUIMTEXTï¼šæœ€å¤§é•¿åº¦ä¸º16Kå­—ç¬¦çš„å˜é•¿æ–‡æœ¬ LONGTEXTï¼šæœ€å¤§é•¿åº¦ä¸º4GBå­—ç¬¦çš„å˜é•¿æ–‡æœ¬\næ•´æ•°(è€ƒè™‘æ•°æ®å–å€¼åé€‰æ‹©å°½å¯èƒ½å°çš„ç±»å‹)\ntinyintï¼š1å­—èŠ‚ã€‚æœ‰ç¬¦å·å€¼ï¼š-128 åˆ°127ï¼›æ— ç¬¦å·å€¼ï¼š0åˆ°255 smallintï¼š2å­—èŠ‚ã€‚æœ‰ç¬¦å·å€¼ï¼š-32768 åˆ°32767ï¼›æ— ç¬¦å·å€¼ï¼š0åˆ°65535 mediumintï¼š3å­—èŠ‚ã€‚ intï¼š4å­—èŠ‚ bigintï¼š8å­—èŠ‚\nå°æ•°(éœ€è¦æŒ‡å®šé•¿åº¦å’Œå°æ•°ç‚¹ï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºå®½åº¦å’Œå°æ•°ä½æ•°)ï¼š\ndecimalï¼šç²¾ç¡®å­˜å‚¨çš„å°æ•°ï¼Œåœ¨å†…éƒ¨ç”¨å­—ç¬¦ä¸²å­˜å‚¨ï¼Œé€‚åˆé‡‘é¢ç­‰è¦æ±‚ç²¾ç¡®çš„ç±»å‹ã€‚åˆ«åï¼šNUMERICï¼ˆé“¶è¡Œï¼Œå·®ä¸€ç‚¹éƒ½ä¸è¡Œï¼ï¼‰ floatï¼š4å­—èŠ‚ï¼Œå•ç²¾åº¦ã€‚ä¼šè¿‘ä¼¼å­˜å‚¨()ï¼Œæ•ˆç‡æ¯”decimalé«˜ã€‚ doubleï¼š8å­—èŠ‚ï¼ŒåŒç²¾åº¦ã€‚ä¼šè¿‘ä¼¼å­˜å‚¨()ï¼Œæ•ˆç‡æ¯”decimalé«˜ã€‚\næ—¥æœŸæ—¶é—´ï¼š\nDATEï¼š4å­—èŠ‚ã€‚èŒƒå›´ï¼š1000-01-01â€”â€”9999-12-31 TIMEï¼š3å­—èŠ‚ã€‚èŒƒå›´ï¼š-838:59:59â€”â€”838:59:59 DATETIMEï¼š8å­—èŠ‚ã€‚èŒƒå›´ï¼š1000-01-01 00:00:00â€”â€”9999-12-31 23:59:59\näºŒè¿›åˆ¶å¤§æ•°æ®ï¼š\nTITYBLOBï¼šæœ€å¤§é•¿åº¦ä¸º255å­—èŠ‚ BLOBï¼šæœ€å¤§é•¿åº¦ä¸º64KB MEDIUMBLOBï¼šæœ€å¤§é•¿åº¦ä¸º16MB LONGBLOBï¼šæœ€å¤§é•¿åº¦ä¸º4GB\nselectçš„é«˜çº§ä½¿ç”¨æ–¹å¼ï¼š\n1ï¼šèšåˆå‡½æ•° èšåˆå‡½æ•°ï¼šå…¶å®å°±æ˜¯ç»Ÿè®¡ä¸­å¸¸ç”¨çš„æœ€å¤§å€¼ï¼ˆMAXï¼‰ï¼Œæœ€å°å€¼(MIN)ï¼Œå¹³å‡å€¼(AVG),æ±‚å’Œï¼ˆSUMï¼‰ï¼Œè®°å½•ç»Ÿè®¡ï¼ˆCOUNTï¼‰ç­‰å‡½æ•° mysql\u0026gt; select count(*) from apple; mysql\u0026gt; select max(id) from apple; å¤åˆ¶ä»£ç  æŒ‰ç…§å…·ä½“æƒ…å†µåŒ¹é…ä½¿ç”¨\n2ï¼š limit é™åˆ¶æ˜¾ç¤ºçš„æ¡æ•° ä¸€ä¸ªæ³¨æ„ç‚¹limitæ˜¯mysqlç‹¬æœ‰çš„ï¼Œå¿…é¡»æ”¾åœ¨æœ€åï¼Œç”šè‡³æ¯”åˆ†ç»„ï¼ˆorder byï¼‰è¿˜é å Limit 2,4 è¡¨ç¤ºä»ç¬¬äºŒä¸ªè®°å½•ä¹‹åçš„å››ä¸ªè®°å½•ï¼Œå³2,3,4,5\nmysql\u0026gt; select * from apple limit 2,4; +----+-----------+ | id | name | +----+-----------+ | 3 | shift | | 4 | caps | | 6 | tomato | | 7 | backspace | +----+-----------+ 4 rows in set (0.00 sec)  æ³¨æ„ï¼š å¯ç”¨äºç½‘é¡µçš„åˆ†é¡µï¼ ç”¨äºorder by ä¹‹åï¼Œorder by ä¸€èˆ¬ç”¨äºwhereä¹‹å where \u0026hellip; order by \u0026hellip; limit \u0026hellip; 3 æ’åºï¼ˆorder by)\nä¸€èˆ¬æ˜¯å¤„äºselectè¯­å¥çš„æœ«å°¾ï¼ˆé€‚ç”¨äºsqlserver mysql oracle..)\nè¿™æ—¶å€™æƒ³è¦å¤åˆ¶ä¸€å¼ è¡¨ å‚è€ƒæ­¤æ–‡ 1.å¤åˆ¶è¡¨ç»“æ„åŠæ•°æ®åˆ°æ–°è¡¨\nCREATE TABLE æ–°è¡¨ SELECT * FROM æ—§è¡¨\n2.åªå¤åˆ¶è¡¨ç»“æ„åˆ°æ–°è¡¨\nCREATE TABLE æ–°è¡¨ SELECT * FROM æ—§è¡¨ WHERE 1=2 å³:è®©WHEREæ¡ä»¶ä¸æˆç«‹. æ–¹æ³•äºŒ:(ä½ç‰ˆæœ¬çš„mysqlä¸æ”¯æŒï¼Œmysql4.0.25 ä¸æ”¯æŒï¼Œmysql5å·²ç»æ”¯æŒäº†) CREATE TABLE æ–°è¡¨ LIKE æ—§è¡¨\n3.å¤åˆ¶æ—§è¡¨çš„æ•°æ®åˆ°æ–°è¡¨(å‡è®¾ä¸¤ä¸ªè¡¨ç»“æ„ä¸€æ ·)\nINSERT INTO æ–°è¡¨ SELECT * FROM æ—§è¡¨\n4.å¤åˆ¶æ—§è¡¨çš„æ•°æ®åˆ°æ–°è¡¨(å‡è®¾ä¸¤ä¸ªè¡¨ç»“æ„ä¸ä¸€æ ·)\nINSERT INTO æ–°è¡¨(å­—æ®µ1,å­—æ®µ2,â€¦â€¦.) SELECT å­—æ®µ1,å­—æ®µ2,â€¦â€¦ FROM æ—§è¡¨\nmysql\u0026gt; create table b1 select * from t_students; Query OK, 18 rows affected (0.55 sec) Records: 18 Duplicates: 0 Warnings: 0  b1å°±æ˜¯æˆ‘ä»¬æµ‹è¯•çš„æ•°æ®è¡¨ï¼› åˆ é™¤æŸä¸ªå­—æ®µï¼Œæ¯”å¦‚åå­—ä¸æƒ³æ˜¾ç¤ºã€‚å‚è€ƒæ­¤æ–‡ çŸ¥é“äº†å¯ä»¥drop column ä¹Ÿå¯ä»¥change å­—æ®µä¿¡æ¯ MySQLæ·»åŠ å­—æ®µï¼š\nalter table user_movement_log\nAdd column GatewayId int not null default 0 AFTER Regionid (åœ¨å“ªä¸ªå­—æ®µåé¢æ·»åŠ )\nåˆ é™¤å­—æ®µï¼š\nalter table user_movement_log drop column Gatewayid\nè°ƒæ•´å­—æ®µé¡ºåºï¼š\nALTER TABLE user_movement_log CHANGE GatewayId GatewayId int not null default 0 AFTER RegionID\nmysql\u0026gt; alter table b1 drop column Name; Query OK, 0 rows affected (0.52 sec) Records: 0 Duplicates: 0 Warnings: 0\næ˜¯çš„é€šè¿‡æ­¤ç§æ–¹å¼æœ‰æ•ˆï¼š\nmysql\u0026gt; select * from b1; +----+--------+-----------------+------+------+ | Id | Gender | Hobbies | Age | Test | +----+--------+-----------------+------+------+ | 0 | \u0001 | ç¾½æ¯›çƒ | 30 | 31 | | 1 | \u0001 | ç¼–ç¨‹ | 24 | 31 | | 2 | | æ—…æ¸¸ | 27 | 30 | | 3 | \u0001 | è¶³çƒ dota | 25 | 31 | | 4 | \u0001 | æ‰“ç‚®ï¼Œæ‘„å½± | 30 | 31 | | 6 | \u0001 | ç¯®çƒ | 34 | 31 | | 7 | \u0001 | éŸ³ä¹ï¼Œç¼–ç¨‹ å†›äº‹ | 30 | 31 | | 8 | \u0001 | æ‘„å½± | 26 | 31 | | 9 | \u0001 | ç”µå½± | 26 | 31 | | 10 | \u0001 | æ¶ˆæ¶ˆä¹ | 26 | 31 | | 11 | | æ¶ˆæ¶ˆä¹ | 24 | 30 | | 12 | | è´­ç‰© | NULL | 30 | | 13 | \u0001 | éª‘è¡Œ | NULL | 31 | | 14 | \u0001 | å­¦æœ¯ | 34 | 31 | | 15 | \u0001 | ä¸æ¸…æ¥š | NULL | 31 | | 16 | \u0001 | æ•£æ­¥ | NULL | 31 | | 17 | \u0001 | NULL | NULL | 31 | | 18 | | å®¶åº­ä¸»å¦‡ | 26 | 30 | +----+--------+-----------------+------+------+ 18 rows in set (0.00 sec) ``` æµ‹è¯•åˆ†ç»„æ–¹æ³•ï¼šå‡åºæ’åˆ—ï¼ˆé™åºç”¨descï¼‰ è§„åˆ™ç”¨ order by å­—æ®µå asc|desc  mysql mysql\u0026gt; select * from b1 -\u0026gt; order by Age asc; +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ | Id | Gender | Hobbies | Age | Test | +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ | 17 | \u0001 | NULL | NULL | 31 | | 16 | \u0001 | æ•£æ­¥ | NULL | 31 | | 15 | \u0001 | ä¸æ¸…æ¥š | NULL | 31 | | 13 | \u0001 | éª‘è¡Œ | NULL | 31 | | 12 | | è´­ç‰© | NULL | 30 | | 1 | \u0001 | ç¼–ç¨‹ | 24 | 31 | | 11 | | æ¶ˆæ¶ˆä¹ | 24 | 30 | | 3 | \u0001 | è¶³çƒ dota | 25 | 31 | | 18 | | å®¶åº­ä¸»å¦‡ | 26 | 30 | | 10 | \u0001 | æ¶ˆæ¶ˆä¹ | 26 | 31 | | 9 | \u0001 | ç”µå½± | 26 | 31 | | 8 | \u0001 | æ‘„å½± | 26 | 31 | | 2 | | æ—…æ¸¸ | 27 | 30 | | 7 | \u0001 | éŸ³ä¹ï¼Œç¼–ç¨‹ å†›äº‹ | 30 | 31 | | 4 | \u0001 | æ‰“ç‚®ï¼Œæ‘„å½± | 30 | 31 | | 0 | \u0001 | ç¾½æ¯›çƒ | 30 | 31 | | 14 | \u0001 | å­¦æœ¯ | 34 | 31 | | 6 | \u0001 | ç¯®çƒ | 34 | 31 | +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\n ä¹Ÿå¯ä»¥ç»„åˆæ’åºï¼šå…ˆæŒ‰å¹´é¾„çš„å‡åºï¼Œå†æŒ‰idçš„é™åº  mysql mysql\u0026gt; select * from b1 -\u0026gt; order by Age asc,Id desc; +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ | Id | Gender | Hobbies | Age | Test | +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ | 17 | \u0001 | NULL | NULL | 31 | | 16 | \u0001 | æ•£æ­¥ | NULL | 31 | | 15 | \u0001 | ä¸æ¸…æ¥š | NULL | 31 | | 13 | \u0001 | éª‘è¡Œ | NULL | 31 | | 12 | | è´­ç‰© | NULL | 30 | | 11 | | æ¶ˆæ¶ˆä¹ | 24 | 30 | | 1 | \u0001 | ç¼–ç¨‹ | 24 | 31 | | 3 | \u0001 | è¶³çƒ dota | 25 | 31 | | 18 | | å®¶åº­ä¸»å¦‡ | 26 | 30 | | 10 | \u0001 | æ¶ˆæ¶ˆä¹ | 26 | 31 | | 9 | \u0001 | ç”µå½± | 26 | 31 | | 8 | \u0001 | æ‘„å½± | 26 | 31 | | 2 | | æ—…æ¸¸ | 27 | 30 | | 7 | \u0001 | éŸ³ä¹ï¼Œç¼–ç¨‹ å†›äº‹ | 30 | 31 | | 4 | \u0001 | æ‰“ç‚®ï¼Œæ‘„å½± | 30 | 31 | | 0 | \u0001 | ç¾½æ¯›çƒ | 30 | 31 | | 14 | \u0001 | å­¦æœ¯ | 34 | 31 | | 6 | \u0001 | ç¯®çƒ | 34 | 31 | +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\n 4. asä½œä¸ºè¾…åŠ©æ˜¾ç¤º where åˆ™è¿›è¡Œåˆ¤æ–­ï¼Œæ¡ä»¶æ˜¾ç¤ºä¿¡æ¯  mysql mysql\u0026gt; select Hobbies as çˆ±å¥½,Age as å¹´é¾„ from b1 -\u0026gt; where Age \u0026gt;24 and Age \u0026lt;30; +\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;+ | çˆ±å¥½ | å¹´é¾„ | +\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;+ | æ—…æ¸¸ | 27 | | è¶³çƒ dota | 25 | | æ‘„å½± | 26 | | ç”µå½± | 26 | | æ¶ˆæ¶ˆä¹ | 26 | | å®¶åº­ä¸»å¦‡ | 26 | +\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;+ 6 rows in set (0.02 sec)\n 5ï¼šlikeæ¨¡ç³ŠåŒ¹é… æ­£åˆ™è¡¨è¾¾å¼çš„æ•ˆæœï¼ŒæŸ¥æ‰¾å«æœ‰æŸæŸçš„å­—ç¬¦ä¸²çš„ä¿¡æ¯ ä¸‹é¢ä¿¡æ¯æ¥è‡ªå¦‚é¹ï¼š é€šé…ç¬¦è¿‡æ»¤ä½¿ç”¨LIKE ã€‚ 1ã€å•å­—ç¬¦åŒ¹é…çš„é€šé…ç¬¦ä¸ºåŠè§’ä¸‹åˆ’çº¿â€œ_â€ï¼ˆç±»ä¼¼äºæ­£åˆ™è¡¨è¾¾å¼çš„.ï¼‰ï¼Œå®ƒåŒ¹é…å•ä¸ªå‡ºç°çš„å­—ç¬¦ã€‚ä»¥ä»»æ„å­—ç¬¦å¼€å¤´ï¼Œå‰©ä½™éƒ¨åˆ†ä¸ºâ€œerryâ€ ï¼šSELECT * FROM T_Employees WHERE Name LIKE '_erry' 2ã€å¤šå­—ç¬¦åŒ¹é…çš„é€šé…ç¬¦ä¸ºåŠè§’ç™¾åˆ†å·â€œ%â€ï¼Œå®ƒåŒ¹é…ä»»æ„æ¬¡æ•°ï¼ˆé›¶æˆ–å¤šä¸ªï¼‰å‡ºç°çš„ä»»æ„å­—ç¬¦ã€‚ â€œk%â€åŒ¹é…ä»¥â€œkâ€å¼€å¤´ã€ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²ã€‚æ£€ç´¢å§“åä¸­åŒ…å«å­—æ¯â€œnâ€çš„å‘˜å·¥ä¿¡æ¯ ï¼šSELECT * FROM T_Employees WHERE Name LIKE '%n%' 3ã€Likeæ€§èƒ½è¾ƒå·®ï¼Œå¾ˆå®¹æ˜“é€ æˆå…¨è¡¨æ‰«æï¼Œè°¨æ…ä½¿ç”¨ã€‚åé¢ä¼šè®²æ•°æ®åº“ä¼˜åŒ–(ç´¢å¼•ç­‰)ï¼Œé¡¹ç›®ä¸­åšæœç´¢ç”¨å…¨æ–‡æ£€ç´¢ã€‚ æµ‹è¯•ï¼šï¼ˆä¸åƒ = å·å¿…é¡»ä¸€æ · ï¼Œ likeæ˜¯æ¨¡ç³ŠåŒ¹é…ï¼‰(æ•°æ®åº“å…¨éƒ¨å–å‡ºæ¥ï¼Œç„¶åä¸€æ¡ä¸€æ¡æ‰«æ)  mysql mysql\u0026gt; select * from b1 where Hobbies like \u0026lsquo;%ç¾½æ¯›%\u0026rsquo;; +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ | Id | Gender | Hobbies | Age | Test | +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ | 0 | \u0001 | ç¾½æ¯›çƒ | 30 | 31 | +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ 1 row in set (0.14 sec)\n 6.æ§åˆ¶åˆ¤æ–­ Null Nullçš„ç²¾ç¡®ç¿»è¯‘æ˜¯ä¸çŸ¥é“ï¼Œè¿ä¸çŸ¥é“æ€ä¹ˆè®©æ•°æ®åº“çŸ¥é“ï¼Œæ‰€ä»¥å¿…é¡»ç”¨ä¸“é—¨çš„å‡½æ•°iså’Œis notè¿›è¡Œåˆ¤æ–­ï¼Œç±»ä¼¼äºbitçš„binå‡½æ•°  mysql mysql\u0026gt; select Null+1; +\u0026mdash;\u0026mdash;\u0026ndash;+ | Null+1 | +\u0026mdash;\u0026mdash;\u0026ndash;+ | NULL | +\u0026mdash;\u0026mdash;\u0026ndash;+ 1 row in set (0.04 sec)\nä¸çŸ¥é“+1è¿˜æ˜¯ä¸çŸ¥é“ã€‚NUllç›¸å½“äºæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸çŸ¥é“é‡Œé¢çš„å€¼ä¸ºå¤šå°‘ï¼Œæ‰€ä»¥æ— æ³•è¿›è¡Œ=å’Œlikeçš„æ¯”è¾ƒ SQLä¸­ä½¿ç”¨is nullã€is not nullæ¥è¿›è¡Œç©ºå€¼åˆ¤æ–­ï¼š  mysql mysql\u0026gt; select * from b1 where Age is NULL; +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ | Id | Gender | Hobbies | Age | Test | +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ | 12 | | è´­ç‰© | NULL | 30 | | 13 | \u0001 | éª‘è¡Œ | NULL | 31 | | 15 | \u0001 | ä¸æ¸…æ¥š | NULL | 31 | | 16 | \u0001 | æ•£æ­¥ | NULL | 31 | | 17 | \u0001 | NULL | NULL | 31 | +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ 5 rows in set (0.00 sec)\nå¦‚æœä½¿ç”¨=å· å’Œlikeåˆ™æ²¡æœ‰ä»»ä½•æ˜¾ç¤º  mysql mysql\u0026gt; select * from b1 where Age = NULL; Empty set (0.01 sec)\nmysql\u0026gt; select * from b1 where Age like \u0026lsquo;%NULL%\u0026rsquo;; Empty set (0.00 sec)\n 7 åˆ†ç»„ï¼ˆgroup by) æ¯”å¦‚æœ‰ä¸€ä¸ªå­—æ®µå«åšéƒ¨é—¨ï¼Œå¦‚æœgroup by éƒ¨é—¨ é‚£ä¹ˆå¦‚æœéƒ¨é—¨å€¼ç›¸åŒçš„idåˆ™è¢«åˆ†é…åˆ°ä¸€ä¸ªç»„ä¸­ï¼ï¼ï¼åŒä¸€ç»„ä¸­çš„å€¼å¯ä»¥è¿›è¡Œå†select,ä¸ºäº†å®ç°è¿™ä¸ªç›®çš„ï¼Œä¸€èˆ¬éœ€è¦äº†è§£å¤–é”®çš„çŸ¥è¯†ï¼Œå¤šè¡¨çš„æ¦‚å¿µã€‚ç°åœ¨è¿›è¡Œæµ‹è¯•ï¼š  mysql mysql\u0026gt; select Age from b1 group by age; +\u0026mdash;\u0026mdash;+ | Age | +\u0026mdash;\u0026mdash;+ | NULL | | 24 | | 25 | | 26 | | 27 | | 30 | | 34 | +\u0026mdash;\u0026mdash;+ 7 rows in set (0.04 sec)\nå¯ä»¥çœ‹åˆ°å¦‚æœå¯¹å¹´é¾„è¿›è¡Œåˆ†ç»„ï¼Œæ€»å…±æœ‰7ä¸ªç»„ å°†Ageç›¸åŒçš„æ•°æ®è¡Œæ”¾åˆ°ä¸€ç»„ï¼Œåˆ†ç»„åçš„æ•°æ®å¯ä»¥çœ‹ä½œä¸€ä¸ªä¸´æ—¶çš„ç»“æœé›†ï¼Œè€ŒSELECT Ageè¯­å¥åˆ™å–å‡ºæ¯ç»„çš„Ageå­—æ®µçš„å€¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°ä¸Šè¡¨çš„å‘˜å·¥å¹´é¾„æ®µè¡¨äº† æ³¨æ„ç‚¹ï¼šå¦‚æœSELECTè¯­å¥æœ‰WHEREå­å¥ï¼Œåˆ™GROUP BYå­å¥å¿…é¡»æ”¾åˆ°WHEREè¯­å¥çš„ä¹‹åã€‚ é€šè¿‡count(Age)å¯ä»¥çœ‹åˆ°æ¯ä¸ªåˆ†ç»„åˆ°åº•æœ‰å¤šå°‘ä¸ªäººï¼è¿™æ˜¯ä¸€ä¸ªç›¸å½“æ£’çš„æŸ¥è¯¢ç»“æœ  mysql mysql\u0026gt; select Age,count(Age) from b1 group by age; +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+ | Age | count(Age) | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+ | NULL | 0 | | 24 | 2 | | 25 | 1 | | 26 | 4 | | 27 | 1 | | 30 | 3 | | 34 | 2 | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+ 7 rows in set (0.00 sec)\nå¯ä»¥æƒ³æƒ³å¦‚æœ æ˜¯å¯¹éƒ¨é—¨è¿›è¡Œåˆ†ç»„ï¼Œå¹¶å­˜åœ¨salaryå­—æ®µï¼Œåˆ™å¯ä»¥avg(salary)è·å¾—æŸä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„ï¼ˆmin æœ€å° maxæœ€å¤§ sumå¯¹éƒ¨é—¨å·¥èµ„æ±‚å’Œï¼æ–¹ä¾¿ï¼‰ï¼Œå› ä¸ºç»è¿‡åˆ†ç»„åï¼Œselectå¾—åˆ°çš„ç»“æœæ˜¯åˆ†ç»„çš„ä¿¡æ¯ï¼Œ è€Œä¸æ˜¯å•ä¸€çš„ä¿¡æ¯äº† 1ï¼‰è®¡ç®—æ¯ä¸ªåˆ†ç»„ä¸­çš„å‘˜å·¥å¹³å‡å·¥èµ„  mysql SELECT Age,AVG(Salary) FROM T_Employees\nGROUP BY Age\nå¦‚é¹çš„æ€»ç»“ï¼šåˆ†ç»„è¯­å¥ä¸€èˆ¬å’Œèšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼ŒGROUP BYå­å¥è´Ÿè´£å°†æ•°æ®åˆ†æˆé€»è¾‘ç»„ï¼Œè€Œèšåˆå‡½æ•°åˆ™å¯¹æ¯ä¸€ä¸ªç»„è¿›è¡Œç»Ÿè®¡è®¡ç®—ã€‚ 8.è”åˆæŸ¥è¯¢--ä¹‹leftjoinæ¨¡å¼ å¤šè¡¨æŸ¥è¯¢ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒå®é™…çš„è¿ç”¨ï¼ï¼Œå¤šè¡¨æŸ¥è¯¢ä¸­æ¶‰åŠåˆ°è”åˆæŸ¥è¯¢ï¼Œå…ˆå»ºç«‹ä¸‰å¼ è¡¨ï¼Œç„¶åæ·»åŠ æ•°æ®ï¼Œæµ‹è¯•å°±ä¼šæ˜ç™½äº† åˆ›å»ºç¬¬ä¸€å¼ è¡¨ T_customers ,è®¾è®¡äº†Idä¸ºä¸»é”®,è‡ªåŠ¨å¢é•¿ï¼ŒNameä¸ºvarchar not nullï¼ŒAgeä¸ºtinyintå°±å¤Ÿäº†  mysql mysql\u0026gt; create table T_Customers( -\u0026gt; Id int(4) auto_increment primary key, -\u0026gt; Name varchar(20) not null default \u0026ldquo;, -\u0026gt; Age tinyint default 0); Query OK, 0 rows affected (0.31 sec)\nå¹¶æ·»åŠ å®Œæ•°æ®ï¼š mysql\u0026gt; INSERT INTO T_Customers(Id,Name,Age) -\u0026gt; VALUES(1,\u0026lsquo;TOM\u0026rsquo;,21); Query OK, 1 row affected (0.12 sec)\nmysql\u0026gt; INSERT INTO T_Customers(Id,Name,Age) -\u0026gt; VALUES(2,\u0026lsquo;MIKE\u0026rsquo;,24); Query OK, 1 row affected (0.06 sec)\nmysql\u0026gt; INSERT INTO T_Customers(Id,Name,Age) -\u0026gt; VALUES(3,\u0026lsquo;JACK\u0026rsquo;,30); Query OK, 1 row affected (0.09 sec)\nmysql\u0026gt; INSERT INTO T_Customers(Id,Name,Age) -\u0026gt; VALUES(4,\u0026lsquo;TOM\u0026rsquo;,25); Query OK, 1 row affected (0.03 sec)\nmysql\u0026gt; INSERT INTO T_Customers(Id,Name,Age) -\u0026gt; VALUES(5,\u0026lsquo;LINDA\u0026rsquo;,30); Query OK, 1 row affected (0.08 sec)\næ˜¾ç¤ºè¡¨æ ¼ç»“æ„:  mysql mysql\u0026gt; desc T_customers; +\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ | Field | Type | Null | Key | Default | Extra | +\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ | Id | int(4) | NO | PRI | NULL | auto_increment | | Name | varchar(20) | NO | | | | | Age | tinyint(4) | YES | | 0 | | +\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ 3 rows in set (0.00 sec)\næ˜¾ç¤ºè¡¨æ•°æ®ï¼š  mysql mysql\u0026gt; select * from T_customers; +\u0026mdash;-+\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+ | Id | Name | Age | +\u0026mdash;-+\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+ | 1 | TOM | 21 | | 2 | MIKE | 24 | | 3 | JACK | 30 | | 4 | TOM | 25 | | 5 | LINDA | 30 | +\u0026mdash;-+\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+ 5 rows in set (0.00 sec)\n æ–°å»ºç¬¬äºŒå¼ è¡¨ï¼šT_OrderType è®¾è®¡IDå’ŒT_Customersä¸€æ ·ï¼ŒNameä¸ºè®¢å•ç±»å‹åå­—ï¼Œvarcharï¼ˆ30ï¼‰ä¸”éç©º  mysql mysql\u0026gt; create table T_OrderType( -\u0026gt; Id int auto_increment primary key, -\u0026gt; Name varchar(30) not null default \u0026ldquo;); Query OK, 0 rows affected (0.35 sec)\nmysql\u0026gt; desc T_OrderType; +\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ | Field | Type | Null | Key | Default | Extra | +\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ | Id | int(11) | NO | PRI | NULL | auto_increment | | Name | varchar(30) | NO | | | | +\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ 2 rows in set (0.00 sec)\n å¹¶æ’å…¥è¡¨æ•°æ®ï¼š ä¸å°å¿ƒæ£€é”™è¡¨åå­—äº† ï¼Œè¿›è¡Œä¿®æ”¹  mysql mysql\u0026gt; rename table T_OrderType to T_OrderTypes; Query OK, 0 rows affected (0.19 sec) å¤åˆ¶ä»£ç \nmysql\u0026gt; INSERT INTO T_OrderTypes(Id,Name) -\u0026gt; VALUES(1,\u0026lsquo;ç°è´§è®¢å•\u0026rsquo;); Query OK, 1 row affected (0.12 sec)\nmysql\u0026gt; INSERT INTO T_OrderTypes(Id,Name) -\u0026gt; VALUES(2,\u0026lsquo;é¢„è®¢è®¢å•\u0026rsquo;); Query OK, 1 row affected (0.03 sec)\nmysql\u0026gt; INSERT INTO T_OrderTypes(Id,Name) -\u0026gt; VALUES(3,\u0026lsquo;é¢„è´­è®¢å•\u0026rsquo;); Query OK, 1 row affected (0.09 sec)\nmysql\u0026gt; INSERT INTO T_OrderTypes(Id,Name) -\u0026gt; VALUES(4,\u0026lsquo;å†…éƒ¨\u0026rsquo;); Query OK, 1 row affected (0.09 sec)\næ˜¾ç¤ºè®¢å•ç±»å‹è¡¨ç»“æ„ä¿¡æ¯  mysql mysql\u0026gt; desc T_OrderTypes; +\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ | Field | Type | Null | Key | Default | Extra | +\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ | Id | int(11) | NO | PRI | NULL | auto_increment | | Name | varchar(30) | NO | | | | +\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ 2 rows in set (0.01 sec)\næ˜¾ç¤ºå…¶ä¸­çš„æ•°æ®ï¼š  mysql mysql\u0026gt; select * from T_OrderTypes; +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;-+ | Id | Name | +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;-+ | 1 | ç°è´§è®¢å• | | 2 | é¢„è®¢è®¢å• | | 3 | é¢„è´­è®¢å• | | 4 | å†…éƒ¨ | +\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;-+ 4 rows in set (0.00 sec)\n æ–°å»ºç¬¬ä¸‰å¼  æœ€é‡è¦çš„è¡¨ï¼æ¶‰åŠåˆ°ä¸€ä¸ªå…³é”®çš„æ–°çš„çŸ¥è¯†ç‚¹ï¼Œå¤–é”®çš„åˆ›å»º è®¾è®¡äº†äº”ä¸ªå‚æ•° ID è®¢å•ID è®¾è®¡å’Œå…¶ä»–ä¸¤å¼ è¡¨ç±»å‹ä¸€è‡´ Number è®¢å•ç¼–å· è®¾è®¡ä¸ºvarcharï¼ˆ20ï¼‰ not null Price è®¾è®¡ä¸º intç±»å‹ CustomerId å¤–é”®1 ä¸ºT_Customersçš„å¤–é”® TypeId å¤–é”®2 ä¸ºT_OrderTypesçš„å¤–é”® å‚è€ƒæ­¤æ–‡  mysql mysql\u0026gt; create table T_Orders( -\u0026gt; Id int auto_increment primary key, -\u0026gt; Number varchar(20) not null default \u0026ldquo;, -\u0026gt; Price int not null default 0, -\u0026gt; CustomerId int, foreign key(CustomerId) references T_customers(Id) on del ete restrict on update cascade, -\u0026gt; TypeId int, foreign key(TypeId) references T_OrderTypes(Id) on delete res trict on update cascade); Query OK, 0 rows affected (0.46 sec)\nmysql\u0026gt;\næ˜¾ç¤ºè¡¨ç»“æ„  mysql mysql\u0026gt; desc T_Orders; +\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ | Field | Type | Null | Key | Default | Extra | +\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ | Id | int(11) | NO | PRI | NULL | auto_increment | | Number | varchar(20) | NO | | | | | Price | int(11) | NO | | 0 | | | CustomerId | int(11) | YES | MUL | NULL | | | TypeId | int(11) | YES | MUL | NULL | | +\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ 5 rows in set (0.03 sec)\nå¦å¤–ä¸€ç§æ›´åŠ æ¸…æ™°åœ°æ˜¾ç¤ºè¡¨ç»“æ„ï¼š  mysql mysql\u0026gt; show create table T_Orders\\G; *************************** 1. row *************************** Table: T_Orders Create Table: CREATE TABLE t_orders ( Id int(11) NOT NULL AUTO_INCREMENT, Number varchar(20) NOT NULL DEFAULT \u0026ldquo;, Price int(11) NOT NULL DEFAULT \u0026lsquo;0\u0026rsquo;, CustomerId int(11) DEFAULT NULL, TypeId int(11) DEFAULT NULL, PRIMARY KEY (Id), KEY CustomerId (CustomerId), KEY TypeId (TypeId), CONSTRAINT t_orders_ibfk_1 FOREIGN KEY (CustomerId) REFERENCES t_customer s (Id) ON UPDATE CASCADE, CONSTRAINT t_orders_ibfk_2 FOREIGN KEY (TypeId) REFERENCES t_ordertypes (Id) ON UPDATE CASCADE ) ENGINE=InnoDB DEFAULT CHARSET=utf8 1 row in set (0.00 sec)\nå¯ä»¥è§åˆ° CONSTRAINTçš„æ ‡å¿—ï¼Œå¦‚å¤šå®šä¹‰æ²¡æœ‰æŒ‡å®šCONSTRAINT å¤–é”®ç¬¦å·æ—¶ï¼Œmysqlä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªï¼Œæ¯”å¦‚t_orders_ibfk_1ï¼Œå°±æ˜¯å¤–é”®ç¬¦å·ï¼Œ å¯ä»¥é€šè¿‡  mysql ALTER TABLE T_Orders DROP FOREIGN KEY t_orders_ibfk_1æ¥åˆ é™¤å¤–é”® mysql\u0026gt; alter table T_orders drop foreign key t_orders_ibfk_1; Query OK, 0 rows affected (0.25 sec) Records: 0 Duplicates: 0 Warnings: 0\nå†æ¬¡æ˜¾ç¤ºè¡¨ç»“æ„ä¿¡æ¯ï¼š  mysql mysql\u0026gt; show create table T_orders\\G; *************************** 1. row *************************** Table: T_orders Create Table: CREATE TABLE t_orders ( Id int(11) NOT NULL AUTO_INCREMENT, Number varchar(20) NOT NULL DEFAULT \u0026ldquo;, Price int(11) NOT NULL DEFAULT \u0026lsquo;0\u0026rsquo;, CustomerId int(11) DEFAULT NULL, TypeId int(11) DEFAULT NULL, PRIMARY KEY (Id), KEY CustomerId (CustomerId), KEY TypeId (TypeId), CONSTRAINT t_orders_ibfk_2 FOREIGN KEY (TypeId) REFERENCES t_ordertypes (Id) ON UPDATE CASCADE ) ENGINE=InnoDB DEFAULT CHARSET=utf8 1 row in set (0.00 sec)\nERROR: No query specified\nå°‘äº†t_orders_ibfk_2 é‚£ä¹ˆå¦‚ä½•å†æ¬¡æ·»åŠ å‘¢ï¼Ÿ å‚è€ƒæ­¤æ–‡  mysql mysql\u0026gt; alter table T_orders add foreign key hello(CustomerId) references T_cust omers(Id); Query OK, 0 rows affected (0.74 sec) Records: 0 Duplicates: 0 Warnings: 0\nå†æ¬¡æŸ¥çœ‹è¡¨ç»“æ„ä¿¡æ¯ï¼š  mysql mysql\u0026gt; show create table T_orders\\G; *************************** 1. row *************************** Table: T_orders Create Table: CREATE TABLE t_orders ( Id int(11) NOT NULL AUTO_INCREMENT, Number varchar(20) NOT NULL DEFAULT \u0026ldquo;, Price int(11) NOT NULL DEFAULT \u0026lsquo;0\u0026rsquo;, CustomerId int(11) DEFAULT NULL, TypeId int(11) DEFAULT NULL, PRIMARY KEY (Id), KEY TypeId (TypeId), KEY hello (CustomerId), CONSTRAINT t_orders_ibfk_2 FOREIGN KEY (TypeId) REFERENCES t_ordertypes (Id) ON UPDATE CASCADE, CONSTRAINT t_orders_ibfk_3 FOREIGN KEY (CustomerId) REFERENCES t_customer s (Id) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 1 row in set (0.00 sec)\nå¯ä»¥çœ‹åˆ°åˆå¢åŠ äº†ï¼ æ’å…¥è¡¨ç»“æ„ä¿¡æ¯  mysql mysql\u0026gt; INSERT INTO T_Orders(Id,Number,Price,CustomerId, TypeId) -\u0026gt; VALUES(1,\u0026lsquo;K001\u0026rsquo;,100,1,1); Query OK, 1 row affected (0.06 sec)\nmysql\u0026gt; INSERT INTO T_Orders(Id,Number,Price,CustomerId, TypeId) -\u0026gt; VALUES(2,\u0026lsquo;K002\u0026rsquo;,200,1,1); Query OK, 1 row affected (0.04 sec)\nmysql\u0026gt; INSERT INTO T_Orders(Id,Number,Price,CustomerId, TypeId) -\u0026gt; VALUES(3,\u0026lsquo;T003\u0026rsquo;,300,1,2); Query OK, 1 row affected (0.08 sec)\nmysql\u0026gt; INSERT INTO T_Orders(Id,Number,Price,CustomerId, TypeId) -\u0026gt; VALUES(4,\u0026lsquo;N002\u0026rsquo;,100,2,2); Query OK, 1 row affected (0.04 sec)\nmysql\u0026gt; INSERT INTO T_Orders(Id,Number,Price,CustomerId, TypeId) -\u0026gt; VALUES(5,\u0026lsquo;N003\u0026rsquo;,500,3,4); Query OK, 1 row affected (0.04 sec)\nmysql\u0026gt; INSERT INTO T_Orders(Id,Number,Price,CustomerId, TypeId) -\u0026gt; VALUES(6,\u0026lsquo;T001\u0026rsquo;,300,4,3); Query OK, 1 row affected (0.04 sec)\nmysql\u0026gt; INSERT INTO T_Orders(Id,Number,Price,CustomerId, TypeId) -\u0026gt; VALUES(7,\u0026lsquo;T002\u0026rsquo;,100,1,1); Query OK, 1 row affected (0.05 sec)\n äºæ˜¯æˆ‘ä»¬å¯ä»¥å¼€å§‹è¿›è¡Œè”åˆæŸ¥è¯¢äº†ï¼š 1ã€æŸ¥è¯¢æ¯å¼ è®¢å•çš„è®¢å•å·ã€ä»·æ ¼ã€å¯¹åº”çš„å®¢æˆ·å§“åä»¥åŠå®¢æˆ·å¹´é¾„  mysql mysql\u0026gt; select o.Number,o.Price,c.Name,c.Age -\u0026gt; From T_Orders o -\u0026gt; Left join T_Customers c -\u0026gt; On o.CustomerId=c.Id; +\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ | Number | Price | Name | Age | +\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ | K001 | 100 | TOM | 21 | | K002 | 200 | TOM | 21 | | T003 | 300 | TOM | 21 | | T002 | 100 | TOM | 21 | | N002 | 100 | MIKE | 24 | | N003 | 500 | JACK | 30 | | T001 | 300 | TOM | 25 | +\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ 7 rows in set (0.08 sec)\n2ã€æ·»åŠ whereè¯­å¥(æ˜¾ç¤ºä»·æ ¼\u0026gt;=150å…ƒçš„è®¢å•)  mysql mysql\u0026gt; select o.Number,o.Price,o.CustomerId,c.Name,c.Age -\u0026gt; from t_orders o -\u0026gt; left join t_customers c on o.CustomerId = c.Id -\u0026gt; where o.price \u0026gt;=150; +\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ | Number | Price | CustomerId | Name | Age | +\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ | K002 | 200 | 1 | TOM | 21 | | T003 | 300 | 1 | TOM | 21 | | N003 | 500 | 3 | JACK | 30 | | T001 | 300 | 4 | TOM | 25 | +\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ 4 rows in set (0.06 sec)\n3ã€å¤šè¡¨joinè¿æ¥æŸ¥è¯¢  mysql mysql\u0026gt; select o.Number è®¢å•å· ,o.Price ä»·æ ¼,c.Name å®¢æˆ·å§“å,c.Age å®¢æˆ·å¹´ -\u0026gt; t.Name è®¢å•ç±»å‹ from t_orders o -\u0026gt; left join T_customers c on o.customerId=c.Id -\u0026gt; left join T_OrderTypes t on o.TypeId=t.Id; +\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;-+ | è®¢å•å· | ä»·æ ¼ | å®¢æˆ·å§“å | å®¢æˆ·å¹´é¾„ | è®¢å•ç±»å‹ | +\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;-+ | K001 | 100 | TOM | 21 | ç°è´§è®¢å• | | K002 | 200 | TOM | 21 | ç°è´§è®¢å• | | T003 | 300 | TOM | 21 | é¢„è®¢è®¢å• | | T002 | 100 | TOM | 21 | ç°è´§è®¢å• | | N002 | 100 | MIKE | 24 | é¢„è®¢è®¢å• | | N003 | 500 | JACK | 30 | å†…éƒ¨ | | T001 | 300 | TOM | 25 | é¢„è´­è®¢å• | +\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;-+ 7 rows in set (0.12 sec)\n ç”±æ­¤å¯è§ å¤šè¡¨æŸ¥è¯¢çš„é­…åŠ›ï¼ï¼ï¼ã€‚ 9.å¤–é”®çº¦æŸ  mysql create table T_Orders( Id int auto_increment primary key, Number varchar(20) not null default \u0026ldquo;, Price int not null default 0, CustomerId int, foreign key(CustomerId) references T_customers(Id) on del ete restrict on update cascade, TypeId int, foreign key(TypeId) references T_OrderTypes(Id) on delete res trict on update cascade); on delete restrict: ä¹Ÿå°±æ˜¯é™åˆ¶åˆ é™¤(å½“ä½ çš„å¤–é”®è¢«ä½¿ç”¨æ˜¯ ä¸€æ—¦è¢«å¼•ç”¨åˆ™ä¸è¢«åˆ é™¤ï¼Œé˜²æ­¢äº§ç”Ÿæ•°æ®ç´Šä¹±ï¼‰ on update cascadeï¼ˆå½“æ›´æ–°æ—¶å€™ï¼Œç´¢å¼•ä¹Ÿç›¸åº”çš„è¿›è¡Œæ›´æ–°ï¼‰\n```\nå¾…å­¦ä¹ çš„çŸ¥è¯†ç‚¹ï¼š è§¦å‘å™¨ï¼Œçº¦æŸï¼Œå­æŸ¥è¯¢ï¼Œå¼•æ“ï¼ˆå­˜å‚¨è¿‡ç¨‹ï¼‰ï¼Œé™¤äº†left joinçš„å…¶ä»–join ã€‚ã€‚ã€‚\nè¡¥å……ï¼ˆæ¥è‡ªå¦‚é¹ï¼‰ï¼š1SQLè¯­å¥ä¸­å­—ç¬¦ä¸²ä¸€èˆ¬ç”¨å•å¼•å·ã€‚ 2ç®€å•çš„æ’å…¥æ•°æ®çš„SQLè¯­å¥ï¼šINSERT INTO T_Persons(Id,Name,Age,Gender) VALUES(5,\u0026lsquo;Jim\u0026rsquo;,20,1) Insertè¯­å¥å¯ä»¥çœç•¥è¡¨ååçš„åˆ—åï¼Œä½†æ˜¯å¼ºçƒˆä¸æ¨è 3.å¦‚æœæ’å…¥çš„è¡Œä¸­æœ‰äº›å­—æ®µçš„å€¼ä¸ç¡®å®šï¼Œé‚£ä¹ˆInsertçš„æ—¶å€™ä¸æŒ‡å®šé‚£äº›åˆ—å³å¯ã€‚ä¸â€œå…è®¸ä¸ºç©ºâ€çš„åˆ—åœ¨æ’å…¥æ—¶ä¸èƒ½çœç•¥ 4ï¼Œè‡ªåŠ¨é€’å¢/è‡ªå¢(Auto Increment)ï¼šå­—æ®µè‡ªå¢å¯ä»¥é¿å…å¹¶å‘ç­‰é—®é¢˜ï¼Œä¸è¦ç¨‹åºå‘˜ä»£ç æ§åˆ¶è‡ªå¢ã€‚ç”¨è‡ªå¢å­—æ®µåœ¨Insertçš„æ—¶å€™ä¸ç”¨æŒ‡å®šå€¼ã€‚ä¿®æ”¹è¡¨ç»“æ„çš„æ–¹æ³•ã€è®¾è®¡è¡¨ã€‘\n1.MySQLçš„è¯­è¨€ä¸­æ²¡æœ‰topä¿®é¥°ï¼Œä¸è¿‡å¯ä»¥ä½¿ç”¨limitæ¥æ“ä½œã€‚ 2.MySQLå’ŒSQL Server å‡æ”¯æŒasã€‚aså¯ä»¥å‘½åä¸€ä¸ªåˆ—æˆ–è€…è¡¨ä¸ºå…¶ä»–åç§°ã€‚ 3.Distinctå¯ä»¥ç”¨æˆ·æ’é™¤é‡å¤ï¼Œè‹¥åœ¨Distinctåé¢ç”¨é€—å·åˆ†éš”äº†å¥½å‡ ä¸ªåˆ—ï¼Œé‚£è¡¨ç¤ºè¦å°†è¿™äº›åˆ—è”åˆèµ·æ¥å»é‡å¤ã€‚ 4.Order by åˆ—å asc/desc å…¶ä¸­ascä¸ºé»˜è®¤çš„ä»å°åˆ°å¤§ï¼Œdescä¸ºä»å¤§å¤§å°ï¼Œå®é™…é¡¹ç›®ä¸­ï¼Œå¾ˆå¤šè¡¨çš„æ•°æ®æ˜¾ç¤ºéƒ½éœ€è¦ä»åé¢åˆ°å‰é¢ã€‚ 5.èšåˆå‡½æ•°åœ¨å„ä¸ªæ•°æ®åº“ä¸­å‡å—åˆ°æ”¯æŒã€‚AVGã€MAXã€SUMã€COUNTã€‚åŒä¸€ä¸ªè¯­å¥ä¸­ï¼Œå¤šä¸ªèšåˆå‡½æ•°å¯ä»¥ä¸€èµ·ä½¿ç”¨ã€‚ 6.èšåˆå‡½æ•°å¤šå’ŒGroup byä¸€èµ·ä½¿ç”¨ï¼Œå¦‚æœæ²¡æœ‰Group byé‚£ä¹ˆèšåˆçš„å°±æ˜¯æ•´ä¸ªè¡¨çš„æ‰€æœ‰æŒ‡å®šåˆ—çš„æ•°æ®ã€‚ 7.æ¨¡ç³ŠæŸ¥è¯¢ä¸æ˜¯ä½¿ç”¨= è€Œæ˜¯ä½¿ç”¨ likeç»“åˆç™¾åˆ†å· % 8.ä½¿ç”¨countèšåˆå‡½æ•°å¯ä»¥æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æŸä¸€åˆ—æ˜¯å¦å­˜åœ¨ã€‚ 9.åŸåˆ™âˆ¶å½“ä½¿ç”¨äº†åˆ†ç»„å‡½æ•°Group byåï¼Œselectåªèƒ½æ˜¯èšåˆå‡½æ•°æˆ–è€…Group byçš„åˆ—ã€‚è™½ç„¶MySQLä¸æŠ¥é”™ï¼Œä½†æ˜¯ä»ç„¶ä¸æ¨èè¿™ä¹ˆä½¿ç”¨ã€‚ 10.å¯¹äºç¬¬9ç‚¹ï¼Œè™½ç„¶select çš„åªèƒ½æ˜¯Group byçš„ä½†æ˜¯èšåˆå‡½æ•°ä»ç„¶å¯ä»¥èšåˆå…¶ä»–åˆ—ã€‚ 11.Havingå’ŒWhereåŒºåˆ«ï¼ŒHavingæ­é…Group byä½¿ç”¨ï¼Œæ˜¯å¯¹åˆ†ç»„åçš„æ•°æ®è¿›è¡Œç­›é€‰ã€‚è€ŒWhereæ˜¯åœ¨åˆ†ç»„å‰å°±è¡Œç­›é€‰ã€‚ 12.å½“å¤šè¡¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¸æ¨èå•çº¯çš„ä½¿ç”¨* 13.å¯¹äºå¤šè¡¨æŸ¥è¯¢ï¼Œä¸€å®šè¦æ³¨æ„ä½¿ç”¨åˆ«åã€‚ 14.Inner Join å°±æ˜¯Joinã€‚ 15.All Some Anyä¸­Someå’ŒAnyç­‰ä»·çš„ã€‚ 16.å¤šè¡¨æŸ¥è¯¢ä½¿ç”¨Onæ¥è¿æ¥ï¼Œå¤šä¸º=æ¥è¿æ¥ã€‚ 17.Joinå’ŒUnionåŒºåˆ«ï¼Œå¯ä»¥å½¢è±¡çš„è®°å¿†ä¸º Joinæ˜¯æ¨ªç€çš„è¿æ¥ï¼ŒUnionæ˜¯ä¸Šä¸‹ç«–ç€çš„è¿æ¥ã€‚ 18.Left Join æ˜¯ä¸€å®šæ˜¾ç¤ºå·¦è¾¹çš„ï¼Œæ²¡æ˜¾ç¤ºçš„ä½¿ç”¨nullæ¥è¡¥ä½ï¼ŒRight Joinæ˜¯å³è¾¹çš„è¡¨ä¸€å®šæ˜¾ç¤ºï¼Œå·¦è¾¹çš„è¡¨æŸåˆ—ä¸å­˜åœ¨ä½¿ç”¨Nullæ¥è¡¥ä½ã€‚ 19.å½“å­æŸ¥è¯¢çš„ç»“æœä¸æ˜¯ä¸€ä¸ªçš„æ—¶å€™ï¼Œä¸»æŸ¥è¯¢åˆåœ¨ä½¿ç”¨\u0026gt; \u0026lt; =è¡¨è¾¾å¼çš„æ—¶å€™ï¼ŒAll æ‰€æœ‰ Any/Someçš„ä½œç”¨å°±å‘æŒ¥äº†ã€‚ 20.ä»åŸç†ä¸Šæ¥è®²ï¼Œå¤šå¼ è¡¨è”åˆèµ·æ¥çš„æŸ¥è¯¢æ˜¯âˆ¶è‹¥A,Bä¸¤å¼ è¡¨ï¼ŒAè¡¨çš„ç¬¬ä¸€åˆ—ä¾æ¬¡æ‰«æBè¡¨çš„æ¯ä¸€åˆ—ï¼Œæå–ç¬¦å·æ¡ä»¶çš„ã€‚ç±»ä¼¼2ä¸ªåµŒå¥—çš„forå¾ªç¯é‚£æ ·ã€‚ 21.å½“å­æŸ¥è¯¢çš„ç»“æœä¸æ˜¯1åˆ—çš„æ—¶å€™ï¼Œæ˜¯ä¸èƒ½ä½¿ç”¨ \u0026gt; =\u0026lt; è¿™äº›è¿ç®—ç¬¦çš„ã€‚ 22.ä½¿ç”¨Unionï¼ŒIntersectï¼ŒExceptè¿ç®—ç¬¦çš„æ—¶å€™ï¼Œç›®æ ‡åˆ—è¡¨éœ€è¦æœ‰ç›¸åŒçš„æ•°ç›®ã€‚ 23.èšåˆå‡½æ•°ä¸€èˆ¬æ­é…åˆ†ç»„å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼Œè‹¥ä¸åˆ†ç»„ï¼Œé‚£ä¹ˆå°±æŒ‰ç…§whereçš„æ¥ï¼Œå¦‚æœwhereæ²¡æœ‰å°±æ˜¯æ‰€æœ‰çš„åˆ—ã€‚ 24.åœ¨ä½¿ç”¨inçš„è¯­å¥ä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯å¯ä»¥ä½¿ç”¨Existsï¼Œä¸”Exitsä¼šèµ°ç´¢æ€§ç›¸å¯¹æ¥è¯´å¿«ç‚¹ï¼Œä½†æ˜¯ä¸ä¸€å®šã€‚ç»ƒä¹ çš„æ—¶å€™ï¼Œ2ä¸ªéƒ½è¦å†™å‡ºæ¥ã€‚ 25.å½“Exits Where çš„æ—¶å€™ï¼Œè¯¥SQLè¯­å¥è¿è¡Œé¡ºåºæ˜¯è¿™æ ·çš„âˆ¶å…ˆè¿è¡ŒExitså‰é¢çš„ï¼Œç„¶åå°†æ¯ä¸€åˆ—å¸¦å…¥whereä¸­è¿›è¡ŒæŸ¥è¯¢åŒ¹é…ï¼Œå¦‚æœæ‰¾åˆ°äº†å°±è¾“å‡ºè¿™ä¸€åˆ—ã€‚åä¹‹ä¸è¾“å‡ºã€‚ 26.Exitså‡½æ•°çš„è¿”å›åªæ˜¯trueæˆ–è€…fanlseã€‚ 27.likeæˆ–è€…not likeåˆ©ç”¨ %è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ã€‚ 28.é€—å·è¿æ¥çš„2ä¸ªâˆ¶ from Aï¼ŒB ||| order by a asc, b desc 29.èšåˆå‡½æ•°ä¸åº”è¯¥å‡ºç°åœ¨Whereä¸­ï¼Œå¦‚æœWhereè¦å‡ºç°ï¼Œé‚£ä¹ˆå°†å…¶å•ç‹¬ææˆå­æŸ¥è¯¢çš„æ¨¡å¼ã€‚ ","date":1431327525,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327525,"objectID":"be01a91f066b9c8c8cd04f12e85b4ca9","permalink":"/blog/2015/05/11/mysql2yue-15ri-javaban-zuo-ye-bi-ji/","publishdate":"2015-05-11T14:58:45+08:00","relpermalink":"/blog/2015/05/11/mysql2yue-15ri-javaban-zuo-ye-bi-ji/","section":"archives","summary":"","tags":null,"title":"mysql2æœˆ15æ—¥Javaç­ä½œä¸šç¬”è®°","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"4:javaå¤šçº¿ç¨‹\næ–°å»ºçŠ¶æ€(start) å¯è¿è¡ŒçŠ¶æ€(runnable) è¿è¡ŒçŠ¶æ€(run) é˜»å¡è£…å¡«(sleep) æ­»äº¡çŠ¶æ€ï¼ˆstop,deadï¼‰\nstart\u0026mdash;\u0026gt;Runnable\u0026mdash;-\u0026gt; Running\u0026mdash;\u0026gt;Dead | | | |\nThreads implements Running\u0026mdash;\u0026gt;Wait\u0026mdash;\u0026gt;Blocked\u0026mdash;\u0026gt;notify\u0026mdash;-\u0026gt;Runnable Running\u0026mdash;\u0026gt;sleep\u0026mdash;\u0026gt;Runnable çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ ä¸€ä¸ªè¿›ç¨‹å ç”¨å®é™…çš„å†…å­˜èµ„æºï¼Œçº¿ç¨‹ä¾èµ–äºè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ è¿›ç¨‹å¤§ï¼Œçº¿ç¨‹å° æ¯ä¸€ä¸ªç¨‹åºè¿è¡Œéƒ½è¿è¡Œåœ¨ä¸€ä¸ªè¿›ç¨‹å†…ï¼Œè€Œä¸æ˜¯çº¿ç¨‹ ä¸€ä¸ªè¿›ç¨‹å¯åˆ†ä¸ºå¤šä¸ªçº¿ç¨‹\nå”®ç¥¨æ¡ˆä¾‹ é—®é¢˜ï¼š ç¬¬70å¼ ç¥¨è¿˜æ²¡å”®å®Œä¸èƒ½å”®ç¬¬73å¼ çš„ç¥¨ï¼Œä½†æ˜¯å®é™…å´æ˜¯é”€å”®äº†ï¼Ÿ\n/** * è§£é‡Šï¼š */ package TestMultiThreads; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ18æ—¥ä¸‹åˆ9:09:27 * @version TestMultiThreadsTestPesonThread V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestPesonThread { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub A aa = new A(); Thread t1 = new Thread(aa); Thread t2 = new Thread(aa); Thread t3 = new Thread(aa); /* B bb = new B(); Thread t1 = new Thread(bb); Thread t2 = new Thread(bb); Thread t3 = new Thread(bb);*/ t1.start(); t2.start(); t3.start(); } } class A implements Runnable { private static int tickets = 0; @Override public void run() { // TODO Auto-generated method stub while(true) { //synchronized(\u0026quot;aaa\u0026quot;) { if(tickets \u0026lt; 10) { System.out.println(Thread.currentThread().getName()+tickets); tickets++; }else { break; } } } } } class B implements Runnable { private static int tickets = 0; @Override public synchronized void run() { // TODO Auto-generated method stub while(true) { if(tickets \u0026lt; 10) { System.out.println(Thread.currentThread().getName()+tickets); tickets++; }else { break; } } } }  è§£å†³æ–¹æ¡ˆ1ï¼š é‡‡ç”¨synchronized(\u0026ldquo;aaa\u0026rdquo;) æˆ–è€… synchronized(TestPesonThread.class) éƒ½æ˜¯å¯ä»¥çš„ï¼Œ ç›¸å½“äºåœ¨ä¸€æ‰‡é—¨ä¸­ å¡å…¥äº†å£é¦™ç³–ï¼Œå¾—æ‹¿èµ°äº†æ‰èƒ½æ‰“å¼€ï¼ä¸€ä¸ªå‘çš„ä½œç”¨\n@Override public void run() { // TODO Auto-generated method stub while(true) { //synchronized(\u0026quot;aaa\u0026quot;) synchronized(TestPesonThread.class) { if(tickets \u0026lt; 10) { System.out.println(Thread.currentThread().getName()+tickets); tickets++; }else { break; } } } }  ç»“æœï¼šï¼ˆæ³¨æ„åŠ å…¥Thread.sleep(1000ï¼‰ä¸ç„¶éƒ½ä¼šåœ¨thread0 æˆ–è€…thread1 thread2ä¸­æ‰§è¡Œï¼Œå› ä¸ºå°‘ï¼‰\nThread-0æ­£åœ¨å”®10 Thread-2æ­£åœ¨å”®9 Thread-1æ­£åœ¨å”®8 Thread-2æ­£åœ¨å”®7 Thread-2æ­£åœ¨å”®6 Thread-2æ­£åœ¨å”®5 Thread-0æ­£åœ¨å”®4 Thread-2æ­£åœ¨å”®3 Thread-2æ­£åœ¨å”®2 Thread-2æ­£åœ¨å”®1  è§£å†³æ–¹æ¡ˆ2 ï¼š é‡‡ç”¨synchronizedçš„runæ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥çš„ï¼ ç›¸å½“äºé”å®šå‡½æ•°ä»£ç å—ï¼Œéœ¸å ç€ ç›´åˆ°ç”¨å®Œï¼ ä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä»…ä»…é’ˆå¯¹ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œå®Œï¼ä¸€ä¸ªå¯¹è±¡éœ¸å ä¸€ä¸ªæ–¹æ³•\n/** * è§£é‡Šï¼š */ package TestMultiThreads; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ18æ—¥ä¸‹åˆ9:09:27 * @version TestMultiThreadsTestPesonThread V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestPesonThread { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub A aa = new A(); Thread t1 = new Thread(aa); Thread t2 = new Thread(aa); Thread t3 = new Thread(aa); /* B bb = new B(); Thread t1 = new Thread(bb); Thread t2 = new Thread(bb); Thread t3 = new Thread(bb);*/ t1.start(); t2.start(); t3.start(); } } class A implements Runnable { private static int tickets = 0; @Override public synchronized void run() { // TODO Auto-generated method stub while(true) { //synchronized(\u0026quot;aaa\u0026quot;) //synchronized(TestPesonThread.class) { if(tickets \u0026lt; 10) { System.out.println(Thread.currentThread().getName()+\u0026quot;æ­£åœ¨å”®\u0026quot;+tickets); tickets++; }else { break; } } } } } class B implements Runnable { private static int tickets = 0; @Override public synchronized void run() { // TODO Auto-generated method stub while(true) { if(tickets \u0026lt; 10) { System.out.println(Thread.currentThread().getName()+tickets); tickets++; }else { break; } } } }  ç»“æœï¼š\nThread-0æ­£åœ¨å”®10 Thread-0æ­£åœ¨å”®9 Thread-0æ­£åœ¨å”®8 Thread-0æ­£åœ¨å”®7 Thread-0æ­£åœ¨å”®6 Thread-0æ­£åœ¨å”®5 Thread-0æ­£åœ¨å”®4 Thread-0æ­£åœ¨å”®3 Thread-0æ­£åœ¨å”®2 Thread-0æ­£åœ¨å”®1  ç”±æ­¤æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼š æ–¹æ³•çš„éœ¸å è§£å†³æ‰ä¹±åºï¼Œä½†æ˜¯å…¶å®ä»…ä»…åªæ˜¯ä¸€ä¸ªçº¿ç¨‹å†æ‰§è¡Œï¼Œä¸èƒ½è¾¾åˆ°ç›®çš„ï¼› è€Œé‡‡ç”¨synchronizedå¯¹è±¡ æ¯”å¦‚å­—ç¬¦ä¸²å¯¹è±¡\u0026rdquo;aaa\u0026rdquo;,ä¸ç„¶ç±»çš„class :TestPesonThread.class æ”¾åœ¨å¾ªç¯å¿«ä¸­éƒ½èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³å¤šçº¿ç¨‹å…±ç”¨ä¸€ä¸ªæ¨¡å—ï¼Œå¿…é¡»æ‰§è¡Œä¸€å—å®Œæ¯•ï¼Œæ‰èƒ½æ‰§è¡Œä¸‹ä¸€å—çš„é—®é¢˜ï¼ï¼perfect\næ¡ˆä¾‹2ï¼šç”Ÿäº§å’Œæ¶ˆè´¹\nç›®çš„ï¼šé€šè¿‡çº¿ç¨‹æ¨¡æ‹Ÿä¸€ä¸ªåœ¨ç”Ÿäº§ ä¸€ä¸ªåœ¨æ¶ˆè´¹ï¼Œå¹¶ä¸”å½“é‡å°äºä¸‰çš„æ—¶å€™ï¼Œå¿…é¡»å†ç”Ÿäº§ï¼Œåœ¨é‡\nwaitæ–¹æ³•çš„ä½œç”¨æ˜¯ä½¿å¾—å½“å‰è°ƒç”¨waitæ–¹æ³•æ‰€åœ¨éƒ¨åˆ†ï¼ˆä»£ç å—ï¼‰çš„çº¿ç¨‹ï¼ˆå½“å‰çº¿ç¨‹ï¼‰åœæ­¢æ‰§è¡Œï¼Œå¹¶é‡Šæ”¾å½“å‰è·å¾—çš„è°ƒç”¨waitæ‰€åœ¨çš„ä»£ç å—çš„é”ï¼Œå¹¶åœ¨å…¶ä»–çº¿ç¨‹è°ƒç”¨notifyæˆ–è€…notifyAllæ–¹æ³•æ—¶æ¢å¤åˆ°ç«äº‰é”çŠ¶æ€ï¼ˆä¸€æ—¦è·å¾—é”å°±æ¢å¤æ‰§è¡Œï¼‰ã€‚ æœ‰ç‚¹ç±»ä¼¼å·«åŒ»çš„å¼¹å¼¹ä¹æ•ˆæœï¼Œä½ è¢«å¼¹äº†ï¼Œå°±åœæ­¢ï¼Œå½“åˆ«äººè¢«å¼¹äº†ï¼Œä½ å°±å¯ä»¥è¿åŠ¨äº†\næ³¨æ„ï¼š waitè¢«è°ƒç”¨çš„æ—¶å€™å¿…é¡»åœ¨æ‹¥æœ‰é”ï¼ˆå³synchronizedä¿®é¥°çš„ï¼‰çš„ä»£ç å—ä¸­ã€‚ æ¢å¤æ‰§è¡Œåï¼Œä»waitçš„ä¸‹ä¸€æ¡è¯­å¥å¼€å§‹æ‰§è¡Œï¼Œå› è€Œwaitæ–¹æ³•æ€»æ˜¯åº”å½“åœ¨whileå¾ªç¯ä¸­è°ƒç”¨ï¼Œä»¥å…å‡ºç°æ¢å¤æ‰§è¡Œåç»§ç»­æ‰§è¡Œçš„æ¡ä»¶ä¸æ»¡è¶³å´ç»§ç»­æ‰§è¡Œçš„æƒ…å†µã€‚ notifyæ–¹æ³•é€šçŸ¥è°ƒç”¨äº†waitæ–¹æ³•ï¼Œä½†æ˜¯å°šæœªæ¿€æ´»çš„ä¸€ä¸ªçº¿ç¨‹è¿›å…¥çº¿ç¨‹è°ƒåº¦é˜Ÿåˆ—ï¼ˆå³è¿›å…¥é”ç«äº‰ï¼‰ï¼Œæ³¨æ„ä¸æ˜¯ç«‹å³æ‰§è¡Œã€‚å¹¶ä¸”å…·ä½“æ˜¯å“ªä¸€ä¸ªçº¿ç¨‹ä¸èƒ½ä¿è¯ã€‚å¦å¤–ä¸€ç‚¹å°±æ˜¯è¢«å”¤é†’çš„è¿™ä¸ªçº¿ç¨‹ä¸€å®šæ˜¯åœ¨ç­‰å¾…waitæ‰€é‡Šæ”¾çš„é”ã€‚ notifyAllæ–¹æ³•åˆ™å”¤é†’æ‰€æœ‰è°ƒç”¨äº†waitæ–¹æ³•ï¼Œå°šæœªæ¿€æ´»çš„è¿›ç¨‹è¿›å…¥ç«äº‰é˜Ÿåˆ—ã€‚\næœ‰ä¸€ä¸ªwaitæ¡†ï¼ŒåŒæ—¶æœ‰ä¸€ä¸ªç›‘å·¥notify,è´Ÿè´£å«é†’è¢«æš‚åœçš„waiter,å»ç»§ç»­åšä»–çš„è¢«ä¸­æ–­çš„å·¥ä½œ synstack ç±»å®šä¹‰äº†synchronizedçš„pushå’Œpopæ–¹æ³• producer è¿›è¡Œpushè°ƒç”¨ï¼ˆå¯ä»¥è¢«ä¸­æ–­ï¼Œå½“è¾¾åˆ°ç”Ÿäº§çº¿ç¨‹çš„ä¸Šé™æ—¶ å°±ä¸­æ–­ï¼‰ customer è¿›è¡Œpopè°ƒç”¨ï¼ˆå¯ä»¥è¢«ä¸­æ–­ï¼Œå½“æ²¡æœ‰äº§å“çš„æ—¶å€™ å¹¶åœ¨äº§å“æ•°ä¸º3çš„æ—¶å€™é€šçŸ¥ç”Ÿäº§ï¼‰\n/** * è§£é‡Šï¼š */ package TestMultiThreads; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ18æ—¥ä¸‹åˆ9:54:48 * @version TestMultiThreadsTestProducerCustomer V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestProducerCustomer { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub SynStack ss = new SynStack(); Producer pro = new Producer(ss); Customer custom = new Customer(ss); //Thread tt = new Thread(); /* pro.run(); custom.run();*/ Thread t1 = new Thread(pro); t1.start(); Thread t2 = new Thread(custom); t2.start(); } } class SynStack { private char[] ss = new char[6]; //private static int count = 0; private int count = 0; public synchronized void push(char c) { try { Thread.sleep(500); } catch (InterruptedException e1) { // TODO Auto-generated catch block e1.printStackTrace(); } //if(count == ss.length) while(count == ss.length) { try { System.out.println(\u0026quot;ç”Ÿäº§å·²è¾¾ä¸Šé™ï¼Œå†ç”Ÿäº§å®¹æ˜“é€ æˆä¾›éœ€ä¸å¹³è¡¡\u0026quot;); this.wait(); } catch (InterruptedException e) { // TODO Auto-generated catch block e.printStackTrace(); } } /* if(count == 3) { this.notify(); //å¦‚æœè¾¾åˆ°3çš„æ—¶å€™é€šçŸ¥ä»–ä»¬è¿›è¡Œç”Ÿäº§ }*/ if(count \u0026gt; 1) { System.out.println(count+\u0026quot;å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº†\u0026quot;); this.notify(); //ä¸€æœ‰åˆ™é€šçŸ¥å¤§å®¶è¿›è¡Œæ¶ˆè´¹ } System.out.printf(\u0026quot;It generates %d product.It is %c\\n\u0026quot;,count,c); ss[count] = c; count++; } //synchronized å¦‚æœä¸åŠ ï¼Œåˆ™æŠ¥é”™ public synchronized char pop() { try { Thread.sleep(100); } catch (InterruptedException e1) { // TODO Auto-generated catch block e1.printStackTrace(); } //if(count == 0) while(count == 0) { //this.notify();//é€šçŸ¥pushçº¿ç¨‹è¿›è¡Œç”Ÿäº§ try { System.out.println(\u0026quot;äº§å“å·²å”®ç©ºï¼Œè¯·è”ç³»ç”Ÿäº§å•†\u0026quot;); this.wait(); } catch (InterruptedException e) { // TODO Auto-generated catch block e.printStackTrace(); } } if(count == 3) { System.out.println(\u0026quot;è¯¥ç£ä¿ƒç”Ÿäº§äº†ï¼Œå¹¶ä¸”å¯ä»¥ç»§ç»­é”€å”®\u0026quot;); this.notify(); //å¦‚æœè¾¾åˆ°3çš„æ—¶å€™é€šçŸ¥ä»–ä»¬è¿›è¡Œç”Ÿäº§ï¼ˆpushï¼‰ } //this.notify(); count--; //å¿…é¡»æ”¾åœ¨count--ä¹‹å æ‰å¯ä»¥è°ƒç”¨ss[count] System.out.printf(\u0026quot;It ate %d product.It is %c\\n\u0026quot;,count,ss[count]); return ss[count]; } } class Producer implements Runnable { private SynStack ss = null; public Producer(SynStack ss) { this.ss =ss; } @Override public void run() { // TODO Auto-generated method stub // ss.push('a'); /* try { Thread.sleep(1000); } catch (InterruptedException e) { // TODO Auto-generated catch block e.printStackTrace(); }*/ char ch ; for(int i =0 ; i \u0026lt; 20 ; i++) { ch = (char)('a'+i); ss.push(ch); } } } class Customer implements Runnable { private SynStack ss = null; public Customer(SynStack ss) { this.ss = ss; } @Override public void run() { // TODO Auto-generated method stub // System.out.println(ss.pop()); /* try { Thread.sleep(1000); } catch (InterruptedException e) { // TODO Auto-generated catch block e.printStackTrace(); }*/ for(int i = 0; i \u0026lt; 20 ; i++) { System.out.println(ss.pop()); } } }  ç»“æœï¼š\nIt generates 0 product.It is a It generates 1 product.It is b 2å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 2 product.It is c è¯¥ç£ä¿ƒç”Ÿäº§äº†ï¼Œå¹¶ä¸”å¯ä»¥ç»§ç»­é”€å”® It ate 2 product.It is c c 2å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 2 product.It is d è¯¥ç£ä¿ƒç”Ÿäº§äº†ï¼Œå¹¶ä¸”å¯ä»¥ç»§ç»­é”€å”® It ate 2 product.It is d d It ate 1 product.It is b b It generates 1 product.It is e It ate 1 product.It is e e It generates 1 product.It is f 2å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 2 product.It is g è¯¥ç£ä¿ƒç”Ÿäº§äº†ï¼Œå¹¶ä¸”å¯ä»¥ç»§ç»­é”€å”® It ate 2 product.It is g g 2å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 2 product.It is h 3å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 3 product.It is i It ate 3 product.It is i i 3å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 3 product.It is j 4å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 4 product.It is k 5å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 5 product.It is l ç”Ÿäº§å·²è¾¾ä¸Šé™ï¼Œå†ç”Ÿäº§å®¹æ˜“é€ æˆä¾›éœ€ä¸å¹³è¡¡ It ate 5 product.It is l l It ate 4 product.It is k k It ate 3 product.It is j j è¯¥ç£ä¿ƒç”Ÿäº§äº†ï¼Œå¹¶ä¸”å¯ä»¥ç»§ç»­é”€å”® It ate 2 product.It is h 2å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 2 product.It is m h 3å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 3 product.It is n It ate 3 product.It is n n 3å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 3 product.It is o It ate 3 product.It is o o 3å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 3 product.It is p 4å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 4 product.It is q It ate 4 product.It is q q 4å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 4 product.It is r It ate 4 product.It is r r 4å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 4 product.It is s 5å¤§å®¶å¯ä»¥æ¥æ¶ˆè´¹äº† It generates 5 product.It is t It ate 5 product.It is t t It ate 4 product.It is s s It ate 3 product.It is p p è¯¥ç£ä¿ƒç”Ÿäº§äº†ï¼Œå¹¶ä¸”å¯ä»¥ç»§ç»­é”€å”® It ate 2 product.It is m m It ate 1 product.It is f f It ate 0 product.It is a a  æ³¨æ„ï¼šè‡³äºnotifyæ”¾ç½®åœ¨ä»£ç çš„å“ªä¸ªåœ°æ–¹ï¼Œæœ‰å¾…è¿›ä¸€æ­¥çš„æ¯”è¾ƒã€‚\n5.ç½‘ç»œç¼–ç¨‹\nä¸€ä¸ªç½‘ç»œç¨‹åºéœ€è¦è€ƒè™‘åè®®ï¼ŒIPï¼Œç«¯å£å·ã€‚\nåè®®ï¼š ç”¨äºç½‘ç»œä¼ è¾“çš„è§„åˆ™ã€å‡†åˆ™ã€‚åœ¨ä¸åŒçš„è®¡ç®—æœºä¼ è¾“å±‚ä¸­ï¼ˆ7å±‚æ¶æ„ï¼‰ æœ‰ä¸åŒçš„æ•°æ®åŒ…ï¼Œ ä¸åŒ å±‚å°åŒ…çš„ä¸åŒæ–¹æ³•\nIP: å”¯ä¸€æ ‡è¯†äº’è”ç½‘ä¸­çš„è®¡ç®—æœº ç«¯å£å·ï¼šqqæœ‰è‡ªå·±çš„ç«¯å£ mysqlçš„3306ç«¯å£ smtpçš„23ç«¯å£ç­‰\nåè®®åˆ†ä¸ºUDP,TCP UDPçš„ç‰¹ç‚¹ï¼šæ— éœ€ç­‰å¾…å¯¹æ–¹ç¡®è®¤ï¼Œæ¯”å¦‚å†™ä¿¡ æœ‰å¯èƒ½æ”¶ä¸åˆ°ã€‚ TCPçš„ç‰¹ç‚¹ï¼šéœ€è¦ç­‰å¾… å¯¹æ–¹è¿æ¥ï¼Œæ¯”å¦‚QQè§†é¢‘èŠå¤©ï¼Œæ‰“ç”µè¯ã€‚ä¸‰é‡è¿æ¥\nUDPç¼–ç¨‹ï¼š çŸ¥è¯†ç‚¹ï¼š DatagramSocket æ˜¯ä¸€è‰˜è½®èˆ¹ï¼ˆä¼ é€’æ•°æ®åŒ…ï¼‰ DatagramPacket æ˜¯ä¸€ä¸ªè½®èˆ¹ä¸Šçš„è´§ç‰©ï¼ˆè·å–æ•°æ®åŒ…ï¼‰\nByteArrayInputStream and DataInputStream ç”¨äºæ‰“åŒ…æ¸¯å£è´§ç‰© ByteArrayOutputStream and DataOutputStream ä¹Ÿç”¨äºæ‰“åŒ…æ¸¯å£è´§ç‰©\næ¡ˆä¾‹1ï¼šç®€å•å®ç°ä¸€ä¸ªUDPçš„ä¼ è¾“è¿‡ç¨‹ï¼ŒæœåŠ¡å™¨å¼€å¯ï¼Œå®¢æˆ·ç«¯å‘é€æ•°æ®ï¼ˆæš‚æ—¶æœªå®ç°æœåŠ¡å™¨çš„å‘é€ å®¢æˆ·ç«¯çš„æ¥å—ï¼Œå®ç°ç®€å•ï¼Œdoså¯¹åº”çš„dis diså¯¹åº”çš„dos) Server:\n/** * è§£é‡Šï¼š */ package TestNetwork; import java.io.ByteArrayInputStream; import java.io.DataInputStream; import java.io.IOException; import java.net.DatagramPacket; import java.net.DatagramSocket; import java.net.SocketException; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ19æ—¥ä¸‹åˆ1:49:36 * @version TestNetworkTestDatagramSocket V1.0 * åŠŸèƒ½ï¼š æµ‹è¯•UDP æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestDatagramSocket { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub DatagramSocket ds = null; DatagramPacket dp = null; try { ds = new DatagramSocket(5566); byte[] apple = new byte[1025]; /*for(int i =0 ; i \u0026lt; 20; i++) { apple = (byte) ((byte)'a'+i); }*/ dp = new DatagramPacket(apple, apple.length); while(true) { try { ds.receive(dp); ByteArrayInputStream bais = new ByteArrayInputStream(dp.getData()); DataInputStream dis = new DataInputStream(bais); System.out.println(dis.readLong()); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } catch (SocketException e) { // TODO Auto-generated catch block e.printStackTrace(); } } }  Client\n/** * è§£é‡Šï¼š */ package TestNetwork; import java.io.*; import java.net.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ21æ—¥ä¸Šåˆ1:39:22 * @version TestNetworkTestDatagramClient V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestDatagramClient { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub DatagramSocket ds = null; DatagramPacket dp = null; try { ds = new DatagramSocket(); long m = 1000l; ByteArrayOutputStream baos = new ByteArrayOutputStream(); DataOutputStream dos = new DataOutputStream(baos); dos.writeLong(m); byte[] apple = baos.toByteArray(); dp = new DatagramPacket(apple, apple.length,new InetSocketAddress(\u0026quot;127.0.0.1\u0026quot;,5566)); ds.send(dp); }catch(IOException e) { } } }  ç»“æœï¼š\nå…ˆå¼€å¯Server,å†è¿è¡ŒClient 1000  TCPç¼–ç¨‹ï¼š çŸ¥è¯†ç‚¹ï¼š 1.é€šè¿‡ServerSocketäº§ç”Ÿä¸€ä¸ªè¿è¡Œçš„æ‰€éœ€çš„ç«¯å£å· 2.åˆ©ç”¨Socketè¿›è¡Œç¼–ç¨‹ï¼ŒSocketæºè‡ªäºunixæ“ä½œç³»ç»Ÿ\næ¡ˆä¾‹1ï¼š æ¨¡æ‹ŸUDPçš„ç±»ä¼¼ç¨‹åºï¼Œå³æœåŠ¡å™¨ç«¯ç­‰å¾…æ•°æ® è¿›è¡Œè¯»å– å®¢æˆ·ç«¯å‘é€æ•°æ®\nServer:\n/** * è§£é‡Šï¼š */ package TestNetwork; import java.io.*; import java.net.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ19æ—¥ä¸‹åˆ2:30:08 * @version TestNetworkTestServer1 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestServer1 { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub try { ServerSocket ss = new ServerSocket(5566); while(true) { Socket s1 =ss.accept(); DataInputStream dis = new DataInputStream(s1.getInputStream()); System.out.println(dis.readUTF()); dis.close(); } } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } }  Client:\n/** * è§£é‡Šï¼š */ package TestNetwork; import java.io.*; import java.net.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ19æ—¥ä¸‹åˆ2:30:23 * @version TestNetworkTestClient1 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestClient1 { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub Socket s1 =null; OutputStream os = null; DataOutputStream dos = null; try { s1 = new Socket(\u0026quot;127.0.0.1\u0026quot;,5566); os = s1.getOutputStream(); dos = new DataOutputStream(os); dos.writeUTF(\u0026quot;I am coming ,Sir\u0026quot;); dos.flush(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); }finally { try { dos.close(); os.close(); s1.close(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } }  æ¡ˆä¾‹2ï¼šæ”¹è¿›æ¡ˆä¾‹1 æ˜¯çš„æœåŠ¡å™¨ç«¯ä¹Ÿèƒ½å¤Ÿå‘é€ å®¢æˆ·ç«¯ä¹Ÿèƒ½æ¥å—æ•°æ®\nServer:\n\u0026lt;font size=\u0026quot;3\u0026quot;\u0026gt;/** * è§£é‡Šï¼š */ package TestNetwork; import java.io.*; import java.net.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ19æ—¥ä¸‹åˆ2:38:37 * @version TestNetworkTestServer2 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestServer2 { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub Socket s1 = null ; DataOutputStream dos = null; DataInputStream dis = null; BufferedReader br = null; try { ServerSocket ss = new ServerSocket(5566); s1 = ss.accept(); dis = new DataInputStream(s1.getInputStream()); dos = new DataOutputStream(s1.getOutputStream()); br = new BufferedReader(new InputStreamReader(System.in)); while(true) { String apple = dis.readUTF(); System.out.println(\u0026quot;å®¢æˆ·ç«¯ï¼š\u0026quot;+dis.readUTF()); if(apple.equals(\u0026quot;bye\u0026quot;)) { break; } apple = br.readLine(); dos.writeUTF(apple); } } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); }finally { try { dos.close(); dis.close(); s1.close(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } } \u0026lt;/font\u0026gt;  Client:\n/** * è§£é‡Šï¼š */ package TestNetwork; import java.io.*; import java.net.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ19æ—¥ä¸‹åˆ2:38:52 * @version TestNetworkTestClient2 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestClient2 { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub Socket s1 = null; OutputStream os = null; InputStream is = null; DataOutputStream dos = null; DataInputStream dis = null; BufferedReader br = null; try { s1 = new Socket(\u0026quot;127.0.0.1\u0026quot;,5566); os = s1.getOutputStream(); is = s1.getInputStream(); dos = new DataOutputStream(os); dis = new DataInputStream(is); dos.writeUTF(\u0026quot;Come to the world of net server\u0026quot;); dos.flush(); br = new BufferedReader(new InputStreamReader(System.in)); while(true) { String str = br.readLine(); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;byebye\u0026quot;)) break; str = dis.readUTF(); System.out.println(\u0026quot;æœåŠ¡å™¨ said that\u0026quot; + str+\u0026quot;\\n\u0026quot;); if(str.equalsIgnoreCase(\u0026quot;byebye\u0026quot;)) break; } } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } }  ç»“æœï¼šå¯ä»¥åœ¨å­—ç¬¦ç•Œé¢ä¸‹è¿›è¡Œå¯¹è¯ å®¢æˆ·ç«¯ï¼šhi hi æœåŠ¡å™¨ said thathi too,smida\nå‡ºç°çš„é—®é¢˜æ˜¯ï¼Œæ— æ³•ç‹¬ç«‹çš„åˆ‡æ¢å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ï¼Œclientæ¥å—ä¿¡æ¯åï¼Œä¸€ç›´å­˜åœ¨äºwhileå¾ªç¯ä¸­,äºæ˜¯ä½¿ç”¨äº†çº¿ç¨‹ï¼Œè®©ä»–ä»¬è‡ªå·±å¯¹è¯å§ï¼ï¼\nServerçš„å®ç°ï¼š ä¸€å®šè¦æ³¨æ„æ— è®ºæ˜¯Serverè¿˜æ˜¯Clientçš„å®ç°ï¼Œtry\u0026mdash;catchä¹‹åä¸èƒ½æœ‰finallyå…³é—­ï¼Œå¦åˆ™å¼‚å¸¸ï¼Œsocketä¸­æ­¢\n/** * è§£é‡Šï¼š */ package TestNetwork; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ21æ—¥ä¸‹åˆ12:43:24 * @version TestNetworkTestServer3 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ import java.io.*; import java.net.*; public class TestServer3 //throws Exception { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub ServerSocket ss = null; Socket s = null; DataOutputStream dos = null; DataInputStream dis = null; try { ss = new ServerSocket(8888); s = ss.accept(); dos = new DataOutputStream(s.getOutputStream()); dis = new DataInputStream(s.getInputStream()); new ServerRead(dis).start(); new ServerWrite(dos).start(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } class ServerRead extends Thread { private DataInputStream dis = null; public ServerRead(DataInputStream dis) { this.dis = dis; } public void run() { while(true) { try{ String str = dis.readUTF(); System.out.println(\u0026quot;å®¢æˆ·ç«¯è¯´:\u0026quot;+str); if(str.equalsIgnoreCase(\u0026quot;byebye\u0026quot;)) break; }catch(Exception e) { e.printStackTrace(); } } } } class ServerWrite extends Thread { private DataOutputStream dos = null; public ServerWrite(DataOutputStream dos) { this.dos = dos; } public void run() { BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); while(true) { try{ String str = br.readLine(); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;byebye\u0026quot;)) break; }catch(Exception e) { e.printStackTrace(); }//åŠ å…¥finally å…³é—­ dos.close()åˆ™å¼‚å¸¸ã€‚ã€‚ã€‚äºæ˜¯åˆ æ‰Client \u0026amp; Serverçš„å››ä¸ªfinallyå³å¯ï¼ï¼ï¼é—®é¢˜è§£å†³ åŸå› æœªçŸ¥ï¼ï¼ï¼ } } }  Clientçš„å®ç°ï¼š\n/** * è§£é‡Šï¼š */ package TestNetwork; import java.io.*; import java.net.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ21æ—¥ä¸‹åˆ12:47:03 * @version TestNetworkTestClient3 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestClient3 { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) throws Exception { // TODO Auto-generated method stub Socket s = new Socket(\u0026quot;127.0.0.1\u0026quot;,8888); DataOutputStream dos = new DataOutputStream(s.getOutputStream()); DataInputStream dis = new DataInputStream(s.getInputStream()); new ClientRead(dis).start(); new ClientWrite(dos).start(); } } class ClientRead extends Thread { private DataInputStream dis = null; public ClientRead(DataInputStream dis) { this.dis = dis; } public void run() { while(true) { try{ String str = dis.readUTF(); System.out.println(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str); if(str.equalsIgnoreCase(\u0026quot;byebye\u0026quot;)) break; }catch(Exception e) { e.printStackTrace(); } } } } class ClientWrite extends Thread { private DataOutputStream dos = null; public ClientWrite(DataOutputStream dos) { this.dos = dos; } public void run() { BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); while(true) { try{ String str = br.readLine(); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;byebye\u0026quot;)) break; }catch(Exception e) { e.printStackTrace(); } } } }  ç»“æœï¼š\nå®¢æˆ·ç«¯çš„æ§åˆ¶å°ï¼š -------------------------------------------------------- å®¢æˆ·ç«¯è¯´:fs fsdf å®¢æˆ·ç«¯è¯´:heihei åƒäº†å— å®¢æˆ·ç«¯è¯´:æˆ‘åƒäº†å•Šï¼Œä¸‹åˆå»å“ªé‡Œç©ï¼Ÿ ---------------------------------------------------------- æœåŠ¡å™¨ç«¯çš„æ§åˆ¶å°ï¼š ---------------------------------------------------------- fs æœåŠ¡å™¨è¯´:fsdf heihei æœåŠ¡å™¨è¯´:åƒäº†å— æˆ‘åƒäº†å•Šï¼Œä¸‹åˆå»å“ªé‡Œç©ï¼Ÿ æœåŠ¡å™¨è¯´:ä¸ç„¶å’±ä»¬å»é—¯çº¢ç¯å§ ----------------------------------------------------------  é—®é¢˜ï¼šè¿™é‡Œé¢çš„çº¿ç¨‹åˆ‡æ¢ï¼Œæ²¡æœ‰ç”Ÿäº§å’Œæ¶ˆè´¹çš„æ˜æ˜¾ï¼Œè¿˜éœ€è¦è¿›ä¸€æ­¥ç†è§£çº¿ç¨‹çš„åˆ‡æ¢ï¼Œä¸ºä»€ä¹ˆå°±èƒ½å¤Ÿä»Serverçš„è¯»çº¿ç¨‹ï¼Œç„¶åå†™å…¥ä¿¡æ¯ç»™clientå°±å¯ä»¥åˆ‡æ¢åˆ°Clientçš„è¯»çº¿ç¨‹ï¼Ÿ ä»…ä»…åŠ å…¥äº†extends thread?\næ¡ˆä¾‹4ï¼š åœ¨åŸå…ˆçš„åŸºç¡€ä¸Š åŠ å…¥äº†çª—ä½“ï¼Œå¹¶è¿›ä¸€æ­¥æŠ½è±¡åˆ°TCPClient \u0026amp; TCPServerä¸¤ä¸ªç±»ä¸‹ï¼Œé€šè¿‡TCPClient.launch TCPServer.launchè¿›è¡Œå¯åŠ¨ ç¾åŒ–æ•ˆæœæ“ä½œï¼š\nFont font = new Font(\u0026quot;Dialog\u0026quot;, Font.PLAIN, 12); //ä¸€ä¸‹æ˜¯æ”¹å˜é»˜è®¤çš„ç»„å»ºä¸Šæ˜¾ç¤ºçš„å­—ä½“ï¼Œè¿™æ ·æ›´åŠ ç¾è§‚ä¸€äº› UIManager.put(\u0026quot;MenuBar.font\u0026quot;, font); UIManager.put(\u0026quot;MenuItem.font\u0026quot;, font); UIManager.put(\u0026quot;Menu.font\u0026quot;, font); UIManager.put(\u0026quot;PopupMenu.font\u0026quot;, font); UIManager.put(\u0026quot;ToolBar.font\u0026quot;, font); UIManager.put(\u0026quot;ToolTip.font\u0026quot;, font); UIManager.put(\u0026quot;TabbedPane.font\u0026quot;, font); UIManager.put(\u0026quot;Label.font\u0026quot;, font); UIManager.put(\u0026quot;List.font\u0026quot;, font); UIManager.put(\u0026quot;ComboBox.font\u0026quot;, font); UIManager.put(\u0026quot;Button.font\u0026quot;, font); UIManager.put(\u0026quot;Table.font\u0026quot;, font); UIManager.put(\u0026quot;TableHeader.font\u0026quot;, font); UIManager.put(\u0026quot;Tree.font\u0026quot;, font); UIManager.put(\u0026quot;TextField.font\u0026quot;, font); UIManager.put(\u0026quot;TextArea.font\u0026quot;, font); UIManager.put(\u0026quot;TitledBorder.font\u0026quot;, font); UIManager.put(\u0026quot;OptionPane.font\u0026quot;, font); UIManager.put(\u0026quot;RadioButton.font\u0026quot;, font); UIManager.put(\u0026quot;CheckBox.font\u0026quot;, font); UIManager.put(\u0026quot;ToggleButton.font\u0026quot;, font); UIManager.put(\u0026quot;Dialog.font\u0026quot;, font); UIManager.put(\u0026quot;Panel.font\u0026quot;, font);  Serverçš„å®ç°ï¼š\n/** * è§£é‡Šï¼š */ package TestNetwork; import java.io.*; import java.net.ServerSocket; import java.net.Socket; //some error swing : controler import javax.swing.*; import java.awt.*; import java.awt.event.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ19æ—¥ä¸‹åˆ3:20:34 * @version TestNetworkTestServer4 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestServer4 { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub Font font = new Font(\u0026quot;Dialog\u0026quot;, Font.PLAIN, 12); //ä¸€ä¸‹æ˜¯æ”¹å˜é»˜è®¤çš„ç»„å»ºä¸Šæ˜¾ç¤ºçš„å­—ä½“ï¼Œè¿™æ ·æ›´åŠ ç¾è§‚ä¸€äº› UIManager.put(\u0026quot;MenuBar.font\u0026quot;, font); UIManager.put(\u0026quot;MenuItem.font\u0026quot;, font); UIManager.put(\u0026quot;Menu.font\u0026quot;, font); UIManager.put(\u0026quot;PopupMenu.font\u0026quot;, font); UIManager.put(\u0026quot;ToolBar.font\u0026quot;, font); UIManager.put(\u0026quot;ToolTip.font\u0026quot;, font); UIManager.put(\u0026quot;TabbedPane.font\u0026quot;, font); UIManager.put(\u0026quot;Label.font\u0026quot;, font); UIManager.put(\u0026quot;List.font\u0026quot;, font); UIManager.put(\u0026quot;ComboBox.font\u0026quot;, font); UIManager.put(\u0026quot;Button.font\u0026quot;, font); UIManager.put(\u0026quot;Table.font\u0026quot;, font); UIManager.put(\u0026quot;TableHeader.font\u0026quot;, font); UIManager.put(\u0026quot;Tree.font\u0026quot;, font); UIManager.put(\u0026quot;TextField.font\u0026quot;, font); UIManager.put(\u0026quot;TextArea.font\u0026quot;, font); UIManager.put(\u0026quot;TitledBorder.font\u0026quot;, font); UIManager.put(\u0026quot;OptionPane.font\u0026quot;, font); UIManager.put(\u0026quot;RadioButton.font\u0026quot;, font); UIManager.put(\u0026quot;CheckBox.font\u0026quot;, font); UIManager.put(\u0026quot;ToggleButton.font\u0026quot;, font); UIManager.put(\u0026quot;Dialog.font\u0026quot;, font); UIManager.put(\u0026quot;Panel.font\u0026quot;, font); new TCPServer().launch(); } } class TCPServer { // class variables // class variables // connect private ServerSocket ss = null; private Socket s = null; // data flow private DataOutputStream dos = null; private DataInputStream dis = null; // UI private Frame f = null; private TextArea ta = null; private TextField tf = null; private Button bn = null; public void launch() { createUI(); connect(); new ServerRead().start(); new ServerWrite().start(); } // construct member /* public TCPServer() { } */ public void createUI() { Frame f = new Frame(\u0026quot;æœåŠ¡å™¨\u0026quot;); ta = new TextArea(); tf = new TextField(); Panel p = new Panel(new BorderLayout()); bn = new Button(\u0026quot;å‘é€\u0026quot;); p.add(tf,BorderLayout.CENTER); p.add(bn,BorderLayout.EAST); f.add(ta,BorderLayout.CENTER); f.add(p,BorderLayout.SOUTH); f.setSize(400,200); f.setVisible(true); //f.setVisable(true); f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } }); } public void connect() { try{ ss = new ServerSocket(5599); s = ss.accept(); dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); }catch(Exception e) { System.exit(0); } } public void close() { try{ dis.close(); dos.close(); ss.close(); s.close(); }catch(Exception e) { System.exit(0); } } class ServerRead extends Thread { public void run() { while(true) { try{ String str = dis.readUTF(); // System.out.println(\u0026quot;å¯¹æ–¹è¯´:\u0026quot;+str); ta.append(\u0026quot;å®¢æˆ·ç«¯è¯´ï¼š\u0026quot;+str+\u0026quot;\\n\u0026quot;); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } }catch(Exception e) { JOptionPane.showMessageDialog(f,\u0026quot;å®¢æˆ·ç«¯å·²ç¦»å¼€\u0026quot;); return; // e.printStackTrace(); } } } } class ServerWrite extends Thread { public void run() { tf.addActionListener(new TCPServerListener()); bn.addActionListener(new TCPServerListener()); } } class TCPServerListener implements ActionListener { @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); tf.setText(\u0026quot;\u0026quot;); ta.append(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } } }  Clientçš„å®ç°ï¼š\n/** * è§£é‡Šï¼š */ package TestNetwork; import java.net.*; import java.io.*; // some error swing : controler import javax.swing.*; import java.awt.*; import java.awt.event.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ19æ—¥ä¸‹åˆ3:22:27 * @version TestNetworkTestClient4 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestClient4 { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub Font font = new Font(\u0026quot;Dialog\u0026quot;, Font.PLAIN, 12); //ä¸€ä¸‹æ˜¯æ”¹å˜é»˜è®¤çš„ç»„å»ºä¸Šæ˜¾ç¤ºçš„å­—ä½“ï¼Œè¿™æ ·æ›´åŠ ç¾è§‚ä¸€äº› UIManager.put(\u0026quot;MenuBar.font\u0026quot;, font); UIManager.put(\u0026quot;MenuItem.font\u0026quot;, font); UIManager.put(\u0026quot;Menu.font\u0026quot;, font); UIManager.put(\u0026quot;PopupMenu.font\u0026quot;, font); UIManager.put(\u0026quot;ToolBar.font\u0026quot;, font); UIManager.put(\u0026quot;ToolTip.font\u0026quot;, font); UIManager.put(\u0026quot;TabbedPane.font\u0026quot;, font); UIManager.put(\u0026quot;Label.font\u0026quot;, font); UIManager.put(\u0026quot;List.font\u0026quot;, font); UIManager.put(\u0026quot;ComboBox.font\u0026quot;, font); UIManager.put(\u0026quot;Button.font\u0026quot;, font); UIManager.put(\u0026quot;Table.font\u0026quot;, font); UIManager.put(\u0026quot;TableHeader.font\u0026quot;, font); UIManager.put(\u0026quot;Tree.font\u0026quot;, font); UIManager.put(\u0026quot;TextField.font\u0026quot;, font); UIManager.put(\u0026quot;TextArea.font\u0026quot;, font); UIManager.put(\u0026quot;TitledBorder.font\u0026quot;, font); UIManager.put(\u0026quot;OptionPane.font\u0026quot;, font); UIManager.put(\u0026quot;RadioButton.font\u0026quot;, font); UIManager.put(\u0026quot;CheckBox.font\u0026quot;, font); UIManager.put(\u0026quot;ToggleButton.font\u0026quot;, font); UIManager.put(\u0026quot;Dialog.font\u0026quot;, font); UIManager.put(\u0026quot;Panel.font\u0026quot;, font); new TCPClient().launch(); } } class TCPClient { // class variables // class variables // connect private Socket s = null; // data flow private DataOutputStream dos = null; private DataInputStream dis = null; // UI private Frame f = null; private TextArea ta = null; private TextField tf = null; private Button bn = null; public void launch() { createUI(); connect(); new ClientRead().start(); new ClientWrite().start(); } // construct member /* public TCPClient() { } */ public void createUI() { Frame f = new Frame(\u0026quot;å®¢æˆ·ç«¯\u0026quot;); ta = new TextArea(); tf = new TextField(); Panel p = new Panel(new BorderLayout()); bn = new Button(\u0026quot;å‘é€\u0026quot;); p.add(tf,BorderLayout.CENTER); p.add(bn,BorderLayout.EAST); f.add(ta,BorderLayout.CENTER); f.add(p,BorderLayout.SOUTH); f.setSize(400,200); f.setVisible(true); //f.setVisable(true); f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } }); } public void connect() { try{ s = new Socket(\u0026quot;127.0.0.1\u0026quot;,5599); dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); }catch(Exception e) { System.exit(0); } } public void close() { try{ dis.close(); dos.close(); s.close(); }catch(Exception e) { System.exit(0); } } class ClientRead extends Thread { public void run() { while(true) { try{ String str = dis.readUTF(); // System.out.println(\u0026quot;å¯¹æ–¹è¯´:\u0026quot;+str); ta.append(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } }catch(Exception e) { JOptionPane.showMessageDialog(f,\u0026quot;å®¢æˆ·ç«¯å·²ç¦»å¼€\u0026quot;); return; // e.printStackTrace(); } } } } class ClientWrite extends Thread { public void run() { tf.addActionListener(new TCPClientListener()); bn.addActionListener(new TCPClientListener()); } } class TCPClientListener implements ActionListener { @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); tf.setText(\u0026quot;\u0026quot;); ta.append(\u0026quot;å®¢æˆ·ç«¯è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } } }  ##é‡å†™TCPServer1 \u0026amp; TCPClient1 å¹¶åŠ å…¥äº† String ip = s.getInetAddress().getHostAddress(); å¹¶ä¸”è°ƒæ•´äº†ç¼–å†™é£æ ¼ï¼ŒæŠŠæ‰€æœ‰ç±»ä½¿ç”¨çš„å˜é‡éƒ½æ”¾åœ¨ç±»ä¸­ï¼Œå¹¶æŠŠsocketåˆ›å»ºå’Œè¿æ¥ æ¥å—å’Œå‘é€éƒ½æ”¾åœ¨æ„é€ å‡½æ•°ä¸­ã€‚ç±»ä¼¼äºOOGTKçš„ç¼–å†™é£æ ¼http://www.rupeng.com/forum/forum.php?mod=viewthread\u0026amp;tid=44377ã€‚\n/** * è§£é‡Šï¼š */ package TestNetwork; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ22æ—¥ä¸‹åˆ3:49:11 * @version TestNetworkRewriteTestServer1 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š 1: Serverç»‘å®šç«¯å£ 2ï¼šæ¥å— 3ï¼šå¾ªç¯æ¥æ”¶ * æ³¨æ„ï¼š socketçš„ä¸»è¦ä½œç”¨å°±æ˜¯ getOutputStream å’ŒgetInputStreamæ¥ç¡®å®š * è¡¨æ˜socketäº¤æµçš„æ–¹å‘ * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ import java.io.*; import java.net.*; public class RewriteTestServer1 { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ ServerSocket ss = null; Socket s = null; DataInputStream dis = null; public RewriteTestServer1() { try { ss = new ServerSocket(5566); s = ss.accept(); String ip = s.getInetAddress().getHostAddress(); dis = new DataInputStream(s.getInputStream()); System.out.println(\u0026quot;å®¢æˆ·ç«¯\u0026quot;+ip+\u0026quot; said: \u0026quot;+dis.readUTF()); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); }finally { try { dis.close(); s.close(); }catch(IOException e) { } } } public static void main(String[] args) { // TODO Auto-generated method stub new RewriteTestServer1(); } }  TCPClient1:\n/** * è§£é‡Šï¼š */ package TestNetwork; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ22æ—¥ä¸‹åˆ3:54:39 * @version TestNetworkRewriteTestClient1 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š 1: Socketçš„å»ºç«‹ 2ï¼š å‘é€æ•°æ® 3ï¼šã€‚ã€‚ * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ import java.io.*; import java.net.*; public class RewriteTestClient1 { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ Socket s = null; DataOutputStream dos = null; public RewriteTestClient1() { try { s = new Socket(\u0026quot;127.0.0.1\u0026quot;,5566); dos = new DataOutputStream(s.getOutputStream()); dos.writeUTF(\u0026quot;Hello\u0026quot;); dos.flush(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } public static void main(String[] args) { // TODO Auto-generated method stub new RewriteTestClient1(); } }  é‡å†™äº†TestServer2 åŠŸèƒ½ï¼š åœ¨ç¬¬ä¸€ç‰ˆæœ¬æœåŠ¡å™¨çš„åŸºç¡€ä¸Š ä¿®æ­£äº†å®¢æˆ·ç«¯çš„åªå‘é€ ä¸æ¥å— * ä»¥åŠæœåŠ¡å™¨ç«¯çš„åªæ¥å—ä¸å‘é€\n å¹¶ç”¨BufferedReaderè·å–System.inçš„å†…å®¹è¾“é€åˆ°å®¢æˆ·ç«¯ å½“å®¢æˆ·ç«¯ ä¹Ÿå°±æ˜¯ss.acceptä¹‹åï¼ŒæœåŠ¡å™¨æ¥äº†ä¸€å£°â€œæ¬¢è¿ï¼Œohni sang å…‰ä¸´â€ ç´§æ¥ç€å®¢æˆ·ç«¯åšäº†åŠ¨ä½œï¼Œæ¥æ”¶åˆ°äº†æœåŠ¡å™¨æ¥çš„æ¬¢è¿è¯ï¼Œç„¶åå¼€å§‹å†™å…¥ ä¸€äº›è¯æäº¤ç»™æœåŠ¡å™¨ åå¤æ‰§è¡Œè¿™ä¸ªè¿‡ç¨‹\n/** * è§£é‡Šï¼š */ package TestNetwork; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ22æ—¥ä¸‹åˆ4:08:24 * @version TestNetworkRewriteTestServer2 V1.0 * åŠŸèƒ½ï¼š * åœ¨ç¬¬ä¸€ç‰ˆæœ¬æœåŠ¡å™¨çš„åŸºç¡€ä¸Š ä¿®æ­£äº†å®¢æˆ·ç«¯çš„åªå‘é€ ä¸æ¥å— * ä»¥åŠæœåŠ¡å™¨ç«¯çš„åªæ¥å—ä¸å‘é€ * å¹¶ç”¨BufferedReaderè·å–System.inçš„å†…å®¹è¾“é€åˆ°å®¢æˆ·ç«¯ æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š å›é¡¾äº†ç¬¬ä¸€ç‰ˆæœ¬çš„ServerSocket ss.accept() ä»¥åŠDataInputStream(s.getInputStream()); */ import java.io.*; import java.net.*; public class RewriteTestServer2 { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ ServerSocket ss = null; Socket s = null; DataInputStream dis = null; DataOutputStream dos = null; BufferedReader br = null; String wordsFromClient =null; String wordsFromServer =null; public RewriteTestServer2() { createConnection(); String ip = s.getInetAddress().getHostAddress(); while(true) { try { wordsFromClient = dis.readUTF(); System.out.println(\u0026quot;å®¢æˆ·ç«¯IP:\u0026quot;+ip+\u0026quot; said:\u0026quot;+wordsFromClient); if(wordsFromClient.equalsIgnoreCase(\u0026quot;bye*\u0026quot;)) { break; } System.out.println(\u0026quot;æœåŠ¡å™¨ï¼Œè¯·æ‚¨è¾“å…¥ä½ æƒ³å¯¹å®¢æˆ·ç«¯è¯´ä»€ä¹ˆï¼š\u0026quot;); wordsFromServer = br.readLine(); dos.writeUTF(wordsFromServer); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); }finally { try { dos.close(); dis.close(); s.close(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } } /** * åŠŸèƒ½ï¼š åˆ›å»ºä¸€ä¸ªè¯»çš„è¿æ¥ï¼Œç”¨äºè¯»å–å®¢æˆ·ç«¯çš„socketæ•°æ® * åˆ›å»ºä¸€ä¸ªå†™çš„è¿æ¥ï¼Œé€šè¿‡BufferedReaderè¿›è¡Œç¼“å†²è¯»å–System.inçš„æ•°æ® * å¹¶é€šè¿‡DataOutputStreamå‘é€å‡ºå» * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ private void createConnection() { try { ss = new ServerSocket(5566); s = ss.accept(); dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); //å¢åŠ äº†ä¸‹é¢ä¸¤å¥ dos.writeUTF(\u0026quot;æ‚¨å¥½ï¼æˆ‘æ˜¯æœåŠ¡å™¨æƒ³è¦èŠäº›ä»€ä¹ˆ:\u0026quot;); dos.flush(); br = new BufferedReader(new InputStreamReader(System.in)); }catch(IOException e) { System.out.println(\u0026quot;åˆ›å»ºè¿æ¥é—®é¢˜\u0026quot;); } } public static void main(String[] args) { // TODO Auto-generated method stub new RewriteTestServer2(); } }   RewriteTestClient2:\n/** * è§£é‡Šï¼š */ package TestNetwork; import java.io.*; import java.net.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ19æ—¥ä¸‹åˆ2:38:52 * @version TestNetworkTestClient2 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestClient2 { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub Socket s1 = null; OutputStream os = null; InputStream is = null; DataOutputStream dos = null; DataInputStream dis = null; BufferedReader br = null; try { s1 = new Socket(\u0026quot;127.0.0.1\u0026quot;,5566); os = s1.getOutputStream(); is = s1.getInputStream(); dos = new DataOutputStream(os); dis = new DataInputStream(is); dos.writeUTF(\u0026quot;Come to the world of net server\u0026quot;); dos.flush(); br = new BufferedReader(new InputStreamReader(System.in)); while(true) { String str = br.readLine(); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;byebye\u0026quot;)) break; str = dis.readUTF(); System.out.println(\u0026quot;æœåŠ¡å™¨ said that\u0026quot; + str+\u0026quot;\\n\u0026quot;); if(str.equalsIgnoreCase(\u0026quot;byebye\u0026quot;)) break; } } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } }  æˆ‘é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼š\njava.net.SocketException: socket closed at java.net.SocketInputStream.socketRead0(Native Method) at java.net.SocketInputStream.read(SocketInputStream.java:150) at java.net.SocketInputStream.read(SocketInputStream.java:121) at java.net.SocketInputStream.read(SocketInputStream.java:203) at java.io.DataInputStream.readUnsignedShort(DataInputStream.java:337) at java.io.DataInputStream.readUTF(DataInputStream.java:589) at java.io.DataInputStream.readUTF(DataInputStream.java:564) at TestNetwork.RewriteTestClient2.\u0026lt;init\u0026gt;(RewriteTestClient2.java:52) at TestNetwork.RewriteTestClient2.main(RewriteTestClient2.java:100)  äºæ˜¯æˆ‘åˆ æ‰äº†ä¸¤ä¸ªfinallyè§£å†³äº†é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä¸æ˜ç™½ä¸ºä»€ä¹ˆï¼Ÿ\né‡å†™äº†RewriteTestServer3 \u0026amp; RewriteTestClient3 ï¼š å‡ºç°çš„é—®é¢˜ï¼š åœ¨å®¢æˆ·ç«¯è¿æ¥ä¸Šåï¼Œå®¢æˆ·ç«¯å‘é€æ•°æ®å¯ä»¥åˆ°æœåŠ¡å™¨ç«¯ï¼Œæ¥ç€åˆ‡æ¢åˆ°æœåŠ¡å™¨ç«¯ï¼Œä½†æ˜¯æœåŠ¡å™¨çš„è¾“å…¥å‡ºç°äº†é—®é¢˜ï¼Œæ— è®ºä½ è¾“å…¥ä¸€ä¸ªå­—è¿˜æ˜¯nä¸ªå­—éƒ½æ— æ³•åˆ‡æ¢å›å®¢æˆ·ç«¯äº† ä¸»è¦ä¸åŒç‚¹ï¼š * 1: æŠŠè¯»å’Œå†™çš„è¿‡ç¨‹ ä»whileä¸­è„±ç¦»å‡ºæ¥ å˜æˆçº¿ç¨‹çš„å½¢å¼(é‡‡ç”¨äº†implementså½¢å¼å‡ºç°è€Œä¸æ˜¯ extends threads) * å³è¯»çº¿ç¨‹å’Œå†™çº¿ç¨‹ * 2ï¼šæŠŠBufferedReaderæ”¾å…¥åˆ°å†™å‡ºçº¿ç¨‹ä¸­ ï¼Œå› ä¸ºåªæœ‰åœ¨é‚£è¾¹è¯»å–æ§åˆ¶å°çš„è¾“å…¥å­—ç¬¦ 3: æŠŠçº¿ç¨‹çš„å¼€å¯éƒ¨åˆ†æ”¾åœ¨äº†æ„é€ å‡½æ•°ä¸­ è€Œä¸æ˜¯ mainå‡½æ•°ä¸­ã€‚ æ­¥éª¤ï¼š æµ‹è¯•äº†ï¼š æŠŠimplements Runnable è¯¥å›åˆ°extends threadsç»“æœä¸€æ ·\n æŠŠçº¿ç¨‹çš„å®šä¹‰å’Œå¼€å¯æ”¾åœ¨mainå‡½æ•°ï¼Œå¹¶è®©dos diså˜ä¸ºstaticå˜é‡ï¼Œä¹Ÿä¸èƒ½è§£å†³é—®é¢˜ï¼Œä¾æ—§æ˜¯å¡åœ¨æœåŠ¡å™¨ä¸­ï¼Œæ— æ³•åˆ‡å›åˆ°å®¢æˆ·ç«¯  ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼šï¼ˆæ˜¯ä¸æ˜¯è·Ÿsynchronizedæœ‰å…³ç³»ï¼Œæ²¡å…³ç³»ï¼ŒåŠ è¿›å»ä¹Ÿæ²¡ä»€ä¹ˆæ•ˆæœï¼‰\nclass ServerReWrite21 extends Thread { private DataOutputStream dos = null; private BufferedReader br = null; private String wordsFromServer = null; public ServerReWrite21(DataOutputStream dos) { this.dos = dos; } @Override public void run() { //System.out.println(\u0026quot;dos=\u0026quot;+dos); å¦‚æœåœ¨ServerReWrite21ä¸­åŠ å…¥äº†è¿™å¥è¯ï¼Œåˆ™è¿è¡Œå®¢æˆ·ç«¯ä¹‹å ç›´æ¥è·³åˆ°è¿™è¾¹ ä¸ºä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ  æœ‰é—®é¢˜çš„RewriteTestServer3\n/** * è§£é‡Šï¼š */ package TestNetwork; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ22æ—¥ä¸‹åˆ4:49:25 * @version TestNetworkRewriteTestServer3 V1.0 * åŠŸèƒ½ï¼š * 1: æŠŠè¯»å’Œå†™çš„è¿‡ç¨‹ ä»whileä¸­è„±ç¦»å‡ºæ¥ å˜æˆçº¿ç¨‹çš„å½¢å¼ * å³è¯»çº¿ç¨‹å’Œå†™çº¿ç¨‹ * 2ï¼šæŠŠBufferedReaderæ”¾å…¥åˆ°å†™å‡ºçº¿ç¨‹ä¸­ ï¼Œå› ä¸ºåªæœ‰åœ¨é‚£è¾¹è¯»å–æ§åˆ¶å°çš„è¾“å…¥å­—ç¬¦ æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ import java.io.*; import java.net.*; public class RewriteTestServer31 { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ ServerSocket ss = null; Socket s = null; DataInputStream dis = null; DataOutputStream dos = null; public RewriteTestServer31() { createConnection(); ServerReRead21 sr= new ServerReRead21(dis); ServerReWrite21 sw = new ServerReWrite21(dos); sr.start(); sw.start(); } /** * åŠŸèƒ½ï¼š åˆ›å»ºä¸€ä¸ªè¯»çš„è¿æ¥ï¼Œç”¨äºè¯»å–å®¢æˆ·ç«¯çš„socketæ•°æ® * åˆ›å»ºä¸€ä¸ªå†™çš„è¿æ¥ï¼Œé€šè¿‡BufferedReaderè¿›è¡Œç¼“å†²è¯»å–System.inçš„æ•°æ® * å¹¶é€šè¿‡DataOutputStreamå‘é€å‡ºå» * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ private void createConnection() { try { ss = new ServerSocket(5566); s = ss.accept(); dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); //å¢åŠ äº†ä¸‹é¢ä¸¤å¥ dos.writeUTF(\u0026quot;æ‚¨å¥½ï¼æˆ‘æ˜¯æœåŠ¡å™¨æƒ³è¦èŠäº›ä»€ä¹ˆ:\u0026quot;); dos.flush(); }catch(IOException e) { System.out.println(\u0026quot;åˆ›å»ºè¿æ¥é—®é¢˜\u0026quot;); } } public static void main(String[] args) { // TODO Auto-generated method stub new RewriteTestServer31(); } } class ServerReRead21 extends Thread { private DataInputStream dis = null; private String wordsFromClient = null; public ServerReRead21(DataInputStream dis) { this.dis = dis; } @Override public void run() { // TODO Auto-generated method stub try { wordsFromClient = dis.readUTF(); System.out.println(\u0026quot;å®¢æˆ·ç«¯å¯¹ä½ è¯´ï¼š\u0026quot;+wordsFromClient); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } class ServerReWrite21 extends Thread { private DataOutputStream dos = null; private BufferedReader br = null; private String wordsFromServer = null; public ServerReWrite21(DataOutputStream dos) { this.dos = dos; } @Override public void run() { //System.out.println(\u0026quot;dos=\u0026quot;+dos); // TODO Auto-generated method stub br = new BufferedReader(new InputStreamReader(System.in)); while(true) { try { wordsFromServer = br.readLine(); dos.writeUTF(wordsFromServer); //è¦ä¸è¦break????? if(bye){break} }catch(IOException e) { } } } }  æœ‰é—®é¢˜çš„RewriteTestClient31:\n/** * è§£é‡Šï¼š */ package TestNetwork; import java.io.BufferedReader; import java.io.DataInputStream; import java.io.DataOutputStream; import java.io.IOException; import java.io.InputStreamReader; import java.net.ServerSocket; import java.net.Socket; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ22æ—¥ä¸‹åˆ5:12:56 * @version TestNetworkRewriteTestClient3 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class RewriteTestClient31 { Socket s = null; DataInputStream dis = null; DataOutputStream dos = null; public RewriteTestClient31() { createConnection(); ClientReRead31 sr = new ClientReRead31(dis); ClientReWrite31 sw = new ClientReWrite31(dos); sr.start(); sw.start(); } /** * åŠŸèƒ½ï¼š åˆ›å»ºä¸€ä¸ªè¯»çš„è¿æ¥ï¼Œç”¨äºè¯»å–å®¢æˆ·ç«¯çš„socketæ•°æ® * åˆ›å»ºä¸€ä¸ªå†™çš„è¿æ¥ï¼Œé€šè¿‡BufferedReaderè¿›è¡Œç¼“å†²è¯»å–System.inçš„æ•°æ® * å¹¶é€šè¿‡DataOutputStreamå‘é€å‡ºå» * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ private void createConnection() { try { s= new Socket(\u0026quot;127.0.0.1\u0026quot;,5566); dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); //å¢åŠ äº†ä¸‹é¢ä¸¤å¥ }catch(IOException e) { System.out.println(\u0026quot;åˆ›å»ºè¿æ¥é—®é¢˜\u0026quot;); } } public static void main(String[] args) { // TODO Auto-generated method stub new RewriteTestClient31(); } } //ä¸»è¦æ›´æ¢åœ°æ–¹ wordsFromServer å’ŒæœåŠ¡å™¨çš„ä¸åŒåœ°æ–¹ class ClientReRead31 extends Thread { private DataInputStream dis = null; private String wordsFromServer = null; public ClientReRead31(DataInputStream dis) { this.dis = dis; } @Override public void run() { // TODO Auto-generated method stub try { wordsFromServer = dis.readUTF(); System.out.println(\u0026quot;æœåŠ¡å™¨ç«¯å¯¹ä½ è¯´ï¼š\u0026quot;+wordsFromServer); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } //ä¸»è¦æ›´æ¢åœ°æ–¹ wordsFromClient å’ŒæœåŠ¡å™¨çš„ä¸åŒåœ°æ–¹ class ClientReWrite31 extends Thread { private DataOutputStream dos = null; private BufferedReader br = null; private String wordsFromClient= null; public ClientReWrite31(DataOutputStream dos) { this.dos = dos; } @Override public void run() { // TODO Auto-generated method stub br = new BufferedReader(new InputStreamReader(System.in)); while(true) { try { wordsFromClient = br.readLine(); dos.writeUTF(wordsFromClient); //è¦ä¸è¦break????? if(bye){break} }catch(IOException e) { } } } }  å¦‚æœæˆ‘æŠŠæ‰€æœ‰çš„å˜é‡å®šä¹‰åœ¨mainå½“ä¸­åˆ™æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼ˆåœ¨implements Runnable)\næ²¡é—®é¢˜çš„ç‰ˆæœ¬ RewriteTestServer3extends\n/** * è§£é‡Šï¼š */ package TestNetwork; import java.io.BufferedReader; import java.io.DataInputStream; import java.io.DataOutputStream; import java.io.IOException; import java.io.InputStreamReader; import java.net.ServerSocket; import java.net.Socket; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ22æ—¥ä¸‹åˆ5:57:16 * @version TestNetworkRewriteTestServer3extends V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class RewriteTestServer3extends { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub // TODO Auto-generated method stub ServerSocket ss = null; Socket s = null; DataOutputStream dos = null; DataInputStream dis = null; try { ss = new ServerSocket(8888); s = ss.accept(); dos = new DataOutputStream(s.getOutputStream()); dis = new DataInputStream(s.getInputStream()); new Thread(new ServerReadImp(dis)).start(); new Thread(new ServerWriteImp(dos)).start(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } class ServerReadImp implements Runnable { private DataInputStream dis = null; public ServerReadImp(DataInputStream dis) { this.dis = dis; } public void run() { while(true) { try{ String str = dis.readUTF(); System.out.println(\u0026quot;å®¢æˆ·ç«¯è¯´:\u0026quot;+str); if(str.equalsIgnoreCase(\u0026quot;byebye\u0026quot;)) break; }catch(Exception e) { e.printStackTrace(); } } } } class ServerWriteImp implements Runnable { private DataOutputStream dos = null; public ServerWriteImp(DataOutputStream dos) { this.dos = dos; } public void run() { BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); while(true) { try{ String str = br.readLine(); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;byebye\u0026quot;)) break; }catch(Exception e) { e.printStackTrace(); } } } }  é—®é¢˜è¾ƒå°‘çš„RewriteTestClient3extends\n/** * è§£é‡Šï¼š */ package TestNetwork; import java.io.BufferedReader; import java.io.DataInputStream; import java.io.DataOutputStream; import java.io.InputStreamReader; import java.net.Socket; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ22æ—¥ä¸‹åˆ5:57:44 * @version TestNetworkRewriteTestClient3extends V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class RewriteTestClient3extends { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) throws Exception { // TODO Auto-generated method stub Socket s = new Socket(\u0026quot;127.0.0.1\u0026quot;,8888); DataOutputStream dos = new DataOutputStream(s.getOutputStream()); DataInputStream dis = new DataInputStream(s.getInputStream()); new Thread(new ClientReadImp(dis)).start(); new Thread(new ClientWriteImp(dos)).start(); } } class ClientReadImp implements Runnable { private DataInputStream dis = null; public ClientReadImp(DataInputStream dis) { this.dis = dis; } public void run() { while(true) { try{ String str = dis.readUTF(); System.out.println(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str); if(str.equalsIgnoreCase(\u0026quot;byebye\u0026quot;)) break; }catch(Exception e) { e.printStackTrace(); } } } } class ClientWriteImp implements Runnable { private DataOutputStream dos = null; public ClientWriteImp(DataOutputStream dos) { this.dos = dos; } public void run() { BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); while(true) { try{ String str = br.readLine(); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;byebye\u0026quot;)) break; }catch(Exception e) { e.printStackTrace(); } } } }  å¯ä»¥çœ‹åˆ°çš„ç¡®æ˜¯å’Œå˜é‡æ”¾åœ¨å“ªé‡Œæœ‰ç€å¾ˆå¤§çš„å…³ç³»ï¼Œä½†æ˜¯æš‚æ—¶ä¸çŸ¥é“æ€ä¹ˆè§£é‡Šï¼Ÿ è¿˜æœ‰ç½‘ç»œç¼–ç¨‹ï¼Œå½“æœåŠ¡å™¨å‘é€è¿‡åï¼Œæ˜¯å¦‚ä½•åˆ‡æ¢æ§åˆ¶æƒçš„ï¼Ÿï¼ˆæœåŠ¡å™¨çš„runå¤„äºwhileå¾ªç¯ä¸­ï¼Œå¦‚ä½•åˆ‡æ¢ï¼Œæœ‰notify?(åœ¨ç”Ÿäº§å’Œæ¶ˆè´¹å½“ä¸­æœ‰wait and notifyè¿›è¡Œé€šçŸ¥ï¼‰\nå¦å¤–å‰ä¸¤ä¸ªç‰ˆæœ¬ï¼ˆRewriteTCPServer1 RewriteTCPServer2)æˆ‘è¿›è¡Œé‡æ–°æ”¹å†™åˆ™æ˜¯æ²¡æœ‰é—®é¢˜ï¼Œç¬¬ä¸‰ä¸ªç‰ˆæœ¬(RewriteTCPServer3)åŠ å…¥äº†çº¿ç¨‹åˆ™æ˜¯æœ‰é—®é¢˜, æ‰€ä»¥ç¨‹åºçº¿ç¨‹+ç¨‹åºå˜é‡è‚¯å®šæœ‰ä¸€ä¸ªå­˜åœ¨é—®é¢˜ï¼Œå…·ä½“ä¸æ¸…æ¥š\né€šè¿‡å­¦ä¹ ç¬¬åäº”èŠ‚çš„ç½‘ç»œç¼–ç¨‹ï¼Œäº†è§£åˆ°while(true){ss.accept() ; newçº¿ç¨‹çš„ä½œç”¨} ä¹‹å‰TCPServer3å’ŒRewriteServer3å¹¶æ²¡æœ‰å¤šçº¿ç¨‹çš„æ•ˆæœï¼Œå¾—åœ¨ æœåŠ¡å™¨å½“ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼šå¢åŠ ä¸€ä¸ªwhile(true) è®©æœåŠ¡å™¨ä¸€ç›´åœ¨ç­‰å¾…è¿æ¥ï¼ˆä¸ç„¶å†ctrl+F11 å¹¶æ²¡æœ‰æ–°çš„å®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨ï¼‰\nprivate void createConnection() { try { ss = new ServerSocket(5566); while(true) { s = ss.accept(); ServerReRead2 sr = new ServerReRead2(dis); ServerReWrite2 sw = new ServerReWrite2(dos); Thread t1 = new Thread(sr); Thread t2 = new Thread(sw); t1.start(); t2.start(); dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); //å¢åŠ äº†ä¸‹é¢ä¸¤å¥ dos.writeUTF(\u0026quot;æ‚¨å¥½ï¼æˆ‘æ˜¯æœåŠ¡å™¨æƒ³è¦èŠäº›ä»€ä¹ˆ:\u0026quot;); dos.flush(); } }catch(IOException e) { System.out.println(\u0026quot;åˆ›å»ºè¿æ¥é—®é¢˜\u0026quot;); } }  æœ‰äº†è¿™ä¸ªæ„è¯†ä¹‹åï¼Œæˆ‘å‘ç°ä¹‹å‰çš„æ‰€è°“çš„å¤šçº¿ç¨‹çš„UIç‰ˆæœ¬çš„TCPServer4 \u0026amp; TCPClient4ä¹Ÿæ˜¯lier,æ ¹æœ¬æ²¡æœ‰å®ç°ã€‚ å…·ä½“æ˜¯ï¼š ä¸€ä¸ªæœåŠ¡å™¨ç«¯å¯¹åº”ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œè™½ç„¶ä½ å†™ç€extends threadï¼Œä¹Ÿstartäº†ï¼Œä½†æ˜¯åœ¨ss.accept é‚£è¾¹æ ¹æœ¬å°±æ²¡æœ‰å¾ªç¯çš„æ¥æ”¶ï¼Œæš‚æ—¶è¿›è¡Œä¿®æ”¹æœªé€šè¿‡ï¼Œè¿™æ˜¯å¦ä¸€ä¸ªé—®é¢˜ã€‚\næœ‰è¿›æ­¥äº†ã€‚æ”¹è¿›äº†TCPServer4 1ï¼šå®¢æˆ·ç«¯å¯ä»¥æ–°å»ºå¤šä¸ªï¼ˆä½†æ˜¯è¿™ä¸ªå¤šä¸ªè¿˜æ˜¯æœ‰é—®é¢˜)\u0026mdash;\u0026gt;å…·ä½“åˆ†æsocketçš„whileå¾ªç¯æ”¾çš„æœ‰é—®é¢˜ï¼ˆæœ‰å¾…è¿›ä¸€æ­¥æµ‹è¯•ï¼‰\né—®é¢˜1ï¼šæœåŠ¡å™¨æ— æ³•å‘é€å‡ºå»æ•°æ® é—®é¢˜2ï¼šå®¢æˆ·ç«¯ä¸åˆ‡æ¢ è¿˜å¥½å¯ä»¥ï¼Œä¸€åˆ‡æ¢ä¹‹åå‘é€ä¸€æ¡å°±å¡æ­»äº†\næœ‰é—®é¢˜çš„ RewriteServer4:\n/** * è§£é‡Šï¼š */ package TestNetwork; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ22æ—¥ä¸‹åˆ10:08:18 * @version TestNetworkRewriteTestServer4 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ import java.awt.BorderLayout; import java.awt.Button; import java.awt.Frame; import java.awt.Panel; import java.awt.TextArea; import java.awt.TextField; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.awt.event.WindowAdapter; import java.awt.event.WindowEvent; import java.io.*; import java.net.*; import javax.swing.JOptionPane; public class RewriteTestServer4 { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub new TCPServer1().launch(); } } class TCPServer1 { // class variables // class variables // connect private ServerSocket ss = null; private Socket s = null; // data flow private DataOutputStream dos = null; private DataInputStream dis = null; // UI private Frame f = null; private TextArea ta = null; private TextField tf = null; private Button bn = null; public void launch() { createUI(); connect(); } // construct member /* public TCPServer() { } */ public void createUI() { Frame f = new Frame(\u0026quot;æœåŠ¡å™¨\u0026quot;); ta = new TextArea(); tf = new TextField(); Panel p = new Panel(new BorderLayout()); bn = new Button(\u0026quot;å‘é€\u0026quot;); p.add(tf,BorderLayout.CENTER); p.add(bn,BorderLayout.EAST); f.add(ta,BorderLayout.CENTER); f.add(p,BorderLayout.SOUTH); f.setSize(400,200); f.setVisible(true); //f.setVisable(true); /* tf.addActionListener(new TCPServerListener()); bn.addActionListener(new TCPServerListener());*/ f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } }); } public void connect() { try { ss = new ServerSocket(5599); while(true) { //é˜»å¡è¿™è¾¹ ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥ s = ss.accept(); dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); dos.writeUTF(\u0026quot;æ¬¢è¿ä½ çš„åˆ°æ¥\u0026quot;+s.getInetAddress().getHostAddress()); new UserReadThread().start(); new UserWriteThread().start(); System.out.println(Thread.currentThread().getName()+\u0026quot;å·²å¼€å¯\u0026quot;); } }catch(Exception e) { System.out.println(\u0026quot;æœåŠ¡å™¨ç«¯å¼‚å¸¸\u0026quot;); // System.exit(0); } } public void close() { try{ ss.close(); s.close(); }catch(Exception e) { System.exit(0); } } class UserReadThread extends Thread { @Override public void run() { while(true) { try{ String str = dis.readUTF(); // System.out.println(\u0026quot;å¯¹æ–¹è¯´:\u0026quot;+str); ta.append(\u0026quot;å®¢æˆ·ç«¯è¯´ï¼š\u0026quot;+str+\u0026quot;\\n\u0026quot;); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } }catch(Exception e) { JOptionPane.showMessageDialog(f,\u0026quot;å®¢æˆ·ç«¯å·²ç¦»å¼€\u0026quot;); return; // e.printStackTrace(); } } } } class UserWriteThread extends Thread { @Override public void run() { tf.addActionListener(new TCPServerListener()); bn.addActionListener(new TCPServerListener()); } } class TCPServerListener implements ActionListener { @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); if(!str.isEmpty()) { tf.setText(\u0026quot;\u0026quot;); ta.append(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } } }  RewriteTestClient4: /** * è§£é‡Šï¼š */ package TestNetwork;\nimport java.awt.BorderLayout; import java.awt.Button; import java.awt.Frame; import java.awt.Panel; import java.awt.TextArea; import java.awt.TextField; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.awt.event.WindowAdapter; import java.awt.event.WindowEvent; import java.io.DataInputStream; import java.io.DataOutputStream; import java.net.Socket;\nimport javax.swing.JOptionPane;\nimport TestNetwork.TCPClient.TCPClientListener;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ22æ—¥ä¸‹åˆ10:08:37 * @version TestNetworkRewriteTestClient4 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class RewriteTestClient4 {\n /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub new TCPClient1().launch(); }  }\nclass TCPClient1 { // class variables // class variables // connect private Socket s = null; // data flow private DataOutputStream dos = null; private DataInputStream dis = null; // UI private Frame f = null; private TextArea ta = null; private TextField tf = null; private Button bn = null;\n public void launch() { createUI(); connect(); // new ClientRead().start(); // new ClientWrite().start(); } // construct member /* public TCPClient() { } */ public void createUI() { Frame f = new Frame(\u0026quot;å®¢æˆ·ç«¯\u0026quot;); ta = new TextArea(); tf = new TextField(); Panel p = new Panel(new BorderLayout()); bn = new Button(\u0026quot;å‘é€\u0026quot;); p.add(tf,BorderLayout.CENTER); p.add(bn,BorderLayout.EAST); f.add(ta,BorderLayout.CENTER); f.add(p,BorderLayout.SOUTH); f.setSize(400,200); f.setVisible(true); //f.setVisable(true); tf.addActionListener(new TCPClientListener()); bn.addActionListener(new TCPClientListener()); f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } }); } public void connect() { try{ s = new Socket(\u0026quot;127.0.0.2\u0026quot;,5599); dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); try{ //å°‘äº†è¿™ä¸ªwhileä¸è¡Œï¼åˆ™ä¸èƒ½å¾ªç¯æ¥æ”¶ while(true) { String str = dis.readUTF(); //System.out.println(\u0026quot;å¯¹æ–¹è¯´:\u0026quot;+str); ta.append(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } } }catch(Exception e) { JOptionPane.showMessageDialog(f,\u0026quot;å®¢æˆ·ç«¯å·²ç¦»å¼€\u0026quot;); return; } }catch(Exception e) { System.out.println(\u0026quot;å®¢æˆ·ç«¯å¼‚å¸¸\u0026quot;); //System.exit(0); } } public void close() { try{ dis.close(); dos.close(); s.close(); }catch(Exception e) { System.exit(0); } } class TCPClientListener implements ActionListener { @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); tf.setText(\u0026quot;\u0026quot;); ta.append(\u0026quot;å®¢æˆ·ç«¯è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } }  }\nç»“æœï¼š ![æœ‰é—®é¢˜çš„Serverå’ŒClientå›¾](/images/java/ç»“æœ.png) 1ï¼š æ”¹ç”¨åœ¨mainæ–¹æ³•ä¸­å®šä¹‰å¾ªç¯çš„socketç­‰å¾…è¯•è¯•ï¼Œå³ ServerSocket ss = new ServerSocket(5599); while(true) { new TCPServer1(ss.accept()).launch(); } å¤åˆ¶ä»£ç  å»æ‰ServerReadé‚£è¾¹çš„ä¸€ç§Connectionå‡½æ•°ä¸­çš„å¾ªç¯çš„socket.accept:  java public void connect() {\n try { //while(true) //{ //é˜»å¡è¿™è¾¹ ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥ dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); dos.writeUTF(\u0026quot;æ¬¢è¿ä½ çš„åˆ°æ¥\u0026quot;+s.getInetAddress().getHostAddress()); new UserReadThread().start(); new UserWriteThread().start(); System.out.println(Thread.currentThread().getName()+\u0026quot;å·²å¼€å¯\u0026quot;); //}  2: ä½¿ç”¨é™æ€ä»£ç æ®µçš„æ–¹æ³•ï¼Œåªåˆ›å»ºä¸€ä¸ªUIç•Œé¢ï¼Œä¸å†æŠŠcreateUIæ”¾åœ¨launchå½“ä¸­ï¼Œå¦åˆ™ åªæœ‰åœ¨è¿æ¥ä¸Šå®¢æˆ·ç«¯ä¼šåˆ›å»ºå®¢æˆ·ç«¯çš„åŒæ—¶ä¹Ÿåˆ›å»ºäº†æœåŠ¡å™¨ æœåŠ¡å™¨ä¸€ç›´åœ¨å¢åŠ ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æ‰€æƒ³çš„ï¼Œåªè¦ä¸€ä¸ªæœåŠ¡å™¨ï¼Œäºæ˜¯é‡‡ç”¨staticæ–¹æ³• è‡³å°‘åœ¨è¿™è¾¹å·²ç»å¼€å§‹æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼š åˆ°åº•Clientçš„read \u0026amp; writeè¦ä¸è¦åŠ å…¥çº¿ç¨‹ï¼Ÿ è¿™è¾¹æ˜¯æ²¡æœ‰ï¼Œä»…ä»…æ˜¯æœåŠ¡å™¨çš„read \u0026amp; writeåŠ å…¥äº†çº¿ç¨‹ï¼Ÿ å…·ä½“çš„RewreiteTestServer4:  java /** * è§£é‡Šï¼š */ package TestNetwork;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ22æ—¥ä¸‹åˆ10:08:18 * @version TestNetworkRewriteTestServer4 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š / import java.awt.BorderLayout; import java.awt.Button; import java.awt.Frame; import java.awt.Panel; import java.awt.TextArea; import java.awt.TextField; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.awt.event.WindowAdapter; import java.awt.event.WindowEvent; import java.io.; import java.net.*;\nimport javax.swing.JOptionPane;\npublic class RewriteTestServer4 {\n /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) throws Exception { // TODO Auto-generated method stub ServerSocket ss = new ServerSocket(5599); while(true) { new TCPServer1(ss.accept()).launch(); } }  }\nclass TCPServer1 { // class variables // class variables // connect\n private Socket s = null; // data flow private DataOutputStream dos = null; private DataInputStream dis = null; // UI private static Frame f = null; private static TextArea ta = null; private static TextField tf = null; private static Button bn = null; static { createUI(); } public TCPServer1(Socket s) { this.s = s; } public void launch() { connect(); } // construct member /* public TCPServer() { } */ public static void createUI() { Frame f = new Frame(\u0026quot;æœåŠ¡å™¨\u0026quot;); ta = new TextArea(); tf = new TextField(); Panel p = new Panel(new BorderLayout()); bn = new Button(\u0026quot;å‘é€\u0026quot;); p.add(tf,BorderLayout.CENTER); p.add(bn,BorderLayout.EAST); f.add(ta,BorderLayout.CENTER); f.add(p,BorderLayout.SOUTH); f.setSize(400,200); f.setVisible(true); //f.setVisable(true);  /* tf.addActionListener(new TCPServerListener()); bn.addActionListener(new TCPServerListener());*/ f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } }); } public void connect() {\n try { //while(true) //{ //é˜»å¡è¿™è¾¹ ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥ dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); dos.writeUTF(\u0026quot;æ¬¢è¿ä½ çš„åˆ°æ¥\u0026quot;+s.getInetAddress().getHostAddress()); new UserReadThread().start(); new UserWriteThread().start(); System.out.println(Thread.currentThread().getName()+\u0026quot;å·²å¼€å¯\u0026quot;); //} }catch(Exception e) { System.out.println(\u0026quot;æœåŠ¡å™¨ç«¯å¼‚å¸¸\u0026quot;); // System.exit(0); } } public void close() { try{ s.close(); }catch(Exception e) { System.exit(0); } } class UserReadThread extends Thread { @Override public void run() { while(true) { try{ String str = dis.readUTF(); // System.out.println(\u0026quot;å¯¹æ–¹è¯´:\u0026quot;+str); ta.append(\u0026quot;å®¢æˆ·ç«¯è¯´ï¼š\u0026quot;+str+\u0026quot;\\n\u0026quot;); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } }catch(Exception e) { JOptionPane.showMessageDialog(f,\u0026quot;å®¢æˆ·ç«¯å·²ç¦»å¼€\u0026quot;); return; // e.printStackTrace(); } } } } class UserWriteThread extends Thread { @Override public void run() { tf.addActionListener(new TCPServerListener()); bn.addActionListener(new TCPServerListener()); } } class TCPServerListener implements ActionListener { @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); if(!str.isEmpty()) { tf.setText(\u0026quot;\u0026quot;); ta.append(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } }  }\nRewriteClient4:  java /** * è§£é‡Šï¼š */ package TestNetwork;\nimport java.awt.BorderLayout; import java.awt.Button; import java.awt.Frame; import java.awt.Panel; import java.awt.TextArea; import java.awt.TextField; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.awt.event.WindowAdapter; import java.awt.event.WindowEvent; import java.io.DataInputStream; import java.io.DataOutputStream; import java.net.Socket;\nimport javax.swing.JOptionPane;\nimport TestNetwork.TCPClient.TCPClientListener;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ22æ—¥ä¸‹åˆ10:08:37 * @version TestNetworkRewriteTestClient4 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class RewriteTestClient4 {\n /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub new TCPClient1().launch(); }  }\nclass TCPClient1 { // class variables // class variables // connect private Socket s = null; // data flow private DataOutputStream dos = null; private DataInputStream dis = null; // UI private Frame f = null; private TextArea ta = null; private TextField tf = null; private Button bn = null;\n public void launch() { createUI(); connect(); // new ClientRead().start(); // new ClientWrite().start(); } // construct member /* public TCPClient() { } */ public void createUI() { Frame f = new Frame(\u0026quot;å®¢æˆ·ç«¯\u0026quot;); ta = new TextArea(); tf = new TextField(); Panel p = new Panel(new BorderLayout()); bn = new Button(\u0026quot;å‘é€\u0026quot;); p.add(tf,BorderLayout.CENTER); p.add(bn,BorderLayout.EAST); f.add(ta,BorderLayout.CENTER); f.add(p,BorderLayout.SOUTH); f.setSize(400,200); f.setVisible(true); //f.setVisable(true); tf.addActionListener(new TCPClientListener()); bn.addActionListener(new TCPClientListener()); f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } }); } public void connect() { try{ s = new Socket(\u0026quot;127.0.0.1\u0026quot;,5599); dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); try{ //å°‘äº†è¿™ä¸ªwhileä¸è¡Œï¼åˆ™ä¸èƒ½å¾ªç¯æ¥æ”¶ while(true) { String str = dis.readUTF(); //System.out.println(\u0026quot;å¯¹æ–¹è¯´:\u0026quot;+str); ta.append(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } } }catch(Exception e) { JOptionPane.showMessageDialog(f,\u0026quot;å®¢æˆ·ç«¯å·²ç¦»å¼€\u0026quot;); return; } }catch(Exception e) { System.out.println(\u0026quot;å®¢æˆ·ç«¯å¼‚å¸¸\u0026quot;); //System.exit(0); } } public void close() { try{ dis.close(); dos.close(); s.close(); }catch(Exception e) { System.exit(0); } } class TCPClientListener implements ActionListener { @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); tf.setText(\u0026quot;\u0026quot;); ta.append(\u0026quot;å®¢æˆ·ç«¯è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } }  }\nç»“æœï¼š é€šè¿‡åˆ†æå‘ç°ï¼Œçš„ç¡®æ˜¯éœ€è¦æŠŠsocket.acceptæ”¾åœ¨mainä¸­ï¼Œè€Œä¸æ˜¯connectionä¸­ï¼ ä¸ºä»€ä¹ˆï¼Ÿ ä¹Ÿè®¸æ˜¯connectionä¼šè·³å‡ºï¼Ÿ å…·ä½“çš„ä¸å¤ªæ¸…æ¥šï¼Œå¦‚æœæœ‰äººçŸ¥é“æ±‚è¯æ˜ä¹‹ã€‚ã€‚ã€‚ã€‚ å¦å¤–è¿˜å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆæœåŠ¡å™¨å‘å‡ºçš„æ•°æ®åªæ˜¯æ”¾åœ¨ç¬¬ä¸€ä¸ªè¿æ¥çš„åœ°æ–¹ï¼Ÿ è¿™æ˜¯ä¸æ˜¯è·ŸClientæ²¡æœ‰çº¿ç¨‹æœ‰å…³ç³»ï¼Œå¦‚æœæˆ‘ä¹Ÿå»ºä¸ªclientRead \u0026amp; clientWriteçº¿ç¨‹ï¼Ÿ ![ç°åœ¨çš„åˆ‡æ¢å’Œä¼ é€’éƒ½ä¸æˆé—®é¢˜](/images/java/åˆ‡æ¢ä¸æˆé—®é¢˜.png) 1ï¼šå¢åŠ äº†ä¸¤ä¸ªClientRead \u0026amp; ClientWriteä¸¤ä¸ªçº¿ç¨‹ï¼Œå°è¯•çœ‹ä¸€ä¸‹æ˜¯å¦å¯ä»¥ç¾¤å‘ï¼Œ 2ï¼š å¹¶æŠŠsocketçš„åˆ›å»º æåˆ°mainå½“ä¸­ Clientçš„é‡å†™ï¼š  java /** * è§£é‡Šï¼š */ package TestNetwork;\nimport java.awt.BorderLayout; import java.awt.Button; import java.awt.Frame; import java.awt.Panel; import java.awt.TextArea; import java.awt.TextField; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.awt.event.WindowAdapter; import java.awt.event.WindowEvent; import java.io.BufferedReader; import java.io.DataInputStream; import java.io.DataOutputStream; import java.io.IOException; import java.io.InputStreamReader; import java.net.Socket;\nimport javax.swing.JOptionPane;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ22æ—¥ä¸‹åˆ10:08:37 * @version TestNetworkRewriteTestClient4 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class RewriteTestClient4 {\n /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub Socket s = null; try { s = new Socket(\u0026quot;127.0.0.1\u0026quot;,5599); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } new TCPClient1(s).launch(); }  }\nclass TCPClient1 { // class variables // class variables // connect private Socket s = null; // data flow private DataOutputStream dos = null; private DataInputStream dis = null; // UI private Frame f = null; private TextArea ta = null; private TextField tf = null; private Button bn = null; public TCPClient1(Socket s) { this.s = s; }\n public void launch() { createUI(); connect(); new ClientRead(dis).start(); new ClientWrite(dos).start(); } // construct member /* public TCPClient() { } */ public void createUI() { Frame f = new Frame(\u0026quot;å®¢æˆ·ç«¯\u0026quot;); ta = new TextArea(); tf = new TextField(); Panel p = new Panel(new BorderLayout()); bn = new Button(\u0026quot;å‘é€\u0026quot;); p.add(tf,BorderLayout.CENTER); p.add(bn,BorderLayout.EAST); f.add(ta,BorderLayout.CENTER); f.add(p,BorderLayout.SOUTH); f.setSize(400,200); f.setVisible(true); //f.setVisable(true); tf.addActionListener(new TCPClientListener()); bn.addActionListener(new TCPClientListener()); f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } }); } public void connect() { try{ dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); }catch(Exception e) { System.out.println(\u0026quot;å®¢æˆ·ç«¯å¼‚å¸¸\u0026quot;); //System.exit(0); } } public void close() { try{ dis.close(); dos.close(); s.close(); }catch(Exception e) { System.exit(0); } } class ClientRead extends Thread { private DataInputStream dis = null; public ClientRead(DataInputStream dis) { this.dis = dis; } public void run() { while(true) { try{ String str = dis.readUTF(); ta.append(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } System.out.println(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str); if(str.equalsIgnoreCase(\u0026quot;byebye\u0026quot;)) break; }catch(Exception e) { JOptionPane.showMessageDialog(f,\u0026quot;å®¢æˆ·ç«¯å·²ç¦»å¼€\u0026quot;); return; } } } } class ClientWrite extends Thread { private DataOutputStream dos = null; public ClientWrite(DataOutputStream dos) { this.dos = dos; } public void run() { BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); while(true) { try{ String str = br.readLine(); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;byebye\u0026quot;)) break; }catch(Exception e) { e.printStackTrace(); } } } } class TCPClientListener implements ActionListener { @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); tf.setText(\u0026quot;\u0026quot;); ta.append(\u0026quot;å®¢æˆ·ç«¯è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } }  }\nç»“æœï¼š ç»“æœåˆ†æå‘ç°ï¼Œå¹¶æ²¡æœ‰ä¸æ¯«çš„æ”¹è¿›ã€‚what a pity. ![ç»“æœè¿˜æ˜¯è·Ÿä¸Šä¾‹çš„clientæ²¡æœ‰çº¿ç¨‹ä¸€æ ·](/images/java/yiranmeiyou.png) å‚è€ƒæ­¤æ–‡è¿›è¡Œä¿®æ”¹ï¼š 1ï¼šåŠ å…¥äº†ä¸‰ä¸ªä¸»è¦é›†åˆ ç”¨æˆ· user_list çº¿ç¨‹é›† æ¶ˆæ¯é›† 2ï¼šæœåŠ¡å™¨ç«¯çš„ä¸»è¦ä¿®æ­£ï¼š 1.åœ¨çº¿ç¨‹ç±»çš„æ„é€ å‡½æ•°éƒ½æ·»åŠ  äº†start() å¼€å¯çº¿ç¨‹ 2.åˆ æ‰äº†ServerWrite \u0026amp;ServerReadçº¿ç¨‹ éƒ½æ•´åˆåˆ°ThreadServerç±»ä¸­ 3.å¢åŠ äº†ä¸€ä¸ªPrintOutThreadç”¨äºå‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ 3ï¼šå®¢æˆ·ç«¯çš„ä¸»è¦ä¿®æ­£ï¼š æ–°å»ºäº†ä¸€ä¸ªreadLineThread() è¯»å–æœåŠ¡å™¨æ•°æ®ï¼Œå¹¶ä¼ é€’å®¢æˆ·ç«¯æ•°æ® åˆ é™¤äº†ClientReader \u0026amp; ClientWriter \u0026amp; launchç­‰å‡½æ•° åŸºæœ¬èƒ½å¤Ÿå®ç°è½¬å‘çš„åŠŸèƒ½ï¼Œä½†æ˜¯ å­˜åœ¨çš„é—®é¢˜ï¼šå¼€å¯å¤šä¸ªåˆ™è®¡ç®—æœºå˜å¾—ç‰¹åˆ«å¡ RewriteServer5çš„å®ç°ï¼š  java /** * è§£é‡Šï¼š */ package TestNetwork;\nimport java.awt.BorderLayout; import java.awt.Button; import java.awt.Frame; import java.awt.Panel; import java.awt.TextArea; import java.awt.TextField; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.awt.event.WindowAdapter; import java.awt.event.WindowEvent; import java.io.DataInputStream; import java.io.DataOutputStream; import java.io.IOException; import java.net.ServerSocket; import java.net.Socket; import java.util.*;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ23æ—¥ä¸Šåˆ12:41:10 * @version TestNetworkRewriteTestServer5 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class RewriteTestServer5 {\n /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) throws Exception { // TODO Auto-generated method stub ServerSocket ss = new ServerSocket(5599); while(true) { new TCPServer2(ss.accept()); } }  } class TCPServer2 { // class variables // class variables // connect\n private Socket s = null; // data flow private DataOutputStream dos = null; private DataInputStream dis = null; // UI private static Frame f = null; private static TextArea ta = null; private static TextField tf = null; private static Button bn = null; private static boolean isPrint = false;//æ˜¯å¦è¾“å‡ºæ¶ˆæ¯æ ‡å¿— private static List user_list = new ArrayList();//ç™»é™†ç”¨æˆ·é›†åˆ private static List\u0026lt;ServerThread\u0026gt; thread_list = new ArrayList\u0026lt;ServerThread\u0026gt;();//æœåŠ¡å™¨å·²å¯ç”¨çš„çº¿ç¨‹é›†åˆ private static LinkedList\u0026lt;String\u0026gt; message_list = new LinkedList\u0026lt;String\u0026gt;();//å­˜æ”¾æ¶ˆæ¯é˜Ÿåˆ— static { createUI(); } public TCPServer2(Socket s) throws Exception { this.s = s; new PrintOutThread();//åˆ›å»ºå‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯çº¿ç¨‹ new ServerThread(this.s); //æœ¬ä»¥ä¸ºå¯ä»¥è®©å…¶çº¿ç¨‹å®‰å…¨çš„ï¼Œæ²¡æƒ³åˆ°æ²¡ä»€ä¹ˆæ•ˆæœ åè€Œæ›´å¡  /* Collections.synchronizedList(user_list); Collections.synchronizedList(thread_list); Collections.synchronizedList(message_list);*/ // launch();\n } // construct member /* public TCPServer() { } */ public static void createUI() { Frame f = new Frame(\u0026quot;æœåŠ¡å™¨\u0026quot;); ta = new TextArea(); tf = new TextField(); Panel p = new Panel(new BorderLayout()); bn = new Button(\u0026quot;å‘é€\u0026quot;); p.add(tf,BorderLayout.CENTER); p.add(bn,BorderLayout.EAST); f.add(ta,BorderLayout.CENTER); f.add(p,BorderLayout.SOUTH); f.setSize(400,200); f.setVisible(true); //f.setVisable(true);  /* tf.addActionListener(new TCPServerListener()); bn.addActionListener(new TCPServerListener());*/ f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } }); }\n public void close() { try{ s.close(); }catch(Exception e) { System.exit(0); } } class TCPServerListener implements ActionListener { @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); if(!str.isEmpty()) { tf.setText(\u0026quot;\u0026quot;); ta.append(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } } /** * æœåŠ¡å™¨çº¿ç¨‹ç±» */ class ServerThread extends Thread{ private Socket client; private String name = null; public ServerThread(Socket s) throws Exception { this.client = s; dis = new DataInputStream(client.getInputStream()); dos = new DataOutputStream(client.getOutputStream()); dos.writeUTF(\u0026quot;æˆåŠŸè¿ä¸ŠæœåŠ¡å™¨\u0026quot;+client.getInetAddress().getHostAddress()); dos.writeUTF(Thread.currentThread().getName()+\u0026quot;å·²å¼€å¯\u0026quot;+\u0026quot;è¯·è¾“å…¥ä½ çš„å§“å\u0026quot;); this.start(); tf.addActionListener(new TCPServerListener()); bn.addActionListener(new TCPServerListener()); } @Override public void run() { try { int flag = 0 ; String line = dis.readUTF(); while(!\u0026quot;bye\u0026quot;.equals(line)) { //æŸ¥çœ‹åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ if (\u0026quot;showuser\u0026quot;.equals(line)) { dos.writeUTF(this.listOnlineUsers()); line = dis.readUTF(); } //ç¬¬ä¸€æ¬¡è¿›å…¥ï¼Œä¿å­˜åå­— if(flag++ ==0){ name = line; user_list.add(name); thread_list.add(this); System.out.println(\u0026quot;this=\u0026quot;+this); dos.writeUTF(name +\u0026quot;ä½ å¥½,å¯ä»¥å¼€å§‹èŠå¤©äº†...\u0026quot;); this.pushMessage(\u0026quot;Client\u0026lt;\u0026quot; + name +\u0026quot;\u0026gt;è¿›å…¥èŠå¤©å®¤...+\\n\u0026quot;); ta.append(\u0026quot;Client\u0026lt;\u0026quot; + name +\u0026quot;\u0026gt;è¿›å…¥èŠå¤©å®¤...\\n\u0026quot;); }else{ ta.append(\u0026quot;Client\u0026lt;\u0026quot; + name +\u0026quot;\u0026gt; say : \u0026quot; + line+\u0026quot;\\n\u0026quot;); this.pushMessage(\u0026quot;Client\u0026lt;\u0026quot; + name +\u0026quot;\u0026gt; say : \u0026quot; + line+\u0026quot;\\n\u0026quot;); } line = dis.readUTF(); } }catch(IOException e) { } } //æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—æœ«å°¾ï¼Œå‡†å¤‡å‘é€ç»™å®¢æˆ·ç«¯ private void pushMessage(String msg){ message_list.addLast(msg); isPrint =true; } //å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ¶ˆæ¯(åœ¨PrintOutThread æœ‰ä½¿ç”¨ äºæ˜¯å˜æˆäº†publicä¿®é¥°) public void sendMessage(String msg) throws Exception{ dos.writeUTF(msg); dos.flush(); } //ç»Ÿè®¡åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ éœ€è¦åœ¨showuserä¸­ä½¿ç”¨ æ”¹ä¸ºpublic private String listOnlineUsers() { String s =\u0026quot;--- åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ ---\\015\\012\u0026quot;; for (int i =0; i \u0026lt; user_list.size(); i++) { s +=\u0026quot;[\u0026quot; + user_list.get(i) +\u0026quot;]\\015\\012\u0026quot;; } s +=\u0026quot;--------------------\u0026quot;; return s; } } /** * ç›‘å¬æ˜¯å¦æœ‰è¾“å‡ºæ¶ˆæ¯è¯·æ±‚çº¿ç¨‹ç±»,å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ */ class PrintOutThread extends Thread { public PrintOutThread() { start(); } @Override public void run() { while(true){ if(isPrint){//å°†ç¼“å­˜åœ¨é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯æŒ‰é¡ºåºå‘é€åˆ°å„å®¢æˆ·ç«¯ï¼Œå¹¶ä»é˜Ÿåˆ—ä¸­æ¸…é™¤ã€‚ String message = message_list.getFirst(); for (ServerThread thread : thread_list) { try { thread.sendMessage(message); } catch (Exception e) { // TODO Auto-generated catch block e.printStackTrace(); } } message_list.removeFirst(); isPrint = message_list.size() \u0026gt;0 ?true :false; } } } }  }\n RewriteClient5çš„å®ç°ï¼š  java /** * è§£é‡Šï¼š */ package TestNetwork;\nimport java.awt.BorderLayout; import java.awt.Button; import java.awt.Frame; import java.awt.Panel; import java.awt.TextArea; import java.awt.TextField; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.awt.event.WindowAdapter; import java.awt.event.WindowEvent; import java.io.BufferedReader; import java.io.DataInputStream; import java.io.DataOutputStream; import java.io.IOException; import java.io.InputStreamReader; import java.net.Socket;\nimport javax.swing.JOptionPane;\nimport TestNetwork.TCPClient1.ClientRead; import TestNetwork.TCPClient1.ClientWrite; import TestNetwork.TCPClient1.TCPClientListener;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ23æ—¥ä¸Šåˆ1:57:54 * @version TestNetworkRewriteTestClient5 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class RewriteTestClient5 {\n /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) throws Exception { // TODO Auto-generated method stub Socket s = null; s = new Socket(\u0026quot;127.0.0.1\u0026quot;,5599); new TCPClient5(s); }  } class TCPClient5 { // class variables // class variables // connect private Socket s = null; // data flow private DataOutputStream dos = null; private DataInputStream dis = null; // UI private Frame f = null; private TextArea ta = null; private TextField tf = null; private Button bn = null;\n /** * ä¸æœåŠ¡å™¨è¿æ¥ï¼Œå¹¶è¾“å…¥å‘é€æ¶ˆæ¯ */ public TCPClient5(Socket s) throws Exception { this.s = s; dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); createUI(); //new ClientRead(dis); //new ClientWrite(dos); new readLineThread(); } /** * ç”¨äºç›‘å¬æœåŠ¡å™¨ç«¯å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯çº¿ç¨‹ç±» */ public void createUI() { Frame f = new Frame(\u0026quot;å®¢æˆ·ç«¯\u0026quot;); ta = new TextArea(); tf = new TextField(); Panel p = new Panel(new BorderLayout()); bn = new Button(\u0026quot;å‘é€\u0026quot;); p.add(tf,BorderLayout.CENTER); p.add(bn,BorderLayout.EAST); f.add(ta,BorderLayout.CENTER); f.add(p,BorderLayout.SOUTH); f.setSize(400,200); f.setVisible(true); //f.setVisable(true); tf.addActionListener(new TCPClientListener()); bn.addActionListener(new TCPClientListener()); f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } }); } public void close() { try{ dis.close(); dos.close(); s.close(); }catch(Exception e) { System.exit(0); } } /** * ç”¨äºç›‘å¬æœåŠ¡å™¨ç«¯å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯çº¿ç¨‹ç±» */ class readLineThread extends Thread { private BufferedReader buff = null;; public readLineThread(){ start(); } @Override public void run() { try { while(true){ String result = dis.readUTF(); if(\u0026quot;byeClient\u0026quot;.equals(result)){//å®¢æˆ·ç«¯ç”³è¯·é€€å‡ºï¼ŒæœåŠ¡ç«¯è¿”å›ç¡®è®¤é€€å‡º break; }else{//è¾“å‡ºæœåŠ¡ç«¯å‘é€æ¶ˆæ¯ //ta.append(result); System.out.println(result); // dos.writeUTF(result); ta.append(\u0026quot;æœåŠ¡å™¨ä¼ é€’è¯´:\u0026quot;+result+\u0026quot;\\n\u0026quot;); if(result.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } } } }catch (Exception e) { } } } class TCPClientListener implements ActionListener { @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); tf.setText(\u0026quot;\u0026quot;); ta.append(\u0026quot;å®¢æˆ·ç«¯è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } }  }\n ç»“æœï¼š è¿˜æœ‰ä¸€é—®é¢˜å¾…è§£å†³ï¼Œè¿è¡Œå¤šä¸ªç•Œé¢ï¼Œç¨‹åºå ç”¨å†…å­˜è¿‡å¤§ï¼ï¼ï¼ï¼ï¼ï¼ å¦‚ä½•è§£å†³ï¼Ÿï¼Ÿ ![æœåŠ¡å™¨è½¬å‘å®¢æˆ·ç«¯å®ç°å±€éƒ¨èŠå¤©](/images/java/jiben.png) è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼šæœåŠ¡å™¨è¯´çš„è¯åªèƒ½å‘ç»™ä¸€ä¸ªäººã€‚ è§£å†³åŠæ³•ï¼š ä¿®æ”¹TCPServerListenerçš„å®ç°ï¼š  java private ServerThread st = null; public TCPServerListener(ServerThread s) { st =s ; }\nå¹¶åœ¨actionPerformedä¸­å¢åŠ  st.pushMessage();  java try{ String str = tf.getText(); if(!str.isEmpty()) { tf.setText(\u0026ldquo;\u0026rdquo;); ta.append(\u0026ldquo;æœåŠ¡å™¨è¯´:\u0026ldquo;+str+\u0026rdquo;\\n\u0026rdquo;); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026ldquo;å†è§\u0026rdquo;)) { close(); System.exit(0); } //ta.append(\u0026ldquo;Client\u0026lt;\u0026rdquo; + name +\u0026ldquo;\u0026gt; say : \u0026ldquo; + line+\u0026rdquo;\\n\u0026rdquo;); st.pushMessage(\u0026ldquo;æœåŠ¡å™¨è¯´:\u0026ldquo;+str+\u0026rdquo;\\n\u0026rdquo;); }\nå½“ç„¶åœ¨ServerThreadæœåŠ¡å™¨çº¿ç¨‹ç±»ä¸­ï¼Œå¢åŠ   java private ServerThread st = null; // å—åˆ°å¯å‘çš„ä½œç”¨ï¼ï¼ Client=s\nthis.st = this; çš„ç¡®è¿™æ ·ä¿®æ”¹å®Œæœ‰æ•ˆæœï¼Œèƒ½å¤Ÿç¾¤å‘äº†ï¼Œä½†æ˜¯å°±æ˜¯æœ‰äº›å“¥ä»¬çš„å®¢æˆ·ç«¯å‘çš„æ˜¯ä¸¤æ¡é‡å¤ä¿¡æ¯ï¼Œæœ‰äº›å´æ˜¯ä¸€æ¡ã€‚\né‡è¦ä¿®æ”¹ï¼Œèƒ½å¤Ÿä¿è¯æœåŠ¡å™¨å‘çš„ä¿¡æ¯ä¸è‡³äºå‘å¤ªå¤šç»™æŸä¸€ä¸ªå®¢æˆ·ç«¯ï¼š String str = tf.getText(); if(!str.isEmpty()) { tf.setText(\u0026ldquo;\u0026rdquo;); ta.append(\u0026ldquo;æœåŠ¡å™¨è¯´:\u0026ldquo;+str+\u0026rdquo;\\n\u0026rdquo;); //dos.writeUTF(str); //å¦‚æœä¸æ³¨é‡Šæ‰ å…¶ä¸­æœ‰ä¸€ä¸ªç”¨æˆ·ä¼šå¾—åˆ°ä¸¤æ¡é‡å¤ä¿¡æ¯ï¼Œéƒ½æŠŠä»–æ”¾åœ¨message_listä¸­è¿›è¡Œè½¬å‘ï¼Œè€Œä¸æ˜¯ç‰¹ä¾‹çš„ä¸€ä¸ªåˆ©ç”¨dos.writeUTF(str) if(str.equalsIgnoreCase(\u0026ldquo;å†è§\u0026rdquo;)) { close(); System.exit(0); }\n st.pushMessage(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); }   åŸºäºæ­¤æˆ‘ä»¬çš„Serverç«¯å¦‚ä¸‹ï¼š  java /** * è§£é‡Šï¼š */ package TestNetwork;\nimport java.awt.BorderLayout; import java.awt.Button; import java.awt.Frame; import java.awt.Panel; import java.awt.TextArea; import java.awt.TextField; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.awt.event.WindowAdapter; import java.awt.event.WindowEvent; import java.io.DataInputStream; import java.io.DataOutputStream; import java.io.IOException; import java.net.ServerSocket; import java.net.Socket; import java.util.*;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ23æ—¥ä¸Šåˆ12:41:10 * @version TestNetworkRewriteTestServer5 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class RewriteTestServer5 {\n /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) throws Exception { // TODO Auto-generated method stub ServerSocket ss = new ServerSocket(5599); while(true) { new TCPServer2(ss.accept()); } }  } class TCPServer2 { // class variables // class variables // connect\n private Socket s = null; // data flow private DataOutputStream dos = null; private DataInputStream dis = null; // UI private static Frame f = null; private static TextArea ta = null; private static TextField tf = null; private static Button bn = null; private static boolean isPrint = false;//æ˜¯å¦è¾“å‡ºæ¶ˆæ¯æ ‡å¿— private static List user_list = new ArrayList();//ç™»é™†ç”¨æˆ·é›†åˆ private static List\u0026lt;ServerThread\u0026gt; thread_list = new ArrayList\u0026lt;ServerThread\u0026gt;();//æœåŠ¡å™¨å·²å¯ç”¨çš„çº¿ç¨‹é›†åˆ private static LinkedList\u0026lt;String\u0026gt; message_list = new LinkedList\u0026lt;String\u0026gt;();//å­˜æ”¾æ¶ˆæ¯é˜Ÿåˆ— static { createUI(); } public TCPServer2(Socket s) throws Exception { this.s = s; new PrintOutThread();//åˆ›å»ºå‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯çº¿ç¨‹ new ServerThread(this.s); //æœ¬ä»¥ä¸ºå¯ä»¥è®©å…¶çº¿ç¨‹å®‰å…¨çš„ï¼Œæ²¡æƒ³åˆ°æ²¡ä»€ä¹ˆæ•ˆæœ åè€Œæ›´å¡  /* Collections.synchronizedList(user_list); Collections.synchronizedList(thread_list); Collections.synchronizedList(message_list);*/ // launch();\n } // construct member /* public TCPServer() { } */ public static void createUI() { Frame f = new Frame(\u0026quot;æœåŠ¡å™¨\u0026quot;); ta = new TextArea(); tf = new TextField(); Panel p = new Panel(new BorderLayout()); bn = new Button(\u0026quot;å‘é€\u0026quot;); p.add(tf,BorderLayout.CENTER); p.add(bn,BorderLayout.EAST); f.add(ta,BorderLayout.CENTER); f.add(p,BorderLayout.SOUTH); f.setSize(400,200); f.setVisible(true); //f.setVisable(true);  /* tf.addActionListener(new TCPServerListener()); bn.addActionListener(new TCPServerListener());*/ f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } }); }\n public void close() { try{ s.close(); }catch(Exception e) { System.exit(0); } } class TCPServerListener implements ActionListener { private ServerThread st = null; public TCPServerListener(ServerThread s) { st =s ; } @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); if(!str.isEmpty()) { tf.setText(\u0026quot;\u0026quot;); ta.append(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); //dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } st.pushMessage(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } } /** * æœåŠ¡å™¨çº¿ç¨‹ç±» */ class ServerThread extends Thread{ private Socket client; private String name = null; private ServerThread st = null; // å—åˆ°å¯å‘çš„ä½œç”¨ï¼ï¼ Client=s public ServerThread(Socket s) throws Exception { this.client = s; this.st = this; dis = new DataInputStream(client.getInputStream()); dos = new DataOutputStream(client.getOutputStream()); dos.writeUTF(\u0026quot;æˆåŠŸè¿ä¸ŠæœåŠ¡å™¨\u0026quot;+client.getInetAddress().getHostAddress()); dos.writeUTF(Thread.currentThread().getName()+\u0026quot;å·²å¼€å¯\u0026quot;+\u0026quot;è¯·è¾“å…¥ä½ çš„å§“å\u0026quot;); this.start(); //tfçš„ç›‘å¬å™¨ tf.addActionListener(new TCPServerListener(this.st)); bn.addActionListener(new TCPServerListener(this.st)); } @Override public void run() { try { int flag = 0 ; String line = dis.readUTF(); while(!\u0026quot;bye\u0026quot;.equals(line)) { //æŸ¥çœ‹åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ if (\u0026quot;showuser\u0026quot;.equals(line)) { dos.writeUTF(this.listOnlineUsers()); line = dis.readUTF(); } //ç¬¬ä¸€æ¬¡è¿›å…¥ï¼Œä¿å­˜åå­— if(flag++ ==0){ name = line; user_list.add(name); thread_list.add(this); System.out.println(\u0026quot;this=\u0026quot;+this); dos.writeUTF(name +\u0026quot;ä½ å¥½,å¯ä»¥å¼€å§‹èŠå¤©äº†...\u0026quot;); // this.pushMessage(\u0026quot;Client\u0026lt;\u0026quot; + name +\u0026quot;\u0026gt;è¿›å…¥èŠå¤©å®¤...+\\n\u0026quot;); //ç°åœ¨åœ¨æœåŠ¡å™¨çš„å¤§å…ä¸­ ta.append(\u0026quot;Client\u0026lt;\u0026quot; + name +\u0026quot;\u0026gt;è¿›å…¥èŠå¤©å®¤...\\n\u0026quot;); }else{ //ç°åœ¨åœ¨æœåŠ¡å™¨çš„å¤§å…ä¸­ ta.append(\u0026quot;Client\u0026lt;\u0026quot; + name +\u0026quot;\u0026gt; say : \u0026quot; + line+\u0026quot;\\n\u0026quot;); this.pushMessage(\u0026quot;Client\u0026lt;\u0026quot; + name +\u0026quot;\u0026gt; say : \u0026quot; + line+\u0026quot;\\n\u0026quot;); } line = dis.readUTF(); } }catch(IOException e) { } } //æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—æœ«å°¾ï¼Œå‡†å¤‡å‘é€ç»™å®¢æˆ·ç«¯ public void pushMessage(String msg){ message_list.addLast(msg); isPrint =true; } //å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ¶ˆæ¯(åœ¨PrintOutThread æœ‰ä½¿ç”¨ äºæ˜¯å˜æˆäº†publicä¿®é¥°) public void sendMessage(String msg) throws Exception{ dos.writeUTF(msg); dos.flush(); } //ç»Ÿè®¡åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ éœ€è¦åœ¨showuserä¸­ä½¿ç”¨ æ”¹ä¸ºpublic private String listOnlineUsers() { String s =\u0026quot;--- åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ ---\u0026quot;; for (int i =0; i \u0026lt; user_list.size(); i++) { s +=\u0026quot;[\u0026quot; + user_list.get(i) +\u0026quot;]\u0026quot;; } s +=\u0026quot;--------------------\u0026quot;; return s; } } /** * ç›‘å¬æ˜¯å¦æœ‰è¾“å‡ºæ¶ˆæ¯è¯·æ±‚çº¿ç¨‹ç±»,å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ */ class PrintOutThread extends Thread { public PrintOutThread() { start(); } @Override public void run() { while(true){ if(isPrint){//å°†ç¼“å­˜åœ¨é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯æŒ‰é¡ºåºå‘é€åˆ°å„å®¢æˆ·ç«¯ï¼Œå¹¶ä»é˜Ÿåˆ—ä¸­æ¸…é™¤ã€‚ String message = message_list.getFirst(); for (ServerThread thread : thread_list) { try { //this. thread.sendMessage(message); } catch (Exception e) { // TODO Auto-generated catch block e.printStackTrace(); } } message_list.removeFirst(); isPrint = message_list.size() \u0026gt;0 ?true :false; } } } }  }\nClientç«¯å¦‚ä¸‹ï¼š  java /** * è§£é‡Šï¼š */ package TestNetwork;\nimport java.awt.BorderLayout; import java.awt.Button; import java.awt.Frame; import java.awt.Panel; import java.awt.TextArea; import java.awt.TextField; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.awt.event.WindowAdapter; import java.awt.event.WindowEvent; import java.io.BufferedReader; import java.io.DataInputStream; import java.io.DataOutputStream; import java.io.IOException; import java.io.InputStreamReader; import java.net.Socket;\nimport javax.swing.JOptionPane;\nimport TestNetwork.TCPClient1.ClientRead; import TestNetwork.TCPClient1.ClientWrite; import TestNetwork.TCPClient1.TCPClientListener;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ23æ—¥ä¸Šåˆ1:57:54 * @version TestNetworkRewriteTestClient5 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class RewriteTestClient5 {\n /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) throws Exception { // TODO Auto-generated method stub Socket s = null; s = new Socket(\u0026quot;127.0.0.1\u0026quot;,5599); new TCPClient5(s); }  } class TCPClient5 { // class variables // class variables // connect private Socket s = null; // data flow private DataOutputStream dos = null; private DataInputStream dis = null; // UI private Frame f = null; private TextArea ta = null; private TextField tf = null; private Button bn = null;\n /** * ä¸æœåŠ¡å™¨è¿æ¥ï¼Œå¹¶è¾“å…¥å‘é€æ¶ˆæ¯ */ public TCPClient5(Socket s) throws Exception { this.s = s; dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); createUI(); //new ClientRead(dis); //new ClientWrite(dos); new readLineThread(); } /** * ç”¨äºç›‘å¬æœåŠ¡å™¨ç«¯å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯çº¿ç¨‹ç±» */ public void createUI() { Frame f = new Frame(\u0026quot;å®¢æˆ·ç«¯\u0026quot;); ta = new TextArea(); tf = new TextField(); Panel p = new Panel(new BorderLayout()); bn = new Button(\u0026quot;å‘é€\u0026quot;); p.add(tf,BorderLayout.CENTER); p.add(bn,BorderLayout.EAST); f.add(ta,BorderLayout.CENTER); f.add(p,BorderLayout.SOUTH); f.setSize(400,200); f.setVisible(true); //f.setVisable(true); tf.addActionListener(new TCPClientListener()); bn.addActionListener(new TCPClientListener()); f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } }); } public void close() { try{ dis.close(); dos.close(); s.close(); }catch(Exception e) { System.exit(0); } } /** * ç”¨äºç›‘å¬æœåŠ¡å™¨ç«¯å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯çº¿ç¨‹ç±» */ class readLineThread extends Thread { private BufferedReader buff = null;; public readLineThread(){ start(); } @Override public void run() { try { while(true){ String result = dis.readUTF(); if(\u0026quot;byeClient\u0026quot;.equals(result)){//å®¢æˆ·ç«¯ç”³è¯·é€€å‡ºï¼ŒæœåŠ¡ç«¯è¿”å›ç¡®è®¤é€€å‡º break; }else{//è¾“å‡ºæœåŠ¡ç«¯å‘é€æ¶ˆæ¯ //ta.append(result); System.out.println(result); // dos.writeUTF(result); ta.append(\u0026quot;æœåŠ¡å™¨ä¼ é€’è¯´:\u0026quot;+result+\u0026quot;\\n\u0026quot;); if(result.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } } } }catch (Exception e) { } } } class TCPClientListener implements ActionListener { @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); tf.setText(\u0026quot;\u0026quot;); ta.append(\u0026quot;å®¢æˆ·ç«¯è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } }  }\nç»“æœï¼š 1ï¼šä¹‹å‰çš„çº¿ç¨‹å¡çš„é—®é¢˜ï¼Œè¿˜æ²¡æœ‰è§£å†³ï¼Œè¿è¡Œèµ·æ¥ä»ç„¶æ„Ÿè§‰å ç”¨å¤§é‡å†…å­˜ï¼ï¼ 2ï¼šä¸ºä»€ä¹ˆ ç¬¬ä¸€ä¸ªè¿›å…¥èŠå¤©ç³»ç»Ÿçš„æ¨ä¸­ç§‘ï¼Œä¼šæ‰“å°å‡ºä¸‰æ¬¡å‘¢ï¼Ÿ å½“ç„¶åé¢çš„æ¶ˆæ¯æ­£å¸¸ï¼Œå½“ç„¶ä¸‰æ¬¡çš„æ„æ€æ˜¯èŠå¤©ç³»ç»Ÿè¿›å…¥äº†ä¸‰ä¸ªäººï¼Œéƒ½æ•™æˆå’ŒRocket. æ‰€ä»¥è‚¯å®šæ˜¯é‚£éƒ¨åˆ†æœ‰é—®é¢˜å¾…è§£å†³ ![åœ¨è¿™è¾¹æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå‡ºç°äº†ä¸‰è¡Œæ‰“å°](/images/java/æœåŠ¡å™¨2.png) ![ç¾¤å‘æ•ˆæœOK,æœåŠ¡å™¨ä¹Ÿæ²¡é—®é¢˜äº†](/images/java/åŸºæœ¬æ»¡è¶³é¢˜æ„.png) http://www.cnblogs.com/linjiqin/archive/2013/05/30/3108188.html æ¬£èµäº†è¿™ç¯‡ä½³ä½œ åŸºäºä¸Šæ¬¡çš„é—®é¢˜ï¼Œæ‰“å¼€çš„æ—¶å€™ç»å¸¸ä¼šå‡ºç°å¤šä¸ªæ‰“å°çš„æƒ…å†µï¼Œ å°è¯•å¦‚ä¸‹ä¿®æ”¹ï¼š â€œç™»å½•ç”¨æˆ·é›†åˆâ€å’Œâ€œæœåŠ¡å™¨å·²å¯ç”¨çº¿ç¨‹é›†åˆâ€çš„listï¼Œå¦‚æœå˜åŒ–ä¸é¢‘ç¹ï¼Œè¯»å¤šå†™å°‘ï¼Œä½¿ç”¨CopyOnWriteArrayListã€‚ â€œå­˜æ”¾æ¶ˆæ¯é˜Ÿåˆ—â€ç”¨Queueæ¥å£æ¯”Listæ¥å£æ›´æ–¹ä¾¿ï¼ˆæ¯æ¬¡ç›´æ¥POPï¼Œæ²¡æ¶ˆæ¯æ—¶å€™è¿˜å¯ä»¥è®©å¹¿æ’­çº¿ç¨‹è‡ªå·±é˜»å¡åœ¨ä¸Šé¢ï¼‰ï¼Œå…·ä½“çš„ç”¨ArrayBlockingQueueæˆ–è€…LinkedBlockingQueueéƒ½å¯ä»¥ã€‚http://my.oschina.net/leejun2005/blog/104955 å¯¹åº”çš„message_list.addLast(msg) å˜æˆäº†message_list.put(msg) message_list.take()æ¥å–ä»£ message_list.getFirst() \u0026amp; message_list.removeFirst() æ•ˆæœå°±æ˜¯å±…ç„¶æ²¡é—®é¢˜ã€‚å±…ç„¶ä¹Ÿä¸å¡äº† Serverç«¯çš„ä¿®æ­£ç‰ˆæœ¬ï¼šï¼ˆClientç«¯ä¸éœ€è¦ä¿®æ­£ï¼‰  java\n/** * è§£é‡Šï¼š */ package TestNetwork;\nimport java.awt.BorderLayout; import java.awt.Button; import java.awt.Frame; import java.awt.Panel; import java.awt.TextArea; import java.awt.TextField; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.awt.event.WindowAdapter; import java.awt.event.WindowEvent; import java.io.DataInputStream; import java.io.DataOutputStream; import java.io.IOException; import java.net.ServerSocket; import java.net.Socket; import java.util.*; import java.util.concurrent.CopyOnWriteArrayList; import java.util.concurrent.LinkedBlockingQueue;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ23æ—¥ä¸Šåˆ12:41:10 * @version TestNetworkRewriteTestServer5 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class RewriteTestServer5 {\n /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) throws Exception { // TODO Auto-generated method stub ServerSocket ss = new ServerSocket(5599); while(true) { new TCPServer2(ss.accept()); } }  } class TCPServer2 { // class variables // class variables // connect\n private Socket s = null; // data flow private DataOutputStream dos = null; private DataInputStream dis = null; // UI private static Frame f = null; private static TextArea ta = null; private static TextField tf = null; private static Button bn = null; private static boolean isPrint = false;//æ˜¯å¦è¾“å‡ºæ¶ˆæ¯æ ‡å¿— private static List user_list = new CopyOnWriteArrayList();//ç™»é™†ç”¨æˆ·é›†åˆ private static List\u0026lt;ServerThread\u0026gt; thread_list = new CopyOnWriteArrayList\u0026lt;ServerThread\u0026gt;();//æœåŠ¡å™¨å·²å¯ç”¨çš„çº¿ç¨‹é›†åˆ private static LinkedBlockingQueue\u0026lt;String\u0026gt; message_list = new LinkedBlockingQueue\u0026lt;String\u0026gt;();//å­˜æ”¾æ¶ˆæ¯é˜Ÿåˆ— // private static List\u0026lt;String\u0026gt; message_list = new LinkedList\u0026lt;String\u0026gt;();//å­˜æ”¾æ¶ˆæ¯é˜Ÿåˆ— static { createUI(); } public TCPServer2(Socket s) throws Exception { this.s = s; new PrintOutThread();//åˆ›å»ºå‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯çº¿ç¨‹ new ServerThread(this.s); //æœ¬ä»¥ä¸ºå¯ä»¥è®©å…¶çº¿ç¨‹å®‰å…¨çš„ï¼Œæ²¡æƒ³åˆ°æ²¡ä»€ä¹ˆæ•ˆæœ åè€Œæ›´å¡  /* Collections.synchronizedList(user_list); Collections.synchronizedList(thread_list); Collections.synchronizedList(message_list);*/ // launch();\n } // construct member /* public TCPServer() { } */ public static void createUI() { Frame f = new Frame(\u0026quot;æœåŠ¡å™¨\u0026quot;); ta = new TextArea(); tf = new TextField(); Panel p = new Panel(new BorderLayout()); bn = new Button(\u0026quot;å‘é€\u0026quot;); p.add(tf,BorderLayout.CENTER); p.add(bn,BorderLayout.EAST); f.add(ta,BorderLayout.CENTER); f.add(p,BorderLayout.SOUTH); f.setSize(400,200); f.setVisible(true); //f.setVisable(true);  /* tf.addActionListener(new TCPServerListener()); bn.addActionListener(new TCPServerListener());*/ f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } }); }\n public void close() { try{ s.close(); }catch(Exception e) { System.exit(0); } } class TCPServerListener implements ActionListener { private ServerThread st = null; public TCPServerListener(ServerThread s) { st =s ; } @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); if(!str.isEmpty()) { tf.setText(\u0026quot;\u0026quot;); ta.append(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); //dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } st.pushMessage(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } } /** * æœåŠ¡å™¨çº¿ç¨‹ç±» */ class ServerThread extends Thread{ private Socket client; private String name = null; private ServerThread st = null; // å—åˆ°å¯å‘çš„ä½œç”¨ï¼ï¼ Client=s public ServerThread(Socket s) throws Exception { this.client = s; this.st = this; dis = new DataInputStream(client.getInputStream()); dos = new DataOutputStream(client.getOutputStream()); dos.writeUTF(\u0026quot;æˆåŠŸè¿ä¸ŠæœåŠ¡å™¨\u0026quot;+client.getInetAddress().getHostAddress()); dos.writeUTF(Thread.currentThread().getName()+\u0026quot;å·²å¼€å¯\u0026quot;+\u0026quot;è¯·è¾“å…¥ä½ çš„å§“å\u0026quot;); this.start(); //tfçš„ç›‘å¬å™¨ tf.addActionListener(new TCPServerListener(this.st)); bn.addActionListener(new TCPServerListener(this.st)); } @Override public void run() { try { int flag = 0 ; String line = dis.readUTF(); while(!\u0026quot;bye\u0026quot;.equals(line)) { //æŸ¥çœ‹åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ if (\u0026quot;showuser\u0026quot;.equals(line)) { dos.writeUTF(this.listOnlineUsers()); line = dis.readUTF(); } //ç¬¬ä¸€æ¬¡è¿›å…¥ï¼Œä¿å­˜åå­— if(flag++ ==0){ name = line; user_list.add(name); thread_list.add(this); System.out.println(\u0026quot;this=\u0026quot;+this); this.pushMessage(\u0026quot;Client\u0026lt;\u0026quot; + name +\u0026quot;\u0026gt;è¿›å…¥èŠå¤©å®¤...+\\n\u0026quot;); dos.writeUTF(name +\u0026quot;ä½ å¥½,å¯ä»¥å¼€å§‹èŠå¤©äº†...\u0026quot;); // //ç°åœ¨åœ¨æœåŠ¡å™¨çš„å¤§å…ä¸­ ta.append(\u0026quot;Client\u0026lt;\u0026quot; + name +\u0026quot;\u0026gt;è¿›å…¥èŠå¤©å®¤...\\n\u0026quot;); }else{ //ç°åœ¨åœ¨æœåŠ¡å™¨çš„å¤§å…ä¸­ ta.append(\u0026quot;Client\u0026lt;\u0026quot; + name +\u0026quot;\u0026gt; say : \u0026quot; + line+\u0026quot;\\n\u0026quot;); this.pushMessage(\u0026quot;Client\u0026lt;\u0026quot; + name +\u0026quot;\u0026gt; say : \u0026quot; + line+\u0026quot;\\n\u0026quot;); } line = dis.readUTF(); } }catch(IOException e) { } } //æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—æœ«å°¾ï¼Œå‡†å¤‡å‘é€ç»™å®¢æˆ·ç«¯ public void pushMessage(String msg){ //msssage_list. //message_list.addLast(msg); //é’ˆå¯¹äºLinkedList try { message_list.put(msg); } catch (InterruptedException e) { // TODO Auto-generated catch block e.printStackTrace(); } isPrint =true; } //å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ¶ˆæ¯(åœ¨PrintOutThread æœ‰ä½¿ç”¨ äºæ˜¯å˜æˆäº†publicä¿®é¥°) public void sendMessage(String msg) throws Exception{ dos.writeUTF(msg); dos.flush(); } //ç»Ÿè®¡åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ éœ€è¦åœ¨showuserä¸­ä½¿ç”¨ æ”¹ä¸ºpublic private String listOnlineUsers() { String s =\u0026quot;--- åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ ---\u0026quot;; for (int i =0; i \u0026lt; user_list.size(); i++) { s +=\u0026quot;[\u0026quot; + user_list.get(i) +\u0026quot;]\u0026quot;; } s +=\u0026quot;--------------------\u0026quot;; return s; } } /** * ç›‘å¬æ˜¯å¦æœ‰è¾“å‡ºæ¶ˆæ¯è¯·æ±‚çº¿ç¨‹ç±»,å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ */ class PrintOutThread extends Thread { public PrintOutThread() { start(); } @Override public void run() { while(true){ if(isPrint){//å°†ç¼“å­˜åœ¨é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯æŒ‰é¡ºåºå‘é€åˆ°å„å®¢æˆ·ç«¯ï¼Œå¹¶ä»é˜Ÿåˆ—ä¸­æ¸…é™¤ã€‚ String message = null; try { message = message_list.take(); } catch (InterruptedException e1) { // TODO Auto-generated catch block e1.printStackTrace(); } //message = message_list.getFirst(); for (ServerThread thread : thread_list) { try { //this. thread.sendMessage(message); } catch (Exception e) { // TODO Auto-generated catch block e.printStackTrace(); } } // message_list.removeFirst(); //isPrint = false; //è¿™å¥è¯å¾ˆé‡è¦ï¼ï¼ï¼ä¸èƒ½éšä¾¿ä¿®æ”¹ isPrint = message_list.size()\u0026gt;0 ?true :false; } } } }  }\n ![æœ‰é—®é¢˜çš„ç‰ˆæœ¬ï¼ˆä½†æ˜¯åŸºæœ¬æ»¡è¶³é¢˜æ„ï¼‰](/images/java/æœåŠ¡å™¨3.png) ![ä¸å¡ç‰ˆæœ¬ï¼Œä¸”è§£å†³äº†ç™»é™†æ—¶å€™çš„å¤šæ¡æ‰“å°é—®é¢˜](/images/java/å±…ç„¶ä¸å¡äº†.png) 1 åŠ¨æœºæ˜¯ä¸ºäº†ç†Ÿæ‚‰ç½‘ç»œç¼–ç¨‹ï¼Œäºæ˜¯é‡å†™äº†ä¹‹å‰å†™è¿‡çš„ä»£ç ã€‚ä»TCPServer 1 2 3ä¸‰ä¸ªè¿›è¡Œé‡æ–°çš„æ”¹å†™ 2 å‘ç°TCPServer3æœ‰é—®é¢˜ï¼Ÿ åœ¨å®¢æˆ·ç«¯è¿æ¥ä¸Šåï¼Œå®¢æˆ·ç«¯å‘é€æ•°æ®å¯ä»¥åˆ°æœåŠ¡å™¨ç«¯ï¼Œæ¥ç€åˆ‡æ¢åˆ°æœåŠ¡å™¨ç«¯ï¼Œä½†æ˜¯æœåŠ¡å™¨çš„è¾“å…¥å‡ºç°äº†é—®é¢˜ï¼Œ æ— è®ºä½ è¾“å…¥ä¸€ä¸ªå­—è¿˜æ˜¯nä¸ªå­—éƒ½æ— æ³•åˆ‡æ¢å›å®¢æˆ·ç«¯äº† 3 äºæ˜¯åŸºäºè¿™ä¸ªé—®é¢˜å¼€å§‹è¿›è¡Œä¿®æ”¹ ä¸»è¦åŒ…å«ä¸€ä¸ªä¸»è¦ ç‰ˆæœ¬1 Serveræœ‰ä¸€å¯¹è¯»å†™çº¿ç¨‹ç±» Clientæœ‰ä¸€å¯¹è¯»å†™çº¿ç¨‹ç±» ç‰ˆæœ¬2 Serveræœ‰ä¸€å¯¹è¯»å†™çº¿ç¨‹ç±» Clientæ²¡æœ‰ä¸€å¯¹è¯»å†™çº¿ç¨‹ç±» ç‰ˆæœ¬3 Serveræœ‰ä¸€ä¸ªServerThreadçº¿ç¨‹ç±» Clientæœ‰ä¸€ä¸ªreadLineThreadçº¿ç¨‹ç±» çœŸçš„æ˜¯ä»åŸå…ˆçš„å››ä¸ªç±»ï¼Œåˆ°æœ€åæŠ›å¼ƒäº†åŸå…ˆçš„å››ä¸ªç±»ï¼Œé‡å†™äº†å¦å¤–çš„å‡ ä¸ªç±» RewriteServer1.java RewriteServer2.java RewriteServer3.java RewriteServer4.java RewriteServer5.java æœ€åçš„ä¸€ä¸ªç‰ˆæœ¬æ˜¯RewriteServer5 4 ç‰ˆæœ¬3 å¼•å…¥äº†æ–°çš„æ•°æ®ç»“æ„ CopyWriteArrayListå’ŒLinkedBlockingQueue çº¿ç¨‹é˜»å¡ç±» 5: æ³¨æ„äº† 5.1 çº¿ç¨‹çš„ä½¿ç”¨(ä»threadåˆ°Runnable)ï¼Œçº¿ç¨‹å¼€å¯æ”¾ç½®çš„ä½ç½®ï¼Œæœ€åå‘ç°ä½¿ç”¨äº†å¤šçº¿ç¨‹æœåŠ¡å™¨å®¢æˆ·ç«¯ 5.2 é™æ€ä»£ç æ®µstaticçš„ä½¿ç”¨ 5.3 ServerThreadçš„é™æ€å˜é‡çš„ä½¿ç”¨ï¼Œé…åˆä¸Šæ„é€ å‡½æ•° 5.4 æ•°æ®ç»“æ„çš„ä½¿ç”¨ çŒ›ç„¶å‘ç°ä¸€ä¸ªç‰¹ç‚¹ï¼š  java GTK.g_timeout_add(100, new IGSourceFunc() {\n @Override public boolean execute(Object userdata) { // TODO Auto-generated method stub int len = otv.getText().length(); char ch = love.charAt(len); otv.insertTextAtEnd(Character.toString(ch)); if(otv.getText().length() == love.length()-1) { //om.close(); try ( OOMusic om = new OOMusic(\u0026quot;æˆ‘å¦‚æ­¤çˆ±ä½ .mp3\u0026quot;,true); ) { om.playRepeat(); } return true; }else if(otv.getText().length() == love.length()) { return false; } else { //System.out.println(\u0026quot;2\u0026quot;); return true; } } }, null);  2ï¼š  java vgOpen.addActivateListener(new IGCallBack() {\n @Override public void execute(int instance, int eventData, Object object) { youOpenfile(ootv); } });  3ï¼š  java //æ·»åŠ æŒ‰é’®äº‹ä»¶ GTK.g_signal_connect(btnShow, \u0026ldquo;clicked\u0026rdquo;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ String text = GTK.gtk_text_buffer_get_text(textbuffer); GTK.gtk_label_set_text(label, text); } }, null);\n4ï¼š å‰ä¸‰ä¸ªéƒ½æ˜¯é’ˆå¯¹gtkçš„ awtçš„äº‹ä»¶å…³é—­ç›‘å¬ï¼Œ  java f = new JFrame(\u0026ldquo;å®¢æˆ·ç«¯\u0026rdquo;); f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } });\nå½“ç„¶åœ¨JFrameå¯ä»¥é‡‡ç”¨ï¼š f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); å¤åˆ¶ä»£ç  ä»–ä»¬å…±åŒçš„ç‰¹ç‚¹æ˜¯éƒ½é‡‡ç”¨åŒ¿åç±»ï¼Œå½“åšæ—¶é—´çš„å“åº”å‡½æ•°æˆ–è€…å›è°ƒå‡½æ•°ï¼Œäºæ˜¯å½“å‰çš„ç½‘ç»œç¼–ç¨‹çš„buttonå’Œ textfieldä¹Ÿæ˜¯é‡‡ç”¨åŒ¿åç±»æ¥å®ç°ï¼š  java class TCPClientListener implements ActionListener { @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); tf.setText(\u0026ldquo;\u0026rdquo;); ta.append(\u0026ldquo;å®¢æˆ·ç«¯è¯´:\u0026ldquo;+str+\u0026rdquo;\\n\u0026rdquo;); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026ldquo;å†è§\u0026rdquo;)) { close(); System.exit(0); } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } }\n æ·»åŠ ç›‘å¬ï¼š  java\n tf.addActionListener(new TCPClientListener()); bn.addActionListener(new TCPClientListener());  ```\næ³¨æ„åŒ¿åç±»çš„ç›‘å¬å‡½æ•°çš„åŒ¿åç±»å¯¹è±¡å®ç°å›è°ƒ\nå­¦ä¹ äº†åŒ¿åç±»çš„äº‹ä»¶å›è°ƒå‡½æ•°ã€‚\n","date":1431327525,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327525,"objectID":"735dc5fc70e08b09a9a9fb116366334e","permalink":"/blog/2015/05/11/duo-xian-cheng-march18th/","publishdate":"2015-05-11T14:58:45+08:00","relpermalink":"/blog/2015/05/11/duo-xian-cheng-march18th/","section":"archives","summary":"","tags":null,"title":"å¤šçº¿ç¨‹March18th","type":"archives"},{"authors":null,"categories":["xml"],"content":"é—®é¢˜æ¥æºï¼š æˆ‘æœ¬æƒ³ç€æŸ¥æŸ¥ç½‘ä¸Šæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥ç”¨æ¥éªŒè¯dtdï¼Œäºæ˜¯å°±æœåˆ°è¿™ç¯‡ï¼Œç„¶åå¼€å§‹ç»ƒä¹ ã€‚é‡åˆ°çš„é—®é¢˜è¿˜çœŸä¸å°‘ï¼Œjava IOæœ‰äº›å¿˜äº†ï¼Œå°±é‡æ–°æŸ¥ï¼ˆè¿™æ˜¯ä¸€ç‚¹æ”¶è·ï¼‰ ä½†æ˜¯ç°åœ¨é‡åˆ°çš„æœ€å¤§çš„é—®é¢˜æ˜¯ db.parse()ä¸€ç›´æç¤ºperson.xmlä¸å­˜åœ¨ï¼Œæˆ‘å·²ç»åœ¨å¤šä¸ªåœ°æ–¹éƒ½å­˜æ”¾ç€person.xml, ä¹ŸçŸ¥é“fileInputStreamè¯»å–çš„ç›¸å¯¹è·¯å¾„åº”è¯¥æ˜¯javaé¡¹ç›®çš„è·Ÿè·¯å¾„ï¼Œç”šè‡³æˆ‘æŠŠæ–‡ä»¶åçš„å…¨è·¯å¾„éƒ½ç»™å†™ä¸Šï¼Œä½†æ˜¯æŠ¥çš„é”™è¯¯å°±æ˜¯ person.xml not found\né—®é¢˜çš„äº§ç”Ÿé¡¹ç›®æ–‡ä»¶ï¼šï¼ˆæˆ‘æŠŠæ‰€æœ‰çš„æ–‡ä»¶éƒ½æ”¾åœ¨TestDTDçš„åŒ…ä¸‹é¢ï¼‰ person.xml :ç¬¬ä¸€ä¸ªæµ‹è¯•dtdçš„xmlæ–‡ä»¶ worker.xml ï¼šç¬¬äºŒä¸ªæµ‹è¯•dtdçš„xmlæ–‡ä»¶ person.dtd ï¼šdtdçš„çº¦æŸæ–‡ä»¶ ValidateDTD.java :ç”¨äºéªŒè¯person.xml å’Œwork.xml æ˜¯å¦æ­£ç¡®çš„æ”¶åˆ°person.dtdçš„çº¦æŸ\næ‰€æœ‰æºæ–‡ä»¶ï¼š person.dtd:\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;!ELEMENT person (name,sex,birthday)*\u0026gt; \u0026lt;!ELEMENT name (#PCDATA)\u0026gt; \u0026lt;!ELEMENT sex (#PCDATA)\u0026gt; \u0026lt;!ELEMENT birthday (#PCDATA)\u0026gt;  å¤åˆ¶ä»£ç  person.xml:\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;!DOCTYPE person SYSTEM \u0026quot;person.dtd\u0026quot;\u0026gt; \u0026lt;person\u0026gt; \u0026lt;name\u0026gt;Tom\u0026lt;/name\u0026gt; \u0026lt;sex\u0026gt;male\u0026lt;/sex\u0026gt; \u0026lt;birthday\u0026gt;1990-01-07\u0026lt;/birthday\u0026gt; \u0026lt;/person\u0026gt;  å¤åˆ¶ä»£ç  worker.xml:(å¤šäº†ä¸€æ¡jobå­—æ®µï¼Œä½†æ˜¯æ˜¯ä¸éœ€è¦çš„)\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt; \u0026lt;!DOCTYPE person SYSTEM \u0026quot;person.dtd\u0026quot;\u0026gt; \u0026lt;person\u0026gt; \u0026lt;name\u0026gt;Tom\u0026lt;/name\u0026gt; \u0026lt;sex\u0026gt;male\u0026lt;/sex\u0026gt; \u0026lt;birthday\u0026gt;1990-01-07\u0026lt;/birthday\u0026gt; \u0026lt;job\u0026gt;Painting\u0026lt;/job\u0026gt; \u0026lt;/person\u0026gt;  å¤åˆ¶ä»£ç \nValidateDTD.java:ï¼ˆå·²ä¿®æ­£çš„ValidateDTDç¨‹åºï¼‰\npackage TestDTD; import java.io.File; import java.io.IOException; import java.net.URL; import javax.xml.parsers.DocumentBuilder; import javax.xml.parsers.DocumentBuilderFactory; import javax.xml.parsers.ParserConfigurationException; import org.xml.sax.SAXException; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´4æœˆ26æ—¥ä¸Šåˆ3:48:53 * @version TestDTDValidataDTD V1.0 åŠŸèƒ½ï¼š æ­¥éª¤1ï¼š æ­¥éª¤2ï¼š æ³¨æ„ï¼š æŒæ¡ï¼š æ€è€ƒ1ï¼š æ€è€ƒ2ï¼š å›é¡¾ï¼š */ public class ValidataDTD { /** * @param args */ public static void main(String[] args) { // TODO Auto-generated method stub // æœ€å¥½æ˜¯äº‹å…ˆæ‰“å°å½“å‰çš„è·¯å¾„å®åœ¨å“ªé‡Œ System.out.println(new File(\u0026quot;.\u0026quot;).getAbsolutePath()); System.out.println(new File(\u0026quot;.\u0026quot;).getName()); System.out.println(new File(\u0026quot;.\u0026quot;).getPath()); System.out.println(\u0026quot;å¼€å§‹æµ‹è¯•person.xml\u0026quot;); testPerson1(); System.out.println(\u0026quot;å¼€å§‹æµ‹è¯•worker.xml\u0026quot;); testWorker(); } // åˆ©ç”¨å·¥å‚ç±»DocumentBuilderFactoryæ¥åˆ¤æ–­DTDä¹¦å†™çš„æ­£ç¡®æ€§ public static void testPerson1() { try { DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); dbf.setValidating(true); // åˆ©ç”¨dbfå»ºç«‹ä¸€ä¸ªdocumentBuilderå¯¹è±¡ DocumentBuilder db = dbf.newDocumentBuilder(); // é”™è¯¯1 // db.parse(new FileInputStream(new File(\u0026quot;.\u0026quot;).getAbsoluteFile()+ // \u0026quot;//TestDTD//person.xml\u0026quot;)); // é”™è¯¯2 // InputStream is = ValidataDTD.class.getClassLoader() // .getResourceAsStream(\u0026quot;person.xml\u0026quot;); /** * æœ€å¸¸ç”¨è¯»å–propertiesæ–‡ä»¶çš„æ–¹æ³• InputStream in = * getClass().getResourceAsStream * (\u0026quot;èµ„æºName\u0026quot;);è¿™ç§æ–¹å¼è¦æ±‚propertiesæ–‡ä»¶å’Œå½“å‰ç±»åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸‹é¢ã€‚å¦‚æœåœ¨ä¸åŒçš„åŒ…ä¸­ï¼Œå¿…é¡»ä½¿ç”¨ï¼š * InputStream ins = this.getClass().getResourceAsStream( * \u0026quot;/cn/zhao/properties/testPropertiesPath2.properties\u0026quot;); */ // é”™è¯¯3 // db.parse(new FileInputStream(\u0026quot;./src/TestDTD/person.xml\u0026quot;)); // é”™è¯¯4 // db.parse(new FileInputStream( // \u0026quot;C:\\\\Users\\\\708\\\\git\\\\Day2015-4-14\\\\src\\\\TestDTD\\\\person.xml\u0026quot;)); // db.parse(new FileInputStream(new File(\u0026quot;E://person.xml\u0026quot;))); URL fileURLPerson = ResourceAccessSecond.class.getClassLoader().getResource( \u0026quot;TestDTD/person.xml\u0026quot;); db.parse(new File(fileURLPerson.getFile())); } catch (ParserConfigurationException e) { System.out.println(\u0026quot;DocumentBuilder å»ºç«‹å¤±è´¥\u0026quot;); } catch (IOException e) { System.out.println(\u0026quot;person.xmlæ–‡ä»¶ä¸å­˜åœ¨\u0026quot;); } catch (SAXException e) { // TODO Auto-generated catch block e.printStackTrace(); } } // åˆ©ç”¨å·¥å‚ç±»DocumentBuilderFactoryæ¥åˆ¤æ–­DTDä¹¦å†™çš„æ­£ç¡®æ€§ public static void testWorker() { try { DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); dbf.setValidating(true); // åˆ©ç”¨dbfå»ºç«‹ä¸€ä¸ªdocumentBuilderå¯¹è±¡ DocumentBuilder db = dbf.newDocumentBuilder(); URL fileURLPerson = ResourceAccessSecond.class.getClassLoader().getResource( \u0026quot;TestDTD/worker.xml\u0026quot;); db.parse(new File(fileURLPerson.getFile())); } catch (ParserConfigurationException e) { System.out.println(\u0026quot;DocumentBuilder å»ºç«‹å¤±è´¥\u0026quot;); } catch (IOException e) { System.out.println(\u0026quot;person.xmlæ–‡ä»¶ä¸å­˜åœ¨\u0026quot;); } catch (SAXException e) { // TODO Auto-generated catch block e.printStackTrace(); } } }  å¤åˆ¶ä»£ç \n1ï¼š æŸ¥é˜…äº† dtdçš„è¯­æ³•è§„èŒƒï¼Œä¹Ÿæ³¨æ„åˆ°äº†ç©ºæ ¼è¦æŠŠå…ƒç´ å’Œåœ†æ‹¬å·åˆ†å¼€å†™ï¼Œæ£€æŸ¥åŸºæœ¬ä¸Šæ²¡æœ‰æ‹¼å†™é”™è¯¯ï¼Œä½†æ˜¯è¿˜æ˜¯æŠ¥äº†person.xmlçš„ 2ï¼š æŸ¥é˜…äº†FileInputStreamçš„ç”¨æ³•ï¼Œ æœ‰ä¸‰ç§å‚æ•° Stringï¼ŒFiles ,å¦å¤–ä¸€ç§æ¯”è¾ƒå°‘ç”¨ï¼Œä¹Ÿå°±æ˜¯æ—¢å¯ä»¥ç›´æ¥ä½¿ç”¨æ–‡ä»¶åå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ new File(æ–‡ä»¶åå­—ç¬¦ä¸²) åˆæˆ–è€…ç¬¬ä¸‰ç§ã€‚ æœªæ‰¾åˆ°è§£å†³åŠæ³• è¡¥å……ï¼š ä¹‹å‰æˆ‘ä»¬ä¸€ç›´è®­ç»ƒçš„æ˜¯åœ¨é¡¹ç›®ä¸­è¯»å–çš„æ˜¯propertiesï¼ˆç„¶ååˆ©ç”¨prop.load(in)çš„æ–¹æ³•ï¼‰,è€Œåœ¨éé¡¹ç›®æ–‡ä»¶ä¸­è¯»å–çš„æ˜¯å…¨è·¯å¾„é—®é¢˜ï¼ˆæ¯”å¦‚e:/person.xml)ï¼Œç¬¬ä¸€æ¬¡æƒ³åˆ°å¦‚æœæˆ‘ä»¬ç”¨FileInputStreamæ˜¯å¦è¯»å–javaé¡¹ç›®ä¸­çš„æ–‡ä»¶ã€‚\nè¡¥å……2ï¼š myeclipseå¹¶ä¸ä¼šæŠ¥è­¦æˆ‘åœ¨ä½¿ç”¨å¤–éƒ¨çº¦æŸDTDçš„ä¸å­˜åœ¨çš„å…ƒç´ ï¼Œè‡ªå·±åˆä¸çŸ¥é“xmlè§£æå™¨æ˜¯å¦çœŸçš„æ™“å¾—dtdçš„æ–‡ä»¶çš„å­˜åœ¨ï¼Œäºæ˜¯å°±æƒ³ç€è‡ªå·± æµ‹è¯•ä¸€ä¸‹ 3ï¼šäºæ˜¯æ±‚æ•™ Professor Du ï¼Œç»™äº†æˆ‘ä¸¤ä¸ªè¯»å–é¡¹ç›®æ–‡ä»¶çš„è§†é¢‘ è§†é¢‘1ï¼š ç”¨ å½“å‰ç±» ValidateDTD.class.getResource()æ–¹æ³• http://v.polyv.net/uc/video/iframeview?vid=e46d36780492b6d4ec8ed55f4fb04583_e\u0026amp;playerwidth=100 æ³¨æ„ï¼š binç›®å½•è¡¨ç¤ºç±»åŠ è½½æ ¹ç›®å½•ï¼ˆè¦çŸ¥é“æˆ‘åœ¨è¯´ä»€ä¹ˆï¼Œæ‰“å¼€window-\u0026gt; show view\u0026ndash;\u0026gt;navigator\nä½ ä¼šå‘ç°navigatorç°å®çš„binæ–‡ä»¶å¤¹å’Œ srcæ–‡ä»¶å¤¹åŸºæœ¬ä¸Šæ˜¯å¯¹åº”çš„ï¼Œåªä¸è¿‡æ˜¯æŠŠjavaæ–‡ä»¶ï¼Œéƒ½å˜æˆäº† classæ–‡ä»¶ï¼Œå…¶ä»–æ–‡ä»¶ä¿æŒåŸæ ·ï¼Œè¿™ä¹Ÿå°±æ˜¯binæ ¹ç›®å½•çš„æ‰€åœ¨åœ°å’Œä»–çš„æ–‡æ¡£ç»“æ„ï¼‰ åœ¨ä½¿ç”¨ æ­¤æ–¹æ³•å¿…é¡»åŠ ä¸Šæ–œæ å¼€å¤´ è§†é¢‘2 ï¼š ç”¨ å½“å‰ç±» ValidateDTD.class.classLoader().getResource()æ–¹æ³• http://v.polyv.net/uc/video/iframeview?vid=e46d367804795fd7b389ade7541a9db7_e\u0026amp;playerwidth=100 æ³¨æ„ï¼š ä¸ä¸Šé¢æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œåœ¨åŠ è½½binç›®å½•çš„æ—¶å€™ï¼Œä¸éœ€è¦ä½¿ç”¨æ–œæ  ç›´æ¥å†™ä¸ŠåŒ…åæˆ–è€…æ–‡ä»¶åï¼ˆæŒ‰ç…§æ–‡ä»¶ç»“æ„ï¼Œ æŠŠbinç›®å½•å½“åšæ ¹ç›®å½•å³å¯ï¼‰\nè§†é¢‘ä¸€çš„æµ‹è¯•æºæ–‡ä»¶ï¼š\npackage TestDTD; import java.io.BufferedReader; import java.io.File; import java.io.FileReader; import java.net.URL; /* * æ‰“å¼€navigatorè¯•å›¾ï¼Œæ‰èƒ½çŸ¥é“æˆ‘åœ¨è®²ä»€ä¹ˆ window--\u0026gt;show view---\u0026gt;navigator * å¯ä»¥çœ‹åˆ°binå’ŒsrcåŸºæœ¬ä¸Šæ˜¯javaæ–‡ä»¶å˜æˆäº†classå…¶ä»–ä¸€ä¸€å¯¹åº” * ä¹Ÿå°±æ˜¯ä¸€ä¸ªjavaæ–‡ä»¶ä¸€ç»ç¼–è¯‘ï¼Œ å˜æˆclassæ–‡ä»¶éƒ½ä¼šåˆ°binæ–‡ä»¶ï¼ˆè§„å¾‹1ï¼‰ * å¦å¤–çš„binæ–‡ä»¶ä¹Ÿå«åšç±»åŠ è½½æ ¹ç›®å½•ï¼ˆä¸‹é¢å¯ä»¥è¿›è¡Œæµ‹è¯•ï¼‰ * å…¶ä»–çš„æ¯”å¦‚xml dtd txtç­‰æ–‡ä»¶ åˆ™æ˜¯ç›´æ¥ä¼šåœ¨binæ ¹ç›®å½•ä¸‹æ˜¾ç¤º * * * æ‰€ä»¥æˆ‘ä»¬çš„é—®é¢˜æ˜¯ï¼š * å¦‚ä½•åŠ¨æ€åŠ è½½é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯æˆ‘æŠŠæ–‡ä»¶æ”¾åœ¨TestDTDä¸‹ï¼Œå¦‚æœ * TestDTDåŒ…çš„è·¯å¾„ä¸€ç›´æ”¹å˜ï¼ˆä½“ç°åŠ¨æ€ï¼‰æˆ‘å¦‚ä½•èƒ½å¤ŸåŠ è½½å¾—ä¸Šï¼Ÿ * * åç€æ¥æ€è€ƒ * 1ï¼š æˆ‘éœ€è¦FileReaderæˆ–è€…FileInputStream ç­‰ * 2ï¼š ä¹Ÿè®¸æˆ‘è¿˜éœ€è¦ç”¨BufferedReader æˆ–è€…BufferedInputStreamæ¥ç¼“å†²åŠ è½½æ–‡ä»¶ * 3ï¼š æˆ‘éœ€è¦ä½¿ç”¨FileReaderè¿˜éœ€è¦ä¸€ä¸ªFileå¯¹è±¡ * 4ï¼š æˆ‘éœ€è¦Fileå¯¹è±¡ æˆ‘å°±åŒæ—¶éœ€è¦çŸ¥é“èµ„æºçš„å…¨è·¯å¾„ * 5ï¼š èµ„æºå…¨è·¯å¾„çš„é—®é¢˜ï¼Œå°±æ˜¯å¦‚ä½•åŠ è½½binæ ¹ç›®å½•çš„é—®é¢˜ï¼ ä¹Ÿå°±æ˜¯æˆ‘å·²ç»çŸ¥é“javaç¼–è¯‘å™¨æ˜¯å¦‚ä½•è§£æç›¸å¯¹è·¯å¾„ * 6ï¼š äºæ˜¯æˆ‘åªè¦æŒ‰ç…§ä¸Šè¿°æ€è·¯è®©ç±»åŠ è½½å™¨å»åŠ è½½æ–‡ä»¶å³å¯ï¼ * * æ³¨æ„ï¼š/ è¡¨ç¤ºçš„binæ ¹ç›®å½• æ‰€ä»¥ä½ éœ€è¦åœ¨åŒ…çš„èµ„æºæ–‡ä»¶çš„å¼€å¤´æ˜¯æ–œæ / */ public class ResourceAccess { public static void main(String[] args) throws Exception { System.out.println(ResourceAccess.class.getResource(\u0026quot;\u0026quot;)); URL fileUrl = ResourceAccess.class.getResource(\u0026quot;/TestDTD/person.dtd\u0026quot;); System.out.println(fileUrl.getFile()); // FileReader fr = new FileReader(new File(fileUrl)); FileReader fr = new FileReader(new File(fileUrl.getFile())); BufferedReader br = new BufferedReader(fr); String line = br.readLine(); System.out.println(\u0026quot;Read by BufferedReader(FileReader(File....)))\u0026quot;); System.out.println(line); System.out.println(\u0026quot;YEs it works!\u0026quot;); } }  è§†é¢‘äºŒçš„æµ‹è¯•æºæ–‡ä»¶ï¼š\npackage TestDTD; import java.net.URL; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´4æœˆ26æ—¥ä¸‹åˆ1:25:32 * @version TestDTDResourceAccessSecond V1.0 åŠŸèƒ½ï¼š æ­¥éª¤1ï¼š æ­¥éª¤2ï¼š æ³¨æ„ï¼š æŒæ¡ï¼š æ€è€ƒ1ï¼š æ€è€ƒ2ï¼š å›é¡¾ï¼š * ç¬¬ä¸€ç§åŠ è½½é¡¹ç›®æ ¹ç›®å½•èµ„æºçš„æ–¹å¼ ç±».class.getResource(FileName); */ public class ResourceAccessSecond { /** * @param args */ public static void main(String[] args) { // TODO Auto-generated method stub // é€šè¿‡ç±»åŠ è½½å™¨ classloaderåŠ è½½é¡¹ç›®èµ„æº // é¦–å…ˆclassloaderæŒ‡å®šçš„é¡¹ç›®çš„è·¯å¾„æ˜¯ä»€ä¹ˆï¼Ÿåšä¸€ä¸ªæµ‹è¯• /* * URL fileURL = * ResourceAccessSecond.class.getClassLoader().getResource(\u0026quot;\u0026quot;); // * é»˜è®¤æ˜¯binç›®å½• // fd System.out.println(fileURL); */ // åŠ äº†æ–œæ åè€Œä¸è¡Œï¼ï¼ï¼åŸä¾†classloaderç±»ä¸åŒäºclassçš„æ–¹æ³•ï¼ // 1 ä»–ä¸éœ€è¦ä½¿ç”¨æ–œæ  // 2 ä»–å¤šäº†ä¸€ä¸ªåŠŸèƒ½ getResources() URL fileURLPerson = ResourceAccessSecond.class.getClassLoader().getResource( \u0026quot;TestDTD/person.dtd\u0026quot;); System.out.println(fileURLPerson); } }  ç»è¿‡è¿™æ ·ä¸€å€’è…¾ï¼š å°±å¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹æ³•\nURL fileURLPerson = ResourceAccessSecond.class.getClassLoader().getResource( \u0026quot;TestDTD/worker.xml\u0026quot;); db.parse(new File(fileURLPerson.getFile()));  æµ‹è¯•ç»“æœï¼š å¼€å§‹æµ‹è¯•person.xml å¼€å§‹æµ‹è¯•worker.xml Warning: validation was turned on but an org.xml.sax.ErrorHandler was not set, which is probably not what is desired. Parser will use a default ErrorHandler to print the first 10 errors. Please call the \u0026lsquo;setErrorHandler\u0026rsquo; method to fix this. Error: URI=file:/C:/Users/708/git/Day2015-4-14/bin/TestDTD/worker.xml Line=7: å¿…é¡»å£°æ˜å…ƒç´ ç±»å‹ \u0026ldquo;job\u0026rdquo;ã€‚ Error: URI=file:/C:/Users/708/git/Day2015-4-14/bin/TestDTD/worker.xml Line=8: å…ƒç´ ç±»å‹ä¸º \u0026ldquo;person\u0026rdquo; çš„å†…å®¹å¿…é¡»åŒ¹é… \u0026ldquo;(name,sex,birthday)*\u0026rdquo; å¤åˆ¶ä»£ç  å¯ä»¥å‘ç°workeråŠ äº†jobå­—æ®µï¼Œçš„ç¡®æ˜¯æ£€æµ‹å‡ºæ¥äº†ã€‚\né—®é¢˜æ€»ç®—è§£å†³äº†ï¼š ä¸»è¦é—®é¢˜è¿˜æ˜¯FileInputStreamå¹¶æ²¡æœ‰è¯»å…¥æ–‡ä»¶çš„é—®é¢˜ã€‚\n","date":1431327525,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327525,"objectID":"3ad6c8e48e424dc743b9a430359aa5a4","permalink":"/blog/2015/05/11/ce-shi-wai-bu-dtdyue-shu-de-you-xiao-xing/","publishdate":"2015-05-11T14:58:45+08:00","relpermalink":"/blog/2015/05/11/ce-shi-wai-bu-dtdyue-shu-de-you-xiao-xing/","section":"archives","summary":"","tags":null,"title":"æµ‹è¯•å¤–éƒ¨DTDçº¦æŸçš„æœ‰æ•ˆæ€§","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"é€’å½’å’Œè¿­ä»£çš„åŒºåˆ«ï¼š é€’å½’éœ€è¦è°ƒç”¨è‡ªå·± è¿­ä»£ä¸æ–­ä¿®æ­£è‡ªå·±çš„è¿”å›å€¼\né€’å½’ä¼ªä»£ç ï¼š (define factoral (lambda (x) (if (\u0026lt;= x 1) //1.å¿…é¡»æœ‰ä¸€ä¸ªè¾“å‡ºå£ 1 //å‡ºå£å€¼ (* x (factoral (- x 1)))\næ‰€ä»¥é€’å½’å°±çœ‹ä¸¤ä¸ªéƒ¨åˆ†ï¼š1 è¾“å‡ºå£ï¼ˆé€’å½’ç»ˆæ­¢æ¡ä»¶ï¼‰ 2ï¼šå¾ªç¯è¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¸€å®šè¦å‡å‡ æˆ–è€…++ ç›´åˆ°èƒ½å¤Ÿè¾¾åˆ°é€’å½’ç»ˆæ­¢æ¡ä»¶\nè¿›ä¸€æ­¥é€šè¿‡javaæ¯”è¾ƒé€’å½’å’Œå°¾é€’å½’çš„æ‰§è¡Œè¿‡ç¨‹ï¼š å°¾é€’å½’ä»£ç ï¼š /** *\n* @param n è®¡ç®—5ï¼ åˆ™n =5 * @param product ä¸€èˆ¬æ˜¯è®¾ç½®ä¸º1 æ¯”å¦‚ è®¡ç®—5! factail1(5,1) * @return è¿”å›é€’å½’ç»“æœ */ public static long facttail1(int n, int product) { if(n\u0026lt;0) { return 0; } if(1 == n) { return product; } else { return facttail1(n-1, product*n); } }\næ™®é€šé€’å½’ä»£ç ï¼š /** * * @param n 5! åˆ™ n = 5 * @return è¿”å›é˜¶ä¹˜çš„è®¡ç®—ç»“æœ */ public static long facttail1(int n) { long a = 0;// ç”¨äºè°ƒè¯•ï¼Œå¯æ³¨é‡Š if(n==1) { a = 1;// ç”¨äºè°ƒè¯•ï¼Œå¯æ³¨é‡Š return 1; } a =n*facttail1(n-1); // ç”¨äºè°ƒè¯•ï¼Œå¯æ³¨é‡Š return n*facttail1(n-1); }\næ— é€’å½’çš„é˜¶ä¹˜ï¼š /** * * @param n è®¡ç®— 5ï¼ åˆ™n=5 * @return */ public static int fact2(int n) { if(n \u0026lt; 0) { throw new IllegalArgumentException(); } int result = 1; for(int i = 1; i \u0026lt;= n; i++) { result = result*i; } return result; }\nä¸»ç¨‹åºï¼š public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ long Apple =facttail(5,1); System.out.println(\u0026ldquo;Apple get by å°¾é€’å½’ï¼š\u0026rdquo;+Apple); long Banana =facttail1(5); System.out.println(\u0026ldquo;Banana get by é€’å½’ï¼š\u0026rdquo;+Banana); }\né€šè¿‡è°ƒè¯•å¯ä»¥çœ‹åˆ°ï¼Œå°¾é€’å½’çš„æ‰§è¡Œè¿‡ç¨‹ä¸º: çœ‹ä¸‹å›¾ å°¾é€’å½’çš„è°ƒè¯•è¿‡ç¨‹ è€Œæ™®é€šçš„é€’å½’æ–¹å¼ä¸ºï¼š çœ‹ä¸‹å›¾ [size=14.4444446563721px]æ™®é€šçš„é€’å½’è¿è¡Œæ–¹å¼\né€šè¿‡ä¸Šè¿°è°ƒè¯•å‘ç°ï¼Œå°¾é€’å½’çš„ç¡®æ˜¯æ¯”è¾ƒå¿«çš„ã€‚\nå¦å¤–ä¸çŸ¥é“javaä¸­çš„å¤§çš„æ•°å€¼èŒƒå›´è¯¥å¦‚ä½•è¡¨ç¤ºï¼Œæ¯”å¦‚ [size=14.4444446563721px]facttail(32,1); å°±è¿è¡Œä¸å‡ºæ¥ç»“æœï¼Ÿ longæ— æ³•è§£å†³é—®é¢˜ã€‚ä¼°è®¡javaä¸é€‚åˆè¿›è¡Œå¤§å‹çš„æ•°å€¼è¿ç®— åˆ©ç”¨BigIntegerç±»å‹çš„æ”¹é€ ç‰ˆæœ¬ï¼š\nimport java.math.BigInteger; /** * @author å¶æ˜­è‰¯ * */ public class TestRecursive { public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ BigInteger Apple =fact(100l,BigInteger.valueOf(1)); System.out.println(\u0026quot;Apple get by å°¾é€’å½’ï¼š\u0026quot;+Apple); BigInteger Banana =facttail(100l); System.out.println(\u0026quot;Banana get by é€’å½’ï¼š\u0026quot;+Banana); } // å°¾é€’å½’æ–¹å¼ /** * * @param n å¾…è®¡ç®—çš„é˜¶ä¹˜ æ¯”å¦‚5ï¼ åˆ™n=5 * @param product ä¸­é—´å˜é‡ * @return ä¸€ä¸ªBigIntegerå¯¹è±¡,åŒ…å«é˜¶ä¹˜çš„è®¡ç®—ç»“æœ */ public static BigInteger fact(long n, BigInteger product) { if(n\u0026lt;0) { return BigInteger.valueOf(0); } else if(n==1) return product; else return fact(n-1,product.multiply(BigInteger.valueOf(n))); } //é€’å½’æ–¹å¼ /** * * @param n å¾…è®¡ç®—çš„é˜¶ä¹˜ æ¯”å¦‚5ï¼ åˆ™n=5 * @return ä¸€ä¸ªBigIntegerå¯¹è±¡,åŒ…å«é˜¶ä¹˜çš„è®¡ç®—ç»“æœ */ public static BigInteger facttail(long n) { if(n==1) { return BigInteger.valueOf(1); }else { //a =n*facttail1(n-1); return facttail(n-1).multiply(BigInteger.valueOf(n)); } } }  è¿è¡Œç»“æœï¼š\nApple get by å°¾é€’å½’ï¼š93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000 Banana get by é€’å½’ï¼š93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000\nçœŸçš„æ˜¯å¯ä»¥è¦æœ‰å¤šå¤§å°±æœ‰å¤šå¤§ã€‚ java åœ¨eclipseä½¿ç”¨ctrl+o è°ƒç”¨multiplyå‘ç°ä»–éœ€è¦ä¼ é€’ä¸€ä¸ªBigIntegerå¯¹è±¡ã€‚ [c#ç‰ˆæœ¬ BigInteger:][https://msdn.microsoft.com/zh-cn/library/system.numerics.biginteger.aspx]\nè¡¥å……æ¨è€å¸ˆä¸²è®²çš„å†…å®¹ï¼Œè¡¥ä¸Šå‚æ•°è¯´æ˜ï¼Œå¹¶å½’ç»“ä¸ºæ–¹æ³•ï¼Œè¿›è¡Œç‹¬ç«‹æµ‹è¯•\nimport java.util.Arrays; /** * @author å¶æ˜­è‰¯ * */ public abstract class TestChuangjian2 { /** * @param args */ public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //ç¬¬ä¸€éƒ¨åˆ† é€’å½’ // case1è®²æ•…äº‹ tellStory(1); System.out.println(fact(5)); System.out.println(fact2(5)); System.out.println(fact3(5,1)); System.out.println(\u0026quot;fibnacii1 :\u0026quot;+fib1(5)); System.out.println(fib2(5)); System.out.println(fib3(5)); } //ç¬¬ä¸€éƒ¨åˆ† é€’å½’ //case 1*è®²æ•…äº‹ /** * * @param i è®²æ•…äº‹çš„æ¬¡æ•° */ public static void tellStory(int i) { System.out.println(\u0026quot;ä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰åº§åº™ï¼Œã€‚ã€‚ã€‚ã€‚\u0026quot;); if(i \u0026lt; 3) { tellStory(++i); } System.out.println(\u0026quot;å®Œäº†\u0026quot;); } //case2 é˜¶ä¹˜ /** * * @param n è®¡ç®— 5ï¼ åˆ™n=5 * @return è¿”å›é˜¶ä¹˜çš„è®¡ç®—ç»“æœ */ public static int fact(int n) { if(n \u0026lt; 0) { throw new IllegalArgumentException(); } if( 1 == n) { return 1; }else { return n*fact(n-1); } } // case3 æ— é€’å½’çš„é˜¶ä¹˜ /** * * @param n è®¡ç®— 5ï¼ åˆ™n=5 * @return */ public static int fact2(int n) { if(n \u0026lt; 0) { throw new IllegalArgumentException(); } int result = 1; for(int i = 1; i \u0026lt;= n; i++) { result = result*i; } return result; } // case 4 å°¾é€’å½’æ–¹å¼ /** * * @param n è®¡ç®— 5ï¼ åˆ™n=5 * @param result å­˜å‚¨é˜¶ä¹˜çš„è®¡ç®—ç»“æœï¼Œå¹¶ä½œä¸ºä¸­é—´å˜é‡ * @return è¿”å›é˜¶ä¹˜è®¡ç®—ç»“æœ */ public static int fact3(int n, int result) { if(n \u0026lt;= 0) { throw new IllegalArgumentException(\u0026quot;èƒ¡ç®—çš„é˜¶ä¹˜æ•°\u0026lt;=0\u0026quot;); } if(1== n) { return result; }else { return fact3(n-1,result*n); } } //case 5 Fibnacci1 /** * * @param n fibnacciçš„ä¸ªæ•°n * @return fibnacciæ•° */ public static int fib1(int n) { if(n \u0026lt; 0) { throw new IllegalArgumentException(\u0026quot;nä¸å¯ä»¥å°äº0\u0026quot;); } if(1 == n || 2 == n) { return 1; } else { return fib1(n-1)+fib1(n-2); } } /** * * @param n fibnacciçš„è®¡ç®—æ•° * @return fibanacciæ•° */ public static int fib2(int n) { int[] nums = new int[n+1]; nums[0] = 1; nums[1] = 1; System.out.println(Arrays.toString(nums)); for(int i = 2; i \u0026lt; n ; i++) { nums[i] = nums[i-1]+ nums[i-2]; System.out.println(Arrays.toString(nums)); } return nums[n-1]; } /** * * @param n fibnacciçš„è®¡ç®—æ•° * @return fibanacciæ•° */ public static int fib3(int n) { int apple = 1; int banana = 1; int temp = 1; for (int i = 2 ; i \u0026lt; n; i++) { temp = apple + banana; banana = apple; apple = temp; } return temp; } }  ä¸€ä¸ªåä¾‹ï¼šæ ˆæº¢å‡º stackOverFlowError ä¸€èˆ¬è¦æ±‚çš„StackSizeæ˜¯1MB\nåä¾‹ï¼š\n/** * * @param i è®²æ•…äº‹çš„æ¬¡æ•° */ public static void tellStory(int i) { System.out.println(\u0026quot;ä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰åº§åº™.....\u0026quot;); { tellStory(++i); // i+1 } System.out.println(\u0026quot;Time Over in \u0026quot;+i); }  è¿è¡Œå®Œä¹‹åä¼šæŠ¥é”™ï¼Œé—®é¢˜åŸå› æ˜¯æ ˆæº¢å‡ºï¼Œè¾¾åˆ°æ ˆçš„æœ€å¤§å®¹é‡é™åˆ¶ã€‚ ç»“è®ºï¼šåœ¨é€’å½’ä¸­å¿…é¡»è®¾ç½®ç»ˆæ­¢æ¡ä»¶ï¼Œè¿™æ ·æ‰ä¸è‡³äºå¼•èµ·æ ˆæº¢å‡ºã€‚\n","date":1431327525,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327525,"objectID":"6f6c3e002027cef240c251cced6e01da","permalink":"/blog/2015/05/11/di-gui-de-jian-dan-chan-shu/","publishdate":"2015-05-11T14:58:45+08:00","relpermalink":"/blog/2015/05/11/di-gui-de-jian-dan-chan-shu/","section":"archives","summary":"","tags":null,"title":"é€’å½’çš„ç®€å•é˜è¿°","type":"archives"},{"authors":null,"categories":["jQuery"],"content":"1: jqueryçš„åŠ è½½é¡ºåº\nIEä¸­ä¼šæœ‰ä¸åŒç‚¹ ç»“è®ºï¼šjqueryä¸­ä½¿ç”¨$(function(){})å³å¯ï¼å…¶ä»–çŸ¥é“å³å¯\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot;\u0026gt; \u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; //javascript //ç¬¬å››ä¸ªåŠ è½½ //åœ¨IEä¸­å±…ç„¶æ— æ³•åŠ è½½ï¼ï¼ï¼ //éœ€è¦ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½å®Œæ¯•æ‰ä¼šè§¦å‘ onload=function() { //consoleçš„ä½œç”¨å°±æ˜¯åœ¨æµè§ˆå™¨çš„æ§åˆ¶å° æ‰“å°å‡ºç»“æœ console.log('javascript\\'s onload'); alert('javascript window.onload js ok 4'); }; //window object change into jQuery object //ç¬¬äº”ä¸ªåŠ è½½ $(window).load(function(){ console.log('window onload'); alert('$(window).load No 5'); }); //ç¬¬äºŒä¸ªåŠ è½½ $(function() { console.log('dom ready='+$('#span').html()); alert('$(function(){}niming hanshu! 2'); }); //Dom object change into Jquery Object // å¾ˆæ˜¯å¥‡æ€ª ç¬¬ä¸€ä¸ªåŠ è½½ //å¯ä»¥å¤šæ¬¡è§¦å‘ $(document).ready(function(){ console.log('document ready') alert('$(document).ready Ok 1'); }); // THe most common and most convininet //jQuery(function(){}) //ç¬¬ä¸‰ä¸ªåŠ è½½ è·Ÿç¬¬äºŒä¸ªä¸€æ ·çš„ æŒ‰ç…§å‰åé¡ºåºè¿›è¡Œå¸ƒç½® jQuery(function() { console.log('dom ready='+$('#span').html()); alert(' jQuery(function(){}niming hanshu 3!') }); function init() { console.log('body init'); } \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body onload=\u0026quot;init()\u0026quot;\u0026gt; \u0026lt;Span id=\u0026quot;span\u0026quot;\u0026gt; Rupeng!\u0026lt;/Span\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  2ï¼šMap å’Œeachå‡½æ•°çš„ä½¿ç”¨ mapï¼šç”¨äºä¿®æ”¹ eachï¼šç”¨äºéå†\nmap: value index each: key value\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; var arr=[1,2,4,5,6]; $.map(arr,function() { alert('element'+arguments[1]+'=='+arguments[0]); }); //namely ,we can write below $.map(arr,function(ele,index) { alert('element'+index+'=='+ele); }); //return a new array ==2*old_array var newArray=$.map(arr,function(ele,index) { return ele*2; }) //$.map is similar to lisp's (map ...) // so we can get the two properties of array with $.map function //print new array alert(newArray); var newArray2=$.map(arr,function(ele,index){ return index\u0026gt;2?ele*2:ele; }) alert(newArray2); \u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; var dic={\u0026quot;name\u0026quot;:\u0026quot;xiaoming\u0026quot;,\u0026quot;age\u0026quot;:3,\u0026quot;gender\u0026quot;:\u0026quot;1\u0026quot;}; //each ä¸»è¦ç”¨äºéå† mapä¸»è¦ç”¨äºä¿®æ”¹ $.each(dic,function(key,value) { alert(key+'=='+value); }) \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;/Html\u0026gt;  3:jqueryå’ŒjsDomçš„äº’è½¬\n1ï¼šjsDom -\u0026gt; jquery æŠŠjsDomå¯¹è±¡æ”¾åœ¨$()æ‹¬å·ä¸­å³å¯ 2ï¼š jquery -\u0026gt; jsDom ä¸¤ç§æ–¹æ³• a: $().get(0) b: $()[0]\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; Test the transformation between jQuery and Dom \u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; \u0026gt; $(function(){ /* document.getElementById('btn').onclick=function() { var dvObj=document.getElementById('dv'); //æ–¹æ³•1 Dom //dvObj.style.backgroundColor='black'; //æ–¹æ³•2 jQuery æ–¹æ³• //Dom object change into jQuery // var dvObjJquery=$(dvObj); // dvObjJquery.css('backgroundColor','yellow'); // æŠŠjqueryå¯¹è±¡è½¬å›åˆ°Domå¯¹è±¡ var dvObjJquery=$(dvObj); //1 è½¬å›å»domçš„æ–¹æ³•1 // var dvObjAgain=dvObjJquery[0]; //2 è½¬å›å»domçš„æ–¹æ³•2 var dvObjAgain=dvObjJquery.get(0); dvObjAgain.style.backgroundColor='black'; } */ //1 çœç•¥äº† ç­‰å· //2 çœç•¥äº† Domé•¿é•¿çš„å‡½æ•°åè°ƒç”¨ //2 å–è€Œä»£ä¹‹çš„æ˜¯ç®€æ˜“çš„jQueryè¯­æ³• åˆ©ç”¨é“¾å¼æ³•åˆ™ $('#btn').click(function() { $('#dv').css('backgroundColor','purple'); }); }) \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btn\u0026quot; value=\u0026quot;changeColor\u0026quot;/\u0026gt; \u0026lt;Div id=\u0026quot;dv\u0026quot; style=\u0026quot;width:300px; height:200px; background-color:green\u0026quot;\u0026gt; hello \u0026lt;/Div\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  4å¤šé‡é€‰æ‹©å™¨ æ³¨æ„ï¼šä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ å¦åˆ™æ²¡æœ‰ååº” è¿™æ˜¯éœ€è¦æ³¨æ„çš„ text() ç±»ä¼¼äºjsDomçš„innerText() html()ç±»ä¼¼äº innerHtml()\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; // alert('hello') $(function() { $('#btn').click(function(){ // alert('hello'); // $('#cls').text('This is a layer'); // class selector //$('div#cls').css('backgroundColor','yellow'); // label with Id selector // $('div #cls').css('backgroundColor','yellow'); //ä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ å¦åˆ™æ²¡æœ‰ååº” è¿™æ˜¯éœ€è¦æ³¨æ„çš„ // åŒæ ·çš„æ ‡ç­¾åŠ ä¸Šleiä¹Ÿä¸æ˜¯ä¸èƒ½åŠ ä¸Šç©ºæ ¼ $('div#cls').text('InnerTextæ–¹å¼æ·»åŠ '); $('div#cls').html('\u0026lt;H1\u0026gt;InnerHTMLæ–¹å¼æ·»åŠ \u0026lt;/H1\u0026gt;'); //æ ‡ç­¾é€‰æ‹©å™¨çš„éšå¼ç¼–ç¨‹ éšå¼å¾ªç¯ï¼ è¿™æ˜¯ä¸€ä¸ªjQueryçš„ä¸€ä¸ªå¥½å¤„ implicit cycle $('p').text('Set all the p the value'); }); }); \u0026lt;/script\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; #cls { width:300px; height:200px; background-color:green; } \u0026lt;/style\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;input type=\u0026quot;button\u0026quot; id=\u0026quot;btn\u0026quot; value=\u0026quot;change\u0026quot;/\u0026gt; \u0026lt;div id=\u0026quot;cls\u0026quot;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;p class=\u0026quot;name\u0026quot;\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;p class=\u0026quot;name\u0026quot;\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;p class=\u0026quot;name\u0026quot;\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;p class=\u0026quot;name\u0026quot;\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;p class=\u0026quot;name\u0026quot;\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;p class=\u0026quot;name\u0026quot;\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;p class=\u0026quot;name\u0026quot;\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;p class=\u0026quot;name\u0026quot;\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  5ï¼š é€‰æ‹©å™¨ è¿‡æ»¤å™¨çš„ä½¿ç”¨ :first first() :last last() :eq() :lt() :gt()\næ³¨æ„ï¼šå¯ä¸æ•¢å†æŠŠsiblings()æ¼æ‰äº†ï¼\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt; test the start mark\u0026lt;/title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ //æ³¨æ„æ˜¯tr è¡Œ $('#tb tr:first').css('backgroundColor','green').css('fontSize','50px'); $('#tb tr:last').css('color','black'); // 0-3ä¹‹é—´ 0 1 2 3 $('#tb tr:gt(0):lt(3)').css('fontSize','25px'); $('#tb tr:odd').css('backgroundColor','yellow'); $('#tb tr').click(function(){ //å¯ä¸æ•¢å†çŠ¯è¿™ç§é”™è¯¯äº†ï¼ ï¼ siblings() åŠ ä¸Šæ‹¬å· $(this).css('backgroundColor','red').siblings().css('backgroundColor','gray'); }) }) \u0026lt;/script\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; .cls { background-color:black; } td { border:1px solid red; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;table id=\u0026quot;tb\u0026quot; style=\u0026quot;width:2\\450px;height:20px;text-align:center; font-size:14px ;border:1px solid black;cursor:pointer\u0026quot;\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;Name\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Mark\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;Chairman Mao\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;89\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;Chairman Hu\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;79\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;Chairman Deng\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;99\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;Chairman Xi\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;98\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;Chairman jiang\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;76\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  6ï¼šç›¸å¯¹å®¹å™¨ å’Œç»å¯¹å®¹å™¨\n$(\u0026lsquo;p div\u0026rsquo;) ç»å¯¹å®¹å™¨ pçš„åä»£ $(\u0026lsquo;div\u0026rsquo;,\u0026lsquo;p\u0026rsquo;) ç›¸å¯¹å®¹å™¨ æ‰€æœ‰åœ¨pæ ‡ç­¾ä¸­çš„ div å‚è€ƒç‚¹ä¸ä¸€æ ·\næ³¨æ„ //$(\u0026lsquo;this\u0026rsquo;).siblings.css(\u0026lsquo;backgroundColor\u0026rsquo;,\u0026ldquo;);//å¯ä¸æ•¢å†çŠ¯è¿™ä¸ªé”™è¯¯ //thisä¸éœ€è¦åŠ ä¸Šå•å¼•å· //ä¸ºä»€ä¹ˆæ— æ³•ç›´æ¥è¡Œtæ·»åŠ ä¸Š é¢œè‰²ï¼Ÿ å› ä¸ºçœŸæ­£åœ¨è¡¨é¢æ˜¾ç¤ºçš„æ˜¯td //$(this).siblings().css(\u0026lsquo;backgroundColor\u0026rsquo;,\u0026ldquo;);\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt; test the start mark\u0026lt;/title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ //ç»å¯¹å®šä½ // $('div p')è¡¨ç¤ºdivä¸‹çš„på…ƒç´  //ç›¸å¯¹å®šä½ //ç›¸å¯¹divå…ƒç´ çš„pæ ‡ç­¾ //$('p','div') è¡¨ç¤ºåœ¨divå±‚ä¸­çš„på…ƒç´  $('#tb tr').click(function(){ //$('this').siblings.css('backgroundColor','');//å¯ä¸æ•¢å†çŠ¯è¿™ä¸ªé”™è¯¯ //thisä¸éœ€è¦åŠ ä¸Šå•å¼•å· //ä¸ºä»€ä¹ˆæ— æ³•ç›´æ¥è¡Œtæ·»åŠ ä¸Š é¢œè‰²ï¼Ÿ å› ä¸ºçœŸæ­£åœ¨è¡¨é¢æ˜¾ç¤ºçš„æ˜¯td //$(this).siblings().css('backgroundColor',''); $('td',$(this).siblings()).css('backgroundColor',''); $('td:even',$(this)).css('backgroundColor','red'); $('td:odd',$(this)).css('backgroundColor','yellow'); }); //å­¦ä¹ äº†.hover(,) å‡½æ•°çš„ä½¿ç”¨æ–¹å¼ //æ¥çš„æ—¶å€™æ˜¯ç¬¬ä¸€ä¸ªå‚æ•° //å»çš„æ—¶å€™æ˜¯ç¬¬äºŒä¸ªå‚æ•° $('tr').hover(function(){ $(this).find('td').addClass('hover'); },function(){ $(this).find('td').removeClass('hover'); }); //låˆ—çš„è¿½è¸ª $('td').hover(function(){ var $index=$(this).index(); $(this).addClass('hover'); $('td:nth-child('+($index+1)+')').addClass('hover'); },function(){ $('#tb tr').children().removeClass('hover'); }); alert('Total rows:'+$('#tb tr').length); }) \u0026lt;/script\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; .hover { color:#fff; background-color:gray; } .cls { background-color:black; } td { border:1px solid red; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;table id=\u0026quot;tb\u0026quot; style=\u0026quot;width:2\\450px;height:20px;text-align:center; font-size:14px ;border:1px solid black;cursor:pointer\u0026quot;\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;First\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Second\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Third\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Fourth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Fifth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Sixth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Seventh\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;eighth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;nineth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;tenth\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;First\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Second\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Third\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Fourth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Fifth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Sixth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Seventh\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;eighth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;nineth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;tenth\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;First\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Second\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Third\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Fourth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Fifth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Sixth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Seventh\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;eighth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;nineth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;tenth\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;First\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Second\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Third\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Fourth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Fifth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Sixth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;Seventh\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;eighth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;nineth\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;tenth\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  ä¸€ä¸ªæœ‰è¶£çš„åˆ†é¡µ\nå¥‡å·§æ·«æŠ€\n\u0026lt;!DOCTYPE html PUBLIC \u0026quot;-//W3C//DTD XHTML 1.0 Transitional//EN\u0026quot; \u0026quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\u0026quot;\u0026gt; \u0026lt;html xmlns=\u0026quot;http://www.w3.org/1999/xhtml\u0026quot;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;\u0026lt;/title\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; .page { margin:5px; } .hover { background-color:#00f; color:#fff; cursor:hand; } \u0026lt;/style\u0026gt; \u0026lt;script src=\u0026quot;jquery-2.1.3.js\u0026quot; type=\u0026quot;text/javascript\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(document).ready(function () { //å®é™…çš„æ•ˆæœæ˜¯åœ¨å…ˆå‰çš„è¡¨æ ¼ä¸­è¿›è¡Œéšè—å’Œæ˜¾ç¤ºçš„å°ä¼ä¿©ï¼ å¥‡å·§æ·«æŠ€ //get the rows var $rows = $('table tbody tr').length; // get the show lines é¡µé¢è¡Œæ•° var $pagesize = 2; //æ€»é¡µæ•° var $pagecount = Math.ceil($rows / $pagesize); //åˆ›å»ºä¸€ä¸ªå±‚ var $div = $('\u0026lt;div id=\u0026quot;pages\u0026quot;\u0026gt;\u0026lt;/div\u0026gt;'); //åœ¨å±‚ä¸­åŠ å…¥page for (var i = 0; i \u0026lt; $pagecount; i++) { //æŠŠåˆ›å»ºçš„ä¸œè¥¿åŠ å…¥åˆ°å±‚ä¸­ $('\u0026lt;span class=\u0026quot;page\u0026quot;\u0026gt;' + (i + 1) + '\u0026lt;/span\u0026gt;').appendTo($div); } $div.appendTo('table'); //appendd the hover //è®¾ç½®é¡µé¢çš„æ•°å­—çš„æ‚¬æµ®æ•ˆæœ $('.page').hover(function () { $(this).addClass('hover'); }, function () { $(this).removeClass('hover'); }); //å¢åŠ äº†é¡µé¢è¡Œçš„ç‚¹å‡»éšè—çš„äº‹ä»¶ $('table tbody tr').click(function(){ $(this).hide(); }) //éšè—æ‰€æœ‰è¡Œ $('table tbody tr').hide(); //è·å¾—æ‰€æœ‰çš„trè¡Œå¯¹è±¡ var tr = $('table tbody tr'); for (var i = 0; i \u0026lt; $pagecount - 1; i++) { $(tr[i]).show(); } //è®¾ç½®é¡µé¢çš„ç‚¹å‡»äº‹ä»¶ æ•ˆæœ $('span').click(function () { $('table tbody tr').hide(); for (i = ($(this).text() - 1) * $pagesize; i \u0026lt;= $(this).text() * $pagesize - 1; i++) { $(tr[i]).show(); } }) }); \u0026lt;/script\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;table border=\u0026quot;1\u0026quot; width=\u0026quot;200px\u0026quot;\u0026gt; \u0026lt;thead\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;th\u0026gt;ID\u0026lt;/th\u0026gt;\u0026lt;th\u0026gt;Name\u0026lt;/th\u0026gt;\u0026lt;th\u0026gt;Mark\u0026lt;/th\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/thead\u0026gt; \u0026lt;tbody\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;100\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;Steven\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;100\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;101\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;Mike\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;70\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;102\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;Robot\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;80\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;103\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;Perry\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;100\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;104\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;Lion\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;90\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;105\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;Andy\u0026lt;/td\u0026gt;\u0026lt;td\u0026gt;85\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;/tbody\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  ä¸€ä¸ªå°ç»ƒä¹ ï¼š ä¸œè¥¿éƒ¨ç¯®çƒé˜Ÿ\næ³¨æ„ï¼š //å¯ä¸æ•¢å†çŠ¯è¿™ä¸ªé”™è¯¯ 1 é€—å·å†™æˆäº†å¥è¯ 2ï¼š siblingsåç›´æ¥è¡—ä¸Šcssçš„å‚æ•° //$(this).css(\u0026lsquo;backgroundColor\u0026rsquo;.\u0026lsquo;red\u0026rsquo;).siblings()\u0026lsquo;backgroundColor\u0026rsquo;,\u0026ldquo;);\n //ç”±æ­¤é”™è¯¯å¯å¾—åˆ°ä¸€ä¸ªç»“è®º // jQueryåˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ä¸€ä¸ªæ˜¯è·å¾—Domå¯¹è±¡ ç´§æ¥ç€æ˜¯è®¾ç½®CSSæ ·å¼ï¼ // ä¹Ÿå°±æ˜¯jså…¶å®å°±æ˜¯æŠŠè¿™ä¸¤ä¸ªéƒ¨åˆ†æŒ‰ç…§é“¾æ¡ä¸€æ ·ä¸€å¯¹ä¸€å¯¹çš„ä¸²èµ·æ¥äº† //ä¸€ä¸ªDomä¸€ä¸ªCss ç„¶åå†ä¸€ä¸ªDom ä¸€ä¸ªCSS  \u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Meta charset=\u0026quot;utf-8\u0026quot;\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ $('ol li').mouseover(function(){ //å¯ä¸æ•¢å†çŠ¯è¿™ä¸ªé”™è¯¯ 1 é€—å·å†™æˆäº†å¥è¯ 2ï¼š siblingsåç›´æ¥è¡—ä¸Šcssçš„å‚æ•° //$(this).css('backgroundColor'.'red').siblings()'backgroundColor',''); //ç”±æ­¤é”™è¯¯å¯å¾—åˆ°ä¸€ä¸ªç»“è®º // jQueryåˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ä¸€ä¸ªæ˜¯è·å¾—Domå¯¹è±¡ ç´§æ¥ç€æ˜¯è®¾ç½®CSSæ ·å¼ï¼ // ä¹Ÿå°±æ˜¯jså…¶å®å°±æ˜¯æŠŠè¿™ä¸¤ä¸ªéƒ¨åˆ†æŒ‰ç…§é“¾æ¡ä¸€æ ·ä¸€å¯¹ä¸€å¯¹çš„ä¸²èµ·æ¥äº† //ä¸€ä¸ªDomä¸€ä¸ªCss ç„¶åå†ä¸€ä¸ªDom ä¸€ä¸ªCSS $(this).css('backgroundColor','red').siblings().css('backgroundColor',''); }); $('ol li').click(function() { //ç¬¬ä¸€ç§å†™æ³• // $(this).prevAll().css('backgroundColor','blue'); // $(this).nextAll().css('backgroundColor','yellow'); //ç¬¬äºŒç§å†™æ³• //endçš„ä½œç”¨å°±æ˜¯ä»å‰é¢æ‰€æœ‰ åˆè·³å›åˆ°$(this)çš„ä½œç”¨ï¼ï¼å…³é”®ç‚¹æ˜¯end() è¿™æ ·æ‰å¯ä»¥å¸®åŠ©æˆ‘ä»¬å°±ä½ è¡Œé“¾å¼ç¼–ç¨‹ $(this).prevAll().css('backgroundColor','blue').end().nextAll().css('backgroundColor','yellow'); }) }); \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Ol id=\u0026quot;east\u0026quot;\u0026gt; \u0026lt;Li\u0026gt;äºšç‰¹å…°å¤§ è€é¹°\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;èŠåŠ å“¥ å…¬ç‰›\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;æ³¢å£«é¡¿ å‡¯å°”ç‰¹äºº\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;å¤æ´›ç‰¹ é»„èœ‚\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;å…‹åˆ©å¤«å…° éª‘å£«\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;å¸ƒé²å…‹æ— ç¯®ç½‘\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;è¿ˆé˜¿å¯† çƒ­ç«\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;åº•ç‰¹å¾‹ æ´»å¡\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;çº½çº¦ å°¼å…‹æ–¯\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;å¥¥å…°å¤š é­”æœ¯\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;å°ç¬¬å®‰çº³ æ­¥è¡Œè€…\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;è´¹åŸ 76äºº\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;åç››é¡¿ å¥‡æ‰\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;å¯†å°”æ²ƒåŸº é›„é¹¿\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;å¤šä¼¦å¤š çŒ›é¾™\u0026lt;/Li\u0026gt; \u0026lt;/Ol\u0026gt; \u0026lt;Ol id=\u0026quot;west\u0026quot;\u0026gt; \u0026lt;Li\u0026gt;é‡‘å· å‹‡å£«\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;ä¸¹ä½› æ˜é‡‘\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;è¾¾æ‹‰æ–¯ å°ç‰›\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;æ´›æ‰çŸ¶ å¿«èˆ¹\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;æ˜å°¼è‹è¾¾ æ£®æ—ç‹¼\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;ä¼‘æ–¯é¡¿ ç«ç®­\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;æ´›æ‰çŸ¶ æ¹–äºº\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;å¥¥å…‹å…°é™ˆé©¬æˆ é›·éœ†\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;å­Ÿè²æ–¯ ç°ç†Š\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;è²å°¼å…‹æ–¯ å¤ªé˜³\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;æ³¢ç‰¹å…° å¼€æ‹“è€…\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;æ–°å¥¥å°”è‰¯ é¹ˆé¹•\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;è¨å…‹æ‹‰é—¨æ‰˜ å›½ç‹\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;çŠ¹ä»– çˆµå£«\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;åœ£å®‰ä¸œå°¼å¥¥ é©¬åˆº\u0026lt;/Li\u0026gt; \u0026lt;/Ol\u0026gt; \u0026lt;Ul id=\u0026quot;other\u0026quot;\u0026gt; \u0026lt;Li\u0026gt;æ­¥è¡Œè€…\u0026lt;/Li\u0026gt; \u0026lt;Li\u0026gt;å±±çŒ«\u0026lt;/Li\u0026gt; \u0026lt;/Ul\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  7ï¼šè¿‡æ»¤å™¨çš„ç»ƒä¹ \næ³¨æ„ï¼š evenå’Œoddé€‰æ‹©å™¨ indexä»0å¼€å§‹ã€‚\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt; test the start mark\u0026lt;/title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ $('#btnFirst').click(function(){ $('div:first').css('backgroundColor','green').siblings().css('backgroundColor','blue'); }); $('#btnFirst2').click(function(){ $('div').first().css('backgroundColor','red').siblings().css('backgroundColor','blue'); }); $('#Last').click(function(){ $('div:last').css('backgroundColor','purple').siblings().css('backgroundColor','blue'); }); $('#Last2').click(function(){ $('div').last().css('backgroundColor','red').siblings().css('backgroundColor','blue'); }); $('#eq2').click(function(){ $('div:eq(2)').css('backgroundColor','black').siblings().css('backgroundColor','blue'); }); $('#lt2').click(function(){ //èŒƒå›´æ€§å†…å®¹ ä¸èƒ½ç”¨siblings //$('div:lt(2)').css('backgroundColor','black').siblings().css('backgroundColor','blue'); $('div:lt(2)').css('backgroundColor','black'); }); $('#gt2').click(function(){ // $('div:gt(2)').css('backgroundColor','red').siblings().css('backgroundColor','blue'); $('div:gt(2)').css('backgroundColor','red'); }); //ä¸‹æ ‡ä»0å¼€å§‹ index æ‰€ä»¥è¡¨é¢ä¸Ševenæ˜¯ç¬¬ä¸€ä¸ªå…ƒç´  $('#even2').click(function(){ // $('div:even').css('backgroundColor','red').siblings().css('backgroundColor','blue'); $('div:even').css('backgroundColor','red'); }); $('#odd2').click(function(){ //$('div:odd').css('backgroundColor','red').siblings().css('backgroundColor','blue'); $('div:odd').css('backgroundColor','red'); }); // å½“ç„¶ä¹Ÿæ˜¯å¯ä»¥ç»„åˆèµ·æ¥ $('div:gt(3):lt(2)') // $('div:not(.cls)') $('#olivenot').click(function(){ //å¿…é¡»åŠ ä¸Š. å¥è¯æ‰æ˜¯æœ‰æ•ˆçš„ $('div:not(.cls)').css('backgroundColor','yellow'); }); $('#header1').click(function(){ $('h1,h2,h3,h4,h5,h6').css('backgroundColor','gray'); }); $('#header2').click(function(){ $(':header').css('backgroundColor','yellow'); }); }); \u0026lt;/script\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; div { width:150px; height:30px; margin-bottom:10px; background-color:blue; } td { border:1px solid red; } .cls { background-color:olive; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btnFirst\u0026quot; value=\u0026quot;divColorToGreenFirst\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btnFirst2\u0026quot; value=\u0026quot;divColorToGreenFirst2\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;Last\u0026quot; value=\u0026quot;divColorToGreenLast\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;Last2\u0026quot; value=\u0026quot;divColorToGreenLast2\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;gt2\u0026quot; value=\u0026quot;divColorToGreenGreater2\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;eq2\u0026quot; value=\u0026quot;divColorToGreenEqual2\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;lt2\u0026quot; value=\u0026quot;divColorToGreenLess2\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;even2\u0026quot; value=\u0026quot;divColorToGreenEven\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;odd2\u0026quot; value=\u0026quot;divColorToGreenOdd\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;olivenot\u0026quot; value=\u0026quot;not olive\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;header1\u0026quot; value=\u0026quot;header1\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;header2\u0026quot; value=\u0026quot;header2\u0026quot;/\u0026gt; \u0026lt;Div\u0026gt;\u0026lt;/Div\u0026gt; \u0026lt;Div\u0026gt;\u0026lt;/Div\u0026gt; \u0026lt;Div class=\u0026quot;cls\u0026quot;\u0026gt;\u0026lt;/Div\u0026gt; \u0026lt;Div\u0026gt;\u0026lt;/Div\u0026gt; \u0026lt;Div\u0026gt;\u0026lt;/Div\u0026gt; \u0026lt;H1\u0026gt;Header 1\u0026lt;/H1\u0026gt; \u0026lt;H2\u0026gt;Header 2\u0026lt;/H2\u0026gt; \u0026lt;H3\u0026gt;Header 3\u0026lt;/H3\u0026gt; \u0026lt;H4\u0026gt;Header 4\u0026lt;/H4\u0026gt; \u0026lt;H5\u0026gt;Header 5\u0026lt;/H5\u0026gt; \u0026lt;H6\u0026gt;Header 6\u0026lt;/H6\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  ä¸€ä¸ªæœ‰è¶£çš„slideup and down å°æ¡ˆä¾‹ï¼š\n\u0026lt;!DOCTYPE html PUBLIC \u0026quot;-//W3C//DTD XHTML 1.0 Transitional//EN\u0026quot; \u0026quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\u0026quot;\u0026gt; \u0026lt;html xmlns=\u0026quot;http://www.w3.org/1999/xhtml\u0026quot;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;\u0026lt;/title\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; \u0026lt;/style\u0026gt; \u0026lt;script src=\u0026quot;jquery-2.1.3.js\u0026quot; type=\u0026quot;text/javascript\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(document).ready(function () { $('#message1').css({ 'backgroundColor': '#f00', 'text-align': 'center','width':'200px' }).hide(); $(\u0026quot;#message2\u0026quot;).css({ 'backgroundColor': 'gray', 'text-align': 'center','width': '200px' }).click(function () { $(this).slideUp(); $(\u0026quot;#message1\u0026quot;).slideDown(); }); }); \u0026lt;/script\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p id=\u0026quot;message1\u0026quot;\u0026gt;Welome to My Blog\u0026lt;/p\u0026gt; \u0026lt;p id=\u0026quot;message2\u0026quot;\u0026gt;Welcome to My Facebook\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  8ï¼š è¯„åˆ†å’ŒaddClass\n.end()æ–­é“¾çš„ä½¿ç”¨ï¼Œä¹‹æ‰€ä»¥è¦æ–­é“¾ä¹Ÿæ˜¯å› ä¸ºè¿”å›æ¥çš„æ˜¯é›†åˆï¼Œè€Œä¸æ˜¯åŸå…ˆçš„å¯¹è±¡ æ³¨æ„ï¼š //æµ‹è¯•å¼€å…³ç¯ //éšå«ç€è§„å¾‹æ˜¯ï¼šjqueryè·å¾—çš„éƒ½æ˜¯é›†åˆçš„å…ƒç´  //åšåˆ¤æ–­ä¸€å®šå¾—æ˜¯ $(function(){})é‡Œé¢ä¸­\näº”è§’æ˜Ÿæ˜¯ç›´æ¥è¾“å…¥ï¼Œè€Œä¸æ˜¯é€šè¿‡å›¾ç‰‡\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt; test the start mark\u0026lt;/title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; // æµ‹è¯•è¯„åˆ† $(function(){ $('#tb td').mouseover(function(){ //$(this).prevall().css('backgroundcolor','red'); $(this).text('â—‹').prevall().text('â—‹').end().nextall().text('â˜†'); }); $('#tb td').mouseout(function() { $('#tb td').text('â˜†'); }); }); \u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; //æµ‹è¯•å¼€å…³ç¯ //éšå«ç€è§„å¾‹æ˜¯ï¼šjqueryè·å¾—çš„éƒ½æ˜¯é›†åˆçš„å…ƒç´  //åšåˆ¤æ–­ä¸€å®šå¾—æ˜¯ $(function(){})é‡Œé¢ä¸­ $(function(){ if($('#btn').length\u0026gt;0) { alert('å­˜åœ¨id=#tbçš„æ ‡ç­¾'); }else { alert('ä¸å­˜åœ¨id=#tbçš„æ ‡ç­¾'); } $('#btnopen').click(function(){ $('body').addclass('cls'); }); $('#btnclose').click(function(){ $('body').removeclass('cls'); }); $('#btncloseopen').click(function(){ if($('body').hasclass('cls')) { $('body').removeclass('cls'); }else { $('body').addclass('cls'); } }); $('#btncloseopen2').click(function(){ $('body').toggleclass('cls'); }); }); \u0026lt;/script\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; .cls { background-color:black; } td { border:1px solid red; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;table id=\u0026quot;tb\u0026quot; style=\u0026quot;width:250px;height:20px;text-align:center; font-size:20px ;border:1px solid black;cursor:pointer\u0026quot;\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;â˜†\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;â˜†\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;â˜†\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;â˜†\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;â˜†\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;input type='button' name=\u0026quot;hello\u0026quot; value=\u0026quot;hello\u0026quot; id=\u0026quot;btn\u0026quot;/\u0026gt; \u0026lt;input type='button' name=\u0026quot;open\u0026quot; value=\u0026quot;turn on the light\u0026quot; id=\u0026quot;btnopen\u0026quot;/\u0026gt; \u0026lt;input type='button' name=\u0026quot;close\u0026quot; value=\u0026quot;turn off the light\u0026quot; id=\u0026quot;btnclose\u0026quot;/\u0026gt; \u0026lt;input type='button' name=\u0026quot;openclose\u0026quot; value=\u0026quot;turn off|on the light\u0026quot; id=\u0026quot;btncloseopen\u0026quot;/\u0026gt; \u0026lt;input type='button' name=\u0026quot;openclose2\u0026quot; value=\u0026quot;turn off|on the light2\u0026quot; id=\u0026quot;btncloseopen2\u0026quot;/\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  ä¸¤ä¸ªç»¼åˆå®éªŒï¼š\ncase1: æ•°ç»„ ç»ƒä¹ join() append() sort() splice() hover()æ‚¬åœäº‹ä»¶ concat()\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; test the start mark\u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;!--1 touppercase--\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; .hover { background-color:red; font-size:24px; } \u0026lt;/style\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ //æ ¸å¿ƒï¼štouppercase // Good! Let the array become beautiful var namePostion=$('#names'); var Member=['basket','foot','tennis','running','pingpong','net']; // map() è¿­ä»£æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´  å¹¶ä¸ºæ¯ä¸ªå…ƒç´ åˆ†åˆ«è°ƒç”¨ä¸€æ¬¡å›è°ƒå‡½æ•° Member =$.map(Member,function(value,index){ return(index+1+'.'+value.toUpperCase()); }); $.each(Member,function(index,value){ namePostion.append($('\u0026lt;Li class=\u0026quot;sport\u0026quot;\u0026gt;'+value+'\u0026lt;/Li\u0026gt;')); }); //ä½¿ç”¨äº†æ‚¬åœäº‹ä»¶ $('.sport').hover(function(){ // alert('ok'); $(this).addClass('hover'); },function(){ $(this).removeClass('hover'); // alert('byel'); }); }) \u0026lt;/script\u0026gt; \u0026lt;!--2 grep--\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; #All { background-color:green; } #Part { background-color:gray; } \u0026lt;/style\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ var Member=['basket','foot','tennis','running','pingpong','net']; //ä¸€å®šè¦æ³¨æ„åœ¨på’Œ#Allä¸è¦åŠ å…¥ç©ºæ ¼ // joiné€šè¿‡\u0026lt;br\u0026gt;æ¥åˆ’åˆ†æ•°ç»„ä¸­çš„å…ƒç´  $('p#All').append(Member.join('\u0026lt;br/\u0026gt;')); //grep() åˆ†ææ•°ç»„çš„æ‰€æœ‰å…ƒç´ ï¼ŒæŠŠä¸æƒ³è¦çš„å…ƒç´ è¿‡æ»¤æ‰ã€‚ Member = $.grep(Member,function(value){ return value.length \u0026gt; 6; }); $('p#Part').append(Member.join('\u0026lt;br/\u0026gt;')); }); \u0026lt;/script\u0026gt; \u0026lt;!--3 join sort--\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; .All { background-color:red; } .Part { background-color:gray; } .AllNumber { background-color:blue; } .PartNumber { background-color:lime; } \u0026lt;/style\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ var Member=['basket','foot','tennis','running','pingpong','net']; //é‡å¤çš„ä¸€ä¸ªç»ƒä¹  $('p.All').append(Member.join('\u0026lt;Br\u0026gt;')); $('p.Part').append(Member.sort().join('\u0026lt;/Br\u0026gt;')); var Number1 = [12,43,2,34,6,34]; $('p.AllNumber').append(Number1.join('\u0026lt;Br/\u0026gt;')); // a b ä¸¤ä¸ªå€¼ è¿›è¡Œæ¯”è¾ƒ å¤§çš„é‚£ä¸ªæ”¾åœ¨åæ’ Number1 = Number1.sort(function(a,b){ return a-b; }); $('p.partNumber').append(Number1.join('\u0026lt;Br/\u0026gt;')); }); \u0026lt;/script\u0026gt; \u0026lt;!--4 splice--\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; .Part1 { background-color:lime; } .Remain { background-color:red; } \u0026lt;/style\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ var Member=['basket','foot','tennis','running','pingpong','net']; //ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç´¢å¼•å¼€å§‹ ç¬¬äºŒä¸ªå‚æ•°ä¸ºåˆ é™¤çš„ä¸ªæ•° spliceä½œç”¨è¿”å›å‰ä¸¤ä¸ªæˆå‘˜åˆ°Filteræ•°ç»„ var Filter=Member.splice(0,2); $('p.Part1').append(Filter.join('\u0026lt;Br/\u0026gt;')); $('p.Remain').append(Member.join('\u0026lt;Br/\u0026gt;')); }) \u0026lt;/script\u0026gt; \u0026lt;!--5 concat --\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; .First { background-color:lime; } .Last { background-color:gray; } .Whole { background-color:red; } \u0026lt;/style\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ var first=['basket','foot','tennis']; var last=['running','pingpong','net']; $('p.First').append(first.join('\u0026lt;Br/\u0026gt;')); $('p.Last').append(last.join('\u0026lt;Br/\u0026gt;')); var whole=first.concat(last); $('p.Whole').append(whole.join('\u0026lt;Br/\u0026gt;')); }); \u0026lt;/script\u0026gt; \u0026lt;!--6 Json sort--\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; .All1 { background-color:green; } \u0026lt;/style\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ var students=[{Name:'Qianqian',Role:'Administrator',Age:'45'}, {Name:'Lilei',Role:'Programmer',Age:'15'}, {Name:'Dongyuliang',Role:'Seller',Age:'25'}, {Name:'LiFeng',Role:'manager',Age:'25'}, {Name:'zhaoli',Role:'Architector',Age:'35'} ]; //æœ‰ç‚¹ç±»ä¼¼ Javaä¸­çš„treesetçš„ä½œç”¨ éœ€è¦è®¾ç½®ä¸€ä¸ªæ¯”è¾ƒå™¨ students=students.sort(function(studnetA,studentB){ if(studnetA.name\u0026gt;studentB.name){ return 1; }else if(studnetA.name \u0026lt; studentB.name) { return -1; }else { return 0; } }); $.each(students,function(index,value){ $('p.All1').append('\u0026lt;Tr\u0026gt;\u0026lt;Td\u0026gt;\u0026gt;'+value.Name+'\u0026lt;/Td\u0026gt;\u0026lt;Td\u0026gt;'+value.Role+'\u0026lt;/Td\u0026gt;\u0026lt;Td\u0026gt;'+value.Age+'\u0026lt;/Td\u0026gt;\u0026lt;/Tr\u0026gt;'); }); }); \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;p id=\u0026quot;names\u0026quot;\u0026gt;\u0026lt;/P\u0026gt; \u0026lt;hr/\u0026gt; \u0026lt;H3\u0026gt; Member Name\u0026lt;/H3\u0026gt; \u0026lt;P id=\u0026quot;All\u0026quot;\u0026gt;\u0026lt;/P\u0026gt; \u0026lt;H3\u0026gt; Part Name\u0026lt;/H3\u0026gt; \u0026lt;P id=\u0026quot;Part\u0026quot;\u0026gt;\u0026lt;/P\u0026gt; \u0026lt;Hr/\u0026gt; \u0026lt;H3\u0026gt;Not sort string array\u0026lt;/H3\u0026gt; \u0026lt;P class=\u0026quot;All\u0026quot;\u0026gt;\u0026lt;/P\u0026gt; \u0026lt;H3\u0026gt; sort string array\u0026lt;/H3\u0026gt; \u0026lt;P class=\u0026quot;Part\u0026quot;\u0026gt;\u0026lt;/P\u0026gt; \u0026lt;H3\u0026gt;Not sort number\u0026lt;/H3\u0026gt; \u0026lt;P class=\u0026quot;AllNumber\u0026quot;\u0026gt;\u0026lt;/P\u0026gt; \u0026lt;H3\u0026gt; sort number\u0026lt;/H3\u0026gt; \u0026lt;P class=\u0026quot;PartNumber\u0026quot;\u0026gt;\u0026lt;/P\u0026gt; \u0026lt;Hr/\u0026gt; \u0026lt;H3\u0026gt;get the Filer array\u0026lt;/H3\u0026gt; \u0026lt;P class=\u0026quot;Part1\u0026quot;\u0026gt;\u0026lt;/P\u0026gt; \u0026lt;H3\u0026gt;get the remain array\u0026lt;/H3\u0026gt; \u0026lt;P class=\u0026quot;Remain\u0026quot;\u0026gt;\u0026lt;/P\u0026gt; \u0026lt;Hr/\u0026gt; \u0026lt;H3\u0026gt;Get the First part\u0026lt;/H3\u0026gt; \u0026lt;P class=\u0026quot;First\u0026quot;\u0026gt;\u0026lt;/P\u0026gt; \u0026lt;H3\u0026gt;Get the Last part\u0026lt;/H3\u0026gt; \u0026lt;P class=\u0026quot;Last\u0026quot;\u0026gt;\u0026lt;/P\u0026gt; \u0026lt;H3\u0026gt;Get the Whole part\u0026lt;/H3\u0026gt; \u0026lt;P class=\u0026quot;Whole\u0026quot;\u0026gt;\u0026lt;/P\u0026gt; \u0026lt;Hr\u0026gt; \u0026lt;H3\u0026gt;Member Info\u0026lt;/H3\u0026gt; \u0026lt;P class=\u0026quot;All1\u0026quot;\u0026gt;\u0026lt;/P\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  case2: äº‹ä»¶è§¦å‘\nbind() unbind() trigger() å¤šç±»çš„è®¾ç½® class=\u0026rdquo; \u0026ldquo;\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; test the common jQuery event \u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;!--1 trigger bind unbind--\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; .Red { color:red; } .Green { color:green; } .unbind { color:lime } .buttons { width:150px; height:20px; margin:5px; border:2px solid; float:left; font-weight:bold; background-color:gray; } .Down { color:green; } .Up { color:red; } .Over { color:lime; } .Mouses { width:150px; height:20px; margin:5px; border:2px solid; float:left; font-weight:bold; background-color:gray; } \u0026lt;/style\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; //å¯ä¸æ•¢å†çŠ¯è¿™ä¸ªé”™è¯¯ //$('.button').bind('click',function(){ $(function(){ $('.buttons').bind('click',function(){ alert('You have clicked '+$(this).text()); //innerText() // trigger without click !!! automated; //å¯ä¸æ•¢å†çŠ¯è¿™ä¸ªé”™è¯¯ //$(.Green).trigger('click'); // $('.Green').trigger('click'); // unbindf test $('.Unbind').bind('click',function(){ alert('You have clicked the'+$(this).text()+'\u0026lt;Br/\u0026gt;After that the button will unbind the click event!'); $('.Unbind').unbind('click'); }) }); //mouse event $('.Mouses').bind('mousedown',function(){ alert('your mouse have been pressed down'+$(this).text()); }); $('.Mouses').bind('mouseup',function(){ alert('your mouse have been pressed up'+$(this).text()); }); $('.Mouses').bind('mouseover',function(){ alert('your mouse have been pressed over'+$(this).text()); }); //focus test $('#btn').focus(function(){ alert('ol'); $('#btn').html('\u0026lt;Font color=\u0026quot;red\u0026quot;\u0026gt;\u0026lt;Strong\u0026gt;Focus\u0026lt;/Strong\u0026gt;\u0026lt;/Font\u0026gt;'); }); $('#btn').blur(function(){ alert('fuck'); $('#btn').html('\u0026lt;Font color=\u0026quot;gray\u0026quot;\u0026gt;\u0026lt;Italic\u0026gt;Focus\u0026lt;/Italic\u0026gt;\u0026lt;/Font\u0026gt;'); }); }); \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;H3\u0026gt;Test bind and trigger\u0026lt;/H3\u0026gt; \u0026lt;!--Multiple classes !!!ã€€Take Note--\u0026gt; \u0026lt;Span class=\u0026quot;Red buttons\u0026quot;\u0026gt;Red\u0026lt;/Span\u0026gt; \u0026lt;Span class=\u0026quot;Green buttons\u0026quot;\u0026gt;Green\u0026lt;/Span\u0026gt; \u0026lt;Span class=\u0026quot;Unbind buttons\u0026quot;\u0026gt;Unbind it\u0026lt;/Span\u0026gt; \u0026lt;Br/\u0026gt; \u0026lt;hr/\u0026gt; \u0026lt;Br/\u0026gt; \u0026lt;H3\u0026gt;Test bind and trigger\u0026lt;/H3\u0026gt; \u0026lt;!--Multiple classes !!!ã€€Take Note--\u0026gt; \u0026lt;Span class=\u0026quot;Mouses Down\u0026quot;\u0026gt;Mouse Down\u0026lt;/Span\u0026gt; \u0026lt;Span class=\u0026quot;Mouses Up\u0026quot;\u0026gt;Mouse Up\u0026lt;/Span\u0026gt; \u0026lt;Span class=\u0026quot;Mouses Over\u0026quot;\u0026gt;Mouse over\u0026lt;/Span\u0026gt; \u0026lt;Br/\u0026gt; \u0026lt;hr/\u0026gt; \u0026lt;Br/\u0026gt; \u0026lt;H3\u0026gt;Test focus and blur\u0026lt;/H3\u0026gt; \u0026lt;!-- Input cannot html --\u0026gt; \u0026lt;Input type=\u0026quot;text\u0026quot; name=\u0026quot;mouse\u0026quot; id=\u0026quot;btn\u0026quot; values=\u0026quot;focus\u0026quot;/\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt; ","date":1431327524,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327524,"objectID":"e266285b7dd11367f63093ee0290356f","permalink":"/blog/2015/05/11/jquery1-9april4th/","publishdate":"2015-05-11T14:58:44+08:00","relpermalink":"/blog/2015/05/11/jquery1-9april4th/","section":"archives","summary":"","tags":null,"title":"JQuery1-9April4th","type":"archives"},{"authors":null,"categories":["jQuery"],"content":"http://www.rupeng.com/forum/thread-45422-1-1.html jquery1-9 1ï¼šç§»é™¤å…ƒç´  $(\u0026lsquo;div\u0026rsquo;).empty() æ¸…ç©ºå±‚ä¸­çš„å…ƒç´  $(\u0026lsquo;div\u0026rsquo;).remove(\u0026lsquo;.cls\u0026rsquo;) æ¸…ç©ºå±‚ä¸­è¿ç”¨clsæ ·å¼çš„å…ƒç´  $(\u0026lsquo;div\u0026rsquo;).remove() è‡ªæˆ‘åˆ é™¤ 2: select ä¸‹æ‹‰æ¡†çš„ç»ƒä¹  å•é€‰ç§»åˆ°å¦ä¸€ä¸ªæ¡† å…¨é€‰ç§»åˆ°å¦ä¸€ä¸ªæ¡† option:selectedè¡¨ç¤ºå·²é€‰ä¸­çš„å…ƒç´  :selectedè¡¨ç¤ºæ‰€æœ‰é€‰ä¸­çš„ä¸‹åˆ—æ¡†å…ƒç´ ï¼Œå‰ææ˜¯selectè®¾ç½®äº† multiple=\u0026ldquo;multiple\u0026rdquo;\næ¡ˆä¾‹1ï¼šï¼ˆå•é€‰å’Œå…¨é€‰ï¼‰\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt;Test select and option \u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot; \u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ $('#btnLeft').click(function(){ $('#sel2 option:selected').appendTo('#sel1'); //$('#sel1 option:selected').appendTo($('#sel2')); }); $('#btnRight').click(function(){ $('#sel1 option:selected').appendTo('#sel2'); }); $('#btnAllRight').click(function(){ $('#sel1 option').appendTo('#sel2'); }); $('#btnAllLeft').click(function(){ $('#sel2 option').appendTo('#sel1'); }); }) \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Select id=\u0026quot;sel1\u0026quot; multiple=\u0026quot;multiple\u0026quot; style=\u0026quot;float:left; width:400px;height:100px;\u0026quot;\u0026gt; \u0026lt;!--Multipel can show all the contains in the selector--\u0026gt; \u0026lt;Option \u0026gt; delete\u0026lt;/Option\u0026gt; \u0026lt;Option \u0026gt; create\u0026lt;/Option\u0026gt; \u0026lt;Option \u0026gt; check\u0026lt;/Option\u0026gt; \u0026lt;Option \u0026gt; update\u0026lt;/Option\u0026gt; \u0026lt;Option \u0026gt; select\u0026lt;/Option\u0026gt; \u0026lt;/Select\u0026gt; \u0026lt;!--In the div, the width:50px then inside the div is 50px width,so it change the line! And because the float:left ,so it will try to align along the left--\u0026gt; \u0026lt;Div style=\u0026quot;float:left;width:50px\u0026quot;\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btnLeft\u0026quot; value=\u0026quot;\u0026lt;\u0026quot; style=\u0026quot;width:50px\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btnRight\u0026quot; value=\u0026quot;\u0026gt;\u0026quot; \u0026quot;width:50px\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btnAllLeft\u0026quot; value=\u0026quot;\u0026lt;\u0026lt;\u0026quot; \u0026quot;width:50px\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btnAllRight\u0026quot; value=\u0026quot;\u0026gt;\u0026gt;\u0026quot; \u0026quot;width:50px\u0026quot;/\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;Button type=\u0026quot;button\u0026quot; id=\u0026quot;btnLeft1\u0026quot; value=\u0026quot;To the left\u0026quot;\u0026gt;\u0026quot;To the left\u0026quot;\u0026lt;/Button\u0026gt; \u0026lt;Button type=\u0026quot;button\u0026quot; id=\u0026quot;btnRight1\u0026quot; value=\u0026quot;To the right\u0026quot;/\u0026gt;\u0026quot;To the right\u0026quot;\u0026lt;/Button\u0026gt; \u0026lt;Button type=\u0026quot;button\u0026quot; id=\u0026quot;btnAllLeft1\u0026quot; value=\u0026quot;All To the left\u0026quot;/\u0026gt;\u0026quot;All To the left\u0026quot;\u0026lt;/Button\u0026gt; \u0026lt;Button type=\u0026quot;button\u0026quot; id=\u0026quot;btnAllRight1\u0026quot; value=\u0026quot;All To the left\u0026quot;/\u0026gt;\u0026quot;All To the left\u0026quot;\u0026lt;/Button\u0026gt; \u0026lt;!--Because of the float:left,so selector will focuse to take occupy of the left position--\u0026gt; \u0026lt;Select id=\u0026quot;sel2\u0026quot; multiple=\u0026quot;multiple\u0026quot; style=\u0026quot;float:left; width:400px;height:100px;\u0026quot;\u0026gt; \u0026lt;!--\u0026lt;Select id=\u0026quot;sel2\u0026quot; multiple=\u0026quot;multiple\u0026quot;\u0026gt;--\u0026gt; \u0026lt;/Select\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  æ¡ˆä¾‹2ï¼šè®¡ç®—å™¨\nä½¿ç”¨switch \u0026hellip;case åˆ¤æ–­é€‰ä¸­çš„è®¡ç®—å™¨æ“ä½œç¬¦ æ³¨æ„ï¼šè¾“å…¥å‚æ•°çš„æœ‰æ•ˆæ€§çš„åˆ¤æ–­ã€‚\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt;Test Calculator with the basic operator\u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot; \u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ $('#equal').click(function(){ var leftvalue=$('#one').val(); var rightvalue=$('#two').val(); if(leftvalue=='') { console.log('The empty of the one!;'); return; } if(rightvalue=='') { console.log('The empty of the two!;'); return; } var result=0.0; //alert($('#operator :selected').val()); //alert(typeof($('#operator :selected').val())); switch($('#operator :selected').val()) { case '+': result=parseFloat(leftvalue)+parseFloat(rightvalue); break; case '-': result=parseFloat(leftvalue)-parseFloat(rightvalue); break; case '*': result=parseFloat(leftvalue)*parseFloat(rightvalue); break; case '/': result=parseFloat(leftvalue)/parseFloat(rightvalue); break; default: break; } $('#result').val(result); }) }) \u0026lt;/script\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Input type=\u0026quot;text\u0026quot; id=\u0026quot;one\u0026quot;/\u0026gt; \u0026lt;Select id=\u0026quot;operator\u0026quot; style=\u0026quot; width:40px;height:30px;\u0026quot;\u0026gt; \u0026lt;Option\u0026gt;+\u0026lt;/Option\u0026gt; \u0026lt;Option\u0026gt;-\u0026lt;/Option\u0026gt; \u0026lt;Option\u0026gt;*\u0026lt;/Option\u0026gt; \u0026lt;Option\u0026gt;/\u0026lt;/Option\u0026gt; \u0026lt;/Select\u0026gt; \u0026lt;Input type=\u0026quot;text\u0026quot; id=\u0026quot;two\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;equal\u0026quot;value=\u0026quot;=\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;text\u0026quot; id=\u0026quot;result\u0026quot;/\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;   4: checkboxçš„ç»ƒä¹   :disabled å±æ€§çš„ç»ƒä¹ \næ¡ˆä¾‹1ï¼š è½¯ä»¶å®‰è£…æ—¶éœ€è¦æé†’ç”¨æˆ·é˜…è¯»åè®®ï¼Œä¸€èˆ¬æ˜¯5sï¼Œç„¶åæ‰å¯ä»¥ç‚¹å‡»åŒæ„ã€‚\næ³¨æ„ï¼šè®¡æ—¶å™¨setIntervalå’Œæ¸…é™¤è®¡æ—¶å™¨clearInterval() . å›é¡¾ï¼š setTimeout å’Œ clearTimeout\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt;Test Time machine \u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot; \u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ var i =5; var timeMeter=setInterval(function(){ if(i\u0026gt;0) { i--; $('#span1').text('Please read the agreement carefully('+i+'s)'); }else { //forget clear The time meter clearInterval(timeMeter); $('#span1').text('Agree'); $('#chk').attr('disabled',false); } },1000); }) \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Input type=\u0026quot;checkbox\u0026quot; id=\u0026quot;chk\u0026quot; disabled=\u0026quot;disabled\u0026quot;\u0026gt;\u0026lt;Span id=\u0026quot;span1\u0026quot;\u0026gt;Please read the agreement carefully(5s)\u0026lt;/Span\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt; $('#span1').text('Agree'); $('#chk').attr('disabled',false); } },1000); }) \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Input type=\u0026quot;checkbox\u0026quot; id=\u0026quot;chk\u0026quot; disabled=\u0026quot;disabled\u0026quot;\u0026gt;\u0026lt;Span id=\u0026quot;span1\u0026quot;\u0026gt;Please read the agreement carefully(5s)\u0026lt;/Span\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  5:äº‹ä»¶å†’æ³¡\nå–æ¶ˆäº‹ä»¶å†’æ³¡çš„æ–¹æ³• arguments[0].stopPropagation æˆ–è€… function(e){e.stopPropagation();}\né™„åŠ ä¸Šå›¾ç‰‡çš„è„±ç¦»æ–‡æ¡£æµæ“ä½œå’Œä¸€æ¬¡äº‹ä»¶\nä½†æ˜¯oneåœ¨jquery-1.8.3.min.js èƒ½å¤Ÿè¯•éªŒé€šè¿‡ ï¼Œåœ¨2.1.3.jsæ–°ç‰ˆæœ¬åˆ™ä¸è¡Œã€‚\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt;Test select and option \u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot; \u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ $('#btn').click({'name':'xiaomin'},function(e){ alert(e.data.name) ; }); $('#dv').click(function(){ alert($(this).attr('id')); }); $('#ps').click(function(){ alert($(this).attr('id')); }); $('#sp1').click(function(){ alert($(this).attr('id')); //å¦‚æœåŠ ä¸Šè¿™å¥è¯ï¼Œäº‹ä»¶å°±ä¸ä¼šå†’æ³¡äº† //å¯ä¸æ•¢éœ²äº†ä¸€ä¸ªs //$(argument[0]).stopPropagation();//å–æ¶ˆåº•å±‚çš„äº‹ä»¶å†’æ³¡ arguments[0].stopPropagation();//å–æ¶ˆåº•å±‚çš„äº‹ä»¶å†’æ³¡ //æ–¹æ³•2 function(e){e.stoppropagation();} }); //Test Image $(document).mouseover(function(e){ //1 è„±ç¦»æ–‡æ¡£æµ //2 ç»™å®šåæ ‡ $('img').css('position','absolute').css({\u0026quot;left\u0026quot;:e.pageX,\u0026quot;top\u0026quot;:e.pageY}); }); //ä¸€æ¬¡äº‹ä»¶ $('#btnOnce').one(function(){ alert('çƒŸèŠ±æ€»æ˜¯ç¿çƒ‚ï¼Œä½†æ˜¯åªå¼€ä¸€æ¬¡'); }); }); \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;getData\u0026quot; id=\u0026quot;btn\u0026quot;/\u0026gt; \u0026lt;Div id=\u0026quot;dv\u0026quot; style=\u0026quot;width:300px; height:200px; border:1px solid red;\u0026quot;\u0026gt; \u0026lt;P id=\u0026quot;ps\u0026quot; \u0026gt; \u0026lt;Span id=\u0026quot;sp1\u0026quot; style=\u0026quot;width:200px; height:100px; border:1px solid yellow\u0026quot;\u0026gt; This is zone of span\u0026lt;/Span\u0026gt; \u0026lt;/P\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btnOnce\u0026quot; value=\u0026quot;onceEvent\u0026quot;/\u0026gt; \u0026lt;Img src=\u0026quot;2.png\u0026quot;/\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  7: replaceAll and replaceWith\nrepalceAll æŠŠå·¦è¾¹çš„æ ‡ç­¾æ›¿æ¢åŒ…å«å³è¾¹æ–‡æœ¬çš„æ ‡ç­¾\nreplaceWith æŠŠå³è¾¹çš„æ ‡ç­¾æ›¿æ¢å·¦è¾¹æ–‡æœ¬çš„æ ‡ç­¾\n $('#btn').click({'name':'xiaomin'},function(e){ alert(e.data.name) ;  7.1 æ ‡ç­¾åŒ…è£¹\n1 wrap æ¯ä¸ªpæ ‡ç­¾å„è‡ªè¢«ä¸€ä¸ª fontåŒ…è£¹ 2 wrapAll æ‰€æœ‰pæ ‡ç­¾è¢«ä¸€ä¸ªfont åŒ…è£¹ 3 wrapInner æ¯ä¸ªPæ ‡ç­¾å†…éƒ¨éƒ½æœ‰æ„ä¸ªfontæ ‡ç­¾\n7.2 ç™¾åº¦æœç´¢æ¡†\nfocus blur\nä»¥åŠremoveClassçš„æ“ä½œ\n7.3 RadioButton çš„é€‰æ‹© :checked\né€šè¿‡attr(\u0026lsquo;checked\u0026rsquo;,true);è¿›è¡Œè®¾ç½®\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt;\u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;jquery-2.1.3.js\u0026quot;\u0026gt; \u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ //with all label $('#btn1').click(function(){ $('br').replaceWith('\u0026lt;Hr/\u0026gt;') }); //replaceAll with not all labels $('#btn2').click(function(){ $('\u0026lt;br/\u0026gt;').replaceAll('hr'); }); $('#btn3').click(function(){ //1wrap æ¯ä¸ªpæ ‡ç­¾å„è‡ªè¢«ä¸€ä¸ª fontåŒ…è£¹ //2wrapAll æ‰€æœ‰pæ ‡ç­¾è¢«ä¸€ä¸ªfont åŒ…è£¹ //3wrapInner æ¯ä¸ªPæ ‡ç­¾å†…éƒ¨éƒ½æœ‰æ„ä¸ªfontæ ‡ç­¾ //$('div p').wrap('\u0026lt;Font color=\u0026quot;red\u0026quot; size=\u0026quot;8\u0026quot; \u0026gt;\u0026lt;/Font\u0026gt;'); //$('div p').wrapAll('\u0026lt;Font color=\u0026quot;red\u0026quot; size=\u0026quot;8\u0026quot; \u0026gt;\u0026lt;/Font\u0026gt;'); $('div p').wrapInner('\u0026lt;Font color=\u0026quot;red\u0026quot; size=\u0026quot;8\u0026quot; \u0026gt;\u0026lt;/Font\u0026gt;'); }); //ä½ å¯ä»¥é€šè¿‡æµè§ˆå™¨çš„æ¢æµ‹åŠŸèƒ½ï¼Œè§‚å¯Ÿæ¯ä¸€ä¸ªè¿‡ç¨‹htmlä»£ç ç»“æ„çš„ //å˜åŒ– //ä¸‹é¢ä»£ç é€‚åº”æ‰€æœ‰çš„htmlæ–‡ä»¶ï¼ï¼ï¼ //åªæœ‰bodyé‡Œé¢æœ‰ä¸œè¥¿éƒ½æ˜¯å¯ä»¥çš„ // å›é¡¾ï¼š èšç„¦æ§ä»¶è”ç³» å…¶å®è¿˜åŒ…æ‹¬focus and blurçš„è”ç³» /// å¦å¤–è¿™äº›çŸ¥è¯†ç‚¹ç»Ÿå½’ä¸ºjQueryçš„æ—¶é—´ç¼–ç¨‹ /* $('body *').mouseover(function(){ $(this).addClass('cls'); }).mouseout(function(){ $(this).removeClass('cls'); }); */ //focus and blur //å›é¡¾äº† äº‹ä»¶ç¼–ç¨‹ åŒ…æ‹¬click mouseover mouseout hoveræ‚¬åœäº‹ä»¶ç­‰ // ç™¾åº¦æœç´¢æ¡†çš„jqueryå®ç° //var contents=$(this).val(); $('#baidu001').focus(function(){ if($(this).val() =='Please input some value') { // ä½œç”¨æ˜¯å¦‚æœå½“å‰çš„å€¼ä¸ºè¿™ä¸ªï¼Œé‚£æˆ‘å°±è¯æ˜éœ€è¦æˆ‘è¾“å…¥ä»€ä¹ˆ //äºæ˜¯æˆ‘å°±removeClass ç„¶åå¼€å§‹å†™ä¸Šå€¼ $(this).val('').removeClass('baidu'); } }).blur(function(){ if($(this).val().length==0) { //å¦‚æœç”¨æˆ·æ²¡æœ‰å¡«å†™ä»»ä½•ä¸œè¥¿ï¼Œå°±ä¸»åŠ¨ç»™ä»–é™„ä¸Šå€¼ $(this).val('Please input some value').addClass('baidu'); } }); $('#btnRadio').click(function(){ // $(':radio[value=1]').attr('checked',true); // $('input[value=1]').attr('checked',true); // $('input[type=radio][value=1]').attr('checked',true); //$(':radio').val(['1','2','6']); å¿…é¡»ä¸€ä¸€å¯¹åº”æ‰ä¼šè¢«é€‰ä¸­ï¼Ÿ //$(':radio').val(['1','2','3']); $(':radio').val(['4','2','3']);// å“ªä¸ªä¸å¯¹åº”ä¸Š åˆ™ä¸é€‰æ‹©å“ªä¸ª //ä¹Ÿå°±æ˜¯radiobuttonæ˜¯æŒ‰ç…§alueå€¼æ¥è¿›è¡ŒåŒºåˆ†çš„ }) }); \u0026lt;/script\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; .cls { background-color:red; } .baidu { background-color:gray; } div { width:300px; height:200px; background-color:green; } \u0026lt;/style\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btn1\u0026quot; value=\u0026quot;with\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btn2\u0026quot; value=\u0026quot;All\u0026quot;/\u0026gt; \u0026lt;P\u0026gt;Good morning 1\u0026lt;/P\u0026gt; \u0026lt;Br/\u0026gt; \u0026lt;P\u0026gt;Good morning 2\u0026lt;/P\u0026gt; \u0026lt;Br/\u0026gt; \u0026lt;P\u0026gt;Good morning 3\u0026lt;/P\u0026gt; \u0026lt;Br/\u0026gt; \u0026lt;P\u0026gt;Good morning 4\u0026lt;/P\u0026gt; \u0026lt;Br/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btn3\u0026quot; value=\u0026quot;packet with one font\u0026quot;/\u0026gt; \u0026lt;Div id=\u0026quot;dv\u0026quot;\u0026gt; \u0026lt;P\u0026gt; Good Afternoon\u0026lt;/P\u0026gt; \u0026lt;P\u0026gt; Good Afternoon\u0026lt;/P\u0026gt; \u0026lt;P\u0026gt; Good Afternoon\u0026lt;/P\u0026gt; \u0026lt;P\u0026gt; Good Afternoon\u0026lt;/P\u0026gt; \u0026lt;P\u0026gt; Good Afternoon\u0026lt;/P\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;Input type=\u0026quot;text\u0026quot; id=\u0026quot;baidu001\u0026quot; class=\u0026quot;baidu\u0026quot; value=\u0026quot;Please input some value\u0026quot;\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btnRadio\u0026quot; value=\u0026quot;selectTheRadio\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;radio\u0026quot; name=\u0026quot;1\u0026quot; value=\u0026quot;1\u0026quot;\u0026gt; Man \u0026lt;Input type=\u0026quot;radio\u0026quot; name=\u0026quot;2\u0026quot; value=\u0026quot;2\u0026quot;\u0026gt; Woman \u0026lt;Input type=\u0026quot;radio\u0026quot; name=\u0026quot;3\u0026quot; value=\u0026quot;3\u0026quot;\u0026gt; Secret \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  8:checkboxäº‹ä»¶bind\nå±æ€§é€‰æ‹©å™¨\nattr å’Œpropçš„åŒºåˆ«å’Œè”ç³»ï¼š\nattr: function( elem, name, value, pass ) { var ret, hooks, notxml, nType = elem.nodeType; // don't get/set attributes on text, comment and attribute nodes if ( !elem || nType === 3 || nType === 8 || nType === 2 ) { return; } if ( pass \u0026amp;\u0026amp; jQuery.isFunction( jQuery.fn[ name ] ) ) { return jQuery( elem )[ name ]( value ); } // Fallback to prop when attributes are not supported if ( typeof elem.getAttribute === \u0026quot;undefined\u0026quot; ) { return jQuery.prop( elem, name, value ); } notxml = nType !== 1 || !jQuery.isXMLDoc( elem ); // All attributes are lowercase // Grab necessary hook if one is defined if ( notxml ) { name = name.toLowerCase(); hooks = jQuery.attrHooks[ name ] || ( rboolean.test( name ) ? boolHook : nodeHook ); } if ( value !== undefined ) { if ( value === null ) { jQuery.removeAttr( elem, name ); return; } else if ( hooks \u0026amp;\u0026amp; \u0026quot;set\u0026quot; in hooks \u0026amp;\u0026amp; notxml \u0026amp;\u0026amp; (ret = hooks.set( elem, value, name )) !== undefined ) { return ret; } else { elem.setAttribute( name, value + \u0026quot;\u0026quot; ); return value; } } else if ( hooks \u0026amp;\u0026amp; \u0026quot;get\u0026quot; in hooks \u0026amp;\u0026amp; notxml \u0026amp;\u0026amp; (ret = hooks.get( elem, name )) !== null ) { return ret; } else { ret = elem.getAttribute( name ); // Non-existent attributes return null, we normalize to undefined return ret === null ? undefined : ret; } } prop:  javascript prop: function( elem, name, value ) { var ret, hooks, notxml, nType = elem.nodeType; // don\u0026rsquo;t get/set properties on text, comment and attribute nodes if ( !elem || nType === 3 || nType === 8 || nType === 2 ) { return; } notxml = nType !== 1 || !jQuery.isXMLDoc( elem ); if ( notxml ) { // Fix name and attach hooks name = jQuery.propFix[ name ] || name; hooks = jQuery.propHooks[ name ]; } if ( value !== undefined ) { if ( hooks \u0026amp;\u0026amp; \u0026ldquo;set\u0026rdquo; in hooks \u0026amp;\u0026amp; (ret = hooks.set( elem, value, name )) !== undefined ) { return ret; } else { return ( elem[ name ] = value ); } } else { if ( hooks \u0026amp;\u0026amp; \u0026ldquo;get\u0026rdquo; in hooks \u0026amp;\u0026amp; (ret = hooks.get( elem, name )) !== null ) { return ret; } else { return elem[ name ]; } } }\n attræ–¹æ³•é‡Œé¢ï¼Œæœ€å…³é”®çš„ä¸¤è¡Œä»£ç ï¼Œelem.setAttribute( name, value + â€œâ€ )å’Œret = elem.getAttribute( name )ï¼Œå¾ˆæ˜æ˜¾çš„çœ‹å‡ºæ¥ï¼Œä½¿ç”¨çš„DOMçš„API setAttributeå’ŒgetAttributeæ–¹æ³•æ“ä½œçš„å±æ€§å…ƒç´ èŠ‚ç‚¹ã€‚è€Œpropæ–¹æ³•é‡Œé¢ï¼Œæœ€å…³é”®çš„ä¸¤è¡Œä»£ç ï¼Œreturn ( elem[ name ] = value )å’Œreturn elem[ name ]ï¼Œä½ å¯ä»¥ç†è§£æˆè¿™æ ·document.getElementById(el)[name] = valueï¼Œè¿™æ˜¯è½¬åŒ–æˆJSå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚(Perfectçš„ç¡®è¿™æ ·ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ä¸€ç§æ˜¯[] å¦å¤–ä¸€ç§æ˜¯get(0)) åˆ†åˆ«åšäº†æ–‡æœ¬æ¡†å’Œcheckboxçš„æµ‹è¯•ï¼š 1ï¼šåœ¨é‡åˆ°è¦è·å–æˆ–è®¾ç½®checked,selected,readonlyå’Œdisabledç­‰å±æ€§æ—¶ï¼Œç”¨propæ–¹æ³•æ˜¾ç„¶æ›´å¥½ 2ï¼šéœ€è¦true or falseçš„æ—¶å€™ æœ€å¥½ä½¿ç”¨ prop ï¼Œå› ä¸ºä»–è¿”å›çš„æ˜¯true or false 3ï¼šå…¶ä»–æƒ…å†µå†è€ƒè™‘attr, checkboxè¿”å›çš„æ˜¯checked  html \u0026lt;!DOCTYPE html\u0026gt;    .cls { width: 300px; height: 200px; background-color: red; } \u0026lt;/style\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;src=\u0026quot;jquery-2.1.3.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt;  $(function(){\n$('#btn').click(function(){ //$('div').empty();//æ¸…ç©ºå±‚ä¸­çš„å…ƒç´  //$('div').remove();//å±‚æ²¡äº†,è‡ªæ€ $('div').remove('.cls');//ç§»é™¤åº”ç”¨äº†clsæ ·å¼çš„å±‚; }); var el=$('#atr1'); console.log('attr :'+el.attr('style')); //undefined console.log('prop() :'+el.prop('style')); //CSSStyleDeclarationå¯¹è±¡ console.log('prop() :'+document.getElementById('atr1').style); //CSSStyleDeclarationå¯¹è±¡ //attr å®šä¹‰ åªèƒ½attr('')å»æ‰ç”¨ attræ˜¯ä¸€ç§jQueryçš„å¯¹è±¡æ“ä½œ //prop å®šä¹‰ åªèƒ½prop('')å»æ‰ç”¨ propæ˜¯ä¸€ç§JSDomçš„å¯¹è±¡æ“ä½œ  el.attr(\u0026lsquo;abc\u0026rsquo;,\u0026lsquo;111\u0026rsquo;); console.log(\u0026lsquo;attr el:abc\u0026mdash;\u0026mdash;\u0026ndash;\u0026lsquo;+el.attr(\u0026lsquo;abc\u0026rsquo;)); console.log(\u0026lsquo;prop el:abc\u0026mdash;\u0026mdash;\u0026ndash;\u0026lsquo;+el.prop(\u0026lsquo;abc\u0026rsquo;)); el.prop(\u0026lsquo;def\u0026rsquo;,\u0026lsquo;2222\u0026rsquo;); console.log(\u0026lsquo;attr el:def\u0026mdash;\u0026mdash;\u0026ndash;\u0026lsquo;+el.attr(\u0026lsquo;def\u0026rsquo;)); console.log(\u0026lsquo;prop el:def\u0026mdash;\u0026mdash;\u0026ndash;\u0026lsquo;+el.prop(\u0026lsquo;def\u0026rsquo;));\n// propæ˜¾ç¤ºçš„checkedä¹‹ç±»çš„æ˜¯ true or false è€Œä¸æ˜¯attrçš„undefined or checked var ek=$(\u0026lsquo;#chk1\u0026rsquo;); console.log(\u0026lsquo;attr el:checked\u0026mdash;\u0026mdash;\u0026ndash;\u0026lsquo;+el.attr(\u0026lsquo;checked\u0026rsquo;)); console.log(\u0026lsquo;prop el:checked\u0026mdash;\u0026mdash;\u0026ndash;\u0026lsquo;+el.prop(\u0026lsquo;checked\u0026rsquo;)); console.log(\u0026lsquo;attr el:disabled\u0026mdash;\u0026mdash;\u0026ndash;\u0026lsquo;+el.attr(\u0026lsquo;disabled\u0026rsquo;)); console.log(\u0026lsquo;prop() çš„æ–¹æ³•å«åˆç†äº›\u0026rsquo;); console.log(\u0026lsquo;prop el:disabled\u0026mdash;\u0026mdash;\u0026ndash;\u0026lsquo;+el.prop(\u0026lsquo;disabled\u0026rsquo;));\n});    \u0026lt;input type=\u0026quot;text\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;æ–‡æœ¬æ¡†\u0026quot; id=\u0026quot;atr1\u0026quot;/\u0026gt; \u0026lt;input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;ceshi\u0026quot; id=\u0026quot;chk1\u0026quot; checked=\u0026quot;checked\u0026quot;/\u0026gt;    \n checkboxçš„æµ‹è¯•æ¡ˆä¾‹ï¼š  html      $(function(){ $(\u0026lsquo;#btnAll\u0026rsquo;).click(function(){ //å¯ä»¥ä½†æ˜¯ä¸å¥½ç”¨ //$(\u0026lsquo;#dv :checkbox\u0026rsquo;).attr(\u0026lsquo;checked\u0026rsquo;,\u0026lsquo;checked\u0026rsquo;); //$(\u0026lsquo;#dv :checkbox\u0026rsquo;).attr(\u0026lsquo;checked\u0026rsquo;,true); //$(\u0026lsquo;div :checkbox\u0026rsquo;).attr(\u0026lsquo;checked\u0026rsquo;,true); $(\u0026lsquo;div :checkbox\u0026rsquo;).prop(\u0026lsquo;checked\u0026rsquo;,true);\n }); $('#btnNot').click(function(){ //1 //$('#dv :checkbox').removeAttr('checked'); //2 //$('#dv :checkbox').attr('checked',false); //$('div :checkbox').attr('checked',false); $('div :checkbox').prop('checked',false); }); $('#btnInverse').click(function(){ //$('#dv :checkbox').each(function(){ $('div :checkbox').each(function(){ //é”™è¯¯1 //$(this).setAttribute('checked',!$(this)['checked']); //ä¸è¡Œ //$(this).setAttribute('checked',!$(this).attr('checked')); //æ€è·¯å¯¹äº†ï¼ï¼ä½†æ˜¯å°±æ˜¯ä¸è¡Œï¼ï¼æ˜¯ä¸æ˜¯è·Ÿç¼–ç æœ‰å…³ç³» //$(this).attr('checked',!$(this).attr('checked')); $(this).prop('checked',!$(this).prop('checked')); }); }); }); \u0026lt;/script\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; /* div { margin:5px; background-color:green; } */ \u0026lt;/style\u0026gt;  \n \n\u0026lt;Div id=\u0026quot;dv\u0026quot;\u0026gt; \u0026lt;Input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;1\u0026quot; id=\u0026quot;btnEat\u0026quot;/\u0026gt;eating \u0026lt;Input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;2\u0026quot; id=\u0026quot;btnSleep\u0026quot;/\u0026gt;sleeping \u0026lt;Input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;3\u0026quot; id=\u0026quot;btnPlay\u0026quot;/\u0026gt;playing \u0026lt;/Div\u0026gt;  \n\næœ€ç»ˆé€šè¿‡propè§£å†³äº†å±æ€§é—®é¢˜ã€‚attråœ¨2.1.3.jsæ˜¯æœ‰é—®é¢˜çš„ å¦å¤–2.1.3.jsè¿˜å­˜åœ¨toggleçš„ç‚¹å‡»åˆ‡æ¢é—®é¢˜ï¼Œåœ¨1.8.3æµ‹è¯•ä¸­æœªå‘ç°é—®é¢˜ï¼Œç±»ä¼¼å…ˆå‰çš„oneç‚¹å‡»äº‹ä»¶ TestBind.html: ç”¨äºæµ‹è¯•toggle ä½†æ˜¯åœ¨2.1.3æ— æ³•åˆ‡æ¢ï¼Œåœ¨1.8.3å¯ä»¥ æœ¬æƒ³é€šè¿‡ä¸‹è¿°ä»£ç  å®ç°toggleï¼Œå´å‘ç°æ— æ³•è¿”å›åˆ°firstå½“ä¸­  javascript $(\u0026lsquo;#btn\u0026rsquo;).click() { alert(\u0026lsquo;first\u0026rsquo;); $(this).unbind().bind(\u0026lsquo;click\u0026rsquo;,function(){ alert(\u0026lsquo;second\u0026rsquo;); $(this).unbind().bind(\u0026lsquo;click\u0026rsquo;,function(){ alert(\u0026lsquo;third\u0026rsquo;);\n }); });   9: æ–‡æœ¬è¾“å…¥æ¡†çš„æµ‹è¯• 1:å¦‚æœæ–‡æœ¬æ¡†æ²¡æœ‰è¾“å…¥æ–‡æœ¬ï¼Œé‚£ä¹ˆé¼ æ ‡ç¦»å¼€å˜æˆçº¢è‰²  html   Test select and option   $(function(){ $(\u0026lsquo;input[type=text]\u0026lsquo;).blur(function(){ if($(this).val().length==0) { $(this).css(\u0026lsquo;backgroundColor\u0026rsquo;,\u0026lsquo;red\u0026rsquo;); }else { $(this).css(\u0026lsquo;backgroundColor\u0026rsquo;,\u0026ldquo;); } }); });  div { width:100px; float:left; } input { width:100px; margin:10px; } \n \n  \n 10:è·å–é¼ æ ‡çš„ç‚¹å‡» å·¦é”®ï¼š1 ä¸­é”®ï¼š2 å³é”®ï¼š3 e.which è¿”å›å…¶å€¼ æ³¨æ„ï¼šjsä¸­ä½¿ç”¨ backgroundColor:pink cssä¸­ä½¿ç”¨background-color:pink;  html   Test select and option   $(function(){\n $('#countMouse').click(function(e){ //è·å¾—é¼ æ ‡æ•²å‡»çš„å€¼ //å·¦é”® 1 //ä¸­é”® 2 //å³é”® 3 alert(e.which); }); }); \u0026lt;/script\u0026gt;  \n\n\u0026lt;!--å¯ä¸æ•¢å†çŠ¯è¿™ç§backgroundColor:pinkçš„é”™è¯¯--\u0026gt;   \n\n11. éšè—å’Œæ˜¾ç¤º 1: æ ‡ç­¾æ˜¾ç¤ºå’Œéšè— show hide toggle åœ¨2.1.3ä¸­ä¸è¡Œ 2:slide å¹»ç¯ç‰‡ slideDown slideUp slideToggle 3: Fade æ¸è¿› FadeIn FadeOut FadeToggle 1000 ä»£è¡¨1000ms ä¸€èˆ¬åˆ†ä¸ºä¸‰ç­‰ slow normal fast ï¼Œé»˜è®¤æ˜¯normal  html   \n\u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ $('#btnShow').click(function(){ // $('div').show(1000); //slide åˆ†ä¸ºä¸‰ä¸ª $('div').slideDown(1000); //$('div').fadeIn(1000); }); $('#btnHide').click(function(){ // $('div').hide(1000); //åœ¨1.8.3.minæ•ˆæœä¸€æ · $('div').slideUp(1000); //Fade in out toggle éƒ½å¯ä»¥å®ç° //$('div').fadeOut(1000); }); $('#btnToggle').click(function(){ $('div').slideToggle(1000); //$('div').fadeToggle(1000); }); }); \u0026lt;/script\u0026gt;      \n 12.NBAä¸œè¥¿éƒ¨ç¯®çƒé˜Ÿ a.é€šè¿‡unbind().bind()æ¥ç»‘å®šå·²ç»è§£ç»‘çš„æ ‡ç­¾äº‹ä»¶ b.attr åŒ…å«å¾ˆå¤šå±æ€§ æ¯”å¦‚styleï¼ˆä¸»è¦æ˜¯ä¸€äº›èƒŒæ™¯é¢œè‰² border width heigth ç­‰ï¼‰ åŠŸèƒ½æ˜¯ï¼š a.é¼ æ ‡ç»è¿‡æ—¶å€™å˜æ²‰çº¢è‰² å…¶ä»–çš„ä¸ºç™½è‰²èƒŒæ™¯ b.é¼ æ ‡ç‚¹å‡»ååˆ™æŠŠè¯¥åªçƒé˜Ÿå‰”é™¤ï¼Œå¹¶æ”¾åœ¨é€€èµ›çƒé˜Ÿä¸­ bug: ä¸œéƒ¨çƒé˜Ÿåœ¨å‰”é™¤åï¼Œåˆ†é…åˆ°outEastä¸­ï¼Œmouseoverçš„é¼ æ ‡ç§»åŠ¨äº‹ä»¶æ— æ³•å®ç°ï¼Œç„¶è€Œè¥¿éƒ¨å´æ˜¯å¯ä»¥ã€‚ã€‚ã€‚ã€‚  html   \n\u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; $(function(){ $('#east li').mouseover(function(){ $(this).css('backgroundColor','red').siblings().css('backgroundColor',''); //alert($(this).style); }).click(function() { //$(this).removeAttr('style').unbind().appendTo('#outerEast'); //$(this).attr('backgroundColor','blue').appendTo('#outerEast'); //$(this).css('backgroundColor','blue').unbind().appendTo('#outerEast'); //$(this).attr('backgroundColor','blue').unbind().appendTo('#outerEast'); //å¯ä¸æ•¢çŠ¯è¿™ä¸ªé”™è¯¯ï¼Œå¦‚æœä¸åŠ end()çš„æ–­é“¾æ“ä½œï¼Œä¼šæŠŠæ‰€æœ‰çš„siblings()å…ƒç´  //æäº¤åˆ°ä¸‹è¾¹å“å½“ä¸­ï¼ //$(this).css('backgroundColor','blue').siblings().css('backgroundColor','').end().unbind().appendTo('#outerEast'); //åœ¨appendToçš„äº‹ä»¶å‘ç”Ÿä¹‹åï¼ˆå‘å±•çš„è§’åº¦æ¥çœ‹ï¼‰ //ä½†æ˜¯å‘ç°ä¸è¡Œï¼Œäºæ˜¯ç•™ä¸‹ä¸€ä¸ªç–‘é—® //ç°åœ¨æ˜ç™½äº†æ—¢ç„¶unbindå°±å¾—éœ€è¦ç”¨bind()æ¥è§£å†³ //$(this).unbind().appendTo('#outerEast').attr('onmouseover','').mouseover(function(){ $(this).css('backgroundColor','blue').siblings().css('backgroundColor','').end().unbind().appendTo('#outerEast').bind('mouseover',function(){ //é”™è¯¯é˜¿ï¼ï¼ï¼å±…ç„¶æŠŠæ‰€æœ‰çš„å…¶ä»–éƒ½ç»™åŠŸèƒ½ç¦ç”¨äº†ï¼ //$(this).css('backgroundColor','blue').siblings().css('backgroundColor','').unbind().end().appendTo('#outerEast').bind('mouseover',function(){ $(this).css('backgroundcolor','blue').siblings().css('backgroundColor',''); }); }); $('#west li').mouseover(function(){ $(this).css('backgroundColor','red').siblings().css('backgroundColor',''); }).click(function() { //å¯ä¸æ•¢å†çŠ¯è¿™ä¸ªé”™è¯¯ //atträ¸æ­¢ä¸€ä¸ªå±æ€§ï¼Œä¸ä»…ä»…æ˜¯style //è€Œcssåªæ˜¯è®¾ç½®ç•Œé¢å±æ€§ //$(this).removeAttr('style').unbind().appendTo('#outeWest'); //å¯è¡Œé˜¿ï¼ï¼ï¼è¯•éªŒäº†ä¸€ä¸ªå°æ—¶ bindä¹‹åå†åˆ°ä¹‹åçš„åœ°æ–¹unbindå³å¯ //$(this).unbind().appendTo('#outerWest').bind('mouseover',function(){ //å¥½å¤„æ˜¯ç›´æ¥æ˜¾ç¤ºè“è‰² $(this).css('backgroundColor','blue').siblings().css('backgroundColor','').end().unbind().appendTo('#outerWest').bind('mouseover',function(){ $(this).css('backgroundColor','blue').siblings().css('backgroundColor',''); }); //$(this).attr('backgroundColor','blue').unbind().appendTo('#outerWest'); //attråªä¼šä¿å­˜ç€ç¬¬ä¸€ä¸ªbackgroundcolorçš„å€¼ï¼ }); //å¢åŠ ä¸€ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥è¿”å›åˆ°åŸå…ˆçš„ç«äº‰é˜Ÿåˆ—ä¸­ // å…ˆæ¸…ç©ºä¸€ä¸‹è¯•è¯• //$('#outerEast li').click(function(){ /* $('#outerEast li').attr('onclick','').click(function(){ $(this).css('backgroundColor','blue').bind('click',function(){ $(this).css('backgroundColor','red').appendTo($('#east')); }); }); $('#outerEast li').attr('onclick','').click(function(){ $(this).css('backgroundColor','blue').bind('click',function(){ $(this).css('backgroundColor','red').appendTo($('#east')); }); }); */  //å¦‚æœonclickäº‹ä»¶åŸå…ˆæœ‰å€¼ï¼Œè¦å…ˆæ¸…ç©ºï¼Œå†ç”¨click( //ä¸ºä»€ä¹ˆï¼Ÿ }); \n\n The basketball team The East Basketbal Teams äºšç‰¹å…°å¤§ è€é¹° èŠåŠ å“¥ å…¬ç‰› æ³¢å£«é¡¿ å‡¯å°”ç‰¹äºº å¤æ´›ç‰¹ é»„èœ‚ å…‹åˆ©å¤«å…° éª‘å£« å¸ƒé²å…‹æ— ç¯®ç½‘ è¿ˆé˜¿å¯† çƒ­ç« åº•ç‰¹å¾‹ æ´»å¡ çº½çº¦ å°¼å…‹æ–¯ å¥¥å…°å¤š é­”æœ¯ å°ç¬¬å®‰çº³ æ­¥è¡Œè€… è´¹åŸ 76äºº åç››é¡¿ å¥‡æ‰ å¯†å°”æ²ƒåŸº é›„é¹¿ å¤šä¼¦å¤š çŒ›é¾™  The West Basketbal Teams é‡‘å· å‹‡å£« ä¸¹ä½› æ˜é‡‘ è¾¾æ‹‰æ–¯ å°ç‰› æ´›æ‰çŸ¶ å¿«èˆ¹ æ˜å°¼è‹è¾¾ æ£®æ—ç‹¼ ä¼‘æ–¯é¡¿ ç«ç®­ æ´›æ‰çŸ¶ æ¹–äºº å¥¥å…‹å…°é™ˆé©¬æˆ é›·éœ† å­Ÿè²æ–¯ ç°ç†Š è²å°¼å…‹æ–¯ å¤ªé˜³ æ³¢ç‰¹å…° å¼€æ‹“è€… æ–°å¥¥å°”è‰¯ é¹ˆé¹• è¨å…‹æ‹‰é—¨æ‰˜ å›½ç‹ çŠ¹ä»– çˆµå£« åœ£å®‰ä¸œå°¼å¥¥ é©¬åˆº  æ­¥è¡Œè€… å±±çŒ« \n\u0026lt;H2\u0026gt;The basketball team which have been out of the game.\u0026lt;/H2\u0026gt; \u0026lt;Hr color=\u0026quot;red\u0026quot;/\u0026gt; \u0026lt;H3\u0026gt;The team of the west\u0026lt;/H3\u0026gt; \u0026lt;Ol id=\u0026quot;outerWest\u0026quot;\u0026gt; \u0026lt;/Ol\u0026gt; \u0026lt;Hr color=\u0026quot;red\u0026quot;/\u0026gt; \u0026lt;H3\u0026gt;The team of the east\u0026lt;/H3\u0026gt; \u0026lt;Ol id=\u0026quot;outerEast\u0026quot;\u0026gt; \u0026lt;/Ol\u0026gt;   \n 12:é€å¸§å˜åŒ–Animate //animateçš„ä½œç”¨å…¶å®å°±æ˜¯åŠ¨æ€çš„æ”¹å˜æ•ˆæœ // æ¯”å¦‚ä»æŸä¸ªç‚¹ ç§»åŠ¨æŸä¸ªç‚¹ // æ…¢æ…¢çš„æ‹‰ä¼¸é•¿åº¦ é«˜åº¦ æ¨¡ä»¿äººçš„åŠ¨ä½œï¼Œå¹¶å¯ä»¥é€šè¿‡è®¾ç½® // msæ•° ä¼šé£çš„é¸Ÿï¼š åŠŸèƒ½ï¼š 1 å…ˆè®©ä»–ä»(0,0)ç§»åŠ¨åˆ° ï¼ˆ200ï¼Œ50ï¼‰ 1sç§»åŠ¨æ—¶é—´ 2 å†è®©å…¶ä»(200,50) ç§»åŠ¨åˆ°(700,150) 2sç§»åŠ¨æ—¶é—´(å¯ä»¥ä½¿ç”¨+= æ³¨æ„äº†)  html   Test select and option   $(function(){ //animateçš„ä½œç”¨å…¶å®å°±æ˜¯åŠ¨æ€çš„æ”¹å˜æ•ˆæœ // æ¯”å¦‚ä»æŸä¸ªç‚¹ ç§»åŠ¨æŸä¸ªç‚¹ // æ…¢æ…¢çš„æ‹‰ä¼¸é•¿åº¦ é«˜åº¦ æ¨¡ä»¿äººçš„åŠ¨ä½œï¼Œå¹¶å¯ä»¥é€šè¿‡è®¾ç½® // msæ•° $(\u0026lsquo;#btn1\u0026rsquo;).click(function(){ //æŒ‰ç…§ é»˜è®¤çš„æ­£å¸¸é€Ÿåº¦ å»¶é•¿é«˜åº¦åˆ°300px $(\u0026lsquo;#box\u0026rsquo;).animate({height:\u0026ldquo;300px\u0026rdquo;}); }); $(\u0026lsquo;#fly\u0026rsquo;).click(function(){ //1000ms ä»(0 0) è¿è¡Œåˆ°200 50 çš„ä½ç½® æ—¶é—´1s //å¯ä¸æ•¢çŠ¯è¿™ä¸ªé”™è¯¯ //$(\u0026lsquo;#bird\u0026rsquo;).animate(\u0026lsquo;{\u0026ldquo;left\u0026rdquo;:\u0026ldquo;200px\u0026rdquo;,\u0026ldquo;top\u0026rdquo;:\u0026ldquo;500px\u0026rdquo;}\u0026lsquo;,1000); $(\u0026lsquo;#bird\u0026rsquo;).animate({\u0026ldquo;left\u0026rdquo;:\u0026ldquo;200px\u0026rdquo;,\u0026ldquo;top\u0026rdquo;:\u0026ldquo;50px\u0026rdquo;},1000); // åŠ ä¸€ä¸ªå˜å°é£é€€çš„æ•ˆæœ $(\u0026lsquo;#bird\u0026rsquo;).animate({\u0026ldquo;left\u0026rdquo;:\u0026ldquo;+=500px\u0026rdquo;,\u0026ldquo;top\u0026rdquo;:\u0026ldquo;+=100px\u0026rdquo;,\u0026ldquo;width\u0026rdquo;:\u0026ldquo;40px\u0026rdquo;,\u0026ldquo;height\u0026rdquo;:\u0026ldquo;30px\u0026rdquo;},2000); }) })  \n  \n\n 13: Cookie //çªç„¶æ˜ç™½ cookieåªä¸è¿‡æ˜¯ä¸€å †hashmap ä¸´æ—¶å­˜å‚¨åœ¨æµè§ˆå™¨å½“ä¸­å“¦ å®šä¹‰ï¼š $.cookie('uName', $('#YourName').val()); ä½¿ç”¨ï¼š $.cookie('uName') ä½œç”¨ï¼š å½“åˆ·æ–°é¡µé¢ä»ç„¶ä¼šä¿å­˜uNameçš„å€¼ï¼ éœ€è¦åŠ è½½jquery.cookie.js æ’ä»¶  html   Test select and option    $(function(){ $(\u0026lsquo;#btn\u0026rsquo;).click(function(){ $.cookie(\u0026lsquo;uName\u0026rsquo;, $(\u0026lsquo;#YourName\u0026rsquo;).val()); alert(\u0026lsquo;I browser have record your name\u0026rsquo;); }); //çªç„¶æ˜ç™½ cookieåªä¸è¿‡æ˜¯ä¸€å †hashmap ä¸´æ—¶å­˜å‚¨åœ¨æµè§ˆå™¨å½“ä¸­å“¦ if($.cookie(\u0026lsquo;uName\u0026rsquo;)) { $(\u0026lsquo;span\u0026rsquo;).text(\u0026lsquo;welcome Mr/Mrs \u0026lsquo;+$.cookie(\u0026lsquo;uName\u0026rsquo;)+\u0026rsquo; coming back\u0026rsquo;); }else { $(\u0026lsquo;span\u0026rsquo;).text(\u0026lsquo;welcome you !Little Bird . \u0026lsquo;) } });\n\u0026lt;/script\u0026gt;  \n  \n\n 14:jqZoomå±€éƒ¨æ”¾å¤§å™¨ æ³¨æ„ç‚¹1ï¼šjqZoomåœ¨2.1.3æµ‹è¯•å¤±è´¥ï¼ ä½†åœ¨1.8.3.min.jsæµ‹è¯•é€šè¿‡ æ³¨æ„ç‚¹2: è¦ è¿æ¥ä¸Šcsså¦åˆ™æ•ˆæœä¸å¥½ï¼š\u0026lt;LINK rel=stylesheet type=text/css href=\u0026quot;jquery.jqzoom.css\u0026quot; /\u0026gt; æ³¨æ„ç‚¹3ï¼š jqzoom()å¤±æ•ˆå†™çš„ æ³¨æ„ç‚¹4ï¼š å¤§å›¾ç‰‡æ˜¯æ”¾åœ¨ä¸€ä¸ª\u0026lt;A class=MYCLASS href=\u0026quot;å¤§å›¾ç‰‡\u0026quot;\u0026gt; \u0026lt;img src=\u0026quot;å°å›¾ç‰‡\u0026quot;/\u0026gt;\u0026lt;/A\u0026gt;  html   Test select and option     -- $(function(){ //$(document).ready(function(){ //å¯ä¸æ•¢å†™é”™å‡½æ•° zä¸å¯ä»¥å¤§å†™ //$(\u0026lsquo;.MYCLASS\u0026rsquo;).jqZoom(); $(\u0026lsquo;.MYCLASS\u0026rsquo;).jqzoom(); /* { zoomType: \u0026lsquo;standard\u0026rsquo;, lens:true, zoomWidth: 300, zoomHeight:450, xOffset:90, yOffset:30, preloadImages: true, alwaysOn:false }); */ }); \n\n æ”¾åœ¨ IMgæ ‡ç­¾å¤–äº†--  \n\n 15 qqå¾®åšæ¡ˆä¾‹ æ¨¡æ‹Ÿå¾®åš140ä¸ªå­—çš„æäº¤æ¡ˆä¾‹ 1ï¼š htmléƒ¨åˆ† åŠ è½½weibo.css åŠ è½½weibo.js åŠ è½½logo åŠ è½½textareaæ–‡æœ¬æ¡† åŠ è½½é™„ä»¶åŒº åŠ è½½æŒ‰é’® 2ï¼š csséƒ¨åˆ† no-repeat ä¸è¿›è¡Œå¹³é“º 3ï¼š jséƒ¨åˆ† 3.1éœ€è¦ç€é‡æŒæ¡ æ‹“å±•çš„å†™æ³• 3.2é€šè¿‡è„±ç¦»æ–‡æ¡£æµ æ¥åŠ åœ¨æœ‹å‹åˆ—è¡¨å’Œè¡¨æƒ…åˆ—è¡¨ 3.3 å­¦ä¹ å¹¿æ’­çš„ è¿½è¸ªæ˜¾ç¤ºéƒ¨åˆ†å›¾ç‰‡çš„åŠŸèƒ½ é…åˆ background background-position ä»¥åŠåæ ‡è¿›è¡Œè®¾ç½® å½“ç„¶èƒŒæ™¯æ¡†æ˜¯æœ‰å¤§å°é™åˆ¶çš„ no-repeatä¸å¹³é“º åˆ©ç”¨cssè¿› å¦‚æœè¶…å‡ºå¤šå°‘ä¸ªå­— åˆ™å˜çº¢è‰²è­¦å‘Š 3.4 æœ‰ä¸‰ä¸ªåœ°æ–¹ Please write down the topic ä¸ºä»€ä¹ˆï¼Ÿ 1: ä¸ºäº†æ·»åŠ Topic ç‚¹å‡»äº‹ä»¶éœ€è¦ 2ï¼šåœ¨æœ‹å‹åˆ—è¡¨å’Œè¡¨æƒ…åˆ—è¡¨ ç¬¬äºŒä¸ªæ˜¯å› ä¸ºå½“æ²¡æœ‰åªæœ‰#Please write..# åˆ™ä½¿ç”¨val()è¿›è¡Œæ›¿æ¢ ä½†æ˜¯å½“textareaåŸå…ˆæœ‰å†…å®¹æ—¶å€™ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨valï¼ˆæ–°å†…å®¹ï¼‰åˆ™ä¼šè¦†ç›–åŸå…ˆçš„æ—§å†…å®¹ ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œåˆ¤æ–­ 3.5 selectRangeçš„ä½œç”¨å°±æ˜¯é€‰æ‹©æ‰ä»ç¬¬ä¸€ä¸ªå­—ç¬¦åˆ°æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯æˆ‘çš„æµ‹è¯•ç»“æœå˜æˆäº†é€‰æ‹© 3.6 æœ‹å‹åˆ—è¡¨ï¼Œè¡¨æƒ…åˆ—è¡¨ éƒ½æ˜¯é€šè¿‡å»ºç«‹ä¸€ä¸ªæ–°çš„å±‚æ¥è®¾ç½® æ³¨æ„æ·»åŠ å®Œclose æ ‡ç­¾åï¼Œåœ¨æ·»åŠ  æœ‹å‹åˆ—è¡¨çš„æ—¶å€™éœ€è¦åœ¨styleå±æ€§ä¸­æ·»åŠ clear:bothæ¥æ¸…é™¤ float:rightçš„å±æ€§ 3.7 è¡¨æƒ…å±‚ä¸­ æ˜¾ç¤ºçš„æ–‡ä»¶å¤¹è·¯å¾„å¾—è®¾ç½®æ­£ç¡® æ³¨æ„ 1ï¼š userFaces[key]åœ¨ è¡¨æƒ…ä¸Šé¢çš„title 2ï¼š å°æ‰‹åŠŸèƒ½ // 3ï¼š ç‚¹å‡»åŠŸèƒ½ å•æœºäº‹ä»¶ é¼ æ ‡mouseoverçš„äº‹ä»¶ ä¼šæ˜¾ç¤ºæ–‡å­—ä¿¡æ¯ weibo.html:  html   Test select and option   \n\n\n\u0026lt;Img id=\u0026quot;logo\u0026quot; src=\u0026quot;weiboPic/b3_100901.png\u0026quot; alt=\u0026quot;log\u0026quot;/\u0026gt; \u0026lt;!--è®©è¯„è®ºå±…ä¸­--\u0026gt; \u0026lt;Center\u0026gt; \u0026lt;Div id=\u0026quot;Weibo\u0026quot;\u0026gt; \u0026lt;Div id=\u0026quot;WL\u0026quot;\u0026gt; \u0026lt;Div id=\u0026quot;Talking\u0026quot;\u0026gt; \u0026lt;H2\u0026gt;\u0026lt;A\u0026gt;Weibo Title: communication\u0026lt;/A\u0026gt;\u0026lt;/H2\u0026gt; \u0026lt;Textarea id=\u0026quot;Msg\u0026quot;\u0026gt;\u0026lt;/Textarea\u0026gt; \u0026lt;Div id=\u0026quot;Attach\u0026quot;\u0026gt; \u0026lt;A href=\u0026quot;javascript:void();\u0026quot; class=\u0026quot;NewTopic\u0026quot;\u0026gt;Topic\u0026lt;/A\u0026gt; \u0026lt;A href=\u0026quot;javascript:void();\u0026quot; class=\u0026quot;Friend\u0026quot;\u0026gt;Friends\u0026lt;/A\u0026gt; \u0026lt;A href=\u0026quot;javascript:void();\u0026quot; class=\u0026quot;Face\u0026quot;\u0026gt;Face\u0026lt;/A\u0026gt; \u0026lt;A href=\u0026quot;javascript:void();\u0026quot; class=\u0026quot;Pic\u0026quot;\u0026gt;Picture\u0026lt;/A\u0026gt; \u0026lt;A href=\u0026quot;javascript:void();\u0026quot; class=\u0026quot;Video\u0026quot;\u0026gt;Video\u0026lt;/A\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;Div id=\u0026quot;Send\u0026quot;\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; class=\u0026quot;sendBtn\u0026quot; value=\u0026quot;\u0026quot;/\u0026gt; \u0026lt;Span class=\u0026quot;CountTxt\u0026quot;\u0026gt;You can still write\u0026lt;Em\u0026gt;140\u0026lt;/Em\u0026gt;words\u0026lt;/Span\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;!-- \u0026lt;Div id=\u0026quot;WR\u0026quot;\u0026gt; \u0026lt;/Div\u0026gt; --\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;/Center\u0026gt;  \n\n weibo.css:  css body { margin: 0px; background: url(\u0026lsquo;weiboPic/wrapBg.jpg\u0026rsquo;) no-repeat #EBF1F1; } #logo { margin: 30px 0 0 300px; } #Weibo { width: 800px; height: 200px; border: 1px solid #000; } /* WL: weiboLeft/ #WL { width: 590px; height: 100%; background: #fff; float: left; } / WR: weiboLeft */ #WR { background: #CCEBF4; width: 210px; height: 100%; float: right; }\n #Talking { text-align: left; margin: 0 0 0 25px; } /*å¢åŠ æ–‡æœ¬æ¡†çš„å¤§å°*/ #Msg { width: 540px; height: 80px; overflow: hidden; font-family: Tahoma, Arial; font-size: 14px; border: 1px solid gray; } #Talking H2 { text-align: left; padding: 0px; margin: 0px; font: normal normal normal 18px/29px 'MicroSoft YaHei' , SimHei; } #Attach { width: 540px; } #Attach a { color: #000; text-decoration: none; font-size: 14px; } .NewTopic, .Friend, .Face, .Pic, .Video { background-position: -170px -33px; display: inline-block; height: 16px; padding-left: 18px; } .CountTxt { color: #999; float: right; line-height: 33px; margin: 0 15px 0 0; } .CountTxt em { font-family: Georgia, Tahoma, Arial; font-size: 26px; position: relative; top: -5px; vertical-align: middle; } .sendBtn { float: right; margin: 0 20px 0 0; padding: 0px; background: url(weiboPic/bg1.png) -117px -165px no-repeat; line-height: 33px; margin-left: 14px; height: 30px; width: 112px; border: 0px; cursor: pointer; } #btnCloFri { cursor: pointer; }   weibo.js: //1ã€‚æ‰©å±•jQuery //éœ€è¦ç€é‡æŒæ¡ æ‹“å±•çš„å†™æ³• //é€šè¿‡è„±ç¦»æ–‡æ¡£æµ æ¥åŠ åœ¨æœ‹å‹åˆ—è¡¨å’Œè¡¨æƒ…åˆ—è¡¨ //å­¦ä¹ å¹¿æ’­çš„ è¿½è¸ªæ˜¾ç¤ºéƒ¨åˆ†å›¾ç‰‡çš„åŠŸèƒ½ é…åˆ background background-position // ä»¥åŠåæ ‡è¿›è¡Œè®¾ç½® å½“ç„¶èƒŒæ™¯æ¡†æ˜¯æœ‰å¤§å°é™åˆ¶çš„ no-repeatä¸å¹³é“º åˆ©ç”¨cssè¿›è¡Œ // åˆ‡æ¢ //å¦‚æœè¶…å‡ºå¤šå°‘ä¸ªå­— åˆ™å˜çº¢è‰²è­¦å‘Š  javascript $.fn.selectRange = function (start, end) { //please write down the topic é«˜äº®æ˜¾ç¤º //è½¬åŒ–ä¸º jså¯¹è±¡ var curObj = $(this).get(0); if (!curObj) return; else if (curObj.setSelectionRange) { curObj.focus(); curObj.setSelectionRange(start, end); } /* WebKit / else if (curObj.createTextRange) { var range = curObj.createTextRange(); range.collapse(true); range.moveEnd(\u0026lsquo;character\u0026rsquo;, end); range.moveStart(\u0026lsquo;character\u0026rsquo;, start); range.select(); } / IE */ else if (curObj.selectionStart) { curObj.selectionStart = start; curObj.selectionEnd = end; } }; //====ä¸Šé¢çš„ä»£ç æ˜¯æ‰©å±•çš„\n$(function() { //æŒ‰é’®é«˜äº®æ˜¾ç¤º $('#Send .sendBtn').mouseover(function(){ $(this).css('backgroundPosition','0 -195px'); }).mouseout(function(){ $(this).css('backgroundPosition','-117px -165px');  //-117px -165px }); //è®¡ç®—æ–‡æœ¬æ¡†è¿˜èƒ½è¾“å…¥å¤šå°‘ä¸ªå­— $(\u0026lsquo;#Msg\u0026rsquo;).change(function(){ //è¿˜èƒ½è¾“å…¥å¤šå°‘ä¸ªå­— var len= 140- $(this).val().length; if(len\u0026gt;=0){ $(\u0026lsquo;#Send .CountTxt\u0026rsquo;).html(\u0026lsquo;You can still write down\u0026rsquo;+len+\u0026rsquo;words\u0026rsquo;); }else{ //è®¾ç½® å˜æˆé«˜äº®çš„çº¢è‰² $(\u0026lsquo;#Send .CountTxt\u0026rsquo;).html(\u0026lsquo;Already exceed \u0026rsquo;+Math.abs(len)+\u0026rsquo;words\u0026rsquo;); }\n }); setInterval(function(){ $('#Msg').change(); },500); //æ˜¾ç¤ºè¯é¢˜ ////æœ‰ä¸‰ä¸ªåœ°æ–¹ Please write down the topic ä¸ºä»€ä¹ˆï¼Ÿ 1: ä¸ºäº†æ·»åŠ Topic ç‚¹å‡»äº‹ä»¶éœ€è¦ 2ï¼šåœ¨æœ‹å‹åˆ—è¡¨å’Œè¡¨æƒ…åˆ—è¡¨ //ä¸ºä»€ä¹ˆï¼Ÿ $('#Attach .NewTopic').click(function(){ if($('#Msg').val().length==0){ //selectRangeçš„ä½œç”¨å°±æ˜¯å»é™¤æ‰ ä»ç¬¬ä¸€ä¸ªå­—ç¬¦åˆ°æœ€åä¸€ä¸ªå­—ç¬¦ //å·²æ–¹ä¾¿æˆ‘ä»¬è¾“å…¥è¯é¢˜ $('#Msg').val('#Please write down the topic#').selectRange(1,28); } });  //æ˜¾ç¤ºæœ‹å‹ $(\u0026lsquo;#Attach .Friend\u0026rsquo;).click(function(){ var friendsList = [\u0026lsquo;Foleide\u0026rsquo;, \u0026lsquo;Risse\u0026rsquo;, \u0026lsquo;LiLei\u0026rsquo;,\u0026lsquo;HanMeiMei\u0026rsquo;,\u0026lsquo;Tom\u0026rsquo;,\u0026lsquo;Turkkey\u0026rsquo;,\u0026lsquo;John\u0026rsquo;]; if($(\u0026lsquo;#dvF\u0026rsquo;).length\u0026gt;0){ $(\u0026lsquo;#dvF\u0026rsquo;).remove(); } //å¢åŠ äº†ä¸€ä¸ª æœ‹å‹å±‚ ç”¨äºé€‰æ‹©ï¼ï¼ var dvFriends=$(\u0026rsquo;\u0026rsquo;).appendTo($(\u0026lsquo;body\u0026rsquo;)); //è®¾ç½®å®Œå±‚çš„è„±ç¦»æ–‡æ¡£æµ åï¼Œè®¾ç½®ä»–çš„åç§» var dvX=$(this).offset().left+\u0026lsquo;px\u0026rsquo;;//å±‚è·ç¦»å·¦ä¾§çš„åƒç´  æ³¨æ„ height() æœ‰åœ†æ‹¬å·åŒ…è£¹ var dvY=$(this).offset().top+$(this).height()+\u0026lsquo;px\u0026rsquo;; //è®¾ç½®ä»–çš„ä¸Šå’Œå·¦çš„åæ ‡ dvFriends.css({\u0026ldquo;left\u0026rdquo;:dvX,\u0026ldquo;top\u0026rdquo;:dvY}); //æ·»åŠ ä¸€ä¸ªå…³é—­æŒ‰é’® //float:right å‘å³æµ®åŠ¨ $(\u0026rsquo;Close\u0026rsquo;).click(function(){ $(this).parent().remove(); }).appendTo(dvFriends);\n //æ˜¾ç¤ºæœ‹å‹åˆ—è¡¨ //clear:both æ¸…é™¤æ‰ spanæ‰€å…·æœ‰çš„floatæ•ˆæœï¼ï¼ // è§„å¾‹ï¼š å¦‚æœåŒä¸€çº§çš„å…ƒç´ æœ‰æµ®åŠ¨çš„ï¼Œå°±éœ€è¦ç”¨clear:bothæ¥æ¸…é™¤ //å¦åˆ™ ulobjä¼šè·Ÿcloseå¤„åœ¨åŒä¸€è¡Œå½“ä¸­ //list-style-type:square var ulObj= $('\u0026lt;Ul style=\u0026quot;clear: both; list-style-type: square; margin: 0;padding: 0;\u0026quot;\u0026gt;\u0026lt;/Ul\u0026gt;').appendTo(dvFriends); for(var i=0;i\u0026lt;friendsList.length;i++){ //è®¾ç½®ç§»åˆ°çš„é¼ æ ‡ä¸ºæ‰‹å‹ $('\u0026lt;Li style=\u0026quot;margin-bottom: 5px; cursor: pointer;\u0026quot;\u0026gt;@'+friendsList[i]+'\u0026lt;/Li\u0026gt;').mouseover(function(){ //é¼ æ ‡è¿›å…¥æ—¶å€™çš„é«˜äº®æ˜¾ç¤º $(this).css('backgroundColor','yellow'); //é¼ æ ‡ç¦»å¼€åˆå¾—æ¢å¤è¿‡æ¥ }).mouseout(function(){ $(this).css('backgroundColor',''); }).click(function(){ //ä¸å¤ªæ˜ç™½è¿™è¾¹çš„å†™æ³• ok //å¦‚æœç”¨æˆ·æ²¡æœ‰è¾“å…¥ä»»ä½•å†…å®¹ åˆ™æ›¿æ¢æ‰åŸå…ˆçš„å†…å®¹ if($('#Msg').val()=='##'){ $('#Msg').val($(this).text()); }else{ //å¦‚æœç”¨æˆ·å·²ç»è¾“å…¥äº†ï¼Œåˆ™å¿…é¡»ä¿è¯ç”¨æˆ·çš„æ•°æ®ä¸è¢«è¦†ç›– $('#Msg').val($('#Msg').val()+$(this).text()); } }).appendTo(ulObj); } }); //æ˜¾ç¤ºè¡¨æƒ… var userFaces = { '0.gif': 'å¾®ç¬‘', '1.gif': 'æ’‡å˜´', '2.gif': 'è‰²', '3.gif': 'å‘å‘†', '4.gif': 'å¾—æ„', '5.gif': 'æµæ³ª', '6.gif': 'å®³ç¾', '7.gif': 'é—­å˜´', '8.gif': 'ç¡', '9.gif': 'å¤§å“­', '10.gif': 'å°´å°¬', '11.gif': 'å‘æ€’', '12.gif': 'è°ƒçš®', '13.gif': 'å‘²ç‰™', '14.gif': 'æƒŠè®¶', '15.gif': 'éš¾è¿‡', '16.gif': 'é…·', '17.gif': 'å†·æ±—', '18.gif': 'æŠ“ç‹‚', '19.gif': 'å', '20.gif': 'å·ç¬‘', '21.gif': 'å¯çˆ±', '22.gif': 'ç™½çœ¼', '23.gif': 'å‚²æ…¢', '24.gif': 'é¥¥é¥¿', '25.gif': 'å›°', '26.gif': 'æƒŠæ', '27.gif': 'æµæ±—', '28.gif': 'æ†¨ç¬‘', '29.gif': 'å¤§å…µ', '30.gif': 'å¥‹æ–—', '31.gif': 'å’’éª‚', '32.gif': 'ç–‘é—®', '33.gif': 'å˜˜', '34.gif': 'æ™•', '35.gif': 'æŠ˜ç£¨', '36.gif': 'è¡°', '37.gif': 'éª·é«…', '38.gif': 'æ•²æ‰“', '39.gif': 'å†è§', '40.gif': 'æ“¦æ±—', '41.gif': 'æŠ é¼»', '42.gif': 'é¼“æŒ', '43.gif': 'ç³—å¤§äº†', '44.gif': 'åç¬‘', '45.gif': 'å·¦å“¼å“¼', '46.gif': 'å³å“¼å“¼', '47.gif': 'å“ˆæ¬ ', '48.gif': 'é„™è§†', '49.gif': 'å§”å±ˆ', '50.gif': 'å¿«å“­äº†', '51.gif': 'é˜´é™©', '52.gif': 'äº²äº²', '53.gif': 'å“', '54.gif': 'å¯æ€œ', '55.gif': 'èœåˆ€', '56.gif': 'è¥¿ç“œ', '57.gif': 'å•¤é…’', '58.gif': 'ç¯®çƒ ', '59.gif': 'ä¹’ä¹“', '60.gif': 'å’–å•¡', '61.gif': 'é¥­', '62.gif': 'çŒªå¤´', '63.gif': 'ç«ç‘°', '64.gif': 'å‡‹è°¢', '65.gif': 'ç¤ºçˆ±', '66.gif': 'çˆ±å¿ƒ', '67.gif': 'å¿ƒç¢', '68.gif': 'è›‹ç³•', '69.gif': 'é—ªç”µ', '70.gif': 'ç‚¸å¼¹', '71.gif': 'åˆ€', '72.gif': 'è¶³çƒ', '73.gif': 'ç“¢è™«', '74.gif': 'ä¾¿ä¾¿', '75.gif': 'æœˆäº®', '76.gif': 'å¤ªé˜³', '77.gif': 'ç¤¼ç‰©', '78.gif': 'æ‹¥æŠ±', '79.gif': 'å¼º', '80.gif': 'å¼±', '81.gif': 'æ¡æ‰‹', '82.gif': 'èƒœåˆ©', '83.gif': 'æŠ±æ‹³', '84.gif': 'å‹¾å¼•', '85.gif': 'æ‹³å¤´', '86.gif': 'å·®åŠ²', '87.gif': 'çˆ±ä½ ', '88.gif': 'NO', '89.gif': 'OK', '90.gif': 'çˆ±æƒ…', '91.gif': 'é£å»', '92.gif': 'è·³è·³', '93.gif': 'å‘æŠ–', '94.gif': 'æ€„ç«', '95.gif': 'è½¬åœˆ', '96.gif': 'ç£•å¤´', '97.gif': 'å›å¤´', '98.gif': 'è·³ç»³', '99.gif': 'æŒ¥æ‰‹', '100.gif': 'æ¿€åŠ¨', '101.gif': 'è¡—èˆ', '102.gif': 'çŒ®å»', '103.gif': 'å·¦å¤ªæ', '104.gif': 'å³å¤ªæ', '105.gif': 'æ·¡å®š', '106.gif': 'æ™•', '107.gif': 'ä¸æ»¡', '108.gif': 'ç¡è§‰', '109.gif': 'å°è°ƒçš®', '110.gif': 'å’’éª‚', '111.gif': 'å‘æ€’', '112.gif': 'å·ç¬‘', '113.gif': 'å¾®ç¬‘', '114.gif': 'éœ‡æƒŠ', '115.gif': 'å›§' }; $('#Attach .Face').click(function(){ if($('#dvfaceImg').length\u0026gt;0){ $('#dvfaceImg').remove(); } var dvFace= $('\u0026lt;div id=\u0026quot;dvfaceImg\u0026quot; style=\u0026quot;width:370px;border:1px solid blue;background-color: white;position: absolute;\u0026quot;\u0026gt;\u0026lt;/div\u0026gt;').appendTo($('body')); //å’Œæœ‹å‹åˆ—è¡¨ç›¸åŒçš„æ“ä½œè¿‡ç¨‹ï¼ï¼ï¼ var dvXX=$(this).offset().left-100+'px'; var dvYY=$(this).offset().top+$(this).height()+'px'; //æœ€ç»ˆè®¾ç½®ä»–çš„åæ ‡ dvFace.css({\u0026quot;left\u0026quot;:dvXX,\u0026quot;top\u0026quot;:dvYY}); //æ˜¾ç¤º è¡¨æƒ… å…³é—­ $('\u0026lt;Span style=\u0026quot;float: left;\u0026quot;\u0026gt;Expression\u0026lt;/Span\u0026gt;').appendTo(dvFace); $('\u0026lt;Span style=\u0026quot;float: right;cursor: pointer; background-color: gray;\u0026quot;\u0026gt;close\u0026lt;/Span\u0026gt;').click(function(){ $(this).parent().remove();//åˆ é™¤å±‚ }).appendTo(dvFace); //æ˜¾ç¤ºè¡¨æƒ… var dvfaceimage= $('\u0026lt;div style=\u0026quot;clear: both;\u0026quot;\u0026gt;\u0026lt;/div\u0026gt;').appendTo(dvFace); for(var key in userFaces){ //æ˜¾ç¤ºçš„æ–‡ä»¶å¤¹è·¯å¾„å¾—è®¾ç½®æ­£ç¡® //æ³¨æ„ 1ï¼š userFaces[key]åœ¨ è¡¨æƒ…ä¸Šé¢çš„title // 2ï¼š å°æ‰‹åŠŸèƒ½ // 3ï¼š ç‚¹å‡»åŠŸèƒ½ å•æœºäº‹ä»¶ $('\u0026lt;Img src=\u0026quot;weiboPic/faces/'+key+'\u0026quot; title=\u0026quot;'+userFaces[key]+'\u0026quot; /\u0026gt;').mouseover(function(){ $(this).css('cursor','pointer'); }).click(function(){ //ä¸æ¸…æ¥š è¿™è¾¹ä¸ºä»€ä¹ˆè¿™æ ·å†™ åŒæ ·çš„ åœ¨friendä¹Ÿæ˜¯å¦‚æ­¤ //if($('#Msg').val()=='#Please write down the topic#'){ if($('#Msg').val()=='##'){ $('#Msg').val( '['+$(this).attr('title')+']'); }else{ $('#Msg').val($('#Msg').val()+'['+$(this).attr('title')+']'); } }).appendTo(dvfaceimage); } }); });  ```\n","date":1431327524,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327524,"objectID":"651a35331986c9b0becd24894b255629","permalink":"/blog/2015/05/11/jquery10-18jie-bi-ji-dai-ma-april5th/","publishdate":"2015-05-11T14:58:44+08:00","relpermalink":"/blog/2015/05/11/jquery10-18jie-bi-ji-dai-ma-april5th/","section":"archives","summary":"","tags":null,"title":"jQuery10-18èŠ‚ç¬”è®°ä»£ç April5th","type":"archives"},{"authors":null,"categories":["JSDom"],"content":"ç»­å…ˆå‰çš„JSDOM1-15:http://www.rupeng.com/forum/thread-45297-1-1.html\n21:å›¾ç‰‡ç§»åŠ¨ï¼Œè„±ç¦»æ–‡æ¡£æµçš„æ¡ˆä¾‹\nè„±ç¦»æ–‡æ¡£æµï¼š å¯¹è±¡.style.position=\u0026lsquo;absolute\u0026rsquo;; æ–°å»ºäº†ä¸€ä¸ªå›¾ç‰‡æ§ä»¶ï¼Œå¹¶è®©å…¶åœ¨é¡µé¢ä¸­éšé¼ æ ‡ç§»åŠ¨ã€‚\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; Let bird fly\u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; onload=function() { /* document.onmousemove=function() { var imObj = document.getElementById('im'); //è„±ç¦»æ–‡æ¡£æµ imObj.style.position='absolute'; imObj.style.left=window.event.clientX+'px'; imObj.style.top=window.event.clientY+'px'; }; */ document.getElementById('ak').onmouseover=function() { if(!document.getElementById('im1')) { var imgObj=document.createElement('img'); imgObj='im1'; imgObj.src='bird.png'; //è„±ç¦»æ–‡æ¡£æµ imgObj.style.position='absolute'; imgObj.style.left=this.offsetLeft+'px'; imgObj.style.top=this.offsetTop+this.offsetHeight+'px'; } }; }; \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;img id=\u0026quot;im\u0026quot; src=\u0026quot;bird.png\u0026quot;/\u0026gt; \u0026lt;A id=\u0026quot;ak\u0026quot; href=\u0026quot;http://www.baidu.com\u0026quot;\u0026gt;ç™¾åº¦\u0026lt;/A\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  22ï¼š å››ä¸ªæ¡ˆä¾‹\næ¡ˆä¾‹1ï¼šä¸€ä¸ªåˆ—è¡¨æ¡†è¿›è¡ŒåŠ¨æ€å±æ€§çš„èµ‹å€¼ å¹¶è·å–ç‚¹å‡»å¯¹è±¡çš„å€¼ æ³¨æ„ï¼šsetAttribute and gettAttributeçš„ç”¨æ³• å¾ªç¯æ·»åŠ æ‰€æœ‰è¡¨æ ¼çš„ç‚¹å‡»äº‹ä»¶ æ¡ˆä¾‹2ï¼šäº§ç”Ÿä¸€ä¸ªç™»é™†ç•Œé¢ æ³¨æ„ï¼šinnerTextå’ŒinnerHTMLçš„é…åˆä½¿ç”¨ ï¼Œè®¾ç½®æ§ä»¶çš„å†…å®¹ ä¸ºäº†å¢åŠ ç”¨æˆ·çš„ä½“éªŒæ„Ÿè§‰checkboxä¸€èˆ¬è®¾ç½®å¯¹è±¡.style.cursor=pointer createElement å’ŒappendChildçš„é…åˆä½¿ç”¨ æ¡ˆä¾‹3: å°å›¾å˜å¤§å›¾ æ³¨æ„ï¼šJSONæ•°æ®åº“çš„åˆ›å»º å¾ªç¯çš„æ˜¾ç¤ºå°å›¾ç‰‡ å›¾ç‰‡çš„onmouseover and onmouseoutäº‹ä»¶çš„å“åº” å±‚çš„style.display=none;çš„æ„æ€æ˜¯ä¸æ˜¾ç¤ºè¯¥å±‚ æ¡ˆä¾‹4: æœç´¢æ¡† æ³¨æ„ï¼šonfocus and onblur(é¼ æ ‡ç„¦ç‚¹ç¦»å¼€çš„äº‹ä»¶ï¼‰ ä¸€èˆ¬ä¼šä½¿ç”¨è®¾ç½®ä¸ºgrayï¼Œæ–‡æœ¬æ¡†ä¸º\u0026rsquo;è¯·è¾“å…¥æœç´¢å†…å®¹\u0026rsquo;; ä½¿ç”¨çš„æ—¶å€™è®¾ç½®ä¸ºblackï¼Œå¹¶ä¸”æ–‡æœ¬æ¡†ä¸ºç©ºã€‚\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; When click the button ,then generate the div\u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; // å­¦ä¼šæ·»åŠ å±‚ //æ•°æ®åº“ åŒ…å«ç…§ç‰‡ä¿¡æ¯ å…¶ä¸­å·¦è¾¹çš„keyæ˜¯å°ç…§ç‰‡ï¼Œå³è¾¹æ˜¯å¤§ç…§ç‰‡ä¿¡æ¯ var datasPic = { \u0026quot;mv/1-1.jpg\u0026quot;: [\u0026quot;mv/1.jpg\u0026quot;, \u0026quot;å°ä¸½\u0026quot;, \u0026quot;163cm\u0026quot;], \u0026quot;mv/2-1.jpg\u0026quot;: [\u0026quot;mv/2.jpg\u0026quot;, \u0026quot;å°çº¢\u0026quot;, \u0026quot;165cm\u0026quot;], \u0026quot;mv/3-1.jpg\u0026quot;: [\u0026quot;mv/3.jpg\u0026quot;, \u0026quot;å°èŠ±\u0026quot;, \u0026quot;150cm\u0026quot;] }; //æ¡ˆä¾‹1ï¼šä¸€ä¸ªåˆ—è¡¨æ¡†è¿›è¡ŒåŠ¨æ€å±æ€§çš„èµ‹å€¼ å¹¶è·å–ç‚¹å‡»å¯¹è±¡çš„å€¼ onload=function() { //ç‚¹å‡»åˆ—è¡¨ äº§ç”Ÿåˆ†æ•°æ¥ï¼ï¼ var tds=document.getElementById('nameRank').getElementsByTagName('td'); for(var i=0;i\u0026lt;tds.length;i++) { tds[i].setAttribute('score',(i+1)*20); tds[i].onclick=function() { alert(this.getAttribute('score')); }; } //æ¡ˆä¾‹2ï¼šäº§ç”Ÿä¸€ä¸ªç™»é™†ç•Œé¢ document.getElementById('generate').onclick=function() { //åˆ›å»ºä¸€ä¸ªå±‚ var dvObj=document.createElement('div'); dvObj.id='dv'; dvObj.style.width='300px'; dvObj.style.height='200px'; dvObj.style.marginBottom='200px'; dvObj.style.border='1px solid yellow'; document.body.appendChild(dvObj); //cåˆ›å»ºä¸¤ä¸ªPæ ‡ç­¾ var P1= document.createElement('p'); //æœ¬æƒ³ç€æ·»åŠ æ ‡ç­¾æ¥ç€ P1.innerText='ç”¨æˆ·å:'; var name=document.createElement('input'); name.type='text'; P1.appendChild(name); //ç¬¬äºŒä¸ªæ ‡ç­¾ var P2 = document.createElement('p'); //å¦™ç”¨innerHTMLä¿æŒå¯¹é½ï¼ P2.innerHTML='å¯† ç :'; var pwd=document.createElement('input'); pwd.type='password'; P2.appendChild(pwd); //å¤é€‰æ¡† var chk = document.createElement('input'); chk.type = 'checkbox'; chk.id = 'chkPwd'; var labelChk = document.createElement('label'); labelChk.innerText = 'è®°ä½æˆ‘çš„ç™»å½•çŠ¶æ€'; labelChk.setAttribute('for', chk.id); //è®¾ç½®å±æ€§ labelChk.style.cursor = 'pointer';//è®¾ç½®é¼ æ ‡çš„æ ·å¼ ç¼–ç¨‹æ‰‹çš„æ ·å¼ var pObj3 = document.createElement('p'); pObj3.appendChild(chk); pObj3.appendChild(labelChk); //ç™»é™†å’Œå–æ¶ˆæŒ‰é’® var btnLogin = document.createElement('input'); btnLogin.type = 'submit'; btnLogin.value = 'ç™»å½•'; btnLogin.marginRight='10px' var btnEsc = document.createElement('input'); btnEsc.type = 'button'; btnEsc.value = 'å–æ¶ˆ'; var pObj4 = document.createElement('p'); pObj4.appendChild(btnLogin); pObj4.appendChild(btnEsc); //æ·»åŠ æ§ä»¶ dvObj.appendChild(P1); dvObj.appendChild(P2); dvObj.appendChild(pObj3); dvObj.appendChild(pObj4); } //æ¡ˆä¾‹3: å°å›¾å˜å¤§å›¾ //0 å…ˆæœ‰äº†jsonæ•°æ®åº“ //1 ä¹Ÿå¯ä»¥å…ˆåŠ è½½å°å›¾ //2 var dvSObj=document.getElementById('dvSmall'); //å…ˆæŠŠå°å›¾ç»™æ˜¾ç¤ºå‡ºæ¥ for(var key in datasPic) { var imObj=document.createElement('img'); imObj.src=key; imObj.setAttribute('userKey',key); imObj.style.marginRight='10px';//ç›®çš„æ˜¯æ·»åŠ å³é—´è·/ dvSObj.appendChild(imObj); //æ·»åŠ å°å›¾çš„é¼ æ ‡çš„åˆ°æ¥äº‹ä»¶ imObj.onmouseover=function() { var arrs=datasPic[this.getAttribute('userKey')]; document.getElementById('dvBig').style.display='block'; document.getElementById('imBig').src=arrs[0]; document.getElementById('spName').innerText=arrs[1]; document.getElementById('spHeight').innerText=arrs[2]; }; //æ·»åŠ å°å›¾çš„é¼ æ ‡çš„ ç¦»å¼€äº‹ä»¶ imObj.onmouseout=function() { document.getElementById('dvBig').style.display='none'; }; } //æ¡ˆä¾‹4: æœç´¢æ¡† //è·å¾—ç„¦ç‚¹çš„äº‹ä»¶ document.getElementById('searchValue').onfocus=function() { if(this.style.color=='gray'\u0026amp;\u0026amp; this.value=='è¯·è¾“å…¥æœç´¢è¯') { this.style.color='black'; this.value=''; } } //å¤±å»ç„¦ç‚¹çš„äº‹ä»¶ document.getElementById('searchValue').onblur=function() { if(this.value=='') { this.style.color='gray'; this.value='è¯·æœç´¢æœç´¢å…³é”®è¯'; } } }; \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Table border=\u0026quot;1\u0026quot; id=\u0026quot;nameRank\u0026quot;\u0026gt; \u0026lt;Tr\u0026gt; \u0026lt;Td\u0026gt;ç¬¬ä¸€å\u0026lt;/Td\u0026gt; \u0026lt;Td\u0026gt;ç¬¬äºŒå\u0026lt;/Td\u0026gt; \u0026lt;Td\u0026gt;ç¬¬ä¸‰å\u0026lt;/Td\u0026gt; \u0026lt;Td\u0026gt;ç¬¬å››å\u0026lt;/Td\u0026gt; \u0026lt;Td\u0026gt;ç¬¬äº”å\u0026lt;/Td\u0026gt; \u0026lt;/Tr\u0026gt; \u0026lt;/Table\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;generate\u0026quot; value=\u0026quot;ç™»é™†æ \u0026quot;/\u0026gt; \u0026lt;Div id=\u0026quot;dvSmall\u0026quot;\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;!--display:none è¡¨ç¤ºä¸æ˜¾ç¤º ä¹Ÿå°±æ˜¯åˆšå¼€å§‹ä¸ä¼šæ˜¾ç¤ºdivå±‚--\u0026gt; \u0026lt;Div id=\u0026quot;dvBig\u0026quot; style=\u0026quot;background-Color:orange; border:1px solid yellow; width:200px;display:none;\u0026quot;\u0026gt; å¤§å¤´åƒ:\u0026lt;br/\u0026gt; \u0026lt;Img id=\u0026quot;imBig\u0026quot; src=\u0026quot;#\u0026quot; alt=\u0026quot;å¦‚æœæ²¡æœ‰å›¾ç‰‡ You will see me\u0026quot;/\u0026gt; å§“å:\u0026lt;Span id=\u0026quot;spName\u0026quot;\u0026gt;\u0026lt;/Span\u0026gt;\u0026lt;br/\u0026gt; å‡é«˜:\u0026lt;Span id=\u0026quot;spHeight\u0026quot;\u0026gt;\u0026lt;/Span\u0026gt;\u0026lt;br/\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;Div id=\u0026quot;search\u0026quot;\u0026gt; \u0026lt;Input type='text' value=\u0026quot;è¯·è¾“å…¥æœç´¢è¯\u0026quot; id=\u0026quot;searchValue\u0026quot; style=\u0026quot;color:gray\u0026quot;/\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  23 è¡¨æ ¼çš„æäº¤çš„ä¸¤ç§è§¦å‘æ–¹å¼\nsubmitæŒ‰é’®çš„click() formçš„submit() åŒºåˆ«ï¼š è°ƒç”¨submitæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶click(); è¿™ç§æƒ…å†µä¸‹ å¦‚æœonsubmitè¢«èµ‹å€¼äº†ï¼Œæ¯”å¦‚ //å¤„ç†clickçš„æäº¤äº‹ä»¶ type=subomitçš„click()äº‹ä»¶ä¼šè§¦å‘ onsubmitç›‘å¬å™¨ if(document.getElementById(\u0026lsquo;searchValue\u0026rsquo;).value==\u0026lsquo;Please input the search value\u0026rsquo;) { document.getElementById(\u0026lsquo;fm\u0026rsquo;).onsubmit=function() { return false; }; å¤åˆ¶ä»£ç \n é‚£ä¹ˆsubmitæŒ‰é’® å¤±å»ä½œç”¨ï¼Œå³ä½¿å†è¾“å…¥å†…å®¹ ä¹Ÿæ²¡ç”¨ï¼ï¼ document.getElementById('sm').click(); ä¹Ÿå°±æ˜¯click()çš„è°ƒç”¨éœ€è¦ç»è¿‡onsubmitçš„åŒ¿åå‡½æ•°è¿‡ç¨‹ã€‚ submit()ä¸ä¼šè§¦å‘ onsubmitçš„åŒ¿åå‡½æ•°ï¼Œå³ä½¿æ–‡æœ¬æ¡†æ²¡æœ‰å†…å®¹ä¹Ÿç›´æ¥æäº¤ã€‚ ç›´æ¥è¾¾åˆ°é«˜å±‚çš„è¡¨å•formï¼Œè¿›è¡Œæäº¤ï¼Œ  \u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; Test onclick() and onsubmit() \u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; onload=function() { document.getElementById('searchValue').onfocus=function() { if(this.style.color=='gray'\u0026amp;\u0026amp;this.value=='Please input the search value') { this.value=''; this.style.color='black'; } } document.getElementById('searchValue').onblur=function() { if(this.value=='') { this.value='Please input the search value'; this.style.color='gray'; } } //å¤„ç†clickçš„æäº¤äº‹ä»¶ type=subomitçš„click()äº‹ä»¶ä¼šè§¦å‘ onsubmitç›‘å¬å™¨ if(document.getElementById('searchValue').value=='Please input the search value') { document.getElementById('fm').onsubmit=function() { return false; }; } document.getElementById('dv').onclick=function() { //ç‚¹å‡»å±‚çš„ æ—¶å€™è°ƒç”¨submitçš„ç‚¹å‡»äº‹ä»¶ //è¿™ç§æƒ…å†µä¸‹ å³ä½¿å†è¾“å…¥å†…å®¹ ä¹Ÿæ²¡ç”¨ï¼ï¼ // document.getElementById('sm').click(); //submitä¸ä¼šè§¦å‘ onsubmitçš„åŒ¿åå‡½æ•° //ç›´æ¥è¾¾åˆ°é«˜å±‚çš„è¡¨å•formï¼Œè¿›è¡Œæäº¤ï¼Œ document.getElementById('fm').submit(); } document.getElementById('sm').onclick=function() { //this.click(); document.getElementById('sm').click(); } } \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Form action=\u0026quot;http://www.baidu.com\u0026quot; method=\u0026quot;get\u0026quot; id=\u0026quot;fm\u0026quot;\u0026gt; \u0026lt;Input type=\u0026quot;text\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;Please input the search value\u0026quot; id=\u0026quot;searchValue\u0026quot; style=\u0026quot;width:300px;height:20px;color:gray; border:1px solid red\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;submit\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;baidu\u0026quot; id=\u0026quot;sm\u0026quot;/\u0026gt; \u0026lt;Div id=\u0026quot;dv\u0026quot; style=\u0026quot;width:300px;height:200px;background-color:green;\u0026quot;\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;/Form\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  24ï¼šæ­£åˆ™è¡¨è¾¾å¼\n å¦‚æœæœ‰äº†// å•å¥æ³¨é‡Šç¬¦ï¼Œé‚£ä¹ˆnew RegExp('')å°±å¯ä»¥ä¸ç”¨äº† æ³¨æ„1ï¼š testå‡½æ•°ç±»ä¼¼äºjavaçš„matchå‡½æ•° execå‡½æ•°ç±»ä¼¼äºjavaçš„matcheså‡½æ•°ã€‚  ä¸‰ä¸ªåŠŸèƒ½ï¼š 1ï¼šæ‰¾åˆ°å…­ä½æ•°å­— 2ï¼šç¡®è®¤æ–‡æœ¬æ¡†çš„å†…å®¹æ˜¯å¦ä¸ºé‚®ç®±ï¼Œè‹¥æ˜¯ä¸ºçº¢è‰² 3ï¼šæ›¿æ¢æ“ä½œï¼Œæ”¯æŒé“¾å¼æ›¿æ¢ *.replace().replace\u0026hellip;.\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; Test Regex Expression \u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; var testString='12345'; //1 ç½‘é¡µå­—èŠ‚æ•°è¾ƒå¤š ä¸æ¨è var reg= new RegExp('\\\\d{5}'); alert(reg.test(testString)); //2 ç½‘é¡µå­—èŠ‚æ•°è¾ƒå°‘ æ¨è å¢åŠ ä½“éªŒæ€§ var reg=/\\d{5}/; // //ç±»ä¼¼.Netçš„ @ï¼ˆï¼‰å¯ä»¥ç›´æ¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ è€Œä¸éœ€è¦è€ƒè™‘å…·ä½“çš„è¯­è¨€ alert(reg.test(testString)); \u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; //è·å¾—æ‰€æœ‰åŒ¹é…çš„å†…å®¹ var msg='æ˜Œå¹³:102206,å¹³å’Œ:363708,ä¸­å›½ç”µä¿¡:10000'; var reg=/\\d{6}/g; var result; while(result=reg.exec(msg)) { alert(result); } \u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; onload=function() { document.getElementById('email').onblur=function() { // diç¬¬ä¸€ä¸ªé”™è¯¯ A-Z å†™æˆäº†a-z // ç¬¬äºŒä¸ªé”™è¯¯ var reg = å†™æˆäº† var=reg= var reg=/^[\\d\\w_.-]+@[\\d\\w]+([.][a-zA-Z]+){1,2}$/; //var reg=/^[0-9a-zA-Z_.-]+@[0-9a-zA-Z]+([.][a-zA-Z]+){1,2}$/; if(reg.test(this.value)) { this.style.backgroundColor='red'; alert('é‚®ç®±'); } } } \u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; var msg = ' å»æ‰å·¦å³ç©ºæ ¼ '; //æ³¨æ„// ä¸éœ€è¦ç”¨ å•å¼•å·æ‹¬èµ·æ¥ msg = msg.replace(/^\\s+/,'').replace(/\\s+$/,''); alert('==='+msg+'==='); \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Input type=\u0026quot;text\u0026quot; id=\u0026quot;email\u0026quot; name=\u0026quot;\u0026quot; value=\u0026quot;\u0026quot;/\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  25:æµ‹è¯•é”®ç›˜çš„keyCode\n æ³¨æ„å¦‚æœä¸æ”¾åœ¨onloadä¸­è°ƒç”¨æ§ä»¶æ²¡æœ‰æ•ˆæœï¼Œä¸ºundefined  \u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt;Test Tab Shift \u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; //window.event.keyCode= //å¦‚æœä¸æ”¾åœ¨onloadä¸­æ˜¯æ²¡æœ‰æ•ˆæœ onload=function() { var texts=document.getElementsByName('name'); for(var i=0;i\u0026lt;texts.length;i++) { texts[i].onkeydown=function() { //alert(window.event.keyCode); //è®©eneteé”®å…·å¤‡ tabçš„å·¥å‘¢è¿‡ if(window.event.keyCode==13) { //IEå¯ä»¥å®ç° window.event.keyCode=9; //googleå¦‚ä½•å®ç° } }; } }; \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;input type=\u0026quot;text\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;\u0026quot;/\u0026gt; \u0026lt;input type=\u0026quot;text\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;\u0026quot;/\u0026gt; \u0026lt;input type=\u0026quot;text\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;\u0026quot;/\u0026gt; \u0026lt;input type=\u0026quot;text\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;\u0026quot;/\u0026gt; \u0026lt;input type=\u0026quot;text\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;\u0026quot;/\u0026gt; \u0026lt;input type=\u0026quot;text\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;\u0026quot;/\u0026gt; \u0026lt;input type=\u0026quot;text\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;\u0026quot;/\u0026gt; \u0026lt;input type=\u0026quot;text\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;\u0026quot;/\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;Html\u0026gt;  26:æµ‹è¯•å¯†ç çš„å¼ºå¼±\nå¯†ç å¼ºå¼±ç­‰çº§åå®šï¼š 1ï¼šåˆå§‹çš„å¯†ç ç­‰çº§ä¸º0 2ï¼šå½“åªå‡ºç°æ•°å­—æˆ–è€…åªå‡ºç°å­—æ¯æˆ–è€…åªå‡ºç°ç‰¹æ®Šå­—ç¬¦åˆ™å¯†ç ç­‰çº§åŠ 1 3ï¼š å¦‚æœæ•°å­—ã€å­—æ¯ã€ç‰¹æ®Šå­—ç¬¦ ä¸‰è€…æœ‰ä¸¤ç§å‡ºç° åˆ™å†åŠ ä¸Š1\n4ï¼š å¦‚æœéƒ½å‡ºç° åœ¨åŸå…ˆåŸºç¡€ä¸Šå†åŠ 1 5ï¼š å¦‚æœä½æ•°å°äº6 ï¼ 1 æ‰€æœ‰æœ€å°‘åº”è¯¥æ˜¯0\nç¬¬ä¸€ï¼šè·å–æ–‡æœ¬æ¡†çš„å†…å®¹\nç¬¬äºŒï¼šè¿›è¡Œå‡½æ•°çš„çº§åˆ«éªŒè¯ ç¬¬ä¸‰ï¼šè®¾ç½®è¡¨æ ¼çš„èƒŒæ™¯é¢œè‰²\næ³¨æ„1 if(msg.match(/[^\\d\\w]/)) //æ—¢ä¸æ˜¯æ•°å­—ä¹Ÿä¸æ˜¯å­—æ¯ æ³¨æ„2 åœ¨è¿›è¡Œ æ–°çš„çº§åˆ«çš„è®¾ç½®æ—¶å€™éœ€è¦å¾ªç¯æŠŠè¡¨æ ¼èƒŒæ™¯é¢œè‰²è®¾ç½®ä¸ºwhite\nfor(var i=0;i\u0026lt;tds.length;i++) { tds[i].style.backgroundColor='white'; }  å…·ä½“å®éªŒå¦‚ä¸‹:\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; Test the strong week and medium of the password \u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; /* 1ï¼šåˆå§‹çš„å¯†ç ç­‰çº§ä¸º0 2ï¼šå½“åªå‡ºç°æ•°å­—æˆ–è€…åªå‡ºç°å­—æ¯æˆ–è€…åªå‡ºç°ç‰¹æ®Šå­—ç¬¦åˆ™å¯†ç ç­‰çº§åŠ 1 3ï¼š å¦‚æœæ•°å­—ã€å­—æ¯ã€ç‰¹æ®Šå­—ç¬¦ ä¸‰è€…æœ‰ä¸¤ç§å‡ºç° åˆ™å†åŠ ä¸Š1 4ï¼š å¦‚æœéƒ½å‡ºç° åœ¨åŸå…ˆåŸºç¡€ä¸Šå†åŠ 1 5ï¼š å¦‚æœä½æ•°å°äº6 ï¼ 1 æ‰€æœ‰æœ€å°‘åº”è¯¥æ˜¯0 */ function getPasswordLevel(msg) { var level=0; if(msg.match(/\\d/)) { level++; //å¦‚æœåŒ¹é…æ•°å­—åˆ™åŠ ä¸Š1 } if(msg.match(/\\w/)) { level++; //å¦‚æœä¹Ÿæ‰¾åˆ°å­—æ¯ } if(msg.match(/[^\\d\\w]/)) //æ—¢ä¸æ˜¯æ•°å­—ä¹Ÿä¸æ˜¯å­—æ¯ { level++; } if(msg.length\u0026lt;=6) { level--; } return level; } onload=function() { document.getElementById('password').onkeyup=function() { var tds=document.getElementById('tr1').getElementsByTagName('td'); if(this.value.length\u0026gt;0) //valueçš„å€¼çš„é•¿åº¦ { for(var i=0;i\u0026lt;tds.length;i++) { tds[i].style.backgroundColor='white'; } var r =getPasswordLevel(this.value); if(r \u0026lt;=1) { tds[0].style.backgroundColor='red'; } else if(r ==2) { tds[0].style.backgroundColor='yellow'; tds[1].style.backgroundColor='yellow'; } else if(r ==3) { tds[0].style.backgroundColor='blue'; tds[1].style.backgroundColor='blue'; tds[2].style.backgroundColor='blue'; } } } } \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Input type=\u0026quot;text\u0026quot; id=\u0026quot;password\u0026quot; value=\u0026quot;\u0026quot; name=\u0026quot;\u0026quot;\u0026gt; \u0026lt;Table id=\u0026quot;tb\u0026quot;\u0026gt; \u0026lt;Tr id=\u0026quot;tr1\u0026quot;\u0026gt; \u0026lt;Td\u0026gt;å¼±\u0026lt;/Td\u0026gt; \u0026lt;Td\u0026gt;ä¸­\u0026lt;/Td\u0026gt; \u0026lt;Td\u0026gt;å¼º\u0026lt;/Td\u0026gt; \u0026lt;/Tr\u0026gt; \u0026lt;/Table\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  27:ç™¾åº¦æœç´¢\nåŠŸèƒ½1ï¼š è¾“å…¥ä¸€ä¸ªå­—å¯ä»¥å‡ºç°æ™ºèƒ½æç¤ºæ¿ï¼ˆæš‚æ—¶æ˜¯æŒ‡è°ƒç”¨JSONçš„æ•°æ® è€Œä¸æ˜¯æ•°æ®åº“çš„å†…å®¹ï¼‰ åŠŸèƒ½2ï¼šå¯ä»¥è·å–æ™ºèƒ½æç¤ºæ¿çš„å†…å®¹ï¼Œå¹¶é¼ æ ‡æ‰«è¿‡çš„æ—¶å€™å‡ºç°çº¢è‰² ç¦»å¼€ä¸ºç™½è‰² ç‚¹å‡»åˆ™æŠŠè¯¥å¯¹è±¡å†…å®¹é™„åˆ°æœç´¢æ¡†ä¸­\næ³¨æ„ç‚¹: èƒ½åŠ›æ ¡éªŒï¼ˆæš‚æ—¶ä¸å¤ªæ¸…æ¥š userAgent)\nå…·ä½“å®ç°å¦‚ä¸‹ï¼š\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt;Test Search by Baidu \u0026lt;/Title\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; #main { width:250px; height:200px; margin-left:200px; margin-top:300px; background-color:green; } \u0026lt;/style\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; onload=function() { var keyWords = { \u0026quot;å°æ˜\u0026quot;: [\u0026quot;å°æ˜æ˜¯è°\u0026quot;, \u0026quot;å°æ˜å¾ˆæœºæ™º\u0026quot;, \u0026quot;å°æ˜æ»šå‡ºå»\u0026quot;], \u0026quot;åœ°ä¸»\u0026quot;: [\u0026quot;æ–—åœ°ä¸»\u0026quot;, \u0026quot;åœ°ä¸»è¿˜æœ‰æ²¡æœ‰\u0026quot;, \u0026quot;åœ°ä¸»å°±æ˜¯åœŸè±ª\u0026quot;], \u0026quot;æŒ–\u0026quot;: [\u0026quot;æŒ–æ˜æœº\u0026quot;, \u0026quot;æŒ–æ˜æœºæŠ€æœ¯é‚£åŠ å¼º\u0026quot;, \u0026quot;æŒ–åœŸè±†\u0026quot;], \u0026quot;æˆ‘\u0026quot;: [\u0026quot;æˆ‘çˆ±åŒ—äº¬\u0026quot;, \u0026quot;æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨\u0026quot;, \u0026quot;æˆ‘æ˜¯è‹\u0026quot;], \u0026quot;è‹\u0026quot;:[\u0026quot;è‹å¤©å¤§åœ°\u0026quot;,\u0026quot;è‹è€å¸ˆæ˜¯å¤§å®¶çš„\u0026quot;,\u0026quot;è‹å¤©æœ‰äº•ç‹¬è‡ªç©º\u0026quot;], \u0026quot;å¹³\u0026quot;:[\u0026quot;å¹³å‡¡çš„ä¸–ç•Œ\u0026quot;,\u0026quot;å¹³ç™½æ— æ•…\u0026quot;,\u0026quot;å¹³å¸¸\u0026quot;] }; function funShow() { //å¦‚æœåœ¨æ•°æ®åº“ä¸­å­˜åœ¨çš„è¯ åˆ™åˆ›å»ºä¸€ä¸ªå±‚ if(keyWords[this.value]) { //create the div if(document.getElementById('dv')) { //ä¸æ˜¯ ç›´æ¥'dv' document.body.removeChild(document.getElementById('dv')); } //å¼€å§‹åˆ›å»º var divObj=document.createElement('div'); divObj.id='dv'; divObj.width='300px'; //ä¸è¦å°‘äº† è„±ç¦»æ–‡æ¡£æµï¼Œæ‰å¯ä»¥é‡æ–°è®¾ç½®åæ ‡ divObj.style.position='absolute'; divObj.style.border='1px solid purple'; divObj.style.left=this.offsetLeft+'px'; //divObj.style.left=tihs.offsetLeft+'px'; divObj.style.top=this.offsetHeight+this.offsetTop+'px'; document.body.appendChild(divObj); for(var i=0; i\u0026lt; keyWords[this.value].length;i++) { var pObj=document.createElement('p'); pObj.innerHTML=keyWords[this.value][i]; pObj.style.margin='5px'; divObj.appendChild(pObj); pObj.onmouseover=function() { this.style.backgroundColor='red'; this.style.cursor='pointer'; } pObj.onmouseout=function() { this.style.backgroundColor=''; }; //å¢åŠ äº†ç‚¹å‡»çš„äº‹ä»¶ pObj.onclick=function() { //alert(this.value); document.getElementById('searchValue').value=this.innerText; } } } } //firefoxä¸‹æ£€æµ‹çŠ¶æ€æ”¹å˜åªèƒ½ç”¨oninput,ä¸”éœ€è¦ç”¨addEventListeneræ¥æ³¨å†Œäº‹ä»¶ã€‚ if (/msie/i.test(navigator.userAgent)) //ieæµè§ˆå™¨ { document.getElementById('searchValue').onpropertychange = funShow; } else {//éieæµè§ˆå™¨ï¼Œæ¯”å¦‚Firefox document.getElementById('searchValue').addEventListener(\u0026quot;input\u0026quot;, funShow, false); } } \u0026lt;/script\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Div id=\u0026quot;main\u0026quot; \u0026gt; \u0026lt;Input type=\u0026quot;text\u0026quot; name=\u0026quot;\u0026quot; id=\u0026quot;searchValue\u0026quot; value=\u0026quot;\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;\u0026quot; id=\u0026quot;tijiao\u0026quot; value=\u0026quot;Baidu It\u0026quot;/\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  28ï¼šJSå¸¸ç”¨ä¹ æƒ¯\nå¤šç”¨jså†…éƒ¨çš„å‡½æ•° å°‘ç”¨å…¨å±€å˜é‡ åˆ©ç”¨æ•°æ®ç»“æ„æ¥å®šä¹‰å¯¹è±¡ å°½å¯èƒ½ä½¿ç”¨switchä»£æ›¿else-ifè¯­å¥ å‡å°‘å­—èŠ‚æ•°ï¼Œå¢åŠ ç”¨æˆ·ä½“éªŒ\n29ï¼šFireFox(FF)å’ŒIEçš„ä¸€äº›ä¸åŒç‚¹\nIE:innerText FF:textContent IE:srcElement(äº‹ä»¶æºï¼‰ FFï¼štarget IE:attachEvent FF:addEventListener æ¥ç»‘å®šäº‹ä»¶ http://www.360doc.com/content/09/0319/12/16915_2855107.shtml\nJQueryæ˜¯ä¸€ä¸ªå¥½ä¸œè¥¿ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†ç»Ÿä¸€ä¸åŒæµè§ˆå™¨ä½¿ç”¨DOMçš„ä¸åŒç‚¹ï¼Œå±è”½äº†ä¸å‹å¥½çš„åŠŸèƒ½ï¼ è¿™ä¹Ÿæ˜¯ä¸‹é˜¶æ®µçš„å­¦ä¹ ç›®æ ‡ã€‚\n","date":1431327524,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327524,"objectID":"7de10887365b5319e0f7ed2a511d6af1","permalink":"/blog/2015/05/11/jsdom14-19jie-bi-ji-dai-ma-april1th/","publishdate":"2015-05-11T14:58:44+08:00","relpermalink":"/blog/2015/05/11/jsdom14-19jie-bi-ji-dai-ma-april1th/","section":"archives","summary":"","tags":null,"title":"JSDOM14-19èŠ‚ç¬”è®°ä»£ç April1th","type":"archives"},{"authors":null,"categories":["JSDom"],"content":"è¿æ¥åˆ°å‰æ–‡JavaScript 7-11èŠ‚ç¬”è®°ä»£ç \n8: æ³¨å†Œå’Œè°ƒç”¨çš„ä¸åŒï¼š æ³¨å†Œ Onclick=function(){}; //åŒ¿åå‡½æ•°çš„æ³¨å†Œè¡Œä¸º Onclick=ff; è°ƒç”¨ Onclick=ff();\n9:è®¡æ—¶å™¨ setIntervalåå¤æ€§è®¡æ—¶å™¨ï¼ˆéšç€ä¸€å®šæ—¶é—´ä¹‹å å†è·³å‡ºæ¥ï¼‰\nVar setId=setInterval(function() { Alert(â€˜ä½ åå‡½æ•°â€™); }ï¼Œ1000); clearInterval(setId); setTimeoutä¸€æ¬¡æ€§è®¡æ—¶å™¨ï¼š Var setID= setTimeOut(function() { Alert(â€˜è¿™æ˜¯ä¸€æ¬¡æ€§è®¡æ—¶å™¨â€™); },1000); clearTimeOut(setId);  è®¡æ—¶å™¨å°æ¡ˆä¾‹1ï¼š\nonload=function() { var i = 10; setIntervar(function() { i--; var btnObj=document.getElementById('btn');//è·å¾—btnå¯¹è±¡ btnObj.value=i;//è®¾ç½®è¯¥å¯¹è±¡çš„valueå€¼å³å¯ï¼ },1000); }  ç»è¿™ä¹ˆä¸€å†™ï¼š\nè§„å¾‹ï¼šæ‰€æœ‰çš„æ ‡ç­¾éƒ½å¯ä»¥æœ‰id-valueå¯¹ æˆ–è€…name-valueå¯¹è±¡ æˆ–è€…class-valueå¯¹ å®Œå…¨å¯ä»¥é€šè¿‡documentå¯¹è±¡è·å¾—æ‰€æœ‰çš„æ ‡ç­¾å…ƒç´ çš„idï¼Œname,classè¿›è¡Œå¯¹åº”æ ‡ç­¾å†…å®¹çš„è®¾ç½®\nè®¡æ—¶å™¨å°æ¡ˆä¾‹2ï¼š //è·‘é©¬ç¯æ•ˆæœ\nsetIntervale(function() { var tt=document.title; document.title = tt.substring(1)+tt.substr(0,1); //1-å°¾éƒ¨ + 0-1çš„å­—ç¬¦ },1000 );  10 é¡µé¢åŠ è½½äº‹ä»¶ï¼ˆ3ä¸ªï¼‰ å‰é¢æ¥è§¦æœ€å¤šçš„å°±æ˜¯onload ,å¦å¤–è¿˜æœ‰onunload,onbeforeload Onload:é¡µé¢åŠ è½½åè§¦å‘ Onunload é¡µé¢é€€å‡ºåè§¦å‘ Onbeforeunload: é¡µé¢å…³é—­ä¹‹å‰è§¦å‘ï¼ˆå‘è¡¨å¸–å­ å’Œ ä½ ç¡®å®šé€€å‡ºï¼Ÿï¼‰\n11 åˆ·æ–°åï¼Œè¿”å›çš„é¡µé¢ å›é¡¾window.location.href(â€˜www.baidu.comâ€™); ç±»ä¼¼äºwindow.navigaete(â€˜â€™)\n12 Document.writeçš„ä¸¤ä¸ªä½œç”¨ åŠ¨æ€çš„åˆ›å»ºæ§ä»¶(ä½†æ˜¯åªèƒ½åœ¨é¡µé¢åŠ è½½æ—¶å€™åŠ¨æ€åˆ›å»º ) ä½†æ˜¯æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼šåœ¨IEä¸­ä¼šåˆ æ‰ä¹‹å‰çš„æ§ä»¶æ ‡ç­¾ï¼Œåœ¨æºä»£ç æµè§ˆæ—¶å€™ï¼Œå‘ç°åŸå…ˆçš„æ ‡ç­¾éƒ½æ²¡æœ‰äº† é•¶åµŒå¹¿å‘Š\n1.æ‰“å¼€ news.baidu.com/newscode\nè¾“å…¥å…³é”®å­—è·å¾—æ–°é—»çš„ä»£ç  2.å¤åˆ¶ä»£ç  ä»£ç åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š æ ·å¼éƒ¨åˆ†ï¼š\n\u0026lt;style type=text/css\u0026gt; div{font-size:12px;font-family:arial}.baidu{font-size:14px;line-height:24px;font-family:arial} a,a:link{color:#0000cc;} .baidu span{color:#6f6f6f;font-size:12px} a.more{color:#008000;}a.blk{color:#000;font-weight:bold;}\u0026lt;/style\u0026gt;  Jsè„šæœ¬éƒ¨åˆ†ï¼š\n\u0026lt;script language=\u0026quot;JavaScript\u0026quot; type=\u0026quot;text/JavaScript\u0026quot; src=\u0026quot;http://news.baidu.com/ns?word=title%3A%E9%A3%8E%E5%8A%9B%E5%8F%91%E7%94%B5\u0026amp;tn=newsfcu\u0026amp;from=news\u0026amp;cl=2\u0026amp;rn=5\u0026amp;ct=0\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;  è¯´æ˜srcå…¶å®å°±æ˜¯document.writeçš„å®ç°ï¼ï¼ä½†æ˜¯ä¸ºä»€ä¹ˆï¼ŸåŸç†æš‚æ—¶ä¸çŸ¥é“\næŸ¥è¯¢srcé‡Œé¢å†…å®¹çš„æ–¹å¼ï¼š 1ï¼šnotepad 2ï¼šopen-?é»è´´è¿› srcçš„åœ°å€ 3ï¼š å°±å¯ä»¥åœ¨è®°äº‹æœ¬çœ‹åˆ°srcæ‰€ä»£è¡¨çš„æ–°é—»å†…å®¹ï¼Œä»–å…¶å®å°±æ˜¯document.write()çš„å†…å®¹ï¼ä¸ºäº†ä¿è¯ç™¾åº¦æ›´æ–°æ–°é—»çš„æ—¶å€™ä»–ä¹Ÿèƒ½æ›´æ–°æ–°é—»ï¼Œæ‰€ä»¥é‡‡ç”¨è¿™ç§document.write()æ¥å®ç°\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; onload=function() { //ç¬¬ä¸€ä¸ªåŠŸèƒ½åŠ¨æ€åŠ è½½æ§ä»¶æ ‡ç­¾ ä½†æ˜¯åœ¨IEä¸­ä¼šä½¿å…¶ä»–çš„æ§ä»¶æ¶ˆå¤± //då½“ç„¶è¿™è¾¹åŠ è½½ ä¼šæŠŠåŸå…ˆçš„é¡µé¢çš„æ§ä»¶ç»™éšè—æ‰ï¼ï¼ // document.write('\u0026lt;Font color=\u0026quot;red\u0026quot; size=\u0026quot;6\u0026quot;\u0026gt;Today is \u0026lt;/font\u0026gt;'); // document.write('\u0026lt;Input type=\u0026quot;button\u0026quot; value=\u0026quot;click me\u0026quot;\\\u0026gt;'); } \u0026lt;/script\u0026gt; \u0026lt;style type=text/css\u0026gt; div{font-size:12px;font-family:arial}.baidu{font-size:14px;line-height:24px;font-family:arial} a,a:link{color:#0000cc;} .baidu span{color:#6f6f6f;font-size:12px} a.more{color:#008000;}a.blk{color:#000;font-weight:bold;}\u0026lt;/style\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;script language=\u0026quot;JavaScript\u0026quot; type=\u0026quot;text/JavaScript\u0026quot; src=\u0026quot;http://news.baidu.com/ns?word=title%3A%E9%A3%8E%E5%8A%9B%E5%8F%91%E7%94%B5\u0026amp;tn=newsfcu\u0026amp;from=news\u0026amp;cl=2\u0026amp;rn=5\u0026amp;ct=0\u0026quot;\u0026gt; \u0026lt;/script\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  13 è·å¾—é¡µé¢å…ƒç´ çš„ä¸‰å¼ æ–¹æ³• Document.getElementById(â€˜btnâ€™)\u0026mdash;-\u0026gt;æœ€å¸¸ç”¨çš„æ–¹å¼ Document.getElementByName(â€˜fdsâ€™) \u0026mdash;-\u0026gt;name=â€fdsâ€ Document.getElementByTagName(â€˜Inputâ€™)\u0026mdash;-\u0026gt;æ ‡ç­¾å\n14è·å–åæ ‡ç‚¹ é¡¶çº§å¯¹è±¡windowåŒ…å«ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„å¯¹è±¡eventå¯ä»¥ç”±æ­¤è·å¾—å½“å‰å¯¹è±¡ã€é¡µé¢ã€å±å¹•\n1ï¼šå½“å‰å¯¹è±¡ä½œä¸ºå‚è€ƒç‚¹ \u0026ndash;\u0026gt;offsetX|Y 2ï¼šå½“å‰é¡µé¢ä½œä¸ºå‚è€ƒç‚¹ \u0026mdash;\u0026gt;clientX|Y 3ï¼šï¼šå½“å‰å±å¹•ä½œä¸ºå‚è€ƒç‚¹\u0026ndash;\u0026gt;screenX|Y\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt;hellow\u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; // alert(document.getElementById('btn').titleLabel.text) // alert(window.event.button); alert(screen.width+','+screen.height); onload=function() { document.getElementById('ak').onclick=function() { alert(new Date().toLocaleTimeString()); window.event.returnValue=false;//IE Opera googleæ”¯æŒ ç«ç‹ä¸æ”¯æŒ } document.getElementById('dv').onmousemove=function() { //é²æ£’æ€§æœ€å¥½çš„å‚æ•° if(arguments.length!=0) { //ç«ç‹ google IEä¸è¡Œ document.getElementById('ipClient').value=arguments[0].clientX+','+arguments[0].clientY; }else { document.getElementById('ipClient').value=event.clientX+','+event.clientY; } //ä¹Ÿå¯ä»¥å¦å¤–ä¸€ç§é²æ£’æ€§çš„ä¼˜åŒ– //èƒ½åŠ›æ£€æµ‹æ–¹å¼ï¼ if(window.event)//åˆ¤æ–­å¦‚æœå­˜åœ¨åˆ™æ˜¯IEä¸å­˜åœ¨åˆ™æ˜¯ç«ç‹ window.eventæ˜¯IEä¸‹çš„é‡è¦çš„å±æ€§ { document.getElementById('ipClient2').value=event.clientX+','+event.clientY; }else { document.getElementById('ipClient2').value=arguments[0].clientX+','+arguments[0].clientY; } //ç«å¼§+googleå¯ä»¥é€šè¿‡ IEä¸è¡Œ //ä¸‹é¢ä»£ç googleå’ŒIEæ”¯æŒ //ç›¸å¯¹äºé¡µé¢çš„å·¦ä¸Šè§’ document.title=event.clientX+','+event.clientY; //ç›¸å¯¹äºå±å¹•çš„å·¦ä¸Šè§’ document.getElementById('btn').value=event.screenX+','+event.screenY; document.getElementById('ip1').value=event.screenX+','+event.screenY; //ç›¸å¯¹äºå½“å‰å¯¹è±¡çš„å·¦ä¸Šè§’ï¼ˆthis)å¯¹è±¡ document.getElementById('ip').value=event.offsetX+','+event.offsetY; } } \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Div id=\u0026quot;dv\u0026quot; color=\u0026quot;red\u0026quot;\u0026gt; \u0026lt;button type=\u0026quot;button\u0026quot; id=\u0026quot;btn\u0026quot; class=\u0026quot;button\u0026quot;\u0026gt; å±å¹•å€¼ \u0026lt;/button\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;ipClient\u0026quot; value=\u0026quot;é¡µé¢å·¦ä¸Šè§’åç§»\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;ipClient2\u0026quot; value=\u0026quot;é¡µé¢å·¦ä¸Šè§’åç§»\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;ip\u0026quot; value=\u0026quot;å¯¹è±¡çš„å·¦ä¸Šè§’åç§»\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;ip1\u0026quot; value=\u0026quot;å±å¹•çš„åç§»åæ ‡\u0026quot;/\u0026gt; hello \u0026lt;/Div\u0026gt; \u0026lt;Div\u0026gt; \u0026lt;A id=\u0026quot;ak\u0026quot; href=\u0026quot;www.baidu.com\u0026quot;\u0026gt;ç™¾åº¦\u0026lt;/A\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  15ï¼šå‰ªåˆ‡æ¿clipboard\nå½“åœ¨ç½‘é¡µå¤åˆ¶çš„æ—¶å€™æˆ–è€…ctrl+Cçš„æ—¶å€™ï¼Œä¼šæ¿€æ´»bodyçš„oncopyå‡½æ•°ã€‚ å½“åœ¨ç½‘é¡µé»è´´çš„æ—¶å€™æˆ–è€…ctrl+Vçš„æ—¶å€™ï¼Œä¼šæ¿€æ´»bodyçš„onpasteå‡½æ•°ã€‚ ç”±æ­¤å¯ä»¥æ¨¡æ‹Ÿé¡µé¢çš„è¿›åˆ¶å¤åˆ¶å’Œé»è´´çš„æ¡ˆä¾‹ï¼Œå…·ä½“å¦‚ä»£ç æ‰€ç¤ºï¼š\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt;Test copy clipdata\u0026lt;/Title\u0026gt; \u0026lt;script type='text/javascript'\u0026gt; // ä¸€å¤åˆ¶åˆ™æ¿€æ´»oncopyå‡½æ•° /* onload=function() { document.body.oncopy=function() { alert('ä¸è®©å¤åˆ¶'); return false; }; document.getElementById('txt').onpaste=function() { alert('ä¸èƒ½é»è´´'); return false }; }; */ onload=function() { document.body.oncopy=function() { setTimeout(function() { //IEæ”¯æŒï¼ï¼ opera ç«ç‹ä¸æ”¯æŒ //å‡ºç°æ­¤é”™è¯¯æ˜¯å› ä¸º window.clipboardData ä¸º IE ä¸“æœ‰ï¼Œå…¶ä»–æµè§ˆå™¨å‡æ²¡æœ‰æ­¤å¯¹è±¡ã€‚ if(window.clipboardData) { var dataFromClip=clipboardData.getData('text')+'ä½ è¿™ä¸ªæ‹·è´å…š'; alert(dataFromClip); clipboardData.setData('text', dataFromClip); }else { alert('Operaä¸çŸ¥é“å¦‚ä½•åšäº† Opera æ— æ“ä½œå‰ªè´´æ¿çš„å¯¹è±¡ã€‚'); // window.location=dataFromClip; alert('\u0026lt;Strong\u0026gt;å¤åˆ¶\u0026lt;/Strong\u0026gt;æˆåŠŸï¼') return false; } },10); }; }; document.onclick=function() { document.write('hello'); } \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Input type=\u0026quot;text\u0026quot; id=\u0026quot;txt\u0026quot; value=\u0026quot;\u0026quot; /\u0026gt; good weather! \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  16ï¼šthiså’Œäº‹ä»¶æºsrcElement thisåªè®°å½•å½“å‰å¯¹è±¡çš„id alert(window.event.srcElement.id) åªè®°å½•æœ€åˆåŠ è½½å®Œbodyç¬¬ä¸€æ¬¡ç‚¹å‡»çš„idï¼›\nè€ŒsrcElementå…¶å®æ˜¯å¯ä»¥å’Œäº‹ä»¶å†’æ³¡çš„è§„å¾‹ç›¸ç»“åˆçš„ã€‚ äº‹ä»¶å†’æ³¡æ˜¯æŒ‡å†…å±‚äº‹ä»¶çš„è§¦å‘ï¼Œä¼šç”±å†…è‡³å¤–çš„è§¦å‘å¤–å±‚äº‹ä»¶ã€‚ ä¸ºäº†åªæ˜¯æ˜¾ç¤ºæœ€å†…å±‚çš„äº‹ä»¶ï¼Œå¯ä»¥ç”¨srcElement.id,æ¯”å¦‚ï¼š\næ³¨æ„ç‚¹ï¼š å¦‚æœtext/javscript åˆ™ ä¸ä¼šå»æ£€æŸ¥ fucntionçš„é”™è¯¯ï¼å¦‚æœå†™æˆtext/javascript åˆ™å®¢æˆ·ç«¯æµè§ˆå™¨ä¼šå»æ£€æŸ¥ jsçš„è¯­æ³•ã€‚ ä¸€èˆ¬è§„å¾‹ï¼š ä¸€å®šè¦æ³¨æ„ styleé‡Œé¢ç”¨çš„æ˜¯ background-color è€Œ åœ¨jsä¸­ç”¨çš„æ˜¯ backgroundColor ä¸¤è€…æ˜¯ä¸åŒçš„å†™æ³• å¹¶ä¸”è¿™ä¸ªæ˜¯ä¸€ä¸ªåŸºæœ¬çš„è§„å¾‹ï¼ jsä¸­å»é™¤äº†ç ´æŠ˜å· ç„¶åå¤§å†™åä¸€ä¸ªå•è¯é¦–å­—æ¯ã€‚\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt;äº‹ä»¶å†’æ³¡ç¨‹åº\u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; // å¦‚æœtext/javscript åˆ™ ä¸ä¼šå»æ£€æŸ¥ fucntionçš„é”™è¯¯ï¼å¦‚æœå†™æˆtext/javascript //åˆ™å®¢æˆ·ç«¯æµè§ˆå™¨ä¼šå»æ£€æŸ¥ jsçš„è¯­æ³•ï¼ onload=function() { document.getElementById('div1').onclick=function() { // alert(this.id); alert(window.event.srcElement.id); }; document.getElementById('p1').onclick=function() { alert(this.id); }; document.getElementById('str1').onclick=function() { alert(this.id); //opera IEå¯ä»¥ï¼ window.event.cancelBubble=true; // ç«ç‹e.stopPropagation(); }; }; \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;!--ä¸€å®šè¦æ³¨æ„ styleé‡Œé¢ç”¨çš„æ˜¯ background-color è€Œ åœ¨jsä¸­ç”¨çš„æ˜¯ backgroundColor ä¸¤è€…æ˜¯ä¸åŒçš„å†™æ³• å¹¶ä¸”è¿™ä¸ªæ˜¯ä¸€ä¸ªåŸºæœ¬çš„è§„å¾‹ï¼ jsä¸­å»é™¤äº†ç ´æŠ˜å· ç„¶åå¤§å†™åä¸€ä¸ªå•è¯é¦–å­—æ¯--\u0026gt; \u0026lt;Div id=\u0026quot;div1\u0026quot; style=\u0026quot;width:300px;height:200px;background-color:red;cursor:pointer;\u0026quot;\u0026gt; \u0026lt;!--\u0026lt;Div id=\u0026quot;div1\u0026quot; style=\u0026quot;width:300px;height:200px;backgroundColor=red;cursor:pointer;\u0026quot;\u0026gt; ä¸€å®šè¦æ³¨æ„ä¸è¦å†™æˆ=å·å½¢å¼ styleé‡Œé¢å†™æˆjsonå½¢å¼--\u0026gt; \u0026lt;!--\u0026lt;P id= \u0026quot;p1\u0026quot; style=\u0026quot;width:100px;height:100px;background-color:blue;cursor:pointer;\u0026quot;\u0026gt;è¿™æ˜¯ç¬¬äºŒå±‚æ–‡å­— --\u0026gt; \u0026lt;P id= \u0026quot;p1\u0026quot; style=\u0026quot;width:100px;height:100px;background-color:blue;cursor:pointer;\u0026quot;\u0026gt; \u0026lt;Strong id=\u0026quot;str1\u0026quot;\u0026gt;è¿™æ˜¯ç¬¬ä¸‰å±‚æ–‡å­—\u0026lt;/Strong\u0026gt; \u0026lt;/P\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  17ï¼šinnerTextå’Œinnerhtml\næ³¨æ„1ï¼šinnerhtml ä¸è¦å†™æˆinnerHtml å¦åˆ™æ˜¯undefined æ³¨æ„2ï¼š var btnObjAgree=document.getElementsByName(\u0026lsquo;agree\u0026rsquo;); var timeControl=document.getElementById(\u0026lsquo;time\u0026rsquo;); æ­£å› ä¸ºIdæ²¡æœ‰s æ‰€ä»¥ä»–å¿…ç„¶æ˜¯å”¯ä¸€çš„ï¼Œ è€Œname TagNameéƒ½æ˜¯å¯ä»¥é‡å¤ æ‰€ä»¥ä»–çš„Elementæ˜¯å¤æ•°çš„ æ¡ˆä¾‹1ï¼šå››ä¸ªæŒ‰é’® åˆ†åˆ«æ˜¾ç¤º è®¾ç½®innerText è®¾ç½®innerhtml è·å–innerText è·å–innerhtml æ³¨æ„ï¼š //1 åœ¨æ·»åŠ æ–‡æœ¬æ—¶å€™ Textæ¨¡å¼æ˜¯ç›´æ¥æ·»åŠ æ— æ•ˆæœ è€Œhtmlæ˜¯æœ‰æ•ˆæœ //2 åœ¨è·å–æ–‡æœ¬æ—¶å€™ Textæ¨¡å¼æ˜¯ç›´æ¥è·å¾—æ–‡æœ¬ è€Œhtmlæ˜¯åŒ…å«ç€æ ‡ç­¾ä¿¡æ¯ å¦å¤–//åœ¨firefoxä¸è¡Œ!!firefox and Ie is a pair of enemy //In Firefox , You should use the statement below // dvObj.contentText=\u0026rdquo;\nå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt;Test InnerText And InnerHtml IN fireFox and IE ! \u0026lt;/Title\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; div { width:300px; height:200px; background-color:green; // åœ¨styleä¸­ä½¿ç”¨ jsonå½¢å¼çš„æ•°æ®ç»“æ„ // åœ¨jsä¸­ä½¿ç”¨ =å½¢å¼çš„æ•°æ®ç»“æ„ } \u0026lt;/style\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; onload=function() { var dvObj=document.getElementById('dv'); document.getElementById('btn1').onclick=function() { //æ˜¾ç¤ºåŸå§‹çš„å†…å®¹ ä¸å¸¦ä¸Šæ•ˆæœ //Ie googleå¯ä»¥ dvObj.innerText='\u0026lt;A href=\u0026quot;http://www.163.com\u0026quot;\u0026gt;ç½‘æ˜“\u0026lt;/A\u0026gt;'; //åœ¨firefoxä¸è¡Œ!!firefox and Ie is a pair of enemy //In Firefox , You should use the statement below // dvObj.contentText='' } //1 åœ¨æ·»åŠ æ–‡æœ¬æ—¶å€™ Textæ¨¡å¼æ˜¯ç›´æ¥æ·»åŠ æ— æ•ˆæœ è€Œhtmlæ˜¯æœ‰æ•ˆæœ //2 åœ¨è·å–æ–‡æœ¬æ—¶å€™ Textæ¨¡å¼æ˜¯ç›´æ¥è·å¾—æ–‡æœ¬ è€Œhtmlæ˜¯åŒ…å«ç€æ ‡ç­¾ä¿¡æ¯ document.getElementById('btn2').onclick=function() { //ç›´æ¥æ·»åŠ ä¸Šæ•ˆæœ //document.getElementById('dv').innerHtml='\u0026lt;A href=\u0026quot;www.163.com\u0026quot;\u0026gt;ç½‘æ˜“\u0026lt;/A\u0026gt;'; //æ³¨æ„å¤§å°å†™ å¦åˆ™ä¸èƒ½æ˜¾ç¤ºå‡º ç»“æœ document.getElementById('dv').innerhtml='\u0026lt;A href=\u0026quot;http://www.163.com\u0026quot;\u0026gt;ç½‘æ˜“\u0026lt;/A\u0026gt;'; } document.getElementById('btn3').onclick=function() { alert(dvObj.innerText); } document.getElementById('btn4').onclick=function() { alert(dvObj.innerhtml); //alert(dvObj.innerHtml); } }; \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;input type=\u0026quot;button\u0026quot; value=\u0026quot;innerText insert\u0026quot; id=\u0026quot;btn1\u0026quot;/\u0026gt; \u0026lt;input type=\u0026quot;button\u0026quot; value=\u0026quot;innerHtml insert\u0026quot; id=\u0026quot;btn2\u0026quot;/\u0026gt; \u0026lt;input type=\u0026quot;button\u0026quot; value=\u0026quot;innerText get\u0026quot; id=\u0026quot;btn3\u0026quot;/\u0026gt; \u0026lt;input type=\u0026quot;button\u0026quot; value=\u0026quot;innerHtml get\u0026quot; id=\u0026quot;btn4\u0026quot;/\u0026gt; \u0026lt;Div id=\u0026quot;dv\u0026quot;\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  æ¡ˆä¾‹2ï¼š innerTextå’Œè®¡æ—¶å™¨è”åˆçš„ä¸€ä¸ªå°ç¨‹åº åŠŸèƒ½éœ€æ±‚ï¼š èµ·å…ˆæŒ‰é’®æ˜¯ç°è‰²ï¼Œæ˜¾ç¤ºâ€œè¯·ä»”ç»†é˜…è¯»åè®®(5)â€ å¹¶éšæ—¶é—´é€’å‡ï¼Œ å½“å›å½’åˆ°0æ—¶ï¼Œåˆ™æŒ‰é’®å˜æˆå¯é€‰çŠ¶æ€ï¼Œå¹¶å…¶å€¼è®¾ç½®ä¸ºâ€œåŒæ„â€ã€‚\n å®ç°å¦‚ä¸‹ï¼š  \u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; Three small practices\u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; onload=function() { var btnObjs=document.getElementsByName(\u0026quot;name\u0026quot;); for(var i =0; i\u0026lt; btnObjs.length;i++) { //ä½ å†ç‚¹å‡»ä¹‹å‰å¾—æŠŠæ‰€æœ‰çš„å…¶ä»–é¢œè‰²éƒ½ç»™ä»–æ¢å¤æˆé»˜è®¤ //è¿™ç‚¹å¾ˆé‡è¦ ï¼ï¼ å¦åˆ™ä½ ä¼šå‘ç°ä¹‹å‰ç‚¹è¿‡çš„æŒ‰é’®ä¾ç„¶æ˜¯çº¢è‰²çš„ï¼æ²¡æœ‰ //æ¢å¤å›é»˜è®¤çš„çŠ¶æ€ btnObjs.onclick=function() //å¯¹è¿™ä¸ªç½‘é¡µçš„é€»è¾‘ä¸æ˜¯ç‰¹åˆ«æ¸…æ¥šï¼ åº”è¯¥æ˜¯ç‚¹å‡»ä¹‹åæ‰è§¦å‘çš„äº‹ä»¶ //è€Œä¸æ˜¯ä½ æƒ³ç€æˆ‘è®©ä»–ç‚¹çš„æ—¶å€™ ä»–å°±è§¦å‘ï¼ï¼å¿…é¡»æœ‰ä¸€ä¸ªä»‹è´¨ï¼ //è¿™ä¸ªä»‹è´¨è¯´å¤§ç‚¹å«åšè®¡ç®—æœºï¼Œè¯´å°ç‚¹å«åšonclick { for(var j=0; j\u0026lt; btnObjs.length;j++) { btnObjs[j].style.backgroundColor=''; } this.style.backgroundColor='red'; } } var sec=5; //ä¸è¦å°‘äº†ä¸€ä¸ªs é—´æ¥è¯´æ˜ nameå¯ä»¥æœ‰å¤šä¸ª //var btnObjAgree=document.getElementsByName('agree'); // è¿”å›çš„æ˜¯ä¸€ä¸ªnameæ•°ç»„ï¼ï¼ï¼ä¸€å®šå¾—æ³¨æ„ å•å†™ä¸Šbtnobjagree.valueä¸èµ·ä½œç”¨ var btnObjAgree=document.getElementsByName('agree'); //ä¸è¦å¤šäº†ä¸€ä¸ªs é—´æ¥è¯´æ˜Idåªèƒ½æœ‰ä¸€ä¸ª //var btnObjAgree=document.getElementById('btn'); var setId= setInterval(function() { if(sec\u0026gt; 0) { sec--; btnObjAgree[0].value='è¯·ä»”ç»†é˜…è¯»ä¸‹åˆ—åè®®('+sec+')'; }else { btnObjAgree[0].value='åŒæ„'; btnObjAgree[0].disabled=false; clearInterval(setId); } },1000); setInterval(function(){ var timeControl=document.getElementById('time'); //timeControl.innerText=new Date().toLocalTimeString();//åˆ«å†™é”™äº†Localeè€Œä¸æ˜¯Local timeControl.innerText=new Date().toLocaleTimeString(); },1000); }; \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;å°æ˜\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;å°æ˜\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;å°æ˜\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;å°æ˜\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;å°æ˜\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;å°æ˜\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;å°æ˜\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;å°æ˜\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btn\u0026quot; name=\u0026quot;agree\u0026quot; value=\u0026quot;è¯·ä»”ç»†é˜…è¯»ä¸‹åˆ—åè®®(5)\u0026quot; disabled=\u0026quot;disabled\u0026quot;/\u0026gt; \u0026lt;P id=\u0026quot;time\u0026quot;\u0026gt;\u0026lt;/P\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  æ¡ˆä¾‹3ï¼šé€šè¿‡ä¸€ä¸ªJSONæ•°æ®ç»“æ„ï¼Œè§£æåˆ°ä¸€ä¸ªè¡¨æ ¼ä¸­ï¼Œå…¶ä¸­è¡¨æ ¼åˆ†ä¸ºä¸¤åˆ—ï¼Œç¬¬ä¸€åˆ—æ˜¯ç½‘å€åå­—(innerText)ï¼Œç¬¬äºŒåˆ—æ˜¯ç½‘å€çš„è¿æ¥ï¼ˆinnerhtmlï¼‰\næ³¨æ„ ï¼š 1:å†è¿›è¡Œèƒ½åŠ›æµ‹è¯•çš„æ—¶å€™ï¼Œtypeofä¸èƒ½å†™æˆtypeOf 2: //å¦‚æœä¸åŠ å…¥ä¸‹é¢ä¸€è¡Œä»£ç åˆ™æ— æ³•æ˜¾ç¤ºï¼ï¼ï¼ç”šè‡³è°ƒè¯•ä¸å‡ºæ¥ document.body.appendChild(tableObj); 3: JSONæ•°æ®ç»“æ„ä½¿ç”¨é€—å·è¿›è¡Œåˆ†éš”ï¼Œä¸åŒäºåœ¨ä¸­ä½¿ç”¨åˆ†å·è¿›è¡Œåˆ†éš”ï¼›\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; Create JSon database and insert them into the table with innerText and Innerhtml\u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; onload=function() { document.getElementById('create').onclick=function() { /* var dic={\u0026quot;å¦‚é¹\u0026quot;:\u0026quot;http://www.rupeng.com\u0026quot;; \u0026quot;ç™¾åº¦\u0026quot;:\u0026quot;http://www.baidu.com\u0026quot;; \u0026quot;ç½‘æ˜“\u0026quot;:\u0026quot;http://www.163.com\u0026quot;; \u0026quot;æœç‹—\u0026quot;:\u0026quot;http://www.sougou.com\u0026quot;; \u0026quot;æ–°æµª\u0026quot;:\u0026quot;http://www.sina.com.cn\u0026quot;; \u0026quot;github\u0026quot;:\u0026quot;http://www.github.com\u0026quot;; }; */ //ç”¨é€—å·éš”å¼€ è€Œä¸æ˜¯åˆ†å· var dic={\u0026quot;å¦‚é¹\u0026quot;:\u0026quot;http://www.rupeng.com\u0026quot;, \u0026quot;ç™¾åº¦\u0026quot;:\u0026quot;http://www.baidu.com\u0026quot;, \u0026quot;ç½‘æ˜“\u0026quot;:\u0026quot;http://www.163.com\u0026quot;, \u0026quot;æœç‹—\u0026quot;:\u0026quot;http://www.sougou.com\u0026quot;, \u0026quot;æ–°æµª\u0026quot;:\u0026quot;http://www.sina.com.cn\u0026quot;, \u0026quot;github\u0026quot;:\u0026quot;http://www.github.com\u0026quot; }; var tableObj = document.createElement('table'); tableObj.border='1 '; //tableObj.border='1 dashed red'; for(var key in dic) { //create line or record var trObj=document.createElement('tr'); ///create column var tdObj1=document.createElement('td'); // for the safety between firefox and Ie,so talent test //if(typeOf(tdObj1.innerText)=='string') typeOfåº”æ”¹ä¸ºtypeof if(typeof(tdObj1.innerText)=='string') { tdObj1.innerText=key; }else { td1.textContent=key; } var tdObj2=document.createElement('td'); tdObj2.innerhtml='\u0026lt;A href=+'+dic[key]+'\u0026gt;'+key+'\u0026lt;/A\u0026gt;'; //add tdObj1 and tdObj2 to the line or record trObj.appendChild(tdObj1); trObj.appendChild(tdObj2); //add the trObj to the table tableObj.appendChild(trObj); } //å¦‚æœä¸åŠ å…¥ä¸‹é¢ä¸€è¡Œä»£ç åˆ™æ— æ³•æ˜¾ç¤ºï¼ï¼ï¼ç”šè‡³è°ƒè¯•ä¸å‡ºæ¥ document.body.appendChild(tableObj); } } \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; value=\u0026quot;create list\u0026quot; id=\u0026quot;create\u0026quot;/\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  18ï¼šcreateElement åŠ¨æ€åˆ›å»ºæ ‡ç­¾ï¼ˆæ— åˆ·æ–°è¯„è®ºçš„æ¡ˆä¾‹ï¼Œå³ç›´æ¥æ·»åŠ è¯„è®ºå†…å®¹åˆ°é¡µé¢çš„è¡¨æ ¼ä¸­ï¼‰ åœ¨ä¹‹å‰æˆ‘ä»¬çŸ¥é“åªåœ¨é¡µé¢åŠ è½½çš„æ—¶å€™å¯ä»¥ç”¨document.write()æ¥åŠ¨æ€åŠ è½½æ§ä»¶ï¼Œé‚£ä¹ˆå¦‚ä½•åœ¨é¡µé¢ä½¿ç”¨çš„è¿‡ç¨‹ä¸­åŠ¨æ€åŠ è½½å‘¢ï¼Ÿ å…·ä½“æ–¹æ³•æ˜¯åˆ©ç”¨ createElement(\u0026ldquo;æ ‡ç­¾å\u0026rdquo;) ï¼Œæœ€ç»ˆ ä¼šè¿”å›ä¸€ä¸ªæ ‡ç­¾çš„å¯¹è±¡ã€‚\næ¡ˆä¾‹1ï¼š åˆ›å»ºä¸€ä¸ªå±‚ å¹¶åœ¨å±‚ä¸­æ·»åŠ æŒ‰é’® æ’å…¥æŒ‰é’® å’Œåˆ é™¤æ‰€æœ‰æŒ‰é’® æ³¨æ„1ï¼š ç»™å±‚ä¸­åŠ ä¸€ä¸ªidçš„ä½œç”¨æ˜¯ä¸ºäº†å¯ä»¥ä¾›documentå¯¹è±¡è¿›è¡Œè°ƒç”¨ æ³¨æ„2ï¼šfirstChild and lastChildæ˜¯å±‚çš„å±æ€§ åŒºåˆ†äº removeChild() appendChild() insertBefore()ç­‰æ–¹æ³•\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; Create Element dynamic \u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; onload=function() { document.getElementById('btn').onclick=function() { var divObj=document.createElement('div'); divObj.style.width='400px'; divObj.id='dv'; //ç”¨äºè§£å†³åœ¨å±‚ä¸­æ·»åŠ æ ‡ç­¾çš„æ–¹å¼ divObj.style.height='200px'; divObj.style.backgroundColor='red'; divObj.style.border='1px solid yellow'; document.body.appendChild(divObj); } var count=0; document.getElementById('btnadd').onclick=function() { var inputObj=document.createElement('input'); inputObj.type='button'; inputObj.value='xiaoMing'+count; count++; // divObj.appendChild(inputObj);//ä¸èµ·ä½œç”¨ //è§£å†³åŠæ³• ç»™divObjåŠ ä¸€ä¸ªId document.getElementById('dv').appendChild(inputObj); } document.getElementById('btnInsert').onclick=function() { var inputInObj=document.createElement('input'); inputInObj.type='button'; inputInObj.value='xiaoming'+count; count++; var objDivD= document.getElementById('dv'); objDivD.insertBefore(inputInObj,objDivD.firstChild); //å¿…é¡»å…ˆæ‰¾åˆ°å±‚ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ ç„¶åæ’å…¥æ–°çš„å…ƒé€Ÿ } document.getElementById('btnDelete').onclick=function() { var objDivD= document.getElementById('dv'); //firstChild æ˜¯å±‚çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å±æ€§ //lastChild æ˜¯å±‚çš„æœ€åä¸€ä¸ªå…ƒç´ çš„å±æ€§ while(objDivD.firstChild) { objDivD.removeChild(objDivD.firstChild); } } } \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btn\u0026quot; value=\u0026quot;åˆ›å»º\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btnadd\u0026quot; value=\u0026quot;å±‚ä¸­åˆ›å»º\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btnInsert\u0026quot; value=\u0026quot;å±‚ä¸­æ’å…¥\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;btnDelete\u0026quot; value=\u0026quot;åˆ é™¤å±‚ä¸­æ‰€æœ‰å…ƒç´ \u0026quot;/\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  æ¡ˆä¾‹2ï¼š æä¾›ä¸€ä¸ªè¯„è®ºçš„ç•Œé¢ï¼ŒåŒ…å«æ˜µç§°ï¼š ä»¥åŠè¯„è®ºå†…å®¹æ¡†å’Œä¸€ä¸ªinputçš„æäº¤æ¡† æœ€ç»ˆæŠŠç»“æœå±•ç¤ºåˆ°é¡µé¢çš„ä¸‹é¢è¡¨æ ¼æ§ä»¶ä¸­\næ³¨æ„ï¼š 1: åœ¨æäº¤ä¹‹å ï¼Œè¿›è¡Œname å’Œè¯„è®ºåŒºåŸŸæ˜¯å¦ä¸ºç©ºçš„åˆ¤æ–­ è‹¥è¯„è®ºå†…å®¹ä¸ºç©ºï¼Œåˆ™æŠŠå±å¹•ç„¦ç‚¹ç§»åˆ°è¯„è®ºåŒºåŸŸï¼Œä¸è¿›è¡Œæäº¤ è‹¥åç§°åŒºåŸŸä¸ºç©ºï¼Œåˆ™æŠŠå±å¹•ç„¦ç‚¹ç§»åˆ°åç§°åŒºåŸŸï¼Œä¸è¿›è¡Œæäº¤\n 2ï¼šè‹¥æ²¡æœ‰é—®é¢˜ï¼Œæäº¤ä¹‹åå¾—æ¸…ç©ºnameå’Œè¯„è®ºåŒºåŸŸçš„å†…å®¹ 3ï¼šè¿›è¡Œèƒ½åŠ›æµ‹è¯• ç«ç‹å’ŒIEæ˜¯ä¸¤ä¸ªä¸å‹å¥½çš„æœ‹å‹ã€‚ typeof(tdObj1.innerText)=='string'  å…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; Test comment submited without refresh 1\u0026lt;/Title\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; #submitArea { width:300px; height:300px; background-color:blue; } #showArea { //è¿™è¾¹ä½¿ç”¨åˆ†å·è¿›è¡Œéš”å¼€ï¼ï¼ åœ¨jsä¸­å®šä¹‰jsonæ•°æ®æ ¼å¼ ä¸€èˆ¬ç”¨é€—å·éš”å¼€ï¼ï¼ width:400px; height:500; background-color:green; } textarea { width:200px; height:200px; } table { border:1px dashed yellow; background-color:red; } td { border:1px solid black; } \u0026lt;/style\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; onload=function() { document.getElementById('tijiao').onclick=function() { //è·å–æ˜µç§° var names=document.getElementById('nicheng').value; //è·å–è¯„è®ºå†…å®¹ var content=document.getElementById('pinglun').value; //ä¿å­˜ä¿¡æ¯åˆ°ä¸€ä¸ªtableä¸­ var tableObj=document.getElementById('tb1'); //åˆ›å»ºä¸€è¡Œè®°å½• var trObj=document.createElement('tr'); //åˆ›å»ºä¸€åˆ— var tdObj1=document.createElement('td'); var tdObj2=document.createElement('td'); //è®¾ç½®å€¼ /* tdObj1.value=names; tdObj2.value=content; */ //å¿˜è®°äº†ä½¿ç”¨innerText and innerhtml if(typeof(tdObj1.innerText)=='string') { tdObj1.innerText=names; }else { tdObj1.textContent=names; } if(typeof(tdObj2.innerText)=='string') { tdObj2.innerText=content; }else { tdObj2.textContent=content; } //æ·»åŠ åˆ—åˆ°è®°å½•ä¸­ trObj.appendChild(tdObj1); trObj.appendChild(tdObj2); tableObj.appendChild(trObj); names.value=\u0026quot;\u0026quot;; content.value=\u0026quot;\u0026quot;; document.getElementById('nicheng').value=\u0026quot;\u0026quot;; document.getElementById('nicheng').focus(); document.getElementById('pinglun').value=\u0026quot;\u0026quot;; } } \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Div id=\u0026quot;submitArea\u0026quot;\u0026gt; \u0026lt;Label\u0026gt;æ˜µç§°:\u0026lt;/Label\u0026gt;\u0026lt;Input type=\u0026quot;text\u0026quot; id=\u0026quot;nicheng\u0026quot; value=\u0026quot;\u0026quot;/\u0026gt; \u0026lt;Textarea id=\u0026quot;pinglun\u0026quot; rows=\u0026quot;15\u0026quot; cols=\u0026quot;10\u0026quot;\u0026gt; \u0026lt;/Textarea\u0026gt; \u0026lt;br/\u0026gt; \u0026lt;input type=\u0026quot;submit\u0026quot; id=\u0026quot;tijiao\u0026quot; value=\u0026quot;æäº¤\u0026quot;/\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;Div id=\u0026quot;showArea\u0026quot;\u0026gt; \u0026lt;Table id=\u0026quot;tb1\u0026quot;\u0026gt; \u0026lt;/Table\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  æ¡ˆä¾‹å»¶å±• æ¡ˆä¾‹3ï¼š ä¸Šé¢å¹¶æ²¡æœ‰è¿›è¡Œåç§°åŒºåŸŸå’Œè¯„è®ºåŒºåŸŸä¸ºç©ºçš„åˆ¤æ–­ å¦å¤–çš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨table.insertRow(-1) å¹¶åˆ©ç”¨è¿”å›æ¥çš„è¡Œå¯¹è±¡åˆ›å»ºåˆ—insertCell(-1)æ¥åˆ›å»º ä¸€ä¸ªå¥½å¤„æ˜¯ä¸éœ€è¦åƒcreateElementï¼Œåœ¨ç»“å°¾éœ€è¦è¿›è¡ŒappendChildæ·»åŠ èŠ‚ç‚¹çš„é”™åšã€‚ æ³¨æ„ç‚¹ï¼šåˆ—çš„å€¼è®¾ç½®éœ€è¦ç”¨innerTextæˆ–è€…innerhtmlè¿›è¡Œè®¾ç½®ï¼ˆstyleéƒ¨åˆ†ä¿æŒä¸€æ ·ï¼‰\nå…·ä½“å¦‚ä¸‹ï¼š\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; Test comment submited without refresh 2\u0026lt;/Title\u0026gt; \u0026lt;style type=\u0026quot;text/css\u0026quot;\u0026gt; #submitArea { width:300px; height:300px; background-color:blue; } #showArea { //è¿™è¾¹ä½¿ç”¨åˆ†å·è¿›è¡Œéš”å¼€ï¼ï¼ åœ¨jsä¸­å®šä¹‰jsonæ•°æ®æ ¼å¼ ä¸€èˆ¬ç”¨é€—å·éš”å¼€ï¼ï¼ width:400px; height:500; background-color:green; } textarea { width:200px; height:200px; } table { border:1px dashed yellow; background-color:red; } td { border:1px solid black; } \u0026lt;/style\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; onload=function() { document.getElementById('tijiao').onclick=function() { //è·å–æ˜µç§° var names=document.getElementById('nicheng').value; //è·å–è¯„è®ºå†…å®¹ //å¢åŠ ä¸€ä¸ªè¾“å…¥å‚æ•°å€¼çš„æœ‰æ•ˆæ€§ åˆ¤æ–­ï¼ if(names==\u0026quot;\u0026quot;) { // alert(names+typeof(names)); alert('è¯·è¾“å…¥æ˜µç§°å†…å®¹'); document.getElementById('nicheng').focus(); return ; }else { var content=document.getElementById('pinglun').value; //alert(content+typeof(content)); if(content==\u0026quot;\u0026quot;) { alert('è¯·è¾“å…¥è¯„è®ºå†…å®¹'); document.getElementById('pinglun').focus(); return false; } } //ä¿å­˜ä¿¡æ¯åˆ°ä¸€ä¸ªtableä¸­ var tableObj=document.getElementById('tb1'); //ä¸éœ€è¦CreateElementä¹‹åè¿˜éœ€è¦ appendChildçš„æ“ä½œ //åˆ›å»ºä¸€è¡Œè®°å½• var trObj=tableObj.insertRow(-1); //åˆ›å»ºä¸€åˆ— var tdObj1=trObj.insertCell(-1); var tdObj2=trObj.insertCell(-1); //è®¾ç½®å€¼ /* tdObj1.value=names; tdObj2.value=content; */ //å¿˜è®°äº†ä½¿ç”¨innerText and innerhtml if(typeof(tdObj1.innerText)=='string') { tdObj1.innerText=names; }else { tdObj1.textContent=names; } if(typeof(tdObj2.innerText)=='string') { tdObj2.innerText=content; }else { tdObj2.textContent=content; } //æ·»åŠ åˆ—åˆ°è®°å½•ä¸­ //names.value=\u0026quot;\u0026quot;; //content.value=\u0026quot;\u0026quot;; document.getElementById('nicheng').value=\u0026quot;\u0026quot;; document.getElementById('nicheng').focus(); document.getElementById('pinglun').value=\u0026quot;\u0026quot;; } } \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Div id=\u0026quot;submitArea\u0026quot;\u0026gt; \u0026lt;Label\u0026gt;æ˜µç§°:\u0026lt;/Label\u0026gt;\u0026lt;Input type=\u0026quot;text\u0026quot; id=\u0026quot;nicheng\u0026quot; value=\u0026quot;\u0026quot;/\u0026gt; \u0026lt;Textarea id=\u0026quot;pinglun\u0026quot; rows=\u0026quot;15\u0026quot; cols=\u0026quot;10\u0026quot;\u0026gt; \u0026lt;/Textarea\u0026gt; \u0026lt;br/\u0026gt; \u0026lt;input type=\u0026quot;submit\u0026quot; id=\u0026quot;tijiao\u0026quot; value=\u0026quot;æäº¤\u0026quot;/\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;Div id=\u0026quot;showArea\u0026quot;\u0026gt; \u0026lt;Table id=\u0026quot;tb1\u0026quot;\u0026gt; \u0026lt;/Table\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  19ï¼šä¸€ä¸ªç»¼åˆçš„å°æ¡ˆä¾‹ï¼š åŠŸèƒ½ï¼š 1ç‚¹å‡»æŒ‰é’®ï¼Œåˆ™å¥‡æ•°è¡Œä¸ºçº¢è‰²ï¼Œå¶æ•°è¡Œè“è‰² 2é¼ æ ‡ç§»åŠ¨æ—¶å€™ï¼Œå¯¹åº”çš„å¯¹è±¡å˜çº¢è‰²ï¼Œå…¶ä»–çš„é»˜è®¤é¢œè‰²ï¼š\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; change the table's even and odd line's color\u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; onload=function() { //è·å¾—ç‚¹å‡»çš„æŒ‰é’® document.getElementById('changeColor').onclick=function() { //å¦‚ä½•è·å¾—è¡¨æ ¼çš„é•¿åº¦ï¼Ÿï¼Ÿï¼Ÿ var tds=document.getElementById('tb1').getElementsByTagName('td'); for(var i=0;i\u0026lt;tds.length;i++) { //å½“ä¸ºå¥‡æ•°çš„æ—¶å€™ å…¶å®ä¹Ÿå¯ä»¥ç”¨cssè§£å†³æ–¹å¼ if(i%2==0) { tds.style.backgroundColor='red'; }else { tds.style.backgroundColor='blue'; } } }; //è¿›è¡Œé¼ æ ‡ç§»åŠ¨å˜è‰²çš„äº‹ä»¶ var tds1=document.getElementById('tb1').getElementsByTagName('td'); for(var j=0;j\u0026lt;tds1.length;j++) { tds1[j].onmousemove=function() { for(var k=0; k\u0026lt;tds1.length;k++) { tds1[k].style.backgroundColor=''; } this.style.backgroundColor='red'; } } }; \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; id=\u0026quot;changeColor\u0026quot; value=\u0026quot;change color of the table\u0026quot;/\u0026gt; \u0026lt;Table id=\u0026quot;tb1\u0026quot;\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;ç¬¬ä¸€è¡Œ\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;ç¬¬äºŒè¡Œ\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;ç¬¬ä¸‰è¡Œ\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;ç¬¬å››è¡Œ\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;ç¬¬äº”è¡Œ\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;ç¬¬å…­è¡Œ\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026lt;/Table\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  å°ç»“ï¼š å­¦ä¼šäº†æ·»åŠ äº‹ä»¶ï¼Œè®¤è¯†äº†äº‹ä»¶å†’æ³¡è¿‡ç¨‹ï¼Œç†è§£äº†document.writeçš„ä¸¤ä¸ªä½œç”¨ï¼ˆdocument.writelnæš‚æ—¶ä¸ç®¡ å®é™…ä¸Šåªæœ‰\næ‰æ˜¯çœŸæ­£çš„ç½‘é¡µæ¢è¡Œï¼‰ å¹¶å¯¹innerTextå’ŒinnerHtmlè¿›è¡ŒåŒºåˆ†ï¼Œç»“åˆcreateElementå¯ä»¥åŠ¨æ€çš„åˆ›å»ºæ ‡ç­¾ï¼Œå¼¥è¡¥äº†document.writeçš„ä¸è¶³ä¹‹å¤„ï¼ˆåªåœ¨ç½‘é¡µåŠ è½½çš„æ—¶å€™åˆ›å»ºï¼‰ï¼Œ å†æ¬¡åˆ©ç”¨JSonæ•°æ®ç»“æ„æ¥åŠ¨æ€æ˜¾ç¤ºæ•°æ®ï¼Œæˆ‘ä»¬ä¼šå‘ç°æ‰€æœ‰çš„htmlä»£ç ä¸­çŠ¹å¦‚ä¸€é¢—é¢—æ ‘ï¼Œå¯ä»¥åˆ©ç”¨ä¸‰ç§è°ƒç”¨æ ‡ç­¾çš„æ–¹å¼æ¥è°ƒç”¨æ‰€æœ‰çš„å…ƒç´ ï¼Œå¯æ˜¯æˆ‘ä»¬ æ€»æ˜¯éœ€è¦å†™é‚£ä¹ˆé•¿çš„ä»£ç ï¼Œå¯ä»¥ç®€åŒ–ï¼Ÿæœ‰ã€‚\n20ï¼šæœ€åé€šè¿‡ä¸€ä¸ªè¾ƒå…¸å‹çš„æ¡ˆä¾‹æ¥ç»“å°¾ï¼š åŠŸèƒ½1: æŠŠJSONæ•°æ®ç»“æ„è¿›è¡Œtableä¾ å£« åŠŸèƒ½2ï¼šè®¾ç½®å¤é€‰æ¡†çš„å…¨é€‰ åŠŸèƒ½3ï¼šè®¾ç½®titleçš„èµ°é©¬ç¯æ•ˆæœ\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Title\u0026gt; Tree! Tree ! Everywhere fills with trees. \u0026lt;/Title\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; var de = document.documentElement; alert(de.tagName); var head=document.getElementsByTagName(\u0026quot;Head\u0026quot;); var body=document.getElementsByTagName(\u0026quot;Body\u0026quot;); alert(head); // alert(head.firstChild.nodeName); alert(body); var imgObj=document.getElementsByTagName(\u0026quot;img\u0026quot;); var imgObj1=document.getElementsByTagName(\u0026quot;34\u0026quot;); alert(imgObj.alt); alert(imgObj1.alt); //ç”¨äºæŠŠJSONçš„æ•°æ®ç»“æ„ ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ function createTable() { var div=document.getElementById(\u0026quot;news\u0026quot;); var table=document.createElement(\u0026quot;table\u0026quot;); table.border=1; //åˆ›å»ºä¸€ä¸ªJSONæ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨ç½‘ç»œåœ°å€d var newsBlog={\u0026quot;å¦‚é¹ç½‘ç«™\u0026quot;:\u0026quot;http://www.rupeng.com\u0026quot;, \u0026quot;ç½‘æ˜“åšå®¢\u0026quot;:\u0026quot;http://www.163.com\u0026quot;, \u0026quot;sinaç½‘ç«™\u0026quot;:\u0026quot;http://www.sina.com\u0026quot;};//å¯ä»¥è¿›è¡Œæ— é™çš„æ·»åŠ  for(var name in newsBlog) { //åˆ›å»ºè¡Œåˆ—ç»“æ„ var tr = document.createElement(\u0026quot;tr\u0026quot;); //åˆ›å»ºä¸€ä¸ªtrå¯¹è±¡ var td1 = document.createElement(\u0026quot;td\u0026quot;); //åˆ›å»ºä¸€ä¸ªç¬¬ä¸€åˆ—td1 var td2 = document.createElement(\u0026quot;td\u0026quot;); //åˆ›å»ºä¸€ä¸ªç¬¬ä¸€åˆ—td1 //è®¾ç½®è¡Œåˆ—å±æ€§ td1.innerText=name; td2.innerhtml=\u0026quot;\u0026lt;a href=\u0026quot;+newsBlog[name]+\u0026quot;\u0026gt;\u0026quot;+newsBlog[name]+\u0026quot;\u0026lt;/A\u0026gt;\u0026quot;; //æ·»åŠ èŠ‚ç‚¹ tr.appendChild(td1); tr.appendChild(td2); //æ·»åŠ è¡Œåˆ°è¡¨ä¸­ table.appendChild(tr); } //divå±‚æ·»åŠ tableèŠ‚ç‚¹ div.appendChild(table); table.style.listStyle=\u0026quot;none\u0026quot;; table.style.color=\u0026quot;blue\u0026quot;; } //è®¾ç½®å…¨é€‰ function setCheckedAll() { //è·å–æ‰€æœ‰name=\u0026quot;setall\u0026quot;çš„æ ‡ç­¾ æ³¨æ„å¤šä¸€ä¸ªs var allBtns= document.getElementsByName(\u0026quot;setall\u0026quot;); //var allBtns= document.getElementByName(\u0026quot;setall\u0026quot;); //è·å–id=â€all\u0026quot;çš„æ ‡ç­¾èŠ‚ç‚¹ var setOpenBtn = document.getElementById(\u0026quot;all\u0026quot;); for(var i = 0; i \u0026lt; allBtns.length; i++) { allBtns.checked = setOpenBtn.checked; allBtns.onclick = function() { var b = true; //ä¸ºä»€ä¹ˆè¦è¿›è¡Œä¸€ä¸ªå¾ªç¯ //å› ä¸º å†è¿›è¡Œå•é€‰æ—¶å€™ å¾—æ¸…æ¥šæ‰€æœ‰ä¹‹å‰çš„checkboxçš„çŠ¶æ€ï¼ for(var i = 0 ; i\u0026lt; allBtns.length; i++) { if(!allBtns.checked) { b = false; break; } setOpenBtn.checked = b; } } } } //è®¾ç½®æ ‡ç­¾titleçš„èµ°é©¬ç¯æ•ˆæœ function scroll() { var title=document.title; var first=title.charAt(0); var last =title.substring(1,title.length); document.title=last+first; } setInterval(\u0026quot;scroll()\u0026quot;,500); /* é¼ æ ‡äº‹ä»¶ onclick ondbclick onkeydown onkeyup onkeypress onmousedown onmousemove onmouseout onmouseover onmouseup */ \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Div value=\u0026quot;å…¨é€‰åŒº\u0026quot;\u0026gt; \u0026lt;Input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;setall\u0026quot; /\u0026gt; \u0026lt;Input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;setall\u0026quot; /\u0026gt; \u0026lt;Input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;setall\u0026quot; /\u0026gt; \u0026lt;Input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;setall\u0026quot; /\u0026gt; \u0026lt;Input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;setall\u0026quot; /\u0026gt; \u0026lt;Input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;setall\u0026quot; /\u0026gt; \u0026lt;Input type=\u0026quot;checkbox\u0026quot; name=\u0026quot;\u0026quot; id=\u0026quot;all\u0026quot;/\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;Div id =\u0026quot;news\u0026quot;\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; value=\u0026quot;ç”Ÿæˆåˆ—è¡¨\u0026quot;/\u0026gt; \u0026lt;H1\u0026gt;Tree ! Everything can become trees.\u0026lt;/H1\u0026gt; \u0026lt;P\u0026gt;Htmlä»£ç å±‚å±‚åµŒå¥—åƒä¸€é¢—é¢—\u0026lt;Em\u0026gt;æ ‘\u0026lt;/Em\u0026gt;ä¸€æ ·ã€‚\u0026lt;/P\u0026gt; \u0026lt;Div\u0026gt;ä¸€å±‚ä¸€å±‚çš„æ•°\u0026lt;Img id=\u0026quot;34\u0026quot; src=\u0026quot;\u0026quot; alt=\u0026quot;å¦‚æœæ²¡æœ‰å›¾ç‰‡ä¼šæ˜¾ç¤ºæˆ‘\u0026quot;/\u0026gt;\u0026lt;/Div\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  ä¸Šé¢ä¸ºæ­¢æ˜¯åˆ°ç¬¬JSDom15çš„å†…å®¹ã€‚\n","date":1431327524,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327524,"objectID":"24fc1feb553c52e971f81c0492619592","permalink":"/blog/2015/05/11/jsdom7-13jie-bi-ji-dai-ma-march31th/","publishdate":"2015-05-11T14:58:44+08:00","relpermalink":"/blog/2015/05/11/jsdom7-13jie-bi-ji-dai-ma-march31th/","section":"archives","summary":"","tags":null,"title":"JSDOM7-13èŠ‚ç¬”è®°ä»£ç March31th","type":"archives"},{"authors":null,"categories":["JSDom"],"content":"ä¸€ã€ç»ƒä¹ æ€»ç»“ 1.åˆ©ç”¨jqæ’å…¥èŠ‚ç‚¹æœ‰4ä¸ªä¸€è‡´æ€§å¾ˆå¼ºçš„ï¼š appendï¼Œprependï¼Œafterï¼Œbeforeã€‚å…¶ä¸­appendå’Œprependéƒ½æ˜¯å¯¹äºå­èŠ‚ç‚¹çš„æ·»åŠ ã€‚afterå’Œbeforæ˜¯å¯¹äºå…„å¼ŸèŠ‚ç‚¹çš„æ·»åŠ ã€‚ 2.ChildNodeå’ŒChildenæ˜¯ä¸åŒçš„ï¼Œå› ä¸ºChildNodeä¼šæŠŠç©ºæ ¼è¿œç®—è¿›å»ã€‚é‚£ä¹ˆEachéå†çš„æ˜¯å•¥ï¼Ÿ 3.å¯¹äºâ€œï¼šâ€ä¸è¦ä¹±ç”¨ã€‚è¦æ˜ç¡®åˆ°åº•æœ‰å“ªäº›! 4.å¯¹äº ï¼šä»€ä¹ˆçš„ï¼Œéƒ½æ˜¯èµ·åˆ°ä¸€ä¸ªä¿®é¥°ä½œç”¨ã€‚ 5. :even æ˜¯é€‰æ‹©å¶æ•° :oddæ˜¯é€‰æ‹©å¥‡æ•° :eq(index) :gt(index) :lt(index) å…³äºgtç†è§£æ˜¯greate than æ˜¯å¤§äºï¼Œless thanæ˜¯å°äºã€‚:not 6.Jqçš„ç´¢å¼•æ˜¯ä»0å¼€å§‹çš„ã€‚ 7.å­èŠ‚ç‚¹çš„äº‹ä»¶ä¼šä¼ é€’ç»™çˆ¶èŠ‚ç‚¹!ï¼Ÿè¿™ä¸ªå«åšäº‹ä»¶å†’æ³¡.ä¸æ‡‚ã€‚ 8.å¯¹äºå†’å·ä¿®é¥°ç¬¦çš„ä½¿ç”¨ï¼Œå¯ä»¥é‡å¤å¤šä¸ªé…åˆä¸€èµ·ä½¿ç”¨ï¼šæ¯”å¦‚ã€‚$(\u0026ldquo;table:first tr:even\u0026rdquo;).css(\u0026ldquo;background\u0026rdquo;, \u0026ldquo;#ffaacc\u0026rdquo;); 9.changeæ˜¯åœ¨æ–‡æœ¬åŸŸä¸¢å¤±ç„¦ç‚¹çš„æ—¶å€™æ‰ä¼šè§¦å‘çš„ã€‚ 10.å…³äº $(\u0026ldquo;ul li\u0026rdquo;) å’Œ $(\u0026ldquo;ul\u0026gt;li\u0026rdquo;)æ˜¯ä¸åŒçš„ï¼Œå‰è€…çš„ç©ºæ ¼è¡¨ç¤ºçš„æ˜¯åå°å…ƒç´ ï¼Œè€Œå¤§äºå·è¡¨ç¤ºçš„å­ä»£å…ƒç´ ã€‚åä»£å…ƒç´ æ˜¯åŒ…æ‹¬äº†å­ä»£å­™å…ƒç´ çš„ã€‚è€Œå­ä»£å…ƒç´ åªæœ‰å­ä»£ã€‚ 11.ç©ºæ ¼ä¸è¦ä¹±æ‰“!ç©ºæ ¼è¡¨ç¤ºçš„æ˜¯åä»£ï¼Œä¸è¦å¿½ç•¥è¿™ä¸ªé—®é¢˜äº†ã€‚\nä¸€ã€å‰ç«¯çŸ¥è¯† 1.Javascriptåˆ·æ–°é¡µé¢çš„å‡ ç§æ–¹æ³•ï¼š 1ï¼‰ history.go(0) 2ï¼‰ location.reload() 3) location=location 4) location.assign(location) 5) document.execCommand(\u0026lsquo;Refresh\u0026rsquo;) 6) window.navigate(location) 7ï¼‰ location.replace(location) 8ï¼‰ document.URL=location.href è¯´æ˜ä¸€ä¸‹ï¼ŒjQueryæ²¡æœ‰å‘ç°åˆ·æ–°é¡µé¢çš„æ–¹æ³•ã€‚ 2.remove() detach()éƒ½æœ‰ç§»é™¤çš„ä½œç”¨ï¼Œä¸”ä»–ä»¬è¿”å›å€¼éƒ½æ˜¯è¿™ä¸ªè¢«ç§»é™¤çš„å¯¹è±¡ã€‚å¦‚æœé‡æ–°å°†è¿™ä¸ªæ·»åŠ ä¸Šå»ï¼Œremoveç»‘å®šçš„äº‹ä»¶ä¼šæ¶ˆå¤±ï¼Œè€Œdetachçš„ä¸ä¼šæ¶ˆå¤±ã€‚ 3.empty() æ˜¯æ¸…ç©ºæ‰€æœ‰çš„åå°èŠ‚ç‚¹ã€‚ 4.warp()æ˜¯åŒ…è£¹çš„ï¼šex $(\u0026ldquo;#city\u0026rdquo;).wrap(\u0026rdquo;\u0026rdquo;); 5.clone()æ˜¯å…‹éš†çš„æ„æ€ï¼Œå¦‚æœæ·»åŠ äº†trueè¡¨ç¤ºå…‹éš†äº‹ä»¶ï¼Œå¦‚æœä¸åŠ trueåªå…‹éš†å¤–å½¢ä¸å…‹éš†äº‹ä»¶ã€‚ 6.repalceWith()ï¼ŒreplaceAll()2ä¸ªrepalceæ–¹æ³•æ˜¯æ›¿æ¢ï¼Œéœ€è¦æ³¨æ„çš„ï¼Œä¸€æ—¦æ›¿æ¢ï¼Œä¹‹å‰çš„å…ƒç´ ä¼šæ¶ˆå¤±ã€‚ 7.å…³äºval()å’Œtext()åŒºåˆ«ã€‚å¯¹äºinputè¿™ç§å•æ ‡ç­¾è€Œè¨€ï¼Œval()å°±æ˜¯ä»–ä»¬çš„å€¼ï¼Œå¯¹äºæˆ–è€…è¿™ç§åŒæ ‡ç­¾è€Œè¨€å°±æ˜¯ç”¨text()ã€‚ æ³¨æ„äº†inputçš„æ–‡æœ¬æ¡†çš„å€¼æ˜¯valueã€‚ 8.å¯¹äºfocuså’Œbluréƒ½æ˜¯åœ¨åˆšè§¦å‘äº‹ä»¶çš„æŸä¸€ä¸ªæ—¶å€™è§¦å‘çš„äº‹ä»¶ã€‚ 9.next()ï¼Œpre()ï¼Œsiblings()ï¼Œä¸‰ä¸ªéƒ½æ˜¯è·å–åŒè¾ˆå…ƒç´ ã€‚nextæ˜¯ä¹‹åçš„ï¼Œpreæ˜¯ä¹‹å‰çš„ï¼Œsibling()æ˜¯è·å–æ‰€æœ‰çš„åŒè¾ˆå…ƒç´ ã€‚ 10.(selector).each(function(){ \u0026hellip;. }); 11.$(selector).children(\u0026ldquo;.bb\u0026rdquo;)è¿™ä¸ªå°±æ˜¯é€‰å‡ºselectorå­èŠ‚ç‚¹ä¸­ç¬¦åˆè¦æ±‚ï¼šç±»åä¸ºbbçš„æ‰€æœ‰èŠ‚ç‚¹ã€‚ 12.window.onload æ˜¯åœ¨DomåŠ è½½å®Œæ¯•ä¸”å…³è”å…ƒç´ åŠ è½½å®Œæ¯•åæ‰æ‰§è¡Œã€‚è€Œ$(document).ready()æ˜¯åœ¨DOMåŠ è½½å®Œæ¯•åå°±æ‰§è¡Œï¼Œæ•ˆç‡æ›´é«˜ã€‚ 13.window.onloadåªæ‰§è¡Œä¸€æ¬¡ï¼Œ$(document).ready()æ‰§è¡Œå¤šæ¬¡ã€‚ 14.JQçš„äº‹ä»¶æ¯”èµ·JSæ¥è¯´ï¼Œå°‘äº†onè¿™ä¸ª2ä¸ªå‰ç¼€ã€‚ 15.è¿™2ä¸ªçŠ¶æ€ä¸èƒ½è®°å¿†æ··æ·†äº† :hiden :visible ä¸€ä¸ªæ˜¯éšè—ï¼Œä¸€ä¸ªæ˜¯å¯è§ã€‚ hide() visible() 16.é“¾å¼ç¼–ç¨‹ä¸ºåŒä¸€ä¸ªå…ƒç´ æ·»åŠ ä¸åŒçŠ¶æ€çš„æ–¹æ³•å¯ä»¥åˆ†å¼€å†™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨bindæ¥æŠŠç»‘å®šä¸åœå½¢æ€ä¸‹çš„æ–¹æ³•ï¼Œå½“ç„¶è¿˜æœ‰æ›´ç®€å•çš„æ–¹æ³•\n$(\u0026ldquo;#panel .head\u0026rdquo;).mouseover(function () { }).mouseleave(function () { });\n17.(\u0026ldquo;selector\u0026rdquo;).toggle(fun1,fun2,fun3,\u0026hellip;);ç”¨äºæ¨¡æ‹Ÿåœ¨è¿™ä¸ªselectorä¸Šçš„é¼ æ ‡å•å‡»äº‹ä»¶ã€‚è¡¨ç¤ºçš„æ˜¯è¿™ä¸ªå¯¹äºè¿™ä¸ªselecorä¾æ¬¡ç‚¹å‡» ä¼šè§¦å‘äº‹ä»¶f1,f2,f3\u0026hellip;è§¦å‘å®Œæ¯•åä¼šä»å¤´å¼€å§‹è½®è¯¢ã€‚ 18.return false æ¯” event.stopPropagation() å’Œ event.preventDefault()æ›´å¥½ç”¨ã€‚å¯ä»¥ä»£æ›¿è¿™2ä¸ªã€‚ 19.äº‹ä»¶å†’æ³¡æ˜¯å› ä¸ºä»å°åˆ°å¤§ï¼Œéƒ½æœ‰æŸä¸€ä¸ªç›¸åŒçš„äº‹ä»¶è¢«è§¦å‘ï¼Œä¼šä»é‡Œåˆ°å¤–ä¾æ¬¡è§¦å‘ã€‚ 20.äº‹ä»¶æ•è·å’Œäº‹ä»¶å†’æ³¡æ˜¯ä¸€ä¸ªç›¸åçš„è¿‡ç¨‹ï¼Œæ•è·æ˜¯ä»å¤–åˆ°å†…ï¼Œå†’æ³¡æ˜¯ä»å†…åˆ°å¤–ã€‚ ä¸€ã€JQå­¦ä¹  1.$(selector).bind(funName1,func1).bind(funName2,func2)\u0026hellip; è¿™ç§å†™æ³•ä¸æ–¹ä¾¿ï¼ŒJQæä¾›äº†ä¸€å¥—ç®€å†™çš„æœºåˆ¶ï¼š$(selector).fucName1(func1).funName2(func2) 2.å¯ä»¥ä¸ºä¸€ä¸ªselectorç»‘å®šå¤šä¸ªäº‹ä»¶ã€‚ 3.å¯¹äºçŠ¶æ€åˆ¤å®šå¯ä»¥ä½¿ç”¨ $(selector).is(\u0026rdquo;:visible\u0026rdquo;) æ³¨æ„äº†ï¼švisible æ˜¯å¯è§çš„ã€‚ 4.åœ¨thisçš„å†™æ–¹æ³•ï¼ŒåˆçŠ¯äº†ä¸€ä¸ªç»å…¸é”™è¯¯ï¼š $(this) æ‰æ˜¯æ­£ç¡®çš„ã€‚ä½†æ˜¯ $(\u0026ldquo;this\u0026rdquo;)å°±æ˜¯é”™è¯¯çš„ã€‚thisçš„ç†è§£åº”è¯¥æ˜¯è§¦å‘è¿™ä¸ªäº‹ä»¶çš„å¯¹è±¡ã€‚ 5.JQæœ‰2ä¸ªåˆæˆäº‹ä»¶ï¼Œä¸€ä¸ªæ˜¯hoverä¸€ä¸ªæ˜¯toggleï¼Œå…¶ä¸­hoveræ˜¯é¼ æ ‡çš„enterå’Œleaveï¼Œå…¶å†™æ³•ä¸º $(selector).hover(enter,leave) è¿˜æœ‰ä¸€ä¸ªæ˜¯toggle(fun1,fun2\u0026hellip;)è¿™ä¸ªæ˜¯æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»äº‹ä»¶ã€‚ 6.å½“æŸä¸€ä¸ªå¯¹è±¡è¦è§£ç»‘æŸä¸ªäº‹ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ï¼š $(selector).unbind(funcName) æˆ–è€… $(selector).unbind() ï¼Œå‰è€…è§£ç»‘æŸä¸€ä¸ªæ–¹æ³•ï¼Œåè€…è§£ç»‘æ‰€æœ‰çš„æ–¹æ³•ã€‚ 7.one(funcName,func) ç”¨åœ¨è§¦å‘ä¸€æ¬¡çš„äº‹ä»¶ä¸Šã€‚ 8.JQä¸­çš„åŠ¨ç”»æœ‰hide()å’Œshow()ï¼Œè¦å®ç°åŠ¨ç”»æ•ˆæœï¼Œæ‹¬å·ä¸­éœ€è¦ç»™æ¯«ç§’ä¸ºå•ä½çš„å€¼ï¼Œå°±å¯ä»¥å®ç°åŠ¨ç”»æ•ˆæœäº†ã€‚ 9.fadeIn()å’ŒfadeOut()å¯ä»¥æ”¹å˜ä¸é€æ˜åº¦ã€‚æ‹¬å·ä¸­åŒæ ·å¯ä»¥ç»™å‡ºå‚æ•°ï¼ŒfadeInæ˜¯æ…¢æ…¢æ˜¾ç¤ºï¼ŒfadeOutæ˜¯æ…¢æ…¢æ¶ˆå¤±ã€‚ 10.slideUp()ï¼ŒslideDown()åˆ†åˆ«æ˜¯æ”¹å˜æ‰€é€‰çš„å®½åº¦ã€‚ 11. :checked è¢«é€‰ä¸­å’Œ checked=\u0026ldquo;checked\u0026rdquo;æ˜¯æœ‰åŒºåˆ«çš„ã€‚ä¸ªäººç†è§£ï¼šè¢«é€‰ä¸­ä¸ä¸€å®šä¼šæœ‰checked=\u0026ldquo;checked\u0026rdquo; ä½†æ˜¯ä¸€å®šå¯ä»¥é€šè¿‡çŠ¶æ€ :checked æ¥è·å–ã€‚ 12.æ€»ç»“ ï¼šå¯¹äºè¦è·å–å¤„äºæŸä¸ªçŠ¶æ€çš„å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨ :çŠ¶æ€ æ¥è·å–ã€‚ 13.å¯¹äºä½¿ç”¨å¤šä¸ªå±æ€§æ¥å–å€¼ï¼Œå¯ä»¥ä½¿ç”¨ $(\u0026ldquo;selector[id=123][name=lcf]\u0026ldquo;) 14.JQä¸­æ”¯æŒåœ¨Childen(\u0026rdquo;:checked\u0026rdquo;)æ¥é€‰å–å­å…ƒç´ ä¸­è¢«é€‰å–äº†çš„å…ƒç´ ã€‚ 15.JQä¸­ï¼Œåªæœ‰è¦æ‹¬å·ï¼Œå°±å¯ä»¥åœ¨æ‹¬å·é‡Œé¢å†™ç­›é€‰æ¡ä»¶ã€‚ 16.å¯¹äºåˆ©ç”¨Jqæ·»åŠ ä¸Šå»çš„ä¸œè¥¿ï¼Œå¯ä»¥ä¸ºå…¶æ·»åŠ ä¸€ä¸ªidè·å–classï¼Œæ–¹ä¾¿è¿›è¡Œå¤„ç†ã€‚ 17.JQä¸­ç§»é™¤æ›¿æ¢éƒ½ä¼šåˆ é™¤ä»¥å‰çš„å…ƒç´ ã€‚ 18.$(selector).toggle ç”¨äºåˆ‡æ¢çŠ¶æ€ï¼Œå½“å‰æ˜¾ç¤ºå°±å˜æˆéšè—ï¼Œå½“å‰éšè—å°±æ˜¯å˜æˆæ˜¾ç¤ºã€‚ 19.$(selector).toggleClass(\u0026ldquo;className\u0026rdquo;)å¦‚æœå½“å‰é€‰æ‹©çš„æœ‰è¿™ä¸ªç±»å°±åˆ é™¤ï¼Œæ²¡æœ‰å°±æ·»åŠ ã€‚\n 1.æ€è€ƒï¼šè¦æƒ³å®ç°Jqueryè¿™æ ·çš„â€œé“¾å¼ç¼–ç¨‹â€é‚£ä¹ˆæ¯ä¸ªæ–¹æ³•çš„è¿”å›å€¼å°±åº”è¯¥æ˜¯è°ƒç”¨è€…æœ¬èº«ï¼Œå³return this. 2.å¯¼å…¥Jqeruyçš„æ—¶å€™ï¼Œç‰¹åˆ«æ³¨æ„äº†ï¼Œè¦æœ‰2ä¸ªscriptï¼Œç¬¬ä¸€ä¸ªscriptæ˜¯åˆ©ç”¨srcå¯¼å…¥jqueryçš„æ–‡ä»¶ï¼Œä¸è¦åœ¨é‡Œé¢å†™jqueryä»£ç ã€‚ç¬¬äºŒä¸ªå†™scriptæ‰å¼€å§‹å†™jqueryä»£ç ã€‚ 3.Jqeruyä¸­æ˜¯å¯ä»¥æœ‰å¤šä¸ª $(document).ready(function(){.....}); 4.å¦‚æœæŸä¸ªå‡½æ•°åœ¨é¡µé¢åŠ è½½å®Œäº†å°±æ‰§è¡Œäº†ï¼Œè€ƒè™‘è¿™ä¸ªå‡½æ•°æ˜¯ä¸æ˜¯æ²¡æœ‰æ”¾åœ¨æ‹¬å·é‡Œé¢çš„function(){å†™åœ¨è¿™é‡Œ}; 5.Jqeruyä¸­çš„äº‹ä»¶å’ŒJSä¸­ä¸ä¸€æ ·ï¼š onClikc ---click 6.Jqueryä¸­äº‹ä»¶çš„å‡½æ•°æ˜¯å†™åœ¨é‡Œé¢çš„ï¼Œæ¯”å¦‚è§„èŒƒå†™æ³•å¦‚ä¸‹ï¼š $(\u0026quot;#bj\u0026quot;).click(function () { alert(\u0026quot;HH\u0026quot;); }); è¿™ä¸ªæ—¶å€™å¦‚æœå†™æˆè¿™æ ·ï¼š $(\u0026quot;#bj\u0026quot;).click(alert(\u0026quot;HH\u0026quot;)); è¡¨ç¤ºçš„æ„æ€å°±ä¸ä¸€æ ·äº†ï¼Œè¿™ä¸ªå°±æ˜¯è¯´å‡½æ•°æ‰§è¡Œåˆ°è¿™ä¸ªåœ°æ–¹å°±å¼€å§‹æ‰§è¡Œã€‚è€Œä¸”æ²¡æœ‰ç»‘å®šå‡½æ•°ã€‚ 7.å¦‚æœå­å…ƒç´ ä¸ºå½“å‰çš„thisï¼Œé‚£ä¹ˆnextæ˜¯çˆ¶å…ƒç´ çš„ä¸‹ä¸€ä¸ªï¼Œè€Œä¸æ˜¯å­å…ƒç´ çš„!ï¼Ÿ 8.å†æ¬¡å¼ºè°ƒï¼Œthisæ˜¯Domå¯¹è±¡ï¼Œåœ¨Jqueryä½¿ç”¨çš„æ—¶å€™ï¼Œè¦è½¬æ¢ä¸ºJqueryå¯¹è±¡$(this) 9.å¯¹äºæŸä¸ªå±æ€§èµ‹å€¼æˆ–è€…è·å–å€¼ä½¿ç”¨çš„æ˜¯ attr(\u0026quot;name\u0026quot;,\u0026quot;lcf\u0026quot;) æˆ–è€… var myName=attr(\u0026quot;name\u0026quot;) 10.åˆ¤æ–­2ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ä½¿ç”¨çš„æ˜¯==ï¼Œä¸”æ”¯æŒä¸‰ç›®è¿ç®—ç¬¦ã€‚ 11.JSä¸­å˜é‡çš„ç±»å‹ï¼šboolean å­—ç¬¦ä¸² æ•°å€¼ç±»å‹ã€‚  å››ã€ç»ƒä¹ æ€»ç»“äºŒ 1.Jqueryä¸­å±æ€§å¯ä»¥é€šè¿‡[ name=bb] æ¥åŒ¹é…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ .attr(\u0026ldquo;bb\u0026rdquo;) æ¥è·å–ï¼ŒåŒæ—¶ .attr(\u0026ldquo;bb\u0026rdquo;,\u0026ldquo;love\u0026rdquo;)æ¥èµ‹å€¼;ã€‚ 2.æ“ä½œæ–‡æœ¬èŠ‚ç‚¹å¯ä»¥é€šè¿‡æ–‡æœ¬èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ¥æ“ä½œã€‚æ¯”å¦‚æˆ‘çˆ±ä½ \nã€‚é€šè¿‡idä¸ºmmè·å–åˆ°pç„¶åtext()å°±å¯ä»¥äº†ã€‚ 3.åœ¨htmlä¸­æ ‡ç­¾å°±æ˜¯å…ƒç´ ï¼Œå…ƒç´ å°±æ˜¯æ ‡ç­¾ï¼Œå®Œå…¨å¯ä»¥è¿™ä¹ˆç†è§£ã€‚ 4.å¯¹äºå±æ€§çš„æ“ä½œå¯ä»¥ä½¿ç”¨attræ¥ï¼Œå¦‚æœè¦å–å€¼ä½¿ç”¨ $(\u0026ldquo;#bb\u0026rdquo;).attr(\u0026ldquo;value\u0026rdquo;) å¯ä»¥è·å–idä¸ºbbçš„valueå€¼ã€‚å¦‚æœè¦èµ‹å€¼ $(\u0026ldquo;#bb\u0026rdquo;).attr(\u0026ldquo;value\u0026rdquo;,\u0026ldquo;æˆ‘çˆ±ä½ \u0026rdquo;); 5.å¯¹äºvalueæ›´æœ‰æ›´ç®€å•çš„æ“ä½œå°±æ˜¯ val()ã€‚ä¸Šé¢çš„ç­‰ä»·äº $(\u0026ldquo;#bb\u0026rdquo;).val(\u0026ldquo;123\u0026rdquo;)è¿™ä¸ªèµ‹å€¼ $(\u0026ldquo;#bb\u0026rdquo;).val();è¿™ä¸ªå–å€¼ã€‚ 6.appendæ˜¯åœ¨è¢«é€‰å®šèŠ‚ç‚¹çš„å†…éƒ¨æ·»åŠ ä¸ŠXXXï¼Œprependæ˜¯åœ¨æŸä¸ªå…ƒç´ å‰ï¼ˆä»ç„¶åœ¨å†…éƒ¨ï¼‰æ·»åŠ å­èŠ‚ç‚¹ã€‚ 7.afterå’Œappendæ·»åŠ æ–¹å¼å’Œ6çš„appendå’Œprependç›¸åŒï¼Œä½†æ˜¯è¿™2ä¸ªæ·»åŠ çš„æ˜¯å…„å¼ŸèŠ‚ç‚¹ã€‚ 8.å…³äº6å’Œ7ï¼Œå¦‚æœæˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ªä¸œè¥¿å°±ç›´æ¥å†™å°±æ˜¯äº†ï¼Œæ¯”å¦‚ï¼š $(\u0026ldquo;#bj\u0026rdquo;).after(\u0026rdquo;æˆéƒ½\u0026rdquo;); è¿™ç§å½¢å¼ã€‚\n1.å¯¹äºJSæ¥è¯´ï¼Œåœ¨Webä¸­ï¼Œæœ€é‡è¦çš„åº”ç”¨ä¹‹ä¸€å°±æ˜¯DOMã€‚ 2.Domæ˜¯é’ˆå¯¹HTMLå’ŒXMLæ“ä½œçš„ä¸€ä¸ªAPIã€‚ 3.Domå°†ä¸€ä¸ªæ–‡æ¡£è¡¨ç¤ºä¸ºä¸€é¢—å®¶æ—æ ‘ï¼ˆçˆ¶ï¼Œå…„ï¼Œå­ èŠ‚ç‚¹ï¼‰ 4.å‡ ä¸ªå¸¸ç”¨çš„APIã€‚ getElementById åªèƒ½ç”¨documentæ¥ä½¿ç”¨ï¼Œé€šè¿‡idæŸ¥æ‰¾ä¸€ä¸ªèŠ‚ç‚¹ã€‚ getElementsByTagName è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé€šè¿‡æŒ‡å®šçš„æ ‡ç­¾åå»å¯»æ‰¾ï¼Œä¸å¿…ä½œç”¨äºæ•´ä¸ªæ–‡æ¡£ã€‚ hasChildNodes è°ƒç”¨çš„èŠ‚ç‚¹æ˜¯å¦å«æœ‰å­èŠ‚ç‚¹ã€‚ 5.Domä¸­çš„èŠ‚ç‚¹æœ‰æ–‡æœ¬èŠ‚ç‚¹ï¼ˆTextï¼‰ï¼Œå±æ€§èŠ‚ç‚¹ï¼ˆAttributeï¼‰ï¼Œå…ƒç´ èŠ‚ç‚¹ï¼ˆElementï¼‰ã€‚ 6.ä»¥ä¸Š3ç±»èŠ‚ç‚¹ä¸­ï¼Œéƒ½æœ‰å¦‚ä¸‹å±æ€§ï¼š nodeNameï¼šåªè¯»ï¼Œæ ‡è¯†çš„æ˜¯ç»™å®šèŠ‚ç‚¹çš„åå­—ï¼Œè¯¥èŠ‚ç‚¹ä¸ºåªè¯»å±æ€§ã€‚å¯¹äºæ–‡æœ¬èŠ‚ç‚¹è¿”å›çš„æ˜¯ #text çš„å­—ç¬¦ä¸²ã€‚ noteTypeï¼šåªè¯»ï¼Œè¿”å›å€¼ä¸ºintï¼Œæ ‡è¯†èŠ‚ç‚¹çš„ç±»å‹ã€‚å…ƒç´ èŠ‚ç‚¹ 1ï¼Œå±æ€§èŠ‚ç‚¹ 2ï¼Œæ–‡æœ¬èŠ‚ç‚¹ 3ã€‚ï¼ˆä»å°åˆ°å¤§çš„è®°å¿†é¡ºåºï¼‰ nodeValue: å¯è¯»ï¼Œå¯å†™ã€‚è¿”å›å½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œå±æ€§èŠ‚ç‚¹è¿”å›å±æ€§çš„å€¼ï¼Œæ–‡æœ¬èŠ‚ç‚¹è¿”å›æ–‡æœ¬çš„å€¼ï¼Œå…ƒç´ èŠ‚ç‚¹å•¥éƒ½æ²¡æœ‰ã€‚ 7.Domä¸­å¸¸ç”¨æ–¹æ³•ï¼š replaceChild()ï¼šè¿”å›å€¼æ˜¯ä¸€ä¸ªæŒ‡å‘æ–°çš„æˆ–è€…æ—§çš„èŠ‚ç‚¹ã€‚ï¼ˆï¼Ÿï¼‰ä½œç”¨æ˜¯å§ä¸€ä¸ªçˆ¶å…ƒç´ ä¸­çš„å­èŠ‚ç‚¹æ›¿æ¢ä¸ºå¦å¤–ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ ex: var reference = element.replaceChild(newChild,oldChild); getAttribute(): è¿”å›çš„æ˜¯æŒ‡å®šå…ƒç´ çš„ç»™å‡Œå±æ€§çš„å€¼ã€‚ ex: var attributeValue = element.getAttribute(attributeName); setAttribute(key,value)ï¼šä¸ºæŒ‡å®šçš„å…ƒç´ æ·»åŠ æŸä¸ªå±æ€§ï¼Œå¦‚æœæ­¤å±æ€§å·²ç»å­˜åœ¨å°±åˆ·æ–°ï¼Œå¦‚æœä¸å­˜åœ¨å°±æ·»åŠ ã€‚ ex: var para = document.createElement(â€œpâ€); para.setAttribute(â€œidâ€,â€fineprintâ€); createElement(eleName):é€šè¿‡æŒ‡å®šçš„æ ‡ç­¾åå­—æ¥åˆ›å»ºä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚è¿™ä¸ªæ–°åˆ›å»ºçš„èŠ‚ç‚¹æ²¡å®é™…æ·»åŠ åˆ°æŸä¸ªèŠ‚ç‚¹ä¸Šã€‚ ex: var oP = document.createElement(\u0026ldquo;p\u0026rdquo;); createTextNode()ï¼šåˆ›å»ºä¸€ä¸ªåŒ…å«æŒ‡å®šæ–‡æœ¬çš„æ–‡æœ¬èŠ‚ç‚¹ã€‚è¿”å›å€¼ä¸ºä¸€ä¸ªæŒ‡å‘æ–°å»ºæ–‡æœ¬èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚ ex: var oText=document.createTextNode(\u0026ldquo;HEllo world\u0026rdquo;); appendChild()ï¼šä¸ºæŒ‡å®šçš„å…ƒç´ æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹åã€‚ insertBefore()ï¼šåœ¨æŒ‡å®šçš„èŠ‚ç‚¹å‰é¢æ·»åŠ ã€‚ ex: var reference = element.insertBefore(newNode,targetNode); æ³¨ï¼šDomæ²¡æœ‰æä¾›insertAfter()æ–¹æ³•ï¼šå°±æ˜¯åœ¨æ’å…¥èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¹‹å‰æ·»åŠ ï¼Œå°±æ˜¯åœ¨æŒ‡å®šèŠ‚ç‚¹çš„å‰é¢æ·»åŠ ã€‚ removeChild()ï¼šåœ¨æŒ‡å®šèŠ‚ç‚¹ä¸­çš„å­èŠ‚ç‚¹åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ã€‚ æ³¨ï¼šä¸€å®šè¦æ˜¯çˆ¶èŠ‚ç‚¹å»è°ƒç”¨ç„¶åæ‹¬å·é‡Œé¢æ˜¯è‡ªå·±ç‚¹ã€‚ exï¼š var message = document.getElementById(â€œfineprintâ€); var container = message.parentNode; container.removeChild(message); 8.Domä¸­å¸¸ç”¨å±æ€§ ChildNodesï¼šè¿”å›çš„æ˜¯æŒ‡å®šçˆ¶èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚ æ³¨ï¼šæ–‡æœ¬èŠ‚ç‚¹å’Œå±æ€§èŠ‚ç‚¹ï¼Œè‚¯å®šä¸å«æœ‰å­èŠ‚ç‚¹äº†ï¼Œå¦‚æœè°ƒç”¨è¿™ä¸ªå±æ€§ï¼Œä¼šè¿”å›ç©ºæ•°ç»„ã€‚ firstChild:è¿”å›çš„æ˜¯æŒ‡å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ ex:node.ChileNodes[0]å’ŒfirstChild æ˜¯ç›¸åŒçš„ã€‚ lastChild:å’Œfirstæƒ³æ³•ï¼Œæœ€åä¸€ä¸ªã€‚ nextSiblingï¼šæŒ‡å®šèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ previousSibling:æŒ‡å®šèŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ parentNodeï¼šè¿”å›çš„æ˜¯æŒ‡å®šèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚ äºŒã€JavaScriptç»ƒä¹ æ€»ç»“ 1.window.onload=function(){\u0026hellip;}è¡¨ç¤ºçš„æ˜¯åœ¨é¡µé¢åŠ è½½å®Œæˆåä¾¿å¼€å§‹è¿è¡Œã€‚ 2.node.insertBefor(new node,null)ã€‚è¿™æ ·è°ƒç”¨å°±å¯ä»¥åœ¨æŒ‡å®šçš„å‰é¢æ·»åŠ äº†! 3.å¦‚æœç½‘é¡µä¹±ç ï¼Œå¯ä»¥åœ¨ä¹‹é—´åŠ ä¸Šï¼š 4.ç‰¹åˆ«è¯´æ˜ï¼šinsertBeforè¿™ä¸ªæ–¹æ³•ã€‚3ä¸ªå‚æ•°ï¼š paraentNode.insertBefor(newNode,childNodeInParaNode); å°±æ˜¯è¯´å“ªä¸ªNodeæ¥è°ƒç”¨insertBeforeæ–¹æ³•å°±æ˜¯åœ¨é‚£ä¸ªNodeçš„å­èŠ‚ç‚¹ä¸­æ’å…¥ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ’å…¥çš„èŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è‡ªå·±ç‚¹ä¸­è¦åœ¨å“ªä¸ªæŒ‡å®šçš„å­å…ƒç´ å‰é¢ã€‚ æ³¨ï¼šç¬¬äºŒä¸ªèŠ‚ç‚¹å¯æ˜¯æ˜¯nullï¼Œå°±è¡¨ç¤ºåœ¨æœ€åæ·»åŠ ï¼ŒåŒAppendChildã€‚ç‰¹åˆ«æ³¨æ„äº†ã€‚ 5.getElementByTagName(\u0026ldquo;æ ‡ç­¾\u0026rdquo;)ï¼Œè¿™ä¸ªé‡Œé¢è¾“å…¥çš„æ˜¯HTMLçš„æ ‡ç­¾ã€‚ 6.å¯¹äºå…ƒç´ èŠ‚ç‚¹çš„nodeNameï¼Œå…¶è¿”å›å€¼æ°¸è¿œæ˜¯å¤§å°çš„æ ‡ç­¾ã€‚ 7.å¿˜è®°nodeValueå§ï¼Œä½¿ç”¨valueå°±å¤Ÿäº†ï¼Œå‰é¢çš„éœ€è¦åŒºåˆ†ä¸‹ã€‚ 8.valueè¿™ä¸ªå±æ€§å¯è¯»å¯å†™ã€‚ 9.å¯¹äºä½¿ç”¨firstChildå’ŒlastChildä¸æ˜¯æˆ‘ä»¬æ‰€è§çš„ç¬¬ä¸€ä¸ªã€‚è¿™ä¸ªç‰¹åˆ«æ³¨æ„äº†ã€‚ 10.é€šå¸¸æ¥è¯´firstNodeå’ŒlastNodeè·å–çš„æ˜¯æ–‡æœ¬èŠ‚ç‚¹ã€‚ 11.å¯¹äºæ–‡æœ¬èŠ‚ç‚¹ï¼Œå¦‚æœè¦è®¾ç½®ä»–çš„å€¼ï¼Œéœ€è¦ä½¿ç”¨nodeValueè€Œä¸æ˜¯valueã€‚æ¯”å¦‚è¯´firstChildå’ŒlastChildè·å–çš„éƒ½æ˜¯å±äºæ–‡æœ¬èŠ‚ç‚¹ã€‚ 12.ä¸ºæŸä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ  å¯ä»¥ä½¿ç”¨innderHtmlä¹Ÿå¯ä»¥ä½¿ç”¨ åˆ›å»ºä¸€ä¸ªTextNodeç„¶åæ·»åŠ åˆ°æŸä¸ªèŠ‚ç‚¹ä¸Šå»ã€‚ 13.å¯¹äºreplaceChildï¼ŒparentNode.replaceChild(newChildï¼ŒchildInParane).è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯çˆ¶èŠ‚ç‚¹è°ƒç”¨æ›¿æ¢æŸä¸ªå­èŠ‚ç‚¹ï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸€èˆ¬éƒ½æ˜¯æ–°çš„èŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªèŠ‚ç‚¹ 14.å‡ ä¸ªä¸åŠ æ‹¬å·çš„åœ°æ–¹: window.onload=function myFunc(){\u0026hellip;} 15.åœ¨JSä¸­ï¼Œæ–¹æ³•å¸¦äº†æ‹¬å·è¡¨ç¤ºè¿è¡Œã€‚\n1.Jqueryæ˜¯å¯¹JavaScriptè¿›è¡Œå°è£…åçš„åº“ï¼Œå…¶ä¸»æ—¨æ˜¯â€œå†™çš„å°‘ï¼Œåšçš„å¤šâ€ 2.åœ¨Jqueryä¸­Jqueryæ˜¯ä¸€ä¸ªé¡¶çº§å¯¹è±¡ï¼Œæ‰€æœ‰çš„æ–¹æ³•éƒ½åœ¨è¿™ä¸ªå¯¹è±¡ä¸‹ï¼Œä¸” $ æ˜¯è¿™ä¸ªæ–¹æ³•çš„åˆ«åã€‚ 3.Domå¯¹è±¡å’ŒJqeruyå¯¹è±¡æ˜¯ä¸åŒçš„ï¼Œåªæœ‰Jqueryå¯¹è±¡æ‰èƒ½è°ƒç”¨Jqueryçš„æ–¹æ³•ï¼ŒDomå¯¹è±¡ä¸å¯ä»¥ã€‚ 4.Jqueryçš„å¯¹è±¡åœ¨å½¢å¼ä¸Šç”¨ $å¼€å¤´æ¯”å¦‚ var $node=$(\u0026quot;button\u0026quot;); 5.Jqeruyå¯¹è±¡è½¬Domå¯¹è±¡ä¸€èˆ¬é€šè¿‡ä¸‹æ ‡æ¥è·å–ï¼Œæ¯”å¦‚ var firstNode=$node[0];æˆ–è€… var secodNode=$node.get[0]; 6.Domå¯¹è±¡è½¬Jqueryå¯¹è±¡ å°±æ˜¯åœ¨Domå¯¹è±¡å‰é¢åŠ ä¸Š$å°±è¡Œäº†ï¼Œæ¯”å¦‚è¯´: var $node =$(document.getElementById(\u0026quot;ok\u0026quot;)); 7.thisæ°¸è¿œæ˜¯Domå¯¹è±¡è€Œ$(this) 8.Jqeryçš„é€‰æ‹©å™¨ï¼š idé€‰æ‹©å™¨ #id ${\u0026quot;#idName\u0026quot;} classé€‰æ‹©å™¨ .class ${\u0026quot;.className\u0026quot;} æ‰€æœ‰å…ƒç´ é€‰æ‹©å™¨ ${elementName} ${\u0026quot;p\u0026quot;} 8.é€‰æ‹©å™¨æ˜¯Jqueryçš„åŸºç¡€ï¼Œä»¥ä¸‹ä¸ºåŸºæœ¬çš„é€‰æ‹©å™¨ #ä¸ºidé€‰æ‹©å™¨ .ä¸ºç±»é€‰æ‹©å™¨ $(\u0026quot;div\u0026quot;) æ˜¯æ‰€æœ‰çš„åä¸ºdivçš„é€‰æ‹©å™¨ï¼Œ $(\u0026quot;*\u0026quot;)æ˜¯é€‰æ‹©çš„æ‰€æœ‰ã€‚ 9.å±‚æ¬¡é€‰æ‹©å™¨: $(\u0026quot;body div\u0026quot;)ï¼šé€‰å–çš„æ˜¯bodyé‡Œé¢çš„divï¼ŒåŒ…æ‹¬å­å…ƒç´ ä¸­çš„å­å…ƒç´ ã€‚ $(\u0026quot;body \u0026gt; div\u0026quot;)ï¼š é€‰å–çš„æ˜¯bodyå­å…ƒç´ ä¸­çš„div ç‰¹åˆ«æ³¨æ„ï¼šè¿™ä¸ªé€‰å–çš„æ‰æ˜¯å­å…ƒç´ ,è€Œä¸”å­å…ƒç´ ä¸­æ‰€æœ‰çš„ã€‚ $(\u0026quot;.one + div\u0026quot;)ï¼šé€‰å–çš„æ˜¯classä¸ºoneçš„å…„å¼ŸèŠ‚ç‚¹ä¸­ä¸‹ä¸€ä¸ªdivã€‚ $(\u0026quot;.one ~ div\u0026quot;)ï¼š é€‰å–çš„æ˜¯classä¸ºoneåé¢çš„æ‰€æœ‰çš„div æ¨èå†™æ³• $(\u0026quot;.one\u0026quot;).next(\u0026quot;div\u0026quot;) æ³¨ï¼šå¯¹äºç¬¬ä¸€ä¸ª é€‰å–çš„æ˜¯bodyä¸‹é¢çš„æ‰€æœ‰divå°±æ˜¯ä¾æ¬¡éå†æ‰€æœ‰çš„divã€‚è€Œç¬¬äºŒæ˜¯é€‰å–çš„bodyä¸‹é¢çš„ç¬¬ä¸€å±‚å­å…ƒç´ çš„divã€‚ 10.åŸºæœ¬è¿‡æ»¤å™¨ä¸­æœ‰3ä¸ªå¾ˆé‡è¦ï¼š $(\u0026quot;div:first\u0026quot;)ï¼šdivä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ $(\u0026quot;div:last\u0026quot;)ï¼šdivä¸­æœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚ $(\u0026quot;:focus\u0026quot;)ï¼šå½“å‰æ­£åœ¨focusçš„ã€‚ $(\u0026quot;:animate\u0026quot;):å½“å‰æ­£åœ¨è¿è¡Œçš„ã€‚ 11.å‡ ä¸ªå†…å®¹è¿‡æ»¤å™¨ï¼š $(\u0026quot;div:contains(txt)\u0026quot;)ï¼šdivä¸‹å†…å®¹åŒ…å«txtçš„æ‰€æœ‰ï¼Œä¸ä»…ä»…æ˜¯ç¬¬ä¸€ä¸ªã€‚ $(\u0026quot;div:empty\u0026quot;):divä¸‹å†…å®¹ä¸ºemptyçš„ 12.å±æ€§è¿‡æ»¤å™¨ $(div[tille=bb]):é€‰å–divä¸‹æœ‰å±æ€§åä¸ºtitleï¼Œå€¼ä¸ºbbçš„å…ƒç´ ã€‚ $(div[title]):é€‰å–å«æœ‰titleå±æ€§çš„å…ƒç´ ã€‚ $(div[title]*=bb):é€‰å–divä¸‹å±æ€§å€¼titleä¸­å¸¦æœ‰bbçš„å…ƒç´ ã€‚ $(div[title]^=bb):é€‰å–divä¸‹å±æ€§ä¸ºtitleä»¥bbå¼€å¤´çš„å…ƒç´ ã€‚ $(div[title]$=bb):é€‰å–divä¸‹titleå±æ€§ä»¥bbç»“å°¾çš„å…ƒç´ ã€‚  å¤šä¸ªæ—¶é—´æ®µçš„ç¬”è®°ï¼Œæœªæ•´ç†ï¼Œå‘¨æœ«æŠ½ç©ºæ•´ç†! ä¸€ã€å¤ä¹ DOM 1.å¯¹äºJSæ¥è¯´ï¼Œåœ¨Webä¸­ï¼Œæœ€é‡è¦çš„åº”ç”¨ä¹‹ä¸€å°±æ˜¯DOMã€‚ 2.Domæ˜¯é’ˆå¯¹HTMLå’ŒXMLæ“ä½œçš„ä¸€ä¸ªAPIã€‚ 3.Domå°†ä¸€ä¸ªæ–‡æ¡£è¡¨ç¤ºä¸ºä¸€é¢—å®¶æ—æ ‘ï¼ˆçˆ¶ï¼Œå…„ï¼Œå­ èŠ‚ç‚¹ï¼‰ 4.å‡ ä¸ªå¸¸ç”¨çš„APIã€‚ getElementById åªèƒ½ç”¨documentæ¥ä½¿ç”¨ï¼Œé€šè¿‡idæŸ¥æ‰¾ä¸€ä¸ªèŠ‚ç‚¹ã€‚ getElementsByTagName è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé€šè¿‡æŒ‡å®šçš„æ ‡ç­¾åå»å¯»æ‰¾ï¼Œä¸å¿…ä½œç”¨äºæ•´ä¸ªæ–‡æ¡£ã€‚ hasChildNodes è°ƒç”¨çš„èŠ‚ç‚¹æ˜¯å¦å«æœ‰å­èŠ‚ç‚¹ã€‚ 5.Domä¸­çš„èŠ‚ç‚¹æœ‰æ–‡æœ¬èŠ‚ç‚¹ï¼ˆTextï¼‰ï¼Œå±æ€§èŠ‚ç‚¹ï¼ˆAttributeï¼‰ï¼Œå…ƒç´ èŠ‚ç‚¹ï¼ˆElementï¼‰ã€‚ 6.ä»¥ä¸Š3ç±»èŠ‚ç‚¹ä¸­ï¼Œéƒ½æœ‰å¦‚ä¸‹å±æ€§ï¼š nodeNameï¼šåªè¯»ï¼Œæ ‡è¯†çš„æ˜¯ç»™å®šèŠ‚ç‚¹çš„åå­—ï¼Œè¯¥èŠ‚ç‚¹ä¸ºåªè¯»å±æ€§ã€‚å¯¹äºæ–‡æœ¬èŠ‚ç‚¹è¿”å›çš„æ˜¯ #text çš„å­—ç¬¦ä¸²ã€‚ noteTypeï¼šåªè¯»ï¼Œè¿”å›å€¼ä¸ºintï¼Œæ ‡è¯†èŠ‚ç‚¹çš„ç±»å‹ã€‚å…ƒç´ èŠ‚ç‚¹ 1ï¼Œå±æ€§èŠ‚ç‚¹ 2ï¼Œæ–‡æœ¬èŠ‚ç‚¹ 3ã€‚ï¼ˆä»å°åˆ°å¤§çš„è®°å¿†é¡ºåºï¼‰ nodeValue: å¯è¯»ï¼Œå¯å†™ã€‚è¿”å›å½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œå±æ€§èŠ‚ç‚¹è¿”å›å±æ€§çš„å€¼ï¼Œæ–‡æœ¬èŠ‚ç‚¹è¿”å›æ–‡æœ¬çš„å€¼ï¼Œå…ƒç´ èŠ‚ç‚¹å•¥éƒ½æ²¡æœ‰ã€‚ 7.Domä¸­å¸¸ç”¨æ–¹æ³•ï¼š replaceChild()ï¼šè¿”å›å€¼æ˜¯ä¸€ä¸ªæŒ‡å‘æ–°çš„æˆ–è€…æ—§çš„èŠ‚ç‚¹ã€‚ï¼ˆï¼Ÿï¼‰ä½œç”¨æ˜¯å§ä¸€ä¸ªçˆ¶å…ƒç´ ä¸­çš„å­èŠ‚ç‚¹æ›¿æ¢ä¸ºå¦å¤–ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ ex: var reference = element.replaceChild(newChild,oldChild); getAttribute(): è¿”å›çš„æ˜¯æŒ‡å®šå…ƒç´ çš„ç»™å‡Œå±æ€§çš„å€¼ã€‚ ex: var attributeValue = element.getAttribute(attributeName); setAttribute(key,value)ï¼šä¸ºæŒ‡å®šçš„å…ƒç´ æ·»åŠ æŸä¸ªå±æ€§ï¼Œå¦‚æœæ­¤å±æ€§å·²ç»å­˜åœ¨å°±åˆ·æ–°ï¼Œå¦‚æœä¸å­˜åœ¨å°±æ·»åŠ ã€‚ ex: var para = document.createElement(â€œpâ€); para.setAttribute(â€œidâ€,â€fineprintâ€); createElement(eleName):é€šè¿‡æŒ‡å®šçš„æ ‡ç­¾åå­—æ¥åˆ›å»ºä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚è¿™ä¸ªæ–°åˆ›å»ºçš„èŠ‚ç‚¹æ²¡å®é™…æ·»åŠ åˆ°æŸä¸ªèŠ‚ç‚¹ä¸Šã€‚ ex: var oP = document.createElement(\u0026ldquo;p\u0026rdquo;); createTextNode()ï¼šåˆ›å»ºä¸€ä¸ªåŒ…å«æŒ‡å®šæ–‡æœ¬çš„æ–‡æœ¬èŠ‚ç‚¹ã€‚è¿”å›å€¼ä¸ºä¸€ä¸ªæŒ‡å‘æ–°å»ºæ–‡æœ¬èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚ ex: var oText=document.createTextNode(\u0026ldquo;HEllo world\u0026rdquo;); appendChild()ï¼šä¸ºæŒ‡å®šçš„å…ƒç´ æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹åã€‚ insertBefore()ï¼šåœ¨æŒ‡å®šçš„èŠ‚ç‚¹å‰é¢æ·»åŠ ã€‚ ex: var reference = element.insertBefore(newNode,targetNode); æ³¨ï¼šDomæ²¡æœ‰æä¾›insertAfter()æ–¹æ³•ï¼šå°±æ˜¯åœ¨æ’å…¥èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¹‹å‰æ·»åŠ ï¼Œå°±æ˜¯åœ¨æŒ‡å®šèŠ‚ç‚¹çš„å‰é¢æ·»åŠ ã€‚ removeChild()ï¼šåœ¨æŒ‡å®šèŠ‚ç‚¹ä¸­çš„å­èŠ‚ç‚¹åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ã€‚ æ³¨ï¼šä¸€å®šè¦æ˜¯çˆ¶èŠ‚ç‚¹å»è°ƒç”¨ç„¶åæ‹¬å·é‡Œé¢æ˜¯è‡ªå·±ç‚¹ã€‚ exï¼š var message = document.getElementById(â€œfineprintâ€); var container = message.parentNode; container.removeChild(message); 8.Domä¸­å¸¸ç”¨å±æ€§ ChildNodesï¼šè¿”å›çš„æ˜¯æŒ‡å®šçˆ¶èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚ æ³¨ï¼šæ–‡æœ¬èŠ‚ç‚¹å’Œå±æ€§èŠ‚ç‚¹ï¼Œè‚¯å®šä¸å«æœ‰å­èŠ‚ç‚¹äº†ï¼Œå¦‚æœè°ƒç”¨è¿™ä¸ªå±æ€§ï¼Œä¼šè¿”å›ç©ºæ•°ç»„ã€‚ firstChild:è¿”å›çš„æ˜¯æŒ‡å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ ex:node.ChileNodes[0]å’ŒfirstChild æ˜¯ç›¸åŒçš„ã€‚ lastChild:å’Œfirstæƒ³æ³•ï¼Œæœ€åä¸€ä¸ªã€‚ nextSiblingï¼šæŒ‡å®šèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ previousSibling:æŒ‡å®šèŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ parentNodeï¼šè¿”å›çš„æ˜¯æŒ‡å®šèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚ äºŒã€JavaScriptç»ƒä¹ æ€»ç»“ 1.window.onload=function(){\u0026hellip;}è¡¨ç¤ºçš„æ˜¯åœ¨é¡µé¢åŠ è½½å®Œæˆåä¾¿å¼€å§‹è¿è¡Œã€‚ 2.node.insertBefor(new node,null)ã€‚è¿™æ ·è°ƒç”¨å°±å¯ä»¥åœ¨æŒ‡å®šçš„å‰é¢æ·»åŠ äº†! 3.å¦‚æœç½‘é¡µä¹±ç ï¼Œå¯ä»¥åœ¨ä¹‹é—´åŠ ä¸Šï¼š 4.ç‰¹åˆ«è¯´æ˜ï¼šinsertBeforè¿™ä¸ªæ–¹æ³•ã€‚3ä¸ªå‚æ•°ï¼š paraentNode.insertBefor(newNode,childNodeInParaNode); å°±æ˜¯è¯´å“ªä¸ªNodeæ¥è°ƒç”¨insertBeforeæ–¹æ³•å°±æ˜¯åœ¨é‚£ä¸ªNodeçš„å­èŠ‚ç‚¹ä¸­æ’å…¥ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ’å…¥çš„èŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è‡ªå·±ç‚¹ä¸­è¦åœ¨å“ªä¸ªæŒ‡å®šçš„å­å…ƒç´ å‰é¢ã€‚ æ³¨ï¼šç¬¬äºŒä¸ªèŠ‚ç‚¹å¯æ˜¯æ˜¯nullï¼Œå°±è¡¨ç¤ºåœ¨æœ€åæ·»åŠ ï¼ŒåŒAppendChildã€‚ç‰¹åˆ«æ³¨æ„äº†ã€‚ 5.getElementByTagName(\u0026ldquo;æ ‡ç­¾\u0026rdquo;)ï¼Œè¿™ä¸ªé‡Œé¢è¾“å…¥çš„æ˜¯HTMLçš„æ ‡ç­¾ã€‚ 6.å¯¹äºå…ƒç´ èŠ‚ç‚¹çš„nodeNameï¼Œå…¶è¿”å›å€¼æ°¸è¿œæ˜¯å¤§å°çš„æ ‡ç­¾ã€‚ 7.å¿˜è®°nodeValueå§ï¼Œä½¿ç”¨valueå°±å¤Ÿäº†ï¼Œå‰é¢çš„éœ€è¦åŒºåˆ†ä¸‹ã€‚ 8.valueè¿™ä¸ªå±æ€§å¯è¯»å¯å†™ã€‚ 9.å¯¹äºä½¿ç”¨firstChildå’ŒlastChildä¸æ˜¯æˆ‘ä»¬æ‰€è§çš„ç¬¬ä¸€ä¸ªã€‚è¿™ä¸ªç‰¹åˆ«æ³¨æ„äº†ã€‚ 10.é€šå¸¸æ¥è¯´firstNodeå’ŒlastNodeè·å–çš„æ˜¯æ–‡æœ¬èŠ‚ç‚¹ã€‚ 11.å¯¹äºæ–‡æœ¬èŠ‚ç‚¹ï¼Œå¦‚æœè¦è®¾ç½®ä»–çš„å€¼ï¼Œéœ€è¦ä½¿ç”¨nodeValueè€Œä¸æ˜¯valueã€‚æ¯”å¦‚è¯´firstChildå’ŒlastChildè·å–çš„éƒ½æ˜¯å±äºæ–‡æœ¬èŠ‚ç‚¹ã€‚ 12.ä¸ºæŸä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ  å¯ä»¥ä½¿ç”¨innderHtmlä¹Ÿå¯ä»¥ä½¿ç”¨ åˆ›å»ºä¸€ä¸ªTextNodeç„¶åæ·»åŠ åˆ°æŸä¸ªèŠ‚ç‚¹ä¸Šå»ã€‚ 13.å¯¹äºreplaceChildï¼ŒparentNode.replaceChild(newChildï¼ŒchildInParane).è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯çˆ¶èŠ‚ç‚¹è°ƒç”¨æ›¿æ¢æŸä¸ªå­èŠ‚ç‚¹ï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸€èˆ¬éƒ½æ˜¯æ–°çš„èŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªèŠ‚ç‚¹ 14.å‡ ä¸ªä¸åŠ æ‹¬å·çš„åœ°æ–¹: window.onload=function myFunc(){\u0026hellip;} 15.åœ¨JSä¸­ï¼Œæ–¹æ³•å¸¦äº†æ‹¬å·è¡¨ç¤ºè¿è¡Œã€‚ ä¸€ã€JSåŸºç¡€ç»†èŠ‚ 1.JSå¦‚æœå†™åœ¨å†…éƒ¨ï¼Œé€šå¸¸æ¨èå†™åœ¨headçš„titleä¸‹é¢ã€‚ 2.window.onload=function(){\u0026hellip;}æ˜¯åœ¨æ•´ä¸ªæ–‡æ¡£DOMæ ‘åŠ è½½å®Œæ¯•åè§¦å‘çš„å‡½æ•°ã€‚ 3.è·å–å…ƒç´ è€Œè¨€ï¼Œæœ€å¸¸ç”¨çš„3ä¸ªæ–¹å¼ byIdï¼ŒbyTagNameï¼ŒbyNameã€‚å‰ä¸¤è€…æœ€å¸¸ç”¨ã€‚ 4.é€šå¸¸æ¥è¯´ï¼Œæ‰¾èŠ‚ç‚¹ï¼Œå¸¸ç”¨çš„æ–¹æ³•æ˜¯ firstChildæˆ–è€…lastChildå’ŒbyTagName3ä¸ªæ–¹æ³•ï¼Œå…¶ä»–çš„æ–¹æ³•æ¯”å¦‚ChildNodesä¸å¸¸ç”¨ã€‚ 5.ï¼ˆé‡ç‚¹ï¼‰å¯¹äºä¸€ä¸ªæ–¹æ³•ï¼Œåé¢æ²¡æœ‰åŠ æ‹¬å·çš„æ–¹æ³•ï¼Œè¢«è°ƒç”¨æ˜¯åªå¯èƒ½æ˜¯æƒ…å†µå…è®¸äº†ï¼Œè¢«è§¦å‘äº†ã€‚ä¸€ä¸ªæ–¹æ³•ä¸€æ—¦åŠ äº†æ‹¬å·è¡¨ç¤ºçš„å°±æ˜¯é©¬ä¸Šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ 6.å¯¹äºforå¾ªç¯ä¸ºæ¯ä¸€ä¸ªèŠ‚ç‚¹èµ‹å€¼çš„æƒ…å†µï¼Œè¿™æ ·çš„ä¸œè¥¿æ²¡æœ‰ååº”è§£é‡Šï¼š for(i=0;iBB è¿™ä¸€å¥ä»£ç ä¸­å°±åŒ…æ‹¬äº†3ä¸ªèŠ‚ç‚¹ï¼šæ–‡æœ¬èŠ‚ç‚¹BB å…ƒç´ èŠ‚ç‚¹ å±æ€§èŠ‚ç‚¹ idå’Œname. 10.è·å–èŠ‚ç‚¹çš„æ–¹å¼æœ‰3ç§ï¼ŒbyIdï¼ŒbyTagNameï¼ŒbyNameã€‚å¯¹äºå­èŠ‚ç‚¹æœ‰3ç§æ–¹å¼firstChildNodeï¼ŒlastChildNodeï¼ŒbyTagName 11.å¯¹äºä»¥ä¸‹ä»£ç ï¼š åŒ—äº¬ åŒ—äº¬  ç¬¬ä¸€ç§çš„firstChildè·å–åˆ°çš„æ˜¯ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼Œè€Œä¸”è¿™ä¸ªæ–‡æœ¬èŠ‚ç‚¹æ˜¯ç©ºçš„ã€‚ç¬¬äºŒè·å–åˆ°çš„å°±æ˜¯å…ƒç´ èŠ‚ç‚¹å°±æ˜¯liè¿™ä¸ªèŠ‚ç‚¹ã€‚æ‰€ä»¥å¯¹äºHTMLæ¥è¯´æ¢è¡Œä¸å¦è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ 12.ï¼ˆé‡è¦ã€‚ï¼‰æ–‡æœ¬èŠ‚ç‚¹ä¸€å®šæ˜¯å…ƒç´ èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ã€‚ 13.å¯¹äºæ–‡æœ¬èŠ‚ç‚¹çš„èµ‹å€¼ä½¿ç”¨nodeValueã€‚nodeTypeï¼Œå…ƒç´ ä¸º1ï¼Œå±æ€§ä¸º2ï¼Œæ–‡æœ¬èŠ‚ç‚¹ä¸º3. 14.valueé€šå¸¸å¯¹äºå±æ€§èŠ‚ç‚¹è€Œè¨€ï¼Œä»–çš„å€¼ã€‚è€ŒnodeValueå¯¹äºæ–‡æœ¬èŠ‚ç‚¹çš„å€¼ã€‚ 15.å¸¸ç”¨çš„JSäº‹ä»¶ï¼Œonclickã€onchange ä¸€ã€å¤ä¹ JS 1.å¯¹äºHTML çš„DOMè€Œè¨€ï¼Œæœ€ä¸Šé¢çš„Documentæ–‡æ¡£èŠ‚ç‚¹ï¼Œæœ€ä¸Šå±‚èŠ‚ç‚¹ã€‚Textæ–‡æœ¬èŠ‚ç‚¹ï¼ŒElementå…ƒç´ èŠ‚ç‚¹ï¼ŒAttributeå±æ€§èŠ‚ç‚¹ã€‚ 2.æ–‡æœ¬èŠ‚ç‚¹ä¸€å®šæ˜¯å…ƒç´ çš„å­èŠ‚ç‚¹ã€‚ 3.å†æ¬¡ç†è§£ï¼šå¯¹äºåŒ¿åå‡½æ•°ï¼Œå¦‚æœè¦é©¬ä¸Šæ‰§è¡Œï¼Œæ˜¯éœ€è¦åœ¨åé¢å†™ä¸Šä¸€ä¸ªæ‹¬å·çš„ã€‚å¯¹äºéåŒ¿åå‡½æ•°ï¼Œæ¯”å¦‚è¯´å¯¹äºä¸€ä¸ªbuttonçš„onclick=\u0026ldquo;Run\u0026rdquo;å’Œonclick=\u0026ldquo;Run()\u0026ldquo;æ„æ€æ˜¯ä¸åŒçš„ï¼Œå‰è€…æ˜¯è¯´åœ¨onclickè¿™ä¸ªäº‹ä»¶è§¦å‘åï¼Œå°†è¦æ‰§è¡Œçš„åŠ¨ä½œæŒ‡å‘Runè¿™ä¸ªæ–¹æ³•ã€‚åè€…æ˜¯è¯´åœ¨onclickäº‹ä»¶è§¦å‘åè¿è¡ŒRunè¿™ä¸ªæ–¹æ³•ã€‚ 4.cssåœ¨å‰ï¼Œjavascriptåœ¨åï¼Œå°½é‡ä¸é˜»å¡ï¼å› ä¸ºæµè§ˆå™¨è§£ææ˜¯ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡åŠ è½½çš„ï¼Œä¸€æ—¦é‡åˆ°scriptæ ‡ç­¾ï¼Œå°±ä¼šåœæ­¢åŠ è½½åé¢çš„ï¼Œå…ˆå¯¹JavaScriptè„šæœ¬æ–‡ä»¶è¿›è¡ŒåŠ è½½å’Œè¿è¡Œã€‚ 5.return false å¯ä»¥é˜»æ–­JSä»£ç çš„è¿è¡Œï¼Œreturnä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ï¼ˆï¼ŸåŒºåˆ«ï¼Ÿï¼‰ 6.å…³äºäº‹ä»¶å†’æ³¡ä¸æ‡‚ã€‚ã€‚ã€‚ 7.å…³äºcreateTextNode()ç„¶åXnode.appendè¿›å»å’ŒXnode.innerHtml=\u0026ldquo;XX\u0026rdquo; æ˜¯ä¸æ˜¯ä¸æ‡‚çš„ã€‚\n","date":1431327524,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327524,"objectID":"a61e17f91df96b81a9f4ccdfe597bbb2","permalink":"/blog/2015/05/11/march15th/","publishdate":"2015-05-11T14:58:44+08:00","relpermalink":"/blog/2015/05/11/march15th/","section":"archives","summary":"","tags":null,"title":"March15th","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"å­¦ä¹ javaçš„äººéƒ½çŸ¥é“ï¼Œjavaæ‰§è¡Œclassæ–‡ä»¶æ˜¯éœ€è¦åœ¨jvmçš„ç¯å¢ƒä¸‹ã€‚ä½†æ˜¯ä½ å†™å®Œä¸€ä¸ªè½¯ä»¶éš¾é“éå¾—å«äººå®‰è£…ä¸€ä¸ªJREå˜›ï¼Ÿï¼æ˜¯çš„ï¼Œå¿…é¡»ã€‚ä½†æ˜¯è¿™æ ·åˆ«äººç”¨èµ·æ¥ä¼šä¸çˆ½ï¼Œäºæ˜¯æˆ‘ä»¬å°±äº‹å…ˆæŠŠjavaçš„JREç»™åµŒå…¥åˆ°æˆ‘ä»¬çš„EXEå®‰è£…åŒ…ï¼Œè¿™æ ·ä¸æ˜¯å¾ˆokï¼ äºæ˜¯å°±è°ƒç ”äº†ä¸€ç•ªï¼Œæœ€åé€‰æ‹©eclipse+exe4j+innosetupè¿™ä¸‰ä¸ªè½¯ä»¶é…åˆä½¿ç”¨ é™„åŠ çš„wordæ–‡ä»¶åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†è¿›è¡Œï¼Œ ç¬¬ä¸€éƒ¨åˆ† eclipseç”Ÿæˆå¯è¿è¡Œçš„jaråŒ… ç¬¬äºŒéƒ¨åˆ† Exe4jäº§ç”Ÿexeç¨‹åº\nç¬¬ä¸‰éƒ¨åˆ† InnoSetupå°è£… jreåˆ°exeçš„è¿è¡Œç¯å¢ƒä¸‹ exe4jæ˜¯éç ´è§£ç‰ˆï¼Œåœ¨Wordä¸­æä¾›äº†æ³¨å†Œç ï¼Œä¸»è¦ä½œç”¨æ˜¯ç”Ÿæˆexeæ–‡ä»¶ï¼ˆè¿è¡Œåœ¨æœ‰JREçš„ç¯å¢ƒä¸‹ï¼‰ï¼Œç”±äºå¤ªå¤§å¹¶æœªä¸Šä¼ ï¼Œæä¾›è¿æ¥exe4jä¸‹è½½ ã€‚ InnoSetup.exeæ˜¯ä¸€ä¸ªæ‰“åŒ…ç¨‹åºï¼Œç¼–ç¨‹setup.exeå®‰è£…ç‰ˆï¼ˆå®‰è£…ä¹‹åï¼Œæ²¡æœ‰JREä¹Ÿå¯ä»¥è¿è¡Œã€‚ï¼‰ ä¸»è¦å…³é”®ç‚¹ï¼š exe4j çš„ GUIå’Œconsoleä¸¤ç§æƒ…å†µçš„ç”Ÿæˆ\nå¡«å†™JREæœ€å°ç‰ˆæœ¬ï¼Œæœ€å¤§ç‰ˆæœ¬å¯ä»¥ä¸ç”¨å¡«ã€‚åˆ æ‰InnoSetupé»˜è®¤çš„Java_homeä¿¡æ¯ï¼Œå¯¼å…¥æ­£ç¡®çš„JREæ–‡ä»¶å¤¹ï¼ˆåˆ‡å‹¿å°å¿ƒï¼‰ã€‚ å…¶ä»–çš„éƒ½æ˜¯å‚»ç“œå¼å®‰è£…\nJaråŒ…æ‰“åŒ…æˆå¯å®‰è£…çš„EXEæ–‡ä»¶.docx 559.84 KB, ä¸‹è½½æ¬¡æ•°: 0 jarå˜exeçš„è¯¦ç»†æ­¥éª¤\ninnosetup-5.5.5.rar 1.83 MB, ä¸‹è½½æ¬¡æ•°: 0 innosetupæ‰“åŒ…ç¨‹åº\nåœ¨word æ–‡æ¡£é‡Œé¢ï¼Œä½¿ç”¨çš„jreä¸æ˜¯jdkè‡ªå¸¦çš„ï¼Œè€Œæ˜¯å¦å¤–ä¸‹è½½ï¼Œå½“æ—¶ä¸çŸ¥é“ä¸ºä»€ä¹ˆç›´æ¥æ‹·è´åˆ°é¡¹ç›®æ–‡ä»¶å¤¹ä¸è¡Œ,æŠ¥æ‰¾ä¸åˆ°jvmçš„é”™è¯¯ã€‚ä»Šå¤©ä¸‹åˆå¸…é”…é”…ä¸€æŠ˜è…¾ï¼Œæ‰å‘ç°ä¸‹è½½çš„jreå’Œjdkè‡ªå¸¦çš„jreæœ‰äº›ä¸åŒï¼Œjdkçš„jreç›®å½•çš„binç›®å½•å¤šäº†ä¸€ä¸ªserveræ–‡ä»¶å¤¹ï¼Œè€ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªclient æ–‡ä»¶å¤¹ï¼ˆéjavaè‡ªå¸¦çš„jreåªæœ‰ä¸€ä¸ªclientæ–‡ä»¶å¤¹ï¼‰ï¼Œæ‰€ä»¥å…¶å®javaè‡ªå¸¦çš„jreæ–‡ä»¶å¤¹æœ‰ä¸¤ä¸ªjvmï¼ˆå¬èµµå¸…è¯´æ˜¯ï¼šä¸ºäº†è®¾è®¡å®Œç¨‹åºåä»¥ç”¨æˆ·è§’åº¦ä½“éªŒç¨‹åºæ•ˆæœï¼Œæˆ‘è¡¨ç¤ºä¸è§£ï¼‰ ï¼Œè€Œä¹Ÿæ­£å› ä¸ºè¿™ä¸¤ä¸ªjvmçš„åŸå› å¯¼è‡´äº†ç¨‹åºä¸çŸ¥é“ä½¿ç”¨å“ªä¸ªjvmè¿è¡Œäº†ï¼Œäºæ˜¯æœ‰äº†ä¸‹é¢çš„æ–¹æ³•ã€‚  æ‰€ä»¥ï¼ŒåŸºäºè¿™ç•ªè°ƒæŸ¥ï¼Œæå‡ºå¦ä¸€ç§æ–¹æ³• 1. æ‹·è´jdkåº•ä¸‹çš„jreåˆ°é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ï¼Œç„¶ååˆ æ‰binç›®å½•ä¸‹çš„serverï¼ˆåˆ æ‰å¤šä½™çš„jvm) ,ç„¶åæŒ‰ç…§wordä¸­çš„è¿‡ç¨‹ç…§æ ·æœ‰æ•ˆï¼ˆä¸éœ€è¦é¢å¤–å†å»ä¸‹è½½jre) æµ‹è¯•ï¼Œæœ‰æ•ˆã€‚\n","date":1431327523,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327523,"objectID":"6fb384637b20db505a4c3a6fca81ef65","permalink":"/blog/2015/05/11/jarbao-da-bao-cheng-ke-an-zhuang-de-exewen-jian/","publishdate":"2015-05-11T14:58:43+08:00","relpermalink":"/blog/2015/05/11/jarbao-da-bao-cheng-ke-an-zhuang-de-exewen-jian/","section":"archives","summary":"","tags":null,"title":"JaråŒ…æ‰“åŒ…æˆå¯å®‰è£…çš„EXEæ–‡ä»¶","type":"archives"},{"authors":null,"categories":["JavaScript"],"content":"functionä¸²è®²ç¬”è®°\n1ï¼šfunctionæ˜¯ä»€ä¹ˆï¼Ÿ JSçš„functionç±»ä¼¼äºjavaå’Œ.Netçš„æ–¹æ³•\n2ï¼šå¯¹æ¯”JSç‰ˆæœ¬å’ŒJavaç‰ˆæœ¬çš„ä¸¤ä¸ªå˜é‡çš„æ±‚å’Œï¼Œå¾—å‡ºä¸‰ä¸ªä¸åŒç‚¹ã€‚ JSç‰ˆæœ¬ï¼š\nfunction sum(num1,num2) { var ret = num1+num2; return ret; }  Javaç‰ˆæœ¬ï¼š\npublic int sum(int num1,int num2) { int ret= num1+num2; return ret; }  ç›¸åŒç‚¹ï¼š å‡½æ•°åå­— å‚æ•°åˆ—è¡¨ å˜é‡å£°æ˜ è¿”å›å€¼ ä¸åŒç‚¹ï¼š JSçš„å‡½æ•°å£°æ˜æ²¡æœ‰ä¿®é¥°ç¬¦ JSçš„å‡½æ•°å£°æ˜æ²¡æœ‰è¿”å›å€¼ JSçš„å‡½æ•°å£°æ˜çš„å‚æ•°åˆ—è¡¨æ²¡æœ‰å˜é‡ç±»å‹\nç”±è¿™ä¸‰ä¸ªä¸åŒç‚¹æˆ‘ä»¬å¯ä»¥æå‡ºä¸‰ä¸ªé—®é¢˜ ä¸ºä»€ä¹ˆæ²¡æœ‰ä¿®é¥°ç¬¦ï¼Ÿ ä¸ºä»€ä¹ˆæ²¡æœ‰è¿”å›å€¼ç±»å‹ï¼Ÿ ä¸ºä»€ä¹ˆå‚æ•°åˆ—è¡¨æ²¡æœ‰å˜é‡ç±»å‹ï¼Ÿ\n3ï¼šJSä¸ºä»€ä¹ˆæ²¡æœ‰ä¿®é¥°ç¬¦ï¼Ÿ Jsä¸æ˜¯é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œè™½ç„¶æœ‰å¯¹è±¡ä½†ä¸æ˜¯çœŸæ­£çš„å¯¹è±¡ã€‚\nJsçš„å¯¹è±¡æ˜¯æ¨¡æ‹Ÿå‡ºæ¥çš„ï¼Œæ²¡æœ‰å°è£…çš„æ¦‚å¿µï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨ä¿®é¥°ç¬¦ï¼ˆä¿®é¥°ç¬¦åªæ˜¯é’ˆå¯¹äºå¯¹è±¡ï¼‰\n4ï¼šJSä¸ºä»€ä¹ˆæ²¡æœ‰è¿”å›å€¼ç±»å‹å’Œå‚æ•°åˆ—è¡¨å˜é‡ç±»å‹ï¼Ÿ è¿™ä¸¤ä¸ªé—®é¢˜æ˜¯ä¸€æ ·çš„é“ç†ï¼Œéƒ½æ˜¯å¼±ç±»å‹çš„åŸå›  5ï¼šç”±å‚æ•°åˆ—è¡¨å¼•å…¥ä¸€ä¸ªargumentså¯¹è±¡ï¼Œwhat is it? åœ¨å¼€å§‹äº†è§£argumentså¯¹è±¡ä¹‹å‰ï¼Œå¿…é¡»è¯´æ˜å‡½æ•°çš„å››ç§å®šä¹‰æ–¹å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 5.1æœ€ä¸€èˆ¬çš„å‡½æ•°å®šä¹‰æ–¹æ³•ï¼š æœ‰function æœ‰å‡½æ•°åç§°sum æœ‰å‚æ•°åˆ—è¡¨ num1,num2 å¯æœ‰å¯æ— çš„returnè¯­å¥\nfunction sum(num1,num2) { var ret = num1+num2; return ret }  5.2æœ€å¸¸è§çš„åŒ¿åç±»å‡½æ•°è°ƒç”¨æ–¹æ³•ï¼š æœ‰function æ²¡æœ‰å‡½æ•°åç§° æœ‰å˜é‡æ³ªé£š num1,num2 å¯æœ‰å¯æ— çš„returnè¯­å¥ é€šè¿‡ä¸€ä¸ªvar sumå‡½æ•°ç±»å‹å˜é‡è·å¾—è¯¥ç±»å‹ï¼Œå¹¶ä½¿å¾—sumå˜é‡å…·æœ‰å¯è°ƒç”¨çš„å±æ€§ã€‚\nvar sum = function(num1,num2) { var ret = num1+num2; return ret }  è§„å¾‹ï¼šé¡µé¢ä¸­çš„jsä»£ç æ‰§è¡Œä¹‹å‰ï¼Œæµè§ˆå™¨ä¼šå…ˆæ‰«æå…¨éƒ¨çš„jsä»£ç ï¼Œé‡åˆ°ä¸€ä¸ªå‡½æ•°å£°æ˜ï¼Œå°±æŠŠæ­¤å‡½æ•°çš„å£°æ˜åŠ åˆ°å…¨å±€åŸŸï¼Œä»ä¸Šåˆ°ä¸‹æ‰«æï¼Œè‹¥å‡½æ•°åç§°ä¸€æ ·ï¼Œåå£°æ˜çš„å‡½æ•°ä¼šè¦†ç›–æ‰å‰é¢ã€‚ 5.3è¾ƒç‰¹æ®Šçš„åŒ¿åç±»å‡½æ•°çš„å£°æ˜å’Œä½¿ç”¨ï¼š ä¸¤ä¸ªæ‹¬å·()() ç¬¬ä¸€ä¸ªæ‹¬å·æ˜¯åŒ¿åç±»å‡½æ•°çš„å£°æ˜ ç¬¬äºŒä¸ªæ‹¬å·æ˜¯åŒ¿åç±»çš„å‡½æ•°å®å‚\n(function(num1,num2) { var ret=num1+num2; return ret; })(3,2);  ç‰¹ç‚¹ï¼šåªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚\n5.4è¾ƒå°‘ç”¨çš„Functionç±»äº§ç”Ÿå‡½æ•°å¯¹è±¡\nvar sum = new Function();å½¢å¼ var sum = Function(\u0026quot;n1\u0026quot;,\u0026quot;n2\u0026quot;,\u0026quot;alert(n1+n2); var a=3;var b=4;alert(a+b);\u0026quot;) sum(3,3);//å’Œå…¶ä»–å‡½æ•°å£°æ˜çš„è°ƒç”¨ä¸€æ ·ã€‚  è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåŒ¿åå‡½æ•°å¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡çš„åŸå› ï¼Œå› ä¸ºFunctionç±»å¯ä»¥äº§ç”Ÿå¯¹è±¡ï¼Œå¯¹è±¡å¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼ˆå¯¹è±¡åªæ˜¯ä¸€ä¸ªå¼•ç”¨ï¼‰ã€‚ ç‰¹ç‚¹ï¼šæ•ˆç‡ä½æ•ˆã€‚\nä¸Šé¢çš„äº”ç§å‡½æ•°å£°æ˜æ–¹å¼éƒ½æ¶‰åŠåˆ°å‚æ•°åˆ—è¡¨ï¼Œè€ŒJSä½¿ç”¨argumentså¯ä»¥è·å¾—ä»»æ„é•¿åº¦çš„å‚æ•°åˆ—è¡¨ã€‚ æ¯”å¦‚ï¼š\nvar sum = function() { var ret=0; for(var i=0;i\u0026lt;arguments.length;i++) { ret = ret+arguments[i]; } return ret; } sum(1,2); sum(1,5,68,98); sum(4,45,7,8,3,23,7,9);  è€Œæ­£å› ä¸ºargumentsçš„ä½œç”¨å¯¼è‡´äº†jsä¸èƒ½é‡è½½ã€‚\n6ï¼šJSä¸ºä»€ä¹ˆä¸èƒ½é‡è½½ï¼Ÿ å­˜åœ¨argumentså¯¹è±¡ï¼Œå¯¼è‡´å‚æ•°åˆ—è¡¨å¯ä»¥ä»»æ„é•¿åº¦ã€‚ å¼±ç±»å‹å†³å®šäº†å‚æ•°åˆ—è¡¨çš„å˜é‡ä¸éœ€è¦ç±»å‹ä¿®é¥°ã€‚\n7ï¼šå‡½æ•°è°ƒç”¨çš„ä¸¤ç§æ–¹å¼ï¼Ÿ æ ‡ç­¾çš„äº‹ä»¶\n\u0026lt;button id =â€btnâ€ onclick=â€alert(4);var a =3; var b=4; alert(a+b);â€) å¤åˆ¶ä»£ç  Domçš„window.onload=function(){}æ–¹å¼ï¼Œé€šè¿‡documentçš„æ–¹æ³•è·å¾—æ ‡ç­¾åœ°å€ Window.onload=function() { Window.document.getElementById(â€œbtnâ€).onclick=function() { Show(); } } ","date":1431327523,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327523,"objectID":"17a0a0c9dd60c60f4b4b6062c0ec0b04","permalink":"/blog/2015/05/11/javascript-7-11jie-bi-ji-dai-ma-march28th/","publishdate":"2015-05-11T14:58:43+08:00","relpermalink":"/blog/2015/05/11/javascript-7-11jie-bi-ji-dai-ma-march28th/","section":"archives","summary":"","tags":null,"title":"JavaScript 7-11èŠ‚ç¬”è®°ä»£ç March28th","type":"archives"},{"authors":null,"categories":["JavaScript"],"content":"js å¸¸è§ Events å±æ€§ å½“ä»¥ä¸‹æƒ…å†µå‘ç”Ÿæ—¶ï¼Œå‡ºç°æ­¤äº‹ä»¶\nonabort å›¾åƒåŠ è½½è¢«ä¸­æ–­ å…ƒç´ å¤±å»ç„¦ç‚¹\nonchange ç”¨æˆ·æ”¹å˜åŸŸçš„å†…å®¹ onclick é¼ æ ‡ç‚¹å‡»æŸä¸ªå¯¹è±¡ ondblclick é¼ æ ‡åŒå‡»æŸä¸ªå¯¹è±¡\nonerror å½“åŠ è½½æ–‡æ¡£æˆ–å›¾åƒæ—¶å‘ç”ŸæŸä¸ªé”™è¯¯\nonfocus å…ƒç´ è·å¾—ç„¦ç‚¹\nonkeydown æŸä¸ªé”®ç›˜çš„é”®è¢«æŒ‰ä¸‹\nonkeypress æŸä¸ªé”®ç›˜çš„é”®è¢«æŒ‰ä¸‹æˆ–æŒ‰ä½\nonkeyup æŸä¸ªé”®ç›˜çš„é”®è¢«æ¾å¼€\nonload æŸä¸ªé¡µé¢æˆ–å›¾åƒè¢«å®ŒæˆåŠ è½½\nonmousedown æŸä¸ªé¼ æ ‡æŒ‰é”®è¢«æŒ‰ä¸‹\nonmousemove é¼ æ ‡è¢«ç§»åŠ¨\nonmouseout é¼ æ ‡ä»æŸå…ƒç´ ç§»å¼€\nonmouseover é¼ æ ‡è¢«ç§»åˆ°æŸå…ƒç´ ä¹‹ä¸Š\nonmouseup æŸä¸ªé¼ æ ‡æŒ‰é”®è¢«æ¾å¼€\nonreset é‡ç½®æŒ‰é’®è¢«ç‚¹å‡»\nonresize çª—å£æˆ–æ¡†æ¶è¢«è°ƒæ•´å°ºå¯¸\nonselect æ–‡æœ¬è¢«é€‰å®š\nonsubmit æäº¤æŒ‰é’®è¢«ç‚¹å‡»\nonunload ç”¨æˆ·é€€å‡ºé¡µé¢\nä¸€ã€å¤ä¹ DOM 1.å¯¹äºJSæ¥è¯´ï¼Œåœ¨Webä¸­ï¼Œæœ€é‡è¦çš„åº”ç”¨ä¹‹ä¸€å°±æ˜¯DOMã€‚ 2.Domæ˜¯é’ˆå¯¹HTMLå’ŒXMLæ“ä½œçš„ä¸€ä¸ªAPIã€‚ 3.Domå°†ä¸€ä¸ªæ–‡æ¡£è¡¨ç¤ºä¸ºä¸€é¢—å®¶æ—æ ‘ï¼ˆçˆ¶ï¼Œå…„ï¼Œå­ èŠ‚ç‚¹ï¼‰ 4.å‡ ä¸ªå¸¸ç”¨çš„APIã€‚ getElementById åªèƒ½ç”¨documentæ¥ä½¿ç”¨ï¼Œé€šè¿‡idæŸ¥æ‰¾ä¸€ä¸ªèŠ‚ç‚¹ã€‚ getElementsByTagName è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé€šè¿‡æŒ‡å®šçš„æ ‡ç­¾åå»å¯»æ‰¾ï¼Œä¸å¿…ä½œç”¨äºæ•´ä¸ªæ–‡æ¡£ã€‚ hasChildNodes è°ƒç”¨çš„èŠ‚ç‚¹æ˜¯å¦å«æœ‰å­èŠ‚ç‚¹ã€‚ 5.Domä¸­çš„èŠ‚ç‚¹æœ‰æ–‡æœ¬èŠ‚ç‚¹ï¼ˆTextï¼‰ï¼Œå±æ€§èŠ‚ç‚¹ï¼ˆAttributeï¼‰ï¼Œå…ƒç´ èŠ‚ç‚¹ï¼ˆElementï¼‰ã€‚ 6.ä»¥ä¸Š3ç±»èŠ‚ç‚¹ä¸­ï¼Œéƒ½æœ‰å¦‚ä¸‹å±æ€§ï¼š nodeNameï¼šåªè¯»ï¼Œæ ‡è¯†çš„æ˜¯ç»™å®šèŠ‚ç‚¹çš„åå­—ï¼Œè¯¥èŠ‚ç‚¹ä¸ºåªè¯»å±æ€§ã€‚å¯¹äºæ–‡æœ¬èŠ‚ç‚¹è¿”å›çš„æ˜¯ #text çš„å­—ç¬¦ä¸²ã€‚ noteTypeï¼šåªè¯»ï¼Œè¿”å›å€¼ä¸ºintï¼Œæ ‡è¯†èŠ‚ç‚¹çš„ç±»å‹ã€‚å…ƒç´ èŠ‚ç‚¹ 1ï¼Œå±æ€§èŠ‚ç‚¹ 2ï¼Œæ–‡æœ¬èŠ‚ç‚¹ 3ã€‚ï¼ˆä»å°åˆ°å¤§çš„è®°å¿†é¡ºåºï¼‰ nodeValue: å¯è¯»ï¼Œå¯å†™ã€‚è¿”å›å½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œå±æ€§èŠ‚ç‚¹è¿”å›å±æ€§çš„å€¼ï¼Œæ–‡æœ¬èŠ‚ç‚¹è¿”å›æ–‡æœ¬çš„å€¼ï¼Œå…ƒç´ èŠ‚ç‚¹å•¥éƒ½æ²¡æœ‰ã€‚ 7.Domä¸­å¸¸ç”¨æ–¹æ³•ï¼š replaceChild()ï¼šè¿”å›å€¼æ˜¯ä¸€ä¸ªæŒ‡å‘æ–°çš„æˆ–è€…æ—§çš„èŠ‚ç‚¹ã€‚ï¼ˆï¼Ÿï¼‰ä½œç”¨æ˜¯å§ä¸€ä¸ªçˆ¶å…ƒç´ ä¸­çš„å­èŠ‚ç‚¹æ›¿æ¢ä¸ºå¦å¤–ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ ex: var reference = element.replaceChild(newChild,oldChild); getAttribute(): è¿”å›çš„æ˜¯æŒ‡å®šå…ƒç´ çš„ç»™å‡Œå±æ€§çš„å€¼ã€‚ ex: var attributeValue = element.getAttribute(attributeName); setAttribute(key,value)ï¼šä¸ºæŒ‡å®šçš„å…ƒç´ æ·»åŠ æŸä¸ªå±æ€§ï¼Œå¦‚æœæ­¤å±æ€§å·²ç»å­˜åœ¨å°±åˆ·æ–°ï¼Œå¦‚æœä¸å­˜åœ¨å°±æ·»åŠ ã€‚ ex: var para = document.createElement(â€œpâ€); para.setAttribute(â€œidâ€,â€fineprintâ€); createElement(eleName):é€šè¿‡æŒ‡å®šçš„æ ‡ç­¾åå­—æ¥åˆ›å»ºä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚è¿™ä¸ªæ–°åˆ›å»ºçš„èŠ‚ç‚¹æ²¡å®é™…æ·»åŠ åˆ°æŸä¸ªèŠ‚ç‚¹ä¸Šã€‚ ex: var oP = document.createElement(\u0026ldquo;p\u0026rdquo;); createTextNode()ï¼šåˆ›å»ºä¸€ä¸ªåŒ…å«æŒ‡å®šæ–‡æœ¬çš„æ–‡æœ¬èŠ‚ç‚¹ã€‚è¿”å›å€¼ä¸ºä¸€ä¸ªæŒ‡å‘æ–°å»ºæ–‡æœ¬èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚ ex: var oText=document.createTextNode(\u0026ldquo;HEllo world\u0026rdquo;); appendChild()ï¼šä¸ºæŒ‡å®šçš„å…ƒç´ æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹åã€‚ insertBefore()ï¼šåœ¨æŒ‡å®šçš„èŠ‚ç‚¹å‰é¢æ·»åŠ ã€‚ ex: var reference = element.insertBefore(newNode,targetNode); æ³¨ï¼šDomæ²¡æœ‰æä¾›insertAfter()æ–¹æ³•ï¼šå°±æ˜¯åœ¨æ’å…¥èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¹‹å‰æ·»åŠ ï¼Œå°±æ˜¯åœ¨æŒ‡å®šèŠ‚ç‚¹çš„å‰é¢æ·»åŠ ã€‚ removeChild()ï¼šåœ¨æŒ‡å®šèŠ‚ç‚¹ä¸­çš„å­èŠ‚ç‚¹åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ã€‚ æ³¨ï¼šä¸€å®šè¦æ˜¯çˆ¶èŠ‚ç‚¹å»è°ƒç”¨ç„¶åæ‹¬å·é‡Œé¢æ˜¯è‡ªå·±ç‚¹ã€‚ exï¼š var message = document.getElementById(â€œfineprintâ€); var container = message.parentNode; container.removeChild(message); 8.Domä¸­å¸¸ç”¨å±æ€§ ChildNodesï¼šè¿”å›çš„æ˜¯æŒ‡å®šçˆ¶èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚ æ³¨ï¼šæ–‡æœ¬èŠ‚ç‚¹å’Œå±æ€§èŠ‚ç‚¹ï¼Œè‚¯å®šä¸å«æœ‰å­èŠ‚ç‚¹äº†ï¼Œå¦‚æœè°ƒç”¨è¿™ä¸ªå±æ€§ï¼Œä¼šè¿”å›ç©ºæ•°ç»„ã€‚ firstChild:è¿”å›çš„æ˜¯æŒ‡å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ ex:node.ChileNodes[0]å’ŒfirstChild æ˜¯ç›¸åŒçš„ã€‚ lastChild:å’Œfirstæƒ³æ³•ï¼Œæœ€åä¸€ä¸ªã€‚ nextSiblingï¼šæŒ‡å®šèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ previousSibling:æŒ‡å®šèŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ parentNodeï¼šè¿”å›çš„æ˜¯æŒ‡å®šèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚ äºŒã€JavaScriptç»ƒä¹ æ€»ç»“ 1.window.onload=function(){\u0026hellip;}è¡¨ç¤ºçš„æ˜¯åœ¨é¡µé¢åŠ è½½å®Œæˆåä¾¿å¼€å§‹è¿è¡Œã€‚ 2.node.insertBefor(new node,null)ã€‚è¿™æ ·è°ƒç”¨å°±å¯ä»¥åœ¨æŒ‡å®šçš„å‰é¢æ·»åŠ äº†! 3.å¦‚æœç½‘é¡µä¹±ç ï¼Œå¯ä»¥åœ¨ä¹‹é—´åŠ ä¸Šï¼š 4.ç‰¹åˆ«è¯´æ˜ï¼šinsertBeforè¿™ä¸ªæ–¹æ³•ã€‚3ä¸ªå‚æ•°ï¼š paraentNode.insertBefor(newNode,childNodeInParaNode); å°±æ˜¯è¯´å“ªä¸ªNodeæ¥è°ƒç”¨insertBeforeæ–¹æ³•å°±æ˜¯åœ¨é‚£ä¸ªNodeçš„å­èŠ‚ç‚¹ä¸­æ’å…¥ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ’å…¥çš„èŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è‡ªå·±ç‚¹ä¸­è¦åœ¨å“ªä¸ªæŒ‡å®šçš„å­å…ƒç´ å‰é¢ã€‚ æ³¨ï¼šç¬¬äºŒä¸ªèŠ‚ç‚¹å¯æ˜¯æ˜¯nullï¼Œå°±è¡¨ç¤ºåœ¨æœ€åæ·»åŠ ï¼ŒåŒAppendChildã€‚ç‰¹åˆ«æ³¨æ„äº†ã€‚ 5.getElementByTagName(\u0026ldquo;æ ‡ç­¾\u0026rdquo;)ï¼Œè¿™ä¸ªé‡Œé¢è¾“å…¥çš„æ˜¯HTMLçš„æ ‡ç­¾ã€‚ 6.å¯¹äºå…ƒç´ èŠ‚ç‚¹çš„nodeNameï¼Œå…¶è¿”å›å€¼æ°¸è¿œæ˜¯å¤§å°çš„æ ‡ç­¾ã€‚ 7.å¿˜è®°nodeValueå§ï¼Œä½¿ç”¨valueå°±å¤Ÿäº†ï¼Œå‰é¢çš„éœ€è¦åŒºåˆ†ä¸‹ã€‚ 8.valueè¿™ä¸ªå±æ€§å¯è¯»å¯å†™ã€‚ 9.å¯¹äºä½¿ç”¨firstChildå’ŒlastChildä¸æ˜¯æˆ‘ä»¬æ‰€è§çš„ç¬¬ä¸€ä¸ªã€‚è¿™ä¸ªç‰¹åˆ«æ³¨æ„äº†ã€‚ 10.é€šå¸¸æ¥è¯´firstNodeå’ŒlastNodeè·å–çš„æ˜¯æ–‡æœ¬èŠ‚ç‚¹ã€‚ 11.å¯¹äºæ–‡æœ¬èŠ‚ç‚¹ï¼Œå¦‚æœè¦è®¾ç½®ä»–çš„å€¼ï¼Œéœ€è¦ä½¿ç”¨nodeValueè€Œä¸æ˜¯valueã€‚æ¯”å¦‚è¯´firstChildå’ŒlastChildè·å–çš„éƒ½æ˜¯å±äºæ–‡æœ¬èŠ‚ç‚¹ã€‚ 12.ä¸ºæŸä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ  å¯ä»¥ä½¿ç”¨innderHtmlä¹Ÿå¯ä»¥ä½¿ç”¨ åˆ›å»ºä¸€ä¸ªTextNodeç„¶åæ·»åŠ åˆ°æŸä¸ªèŠ‚ç‚¹ä¸Šå»ã€‚ 13.å¯¹äºreplaceChildï¼ŒparentNode.replaceChild(newChildï¼ŒchildInParane).è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯çˆ¶èŠ‚ç‚¹è°ƒç”¨æ›¿æ¢æŸä¸ªå­èŠ‚ç‚¹ï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸€èˆ¬éƒ½æ˜¯æ–°çš„èŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªèŠ‚ç‚¹ 14.å‡ ä¸ªä¸åŠ æ‹¬å·çš„åœ°æ–¹: window.onload=function myFunc(){\u0026hellip;} 15.åœ¨JSä¸­ï¼Œæ–¹æ³•å¸¦äº†æ‹¬å·è¡¨ç¤ºè¿è¡Œã€‚ 16. ä¸‰ã€é—®é¢˜ 2.innerHtmlå’ŒinnerTextçš„åŒºåˆ«ï¼Ÿ 3.window.onload=function(){} åœ¨ä¸€ä¸ªé¡µé¢åªèƒ½å†™ä¸€æ¬¡ã€‚ 4.å…³äºparenNodeå’ŒparentElementåŒºåˆ«ï¼Ÿ\n2.innerHtmlå’ŒinnerTextçš„åŒºåˆ«ï¼Ÿ ä»å­—é¢æ„ä¹‰æ¥è®² innerHtmlæ“ä½œæ ‡ç­¾å†…çš„htmlä»£ç  , è€ŒinnerTextæ“ä½œæ ‡ç­¾å†…çš„æ–‡æœ¬ , å½“æ ‡ç­¾å†…åªæœ‰æ–‡æœ¬æ—¶è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯ä¸€æ ·çš„ , åŒºåˆ«å°±åœ¨æ ‡ç­¾å†…è¿˜è¦å­æ ‡ç­¾æ—¶,å†™ä»£ç æµ‹è¯•å°±çŸ¥é“äº†\n3.window.onload=function(){} åœ¨ä¸€ä¸ªé¡µé¢åªèƒ½å†™ä¸€æ¬¡ã€‚ è¿™ä¸ªæ˜¯\u0026rdquo;é‡é‡çº§\u0026rdquo;çš„åŠ è½½å®Œæˆäº‹ä»¶ , åªèƒ½æ³¨å†Œä¸€æ¬¡,jQueryçš„ready()å°±å¾ˆæ–¹ä¾¿\n4.å…³äºparenNodeå’ŒparentElementåŒºåˆ«ï¼Ÿ parentNode æ˜¯Nodeç±»çš„å±æ€§ , è€ŒparentElementæ˜¯Elementç±»çš„å±æ€§ , å¾ˆå¤šæƒ…å†µä¸‹å¯ä»¥é€šç”¨,åªæ˜¯å±äºä¸¤ä¸ªä¸åŒçš„ä½“ç³»,ä½¿ç”¨æ—¶å°è¯•ç€çœ‹çœ‹æ•ˆæœå°±å¥½\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;!--script ä¸€å®šè¦å°å†™--\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; //javascriptå†…éƒ¨æ³¨é‡Šä½¿ç”¨//è¡¨ç¤ºå•è¡Œæ³¨é‡Š /**/è¡¨ç¤ºå¿«æ³¨é‡Š //javascriptå¤§å°å†™æ•æ„Ÿ //javascriptå¯ä»¥ç”¨varè¡¨ç¤ºæ‰€æœ‰æ•°å€¼ç±»å‹ï¼Œä»£æ›¿int,String,booleanç­‰ //æŒ‰F5åˆ·æ–°ï¼Œè¿›è¡Œè°ƒè¯• //å˜é‡å’Œæ•°ç»„çš„å®šä¹‰ //å˜é‡å®šä¹‰ var name='å­—ç¬¦ä¸²'; var age=39; //æ•°ç»„å®šä¹‰ //ä¸€å®šè¦æ•°ç»„ç”¨ [] è¿›è¡Œå®šä¹‰ï¼Œå…ƒç´ ä¹‹é—´ç”¨é€—å·éš”å¼€ []åƒè¿‡äº //mapæ•°ç»„ç”¨{} å®šä¹‰ é”®å€¼å¯¹ä¹‹é—´ç”¨é€—å·éš”å¼€ var apples=['ap1','ap2']; var arr={\u0026quot;name\u0026quot;:'å¼ ä¸‰','age':45}; //æ‰“å°alert alert(name); alert(age); for(var i=0;i\u0026lt;apples.length;i++) { alert(apples[i]); } for(var key in arr) { alert(key+'==='+arr[key]); } //æ•°å€¼ç±»å‹çš„è½¬æ¢ var n = 'fsf'; if(isNaN(n)) { alert('ä¸èƒ½ä½¿ç”¨'); }else { alert('å¯ä»¥ä½¿ç”¨'); } var num='100' var n = Number(num); alert(n); alert(parseFloat('100.3'));//è½¬å°æ•° alert(parseInt('100'))//è½¬æ•´æ•° //å‡½æ•°å®šä¹‰ åŠå‚æ•°è·å– // åœ¨æµè§ˆå™¨çš„æºç çª—å£ä¸­ ï¼ŒåŠ å…¥ æ–­ç‚¹ï¼Œè¿›è¡Œæ–­ç‚¹è°ƒè¯•,å•æ­¥è°ƒè¯•(F8 å¿«æ·é”® åœ¨Operaä¸­ï¼‰ function sum() { var apple=0; //å¾ªç¯è¯­å¥çš„ä½¿ç”¨ //å†…ç½®å˜é‡argumentsçš„è°ƒç”¨ for(var i=0;i\u0026lt;arguments.length;i++) { apple+=arguments[i]; } //ä¸åŠ å…¥return æ²¡æœ‰è¿”å›å€¼ åˆ™sumofmoney=undefined return apple; } var sumOfMoney=sum(1,3,4,5,6,2); alert('1+2+3+4+5+6+2=='+sumOfMoney); //æ³¨æ„è½¬ä¹‰å­—ç¬¦ alert(\u0026quot;D:\\\\Program Files \\\\ok\\\\fd\u0026quot;); alert('D:\\\\Program Files \\\\ok\\\\fd'); //åŒ¿åæ–¹æ³•æ˜¯éœ€è¦ç€é‡å­¦ä¹ çš„ //1 var ff = function() { alert('go home!'); } ff(); //ä¸€ä¸ªæ˜“é”™ç‚¹ //btn.onclick=function(){} onclickåé¢ä¸èƒ½å®¶å°‘å¹´å®«() //2 (function(n1,n2) { alert(n1+n2); } )(1,2); //3 onload=function() { document.getElementById('btn').onClick=function() { alert(\u0026quot;You are clicking the button\u0026quot;) } }; //å­—ç¬¦ä¸²çš„å¸¸ç”¨æ–¹æ³• alert('I am from the God'.length); alert('I am from the God'.charAt(3)); alert('I am from the God'.charAt(9)); alert('I am from the God'.substring(3,9)); alert('I am from the God'.indexOf('t')); var names = 'I am from the God'.split(' '); for(var name in names) { alert(name+'='+names[name]); } for(var i=0;i\u0026lt;names.length;i++) { alert(names[i]); } //æ¨è€å¸ˆç»ƒä¹ 1 alert('æ¨1'); window.onload=function() { var buttons=document.getElementsByName('button1'); for(var i=0; i \u0026lt; buttons.length;i++) { //alert(buttons[i] onclickä¸èƒ½å†™æˆonClick å¤§å°å†™æ•æ„Ÿ buttons[i].onclick=function() { alert(i); }; } } //æ¨è€å¸ˆç»ƒä¹ 2 alert('æ¨2'); function aa() { alert('aaa'); return function(){alert('bbb');}; } alert(aa); alert(aa()); // alert(aa());æ‰“å°æ˜¯aaa,å’Œfunction(){alert(\u0026quot;bbb\u0026quot;);}ä»¥ä¸ºæ‰§è¡Œå‡½æ•°æ–¹æ³•é¢˜å†…å®¹,è¿”å›çš„æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°,è¿”å›çš„æ˜¯å‡½æ•°ä½“å­—ç¬¦ä¸². alert(aa()()); //alert(aa()());æ‰“å°çš„æ˜¯aaa,bbb,undefined ,å…ˆæ‰§è¡Œaa()ï¼Œå‡½æ•°ä½“å†…å®¹aaaï¼Œè¿”å›å­—ç¬¦ä¸²function(){alert(\u0026quot;bbb\u0026quot;);}ï¼Œå†æ‰§è¡Œfunction(){alert(\u0026quot;bbb\u0026quot;);}()ï¼Œ //è¿™æ—¶è¯¥æ–¹æ³•åæ˜¯ï¼šfunction(){alert(\u0026quot;bbb\u0026quot;);}ï¼Œå…ˆæ‰“å°bbbï¼Œåœ¨æ‰“å°undefinedï¼Œå› ä¸ºè¯¥æ–¹æ³•åæœªå®šä¹‰ï¼Œ //æ¨è€å¸ˆç»ƒä¹ 3 alert('æ¨3'); //æ¯éš”1sé‡å¤çš„æ‰§è¡Œ çƒ¦äººï¼Œæ³¨é‡Šæ‰ //setInterval(aa,1000); //setInterval(aa(),1000); //æ¨è€å¸ˆç»ƒä¹ 4 alert('æ¨4'); //setInterval(alert('a'),1000); //æ¯éš”1sæ˜¾ç¤ºa //setInterval(function(){alert(\u0026quot;a\u0026quot;);},1000); //è¿”å›ä¸€ä¸ªå‡½æ•° å› ä¸ºæœªè¢«æ‰§è¡Œï¼Œè¿™ä¸ªå‡½æ•°æ²¡æœ‰ä»»ä½•ä¸œè¥¿ //æ¨è€å¸ˆç»ƒä¹ 5 alert('æ¨5'); var s1=\u0026quot;aaa\u0026quot;; var s2=new String(\u0026quot;aaa\u0026quot;); alert(s1 instanceof Object); //false alert(s2 instanceof Object);//true alert(s1 instanceof String);//false alert(s2 instanceof String);// true alert(typeof(s1)); //string alert(typeof(s2)); //object //æ¨è€å¸ˆç»ƒä¹ 6 alert('æ¨6'); var x=1; var y=0; var z=0; function add(n) { n=n+1; return n; } y=add(x); //jsåªä¼šç”¨æœ€æ–°çš„å‡½æ•°å®šä¹‰ function add(n) { n=n+3; return n; } z=add(x); alert('y='+y+'z='+z);//y-4 z=4 åªç”¨æœ€æ–°çš„ //æ¨è€å¸ˆç»ƒä¹ 7 alert('æ¨7'); var add1=function(n) { n = n+1; return n; } y=add1(x); add1 =function(n) { n= n +3; return n; } z= add1(x); alert('y='+y+' z='+z); //æ¨è€å¸ˆç»ƒä¹ 8 alert('æ¨8'); var s1=\u0026quot;aaa\u0026quot;; // --------------------\u0026gt;æ˜¯Stringç±»å‹ éå¯¹è±¡ var s2= new String('aaa'); alert(s1 instanceof Object); alert(s2 instanceof Object); alert(s1 instanceof String); alert(s2 instanceof String); alert(typeof(s1)); alert(typeof(s2)); //æ¨è€å¸ˆç»ƒä¹ 9 alert('æ¨9'); alert('æ˜“é”™ç‚¹ï¼š btn.onclick=function(){} onclickåé¢åˆ«è·Ÿ()') \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;Div\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;button1\u0026quot; value=\u0026quot;æŒ‰é’®1\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;button1\u0026quot; value=\u0026quot;æŒ‰é’®2\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;button1\u0026quot; value=\u0026quot;æŒ‰é’®3\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;button1\u0026quot; value=\u0026quot;æŒ‰é’®4\u0026quot;/\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;button1\u0026quot; value=\u0026quot;æŒ‰é’®5\u0026quot;/\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;Div\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;click\u0026quot; id=\u0026quot;btn\u0026quot;/\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;Div\u0026gt; \u0026lt;Br/\u0026gt; \u0026lt;Br/\u0026gt; \u0026lt;Br/\u0026gt; \u0026lt;A href=\u0026quot;javascript:alert(new Date().toLocaleTimeString());\u0026quot;\u0026gt;æ˜¾ç¤ºæ—¶é—´\u0026lt;/A\u0026gt; \u0026lt;/Br\u0026gt; \u0026lt;A href=\u0026quot;javascript:void(0);\u0026quot;\u0026gt;æ˜¾ç¤ºæ—¶é—´\u0026lt;/A\u0026gt; \u0026lt;/Br\u0026gt; \u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;name\u0026quot; value=\u0026quot;æ˜¾ç¤ºæ—¶é—´\u0026quot;,onclick=\u0026quot;alert(new Date().toLocaleTimeString());\u0026quot;/\u0026gt; \u0026lt;Div\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  ä¸ºä»€ä¹ˆjquery.jsæœ‰é‚£ä¹ˆå¤šçš„\nname : function(){}, çš„å†™æ³•ï¼Ÿ ä»–ä»¬æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ\nJQuery.jsä¸­å‡ºç°å¦‚ä¸‹çš„ä¹¦å†™æ–¹å¼ï¼š\nsuccessï¼šfunction(data){} ç±»ä¼¼äºfunction success(data){} ä¸è¿‡æ˜¯é¢å‘å¯¹è±¡çš„å†™æ³•ï¼ŒæŠŠè¿™ä¸ªæ–¹æ³•å½“æˆä¸€ä¸ªprototypeå¯¹è±¡\nå¼•å…¥JSONå¯¹è±¡ JSON(JavaScript Object Notation) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œæ˜“äºé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆã€‚{a:\u0026ldquo;a\u0026rdquo;}è¿™å°±æ˜¯ä¸€ ä¸ªJSONæ•°æ®ã€‚ JSONæ•°æ®æ˜¯ç”¨é”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨çš„ã€‚å†’å·ï¼ˆ:ï¼‰å‰é¢çš„æ˜¯é”®ï¼Œå†’å·åé¢çš„æ˜¯å€¼ã€‚JSON,çš„æ¯ä¸€ä¸ªå€¼ä¹‹é—´å¯ä»¥ç”¨åˆ†å·ï¼ˆ;ï¼‰éš” å¼€ã€‚å¤§çš„ç±»å¯ä»¥ç”¨{}å¤§æ‹¬å·åŒ…å›´ä»–å…¶ä¸­çš„å€¼ï¼Œé›†åˆå¯ä»¥ç”¨[]ä¸­æ‹¬å·ï¼ŒåŒ…å›´å€¼ \u0026ldquo;åç§°/å€¼\u0026rdquo;å¯¹çš„é›†åˆ ä¸åŒè¯­è¨€ä¸­ï¼Œå®ƒè¢«ç†è§£ä¸ºå¯¹è±¡(object)ï¼Œè®°å½•(record)ï¼Œç»“æ„(struct)ï¼Œå­—å…¸(dictionary)ï¼Œå“ˆå¸Œè¡¨(hash table)ï¼Œé”®åˆ—è¡¨(keyed list)ç­‰ å€¼çš„æœ‰åºåˆ—è¡¨ å¤šæ•°è¯­è¨€ä¸­è¢«ç†è§£ä¸ºæ•°ç»„(array)\nä½¿ç”¨ï¼š JSONä»¥ä¸€ç§ç‰¹å®šçš„å­—ç¬¦ä¸²å½¢å¼æ¥è¡¨ç¤º JavaScript å¯¹è±¡ã€‚å¦‚æœå°†å…·æœ‰è¿™æ ·ä¸€ç§å½¢å¼çš„å­—ç¬¦ä¸²èµ‹ç»™ä»»æ„ä¸€ä¸ª JavaScript å˜é‡ï¼Œé‚£ä¹ˆè¯¥å˜\né‡ä¼šå˜æˆä¸€ä¸ªå¯¹è±¡å¼•ç”¨. æ¯”å¦‚ï¼š æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹JSONå½¢å¼æ¥è¡¨ç¤ºUserå¯¹è±¡ï¼š {\u0026ldquo;UserID\u0026rdquo;:11, \u0026ldquo;Name\u0026rdquo;:\u0026ldquo;tht\u0026rdquo;, \u0026ldquo;Email\u0026rdquo;:\u0026ldquo;18039010â—qq.com\u0026rdquo;}; ç„¶åå¦‚æœæŠŠè¿™ä¸€å­—ç¬¦ä¸²èµ‹äºˆä¸€ä¸ªJavaScriptå˜é‡ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥ä½¿ç”¨å¯¹è±¡çš„ä»»ä¸€å±æ€§äº†ã€‚\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; var User={\u0026quot;UserId\u0026quot;:11,\u0026quot;Name\u0026quot;:\u0026quot;Ye Zhaoliang\u0026quot;,\u0026quot;Email\u0026quot;:\u0026quot;977962857@qq.com\u0026quot;}; alert(User.Name); //åˆ©ç”¨JSonå¯¹è±¡æ–¹å¼ å®šä¹‰ä¸¤ä¸ªUserå¯¹è±¡ var User1={\u0026quot;UserId\u0026quot;:12,\u0026quot;Name\u0026quot;:{\u0026quot;FirstName\u0026quot;:\u0026quot;Ye\u0026quot;,\u0026quot;LastName\u0026quot;:\u0026quot;Zhaoliang\u0026quot;},\u0026quot;Email\u0026quot;:\u0026quot;977962857@qq.com\u0026quot;}; var User2={\u0026quot;UserId\u0026quot;:13,\u0026quot;Name\u0026quot;:{\u0026quot;FirstName\u0026quot;:\u0026quot;Ye\u0026quot;,\u0026quot;LastName\u0026quot;:\u0026quot;Wangliang\u0026quot;},\u0026quot;Email\u0026quot;:\u0026quot;977962859@qq.com\u0026quot;}; alert(User1.Name.LastName+\u0026quot; love you!\u0026quot;); //ç”¨æ•°ç»„å­˜å‚¨ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨ var Users=[User1,User2]; alert(Users.length); for(var i=0;i\u0026lt;Users.length;i++) { alert(Users[i].UserId+\u0026quot; \u0026quot;+Users[i].Name.LastName); } \u0026lt;/script\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Body\u0026gt; \u0026lt;/Body\u0026gt; \u0026lt;/Html\u0026gt;  ç”±æ­¤å¼•å‡ºé¢å‘å¯¹è±¡çš„JavaScriptç¼–ç¨‹ã€‚\n![./image/java/object.gif][JSONå¯¹è±¡çš„æ ¼å¼æè¿°ï¼Œç”¨é€—å·åˆ†éš”å¼€å¤šä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªå¯¹è±¡ç”¨{}ç»„åˆï¼Œæ¯ä¸ªå¯¹è±¡çš„å±æ€§ç”¨:åˆ†éš”ï¼Œå†’å·å‰é¢è¡¨ç¤ºå±æ€§ \u0026hellip;]\n![./image/java/array.gif][ç”¨[]è¡¨è¾¾å¤šä¸ªæ•°ç»„å…ƒç´ ï¼Œå…ƒç´ ä¹‹é—´ä¸åˆ†ç±»å‹ï¼Œç”¨é€—å·åˆ†éš”å…ƒç´ ]\n1: JSä¸­å•å¼•å·å’ŒåŒå¼•å·æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸ºä»€ä¹ˆåœ¨å­—ç¬¦ä¸²ä¸­ç”¨å•å¼•å·æ‹¬èµ·æ¥ï¼Œè€Œä¸æ˜¯åŒå¼•å·ï¼Ÿ ä¸€æ–¹é¢å› ä¸ºHtmlä»£ç çš„å±æ€§å€¼ä¸€èˆ¬æ˜¯ä½¿ç”¨åŒå¼•å·ã€‚ JSONçš„æ•°æ®æ ¼å¼ä¸€èˆ¬æ˜¯ä½¿ç”¨åŒå¼•å·çš„ã€‚\n å†è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥çš„ä¸€èˆ¬åŸåˆ™æ˜¯ï¼š å•å¼•å·çš„å†…éƒ¨å¯åŒ…å«åŒå¼•å·ï¼ˆå¦‚è‹¥åŒ…å«åˆ™åŠ è½¬ä¹‰å­—ç¬¦ï¼‰ï¼ŒåŒå¼•å·çš„å†…éƒ¨å¯åŒ…å«å•å¼•å·ï¼ˆå¦‚è‹¥åŒ…å«åˆ™åŠ è½¬ä¹‰å­—ç¬¦ï¼‰  æ‰€ä»¥å­—ç¬¦ä¸²å¦‚æœç”¨å•å¼•å·ä¿®é¥°å°±å¯ä»¥å†…éƒ¨å¼•ç”¨Htmlçš„å±æ€§ã€‚ æ¯”å¦‚ var str=\u0026rsquo;\u0026lsquo; å¤åˆ¶ä»£ç  æ›´å¤šçš„æ˜¯è€ƒè™‘åˆ°å‰ç«¯ï¼Œä¼šä½¿ç”¨HTMLçš„å±æ€§å€¼ï¼Œè€ŒHtmlçš„å±æ€§å€¼éƒ½æ˜¯ç”¨åŒå¼•å·åŒ…è£¹ï¼Œæ‰€ä»¥å¦‚æœå†ç”¨å•å¼•å·æ‹¬èµ·æ¥ä¸éœ€è¦è¿›è¡Œè½¬ä¹‰ã€‚ å¦å¤–å¯èƒ½å°±æ˜¯å¤§å®¶ä¹ æƒ¯ã€‚\n2ï¼šJavascriptä¹Ÿæœ‰äº‹ä»¶ç¼–ç¨‹\nbuttonä¸­çš„onclick=\u0026ldquo;jsä»£ç \u0026rdquo;\nå¤åˆ¶ä»£ç \nhrefè¶…é“¾æ¥çš„ç‰¹æ®Šçš„è°ƒç”¨äº‹ä»¶çš„æ–¹æ³•ï¼š\nçƒ­ç‚¹æ–‡å­— å¤åˆ¶ä»£ç \n åªæœ‰è¶…é“¾æ¥çš„hrefä¸­çš„JavaScriptä¸­æ‰éœ€è¦åŠ â€œjavascript:â€ï¼Œå› ä¸ºå®ƒä¸æ˜¯äº‹ä»¶ï¼Œè€Œæ˜¯æŠŠâ€javascript:â€çœ‹æˆåƒâ€œhttp:â€ã€â€œftp:â€ã€â€œthunder://â€ã€â€œed2k://â€ã€â€œmailto:â€ä¸€æ ·çš„ç½‘ç»œåè®®ï¼Œäº¤ ç”±jsè§£æå¼•æ“å¤„ç†ã€‚åªæœ‰hrefä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹ä¾‹ã€‚  3ï¼šæ•°æ®ç±»å‹ åŸºæœ¬æ•°æ®ç±»å‹ï¼š Boolean Number \u0026mdash;-\u0026gt;å°æ•°å’Œæ•´æ•° \u0026mdash;-parseInt(\u0026ldquo;) \u0026mdash;-parseFloat(\u0026ldquo;) String Null \u0026mdash;-\u0026gt; Undefined \u0026mdash;\u0026gt;æœªå®šä¹‰(æœªåˆå§‹åŒ–) var ul ; \u0026mdash;\u0026gt;ul is undefined typeof(ul) \u0026mdash;-\u0026gt;undefined typeof(null)\u0026mdash;-\u0026gt;null\n == éä¸¥æ ¼ç­‰äº ===ä¸¥æ ¼ç­‰äº null==undefined -----\u0026gt;true null===undefined-----\u0026gt;false ä¸ºä»€ä¹ˆï¼Ÿ ===å…ˆåˆ¤æ–­ç±»å‹æ˜¯å¦ä¸€è‡´ï¼Œå†åˆ¤æ–­å€¼ nullå¯¹è±¡æ˜¯æœ‰ç€ç‰¹æ®Šæ„ä¹‰çš„å€¼ï¼Œæ­¤æ—¶å˜é‡çš„å€¼æ˜¯\u0026quot;å·²çŸ¥çŠ¶æ€\u0026quot;(è¿™å’Œmysqlçš„nullä¸å¤ªä¸€æ ·ï¼Œmysqlç›´æ¥å°±æ˜¯ä¸çŸ¥é“ï¼Œé‚£è‚¯å®šå°±æ˜¯æ— æ³•åˆ¤æ–­ï¼‰  å¼•ç”¨æ•°æ®ç±»å‹ï¼š Object \u0026mdash;-\u0026gt;å‡½æ•° \u0026mdash;-\u0026gt; new Date() \u0026mdash;-\u0026gt; æ•°ç»„ var apple=[\u0026lsquo;shanxi\u0026rsquo;,\u0026lsquo;yantai\u0026rsquo;]; \u0026mdash;-\u0026gt;null\næ–¹æ³•ï¼š instanceof \u0026mdash;\u0026ndash;\u0026gt;å±äºæŸç§ç±»å‹ï¼Ÿ typeof(object) \u0026mdash;\u0026mdash;-\u0026gt;æ˜¯ä»€ä¹ˆç±»å‹çš„ï¼Ÿ\n4ï¼šjavascriptä¸­æ²¡æœ‰æ–¹æ³•é‡è½½\næ‰€ä»¥åœ¨è¿è¡Œæ—¶å€™ä¼šäº‹å…ˆç¡®å®šå¥½å‡½æ•°ï¼Œä¸€èˆ¬æ˜¯æœ€é è¿‘è°ƒç”¨å‡½æ•°çš„å‡½æ•°å®šä¹‰ function f1() { alert(\u0026lsquo;ell\u0026rsquo;); } function f1(name) { alert(name); } // f1(); å¾—åˆ°undefined ï¼Œç›´æ¥é€‰æ‹©æœ€æ–°çš„å½“åš f1çš„å‡½æ•° //è¿™ç‚¹å’Œjavaå¾ˆä¸ä¸€æ · f1(\u0026lsquo;fd\u0026rsquo;); //å¾—åˆ°fd å¤åˆ¶ä»£ç \n5ï¼šString Boolean Number ç­‰å¯ä»¥æ‹“å±•å…¶æ–¹æ³•ï¼Œä½¿ç”¨ç±»çš„é™æ€å±æ€§prototypeè¿›è¡Œè®¾ç½® æ¯”å¦‚ï¼š String.prototype.IseMaile = function () å¤åˆ¶ä»£ç \n6ï¼šjsæ–‡ä»¶å¼•å…¥javascriptçš„å¥½å¤„æ˜¯? 1:å¤šæ–‡æ¡£å…±äº« js 2:å‡å°‘ç½‘ç»œæµé‡\nä½¿ç”¨æ–¹æ³• ï¼š \u0026lt;Link src=\u0026rdquo;*.js\u0026rdquo; type=\u0026ldquo;text/javascript\u0026rdquo;\nå­˜åœ¨ç–‘é—®ï¼šDom and Bomçš„åŒºåˆ«ï¼Ÿ\nBroser object model (BOM) Document object model(Dom) Bomæ¨¡å‹æœ‰windowå¯¹è±¡ ï¼Œè€ŒDomæ²¡æœ‰ã€‚\nBomå¯¹è±¡ç»“æ„ï¼š\nWindow \u0026mdash; document \u0026mdash;\u0026mdash;authors \u0026mdash;\u0026mdash;forms \u0026mdash;\u0026mdash;images \u0026mdash;\u0026mdash;-links \u0026mdash;\u0026mdash;-location \u0026hellip; \u0026mdash;- frames \u0026mdash;- history \u0026mdash;- location \u0026mdash;- navigator \u0026mdash;- screen æ ¹èŠ‚ç‚¹æ˜¯ï¼šwindow windowå¯¹è±¡æ˜¯Bomæ¨¡å‹çš„æ ¸å¿ƒï¼ŒåŒ…å«6ä¸ªå¯¹è±¡ï¼Œdocument,frames,history,location,navigator,screenå¯¹è±¡\nDomå¯¹è±¡ç»“æ„ï¼š\ndocument \u0026mdash;\u0026mdash;authors \u0026mdash;\u0026mdash;forms \u0026mdash;\u0026mdash;images \u0026mdash;\u0026mdash;-links \u0026mdash;\u0026mdash;-location\u0026hellip;\næ ¹èŠ‚ç‚¹æ˜¯:document\nè”ç³»ï¼š\ndocument.write('test'); window.document.write('test');  ![./images/java/dom.png][æŸä¸ªdomçš„æ ‘çŠ¶èŠ‚ç‚¹å±‚æ¬¡å›¾ï¼ˆå¯ä»¥è¿›è¡Œå®ä¾‹åŒ–]\n14.thisäº‹ä»¶ äº‹ä»¶ä¸­çš„thisã€‚é™¤äº†å¯ä»¥ä½¿ç”¨event.srcElement\nåœ¨äº‹ä»¶å“åº”å‡½æ•°ä¸­ï¼Œthisè¡¨ç¤ºå‘ç”Ÿäº‹ä»¶çš„æ§ä»¶ã€‚\nåªæœ‰åœ¨äº‹ä»¶å“åº”å‡½æ•°æ‰èƒ½ä½¿ç”¨thisè·å¾—å‘ç”Ÿäº‹ä»¶\nçš„æ§ä»¶ï¼Œåœ¨äº‹ä»¶å“åº”å‡½æ•°è°ƒç”¨çš„å‡½æ•°ä¸­ä¸èƒ½ä½¿ç”¨\nï¼ˆè¿™é‡Œçš„thisè¡¨ç¤ºwindowå¯¹è±¡ï¼‰ï¼Œå¦‚æœè¦ä½¿ç”¨åˆ™\nè¦å°†thisä¼ é€’ç»™å‡½æ•°æˆ–è€…ä½¿ç”¨event.srcElement\nã€‚(*)thiså’Œevent.srcElementçš„è¯­ä¹‰æ˜¯ä¸ä¸€æ ·\nçš„ï¼Œthiså°±æ˜¯è¡¨ç¤ºå½“å‰ç›‘å¬äº‹ä»¶çš„è¿™ä¸ªå¯¹è±¡ï¼Œ\nevent.srcElementæ˜¯å¼•å‘äº‹ä»¶çš„å¯¹è±¡ï¼šäº‹ä»¶å†’æ³¡\nã€‚\n14.åŠ¨æ€åˆ›å»ºå…ƒç´  Element(å…ƒç´ ) document.writeåªèƒ½åœ¨é¡µé¢åŠ è½½è¿‡ç¨‹ä¸­æ‰èƒ½åŠ¨æ€\nåˆ›å»ºã€‚ å¯ä»¥è°ƒç”¨documentçš„createElementæ–¹æ³•æ¥åˆ›å»º\nå…·æœ‰æŒ‡å®šæ ‡ç­¾çš„DOMå¯¹è±¡ï¼Œç„¶åé€šè¿‡è°ƒç”¨æŸä¸ªå…ƒç´ \nçš„appendChild();æ–¹æ³•å°†æ–°åˆ›å»ºå…ƒç´ æ·»åŠ åˆ°ç›¸åº”\nçš„å…ƒç´ ä¸‹ã€‚//çˆ¶å…ƒç´ å¯¹è±¡.removeChild(å­å…ƒç´ \nå¯¹è±¡);åˆ é™¤å…ƒç´ ã€‚ createElement(â€˜elementâ€™);åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ appendChild(node); è¿½åŠ ä¸€ä¸ªèŠ‚ç‚¹ removeChild(node);ç§»é™¤ä¸€ä¸ªèŠ‚ç‚¹ replaceChild(new,old);æ›¿æ¢ä¸€ä¸ªèŠ‚ç‚¹ insertBefore(new,å‚ç…§);æŠŠèŠ‚ç‚¹åŠ åˆ°å‰é¢ï¼ˆæ’\nåˆ°æŸä¸ªèŠ‚ç‚¹å‰é¢ï¼‰ æ–¹æ³•ï¼š å±æ€§ï¼š firstChild lastChild\n15.getElementsByTagName() æ–¹æ³•å¯è¿”å›å¸¦æœ‰æŒ‡\nå®šæ ‡ç­¾åçš„å¯¹è±¡çš„é›†åˆã€‚ 16.IEä¸­bodyçš„äº‹ä»¶èŒƒå›´ IEä¸­å¦‚æœåœ¨bodyä¸Šæ·»åŠ onclickã€onmousemoveç­‰\näº‹ä»¶å“åº”ï¼Œé‚£ä¹ˆå¦‚æœé¡µé¢æ²¡æœ‰æ»¡ï¼Œåˆ™ â€œbody ä¸­\næœ€åä¸€ä¸ªå…ƒç´ ä»¥ä¸‹ï¼ˆæ¨ªå‘ä¸é™åˆ¶ï¼‰â€ çš„éƒ¨åˆ†æ˜¯æ— \næ³•å“åº”äº‹ä»¶çš„ï¼Œå¿…é¡»ä½¿ç”¨ä»£ç åœ¨documentä¸Šç›‘å¬\né‚£äº›äº‹ä»¶ï¼Œæ¯”å¦‚document.onmousemove =\nMovePic document.body.onmousedown=function(){} document.onmousedown=function(){} æ³¨æ„åŠ æ–‡æ¡£å®šä¹‰ä¸ä¸åŠ æ–‡æ¡£å®šä¹‰çš„ä¹Ÿä¸ä¸€æ ·ã€‚ å¦‚æœä¸ºæ•´ä¸ªæ–‡æ¡£æ³¨å†Œäº‹ä»¶å¯ä»¥ä½¿ç”¨ï¼š\ndocument.onxxxxäº‹ä»¶ã€‚ 17.onmouseoveräº‹ä»¶ä¼šåœ¨é¼ æ ‡æŒ‡é’ˆç§»åŠ¨åˆ°æŒ‡å®šçš„\nå¯¹è±¡ä¸Šæ—¶è§¦å‘äº‹ä»¶å‘ç”Ÿ element.setAttribute() æŠŠæŒ‡å®šå±æ€§è®¾ç½®æˆ–æ›´\næ”¹ä¸ºæŒ‡å®šå€¼ã€‚ 18. dvObj.style.width=\u0026lsquo;300px\u0026rsquo;; dvObj.style.height=\u0026lsquo;200px\u0026rsquo;; dvObj.style.border=\u0026lsquo;1px solid red\u0026rsquo;; åŠ \u0026rdquo;çš„æ˜¯å› ä¸ºç»™å˜é‡èµ‹å€¼å¿…é¡»æ˜¯ä¸€ä¸ªæ­£ç¡®çš„ç±»å‹\nã€‚æ•°å­—å°±æ˜¯æ•°å­—å­—ç¬¦ä¸²å°±æ˜¯å­—ç¬¦ä¸² 19. æ ‡ç­¾å®šä¹‰æ®µè½ã€‚ border:1px solid green; è¾¹æ¡†ï¼š1åƒç´ ï¼Œå®å¿ƒ\nï¼Œç»¿è‰² 20.formå¯¹è±¡ document.getElementById(â€˜btn1â€™).click()\nã€‚æœç´¢å¼•æ“çš„ï¼Œæ™ºèƒ½æç¤ºï¼Œç‚¹å‡»åç›¸å½“äºç‚¹å‡»äº†\nâ€œæœç´¢â€æŒ‰é’®ã€‚ å¸¸ç”¨ï¼šclick(),focus(),blur();//ç›¸å½“äºé€šè¿‡\nç¨‹åºæ¥è§¦å‘å…ƒç´ çš„å•å‡»ã€è·å¾—ç„¦ç‚¹ä»¥åŠå¤±å»ç„¦ç‚¹\nçš„äº‹ä»¶ã€‚ formå¯¹è±¡æ˜¯è¡¨å•çš„Domå¯¹è±¡ã€‚ æ–¹æ³•ï¼šsubmit()æäº¤è¡¨å•ï¼Œä½†æ˜¯ä¸ä¼šè§¦å‘\nonsubmitäº‹ä»¶ã€‚ å®ç°autopostï¼Œä¹Ÿå°±æ˜¯ç„¦ç‚¹ç¦»å¼€æ§ä»¶ä»¥åé¡µé¢ç«‹\nå³æäº¤ï¼Œè€Œä¸æ˜¯åªæœ‰æäº¤submitæŒ‰é’®ä»¥åæ‰æäº¤\nï¼Œå½“å…‰æ ‡ç¦»å¼€çš„æ—¶å€™è§¦å‘onbluräº‹ä»¶ï¼Œåœ¨onblur\nä¸­è°ƒç”¨formçš„submitæ–¹æ³•ã€‚ åœ¨ç‚¹å‡»submitåformçš„onsubmitäº‹ä»¶è¢«è§¦å‘ï¼Œåœ¨\nonsubmitä¸­å¯ä»¥è¿›è¡Œæ•°æ®æ ¡éªŒï¼Œå¦‚æœæ•°æ®æœ‰é—®é¢˜\nï¼Œè¿”å›falseå³å¯å–æ¶ˆæäº¤\n21.ä¸åŒæµè§ˆå™¨çš„å·®å¼‚  æ ‡ç­¾ç”¨äºä¸ºç”¨æˆ·è¾“å…¥åˆ›å»º HTML è¡¨å•ã€‚\nè¡¨å•èƒ½å¤ŸåŒ…å« input å…ƒç´ ï¼Œæ¯”å¦‚æ–‡æœ¬å­—æ®µã€å¤é€‰\næ¡†ã€å•é€‰æ¡†ã€æäº¤æŒ‰é’®ç­‰ç­‰ã€‚è¡¨å•è¿˜å¯ä»¥åŒ…å«\nmenusã€textareaã€fieldsetã€legend å’Œ\nlabel å…ƒç´ ã€‚è¡¨å•ç”¨äºå‘æœåŠ¡å™¨ä¼ è¾“æ•°æ®ã€‚ onsubmit äº‹ä»¶ä¼šåœ¨è¡¨å•ä¸­çš„ç¡®è®¤æŒ‰é’®(Submit)è¢«ç‚¹å‡»æ—¶å‘ç”Ÿã€‚ submit() æäº¤è¡¨å•ã€‚ æ˜¯formä¸­çš„ä¸€ä¸ªæ–¹æ³• onsubmit åœ¨æäº¤è¡¨å•ä¹‹å‰è°ƒç”¨ã€‚æ˜¯ä¸€ä¸ªäº‹ä»¶\n1: jsçš„forå¾ªç¯çš„var i = 0çš„å†è®¤è¯† ç»è¿‡varå®šä¹‰çš„æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡\n//ä¸€ä¸ªé‡è¦é”™è¯¯ var i =0 å…¶å®å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å˜é‡i = 0 //æ‰€æœ‰çš„jséƒ½å¯ä»¥è°ƒç”¨ for(var i=0;i\u0026lt;Users.length;i++) { alert(Users[i].UserId+\u0026quot; \u0026quot;+Users[i].Name.LastName); }  ä¹Ÿå°±æ˜¯forä¹‹åalert(i)çš„å€¼æ˜¯ Users.length\næ‰€ä»¥å¯ä»¥åœ¨forä¹‹å‰ç›´æ¥å®šä¹‰ var i = 0;å³å¯\n2ï¼šä»¥äºŒè¿›åˆ¶è¯»å–ï¼Œ10è¿›åˆ¶è¾“å‡º\nalert(parseInt('100',8));//ä»¥8è¿›åˆ¶ alert(parseInt('100',2));// ä»¥2è¿›åˆ¶è¯»å–ï¼Œå¹¶10è¿›åˆ¶æ˜¾ç¤º alert(parseInt('100',10));// ä»¥10è¿›åˆ¶ é»˜è®¤æ–¹å¼ alert(parseInt('100',16));// ä»¥16è¿›åˆ¶  3ï¼š onloadåœ¨é¡µé¢åŠ è½½å®Œååœ¨åŠ è½½çš„éƒ¨åˆ†js\n//å¾ˆé‡è¦ onload åªåœ¨é¡µé¢åŠ è½½å®Œæ§ä»¶æ‰æ‰§è¡Œï¼Œæ‰€ä»¥ç¡®ä¿idæœ‰æ•ˆï¼ï¼ //å¦åˆ™å¯èƒ½æŠ¥é”™ onload=function() { document.getElementById('btn').onclick=function() { alert('hello'); }; }  4ï¼šHtmlçš„äº‹ä»¶åœ¨å­¦ä¹ \n\u0026lt;Input type=\u0026quot;button\u0026quot; name=\u0026quot;time\u0026quot; value=\u0026quot;show current time\u0026quot; onclick=\u0026quot;alert(new Date().toLocaleTimeString());\u0026quot;/\u0026gt; \u0026lt;!--ä¼šè·³è½¬åˆ°æœ€å‰é¢ #zåªæ˜¯ä¸€ä¸ªé¡µé¢æœ€å‰é¢çš„ä¸€ä¸ªé”š--\u0026gt; \u0026lt;A href=\u0026quot;#\u0026quot; onclick=\u0026quot;alert(new Date().toLocaleTimeString());\u0026quot;\u0026gt;ç™¾åº¦\u0026lt;/A\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; \u0026lt;!--ç›´æ¥åœ¨å½“å‰ä½ç½®æ‰“å°å‡ºæ—¶é—´ï¼š javascript: ç±»ä¼¼äºhttp:// ftp://--\u0026gt; \u0026lt;A href=\u0026quot;javascript:alert(new Date().toLocaleTimeString());\u0026quot;\u0026gt;ç½‘æ˜“\u0026lt;/A\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; \u0026lt;A href=\u0026quot;javascript:void(0);\u0026quot; onclick=\u0026quot;alert(new Date().toLocaleTimeString());\u0026quot;\u0026gt;æ–°æµª\u0026lt;/A\u0026gt; \u0026lt;A href\u0026gt;  ","date":1431327523,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327523,"objectID":"bf3d5044657937c1bb597724904fafd4","permalink":"/blog/2015/05/11/javascript1-6jie-bi-ji-dai-ma-march26th/","publishdate":"2015-05-11T14:58:43+08:00","relpermalink":"/blog/2015/05/11/javascript1-6jie-bi-ji-dai-ma-march26th/","section":"archives","summary":"js å¸¸è§ Events å±æ€§ å½“ä»¥ä¸‹æƒ…å†µå‘ç”Ÿæ—¶ï¼Œå‡ºç°æ­¤äº‹ä»¶ onabort å›¾åƒåŠ è½½è¢«ä¸­æ–­ å…ƒç´ å¤±å»ç„¦ç‚¹ onchange ç”¨æˆ·æ”¹å˜åŸŸçš„å†…å®¹ onclick é¼ æ ‡ç‚¹å‡»æŸä¸ªå¯¹è±¡ ondblclick é¼ æ ‡åŒå‡»æŸä¸ªå¯¹è±¡ onerror å½“åŠ è½½æ–‡æ¡£æˆ–å›¾åƒ","tags":null,"title":"JavaScript1-6èŠ‚ç¬”è®°ä»£ç March26th","type":"archives"},{"authors":null,"categories":["JavaScript "],"content":"javascript é—­åŒ…è®­ç»ƒ\né—­åŒ…å…¶å®å°±æ˜¯ä¿å­˜ç€å†…éƒ¨å®šä¹‰å‡½æ•°çš„ä¸€å¼ è¡¨ï¼Œè¯¥è¡¨ä¿å­˜ç€å‡½æ•°å¤´ã€å‡½æ•°å˜é‡ï¼ˆå˜é‡å½“å‰çŠ¶æ€çš„å€¼ï¼‰ã€å‡½æ•°å®ç°ã€‚\nåˆ©ç”¨ ä¸€ä¸ªoutFun å’Œä¸€ä¸ªinnerFunè¿›è¡Œå®éªŒã€ŠLearning jQuery 4th editionã€‹\ncase 1: é—­åŒ…ä¼ é€’ï¼Œå†…éƒ¨å‡½æ•°å¯ä»¥è¢«ä¼ é€’åˆ°å¤–å¤´\n$(function(){ //å‡½æ•°è¢«å°åœ¨ä¸€ä¸ªé—­åŒ…ä¸­ å¯ä»¥åƒæ•°æ®ä¸€æ ·ä¼ æ¥ä¼ å» var globalInner; function outFun() { console.log('Inside the outFun'); function innerFun() { console.log('inside the innerFun of the OutFun'); } globalInner=innerFun; console.log('innerFun():'); innerFun(); console.log('return Begin') return innerFun; } console.log('outFun:') outFun(); console.log('globalInner:'); globalInner(); console.log('Test outFun return'); outFun()(); }) ;  å¤åˆ¶ä»£ç  æµ‹è¯•ç»“æœï¼š\noutFun: TestCloser.html:12 Inside the outFun TestCloser.html:18 innerFun(): TestCloser.html:15 inside the innerFun of the OutFun TestCloser.html:20 return Begin TestCloser.html:26 globalInner: TestCloser.html:15 inside the innerFun of the OutFun TestCloser.html:28 Test outFun return TestCloser.html:12 Inside the outFun TestCloser.html:18 innerFun(): TestCloser.html:15 inside the innerFun of the OutFun TestCloser.html:20 return Begin TestCloser.html:15 inside the innerFun of the OutFun å¤åˆ¶ä»£ç \ncase 2: å†…éƒ¨å˜é‡ å’Œå¤–éƒ¨å˜é‡çš„åŒºåˆ«\n$(function(){ console.log('æµ‹è¯•InnerFunPigçš„å±€éƒ¨å˜é‡'); //å±€éƒ¨å˜é‡æ˜¯å­˜åœ¨çš„ //alert('hhell'); function outFunPig() { function innerFunPig() { //å±€éƒ¨å˜é‡ é‡æ–°èµ‹å€¼ var innerVar=1; console.log('innerVar:'+innerVar); innerVar++; } return innerFunPig; } var out1= outFunPig(); out1(); out1(); var out2= outFunPig(); out2(); out2(); console.log('æµ‹è¯•outFunCatçš„å…¨å±€å˜é‡'); //æµ‹è¯•å…¨å±€å˜é‡ var globalVar=1; function outFunCat() { function innerFunCat() { //å±€éƒ¨å˜é‡ é‡æ–°èµ‹å€¼ console.log('innerVar:'+ globalVar); globalVar++; } return innerFunCat; } var out3= outFunCat(); out3(); out3(); var out4= outFunCat(); out4(); out4(); console.log('æµ‹è¯•outFunDogçš„å†…éƒ¨å˜é‡'); //æµ‹è¯•åŠå…¨å±€å˜é‡ function outFunDog() { //åŠå…¨å±€å˜é‡ var semiGlobalVar=1; function innerFunDog() { //å±€éƒ¨å˜é‡ é‡æ–°èµ‹å€¼ console.log('innerVar:'+ semiGlobalVar ); semiGlobalVar++; } return innerFunDog; } var out5= outFunDog(); out5(); out5(); var out6= outFunDog(); out6(); out6(); });  æµ‹è¯•ç»“æœ2ï¼š æµ‹è¯•InnerFunPigçš„å±€éƒ¨å˜é‡ 4TestCloser.html:44 innerVar:1 TestCloser.html:58 æµ‹è¯•outFunCatçš„å…¨å±€å˜é‡ TestCloser.html:67 innerVar:1 TestCloser.html:67 innerVar:2 TestCloser.html:67 innerVar:3 TestCloser.html:67 innerVar:4 TestCloser.html:81 æµ‹è¯•outFunDogçš„å†…éƒ¨å˜é‡ TestCloser.html:91 innerVar:1 TestCloser.html:91 innerVar:2 TestCloser.html:91 innerVar:1 TestCloser.html:91 innerVar:2 å¤åˆ¶ä»£ç \n","date":1431327523,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327523,"objectID":"325860ed0a46164da900ff769bc40c8b","permalink":"/blog/2015/05/11/javascriptbi-bao-xun-lian/","publishdate":"2015-05-11T14:58:43+08:00","relpermalink":"/blog/2015/05/11/javascriptbi-bao-xun-lian/","section":"archives","summary":"","tags":null,"title":"javascripté—­åŒ…è®­ç»ƒ","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"ç¬¬ä¸€é¢˜ï¼šåˆå¹¶å›¾ç‰‡\n/** * @author å¶æ˜­è‰¯ * */ import java.io.*; public class TestCopyTwoFilesToOne implements AutoCloseable { /** * @param args */ public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ File inputFileApple = new File(\u0026quot;e://a.jpg\u0026quot;); File inputFileBanana = new File(\u0026quot;e://b.jpg\u0026quot;); File inputFileOrange = new File(\u0026quot;e://c.jpg\u0026quot;); String temp = null; try ( //å­—èŠ‚æµ InputStream fisApple= new FileInputStream(inputFileApple); InputStream fisBanana= new FileInputStream(inputFileBanana); OutputStream fosOrange= new FileOutputStream(inputFileOrange); // ç¼“å†²æµï¼ˆå·²é€šè¿‡å­—ç¬¦æµè½¬æ¢ï¼‰ BufferedReader brApple = new BufferedReader(new InputStreamReader(fisApple)); BufferedReader brBanana = new BufferedReader(new InputStreamReader(fisBanana)); BufferedWriter brOrange = new BufferedWriter(new OutputStreamWriter(fosOrange)); ) { while((temp = brApple.readLine()) != null) { brOrange.write(temp); // å†™å…¥ç¬¬ä¸€ä¸ªæ–‡ä»¶ brOrange.newLine(); } while((temp = brBanana.readLine()) != null) { brOrange.write(temp);//å†™å…¥ç¬¬äºŒä¸ªæ–‡ä»¶ä¿¡æ¯ brOrange.newLine(); } }catch(IOException e) { System.out.println(\u0026quot;æ–‡ä»¶è¯»å–æˆ–è€…å†™å…¥é”™è¯¯\u0026quot;); } } @Override public void close() throws Exception { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ } }  ç¬¬ä¸€é¢˜åˆå¹¶å›¾ç‰‡ç¬¬äºŒç§æ–¹æ³•\n/** * @author å¶æ˜­è‰¯ * */ import java.io.*; import org.apache.commons.io.FileUtils; public class TestCopyTwoFilesToOne2 { /** * @param args */ public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ try { // FileUtilsæš‚æ—¶æ— æ³•å®ç°è¿½åŠ ï¼ //FileUtils.copyFile(new File(\u0026quot;e:/a.jpg\u0026quot;), new File(\u0026quot;e://c.jpg\u0026quot;)); //FileUtils.copyFile(new File(\u0026quot;e:/b.jpg\u0026quot;), new File(\u0026quot;e://c.jpg\u0026quot;), true); // å¯¹äºå¤§æ–‡ä»¶å¯èƒ½æœ‰é—®é¢˜ //åˆ©ç”¨FileUtilsçš„readFileToStringæ–¹æ³•è¯»å–a.jpgæ–‡ä»¶çš„æ•°æ®ï¼Œå¹¶ä¿å­˜åœ¨contentä¸­ String content = FileUtils.readFileToString(new File(\u0026quot;e:/a.jpg\u0026quot;)); // åˆ©ç”¨FileUtilsçš„writeStringToFIleæ–¹æ³•ï¼Œå€Ÿç”¨contentä¸­é—´å˜é‡å†™å…¥a.jpgæ–‡ä»¶ä¿¡æ¯åˆ°c.jpg // ä¹Ÿå¯ä»¥åˆ©ç”¨FileUtilsçš„copyFileæ–¹æ³•ï¼Œç›´æ¥å¤åˆ¶åˆ°c.jpg. FileUtils.writeStringToFile(new File(\u0026quot;e://c.jpg\u0026quot;), content); // //åˆ©ç”¨FileUtilsçš„readFileToStringæ–¹æ³•è¯»å–b.jpgæ–‡ä»¶çš„æ•°æ®ï¼Œå¹¶ä¿å­˜åœ¨contentä¸­ content = FileUtils.readFileToString(new File(\u0026quot;e:/b.jpg\u0026quot;)); FileUtils.writeStringToFile(new File(\u0026quot;e://c.jpg\u0026quot;), content,true); } catch (IOException e) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„ catch å— System.out.println(\u0026quot;å†™å…¥æ–‡ä»¶é”™è¯¯ï¼\u0026quot;); } } }  ç¬¬äºŒé¢˜ï¼šæŠŠæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„txt æ–‡ä»¶å˜ä¸ºdocæ–‡ä»¶\nimport java.io.File; /** * @author å¶æ˜­è‰¯ * */ public class RenameDirectoryFiles { /** * @param args */ public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ String roots = \u0026quot;e:\u0026quot;; //ç›˜ç¬¦ String Testfile =\u0026quot;TestFile\u0026quot;; //æ–‡ä»¶å¤¹ String targetDir = roots+File.separator+Testfile; reNameUnderDirectory(new File(targetDir),\u0026quot;.java\u0026quot;,\u0026quot;.txt\u0026quot;); //è°ƒç”¨è‡ªå®šä¹‰æ–¹æ³• } public static void reNameUnderDirectory(File dir,String from, String to) { if(null == dir) { return; //ä¸ºç©ºåˆ™ç›´æ¥é€€å‡º } if(dir.isDirectory()) // é€šè¿‡è·¯å¾„è¯»å…¥,ç»™å®šä¸€ä¸ªè·¯å¾„ { //æŠµç”¨Fileçš„listFilesæ–¹æ³•è·å–æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰Fileå¯¹è±¡ File[] fileArray = dir.listFiles(); String banana = null; if(null == fileArray) // åˆ¤æ–­æ˜¯å¦ä¸ºç©º { System.out.println(\u0026quot;æ–‡ä»¶å¤¹å†…æ–‡ä»¶ä¸ºç©º æ‰¾ä¸ªåˆ«çš„æ–‡ä»¶å¤¹å§ï¼\u0026quot;); return; } for(int i = 0 ; i\u0026lt; fileArray.length; i++) // éå†æ‰€æœ‰æ–‡ä»¶ { if(fileArray[i].isFile()) // åˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶ { banana = fileArray[i].getName(); //è·å–æ–‡ä»¶å¯¹è±¡çš„æ–‡ä»¶å if(banana.endsWith(from)) // åªæ˜¯å¯¹ä»¥javaæ–‡ä»¶ç»“å°¾çš„è¿›è¡Œä¿®æ”¹ { String newFilename= fileArray[i].getParent()+File.separator +banana.replaceAll(from+\u0026quot;[ DISCUZ_CODE_1 ]quot;;, to); //åªæ›¿æ¢æœ€åä¸€ä¸ªfromè¡¨å¾çš„å­—ç¬¦ä¸² fileArray[i].renameTo(new File(newFilename)); // åˆ©ç”¨renameToæ–¹æ³• ä¿®æ”¹æ–‡ä»¶å¤¹çš„åå­— } }else { reNameUnderDirectory(fileArray[i],from,to); //é€’å½’è°ƒç”¨è¯¥æ–¹æ³• å®ç°éå†æ–‡ä»¶å¤¹ } } }else { System.out.println(\u0026quot;ä¸æ˜¯æ–‡ä»¶å¤¹\u0026quot;); } } }  ç¬¬ä¸‰é¢˜ï¼šåç¼€ä¿®æ”¹ï¼ˆDirectory walker):\n/** * @author å¶æ˜­è‰¯ * */ import java.io.*; import java.util.ArrayList; import java.util.Collection; import java.util.Iterator; import java.util.List; import org.apache.commons.io.DirectoryWalker; public class TestCommonIODirectoryWalkRename extends DirectoryWalker { /** * @param args */ public TestCommonIODirectoryWalkRename() { super(); } public List reName(File startDirectory) { List results = new ArrayList(); try { walk(startDirectory,results ); } catch (IOException e) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„ catch å— e.printStackTrace(); } return results; } protected boolean handleDirectory(File directory,int depth,Collection results) { //save.svn directories and then skip ä¸ä¼šåˆ é™¤.svnæ–‡ä»¶å¤¹ä¸‹çš„ä»»ä½•ä¿¡æ¯ if(\u0026quot;fasf\u0026quot;.equals(directory.getName())) // å¦‚æœä½ æƒ³è¦ä¿å­˜æŸä¸ªæ–‡ä»¶å¤¹ //å°±æ·»åŠ elseifå³å¯ï¼ï¼å½“ç„¶æ–‡ä»¶æ¶æ„è¿˜åœ¨ { directory.delete(); return false; }else { return true; } } protected void handleFile(File file,int depth, Collection results) { String banana = file.getName(); String newFilename= file.getParent()+File.separator+banana.replaceAll(\u0026quot;.txt\u0026quot;+\u0026quot;$\u0026quot;, \u0026quot;.doc\u0026quot;); file.renameTo(new File(newFilename)); results.add(file); } // ä½¿ç”¨Directory Walkeræ¥éå†ä¸€ä¸ªç›®å½•å¹¶è¿›è¡Œç›¸åº”æ“ä½œæ­¥éª¤å¦‚ä¸‹ // 1:åˆ›å»ºä¸€ä¸ªç»§æ‰¿DirectoryWalkerçš„ç±»ï¼Œå¹¶åœ¨æ„é€ å‡½æ•°è°ƒç”¨super() // 2:å®šä¹‰ä¸€ä¸ªä¸šåŠ¡å…¥å£æ–¹æ³•ï¼Œæ¯”å¦‚cleanï¼Œè¿™ä¸ªæ–¹æ³•è°ƒç”¨walkæ–¹æ³• // 3:é‡å†™handleDiretoryæ–¹æ³• æä¾›ç›¸åº”çš„ä¸šåŠ¡é€»è¾‘ // 4:é‡å†™handleFileæ–¹æ³•ï¼Œæä¾›ç›¸åº”å¤„ç†é€»è¾‘ // å…¶ä¸­æœ€ä¸ºå…³é”®çš„æ˜¯walkæ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆ¶å®šå…¥å£è·¯å¾„ï¼Œ // å¹¶æä¾›ä¸€ä¸ªç”¨äºæ¥å—å¤„ç†ç»“æ„çš„å‚æ•°ã€‚ // åœ¨walkæ–¹æ³•çš„å†…éƒ¨ï¼šé’ˆå¯¹ç›®å½•å¯¹è±¡è°ƒç”¨handleDirectory // æ–‡ä»¶å¯¹è±¡è°ƒç”¨handleFile public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ TestCommonIODirectoryWalkRename dw = new TestCommonIODirectoryWalkRename() ; List l1 = dw.reName(new File(\u0026quot;e://codes\u0026quot;)); Iterator it = l1.iterator(); while(it.hasNext()) { System.out.println(it.next()); } } }  ç¬¬å››é¢˜ï¼šè¯»å–æ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶ç»Ÿè®¡æ•°å­—å­—ç¬¦çš„ä¸ªæ•°æŸ¥é˜…äº†ASCIIè¡¨ä¿¡æ¯ï¼š\n/** * @author å¶æ˜­è‰¯ * */ import java.io.*; public class getDigtiNumberCount { /** * @param args */ public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ String temp = null; String roots = \u0026quot;e:\u0026quot;; String filename = \u0026quot;student.txt\u0026quot;; String filenameWithPathname=roots+File.separator+filename; int len = 0; try // try_with_resourcesæ–¹æ³•ï¼Œä¸éœ€è¦å…³é—­éœ€è¦closedçš„èµ„æºã€‚ ( BufferedReader br = new BufferedReader(new FileReader(filenameWithPathname)); ) { int i = 0; int count = 0; while((temp = br.readLine()) != null) { System.out.println(\u0026quot;æ‰“å°ä¸€è¡Œ\u0026quot;); System.out.println(temp); for(int j = 0 ; j \u0026lt; temp.length(); j++) {//è¿›è¡Œæ•°å­—å­—ç¬¦çš„åŒºé—´èŒƒå›´åˆ¤æ–­ if(temp.charAt(j) \u0026gt;= 48 \u0026amp;\u0026amp; temp.charAt(j) \u0026lt;= 57) { count++; } } i++; } System.out.println(filenameWithPathname+\u0026quot;æ–‡ä»¶æ€» å…±æœ‰ï¼š\u0026quot;+count+\u0026quot;ä¸ªæ•°å­—\u0026quot;); }catch(IOException e) { System.out.println(\u0026quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥\u0026quot;ï¼‰; } } }  ![ASCIIç è¡¨æ•°å­—å­—ç¬¦çš„æ•°å€¼][/images/java/ASCIIè¡¨.gif]\nç¬¬å››é¢˜ï¼š è¯»å–æ–‡æœ¬æ–‡ä»¶çš„ä¿¡æ¯ï¼Œè¾“å…¥æŸä¸ªäººçš„åå­—ï¼Œå¹¶è¾“å‡ºå¯¹åº”æŸä¸ªäººçš„æˆç»© æ–‡æœ¬æ–‡ä»¶ï¼šï¼ˆä¿å­˜ä¸º student.txt) å¼ ä¸‰ 80 æå›› 90 ç‹äº” 95 èµµå›› 80 æä¸¹æ±Ÿ 64\n/** * @author å¶æ˜­è‰¯ * */ import java.io.*; import java.util.*; public class GetMessageofNameFromFile { /** * @param args */ public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ String temp = null; int len = 0; try ( BufferedReader br = new BufferedReader(new FileReader(\u0026quot;e:/student.txt\u0026quot;)); ) { while((temp = br.readLine()) != null) { len++; } }catch(IOException e) { System.out.println(\u0026quot;è¯»å–æ–‡ä»¶å¤±è´¥\u0026quot;); } String[] names = new String[len]; //String[] banana = null; double[] chengji = new double[len] ; try ( BufferedReader br = new BufferedReader(new FileReader(\u0026quot;e:/student.txt\u0026quot;)); ) { int i = 0; while((temp = br.readLine()) != null) { //System.out.println(temp); String[] banana = temp.split(\u0026quot; \u0026quot;); //System.out.println(banana[0]+\u0026quot;:\u0026quot;+banana[1]); // è¯»å–æ–‡ä»¶çš„nameä¿¡æ¯ names[i] = banana[0]; //chengji[i] = Double.parseDouble(banana[1].trim()); //è¯»å–æ–‡ä»¶çš„æˆç»©ä¿¡æ¯ chengji[i] = Double.parseDouble(banana[1]); i++; } }catch(IOException e) { System.out.println(\u0026quot;è¯»å–æ–‡ä»¶å¤±è´¥\u0026quot;); } Scanner sc = new Scanner(System.in); while(true) { System.out.println(\u0026quot;è¯·è¾“å…¥ä½ è¦æŸ¥è¯¢çš„åå­—\u0026quot;); String name = sc.nextLine(); //å¦‚æœä¸è¾“å…¥å§“åï¼Œç›´æ¥å›è½¦åˆ™æ˜¾ç¤ºå…¨éƒ¨å§“åï¼ if(name.isEmpty()) { System.out.println(\u0026quot;è¾“å…¥ä¸ºç©ºæ˜¾ç¤ºå…¨éƒ¨\u0026quot;); for(int i = 0; i \u0026lt; names.length ; i++) { System.out.println(names[i]+\u0026quot;çš„æˆç»©æ˜¯:\u0026quot;+chengji[i]); } }else { for(int i = 0; i \u0026lt; names.length ; i++) { if(name.equalsIgnoreCase(names[i])) //ä¸åŒºåˆ†å¤§å°å†™ { System.out.println(name+\u0026quot;çš„æˆç»©æ˜¯:\u0026quot;+chengji[i]); } } } } } } ","date":1431327523,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327523,"objectID":"d588862d6cc7ee467073b916ba02031a","permalink":"/blog/2015/05/11/javaban-1yue-24ri/","publishdate":"2015-05-11T14:58:43+08:00","relpermalink":"/blog/2015/05/11/javaban-1yue-24ri/","section":"archives","summary":"","tags":null,"title":"Javaç­ 1æœˆ24æ—¥","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":" \u0026lt;!\u0026ndash; å­¦ä¹ çš„ç½‘ç«™ ï¼ http://www.w3school.com.cn/css/index.asp(ç”¨åˆ°çš„æ—¶å€™è®°å¾—æŸ¥çº¢è‰²å…³é”®å­—å³å¯) æ‰¾é¢œè‰²ï¼šhttp://www.114la.com/other/rgb.htm èƒŒæ™¯æ§ä»¶çš„ä¿®é¥° æ³¨æ„backgroundç›¸å…³ä¿¡æ¯å³å¯ï¼ background-color background-image background-position\n æ–‡æœ¬æ§ä»¶çš„ä¿®é¥° ä¸€èˆ¬æ³¨æ„textç›¸å…³ä¿¡æ¯ text-align text-width text-shadowç­‰ text-indent:2em 1em =å½“å‰æ–‡æœ¬çš„ä¸€ä¸ªå­—ç¬¦çš„åƒç´ å¤§å° ï¼ˆä¸€ä¸ªå…¬å¼ï¼‰ å¦‚æœfont-size=24px(é»˜è®¤æ˜¯14px) ä¹Ÿå°±æ˜¯æ­¤æ—¶1em=24px è¿™å°±æ˜¯emçš„ç”¨æ³•ï¼ï¼æ³¨æ„äº†ï¼ï¼ text-decoration:underline none overline line-through blink å­—ä½“æ§ä»¶çš„ä¿®é¥° ä¸€èˆ¬æ³¨æ„fontå¼€å¤´ font-ize font-family:\u0026quot;å¾®è½¯é›…é»‘\u0026quot; font-style:italic å¯¹åº”htmlde \u0026lt;I\u0026gt;æ ‡ç­¾æ§ä»¶ font-weigth: 100-900 border lighter font-variant:small-cap é“¾æ¥æ§ä»¶ï¼ˆAæ ‡ç­¾ï¼‰çš„ä¿®é¥°ï¼ˆä¼ªç±»é€‰æ‹©å™¨ï¼‰ å››ç§çŠ¶æ€ :link :visited :hover a:hover{text-decoration:underline; color:red} :active æç¤º 1ï¼ša:hover å¿…é¡»è¢«ç½®äº a:link å’Œ a:visited ä¹‹åï¼Œæ‰æ˜¯æœ‰æ•ˆçš„ã€‚ æç¤º 2ï¼ša:active å¿…é¡»è¢«ç½®äº a:hover ä¹‹åï¼Œæ‰æ˜¯æœ‰æ•ˆçš„ã€‚ åˆ—è¡¨æ§ä»¶çš„ä¿®é¥° list-style-image:url{img/a.gif} list-style-type:square list-style:none è¡¨æ ¼æ§ä»¶çš„ä¿®é¥° è¡¨æ ¼ä½œç”¨ï¼šæ•°æ®çš„æ ¼å¼åŒ– table{border-space: width:50px} tr{} td{} æ¡†æ¨¡å‹ï¼ˆç›’å­æ¨¡å‹ï¼‰ï¼š Opera æµè§ˆå™¨å…ˆä½¿ç”¨ ctrl+u å†ä½¿ç”¨ctrl+alt+i æ‰“å¼€computedçš„çª—å£ï¼Œè§‚å¯Ÿç›’å­æ¨¡å‹ï¼ˆæ³¨æ„ä½¿ç”¨æµè§ˆå™¨çš„å¼€å‘è€…åŠŸèƒ½ï¼‰ IEç”¨F12 Marginæ˜¯ä»€ä¹ˆï¼Ÿ å…ƒç´ çš„æœ€å¤–å±‚ï¼Œå…‰æ™•éƒ¨åˆ† Margin-top margin: 1px 2px 3px 4px Borderæ˜¯ä»€ä¹ˆ? å…ƒç´ çš„ä¸­é—´å±‚ å¤¹åœ¨marginå’Œpaddingä¹‹é—´ border:1px solid #3333 Padding æ˜¯ä»€ä¹ˆï¼Ÿ å…ƒç´ çš„å†…å±‚ï¼ŒåŒ…è£¹ç€å…ƒç´  Padding-top: padding: 1px 2px 3px 4px è½®å»“ å…ƒç´ çš„borderå’Œmarginä¹‹é—´ï¼èµ·ç€ä¸€ç§å¼ºè°ƒçš„ä½œç”¨ï¼ï¼ èµ·ç€å…ƒç´ çªå‡ºä½œç”¨ï¼(å…ƒç´ å…¶å®å°±æ˜¯æ§ä»¶ï¼‰ outline:red 2px dash; input:focus{border:green 1px solid} å½“ç‚¹å‡»æ–‡æœ¬æ¡†ï¼ï¼ï¼åˆ™æ˜¾ç¤ºä¸ºç»¿è‰²ï¼è¿™æ˜¯å¾ˆå¥½çš„æŠ€èƒ½ï¼ï¼ï¼ï¼ ä¸€å®šè¦å¤šå†™å‡ éï¼ï¼ï¼ï¼ä¸é”™ï¼ï¼ æ‰€ä»¥å…¶å®åœ¨ä¸€ä¸ªå…ƒç´ çš„å¤–éƒ¨æœ‰å››é‡çš„åŒ…è£¹ç”±å†…è‡³å¤–ï¼š padding-\u0026gt; border--\u0026gt;outline--\u0026gt;margin æ³¨æ„ä½ æ‰€è®¾ç½®çš„ä½ç½®  ç»¼ä¸Šæ‰€è¿°ï¼š æ‰€ä»¥åœ¨æ ‡ç­¾ä¸­ä¸€èˆ¬æœ‰Idå±æ€§ ï¼Œä¹Ÿå¯èƒ½æœ‰Classå±æ€§ ä¸€èˆ¬è§„å¾‹1æ˜¯ï¼šï¼ˆå¿…é¡»æŒæ¡ï¼‰ Styleçš„å†…åµŒå…¥çš„ä¿®é¥° \u0026gt; Idé€‰æ‹©å™¨\u0026gt; Classé€‰æ‹©å™¨ \u0026gt; æ ‡ç­¾é€‰æ‹©å™¨ å…¬å¼2ï¼š selectors{å±æ€§åï¼šå±æ€§å€¼} å¯¹åº”HTMLçš„ æ ‡ç­¾\u0026lt;å±æ€§å=å±æ€§å€¼\u0026gt; CSSæ˜¯ç”¨selectorsæ¥è¯´æ ‡ç­¾ï¼Œ CSSä½¿ç”¨å†’å·ï¼ŒHTMLä½¿ç”¨ç­‰å· CSS+HTMLä½¿ç”¨å¾—å¥½åœ¨ä¹ç»éªŒå’ŒåŠŸå¤«ï¼Œéä¸€å¤©ä¸¤å¤©ã€‚\nCSSåŸºæœ¬é€‰æ‹©å™¨ï¼š æ ‡ç­¾é€‰æ‹©å™¨ idé€‰æ‹©å™¨ #id_name classé€‰æ‹©å™¨ .classname CSSæ‹“å±•é€‰æ‹©å™¨ï¼š æ´¾ç”Ÿé€‰æ‹©å™¨ h1 a{} æŒ‡çš„æ˜¯åªè¦h1é‡Œé¢åŒ…å«ç€aæ ‡ç­¾æ—¢æ»¡è¶³è¯¥æ¡ä»¶ å­å…ƒç´ é€‰æ‹©å™¨ï¼ˆç›´æ¥ï¼‰ h1\u0026gt;a{} è¿™ä¸ªaå¿…é¡»æ˜¯åœ¨h1çš„ä¸‹ä¸€å±‚ ä¸èƒ½æ˜¯ä¸‹ä¸‹å±‚ï¼ˆè¿™è¾¹çš„åˆ†å±‚æ˜¯æŒ‡è°åŒ…è£¹è°çš„æ„æ€ï¼‰ å±æ€§é€‰æ‹©å™¨ a[href]{color:red} ç»„åˆé€‰æ‹©å™¨ h1,h2,h3,h4{color:blue}ï¼ˆæ³¨æ„æå–å…±æ€§ï¼‰ ä¼ªé€‰æ‹©å™¨ ä¸»è¦é’ˆå¯¹äºè¿æ¥æ ‡ç­¾ ï¼ˆå¯ç”¨äºæ§åˆ¶ç•Œé¢çš„æ•ˆæœï¼‰ ï¼šlinked ï¼švisited :hover :actived :focus(è·å¾—ç„¦ç‚¹çš„æ—¶å€™ï¼‰\nä¸¤ç§å¤–è”å¼æ–¹å¼ï¼š\n\u0026lt;link rel=\u0026quot;stylesheet\u0026quot; type=\u0026quot;text/css\u0026quot; href=\u0026quot;*.css\u0026quot;/\u0026gt; å¸¸ç”¨ @import url(\u0026quot;*.css\u0026quot;); å¿…é¡»å†™åˆ°\u0026lt;style\u0026gt;\u0026lt;/style\u0026gt;æ ‡ç­¾ä¸­ ç¬¬ä¸€ç§æ˜¯ç•Œé¢ç›´æ¥åŠ è½½å…¨éƒ¨ï¼Œç¬¬äºŒç§æ˜¯åœ¨é¡µé¢åŠ è½½å®Œæ¯•ï¼Œç„¶ååœ¨åŠ è½½cssæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯åˆšå¼€å§‹æ²¡æœ‰æ ·å¼ï¼Œäº†è§£å³å¯ã€‚ --\u0026gt; \u0026lt;Style type=\u0026quot;text/css\u0026quot;\u0026gt; body{font-family:\u0026quot;å¾®è½¯é›…é»‘\u0026quot;} .box{width:600px; margin:0 auto; padding-top:100px;background-color:black} .box H1{text-align:center text-shadow:2px 5px 5px rgba(0,0,2,1);color:white; } .box p{background:#2c2c29;border-radius:10px;border:1px solid #222220; line-height:38px;margin-right:5px;float:left;width=600px;} .box span{float:left;display:block;text-align:right;background:#373733 ;width:70px;height:40px;color:#ffffff;border-right:1px solid #222220;} .input_box{width:167px;padding-left:10px;height:38px;border:0px;background: #2c2c29;float:left;color:#ffffff} .input_btn{width:500px;height:40px;margin-top:15px;line-height:40px; background:#009900;border:1px solid #0099900;border-radius:10px; cursor:pointer;} .input_btn:hover{background:#00CD00} \u0026lt;/Style\u0026gt;  1.DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰æ˜¯HTMLå’ŒXMLçš„åº”ç”¨ç¨‹åº\næ¥å£ï¼ˆAPI)æ‰€è°“æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œå…¶å®å°±æ˜¯å¯¹ç½‘é¡µ\nHTMLä¸­çš„å„ç§å…ƒç´ çš„ä¸€ç§å†…éƒ¨çš„è¡¨ç¤ºï¼Œä¾‹å¦‚HTML\nä¸­çš„å¤´ã€æ®µè½ã€åˆ—è¡¨ã€é£æ ¼ã€IDç­‰ï¼Œæ‰€æœ‰çš„å…ƒç´ \néƒ½èƒ½é€šè¿‡DOMæ¥è®¿é—® document ï¼ˆè®¡ç®—æœºï¼‰æ–‡æ¡£ DOMå°±æ˜¯Htmlé¡µé¢çš„æ¨¡å‹ï¼Œå°†æ¯ä¸ªæ ‡ç­¾éƒ½åšä¸ºä¸€ä¸ª\nå¯¹è±¡ï¼ŒJavaScripté€šè¿‡è°ƒç”¨DOMä¸­çš„å±æ€§ã€æ–¹æ³•\nå°±å¯ä»¥å¯¹ç½‘é¡µä¸­çš„æ–‡æœ¬æ¡†ã€å±‚ç­‰å…ƒç´ è¿›è¡Œç¼–ç¨‹æ§\nåˆ¶ã€‚\n2.æ‰€æœ‰å˜é‡ï¼Œæ–¹æ³•ï¼Œå…ƒç´ ç­‰éƒ½å±äºwindowå¯¹è±¡ã€‚\néƒ½å¯ä»¥ç”¨windowè°ƒç”¨é¡µé¢ä¸­å®šä¹‰çš„å˜é‡å’Œæ–¹æ³•éƒ½\næ˜¯windowçš„\n3.CSS+JavaScript+DOM=DHtml\n4.onload äº‹ä»¶ä¼šåœ¨é¡µé¢æˆ–å›¾åƒåŠ è½½å®Œæˆåç«‹å³å‘\nç”Ÿ 5.windowå¯¹è±¡çš„æ–¹æ³• window.alert(â€˜å¤§å®¶å¥½ï¼â€™);//å¼¹å‡ºè­¦å‘Šå¯¹è¯\næ¡† window.confirm(â€˜ç¡®å®šè¦åˆ é™¤å—ï¼Ÿâ€™);//ç¡®å®š\nã€å–æ¶ˆå¯¹è¯æ¡†ï¼Œè¿”å›trueæˆ–false; window.navigate(url);//å°†ç½‘é¡µé‡æ–°å¯¼èˆªåˆ°\nurl,æ”¯æŒIEã€Opera11.6ã€‚å¹¶ä¸æ¨è,æœ‰äº›æµè§ˆå™¨\nä¸è¡Œ, å»ºè®®ä½¿ç”¨window.location.href=â€˜urlâ€™;//æ”¯\næŒå¤§å¤šæ•°æµè§ˆå™¨ 6.è®¡æ—¶å™¨ 1\u0026gt;var steId=setTimeout(function(){ alert(\u0026lsquo;è¿™æ˜¯ä¸€æ¬¡æ€§çš„\u0026rsquo;) },1000); clearTimeout(setId);//æ¸…é™¤è®¡æ—¶å™¨ 2\u0026gt;var setId=setInterval(function(){ alert(\u0026lsquo;ç¥å·è¡Œï¼Œæˆ‘çœ‹è¡Œ\u0026rsquo;); },1000);\n//clearInterval(setId);//æ¸…é™¤è®¡æ—¶å™¨ 7.onloadï¼ˆé¡µé¢åŠ è½½åè§¦å‘ onunloadï¼ˆé¡µé¢å¸è½½åè§¦å‘ï¼‰ onbeforeunloadï¼ˆé¡µé¢å¸è½½å‰è§¦å‘ï¼‰\n8.window.locationå¯¹è±¡ï¼š window.location.href=â€˜â€™;//é‡æ–°å¯¼èˆªåˆ°æ–°é¡µ\né¢,å¯ä»¥å–å€¼ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ã€‚ window.location.reload();//åˆ·æ–°å½“å‰é¡µ å¯¹è±¡çš„äº‹ä»¶ï¼Œæ‰€æœ‰å…ƒç´ çš„äº‹ä»¶éƒ½å¯ä»¥é€šè¿‡eventå±\næ€§å–åˆ°ç›¸å…³ä¿¡æ¯ã€‚//å…¼å®¹IEwindow.eventæ˜¯IEä¸‹\néå¸¸é‡è¦çš„å±æ€§ï¼Œç”¨æ¥è·å¾—å‘ç”Ÿäº‹ä»¶æ—¶çš„ä¿¡æ¯ï¼Œ\näº‹ä»¶ä¸å±€é™äºwindowã€Chromeï¼Œä¸å…¼å®¹FFï¼ˆç”¨\neventå‚æ•°ï¼‰ã€‚ window.event.altKeyå±æ€§ï¼Œboolç±»å‹ï¼Œè¡¨ç¤ºäº‹\nä»¶å‘ç”Ÿæ—¶æ˜¯å¦æŒ‰ä¸‹äº†alté”®ã€‚ç±»ä¼¼çš„è¿˜æœ‰\nctrlKey,shiftKeyã€‚ clientXã€clientY å‘ç”Ÿäº‹ä»¶æ—¶é¼ æ ‡åœ¨å®¢æˆ·åŒºçš„\nåæ ‡ï¼›(é¡µé¢å·¦ä¸Šè§’)ä¸æ”¯æŒç«ç‹ screenXã€screenY å‘ç”Ÿäº‹ä»¶æ—¶é¼ æ ‡åœ¨å±å¹•ä¸Šçš„\nåæ ‡ï¼›ï¼ˆç›¸å¯¹äºå±å¹•ï¼‰ offsetXã€offsetY å‘ç”Ÿäº‹ä»¶æ—¶é¼ æ ‡ç›¸å¯¹äºäº‹ä»¶\næºï¼ˆæ¯”å¦‚ç‚¹å‡»æŒ‰é’®æ—¶è§¦å‘onclickï¼‰çš„åæ ‡ã€‚\nonload=function(){ document.getElementById ('dv').onmousedown=function(){ if(window.event.altKey){ alert('æŒ‰ä¸‹äº†alté”®'); }else if(window.event.shiftKey){ alert('æŒ‰ä¸‹äº†shifté”®'); }else if(window.event.ctrlKey){ alert('æŒ‰ä¸‹äº†ctrlé”®'); }else{ alert('åªæ˜¯æŒ‰ä¸‹äº†é¼ æ ‡äº†'); } alert(window.event.button); }; };  9.èµ‹å€¼å’Œç²˜è´´çš„æ§åˆ¶\n\u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; \u0026lt;/script\u0026gt; \u0026lt;script type=\u0026quot;text/javascript\u0026quot;\u0026gt; onload=function(){ document.body.oncopy=function(){ setTimeout(function(){ var tt= clipboardData.getData('text')+'æ–‡æœ¬å‡ºè‡ªå“ª é‡Œ'; clipboardData.setData('text',tt); },100); }; }; \u0026lt;/script\u0026gt;  10.tag(æ ‡ç­¾) 11.è·å–å…ƒç´ çš„ä¸‰ç§æ–¹å¼ getElementById(), ï¼ˆéå¸¸å¸¸ç”¨ï¼‰ï¼Œæ ¹æ®å…ƒç´ çš„\nIdè·å¾—å¯¹è±¡ï¼Œç½‘é¡µä¸­idä¸èƒ½é‡å¤ã€‚ä¹Ÿå¯ä»¥ç›´æ¥é€š\nè¿‡å…ƒç´ çš„idæ¥å¼•ç”¨å…ƒç´ ï¼Œä½†æ˜¯æœ‰æœ‰æ•ˆèŒƒå›´ã€ getElementsByName()ï¼Œæ ¹æ®å…ƒç´ çš„nameè·å¾—å¯¹\nè±¡ï¼Œç”±äºé¡µé¢ä¸­å…ƒç´ çš„nameå¯ä»¥é‡å¤ï¼Œæ¯”å¦‚å¤šä¸ª\nRadioButtonçš„nameä¸€æ ·ï¼Œå› æ­¤\ngetElementsByNameè¿”å›å€¼æ˜¯å¯¹è±¡æ•°ç»„ã€‚ getElementsByTagName()ï¼Œè·å¾—æŒ‡å®šæ ‡ç­¾åç§°çš„\nå…ƒç´ æ•°ç»„ï¼Œæ¯”å¦‚getElementsByTagName(â€œinput\nâ€)å¯ä»¥è·å¾—æ‰€æœ‰çš„æ ‡ç­¾ã€‚*è¡¨ç¤ºæ‰€æœ‰æ ‡ç­¾ 12.ä¸‰ä¸ªç»ƒä¹ é¢˜ï¼Œå¿…é¡»ç†Ÿç»ƒ 1\u0026gt;æ¯éš”ä¸€ç§’è·å¾—å½“å‰æ—¶é—´ onload=function(){\n setInterval(function(){ document.getElementById  (\u0026lsquo;p1\u0026rsquo;).innerText=new Date\n().toLocaleTimeString();\n },1000); };  13.äº‹ä»¶å†’æ³¡\n","date":1431327522,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327522,"objectID":"25d43c404731f5ca9634f5cd9c3afcca","permalink":"/blog/2015/05/11/css7-14jie-bi-ji-dai-ma-march25th/","publishdate":"2015-05-11T14:58:42+08:00","relpermalink":"/blog/2015/05/11/css7-14jie-bi-ji-dai-ma-march25th/","section":"archives","summary":"","tags":null,"title":"css7-14èŠ‚ç¬”è®°ä»£ç March25th","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"å‚è€ƒé˜…è¯»ï¼š [commons.emailçš„é‚®ä»¶ä½¿ç”¨ï¼š][http://commons.apache.org/proper/commons-email/userguide.html] [æˆ‘çš„gtkçš„å°è£…æºä»£ç ï¼š ][http://www.rupeng.com/forum/thread-44377-1-1.html]\nä»Šæ—©èµ·æ¥æƒ³ç€æ˜¯ä¸æ˜¯è¯¥å»å¯¹IOæµåšä¸ªæ€»ç»“ï¼Œäºæ˜¯æ‰“å¼€äº†Apache çš„CommonsIOé¡µé¢ï¼Œçœ‹äº†ä¸€éï¼Œæœ¬æƒ³å†™çš„ï¼Œåæ¥çœ‹åˆ°äº†ä¸€ä¸ªCommons emailåŒ…ï¼äºæ˜¯é¡µæµè§ˆäº†ä¸€ä¸‹userGuide and JavaDoc,å‘ç°ä¸æ˜¯ç‰¹åˆ«éš¾ï¼Œäºæ˜¯å°±æŒ‰ç…§user guide åšäº†å‡ ä¸ªå®éªŒï¼ åˆšå¼€å§‹å‰æœŸé‡åˆ°äº†ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„é—®é¢˜\n/** * */ package TestEmail; /*import java.net.Authenticator; import org.apache.commons.mail.DefaultAuthenticator; import org.apache.commons.mail.Email; import org.apache.commons.mail.SimpleEmail;*/ import org.apache.commons.mail.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ17æ—¥ä¸Šåˆ11:10:04 * @version TestEmailEmailText V1.0 */ public class EmailText { /** * @param args */ public static void main(String[] args) { // TODO Auto-generated method stub Email email = new SimpleEmail(); email.setHostName(\u0026quot;smtp.163.com\u0026quot;); email.setSmtpPort(25); email.setSubject(\u0026quot;æ¬¢è¿ä½ \u0026quot;); email.setAuthenticator(new DefaultAuthenticator(\u0026quot;zhaoturkkey@163.com\u0026quot;, \u0026quot;å¯†ç \u0026quot;)); email.setSSLOnConnect(true); try { email.setFrom(\u0026quot;zhaoturkkey@163.com\u0026quot;,\u0026quot;Ye zhaoliang\u0026quot;); email.setMsg(\u0026quot;This is a test mail ... :-)\u0026quot;); email.addTo(\u0026quot;977962857@qq.com\u0026quot;,\u0026quot;Mr Ye\u0026quot;); email.send(); } catch (EmailException e) { // TODO Auto-generated catch block e.printStackTrace(); } email.setSubject(\u0026quot;TestMail\u0026quot;); } }  email.setAuthenticator(new DefaultAuthenticator(\u0026ldquo;zhaoturkkey@163.com\u0026rdquo;, \u0026ldquo;å¯†ç \u0026rdquo;)); ä»–æ˜¯æ¥è‡ªjavaeeçš„javax.emailåŒ…ï¼ˆé€šè¿‡ctrl+é¼ æ ‡ç‚¹å‡»ï¼Œä¸€è·¯æ’æŸ¥è¿‡å»å°±çŸ¥é“äº†ï¼‰ï¼ï¼ä¸€ç›´æŠ¥é”™ï¼äºæ˜¯ä¸‹è½½äº†javaeeç‰ˆæœ¬çš„eclipseå¹¶æŠ½å–å¤„ javax.emailåŒ…ï¼å·²æ·»åŠ åœ¨é™„ä»¶ä¸­ï¼åªè¦åŠ è½½åˆ°é¡¹ç›®ä¸­å°±å¯ä»¥ä½¿ç”¨ã€‚\nç´§æ¥ç€å‚è€ƒäº†å¸¦é™„ä»¶çš„é‚®ä»¶å‘é€ï¼Œä¹Ÿç¼–å†™äº†ç›¸å…³ç¨‹åºï¼Œè·Ÿtextå·®ä¸å¤šï¼Œåªä¸è¿‡æ˜¯é‡‡ç”¨äº†EmailAttachment å’ŒMultiPartEmail æ›¿æ¢æ‰textç‰ˆæœ¬çš„SimpleEmailç±»ï¼Œå°±å¯ä»¥å¢åŠ é™„ä»¶äº†ï¼Œä¸‹é¢æ˜¯æˆ‘æœ€åç‰ˆæœ¬çš„æºç ï¼Œéœ€è¦æœ‰OOGTKå’Œcom.rupeng.gtk4j.jarè¿™ä¸¤ä¸ªç±»åº“å³å¯ æ–‡æœ¬å‘é€é‚®ä»¶æ˜¯æŒºå¿«çš„ å¸¦é™„ä»¶çš„é‚®ä»¶å‘é€ç›¸å¯¹è¾ƒæ…¢äº›\n/** * é‚®ä»¶å‘é€å™¨ */ package TestEmail; import java.io.File; import org.apache.commons.mail.DefaultAuthenticator; import org.apache.commons.mail.Email; import org.apache.commons.mail.EmailAttachment; import org.apache.commons.mail.EmailException; import org.apache.commons.mail.MultiPartEmail; import org.apache.commons.mail.SimpleEmail; import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ17æ—¥ä¸‹åˆ2:27:35 * @version TestEmailMyEmailSend V1.0 */ import GTKEncapsulate.*; public class MyEmailSend { /** * @param args */ //æ§ä»¶çš„å£°æ˜ private static OOWindow ow = null; private static OOButton ob = null; private static OOButton obApple = null; private static OOButton obAttach = null; private static OOTextView otv = null; private static OOGrid og = null; private static OOLabel olPort = null; private static OOLabel olMessage = null; private static OOLabel olFrom = null; private static OOLabel olTo = null; private static OOLabel olServer = null; private static OOLabel olPassword = null; private static OOLabel olSubject = null; private static OOLabel olFromName = null; private static OOLabel olToName = null; private static OOLabel olAttachName = null; private static OOLabel olAttachDescription = null; private static OOLabel olAttachSetName = null; private static OOEntry oePort = null; private static OOEntry oeFrom = null; private static OOEntry oeTo = null; private static OOEntry oeServer = null; private static OOPassword opPassword = null; private static OOEntry oeSubject = null; private static OOEntry oeFromName = null; private static OOEntry oeToName = null; private static OOEntry oeAttachDescription = null; private static OOEntry oeAttachSetName = null; private static String[] filenames = null; //æ„é€ å‡½æ•° åˆå§‹åŒ–ç•Œé¢ public MyEmailSend() { ow = new OOWindow(); ow.setTitle(\u0026quot;é‚®ä»¶å‘é€å™¨\u0026quot;); ow.setExitAfterDestroy(true); olServer = new OOLabel(\u0026quot;å‘é€ç«¯æœåŠ¡å™¨:\u0026quot;); olPort = new OOLabel(\u0026quot;æœåŠ¡å™¨ç«¯å£ï¼š\u0026quot;); olMessage = new OOLabel(\u0026quot;å¾…å‘é€ä¿¡æ¯ï¼š\u0026quot;); olFrom = new OOLabel(\u0026quot;å‘é€æ–¹é‚®ç®±ï¼ˆ163.comï¼‰ï¼š\u0026quot;); olTo = new OOLabel(\u0026quot;æ¥æ”¶æ–¹é‚®ç®±:\u0026quot;); olPassword = new OOLabel(\u0026quot;å‘é€æ–¹å¯†ç ï¼š\u0026quot;); olSubject = new OOLabel(\u0026quot;é‚®ä»¶ä¸»é¢˜ï¼š\u0026quot;); olFromName = new OOLabel(\u0026quot;ä½ çš„åå­—ï¼š\u0026quot;); olToName = new OOLabel(\u0026quot;å¯¹æ–¹çš„åå­—ï¼š\u0026quot;); olAttachName = new OOLabel(\u0026quot;\u0026quot;); olAttachDescription = new OOLabel(\u0026quot;æ·»åŠ é™„ä»¶æè¿°:\u0026quot;); olAttachSetName = new OOLabel(\u0026quot;è®¾ç½®é™„ä»¶åå­—:\u0026quot;); //æ–‡æœ¬æ¡†åˆ›å»º oePort = new OOEntry(); oePort.setText(\u0026quot;25\u0026quot;); oeFrom = new OOEntry(); oeFrom.setText(\u0026quot;zhaoturkkey@163.com\u0026quot;); oeTo = new OOEntry(); oeTo.setText(\u0026quot;977962857@qq.com\u0026quot;); oeServer = new OOEntry(); oeServer.setText(\u0026quot;smtp.163.com\u0026quot;); opPassword = new OOPassword(); oeSubject = new OOEntry(); oeFromName = new OOEntry(); oeFromName.setText(\u0026quot;å¶æ˜­è‰¯\u0026quot;); oeToName = new OOEntry(); oeToName.setText(\u0026quot;è‚–æ¬£ç„¶\u0026quot;); oeAttachDescription = new OOEntry(); oeAttachSetName = new OOEntry(); obAttach = new OOButton(\u0026quot;æ·»åŠ é™„ä»¶\u0026quot;); ob = new OOButton(\u0026quot;ä»…æ–‡æœ¬å‘é€\u0026quot;); obApple = new OOButton(\u0026quot;å¸¦é™„ä»¶å‘é€\u0026quot;); otv = new OOTextView(); otv.setText(\u0026quot;å°Šæ•¬çš„\u0026quot;+oeToName.getText()+\u0026quot;:\\n\u0026quot;); OOScrollBar osb = new OOScrollBar(); osb.setWidgetSize(200, 200); osb.addView(otv); og = new OOGrid(); //æ˜¾ç¤ºæ§ä»¶ ow.show(); ob.show(); obApple.show(); otv.show(); osb.show(); obAttach.show(); olMessage.show(); olPort.show(); olPassword.show(); olServer.show(); olFrom.show(); olTo.show(); olSubject.show(); olFromName.show(); olToName.show(); //olAttachName.show(); oeFrom.show(); oeTo.show(); oeServer.show(); oePort.show(); oeSubject.show(); opPassword.show(); oeFromName.show(); oeToName.show(); og.show(); //æ·»åŠ æ§ä»¶ ow.add(og); og.add(olServer, 0,0); og.add(oeServer, 0, 1); og.add(olPort,0,2); og.add(oePort,0,3); og.add(olFrom,1,0); og.add(oeFrom,1,1); og.add(olPassword,1,2); og.add(opPassword,1,3); og.add(olTo,2,0); og.add(oeTo,2,1); og.add(olToName,2,2); og.add(oeToName,2,3); og.add(olSubject,3,0); og.add(oeSubject,3,1); og.add(olFromName,3,2); og.add(oeFromName,3,3); og.add(olMessage,4,0); og.add(osb,5,0,4,2); og.add(obAttach,7,0); og.add(olAttachName,7,1); og.add(olAttachDescription,8,0); og.add(oeAttachDescription,8,1); og.add(olAttachSetName,8,2); og.add(oeAttachSetName,8,3); og.add(ob, 9, 0); og.add(obApple,9,1); //æ–‡æœ¬ç›‘å¬ ob.addClickedListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub Email email = new SimpleEmail(); email.setHostName(oeServer.getText()); email.setSmtpPort(Integer.parseInt(oePort.getText())); email.setSubject(oeSubject.getText()); // email.setAuthenticator(new DefaultAuthenticator(\u0026quot;zhaoturkkey@163.com\u0026quot;, \u0026quot;457866zhao\u0026quot;)); email.setAuthenticator(new DefaultAuthenticator(oeFrom.getText(), opPassword.getText())); email.setSSLOnConnect(true); if(opPassword.getText().equalsIgnoreCase(\u0026quot;\u0026quot;)) { OOMessageDialog om = new OOMessageDialog(\u0026quot;é”™è¯¯\u0026quot;); om.showError(\u0026quot;å¯†ç æ¡†ä¸èƒ½ä¸ºç©ºï¼\u0026quot;, \u0026quot;èµ¶ç´§å»å¡«å†™\u0026quot;); return; } //æµ‹è¯• /* System.out.println(oeServer.getText()); System.out.println(Integer.parseInt(oePort.getText())); System.out.println(oeFrom.getText()); System.out.println(opPassword.getText()); System.out.println(oeSubject.getText()); System.out.println(otv.getText());*/ try { email.setFrom(oeFrom.getText(),oeFromName.getText()); email.setMsg(otv.getText()); email.addTo(oeTo.getText(),oeToName.getText()); email.send(); } catch (EmailException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;å‘é€é‚®ä»¶å¼‚å¸¸\u0026quot;+e.getMessage()); } } }); //æ–‡æœ¬é™„ä»¶ç›‘å¬ obApple.addClickedListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub // Create the attachment if(opPassword.getText().equalsIgnoreCase(\u0026quot;\u0026quot;)) { OOMessageDialog om = new OOMessageDialog(\u0026quot;é”™è¯¯\u0026quot;); om.showError(\u0026quot;å¯†ç æ¡†ä¸èƒ½ä¸ºç©ºï¼\u0026quot;, \u0026quot;èµ¶ç´§å»å¡«å†™\u0026quot;); return; } EmailAttachment attachment = new EmailAttachment(); //attachment.setPath(\u0026quot;hunsha.jpg\u0026quot;); //attachment.setPath(\u0026quot;E:\\\\a1.zip\u0026quot;); //attachment.setPath(\u0026quot;E:\\\\1.jpg\u0026quot;); if(oeAttachSetName.getText().equalsIgnoreCase(\u0026quot;\u0026quot;)) { OOMessageDialog om = new OOMessageDialog(\u0026quot;é”™è¯¯\u0026quot;); om.showError(\u0026quot;ä½ è¿˜æ²¡æœ‰æ·»åŠ é™„ä»¶å‘¢ï¼\u0026quot;, \u0026quot;èµ¶ç´§å»æ·»åŠ \u0026quot;); return; } attachment.setPath(filenames[0]); attachment.setDisposition(EmailAttachment.ATTACHMENT); attachment.setDescription(oeAttachDescription.getText()); attachment.setName(oeAttachSetName.getText()); // Create the email message MultiPartEmail email = new MultiPartEmail(); email.setHostName(oeServer.getText()); email.setSmtpPort(Integer.parseInt(oePort.getText())); email.setAuthenticator(new DefaultAuthenticator(oeFrom.getText(), opPassword.getText())); email.setSSLOnConnect(true); try { email.addTo(oeTo.getText(), oeToName.getText()); email.setFrom(oeFrom.getText(), oeFromName.getText()); email.setSubject(oeSubject.getText()); email.setMsg(otv.getText()); // add the attachment email.attach(attachment); // send the email email.send(); }catch(EmailException e) { System.out.println(\u0026quot;é‚®ä»¶å‘é€å¤±è´¥ \u0026quot;+e.getMessage()); } } }); obAttach.addClickedListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub OOFileChooser ofApple =new OOFileChooser(); ofApple.setMultipleSelect(); ofApple.createFilter(); ofApple.nameFilter(\u0026quot;ä»»æ„æ–‡ä»¶\u0026quot;); ofApple.editFilter(\u0026quot;*.txt\u0026quot;); ofApple.editFilter(\u0026quot;*.java\u0026quot;); ofApple.editFilter(\u0026quot;*.rar\u0026quot;); ofApple.editFilter(\u0026quot;*.zip\u0026quot;); ofApple.editFilter(\u0026quot;*.doc\u0026quot;); //æŠŠfilterçš„æ“ä½œæ”¾å…¥æ‰“å¼€å¯¹è¯æ¡†ä¸­ ofApple.finishFilter(); //String[] filenames = ofApple.processOpen(); filenames = ofApple.processOpen(); olAttachName.setText(\u0026quot;ä½ é€‰æ‹©çš„æ–‡ä»¶æ˜¯\u0026quot;+filenames[0].toString()); olAttachName.show(); olAttachSetName.show(); olAttachDescription.show(); oeAttachSetName.show(); oeAttachDescription.show(); //oeAttachSetName.setText(filenames); int index = filenames[0].lastIndexOf(File.separator); oeAttachSetName.setText(filenames[0].substring(index+1)); oeAttachDescription.setText(\u0026quot;è¿™ä¸ªæ–‡ä»¶æ˜¯å…³äº***\u0026quot;); } }); } public static void main(String[] args) { // TODO Auto-generated method stub GTK.gtk_init(); MyEmailSend mes = new MyEmailSend(); GTK.gtk_main(); } }  å°è½¯ä»¶è¿è¡Œçš„æ•ˆæœ: ","date":1431327522,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327522,"objectID":"5352b50bf368b789df2f1b21360eb8cf","permalink":"/blog/2015/05/11/emailyou-jian-fa-song-plus-oogtk-0217/","publishdate":"2015-05-11T14:58:42+08:00","relpermalink":"/blog/2015/05/11/emailyou-jian-fa-song-plus-oogtk-0217/","section":"archives","summary":"","tags":null,"title":"emailé‚®ä»¶å‘é€+OOGTK(0217)","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"HashMap: Hashmapæœ¬è´¨ï¼š \u0026mdash;-\u0026gt; \u0026mdash;-\u0026gt; \u0026mdash;-\u0026gt; \u0026mdash;-\u0026gt;\u0026mdash;-\u0026gt; \u0026mdash;-\u0026gt; \u0026mdash;-\u0026gt; \u0026mdash;-\u0026gt; \u0026mdash;-\u0026gt;\u0026mdash;-\u0026gt;\u0026mdash;-\u0026gt; \u0026mdash;-\u0026gt; \u0026mdash;-\u0026gt; \u0026mdash;-\u0026gt;\u0026mdash;-\u0026gt;\u0026mdash;-\u0026gt; \u0026mdash;-\u0026gt; \u0026mdash;-\u0026gt; \u0026mdash;-\u0026gt;\u0026mdash;-\u0026gt; | | | | | | | | | | | | | | | | ä¼˜ç‚¹ï¼šå› ä¸ºå†…éƒ¨ç»“æ„ä¸ºå“ˆå¸Œè¡¨,æ‰€ä»¥æ·»åŠ åˆ é™¤æŸ¥è¯¢ç­‰æ“ä½œéƒ½å¾ˆå¿« ç¼ºç‚¹ï¼šHashMapä¸èƒ½ç›´æ¥éå†keySet() , values() , entrySet()ä¸‰ä¸ªæ–¹æ³•ä½œä¸ºéå†æ–¹æ³• ç”±äºMap æŠŠkey å’Œ value å°è£…åˆ°äº†Entryå¯¹è±¡ä¸­,æ‰€ä»¥å¹¶ä¸ä¼šå¯¹keyå’Œvalueç›´æ¥æ“ä½œ,æ‰€ä»¥keyå’Œvalueå¯ä»¥ä¸ºnull HashMapå·²ç»æ›¿æ¢æ‰HashTableï¼ˆåªä¸è¿‡è¿˜æœ‰ä¸€ä¸ªå‚ä¸åˆ†å­Propertiesè¿˜åœ¨å¤§é‡ä½¿ç”¨ï¼‰ |\u0026ndash;set |\u0026mdash;keySet |\u0026mdash;entrySet |\u0026ndash;Collection\n/** * */ package com.collections.test; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ25æ—¥ä¸Šåˆ1:38:30 * @version com.collections.testTestHashMap V1.0 */ import java.util.*; public class TestHashMap { /** * @param args */ public static void main(String[] args) { // TODO Auto-generated method stub Map map = new HashMap(); map.put(\u0026quot;1\u0026quot;, \u0026quot;zhangsan\u0026quot;); map.put(\u0026quot;2\u0026quot;, \u0026quot;lisi\u0026quot;); map.put(\u0026quot;3\u0026quot;, \u0026quot;cbd\u0026quot;); System.out.println(map.get(\u0026quot;1\u0026quot;)); Set keySet = map.keySet(); Iterator it = keySet.iterator(); while(it.hasNext()) { Object o = it.next(); System.out.println(map.get(o)+\u0026quot;:\u0026quot;+o); } System.out.println(\u0026quot;The Second method to get Value---\u0026quot;); Collection value = map.values(); Iterator it1 =value.iterator(); while(it1.hasNext()) { System.out.println(it1.next()); } map.remove(\u0026quot;1\u0026quot;); System.out.println(\u0026quot;The Third Method to get value----\u0026quot;); Set keyset1 = map.entrySet(); Iterator itp = keyset1.iterator(); while(itp.hasNext()) { Map.Entry o = (Map.Entry)itp.next(); System.out.println(o+\u0026quot;ï¼Œå…¶ä¸­ é”®ä½ï¼š\u0026quot;+o.getKey()+\u0026quot;,å€¼ä¸ºï¼š\u0026quot;+o.getValue()); } } }  HashMapæºç è¿½è¸ªï¼š\nHashMapæºç è°ƒç ”çš„åŸºç¡€çŸ¥è¯†: 1.ä½è¿ç®—ç¬¦\nç”¨äºå®¹é‡çš„ç¿»å€ï¼Œä»¥åŠé™å®šåœ¨æŸä¸€èŒƒå›´å†…ï¼š \u0026gt;\u0026gt;\n\u0026gt;\u0026gt;\u0026gt; ä¸è€ƒè™‘ç¬¦å· ï¼Œç©ºä½éƒ½ä»¥0è¡¥é½ 0è¡¥æœ€é«˜ä½ ï¼ˆ\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt;æ­£æ•°æ— å·®åˆ«ï¼Œè´Ÿæ•°æœ‰å·®åˆ«ï¼‰ \u0026amp; ä¸è¿ç®—\npackage com.collections.test; import java.util.HashMap; import java.util.HashSet; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ25æ—¥ä¸Šåˆ11:06:09 * @version com.collections.testDeepHashMap V1.0 */ public class DeepHashMap { /** * @param args */ public static void main(String[] args) { // TODO Auto-generated method stub /** * Longç±»å‹çš„equalsçš„å®ç° * public boolean equals(Object obj) { if (obj instanceof Long) { return value == ((Long)obj).longValue(); } return false; } */ System.out.println(new Long(1).equals(new Integer(1))); System.out.println(new Long(1).intValue()==new Integer(1).intValue()); System.out.println(new Long(1).longValue()==new Integer(1).intValue()); System.out.println(new Long(1).longValue()); System.out.println(new Integer(1).intValue()); System.out.println(new Long(100).hashCode()); System.out.println(new Integer(100).hashCode()); // System.out.println(new Integer(100).hashCode(100)); HashMap\u0026lt;Integer,String\u0026gt; hm = new HashMap\u0026lt;Integer,String\u0026gt;(); System.out.println(hm.hashCode()); // HashSet\u0026lt;String\u0026gt; hs ; System.out.println( (1 \u0026lt;\u0026lt; 30)/1024/1024/1024); //1G System.out.println(8\u0026gt;\u0026gt;\u0026gt;2); //+++ System.out.printf(\u0026quot;%o -- %x --- %X\\n ----\\n\u0026quot;,-14,-14,-14); System.out.println(-14\u0026gt;\u0026gt;\u0026gt;2); System.out.println(Integer.toBinaryString(-14)); System.out.println(-14\u0026gt;\u0026gt;2); //æŠŠä¸€ä¸ªå­—ç¬¦ä¸²å˜ä¸º å¥‡æ•° // \u0026gt;\u0026gt;\u0026gt; System.out.println(Integer.parseInt(\u0026quot;00111111111111111111111111111100\u0026quot;,2)); // \u0026gt;\u0026gt; //Integer.parseInt(\u0026quot;-010101010\u0026quot;,2) å¯ä»¥å¸¦ç¬¦å· System.out.println(Integer.toBinaryString(14)); //~å–åè¿ç®— ä»…ä»…é’ˆå¯¹ æ•´æ•° System.out.println(~14); System.out.println(Integer.toBinaryString(~14)); //å¦‚ä½•è§£æå¸¦ç¬¦å·ä½çš„ System.out.println(\u0026quot;2çš„3æ¬¡æ–¹ çš„é”™è¯¯ç­”æ¡ˆ\u0026quot;+(2^3)); // ^åœ¨javaå½“ä¸­æ˜¯å¼‚æˆ–æ“ä½œ System.out.println(\u0026quot;2çš„3æ¬¡æ–¹ çš„æ­£ç¡®ç­”æ¡ˆ\u0026quot;+Math.pow(2, 3)); //System.out.println(11111111111111111111111111110010); /* * å°å­˜åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨ * System.out.println(\u0026quot;é€šè¿‡å¼‚æˆ–çš„æ–¹å¼è¿›è¡ŒéªŒè¯\u0026quot;); System.out.println(Long.parseLong(\u0026quot;11111111111111111111111111111111\u0026quot;,2)^(Long.parseLong(\u0026quot;11111111111111111111111111110010\u0026quot;,2))); // 1101 8+4+1 = 13 System.out.println((Long.parseLong(\u0026quot;11111111111111111111111111111111\u0026quot;,2)^(Long.parseLong(\u0026quot;11111111111111111111111111110010\u0026quot;,2)))+1); System.out.println(-((Long.parseLong(\u0026quot;11111111111111111111111111111111\u0026quot;,2)^(Long.parseLong(\u0026quot;11111111111111111111111111110010\u0026quot;,2)))+1)); */ System.out.println(\u0026quot;é€šè¿‡è‡ªå®šä¹‰çš„è·å–è´Ÿæ•°çš„æ–¹æ³•:\u0026quot;+parseNegativeInteger(\u0026quot;11111111111111111111111111110010\u0026quot;)); //è´Ÿæ•°çš„è¡¥ç çš„è®¡ç®—æ˜¯å–ååŠ 1ï¼ˆç„¶ååœ¨æœ€åçš„æ•°ä¸ŠåŠ ä¸Šè´Ÿæ•°ï¼‰ æ­£æ•°çš„è¡¥ç æ˜¯ç›´æ¥è®¡ç®— System.out.println(Integer.parseInt(\u0026quot;100\u0026quot;,2)); //æŠŠ100è¿™ä¸ªäºŒè¿›åˆ¶æ•°æŒ‰ç…§2è¿›åˆ¶æ–¹å¼è§£æ //String. System.out.println(100); System.out.println(\u0026quot;å¼€å§‹ä»é«˜åˆ°ä½è¿›è¡Œæ‰“å°\u0026quot;); //æ ¼å¼åŒ–è¾“å‡º åªæœ‰ %d %o %x äºŒè¿›åˆ¶å¾—ç”¨toBinaryString for(byte b1 :longToByte8(100)) { System.out.printf(\u0026quot;%d:\u0026quot;,b1); } //æˆ‘ç°åœ¨æ˜¯å–å // returns the number of one-bits System.out.println(Integer.toBinaryString(170)); System.out.println(\u0026quot;Number of one bits = \u0026quot; + Integer.bitCount(170)); // ç‰›é€¼ç®—æ³•ï¼ è®©næœ€ç»ˆä¸º æŸä¸€ä¸ªèŒƒå›´å†…çš„ä¸¤ç«¯å€¼ System.out.println(15|15\u0026gt;\u0026gt;\u0026gt;1); int n = 170; //ä½¿å¾— néƒ½æ˜¯ /** * æˆ–çš„è¿ç®—å°±æ˜¯ä¿æŒæœ€å¤§å€¼ï¼ˆä¸çš„è¿ç®—æ˜¯ä¸ºäº†ä¿æŒåŸæ ·ï¼ˆå½“å’Œ0xff)) * 13 :00000000 00000000 00000000 00001101 * 6 00000000 00000000 00000000 00000110 * 15: 00000000 00000000 00000000 00001111 * ä¸€ç›´ä¿æŒ15 å½“æ—¶æœ€å¤§å€¼ åˆ™ä¿æŒä¸€æ ·äº† */ n |= n \u0026gt;\u0026gt;\u0026gt; 1; n |= n \u0026gt;\u0026gt;\u0026gt; 2; n |= n \u0026gt;\u0026gt;\u0026gt; 4; n |= n \u0026gt;\u0026gt;\u0026gt; 8; n |= n \u0026gt;\u0026gt;\u0026gt; 16; // 2^16 System.out.println(\u0026quot;Pow(2,16):\u0026quot;+Math.pow(2, 16)); System.out.println(n); System.out.println(170\u0026gt;\u0026gt;\u0026gt;8); int tb=0; //ç”±æ­¤å¯è§ Ifçš„èµ‹å€¼æ˜¯ä¼šå½±å“åˆ°elseçš„ï¼ï¼ï¼ //å¹¶ä¸”æ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œè¿™æ˜¯åœ¨çœ‹hashmapçš„æ—¶å€™å­¦åˆ°çš„ if((tb=4) ==3) { System.out.println(\u0026quot;In the if\u0026quot;+tb); }else { System.out.println(\u0026quot;In the else\u0026quot;+tb); } } /** * è®¡ç®—æœºå†…éƒ¨è´Ÿæ•°æ˜¯ç”¨è¡¥ç è¡¨ç¤ºçš„ï¼Œæ­£æ•°çš„åŸç ä¸è¡¥ç ç›¸åŒ (ä¹Ÿå°±æ˜¯æ‰€æœ‰æ•°éƒ½ä»¥è¡¥ç å­˜åœ¨) * ä½ ä¸è¦ç”¨è¿™ç§è¿å†™çš„æ–¹å¼ï¼Œæ”¹æˆï¼š * 5 0101 3: 0011 * * 1: 0101 ^ 0011 = 0110 * 2: 0110 ^ 0011 = 0101 == 5 * 3: 0110 ^ 0101 = 0011 == 3 * çœŸå¿ƒå¦™çš„æ“ä½œ i = i^j; j = i^j; i = i^j; è¿™æ ·å°±å¯è¿›è¡Œä¸¤ä¸ªæ•°çš„äº¤æ¢ * @param sum * @return */ public static long parseNegativeInteger(String number) { return -((Long.parseLong(\u0026quot;11111111111111111111111111111111\u0026quot;,2)^(Long.parseLong(number,2)))+1); } public static byte[] longToByte8(long sum) { byte[] arr = new byte[8]; //ä¸€ä¸ªå­—èŠ‚æœ‰8 ä½ longæ˜¯8ä¸ªå­—èŠ‚çš„ arr[0] = (byte) (sum \u0026gt;\u0026gt; 56); //å…ˆæå–æœ€é«˜ä½ arr[1] = (byte) (sum \u0026gt;\u0026gt; 48); //ç¬¬äºŒé«˜ä½ arr[2] = (byte) (sum \u0026gt;\u0026gt; 40); //ç¬¬ä¸‰é«˜ä½ arr[3] = (byte) (sum \u0026gt;\u0026gt; 32); arr[4] = (byte) (sum \u0026gt;\u0026gt; 24); arr[5] = (byte) (sum \u0026gt;\u0026gt; 16); arr[6] = (byte) (sum \u0026gt;\u0026gt; 8); arr[7] = (byte) (sum \u0026amp; 0xff); //ä¸è¶…è¿‡258 15*16+16 =256 return arr; } }  ç”±æ­¤å¾—çŸ¥HashMapçš„ç¿»å€åŸç†ï¼š newCap = oldCap \u0026lt;\u0026lt; 1\n2.å­—èŠ‚çš„æˆªæ–­å·¥å…·ï¼š \u0026amp;çš„æˆªæ–­ä½œç”¨\n//0xff å…¶å®å°±æ˜¯ä¸€ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯æœ€ä½çš„ä¸€ä¸ªç›´æ¥ //é€šè¿‡\u0026amp;æ¥æˆªæ–­æœ€ä½çš„ä¸€ä¸ªç›´æ¥ (byte) (c \u0026amp; 0xff); æ¥è·å¾—cçš„æœ€ä½çš„ä¸€ä¸ªç›´æ¥ï¼ˆä¸€èˆ¬ç”¨äºç»“å°¾ ^\np = tab[index = (n - 1) \u0026amp; hash] ByteUtilså­—èŠ‚å·¥å…·ï¼šï¼ˆä¸€è°ˆåˆ°å·¥å…·ï¼Œä¸€èˆ¬æ˜¯é™æ€æ–¹æ³•ï¼‰\n/** * http://www.cnblogs.com/fangfan/p/4086662.html */ package com.collections.test; import java.util.Arrays; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ25æ—¥ä¸‹åˆ11:56:33 * @version com.collections.testByteUtils V1.0 */ public class ByteUtils { /** * @param args */ /** * * \u0026lt;pre\u0026gt; * å°†4ä¸ªbyteæ•°å­—ç»„æˆçš„æ•°ç»„åˆå¹¶ä¸ºä¸€ä¸ªfloatæ•°. * \u0026amp;æ˜¯ä½ä¸ï¼Œ\u0026amp;ä¸€èˆ¬ç”¨äºå–ä¸€ä¸ªå­—èŠ‚ï¼ˆå…«ä½ï¼‰çš„ä½æ•° * \u0026lt;/pre\u0026gt; * * @param arr * @return */ public static float byte4ToFloat(byte[] arr) { if (arr == null || arr.length != 4) { throw new IllegalArgumentException(\u0026quot;byteæ•°ç»„å¿…é¡»ä¸ä¸ºç©º,å¹¶ä¸”æ˜¯4ä½!\u0026quot;); } int i = byte4ToInt(arr); return Float.intBitsToFloat(i); } /** * * \u0026lt;pre\u0026gt; * å°†ä¸€ä¸ªfloatæ•°å­—è½¬æ¢ä¸º4ä¸ªbyteæ•°å­—ç»„æˆçš„æ•°ç»„. * \u0026lt;/pre\u0026gt; * * @param f * @return */ public static byte[] floatToByte4(float f) { int i = Float.floatToIntBits(f); return intToByte4(i); } /** * * \u0026lt;pre\u0026gt; * å°†å…«ä¸ªbyteæ•°å­—ç»„æˆçš„æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªdoubleæ•°å­—. * \u0026lt;/pre\u0026gt; * * @param arr * @return */ public static double byte8ToDouble(byte[] arr) { if (arr == null || arr.length != 8) { throw new IllegalArgumentException(\u0026quot;byteæ•°ç»„å¿…é¡»ä¸ä¸ºç©º,å¹¶ä¸”æ˜¯8ä½!\u0026quot;); } long l = byte8ToLong(arr); return Double.longBitsToDouble(l); } /** * * \u0026lt;pre\u0026gt; * å°†ä¸€ä¸ªdoubleæ•°å­—è½¬æ¢ä¸º8ä¸ªbyteæ•°å­—ç»„æˆçš„æ•°ç»„. * \u0026lt;/pre\u0026gt; * * @param i * @return */ public static byte[] doubleToByte8(double i) { long j = Double.doubleToLongBits(i); return longToByte8(j); } /** * * \u0026lt;pre\u0026gt; * å°†ä¸€ä¸ªcharå­—ç¬¦è½¬æ¢ä¸ºä¸¤ä¸ªbyteæ•°å­—è½¬æ¢ä¸ºçš„æ•°ç»„. * \u0026lt;/pre\u0026gt; * * @param c * @return */ public static byte[] charToByte2(char c) { byte[] arr = new byte[2]; arr[0] = (byte) (c \u0026gt;\u0026gt; 8); //0xff å…¶å®å°±æ˜¯ä¸€ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯æœ€ä½çš„ä¸€ä¸ªç›´æ¥ //é€šè¿‡\u0026amp;æ¥æˆªæ–­æœ€ä½çš„ä¸€ä¸ªç›´æ¥ arr[1] = (byte) (c \u0026amp; 0xff); return arr; } /** * * \u0026lt;pre\u0026gt; * å°†2ä¸ªbyteæ•°å­—ç»„æˆçš„æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªcharå­—ç¬¦. * \u0026lt;/pre\u0026gt; * * @param arr * @return */ public static char byte2ToChar(byte[] arr) { if (arr == null || arr.length != 2) { throw new IllegalArgumentException(\u0026quot;byteæ•°ç»„å¿…é¡»ä¸ä¸ºç©º,å¹¶ä¸”æ˜¯2ä½!\u0026quot;); } return (char) (((char) (arr[0] \u0026lt;\u0026lt; 8)) | ((char) arr[1])); } /** * * \u0026lt;pre\u0026gt; * å°†ä¸€ä¸ª16ä½çš„shortè½¬æ¢ä¸ºé•¿åº¦ä¸º2çš„8ä½byteæ•°ç»„. * \u0026lt;/pre\u0026gt; * * @param s * @return */ public static byte[] shortToByte2(Short s) { byte[] arr = new byte[2]; arr[0] = (byte) (s \u0026gt;\u0026gt; 8); arr[1] = (byte) (s \u0026amp; 0xff); return arr; } /** * * \u0026lt;pre\u0026gt; * é•¿åº¦ä¸º2çš„8ä½byteæ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ª16ä½shortæ•°å­—. * \u0026lt;/pre\u0026gt; * * @param arr * @return */ public static short byte2ToShort(byte[] arr) { if (arr != null \u0026amp;\u0026amp; arr.length != 2) { throw new IllegalArgumentException(\u0026quot;byteæ•°ç»„å¿…é¡»ä¸ä¸ºç©º,å¹¶ä¸”æ˜¯2ä½!\u0026quot;); } return (short) (((short) arr[0] \u0026lt;\u0026lt; 8) | ((short) arr[1] \u0026amp; 0xff)); } /** * * \u0026lt;pre\u0026gt; * å°†shortè½¬æ¢ä¸ºé•¿åº¦ä¸º16çš„byteæ•°ç»„. * å®é™…ä¸Šæ¯ä¸ª8ä½byteåªå­˜å‚¨äº†ä¸€ä¸ª0æˆ–1çš„æ•°å­— * æ¯”è¾ƒæµªè´¹. * \u0026lt;/pre\u0026gt; * * @param s * @return */ public static byte[] shortToByte16(short s) { byte[] arr = new byte[16]; for (int i = 15; i \u0026gt;= 0; i--) { arr[i] = (byte) (s \u0026amp; 1); s \u0026gt;\u0026gt;= 1; } return arr; } public static short byte16ToShort(byte[] arr) { if (arr == null || arr.length != 16) { throw new IllegalArgumentException(\u0026quot;byteæ•°ç»„å¿…é¡»ä¸ä¸ºç©º,å¹¶ä¸”é•¿åº¦ä¸º16!\u0026quot;); } short sum = 0; for (int i = 0; i \u0026lt; 16; ++i) { sum |= (arr[i] \u0026lt;\u0026lt; (15 - i)); } return sum; } /** * * \u0026lt;pre\u0026gt; * å°†32ä½intè½¬æ¢ä¸ºç”±å››ä¸ª8ä½byteæ•°å­—. * \u0026lt;/pre\u0026gt; * * @param sum * @return */ public static byte[] intToByte4(int sum) { byte[] arr = new byte[4]; arr[0] = (byte) (sum \u0026gt;\u0026gt; 24); arr[1] = (byte) (sum \u0026gt;\u0026gt; 16); arr[2] = (byte) (sum \u0026gt;\u0026gt; 8); arr[3] = (byte) (sum \u0026amp; 0xff); return arr; } /** * \u0026lt;pre\u0026gt; * å°†é•¿åº¦ä¸º4çš„8ä½byteæ•°ç»„è½¬æ¢ä¸º32ä½int. * \u0026lt;/pre\u0026gt; * * @param arr * @return */ public static int byte4ToInt(byte[] arr) { if (arr == null || arr.length != 4) { throw new IllegalArgumentException(\u0026quot;byteæ•°ç»„å¿…é¡»ä¸ä¸ºç©º,å¹¶ä¸”æ˜¯4ä½!\u0026quot;); } return (int) (((arr[0] \u0026amp; 0xff) \u0026lt;\u0026lt; 24) | ((arr[1] \u0026amp; 0xff) \u0026lt;\u0026lt; 16) | ((arr[2] \u0026amp; 0xff) \u0026lt;\u0026lt; 8) | ((arr[3] \u0026amp; 0xff))); } /** * * \u0026lt;pre\u0026gt; * å°†é•¿åº¦ä¸º8çš„8ä½byteæ•°ç»„è½¬æ¢ä¸º64ä½long. * \u0026lt;/pre\u0026gt; * * 0xffå¯¹åº”16è¿›åˆ¶,fä»£è¡¨1111,0xffåˆšå¥½æ˜¯8ä½ byte[] * arr,byte[i]\u0026amp;0xffåˆšå¥½æ»¡è¶³ä¸€ä½byteè®¡ç®—,ä¸ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±. å¦‚æœæ˜¯intè®¡ç®—. int[] arr,arr[i]\u0026amp;0xffff * * @param arr * @return */ public static long byte8ToLong(byte[] arr) { if (arr == null || arr.length != 8) { throw new IllegalArgumentException(\u0026quot;byteæ•°ç»„å¿…é¡»ä¸ä¸ºç©º,å¹¶ä¸”æ˜¯8ä½!\u0026quot;); } return (long) (((long) (arr[0] \u0026amp; 0xff) \u0026lt;\u0026lt; 56) | ((long) (arr[1] \u0026amp; 0xff) \u0026lt;\u0026lt; 48) | ((long) (arr[2] \u0026amp; 0xff) \u0026lt;\u0026lt; 40) | ((long) (arr[3] \u0026amp; 0xff) \u0026lt;\u0026lt; 32) | ((long) (arr[4] \u0026amp; 0xff) \u0026lt;\u0026lt; 24) | ((long) (arr[5] \u0026amp; 0xff) \u0026lt;\u0026lt; 16) | ((long) (arr[6] \u0026amp; 0xff) \u0026lt;\u0026lt; 8) | ((long) (arr[7] \u0026amp; 0xff))); } /** * å°†ä¸€ä¸ªlongæ•°å­—è½¬æ¢ä¸º8ä¸ªbyteæ•°ç»„ç»„æˆçš„æ•°ç»„. */ public static byte[] longToByte8(long sum) { byte[] arr = new byte[8]; arr[0] = (byte) (sum \u0026gt;\u0026gt; 56); arr[1] = (byte) (sum \u0026gt;\u0026gt; 48); arr[2] = (byte) (sum \u0026gt;\u0026gt; 40); arr[3] = (byte) (sum \u0026gt;\u0026gt; 32); arr[4] = (byte) (sum \u0026gt;\u0026gt; 24); arr[5] = (byte) (sum \u0026gt;\u0026gt; 16); arr[6] = (byte) (sum \u0026gt;\u0026gt; 8); arr[7] = (byte) (sum \u0026amp; 0xff); return arr; } /** * * \u0026lt;pre\u0026gt; * å°†intè½¬æ¢ä¸º32ä½byte. * å®é™…ä¸Šæ¯ä¸ª8ä½byteåªå­˜å‚¨äº†ä¸€ä¸ª0æˆ–1çš„æ•°å­— * æ¯”è¾ƒæµªè´¹. * \u0026lt;/pre\u0026gt; * * @param num * @return */ public static byte[] intToByte32(int num) { byte[] arr = new byte[32]; for (int i = 31; i \u0026gt;= 0; i--) { // \u0026amp;1 ä¹Ÿå¯ä»¥æ”¹ä¸ºnum\u0026amp;0x01,è¡¨ç¤ºå–æœ€åœ°ä½æ•°å­—. arr[i] = (byte) (num \u0026amp; 1); // å³ç§»ä¸€ä½. num \u0026gt;\u0026gt;= 1; } return arr; } /** * * \u0026lt;pre\u0026gt; * å°†é•¿åº¦ä¸º32çš„byteæ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªintç±»å‹å€¼. * æ¯ä¸€ä¸ª8ä½byteéƒ½åªå­˜å‚¨äº†0æˆ–1çš„æ•°å­—. * \u0026lt;/pre\u0026gt; * * @param arr * @return */ public static int byte32ToInt(byte[] arr) { if (arr == null || arr.length != 32) { throw new IllegalArgumentException(\u0026quot;byteæ•°ç»„å¿…é¡»ä¸ä¸ºç©º,å¹¶ä¸”é•¿åº¦æ˜¯32!\u0026quot;); } int sum = 0; for (int i = 0; i \u0026lt; 32; ++i) { sum |= (arr[i] \u0026lt;\u0026lt; (31 - i)); } return sum; } /** * * \u0026lt;pre\u0026gt; * å°†é•¿åº¦ä¸º64çš„byteæ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªlongç±»å‹å€¼. * æ¯ä¸€ä¸ª8ä½byteéƒ½åªå­˜å‚¨äº†0æˆ–1çš„æ•°å­—. * \u0026lt;/pre\u0026gt; * * @param arr * @return */ public static long byte64ToLong(byte[] arr) { if (arr == null || arr.length != 64) { throw new IllegalArgumentException(\u0026quot;byteæ•°ç»„å¿…é¡»ä¸ä¸ºç©º,å¹¶ä¸”é•¿åº¦æ˜¯64!\u0026quot;); } long sum = 0L; for (int i = 0; i \u0026lt; 64; ++i) { sum |= ((long) arr[i] \u0026lt;\u0026lt; (63 - i)); } return sum; } /** * * \u0026lt;pre\u0026gt; * å°†ä¸€ä¸ªlongå€¼è½¬æ¢ä¸ºé•¿åº¦ä¸º64çš„8ä½byteæ•°ç»„. * æ¯ä¸€ä¸ª8ä½byteéƒ½åªå­˜å‚¨äº†0æˆ–1çš„æ•°å­—. * \u0026lt;/pre\u0026gt; * * @param sum * @return */ public static byte[] longToByte64(long sum) { byte[] arr = new byte[64]; for (int i = 63; i \u0026gt;= 0; i--) { arr[i] = (byte) (sum \u0026amp; 1); sum \u0026gt;\u0026gt;= 1; } return arr; } public static void showMaxValAndminVal() { // 127 System.out.println(\u0026quot;Byte.Max_Value:\u0026quot;+Byte.MAX_VALUE); // -128 System.out.println(\u0026quot;Byte.MIN_VALUE:\u0026quot;+Byte.MIN_VALUE); // 32767 System.out.println(\u0026quot;Short.MAX_VALUE:\u0026quot;+Short.MAX_VALUE); // -32768 System.out.println(\u0026quot;Short.MIN_VALUE:\u0026quot;+Short.MIN_VALUE); // 65535 2çš„16æ¬¡æ–¹-1 System.out.println(\u0026quot;(int) Character.MAX_VALUE:\u0026quot;+(int) Character.MAX_VALUE); // 0 System.out.println(\u0026quot;(int) Character.MIN_VALUE:\u0026quot;+(int) Character.MIN_VALUE); // 2147483647 System.out.println(\u0026quot;Integer.MAX_VALUE:\u0026quot;+Integer.MAX_VALUE); // -2147483648 System.out.println(\u0026quot;Integer.MIN_VALUE:\u0026quot;+Integer.MIN_VALUE); // ç§‘å­¦è®¡æ•°æ³•. // 3.4028235E38 System.out.println(\u0026quot;Float.MAX_VALUE:\u0026quot;+Float.MAX_VALUE); // 1.4E-45 System.out.println(\u0026quot;Float.MIN_VALUE:\u0026quot;+Float.MIN_VALUE); // 9223372036854775807 System.out.println(\u0026quot;Long.MAX_VALUE:\u0026quot;+Long.MAX_VALUE); // -9223372036854775808 System.out.println(\u0026quot;Long.MIN_VALUE:\u0026quot;+Long.MIN_VALUE); // ç§‘å­¦è®¡æ•°æ³•. // 1.7976931348623157E308 System.out.println(\u0026quot;Double.MAX_VALUE:\u0026quot;+Double.MAX_VALUE); // 4.9E-324 System.out.println(\u0026quot;Double.MIN_VALUE:\u0026quot;+Double.MIN_VALUE); } public static void transByte() { char c = 'z'; byte[] charToByte2Arr = ByteUtils.charToByte2(c); short s = Short.MAX_VALUE; // System.out.println(\u0026quot;Short.MAX_VALUE:\u0026quot; + s); byte[] shortToByte2Arr = ByteUtils.shortToByte2(s); byte[] shortToByte16 = ByteUtils.shortToByte16(s); System.out.println(Arrays.toString(shortToByte16)); System.out.println(ByteUtils.byte16ToShort(shortToByte16)); int i = Integer.MAX_VALUE; // System.out.println(\u0026quot;Integer.MAX_VALUE:\u0026quot; + i); byte[] intToByte4Arr = ByteUtils.intToByte4(i); byte[] intToByte32Arr = ByteUtils.intToByte32(i); System.out.println(Arrays.toString(intToByte32Arr)); System.out.println(ByteUtils.byte32ToInt(intToByte32Arr)); long j = Long.MAX_VALUE; // System.out.println(\u0026quot;Long.MAX_VALUE:\u0026quot; + j); byte[] longToByte8Arr = ByteUtils.longToByte8(j); byte[] longToByte64Arr = ByteUtils.longToByte64(j); System.out.println(Arrays.toString(longToByte64Arr)); System.out.println(ByteUtils.byte64ToLong(longToByte64Arr)); double d = 2.34; byte[] doubleToByte8Arr = ByteUtils.doubleToByte8(d); float f = 1.2f; byte[] floatToByte4Arr = ByteUtils.floatToByte4(f); } public static void main(String[] args) { // TODO Auto-generated method stub // showMaxValAndminVal(); transByte(); } }  è¡¥å……^: æŒ‰ä½å¼‚æˆ–ã€‚æ¯”å¦‚äºŒè¿›åˆ¶ 1001 ^ 1100 = 0101 0^0=0ï¼Œ1^1=0 ï¼Œ1^0 = 1ï¼Œ0^1=1 å¤åˆ¶ä»£ç \n3.ç†è§£é‡æ–°è°ƒæ•´å¤§å°\nç¬¬ä¸€éƒ¨åˆ†ï¼šç†è§£é‡æ–°è°ƒæ•´å¤§\n/** * Implements Map.putAll and Map constructor * * @param m the map * @param evict false when initially constructing this map, else * true (relayed to method afterNodeInsertion). */ final void putMapEntries(Map\u0026lt;? extends K, ? extends V\u0026gt; m, boolean evict) { int s = m.size(); if (s \u0026gt; 0) { if (table == null) { // pre-size float ft = ((float)s / loadFactor) + 1.0F; int t = ((ft \u0026lt; (float)MAXIMUM_CAPACITY) ? (int)ft : MAXIMUM_CAPACITY); if (t \u0026gt; threshold) threshold = tableSizeFor(t); } else if (s \u0026gt; threshold) resize(); for (Map.Entry\u0026lt;? extends K, ? extends V\u0026gt; e : m.entrySet()) { K key = e.getKey(); V value = e.getValue(); putVal(hash(key), key, value, false, evict); } } } public HashMap(int initialCapacity, float loadFactor) { if (initialCapacity \u0026lt; 0) throw new IllegalArgumentException(\u0026quot;Illegal initial capacity: \u0026quot; + initialCapacity); if (initialCapacity \u0026gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; if (loadFactor \u0026lt;= 0 || Float.isNaN(loadFactor)) throw new IllegalArgumentException(\u0026quot;Illegal load factor: \u0026quot; + loadFactor); this.loadFactor = loadFactor; this.threshold = tableSizeFor(initialCapacity); /** * Returns a power of two size for the given target capacity. ç”¨äºç†è§£2çš„é˜¶ä¹˜å¤§å°çš„å®ç°ã€‚åˆ«äººä¸€ç›´å¼ºè°ƒçš„2çš„é˜¶ä¹˜çš„æ‰©å®¹ */ static final int tableSizeFor(int cap) { int n = cap - 1; n |= n \u0026gt;\u0026gt;\u0026gt; 1; // n |= n \u0026gt;\u0026gt;\u0026gt; 2; n |= n \u0026gt;\u0026gt;\u0026gt; 4; n |= n \u0026gt;\u0026gt;\u0026gt; 8; n |= n \u0026gt;\u0026gt;\u0026gt; 16; return (n \u0026lt; 0) ? 1 : (n \u0026gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1; }  4.ç†è§£æ·»åŠ \n/** * Implements Map.putAll and Map constructor * * @param m the map * @param evict false when initially constructing this map, else * true (relayed to method afterNodeInsertion). */ final void putMapEntries(Map\u0026lt;? extends K, ? extends V\u0026gt; m, boolean evict) { int s = m.size(); if (s \u0026gt; 0) { if (table == null) { // pre-size float ft = ((float)s / loadFactor) + 1.0F; int t = ((ft \u0026lt; (float)MAXIMUM_CAPACITY) ? (int)ft : MAXIMUM_CAPACITY); if (t \u0026gt; threshold) threshold = tableSizeFor(t); } else if (s \u0026gt; threshold) resize(); for (Map.Entry\u0026lt;? extends K, ? extends V\u0026gt; e : m.entrySet()) { K key = e.getKey(); V value = e.getValue(); putVal(hash(key), key, value, false, evict); } } } final Node\u0026lt;K,V\u0026gt;[] resize() { //åœ¨åˆ›å»ºæ–°è¡¨ä¹‹å‰ ï¼Œå…ˆä¿å­˜æ—§è¡¨ Node\u0026lt;K,V\u0026gt;[] oldTab = table; //ä¿å­˜æ—§è¡¨çš„é•¿åº¦ int oldCap = (oldTab == null) ? 0 : oldTab.length; //ä¿å­˜ ä¸Šé™å€¼ int oldThr = threshold; int newCap, newThr = 0; if (oldCap \u0026gt; 0) { if (oldCap \u0026gt;= MAXIMUM_CAPACITY) { threshold = Integer.MAX_VALUE; return oldTab; } //åŠ å€äº†ï¼ï¼ï¼ï¼ï¼ï¼ else if ((newCap = oldCap \u0026lt;\u0026lt; 1) \u0026lt; MAXIMUM_CAPACITY \u0026amp;\u0026amp; oldCap \u0026gt;= DEFAULT_INITIAL_CAPACITY) newThr = oldThr \u0026lt;\u0026lt; 1; // double threshold } else if (oldThr \u0026gt; 0) // initial capacity was placed in threshold newCap = oldThr; else { // zero initial threshold signifies using defaults newCap = DEFAULT_INITIAL_CAPACITY; newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY); } if (newThr == 0) { float ft = (float)newCap * loadFactor; newThr = (newCap \u0026lt; MAXIMUM_CAPACITY \u0026amp;\u0026amp; ft \u0026lt; (float)MAXIMUM_CAPACITY ? (int)ft : Integer.MAX_VALUE); } threshold = newThr; @SuppressWarnings({\u0026quot;rawtypes\u0026quot;,\u0026quot;unchecked\u0026quot;}) //æ–°æ ‡çš„é•¿åº¦ newTabä¸ºnewCap,newCapé»˜è®¤ä¸ºæœ€å¤§çš„Capacity 16 Node\u0026lt;K,V\u0026gt;[] newTab = (Node\u0026lt;K,V\u0026gt;[])new Node[newCap]; table = newTab; if (oldTab != null) { for (int j = 0; j \u0026lt; oldCap; ++j) { Node\u0026lt;K,V\u0026gt; e; if ((e = oldTab[j]) != null) { oldTab[j] = null; //åˆ†ä¸ºä¸¤ç§æƒ…å†µè¿›è¡Œæ‰©å…… if (e.next == null) //e.hash æ˜¯Nodeç±»çš„finalå±æ€§ newTab[e.hash \u0026amp; (newCap - 1)] = e; else if (e instanceof TreeNode) ((TreeNode\u0026lt;K,V\u0026gt;)e).split(this, newTab, j, oldCap); else { // preserve order Node\u0026lt;K,V\u0026gt; loHead = null, loTail = null; Node\u0026lt;K,V\u0026gt; hiHead = null, hiTail = null; Node\u0026lt;K,V\u0026gt; next; do { next = e.next; // e.hash \u0026amp; oldCap çš„ä½œç”¨æ˜¯ è‹¥\u0026lt;oldCap åˆ™èŒƒå›´e.hash if ((e.hash \u0026amp; oldCap) == 0) { if (loTail == null) loHead = e; else loTail.next = e; loTail = e; } else { if (hiTail == null) hiHead = e; else hiTail.next = e; hiTail = e; } } while ((e = next) != null); if (loTail != null) { loTail.next = null; newTab[j] = loHead; } if (hiTail != null) { hiTail.next = null; newTab[j + oldCap] = hiHead; } } } } } return newTab; }  5.ç†è§£è¯´æ˜ï¼š\n/** * Initializes or doubles table size. If null, allocates in * accord with initial capacity target held in field threshold. * Otherwise, because we are using power-of-two expansion, the * elements from each bin must either stay at same index, or move * with a power of two offset in the new table. * åˆå§‹åŒ–æˆ–è€…ä½¿è¡¨æ ¼å¤§å°åŠ å€ã€‚å¦‚æœä¸ºnullï¼Œåˆ†é…å’Œåˆå§‹å®¹é‡ç›®æ ‡ï¼ˆæ ¹æ®thresholdå­—æ®µå€¼ï¼‰ å¦å¤–åœ°ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨2çš„é˜¶ä¹˜çš„æ‹“å±•ï¼Œæ¯ä¸ªå—çš„å…ƒç´ åº”è¯¥æ˜¯å¤„äºç›¸åŒçš„æŒ‡æ•°ï¼Œæˆ–è€…åœ¨æ–°è¡¨ä¸­ç§»åŠ¨2çš„é˜¶ä¹˜\u0026lt;/font\u0026gt; å¤åˆ¶ä»£ç  \u0026lt;font size=\u0026quot;3\u0026quot;\u0026gt;æ²¡é”™æˆ‘ä¾ç„¶ä»¥putMapEntriesä½œä¸ºè¯é¢˜çš„å¼•å‘ç‚¹ã€‚ ä¸¤ä¸ªå‚æ•°ï¼š static final int MAXIMUM_CAPACITY = 1 \u0026lt;\u0026lt; 30;//1Gçš„å¤§å° 2^30æ¬¡æ–¹ /** * The load factor used when none specified in constructor. */ static final float DEFAULT_LOAD_FACTOR = 0.75f; static final int DEFAULT_INITIAL_CAPACITY = 1 \u0026lt;\u0026lt; 4; // aka 16 * sizeï¼šè¯¥å˜é‡ä¿å­˜äº†è¯¥ HashMap ä¸­æ‰€åŒ…å«çš„ key-value å¯¹çš„æ•°é‡ã€‚ * thresholdï¼šè¯¥å˜é‡åŒ…å«äº† HashMap èƒ½å®¹çº³çš„ key-value å¯¹çš„æé™ï¼Œå®ƒçš„å€¼ç­‰äº HashMap çš„å®¹é‡ä¹˜ä»¥è´Ÿè½½å› å­ï¼ˆload factorï¼‰ å½“ size++ \u0026gt;= threshold æ—¶ï¼ŒHashMap ä¼šè‡ªåŠ¨è°ƒç”¨ resize æ–¹æ³•æ‰©å…… HashMap çš„å®¹é‡ã€‚æ¯æ‰©å……ä¸€æ¬¡ï¼ŒHashMap çš„å®¹é‡å°±å¢å¤§ä¸€å€  6.HashMapå’ŒHashSetçš„åŒºåˆ« Hashsetæ˜¯ç»§æ‰¿listï¼Œå…·æœ‰iteratorç‰¹æ€§ HashMapç»§æ‰¿è‡ªMapï¼Œä¸å…·æœ‰iteratorç‰¹æ€§ ä¸¤è€…çš„å…±åŒç‰¹ç‚¹æ˜¯éƒ½æ˜¯linkedæ•°ç»„ï¼ˆæ•°ç»„çš„bucketå·éƒ½æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼‰\n7.ç†è§£Hashç®—æ³• å…¶å®å°±æ˜¯hashè°ƒç”¨è‡ªå®šä¹‰ç±»çš„hashcodeæ–¹æ³•è€Œå·²ï¼‰ä»¥åŠcontains keyçš„è¿‡ç¨‹ã€‚åœ¨HashSetæˆ–è€…HashMapä¸­éƒ½æœ‰getæ–¹æ³•ï¼Œgetæ–¹æ³•ä¸­éƒ½æœ‰hashçš„å½±å­ï¼Œå½“ç„¶åœ¨containsKeyä¸­ä¹Ÿæ˜¯åŒ…å«ç€hash()çš„æ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨æ‰å¯ä»¥æ‰¾åˆ°bucket(ä¿—è¯­ï¼šå­˜å‚¨æ¡¶ï¼Œç”¨äºè£…ä¸€æ¡é“¾è¡¨ï¼Œå¯ç”¨äºå­˜å‚¨çš„æ¡¶çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œä¹Ÿå«åšcapacityå®¹é‡ï¼Œä¸€èˆ¬å¯¹åº”ç€ä¸€ä¸ªè´Ÿè½½å› å­ç®—æ³•ï¼Œå½“è¶…è¿‡æœ€å¤§å®¹é‡ä¹˜ä¸Šè´Ÿè½½å› å­ï¼Œå°±éœ€è¦è¿›è¡Œrehashçš„è¿‡ç¨‹) å¤åˆ¶ä»£ç  TreeMap: æœ¬è´¨ï¼š ä¼˜ç‚¹ï¼š ç¼ºç‚¹ï¼š LinkedHashMap: æœ¬è´¨ï¼š\nä¼˜ç‚¹ï¼š ç¼ºç‚¹ï¼š Iterator: æ›¿æ¢æ‰Enumeration,å…ˆå‰çš„Enumerationç±»çš„æ–¹æ³•åçš„é•¿åº¦è¾ƒé•¿ï¼Œä¸æ–¹ä¾¿è®°å¿†ï¼Œæ·˜æ±°ä¹‹ã€‚ æ³›å‹ æ³›å‹çš„æœ¬è´¨æ˜¯å‚æ•°åŒ–ç±»å‹ã€‚å½“æˆ‘ä»¬å†è¿›è¡Œæ³›å‹å®šä¹‰çš„æ—¶å€™å¯ä»¥ç”¨T K V Eï¼Œä½†æ˜¯å½“æˆ‘ä»¬åœ¨ä½¿ç”¨æ³›å‹æ¥å£çš„æ—¶å€™ å¿…é¡»ç»™æ³›å‹é™„ä¸Šä¸€ä¸ªå€¼ï¼Œå°±å¥½åƒç»™æ–¹æ³•é™„ä¸Šå®å‚ Javaçš„æ³›å‹å®é™…ä¸Šä»ç¼–è¯‘çš„è§’åº¦æ¥è¯´ä»…ä»…æ˜¯ä¸€ä¸ªç±»å‹æ“¦é™¤ public static void doTest(List\u0026lt;?extends Parent\u0026gt; list) //åŒ…å«Parendä»¥åŠæ‰€æœ‰ç»§æ‰¿è‡ªParentçš„å­ç±» public static void doTest(List\u0026lt;?super Parent\u0026gt; list) //åŒ…å«Parendä»¥åŠæ‰€æœ‰Parentçš„çˆ¶ç±» æ³›å‹çš„å…¼å®¹ï¼š\n //æ³›å‹çš„å‘åå…¼å®¹ //l1 åªæ˜¯å›å»æ‰¾Listçš„æ–¹æ³• List l1 = new ArrayList\u0026lt;String\u0026gt;(); l1.add(\u0026quot;abc\u0026quot;); l1.add(3);  æ³›å‹çš„ä¸åå˜ï¼š //æ³›å‹çš„ä¸åå˜ // Listl3 = new ArrayList(); //æŠ¥é”™\nArrays:Arraysä¸­ asList ä¸èƒ½ä½¿ç”¨add ï¼Œå› ä¸ºasListæ ¹æœ¬å°±æ²¡æœ‰æ”¹å˜æ•°ç»„çš„æœ¬è´¨ï¼ï¼åªä¸è¿‡å¯ä»¥ä½¿ç”¨éå†çš„æ–¹æ³•å¸¸ç”¨æ–¹æ³•ï¼š sort ç»™æ•°ç»„çš„å…ƒç´ æ’åº binarySearch äºŒåˆ†æŸ¥æ‰¾æ³•æŸ¥æ‰¾å…ƒç´  copyOf æ•°ç»„å¤åˆ¶ equals åˆ¤æ–­ä¸¤ä¸ªæ•°ç»„çš„å…ƒç´ æ˜¯å¦ç›¸ç­‰ fill å¡«å……æ•°ç»„ hashCode è®¡ç®—æ•°ç»„çš„å…ƒç´ çš„å“ˆå¸Œå€¼ toString è¿”å›æ¯ä¸ªæ•°ç»„å…ƒç´ ç»„æˆçš„å­—ç¬¦ä¸² asList æŠŠæ•°ç»„è½¬åŒ–ä¸ºç»“æ„ä¸å¯æ”¹å˜,ä½†å¯ä»¥æŸ¥è¯¢ä¿®æ”¹çš„é›†åˆ\nCollections:\npackage com.collections.test; import java.util.ArrayList; import java.util.Collections; /** * * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ19æ—¥ä¸‹åˆ1:25:44 * @version com.collections.testTestCollections1 V1.0 * åŠŸèƒ½ï¼š æµ‹è¯• éª°å­ çš„ä¹±åº éšæœºæ’åº æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestCollections1 { public static void main(String[] args) { ArrayList\u0026lt;Integer\u0026gt; arl = new ArrayList\u0026lt;Integer\u0026gt;(); arl.add(4); arl.add(9); arl.add(2); arl.add(10); arl.add(3); Collections.shuffle(arl); for(Integer temp:arl) { System.out.println(temp); } } }  java\nSort: åªå¯¹listæ’åº treesetå†…éƒ¨å°±æœ‰æ’åº hashmapæ ¹æœ¬å°±ä¸éœ€è¦ binarySearch äºŒåˆ†æŸ¥æ‰¾ å¿…é¡»æ˜¯list è€Œä¸”è¯¥é›†åˆå¿…é¡»æ’å¥½åº fill åªèƒ½å¯¹listé›†åˆæœ‰æ•ˆ shuffle æ´—ç‰Œ æ‰“ä¹±é›†åˆçš„é¡ºåº\nåªæœ‰æ’å®Œåºæ‰èƒ½è¿›è¡ŒbinarySearch\nCollections.sort(pileOfApple); for(String temp:pileOfApple) { System.out.println(temp); } //å·²æ’å¥½åº æ‰å¯ä»¥è¿™æ ·åš ! å¦åˆ™ä¸å¯ä»¥è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ Arraysç±»ä¼¼çš„ç”¨æ³• System.out.println(Collections.binarySearch(pileOfApple, \u0026quot;gd\u0026quot;));\u0026lt;/font\u0026gt;  Collectionså¸¸ç”¨æ–¹æ³•ï¼š sort å¯¹Listé›†åˆè¿›è¡Œæ’åº binarySearch æ–¹æ³•,ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•æŸ¥æ‰¾å…ƒç´ ,è¦æ±‚å¿…é¡»æ˜¯Listé›†åˆ,è€Œä¸”å¿…é¡»å·²ç»æ’å¥½åº fill æ–¹æ³•,ä½¿ç”¨æŒ‡å®šå…ƒç´ å¡«å……Listé›†åˆ replaceAll æ–¹æ³•,ä½¿ç”¨æŒ‡å®šå…ƒç´ æ›¿æ¢æ‰€æœ‰çš„å¦ä¸€ä¸ªå…ƒç´ ,åªå¯¹Listæœ‰æ•ˆ max æ–¹æ³•,è¿”å›ä¸€ä¸ªé›†åˆä¸­æœ€å¤§çš„å…ƒç´  min shuffle æ´—ç‰Œ,æ‰“ä¹±é›†åˆå…ƒç´ çš„é¡ºåº synchronizedList è¿”å›æŒ‡å®šé›†åˆçš„çº¿ç¨‹å®‰å…¨çš„åŒ…è£…é›†åˆ unmodifiableList è¿”å›æŒ‡å®šé›†åˆçš„ä¸å¯ä¿®æ”¹çš„åŒ…è£…é›†åˆ\nå¤šé‡æ•°æ®ç»“æ„çš„å®ç°ï¼š\npackage com.collections.test; import java.util.HashMap; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ3æ—¥ä¸‹åˆ6:54:32 * @version com.collections.testTestMapMap V1.0 */ import java.util.*; public class TestMapMap { /** * @param args */ public static void main(String[] args) { // TODO Auto-generated method stub //Map\u0026lt;String,Map\u0026lt;String,Map\u0026lt;Integer,Double\u0026gt;\u0026gt;\u0026gt; stuTotal = new HashMap\u0026lt;String,Map\u0026lt;String,Map\u0026lt;Integer,Double\u0026gt;\u0026gt;\u0026gt;(); Map\u0026lt;String, Integer\u0026gt; innerMap = new HashMap\u0026lt;String, Integer\u0026gt;(); innerMap.put(\u0026quot;innerKey\u0026quot;, 2014); Map\u0026lt;String, Map\u0026lt;String, Integer\u0026gt;\u0026gt; map = new HashMap\u0026lt;String, Map\u0026lt;String, Integer\u0026gt;\u0026gt;(); map.put(\u0026quot;outerKey\u0026quot;, innerMap); Map\u0026lt;String, Integer\u0026gt; targetMap = map.get(\u0026quot;outerKey\u0026quot;); if(targetMap == innerMap){ System.out.println(\u0026quot;You got the inner Map, and it is saved in targetMap!!!\u0026quot;); } //åŸæ¥åµŒå¥—é›†åˆæ•°æ®ç»“æ„æ˜¯å¯ä»¥å®ç°çš„ Map\u0026lt;String,Map\u0026lt;String,Map\u0026lt;Integer,Double\u0026gt;\u0026gt;\u0026gt; outterMap = new HashMap\u0026lt;String, Map\u0026lt;String,Map\u0026lt;Integer,Double\u0026gt;\u0026gt;\u0026gt;(); //== } }  ToStringStringå‡½æ•°çš„appendå¯é‡‡ç”¨é“¾å¼çš„appendæœ¬è´¨æ˜¯ï¼š\n\u0026lt;font size=\u0026quot;3\u0026quot;\u0026gt; @Override public StringBuilder append(boolean b) { super.append(b); return this; } @Override public StringBuilder append(char c) { super.append(c); return this; } ã€‚ã€‚ã€‚ã€‚ã€‚\u0026lt;/font\u0026gt;  java Stringç±»å‹çš„toStringæ–¹æ³•ï¼Œä¼šå»è°ƒç”¨valueOfå‡½æ•°ï¼Œå…³é”®çš„è°ƒç ”è¿‡ç¨‹: å…¶å®å…³é”®æ˜¯å¾—çœ‹printlnæ¥å—çš„å¯¹è±¡ï¼Œä»¥å‰ä¸€ç›´è®¤ä¸ºæ˜¯å¯¹è±¡ä»¬çš„toStringæ–¹æ³•ï¼Œæ²¡é”™çš„ç¡®æ˜¯ä»–ç›´æ¥å¼•èµ·ï¼Œä½†æ˜¯å…¶å®æ˜¯å› ä¸ºprintlnçš„é‡è½½æ–¹æ³•æ¥é™åˆ¶äº†å¯¹è±¡å¿…é¡»å»é‡å†™toStringæ–¹æ³•. å› ä¸ºå†å¯¹åº”Stringçš„printlné‡è½½æ–¹æ³•ä¸­ï¼ŒåŒ…å«ç€String.valueOfæ‰€ä»¥éœ€è¦è¿›ä¸€æ­¥è°ƒç”¨Stringç±»çš„valueOfå‡½æ•°ï¼Œè€ŒvalueOfå‡½æ•°åˆ™æ˜¯è°ƒç”¨äº†toStringæ–¹æ³•ï¼Œæ‰€ä»¥æœ€åŸºæœ¬çš„å‡½æ•°toStringã€‚ ä¸åŒçš„å‚æ•°ç±»å‹ä¼šå»åŠ è½½ä¸åŒçš„printlnçš„æ–¹æ³•ï¼\n","date":1431327522,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327522,"objectID":"d4208012bb40f493509c57b44b8c1cc2","permalink":"/blog/2015/05/11/hashmapben-zhi-march18/","publishdate":"2015-05-11T14:58:42+08:00","relpermalink":"/blog/2015/05/11/hashmapben-zhi-march18/","section":"archives","summary":"","tags":null,"title":"hashmapæœ¬è´¨March18","type":"archives"},{"authors":null,"categories":["HTML"],"content":"1ï¼šHTMLå­¦ä¹ å¤§çº²ï¼š\n \u0026lt;!--Headæ ‡ç­¾ ä¸»è¦åŒ…å« \u0026lt;Titlt Meta Styleæ ‡ç­¾ ç”¨æ¥å……å½“ç½‘é¡µçš„ä¿®é¥°éƒ¨åˆ†--\u0026gt; \u0026lt;!--ç½‘é¡µæ ‡é¢˜Title: æŒ‡å®šæµè§ˆå™¨æ ‡é¢˜æ æ˜¾ç¤ºçš„å†…å®¹ --\u0026gt; \u0026lt;!--Base é’ˆå¯¹è¿æ¥çš„å…¨å±€è®¾ç½®--\u0026gt; \u0026lt;!--ç½‘é¡µå±æ€§Metaçš„è®¾ç½® ï¼š å¯æä¾›æœ‰å…³é¡µé¢çš„åŸä¿¡æ¯--\u0026gt; \u0026lt;!--Linkæä¾›è¿æ¥æ–‡ä»¶çš„csså’Œjsæ–‡ä»¶çš„å¯¼å…¥--\u0026gt; \u0026lt;!--å®šä¹‰æ ·å¼--\u0026gt;  \n \u0026lt;!--Div ç›’å­æ ‡ç­¾ ç”¨æ¥å­˜æ ‡ç­¾--\u0026gt; \u0026lt;!--H1æ ‡ç­¾ æ ·å¼æ ‡é¢˜1--\u0026gt; \u0026lt;!--Form :action æŒ‡å®šçš„æœåŠ¡å™¨åœ°å€å¤„ç†è¡¨å•--\u0026gt; \u0026lt;!--1ï¼šæ®µè½æ ‡ç­¾ P--\u0026gt; \u0026lt;!--Spanæ ‡ç­¾ ä¸€ä¸ªå°æ§ä»¶ ä¸æ–­è¡Œ Pæ ‡ç­¾ä¼šæ–­è¡Œ--\u0026gt; \u0026lt;!--Inputæ ‡ç­¾ï¼ŒåŒ…å«å¤šç§è¡¨å•æ§ä»¶ï¼Œæ¯”å¦‚radio checkbox password text ç­‰10ç§--\u0026gt; \u0026lt;!--Ulæ— åºåˆ—è¡¨Unorder list--\u0026gt; \u0026lt;!--Li åˆ—è¡¨è¡Œ--\u0026gt; \u0026lt;!--Olæœ‰åºåˆ—è¡¨ OrderList--\u0026gt; \u0026lt;!--Li åˆ—è¡¨è¡Œ--\u0026gt; \u0026lt;!--Dlå®šä¹‰åˆ—è¡¨--\u0026gt; \u0026lt;!--Dtåˆ—è¡¨è¡Œ--\u0026gt; \u0026lt;!--3ï¼š å›¾åƒæ ‡ç­¾Img altå€¼ä¸èƒ½è¶…è¿‡1024ä¸ªå­—ç¬¦--\u0026gt; \u0026lt;!--4ï¼šè¡¨æ ¼æ ‡ç­¾Table--\u0026gt; \u0026lt;!--Caption è¡¨æ ¼æ ‡é¢˜--\u0026gt; \u0026lt;!--Theadè¡¨å¤´--\u0026gt; \u0026lt;!--Th--\u0026gt; \u0026lt;!--TBody è¡¨å†…å®¹--\u0026gt; \u0026lt;!--Trè¡Œæ•°æ®--\u0026gt; \u0026lt;!--Tdåˆ—æ ‡ç­¾--\u0026gt; \u0026lt;!--TFootè¡¨å°¾--\u0026gt; \u0026lt;!--5:è¶…é“¾æ¥Aå®éªŒ--\u0026gt; \u0026lt;!--6:IFrameæ¡†æ¶çš„æµ‹è¯•--\u0026gt; \u0026lt;!-- 7: Formè¡¨å•çš„æµ‹è¯•--\u0026gt;  å®éªŒé˜¶æ®µï¼š \u0026lt;!DOCTYPE html \u0026gt;    ç”µå­åç‰‡è‡ªåŠ¨ç»‘å®šç³»ç»Ÿ\n\u0026lt;!--ç½‘é¡µå±æ€§çš„è®¾ç½® ï¼š å¯æä¾›æœ‰å…³é¡µé¢çš„åŸä¿¡æ¯--\u0026gt; \u0026lt;!-- contentå±æ€§ å®šä¹‰ä¸http-equiv æˆ–nameå±ç›¸ç›¸å…³çš„å…ƒä¿¡æ¯ http-equivå±æ€§: æŠŠcontentå±æ€§å…³è”åˆ°HTTPå¤´éƒ¨ nameå±æ€§ï¼šæŠŠcontentå±æ€§å…³è”åˆ°ä¸€ä¸ªåç§° --\u0026gt; \u0026lt;!--base é’ˆå¯¹è¿æ¥çš„å…¨å±€è®¾ç½®--\u0026gt; \u0026lt;!-- target æŒ‡å®šè¿æ¥å…¨å±€æ‰“å¼€æ–¹å¼ href æŒ‡å®šå…¨å±€å‰ç¼€æ¯”å¦‚ www.baiud.com ä½†æ˜¯ä¸å¯èƒ½è¦æ±‚æ‰€æœ‰è¿æ¥ä»¥ www.baidu.comæ‰“å¼€ï¼ --\u0026gt;  \u0026lt;!-- é€šè¿‡name contentå¯¹ å¯¹åº” key-value é”®å€¼å¯¹ http-equav é’ˆå¯¹ä¸åŒçš„ç±»å‹ ç±»ä¼¼äºInputæ§ä»¶ çš„typeå­˜åœ¨10ç§ç±»å‹--\u0026gt;  \u0026lt;!--åšä¼˜åŒ–çš„æ—¶å€™å¯èƒ½éœ€è¦ç”¨åˆ°keywords ä¼˜åŒ–æœç´¢--\u0026gt;  \u0026lt;!-- content=3 è¡¨ç¤º3s ä¹‹ååˆ·æ–°å‡º 163.comç½‘é¡µ--\u0026gt; \u0026lt;!--- å¤ªçƒ¦äº† 3s åˆ·æ–° æ³¨é‡Šæ‰  \u0026ndash;\u0026gt;\n\u0026lt;!-- Link æ§ä»¶ relå±æ€§ ï¼šç›®æ ‡æ–‡æ¡£ä¸å½“å‰æ–‡æ¡£çš„å…³ç³» typeå±æ€§ ï¼š æ–‡æ¡£ç±»å‹ --\u0026gt; \u0026lt;!--è®¾background:url(b.jpg);ç½®èƒŒæ™¯é¢œè‰² å’Œæ–‡å­—å­—ä½“--\u0026gt; \u0026lt;!--å®šä¹‰æ ·å¼--\u0026gt;  body{font-family:\u0026ldquo;å¾®è½¯é›…é»‘\u0026rdquo;} .box{width:600px; margin:0 auto; padding-top:100px;} .box H1{text-align:center text-shadow:2px 5px 5px rgba(0,0,2,1);color:white; } .box p{background:#2c2c29;border-radius:10px;border:1px solid #222220; line-height:38px;margin-right:5px;float:left;width=600px;} .box span{float:left;display:block;text-align:right;background:#373733 ;width:70px;height:40px;color:#ffffff;border-right:1px solid #222220;} .input_box{width:167px;padding-left:10px;height:38px;border:0px;background: #2c2c29;float:left;color:#ffffff} .input_btn{width:500px;height:40px;margin-top:15px;line-height:40px; background:#009900;border:1px solid #0099900;border-radius:10px; cursor:pointer;} .input_btn:hover{background:#00CD00}\n\u0026lt;/Style\u0026gt;  \n   ç”µå­åç‰‡è‡ªåŠ¨ç»‘å®šç³»ç»Ÿ \n \u0026lt;!--1ï¼šæ®µè½æ ‡ç­¾ P--\u0026gt; \u0026lt;!-- Form :action æŒ‡å®šçš„æœåŠ¡å™¨åœ°å€å¤„ç†è¡¨å• method Formè¡¨å•æäº¤æ–¹å¼ é»˜è®¤get Post --\u0026gt; \u0026lt;!--\u0026lt;Form action=\u0026quot;www.163.com\u0026quot; method=\u0026quot;get\u0026quot;\u0026gt;--\u0026gt; \u0026lt;Form action=\u0026quot;http://www.163.com\u0026quot; method=\u0026quot;get\u0026quot;\u0026gt; \u0026lt;P\u0026gt; \u0026lt;!--Spanæ ‡ç­¾ ä¸€ä¸ªå°æ§ä»¶ ä¸æ–­è¡Œ Pæ ‡ç­¾ä¼šæ–­è¡Œ--\u0026gt; \u0026lt;!--Input--\u0026gt;  å§“åï¼š  å…¬å¸ï¼š   \u0026lt;/P\u0026gt; \u0026lt;P\u0026gt;  èŒåŠ¡ï¼š  æ‰‹æœºï¼š   \u0026lt;/P\u0026gt; \u0026lt;!-- Inputæ§ä»¶çš„typeå€¼å…±æœ‰10ä¸ªå€¼ type=\u0026quot;text\u0026quot; \u0026lt;-----æ–‡æœ¬æŒ‰é’® type=\u0026quot;submit\u0026quot; \u0026lt;-----æäº¤æŒ‰é’® type=\u0026quot;hidden\u0026quot; \u0026lt;----éšè—å­—æ®µ ç»™æœåŠ¡å™¨è¯»å–çš„ï¼Œå®¢æˆ·ç«¯ä¸ç°å®çš„ï¼Œéšè—ç…§æ ·æäº¤ï¼ä¹Ÿæœ‰name-value å¯¹ type=\u0026quot;radio\u0026quot; \u0026lt;-----å•é€‰æ¡† type=\u0026quot;password\u0026quot; \u0026lt;-----å¯†ç æ¡† type=\u0026quot;checkbox\u0026quot; \u0026lt;-----å¤é€‰æ¡† type=\u0026quot;reset\u0026quot; \u0026lt;-----é‡ç½®æŒ‰é’® type=\u0026quot;button\u0026quot; \u0026lt;-----æŒ‰é’® type=\u0026quot;file\u0026quot; \u0026lt;-----æ–‡ä»¶ä¸Šä¼  type=\u0026quot;image\u0026quot; \u0026lt;-----å›¾åƒ type=\u0026quot;text\u0026quot; type=\u0026quot;text\u0026quot; --\u0026gt;   \u0026lt;!--æ–°åŠ å…¥çš„éƒ¨åˆ†ï¼Œå¦å¤–ä¸€ç§ä½¿ç”¨radioæ§ä»¶--\u0026gt; \u0026lt;!-- æ³¨æ„ï¼š Inputçš„ name value å…¶å®å°±æ˜¯key=valueçš„ç»„åˆï¼ï¼hashmapçš„è¿‡ç¨‹ï¼ è§‚å¯Ÿå‘ç°æ‰€æœ‰çš„è¡¨å•æ§ä»¶éƒ½æ˜¯åŸºäºHashMapçš„è¿‡ç¨‹ ä¹Ÿå°±æ˜¯æ‰€æœ‰çš„Inputæ§ä»¶éƒ½æœ‰name valueçš„å±æ€§ï¼Œå……å½“è¡¨å•ä¿¡æ¯ï¼Œè¿™å¾ˆé‡è¦ --\u0026gt;  ç”·å¥³  \u0026lt;/Form\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;!--2ï¼šåˆ—è¡¨å®éªŒ--\u0026gt; \u0026lt;Div\u0026gt; \u0026lt;!--æ— åºåˆ—è¡¨--\u0026gt;   æµä½“ ç»“æ„ è€¦åˆ \n \u0026lt;!--æœ‰åºåˆ—è¡¨--\u0026gt;   Ansys Fluent ICEM \nå®šä½æ ‡è®°\n \u0026lt;!--å®šä¹‰åˆ—è¡¨--\u0026gt;   ç½‘æ ¼ ICEM Gambit æ±‚è§£å™¨ Fluent Numeca Abaqus \n\u0026lt;/Div\u0026gt; \u0026lt;!--3ï¼š å›¾åƒæ ‡ç­¾ altå€¼ä¸èƒ½è¶…è¿‡1024ä¸ªå­—ç¬¦--\u0026gt;   \n\u0026lt;!--4ï¼šè¡¨æ ¼æ ‡ç­¾--\u0026gt; \u0026lt;!-- Tableå±æ€§ï¼šcellpadding å•å…ƒæ ¼å†…å®¹ä¸è¾¹æ¡†çš„è·ç¦» cellspacing å•å…ƒæ ¼ä¸ç›¸é‚»å•å…ƒæ ¼ä¹‹é—´çš„è·ç¦» Tdå¸¸ç”¨å±æ€§ï¼š colspan:åˆå¹¶å•å…ƒæ ¼ rowspanï¼šåˆå¹¶åŒåˆ—å•å…ƒæ ¼ æ¯ä¸ªTableå¯ä»¥æœ‰ä¸€ä¸ªè¡¨å¤´Theadã€è¡¨å°¾TFootå’Œä¸€ä¸ªæˆ–å¤šä¸ªæ ‡é¢˜TBody TBodyçš„åˆ†è¡Œä¸‹è½½æ˜¯ä¸€ä¸ªç½‘é¡µä¼˜åŒ–çš„ä¸€ä¸ªæ–¹æ³• --\u0026gt;  \n \u0026lt;Table border=2px; width=300px; cellpadding=1px; cellspacing=1px;\u0026gt; \u0026lt;Caption\u0026gt;å…³äºè¡¨æ ¼çš„å®éªŒ\u0026lt;/Caption\u0026gt; \u0026lt;Thead\u0026gt; \u0026lt;Th\u0026gt;å§“å\u0026lt;/Th\u0026gt; \u0026lt;!--å¯¹è¡¨æ ¼çš„ç¬¬ä¸€è¡Œæˆ–è€…ç¬¬ä¸€åˆ—è¿›è¡Œæ ¼å¼åŒ– cç²—ä½“å‰§ä¸­æ˜¾ç¤º--\u0026gt; \u0026lt;Th\u0026gt;å¹´é¾„\u0026lt;/Th\u0026gt; \u0026lt;/Thead\u0026gt; \u0026lt;TBody\u0026gt; \u0026lt;Tr\u0026gt; \u0026lt;!--è¡Œæ ‡ç­¾--\u0026gt; \u0026lt;Td\u0026gt;å¼ ä¸‰\u0026lt;/Td\u0026gt;\u0026lt;Td\u0026gt;20\u0026lt;/Td\u0026gt; \u0026lt;!--å•å…ƒæ ¼æ ‡ç­¾--\u0026gt; \u0026lt;/Tr\u0026gt; \u0026lt;Tr\u0026gt; \u0026lt;!--è¡Œæ ‡ç­¾--\u0026gt; \u0026lt;Td\u0026gt;æå››\u0026lt;/Td\u0026gt;\u0026lt;Td\u0026gt;30\u0026lt;/Td\u0026gt; \u0026lt;!--å•å…ƒæ ¼æ ‡ç­¾--\u0026gt; \u0026lt;/Tr\u0026gt; \u0026lt;/TBody\u0026gt; \u0026lt;/Table\u0026gt; \u0026lt;/Div\u0026gt; \u0026lt;!--5:è¶…é“¾æ¥å®éªŒ--\u0026gt; \u0026lt;!-- _blank åœ¨ä¸€ä¸ªæ–°çš„ç½‘é¡µæ ‡ç­¾æ‰“å¼€é“¾æ¥ _parent åœ¨çˆ¶çº§çª—å£ä¸­æ‰“å¼€ _self åœ¨è‡ªèº«é¡µé¢ä¸­æ‰“å¼€é“¾æ¥ï¼ˆé»˜è®¤ï¼‰ _top åœ¨æ•´ä¸ªæµè§ˆå™¨çš„æœ€é¡¶ç«¯(å‰ç«¯)å¼€å§‹æ‰“å¼€é“¾æ¥ å®šä½æ ‡è®°+è¶…é“¾æ¥ \u0026lt;A name=\u0026quot;æ ‡è®°åå­—\u0026quot;\u0026gt; æ ‡è®°åœ¨æŸä¸€ä¸ªä½ç½®\u0026lt;/A\u0026gt; æ‰¾åˆ°ä»– \u0026lt;A href=\u0026quot;#æ ‡è®°åå­—\u0026quot;\u0026gt;è¿”å›æ ‡è®°ä½ç½®\u0026lt;/A\u0026gt; æ³¨æ„ï¼š 1 å®šä½æ ‡è®°è¦å’Œè¶…é“¾æ¥ç»“åˆä½¿ç”¨æ‰æœ‰æ•ˆ æ ‡è®°åå­—ç”¨#æ‰¾åˆ° 2 åœ¨ç½‘é¡µè¿‡é•¿æ‰æœ‰æ•ˆæœ --\u0026gt;   ç½‘æ˜“ .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. å»å¯»æ‰¾æ ‡è®° \n\u0026lt;!--6:IFrameæ¡†æ¶çš„æµ‹è¯•--\u0026gt; \u0026lt;!-- åœ¨ç½‘é¡µä¸ŠåµŒå…¥ä¸€ä¸ªæ¡†ï¼Œæ˜¾ç¤ºå¦ä¸€ä¸ªhtml,txtç­‰æ–‡ä»¶ä¿¡æ¯ --\u0026gt;   å¦‚æœä½ çœ‹åˆ°è¿™æ®µæ–‡å­—ï¼Œè¯´æ˜æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒIFrameæ ‡ç­¾  \n\u0026lt;!-- 7: Formè¡¨å•çš„æµ‹è¯•--\u0026gt; \u0026lt;!-- Formæ˜¯æœ€å¸¸ç”¨çš„æ§ä»¶ï¼Œä¸»è¦ç”¨äºé‡‡é›†å’Œæäº¤ç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯ å’ŒæœåŠ¡å™¨è¿›è¡Œäº¤äº’ --\u0026gt; \u0026lt;Div\u0026gt; \u0026lt;!--å…³äºInputæµ‹è¯•å·²åœ¨å‰é¢æåŠ--\u0026gt; \u0026lt;!--Select å…¶å®å°±æ˜¯Combobox--\u0026gt;  åŒ—äº¬ ç¦å»º å¹¿å· \n\u0026lt;!-- æ›´å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨CSSçš„height \u0026amp; widthæ›¿æ¢æ‰rows cols--\u0026gt;  \n\u0026lt;!--Radio type å’Œ Labelé…åˆä½¿ç”¨ --\u0026gt; \u0026lt;!--Labelæ ‡ç­¾åšäº†ä¸€ä¸ªå­—æ®µçš„åŒ…è£…ï¼Œè¿™æ ·ç”¨æˆ·ç‚¹å‡»å­—æ®µ ä¹Ÿå¯ä»¥é€‰æ‹©ï¼ï¼ï¼æ–°çš„çŸ¥è¯†ç‚¹å•Šï¼--\u0026gt;  Male Female \u0026lt;/Div\u0026gt; \u0026lt;!--è¿™ä¹ˆæœ‰è¶£ HTMLä¹Ÿæœ‰å—çº§å…ƒç´ çš„è¯´æ³•--\u0026gt; \u0026lt;!-- 1: å—çº§å…ƒç´  é€šå¸¸ä»¥æ–°è¡Œå¼€å§‹å’Œç»“æŸ æ¯”å¦‚ \u0026lt;H1\u0026gt; \u0026lt;P\u0026gt; \u0026lt;Ul\u0026gt; \u0026lt;Table\u0026gt; \u0026lt;Tr\u0026gt; \u0026lt;Div\u0026gt; 2ï¼šå†…è”å…ƒç´  é€šå¸¸ä¸ä»¥æ–°è¡Œå¼€å§‹ \u0026lt;Td\u0026gt; \u0026lt;B\u0026gt; \u0026lt;A\u0026gt; \u0026lt;Img\u0026gt; \u0026lt;Span\u0026gt; 3: Div and Span ä¸»è¦ç”¨äºæ–‡æ¡£çš„æ ·å¼å±æ€§çš„åŒºåŸŸè®¾ç½® --\u0026gt;  \n\n  \u0026lt;!--Frameç”¨äºåŠ è½½ç½‘é¡µæ–‡ä»¶--\u0026gt; \u0026lt;!-- frameå¸¸ç”¨å±æ€§ src=\u0026quot;*.html\u0026quot; æ¯ä¸ªframeæ¡†å¯¹åº”ä¸€ä¸ªç½‘é¡µæ¡£æ¡ˆ name=\u0026quot;top\u0026quot; è®¾ç½®è¿™ä¸ªçª—çš„åç§° scrolling=auto|yes|no noresize=\u0026quot;noresize\u0026quot; è¡¨ç¤ºæ¡†æ¡†ä¸å¯ä»¥æ‹–æ‹½ï¼ï¼ --\u0026gt; \u0026lt;!-- Frameset = Noframes+frame--\u0026gt;    å½“ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒFrameæ—¶å€™ä¼šæ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œä¸€èˆ¬å¾ˆå°‘ã€‚  \n\n \nFrame Nameçš„ä½¿ç”¨\n\u0026lt;Html\u0026gt; \u0026lt;Head\u0026gt; \u0026lt;Meta http-equiv=\u0026quot;Content-Type\u0026quot; content=\u0026quot;text/html; charset=utf-8\u0026quot;/\u0026gt; \u0026lt;Title\u0026gt; æˆ‘å–œæ¬¢çš„æ ·å¼ \u0026lt;/Title\u0026gt; \u0026lt;/Head\u0026gt; \u0026lt;Frameset rows=\u0026quot;12%,*\u0026quot; frameborder=\u0026quot;1\u0026quot; border=\u0026quot;1px\u0026quot; bordercolor=\u0026quot;#FF0000\u0026quot;\u0026gt; \u0026lt;Frame src=\u0026quot;top.html\u0026quot; scrolling=\u0026quot;no\u0026quot; noresize=\u0026quot;noresize\u0026quot;/\u0026gt; \u0026lt;FrameSet cols=\u0026quot;20%,*\u0026quot;\u0026gt; \u0026lt;!-- nameçš„ä½œç”¨æ˜¯è®©left.htmlçš„Aè¿æ¥çš„targetå±æ€§ å¯ä»¥é€‰æ‹©ä»¥nameåå­—æ‰“å¼€ï¼ï¼ è¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„çŸ¥è¯†ç‚¹ï¼Œå¦™--\u0026gt; \u0026lt;Frame src=\u0026quot;left.html\u0026quot; name=\u0026quot;left\u0026quot;/\u0026gt; \u0026lt;Frame src=\u0026quot;right.html\u0026quot; name=\u0026quot;right\u0026quot;/\u0026gt; \u0026lt;/Frameset\u0026gt;\u0026lt;Noframes\u0026gt;\u0026lt;/Noframes\u0026gt; \u0026lt;/Html\u0026gt; ","date":1431327522,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327522,"objectID":"5bff813586967686e51fc7bc89eb8f8d","permalink":"/blog/2015/05/11/html1-17jie-bi-ji-dai-ma-march22nd/","publishdate":"2015-05-11T14:58:42+08:00","relpermalink":"/blog/2015/05/11/html1-17jie-bi-ji-dai-ma-march22nd/","section":"archives","summary":"","tags":null,"title":"HTML1-17èŠ‚ç¬”è®°ä»£ç March22nd","type":"archives"},{"authors":null,"categories":["Mysql"],"content":"ç¬¬ä¸€éƒ¨åˆ† ç¬”è®°\n1ï¼šå…³äºäº‹åŠ¡åœ¨å‘½ä»¤çª—å£çš„ç»ƒä¹ ï¼š äº‹åŠ¡ å°±æ˜¯ä¸€è¿ä¸²å‘½ä»¤çš„é›†åˆï¼Œåªè¦è¿™éƒ¨å‘½ä»¤éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œæ‰èƒ½æ›´æ–°åˆ°æ•°æ®åº“ä¸­ï¼Œå¦åˆ™é€€å‡ºï¼ï¼å³ä½¿æœ‰ä¸€è¡Œæ¯”å¦‚ null.length()çš„å­˜åœ¨ç©ºæŒ‡é’ˆï¼Œåˆ™ä¸æˆåŠŸã€‚ ä¸€æ—¦æ‰§è¡Œå¤±è´¥åˆ™å›æ»šã€‚\nmysql\u0026gt; begin; Query OK, 0 rows affected (0.00 sec) mysql\u0026gt; update t_person set age=age+1 where Name='yezhao'; Query OK, 2 rows affected (0.35 sec) Rows matched: 2 Changed: 2 Warnings: 0 mysql\u0026gt; select * from t_person where Name='yezhao'; +----+--------+-----+--------+ | Id | Name | Age | Gender | +----+--------+-----+--------+ | 1 | yezhao | 25 | 1 | | 7 | yezhao | 26 | 1 | +----+--------+-----+--------+ 2 rows in set (0.02 sec)  ç„¶è€Œåœ¨navicatçš„æ˜¾ç¤ºç»“æœæ˜¯ä¹‹å‰çš„ä¿¡æ¯ ä¹Ÿå°±æ˜¯ 24 25ï¼Œå½“åœ¨cmdçª—å£æ‰§è¡Œå®Œcommitä¹‹åï¼š\nmysql\u0026gt; commit; Query OK, 0 rows affected (0.11 sec) mysql\u0026gt; select * from t_person where Name='yezhao'; +----+--------+-----+--------+ | Id | Name | Age | Gender | +----+--------+-----+--------+ | 1 | yezhao | 25 | 1 | | 7 | yezhao | 26 | 1 | +----+--------+-----+--------+ 2 rows in set (0.00 sec)  navicatä¹Ÿä¼šå‘ç”Ÿç›¸åº”çš„å˜åŒ–ï¼š 1 yezhao 25 1 7 yezhao 26 1\njavaçš„conn.setAutoCommit(false);//ç›¸å½“äºbeginçš„ä½œç”¨ æ‰€ä»¥ï¼šåªæœ‰commitä¹‹åmysqlä¿¡æ¯æ‰ä¼šåœ¨ä¸åŒçš„å®¢æˆ·ç«¯åŒæ­¥ï¼Œç°åœ¨å°è¯•åœ¨javaä¸­çš„ä½¿ç”¨ï¼Œå·²åœ¨ç»ƒä¹ éƒ¨åˆ†ç»™å‡ºï¼Œ\n2.åœ¨æ²¡æœ‰æ‰¹é‡å¯¼å…¥æ•°æ®ä¹‹å‰ï¼Œä¸€èˆ¬æ˜¯éœ€è¦èŠ±è´¹å¾ˆé•¿çš„æ—¶é—´ï¼Œç°åœ¨é‡‡ç”¨addbatchè¿›è¡Œã€‚ ps.clearParameters()çš„ä½œç”¨æ˜¯æ¸…ç©ºä¸Šä¸€æ¬¡æ•°æ®çš„å€¼ï¼Œä¸å½±å“åˆ°ä¸‹ä¸€æ¬¡\nè€Œä¸€èˆ¬æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œå¯¼å…¥å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œè¿™æ ·å¦‚æœæ‰¹é‡å¯¼å…¥åœ¨äº‹åŠ¡ä¸­è¿è¡Œï¼Œå°†ä¼šæ›´åŠ ä¿é™©ï¼Œå·²åœ¨ç»ƒä¹ ç»™å‡ºã€‚ æ³¨æ„åŠ å…¥äº‹ç‰©çš„æ—¶å€™ï¼ŒæŠ›å‡ºå¼‚å¸¸æ—¶å€™é‡‡ç”¨conn.rollback();æŠŠexecuteUpdate()æ”¹æˆaddBatch()ï¼Œåœ¨æœ€åå†ps.executeBatch()\n mysqlè·å–æœ€åä¸€æ¬¡æ’å…¥çš„idå·å‡½æ•°ï¼Œåœ¨javaä¸­ä¹Ÿå¯ä»¥å®ç°ã€‚\nmysql\u0026gt; select last_insert_id(); +------------------+ | last_insert_id() | +------------------+ | 0 | +------------------+ 1 row in set (0.17 sec)  æœ‰æ²¡æœ‰å‘ç°æ˜¯0 ï¼Œå³ä½¿æ˜¯æˆ‘æœ€æ–°æ’å…¥ä¹Ÿæ˜¯è¿™æ ·ï¼›è°ƒæŸ¥åå‘ç°æ˜¯ï¼š\nmysql\u0026gt; insert into t_person(Name,Age,Gender) values ('æ‚Ÿç©º',30,1); Query OK, 1 row affected (0.04 sec) mysql\u0026gt; select last_insert_id(); +------------------+ | last_insert_id() | +------------------+ | 11317 | +------------------+ 1 row in set (0.00 sec)   å¦‚æœä½ æ·»åŠ çš„æ—¶å€™ï¼Œä¸è¦å†™ä¸Šä¸»é”®çš„å€¼ï¼Œåˆ™æ˜¯å¯ä»¥ï¼å¦‚æœç›´æ¥åŠ ä¸Šä¸»é”®çš„å€¼ï¼Œåˆ™æ˜¾ç¤ºçš„æ˜¯0ï¼\nç¬¬äºŒéƒ¨åˆ† ç»ƒä¹  1.ä¸€ä¸ªæ¯”è¾ƒæˆ³ç‰ˆæœ¬çš„JDBCUtilsçš„ç‰ˆæœ¬ï¼Œè™½ç„¶æ²¡æœ‰é”™è¯¯ï¼Œä½†æ˜¯æœªå…³é—­è¿æ¥ï¼Œä¸”æ•´ä½“é€»è¾‘æ€§ä¸å¼ºï¼Œå¹¶å¤šæ¬¡åŠ è½½é©±åŠ¨\n/** * */ package com.jdbc.test; import java.util.Properties; import java.io.*; import java.sql.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ17æ—¥ä¸‹åˆ11:31:53 * @version com.jdbc.testJDBCUtils V1.0 */ public class JDBCUtils { /** * @param args */ public static void main(String[] args) { // TODO Auto-generated method stub try { //æŸ¥è¯¢çš„æµ‹è¯•åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µ æ— å‚ çš„ä¸¤ä¸ª æœ‰å‚çš„ä¸€ä¸ª //æµ‹è¯•1 success /** * mysql\u0026gt; select * from t_person; * 6 rows in set (0.35 sec) */ /* Connection conn = JDBCUtils.createConnection() ; ResultSet rs = JDBCUtils.executeQuery(conn, \u0026quot;select * from t_person\u0026quot;, null); int i = 0; while(rs.next()) { i++; } System.out.println(\u0026quot;æ€»çš„è¿”å›äº†\u0026quot;+i+\u0026quot;æ¡è®°å½•\u0026quot;); */ //æµ‹è¯•2 success /** * mysql\u0026gt; select * from t_person; * 6 rows in set (0.35 sec) */ /* ResultSet rs = JDBCUtils.executeQuery( \u0026quot;select * from t_person\u0026quot;, null); int i = 0; while(rs.next()) { i++; } System.out.println(\u0026quot;æ€»çš„è¿”å›äº†\u0026quot;+i+\u0026quot;æ¡è®°å½•\u0026quot;); */ //æµ‹è¯•3 success /* mysql\u0026gt; select * from t_person where name='xinran' * 3 rows in set (0.00 sec) */ /* ResultSet rs = JDBCUtils.executeQuery(\u0026quot;select * from t_person where name = ?\u0026quot;, \u0026quot;xinran\u0026quot;); int i = 0; while(rs.next()) { i++; } System.out.println(\u0026quot;æ€»çš„è¿”å›äº†\u0026quot;+i+\u0026quot;æ¡è®°å½•\u0026quot;);*/ //æ’å…¥é˜¶æ®µçš„æµ‹è¯• ç±»ä¼¼æŸ¥è¯¢åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µ æ— å‚ çš„ä¸¤ä¸ª æœ‰å‚çš„ä¸€ä¸ª /** * æµ‹è¯•æˆåŠŸï¼ //1 */ /*Connection conn = JDBCUtils.createConnection() ; int i = JDBCUtils.executeUpdate(conn, \u0026quot;insert into t_person(Id,Name,Age,Gender) values(8,'lizi',82,1)\u0026quot;, null); //System.out.println(\u0026quot;æ€»çš„è¿”å›äº†\u0026quot;+i+\u0026quot;æ¡è®°å½•\u0026quot;); */ /** * æµ‹è¯•æˆåŠŸï¼ //2 æ²¡æƒ³åˆ°åªè¦ä¸¤è¡Œè¯­å¥ åˆ™è¿›è¡Œäº†ä¸€æ¬¡æ’å…¥ */ /*String sql = \u0026quot;insert into t_person(Id,Name,Age,Gender) values(9,'å­™æ‚Ÿç©º',12,1)\u0026quot;; //å¹´é¾„ä¸èƒ½è¿‡å¤§ JDBCUtils.executeUpdate(sql, null);*/ /** * æµ‹è¯•æˆåŠŸï¼ //3 è¿æœ‰å‚çš„å½¢å¼ä¹Ÿæ˜¯æˆåŠŸäº† * mysql\u0026gt; select * from t_person; +----+---------+-----+--------+ | Id | Name | Age | Gender | +----+---------+-----+--------+ | 1 | yezhao | 24 | 1 | | 3 | xinran | 32 | 0 | | 4 | xinran | 32 | 4 | | 5 | xinran | 32 | 4 | | 6 | yezhao1 | 25 | 0 | | 7 | yezhao | 25 | 1 | | 8 | lizi | 82 | 1 | | 9 | å­™æ‚Ÿç©º | 12 | 1 | | 10 | è´è¶ | 3 | 0 | +----+---------+-----+--------+ 9 rows in set (0.00 sec) */ String sql = \u0026quot;insert into t_person(Id,Name,Age,Gender) values(?,?,?,?)\u0026quot;; //å¹´é¾„ä¸èƒ½è¿‡å¤§ JDBCUtils.executeUpdate(sql, 11,\u0026quot;å­Ÿå½©å…°\u0026quot;,13,1); } catch (SQLException e) { // TODO Auto-generated catch block e.printStackTrace(); } } public static Connection createConnection() throws SQLException { InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream(\u0026quot;com/jdbc/test/sql.properties\u0026quot;); //InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream(\u0026quot;sql.properties\u0026quot;); Properties ps = new Properties(); Connection c1 = null; try { ps.load(is); String mysqlDriver = ps.getProperty(\u0026quot;mysqlDriver\u0026quot;); // System.out.println(mysqlDriver); String connectDatabase = ps.getProperty(\u0026quot;connectDatabase\u0026quot;); // System.out.println(connectDatabase); String userName = ps.getProperty(\u0026quot;userName\u0026quot;); // System.out.println(userName); String Password = ps.getProperty(\u0026quot;Password\u0026quot;); // System.out.println(Password); Class.forName(mysqlDriver); c1 = DriverManager.getConnection(connectDatabase,userName,Password); System.out.println(\u0026quot;è¿æ¥æˆåŠŸ\u0026quot;); } catch (IOException | ClassNotFoundException | SQLException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;æ•°æ®åº“é©±åŠ¨åŠ è½½å¤±è´¥\u0026quot;+e.getMessage()); return null; } return c1; } public static int executeUpdate(String sql,Object... parameter) throws SQLException { Connection conn = JDBCUtils.createConnection(); PreparedStatement ps = conn.prepareStatement(sql); int i = 1; if(parameter != null) { for(Object pa1:parameter) { ps.setObject(i, pa1); i++; } } int rows = ps.executeUpdate(); System.out.println(\u0026quot;æœ‰\u0026quot;+rows+\u0026quot;æ¡è®°å½•è¢«å½±å“\u0026quot;); return rows; } public static int executeUpdate(Connection conn,String sql,Object... parameter) throws SQLException { PreparedStatement ps = conn.prepareStatement(sql); int i = 1; if(parameter != null) { for(Object pa1:parameter) { ps.setObject(i, pa1); i++; } } int rows = ps.executeUpdate(); System.out.println(\u0026quot;æœ‰\u0026quot;+rows+\u0026quot;æ¡è®°å½•è¢«å½±å“\u0026quot;); return rows; } public static ResultSet executeQuery(String sql,Object... parameter) throws SQLException { Connection conn = JDBCUtils.createConnection(); PreparedStatement ps = conn.prepareStatement(sql); int i =1; if(parameter != null) { for(Object pa1:parameter) { ps.setObject(i, pa1); i++; } } ResultSet rs = ps.executeQuery(); return rs; } public static ResultSet executeQuery(Connection conn,String sql,Object... parameter) throws SQLException { PreparedStatement ps = conn.prepareStatement(sql); int i =1; if(parameter != null) { for(Object pa1:parameter) { ps.setObject(i, pa1); i++; } } ResultSet rs = ps.executeQuery(); return rs; } static void closeQuietly(PreparedStatement ps) { if(ps!= null) { try { ps.close(); }catch(SQLException e) { } } } static void closeQuietly(Connection conn) { if(conn!= null) { try { conn.close(); }catch(SQLException e) { } } } static void closeQuietly(ResultSet rs) { if(rs!= null) { try { rs.close(); }catch(SQLException e) { } } } }  æ–°ä¸€ä¸ªç‰ˆæœ¬çš„æ”¹è¿›ï¼Œä¸»è¦æ˜¯åˆ©ç”¨æ¨è€å¸ˆè®²çš„ é™æ€ä»£ç å—ä»…ä»…ä¸€æ¬¡åŠ è½½é©±åŠ¨ï¼ å¹¶å…³é—­æœ‰äº›ä½¿ç”¨çš„èµ„æºï¼ŒResultSetèµ„æºä¸å…³é—­ï¼Œç”±è°ƒç”¨è€…å»å…³é—­\n2.æ–°çš„ç‰ˆæœ¬çœŸæ˜¯æ¯”è¾ƒæ¸…æ™°ã€‚\n/** * */ package com.jdbc.test; import java.util.Properties; import java.io.*; import java.sql.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ17æ—¥ä¸‹åˆ11:31:53 * @version com.jdbc.testJDBCUtils V1.0 * V2.0 æ”¹å˜é…ç½®æ–‡ä»¶å˜ä¸ºä¸ºfinalï¼Œå¹¶æŠŠsql.propertiesæ–‡ä»¶æåˆ° * com.jdbcç›®å½•ä¸‹ com/jdbc/test/sql.properties * æµ‹è¯•é€šè¿‡ * V3.0 æ”¹å˜ä¸ºé™æ€ä»£ç æ®µ åŠ è½½é©±åŠ¨ï¼ å¹¶æŠŠåŠ è½½é…ç½®æ–‡ä»¶ * ä¹Ÿæ”¾åœ¨é™æ€ä»£ç æ®µä¸­ï¼ä»…ä»…åŠ è½½ä¸€æ¬¡å³å¯ï¼è€Œä¸éœ€è¦ * ä¸€ç›´åŠ è½½ * V4.0 ä¿®æ­£äº†æ²¡æœ‰closeçš„é—®é¢˜ï¼ï¼é˜²æ­¢ä¸€ç›´è¿ç€ã€‚ æ˜ç™½äº†åƒå¼‚å¸¸çš„è¿‡ç¨‹ * åœ¨ç±»åº“ä¸­ä¸çŸ¥é“æ€ä¹ˆå¤„ç†ï¼ç›´æ¥æŠ›å‡ºå¼‚å¸¸å³å¯ï¼è®©è°ƒç”¨è€…è‡ªå·±å»å¤„ç†ï¼ * å’±ä»¬æä¾›æ–¹æ³•ï¼Œä¸æä¾›å¼‚å¸¸çš„å¤„ç†ï¼æ‰“å°å¼‚å¸¸ä¸å«åšå¤„ç†ï¼è€Œå«åšâ€œåƒå¼‚å¸¸â€ * V5.0 ä¸åƒå¼‚å¸¸çš„æ–¹å¼å°±æ˜¯ throw new RuntimeException ï¼Œé™æ€ä»£ç æ®µ * æ— æ³•throw checkedExceptionæ£€æŸ¥å¼‚å¸¸ * æ²¡æƒ³åˆ°ç»è¿‡è¿™æ ·çš„è¿‡ç¨‹å°è£…æ¯”æˆ‘åŸå…ˆçš„å¥½çœ‹å¤šäº†ï¼è€Œä¸”é€»è¾‘æ›´åŠ æ¸…æ™° * */ public class JDBCUtils { /** * @param args */ private static final String mysqlDriver; private static final String connectDatabase; private static final String userName; private static final String Password; static { InputStream is = null; //InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream(\u0026quot;sql.properties\u0026quot;); Properties ps = new Properties(); Connection c1 = null; try { is = JDBCUtils.class.getClassLoader().getResourceAsStream(\u0026quot;\u0026quot; + \u0026quot;com/jdbc/test/sql.properties\u0026quot;); ps.load(is); mysqlDriver = ps.getProperty(\u0026quot;mysqlDriver\u0026quot;); // System.out.println(mysqlDriver); connectDatabase = ps.getProperty(\u0026quot;connectDatabase\u0026quot;); // System.out.println(connectDatabase); userName = ps.getProperty(\u0026quot;userName\u0026quot;); // System.out.println(userName); Password = ps.getProperty(\u0026quot;Password\u0026quot;); // System.out.println(Password); //ä»…ä»…åœ¨é™æ€ä»£ç æ®µä¸­åŠ è½½ä¸€æ¬¡é©±åŠ¨å³å¯ï¼ˆåœ¨è¿è¡Œä¸­ï¼‰ } catch (IOException e) { // TODO Auto-generated catch block //System.out.println(\u0026quot;é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥\u0026quot;+e.getMessage()); throw new RuntimeException(\u0026quot;é…ç½®æ–‡ä»¶sql.propertiesåŠ è½½å¤±è´¥\u0026quot;+e.getMessage()); //return null; } try { Class.forName(mysqlDriver); //ä»…ä»…åœ¨ç¨‹åºè¿è¡Œä¸­åŠ è½½ä¸€æ¬¡é©±åŠ¨å³å¯ï¼ï¼ï¼ } catch (ClassNotFoundException e) { // TODO Auto-generated catch block // System.out.println(\u0026quot;é©±åŠ¨åŠ è½½å¤±è´¥\u0026quot;+e.getMessage()); throw new RuntimeException(\u0026quot;é©±åŠ¨åŠ è½½å¤±è´¥\u0026quot;+e.getMessage()); } } public static void main(String[] args) { // TODO Auto-generated method stub try { //æŸ¥è¯¢çš„æµ‹è¯•åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µ æ— å‚ çš„ä¸¤ä¸ª æœ‰å‚çš„ä¸€ä¸ª //æµ‹è¯•1 success /** * mysql\u0026gt; select * from t_person; * 6 rows in set (0.35 sec) */ /* Connection conn = JDBCUtils.createConnection() ; ResultSet rs = JDBCUtils.executeQuery(conn, \u0026quot;select * from t_person\u0026quot;, null); int i = 0; while(rs.next()) { i++; } System.out.println(\u0026quot;æ€»çš„è¿”å›äº†\u0026quot;+i+\u0026quot;æ¡è®°å½•\u0026quot;); */ //æµ‹è¯•2 success /** * mysql\u0026gt; select * from t_person; * 6 rows in set (0.35 sec) */ /* ResultSet rs = JDBCUtils.executeQuery( \u0026quot;select * from t_person\u0026quot;, null); int i = 0; while(rs.next()) { i++; } System.out.println(\u0026quot;æ€»çš„è¿”å›äº†\u0026quot;+i+\u0026quot;æ¡è®°å½•\u0026quot;); */ //æµ‹è¯•3 success /* mysql\u0026gt; select * from t_person where name='xinran' * 3 rows in set (0.00 sec) */ /* ResultSet rs = JDBCUtils.executeQuery(\u0026quot;select * from t_person where name = ?\u0026quot;, \u0026quot;xinran\u0026quot;); int i = 0; while(rs.next()) { i++; } System.out.println(\u0026quot;æ€»çš„è¿”å›äº†\u0026quot;+i+\u0026quot;æ¡è®°å½•\u0026quot;);*/ //æ’å…¥é˜¶æ®µçš„æµ‹è¯• ç±»ä¼¼æŸ¥è¯¢åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µ æ— å‚ çš„ä¸¤ä¸ª æœ‰å‚çš„ä¸€ä¸ª /** * æµ‹è¯•æˆåŠŸï¼ //1 */ /*Connection conn = JDBCUtils.createConnection() ; int i = JDBCUtils.executeUpdate(conn, \u0026quot;insert into t_person(Id,Name,Age,Gender) values(8,'lizi',82,1)\u0026quot;, null); //System.out.println(\u0026quot;æ€»çš„è¿”å›äº†\u0026quot;+i+\u0026quot;æ¡è®°å½•\u0026quot;); */ /** * æµ‹è¯•æˆåŠŸï¼ //2 æ²¡æƒ³åˆ°åªè¦ä¸¤è¡Œè¯­å¥ åˆ™è¿›è¡Œäº†ä¸€æ¬¡æ’å…¥ */ /*String sql = \u0026quot;insert into t_person(Id,Name,Age,Gender) values(9,'å­™æ‚Ÿç©º',12,1)\u0026quot;; //å¹´é¾„ä¸èƒ½è¿‡å¤§ JDBCUtils.executeUpdate(sql, null);*/ /** * æµ‹è¯•æˆåŠŸï¼ //3 è¿æœ‰å‚çš„å½¢å¼ä¹Ÿæ˜¯æˆåŠŸäº† * mysql\u0026gt; select * from t_person; +----+---------+-----+--------+ | Id | Name | Age | Gender | +----+---------+-----+--------+ | 1 | yezhao | 24 | 1 | | 3 | xinran | 32 | 0 | | 4 | xinran | 32 | 4 | | 5 | xinran | 32 | 4 | | 6 | yezhao1 | 25 | 0 | | 7 | yezhao | 25 | 1 | | 8 | lizi | 82 | 1 | | 9 | å­™æ‚Ÿç©º | 12 | 1 | | 10 | è´è¶ | 3 | 0 | +----+---------+-----+--------+ 9 rows in set (0.00 sec) */ String sql = \u0026quot;insert into t_person(Id,Name,Age,Gender) values(?,?,?,?)\u0026quot;; //å¹´é¾„ä¸èƒ½è¿‡å¤§ JDBCUtils.executeUpdate(sql, 12,\u0026quot;å­Ÿæ±Ÿè™\u0026quot;,15,0); } catch (SQLException e) { // TODO Auto-generated catch block e.printStackTrace(); } } /** * åˆ›å»ºæ•°æ®åº“çš„è¿æ¥ * @return è¿”å›mysqlçš„è¿æ¥ */ public static Connection createConnection() { Connection c1 = null; try { c1 = DriverManager.getConnection(connectDatabase,userName,Password); System.out.println(\u0026quot;è¿æ¥æˆåŠŸ\u0026quot;); } catch (SQLException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;æ•°æ®åº“è¿æ¥åˆ›å»ºå¤±è´¥\u0026quot;+e.getMessage()); return null; } return c1; } /** * * @param sql sqlçš„update,delete,insertç­‰ä¿®æ”¹æ•°æ®åº“çš„è¯­å¥ * @param parameter å‚æ•°åŒ–çš„update,delete,insertç­‰çš„è®¾ç½® * @return è¿”å›è¢«å½±å“çš„å‡½æ•° * @throws SQLException æŠ›å‡ºSQLExceptionç”±ç”¨æˆ·è‡ªå·±å»ç‰¹æ®Šå¤„ç† */ public static int executeUpdate(String sql,Object... parameter) throws SQLException { Connection conn = null; PreparedStatement ps = null; int rows = 0; try { conn = JDBCUtils.createConnection(); ps = conn.prepareStatement(sql); int i = 1; if(parameter != null) { for(Object pa1:parameter) { ps.setObject(i, pa1); i++; } } rows = ps.executeUpdate(); }finally { JDBCUtils.closeQuietly(ps); } System.out.println(\u0026quot;æœ‰\u0026quot;+rows+\u0026quot;æ¡è®°å½•è¢«å½±å“\u0026quot;); return rows; } /** * @param conn æ•°æ®åº“çš„è¿æ¥ * @param sql sqlçš„update,delete,insertç­‰ä¿®æ”¹æ•°æ®åº“çš„è¯­å¥ * @param parameter å‚æ•°åŒ–çš„update,delete,insertç­‰çš„è®¾ç½® * @return è¿”å›è¢«å½±å“çš„å‡½æ•° * @throws SQLException æŠ›å‡ºSQLExceptionç”±ç”¨æˆ·è‡ªå·±å»ç‰¹æ®Šå¤„ç† */ public static int executeUpdate(Connection conn,String sql,Object... parameter) throws SQLException { PreparedStatement ps = null; int rows = 0; try { ps = conn.prepareStatement(sql); int i = 1; if(parameter != null) { for(Object pa1:parameter) { ps.setObject(i, pa1); i++; } } rows = ps.executeUpdate(); }finally { JDBCUtils.closeQuietly(ps); } System.out.println(\u0026quot;æœ‰\u0026quot;+rows+\u0026quot;æ¡è®°å½•è¢«å½±å“\u0026quot;); return rows; } /** * * @param sql sqlçš„selectä¸ä¿®æ”¹æ•°æ®åº“çš„è¯­å¥ * @param parameter å‚æ•°åŒ–çš„æŸ¥è¯¢ï¼Œå‚æ•°é›†çš„è®¾ç½® * @return è¿”å›æŸ¥è¯¢çš„æ•°æ®é›† * @throws SQLException æŠ›å‡ºSQLExceptionç”±ç”¨æˆ·è‡ªå·±å»ç‰¹æ®Šå¤„ç† */ public static ResultSet executeQuery(String sql,Object... parameter) throws SQLException { Connection conn = null; PreparedStatement ps = null; try { conn = JDBCUtils.createConnection(); ps = conn.prepareStatement(sql); int i =1; if(parameter != null) { for(Object pa1:parameter) { ps.setObject(i, pa1); i++; } } ResultSet rs = ps.executeQuery(); //å› ä¸ºfinallyæ˜¯è‚¯å®šä¼šè¢«æ‰§è¡Œçš„ç‰‡æ®µ å³ä½¿ä»–æ”¾åœ¨returnä¹‹å return rs; }finally { JDBCUtils.closeQuietly(ps); } } /** * @param conn æ•°æ®åº“è¿æ¥ * @param sql sqlçš„selectä¸ä¿®æ”¹æ•°æ®åº“çš„è¯­å¥ * @param parameter å‚æ•°åŒ–çš„æŸ¥è¯¢ï¼Œå‚æ•°é›†çš„è®¾ç½® * @return è¿”å›æŸ¥è¯¢çš„æ•°æ®é›† * @throws SQLException æŠ›å‡ºSQLExceptionç”±ç”¨æˆ·è‡ªå·±å»ç‰¹æ®Šå¤„ç† */ public static ResultSet executeQuery(Connection conn,String sql,Object... parameter) throws SQLException { PreparedStatement ps = null; try { ps = conn.prepareStatement(sql); int i =1; if(parameter != null) { for(Object pa1:parameter) { ps.setObject(i, pa1); i++; } } ResultSet rs = ps.executeQuery(); return rs; }finally { JDBCUtils.closeQuietly(ps); } } /** * å…³é—­PreparedStatmentè¿æ¥ * @param ps PreparedStatmentå¯¹è±¡ */ static void closeQuietly(PreparedStatement ps) { if(ps!= null) { try { ps.close(); }catch(SQLException e) { } } } /** * å…³é—­Connectionè¿æ¥ * @param connn Connectionå¯¹è±¡ */ static void closeQuietly(Connection conn) { if(conn!= null) { try { conn.close(); }catch(SQLException e) { } } } /** * å…³é—­ResultSetè¿æ¥ * @param rs ResultSetå¯¹è±¡ */ static void closeQuietly(ResultSet rs) { if(rs!= null) { try { rs.close(); }catch(SQLException e) { } } } }  åŸæ¥è‡ªå·±åˆæ²¡æœ‰ç†è§£æ¸…æ¥šï¼Œæˆ‘ä»¬å®é™…ç”¨çš„è¾ƒå¤šexecuteUpdateå’ŒexecuteQueryçš„æ— conn çš„å½¢å¼ï¼Œè€Œå¸¦connåªæ˜¯ä¸€ä¸ªä¸­é—´è¿‡ç¨‹ï¼ å¹¶ä¸”æ— connçš„ä¼šè°ƒç”¨æœ‰connçš„å½¢å¼ï¼åŒæ—¶è¿™ä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ä¹ æƒ¯ï¼åªè¦æ”¹ä¸€ä¸ªåœ°æ–¹å°±éƒ½æ”¹äº†ï¼\nè€Œä¸”å¹¶ä¸”æ”¹æ‰ä»£ç çš„é‡å¤ç‰‡æ®µï¼Œä¸€ä¸¾å¤šå¾—ï¼Œå¹¶ä¸”æ€è·¯æ›´æ¸…æ™°ï¼ å­¦ä¹ ï¼Œæœ­è®°ã€‚\n/** * * @param sql sqlçš„update,delete,insertç­‰ä¿®æ”¹æ•°æ®åº“çš„è¯­å¥ * @param parameter å‚æ•°åŒ–çš„update,delete,insertç­‰çš„è®¾ç½® * @return è¿”å›è¢«å½±å“çš„å‡½æ•° * @throws SQLException æŠ›å‡ºSQLExceptionç”±ç”¨æˆ·è‡ªå·±å»ç‰¹æ®Šå¤„ç† */ public static int executeUpdate(String sql,Object... parameter) throws SQLException { Connection conn = null; try { conn = JDBCUtils.createConnection(); return executeUpdate(conn, sql, parameter); }finally { JDBCUtils.closeQuietly(conn); } } /** * * @param sql sqlçš„selectä¸ä¿®æ”¹æ•°æ®åº“çš„è¯­å¥ * @param parameter å‚æ•°åŒ–çš„æŸ¥è¯¢ï¼Œå‚æ•°é›†çš„è®¾ç½® * @return è¿”å›æŸ¥è¯¢çš„æ•°æ®é›† * @throws SQLException æŠ›å‡ºSQLExceptionç”±ç”¨æˆ·è‡ªå·±å»ç‰¹æ®Šå¤„ç† */ public static ResultSet executeQuery(String sql,Object... parameter) throws SQLException { Connection conn = null; try { conn = JDBCUtils.createConnection(); return executeQuery(conn,sql, parameter); }finally { JDBCUtils.closeQuietly(conn); } }  æ¼‚äº®ï¼Œä¼˜é›…ï¼ï¼ï¼ç¾ä¸½\n3æµ‹è¯•äº†ä¸€ä¸ªå¤šæ¬¡æ’å…¥çš„æ¡ˆä¾‹ï¼š\n/** * æµ‹è¯•ç»“æœï¼š å•ä¸ªè¿æ¥ æ’å…¥100æ¡æ•°æ®è€—æ—¶3767 */ /* long startTime = System.currentTimeMillis(); String sql = \u0026quot;insert into t_person(Id,Name,Age,Gender) values(?,?,?,?)\u0026quot;; Connection conn = null; try { conn = JDBCUtils.createConnection(); //åŸå…ˆæœ‰æ•°æ®ï¼å¹¶ä¸”ä¸»é”®ä¸èƒ½é‡å¤ æ‰€ä»¥åªå¥½ä»18å¼€å§‹ for(int i = 15; i \u0026lt; 115; i++) { JDBCUtils.executeUpdate(conn,sql, i,\u0026quot;SpringDay\u0026quot;,17,1); } System.out.println(\u0026quot;å•ä¸ªè¿æ¥ æ’å…¥100æ¡æ•°æ®è€—æ—¶\u0026quot;+(System.currentTimeMillis() -startTime)); }catch(SQLException e) { System.out.println(\u0026quot;æ•°æ®åº“è¿æ¥å¼‚å¸¸\u0026quot;); }finally { JDBCUtils.closeQuietly(conn); }*/ /** * ä¸€ä¸ªè¿æ¥ æ’å…¥ä¸€æ¡æ•°æ® 100æ¡åè€—æ—¶7850 * å¯è§è¿™ç§æ–¹å¼è¿˜æ˜¯ç›¸å¯¹è¾ƒæ…¢çš„ï¼ï¼ï¼ï¼ * æ€»ç»“ åœ¨å¤šæ¬¡æ’å…¥æ•°æ®åº“ä¸­ï¼æœ€å¥½æ˜¯ä¸€æ¬¡è¿æ¥ï¼Œä¸è¦å…³é—­ï¼Œæ’å…¥å®Œåœ¨å…³é—­ */ long startTime = System.currentTimeMillis(); String sql = \u0026quot;insert into t_person(Id,Name,Age,Gender) values(?,?,?,?)\u0026quot;; try { for(int i = 116; i \u0026lt; 216; i++) { JDBCUtils.executeUpdate(sql, i,\u0026quot;SpringDay\u0026quot;,17,1); } System.out.println(\u0026quot;ä¸€ä¸ªè¿æ¥ æ’å…¥ä¸€æ¡æ•°æ® 100æ¡åè€—æ—¶\u0026quot;+(System.currentTimeMillis() -startTime)); }catch(SQLException e) { System.out.println(\u0026quot;è¿æ¥å¤±è´¥ï¼ä¸»é”®æœ‰é—®é¢˜\u0026quot;+e.getMessage()); }  æ€»ç»“ åœ¨å¤šæ¬¡æ’å…¥æ•°æ®åº“ä¸­ï¼æœ€å¥½æ˜¯ä¸€æ¬¡è¿æ¥ï¼Œä¸è¦å…³é—­ï¼Œæ’å…¥å®Œåœ¨å…³é—­\nå†æ¬¡æ”¹è¿›ï¼ä¸éœ€è¦æŠŠexecuteQueryçš„connectionå…³é—­\n* ç”±äºPreparedStatement æ¥è‡ªStatement * rs.getStatement() è¡¨ç¤ºè¿”å›ä¸€ä¸ªstatementï¼Œè€Œä¸ä¼šå…³é—­PreparedStatement * å¸¸è§äº†ä¸€ä¸ªcloseAll(),è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ æš‚æ—¶ä¸å…³é—­æŸ¥è¯¢è¿æ¥çš„åŸå› ï¼ŒåŒæ—¶ä¸å…³é—­ * æ–¹ä¾¿è¿›è¡Œå¤šæ¬¡æŸ¥è¯¢ï¼Œåå¤æŸ¥è¯¢ /** * ä»resultSetä¸­å…³é—­æ‰€æœ‰çš„è¿æ¥ * @param rs */ static void closeAll(ResultSet rs) { if(rs == null) { return; } try { JDBCUtils.closeQuietly(rs.getStatement().getConnection()); JDBCUtils.closeQuietly(rs.getStatement()); JDBCUtils.closeAll(rs); }catch(SQLException e) { } }  å¹¶ä¸”å¿…é¡»ä¿®æ­£ executeQueryçš„å‡½æ•°ï¼ŒæŠŠåŸå…ˆçš„JDBCUtils.closeQuietly(ps)å…³æ‰ï¼ å¦åˆ™æŠ¥é”™ï¼å‡ºç°å¼‚å¸¸ï¼Œç„¶åå°±å¯ä»¥å¾ˆhappyçš„ä½¿ç”¨JDBCUtilsäº†\nResultSet rs = null; String sql = \u0026quot;select * from t_person\u0026quot;; try { rs = executeQuery(sql); while(rs.next()) { String Name= rs.getString(\u0026quot;Name\u0026quot;); System.out.println(Name); } }catch(SQLException e) { System.out.println(\u0026quot;å±…ç„¶æŠ¥é”™\u0026quot;); }finally { JDBCUtils.closeAll(rs); }  4åˆé¥­å‰ç‰ˆæœ¬çš„JDBCUtilsï¼š\n/** * */ package com.jdbc.test; import java.util.Properties; import java.io.*; import java.sql.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ17æ—¥ä¸‹åˆ11:31:53 * @version com.jdbc.testJDBCUtils V1.0 * V2.0 æ”¹å˜é…ç½®æ–‡ä»¶å˜ä¸ºä¸ºfinalï¼Œå¹¶æŠŠsql.propertiesæ–‡ä»¶æåˆ° * com.jdbcç›®å½•ä¸‹ com/jdbc/test/sql.properties * æµ‹è¯•é€šè¿‡ * V3.0 æ”¹å˜ä¸ºé™æ€ä»£ç æ®µ åŠ è½½é©±åŠ¨ï¼ å¹¶æŠŠåŠ è½½é…ç½®æ–‡ä»¶ * ä¹Ÿæ”¾åœ¨é™æ€ä»£ç æ®µä¸­ï¼ä»…ä»…åŠ è½½ä¸€æ¬¡å³å¯ï¼è€Œä¸éœ€è¦ * ä¸€ç›´åŠ è½½ * V4.0 ä¿®æ­£äº†æ²¡æœ‰closeçš„é—®é¢˜ï¼ï¼é˜²æ­¢ä¸€ç›´è¿ç€ã€‚ æ˜ç™½äº†åƒå¼‚å¸¸çš„è¿‡ç¨‹ * åœ¨ç±»åº“ä¸­ä¸çŸ¥é“æ€ä¹ˆå¤„ç†ï¼ç›´æ¥æŠ›å‡ºå¼‚å¸¸å³å¯ï¼è®©è°ƒç”¨è€…è‡ªå·±å»å¤„ç†ï¼ * å’±ä»¬æä¾›æ–¹æ³•ï¼Œä¸æä¾›å¼‚å¸¸çš„å¤„ç†ï¼æ‰“å°å¼‚å¸¸ä¸å«åšå¤„ç†ï¼è€Œå«åšâ€œåƒå¼‚å¸¸â€ * V5.0 ä¸åƒå¼‚å¸¸çš„æ–¹å¼å°±æ˜¯ throw new RuntimeException ï¼Œé™æ€ä»£ç æ®µ * æ— æ³•throw checkedExceptionæ£€æŸ¥å¼‚å¸¸ * æ²¡æƒ³åˆ°ç»è¿‡è¿™æ ·çš„è¿‡ç¨‹å°è£…æ¯”æˆ‘åŸå…ˆçš„å¥½çœ‹å¤šäº†ï¼è€Œä¸”é€»è¾‘æ›´åŠ æ¸…æ™° * V6.0 æœ‰æ²¡æœ‰ç†è§£æ¸…æ¥šï¼Œæˆ‘ä»¬å®é™…ç”¨çš„è¾ƒå¤šexecuteUpdateå’ŒexecuteQueryçš„æ— conn * çš„å½¢å¼ï¼Œè€Œå¸¦connåªæ˜¯ä¸€ä¸ªä¸­é—´è¿‡ç¨‹ï¼ å¹¶ä¸”æ— connçš„ä¼šè°ƒç”¨æœ‰connçš„å½¢å¼ï¼ * å†æ¬¡ä¿®æ”¹ï¼ æ³¨æ„è§‚çœ‹executeUpdateçš„å®ç° * V7.0 å†æ¬¡æ”¹è¿›ï¼ä¸éœ€è¦æŠŠexecuteQueryçš„connectionå…³é—­ * ç”±äºPreparedStatement æ¥è‡ªStatement * rs.getStatement() è¡¨ç¤ºè¿”å›ä¸€ä¸ªstatementï¼Œè€Œä¸ä¼šå…³é—­PreparedStatement * å¸¸è§äº†ä¸€ä¸ªcloseAll(),è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ æš‚æ—¶ä¸å…³é—­æŸ¥è¯¢è¿æ¥çš„åŸå› ï¼ŒåŒæ—¶ä¸å…³é—­ * æ–¹ä¾¿è¿›è¡Œå¤šæ¬¡æŸ¥è¯¢ï¼Œåå¤æŸ¥è¯¢ * * V8.0 cachedRowSet æ˜¯ä¸€ä¸ªç¼“å†²çš„mysqlå­—ç¬¦é›†ï¼Œè¿æ¥ä¸­æ–­ï¼æŠŠæ‰€æœ‰æ•°æ®ç¼“å†²åˆ°å®¢æˆ·ç«¯ï¼ * ä¸éœ€è¦å†æ¬¡è¿æ¥ï¼Œæ‰€ä»¥å…³é—­Connectionä¹Ÿæ˜¯å¯ä»¥ * ä½†æ˜¯è¿™ä¸ªæ ˆå†…å­˜ æš‚æ—¶ä¸ä½¿ç”¨ * */ public class JDBCUtils { /** * @param args */ private static final String mysqlDriver; private static final String connectDatabase; private static final String userName; private static final String Password; static { InputStream is = null; //InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream(\u0026quot;sql.properties\u0026quot;); Properties ps = new Properties(); Connection c1 = null; try { //is = JDBCUtils.class.getClassLoader().getResourceAsStream(\u0026quot;\u0026quot; // + \u0026quot;com/jdbc/test/sql.properties\u0026quot;); is = JDBCUtils.class.getResourceAsStream(\u0026quot;sql.properties\u0026quot;); //è¿™ç§æƒ…å†µçœç•¥å®å’ŒgetClassLoader() ps.load(is); mysqlDriver = ps.getProperty(\u0026quot;mysqlDriver\u0026quot;); // System.out.println(mysqlDriver); connectDatabase = ps.getProperty(\u0026quot;connectDatabase\u0026quot;); // System.out.println(connectDatabase); userName = ps.getProperty(\u0026quot;userName\u0026quot;); // System.out.println(userName); Password = ps.getProperty(\u0026quot;Password\u0026quot;); // System.out.println(Password); //ä»…ä»…åœ¨é™æ€ä»£ç æ®µä¸­åŠ è½½ä¸€æ¬¡é©±åŠ¨å³å¯ï¼ˆåœ¨è¿è¡Œä¸­ï¼‰ } catch (IOException e) { // TODO Auto-generated catch block //System.out.println(\u0026quot;é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥\u0026quot;+e.getMessage()); throw new RuntimeException(\u0026quot;é…ç½®æ–‡ä»¶sql.propertiesåŠ è½½å¤±è´¥\u0026quot;+e.getMessage()); //return null; } try { Class.forName(mysqlDriver); //ä»…ä»…åœ¨ç¨‹åºè¿è¡Œä¸­åŠ è½½ä¸€æ¬¡é©±åŠ¨å³å¯ï¼ï¼ï¼ } catch (ClassNotFoundException e) { // TODO Auto-generated catch block // System.out.println(\u0026quot;é©±åŠ¨åŠ è½½å¤±è´¥\u0026quot;+e.getMessage()); throw new RuntimeException(\u0026quot;é©±åŠ¨åŠ è½½å¤±è´¥\u0026quot;+e.getMessage()); } } public static void main(String[] args) { ResultSet rs = null; String sql = \u0026quot;select * from t_person\u0026quot;; try { rs = executeQuery(sql); while(rs.next()) { String Name= rs.getString(\u0026quot;Name\u0026quot;); System.out.println(Name); } }catch(SQLException e) { System.out.println(\u0026quot;å±…ç„¶æŠ¥é”™\u0026quot;); }finally { JDBCUtils.closeAll(rs); } /* try { ResultSet rs = JDBCUtils.executeQuery( \u0026quot;select * from t_person\u0026quot;, null); int i = 0; while(rs.next()) { i++; } System.out.println(\u0026quot;æ€»çš„è¿”å›äº†\u0026quot;+i+\u0026quot;æ¡è®°å½•\u0026quot;); }catch(SQLException e) { System.out.println(\u0026quot;juran\u0026quot;); } */ } /** * åˆ›å»ºæ•°æ®åº“çš„è¿æ¥ * @return è¿”å›mysqlçš„è¿æ¥ */ public static Connection createConnection() { Connection c1 = null; try { c1 = DriverManager.getConnection(connectDatabase,userName,Password); System.out.println(\u0026quot;è¿æ¥æˆåŠŸ\u0026quot;); } catch (SQLException e) { // TODO Auto-generated catch block System.out.println(\u0026quot;æ•°æ®åº“è¿æ¥åˆ›å»ºå¤±è´¥\u0026quot;+e.getMessage()); return null; } return c1; } /** * * @param sql sqlçš„update,delete,insertç­‰ä¿®æ”¹æ•°æ®åº“çš„è¯­å¥ * @param parameter å‚æ•°åŒ–çš„update,delete,insertç­‰çš„è®¾ç½® * @return è¿”å›è¢«å½±å“çš„å‡½æ•° * @throws SQLException æŠ›å‡ºSQLExceptionç”±ç”¨æˆ·è‡ªå·±å»ç‰¹æ®Šå¤„ç† */ public static int executeUpdate(String sql,Object... parameter) throws SQLException { Connection conn = null; try { conn = JDBCUtils.createConnection(); return executeUpdate(conn, sql, parameter); }finally { JDBCUtils.closeQuietly(conn); } } /** * @param conn æ•°æ®åº“çš„è¿æ¥ * @param sql sqlçš„update,delete,insertç­‰ä¿®æ”¹æ•°æ®åº“çš„è¯­å¥ * @param parameter å‚æ•°åŒ–çš„update,delete,insertç­‰çš„è®¾ç½® * @return è¿”å›è¢«å½±å“çš„å‡½æ•° * @throws SQLException æŠ›å‡ºSQLExceptionç”±ç”¨æˆ·è‡ªå·±å»ç‰¹æ®Šå¤„ç† */ public static int executeUpdate(Connection conn,String sql,Object... parameter) throws SQLException { PreparedStatement ps = null; int rows = 0; try { ps = conn.prepareStatement(sql); int i = 1; if(parameter != null) { for(Object pa1:parameter) { ps.setObject(i, pa1); i++; } } rows = ps.executeUpdate(); }finally { JDBCUtils.closeQuietly(ps); } System.out.println(\u0026quot;æœ‰\u0026quot;+rows+\u0026quot;æ¡è®°å½•è¢«å½±å“\u0026quot;); return rows; } /** * * @param sql sqlçš„selectä¸ä¿®æ”¹æ•°æ®åº“çš„è¯­å¥ * @param parameter å‚æ•°åŒ–çš„æŸ¥è¯¢ï¼Œå‚æ•°é›†çš„è®¾ç½® * @return è¿”å›æŸ¥è¯¢çš„æ•°æ®é›† * @throws SQLException æŠ›å‡ºSQLExceptionç”±ç”¨æˆ·è‡ªå·±å»ç‰¹æ®Šå¤„ç† */ public static ResultSet executeQuery(String sql,Object... parameter) throws SQLException { Connection conn = null; conn = JDBCUtils.createConnection(); return executeQuery(conn,sql, parameter); /*finally { JDBCUtils.closeQuietly(conn); }*/ } /** * @param conn æ•°æ®åº“è¿æ¥ * @param sql sqlçš„selectä¸ä¿®æ”¹æ•°æ®åº“çš„è¯­å¥ * @param parameter å‚æ•°åŒ–çš„æŸ¥è¯¢ï¼Œå‚æ•°é›†çš„è®¾ç½® * @return è¿”å›æŸ¥è¯¢çš„æ•°æ®é›† * @throws SQLException æŠ›å‡ºSQLExceptionç”±ç”¨æˆ·è‡ªå·±å»ç‰¹æ®Šå¤„ç† */ public static ResultSet executeQuery(Connection conn,String sql,Object... parameter) throws SQLException { PreparedStatement ps = null; ps = conn.prepareStatement(sql); int i =1; if(parameter != null) { for(Object pa1:parameter) { ps.setObject(i, pa1); i++; } } ResultSet rs = ps.executeQuery(); return rs; } /** * ä»resultSetä¸­å…³é—­æ‰€æœ‰çš„è¿æ¥ * @param rs */ static void closeAll(ResultSet rs) { if(rs == null) { return; } try { JDBCUtils.closeQuietly(rs.getStatement().getConnection()); JDBCUtils.closeQuietly(rs.getStatement()); JDBCUtils.closeAll(rs); }catch(SQLException e) { } } /** * å…³é—­PreparedStatmentè¿æ¥ * @param ps PreparedStatmentå¯¹è±¡ */ //static void closeQuietly(PreparedStatement ps) static void closeQuietly(Statement ps) { if(ps!= null) { try { ps.close(); }catch(SQLException e) { } } } /** * å…³é—­Connectionè¿æ¥ * @param connn Connectionå¯¹è±¡ */ static void closeQuietly(Connection conn) { if(conn!= null) { try { conn.close(); }catch(SQLException e) { } } } /** * å…³é—­ResultSetè¿æ¥ * @param rs ResultSetå¯¹è±¡ */ static void closeQuietly(ResultSet rs) { if(rs!= null) { try { rs.close(); }catch(SQLException e) { } } } }  æ€è·¯æ€»ç»“ï¼š 1ï¼šåˆ©ç”¨é…ç½®è¡¨ï¼Œè½½å…¥mysqlå’Œæ•°æ®åº“ä¿¡æ¯ 2ï¼šåˆ©ç”¨é™æ€ä»£ç æ®µè½½å…¥é©±åŠ¨ï¼ˆåªéœ€è¦ä¸€æ¬¡ï¼‰ 3ï¼š ç¼–å†™ å¸¦connectionçš„executeUpdateå’ŒexecuteQuery,å¹¶ä¸”åœ¨executeResultä¸è¦å…³é—­ä»»ä½•ä¿¡æ¯ï¼Œå¾…ç»Ÿä¸€å…³é—­ 4ï¼š ç¼–å†™ ä¸å¸¦Connectionçš„executeUpdateå’ŒexecuteQuery,å†…éƒ¨è°ƒç”¨å¸¦Connctionç‰ˆæœ¬çš„è€Œå¯’æš‘ 5ï¼š ç¼–å†™closeQuietlyå‡½æ•° å’ŒcloseAllå‡½æ•°ï¼Œåœ¨è°ƒç”¨executeQuery,å¹¶å…³é—­closeAllå³å¯\nç»ƒä¹ ä½¿ç”¨ctrl+O æ‰“å¼€æ–¹æ³•ã€‚ã€‚ï¼ˆå¤§å¹´30 åˆšå–å®ŒåŠç¢—é…’ ç»§ç»­ã€‚ã€‚ã€‚ï¼‰\n5äº‹åŠ¡çš„ç»ƒä¹ 1ï¼š\n/** * */ package com.jdbc.test; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ18æ—¥ä¸‹åˆ1:43:28 * @version com.jdbc.testtransaction1 V1.0 */ import java.sql.*; public class transaction1 { /** * @param args */ public static void main(String[] args) { // TODO Auto-generated method stub Connection conn = null; PreparedStatement ps1 = null; PreparedStatement ps2 = null; try { conn = JDBCUtils.createConnection(); conn.setAutoCommit(false); ps1 = conn.prepareStatement(\u0026quot;Update t_person Set Age=Age+1 where Name='yezhao'\u0026quot;); ps1.executeUpdate(); ps2 = conn.prepareStatement(\u0026quot;Update t_person Set Age=Age-1 where Name='xinran'\u0026quot;); ps2.executeUpdate(); conn.commit(); } catch (SQLException e) { try { conn.rollback(); } catch (SQLException e1) { // TODO Auto-generated catch block e1.printStackTrace(); } } } }  æµ‹è¯•navicat å’Œcmdéƒ½æ›´æ–°äº†ã€‚\n6batch+äº‹åŠ¡çš„æ€»å’Œç»ƒä¹ ï¼š\n/** * */ package com.jdbc.test; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ18æ—¥ä¸‹åˆ2:31:56 * @version com.jdbc.testtestBatchInsertAndUpdate V1.0 */ import java.sql.*; public class testBatchInsertAndUpdate { /** * @param args */ public static void main(String[] args) { // TODO Auto-generated method stub //åœ¨æ²¡æœ‰æ‰¹é‡å¯¼å…¥æ•°æ®ä¹‹å‰ï¼Œä¸€èˆ¬æ˜¯éœ€è¦èŠ±è´¹å¾ˆé•¿çš„æ—¶é—´ï¼Œç°åœ¨é‡‡ç”¨addbatchè¿›è¡Œ Connection conn = null; PreparedStatement ps = null; String sql=\u0026quot;insert into t_person(Id,Name,Age,Gender)values(?,?,?,?)\u0026quot;; //æµ‹è¯•äº†åˆ é™¤æ“ä½œï¼Œsuccess! //String sql= \u0026quot;delete from t_person where Name=?\u0026quot;; long startTime = System.currentTimeMillis(); /** * ä¸æ·»åŠ æ‰¹å¤„ç†åï¼Œæ·»åŠ 1000æ¡åè€—æ—¶845 * ä¸æ·»åŠ æ‰¹å¤„ç† æ·»åŠ 11000æ¡å è€—æ—¶2604 ,æ‰€ä»¥æˆ‘ä¸çŸ¥é“æ‰¹å¤„ç†çš„å¥½å¤„å•Šï¼ï¼ï¼ * åæ­£å³ä½¿2530så·¦å³ * æ·»åŠ æ‰¹å¤„ç†å æ·»åŠ 1000æ¡åè€—æ—¶799 æ·»åŠ 11000æ¡åè€—æ—¶3206 æ·»åŠ 11000æ¡åè€—æ—¶3143(æ¯ä¸ª1000æäº¤ä¸€æ¬¡ï¼‰ */ try { //ä¹‹å‰è¡¨ä¸­å·²æœ‰ 215è¡Œ conn = JDBCUtils.createConnection(); conn.setAutoCommit(false);//ç›¸å½“äºbeginçš„ä½œç”¨ ps = conn.prepareStatement(sql); for(int i = 316;i \u0026lt; 11316;i++) { //JDBCUtils.executeUpdate(conn, sql, i,\u0026quot;Autumn\u0026quot;,20,1); //ps.clearParameters(); ps.setInt(1, i); ps.setString(2,\u0026quot;Winter\u0026quot;); ps.setInt(3, 21); ps.setBoolean(4, true); //ps.executeUpdate(); /** * if(i%1000 == 0) //æ¯ä¸ª1000æ¬¡æäº¤ä¸€æ¬¡ï¼ï¼ï¼è¿™æ ·å¥½ï¼ * { * ps.executeBatch(); * } * å°‘äº1000æ¬¡çš„æœ€åä¸€ç¬” å†ç”¨ä¸€æ¬¡ps.executeBatch(); */ ps.addBatch(); //æ®è¯´æ˜¯è£…åˆ°ç®±å­çš„ä½œç”¨ if(i%1000 == 0) { ps.executeBatch(); } } //JDBCUtils.executeUpdate(conn, sql, i,\u0026quot;Autumn\u0026quot;,20,1); //æµ‹è¯•åˆ é™¤ä½¿ç”¨çš„ //JDBCUtils.executeUpdate(conn, sql, \u0026quot;Autumn\u0026quot;); //} ps.executeBatch(); //æŠŠç®±å­é‡Œé¢çš„æ•°æ® ç›´æ¥ä¸€æ¬¡æ€§æäº¤mysql conn.commit(); System.out.println(\u0026quot;æ·»åŠ 1000æ¡åè€—æ—¶\u0026quot;+(System.currentTimeMillis() -startTime)); }catch(SQLException e) { try { conn.rollback(); } catch (SQLException e1) { // TODO Auto-generated catch block e1.printStackTrace(); } }finally { JDBCUtils.closeQuietly(conn); } } }  7å¯¼å…¥æ‰‹æœºè´¦ç°¿ï¼Œå¹¶è¿›è¡Œæ‰‹æœºå·æ‰€åœ¨åœ°çš„æŸ¥è¯¢\n/** * */ package com.jdbc.test; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ18æ—¥ä¸‹åˆ3:49:22 * @version com.jdbc.testphoneCheck V1.0 */ import java.io.*; import java.sql.*; import java.util.Scanner; public class phoneCheck { /** * @param args */ /** * ID,MobileNumber,MobileArea,MobileType,AreaCode,PostCode,0 è¿æ¥æˆåŠŸ æ€»å…±æ·»åŠ äº†300105æ¡æ•°æ®.è€—æ—¶ï¼š64712 */ private static void load() { //å¯¼å…¥csvæ•°æ®ï¼Œåˆ©ç”¨BufferedInputStream InputStream is = null; InputStreamReader isr = null; BufferedReader bis = null; //ä¸€è¡Œä¸€è¡Œè¯»å…¥æ•°æ® Connection conn = null; PreparedStatement ps = null; int len = 0; int i = 0; long startms = System.currentTimeMillis(); try { is = new FileInputStream(\u0026quot;e://phone.csv\u0026quot;); isr = new InputStreamReader(is); bis = new BufferedReader(isr); System.out.println(bis.readLine()); //ç¬¬ä¸€è¡Œå­—æ®µèˆå» String apple= null; String[] applePiles = null; //ç¬¬ä¸€æ¬¡æµ‹è¯• å­—ç¬¦ä¸²çš„è¡Œè¯»å…¥ /* System.out.println(bis.readLine()); System.out.println(bis.readLine());*/ /*apple =bis.readLine(); //å­—ç¬¦ä¸²çš„ä¸€æ¬¡å¤±è¯¯ï¼ï¼ å¯¼è‡´æ’å…¥å¤±è´¥ï¼ï¼ï¼‚ï¼‚æ˜¯é»˜è®¤å­˜åœ¨çš„ã€€å¿…é¡»åˆ æ‰ apple = apple.replaceAll(\u0026quot;\\\u0026quot;\u0026quot;, \u0026quot;\u0026quot;); //ç¬¬äºŒæ¬¡æµ‹è¯• å­—ç¬¦ä¸²åˆ†éš” String[] splitArray = apple.split(\u0026quot;,\u0026quot;); for(String apple1 :splitArray) { System.out.println(apple1); }*/ conn = JDBCUtils.createConnection(); conn.setAutoCommit(false); String sql = \u0026quot;insert into phone(MobileNumber,MobileArea,MobileType,Area\u0026quot; + \u0026quot;Code,PostCode) values(?,?,?,?,?);\u0026quot;; ps = conn.prepareStatement(sql); /** * 370ä¸­å›½ç”µä¿¡ 371ä¸­å›½ç”µä¿¡ ä¹‹å æŠ¥é”™ ï¼Œå¯èƒ½æ˜¯ä¸ºç©ºçš„åŸå›  */ while((apple=bis.readLine()) != null) { apple = apple.replaceAll(\u0026quot;\\\u0026quot;\u0026quot;, \u0026quot;\u0026quot;); applePiles = apple.split(\u0026quot;,\u0026quot;); ps.clearParameters(); //ps.setInt(1, Integer.parseInt(applePiles[1].equalsIgnoreCase(\u0026quot;\u0026quot;)?\u0026quot;1111\u0026quot;:applePiles[4])); //ps.setInt(1, Integer.parseInt(applePiles[1])); ps.setString(1, applePiles[1]); ps.setString(2, applePiles[2]); //System.out.println(i+applePiles[3]+applePiles[4]); ps.setString(3, applePiles[3]); // ps.setInt(4, Integer.parseInt(applePiles[4]));//.equalsIgnoreCase(\u0026quot;\u0026quot;)?\u0026quot;1111\u0026quot;:applePiles[4])); // ps.setInt(5, Integer.parseInt(applePiles[5]));//.equalsIgnoreCase(\u0026quot;\u0026quot;)?\u0026quot;1111\u0026quot;:applePiles[4])); ps.setString(4, applePiles[4]); ps.setString(5, applePiles[5]); ps.addBatch(); i++; if(i%2000==0) { ps.executeBatch(); } } ps.executeBatch(); conn.commit(); long endMs = System.currentTimeMillis(); System.out.println(\u0026quot;æ€»å…±æ·»åŠ äº†\u0026quot;+i+\u0026quot;æ¡æ•°æ®\u0026quot;+\u0026quot;.è€—æ—¶ï¼š\u0026quot;+(endMs-startms)); }catch(IOException e) { throw new RuntimeException(\u0026quot;è¯»å–æ–‡ä»¶å¼‚å¸¸\u0026quot;); }catch(SQLException e) { try { conn.rollback(); } catch (SQLException e1) { // TODO Auto-generated catch block e1.printStackTrace(); } //åˆå¿˜è®°äº† throw new RuntimeException(\u0026quot;æ•°æ®åº“æ’å…¥å¼‚å¸¸ï¼\u0026quot;); } } public static void checkPhoneNumber(String PhoneNumber) { PhoneNumber = \u0026quot;%\u0026quot;+PhoneNumber+\u0026quot;%\u0026quot;; String sql = \u0026quot;select * from phone where MobileNumber like ?\u0026quot;; ResultSet rs = null; try { rs = JDBCUtils.executeQuery(sql, PhoneNumber); if(!rs.next()) { System.out.println(\u0026quot;å½“å‰ç‰ˆæœ¬æ²¡æœ‰\u0026quot;+PhoneNumber+\u0026quot;çš„ä¿¡æ¯\u0026quot;); // return; } //rs.next(); System.out.println(PhoneNumber+\u0026quot;æ‰‹æœºå·æ¥è‡ª\u0026quot;+rs.getString(\u0026quot;MobileArea\u0026quot;)+rs.getString(\u0026quot;MobileType\u0026quot;)); } catch (SQLException e) { // TODO Auto-generated catch block return; }finally { JDBCUtils.closeAll(rs); } } public static void main(String[] args) { // TODO Auto-generated method stub //å¯¼å…¥ä¸€æ¬¡å³å¯ //load(); while(true) { System.out.println(\u0026quot;è¯·è¾“å…¥æ‰‹æœºå·(è‡³å°‘7ä½)\u0026quot;); Scanner sc = new Scanner(System.in); String PhoneNumber = sc.nextLine(); if(PhoneNumber.equalsIgnoreCase(\u0026quot;exit\u0026quot;)||PhoneNumber.equalsIgnoreCase(\u0026quot;quit\u0026quot;)) { return; } PhoneNumber = PhoneNumber.substring(0,7); checkPhoneNumber(PhoneNumber); } } }  JDBCUtils ç¬¬ä¸€éé‡å†™ï¼š\n//å†æ¬¡ä¹¦å†™çš„æ—¶å€™ æ³¨æ„ å¯¹äºåƒæ‰çš„å¼‚å¸¸çš„å¤„ç† //ç¬¬äºŒ åœ¨é™æ€ä»£ç æ®µä¸­ åŠ è½½mysqlé©±åŠ¨ //é™æ€ä»£ç å—çš„ä¸¤ä¸ªä½œç”¨ï¼šåŠ è½½é…ç½®æ§ä»¶ï¼ŒåŠ è½½é©±åŠ¨\n //try....finally å¯ä»¥åœ¨throw SQLExceptionçš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œæœ€åå…³é—­éœ€è¦çš„è¿æ¥ //è¿›ä¸€æ­¥ä½“ä¼šä¸¤ä¸ªexecuteUpdateçš„åŒºåˆ«ï¼ˆexecuteQueryä¹Ÿæ˜¯ä¸€æ ·ï¼‰ //ä¸€ä¸ªæŠ›å‡ºå¼‚å¸¸ ä¸€ä¸ªåˆ™è´Ÿè´£æ¥ä½ å¹¶ç»§ç»­å…³é—­çš„ç›¸åº”çš„è¿æ¥ //try....finally å’Œtry...catch....finallyçš„é…åˆä½¿ç”¨ //åœ¨æŸ¥è¯¢æ—¶å€™çš„ç¼–å†™ åˆ™æ˜¯éƒ½æŠ›å‡ºï¼ ä¸è´Ÿè´£å…³é—­ï¼ï¼ ç­‰åˆ°æŸ¥è¯¢çš„æ—¶å€™ï¼ ç»Ÿä¸€çš„å»å…³é—­ //å› ä¸ºå¯èƒ½å­˜åœ¨å¤šå¤„æŸ¥è¯¢  å¤åˆ¶ä»£ç  JDBCUtils ç¬¬äºŒéé‡å†™ï¼š * @time 2015å¹´2æœˆ19æ—¥ä¸‹åˆ9:52:52 * 10:20å®Œæˆ 28minå·¦å³\n//ç¬¬ä¸‰æ¬¡é‡å†™ æ„è¯†åˆ°äº† é™æ€ä»£ç å¿«ä¸èƒ½åŠ è½½ æ£€æŸ¥æ€§çš„å¼‚å¸¸! åœ¨try\u0026mdash;catchçš„æ—¶å€™ //ä¸€å®šå¾—throw new RuntimeException æ‰ä¸è‡³äºæŠ¥é”™\n //å±…ç„¶å¿˜è®°äº†å…ˆé‡å†™ Connectionçš„åˆ›å»ºï¼ç›´æ¥close,!æœ‰ç‚¹é”™ä¹±çš„æ„Ÿè§‰ï¼ //åº”è¯¥æ˜¯æŒ‰ç…§é€»è¾‘çš„é¡ºåºè¿›è¡Œç¼–å†™ï¼Œå…ˆæ˜¯åˆ›å»ºè¿æ¥ï¼ æœ€ååœ¨å…³é—­ //åªä¸è¿‡å½“æ—¶æ˜¯è¿™æ ·æƒ³çš„ï¼ å…¶å®è¿™äº›å…³é—­ä¼šä¸€ç›´åå¤çš„ç”¨åˆ°ï¼Œ //å°±æƒ³ç€å…ˆæŠŠä»–ä»¬ç»™å†™ä¸Šï¼ä¹Ÿæ˜¯ç¬¦åˆé€»è¾‘ï¼å› ä¸ºé€»è¾‘é‡Œé¢ä»–ä»¬æ˜¯åå¤è¢« //è°ƒç”¨çš„å°æ’ä»¶ //åŒæ—¶åœ¨åˆ›å»ºconnectionå†ç–‘é—®æ˜¯å¦æŠ›å‡ºå¼‚å¸¸ï¼Ÿ æœ€ç»ˆæŠ›å‡ºäº†ï¼Ÿ //ä¸ºä»€ä¹ˆï¼Ÿ å› ä¸ºè¿™ä¸ªå¼‚å¸¸æ˜¯è‡ªå·±å¯ä»¥å¤„ç†çš„ //è¿è¿æ¥éƒ½æ‹¿ä¸åˆ° ï¼é‚£å°±ç›´æ¥è¿”å›å§ï¼è‚¯å®šç¨‹åºæ˜¯æœ‰é—®é¢˜çš„ //è‡³äºexecuteUpate executeQueryçš„å¼‚å¸¸éƒ½äº¤ç”± è°ƒç”¨è€…å»å¤„ç†ä»–çš„å¼‚å¸¸  å¤åˆ¶ä»£ç  JDBCUtils ç¬¬ä¸‰éé‡å†™ï¼š\n @time 2015å¹´2æœˆ19æ—¥ä¸‹åˆ10:21:46 10:40 ç»“æŸ 19min\n ä¹¦å†™ç¬¬å››éçš„æ—¶å€™ é‡åˆ°ä¸€ä¸ªé—®é¢˜ åœ¨executeUpdateçš„æ—¶å€™ æ˜¯ä¸æ˜¯æ”¹åœ¨  try\u0026hellip;finally çš„tryå—å°±åº”è¯¥è¿”å›äº† è€Œä¸æ˜¯finallyçš„åé¢ å¦‚æœåœ¨åé¢ è‚¯å®šæ˜¯é”™è¯¯çš„ï¼ï¼ï¼å› ä¸ºèµ„æºå·²ç»å…³é—­ å¤åˆ¶ä»£ç  JDBCUtils ç¬¬å››éé‡å†™ï¼š   @time 2015å¹´2æœˆ19æ—¥ä¸‹åˆ10:41:37\n 10:55 14min\n ","date":1431327521,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327521,"objectID":"2916c8333c74c93898955d7a70f373a8","permalink":"/blog/2015/05/11/2yue-14ri-javaban-mysql/","publishdate":"2015-05-11T14:58:41+08:00","relpermalink":"/blog/2015/05/11/2yue-14ri-javaban-mysql/","section":"archives","summary":"","tags":null,"title":"2æœˆ14æ—¥Javaç­mysql","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"ç¬¬ä¸€éƒ¨åˆ† ï¼šç¬”è®° FileChooserDialog\n1ã€ åˆ›å»ºï¼šint gtk_file_chooser_dialog_new(String title,int parentWindow, int action, String first_button_text)ï¼šactionå¯é€‰å€¼GTK_FILE_CHOOSERACTION*ï¼šOPEN(æ‰“å¼€æ–‡ä»¶)ã€SAVE(ä¿å­˜æ–‡ä»¶)ã€SELECT_FOLDER(é€‰æ‹©æ–‡ä»¶å¤¹)ã€CREATE_FOLDER(åˆ›å»ºæ–‡ä»¶å¤¹) 2ã€gtk_file_chooser_set_select_multipleæ˜¯å¦å…è®¸å¤šé€‰ï¼ˆä¸€èˆ¬æ˜¯è®¾ç½®ä¸Šï¼‰ gtk_file_chooser_set_current_nameè®¾ç½®é»˜è®¤æ–‡ä»¶å gtk_file_chooser_get_filenameå¾—åˆ°é€‰æ‹©çš„æ–‡ä»¶å(å•é€‰) gtk_file_chooser_get_filenameså¾—åˆ°é€‰æ‹©çš„æ–‡ä»¶åï¼ˆæ•°ç»„ï¼Œå¤šé€‰ï¼‰ gtk_file_chooser_set_do_overwrite_confirmationé€‰æ‹©å·²ç»å­˜åœ¨çš„æ–‡ä»¶æ˜¯å¦æç¤ºè¦†ç›–ï¼Œä¸€èˆ¬æ˜¯ç”¨äºä¿å­˜æ–‡ä»¶ï¼ˆåœ¨ä½œä¸šä¸­æœ‰ä½“ç°ï¼‰ 3ã€æ–‡ä»¶è¿‡æ»¤å™¨ gtk_file_filter_newï¼šåˆ›å»ºè¿‡æ»¤å™¨ gtk_file_filter_set_nameè®¾ç½®æ˜¾ç¤ºçš„åå­— gtk_file_filter_add_patternæ·»åŠ è¿‡æ»¤é€šé…ç¬¦ï¼šç¬¬äºŒä¸ªå‚æ•°æ ¼å¼â€œ*.txtâ€ï¼Œè‹¥æ˜¯å¤šä¸ªåˆ™å¤šæ¬¡æ‰§è¡Œè¿™ä¸ªå‡½æ•° gtk_file_chooser_add_filter(int chooser,int filter)å°†è¿‡æ»¤å™¨æ·»åŠ åˆ°chooserä¸­\nTreeView Treemodalçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ æœ‰ç‚¹æ„Ÿè§‰äº†\nTreeViewæ˜¯åŸºäºMVCæ¨¡å¼è®¾è®¡çš„ï¼ˆå…³é”®ç‚¹1ï¼‰ï¼› ä¹Ÿå°±æ˜¯è¯´éœ€è¦æœ‰ä¸€ä¸ªMï¼ŒåŒæ—¶åˆä¸€ä¸ªV æŠŠMå’ŒVè”ç³»èµ·æ¥çš„å‡½æ•°å°±å«åšCï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥æ”¹åä¸ºMVFã€‚ Cçš„ä½œç”¨å¯èƒ½æ˜¯ä¿®æ”¹Mçš„å€¼ï¼Œå¹¶å®æ—¶æ˜¾ç¤ºåœ¨Vä¸­ï¼› åˆæˆ–è€…é€šè¿‡ä¿®æ”¹Vçš„æ•°æ®ï¼Œä¹Ÿèƒ½å¤Ÿå®æ—¶åé¦ˆåˆ°Mä¸­ï¼› æ‰€ä»¥çŒœæµ‹åº”è¯¥æ˜¯MVC.pngï¼š\næ‰€ä»¥æˆ‘ä»¬åº”è¯¥éœ€è¦æ‹¥æœ‰æ•°æ®ï¼šMï¼ˆä¹Ÿå°±æ˜¯é€šè¿‡liststoreåˆ›å»ºï¼‰ å¦‚ä½•è®¾ç½®Mæ˜¯Vçš„Modelå¾ˆé‡è¦,è¿™æ ·å°±å®ç°äº†äº¤äº’çš„è¿‡ç¨‹ï¼Œä½ å˜æˆ‘æ˜¾ï¼ˆä½ æ˜¯M,æˆ‘æ˜¯Vï¼‰,ä½ å˜æˆ‘æ”¹ï¼ˆä½ æ˜¯V,æˆ‘æ˜¯Mï¼‰ å½“æˆ‘ä»¬è·å¾—äº†æ•°æ®å°±å¯ä»¥é€šè¿‡å¤©çŒ«çš„æ·˜å®æ¥å–äº†ï¼ˆè¿™å°±æ˜¯treeviewï¼‰ æˆ‘ä»¬ä¹Ÿå¯ä»¥å¸è´§å’Œæ·»è´§ï¼Œè¿™å°±æ˜¯Cäº†ã€‚ 1. GTK.gtk columns æ•°æ®åº“çš„å­—æ®µã€‚ 2. åŸæ¥iterå°±æ˜¯æ•°æ®åº“çš„è¡Œ Columnsçš„åˆ— 3. åˆæ˜ç™½äº†ä¸€ç‚¹ åœ¨æ‰€æœ‰çš„GTK.gtk_*_newçš„intå¯¹è±¡éƒ½ä¸æ˜¯ç®€å•çš„æ•´æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ ‡è¯†ï¼Œæ¯”å¦‚int columnæ˜¯åˆ—å¯¹è±¡æ ‡è¯† Int modelæ˜¯æ¨¡å‹å¯¹è±¡æ ‡è¯† int textview æ˜¯textviewå¯¹è±¡æ ‡è¯† int gridHouseæ˜¯ç½‘æ ¼å¸ƒå±€å¯¹è±¡æ ‡è¯†ï¼Œ å½’æ ¹ç»“åº•éƒ½å¾—ç¬¬ä¸€ååº” è¿‡æ¥è¿™æ˜¯ä¸€ä¸ªå¯¹è±¡æ ‡è¯†ï¼Œè®¤æ¸…è¿™äº›å¯¹è±¡å°±å¯ä»¥ç¢ç£¨è¿™äº›æ–¹æ³•ä¹‹é—´çš„é€»è¾‘å…³ç³»äº†ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœä¸€ä¸ªæ–¹æ³•æœ‰æŸä¸ªå¯¹è±¡æ ‡è¯†é‚£ä¹ˆè‚¯å®š å°±æ˜¯è¯´å¾—äº‹å…ˆåˆ›å»ºè¿™ä¸ªå¯¹è±¡æˆ–è€…é€šè¿‡åå°„æœºåˆ¶è·å¾—ã€‚å½“ç„¶å¾—çœ‹æ¸…æ˜¯ä¸æ˜¯å¯¹è±¡æ ‡è¯†ã€‚é€šè¿‡å¯¹è±¡æ ‡è¯†è®¤æ¸…é€»è¾‘å…³ç³»ï¼ˆå…³é”®ç‚¹2ï¼‰\nè«åå…¶å¦™çš„å¤šäº† tree_modelçš„åˆ›å»º ï¼Œ åº”è¯¥åŠ ä¸Šä¸€æ­¥ æ— è®ºæ˜¯gtk_tree_model_get_iter_first è¿˜æ˜¯gtk_tree_model_iter_next åˆæˆ–è€…æ˜¯gtk_tree_model_get_value è¿˜æ˜¯gtk_tree_model_set_valueéƒ½æ¶‰åŠåˆ° tree_modelçš„å¯¹è±¡æ ‡è¯†ï¼Œå¿…é¡»æœ‰tree_modelå¯¹è±¡æ ‡è¯†ï¼Œ è”ç³»åˆ°ç¬¬ä¸€æ­¥ç„¶åæŠŠGtkListStoreè®¾ç½®ä¸ºGtkTreeViewçš„Model ï¼Œä¹Ÿå°±æ˜¯list_storeå…¶å®å°±æ˜¯tree_model ï¼Œå› ä¸º ListStoreå®ç°äº†TreeModelæ¥å£ï¼Œæ‰€ä»¥æœ‰çš„æ“ä½œä»¥gtk_tree_modelå¼€å¤´ã€‚ä¸€åˆ‡å°±ç®—è¯´é€šäº† å…³é”®ç‚¹3\nå…³é”®æ€§ä¸€æ­¥ è®¾ç½®æ•°æ®ä»“åº“çš„æ˜¾ç¤ºã€‚ void gtk_tree_view_set_model(int tree_view, int model)æŠŠlistmodelå¯¹è±¡è®¾ç½®æ˜¾ç¤ºåˆ°tree_viewä¸Šï¼ˆå…³é”®ç‚¹4 æ˜¾ç¤ºå‡ºæ¥ï¼‰ã€‚ è®¤æ¸…äº”ä¸ªå¯¹è±¡æ ‡è¯†ï¼š 1 list_storeï¼ˆtree_modelï¼‰å¯¹è±¡æ ‡è¯† 2.tree_iterå¯¹è±¡æ ‡è¯† 3. Tree_viewå¯¹è±¡æ ‡è¯† 4. treeViewColumnå¯¹è±¡æ ‡è¯† 5.cellRenderå¯¹è±¡æ ‡è¯†\nä¸€ä¸ªæ€è·¯ï¼š æ€è·¯ï¼šé¦–å…ˆåˆ›å»ºGtkListStoreï¼ŒæŠŠè¦æ˜¾ç¤ºæ•°æ®æ”¾åˆ°GtkListStoreä¸­ï¼Œæ¥ç€åˆ›å»ºGtkTreeViewï¼Œæ·»åŠ åˆ—é…ç½®åˆ—å±æ€§ï¼Œç„¶åæŠŠGtkListStoreè®¾ç½®ä¸ºGtkTreeViewçš„Modelï¼Œæ•°æ®å°±å¯ä»¥æ˜¾ç¤ºå‡ºæ¥ã€‚å¯¹æ•°æ®æ·»åŠ ã€éå†ç­‰æ“ä½œçš„æ—¶å€™éƒ½è¦ä½¿ç”¨è¿­ä»£å™¨(ç±»ä¼¼TextViewä¸­çš„Iter)ï¼Œint gtk_tree_iter_new()åˆ›å»ºè¿­ä»£å™¨ã€‚ ä¸€èˆ¬æ­¥éª¤ï¼š 1ï¼š åˆ©ç”¨treeviewåˆ›å»ºç•Œé¢ï¼Œå¹¶åˆ›å»ºæ‰€éœ€çš„å­—æ®µï¼Œè¾¾åˆ°Viewçš„ç›®çš„ 2ï¼š æ ¹æ®å­—æ®µæ•°ç›®ï¼Œåˆ›å»ºliststoreçš„æ•°æ®ä»“åº“ï¼Œè¾¾åˆ°Modelçš„ç›®çš„ 3ï¼š åˆ©ç”¨iterå¯¹è±¡æ ‡è¯†ï¼Œæ’å…¥ã€éå†ã€åˆ é™¤ã€å¢åŠ ã€‚ å…·ä½“çœ‹ ä½œä¸š\nå¦å¤–treeviewçš„è¡Œé€‰æ‹©é—®é¢˜ï¼š è¡Œé€‰æ‹©è¦é€šè¿‡GtkSelectionå¯¹è±¡è¿›è¡Œï¼Œint gtk_tree_view_get_selection(int tree_view)è·å¾—è¡Œé€‰æ‹©å¯¹è±¡ 2ã€TreeViewæ”¯æŒå•é€‰ã€å¤šé€‰ç­‰æ¨¡å¼ï¼Œé»˜è®¤æ˜¯å•é€‰ã€‚void gtk_tree_selection_set_mode(int tree_selection,int type) è®¾ç½®é€‰æ‹©æ¨¡å¼ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºGtkSelectionï¼›typeå¯é€‰å€¼ï¼šGTK_SELECTION_SINGLEå•é€‰ï¼ŒGTK_SELECTION_MULTIPLEå¤šé€‰ï¼Œå…¶ä»–ä¸ç”¨ç®¡ 3ã€int[] gtk_tree_view_get_selection_indices(int tree_view)è·å¾—é€‰ä¸­è¡Œçš„åºå·ï¼Œå› ä¸ºæ”¯æŒå¤šé€‰ï¼Œæ‰€ä»¥è¿”å›æ•°ç»„ 4ã€è·å¾—è¡Œé€‰ä¸­æ”¹å˜ä¿¡å·ï¼Œç›‘å¬GtkSelectionçš„\u0026rdquo;changed\u0026rdquo;ä¿¡å·ã€‚ 5ã€è·å¾—åŒå‡»äº‹ä»¶ï¼Œç›‘å¬\u0026rdquo;button-press-event\u0026rdquo;ä¿¡å·ï¼Œåˆ¤æ–­if(GTK.gdk_event_get_type(eventData)==GTK.GDK_2BUTTON_PRESS)å¾—çŸ¥æ˜¯å¦æ˜¯åŒå‡»\nToolBar 1ã€int gtk_toolbar_new()åˆ›å»ºå·¥å…·æ å®¹å™¨ 2ã€void gtk_toolbar_insert(int toolbar, int item,int pos)å°†å·¥å…·æ é¡¹æ·»åŠ åˆ°å·¥å…·æ ï¼Œitemï¼šåé¢è®²çš„å·¥å…·æ é¡¹ï¼Œposæ’å…¥çš„ä½ç½® 3ã€å·¥å…·æ é¡¹æœ‰æŒ‰é’®ã€ä¸‹æ‹‰èœå•æŒ‰é’®ã€åˆ†éš”æ ã€å¼€å…³ç­‰å¤æ‚å†…å®¹ï¼Œè¿™é‡Œä¸ä»‹ç»ï¼Œåªä»‹ç»ç®€å•å¸¸ç”¨çš„GtkToolButtonã€‚ int gtk_tool_button_new(int icon_widget,String label)åˆ›å»ºGtkToolButtonã€‚icon_widgetä¸ºæ˜¾ç¤ºçš„æ§ä»¶idï¼Œå¯ä»¥åœ¨æŒ‰é’®ä¸Šæ˜¾ç¤ºå…¶ä»–æ§ä»¶ï¼Œä¸€èˆ¬ä¼ 0ï¼›labelä¸ºæ ‡é¢˜ã€‚ void gtk_tool_button_set_stock_id(int button,String stock_id); è®¾ç½®æŒ‰é’®ä¸Šæ˜¾ç¤ºçš„å›¾ç‰‡ã€‚ å“åº”å·¥å…·æ æŒ‰é’®ç‚¹å‡»åªè¦è¿æ¥\u0026rdquo;clicked\u0026rdquo;ä¿¡å·å³å¯\nCalendar 1ã€æ—¥å†Calendar int gtk_calendar_new() int gtk_calendar_get_year(int calendar)ã€int gtk_calendar_get_month(int calendar)ã€int gtk_calendar_get_day(int calendar)è·å¾—é€‰æ‹©çš„å¹´æœˆæ—¥ ä¿¡å·ï¼š\u0026rdquo;day-selected\u0026rdquo;ï¼šé€‰æ‹©æ—¥æœŸå‘ç”Ÿå˜åŒ–ï¼›\u0026rdquo;day-selected-double-click\u0026rdquo;åŒå‡»ä¸€ä¸ªæ—¥æœŸã€‚ gtk_progressbar* è¿›åº¦æ¡ ä½œä¸š gtkswitch* å¼€å…³ ä½œä¸š menu //åˆ†ä¸‰æ­¥ //1åˆ›å»ºå•ä¸€èœå• //2åˆ›å»ºä¸€ä¸ªèœå•å¤´ //3åˆ›å»ºæ€»çš„èœå•æ¡ï¼ŒæŠŠè®¸å¤šèœå•å¤´éƒ½æŒ‚åˆ°èœå•æ¡ä¸Š å…·ä½“çœ‹toolbarçš„ä½œä¸šã€‚\ngtk_statusicon* å³ä¸‹è§’çš„ç³»ç»Ÿå›¾ç›˜å›¾æ ‡ ä½œä¸š\nç¬¬äºŒéƒ¨åˆ† ï¼šä½œä¸š\næ–‡ä»¶é€‰æ‹©å™¨+å·¥å…·æ \nimport java.io.BufferedInputStream; import java.io.BufferedReader; import java.io.BufferedWriter; import java.io.File; import java.io.FileInputStream; import java.io.FileOutputStream; import java.io.FileReader; import java.io.IOException; import java.io.InputStream; import java.io.InputStreamReader; import java.io.OutputStream; import java.io.OutputStreamWriter; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ1æ—¥ä¸‹åˆ5:56:29 * @version TestFileChooser V1.0 ç®€æ˜“è®°äº‹æœ¬ æ‰“å¼€æ–‡ä»¶ ä¿å­˜æ–‡ä»¶ æ˜¾ç¤ºç…§ç‰‡ * @version TestFileChooser V2.0 å¢åŠ äº†æ‰“å¼€å¯¹è¯æ¡† å¹¶æ·»åŠ äº†å¯¹è¯æ¡†å†…éƒ¨æ§ä»¶çš„äº‹ä»¶ * @version TestFileChooser V3.0 å¢åŠ äº†å·¥å…·æ  */ import com.rupeng.gtk4j.*; public class TestFileChooser2 { /** * @param args */ static int window; static int gridHouse; static int scrolledBar; static int textview; static int btnApple; static String[] selectFiles = null; public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_init(); window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); GTK.gtk_widget_show(window); GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); int btnApple = GTK.gtk_button_new_with_label(\u0026quot;æ‰“å¼€æ–‡ä»¶\u0026quot;); int btnBanana = GTK.gtk_button_new_with_label(\u0026quot;ä¿å­˜æ–‡ä»¶\u0026quot;); int btnOrange = GTK.gtk_button_new_with_label(\u0026quot;æ˜¾ç¤ºå›¾ç‰‡æ–‡ä»¶\u0026quot;); int btnPeal = GTK.gtk_button_new_with_label(\u0026quot;æ‰“å¼€å¯¹è¯æ¡†\u0026quot;); //åˆ›å»ºå¸ƒå±€ gridHouse= GTK.gtk_grid_new(); GTK.gtk_widget_show(gridHouse); GTK.gtk_container_add(window, gridHouse); //GTK.gtk_widget_set_size_request(window, 500, 500); //æ·»åŠ æ§ä»¶åˆ°åˆç§Ÿæˆ¿ int start = 0; createToolbar(gridHouse,start); GTK.gtk_grid_attach(gridHouse, btnApple, 0, 2, 1, 1); GTK.gtk_grid_attach(gridHouse, btnBanana, 1, 2, 1, 1); GTK.gtk_grid_attach(gridHouse, btnOrange, 2, 2, 1, 1); GTK.gtk_grid_attach(gridHouse, btnPeal, 3, 2, 1, 1); createTextView(window,gridHouse,3); //æ˜¾ç¤ºæ§ä»¶ GTK.gtk_widget_show(btnApple); GTK.gtk_widget_show(btnBanana); GTK.gtk_widget_show(btnOrange); GTK.gtk_widget_show(btnPeal); //æ·»åŠ æŒ‰é’®äº‹ä»¶ insertButtonEvent(btnApple); insertButtonSaveEvent(btnBanana); insertButtonPictureEvent(btnOrange); insertButtonDialogEvent(btnPeal); //å¯åŠ¨å¾ªç¯ GTK.gtk_main(); } public static void saveFile(int textview) { int dlg1 = GTK.gtk_file_chooser_dialog_new(\u0026quot;ä¿å­˜æ–‡ä»¶\u0026quot;, 0, GTK.GTK_FILE_CHOOSER_ACTION_SAVE,\u0026quot;ä¿å­˜\u0026quot;); GTK.gtk_file_chooser_set_do_overwrite_confirmation(dlg1, true); //String filename = GTK.gtk_file_chooser_get_filename(dlg1); System.out.println(\u0026quot;å·²è¿›å…¥save\u0026quot;); //SaveOneFile(filename,textview); int ret = GTK.gtk_dialog_run(dlg1); if(ret == GTK.GTK_RESPONSE_CANCEL) { GTK.gtk_widget_destroy(dlg1); }else { String filename = GTK.gtk_file_chooser_get_filename(dlg1); System.out.println(filename); SaveOneFile(filename,textview); GTK.gtk_widget_destroy(dlg1); } } public static String[] selectFile() { int dlg = GTK.gtk_file_chooser_dialog_new(\u0026quot;æ‰“å¼€æ–‡ä»¶\u0026quot;, 0, GTK.GTK_FILE_CHOOSER_ACTION_OPEN,\u0026quot;æ‰“å¼€\u0026quot;); GTK.gtk_file_chooser_set_select_multiple(dlg, true); //åˆ›å»ºè¿‡æ»¤å™¨ int filter = GTK.gtk_file_filter_new(); GTK.gtk_file_filter_add_pattern(filter, \u0026quot;*.txt\u0026quot;); GTK.gtk_file_filter_add_pattern(filter, \u0026quot;*.java\u0026quot;); GTK.gtk_file_filter_set_name(filter, \u0026quot;æ–‡æœ¬æ–‡ä»¶\u0026quot;); GTK.gtk_file_chooser_add_filter(dlg, filter); int ret = GTK.gtk_dialog_run(dlg); String[] filenames = null; if(ret == GTK.GTK_RESPONSE_OK) { filenames = GTK.gtk_file_chooser_get_filenames(dlg); for(int i = 0 ; i\u0026lt; filenames.length ; i++) { System.out.println(\u0026quot;é€‰ä¸­æ–‡ä»¶å\u0026quot;+i+\u0026quot;: \u0026quot;+filenames[i]); } GTK.gtk_widget_destroy(dlg); }else { GTK.gtk_widget_destroy(dlg); } return filenames; } public static void selectFile(int gridHouse,int start) { int dlg = GTK.gtk_file_chooser_dialog_new(\u0026quot;æ‰“å¼€æ–‡ä»¶\u0026quot;, 0, GTK.GTK_FILE_CHOOSER_ACTION_OPEN,\u0026quot;æ‰“å¼€\u0026quot;); GTK.gtk_file_chooser_set_select_multiple(dlg, true); //åˆ›å»ºè¿‡æ»¤å™¨ int filter = GTK.gtk_file_filter_new(); GTK.gtk_file_filter_add_pattern(filter, \u0026quot;*.jpg\u0026quot;); GTK.gtk_file_filter_add_pattern(filter, \u0026quot;*.png\u0026quot;); GTK.gtk_file_filter_add_pattern(filter, \u0026quot;*.gif\u0026quot;); GTK.gtk_file_filter_set_name(filter, \u0026quot;å›¾ç‰‡æ–‡ä»¶\u0026quot;); GTK.gtk_file_chooser_add_filter(dlg, filter); int ret = GTK.gtk_dialog_run(dlg); String[] filenames = null; if(ret == GTK.GTK_RESPONSE_OK) { filenames = GTK.gtk_file_chooser_get_filenames(dlg); for(int i = 0 ; i\u0026lt; filenames.length ; i++) { System.out.println(\u0026quot;é€‰ä¸­æ–‡ä»¶å\u0026quot;+i+\u0026quot;: \u0026quot;+filenames[i]); int temp = GTK.gtk_image_new_from_file(filenames[i]); GTK.gtk_grid_attach(gridHouse, temp, i, start, 3, 1); GTK.gtk_widget_show(temp); } GTK.gtk_widget_destroy(dlg); }else { GTK.gtk_widget_destroy(dlg); } } public static void showAllFiles(String[] filenames,int textview) { for(int i = 0 ; i \u0026lt; filenames.length; i++) { showOneFile(filenames[i],textview); } } /* public static void showOneFile(String filename, int textview) { try ( InputStream fis = new FileInputStream(filename); BufferedInputStream bis = new BufferedInputStream(fis); ) { int len = 0; byte[] fileToFile = new byte[512*1024]; while((len = bis.read(fileToFile))!= -1) // -1è¯»å–å®Œæ¯• { //InsertStringToTextViewFunction(textview,fileToFile.toString()); InsertStringToTextViewFunction(textview,new String(fileToFile,\u0026quot;gb2312\u0026quot;)); } } catch(IOException e) { System.out.println(\u0026quot;æ–‡ä»¶è¯»å…¥å¼‚å¸¸\u0026quot;); } }*/ public static void showOneFile(String filename, int textview) { try ( InputStream is = new FileInputStream(filename); InputStreamReader osr = new InputStreamReader(is); BufferedReader br = new BufferedReader(osr); ) { String temp= filename.substring(filename.lastIndexOf('\\\\')+1); System.out.println(temp); InsertStringToTextViewFunction(textview,\u0026quot;******************\\nå½“æœŸæ–‡ä»¶ä¸º\u0026quot;+filename+\u0026quot;\\n******************\\n\\n\u0026quot;+temp+\u0026quot; æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\\n+---------------------------------------------------------------------------+\\n\u0026quot;); String content = null; while((content = br.readLine())!=null) // -1è¯»å–å®Œæ¯• { //InsertStringToTextViewFunction(textview,fileToFile.toString()); InsertStringToTextViewFunction(textview,new String(content)); } InsertStringToTextViewFunction(textview,\u0026quot;\\n+---------------------------------------------------------------------------+\\n******************\\næ–‡ä»¶\u0026quot;+filename+\u0026quot;è¯»å–ç»“æŸ\\n******************\\n\u0026quot;); } catch(IOException e) { System.out.println(\u0026quot;æ–‡ä»¶è¯»å…¥å¼‚å¸¸\u0026quot;); } } public static void SaveOneFile(String filename, int textview) { try ( OutputStream os = new FileOutputStream(filename); OutputStreamWriter osw = new OutputStreamWriter(os); BufferedWriter bw = new BufferedWriter(osw); ) { String temp= filename.substring(filename.lastIndexOf('\\\\')+1); System.out.println(temp); int textBuffer = GTK.gtk_text_view_get_buffer(textview); int textIter = GTK.gtk_text_iter_new(); //è¿™æ˜¯ä¸€ä¸ªç©ºçš„iterï¼Œéœ€è¦ç”¨textBufferè¿›è¡Œèµ‹å€¼ GTK.gtk_text_buffer_get_end_iter(textBuffer, textIter);// æˆ–è€…textviewçš„textBufferçš„æœ«å°¾ï¼ String tempText = GTK.gtk_text_buffer_get_text(textBuffer); //while(tempText != null) // -1è¯»å–å®Œæ¯• { //InsertStringToTextViewFunction(textview,fileToFile.toString()); bw.write(tempText); bw.newLine(); // GTK.gtk_text_iter_backward_char(textIter); // tempText = GTK.gtk_text_buffer_get_text(textBuffer); } } catch(IOException e) { System.out.println(\u0026quot;æ–‡ä»¶è¯»å…¥å¼‚å¸¸\u0026quot;); } } public static void createTextView(int window, int gridHouse,int start) { textview = GTK.gtk_text_view_new(); createScrolledBar(window,textview,gridHouse,start); //GTK.gtk_text_view_set_wrap_mode(textview,GTK.GTK_WRAP_WORD); GTK.gtk_text_view_set_wrap_mode(textview,GTK.GTK_WRAP_WORD_CHAR); GTK.gtk_widget_show(textview); } public static void createScrolledBar(int window, int textview, int gridHouse,int start) { scrolledBar = GTK.gtk_scrolled_window_new(); GTK.gtk_widget_show(scrolledBar); GTK.gtk_widget_set_size_request(scrolledBar, 200, 200); GTK.gtk_grid_attach(gridHouse, scrolledBar, 0, start, 1, 1); GTK.gtk_container_add(scrolledBar, textview); } //å°è£…äº† TextViewçš„è¿­ä»£å™¨æ“ä½œã€‚ã€‚ã€‚ /** * * @param textview å¤šè¡Œæ–‡æœ¬TextViewçš„æ ‡è¯† * @param temp æ’å…¥TextView çš„å­—ç¬¦ä¸²ã€‚ */ public static void InsertStringToTextViewFunction(int textview,String temp) { //TextIteræ˜¯ä¸€ä¸ªTextViewçš„è¿­ä»£å™¨ã€‚ int textBuffer = GTK.gtk_text_view_get_buffer(textview); int textIter = GTK.gtk_text_iter_new(); //è¿™æ˜¯ä¸€ä¸ªç©ºçš„iterï¼Œéœ€è¦ç”¨textBufferè¿›è¡Œèµ‹å€¼ //GTK.gtk_text_iter_forward_to_end(textIter); GTK.gtk_text_buffer_get_end_iter(textBuffer, textIter);// æˆ–è€…textviewçš„textBufferçš„æœ«å°¾ï¼ GTK.gtk_text_buffer_insert(textBuffer, textIter, temp); //GTK.gtk_text_buffer_g GTK.gtk_text_iter_free(textIter); } /** * * @param textview TextViewçš„å¤šè¡Œæ–‡æœ¬çš„æ ‡è¯† * @return è¿”å›çš„å­—ç¬¦ä¸² */ public static String GetStringFromTextViewFunction(int textview) { //TextIteræ˜¯ä¸€ä¸ªTextViewçš„è¿­ä»£å™¨ã€‚ int textBuffer = GTK.gtk_text_view_get_buffer(textview); int textIter = GTK.gtk_text_iter_new(); //è¿™æ˜¯ä¸€ä¸ªç©ºçš„iterï¼Œéœ€è¦ç”¨textBufferè¿›è¡Œèµ‹å€¼ GTK.gtk_text_buffer_get_end_iter(textBuffer, textIter);// æˆ–è€…textviewçš„textBufferçš„æœ«å°¾ï¼ String temp = GTK.gtk_text_buffer_get_text(textBuffer); String[] splitArray = temp.split(\u0026quot;\\\\n\u0026quot;); temp = splitArray[splitArray.length-1]; System.out.println(temp); return temp; //GTK.gtk_text_buffer_g //GTK.gtk_text_iter_free(textIter); } public static boolean showInfo( String message,String title) { int msgDlg = GTK.gtk_message_dialog_new(0, GTK.GTK_DIALOG_DESTROY_WITH_PARENT| GTK.GTK_DIALOG_MODAL,GTK.GTK_MESSAGE_INFO, GTK.GTK_BUTTONS_OK,message); GTK.gtk_window_set_title(msgDlg, title); int ret = GTK.gtk_dialog_run(msgDlg); GTK.gtk_widget_destroy(msgDlg); return ret == GTK.GTK_RESPONSE_OK; } public static void createDialog() { int dialogApple = GTK.gtk_dialog_new(); int btnApple = GTK.gtk_button_new_with_label(\u0026quot;å¹½çµç‚¹å‡»\u0026quot;); //action_areè·å¾—ä¸€ä¸ª ç±»ä¼¼box,gridçš„ä½œç”¨ï¼Œå¯ä»¥æ·»åŠ å®¹å™¨ int areaDialog = GTK.gtk_dialog_get_action_area(dialogApple); GTK.gtk_widget_show(btnApple); GTK.gtk_container_add(areaDialog, btnApple); GTK.g_signal_connect(btnApple, \u0026quot;clicked\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub showInfo(\u0026quot;æ¬£ç„¶æ˜¯ä¸æ˜¯å¾ˆç¾\u0026quot;,\u0026quot;é‚£å¯ä¸\u0026quot;); } }, null); int ret = GTK.gtk_dialog_run(dialogApple); if(ret == GTK.GTK_RESPONSE_OK) { System.out.println(\u0026quot;å†è§\u0026quot;); GTK.gtk_widget_destroy(dialogApple); } GTK.gtk_widget_destroy(dialogApple); } // ********************äº‹ä»¶æ•´ä½“å¤„ç† åŒºåŸŸ*************************** /** * * @param btnSin æŒ‰é’®çš„æ ‡è¯† * @param tv1 textviewçš„æ ‡è¯† */ public static void insertButtonEvent(final int btnSin,final int tv1) { GTK.g_signal_connect(btnSin, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); String temp = GTK.gtk_button_get_label(btnSin); InsertStringToTextViewFunction(tv1,temp); //isEnter = false; } }, null); } public static void insertButtonEvent(final int btnSin) { GTK.g_signal_connect(btnSin, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); GTK.gtk_widget_show(scrolledBar); GTK.gtk_widget_set_size_request(scrolledBar, 400, 400); String temp = GTK.gtk_button_get_label(btnSin); selectFiles = selectFile() ; //isEnter = false; showAllFiles(selectFiles, textview); } }, null); } public static void insertButtonSaveEvent(final int btnSin) { GTK.g_signal_connect(btnSin, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); saveFile(textview); } }, null); } public static void insertButtonPictureEvent(final int btnSin) { GTK.g_signal_connect(btnSin, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); GTK.gtk_widget_hide(scrolledBar); selectFile(gridHouse, 2) ; } }, null); } public static void insertButtonDialogEvent(final int btnSin) { GTK.g_signal_connect(btnSin, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); createDialog(); } }, null); } public static void createToolbar(int gridHouse,int start) { //åˆ›å»ºå·¥å…·æ å®¹å™¨ int tbApple = GTK.gtk_toolbar_new(); GTK.gtk_widget_show(tbApple); GTK.gtk_widget_set_size_request(tbApple, 300, 20); GTK.gtk_grid_attach(gridHouse, tbApple, 0, start, 1, 1); int btnNew = GTK.gtk_tool_button_new(0, \u0026quot;æ–°å»º\u0026quot;); GTK.gtk_tool_button_set_stock_id(btnNew, GTK.GTK_STOCK_NEW); GTK.gtk_widget_show(btnNew); GTK.gtk_toolbar_insert(tbApple, btnNew, 0); final int btnOpen = GTK.gtk_tool_button_new(0, \u0026quot;æ‰“å¼€\u0026quot;); GTK.gtk_tool_button_set_stock_id(btnOpen, GTK.GTK_STOCK_OPEN); GTK.gtk_widget_show(btnOpen); GTK.gtk_toolbar_insert(tbApple, btnOpen, 1); GTK.g_signal_connect(btnOpen, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { System.out.println(\u0026quot;hello\u0026quot;); // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); GTK.gtk_widget_show(scrolledBar); GTK.gtk_widget_set_size_request(scrolledBar, 400, 400); //String temp = GTK.gtk_button_get_label(btnOpen); selectFiles = selectFile() ; //isEnter = false; showAllFiles(selectFiles, textview); } }, null); int btnSave = GTK.gtk_tool_button_new(0, \u0026quot;ä¿å­˜\u0026quot;); GTK.gtk_tool_button_set_stock_id(btnSave, GTK.GTK_STOCK_SAVE); GTK.gtk_widget_show(btnSave); GTK.gtk_toolbar_insert(tbApple, btnSave, 2); GTK.g_signal_connect(btnSave, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); saveFile(textview); } }, null); } }  treeview ç®€å•çš„å¢åŠ ç”¨æˆ·ï¼Œè°ƒæ•´treeviewçš„æ ·å¼ï¼Œæœªå®ç°åˆ é™¤\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ2æ—¥ä¸‹åˆ6:02:11 * @version TestGTKTreeView V1.0 ä¸€ä¸ªåŸºæœ¬çš„treeviewçš„ä½¿ç”¨æµç¨‹ + å­—æ®µåˆ›å»º+è®°å½•æ·»åŠ  * @version TestGTKTreeView V2.0 å¢åŠ äº†éå†å¤„ç† ä»¥åŠæ˜¾ç¤ºæŸè¡ŒæŸåˆ—çš„ä¿¡æ¯ * @version TestGTKTreeView V3.0 å¢åŠ äº†â€åˆ—æ§åˆ¶â€œ ï¼ï¼treeview çš„æŸåˆ—å¯æ˜¾ç¤ºï¼Œå¯æ‹‰ä¼¸ ï¼Œå¯æ’åºï¼Œå¯è°ƒæ•´ * åˆ—æ§åˆ¶åªæ˜¯æ”¹å˜treeviewçš„è¡¨ç°ï¼Œè€Œä¸ä¼šæ”¹å˜liststoreçš„modelçš„å†…éƒ¨å€¼ * @version TestGTKTreeView V4.0 å¢åŠ äº†æ·»åŠ è®°å½•çš„åŠŸèƒ½ * @version TestGTKTreeView V5.0 å¢åŠ äº†getSelection è¿›è¡Œè¡Œæ“ä½œï¼Œ å¹¶æœªå–å‡ºæ•°æ®ï¼Œä¹Ÿå¹¶æœªåˆ é™¤æ•°æ® */ public class TestGTKTreeView { /** * @param args */ static int window; static int gridHouse; static int liststore; static int listiter; static boolean columnVisible = false; //ç”¨static å˜é‡ ä¸è¦ç”¨finalå˜é‡ã€‚ static boolean columnResize = true; //ç”¨static å˜é‡ ä¸è¦ç”¨finalå˜é‡ã€‚ static boolean columnRecordable = true; // è®¾ç½®å¯æ‹‰åŠ¨ static int entryID; static int entryName; static int entryAge; static int treeViewApple; public static void main(String[] args) { // TODO Auto-generated method stub GTK.gtk_init(); window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); GTK.gtk_widget_show(window); GTK.gtk_window_set_title(window, \u0026quot;TreeView TestVersion\u0026quot;); GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub GTK.gtk_main_quit(); } }, null); int start = 0; //åˆ›å»ºå¹¶æ·»åŠ å¸ƒå±€ gridHouse = GTK.gtk_grid_new(); GTK.gtk_container_add(window, gridHouse); GTK.gtk_widget_show(gridHouse); //3 treeview æ˜¯ä¸€ä¸ªç•Œé¢ï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªæ·˜å®å‰å°ï¼Œ V Vçš„ä½œç”¨ treeViewApple = GTK.gtk_tree_view_new(); //4 å»ºç«‹å­—æ®µ æ¯”è¾ƒè´¹åŠ² //4.1åˆ›å»ºå­—æ®µ int columnID = GTK.gtk_tree_view_column_new_with_attributes(\u0026quot;ID\u0026quot;, GTK.gtk_cell_renderer_text_new(), 0); //4.2æ·»åŠ å­—æ®µ GTK.gtk_tree_view_append_column(treeViewApple, columnID); //4.3åˆ›å»ºå­—æ®µ int columnName = GTK.gtk_tree_view_column_new_with_attributes(\u0026quot;Names\u0026quot;,GTK.gtk_cell_renderer_text_new(),1); //4.4æ·»åŠ å­—æ®µ GTK.gtk_tree_view_append_column(treeViewApple,columnName); //4.5åˆ›å»ºå­—æ®µ int columnAge = GTK.gtk_tree_view_column_new_with_attributes(\u0026quot;Ages\u0026quot;,GTK.gtk_cell_renderer_text_new(),2); GTK.gtk_tree_view_append_column(treeViewApple,columnAge); //åˆ›å»ºæ§ä»¶ //1 list_store æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„åº“ï¼Œç›¸å½“äºä¸€ä¸ªä»“åº“ M modelçš„ä½œç”¨ liststore = GTK.gtk_list_store_new(3); //3ä»£è¡¨ä¸‰ä¸ªå­—æ®µï¼šID Names Age // GTK.gtk_list_store_append(list_store, iter); //2 list_iter,list_iteræ˜¯ä¸€ä¸ªå†…éƒ¨çš„æ•°æ®è¿­ä»£çš„æ§åˆ¶è¿‡ç¨‹ï¼Œä¸éœ€è¦æ˜¾ç¤º Cçš„ä½œç”¨ï¼Œæ§åˆ¶ listiter = GTK.gtk_tree_iter_new(); //5 ç¬¬äº”æ­¥ æŠŠ iterå’ŒlistStoreè”ç³»èµ·æ¥ //GTK.gtk_text_buffer_get_end_iter ç±»ä¼¼äºtreeviewçš„bufferå’Œiterè”ç³»èµ·æ¥ // ä»¥åå°±å¯ä»¥é€šè¿‡GTK.gtk_text_buffer_inserté»˜è®¤æ˜¯ä¸€ä¸ªä¸€ä¸ªiterçš„æ‰§è¡Œã€‚ GTK.gtk_list_store_append(liststore, listiter); //æŒ‡é’ˆå¼€å§‹æŒ‡åˆ°ç¬¬ä¸€ä¸ªä½ç½® // 6 é€ä¸ªiteræ·»åŠ æ•°æ®åˆ°liststoreå½“ä¸­:æ¯ä¸ªiterçš„æ„æ€ï¼Œå°±æ˜¯é€è¡Œæˆ–è€…é€ä¸ªè®°å½•ã€‚ GTK.gtk_list_store_set_value(liststore, listiter, 0, \u0026quot;001\u0026quot;); GTK.gtk_list_store_set_value(liststore, listiter, 1, \u0026quot;YinMuHuaDao\u0026quot;); GTK.gtk_list_store_set_value(liststore, listiter, 2, \u0026quot;35\u0026quot;); GTK.gtk_list_store_append(liststore, listiter); //å¦‚æœä¸åŠ å…¥ï¼ŒæŒ‡é’ˆä¸ä¸‹ç§»ï¼Œåªä¼šè¦†ç›–æ‰å‰é¢çš„æ•°æ® GTK.gtk_list_store_set_value(liststore, listiter, 0, \u0026quot;002\u0026quot;); GTK.gtk_list_store_set_value(liststore, listiter, 1, \u0026quot;Taiyanghua\u0026quot;); GTK.gtk_list_store_set_value(liststore, listiter, 2, \u0026quot;29\u0026quot;); GTK.gtk_list_store_append(liststore, listiter); GTK.gtk_list_store_set_value(liststore, listiter, 0 ,\u0026quot;003\u0026quot;); GTK.gtk_list_store_set_value(liststore, listiter, 1 ,\u0026quot;Xiaojun\u0026quot;); GTK.gtk_list_store_set_value(liststore, listiter, 2 ,\u0026quot;10\u0026quot;); // ä¹‹æ‰€ä»¥æ·»åŠ 9æ¬¡æ˜¯å› ä¸º 3ä¸ªå­—æ®µ*3æ¡è®°å½• == 9 //7 ä½¿ç”¨å®Œiterä¹‹åä¸€å®šè¦è®°å¾— å…³æ‰å®ƒ GTK.gtk_tree_iter_free(listiter); //8 å…³é”®çš„ä¸€æ­¥ï¼ŒæŠŠæ•°å­—æ˜¾ç¤ºå‡ºæ¥ GTK.gtk_tree_view_set_model(treeViewApple, liststore); //å¹¶åŒæ—¶æŠŠå®ƒæ˜¾ç¤ºå‡ºæ¥ï¼Œå‰å°å¿…é¡»æ˜¾ç¤º GTK.gtk_widget_show(treeViewApple); //æœ€åæ·»åŠ åˆ°åˆç§Ÿæˆ¿ä¸­ //GTK.gtk_grid_attach(gridHouse, treeViewApple, 0, 1, 3, 3); start = 1; createScrolledBar(gridHouse,start,treeViewApple); start = 4; createPrintButton(gridHouse,start); createLabel(gridHouse, start, \u0026quot;ID\u0026quot;); //createEntry(entryID, gridHouse, start); entryID = GTK.gtk_entry_new(); GTK.gtk_entry_set_max_length(entryID, 30); GTK.gtk_widget_show(entryID); GTK.gtk_grid_attach(gridHouse, entryID, 5, start, 1, 1); start = 5; createShowButton(gridHouse,start,1,1); createLabel(gridHouse, start, \u0026quot;åå­—\u0026quot;); //createEntry(entryName, gridHouse, start); entryName = GTK.gtk_entry_new(); GTK.gtk_entry_set_max_length(entryName, 30); GTK.gtk_widget_show(entryName); GTK.gtk_grid_attach(gridHouse, entryName, 5, start, 1, 1); start = 6 ; createHideColumnButton(gridHouse,treeViewApple,start,1); createLabel(gridHouse, start, \u0026quot;å¹´é¾„\u0026quot;); //createEntry(entryAge, gridHouse, start); entryAge = GTK.gtk_entry_new(); GTK.gtk_entry_set_max_length(entryAge, 30); GTK.gtk_widget_show(entryAge); GTK.gtk_grid_attach(gridHouse, entryAge, 5, start, 1, 1); start = 7 ; createResizeColumnButton(gridHouse,treeViewApple,start,1); createInsertRecordButton(gridHouse,start); start = 8; createRecoredColumnButton(gridHouse,treeViewApple,start,1); start = 9; createSortColumnButton(gridHouse,treeViewApple,start,1); //åŠ å…¥è¡Œé€‰æ‹©äº‹ä»¶ rowSelection(); //3 //æ·»åŠ æ§ä»¶ //æ˜¾ç¤ºæ§ä»¶ //GTK.gtk_widget_show(liststore); //å¯åŠ¨å¾ªç¯ GTK.gtk_main(); } /** * * @param gridHouse ç½‘æ ¼å¯¹è±¡å¸ƒå±€çš„æ ‡è¯† * @param start ç½‘æ ¼å¸ƒå±€çš„æ‰€å¤„è¡Œæ•° * @param treeview treeviewçš„å¯¹è±¡æ ‡è¯† */ public static void createScrolledBar(int gridHouse,int start,int treeview) { int scrollbar = GTK.gtk_scrolled_window_new(); GTK.gtk_container_add(scrollbar, treeview); GTK.gtk_widget_set_size_request(scrollbar, 200, 200); GTK.gtk_widget_show(scrollbar); GTK.gtk_grid_attach(gridHouse, scrollbar, 0, start, 3, 3); } /** * * @param treeView treeViewå¯¹è±¡æ ‡è¯† * @param nth_columns æ·»åŠ å­—æ®µåˆ°ç¬¬å‡ åˆ— * @param column_name å­—æ®µçš„åå­— * @note ä¸€èˆ¬æ˜¯ä¸€æ¬¡åˆ›å»ºè®°å½• */ public static void createColumn(int treeView, int nth_columns, String column_name) { int temp_column = GTK.gtk_tree_view_column_new_with_attributes(column_name, GTK.gtk_cell_renderer_text_new(), nth_columns); GTK.gtk_tree_view_append_column(treeView, temp_column); } /** * * @param ID è®°å½•çš„IDå· * @param Names è®°å½•çš„åå­— * @param Age è®°å½•çš„å¹´é¾„ * @note éœ€è¦å¤šæ¬¡åˆ›å»ºè®°å½• */ public static void createRecord(String ID, String Names, String Age,int listiter) { GTK.gtk_list_store_append(liststore, listiter); //æŒ‡é’ˆä¸‹ä¸€ç»§ç»­æ·»åŠ çš„ä½œç”¨ //appendä¸¤ä¸ªä½œç”¨ 1ï¼šæ·»åŠ  2ï¼šiteræŒ‡é’ˆä¸‹ç§» GTK.gtk_list_store_set_value(liststore, listiter, 0, ID); GTK.gtk_list_store_set_value(liststore, listiter, 1, Names); GTK.gtk_list_store_set_value(liststore, listiter, 2, Age); } public static void printRecord(int liststore) { //å¿…é¡»æ–°å»ºï¼Œä¸èƒ½åˆ©ç”¨åŸå…ˆçš„listiter,å“ªè¾¹éœ€è¦ç”¨æ§åˆ¶ï¼Œå°±éœ€è¦å»ºä¸€ä¸ªæ§ä»¶ã€‚ï¼ï¼ï¼å¦åˆ™æŠ¥é”™ï¼ï¼ä¸èƒ½ç”¨å…¨å±€çš„ listiter int iter = GTK.gtk_tree_iter_new(); /* if(GTK.gtk_tree_model_get_iter_first(liststore, listiter)) { do { String ID = GTK.gtk_tree_model_get_value(liststore, listiter, 0); String Names = GTK.gtk_tree_model_get_value(liststore, listiter, 1); String Ages = GTK.gtk_tree_model_get_value(liststore, listiter, 2); //showInfo(\u0026quot;è¿™ä¸ªå‘˜å·¥çš„IDæ˜¯\u0026quot;+ID+\u0026quot;,ä»–çš„åå­—æ˜¯\u0026quot;+Names+\u0026quot;,å¹¶ä¸”å®ƒçš„å¹´é¾„æ˜¯\u0026quot;+Ages,\u0026quot;æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯\u0026quot;); System.out.println(\u0026quot;è¿™ä¸ªå‘˜å·¥çš„IDæ˜¯\u0026quot;+ID+\u0026quot;,ä»–çš„åå­—æ˜¯\u0026quot;+Names+\u0026quot;,å¹¶ä¸”å®ƒçš„å¹´é¾„æ˜¯\u0026quot;+Ages); }while(GTK.gtk_tree_model_iter_next(liststore,listiter)); }else { System.out.println(\u0026quot;è¡¨ä¸­æ— æ•°æ®\u0026quot;); }*/ // å‡å°‘ä»£ç çš„æ·±åº¦ã€‚ if(!GTK.gtk_tree_model_get_iter_first(liststore, iter)) { System.out.println(\u0026quot;treeviewæ²¡æœ‰æ•°æ® è¯·æ·»åŠ è®°å½•\u0026quot;); return; } do { String ID = GTK.gtk_tree_model_get_value(liststore, iter, 0); String Names = GTK.gtk_tree_model_get_value(liststore, iter, 1); String Ages = GTK.gtk_tree_model_get_value(liststore, iter, 2); //showInfo(\u0026quot;è¿™ä¸ªå‘˜å·¥çš„IDæ˜¯\u0026quot;+ID+\u0026quot;,ä»–çš„åå­—æ˜¯\u0026quot;+Names+\u0026quot;,å¹¶ä¸”å®ƒçš„å¹´é¾„æ˜¯\u0026quot;+Ages,\u0026quot;æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯\u0026quot;); System.out.println(\u0026quot;è¿™ä¸ªå‘˜å·¥çš„IDæ˜¯\u0026quot;+ID+\u0026quot;,ä»–çš„åå­—æ˜¯\u0026quot;+Names+\u0026quot;,å¹¶ä¸”å®ƒçš„å¹´é¾„æ˜¯\u0026quot;+Ages); }while(GTK.gtk_tree_model_iter_next(liststore,iter)); GTK.gtk_tree_iter_free(iter);//é‡Šæ”¾äº† è¿˜æ˜¯æœ‰é”™è¯¯ã€‚ã€‚ã€‚ } public static void showInfo( String message,String title) { int msgDlg = GTK.gtk_message_dialog_new(0, GTK.GTK_DIALOG_DESTROY_WITH_PARENT| GTK.GTK_DIALOG_MODAL,GTK.GTK_MESSAGE_INFO, GTK.GTK_BUTTONS_OK,message); GTK.gtk_window_set_title(msgDlg, title); int ret = GTK.gtk_dialog_run(msgDlg); if( ret == GTK.GTK_RESPONSE_OK) { GTK.gtk_widget_destroy(msgDlg); }else { GTK.gtk_widget_destroy(msgDlg); } } public static boolean showWarning( String message,String title) { int msgDlg = GTK.gtk_message_dialog_new(0, GTK.GTK_DIALOG_DESTROY_WITH_PARENT| GTK.GTK_DIALOG_MODAL,GTK.GTK_MESSAGE_WARNING, GTK.GTK_BUTTONS_OK,message); GTK.gtk_window_set_title(msgDlg, title); int ret = GTK.gtk_dialog_run(msgDlg); GTK.gtk_widget_destroy(msgDlg); return ret == GTK.GTK_RESPONSE_OK; } public static void createPrintButton(int gridHouse,int start) { int btnApple = GTK.gtk_button_new_with_label(\u0026quot;éå†\u0026quot;); GTK.gtk_widget_show(btnApple); GTK.gtk_grid_attach(gridHouse, btnApple, 0, start, 1, 1); insertButtonEvent(btnApple); } public static void createShowButton(int gridHouse,int start,int row, int column) { int btnApple = GTK.gtk_button_new_with_label(\u0026quot;è·å–è¡¨ç¬¬\u0026quot;+row+\u0026quot;è¡Œ\u0026quot;+\u0026quot;ç¬¬\u0026quot;+column+\u0026quot;åˆ—\u0026quot;); GTK.gtk_widget_show(btnApple); GTK.gtk_grid_attach(gridHouse, btnApple, 0, start, 1, 1); insertShowEvent(btnApple,row,column); } public static void createHideColumnButton(int gridHouse,int treeViewApple,int start,int nthcolumn) { int btnApple = GTK.gtk_button_new_with_label(\u0026quot;éšè—|æ˜¾ç¤ºç¬¬\u0026quot;+nthcolumn+\u0026quot;åˆ—\u0026quot;); GTK.gtk_widget_show(btnApple); GTK.gtk_grid_attach(gridHouse, btnApple, 0, start, 1, 1); insertHideEvent(treeViewApple, btnApple, nthcolumn); } public static void createResizeColumnButton(int gridHouse,int treeViewApple,int start,int nthcolumn) { int btnApple = GTK.gtk_button_new_with_label(\u0026quot;èµ‹äºˆç¬¬\u0026quot;+nthcolumn+\u0026quot;åˆ—å¯è°ƒæ•´å¤§å°çš„æƒé™\u0026quot;); GTK.gtk_widget_show(btnApple); GTK.gtk_grid_attach(gridHouse, btnApple, 0, start, 1, 1); insertResizeEvent(treeViewApple, btnApple, nthcolumn); } public static void createRecoredColumnButton(int gridHouse,int treeViewApple,int start,int nthcolumn) { int btnApple = GTK.gtk_button_new_with_label(\u0026quot;èµ‹äºˆç¬¬\u0026quot;+nthcolumn+\u0026quot;åˆ—å¯ç§»åŠ¨çš„æƒé™\u0026quot;); GTK.gtk_widget_show(btnApple); GTK.gtk_grid_attach(gridHouse, btnApple, 0, start, 1, 1); insertRecordableEvent(treeViewApple, btnApple, nthcolumn); } public static void createSortColumnButton(int gridHouse,int treeViewApple,int start,int nthcolumn) { int btnApple = GTK.gtk_button_new_with_label(\u0026quot;èµ‹äºˆç¬¬\u0026quot;+nthcolumn+\u0026quot;åˆ—å¯æ’åºçš„æƒé™\u0026quot;); GTK.gtk_widget_show(btnApple); GTK.gtk_grid_attach(gridHouse, btnApple, 0, start, 1, 1); insertSortEvent(treeViewApple, btnApple, nthcolumn); } public static void createInsertRecordButton(int gridHouse,int start) { int btnApple = GTK.gtk_button_new_with_label(\u0026quot;æ’å…¥æ•°æ®\u0026quot;); GTK.gtk_widget_show(btnApple); GTK.gtk_grid_attach(gridHouse, btnApple, 5, start, 1, 1); insertRecordEvent(btnApple); } public static void createLabel(int gridHouse, int start,String labelName) { int labelApple = GTK.gtk_label_new(labelName); GTK.gtk_widget_show(labelApple); GTK.gtk_grid_attach(gridHouse, labelApple, 4, start, 1, 1); } public static void createEntry(int entryApple,int gridHouse, int start) { entryApple = GTK.gtk_entry_new(); GTK.gtk_entry_set_max_length(entryApple, 30); GTK.gtk_widget_show(entryApple); GTK.gtk_grid_attach(gridHouse, entryApple, 5, start, 1, 1); } public static void insertButtonEvent(final int btnSin) { GTK.g_signal_connect(btnSin, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); printRecord(liststore); } }, null); } public static void insertShowEvent(final int btnSin,final int row, final int column) { GTK.g_signal_connect(btnSin, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); showColumnRow(row,column); } }, null); } public static void insertHideEvent(final int treeViewApple,final int btnSin, final int nthcolumn) { //final boolean columnVisible = true; GTK.g_signal_connect(btnSin, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); tree_view_column_set_hide(treeViewApple,nthcolumn,columnVisible); columnVisible = !columnVisible; } }, null); } public static void insertResizeEvent(final int treeViewApple,final int btnSin, final int nthcolumn) { //final boolean columnVisible = true; GTK.g_signal_connect(btnSin, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); tree_view_column_resize(treeViewApple,nthcolumn,columnResize); columnResize = !columnResize; } }, null); } public static void insertRecordableEvent(final int treeViewApple,final int btnSin, final int nthcolumn) { //final boolean columnVisible = true; GTK.g_signal_connect(btnSin, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); tree_view_column_recordabel(treeViewApple,nthcolumn,columnRecordable); columnRecordable = !columnRecordable; } }, null); } public static void insertSortEvent(final int treeViewApple,final int btnSin, final int nthcolumn) { //final boolean columnVisible = true; GTK.g_signal_connect(btnSin, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); tree_view_column_sort(treeViewApple,nthcolumn,1); //columnRecordable = !columnRecordable; } }, null); } public static void insertRecordEvent(final int btnSin) { //final boolean columnVisible = true; GTK.g_signal_connect(btnSin, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { String ID = GTK.gtk_entry_get_text(entryID); System.out.println(ID); if(ID.equalsIgnoreCase(\u0026quot;\u0026quot;)) { showWarning(\u0026quot;IDä¸ºç©ºï¼Œè¯·é‡æ–°è¾“å…¥\u0026quot;,\u0026quot;è­¦å‘Š\u0026quot;); return; } String Name = GTK.gtk_entry_get_text(entryName); if(Name.equalsIgnoreCase(\u0026quot;\u0026quot;)) { showWarning(\u0026quot;Nameä¸ºç©ºï¼Œè¯·é‡æ–°è¾“å…¥\u0026quot;,\u0026quot;è­¦å‘Š\u0026quot;); return; } String Age = GTK.gtk_entry_get_text(entryAge); if(Age.equalsIgnoreCase(\u0026quot;\u0026quot;)) { showWarning(\u0026quot;Ageä¸ºç©ºï¼Œè¯·é‡æ–°è¾“å…¥\u0026quot;,\u0026quot;è­¦å‘Š\u0026quot;); return; } insertRecord(ID,Name, Age, treeViewApple); } }, null); } public static void insertRecord(String ID,String Name,String Age,int treeViewApple) { int iter = GTK.gtk_text_iter_new(); if(!GTK.gtk_tree_model_get_iter_first(liststore, iter)) { createRecord( ID, Name, Age,iter); } else { do { //System.out.println(\u0026quot;hello\u0026quot;); }while(GTK.gtk_tree_model_iter_next(liststore, iter)); //while(GTK.gtk_tree_model_iter_next(liststore, iter)); // è®°ä¸€æ¬¡è°ƒbugç»ç†ï¼Œï¼Œç»å¸¸æŠŠiter_nextå†™æˆäº† iter_firstå¯¼è‡´ä¸æ–­çš„å¾ªç¯ //å‡ºç°æ— é™å¾ªç¯ï¼Œæœ€ååµŒå…¥ systemæ‰“å°å‡ºæ¥å³å¯ã€‚ createRecord( ID, Name, Age,iter); } GTK.gtk_text_iter_free(iter); GTK.gtk_tree_view_set_model(treeViewApple, liststore); } public static void showColumnRow(int row, int column) { int i = 0; if(0 == getNumberOfListstore(liststore)) { System.out.println(\u0026quot;100å—éƒ½ä¸ç»™ è¿˜æƒ³æŸ¥ï¼\u0026quot;); return ; } if(row \u0026gt; getNumberOfListstore(liststore)) { System.out.println(\u0026quot;è®°å½•æ•°æ²¡æœ‰ï¼ è¯·é‡æ–°æŸ¥è¯¢\u0026quot;); return; } int iter = GTK.gtk_tree_iter_new(); GTK.gtk_tree_model_get_iter_first(liststore, iter); do { if(i == row) { String temp = GTK.gtk_tree_model_get_value(liststore, iter, column); System.out.println(temp); showInfo(temp,\u0026quot;æ˜¾ç¤ºä¿¡æ¯\u0026quot;); return; } i++; }while(GTK.gtk_tree_model_iter_next(liststore, iter)); } public static int getNumberOfListstore(int liststore) { int sum = 0; int iter = GTK.gtk_tree_iter_new(); if(!GTK.gtk_tree_model_get_iter_first(liststore, iter)) { return sum; } do { sum++; }while(GTK.gtk_tree_model_iter_next(liststore, iter)); return sum; } public static void tree_view_column_set_hide(int treeViewApple,int nthColumn,boolean visible) { int column =GTK.gtk_tree_view_get_column(treeViewApple, nthColumn); GTK.gtk_tree_view_column_set_visible(column, visible); } public static void tree_view_column_resize(int treeViewApple,int nthColumn,boolean visible) { int column =GTK.gtk_tree_view_get_column(treeViewApple, nthColumn); GTK.gtk_tree_view_column_set_resizable(column, visible); } public static void tree_view_column_recordabel(int treeViewApple,int nthColumn,boolean visible) { int column =GTK.gtk_tree_view_get_column(treeViewApple, nthColumn); GTK.gtk_tree_view_column_set_reorderable(column, visible); } public static void tree_view_column_sort(int treeViewApple,int nthColumn,int sortcolumnid) { int column =GTK.gtk_tree_view_get_column(treeViewApple, nthColumn); GTK.gtk_tree_view_column_set_sort_column_id(column, sortcolumnid); } public static void rowSelection() { int selection = GTK.gtk_tree_view_get_selection(treeViewApple); GTK.gtk_tree_selection_set_mode(selection, GTK.GTK_SELECTION_MULTIPLE); GTK.g_signal_connect(treeViewApple, \u0026quot;button-press-event\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { if(GTK.gdk_event_get_type(eventData)==GTK.GDK_2BUTTON_PRESS) { int[] indices = GTK.gtk_tree_view_get_selection_indices(treeViewApple); System.out.println(indices[0]); } } }, null); } /* public static void deleteOneRecore() { int selection = GTK.gtk_tree_view_get_selection(treeViewApple); }*/ }  case3 å·¥å…·æ +è¿›åº¦æ¡+menu+statusIcon+å¼€å…³æŒ‰é’®+calendar\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ3æ—¥ä¸Šåˆ1:24:01 * @version TestToolBar V1.0 * @version TestToolBar V2.0 å¢åŠ äº†ä¸€ä¸ªæ—¥å†æ§ä»¶,æ·»åŠ äº†å¤©æ•°å˜åŒ–æ—¶é—´å’ŒåŒå‡»æ—¶é—´ * @version TestToolBar V2.0 å¢åŠ äº†è¿›åº¦æ¡çš„åˆ›å»ºï¼Œå’ŒæŒ‰é’®äº‹ä»¶ æ§åˆ¶è¿›åº¦æ¡ * @version TestToolBar V4.0 å»ºè®®çš„å¼€å…³æŒ‰é’®ï¼Œæœªå®ç°ä¿¡å·çš„æ¥å—ã€‚ã€‚ã€‚ * @version TestToolBar V5.0 å¢åŠ äº†ä¸€ä¸ªèœå•æ§ä»¶ * @version TestToolBar V6.0 å¢åŠ äº†ä¸€ä¸ªStatusIconçš„ç®€å•æ§ä»¶ */ public class TestToolBar { /** * @param args */ static int window; static int gridHouse; static double progress = 0.0; public static void main(String[] args) { // TODO Auto-generated method stub GTK.gtk_init(); window= GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); GTK.gtk_widget_show(window); GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub GTK.gtk_main_quit(); } }, null); //è®¾ç½®ç½‘æ ¼å¸ƒå±€ gridHouse = GTK.gtk_grid_new(); GTK.gtk_widget_show(gridHouse); GTK.gtk_container_add(window, gridHouse); //å®šä¹‰ä¸€äº›å¸¸ç”¨çš„æ§ä»¶ int start = 0; createToolbar(gridHouse,start); start =1; createCalendar(gridHouse,start); start = 2; createProgressBar(gridHouse, start); start = 3; createSwitchOn(gridHouse, start); start = 4; createMenu(gridHouse,start); start = 5; createStatusIcon(gridHouse,start); //å¯åŠ¨å¾ªç¯ GTK.gtk_main(); } public static void createToolbar(int gridHouse,int start) { //åˆ›å»ºå·¥å…·æ å®¹å™¨ int tbApple = GTK.gtk_toolbar_new(); GTK.gtk_widget_show(tbApple); GTK.gtk_widget_set_size_request(tbApple, 300, 20); GTK.gtk_grid_attach(gridHouse, tbApple, 0, start, 1, 1); int btnNew = GTK.gtk_tool_button_new(0, \u0026quot;æ–°å»º\u0026quot;); GTK.gtk_tool_button_set_stock_id(btnNew, GTK.GTK_STOCK_NEW); GTK.gtk_widget_show(btnNew); GTK.gtk_toolbar_insert(tbApple, btnNew, 0); int btnOpen = GTK.gtk_tool_button_new(0, \u0026quot;æ‰“å¼€\u0026quot;); GTK.gtk_tool_button_set_stock_id(btnOpen, GTK.GTK_STOCK_OPEN); GTK.gtk_widget_show(btnOpen); GTK.gtk_toolbar_insert(tbApple, btnOpen, 1); int btnSave = GTK.gtk_tool_button_new(0, \u0026quot;ä¿å­˜\u0026quot;); GTK.gtk_tool_button_set_stock_id(btnSave, GTK.GTK_STOCK_SAVE); GTK.gtk_widget_show(btnSave); GTK.gtk_toolbar_insert(tbApple, btnSave, 2); } public static void createCalendar(int gridHouse, int start) { final int clApple = GTK.gtk_calendar_new(); int labelApple = GTK.gtk_label_new(\u0026quot;\u0026quot;); GTK.gtk_widget_show(clApple); GTK.gtk_widget_show(labelApple); GTK.gtk_grid_attach(gridHouse, clApple, 0, start, 1, 1); GTK.gtk_grid_attach(gridHouse, clApple, 1, start, 1, 1); GTK.gtk_widget_set_size_request(clApple, 200, 200); GTK.g_signal_connect(clApple, \u0026quot;day-selected\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub int day = GTK.gtk_calendar_get_day(clApple); int month = GTK.gtk_calendar_get_month(clApple); int year = GTK.gtk_calendar_get_year(clApple); System.out.println(\u0026quot;ç”¨æˆ·é€‰æ‹©äº†\u0026quot;+year+\u0026quot;å¹´\u0026quot;+month+\u0026quot;æœˆ\u0026quot;+day+\u0026quot;æ—¥\u0026quot;); //showInfo(\u0026quot;ç”¨æˆ·é€‰æ‹©äº†\u0026quot;+year+\u0026quot;å¹´\u0026quot;+month+\u0026quot;æœˆ\u0026quot;+day+\u0026quot;æ—¥\u0026quot;,\u0026quot;é€‰æ‹©çš„æ—¥æœŸ\u0026quot;); } }, null); GTK.g_signal_connect(clApple, \u0026quot;day-selected-double-click\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub int day = GTK.gtk_calendar_get_day(clApple); int month = GTK.gtk_calendar_get_month(clApple); int year = GTK.gtk_calendar_get_year(clApple); showInfo(\u0026quot;ç”¨æˆ·é€‰æ‹©äº†\u0026quot;+year+\u0026quot;å¹´\u0026quot;+month+\u0026quot;æœˆ\u0026quot;+day+\u0026quot;æ—¥\u0026quot;,\u0026quot;é€‰æ‹©çš„æ—¥æœŸ\u0026quot;); } }, null); } public static boolean showInfo( String message,String title) { int msgDlg = GTK.gtk_message_dialog_new(0, GTK.GTK_DIALOG_DESTROY_WITH_PARENT| GTK.GTK_DIALOG_MODAL,GTK.GTK_MESSAGE_INFO, GTK.GTK_BUTTONS_OK,message); GTK.gtk_window_set_title(msgDlg, title); int ret = GTK.gtk_dialog_run(msgDlg); GTK.gtk_widget_destroy(msgDlg); return ret == GTK.GTK_RESPONSE_OK; } public static void createProgressBar(int gridHouse,int start) { final int pbApple =GTK.gtk_progress_bar_new(); int btnApple =GTK.gtk_button_new_with_label(\u0026quot;åŠ å¿«è¿›åº¦\u0026quot;); GTK.gtk_widget_show(btnApple); GTK.gtk_widget_show(pbApple); GTK.gtk_grid_attach(gridHouse, pbApple, 0, start, 1, 1); GTK.gtk_grid_attach(gridHouse, btnApple, 1, start, 1, 1); GTK.gtk_progress_bar_set_fraction(pbApple, progress); //GTK.gtk_progress_bar_set_pulse_step() /* try { Thread.sleep(1000); } catch (InterruptedException e) { // TODO Auto-generated catch block e.printStackTrace(); }*/ GTK.g_signal_connect(btnApple, \u0026quot;clicked\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub if(progress \u0026lt;= 1.0) { progress = progress + 0.2; GTK.gtk_progress_bar_set_fraction(pbApple, progress); }else { System.out.println(\u0026quot;stop clicked\u0026quot;); } } }, null); GTK.gtk_progress_bar_set_text(pbApple, \u0026quot;è¯·ç¨å\u0026quot;); } public static void createSwitchOn(int gridHouse, int start) { final int switchOff = GTK.gtk_switch_new(); final int label = GTK.gtk_label_new(\u0026quot;\u0026quot;); GTK.gtk_widget_show(switchOff); GTK.gtk_widget_show(label); GTK.gtk_grid_attach(gridHouse, switchOff, 0, start, 1, 1); GTK.gtk_grid_attach(gridHouse, label, 1, start, 1, 1); GTK.gtk_switch_set_active(switchOff, true); //GTK.g_signal_connect(switchOff, \u0026quot;state-set\u0026quot;, new IGCallBack() GTK.g_signal_connect(switchOff, \u0026quot;activate\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub System.out.println(\u0026quot;hello\u0026quot;); if(GTK.gtk_switch_get_active(switchOff)) { //GTK.gtk_label_set_text(label, \u0026quot;ä½ æ‰“å¼€äº†\u0026quot;); System.out.println(\u0026quot;hello\u0026quot;); } else { //GTK.gtk_label_set_text(label, \u0026quot;ä½ å…³é—­äº†\u0026quot;); System.out.println(\u0026quot;fuck\u0026quot;); } } }, null); } public static void createMenu(int gridHouse, int start) { //åˆ†ä¸‰æ­¥ //1åˆ›å»ºå•ä¸€èœå• //2åˆ›å»ºä¸€ä¸ªèœå•å¤´ //3åˆ›å»ºæ€»çš„èœå•æ¡ï¼ŒæŠŠè®¸å¤šèœå•å¤´éƒ½æŒ‚åˆ°èœå•æ¡ä¸Š //åˆ›å»ºä¸€ä¸ªèœå• int menu = GTK.gtk_menu_new(); int file = GTK.gtk_menu_item_new_with_label(\u0026quot;_Fæ–‡ä»¶\u0026quot;); int new1 = GTK.gtk_menu_item_new_with_label(\u0026quot;æ–°å»º\u0026quot;); int open1 = GTK.gtk_menu_item_new_with_label(\u0026quot;æ‰“å¼€\u0026quot;); int closed = GTK.gtk_menu_item_new_with_label(\u0026quot;å…³é—­\u0026quot;); int import1 = GTK.gtk_menu_item_new_with_mnemonic(\u0026quot;_Importå¯¼å…¥\u0026quot;); //int image = GTK.gtk_menu_tool_button_new_from_stock(GTK.GTK_STOCK_NEW); //fengexian GTK.gtk_widget_show(menu); GTK.gtk_widget_show(new1); GTK.gtk_widget_show(open1); GTK.gtk_widget_show(closed); GTK.gtk_widget_show(file); GTK.gtk_widget_show(import1); GTK.gtk_menu_shell_append(menu, file); GTK.gtk_menu_shell_append(menu, new1); GTK.gtk_menu_shell_append(menu, open1); GTK.gtk_menu_shell_append(menu, closed); GTK.gtk_menu_shell_append(menu, import1); // èœå•æ¡ int menubar = GTK.gtk_menu_bar_new(); GTK.gtk_widget_show(menubar); GTK.gtk_grid_attach(gridHouse, menubar, 0, start, 1, 1); //2 æ·»åŠ ä¸€ä¸ªmenu åˆ°menuå°å¤´ int file_item = GTK.gtk_menu_item_new_with_label(\u0026quot;File\u0026quot;); GTK.gtk_widget_show(file_item); GTK.gtk_menu_item_set_submenu(file_item, menu); //3 æ·»åŠ ä¸€ä¸ª menuå°å¤´åˆ°menubar GTK.gtk_menu_shell_append(menubar, file_item); // GTK.gtk_menu_attach_to_widget(menubar, attach_widget); GTK.g_signal_connect(closed, \u0026quot;activate\u0026quot;,new IGCallBack(){ @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub GTK.gtk_main_quit(); } }, null); } public static void createStatusIcon(int gridHouse,int start) { int status = GTK.gtk_status_icon_new(); //GTK.gtk_widget_show(status); //GTK.gtk_grid_attach(gridHouse, status, 0, status, 1, 1); GTK.gtk_status_icon_set_from_stock(status, GTK.GTK_STOCK_CONNECT); GTK.gtk_status_icon_set_tooltip_text(status, \u0026quot;hello\u0026quot;); //çš„ç¡®æ˜¯ä¼šæ˜¾ç¤ºåœ¨ä¸‹æ–¹ GTK.gtk_status_icon_set_visible(status, true); GTK.g_signal_connect(status, \u0026quot;popup-menu\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub /* int menu = GTK.gtk_menu_new(); int file = GTK.gtk_menu_item_new_with_label(\u0026quot;_Fæ–‡ä»¶\u0026quot;); int new1 = GTK.gtk_menu_item_new_with_label(\u0026quot;æ–°å»º\u0026quot;); int open1 = GTK.gtk_menu_item_new_with_label(\u0026quot;æ‰“å¼€\u0026quot;); int closed = GTK.gtk_menu_item_new_with_label(\u0026quot;å…³é—­\u0026quot;); int import1 = GTK.gtk_menu_item_new_with_mnemonic(\u0026quot;_Importå¯¼å…¥\u0026quot;); //int image = GTK.gtk_menu_tool_button_new_from_stock(GTK.GTK_STOCK_NEW); //fengexian GTK.gtk_widget_show(menu); GTK.gtk_widget_show(new1); GTK.gtk_widget_show(open1); GTK.gtk_widget_show(closed); GTK.gtk_widget_show(file); GTK.gtk_widget_show(import1); GTK.gtk_menu_shell_append(menu, file); GTK.gtk_menu_shell_append(menu, new1); GTK.gtk_menu_shell_append(menu, open1); GTK.gtk_menu_shell_append(menu, closed); GTK.gtk_menu_shell_append(menu, import1); GTK.gtk_menu_popup(menu);*/ showInfo(\u0026quot;hello\u0026quot;,\u0026quot;wenho\u0026quot;); } }, null); /* GTK.g_signal_connect(status, \u0026quot;statusIconActivate\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { showInfo(\u0026quot;hello\u0026quot;,\u0026quot;wenho\u0026quot;); }},null);*/ } }  ","date":1431327521,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327521,"objectID":"5b48b0fb9dd62421e30f1ebb2319a68f","permalink":"/blog/2015/05/11/2yue-1ri-javaban-bi-ji-zuo-ye/","publishdate":"2015-05-11T14:58:41+08:00","relpermalink":"/blog/2015/05/11/2yue-1ri-javaban-bi-ji-zuo-ye/","section":"archives","summary":"","tags":null,"title":"2æœˆ1æ—¥Javaç­ç¬”è®°ä½œä¸š","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"0105ç­Javaå‘¨æœ«ç­è¯•é¢˜ï¼ˆJDBC 9-16ï¼‰ é˜¶æ®µæ€§è€ƒè¯•ï¼ˆè€ƒè¯•6ä¸ªå°æ—¶ï¼Œè®²è¯„+é‡å†™6ä¸ªå°æ—¶ï¼‰ï¼š è®°å½•å®Œæˆæ¯ä¸ªé¢˜æ‰€éœ€è¦çš„æ—¶é•¿ã€‚ ç¬¬ä¸€é¢˜ã€SQLé¢˜ è¡¨æ ¼è§å›¾ç‰‡é™„ä»¶ é¢˜ç›®ï¼šç¼–å†™SQLè¯­å¥å®Œæˆä¸‹é¢çš„åŠŸèƒ½ï¼š æ¡ä»¶æŸ¥è¯¢ï¼š 1. åœ¨GRADEè¡¨ä¸­æŸ¥æ‰¾80-90ä»½çš„å­¦ç”Ÿå­¦å·å’Œåˆ†æ•° 2. åœ¨GRADE è¡¨ä¸­æŸ¥æ‰¾è¯¾ç¨‹ç¼–å·ä¸º003å­¦ç”Ÿçš„å¹³å‡åˆ† 3. åœ¨GRADE è¡¨ä¸­æŸ¥è¯¢å­¦ä¹ å„é—¨è¯¾ç¨‹çš„äººæ•° 4. æŸ¥è¯¢æ‰€æœ‰å§“å¼ çš„å­¦ç”Ÿçš„å­¦å·å’Œå§“å 5. æŸ¥è¯¢åˆ†æ•°åœ¨80-90åˆ†çš„å­¦ç”Ÿçš„å­¦å·ã€å§“åã€åˆ†æ•° 6. æŸ¥è¯¢å­¦ä¹ äº†â€™Cè¯­è¨€â€™è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·ã€å§“åå’Œåˆ†æ•° ç¬¬äºŒé¢˜ ä¸å‚è€ƒã€ä¸å¯¹ç…§ä»»ä½•è€å¸ˆã€åŒå­¦çš„ä»£ç ç¼–å†™JDBCUtilsã€‚å¹¶è®°å½•å†™å®Œéœ€è¦çš„æ—¶é—´ã€‚ ç¬¬ä¸‰é¢˜ ç¼–å†™æ‰‹æœºå·ç æŸ¥è¯¢å½’å±åœ°æ¡ˆä¾‹ã€‚å¹¶è®°å½•å†™å®Œéœ€è¦çš„æ—¶é—´\nè€ƒè¯•æœªé€šè¿‡ï¼Œä¸­é€”å‡ºå»ï¼Œfail;\nç¬¬ä¸€é¢˜ï¼š è´¹æ—¶ï¼š4ä¸ªå°æ—¶å·¦å³ è¡¨è®¾è®¡é˜¶æ®µï¼š\n;;;åˆ›å»ºä¸€ä¸ªè€ƒè¯•æ•°æ®åº“ create database exam; use exam; ```` é”™è¯¯åˆ†æï¼š curriculumæ˜¯ä¸€ä¸ªåŸºç¡€è¡¨ï¼ è¿æ¥gradeè¡¨ï¼Gradeè¡¨è¿æ¥student_infoè¡¨ ï¼Œè®¤ä¸ºstudent_infoå­˜åœ¨å¤–é”® ç»è¿‡æŠ˜è…¾ï¼šè®¤ä¸ºstudent_infoæ²¡æœ‰å¤–é”®ï¼Œè€Œgradeè¡¨å­˜åœ¨ä¸¤ä¸ªå¤–é”® Curriculum è¡¨çš„è®¾è®¡ï¼š curriculum_no è¯¾ç¨‹ç¼–å· :  mysql varchar(20)not null auto_increment primary key, ;;åæ¥æ€è€ƒ intæ”¹å˜ä¸ºvarchar(20)å› ä¸ºä¹Ÿè®¸ä¼šå‡ºç°éæ•°å­— corriculum_nameè¯¾ç¨‹åç§° varchar(20) not null default â€˜â€™ Creditå­¦åˆ† ï¼š real(5,2) not null default 0.0\n;;;(realé»˜è®¤æ˜¯doubleç±»å‹)\n å…¶é—´é‡åˆ°æ— æ³•æ˜¾ç¤ºæ±‰å­—çš„æƒ…å†µï¼š 1ï¼šæ•°æ®åº“çº§åˆ«ä¿®æ”¹ ä¿®æ”¹æ•°æ®åº“çº§åˆ«ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼šuse edu(æ¢æˆä½ è¦ä¿®æ”¹çš„æ•°æ®åº“åï¼Œåœ¨è¿™é‡Œæˆ‘çš„æ•°æ®åº“ä¸ºedu),ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤ï¼š  mysql alter database exam character set utf-8; æˆ–è€… SET NAMES \u0026lsquo;utf8\u0026rsquo;;\n 2ï¼šæ•°æ®è¡¨çº§åˆ«çš„ä¿®æ”¹  mysql ALTER TABLE table_name DEFAULT CHARSET utf8;\n3: å‘ç°ç»è¿‡è¿™ä¸¤ä¸ªå¤§å°ä¿®æ”¹è¿˜æ˜¯ä¸è¡Œ,äºæ˜¯ä¹Ÿå¯¹å­—æ®µè¿›è¡Œä¿®æ”¹  mysql alter table curriculum modify curriculum_no varchar(20) character set utf8 alter table curriculum modify curriculum_name varchar(20) character set utf8;\nä½†æ˜¯ä¾ç„¶ä¸è¡Œï¼ï¼è¯´æ˜ä¹‹å‰æ’å…¥çš„åªå¥½æ¸…ç©ºï¼Œå†æ’å…¥ä¸€éï¼Œ ç„¶åå°±å¯ä»¥äº† gradeè¡¨çš„è®¾è®¡ï¼š æ­¤è¡¨çš„è®¾è®¡ä¸€æ³¢ä¸‰æŠ˜ï¼Œåœ¨æ·»åŠ å¤–é”®çš„æ—¶å€™å¤šæ¬¡å‡ºç°é”™è¯¯ï¼Œä¸‹é¢å…ˆç»™å‡ºé”™è¯¯çš„ï¼Œå†åˆ—å‡ºæ­£ç¡®çš„æ·»åŠ æ–¹å¼ é”™è¯¯åˆ†æè¡¨ï¼š  mysql stu_no å­¦å·ï¼š varchar(20) not null auto_increment primary key, ;;åæ¥æ€è€ƒ intæ”¹å˜ä¸ºvarchar(20)å› ä¸ºä¹Ÿè®¸ä¼šå‡ºç°éæ•°å­— è¯¾ç¨‹ç¼–å· curriculum_no : int not null, foreign key(curriculum_no) references Curriculum\n(Curriculum_no) on delete restrict on update cascade Score åˆ†æ•° : real(5,2) not null default 0.0\nå¤–é”®çŸ¥è¯†ï¼š 1.MYSQLåœ¨å»ºå¤–é”®å,ä¼šè‡ªåŠ¨å»ºä¸€ä¸ªåŒåçš„ç´¢å¼•,å¼•å…¥å¤–é”®çš„ç¼ºç‚¹æ˜¯ä¼šä½¿é€Ÿåº¦å’Œæ€§èƒ½ä¸‹é™ åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™æ·»åŠ å¤–é”®ï¼š  mysql create table grade( stu_no varchar(20) not null default \u0026ldquo;, curriculum varchar(20) not null default \u0026ldquo;,constraint hello foreign key (curriculum) references curriculum(curriculum_no) on delete restrict on update cascade, stu_score real(5,2) not null default 0.00);\n åœ¨åˆ›å»ºè¡¨åå¤©æ·»åŠ å¤–é”®ï¼š æ·»åŠ ä¸€ä¸ªå«helloçš„å¤–é”®ï¼š  mysql alter table grade add constraint hello foreign key(stu_curriculum_no) ref erences curriculum(curriculum_no) on delete restrict on update cascade;\n æŸ¥çœ‹gradeè¡¨ä¿¡æ¯ï¼š  mysql | grade | CREATE TABLE grade ( stu_no varchar(20) NOT NULL, stu_curriculum_no varchar(20) NOT NULL DEFAULT \u0026ldquo;, stu_score double(5,2) NOT NULL DEFAULT \u0026lsquo;0.00\u0026rsquo;, PRIMARY KEY (stu_no), KEY hello (stu_curriculum_no), CONSTRAINT hello FOREIGN KEY (stu_curriculum_no) REFERENCES curriculum ( curriculum_no) ON UPDATE CASCADE ) ENGINE=InnoDB DEFAULT CHARSET=utf8 |\nå…¶ä¸­Key hello (stu_curriculum_no) å°±æ˜¯æ‰€è°“çš„ç´¢å¼•ï¼Œä¸€èˆ¬å¯ä»¥è¿™æ · æŸ¥çœ‹è¡¨ç´¢å¼• show index from grade; åˆ é™¤è¡¨ç´¢å¼• alter table grade drop index hello åˆ é™¤è¡¨ä¸­çš„å¤–é”®ï¼š ALTER TABLE grade DROP FOREIGN KEY fk_member; å½“ç„¶ä¸€èˆ¬åœ¨åˆ é™¤çš„æ—¶å€™éœ€è¦ show create table grade è¿™æ ·å¯ä»¥æŸ¥çœ‹ CONSTRAINTåçš„åå­— æ¯”å¦‚fk_memeberåœ¨æœ¬ä¾‹ä¸­å°±æ˜¯hello åæ¥å†æ¬¡æ€è€ƒï¼Œgradeè¡¨ä¸å¯èƒ½æœ‰ä¸»é”®ï¼Œå› ä¸ºå­¦å·å¯èƒ½å¤šæ¬¡å‡ºç°åœ¨ä¸åŒè®°å½•ä¸­ï¼äºæ˜¯åˆ é™¤ä¸»é”® alter table grade drop primary key; ï¼ˆæ·»åŠ ä¸»é”®çš„æ–¹å¼ï¼šalter table table_test add primary key(id);ï¼‰ æˆ‘å†æ¬¡æ–°å»ºä¸€å¼ è¡¨grade1ç›®çš„æ˜¯æµ‹è¯•ï¼Œåœ¨åŒä¸€ä¸ªåº“ä¸­çš„ç¡®ä¸èƒ½å­˜åœ¨ä¸¤ä¸ªç›¸åŒçš„å¤–é”®åï¼Œå¦åˆ™æŠ¥é”™ï¼Œ ä¸‹é¢æˆ‘ç”¨hello1åˆ™æ˜¯é€šè¿‡ã€‚ï¼ˆåº”è¯¥æ˜¯æ­¤åŸå› ï¼‰  mysql create table grade1( stuno varchar(20) not null default \u0026ldquo;, curi varchar(20) not null default \u0026ldquo;,constraint hello1 foreign key (curi) references curriculum(curriculum_no), score real(5,2) not null default 0.00);\nERROR 1022 (23000): Can't write; duplicate key in table 'grade'çš„è§£å†³æ–¹æ¡ˆï¼šå¤–é”®åå­—æ”¹æˆæ²¡ç”¨è¿‡çš„å°±å¯ä»¥ï¼ˆæ•´ä¸ªæ•°æ®åº“examèŒƒå›´å†…ï¼‰ ä¸‹é¢å†æ¬¡æ–°å»ºä¸€å¼ è¡¨grade2 ,ç›®çš„æ˜¯æµ‹è¯•ä¸åŒè¡¨æ˜¯ä¸æ˜¯å¯ä»¥ä½¿ç”¨å­—æ®µåå­—ç›¸åŒçš„å……å½“å¤–é”®ï¼Œå½“ç„¶æ˜¯æ²¡é—®é¢˜å•¦ï¼ å› ä¸ºåœ¨è®¾è®¡è¡¨çš„æ—¶å€™ï¼Œæ›¾ç»æ€•å¦‚æœcuriæ”¹ä¸ºcurriculum_noä¼šä¸ä¼šæŠ¥é”™çš„é—®é¢˜ã€‚æ‰€ä»¥å°±ä¸€èµ·å°è¯•äº†  mysql create table grade2( stu_no varchar(20) not null default \u0026ldquo;, curi varchar(20) not null default \u0026ldquo;,constraint hello2 foreign key (curi) references curriculum(curriculum_no) on delete restrict on update cascade, score real(5,2) not null default 0.00);\nç°åœ¨å…ˆæŠŠgradeè¡¨æ”¾åœ¨ä¸€è¾¹ ï¼Œå¾…ä¼šè®¾è®¡å®Œstudent_infoè¡¨ä¹‹åå†èŠgradeè¡¨çš„äº‹æƒ…ã€‚ Student_infoè¡¨çš„è®¾è®¡ ä¸åˆç†çš„è®¾è®¡ï¼ˆä¸»é”®åŒæ—¶æ˜¯å¤–é”®ï¼Œä¸å¥½ï¼‰ï¼š å­¦å· student_no : int not null auto_increment primary key, foreign key(student_no) references grade on grade(student_no) on delete restrict on update cascade,ï¼ˆåæ¥ä¿®æ”¹ä¸º ä¸»é”®ï¼å› ä¸ºä¸€ä¸ªè¡¨å³ä¸º ä¸»é”®å’Œå¤–é”®å åŠ ä¸å¥½ï¼ï¼ åŒæ—¶è®©gradeçš„stu_no ä¹Ÿå¢åŠ ä¸€ä¸ªå¤–é”® è¿æ¥åˆ°student_infoè¡¨ï¼‰ å§“å stu_name : varchar(20) not null default â€˜â€™, æ€§åˆ« stu_sex : char(2) not null default â€˜ç”·â€˜ï¼Œ å‡ºç”Ÿå¹´æœˆ stu_date (stu_birth): date not null default â€˜1990-01-04â€™ å®¶åº­ä½å€ stu_family (stu_addr): varchar(20) not null default â€˜â€™, å¤‡æ³¨ stu_note : varchar(30) not null default â€˜â€™, ç„¶åå†æ¬¡å›åˆ°gradeè¡¨ï¼Œæ·»åŠ å¤–é”®ï¼Œ  mysql alter table grade add constraint fuck foreign key(stu_no) references stud ent_info(stu_no) ; ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint f ails (exam.#sql-167c_1, CONSTRAINT fuck FOREIGN KEY (stu_no) REFERENCES student_info (stu_no))\næŠ¥é”™äº†ï¼ï¼ï¼ä¸ºä»€ä¹ˆï¼Ÿ åŸæ¥åœ¨éç©ºè¡¨çš„æƒ…å†µä¸èƒ½æ·»åŠ å¤–é”® äºæ˜¯ï¼š delete from grade;  mysql alter table grade add constraint pig foreign key(stu_no) references student_info(stu_no) on delete restrict on update cascade;\n æœ€ç»ˆæˆ‘çš„gradeè¡¨çš„ç»“æ„ï¼š  mysql | grade | CREATE TABLE grade ( stu_no varchar(20) NOT NULL DEFAULT \u0026ldquo;, curriculum varchar(20) NOT NULL DEFAULT \u0026ldquo;, stu_score double(5,2) NOT NULL DEFAULT \u0026lsquo;0.00\u0026rsquo;, KEY hello (curriculum), KEY pig (stu_no), CONSTRAINT hello FOREIGN KEY (curriculum) REFERENCES curriculum (curric ulum_no) ON UPDATE CASCADE, CONSTRAINT pig FOREIGN KEY (stu_no) REFERENCES student_info (stu_no) O N UPDATE CASCADE ) ENGINE=InnoDB DEFAULT CHARSET=utf8 |\n å…¶å®ç»è¿‡å‰é¢nè¿‡ç¨‹çš„ä¹‹åï¼Œä½ ä¼šå‘ç°è¿™å‡ å¼ è¡¨åœ¨ä½ çš„è„‘æµ·ä¸­ç‰¹åˆ«æ¸…æ™°ï¼š 1.å­¦ç”Ÿçš„ 2.æˆç»©çš„ 3.è¯¾ç¨‹çš„ æœ€ç»ˆçš„ç»“æœæ˜¯ï¼š curriculumè¡¨çš„è®¾è®¡ï¼š  mysql create table curriculum( curriculum_no int not null auto_increment primary key, curriculum_name varchar(20) not null default \u0026ldquo;, curriculum_credit real(5,2) not null default 0.0);\ncurriculumè¡¨çš„æ•°æ®æ·»åŠ ï¼š  mysql insert into curriculum(curriculum_no,curriculum_name,curriculum_credit) v alues(\u0026lsquo;0002\u0026rsquo;,\u0026lsquo;Cè¯­è¨€\u0026rsquo;,3.0);\ninsert into curriculum \u0026lt;curriculum_no,curriculum_name,curriculum_credit) values (\u0026lsquo;0001\u0026rsquo;,\u0026lsquo;è®¡ç®—æœºåŸºç¡€\u0026rsquo;,2.2); insert into curriculum (curriculum_no,curriculum_name,curriculum_credit) values(\u0026lsquo;0003\u0026rsquo;,\u0026lsquo;ç¼–è¯‘åŸç†\u0026rsquo;,2.5); insert into curriculum (curriculum_no,curriculum_name,curriculum_credit) values(\u0026lsquo;0004\u0026rsquo;,\u0026lsquo;é”™åšç³»ç»Ÿ\u0026rsquo;,3.5);\n student_infoè¡¨çš„è®¾è®¡ï¼š  mysql create table student_info( stu_no varchar(20) not null default \u0026ldquo; primary key, stu_name varchar(20) not null default \u0026ldquo;, stu_sex char(4) not null default \u0026lsquo;ç”·\u0026rsquo;, stu_birth date not null default \u0026lsquo;1990-01-07\u0026rsquo;, stu_addr varchar(20) not null default \u0026ldquo;, stu_note varchar(30));\nstudent_infoè¡¨çš„æ•°æ®æ·»åŠ ï¼š  mysql insert into student_info (stu_no,stu_name,stu_sex,stu_birth,stu_addr) val ues(\u0026lsquo;0001\u0026rsquo;,\u0026lsquo;å¼ ä¸‰\u0026rsquo;,\u0026lsquo;ç”·\u0026rsquo;,1989-05-17,\u0026lsquo;åŒ—äº¬\u0026rsquo;);\ninsert into student_info (stu_no,stu_name,stu_sex,stu_birth,stuaddr,stu note) values(\u0026lsquo;0002\u0026rsquo;,\u0026lsquo;æå››\u0026rsquo;,\u0026lsquo;å¥³\u0026rsquo;,1990-06-22,\u0026lsquo;å†…è’™å¤\u0026rsquo;,\u0026lsquo;æ­¤å¥³å­æ€§æ ¼åˆè›®\u0026rsquo;);\ninsert into student_info(stu_no,stu_name,stu_sex,stu_birth,stu_addr) valu es(\u0026lsquo;0003\u0026rsquo;,\u0026lsquo;ç‹äº”\u0026rsquo;,\u0026lsquo;ç”·\u0026rsquo;,1992-02-18,\u0026lsquo;æ±Ÿè¥¿\u0026rsquo;);\n gradeè¡¨çš„è®¾è®¡  mysql create table grade3( stu_no varchar(20) not null default \u0026ldquo;,constraint pig34 foreign key(stu_n o) references student_info(stu_no) on delete restrict on update cascade, curriculum varchar(20) not null default \u0026ldquo;,constraint hellodff foreign ke y(curriculum) references curriculum(curriculum_no) on delete restrict on update cascade, stu_score real(5,2) not null default 0.00);\ngradeè¡¨çš„æ•°æ®æ·»åŠ ï¼ˆæˆªå–éƒ¨åˆ†ï¼‰ï¼š  mysql insert into grade values(\u0026lsquo;0002\u0026rsquo;,\u0026lsquo;0001\u0026rsquo;,75),(\u0026lsquo;0002\u0026rsquo;,\u0026lsquo;0002\u0026rsquo;,60),(\u0026lsquo;0002\u0026rsquo;,\u0026lsquo;00 03\u0026rsquo;,79),(\u0026lsquo;0002\u0026rsquo;,\u0026lsquo;0004\u0026rsquo;,76); insert into grade(stu_no,curriculum,stu_score) values(\u0026lsquo;0003\u0026rsquo;,\u0026lsquo;0002\u0026rsquo;,78); æ³¨æ„äº†ï¼šå¦‚æœå¤–é”®è¡¨çš„0003æ²¡æœ‰çš„è¯ï¼Œåˆ™æ— æ³•æ·»åŠ 0003ï¼Œå¹¶æŠ¥é”™ï¼å¾ˆæ­£å¸¸ï¼Œå› ä¸ºå¤–é”®è¡¨student_infoæ²¡æœ‰ï¼ï¼\n é¢˜ç›®ç»“æœï¼š  mysql mysql\u0026gt; select * from grade; +\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;+ | stu_no | curriculum | stu_score | +\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;+ | 0001 | 0001 | 80.00 | | 0001 | 0002 | 85.00 | | 0001 | 0003 | 90.00 | | 0001 | 0004 | 92.00 | | 0002 | 0001 | 75.00 | | 0002 | 0002 | 60.00 | | 0002 | 0003 | 79.00 | | 0002 | 0004 | 76.00 | | 0003 | 0001 | 80.00 | | 0003 | 0002 | 78.00 | | 0003 | 0003 | 97.00 | | 0003 | 0004 | 86.00 | +\u0026mdash;\u0026mdash;\u0026ndash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;+ 12 rows in set (0.00 sec)\n1. åœ¨GRADEè¡¨ä¸­æŸ¥æ‰¾80-90ä»½çš„å­¦ç”Ÿå­¦å·å’Œåˆ†æ•°  mysql mysql\u0026gt; select stu_no as å­¦å¥½ ,stu_score as åˆ†æ•° from grade where stu_score\u0026gt;80.0 and stu_score\u0026lt;90.0; +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;-+ | å­¦å¥½ | åˆ†æ•° | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;-+ | 0001 | 85.00 | | 0003 | 86.00 | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;-+ 2 rows in set (0.00 sec)\n 2. åœ¨GRADE è¡¨ä¸­æŸ¥æ‰¾è¯¾ç¨‹ç¼–å·ä¸º003å­¦ç”Ÿçš„å¹³å‡åˆ†  mysql mysql\u0026gt; select avg(stu_score) from grade where curriculum=\u0026lsquo;0003\u0026rsquo;; +\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ | avg(stu_score) | +\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ | 88.666667 | +\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ 1 row in set (0.04 sec)\n 3. åœ¨GRADE è¡¨ä¸­æŸ¥è¯¢å­¦ä¹ å„é—¨è¯¾ç¨‹çš„äººæ•°  mysql mysql\u0026gt; select count(),curriculum from grade group by curriculum; +\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+ | count() | curriculum | +\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+ | 3 | 0001 | | 3 | 0002 | | 3 | 0003 | | 3 | 0004 | +\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+ 4 rows in set (0.00 sec)\n 4. æŸ¥è¯¢æ‰€æœ‰å§“å¼ çš„å­¦ç”Ÿçš„å­¦å·å’Œå§“å  mysql mysql\u0026gt; select stu_no å­¦å·,stu_name å§“å from student_info where stu_name like \u0026lsquo; å¼ %\u0026lsquo;; +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ | å­¦å· | å§“å | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ | 0001 | å¼ ä¸‰ | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+ 1 row in set (0.00 sec)\n 5. æŸ¥è¯¢åˆ†æ•°åœ¨80-90åˆ†çš„å­¦ç”Ÿçš„å­¦å·ã€å§“åã€åˆ†æ•°  mysql mysql\u0026gt; select s.stu_no å­¦å·,s.stu_name å§“å,g.curriculum è¯¾ç¨‹,g.stu_score åˆ†æ•° f rom grade g -\u0026gt; left join student_info s on g.stu_no=s.stu_no; +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;-+ | å­¦å· | å§“å | è¯¾ç¨‹ | åˆ†æ•° | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;-+ | 0001 | å¼ ä¸‰ | 0001 | 80.00 | | 0001 | å¼ ä¸‰ | 0002 | 85.00 | | 0001 | å¼ ä¸‰ | 0003 | 90.00 | | 0001 | å¼ ä¸‰ | 0004 | 92.00 | | 0002 | æå›› | 0001 | 75.00 | | 0002 | æå›› | 0002 | 60.00 | | 0002 | æå›› | 0003 | 79.00 | | 0002 | æå›› | 0004 | 76.00 | | 0003 | ç‹äº” | 0001 | 80.00 | | 0003 | ç‹äº” | 0002 | 78.00 | | 0003 | ç‹äº” | 0003 | 97.00 | | 0003 | ç‹äº” | 0004 | 86.00 | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;-+ 12 rows in set (0.00 sec)\nè¿›ä¸€æ­¥æ±‚è§£ï¼š  mysql mysql\u0026gt; select s.stu_no å­¦å·,s.stu_name å§“å,c.curriculum_name è¯¾ç¨‹åç§°,g.stu_sco re åˆ†æ•° from grade g -\u0026gt; left join student_info s on g.stu_no=s.stu_no -\u0026gt; left join curriculum c on g.curriculum=c.curriculum_no; +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;-+ | å­¦å· | å§“å | è¯¾ç¨‹åç§° | åˆ†æ•° | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;-+ | 0001 | å¼ ä¸‰ | è®¡ç®—æœºåŸºç¡€ | 80.00 | | 0001 | å¼ ä¸‰ | Cè¯­è¨€ | 85.00 | | 0001 | å¼ ä¸‰ | ç¼–è¯‘åŸç† | 90.00 | | 0001 | å¼ ä¸‰ | æ“ä½œç³»ç»Ÿ | 92.00 | | 0002 | æå›› | è®¡ç®—æœºåŸºç¡€ | 75.00 | | 0002 | æå›› | Cè¯­è¨€ | 60.00 | | 0002 | æå›› | ç¼–è¯‘åŸç† | 79.00 | | 0002 | æå›› | æ“ä½œç³»ç»Ÿ | 76.00 | | 0003 | ç‹äº” | è®¡ç®—æœºåŸºç¡€ | 80.00 | | 0003 | ç‹äº” | Cè¯­è¨€ | 78.00 | | 0003 | ç‹äº” | ç¼–è¯‘åŸç† | 97.00 | | 0003 | ç‹äº” | æ“ä½œç³»ç»Ÿ | 86.00 | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;-+ 12 rows in set (0.00 sec)\nmysql\u0026gt; select s.stu_no å­¦å·,s.stu_name å§“å,c.curriculum_name è¯¾ç¨‹åç§°,g.stu_sco re åˆ†æ•° from grade g -\u0026gt; left join student_info s on g.stu_no=s.stu_no -\u0026gt; left join curriculum c on g.curriculum=c.curriculum_no -\u0026gt; where g.stu_score\u0026gt;80 and g.stu_score\u0026lt;90; +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;-+ | å­¦å· | å§“å | è¯¾ç¨‹åç§° | åˆ†æ•° | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;-+ | 0001 | å¼ ä¸‰ | Cè¯­è¨€ | 85.00 | | 0003 | ç‹äº” | æ“ä½œç³»ç»Ÿ | 86.00 | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;-+ 2 rows in set (0.00 sec)\n 6. æŸ¥è¯¢å­¦ä¹ äº†â€™Cè¯­è¨€â€™è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·ã€å§“åå’Œåˆ†æ•°  mysql mysql\u0026gt; select s.stu_no å­¦å·,s.stu_name å§“å,c.curriculum_name è¯¾ç¨‹åç§°,g.stu_sco re åˆ†æ•° from grade g -\u0026gt; left join curriculum c on g.curriculum=c.curriculum_no -\u0026gt; left join student_info s on g.stu_no=s.stu_no -\u0026gt; where c.curriculum_name=\u0026lsquo;cè¯­è¨€\u0026rsquo;; +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;-+ | å­¦å· | å§“å | è¯¾ç¨‹åç§° | åˆ†æ•° | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;-+ | 0001 | å¼ ä¸‰ | Cè¯­è¨€ | 85.00 | | 0002 | æå›› | Cè¯­è¨€ | 60.00 | | 0003 | ç‹äº” | Cè¯­è¨€ | 78.00 | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;-+ 3 rows in set (0.00 sec)\n 7. æŸ¥è¯¢å­¦ä¹ äº†â€™Cè¯­è¨€â€™è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·ã€å§“åå’Œåˆ†æ•° å¹¶æ’åº  mysql mysql\u0026gt; select s.stu_no å­¦å·,s.stu_name å§“å,c.curriculum_name è¯¾ç¨‹åç§°,g.stu_sco re åˆ†æ•° from grade g -\u0026gt; left join curriculum c on g.curriculum=c.curriculum_no -\u0026gt; left join student_info s on g.stu_no=s.stu_no -\u0026gt; where c.curriculum_name=\u0026lsquo;cè¯­è¨€\u0026rsquo; -\u0026gt; order by g.stu_score; +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;-+ | å­¦å· | å§“å | è¯¾ç¨‹åç§° | åˆ†æ•° | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;-+ | 0002 | æå›› | Cè¯­è¨€ | 60.00 | | 0003 | ç‹äº” | Cè¯­è¨€ | 78.00 | | 0001 | å¼ ä¸‰ | Cè¯­è¨€ | 85.00 | +\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;+\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;-+ 3 rows in set (0.00 sec)\n ç¬¬äºŒé¢˜ï¼š è´¹æ—¶ï¼š3ä¸ªå°æ—¶ï¼ˆé‡å†™5éï¼‰ http://www.rupeng.com/forum/thread-44516-1-1.html sql_propertiesï¼š  mysqlDriver=com.mysql.jdbc.Driver connectDatabase=jdbc:mysql://localhost/study?seUnicode=true\u0026amp;characterEncoding=UTF8 userName=root Password=root\nJDBCUtils:  java package com.jdbc.test;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ19æ—¥ä¸‹åˆ10:41:37 * 10:55 14min * @version com.jdbc.testrewrite4 V1.0 / import java.util.; import java.sql.; import java.io.; public class rewrite4 { private final static String mysqlDriver; private final static String connectDatabase; private final static String userName; private final static String Password;\n static { Properties prop = new Properties(); InputStream in = rewrite4.class.getResourceAsStream(\u0026quot;sql.properties\u0026quot;); try { prop.load(in); mysqlDriver = prop.getProperty(\u0026quot;mysqlDriver\u0026quot;); connectDatabase = prop.getProperty(\u0026quot;connectDatabase\u0026quot;); userName = prop.getProperty(\u0026quot;userName\u0026quot;); Password = prop.getProperty(\u0026quot;Password\u0026quot;); } catch (IOException e) { // TODO Auto-generated catch block throw new RuntimeException(\u0026quot;é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥\u0026quot;); } try { Class.forName(mysqlDriver); } catch (ClassNotFoundException e) { // TODO Auto-generated catch block throw new RuntimeException(\u0026quot;mysqlé©±åŠ¨åŠ è½½å¤±è´¥\u0026quot;); } } public static Connection createConnection() { Connection conn = null; try { conn = DriverManager.getConnection(connectDatabase); } catch (SQLException e) { // TODO Auto-generated catch block throw new RuntimeException(\u0026quot;æœªèƒ½æ­£ç¡®åˆ›å»ºè¿æ¥\u0026quot;); } return conn; } public static int executeUpdate(String sql,Object... param) throws SQLException { Connection conn = rewrite4.createConnection(); return rewrite4.executeUpdate(conn,sql, param); } public static int executeUpdate(Connection conn,String sql,Object... param) throws SQLException { PreparedStatement ps = null; int row = 1; try { ps = conn.prepareStatement(sql); for(Object par:param) { ps.setObject(row, par); row++; } return ps.executeUpdate(); }finally { rewrite4.closeQuietly(ps); } } public static ResultSet executeQuery(String sql,Object... param) throws SQLException { Connection conn = rewrite4.createConnection(); return rewrite4.executeQuery(conn, sql, param); } public static ResultSet executeQuery(Connection conn,String sql,Object... param) throws SQLException { ResultSet rs = null; PreparedStatement ps = null; ps = conn.prepareStatement(sql); int row =1; for(Object par:param) { ps.setObject(row, par); row++; } rs = ps.executeQuery(); return rs; } public static void closeQuietly(Connection conn) { if(conn != null) { try { conn.close(); } catch (SQLException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } public static void closeQuietly(Statement stmt) { if(stmt != null) { try { stmt.close(); } catch (SQLException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } public static void closeQuietly(ResultSet rs) { if(rs != null) { try { rs.close(); } catch (SQLException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } public static void closeAll(ResultSet rs) { if(rs != null) { try { rs.close(); } catch (SQLException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } public static void rollback(Connection conn) { if(conn != null) { try { conn.rollback(); } catch (SQLException e) { // TODO Auto-generated catch block e.printStackTrace(); } } }  }\n ç¬¬ä¸‰é¢˜ï¼š è´¹æ—¶1ä¸ªå°æ—¶å·¦å³  java /** * */ package com.jdbc.test;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ18æ—¥ä¸‹åˆ3:49:22 * ä¸‹åˆ5:00å·¦å³ * @version com.jdbc.testphoneCheck V1.0 / import java.io.; import java.sql.*; import java.util.Scanner;\npublic class phoneCheck {\n /** * @param args */  /** * ID,MobileNumber,MobileArea,MobileType,AreaCode,PostCode,0 è¿æ¥æˆåŠŸ æ€»å…±æ·»åŠ äº†300105æ¡æ•°æ®.è€—æ—¶ï¼š64712 */ private static void load() { //å¯¼å…¥csvæ•°æ®ï¼Œåˆ©ç”¨BufferedInputStream InputStream is = null; InputStreamReader isr = null; BufferedReader bis = null; //ä¸€è¡Œä¸€è¡Œè¯»å…¥æ•°æ®\n Connection conn = null; PreparedStatement ps = null; int len = 0; int i = 0; long startms = System.currentTimeMillis(); try { is = new FileInputStream(\u0026quot;e://phone.csv\u0026quot;); isr = new InputStreamReader(is); bis = new BufferedReader(isr); System.out.println(bis.readLine()); //ç¬¬ä¸€è¡Œå­—æ®µèˆå» String apple= null; String[] applePiles = null; //ç¬¬ä¸€æ¬¡æµ‹è¯• å­—ç¬¦ä¸²çš„è¡Œè¯»å…¥  /* System.out.println(bis.readLine()); System.out.println(bis.readLine());*/ /apple =bis.readLine(); //å­—ç¬¦ä¸²çš„ä¸€æ¬¡å¤±è¯¯ï¼ï¼ å¯¼è‡´æ’å…¥å¤±è´¥ï¼ï¼ï¼‚ï¼‚æ˜¯é»˜è®¤å­˜åœ¨çš„ã€€å¿…é¡»åˆ æ‰ apple = apple.replaceAll(\u0026rdquo;\\\u0026ldquo;\u0026rdquo;, \u0026ldquo;\u0026rdquo;); //ç¬¬äºŒæ¬¡æµ‹è¯• å­—ç¬¦ä¸²åˆ†éš” String[] splitArray = apple.split(\u0026ldquo;,\u0026rdquo;); for(String apple1 :splitArray) { System.out.println(apple1); }/ conn = JDBCUtils.createConnection(); conn.setAutoCommit(false);\n String sql = \u0026quot;insert into phone(MobileNumber,MobileArea,MobileType,Area\u0026quot; + \u0026quot;Code,PostCode) values(?,?,?,?,?);\u0026quot;; ps = conn.prepareStatement(sql); /** * 370ä¸­å›½ç”µä¿¡ 371ä¸­å›½ç”µä¿¡ ä¹‹å æŠ¥é”™ ï¼Œå¯èƒ½æ˜¯ä¸ºç©ºçš„åŸå›  */ while((apple=bis.readLine()) != null) { apple = apple.replaceAll(\u0026quot;\\\u0026quot;\u0026quot;, \u0026quot;\u0026quot;); applePiles = apple.split(\u0026quot;,\u0026quot;); ps.clearParameters(); //ps.setInt(1, Integer.parseInt(applePiles[1].equalsIgnoreCase(\u0026quot;\u0026quot;)?\u0026quot;1111\u0026quot;:applePiles[4])); //ps.setInt(1, Integer.parseInt(applePiles[1])); ps.setString(1, applePiles[1]); ps.setString(2, applePiles[2]); //System.out.println(i+applePiles[3]+applePiles[4]); ps.setString(3, applePiles[3]);  // ps.setInt(4, Integer.parseInt(applePiles[4]));//.equalsIgnoreCase(\u0026ldquo;\u0026rdquo;)?\u0026ldquo;1111\u0026rdquo;:applePiles[4])); // ps.setInt(5, Integer.parseInt(applePiles[5]));//.equalsIgnoreCase(\u0026ldquo;\u0026rdquo;)?\u0026ldquo;1111\u0026rdquo;:applePiles[4])); ps.setString(4, applePiles[4]); ps.setString(5, applePiles[5]); ps.addBatch();\n i++; //æ¯ä¸ª2000æ­¥ä¹‹åè¿›è¡Œæäº¤ä¸€æ¬¡ åˆ°æ•°æ®åº“ if(i%2000==0) { ps.executeBatch(); } } //æäº¤ æœ€åçš„å‡ ç™¾æ­¥ ps.executeBatch(); conn.commit(); long endMs = System.currentTimeMillis(); System.out.println(\u0026quot;æ€»å…±æ·»åŠ äº†\u0026quot;+i+\u0026quot;æ¡æ•°æ®\u0026quot;+\u0026quot;.è€—æ—¶ï¼š\u0026quot;+(endMs-startms)); }catch(IOException e) { throw new RuntimeException(\u0026quot;è¯»å–æ–‡ä»¶å¼‚å¸¸\u0026quot;); }catch(SQLException e) { try { conn.rollback(); } catch (SQLException e1) { // TODO Auto-generated catch block e1.printStackTrace(); } //åˆå¿˜è®°äº† throw new RuntimeException(\u0026quot;æ•°æ®åº“æ’å…¥å¼‚å¸¸ï¼\u0026quot;); }finally { //ç”¨å®Œä¹‹åè®°å¾—å·®å±è‚¡ JDBCUtils.closeQuietly(ps); JDBCUtils.closeQuietly(conn); } } public static void checkPhoneNumber(String PhoneNumber) { PhoneNumber = \u0026quot;%\u0026quot;+PhoneNumber+\u0026quot;%\u0026quot;; String sql = \u0026quot;select * from phone where MobileNumber like ?\u0026quot;; ResultSet rs = null; try { rs = JDBCUtils.executeQuery(sql, PhoneNumber); if(!rs.next()) { System.out.println(\u0026quot;å½“å‰ç‰ˆæœ¬æ²¡æœ‰\u0026quot;+PhoneNumber+\u0026quot;çš„ä¿¡æ¯\u0026quot;);  // return; } //rs.next(); System.out.println(PhoneNumber+\u0026ldquo;æ‰‹æœºå·æ¥è‡ª\u0026rdquo;+rs.getString(\u0026ldquo;MobileArea\u0026rdquo;)+rs.getString(\u0026ldquo;MobileType\u0026rdquo;)); } catch (SQLException e) { // TODO Auto-generated catch block return; }finally { //ç”¨å®Œä¹‹åå°±å·®å±è‚¡ JDBCUtils.closeAll(rs); }\n } public static void main(String[] args) { // TODO Auto-generated method stub //å¯¼å…¥ä¸€æ¬¡å³å¯ //load(); while(true) { System.out.println(\u0026quot;è¯·è¾“å…¥æ‰‹æœºå·(è‡³å°‘7ä½)\u0026quot;); Scanner sc = new Scanner(System.in); String PhoneNumber = sc.nextLine(); if(PhoneNumber.equalsIgnoreCase(\u0026quot;exit\u0026quot;)||PhoneNumber.equalsIgnoreCase(\u0026quot;quit\u0026quot;)) { return; } PhoneNumber = PhoneNumber.substring(0,7); checkPhoneNumber(PhoneNumber); } }  }\nåŠ ä¸Šå¯¹è¯æ¡†çš„è®¾è®¡ï¼š  java /** * */ package com.jdbc.test;\nimport java.sql.ResultSet; import java.sql.SQLException;\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ22æ—¥ä¸‹åˆ7:48:03 * @version com.jdbc.testPhoneCheckUpdate V1.0 / import GTKEncapsulate.; public class PhoneCheckUpdate {\n /** * @param args */ private static OOLabel olLabel; private static OOEntry oeCerti; private static OOButton obClick; private static OOBox obBox; private static OOWindow owPig; public PhoneCheckUpdate() { olLabel = new OOLabel(\u0026quot;è¯·è¾“å…¥ç”µè¯çš„å‰å…­ä½ï¼š\u0026quot;); oeCerti = new OOEntry(); oeCerti.setTextMaxLength(6); oeCerti.setText(\u0026quot;151010\u0026quot;); obBox = new OOBox(); obClick = new OOButton(\u0026quot;æŸ¥è¯¢\u0026quot;); owPig = new OOWindow(); owPig.setWidgetSize(200, 50); //show owPig.show(); owPig.setExitAfterDestroy(true); olLabel.show(); oeCerti.show(); obBox.show(); obClick.show(); //contains owPig.add(obBox); obBox.add(olLabel); obBox.add(oeCerti); obBox.add(obClick); //æ·»åŠ äº‹ä»¶ obClick.addClickedListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub String text= oeCerti.getText(); OOMessageDialog omd = new OOMessageDialog(checkPhoneNumber(text)); omd.run(); omd.destroy(); } }); } private static String checkPhoneNumber(String PhoneNumber) { PhoneNumber = \u0026quot;%\u0026quot;+PhoneNumber+\u0026quot;%\u0026quot;; String sql = \u0026quot;select * from phone where MobileNumber like ?\u0026quot;; ResultSet rs = null; try { rs = JDBCUtils.executeQuery(sql, PhoneNumber); if(!rs.next()) { System.out.println(\u0026quot;å½“å‰ç‰ˆæœ¬æ²¡æœ‰\u0026quot;+PhoneNumber+\u0026quot;çš„ä¿¡æ¯\u0026quot;); return \u0026quot;å½“å‰ç‰ˆæœ¬æ²¡æœ‰\u0026quot;+PhoneNumber+\u0026quot;çš„ä¿¡æ¯\u0026quot;;  // return; } //rs.next(); System.out.println(PhoneNumber+\u0026ldquo;æ‰‹æœºå·æ¥è‡ª\u0026rdquo;+rs.getString(\u0026ldquo;MobileArea\u0026rdquo;)+rs.getString(\u0026ldquo;MobileType\u0026rdquo;)); return PhoneNumber+\u0026ldquo;æ‰‹æœºå·æ¥è‡ª\u0026rdquo;+rs.getString(\u0026ldquo;MobileArea\u0026rdquo;)+rs.getString(\u0026ldquo;MobileType\u0026rdquo;);\n } catch (SQLException e) { // TODO Auto-generated catch block return null; }finally { //ç”¨å®Œä¹‹åå°±å·®å±è‚¡ JDBCUtils.closeAll(rs); } } public static void main(String[] args) { // TODO Auto-generated method stub GTK.gtk_init(); PhoneCheckUpdate pcu = new PhoneCheckUpdate(); GTK.gtk_main(); }  } ```\n","date":1431327521,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327521,"objectID":"9ac08a9133c95fa7dfc916cb984ba2a8","permalink":"/blog/2015/05/11/2yue-27ri-javazhou-mo-ban-shi-ti/","publishdate":"2015-05-11T14:58:41+08:00","relpermalink":"/blog/2015/05/11/2yue-27ri-javazhou-mo-ban-shi-ti/","section":"archives","summary":"","tags":null,"title":"2æœˆ27æ—¥Javaå‘¨æœ«ç­è¯•é¢˜","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"ç¬¬ä¸€éƒ¨åˆ†ï¼šç¬”è®°\n1ï¼šå°è£…ä¸¤ä¸ªä¸éœ€è¦Idçš„ç±»ï¼ŒOORGB,OOCairo OORGBç”¨äºè®¾ç½®é¢œè‰²å€¼ï¼Œå¹¶å°è£…å‡ ä¸ªå¸¸è§çš„é¢œè‰²OORGB.RED OORGB.BLUE OORGB.GREEN.. OOCairoåˆ™æ˜¯ä¸€ä¸ªç»˜å›¾ç±»ï¼Œä¸»è¦åŒ…æ‹¬ç§»åŠ¨ç‚¹ï¼Œç”»çº¿ï¼Œç”»åœ†ï¼Œç”»çŸ©å½¢ç­‰ã€‚å½“ç„¶å…ˆå‰çš„GTK.Cairoç±»çš„æ–¹æ³•ä¸­ï¼Œéƒ½æ˜¯åŒ…å«ç¯å¢ƒå¥æŸ„ï¼Œæ‰€ä»¥OOCairoçš„å°è£…éœ€è¦è€ƒè™‘ç¯å¢ƒå¥æŸ„ï¼Œå¹¶åœ¨å°è£…ä¹‹åä¸éœ€è¦å† è°ƒå…¥ç¯å¢ƒå¥æŸ„(å·²å°è£…ï¼‰\n2ï¼šå°è£…GtkWidgetä¸ºOOWidget æœ€ä¸ºå…³é”®çš„ä¸€æ­¥æ˜¯è®¾ç½®Idçš„å·¥ä½œã€‚ æ¯ä¸€ä¸ªå¥æŸ„éƒ½å…·æœ‰ä¸€ä¸ªå¯¹è±¡æ ‡è¯†ï¼Œè€ŒGtk+é»˜è®¤æ˜¯é€šè¿‡ä¸€ä¸ª æ•´æ•°æ¥è¡¨ç¤ºå¯¹è±¡æ ‡è¯†ï¼Œäºæ˜¯éœ€è¦æŠŠè¿™ä¸ªå€¼è®¾ç½®ä¸ºç§æœ‰çš„Id(ä¼°è®¡æƒ³åˆ°è¿™ä¸ªå¾—è´¹ç‚¹æ—¶é—´ã€‚ã€‚ï¼‰äºæ˜¯ å°±æœ‰äº†getIdå’ŒsetIdã€‚è¿™ä¸€æ­¥çš„ä½œç”¨å½±å“åˆ°ä¸‹èŠ‚çš„è¿›ä¸€æ­¥å°è£…ï¼Œ javadocçš„æ³¨é‡Šï¼š /** + enteré”®ï¼Œä¼šè‡ªåŠ¨å¯¼å…¥æ–¹æ³•çš„å‚é‡å’Œè¿”å›å€¼ä»¥åŠç±»çš„åˆ›å»ºè€…ç­‰ javadocçš„ç”Ÿæˆï¼š é¡¹ç›®\u0026mdash;\u0026gt;ç”Ÿæˆjavadoc\u0026mdash;\u0026gt;å¡«å…¥javadocè·¯å¾„ jd2chm+httphelper è½¬åŒ–ä¸ºchmæ–‡æ¡£\n åˆ©ç”¨ä¸Šè¿°æ–¹æ³•ï¼Œè®©æ‰€æœ‰çš„æ§ä»¶éƒ½ç»§æ‰¿è‡ªOOWidget(ç°åœ¨æƒ³æƒ³æœ‰ç‚¹ä¸åˆç†ï¼‰ï¼Œå°è£…äº†21ä¸ªç±» åŒ…æ‹¬ï¼šOOBox, OOButton,OOCairo,OOCalendar,OODialog,OOEntry,OOFileChooser,OOGrid OOLabel,OOMenu,OOProgressBar, OORGB,OOScrollBar,OOSpinBox,OOStatusIcon, OOSwitch,OOTextIter,OOTextView,OOToolBar,OOTreeView,OOWidget å¹¶è¿›è¡Œäº†ä¸€ä¸ªç®€å•æµ‹è¯• TestOOCairo.java  ä¸Šé¢çš„å†…å®¹æ„æˆäº†æºç v1.0ç‰ˆ\nè¿›ä¸€æ­¥å‘ç°æºç V1.0å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼Œæ²¡æœ‰ç…§é¡¾åˆ°ç»§æ‰¿å…³ç³»å›¾ã€‚\nåæ¥ç»§ç»­å­¦ä¹ äº†æ¨è€å¸ˆçš„è§†é¢‘ï¼Œå‘ç°æºç v1.0å¹¶æœªä½“ç°GTK+ç»§æ‰¿å…³ç³» å¦‚å›¾GTKç»§æ‰¿ç»“æ„å…³ç³»å›¾.png ç”±æ­¤å¯è§ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ§ä»¶æ˜¯ç›´æ¥ç»§æ‰¿OOWidgetçš„ï¼Œå¹¶è€ƒè™‘åˆ°ä»¥ä¸‹bugæƒ…å†µ bug1: Protectedæ˜¯æŒ‡å…„å¼Ÿå’Œå„¿å­å¯ä»¥è®¿é—®ï¼ï¼ ä¹Ÿå°±æ˜¯ä¸åŒåŒ…çš„ä¸å¯ä»¥è®¿é—®ã€‚ ä¸ºä»€ä¹ˆsetId()æœ€å¥½æ”¹ä¸ºprotectedå‘¢ï¼Ÿ å› ä¸ºæˆ‘ä»¬ç»å¸¸æ˜¯è®©ä¸€ä¸ªåŒ…æ‰“æˆtarï¼Œç„¶ååˆ«äººå¼•ç”¨è¿™ä¸ªjaråŒ…ï¼ ä¹Ÿå°±æ˜¯å’Œè¿™ä¸ªjaråŒ…ä¸ä¸€æ · ä¹Ÿå°±æ˜¯ä»–æ— æ³•æ‰§è¡Œè¿™æ ·çš„æ“ä½œ ä¹Ÿå°±æ˜¯ æ¯”å¦‚OOEntry oe = new OOEntry(); Oe.setId(GTK.gtk_label_new())çš„æ¢å¿ƒæ“ä½œã€‚ ä¸è¦è®©entryå˜æˆäº†labelè€Œä½ å´æ˜¯ä¸çŸ¥é“ã€‚\nbug2ï¼š æŠŠOOWidget æ ‡è®°ä¸ºæŠ½è±¡ç±»ï¼ è¿™æ ·é˜²æ­¢ç”¨æˆ· *\nç›´æ¥OOWidget ow = new OOWidget() ; ow.show() * è¿™å®Œå…¨æ˜¯æ— æ„ä¹‰çš„å·¥ä½œ è¿™å°±æ˜¯æŠ½è±¡çš„å¥½å¤„ï¼ï¼ è®©å­ç±»å»åšï¼Œçˆ¶ç±»ä¸è¦å»å®ä¾‹åŒ–äº†\nbug3:\nè§å›¾Containeræ˜¯åªå¤§è€è™.png ,å‘ç°å…ˆå‰å†™çš„å¤§éƒ¨åˆ†æ§ä»¶çš„å°è£…éƒ½æ˜¯containerçš„å­ç±»ï¼Œäºæ˜¯æ–°å»ºäº†OOContainerç±»ï¼Œå¹¶é‡æ–°æ”¹å†™äº†OOBoxï¼ŒOOGrid,OOTextView,OOToolBar,OOTreeView ,ï¼ˆä¿®æ”¹çš„åªæ˜¯æŠŠextends æ”¹ä¸ºäº†OOContainerï¼Œè¿™ä¸ªå·¥ä½œé‡ä¸å¤§ï¼Œå‘ç°æœ‰æ•ˆ å…¶ä»–æ„é€ å‡½æ•°ä¸éœ€è¦æ”¹ï¼Œä¿®æ”¹å®Œæ¯•ï¼‰ å¹¶å‘ç°æˆ‘å¹¶æœªå°è£…combobox,å’Œradiobuttonä¹‹ç±»çš„ï¼Œcheckbox å¹¶æœ€ç»ˆè¿˜ä½¿å¾—buttonåœ¨åŸå…ˆçš„ä¸¤ä¸ªæ„é€ å‡½æ•°çš„åŸºç¡€ä¸Šå¢åŠ äº†å›¾ç‰‡èµ„æºçš„åŠ è½½ï¼Œå’ŒåŠ è½½å›¾ç‰‡çš„ä½ç½®æ§åˆ¶ å¢åŠ äº†8ä¸ªå·¥ä½œé‡ã€‚\nhttp://blog.csdn.net/uunubt/article/details/6089402 å‚è€ƒæ­¤æ–‡ï¼Œç¢ç£¨å‡ºæ¥RadioButtonçš„ç”¨æ³•ï¼š int cbMan = GTK.gtk_radio_button_new_with_label(0, \u0026ldquo;ç”·\u0026rdquo;); int cbWoman = GTK.gtk_radio_button_new_with_label_from_widget(cbMan, \u0026ldquo;å¥³\u0026rdquo;);\nOKç»è¿‡äº†åŠªåŠ›ç»ˆäºå®Œæˆæ­¤é¡¹å·¥ä½œçš„å°è£… ï¼ˆä¿®æ”¹çš„åªæ˜¯æŠŠextends æ”¹ä¸ºäº†OOContainerï¼Œè¿™ä¸ªå·¥ä½œé‡ä¸å¤§ï¼Œå‘ç°æœ‰æ•ˆ å…¶ä»–æ„é€ å‡½æ•°ä¸éœ€è¦æ”¹ï¼Œä¿®æ”¹å®Œæ¯•ï¼‰\nåæ¥å‘ç°è¿™ç§è¯¥æ³•å…¶å®æœ‰ä¸æ°å½“çš„åœ°æ–¹ï¼Œåº”è¯¥æ˜¯å¯ä»¥çœç•¥æ‰æ„é€ å‡½æ•°ã€‚ä½†æ˜¯è¿™æ˜¯ä»…ä»…å¦‚æœæ„é€ å‡½æ•°å’ŒOOContaineræ˜¯ä¸€æ ·çš„æƒ…å†µï¼ˆè¿˜æ˜¯æ¶‰åŠåˆ°æ„é€ å‡½æ•°å¯ä»¥é‡å†™çš„é—®é¢˜ï¼‰\nbug4:\nåæ¥å‘ç°bug3å¹¶ä¸å®Œå–„ï¼Œè§‚å¯Ÿç»§æ‰¿å›¾å‘ç°å¾ˆå¤šçš„æ§ä»¶éƒ½æ˜¯æ¥è‡ªGtkbinï¼Œè§GtkBinæ˜¯åªå°è€è™.png. ç”±äºGtkBinæ˜¯å•æ§ä»¶å®¹å™¨ï¼Œäºæ˜¯é‡‡ç”¨æ¨è€å¸ˆé’ˆå¯¹OOContainerçš„ addæ–¹æ³•çš„Overrideé‡å†™ï¼ˆGtkBinä¹Ÿæ˜¯OOContainerçš„ä¸€éƒ¨åˆ†ï¼‰ Overrideæ–¹æ³•ï¼š\n@Override public void add(OOWidget ow) { int[] children = GTK.gtk_container_get_children(this.getId()); if(children.length \u0026lt;= 0 ) { //è°ƒç”¨çˆ¶ç±»çš„addæ–¹æ³• super.add(ow); //super.add è°ƒç”¨çˆ¶ç±» //this.add è°ƒç”¨æœ¬ç±» //super() è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•(åœ¨æ„é€ å‡½æ•°ä¸­) //this() è°ƒç”¨æœ¬ç±»çš„æ„é€ æ–¹æ³•(åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œè®°å¾—æˆ‘ä¸ºä»€å†™ä¸Šæ‹¬å·) }else { throw new IllegalArgumentException(\u0026quot;å®¹å™¨ä¸­å·²ç»æœ‰äº†ä¸€ä¸ªå¯¹è±¡\u0026quot;); } }  bug5: å¹¶è¿›ä¸€æ­¥ä¿®æ”¹äº†GTKButton, GTKImageButton GGTKComboBox GTKToolItem GTKWindow å­¦ä¹ äº†å°è£…åŸåˆ™ï¼š èƒ½çœåˆ™çœï¼Œå°½é‡è°ƒç”¨çˆ¶ç±»å®ç°çš„ä»£ç ï¼Œå‡å°‘ä»£ç é‡ï¼Œå‡å°‘å‡ºé”™çš„è¯­å¥ æœ€ç»ˆæŠŠä»£ç å°è£…åˆ°äº†31ä¸ªï¼Œè§å›¾2.0çš„æ‰€æœ‰ç±»æ–‡ä»¶ã€‚\nä¸‹é¢æ˜¯æˆ‘ä»£ç çš„æäº¤è®°å½•ï¼š 1ï¼šé‡æ–°å°è£…äº†ç¨‹åº æ ¹æ®GTKçš„ç»§æ‰¿å…³ç³» æ‰€æœ‰çš„æ§ä»¶éƒ½æ¥è‡ªGTKwidget GTKBinæ˜¯æŒ‡åªèƒ½æ·»åŠ ä¸€ä¸ªç©ºé—´çš„ç±» GTKContaineræ˜¯åŒ…å«ç€GTKBin GTKGrid GTKBoxï¼ŒGTKToolBar,OOTreeView,OOTextView 2. å°è£…äº†GTKImage 3. å°è£…äº†GTKCheckButtonå’ŒradioButtonï¼Œå¹¶ç¢ç£¨äº†GTKRadioButtonçš„ç”¨æ³• 4. æ·»åŠ äº†GTKBinå’ŒGTKWindowçš„å°è£…ï¼Œè‡³æ­¤åŸºæœ¬ä¸Šæ‰€æœ‰çš„ä¸œè¥¿ï¼Œéƒ½å·²ç»é¢å‘å¯¹è±¡åŒ–äº† 5. æµ‹è¯•äº†OOPasswordä¹‹ç±»çš„ç”¨æ³•ï¼Œä½¿å¾—OOPasswordç»§æ‰¿è‡ªOOEntry 6. æ·»åŠ äº†OOFileChooserçš„å°è£… 7 ä¿®æ”¹OOButton ä½¿å…¶ç»§æ‰¿è‡ªOOBin,ä¹Ÿå°±æ˜¯åªèƒ½æ·»åŠ å•ä¸€ç©ºé—´ 8. ä½¿å¾—OOWidgetå˜å¾—æŠ½è±¡ç”»ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç° å®šä¹‰ä¸€ä¸ªOOWidgetå¯¹è±¡çš„é¢æƒ…å†µï¼Œä½¿å¾—ç¨‹åºæ›´å…·å¯é æ€§ 9. ä½¿å¾—OOWidgetçš„setIdå˜æˆprotectedï¼Œè¿™æ ·åªæœ‰å­ç±»å’Œå…„å¼Ÿç±»ï¼ˆåŒåŒ…ï¼‰å¯ä»¥ä½¿ç”¨ï¼Œä¸åŒåŒ…çš„ä¸å¯ä»¥ä½¿ç”¨ã€‚ 10ï¼šå¢åŠ äº†OOCombo(ä»OOBinç»§æ‰¿å¾—åˆ°)ç±»å……å½“ OOComboboxçš„çˆ¶ç±» 11: æŠŠComboBoxTextçš„ addLister æ·»åŠ åˆ°OOComboç±»ä¸­ï¼ï¼ 12: å¢åŠ äº†OOToggleButtonç±» 13ï¼šä¿®æ”¹äº†CheckBoxä½¿å…¶å……å½“OOToggleButtonde 14ï¼š ä¿®æ”¹äº†OOScrollBarçš„ç»§æ‰¿é¡¹ ä»OOWidgetåˆ°OOContainer\nä¸Šé¢çš„å†…å®¹æ„æˆäº†GTKEncapsulateV2.0æºç \nç¬¬äºŒéƒ¨åˆ† ä½œä¸š\næºç V1.0ç‰ˆæœ¬.rar æºç V2.0ç‰ˆæœ¬.rar Bugå†ä¿®å¤1 menuçš„clickedäº‹ä»¶æ”¹ä¸ºactivate(menu itemå“åº” activateäº‹ä»¶ï¼‰ï¼Œè¿™ä¸ªactivateè®©æˆ‘èŠ±è´¹äº†è‡³å°‘ä¸¤ä¸ªå°æ—¶ï¼Œå› ä¸ºæŠŠæ‰€æœ‰çš„OOMenuçš„è¿‡ç¨‹ é‡æ–°åœ¨ä¹¦å†™äº†ä¸€éï¼Œå¹¶æ‹†æˆå­¤ç«‹çš„å››ä¸ªç‰‡æ®µåˆ†åˆ«æ˜¯ï¼š OOMenuBar.javaï¼ˆå°†åŒ…è£…æ·»å…¥åŒ…è£…æ¡ï¼Œèœå•æ¡ï¼‰ OOSubMenu.javaï¼ˆæŠŠèœå•åŒ…è£…ï¼‰ OOSingleMenu.java ï¼ˆç»˜åˆ¶èœå•ï¼‰ OOMenuVegetable.java ï¼ˆç»˜åˆ¶ä¸€ç›˜èœï¼‰ã€‚å…·ä½“çš„ä¹Ÿåœ¨æºä»£ç ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ã€‚  Bugä¿®å¤2 æ–‡ä»¶è¿‡æ»¤å™¨çš„ æŠ½è±¡æ–¹æ³•çš„è¿”å›å€¼ä»voidå˜ä¸º String[]ï¼Œè¿™æ ·å¯ä»¥è¿”å›å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚æ‰“å¼€æ–‡ä»¶å¤¹çš„æ–‡ä»¶åï¼‰ //public abstract void processResponse(); public abstract String[] processResponse();\nBugä¿®å¤3 FileChooserçš„runæ–¹æ³• ä»void å˜åˆ°int, è¿™æ ·å¯ä»¥æ¥å—è¿”å›å€¼ï¼Œåˆ¤æ–­å¯¹åº”çš„æ‰§è¡Œè¡Œä¸º Bugä¿®å¤4 ä¿®æ”¹äº†OOTextView ä½¿å…¶ä»\npublic void addScrollBar(int width, int height) { OOScrollBar osb = new OOScrollBar(); osb.setWidgetSize(width, height); osb.addView(this.getId()); }  å˜åˆ°\npublic void addScrollBar(OOGrid og,int start,int width, int height) { OOScrollBar osb = new OOScrollBar(); osb.setWidgetSize(width, height); osb.addView(this.getId()); osb.show(); og.add(osb.getId(), start); }  è®©textviewè‡ªåŠ¨å¯ä»¥æ·»åŠ æ»šåŠ¨æ¡ã€‚\nbug5ä¿®å¤ ä½¿OOToolBaré‡Œé¢çš„addToolæ–¹æ³•ä»voidæ–¹æ³•æ”¹å˜åˆ°è¿”å›å€¼ä¸ºToolButton\npublic void addTool(String toolName,String toolPic,int position) { tbApple[i] = new ToolButton(toolName); tbApple[i].show(); tbApple[i].setStock(toolPic); GTK.gtk_toolbar_insert(this.getId(), tbApple[i].getId(), position); i++; }  åˆ°\npublic ToolButton addTool(String toolName,String toolPic,int position) { tbApple[i] = new ToolButton(toolName); tbApple[i].show(); tbApple[i].setStock(toolPic); GTK.gtk_toolbar_insert(this.getId(), tbApple[i].getId(), position); i++; return tbApple[i-1]; }  è¿™æ ·å°±å¯ä»¥æ·»åŠ äº‹ä»¶ç›‘å¬ã€‚\nbug6ä¿®å¤ OOWindowçš„ExitAfterDestroy çš„è¿”å›å€¼çš„è®¾ç½® //ä¹Ÿå°±æ˜¯å½“æ”¶åˆ° destroyä¿¡å·çš„æ—¶å€™ ä¸ä¸€å®šæ˜¯å…³é—­çš„ï¼ˆä¸€èˆ¬æˆ‘ä»¬å†™çš„æ—¶å€™æ˜¯å…³é—­çš„ï¼‰\npublic void setExitAfterDestroy(boolean value) { this.exitAfterDestroy = true; }  åˆ°\npublic void setExitAfterDestroy(boolean value) { this.exitAfterDestroy = value; } `` é’ˆå¯¹OOMenué’ˆå¯¹ä¸¤ç§å°è£…æ–¹æ³•è¿›è¡Œäº†æµ‹è¯•ï¼š 1ï¼šå°è£…æ–¹æ³•1(ä½“ç°åœ¨TestMenuFileChooserToolbar.java) æ‰€æœ‰çš„æ–¹æ³• éƒ½æµ“ç¼©åˆ°OOMenuä¸­ ï¼ŒåŒ…æ‹¬ç¬¬ä¸€æ­¥åˆ›å»º menubar ç¬¬äºŒæ­¥åˆ›å»ºsubmenu ç¬¬ä¸‰æ­¥åˆ›å»º menu ç¬¬å››æ­¥åˆ›å»ºmenuitem 2ï¼šå°è£…æ–¹æ³•2(ä½“ç°åœ¨TestNewMenuFourStep) æŠŠåŸå…ˆçš„OOMenu åˆ†ä¸ºå››ä¸ªç±» ç¬¬ä¸€æ­¥ OOMenuBarç±» ç¬¬äºŒæ­¥ OOSubMenuç±» ç¬¬ä¸‰æ­¥ OOSingleMenuç±» ç¬¬å››æ­¥ OOMenuVegetableç±» ä»ä¸Šé¢çœ‹åˆ°ä¹Ÿè®¸ç¬¬äºŒç§æ–¹æ³•æ›´åŠ ä½“ç°ç€é¢å‘å¯¹è±¡çš„æ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯è¢«é€¼çš„ï¼Œä¸€ç›´æµ‹è¯•ä¸ºä»€ä¹ˆmenuitemçš„clickedæ–¹æ³•ä¸é€šè¿‡ï¼ŒåŸæ¥æ˜¯å› ä¸ºmenuitemå“åº”çš„æ˜¯activateä¿¡å·ã€‚ åŒæ—¶ä¹Ÿå¯ä»¥çœ‹åˆ°é¢å‘å¯¹è±¡æ–¹æ³•çš„æ¸…æ™°æ€§ å°è£…æ–¹æ³•1 çš„æºä»£ç  TestMenuFileChooseAndToolBar.java:  java package GTKEncapsulate;\nimport java.io.BufferedReader; import java.io.FileInputStream; import java.io.IOException; import java.io.InputStream; import java.io.InputStreamReader;\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack;\n/** * * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ6æ—¥ä¸‹åˆ8:13:45 * @version GTKEncapsulateTestMenuFileChooserAndToolbar V1.0 * å¹¶è¿›ä¸€æ­¥é‡‡ç”¨å°è£…çš„OOWindowç¼–å†™ç¨‹åºï¼Œç”±äºç»§æ‰¿äº†OOBinï¼Œæ‰€ä»¥å…·æœ‰add ä¸€ä¸ªæ§ä»¶çš„åŠŸèƒ½ * ç”±äºOOWindowåœ¨æ„é€ å‡½æ•°ä¸­æ·»åŠ äº†destroyçš„äº‹ä»¶ç›‘å¬ï¼Œæ‰€ä»¥ä¸éœ€è¦å†é‡å†™ï¼Œä½†æ˜¯ç°åœ¨çš„ * OOWindowçš„å¯¹è±¡è¿˜æ˜¯å¯ä»¥æ·»åŠ destroyç›‘å¬ï¼Œè¦æ˜¯å¯ä»¥ä¸èƒ½å†æ·»åŠ destroyå°±å¥½äº†ï¼ï¼ï¼ *\n* å¦å¤–å‘ç°äº†ä¸€ä¸ªä¸å¯¹çš„åœ°æ–¹ï¼Œæ‰€æœ‰çš„æ§ä»¶ç°åœ¨éƒ½æ˜¯å¯ä»¥å¼¹å‡ºæ¶ˆæ¯å¯¹è¯æ¡†ï¼Œquestionå¯¹è¯æ¡†ã€‚ * * è¿™ä¸ªæµ‹è¯•å‡ºç°åœ¨äº‹ä»¶ç›‘å¬ï¼è¿˜æœ‰bugï¼Œç­‰åˆ°ä»¥åå†æ¬¡ä¿®æ”¹ï¼Œä¼°è®¡æ˜¯ç»§æ‰¿å…³ç³»å‡ºç°äº†é—®é¢˜ *è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ŒåŸæ¥æ˜¯å› ä¸ºmenuçš„ç›‘å¬æ˜¯é€šè¿‡activateè€Œä¸æ˜¯click *æ¶‰åŠåˆ°çš„æ–‡ä»¶ OOMenu.java ï¼ˆè¿™æ˜¯ä¸»è¦çš„ç±»åŒ…å«å¦å¤–ä¸€ç§æ–¹æ³•çš„OOMenuBar OOSubMenu OOSingleMenu) * OOMenuVegetable.java ï¼ˆè¿™æ˜¯åŸå…ˆä»OOMenuå‰¥ç¦»å‡ºæ¥çš„ä¸€ä¸ªæ–‡ä»¶ï¼‰ / public class TestMenuFileChooserAndToolbar { / public IGCallBack IGCQuit = new IGCallBack() {\n @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub GTK.gtk_main_quit(); } };*/ static OOTextView ootv = null; public static void main(String[] args) { //åˆå§‹åŒ–è¿˜æ˜¯éœ€è¦çš„ GTK.gtk_init(); //åˆ›å»ºä¸€ä¸ªOOWindowå¯¹è±¡ï¼Œå…¶ä¸­å·²ç»åŒ…å«äº† OOWindow window = new OOWindow(); window.setTitle(\u0026quot;æµ‹è¯•é¢å‘å¯¹è±¡\u0026quot;); window.setExitAfterDestroy(true); window.show(); //åˆ›å»ºå¸ƒå±€å¯¹è±¡ OOGrid grid = new OOGrid(); grid.show(); //æ·»åŠ åˆ°windowå¯¹è±¡ window.add(grid); //åˆ›å»ºä¸€ä¸ªtextview ç•Œé¢ ootv = new OOTextView(); ootv.setType(); ootv.show(); ootv.addScrollBar(grid, 2, 500, 300); //åˆ›å»ºmenubarå¯¹è±¡ OOMenu omMenu = new OOMenu(); omMenu.show(); //åˆ›å»ºå‚ç›´menubarï¼ˆæœ€ç»ˆéœ€è¦æ–‡ä»¶çš„ä¸‹æ‹‰èœå• æ·»åŠ åˆ°menubar(æ°´å¹³çš„menubar) omMenu.createVerticalMenu(\u0026quot;File\u0026quot;); //åˆ›å»ºå•ä¸€çš„ä¸€ç›˜èœ omMenu.createMenu(); //å¾€èœç›˜ä¸­æ·»èœ,æ”¹å˜äº†returné€‰é¡¹ ä½¿å¾—å¯ä»¥è¿”å›Vegetableå¯¹è±¡ï¼Œä»è€Œè¿›è¡Œäº‹ä»¶ç›‘å¬ //ç”±äºå·²ç»åœ¨å†…éƒ¨showäº† æ‰€ä»¥ä¸éœ€è¦show OOMenuVegetable vgNew = new OOMenuVegetable(\u0026quot;æ–°å»º\u0026quot;); OOMenuVegetable vgOpen = new OOMenuVegetable(\u0026quot;æ‰“å¼€\u0026quot;); OOMenuVegetable vgSave = new OOMenuVegetable(\u0026quot;ä¿å­˜\u0026quot;); OOMenuVegetable vgQuit = new OOMenuVegetable(\u0026quot;é€€å‡º\u0026quot;); vgOpen.addActivateListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { youOpenfile(ootv); } }); vgSave.addActivateListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { youSavefile(); } }); vgQuit.addActivateListener( new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub GTK.gtk_main_quit(); } }); omMenu.addMenuVegetable(vgNew); omMenu.addMenuVegetable(vgOpen); omMenu.addMenuVegetable(vgSave); omMenu.addMenuVegetable(vgQuit); //å·²ç»showäº†ï¼Œå”¯ä¸€éœ€è¦çš„æ˜¯æ·»åŠ è¿›ç½‘æ ¼ omMenu.addVerticalMenuTOBar(); grid.add(omMenu.getId(), 0); //ä¸Šé¢çš„éƒ¨åˆ†éƒ½æ˜¯å…³äºmenuçš„ç°åœ¨åšä¸€ä¸ªå…³äº OOToolBar otbApple = new OOToolBar(); //å¿…é¡»è®¾ç½®ä¸Š å¦åˆ™å¤ªå°äº† otbApple.setWidgetSize(300, 20); OOToolBar.ToolButton tbApple = otbApple.addTool(\u0026quot;æ–°å»º\u0026quot;, GTK.GTK_STOCK_NEW, 0); OOToolBar.ToolButton tbBanana =otbApple.addTool(\u0026quot;æ‰“å¼€\u0026quot;, GTK.GTK_STOCK_OPEN, 1); OOToolBar.ToolButton tbOrange =otbApple.addTool(\u0026quot;ä¿å­˜\u0026quot;, GTK.GTK_STOCK_SAVE, 2); tbBanana.addClickedListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub youOpenfile(ootv); } }); tbOrange.addClickedListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { youSavefile(); } }); otbApple.show(); grid.add(otbApple.getId(),1); GTK.gtk_main(); } public static void youOpenfile(OOTextView ootv) { OpenFile ofApple = new OpenFile(); ofApple.setMultipleSelect(); ofApple.createFilter(); ofApple.nameFilter(\u0026quot;æ–‡æœ¬æ–‡ä»¶\u0026quot;); ofApple.editFilter(\u0026quot;*.txt\u0026quot;); ofApple.editFilter(\u0026quot;*.java\u0026quot;); //æŠŠfilterçš„æ“ä½œæ”¾å…¥æ‰“å¼€å¯¹è¯æ¡†ä¸­ ofApple.finishFilter(); String[] filenames = ofApple.processResponse(); showAllFiles(filenames, ootv); } public static void youSavefile() { SaveFile ofBanana = new SaveFile(\u0026quot;ä¿å­˜æ–‡ä»¶\u0026quot;,GTK.GTK_FILE_CHOOSER_ACTION_SAVE,\u0026quot;ä¿å­˜\u0026quot;); //æŠŠfilterçš„æ“ä½œæ”¾å…¥æ‰“å¼€å¯¹è¯æ¡†ä¸­ ofBanana.processResponse(); } public static void showAllFiles(String[] filenames,OOTextView otv) { for(int i = 0 ; i \u0026lt; filenames.length; i++) { showOneFile(filenames[i],otv); } } public static void showOneFile(String filename, OOTextView otv) { try ( InputStream is = new FileInputStream(filename); InputStreamReader osr = new InputStreamReader(is); BufferedReader br = new BufferedReader(osr); ) { String temp= filename.substring(filename.lastIndexOf('\\\\')+1); System.out.println(temp); otv.insertTextAtEnd(\u0026quot;******************\\nå½“æœŸæ–‡ä»¶ä¸º\u0026quot;+filename+\u0026quot;\\n******************\\n\\n\u0026quot;+temp+\u0026quot; æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\\n+---------------------------------------------------------------------------+\\n\u0026quot;); String content = null; while((content = br.readLine())!=null) // -1è¯»å–å®Œæ¯• { //InsertStringToTextViewFunction(textview,fileToFile.toString()); otv.insertTextAtEnd(new String(content)); } otv.insertTextAtEnd(\u0026quot;\\n+---------------------------------------------------------------------------+\\n******************\\næ–‡ä»¶\u0026quot;+filename+\u0026quot;è¯»å–ç»“æŸ\\n******************\\n\u0026quot;); } catch(IOException e) { System.out.println(\u0026quot;æ–‡ä»¶è¯»å…¥å¼‚å¸¸\u0026quot;); } }  }\nclass OpenFile extends OOFileChooser {\n @Override public String[] processResponse() { String[] filenames = null; // TODO Auto-generated method stub int ret = this.run(); if(ret == GTK.GTK_RESPONSE_OK) { filenames = GTK.gtk_file_chooser_get_filenames(this.getId()); for(int i = 0 ; i\u0026lt; filenames.length ; i++) { System.out.println(\u0026quot;é€‰ä¸­æ–‡ä»¶å\u0026quot;+i+\u0026quot;: \u0026quot;+filenames[i]); } GTK.gtk_widget_destroy(this.getId()); //å¿…é¡»éœ€è¦ï¼ï¼å¦åˆ™æŠ¥é”™ }else { GTK.gtk_widget_destroy(this.getId()); } return filenames; }  }\nclass SaveFile extends OOFileChooser { public SaveFile(String title, int action, String buttonText) { setId(GTK.gtk_file_chooser_dialog_new(title, 0, action, buttonText)); } @Override public String[] processResponse() { String[] filenames = null; GTK.gtk_file_chooser_set_do_overwrite_confirmation(this.getId(), true); // TODO Auto-generated method stub System.out.println(\u0026ldquo;å·²è¿›å…¥save\u0026rdquo;); //SaveOneFile(filename,textview); int ret = GTK.gtk_dialog_run(this.getId()); if(ret == GTK.GTK_RESPONSE_CANCEL) { GTK.gtk_widget_destroy(this.getId()); }else { String filename = GTK.gtk_file_chooser_get_filename(this.getId()); filenames[0] = filename; System.out.println(filename); GTK.gtk_widget_destroy(this.getId()); return filenames; } return filenames;\n }  }\n å°è£…æ–¹æ³•2 çš„æºä»£ç TestNewMenuFourStep.java:  java package GTKEncapsulate;\nimport java.io.BufferedReader; import java.io.FileInputStream; import java.io.IOException; import java.io.InputStream; import java.io.InputStreamReader;\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ6æ—¥ä¸‹åˆ10:09:33 * @version GTKEncapsulateTestNewMenuFourStep V1.0 * * æ¶‰åŠåˆ°å››ä¸ªç±» OOMenuBar.java * OOSubMenu.java * OOSingleMenu.java * OOMenuVetetable.menu ä¾æ¬¡åˆ›å»ºå››ä¸ªç±»å³å¯ */ public class TestNewMenuFourStep {\n /** * @param args */ static OOTextView ootv = null; public static void main(String[] args) { // TODO Auto-generated method stub //åˆå§‹åŒ–è¿˜æ˜¯éœ€è¦çš„ GTK.gtk_init(); //åˆ›å»ºä¸€ä¸ªOOWindowå¯¹è±¡ï¼Œå…¶ä¸­å·²ç»åŒ…å«äº† OOWindow window = new OOWindow(); window.setTitle(\u0026quot;æµ‹è¯•é¢å‘å¯¹è±¡\u0026quot;); window.setExitAfterDestroy(true); window.show(); //åˆ›å»ºå¸ƒå±€å¯¹è±¡ OOGrid grid = new OOGrid(); grid.show(); //æ·»åŠ åˆ°windowå¯¹è±¡ window.add(grid); //åˆ›å»ºä¸€ä¸ªtextview ç•Œé¢ ootv = new OOTextView(); ootv.setType(); ootv.show(); ootv.addScrollBar(grid, 2, 500, 300); //åˆ›å»ºä¸€ä¸ªå¤§çš„menubar OOMenuBar ombApple = new OOMenuBar(); //åˆ›å»ºç¬¬äºŒå¤§çš„ï¼ˆå¯ä»¥æœ‰å¾ˆå¤šä¸ªï¼‰ OOSubMenu osmApple = new OOSubMenu(\u0026quot;File\u0026quot;); //åˆ›å»ºç¬¬ä¸‰å¤§çš„ï¼ˆå¯ä»¥æœ‰å¾ˆå¤šä¸ªï¼‰ OOSingleMenu menuApple = new OOSingleMenu(); //å¾€èœç›˜ä¸­æ·»èœ,æ”¹å˜äº†returné€‰é¡¹ ä½¿å¾—å¯ä»¥è¿”å›Vegetableå¯¹è±¡ï¼Œä»è€Œè¿›è¡Œäº‹ä»¶ç›‘å¬ //ç”±äºå·²ç»åœ¨å†…éƒ¨showäº† æ‰€ä»¥ä¸éœ€è¦show //åˆ›å»ºç¬¬å››å¤§çš„ï¼ˆå¯ä»¥æœ‰å¾ˆå¤šä¸ªï¼‰ OOMenuVegetable vgNew = new OOMenuVegetable(\u0026quot;æ–°å»º\u0026quot;); OOMenuVegetable vgOpen = new OOMenuVegetable(\u0026quot;æ‰“å¼€\u0026quot;); OOMenuVegetable vgSave = new OOMenuVegetable(\u0026quot;ä¿å­˜\u0026quot;); OOMenuVegetable vgQuit = new OOMenuVegetable(\u0026quot;é€€å‡º\u0026quot;); vgOpen.addActivateListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { youOpenfile(ootv); } }); vgSave.addActivateListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { youSavefile(); } }); vgQuit.addActivateListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub GTK.gtk_main_quit(); } }); //æ·»åŠ ç¬¬å››å¤§åˆ°ç¬¬ä¸‰å¤§ menuApple.addVegetable(vgNew); menuApple.addVegetable(vgOpen); menuApple.addVegetable(vgSave); menuApple.addVegetable(vgQuit); //æ·»åŠ ç¬¬ä¸‰å¤§åˆ°ç¬¬äºŒå¤§ é‡‡ç”¨çš„æ˜¯å¡«å…… osmApple.fillSubMenu(menuApple); //æ·»åŠ ç¬¬äºŒå¤§åˆ°ç¬¬ä¸€å¤§ ombApple.addSubMenuToBar(osmApple); ombApple.show(); grid.add(ombApple.getId(), 0); //ä¸Šé¢çš„éƒ¨åˆ†éƒ½æ˜¯å…³äºmenuçš„ç°åœ¨åšä¸€ä¸ªå…³äº OOToolBar otbApple = new OOToolBar(); //å¿…é¡»è®¾ç½®ä¸Š å¦åˆ™å¤ªå°äº† otbApple.setWidgetSize(300, 20); OOToolBar.ToolButton tbApple = otbApple.addTool(\u0026quot;æ–°å»º\u0026quot;, GTK.GTK_STOCK_NEW, 0); OOToolBar.ToolButton tbBanana =otbApple.addTool(\u0026quot;æ‰“å¼€\u0026quot;, GTK.GTK_STOCK_OPEN, 1); OOToolBar.ToolButton tbOrange =otbApple.addTool(\u0026quot;ä¿å­˜\u0026quot;, GTK.GTK_STOCK_SAVE, 2); tbBanana.addClickedListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub youOpenfile(ootv); } }); tbOrange.addClickedListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { youSavefile(); } }); otbApple.show(); grid.add(otbApple.getId(),1); //å¯åŠ¨å¾ªç¯ GTK.gtk_main(); } public static void youOpenfile(OOTextView ootv) { OpenFileNew ofApple = new OpenFileNew(); ofApple.setMultipleSelect(); ofApple.createFilter(); ofApple.nameFilter(\u0026quot;æ–‡æœ¬æ–‡ä»¶\u0026quot;); ofApple.editFilter(\u0026quot;*.txt\u0026quot;); ofApple.editFilter(\u0026quot;*.java\u0026quot;); //æŠŠfilterçš„æ“ä½œæ”¾å…¥æ‰“å¼€å¯¹è¯æ¡†ä¸­ ofApple.finishFilter(); String[] filenames = ofApple.processResponse(); showAllFiles(filenames, ootv); } public static void youSavefile() { SaveFileNew ofBanana = new SaveFileNew(\u0026quot;ä¿å­˜æ–‡ä»¶\u0026quot;,GTK.GTK_FILE_CHOOSER_ACTION_SAVE,\u0026quot;ä¿å­˜\u0026quot;); //æŠŠfilterçš„æ“ä½œæ”¾å…¥æ‰“å¼€å¯¹è¯æ¡†ä¸­ ofBanana.processResponse(); } public static void showAllFiles(String[] filenames,OOTextView otv) { for(int i = 0 ; i \u0026lt; filenames.length; i++) { showOneFile(filenames[i],otv); } } public static void showOneFile(String filename, OOTextView otv) { try ( InputStream is = new FileInputStream(filename); InputStreamReader osr = new InputStreamReader(is); BufferedReader br = new BufferedReader(osr); ) { String temp= filename.substring(filename.lastIndexOf('\\\\')+1); System.out.println(temp); otv.insertTextAtEnd(\u0026quot;******************\\nå½“æœŸæ–‡ä»¶ä¸º\u0026quot;+filename+\u0026quot;\\n******************\\n\\n\u0026quot;+temp+\u0026quot; æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\\n+---------------------------------------------------------------------------+\\n\u0026quot;); String content = null; while((content = br.readLine())!=null) // -1è¯»å–å®Œæ¯• { //InsertStringToTextViewFunction(textview,fileToFile.toString()); otv.insertTextAtEnd(new String(content)); } otv.insertTextAtEnd(\u0026quot;\\n+---------------------------------------------------------------------------+\\n******************\\næ–‡ä»¶\u0026quot;+filename+\u0026quot;è¯»å–ç»“æŸ\\n******************\\n\u0026quot;); } catch(IOException e) { System.out.println(\u0026quot;æ–‡ä»¶è¯»å…¥å¼‚å¸¸\u0026quot;); } }  } //å–å’ŒOpenFileä¸ä¸€æ ·çš„ç±»åé˜²æ­¢é‡å¤ class OpenFileNew extends OOFileChooser {\n @Override public String[] processResponse() { String[] filenames = null; // TODO Auto-generated method stub int ret = this.run(); if(ret == GTK.GTK_RESPONSE_OK) { filenames = GTK.gtk_file_chooser_get_filenames(this.getId()); for(int i = 0 ; i\u0026lt; filenames.length ; i++) { System.out.println(\u0026quot;é€‰ä¸­æ–‡ä»¶å\u0026quot;+i+\u0026quot;: \u0026quot;+filenames[i]); } GTK.gtk_widget_destroy(this.getId()); //å¿…é¡»éœ€è¦ï¼ï¼å¦åˆ™æŠ¥é”™ }else { GTK.gtk_widget_destroy(this.getId()); } return filenames; }  }\nclass SaveFileNew extends OOFileChooser { public SaveFileNew(String title, int action, String buttonText) { setId(GTK.gtk_file_chooser_dialog_new(title, 0, action, buttonText)); } @Override public String[] processResponse() { String[] filenames = null; GTK.gtk_file_chooser_set_do_overwrite_confirmation(this.getId(), true); // TODO Auto-generated method stub System.out.println(\u0026ldquo;å·²è¿›å…¥save\u0026rdquo;); //SaveOneFile(filename,textview); int ret = GTK.gtk_dialog_run(this.getId()); if(ret == GTK.GTK_RESPONSE_CANCEL) { GTK.gtk_widget_destroy(this.getId()); }else { String filename = GTK.gtk_file_chooser_get_filename(this.getId()); filenames[0] = filename; System.out.println(filename); GTK.gtk_widget_destroy(this.getId()); return filenames; } return filenames;\n }  }\n åŸºæœ¬ä¸Šä¸¤ç§å°è£…æ–¹æ³•çš„æ€è·¯ä¸€æ ·ï¼Œå°±ä¹¦å†™æ¥è¯´ï¼Œç¬¬äºŒç§æ–¹æ³•ï¼Œæ›´åŠ çš„æ¸…æ™°äº›ã€‚ è¿è¡Œç•Œé¢ä¸€æ ·ï¼š ![è½¯ä»¶çš„è¿è¡Œç•Œé¢](/images/java/filechooser1.png) ![åˆ©ç”¨å·¥å…·æ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶](/images/java/filechooser2.png) ![åˆ©ç”¨èœå•æ ä¿å­˜ä¸€ä¸ªæ–‡æ¡£](/images/java/filechooser3.png) 2æœˆ7å·çš„ç¬”è®°ï¼š å†æ¬¡ä»‹ç»ä¸»è¦çš„æ§ä»¶çš„å°è£…è¿‡ç¨‹ OOWindowçš„å°è£…æ€è·¯ è¿™ä¸ªæ§ä»¶æ˜¯OOBinçš„å­ç±»ï¼Œä¹Ÿå°±æ˜¯è¯¥æ§ä»¶åªèƒ½å®¹çº³ä¸€ä¸ªæ§ä»¶ï¼Œä¸ºæ­¤åœ¨å°è£…ä¹‹å‰å¿…é¡»å°è£…OOBinã€‚ OOWindowç±»çš„å°è£…ä¸»è¦åŒ…å« 1ï¼šæ„é€ å‡½æ•°åˆ›å»ºwindowå¹¶æ·»åŠ å…³é—­çš„ç›‘å¬ 2ï¼šè®¾ç½®windowæ–‡æœ¬ 3ï¼šè®¾ç½®windowå…¨å± 4ï¼šè®¾ç½®winowå¯ä»¥è°ƒæ•´å¤§å° 5ï¼šè®¾ç½®windowå±…ä¸­ æœ‰ä¸€ç‚¹ä¸æ˜ç™½çš„æ˜¯ï¼šä¸ºæ¯›éå¾—æœ‰è¿™ä¸ªsetExitAfterDestroy(boolean value)åˆ¤æ–­åœ¨windowçš„å…³é—­ç¨‹åºçš„äº‹ä»¶ç›‘å¬ï¼Œç›´æ¥å…³æ‰ä¸æ˜¯å¤§å‰ï¼Ÿï¼ OOFileChooserä¸ºä»€ä¹ˆæŠŠå®ƒå°è£…æˆæŠ½è±¡ç±»ï¼Ÿ OOFileChooserçš„å¤„ç†GTK.gtk_dialog_runçš„è¿”å›å€¼çš„å‡½æ•°è¢«æˆ‘å°è£…æˆä¸€ä¸ªæŠ½è±¡å‡½æ•°ï¼Œå¦‚ä¸‹  java /** * ä¸€ä¸ªæŠ½è±¡æ–¹æ³• ï¼Œè¦æ±‚ç»§æ‰¿è€…å»å®ç°å®ƒ */ public abstract String[] processResponse();\nè¿™æ ·åªè¦å­ç±»ç»§æ‰¿äº†OOFileChooserå°±è®©ä»–å»å®ç°å¯¹åº”çš„processResponseæ–¹æ³•ï¼Œå› ä¸ºä¹Ÿè®¸æ¯æ¬¡ä½ æ‰“å¼€æ–‡ä»¶çš„æ—¶å€™éœ€è¦çš„å¤„ç†éƒ½æ˜¯æœ‰æ‰€ä¸ä¸€æ ·çš„å¹¶ä¸”ä¸ºäº†èƒ½å¤Ÿè®©æ‰“å¼€çš„æ—¶å€™ä¿å­˜å¤šä¸ªæ–‡ä»¶åå­—ï¼Œåœ¨ä¿å­˜çš„æ—¶å€™åˆä¸éœ€è¦ä¿å­˜å¤šä¸ªæ–‡ä»¶ ï¼Œæ–°å»ºäº†ä¸€ä¸ªæŠ½è±¡ç±»çš„æ–¹æ³•é’ˆå¯¹savafile public abstract void processResponse1(); //ç”¨äºä¿å­˜ public abstract String[] processResponse(); //ç”¨äºæ‰“å¼€ OOBinçš„å°è£…æ€è·¯ ä¹‹å‰åœ¨ä»‹ç»OOWindowä¸­æåŠäº†OOBinçš„å•å®¹å™¨åŠŸèƒ½ï¼Œè€ŒOOBinæ˜¯ç»§æ‰¿è‡ªOOContainerçš„ï¼Œæ¯”å¦‚OOGrid,OOBoxçš„éƒ½æ˜¯ç»§æ‰¿è‡ªOOContainerçš„ï¼Œä½†æ˜¯ä»–ä»¬éƒ½æ˜¯å¯ä»¥å®¹çº³å¤šä¸ªæ§ä»¶ï¼Œä¸ºæ­¤å¿…é¡»é‡å†™OOBinçš„addæ–¹æ³•ã€‚ä¸»è¦çš„ä½œç”¨æ˜¯åˆ©ç”¨gtk_container_get_childrenåˆ¤æ–­æ˜¯å¦å½“å‰çš„OOBinå¯¹è±¡æ˜¯å¦æœ‰å¤šä¸ªæ§ä»¶ï¼Œå¦‚æœæœ‰äº†ä¸€ä¸ªåˆ™ ä¸èƒ½å†æ·»åŠ ï¼Œå¦‚æœæ²¡æœ‰åˆ™å¯ä»¥æ·»åŠ   java @Override public void add(OOWidget ow) { int[] children = GTK.gtk_container_get_children(this.getId()); if(children.length \u0026lt;= 0 ) { //è°ƒç”¨çˆ¶ç±»çš„addæ–¹æ³• super.add(ow); //super.add è°ƒç”¨çˆ¶ç±» //this.add è°ƒç”¨æœ¬ç±» //super() è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•(åœ¨æ„é€ å‡½æ•°ä¸­) //this() è°ƒç”¨æœ¬ç±»çš„æ„é€ æ–¹æ³•(åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œè®°å¾—æˆ‘ä¸ºä»€å†™ä¸Šæ‹¬å·) }else { throw new IllegalArgumentException(\u0026ldquo;å®¹å™¨ä¸­å·²ç»æœ‰äº†ä¸€ä¸ªå¯¹è±¡\u0026rdquo;); } }\nOOWidgetçš„å°è£…æ€è·¯ OOWidgetæ˜¯ç¥–å®—çº§çš„ä»»åŠ¡ï¼Œå¿…é¡»æ˜¯å¤§å¤§æ»´ã€‚è¯•æƒ³æ‰€æœ‰çš„æ§ä»¶éƒ½æ˜¯å¯ä»¥æ˜¾ç¤ºã€éšè—ã€æ‘§æ¯ï¼Œäºæ˜¯å¯ä»¥æŠŠè¿™äº›å‡½æ•°çš„å°è£…éƒ½å®¹çº³åœ¨OOWidgetä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå®é™…è€Œåˆæœ‰æ•ˆçš„å°è£…ã€‚ ç„¶è€Œæ˜¯å¦æ‰€æœ‰çš„æ§ä»¶éƒ½æœ‰clickäº‹ä»¶çš„ç›‘å¬ï¼Ÿ è¿™ç‚¹æˆ‘è¡¨ç¤ºè´¨ç–‘ï¼Œæ¯”å¦‚GtkMenuItemæ§ä»¶å°±æ²¡æœ‰ï¼Œä»–åªæ˜¯å“åº”activateäº‹ä»¶ï¼Œæ‰€ä»¥æŠŠclickçš„äº‹ä»¶ç›‘å¬æ”¾åœ¨OOWidgeté‡Œé¢è¿˜æ˜¯æœ‰ç‚¹é—®é¢˜çš„ã€‚ å¦å¤–åœ°ï¼ŒæŠŠæ‰€æœ‰çš„åŸºäºOODialog(OODialogåŸºäºOOWindow)çš„æ¶ˆæ¯å¯¹è¯æ¡†showInfo,é—®é¢˜å¯¹è¯æ¡†showYesNo,ç¡®è®¤å¯¹è¯æ¡†showOkCancleæ”¾åœ¨OOWidget,ä»å½“å‰è€ƒè™‘ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å°è£…çš„å‡½æ•°å†…éƒ¨çš„å®ç°è¿˜æ˜¯é¢å‘è¿‡ç¨‹ï¼Œå¯ä¸å¯ä»¥æŠŠMessageInfoç±»ä¹Ÿå¯ä»¥æå–å‡ºæ¥ï¼Œå½“ç„¶å¯ä»¥ã€‚ å½“ç„¶é¦–å…ˆå¾—æŠŠOODialogä¿®æ”¹ä¸ºç»§æ‰¿è‡ªOOWindowï¼ å› ä¸ºOODialogä¹Ÿæ˜¯å•å®¹å™¨æ§ä»¶ã€‚ç„¶åå†æŠŠOOCalendarï¼ŒOOFileChooserä¹Ÿä¿®æ”¹ä¸ºç»§æ‰¿è‡ªOODialog å¹¶æ–°å»ºOOInputDialogï¼ˆæš‚æ—¶æœªèƒ½å®ç°ï¼Œcom.rupeng.gtk4jæ²¡æœ‰ï¼‰,OOMessageDialog å› ä¸ºè¿™äº›Dialogéƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹éœ€è¦GTK.gtk_dialog_runï¼Œå¯ä»¥æŠŠè¿™ä¸ªæ–¹æ³•å°è£…åœ¨OODialogä¸­  java /** * åœ¨ä¸€åˆ‡è®¾ç½®å®Œæ¯•å å¿…é¡»è¦è®©ä»–runèµ·æ¥ï¼Œç±»ä¼¼äºçº¿ç¨‹çš„åšæ³•,å¹¶ä¸”ä¸€å®šè¦æ‘§æ¯å®ƒ this.destroy.. */ public int run() { int response = GTK.gtk_dialog_run(this.getId()); return response; }\nè¿™æ ·æ‰€æœ‰çš„OOdialogå­ç±»éƒ½å¯ä»¥runèµ·æ¥ï¼Œå¹¶ä¸”éƒ½æ˜¯å•å®¹å™¨æ§ä»¶äº†ã€‚ä¹Ÿç®—æ˜¯ä¸€ä¸ªbugä¿®å¤ã€‚ OOBoxå®¹å™¨çš„ä¿®æ”¹ï¼š public OOBox(int orientation)çš„å°è£…æ”¹ä¸º thisï¼ˆorientation,0)çš„å®ç°ï¼Œè¿™æ ·å¦‚æœä»¥åéœ€è¦ä¿®æ”¹GTK.gtk_box_new..åªéœ€è¦ä¿®æ”¹ä¸€ä¸ªåœ°æ–¹å³å¯ï¼Œä¸è‡³äºç•™ä¸‹bug,æ­¤æ–¹æ³•å¯ä»¥æ€è€ƒ  java public OOBox(int orientation,int spacing) { setId(GTK.gtk_box_new(orientation, spacing)); } /** * * @param orientation æ–¹å‘çš„è¯´æ˜ */ public OOBox(int orientation) { this(orientation,0); //è°ƒç”¨æœ¬ç±»çš„æ„é€ å‡½æ•° //setId(GTK.gtk_box_new(orientation,0)); }\n è‡³æ­¤ æºç v4.0å·²ç»å¢åŠ åˆ°37ä¸ªç±»ï¼Œå¹¶è¿›è¡Œäº†4ä¸ªç®€å•çš„æµ‹è¯•ã€‚ 2æœˆ8å·ç¬”è®°ï¼š æ¥å£ æ¥å£å…¶å®å°±æ˜¯ä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œæä¾›æ–¹æ³•çš„å£°æ˜æˆ–è€…å˜é‡çš„å£°(ï¼‰ æ¥å£æ–‡ä»¶ä»…ä»…æ˜¯ä¸€ä¸ªèƒ½åŠ›çš„å£°æ˜ï¼Œæˆ‘èƒ½å¤Ÿåšä»€ä¹ˆï¼Œå…·ä½“å®ç°è¿˜å¾—è‡ªå·±å»åšã€‚ ä¸€å¥è¯æ€»ç»“ï¼šæ¥å£å®šä¹‰åšä»€ä¹ˆï¼Œå®ç°æ¥å£èƒ½åŠ›çš„ç±»å®šä¹‰æ€ä¹ˆåš ä½¿ç”¨ï¼š  java 1ï¼šdrawingCallback public interface OODrawCallback { public void drawCairo(OOCairo cairo); // public void speak(); }\nä½¿ç”¨æ¥å£ï¼š  java //ä½¿ç”¨ public void addDrawListener(final OODrawCallback ocbApple) //å£°æ˜äº†æˆ‘è¦è°ƒç”¨ä¸€ä¸ªæ¥å£ï¼Œé‡Œå¤´å¯ä»¥å‡è®¾å·²ç» //å®ç°äº†OODrawCallbackçš„æ¥å£ï¼Œå¹¶è¿›è¡Œè°ƒç”¨ã€‚ ç­‰åˆ°OODrawingAreaè¿™ä¸ªå¯¹è±¡ç”Ÿæˆï¼Œå¹¶æ·»åŠ äº†\n//drawç›‘å¬å™¨ï¼Œä¼ å…¥æ¥å£å¯¹è±¡æ—¶å€™ï¼Œåˆ™éœ€è¦å…·ä½“å»å®ç°å€Ÿå£å¯¹è±¡çš„æ–¹æ³•ï¼ˆå¹¶ä¸”æ˜¯æ‰€æœ‰æ–¹æ³•ï¼‰ { GTK.g_signal_connect(this.getId(), \u0026ldquo;draw\u0026rdquo;, new IGCallBack() {\n @Override public void execute(int instance, int eventData, Object object) {  //é€šè¿‡ç°è±¡æ¥è§£é‡Šçš„è¯ï¼Œåœ¨ä¸€ä¸ªç±»ä¸­æ–¹æ³•ï¼Œè°ƒç”¨äº†æ¥å£çš„æœªå®ç°çš„ç±»ï¼Œé‚£ä¹ˆå½“ä½  //å®šä¹‰è¿™ä¸ªåŒ…å«æ¥å£ç±»æ–¹æ³•çš„å¯¹è±¡æ—¶å€™ï¼Œéœ€è¦å®ç°è¿™ä¸ªæ¥å£çš„æœªå®ç°ç±»ï¼Œå› ä¸º //ç±»ä¼¼äºThrowsçš„æ–¹æ³•ï¼Œæˆ‘å°±è®©ä½ è°ƒç”¨è¿™ä¸ªç±»çš„å¯¹è±¡å»å®ç°å®ƒï¼Œä½ ä»¬è°è°ƒç”¨ //è°å°±ç»™æˆ‘å»ç»´æŠ¤ï¼Œæˆ‘å°±æä¾›ä¸€æœ¬ç§˜ç±ï¼Œä½ è‡ªå·±å»ä¿®ç‚¼ï¼ï¼ï¼ï¼å½“å‰çš„è¯eventData\n//å°ç»“ï¼š åœ¨\u0026rdquo;draw\u0026rdquo;ä¿¡å·å‘å‡º æ‰§è¡Œäº†ä¸€ä¸ªIGCallBackçš„æ¥å£ï¼Œé€šè¿‡å†…éƒ¨ç±»å®ç°ï¼Œ // åœ¨executeå®ç°IGCallbackæ¥å£çš„executeæ–¹æ³•ï¼Œä¸»è¦æ˜¯å®šä¹‰äº†ä¸€ä¸ªCairoå¯¹è±¡ // ä¼ è¿›å»äº†ç»˜ç”»ç¯å¢ƒï¼Œç„¶åé€šè¿‡æ–°å»ºäº†ä¸€ä¸ªOODrawCallbackæä¾›ä¸€ä¸ªå†…å®¹çš„æ¥å£ // å¹¶è°ƒç”¨äº†drawCairoï¼Œè€Œç”±äºdrawCairoæ˜¯æœªå®šä¹‰çš„æ–¹æ³•ï¼Œä¸”æ˜¯ä¸€ä¸ªæ¥å£çš„æœªå®ç° // æ–¹æ³•ï¼Œæ‰€ä»¥å…è®¸æ”¾åœ¨ä¸€ä¸ªå®šä¹‰ç±»ä¸­ç©ºç€ï¼Œ // ä½†æ˜¯å¿…é¡»åœ¨å­˜åœ¨æœªå®ç°æ–¹æ³•çš„ç±»æ¥å£çš„å¯¹è±¡å»å®ç°å®ƒï¼ˆæ³¨æ„æ˜¯å¯¹è±¡ä¸­ï¼‰ // // çŒœæƒ³ï¼š ä¸€ä¸ªclassçš„å®šä¹‰ï¼Œä¸å¸¦æœ‰implemetns,é‚£ä¹ˆå…¶å†…éƒ¨æœ‰ä¸€ä¸ªå˜é‡ CanWithouImplement = true; // å¦‚æœä¸€ä¸ªcalsså®šä¹‰ï¼Œå¸¦æœ‰implements,é‚£ä¹ˆå…¶å†…çš„ CanWithouImplement = falseã€ // é€šè¿‡è¿™ä¸ªçŒœæƒ³æ¥è§£é‡Šä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸‹é¢åœ¨æœªå®ç°drawCairoæ–¹æ³•è¿˜æ˜¯å¯ä»¥è°ƒç”¨äº†drawCairo // ä½†æ˜¯æœ‰ä¸€å¥è¯æ˜¯æ­£ç¡®çš„ï¼Œè¿™è¾¹è‚¯å®šæ˜¯å£°æ˜äº†å…·æœ‰drawCairoçš„èƒ½åŠ›ã€‚ï¼ˆå…·ä½“ä»€ä¹ˆèƒ½åŠ›ä¸çŸ¥é“ï¼‰ // çŒœæƒ³ï¼š implements ocbAppleæ˜¯å¿…é¡»å®ç°ocbAppleçš„æ‰€æœ‰æ–¹æ³•ï¼Œè€ŒocbApple.drawCairoä»…ä»…éœ€è¦å®ç°ä¸€ä¸ªæ–¹æ³•ã€‚ // é”™è¯¯ï¼šå› ä¸ºåœ¨ä¸€å¼€å¤´å°±å®šä¹‰äº†final OODrawCallback ocbApple,å½¢å‚å®šä¹‰äº†æ¥å£å£°æ˜ï¼Œè°ƒç”¨çš„æ—¶å€™éœ€è¦ä¼ å…¥ // æ¥å£å¯¹è±¡ï¼ˆä¸€èˆ¬å¯ä»¥é€šè¿‡å†…éƒ¨ç±»å®ç°) // æµ‹è¯•æ–¹æ³•ï¼š é€šè¿‡åœ¨OODrawCallbackå¢åŠ ä¸€ä¸ªæœªå®ç°æ–¹æ³•ï¼Œå‘ç°è¿˜æ˜¯éœ€è¦å®ç°ä¸¤ç§æœªå®ç°æ–¹æ³• //å†æ¬¡å°ç»“ï¼š è¿™è¾¹ä»…ä»…æ˜¯ä¸€ä¸ªå½¢å¼ä¸Šçš„å®šä¹‰ï¼æ¥å£åœ¨å½¢å‚å˜é‡ä¸­å‡ºç°ï¼Œåˆ™åœ¨è°ƒç”¨å…·æœ‰è¯¥å½¢å‚å˜é‡è¡¨çš„å‡½æ•°æ—¶å€™ï¼Œå¿…é¡» // å»å®ç°ä»–ä»¬ï¼Œå½“ç„¶åœ¨è¯¥æ–¹æ³•çš„å®šä¹‰ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥æ–¹æ³•ã€‚ç›¸å½“äºæ˜¯åœ¨è¯¥å½¢å¼æ–¹æ³•ä¸­äº‹å…ˆéšå¼è°ƒç”¨äº† å¤åˆ¶ä»£ç  æ¥å£è°ƒç”¨çš„å®ç°ï¼š //åˆ›å»ºç»˜å›¾ //1 é¢å‘å¯¹è±¡çš„æ–¹æ³• OODrawingArea odaApple = new OODrawingArea(); odaApple.show(); //å¿…é¡»setSizeå¦åˆ™çœ‹ä¸åˆ° è¿™ç‚¹ä¸€å®šè¦æ³¨æ„äº† odaApple.setWidgetSize(300, 300); gridApple.add(odaApple, 0); // ç¬¬ä¸€ç§æƒ…å†µé‡ç”»ï¼š ç”»é¢è¢«æŒ¡ä½äº†ï¼Œæ­å¼€ç”»é¢æ—¶å€™ // ç¬¬äºŒç§æƒ…å†µé‡ç”»ï¼š æ‰“å¼€ç”»é¢é¥¿æ—¶å€™ odaApple.addDrawListener(new OODrawCallback() {\n @Override public void drawCairo(OOCairo cairo) { // TODO Auto-generated method stub cairo.setPenColor(OORGB.RED); cairo.drawRectangle(20, 20, 100, 100); cairo.fill(); cairo.drawCircle(200, 200, 50); cairo.stroke(); } });   2ï¼štreeviewå½“ä¸­çš„åŒå‡»äº‹ä»¶  java public void addDoubleClickedListener(final IGCallBack callback) { GTK.g_signal_connect(this.getId(), \u0026ldquo;button-press-event\u0026rdquo;, new IGCallBack() {\n @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub if(GTK.gdk_event_get_type(eventData)==GTK.GDK_2BUTTON_PRESS) { //è°ƒç”¨æ—¶å€™ éœ€è¦å†æ¬¡é‡å†™ä»–ã€‚ callback.execute(instance, eventData, object); } } }, null);  TestTreeView å®šä¹‰äº†ä¸€ä¸ª TestOOTreeView otv = new TestOOTreeView(); //é€šè¿‡å†…éƒ¨æ¥å£  java otv.addDoubleClickedListener(new IGCallBack() {\n @Override public void execute(int instance, int eventData, Object object) { int[] selection = otv.getMultipleSelectRows(); for(int i = 0; i \u0026lt; selection.length; i++) { System.out.println(\u0026quot;selection's length== \u0026quot;+ selection.length+\u0026quot;å½“å‰è¡Œ\u0026quot;+selection[i]); //values[i] = otv.getliststore().getValue(selection[i], 1); OOMessageDialog.showInfo(\u0026quot;é€‰ä¸­çš„ä¿¡æ¯ä¸º\u0026quot;+otv.getliststore().getValue(selection[i], 1), \u0026quot;ç”¨æˆ·å\u0026quot;); System.out.println(\u0026quot;selection[\u0026quot;+i+\u0026quot;]\u0026quot;+selection[i]); } } });   æ¥å£çš„å¤šæ€ï¼Œæ¯”å¦‚Speakable sp = new People()  java /** * */ package InterfacePractice;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ8æ—¥ä¸Šåˆ9:30:40 * @version InterfacePracticeTestSpeackable V1.0 */ public class TestSpeackable implements Speakable {\n /** * @param args */ public static void main(String[] args) { // TODO Auto-generated method stub new TestSpeackable().speak(); new TestSpeackable().look(); //åˆ©ç”¨å¤šæ€æ¥å®ç° Speakable sp = new TestSpeackable(); sp.speak(); //åˆ©ç”¨åŒ¿åç±»çš„æ–¹å¼ æ˜¯å¸çº³äº†Speakableæ¥å£ï¼Œå¹¶ç«‹é©¬è¿”å› Speakable sp1 = new Speakable() { @Override public void speak() { // TODO Auto-generated method stub System.out.println(\u0026quot;è¿™ä¹Ÿå¯ä»¥\u0026quot;); } @Override public void look() { // TODO Auto-generated method stub System.out.println(\u0026quot;è¿™ä¹Ÿå¯ä»¥\u0026quot;); } }; sp1.speak(); sp1.look(); } @Override public void speak() { // TODO Auto-generated method stub System.out.println(\u0026quot;yamadie\u0026quot;); } @Override public void look() { // TODO Auto-generated method stub System.out.println(\u0026quot;å¸¦ä½ å»çœ‹æ˜Ÿæ˜Ÿ\u0026quot;); }  }\n å°æŠ€å·§ï¼š Ctr+Hå¯ä»¥åœ¨workspaceé¡¹ç›®é‡Œé¢æŸ¥æ‰¾ã€‚ã€‚ã€‚ Ctrl+shift+T æ˜¾ç¤ºworkspaceçš„ç±» Ctrl+T Oåˆ™æ˜¾ç¤ºå½“å‰æ–‡ä»¶å¤¹ä¸‹çš„ç±»(ctrl+Oåˆ—ä¸¾å½“å‰ç±»çš„æ‰€æœ‰æˆå‘˜) æšä¸¾ç±»  java package GTKEncapsulate;\nimport com.rupeng.gtk4j.GTK;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ8æ—¥ä¸‹åˆ4:07:49 * @version GTKEncapsulateOOResponseType V1.0 ç”¨é€” ç®€åŒ–å¯¹è¯æ¡†è¿”å›å€¼çš„åˆ¤æ–­ * V2.0 parseResponseType æ›¿æ¢æ‰parseIntè¿™æ ·æ›´åŠ ç¬¦åˆå¸¸è§„ * å°è£…è¿”å›å€¼çš„ä¸€ä¸ªè¿”å›å€¼ï¼Œä¸è‡³äºè¯´ä¼ é€’çš„å€¼æ˜¯éæ³•ï¼ˆéæ³•å€¼æœ‰æé†’ï¼‰ * å¢åŠ ç¨‹åºçš„ç¨³å®šæ€§ */ public enum OOResponseType { //å¯¹è¯æ¡†å‡ ç§å¯èƒ½çš„è¿”å›å€¼ç±»å‹ //GTK_RESPONSE_HELP GTK_RESPONSE_DELETE_EVENT GTK_RESPONSE_NONE OK(GTK.GTK_RESPONSE_OK), //æœ€å¸¸ç”¨æ”¾åœ¨ç¬¬ä¸€ä¸ª YES(GTK.GTK_RESPONSE_YES), NO(GTK.GTK_RESPONSE_NO), CANCEL(GTK.GTK_RESPONSE_CANCEL), ACCEPT(GTK.GTK_RESPONSE_ACCEPT), //å¦‚æœæ”¹ä¸ºåˆ†å·åˆ™æŠ¥é”™ APPLY(GTK.GTK_RESPONSE_APPLY), REJECT(GTK.GTK_RESPONSE_REJECT), NONE(GTK.GTK_RESPONSE_NONE),\nHELP(GTK.GTK_RESPONSE_HELP), DELETE_EVENT(GTK.GTK_RESPONSE_DELETE_EVENT);\n private int value = 0; /** * * @param value æ„é€ å‡½æ•°çš„å‚æ•° */ private OOResponseType(int value) { this.value = value; } /** * * @return è¿”å›OOResponseTypeå¯¹è±¡çš„intå€¼ */ public int getValue() { return this.value; } /** * * @param value å¸¦è§£æçš„æ•°å­— åœ¨OOResponseæšä¸¾ç±»ä¸­ä»£è¡¨çš„æšä¸¾å€¼ * @return è¿”å›ä¸€ä¸ªOOResponseTypeå¯¹è±¡ */ public static OOResponseType parseResponseType(int value) { OOResponseType[] apple = OOResponseType.values(); for(int i = 0 ; i \u0026lt; apple.length; i++) { if(value == apple[i].getValue()) { return apple[i]; } } throw new IllegalArgumentException(\u0026quot;ResponseValue = \u0026quot;+value+\u0026quot;æ˜¯ä¸ªä¸åˆæ³•çš„å‚æ•°\u0026quot;); }  }\n OODialogçš„å°è£…ä¿®æ”¹ OODialogå°è£…çš„æ€è·¯ï¼šåˆ†æˆä¸¤ä¸ªåŒºåŸŸè¿›è¡Œå°è£… actionarea contentarea Runå‡½æ•°ï¼ˆè¿”å›responseTypeæšä¸¾å¯¹è±¡ï¼‰ responseï¼ˆè§£æresponsetypeç±»å‹ï¼Œå°±æ˜¯ä½ ä¼ ç»™ä¸€ä¸ªresponseTypeç±»å‹çš„å‚æ•°ç»™ä½ åœ¨å¯¹è¯æ¡†ä¸Šé¢å“åº”ä¸€ä¸ªå‡½æ•°ï¼‰ã€‚ æ¶‰åŠåˆ°OOContainer å®šä¹‰äº†ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°å’Œä¸€ä¸ªæœ‰å‚æ„é€ å‡½æ•°ï¼›æ— å‚æ„é€ å‡½æ•°æ˜¯ä¸ºäº†é˜²æ­¢å­ç±»æŠ¥é”™ï¼Œå› ä¸ºå½“çˆ¶ç±»å®šä¹‰äº†æœ‰å‚æ„é€ å‡½æ•°ï¼Œ æ— å‚æ„é€ å‡½æ•°é»˜è®¤ä¼šè¢«å±è”½ï¼Œæ‰€ä»¥å¢åŠ ä¸€ä¸ªprotectedæ— å‚æ„é€ å‡½æ•°ï¼Œå¯ä»¥é˜²æ­¢ç±»ä¼¼äºOOContainerçš„å­ç±»OOBinä¸ä¼š æŠ¥é”™ã€‚ é»˜è®¤OOBinä¼šè°ƒç”¨çš„æ„é€ å‡½æ•°æ˜¯ public OOBin(){super();} ;//è€Œsuperé»˜è®¤å³æ˜¯æŒ‡ OOContainer(){}å¦‚æœæ²¡æœ‰ åˆ™ä¼šæŠ¥é”™ã€‚ OODialog OOResponseType --?æ¶‰åŠåˆ°æšä¸¾çš„çŸ¥è¯†-?æšä¸¾ç±»çš„å®šä¹‰å‡å°‘ç”¨æˆ·è¾“é”™çš„å¯èƒ½æ€§ï¼Œå¢åŠ ç¨‹åºçš„ç¨³å®šæ€§ è¿˜æ˜¯å¾—å†æ¬¡ä½¿ç”¨æšä¸¾ç±»OOMESSAGEType ä»¥åŠOOButtonsTypeæ¥æ˜¾ç¤ºä¸åŒçš„å¯¹è¯æ¡†ç±»å‹ï¼ ç±»ä¼¼äºOOResponseTypeï¼ˆå½“æ—¶å¹¶ä¸çŸ¥é“è€ƒè™‘å»å°è£…è¿™ä¸€æ­¥ è¿˜ä¸€ç›´å‚»å‘µå‘µåˆ©ç”¨GTK_MESSAGE_ERRORä¹‹ç±»çš„ï¼‰,å°è£…äº†ä¸€ä¸ªä¿¡æ¯ç±» å†æ¬¡å¤ä¹ äº†OOResponseTyepçš„parseResponseTypeçš„æ–¹æ³•å®ç°ã€‚ TreeViewçš„å°è£…æ€è·¯ 1ï¼šMVCçš„V å»ºç«‹ä¸€ä¸ªView 2ï¼šMVCçš„M å»ºç«‹ä¸€ä¸ªOOListStore å’ŒOOTreeIter(æ³¨æ„å’ŒOOTextIterçš„åŒºåˆ«ï¼‰ 3ï¼šMVCçš„C ç”¨äºæ§åˆ¶viewå’Œlistmodel è¯¦çœ‹ç»ƒä¹ TestOOTreeView ä¸€ç§æ–°çš„ç¼–ç¨‹æ–¹å¼ï¼šç»ç’ƒå‡ºæ¥ä¸šåŠ¡é€»è¾‘ä»mainå‡½æ•°ä¸­ï¼Œå‡å°‘ç•Œé¢çš„ç»„åˆè¿‡ç¨‹ï¼Œmainåªæ˜¯è´Ÿè´£æ˜¾ç¤ºã€‚  java /** * */ package GTKEncapsulate;\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ9æ—¥ä¸‹åˆ1:33:31 * @version GTKEncapsulateTestOOTreeView2Window V1.0 */ public class TestOOTreeView2Window extends OOWindow {\n /** * @param args */ private static OOTreeView otv ; public TestOOTreeView2Window() { //è®¾ç½®å¸ƒå±€ otv = new OOTreeView(); otv.addField(\u0026quot;ID\u0026quot;, 0); otv.addField(\u0026quot;Name\u0026quot;, 1); otv.addField(\u0026quot;Age\u0026quot;, 2); otv.createModel(3); otv.setFieldValue(\u0026quot;001\u0026quot;, \u0026quot;yezhao\u0026quot;, \u0026quot;21\u0026quot;); otv.setFieldValue(\u0026quot;002\u0026quot;, \u0026quot;huowa\u0026quot;, \u0026quot;32\u0026quot;); otv.setFieldValue(\u0026quot;003\u0026quot;, \u0026quot;yefeng\u0026quot;, \u0026quot;31\u0026quot;); OOScrollBar osb = new OOScrollBar(); osb.show(); osb.setWidgetSize(300, 300); osb.addView(otv); //otv.addScrollBar(grid, 0, 200, 200); //æ˜¾ç¤º otv.fillModel(); otv.show(); otv.setRecordColumn(2); otv.setResizeColumn(2); otv.setColumnSort(2); otv.setMultipleSelect(); System.out.println(otv.getliststore().getValue(1, 1)); System.out.println(otv.getliststore().getValue(2, 1)); System.out.println(otv.getliststore().getValue(2, 2)); otv.addDoubleClickedListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { int[] selection = otv.getMultipleSelectRows(); for(int i = 0; i \u0026lt; selection.length; i++) { //System.out.println(\u0026quot;selection's length== \u0026quot;+ selection.length+\u0026quot;å½“å‰è¡Œ\u0026quot;+selection[i]); //values[i] = otv.getliststore().getValue(selection[i], 1); OOMessageDialog.showInfo(\u0026quot;é€‰ä¸­çš„ä¿¡æ¯ä¸º\u0026quot;+otv.getliststore().getValue(selection[i], 1), \u0026quot;ç”¨æˆ·å\u0026quot;); // System.out.println(\u0026quot;selection[\u0026quot;+i+\u0026quot;]\u0026quot;+selection[i]); } } }); this.add(osb); } public static void main(String[] args) { // TODO Auto-generated method stub GTK.gtk_init(); //TestOOTreeView2Window çš„å°è£…çš„è´£ä»»æ˜¯æ–°å»ºå­—æ®µ æ·»åŠ æ•°æ® åŠ å…¥ç›‘å¬ mainä¸è´Ÿè´£è¿™äº›äº‹æƒ…ï¼Œmainåªæ˜¯æ˜¾ç¤º TestOOTreeView2Window ttv2w = new TestOOTreeView2Window(); ttv2w.setExitAfterDestroy(true); ttv2w.show(); GTK.gtk_main(); }  }\n 2æœˆ8å·ç»ƒä¹ ï¼š 1ï¼šå­¦ä¹ äº†æ¥å£ç±»ï¼Œå¹¶åˆ©ç”¨æ¥å£ç±»è¿›ä¸€æ­¥å­¦ä¹ äº†åŒ¿åç±»å¯¹æ¥å£ç±»çš„å®ç°ï¼Œåœ¨å¤šå¤„ä½“ç°ï¼Œæ¯”å¦‚æ¯”å¦‚æ‰“å¼€æ–‡ä»¶å¤¹ çš„å¤„ç†å¯ä»¥æ”¾åœ¨åŒ¿åæ¥å£ç±» æ¯”å¦‚å°è£…çš„treeViewçš„åŒå‡»æ—¶é—´çš„åŒ¿åæ¥å£ç±»çš„å®ç°,æ¯”å¦‚ç”»å›¾æ¿çš„drawäº‹ä»¶çš„åŒ¿åæ¥å£ç±»çš„å®ç° 2ï¼šå°è£…äº†OODrawingArea å’Œ OODrawCallbackï¼ˆå¾…å®ç°drawCairoæ–¹æ³•ï¼‰æ¥å£ï¼Œè¿›ä¸€æ­¥ç†è§£äº†åŒ¿åæ¥å£ç±» 3ï¼šå­¦ä¹ äº†æšä¸¾ç±»ç”¨äºå°è£…OOResponseTyep OOMessageType OOFileAction OOButtonsTypeå››ä¸ªæšä¸¾ç±»ï¼Œ è¿™æ ·å¯ä»¥å‡å°‘ç”¨æˆ·è¾“å…¥å‚æ•°çš„é”™è¯¯ 4ï¼šå°è£…äº†æ¶ˆæ¯å¯¹è¯æ¡† OOMessageDialog ï¼ŒåŒ…å«showInfo showError ç­‰ï¼Œå…µåˆ æ‰OOWidgetä¸­çš„showInfoç­‰å‡½æ•° 5ï¼šç»§æ‰¿OODialogå®ç°äº†OOInputDialogï¼Œäº†è§£äº†ActionAreaå’ŒcontentArea 6: ä¿®æ”¹äº†OOFileChooserçš„å®ç°ï¼Œåˆ©ç”¨OOFileActionæšä¸¾ç±»åœ¨ä¿®æ”¹ï¼Œå¹¶å¢åŠ éƒ¨åˆ†å‡½æ•° 7ï¼šä¿®æ”¹äº†OOTreeViewçš„å®ç°ï¼Œç»ç’ƒå‡ºOOListStoreå’ŒOOlistIterè¿™ä¸¤ä¸ªç±»ï¼Œå¹¶è¿›ä¸€æ­¥çš„åœ¨OOTreeViewçš„å†…éƒ¨ä¸­æ–°å»ºäº† ä¸¤ä¸ªå†…éƒ¨ç±»OOColumn OOSelectionï¼Œæ›´åŠ ä½“ç°é¢å‘å¯¹è±¡çš„è¿‡ç¨‹ã€‚ 8ï¼šä¿®æ”¹äº†OOToolBarçš„å®ç°ï¼Œä¸ºäº†è®©å¤–åŒ…å¯ä»¥è®¿é—®å·¥å…·æ çš„æŒ‰é’®ï¼Œå¢åŠ äº†ä¸€ä¸ªå…±æœ‰çš„OOToolButtonç±» 9ï¼šä¿®æ”¹äº†OOContainerç±»çš„æ–¹æ³•ï¼Œåˆ©ç”¨å¯¹è±¡ç›´æ¥æ·»åŠ ã€‚ 10ï¼šå¢åŠ äº†ä¸€ä¸ªæµ‹è¯•åŒ…TestGTKEncapsulateï¼Œç”¨äºæµ‹è¯•ã€‚ æºç V5.0ç‰ˆæœ¬ ç±»å¢åŠ åˆ°46ä¸ªç±»ï¼Œä¸åŒ…å«å†…éƒ¨ç±»ï¼Œå¹¶åšäº†å¤–åŒ…æµ‹è¯•ï¼Œä¿®æ­£äº†ä½¿ç”¨ï¼Œå·²åœ¨TestGTKEncapsulateæ–‡ä»¶å¤¹ã€‚ é¢å‘å¯¹è±¡ï¼šè®©å¯¹è±¡è‡ªå·±å»åšè‡ªå·±çš„å†…éƒ¨é€»è¾‘ï¼Œå°±å¥½åƒæˆ‘ä»¬è‡ªå·±å»æ‰“æ‰®æˆ‘ä»¬è‡ªå·±çš„ç¨‹åºï¼Œmainï¼ˆæ¨è€å¸ˆï¼‰å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åä¸€ä¸ªshowè€Œå·²ã€‚é¢å‘å¯¹è±¡å…¶å®å°±æ˜¯å¸ˆå‚…é¢†è¿›é—¨ä¿®è¡Œåœ¨ä¸ªäººã€‚ 2-9å·ç¬”è®°å’Œç»ƒä¹  ç¬¬ä¸€éƒ¨åˆ† ç¬”è®° 1è®¡æ—¶å™¨çš„ä½¿ç”¨  java GTK.g_timeout_add(1000, new IGSourceFunc() {\n @Override public boolean execute(Object userdata) { // TODO Auto-generated method stub getTime(); return true; } }, null);   è¯´æ˜ï¼š 1000è¡¨ç¤º1000msä¹Ÿå°±æ˜¯1s IGS...æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“returnä¸ºtrueæ—¶å€™ç»§ç»­ç›‘å¬ï¼Œå½“returnä¸ºfalseåˆ™åœæ­¢è®¡æ—¶å™¨çš„å³ä½¿ï¼Œæ‰€ä»¥å¦‚æœä¸€ç›´ä¸ºtrueï¼Œåˆ™è®¡æ—¶å™¨ä¸€ç›´å†èµ°ã€‚ 2ï¼šæ‰“å¼€éŸ³ä¹ GTK.mci_play(filename) æ‰“å¼€éŸ³ä¹ GTK.mci_close(deviceID) å…³é—­éŸ³ä¹ 3ï¼š OOToolButton æ²¡æœ‰OOToolItemçš„ setToolTipçš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨OOToolButtonå¯ä»¥è®¾ç½®å›¾ç‰‡ å¹¶è¿›è¡Œç›‘å¬ã€‚OOToolButtonæš‚æ—¶ç”¨çš„å¤šã€‚ 4. OODialog responseçš„ä½œç”¨ ç†è§£äº†OODialogçš„responseçš„ä½œç”¨ä¹‹åï¼Œé‡æ–°ä¿®æ”¹äº†ï¼ŒOOInputDialogç­‰ç»§æ‰¿è‡ªOODialogçš„ç©ºé—´ã€‚ responseæ˜¯ä½¿å¾—æ·»åŠ è¿›dialogçš„æ§ä»¶èƒ½å¤Ÿå‘å‡ºæŸç§ä¿¡å·ï¼ï¼ å½“æˆ‘ä»¬å®šä¹‰å®Œä¹‹åï¼ŒåæœŸæ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶runä¹‹åï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªä¿¡å·ï¼ˆå¯èƒ½æ¥è‡ªåŸå…ˆçš„dialogçš„ä¿¡å·ï¼Œä¹Ÿå¯èƒ½æ˜¯æŒ‰é’®çš„ä¿¡å·ï¼Œè¿™è¾¹çš„æŒ‰é’®ä¸å†ç”¨clickedäº‹ä»¶è¿›è¡Œå¤–éƒ¨ç›‘å¬äº†ï¼Œä½†æ˜¯å…¶å®æ˜¯å°è£…åœ¨å¯¹åº”çš„dialogå­ç±»æ§ä»¶ä¸­ï¼Œè¡¨é¢ä¸Šæ˜¯æ´»çš„å¯¹è¯æ¡†çš„OOResponseTyepçš„ä¿¡å·ï¼Œå…¶å®å†…éƒ¨ä¹Ÿæ˜¯è§¦å‘äº†clickedäº‹ä»¶ï¼Œåªä¸è¿‡æ˜¯åœ¨clickedäº‹ä»¶ä¸­ï¼Œè°ƒç”¨responseå‡½æ•°ï¼Œå‘å‡ºå¯¹åº”çš„OOResponseTyepçš„ä¿¡å·ï¼‰ 5ï¼šLEDæ—¶é’Ÿ a. å†’å·å’Œç©ºå›¾ç‰‡çš„åˆ‡æ¢  java colon1.setResourceImage(\u0026ldquo;ledclock//\u0026rdquo;+(secondGe%2==1?\u0026ldquo;colon\u0026rdquo;:\u0026ldquo;empty\u0026rdquo;)+\u0026ldquo;.png\u0026rdquo;);\n b.LEDçš„æ•´ç‚¹æŠ¥æ—¶  java String[] table = {\u0026ldquo;é›¶\u0026rdquo;,\u0026ldquo;å£¹\u0026rdquo;,\u0026ldquo;è´°\u0026rdquo;,\u0026ldquo;å\u0026rdquo;,\u0026ldquo;è‚†\u0026rdquo;,\u0026ldquo;ä¼\u0026rdquo;,\u0026ldquo;é™†\u0026rdquo;,\u0026ldquo;æŸ’\u0026rdquo;,\u0026ldquo;æ‰’\u0026rdquo;,\u0026ldquo;ç–\u0026rdquo;}; if( minute ==0 \u0026amp;\u0026amp; second == 0) { System.out.println(\u0026ldquo;åŒ—äº¬æ—¶é—´\u0026rdquo;+table[hourShi]+table[hourGe]+\u0026ldquo;æ•´\u0026rdquo;); OOMessageDialog.showInfo(\u0026ldquo;åŒ—äº¬æ—¶é—´\u0026rdquo;+table[hourShi]+table[hourGe]+\u0026ldquo;æ•´\u0026rdquo;, \u0026ldquo;æ•´ç‚¹æ¶ˆæ¯\u0026rdquo;); }\n 6ï¼šä¸‰é‡buttonï¼šOOCalendarButtonçš„å°è£… ç›®çš„ï¼šç®€åŒ–å¼€å‘çš„è¿‡ç¨‹ï¼Œæä¾›ä¸€ä¸ªæŒ‰é’®ï¼Œå¹¶è®©ç”¨æˆ·é€‰æ‹©æ—¥æœŸï¼Œå›é¦ˆåˆ°æŒ‰é’®çš„æ ‡ç­¾ä¸Š è®¾è®¡çš„ä¸‰ä¸ªç±»ï¼š OOCalendar (ç»§æ‰¿è‡ªOOContainer) OOCalendarDialog(ç»§æ‰¿è‡ªOODialog) OOCalendarButton(ç»§æ‰¿è‡ªOOButton) OOCalendarDialogçš„å°è£…å’ŒOOInputDialogçš„å°è£…åŸºæœ¬ä¸Šæ€è·¯ä¸€æ ·ã€‚åœ¨actionaAreaæ·»åŠ ä¸¤ä¸ªæŒ‰é’®ï¼Œåœ¨contentAreaæ·»åŠ ä¸€ä¸ªOOCalendarï¼Œè¿›è¡Œå¯¹åº”çš„äº‹ä»¶ç›‘å¬ã€‚ ä¸€ä¸ªå°bug:(è‡ªå·±çŠ¯çš„ä¸€ç‚¹å°é”™è¯¯) OOCalendarButton çš„  java SimpleDateFormat sdf = new SimpleDateFormat(\u0026ldquo;yyyyå¹´mmæœˆddæ—¥\u0026rdquo;);\næ”¹ä¸º SimpleDateFormat sdf = new SimpleDateFormat(\u0026ldquo;yyyyå¹´MMæœˆddæ—¥\u0026rdquo;);\n ä¸€ä¸ªé‡ç‚¹ï¼š ä¸‰ç§è°ƒç”¨ç±»ç§æœ‰å˜é‡dateçš„æ–¹å¼ 1 å¯ä»¥ç”¨ date = ocd.getDate(); ç›´æ¥å†™ä¸Šdate,é‚£ä¹ˆç¼–è¯‘å™¨ä¼šä»å†…å¾€å¤–ä¸€å±‚ä¸€å±‚èµ°ï¼Œç›´åˆ° æ‰¾åˆ°date,æ‰€ä»¥å¯èƒ½ä¼šé€ æˆå¤–å±‚éœ€è¦è¢«èµ‹å€¼çš„dateå¹¶æœªè¢«èµ‹å€¼ï¼Œè€Œé‡Œå±‚ä¸éœ€è¦èµ‹å€¼çš„dateåè€Œ èµ‹å€¼äº† 2. this.date ä¹Ÿå¯èƒ½ä¼šé€ æˆé”™è¯¯ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ªåŒ¿åç±»ä¸­ï¼Œé‚£ä¹ˆthis.dateçš„æ„æ€å°±æ˜¯åŒ¿åç±»çš„date,å¦‚æœåŒ¿åç±»æ²¡æœ‰å®šä¹‰dateï¼Œåˆ™æŠ¥é”™ 3 OOCalendarButton.this.date = ocd.getDate(); //æœ€å¥½çš„ä¸€ç§æ–¹æ³• //OOCalendarButtonçš„thiså¯¹è±¡ï¼Œç›´æ¥æ‰¾åˆ°è¯¥ç±»ä¸­çš„ç±»å˜é‡ã€‚ ç¬¬äºŒéƒ¨åˆ† ç»ƒä¹  1ï¼š è®¡æ—¶å™¨ case1 progereeBar çš„å®‰è£…æ¡  java package GTKEncapsulate;\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; import com.rupeng.gtk4j.IGSourceFunc;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ9æ—¥ä¸‹åˆ3:13:29 * @version GTKEncapsulateTestOOProgressBar2Window V1.0 */ public class TestOOProgressBar2Window extends OOWindow {\n /** * @param args */ private OOLabel olApple = null; private OOProgressBar opbApple = null; private OOButton obApple = null; public TestOOProgressBar2Window() { OOBox obtemp = new OOBox(); obtemp.show(); olApple = new OOLabel(\u0026quot;0\u0026quot;); olApple.show(); obtemp.add(olApple); opbApple = new OOProgressBar(); opbApple.setText(\u0026quot;è¯·ç¨ç­‰\u0026quot;); opbApple.showText(\u0026quot;è¯·ç¨å\u0026quot;); opbApple.show(); obtemp.add(opbApple); obApple = new OOButton(\u0026quot;å®‰è£…\u0026quot;); obApple.show(); obtemp.add(obApple); obApple.addClickedListener(new IGCallBack() {  @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub GTK.g_timeout_add(1000, new IGSourceFunc() {\n @Override public boolean execute(Object userdata) { // TODO Auto-generated method stu String txt = olApple.getText(); int apple = Integer.parseInt(txt); apple++; olApple.setText(Integer.toString(apple)); double banana = apple*0.1; if(banana== 1.0) { OOMessageDialog.showInfo(\u0026quot;å®‰è£…å®Œæˆ\u0026quot;, \u0026quot;å®‰è£…\u0026quot;); } opbApple.setProgress(banana); return banana\u0026lt;=1; } }, null);  } });\n this.add(obtemp); } public static void main(String[] args) { // TODO Auto-generated method stub GTK.gtk_init(); TestOOProgressBar2Window top2w = new TestOOProgressBar2Window(); top2w.show(); top2w.setExitAfterDestroy(true); GTK.gtk_main(); }  }\n case2 LEDç¯+æ•´ç‚¹æŠ¥æ—¶ï¼ˆæœªåŠ ä¸Šå£°éŸ³æ”¹ç”¨å¼¹å‡ºå¯¹è¯æ¡†ï¼‰  java package TestGTKEncapsulate;\nimport java.text.SimpleDateFormat; import java.util.Calendar; import java.util.Date;\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGSourceFunc;\nimport GTKEncapsulate.*;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ10æ—¥ä¸‹åˆ1:17:40 * @version TestGTKEncapsulateLEDClock V1.0 */ public class LEDClock extends OOWindow {\n /** * @param args */ private OOImage oiHourShi; private OOImage oiHourGe; private OOImage oiMinuteShi; private OOImage oiMinuteGe; private OOImage oiSecondShi; private OOImage oiSecondGe; private int hourShi; private int hourGe; private int minuteShi; private int minuteGe; private int secondShi; private int secondGe; private OOBox obApple; private OOImage colon1; private OOImage colon2; private OOLabel olDate; public LEDClock() { obApple = new OOBox(); obApple.show(); olDate = new OOLabel(\u0026quot;\u0026quot;); olDate.show(); obApple.addWidget(olDate); oiHourShi = new OOImage(); oiHourGe = new OOImage(); colon1 = new OOImage(); oiMinuteShi = new OOImage(); oiMinuteGe = new OOImage(); colon2 = new OOImage(); oiSecondShi = new OOImage(); oiSecondGe = new OOImage(); obApple.addWidget(oiHourShi); obApple.addWidget(oiHourGe); obApple.addWidget(colon1); obApple.addWidget(oiMinuteShi); obApple.addWidget(oiMinuteGe); obApple.addWidget(colon2); obApple.addWidget(oiSecondShi); obApple.addWidget(oiSecondGe); getTime(); GTK.g_timeout_add(1000, new IGSourceFunc() { @Override public boolean execute(Object userdata) { // TODO Auto-generated method stub getTime(); return true; } }, null); this.setWidgetSize(200, 100); this.add(obApple); } public void getTime() { String[] table = {\u0026quot;é›¶\u0026quot;,\u0026quot;å£¹\u0026quot;,\u0026quot;è´°\u0026quot;,\u0026quot;å\u0026quot;,\u0026quot;è‚†\u0026quot;,\u0026quot;ä¼\u0026quot;,\u0026quot;é™†\u0026quot;,\u0026quot;æŸ’\u0026quot;,\u0026quot;æ‰’\u0026quot;,\u0026quot;ç–\u0026quot;}; Date date = new Date(); SimpleDateFormat sdf = new SimpleDateFormat(\u0026quot;yyyyå¹´-MMæœˆ-ddæ—¥ \u0026quot;); String labelText = sdf.format(date); //System.out.println(labelText); olDate.setText(labelText); Calendar cl = Calendar.getInstance(); cl.setTime(date); int hour = cl.get(Calendar.HOUR_OF_DAY); int minute = cl.get(Calendar.MINUTE); int second = cl.get(Calendar.SECOND); hourShi = hour/10; hourGe = hour%10; minuteShi = minute/10; minuteGe = minute%10; secondShi = second/10; secondGe = second%10; oiHourShi.setResourceImage(\u0026quot;ledclock//\u0026quot;+hourShi+\u0026quot;.png\u0026quot;); oiHourGe.setResourceImage(\u0026quot;ledclock//\u0026quot;+hourGe+\u0026quot;.png\u0026quot;); colon1.setResourceImage(\u0026quot;ledclock//\u0026quot;+(secondGe%2==1?\u0026quot;colon\u0026quot;:\u0026quot;empty\u0026quot;)+\u0026quot;.png\u0026quot;); oiMinuteShi.setResourceImage(\u0026quot;ledclock//\u0026quot;+minuteShi+\u0026quot;.png\u0026quot;); oiMinuteGe.setResourceImage(\u0026quot;ledclock//\u0026quot;+minuteGe+\u0026quot;.png\u0026quot;); colon2.setResourceImage(\u0026quot;ledclock//\u0026quot;+(secondGe%2==1?\u0026quot;colon\u0026quot;:\u0026quot;empty\u0026quot;)+\u0026quot;.png\u0026quot;); oiSecondShi.setResourceImage(\u0026quot;ledclock//\u0026quot;+secondShi+\u0026quot;.png\u0026quot;); oiSecondGe.setResourceImage(\u0026quot;ledclock//\u0026quot;+secondGe+\u0026quot;.png\u0026quot;); if( minute ==0 \u0026amp;\u0026amp; second == 0) { System.out.println(\u0026quot;åŒ—äº¬æ—¶é—´\u0026quot;+table[hourShi]+table[hourGe]+\u0026quot;æ•´\u0026quot;); OOMessageDialog.showInfo(\u0026quot;åŒ—äº¬æ—¶é—´\u0026quot;+table[hourShi]+table[hourGe]+\u0026quot;æ•´\u0026quot;, \u0026quot;æ•´ç‚¹æ¶ˆæ¯\u0026quot;); } } public static void main(String[] args) { // TODO Auto-generated method stub GTK.gtk_init(); LEDClock lc = new LEDClock(); lc.show(); lc.setExitAfterDestroy(true); GTK.gtk_main(); }  }\n 3å°å…µèŠå¤©å·¥å…·ï¼š äº‹å…ˆå°è£…äº†é”®ç›˜ä¸Šé¢çš„ASCIIç  ä¸ºä¸€ä¸ªæšä¸¾ç±»OOKeycode:  java package GTKEncapsulate;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ9æ—¥ä¸‹åˆ9:28:07 * @version GTKEncapsulateOOKeycode V1.0 å°è£…å¤§éƒ¨åˆ†çš„GTKå¯¹äºé”®ç›˜è¯†åˆ«çš„keycode / public enum OOKeycode { //å­—æ¯ A(\u0026ldquo;é”®ç›˜ä¸Šçš„a\u0026rdquo;,65), B(\u0026ldquo;é”®ç›˜ä¸Šçš„b\u0026rdquo;,66), C(\u0026ldquo;é”®ç›˜ä¸Šçš„c\u0026rdquo;,67), D(\u0026ldquo;é”®ç›˜ä¸Šçš„d\u0026rdquo;,68), E(\u0026ldquo;é”®ç›˜ä¸Šçš„e\u0026rdquo;,69), F(\u0026ldquo;é”®ç›˜ä¸Šçš„f\u0026rdquo;,70), G(\u0026ldquo;é”®ç›˜ä¸Šçš„g\u0026rdquo;,71), H(\u0026ldquo;é”®ç›˜ä¸Šçš„h\u0026rdquo;,72), I(\u0026ldquo;é”®ç›˜ä¸Šçš„i\u0026rdquo;,73), J(\u0026ldquo;é”®ç›˜ä¸Šçš„j\u0026rdquo;,74), K(\u0026ldquo;é”®ç›˜ä¸Šçš„k\u0026rdquo;,75), L(\u0026ldquo;é”®ç›˜ä¸Šçš„l\u0026rdquo;,76), M(\u0026ldquo;é”®ç›˜ä¸Šçš„m\u0026rdquo;,77), N(\u0026ldquo;é”®ç›˜ä¸Šçš„n\u0026rdquo;,78), O(\u0026ldquo;é”®ç›˜ä¸Šçš„o\u0026rdquo;,79), P(\u0026ldquo;é”®ç›˜ä¸Šçš„p\u0026rdquo;,80), Q(\u0026ldquo;é”®ç›˜ä¸Šçš„q\u0026rdquo;,81), R(\u0026ldquo;é”®ç›˜ä¸Šçš„r\u0026rdquo;,82), S(\u0026ldquo;é”®ç›˜ä¸Šçš„s\u0026rdquo;,83), T(\u0026ldquo;é”®ç›˜ä¸Šçš„t\u0026rdquo;,84), U(\u0026ldquo;é”®ç›˜ä¸Šçš„u\u0026rdquo;,85), V(\u0026ldquo;é”®ç›˜ä¸Šçš„v\u0026rdquo;,86), W(\u0026ldquo;é”®ç›˜ä¸Šçš„w\u0026rdquo;,87), X(\u0026ldquo;é”®ç›˜ä¸Šçš„x\u0026rdquo;,88), Y(\u0026ldquo;é”®ç›˜ä¸Šçš„y\u0026rdquo;,89), Z(\u0026ldquo;é”®ç›˜ä¸Šçš„z\u0026rdquo;,90), //æ•°å­— NUM_0(\u0026ldquo;é”®ç›˜ä¸Šçš„0å’Œ)\u0026rdquo;,48), NUM_1(\u0026ldquo;é”®ç›˜ä¸Šçš„1å’Œ!\u0026rdquo;,49), NUM_2(\u0026ldquo;é”®ç›˜ä¸Šçš„2å’Œ@\u0026rdquo;,50), NUM_3(\u0026ldquo;é”®ç›˜ä¸Šçš„3å’Œ#\u0026rdquo;,51), NUM_4(\u0026ldquo;é”®ç›˜ä¸Šçš„4å’Œ[ DISCUZ_CODE_6 ]quot;,52), NUM_5(\u0026ldquo;é”®ç›˜ä¸Šçš„5å’Œ%\u0026rdquo;,53), NUM_6(\u0026ldquo;é”®ç›˜ä¸Šçš„6å’Œ^\u0026rdquo;,54), NUM_7(\u0026ldquo;é”®ç›˜ä¸Šçš„7å’Œ\u0026amp;\u0026ldquo;,55), NUM_8(\u0026ldquo;é”®ç›˜ä¸Šçš„8å’Œ\u0026rdquo;,56), NUM_9(\u0026ldquo;é”®ç›˜ä¸Šçš„9å’Œ(\u0026rdquo;,57), //æ¯”è¾ƒé‡è¦çš„å‡ ä¸ªæŒ‰é”® SHIFT(\u0026ldquo;é”®ç›˜ä¸Šçš„SHIFTé”®\u0026rdquo;,16), CTRL(\u0026ldquo;é”®ç›˜ä¸Šçš„ctrlé”®\u0026rdquo;,17), ALT(\u0026ldquo;é”®ç›˜ä¸Šçš„ALTé”®\u0026rdquo;,18), CAPS_LOCK(\u0026ldquo;é”®ç›˜ä¸Šçš„å¤§å†™é”®\u0026rdquo;,20), ESC(\u0026ldquo;é”®ç›˜ä¸Šçš„ESCé”®\u0026rdquo;,27), TAB(\u0026ldquo;é”®ç›˜ä¸Šçš„Tabé”®\u0026rdquo;,9), RIGTH_SHIFT(\u0026ldquo;é”®ç›˜ä¸Šå³è¾¹çš„SHIFTé”®\u0026rdquo;,161), RIGHT_CTRL(\u0026ldquo;é”®ç›˜ä¸Šå³è¾¹çš„ctrlé”®\u0026rdquo;,163), RIGHT_ALT(\u0026ldquo;é”®ç›˜ä¸Šå³è¾¹çš„ALTé”®\u0026rdquo;,165), WINDOWS(\u0026ldquo;é”®ç›˜ä¸Šçš„WINDOWSé”®\u0026rdquo;,91), FN(\u0026ldquo;é”®ç›˜ä¸Šçš„FNé”®\u0026rdquo;,17), BACKSPACE(\u0026ldquo;é”®ç›˜ä¸Šçš„baskspaceå›é€€é”®\u0026rdquo;,8), SPACE(\u0026ldquo;é”®ç›˜ä¸Šçš„ç©ºæ ¼é”®\u0026rdquo;,32), //æ–¹å‘é”® LEFT(\u0026ldquo;é”®ç›˜ä¸Šçš„å·¦æ–¹å‘é”®\u0026rdquo;,37), UP(\u0026ldquo;é”®ç›˜ä¸Šçš„ä¸Šæ–¹å‘é”®\u0026rdquo;,38), RIGHT(\u0026ldquo;é”®ç›˜ä¸Šçš„å³æ–¹å‘é”®\u0026rdquo;,39), DOWN(\u0026ldquo;é”®ç›˜ä¸Šçš„ä¸‹æ–¹å‘é”®\u0026rdquo;,40),\n //å°é”®ç›˜æ•°å­— å½“å‰æƒ…å†µä¸‹å¿…é¡»æ˜¯åœ¨å°é”®ç›˜å¼€å¯çš„æƒ…å†µä¸‹ï¼Œå¦åˆ™ä¼šåŒ¹é…é”™è¯¯ SMALLBOARD_0(\u0026quot;å°é”®ç›˜ä¸Šçš„0å’Œinsert\u0026quot;,96), SMALLBOARD_1(\u0026quot;å°é”®ç›˜ä¸Šçš„1å’Œend\u0026quot;,97), SMALLBOARD_2(\u0026quot;å°é”®ç›˜ä¸Šçš„2å’Œå‘ä¸‹æ–¹å‘é”®\u0026quot;,98), SMALLBOARD_3(\u0026quot;å°é”®ç›˜ä¸Šçš„3å’Œpgdn\u0026quot;,99), SMALLBOARD_4(\u0026quot;å°é”®ç›˜ä¸Šçš„4å’Œå‘å·¦æ–¹å‘é”®\u0026quot;,100), SMALLBOARD_5(\u0026quot;å°é”®ç›˜ä¸Šçš„5\u0026quot;,101), SMALLBOARD_6(\u0026quot;å°é”®ç›˜ä¸Šçš„6å’Œå‘å³æ–¹å‘é”®\u0026quot;,102), SMALLBOARD_7(\u0026quot;å°é”®ç›˜ä¸Šçš„7å’Œhome\u0026quot;,103), SMALLBOARD_8(\u0026quot;å°é”®ç›˜ä¸Šçš„8å’Œå‘ä¸Šæ–¹å‘é”®\u0026quot;,104), SMALLBOARD_9(\u0026quot;å°é”®ç›˜ä¸Šçš„9å’Œpgdn\u0026quot;,105), //å°é”®ç›˜ä¸Šçš„+ - * / SMALLBOARD_PLUS(\u0026quot;å°é”®ç›˜ä¸Šçš„åŠ å·\u0026quot;,107), SMALLBOARD_MINUS(\u0026quot;å°é”®ç›˜ä¸Šçš„å‡å·\u0026quot;,109), SMALLBOARD_MULTIPLY(\u0026quot;å°é”®ç›˜ä¸Šçš„ä¹˜å·\u0026quot;,106), SMALLBOARD_DIVIDE(\u0026quot;å°é”®ç›˜ä¸Šçš„é™¤å·\u0026quot;,111), //å°é”®ç›˜ä¸Šçš„enterå’Œç‚¹å·ï¼ˆdelete),enterå’Œä¸»é”®ç›˜ä¸€æ · SMALLBOARD_DELETE(\u0026quot;å°é”®ç›˜ä¸Šçš„ç‚¹å·\u0026quot;,110), ENTER(\u0026quot;å°é”®ç›˜ä¸Šçš„ENTERä»¥åŠä¸»é”®ç›˜çš„ENTER\u0026quot;,13), //å³æ‰‹è¾¹çš„ä¸€äº›ç¬¦å·é”® SINGLEQUOTE(\u0026quot;é”®ç›˜ä¸Šçš„åŒå¼•å·å’Œå•å¼•å·\u0026quot;,222), SEMICOLON(\u0026quot;é”®ç›˜ä¸Šçš„åˆ†å·å’Œå†’å·coloné”®\u0026quot;,186), COMMA(\u0026quot;é”®ç›˜ä¸Šçš„é€—å·é”®å’Œ\u0026lt;\u0026quot;,188), POINT(\u0026quot;é”®ç›˜ç›˜ä¸Šçš„å¥å·å’Œ\u0026gt;\u0026quot;,190), SLASH(\u0026quot;é”®ç›˜ä¸Šçš„/æ­£æ–œæ è¡¨ç¤ºé™¤æ³•å’Œé—®å·\u0026quot;,191), BACKSLASH(\u0026quot;é”®ç›˜ä¸Šçš„åæ–œæ \\\\å’Œç«–çº¿\u0026quot;,220), LEFTSQUARE(\u0026quot;é”®ç›˜ä¸Šçš„å·¦ä¸­æ‹¬å·å’Œå·¦å¤§æ‹¬å·\u0026quot;,219), RIGHTSQUARE(\u0026quot;é”®ç›˜ä¸Šçš„å³ä¸­æ‹¬å·å’Œå³å¤§æ‹¬å·\u0026quot;,221), DASH(\u0026quot;é”®ç›˜ä¸Šçš„ç ´æŠ˜å·å’Œå‡å·\u0026quot;,189), EQUAL(\u0026quot;é”®ç›˜ä¸Šçš„ç­‰å·å’ŒåŠ å·\u0026quot;,187), REVERSEQUOTE(\u0026quot;é”®ç›˜ä¸Šçš„åå¼•å·å’Œçº¦ç­‰å·\u0026quot;,192), //ä¸€äº›ä¸ç»å¸¸ç”¨çš„  // PRINT(\u0026ldquo;é”®ç›˜ä¸Šçš„PRINT\u0026rdquo;,) PAUSE(\u0026ldquo;é”®ç›˜ä¸Šçš„æš‚åœé”®å’Œbreak\u0026rdquo;,19), DELETE(\u0026ldquo;é”®ç›˜ä¸Šçš„deleteå’Œinserté”®\u0026rdquo;,46), HOME(\u0026ldquo;é”®ç›˜ä¸Šçš„HOMEé”®\u0026rdquo;,36), PAGEUP(\u0026ldquo;é”®ç›˜ä¸Šçš„PAGEUP\u0026rdquo;,33), PAGEDOWN(\u0026ldquo;é”®ç›˜ä¸Šçš„PAGEDOWN\u0026rdquo;,34), END(\u0026ldquo;é”®ç›˜ä¸Šçš„END\u0026rdquo;,35), NUMLOCK(\u0026ldquo;é”®ç›˜ä¸Šçš„NUMLOCK\u0026rdquo;,144),\n //F1--F12 F1(\u0026quot;é”®ç›˜ä¸Šçš„F1é”®\u0026quot;,112), F2(\u0026quot;é”®ç›˜ä¸Šçš„F2é”®\u0026quot;,113), F3(\u0026quot;é”®ç›˜ä¸Šçš„F3é”®\u0026quot;,114), F4(\u0026quot;é”®ç›˜ä¸Šçš„F4é”®\u0026quot;,115), F5(\u0026quot;é”®ç›˜ä¸Šçš„F5é”®\u0026quot;,116), F6(\u0026quot;é”®ç›˜ä¸Šçš„F6é”®\u0026quot;,117), F7(\u0026quot;é”®ç›˜ä¸Šçš„F7é”®\u0026quot;,118), F8(\u0026quot;é”®ç›˜ä¸Šçš„F8é”®\u0026quot;,119), F9(\u0026quot;é”®ç›˜ä¸Šçš„F9é”®\u0026quot;,120), F10(\u0026quot;é”®ç›˜ä¸Šçš„F10é”®\u0026quot;,121), F11(\u0026quot;é”®ç›˜ä¸Šçš„F11é”®\u0026quot;,122), F12(\u0026quot;é”®ç›˜ä¸Šçš„F12é”®\u0026quot;,123), ; //ctrl shift tab caps_lock , . ; / ' [ ]çš„ private int keycode; private String keyName; private OOKeycode(String keyName,int keycode) { this.keyName = keyName; this.keycode = keycode; } public int getKeycode() { return this.keycode; } public String getKeyName() { return this.keyName; } public static OOKeycode parseOOKeycode(int keycode) { OOKeycode[] apples = OOKeycode.values(); for(int i = 0 ; i \u0026lt; apples.length; i++) { if(keycode == apples[i].getKeycode()) { return apples[i]; } } throw new IllegalArgumentException(keycode+\u0026quot;æ˜¯ä¸€ä¸ªä¸åˆæ³•çš„å‚æ•°\u0026quot;); }  }\n ä¿®æ”¹äº†OOEntry, æ·»åŠ ä¸€ä¸ªé”®ç›˜æ•²å‡»å“åº”äº‹ä»¶  java public void addKeyPressListener(final IGCallBack callback) { GTK.g_signal_connect(this.getId(), \u0026ldquo;key-press-event\u0026rdquo;, new IGCallBack() {\n @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub callback.execute(instance, eventData, object); } }, null); }  å°å…µèŠå¤©ä¸»ç¨‹åº  java package TestGTKEncapsulate;\nimport javax.xml.crypto.dsig.keyinfo.KeyValue;\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack;\nimport GTKEncapsulate.OOContainer; import GTKEncapsulate.OODialog; import GTKEncapsulate.OOEntry; import GTKEncapsulate.OOFileChooser; import GTKEncapsulate.OOGrid; import GTKEncapsulate.OOImage; import GTKEncapsulate.OOKeycode; import GTKEncapsulate.OOMessageDialog; import GTKEncapsulate.OOMusic; import GTKEncapsulate.OOMusicMode; import GTKEncapsulate.OOScrollBar; import GTKEncapsulate.OOTextView; import GTKEncapsulate.OOWindow; //import GTKEncapsulate.OpenFile;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ9æ—¥ä¸‹åˆ8:20:47 * @version TestGTKEncapsulateTestXiaoBingWindow V1.0 * V2.0 æŠŠæ‰€æœ‰çš„equalsIgnoreCase æ”¹ä¸ºcontains åªéœ€è¦å­—ç¬¦ä¸²åŒ…å«å³å¯ï¼Œ */ public class TestXiaoBingWindow extends OOWindow {\n /** * @param args */ private OOEntry oeApple ; private OOTextView otvApple; private OOImage oim; private OOMusic om; public TestXiaoBingWindow() { OOGrid grid = new OOGrid(); oeApple = new OOEntry(); oeApple.show(); //oeApple.setText(\u0026quot;è¯·åœ¨è¿™è¾¹è¾“å…¥æ–‡æœ¬ï¼š\u0026quot;); otvApple = new OOTextView(); otvApple.show(); otvApple.setEditable(false); OOScrollBar osbApple = new OOScrollBar(); osbApple.show(); osbApple.setWidgetSize(300, 300); osbApple.add(otvApple); grid.add(osbApple, 0); grid.add(oeApple,1); grid.show(); this.add(grid);  // GTK.MCI_MODE_OPEN\n //è®¾ç½®ç›‘å¬ oeApple.addKeyPressListener(new IGCallBack() {  @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub int keycode = GTK.gdk_event_get_keycode(eventData); if(keycode == OOKeycode.ENTER.getKeycode()) {\n String text = oeApple.getText(); otvApple.insertTextAtEnd(\u0026quot;ä½ è¯´:\u0026quot;+text+\u0026quot;\\n\u0026quot;); oeApple.setText(\u0026quot;\u0026quot;); //text.contains if(text.contains(\u0026quot;ä½ å¥½å•Š\u0026quot;)) { otvApple.insertTextAtEnd(\u0026quot;å°å…µè¯´:\u0026quot;+\u0026quot;å¥½ä½ å¦¹ï¼\\n\u0026quot;); }else if(text.contains(\u0026quot;è„±è¡£èˆ\u0026quot;)) { otvApple.insertTextAtEnd(\u0026quot;å°å…µè¯´:\u0026quot;+\u0026quot;ä¸è·Ÿä½ ç©äº†\\n\u0026quot;); }else if(text.contains(\u0026quot;ä»Šå¹´å‡ å²\u0026quot;)) { otvApple.insertTextAtEnd(\u0026quot;å°å…µè¯´:\u0026quot;+\u0026quot;å¥³å­©å­çš„å¹´é¾„ä¸èƒ½éšä¾¿å‘Šè¯‰åˆ«äºº\\n\u0026quot;); }else if(text.contains(\u0026quot;ä½ æ˜¯ç”·çš„è¿˜æ˜¯å¥³çš„\u0026quot;)) { otvApple.insertTextAtEnd(\u0026quot;Little Bing Said:\u0026quot;+\u0026quot;You guess\\n\u0026quot;); }else if(text.contains(\u0026quot;è®©æˆ‘ä»¬å»å¤–é¢ç©å§\u0026quot;)) { otvApple.insertTextAtEnd(\u0026quot;Little Bing Said:\u0026quot;+\u0026quot;å»å“ªé‡Œç©ï¼Ÿ\\n\u0026quot;); }else if(text.contains(\u0026quot;select\u0026quot;)) { OpenFile ofApple = new OpenFile(); ofApple.setMultipleSelect(); ofApple.createFilter(); ofApple.nameFilter(\u0026quot;éŸ³ä¹æ–‡ä»¶\u0026quot;); ofApple.editFilter(\u0026quot;*.MP3\u0026quot;); ofApple.editFilter(\u0026quot;*.wav\u0026quot;); //æŠŠfilterçš„æ“ä½œæ”¾å…¥æ‰“å¼€å¯¹è¯æ¡†ä¸­ ofApple.finishFilter(); String[] filenames = ofApple.processResponse(); //åœ¨srcæ–‡ä»¶å¤¹ä¸‹ om = new OOMusic(filenames[0]); om.playOnce(); }else if(text.contains(\u0026quot;sing\u0026quot;)) { //åœ¨srcæ–‡ä»¶å¤¹ä¸‹ om = new OOMusic(\u0026quot;breathless.mp3\u0026quot;,false); om.playOnce(); }else if(text.contains(\u0026quot;pause\u0026quot;)) { //åœ¨srcæ–‡ä»¶å¤¹ä¸‹ om.pause(); }else if(text.contains(\u0026quot;resume\u0026quot;)) { //åœ¨srcæ–‡ä»¶å¤¹ä¸‹ om.pause(); }else if(text.contains(\u0026quot;close\u0026quot;)) { //åœ¨srcæ–‡ä»¶å¤¹ä¸‹ om.close(); }else if(text.contains(\u0026quot;show\u0026quot;)) { OODialog od = new OODialog(); OOContainer oct = od.createContentArea(); oim = new OOImage(); oim.setResourceImage(\u0026quot;hunsha.jpg\u0026quot;); oim.setWidgetSize(200, 200); oim.show(); oct.add(oim); od.run(); od.destroy(); } else if(text.contains(\u0026quot;åŒ—äº¬æ€ä¹ˆæ ·\u0026quot;)) { otvApple.insertTextAtEnd(\u0026quot;Little Bing Said:\u0026quot;+\u0026quot;ä¸æ€ä¹ˆæ ·ï¼Œå…ˆè¿™æ ·ï¼Œæ”¹å¤©å†èŠ\\n\u0026quot;); }else { otvApple.insertTextAtEnd(\u0026quot;å°å…µè¯´ï¼šæ²¡å¬è§ï¼Œå†è¯´ä¸€é\\n\u0026quot;); } }  // System.out.println(OOKeycode.parseOOKeycode(keycode).getKeyName()); } }); /*GTK.g_signal_connect(oeApple.getId(), \u0026ldquo;key-press-event\u0026rdquo;, new IGCallBack() {\n @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub int keycode = GTK.gdk_event_get_keycode(eventData);  // System.out.println(keycode); System.out.println(OOKeycode.parseOOKeycode(keycode).getKeyName()); //int value = GTK.gdk_event_get_keyval(eventData); //String enterCharacterString= String.valueOf(keycode); //System.out.println(enterCharacterString); //char enterCharacter = enterCharacterString.charAt(0); //String text = oeApple.getText(); //char lastchar = text.charAt(text.length()-1); //System.out.println(text+\u0026ldquo;text length=\u0026rdquo;+text.length()); // System.out.println(\u0026ldquo;å½“å‰è¾“å…¥çš„å­—ç¬¦\u0026rdquo;+enterCharacter+\u0026ldquo;çš„asciiç ä¸º:\u0026ldquo;+keycode+\u0026rdquo;\\nå¹¶ä¸”çš„ä»–çš„10è¿›åˆ¶æ•°ä¸º\u0026rdquo;+value); // OOMessageDialog.showInfo(\u0026ldquo;å½“å‰è¾“å…¥çš„å­—ç¬¦\u0026rdquo;+enterCharacter+\u0026ldquo;çš„asciiç ä¸º:\u0026ldquo;+keycode+\u0026rdquo;\\nå¹¶ä¸”çš„ä»–çš„10è¿›åˆ¶æ•°ä¸º\u0026rdquo;+value, \u0026ldquo;å­¦ä¹ ASCIIç \u0026rdquo;); //System.out.println(\u0026ldquo;å½“å‰è¾“å…¥çš„å­—ç¬¦\u0026rdquo;+enterCharacter+\u0026ldquo;çš„asciiç ä¸º:\u0026ldquo;+keycode); //OOMessageDialog.showInfo(\u0026ldquo;å½“å‰è¾“å…¥çš„å­—ç¬¦\u0026rdquo;+enterCharacter+\u0026ldquo;çš„asciiç ä¸º:\u0026ldquo;+keycode, \u0026ldquo;å­¦ä¹ ASCIIç \u0026rdquo;); } }, null);*/ } public static void main(String[] args) { // TODO Auto-generated method stub GTK.gtk_init(); TestXiaoBingWindow txbw = new TestXiaoBingWindow(); txbw.setExitAfterDestroy(true); txbw.show(); GTK.gtk_main(); } class OpenFile extends OOFileChooser {\n @Override public String[] processResponse() { String[] filenames = null; // TODO Auto-generated method stub int ret = this.run().getValue(); if(ret == GTK.GTK_RESPONSE_OK) { filenames = GTK.gtk_file_chooser_get_filenames(this.getId()); for(int i = 0 ; i\u0026lt; filenames.length ; i++) { System.out.println(\u0026quot;é€‰ä¸­æ–‡ä»¶å\u0026quot;+i+\u0026quot;: \u0026quot;+filenames[i]); } GTK.gtk_widget_destroy(this.getId()); //å¿…é¡»éœ€è¦ï¼ï¼å¦åˆ™æŠ¥é”™ }else { GTK.gtk_widget_destroy(this.getId()); } return filenames; } @Override public void processResponse1() { // TODO Auto-generated method stub } }  }\n 4 éŸ³ä¹çš„ä½¿ç”¨+å®šæ—¶å™¨+å›¾ç‰‡ç©ºé—´+textview === å¥³ç¥è¡¨è¾¾ç¥å™¨ä¹‹çˆ±çš„èª“è¨€ åœ¨æ•²å®Œèª“è¨€ä¹‹åï¼Œå¼€å§‹æ’­æ”¾éŸ³ä¹ æœªä¿®å¤çš„bug: æœ‰æ—¶å€™è¯»ç€è¯»ç€æ–‡å­—å°±å´©æºƒäº†ï¼Œ å¦å¤–åŠ å…¥èƒŒæ™¯éŸ³ä¹ä¹Ÿä¸è¡Œã€‚ã€‚ã€‚ç›¸å½“ä¸ç¨³å®šã€‚ æœ€å¤§çš„bug: memery error.......  java package TestGTKEncapsulate; import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGSourceFunc;\nimport GTKEncapsulate.*;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ10æ—¥ä¸Šåˆ1:17:57 * @version TestGTKEncapsulateTestGrilGift V1.0 å¥³æœ‹å‹è¡¨è¾¾ç¥å™¨ */ public class TestGirlGift extends OOWindow {\n /** * @param args */ private OOImage oim ; private OOTextView otv; private OOMusic om ; public TestGirlGift() { OOBox ob =new OOBox(false); ob.show(); oim = new OOImage(); oim.setResourceImage(\u0026quot;yumufeng.jpg\u0026quot;); oim.show(); ob.addWidget(oim); otv = new OOTextView(); otv.show(); otv.setType(); OOScrollBar osb = new OOScrollBar(); osb.show(); osb.setWidgetSize(200, 220); osb.add(otv); ob.addWidget(osb); this.add(ob); final StringBuilder love = new StringBuilder(); // +å·ä¹‹åéƒ½ä¼šå‡ºç°bug final String Lovewords = \u0026quot;æ¬£ç„¶:\\r\\nè°¢è°¢ä½ ç»™æˆ‘çš„æ‰€æœ‰å…³æ€€å’Œç†è§£ï¼Œå°¤å…¶æ˜¯é‚£äº›å­¤ç«‹æ— åŠ©çš„æ—¶åˆ»ä½ æ¸©æš–çš„é™ªä¼´ï¼Œå®ƒè®©æˆ‘å§‹ç»ˆå¼ºå¤§åšå®š!\\r\\n\u0026quot; +\u0026quot;æˆ‘è¦è®©ä½ æˆä¸ºä¸–ç•Œä¸Šæœ€å¹¸ç¦çš„å¥³äºº,ä¸æ˜¯å› ä¸ºè¿™ä¸€ç”Ÿç§¯ç´¯çš„åæœ›,åœ°ä½ä¸è´¢å¯Œ,è€Œä»…ä»…å› ä¸ºæˆ‘é»˜é»˜æ’ä¹…çš„çˆ±!\\r\\n\u0026quot; +\u0026quot;ä»Šå¤©,è¯´å‡ºè¿™äº›è¯è¯­æ˜¯é‚£ä¹ˆè‰°éš¾å´åˆé‚£ä¹ˆå¿«ä¹,è¿™éƒ½æ˜¯æˆ‘è¿™ä¹ˆé•¿æ—¶é—´ä»¥æ¥åŸ‹åœ¨å¿ƒåº•çš„è¯è¯­!è¿™ä¸€åˆ‡åªæ˜¯å› ä¸ºä¸‹é¢æˆ‘è¦å”±ç»™\u0026quot; +\u0026quot;ä½ å¬çš„è¿™é¦–æ­Œçš„åå­—:æˆ‘å¦‚æ­¤çˆ±ä½ !\\r\\nè½æ¬¾äººï¼šå¶æ˜­è‰¯ \u0026quot;; love.append(Lovewords); //è¿™ä¸ªè¿‡ç¨‹æ˜¯æ…¢æ…¢åœ°ï¼Œä½†æ˜¯ä¸€ç›´æŒç»­çš„åœ¨è¿è¡Œ GTK.g_timeout_add(100, new IGSourceFunc() { @Override public boolean execute(Object userdata) { // TODO Auto-generated method stub int len = otv.getText().length(); char ch = love.charAt(len); otv.insertTextAtEnd(Character.toString(ch)); if(otv.getText().length() == love.length()-1) { //om.close(); om = new OOMusic(\u0026quot;æˆ‘å¦‚æ­¤çˆ±ä½ .mp3\u0026quot;,true); om.playRepeat(); return true; }else if(otv.getText().length() == love.length()) { return false; } else { //System.out.println(\u0026quot;2\u0026quot;); return true; } } }, null); //System.out.println(\u0026quot;134\u0026quot;);  /* if(otv.getText().length() == Lovewords.length()-1) { System.out.println(\u0026ldquo;12\u0026rdquo;); OOMusic om = new OOMusic(\u0026ldquo;æˆ‘å¦‚æ­¤çˆ±ä½ .mp3\u0026rdquo;,true); om.playRepeat(); }/ //ä¸èƒ½æ”¾åœ¨é‡Œé¢ã€‚ã€‚ã€‚ //æš‚æ—¶æœ‰é—®é¢˜ æ·»åŠ æŠ¥é”™ åªå¥½è®©ä»–åœ¨å†™å­—çš„æ—¶å€™ä¸“å¿ƒå†™å­—ï¼Œä¸æ”¾èƒŒæ™¯éŸ³ä¹ / om = new OOMusic(\u0026ldquo;ISurrender.mp3\u0026rdquo;,true); om.playOnce();*/ } public static void main(String[] args) { // TODO Auto-generated method stub GTK.gtk_init(); TestGirlGift tgg = new TestGirlGift(); tgg.setTitle(\u0026ldquo;å¥³ç¥è¡¨è¾¾ç¥å™¨ä¹‹çˆ±çš„èª“è¨€\u0026rdquo;); tgg.show(); tgg.setExitAfterDestroy(true); GTK.gtk_main(); }\n}\n 5OOCalendarButtonçš„åˆ›å»º å…·ä½“çš„OOCalendarDialog OOCalendarButtonçš„å°è£…è¯¦è§ GTKEncapsulateæºç 6.0  java package TestGTKEncapsulate;\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack;\nimport GTKEncapsulate.*;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ10æ—¥ä¸‹åˆ2:48:55 * @version TestGTKEncapsulateTestCalendar V1.0 */ public class TestCalendar extends OOWindow {\n /** * @param args */ private OOCalendar ocl ; private OOCalendarDialog ocld; private OOBox obApple; private OOButton btnclick; private OOCalendarButton ocbApple; public TestCalendar() { ocl = new OOCalendar(); ocl.show(); btnclick = new OOButton(\u0026quot;ç‚¹å‡»\u0026quot;); btnclick.show(); btnclick.addClickedListener(new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO Auto-generated method stub ocld = new OOCalendarDialog(); ocld.show(); } }); ocbApple = new OOCalendarButton(\u0026quot;é€‰æ‹©æ—¥æœŸ\u0026quot;); ocbApple.show(); obApple = new OOBox(); obApple.addWidget(ocl); obApple.addWidget(btnclick); obApple.addWidget(ocbApple); obApple.show(); System.out.println(ocl.getDay()+ocl.getMonth()+ocl.getYear()); this.add(obApple); } public static void main(String[] args) { // TODO Auto-generated method stub GTK.gtk_init(); TestCalendar tc = new TestCalendar(); tc.show(); tc.setExitAfterDestroy(true); GTK.gtk_main(); }  }\n å½“å‰ä¸»è¦çš„OOåº“åŠ ä¸Šæšä¸¾ç±»æ€»çš„æœ‰56ä¸ªï¼ŒV6.0ä¸»è¦å¢åŠ äº† OOImageButton , OOKeycode,OOMusic, OOMusicMode ,OOMusicStatus,OOStockImage, OOStockSize,OOCalendarDialogï¼ŒOOCalendarButton GTKEncapsulateæºç V6.0.rar æµ‹è¯•äº†ä¸€ä¸ªtoolbaræ§ä»¶ï¼Œä¿®æ­£äº†ToolButtonçš„æ„é€ å‡½æ•°æ²¡æœ‰è®¾ç½®IDçš„é‡å¤§çš„bug ä¿®æ”¹çš„ä»£ç ï¼š  java public class OOToolButton extends OOContainer { /** * V2.0 æ–°çš„æ„é€ æ–¹æ³• * @param icon_widget * @param label */ public OOToolButton(OOWidget icon_widget,String label) { //å¦‚æœä¸º0 åˆ™å·¥å…·æ æ§ä»¶æ²¡æœ‰å›¾ç‰‡ int icon_widgetID = (icon_widget==null)?0:icon_widget.getId(); //GTK.gtk_tool_button_new(icon_widgetID, label) å·²æ·»åŠ setIdå¦åˆ™æŠ¥é”™ setId(GTK.gtk_tool_button_new(icon_widgetID, label)); }\n æµ‹è¯•ä»£ç å°±æ˜¯ä¹‹å‰2æœˆ6å·çš„TestMenuFileChooseAndToolBar.java å› ä¸ºé‡‡ç”¨äº†æ–°çš„å°è£…çš„ToolButtonç±»ï¼Œæ‰€ä»¥é‡æ–°æµ‹è¯•ï¼Œå‘ç°äº†åœ¨ToolButtonç±»æ„é€ å‡½æ•°ç¼ºå¤±setId()çš„é—®é¢˜ï¼Œç‰¹æ­¤ä¿®æ­£ OOFileChooserä¸ºæŠ½è±¡ç±»ï¼Œä½¿ç”¨èµ·æ¥ä¸æ˜¯ç‰¹åˆ«èˆ’æœï¼Œäºæ˜¯æ”¹å˜æˆä¸ºéæŠ½è±¡çš„ï¼Œå¹¶æä¾›ä¸€ä¸ªæ¥å£ï¼Œä¾›ç”¨æˆ·ä½¿ç”¨ã€‚ å…·ä½“OOFileChooserçš„ä¿®æ”¹å¦‚ä¸‹ï¼š å¿åˆ›å»ºä¸€ä¸ªOOFileChooserInterfaceæ¥å£ï¼š  java /** * */ package GTKEncapsulate;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ13æ—¥ä¸‹åˆ2:13:25 * @version GTKEncapsulateOOFileChooserInterface V1.0 */ public interface OOFileChooserInterface { public void doit(); }\n ç„¶ååœ¨OOFileChooserç±»ä¸­å¼€æ”¾æ¥å£å¹¶åŠ å…¥é»˜è®¤çš„ä¸¤ä¸ªå¤„ç†æ‰“å¼€å’Œä¿å­˜çš„å‡½æ•°ï¼š  java package GTKEncapsulate;\nimport java.io.BufferedWriter; import java.io.FileOutputStream; import java.io.IOException; import java.io.OutputStream; import java.io.OutputStreamWriter;\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ5æ—¥ä¸‹åˆ4:38:57 * @version GTKEncapsulateOOFileChooser V1.0 æŠŠç±»æ ‡è®°ä¸ºabstractï¼Œ * è¿™æ ·çš„ç±»æ— æ³•è¢«ç›´æ¥å®ä¾‹åŒ–ï¼ˆnewï¼‰ï¼Œè¿™å°±å«æŠ½è±¡ç±»ã€‚ * V2.0 ä¿®æ”¹äº†runæ–¹æ³• * V3.0 æŠ½è±¡æ–¹æ³•çš„è¿”å›å€¼ä»void è¯¥åˆ°äº†String[] * v4.0 ä¿®æ”¹OOFileChooserç»§æ‰¿ç±»ä¸ºæ¥è‡ªOODailog * å¹¶æŠŠpublic int run()æ–¹æ³•æåˆ°OODialogä¸­ * V5.0 åˆ©ç”¨OOFileActionæšä¸¾ç±» é‡æ–°ç¼–å†™äº†OOFIleChooser * V6.0 åˆ›å»ºäº†setDoOverWrittenConfirmatioå‡½æ•°ï¼Œå¹¶åœ¨å°è£…æ„é€ å‡½æ•°ä¸­ * è¿ç”¨äº†ä¸€ä¸ªåˆ¤æ–­æŠ€å·§ï¼Œå¢åŠ äº† getFileName() setCurrentFilename * createFileFolder * V7.0 ä»æŠ½è±¡ç±»è½¬å˜åˆ°éæŠ½è±¡ç±» * å¢åŠ äº†ä¸€ä¸ªæ–‡ä»¶æ¥å£ OOFileChooserInterface ä¾›ç”¨æˆ·ä½¿ç”¨ * å¢åŠ äº†æ‰“å¼€æ–‡ä»¶å’Œä¿å­˜æ–‡ä»¶çš„é»˜è®¤å¤„ç†æ–¹å¼ */ public class OOFileChooser extends OODialog { private static Filter fi ; //private static int response; //å¯¹è¯æ¡†çš„å“åº” /** * * @param title æœ‰å‚æ„é€ å‡½æ•°çš„çª—å£æ ‡é¢˜ * @param action æœ‰å‚æ„é€ å‡½æ•°çš„ è¡Œä¸ºï¼Œæ‰“å¼€ã€ä¿å­˜ã€‚ã€‚ * @param buttonText æœ‰å‚æ„é€ å‡½æ•°çš„ æŒ‰é’®çš„æ ‡ç­¾åå­— * åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¯¹è¯æ¡†ï¼Œå¯¹è¯æ¡†ä¸€å®šè¦runä¸€ä¸‹ã€‚ã€‚ã€‚ã€‚ã€‚ å¹¶ä¸”ä¸€å®šè¦æ‘§æ¯å®ƒ / / public OOFileChooser(String title, int action, String buttonText) { setId(GTK.gtk_file_chooser_dialog_new(title, 0, action, buttonText)); }*/ public OOFileChooser(String title, OOFileAction action, String buttonText) { setId(GTK.gtk_file_chooser_dialog_new(title, 0, action.getValue(), buttonText)); //ä¸€ä¸ªå°è£…æŠ€å·§ã€‚ if(action ==OOFileAction.SAVE) { setDoOverWrittenConfirmation(true); }\n } /** * æ— å‚æ„é€ å‡½æ•° é»˜è®¤ä¸ºæ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†è¯´ */ public OOFileChooser() { this(\u0026quot;æ‰“å¼€æ–‡ä»¶\u0026quot;, OOFileAction.OPEN, \u0026quot;æ‰“å¼€\u0026quot;); } /** * è®¾ç½®æ–‡ä»¶æ‰“å¼€çª—å£çš„å¤šé€‰ */ public void setMultipleSelect() { GTK.gtk_file_chooser_set_select_multiple(this.getId(), true); } /** * * @param do_overwrite_confirmation åœ¨saveæ¨¡å¼ä¸‹ï¼Œä¿å­˜æ—¶éœ€è¦åˆ¤æ–­æ˜¯å¦è¦†ç›– */ public void setDoOverWrittenConfirmation(boolean do_overwrite_confirmation) { GTK.gtk_file_chooser_set_do_overwrite_confirmation(this.getId(), do_overwrite_confirmation); } /** * * @param text è®¾ç½®å½“å‰é€‰æ‹©çš„æ–‡ä»¶åä¸ºtext */ public void setCurrentFilename(String text) { GTK.gtk_file_chooser_set_current_name(this.getId(), text); } /** * * @param create_folders å¸ƒå°”å€¼ ç”¨äºåˆ¤æ–­æ˜¯å¦åˆ›å»ºã€‚ã€‚ã€‚ä¸æ¸…æ¥šè¿™è¾¹ã€‚ */ public void createFileFolder(boolean create_folders) { GTK.gtk_file_chooser_set_create_folders(this.getId(), create_folders); } /** * åˆ›å»ºä¸€ä¸ªè¿‡æ»¤å™¨ */ public void createFilter() { fi = new Filter(); } /** * * @param text è®¾ç½®è¿‡æ»¤å™¨çš„åå­— */ public void nameFilter(String text) { fi.setFilterName(text); } /** * * @param pattern å¢åŠ è¿‡æ»¤å™¨çš„åç¼€ */ public void editFilter(String pattern) { fi.addFilterPattern(pattern); } public void finishFilter() { GTK.gtk_file_chooser_add_filter(this.getId(), fi.getId()); } public String[] getFileNames() { return GTK.gtk_file_chooser_get_filenames(this.getId()); } public String getFileName() { return GTK.gtk_file_chooser_get_filename(this.getId()); } /** * ä¸€ä¸ªæŠ½è±¡æ–¹æ³• ï¼Œè¦æ±‚ç»§æ‰¿è€…å»å®ç°å®ƒ * å¤šäº†ä¸€ä¸ª * * V å¯ä¸å¯ä»¥ç”¨æ¥å£æ¥å®ç°ï¼Œä¼°è®¡ä¹Ÿæ˜¯ä¸€æ ·çš„ä¸‹è¿‡ */ /** * * @param ofci å¼€æ”¾äº†ä¸€ä¸ªOOFileChooserInterfaceæ¥å£ï¼Œ * ç”¨äºå¤„ç†æ‰“å¼€æ–‡ä»¶å’Œä¿å­˜æ–‡ä»¶ï¼Œéœ€è¦è¿›è¡Œçš„é¢å¤–æ“ä½œ */ public void processResponse(final OOFileChooserInterface ofci) { ofci.doit(); } /** * é»˜è®¤å¤„ç†æ‰“å¼€çš„å‡½æ•°çš„æ–¹å¼ï¼Œå¾—åˆ°æ–‡ä»¶ï¼ï¼ æ˜¾ç¤ºåˆ°textviewå’Œtreeviewäº¤ç»™ç”¨æˆ·å»åš * è€ŒprocessSaveåˆ™äº¤ç»™OOFileChooserçš„processSaveå»åš * æ–°ç‰ˆæœ¬æ”¹ç”¨OOResponseTyepçš„ç±»å‹è¿›è¡Œåˆ¤æ–­ */ public String[] processOpen() { String[] filenames = null; // TODO Auto-generated method stub OOResponseType ret = this.run(); //int ret = this.run().getValue(); if(ret == OOResponseType.OK) { filenames = GTK.gtk_file_chooser_get_filenames(this.getId()); for(int i = 0 ; i\u0026lt; filenames.length ; i++) { System.out.println(\u0026quot;é€‰ä¸­æ–‡ä»¶å\u0026quot;+i+\u0026quot;: \u0026quot;+filenames[i]); } //GTK.gtk_widget_destroy(this.getId()); //å¿…é¡»éœ€è¦ï¼ï¼å¦åˆ™æŠ¥é”™ this.destroy(); }else { //GTK.gtk_widget_destroy(this.getId()); this.destroy(); } return filenames; } /** * é»˜è®¤å¤„ç†ä¿å­˜å¯¹è¯æ¡†çš„æ–¹å¼ åŸºæœ¬ä¸Šé»˜è®¤æ˜¯å¤§éƒ¨åˆ†é‡‡ç”¨çš„æ–¹å¼ï¼Œ * ä¿å­˜æ–‡ä»¶çš„æ‰“å¼€æ–‡ä»¶æµæœ‰OOFileChooserå»åš * * æš‚æ—¶ç›´æ¥æ¥å—textviewçš„æ–‡æœ¬ä¿¡æ¯ï¼Œç±»ä¼¼çš„å¯ä»¥ä½¿ç”¨OOTreeview * * æ–°ç‰ˆæœ¬æ”¹ç”¨OOResponseTyepçš„ç±»å‹è¿›è¡Œåˆ¤æ–­ */ public void processSave(OOTextView ootv) { //GTK.gtk_file_chooser_set_do_overwrite_confirmation(this.getId(), true); // TODO Auto-generated method stub System.out.println(\u0026quot;å·²è¿›å…¥save\u0026quot;); //SaveOneFile(filename,textview); OOResponseType ret = this.run(); //int ret = GTK.gtk_dialog_run(this.getId()); if(ret == OOResponseType.CANCEL) { this.destroy(); //GTK.gtk_widget_destroy(this.getId()); }else { String filename =this.getFileName() ; //ä¿å­˜æ–‡ä»¶ SaveOneFile(filename,ootv); System.out.println(filename); //GTK.gtk_widget_destroy(this.getId()); this.destroy(); } } public static void SaveOneFile(String filename, OOTextView ootv) { try ( OutputStream os = new FileOutputStream(filename); OutputStreamWriter osw = new OutputStreamWriter(os); BufferedWriter bw = new BufferedWriter(osw); ) { String temp= filename.substring(filename.lastIndexOf('\\\\')+1); System.out.println(temp); /*int textBuffer = GTK.gtk_text_view_get_buffer(textview); //è¿™æ˜¯ä¸€ä¸ªç©ºçš„iterï¼Œéœ€è¦ç”¨textBufferè¿›è¡Œèµ‹å€¼ int textIter = GTK.gtk_text_iter_new(); GTK.gtk_text_buffer_get_end_iter(textBuffer, textIter); // æˆ–è€…textviewçš„textBufferçš„æœ«å°¾ï¼ String tempText = GTK.gtk_text_buffer_get_text(textBuffer);*/ //while(tempText != null) // -1è¯»å–å®Œæ¯• { //InsertStringToTextViewFunction(textview,fileToFile.toString()); bw.write(ootv.getText()); bw.newLine(); // GTK.gtk_text_iter_backward_char(textIter); // tempText = GTK.gtk_text_buffer_get_text(textBuffer); } } catch(IOException e) { System.out.println(\u0026quot;æ–‡ä»¶è¯»å…¥å¼‚å¸¸\u0026quot;); } }  /* public abstract void processResponse1(); //ç”¨äºä¿å­˜ public abstract String[] processResponse(); //ç”¨äºæ‰“å¼€ */ /** * * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ5æ—¥ä¸‹åˆ5:07:17 * @version GTKEncapsulateFilter V1.0 */ class Filter extends OOWidget { public Filter() { setId(GTK.gtk_file_filter_new()); } /** * * @param text è®¾ç½®è¿‡æ»¤å™¨çš„åå­— */ public void setFilterName(String text) { GTK.gtk_file_filter_set_name(this.getId(), text); } /** * * @param pattern è®¾ç½®è¿‡æ»¤å™¨çš„è¿‡æ»¤ç±»å‹ */ public void addFilterPattern(String pattern) { GTK.gtk_file_filter_add_pattern(this.getId(), pattern); }\n }  } ```\né™„ä¸Š æœ€æ–°ç‰ˆæœ¬çš„å°è£…GTKçš„æºä»£ç ï¼š æ„Ÿå…´è¶£çš„é¹å‹ï¼Œå¯ä»¥ä¸‹è½½äº¤æµå“ˆã€‚ æœ€æ–°çš„æäº¤è®°å½•ï¼š1.ä¿®æ­£äº†OOToolButton ç¼ºå°‘setIdçš„ä¸€ä¸ªé‡å¤§bug 2.åŸå…ˆçš„OOFileChooserä¸ºæŠ½è±¡ç±»ï¼Œçœ‹èµ·æ¥ä¸çˆ½ï¼Œäºæ˜¯å†ç»™OOFileChooseré…ç½®äº†ä¸€ä¸ªæ¥å£å’Œä¸¤ä¸ªé»˜è®¤çš„å¤„ç†å‡½æ•° ä¸€ä¸ªç”¨äºæ‰“å¼€ä¸€ä¸ªç”¨äºå…³é—­ 3.ä¿®æ”¹äº†é¡¹ç›®æ–‡ä»¶ç›¸å…³çš„ TestXiaoBingWindow.java TestNewMenuFourStep.java\n4.åˆ©ç”¨OOResponseTyepçš„åˆ¤æ–­æ–¹å¼ä¿®æ”¹ä»£ç  åŸºæœ¬æµ‹è¯•é€šè¿‡ï¼ŒåŒæ—¶é¡ºä¾¿å¤ä¹ äº†å†…éƒ¨ç±»çš„æ¥å£ç±»çš„å®ç°å’Œåœ¨ä¸€ä¸ªç±»ä¸­æ·»åŠ æ¥å£çš„æ–¹å¼ã€‚ å…·ä½“å¯ä»¥å‚çœ‹æœ¬è´´ç¬¬ä¸€æ¬¡è®²è¿‡çš„å…³äºå†…éƒ¨ç±»å®ç°æ¥å£çš„é—®é¢˜åŒ…å«OODrawCallbackå’ŒOOTreeViewçš„åŒå‡»äº‹ä»¶çš„å†…éƒ¨ç±»çš„å®ç°ã€‚\n","date":1431327521,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327521,"objectID":"9d7c722a4f3b4087c85fb8572f8fbe05","permalink":"/blog/2015/05/11/2yue-4ri-javaban-gtk/","publishdate":"2015-05-11T14:58:41+08:00","relpermalink":"/blog/2015/05/11/2yue-4ri-javaban-gtk/","section":"archives","summary":"","tags":null,"title":"2æœˆ4æ—¥Javaç­GTK","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"é˜¶æ®µæ€§è€ƒè¯•ï¼ˆè€ƒè¯•6ä¸ªå°æ—¶ï¼Œè®²è¯„+é‡å†™6ä¸ªå°æ—¶ï¼‰ é¢˜ç›®1ï¼šç®€è¿°LinkedListå’ŒArrayListçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ é¢˜ç›®2ï¼šç®€è¿°Java ä¸­Setæœ‰å“ªå‡ ç§ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ é¢˜ç›®3ï¼šæœ‰å¦‚ä¸‹ä¸€ä¸ªç±»ï¼š\nclass Person { private int age; private String name; public void setAge(int age) { this.age = age; } public void setName(String name) { this.name = name; } public void sayHello() { System.out.println(\u0026quot;ä½ å¥½ï¼Œæˆ‘æ˜¯\u0026quot;+name+\u0026quot;ï¼Œæˆ‘\u0026quot;+age+\u0026quot;å²äº†\u0026quot;); } }  é‡‡ç”¨åå°„çš„æ–¹æ³•åˆ›å»ºPersonç±»çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”é€šè¿‡åå°„çš„æ–¹æ³•è°ƒç”¨setAgeã€setNameè¿›è¡Œèµ‹å€¼ï¼Œå¹¶ä¸”ç”¨åå°„çš„æ–¹æ³•è°ƒç”¨sayHelloæ–¹æ³•ã€‚ è®°å½•å®Œæˆæ‰€éœ€è¦çš„æ—¶é•¿ã€‚ é¢˜ç›®4ï¼šè¦æ±‚ç”¨æˆ·è¾“å…¥ä¸€ä¸ªemailåœ°å€ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥ç”¨æˆ·è¾“å…¥çš„æ˜¯å¦æ˜¯åˆæ³•çš„emailåœ°å€ï¼Œå¦‚æœæ˜¯åˆæ³•çš„emailåœ°å€ï¼Œåˆ™æŠŠç”¨æˆ·åå’ŒåŸŸååˆ†åˆ«è¾“å‡ºï¼Œæ¯”å¦‚ç”¨æˆ·è¾“å…¥yzk@rupeng.comï¼Œåˆ™è¾“å‡ºâ€œç”¨æˆ·åä¸ºyzkï¼ŒåŸŸåä¸ºrupeng.comâ€ï¼› è®°å½•å®Œæˆæ‰€éœ€è¦çš„æ—¶é•¿ã€‚ é¢˜ç›®5ï¼šåˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¡¨T_Studentsï¼ŒåŒ…å«Idï¼ˆä¸»é”®ï¼‰ã€Nameï¼ˆå§“åï¼‰ã€Numï¼ˆå­¦å·ï¼‰ä¸‰ä¸ªåˆ—ã€‚ç¼–å†™ä¸€ä¸ªSocketæœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨æ¥å—å¦‚ä¸‹çš„SocketæŒ‡ä»¤ï¼š å®¢æˆ·ç«¯å‘é€â€œ1|å­¦å·â€ï¼ˆæ¯”å¦‚\u0026rdquo;1|a001\u0026rdquo;ï¼‰ï¼Œä»£è¡¨å®¢æˆ·ç«¯è¦æŸ¥è¯¢æŒ‡å®šå­¦å·çš„å­¦ç”Ÿçš„å§“åï¼ŒæœåŠ¡å™¨ç«¯é€šè¿‡JDBCè¿æ¥æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ï¼Œå¦‚æœæ‰¾åˆ°äº†åˆ™è¿”å›\u0026rdquo;ok|å§“å\u0026rdquo;ï¼ˆæ¯”å¦‚\u0026rdquo;ok|å¼ ä¸‰\u0026rdquo;ï¼‰ï¼Œå¦‚æœæ²¡æ‰¾åˆ°åˆ™è¿”å›\u0026rdquo;error|notfound\u0026rdquo;ï¼Œå¦‚æœæœåŠ¡å™¨ç«¯æŸ¥è¯¢è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ç­‰åˆ™è¿”å›\u0026rdquo;error|servererror\u0026rdquo;ã€‚ å®¢æˆ·ç«¯å‘é€\u0026rdquo;2\u0026rdquo;ï¼Œåˆ™ä»£è¡¨å®¢æˆ·ç«¯è¦æŸ¥è¯¢å­¦ç”Ÿæ€»äººæ•°ï¼ŒæœåŠ¡å™¨ç«¯é€šè¿‡JDBCè¿æ¥æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢å­¦ç”Ÿæ€»äººæ•°ï¼Œå¹¶ä¸”è¿›è¡Œè¿”å›ï¼Œæ¯”å¦‚\u0026rdquo;ok|30\u0026rdquo;ï¼Œå¦‚æœæœåŠ¡å™¨ç«¯æŸ¥è¯¢è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ç­‰åˆ™è¿”å›\u0026rdquo;error|servererror\u0026rdquo;ã€‚ ç¼–å†™Socketå®¢æˆ·ç«¯å¯¹äºæœåŠ¡çš„ä¸¤ä¸ªæŒ‡ä»¤è¿›è¡Œæµ‹è¯•ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½ä½¿ç”¨æ§åˆ¶å°çª—å£å°±å¯ä»¥ï¼Œä¸ç”¨å›¾å½¢ç•Œé¢ã€‚ è®°å½•å®Œæˆæ‰€éœ€è¦çš„æ—¶é•¿ã€‚\nç¬¬ä¸€é¢˜ï¼š ArrayList æœ¬è´¨æ•°ç»„ï¼Œä¼˜ç‚¹ï¼š æ˜“äºè·å–ç¼ºç‚¹ï¼šä¸æ–¹ä¾¿æ’å…¥å’Œåˆ é™¤ã€‚ LinkedListæœ¬è´¨é“¾è¡¨ï¼Œä¼˜ç‚¹ï¼šæ˜“äºæ·»åŠ å’Œåˆ é™¤ã€‚ç¼ºç‚¹ï¼šä¸æ–¹ä¾¿è·å–ã€‚\nç¬¬äºŒé¢˜ï¼š Set:HashSet TreeSet LinkedHashSet HashSetçš„æœ¬è´¨æ˜¯é“¾è¡¨æ•°ç»„ï¼Œå®ç°åŸºäºHashMap,é€Ÿåº¦å¿« ä¼˜ç‚¹ï¼šæ·»åŠ å’Œåˆ é™¤æ•ˆç‡é«˜ ç¼ºç‚¹ï¼šè·å–æ…¢ï¼ˆéå†éƒ½ä¸€æ ·ï¼‰,åªèƒ½éå†ä¸€éï¼ŒSeté›†åˆæ— æ³•ç›´æ¥è·å–æŸä¸ªå…ƒç´  TreeSetï¼šäºŒå‰æ ‘ï¼Œæ³¨æ„æŸ¥çœ‹rootèŠ‚ç‚¹ï¼ˆè¿™æ˜¯äºŒå‰æ ‘ç»“æ„çš„æ ‡å¿—ï¼‰ TreeSetå…³é”®æ˜¯æ’åºï¼ï¼ˆä¸æ˜¯æ’å…¥ å’Œè·å–å…ƒç´ ï¼‰ ä¼˜ç‚¹ï¼šå¢åŠ å’Œåˆ é™¤ ç¼ºç‚¹ï¼šè·å– ä½†æ˜¯å¿…é¡»åŠ å…¥è®¡æ•°å™¨ä¹Ÿå°±æ˜¯å®ç°comparableæ¥å£ï¼Œæˆ–è€…new Comparator å…·ä½“å‚çœ‹ï¼šhttp://www.rupeng.com/forum/thread-44838-1-1.html\nLinkedHashSet:æ˜¯åŸºäºHashSetåªä¸è¿‡æ˜¯ä½¿å¾—æ’å…¥è·å¾—å­˜åœ¨é¡ºåº æœªåšæ·±å…¥ç ”ç©¶ ç¬¬ä¸‰é¢˜ï¼š Personç±»çš„è®¾è®¡ï¼š\n/** * è§£é‡Šï¼š */ package com.reflect.test; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ21æ—¥ä¸‹åˆ1:42:37 * @version com.reflect.testPerson1 V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class Person1 { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ private int age; private String name; public void setAge(int age) { this.age = age; } public void setName(String name) { this.name = name; } public void sayHello() { System.out.println(\u0026quot;ä½ å¥½ï¼Œæˆ‘æ˜¯\u0026quot;+name+\u0026quot;ï¼Œæˆ‘\u0026quot;+age+\u0026quot;å²äº†\u0026quot;); } }  æµ‹è¯•Personç±»ï¼š\n/** * è§£é‡Šï¼š * é‡‡ç”¨åå°„çš„æ–¹æ³•åˆ›å»ºPersonç±»çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”é€šè¿‡åå°„çš„æ–¹æ³•è°ƒç”¨setAgeã€setNameè¿›è¡Œèµ‹å€¼ï¼Œå¹¶ä¸”ç”¨åå°„çš„æ–¹æ³•è°ƒç”¨sayHelloæ–¹æ³•ã€‚ è®°å½•å®Œæˆæ‰€éœ€è¦çš„æ—¶é•¿ */ package com.reflect.test; import java.lang.reflect.*; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ21æ—¥ä¸‹åˆ1:43:08 * @version com.reflect.testTestPerson1Reflect V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestPerson1Reflect { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub Person1 p1 = new Person1(); Class testClass = p1.getClass(); try { Field nameField = testClass.getDeclaredField(\u0026quot;name\u0026quot;); Field ageField = testClass.getDeclaredField(\u0026quot;age\u0026quot;); nameField.setAccessible(true); ageField.setAccessible(true); nameField.set(p1, \u0026quot;å¼ ä¸‰\u0026quot;); ageField.set(p1, 32); System.out.println(\u0026quot;é€šè¿‡å¯¹è±¡è°ƒç”¨sayHelloæ–¹æ³•\u0026quot;); p1.sayHello(); Method helloSay = testClass.getDeclaredMethod(\u0026quot;sayHello\u0026quot;); System.out.println(\u0026quot;ç¬¬äºŒç§æ–¹æ³•æ‰“å°sayHello\u0026quot;); helloSay.invoke(p1); } catch (NoSuchFieldException | SecurityException | IllegalArgumentException | IllegalAccessException e) { // TODO Auto-generated catch block e.printStackTrace(); } catch (NoSuchMethodException e) { // TODO Auto-generated catch block e.printStackTrace(); } catch (InvocationTargetException e) { // TODO Auto-generated catch block e.printStackTrace(); } } }  ç¬¬å››é¢˜ï¼š\n/** * è§£é‡Šï¼š * é¢˜ç›®4ï¼šè¦æ±‚ç”¨æˆ·è¾“å…¥ä¸€ä¸ªemailåœ°å€ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥ç”¨æˆ·è¾“å…¥çš„ * æ˜¯å¦æ˜¯åˆæ³•çš„emailåœ°å€ï¼Œå¦‚æœæ˜¯åˆæ³•çš„emailåœ°å€ï¼Œåˆ™æŠŠç”¨æˆ·åå’ŒåŸŸå * åˆ†åˆ«è¾“å‡ºï¼Œæ¯”å¦‚ç”¨æˆ·è¾“å…¥yzk@rupeng.comï¼Œåˆ™è¾“å‡ºâ€œç”¨æˆ·åä¸ºyzkï¼Œ * åŸŸåä¸ºrupeng.comâ€ï¼› */ package TestRegex; import java.util.*; import java.util.regex.Matcher; import java.util.regex.Pattern; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ21æ—¥ä¸‹åˆ1:54:30 * @version TestRegexTestRegexExam V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestRegexExam { /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub Scanner sc = new Scanner(System.in); String temp = null; while(true) { System.out.println(\u0026quot;è¯·è¾“å…¥ä¸€ä¸ªé‚®ç®±åœ°å€,æ¯”å¦‚zhaoturkkey@163.com,é€€å‡ºæ•²exit|quit\u0026quot;); temp= sc.nextLine(); if(temp.equalsIgnoreCase(\u0026quot;exit\u0026quot;)||temp.equalsIgnoreCase(\u0026quot;quit\u0026quot;)) { break; } if(temp.matches(\u0026quot;@\u0026quot;)) { System.out.println(\u0026quot;ä½ è¾“å…¥çš„ä¸æ˜¯æ­£ç¡®çš„é‚®ç®±åœ°å€ï¼\u0026quot;); continue; } int countAddr = 0; Pattern p1 = Pattern.compile(\u0026quot;@\u0026quot;); Matcher mp = p1.matcher(temp); while(mp.find()) { countAddr++; } if(countAddr == 1) { String[] piles = temp.split(\u0026quot;@\u0026quot;); System.out.println(\u0026quot;ç”¨æˆ·åä¸º\u0026quot;+piles[0]+\u0026quot; åŸŸåä¸º\u0026quot;+piles[1]); }else { System.out.println(\u0026quot;ä½ è¾“å…¥çš„é‚®ç®±æœ‰å¤šä¸ª@\u0026quot;); } //matchesè¦æ±‚æ•´ä½“åŒ¹é…ï¼ System.out.println(\u0026quot;sdfas|fsdfs\u0026quot;.matches(\u0026quot;fsdfs\u0026quot;)); String likeType = \u0026quot;23\u0026quot;; String pattern = \u0026quot;[a-zA-Z0-9]*[\u0026quot; + likeType + \u0026quot;]{1}[a-zA-Z0-9]*\u0026quot;; String sourceStr = \u0026quot;adfjaslfj23ldfalsf\u0026quot;; System.out.println(sourceStr.matches(\u0026quot;.*\u0026quot;+likeType+\u0026quot;.*\u0026quot;)); } } }  ç»“æœï¼š\nè¯·è¾“å…¥ä¸€ä¸ªé‚®ç®±åœ°å€,æ¯”å¦‚zhaoturkkey@163.com,é€€å‡ºæ•²exit|quit zhaoturkkey@163.com ç”¨æˆ·åä¸ºzhaoturkkey åŸŸåä¸º163.com false true è¯·è¾“å…¥ä¸€ä¸ªé‚®ç®±åœ°å€,æ¯”å¦‚zhaoturkkey@163.com,é€€å‡ºæ•²exit|quit  ç¬¬äº”é¢˜ï¼š\né‡‡ç”¨ORMçš„å®ç° å…·ä½“æŸ¥çœ‹http://www.rupeng.com/forum/thread-44526-1-1.html æ»¡è¶³ORMçš„è®¾è®¡æ¡ä»¶ï¼š * çº¦æŸæ¡ä»¶ï¼šä¸»é”®å¿…é¡»ä¸ºIdï¼Œä¸”æ˜¯intç±»å‹ï¼Œè‡ªåŠ¨é€’å¢ * å­—æ®µåå¿…é¡»å’Œå±æ€§åä¸€æ · ä¹Ÿå°±æ˜¯ç±»çš„å±æ€§å’Œè¡¨çš„å­—æ®µä¿æŒä¸€è‡´ * è¡¨åå­—å’Œç±»çš„åå­—ä¸€æ · Studentè¡¨çš„è®¾è®¡ï¼š\ncreate table student( id int not null auto_increment primary key name varchar(20) not null default '', num varchar(20) not null default '');  Studentç±»çš„è®¾è®¡ï¼š\n/** * */ package com.introspect.test; /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ21æ—¥ä¸‹åˆ2:10:39 * @version com.introspect.testStudent V1.0 */ //æ®è¯´ä¸‹é¢æ˜¯ç¬¦åˆjavaBeansè®¾è®¡æ€æƒ³çš„æ™®é€šç±» public class Student { //å­—æ®µç§æœ‰åŒ– ï¼Œä½¿ç”¨BeansInfoå¿…é¡»æ˜¯ç”¨id name numè€Œä¸æ˜¯id name num /*private String id; private String name; private int num;*/ private int id; private String name; private String num; //æä¾›ä¸€ä¸ªæ— å‚çš„æ„é€ å‡½æ•° public Student() { } @Override public String toString() { StringBuilder studentInfo = new StringBuilder(); studentInfo.append(\u0026quot;å­¦ç”Ÿçš„idï¼š\u0026quot;).append(id).append(\u0026quot;,å§“å:\u0026quot;).append(name).append( \u0026quot;,å­¦å·æ˜¯:\u0026quot;).append(num); return studentInfo.toString(); } public int getid() { return id; } public void setid(int id) { this.id = id; } public String getname() { return name; } public void setname(String name) { this.name = name; } public String getnum() { return num; } public void setnum(String num) { this.num = num; } } ``` MyORMçš„ä¿®æ”¹ 1ï¼š ä¿®æ”¹selectçš„idå˜ä¸ºnumå³å¯ ä¿®æ”¹å¯¹åº”çš„ä»£ç æ®µ 2ï¼š é‡è½½selectæ–¹æ³• å˜æˆåªæ¥å—ä¸€ä¸ªclassçš„å‡½æ•°ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤º  java public static Object select(Class clazz) throws SQLException { int count = 0; //ç”¨äºæ•°æ®åº“è¡¨ String className = clazz.getSimpleName(); StringBuilder sbSQL = new StringBuilder();\n //ç¬¬ä¸€æ­¥ æ‹¼æ¥ insert sbSQL.append(\u0026quot;select count(*) tb from \u0026quot;).append(className); //è·å–åˆ° ResultSet ResultSet rs = JDBCUtils.executeQuery(sbSQL.toString()); while(rs.next()) { count = rs.getInt(\u0026quot;tb\u0026quot;); System.out.println(\u0026quot;æ€»å…±æœ‰\u0026quot;+count+\u0026quot;ä¸ªæ•°æ®\u0026quot;); } System.out.println(\u0026quot;æˆåŠŸ\u0026quot;); return count; //å…ˆéæ³›å‹ å†æ³›å‹çš„selectById }  æœ€ç»ˆçš„MyORMä»£ç å¦‚ä¸‹ï¼š  java /** * å¯¹è±¡ Student * mysqlè¡¨ Student *\n* ç±» è¡¨å¯¹åº”ï¼ é€šè¿‡å¯¹è±¡ä¼ é€’è¿›æ•°ç»„ï¼Œå¹¶åˆ©ç”¨å†…çœæœºåˆ¶ï¼Œè·å¾—ç±»ä¸­çš„æ‰€æœ‰å±æ€§ï¼ * å¹¶è·å¾—å…¶ä¸­çš„å€¼ï¼Œç„¶åç»„åˆæˆä¸ºä¸€ä¸ªsqlè¯­å¥ï¼Œå¹¶æ‰§è¡ŒJDBCUtils æ¥è¿›è¡Œ * å¢ã€åˆ ã€ä¿®æ”¹ã€æŸ¥ç­‰æ“ä½œ *\n* ç›®çš„ ï¼šå¯¹è±¡ \u0026ndash;mysqlè¡¨ è¿›è¡Œä¸€ä¸€å¯¹åº”å¹¶ä¸”å¯ä»¥è¿›è¡Œä¼ é€’ * ç®€å•çš„MyOrm.insert( * delete * select * update ç­‰ *\n* çº¦æŸæ¡ä»¶ï¼šä¸»é”®å¿…é¡»ä¸ºIdï¼Œä¸”æ˜¯intç±»å‹ï¼Œè‡ªåŠ¨é€’å¢ * å­—æ®µåå¿…é¡»å’Œå±æ€§åä¸€æ · ä¹Ÿå°±æ˜¯ç±»çš„å±æ€§å’Œè¡¨çš„å­—æ®µä¿æŒä¸€è‡´ * è¡¨åå­—å’Œç±»çš„åå­—ä¸€æ · */\npackage com.introspect.test; import com.jdbc.test.*;\nimport java.beans.BeanInfo; import java.beans.IntrospectionException; import java.beans.Introspector; import java.beans.PropertyDescriptor; import java.lang.reflect.InvocationTargetException; import java.lang.reflect.Method; import java.sql.ResultSet; import java.sql.SQLException; import java.util.*; //éœ€è¦å­˜å‚¨å­—æ®µçš„ list åŒæ—¶éœ€è¦å­˜å‚¨å€¼çš„list // æœ€åç»„è£…æˆä¸€æ¡mysqlè¯­å¥ /** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ4æ—¥ä¸‹åˆ8:57:46 * @version com.introspect.testMyORM V1.0 */ public class MyORM {\n /** * sql = insert into Person(fieldName) values(?,?..) * 1 2 3 4 * JDBCUTils.executeUpdate(sql,propValue) * @param args */ public static void insert(Object obj) throws SQLException { Class clazz = obj.getClass(); BeanInfo beanInfo = null; beanInfo = getBeanInfo(clazz); //ç”¨äºæ•°æ®åº“è¡¨ String className = clazz.getSimpleName(); PropertyDescriptor[] pro = beanInfo.getPropertyDescriptors(); List\u0026lt;String\u0026gt; listFieldName = new ArrayList\u0026lt;String\u0026gt;(); for(PropertyDescriptor temp:pro) { String propName = temp.getName(); if(!propName.equals(\u0026quot;id\u0026quot;) \u0026amp;\u0026amp; !propName.equals(\u0026quot;class\u0026quot;)) { //æ‰£é™¤ idå’Œclassè¿™ä¸¤ä¸ªå†…éƒ¨å­—æ®µ listFieldName.add(propName); } } StringBuilder sbSQL = new StringBuilder(); //ç¬¬ä¸€æ­¥ æ‹¼æ¥ insert sbSQL.append(\u0026quot;insert into \u0026quot;).append(className); //ç¬¬äºŒæ­¥ æ‹¼æ¥ å­—æ®µ String fieldNames = listFieldName.toString(); sbSQL.append(fieldNames.replace('[', '(').replace(']', ')')); //ç¬¬ä¸‰æ­¥ æ‹¼æ¥ å€¼ sbSQL.append(\u0026quot; values\u0026quot;); //ç¬¬å››æ­¥ æ‹¼æ¥ æ·»åŠ é—®å· char[] paramMarkArray = new char[listFieldName.size()]; for(int i = 0 ; i \u0026lt; listFieldName.size() ; i++) { paramMarkArray[i] = '?'; } sbSQL.append(Arrays.toString(paramMarkArray).replace('[', '(').replace (']', ')')); //æœ€åä¸€æ­¥ è°ƒç”¨JDBCUtilsçš„ executeUpdate List\u0026lt;Object\u0026gt; paramValues = new ArrayList\u0026lt;Object\u0026gt;(); for(String propName : listFieldName) { PropertyDescriptor propDesc = findPropertyDescriptor(propName, pro); Object propValue =null; //objä¼ å…¥çš„ç±»æˆ–è€…è¡¨åçš„å¯¹è±¡ propValue = invoke(propDesc, obj); paramValues.add(propValue); } //æœ€ç»ˆè¿‡ç¨‹ toString toArrayçš„è½¬æ¢ JDBCUtils.executeUpdate(sbSQL.toString(), paramValues.toArray()); } /** * * @param clazz * @return è¿”å›ä¸€ä¸ªbeanInfoå¯¹è±¡ */ private static BeanInfo getBeanInfo(Class clazz) { BeanInfo beanInfo = null; try { beanInfo = Introspector.getBeanInfo(clazz); }catch(IntrospectionException e) { throw new RuntimeException(\u0026quot;å†…çœå‡ºé”™ï¼\u0026quot;+e.getMessage()); } return beanInfo; } /** * ä»propDescä¸­æ‰¾åå­—ä¸ºpropNameçš„PropertyDescriptor * @param propName * @param prop * @return */ private static PropertyDescriptor findPropertyDescriptor(String propName, PropertyDescriptor[] prop) { for(PropertyDescriptor temp : prop) { if(temp.getName().equals(propName)) { return temp; } } return null; } /** * æ‰§è¡ŒæŸä¸ªå­—æ®µçš„è¯»æ–¹æ³• å¹¶è¿”å› propValue * @param propDesc * @param obj * @return */ private static Object invoke(PropertyDescriptor propDesc,Object obj) { Object propValue = null; try { propValue = propDesc.getReadMethod().invoke(obj); } catch (IllegalAccessException | IllegalArgumentException | InvocationTargetException e) { // TODO Auto-generated catch block throw new RuntimeException(\u0026quot;è·å–\u0026quot;+propDesc.getName()+\u0026quot;é”™è¯¯\u0026quot;); } return propValue; } //------------------------insert ç¨‹åº ç»“æŸ---------------- /** * delete from className where id = ? * * * åˆ é™¤clazzå¯¹åº”è¡¨ä¸­çš„å­—æ®µidä¸ºidçš„å€¼ delete(Person.class,5); * @param clazz * @param id */ public static void delete(Class clazz, int id) throws SQLException { BeanInfo beanInfo = null; beanInfo = getBeanInfo(clazz); //ç”¨äºæ•°æ®åº“è¡¨ String className = clazz.getSimpleName(); PropertyDescriptor[] pro = beanInfo.getPropertyDescriptors(); List\u0026lt;String\u0026gt; listFieldName = new ArrayList\u0026lt;String\u0026gt;(); StringBuilder sbSQL = new StringBuilder(); //ç¬¬ä¸€æ­¥ æ‹¼æ¥ insert sbSQL.append(\u0026quot;delete from \u0026quot;).append(className).append(\u0026quot; where id = ?\u0026quot;); JDBCUtils.executeUpdate(sbSQL.toString(), id); } /** * select * from Person where id = 2; * * è·å–clazzå¯¹åº”è¡¨ä¸­idä¸ºå­—æ®µä¸ºidçš„å¯¹åº”èˆªçš„ å¹¶ä¸”å¡«å……åˆ°å¯¹è±¡ä¸­ * Person p1 = (Person)select(Person.class,2) * p1.getName(), p1.getAge(); * @param clazz * @param id * @return */ //----------------------delete ç¨‹åºç»“æŸ-------------------- public static Object select(Class clazz,String num) throws SQLException { Object b1 = null; b1 = getInstance(clazz); BeanInfo beanInfo = null; beanInfo = getBeanInfo(clazz); //ç”¨äºæ•°æ®åº“è¡¨ String className = clazz.getSimpleName(); PropertyDescriptor[] pro = beanInfo.getPropertyDescriptors(); List\u0026lt;String\u0026gt; listFieldName = new ArrayList\u0026lt;String\u0026gt;(); for(PropertyDescriptor temp:pro) { String propName = temp.getName(); if(!propName.equals(\u0026quot;id\u0026quot;) \u0026amp;\u0026amp; !propName.equals(\u0026quot;class\u0026quot;)) { //æ‰£é™¤ idå’Œclassè¿™ä¸¤ä¸ªå†…éƒ¨å­—æ®µ listFieldName.add(propName); } } StringBuilder sbSQL = new StringBuilder(); //ç¬¬ä¸€æ­¥ æ‹¼æ¥ insert sbSQL.append(\u0026quot;select * from \u0026quot;).append(className).append(\u0026quot; where num = ?\u0026quot;); //è·å–åˆ° ResultSet ResultSet rs = JDBCUtils.executeQuery(sbSQL.toString(), num); if(!rs.next()) { System.out.println(\u0026quot;å½“å‰ç‰ˆæœ¬æ²¡æœ‰\u0026quot;+num+\u0026quot;çš„ä¿¡æ¯\u0026quot;);  // return; }else { System.out.println(\u0026ldquo;å½“å‰ç‰ˆæœ¬æœ‰\u0026rdquo;+num+\u0026ldquo;çš„ä¿¡æ¯\u0026rdquo;); for(String propName : listFieldName) { PropertyDescriptor propDesc = findPropertyDescriptor(propName, pro); //objä¼ å…¥çš„ç±»æˆ–è€…è¡¨åçš„å¯¹è±¡ invoke(propDesc, b1,rs.getObject(propName)); //invoke(propDesc, b1,rs.getString(propName)); } } //è®¾ç½®numå­—æ®µ PropertyDescriptor propDesc1 = findPropertyDescriptor(\u0026ldquo;num\u0026rdquo;, pro); invoke(propDesc1, b1,num); System.out.println(\u0026ldquo;æˆåŠŸ\u0026rdquo;); return b1;\n //å…ˆéæ³›å‹ å†æ³›å‹çš„selectById } public static Object select(Class clazz) throws SQLException { int count = 0; //ç”¨äºæ•°æ®åº“è¡¨ String className = clazz.getSimpleName(); StringBuilder sbSQL = new StringBuilder(); //ç¬¬ä¸€æ­¥ æ‹¼æ¥ insert sbSQL.append(\u0026quot;select count(*) tb from \u0026quot;).append(className); //è·å–åˆ° ResultSet ResultSet rs = JDBCUtils.executeQuery(sbSQL.toString()); while(rs.next()) { count = rs.getInt(\u0026quot;tb\u0026quot;); System.out.println(\u0026quot;æ€»å…±æœ‰\u0026quot;+count+\u0026quot;ä¸ªæ•°æ®\u0026quot;); } System.out.println(\u0026quot;æˆåŠŸ\u0026quot;); return count; //å…ˆéæ³›å‹ å†æ³›å‹çš„selectById } private static Object getInstance(Class clazz) { Object b1 = null; try { b1 = clazz.newInstance(); } catch (InstantiationException | IllegalAccessException e) { // TODO Auto-generated catch block e.printStackTrace(); } return b1; } //private static void invoke(PropertyDescriptor propDesc,Object obj,String value) private static void invoke(PropertyDescriptor propDesc,Object obj,Object value) { //æœ‰é—®é¢˜ å› ä¸º /*try { propDesc.getWriteMethod().invoke(obj,value); } catch (IllegalAccessException | IllegalArgumentException | InvocationTargetException e) { // TODO Auto-generated catch block throw new RuntimeException(\u0026quot;è·å–\u0026quot;+propDesc.getName()+\u0026quot;é”™è¯¯\u0026quot;); } */ try { Method methodSet= propDesc.getWriteMethod(); if(methodSet !=null) { methodSet.invoke(obj,value); } } catch (IllegalAccessException | IllegalArgumentException | InvocationTargetException e) { // TODO Auto-generated catch block throw new RuntimeException(\u0026quot;è·å–\u0026quot;+propDesc.getName()+\u0026quot;é”™è¯¯\u0026quot;); } } //------------------select ç»“æŸ------------------ // update Person set age='' where id=4; /** * è®¾ç½®id= idçš„å¯¹è±¡ ï¼Œ ä»–çš„å¹´é¾„ä¸ºã€‚ã€‚ã€‚ ä¹Ÿå¯ä»¥åå­— ï¼Œå…·ä½“ä¿®æ”¹update è¯­å¥ * @param clazz * @param newValue è®¾ç½®å¹´é¾„çš„æ–°å€¼ * @param id è®¾ç½®æŸä¸ªid * @throws SQLException */ public static void update(Class clazz,Object newValue,int id) throws SQLException { BeanInfo beanInfo = null; beanInfo = getBeanInfo(clazz); //ç”¨äºæ•°æ®åº“è¡¨ String className = clazz.getSimpleName(); PropertyDescriptor[] pro = beanInfo.getPropertyDescriptors(); List\u0026lt;String\u0026gt; listFieldName = new ArrayList\u0026lt;String\u0026gt;(); for(PropertyDescriptor temp:pro) { String propName = temp.getName(); if(!propName.equals(\u0026quot;id\u0026quot;) \u0026amp;\u0026amp; !propName.equals(\u0026quot;class\u0026quot;)) { //æ‰£é™¤ idå’Œclassè¿™ä¸¤ä¸ªå†…éƒ¨å­—æ®µ listFieldName.add(propName); } } StringBuilder sbSQL = new StringBuilder(); //ç¬¬ä¸€æ­¥ æ‹¼æ¥ insert //å¯ä»¥è®¾ç½® update é‚£ä¸ªå­—ç¬¦ä¸² æ¯”å¦‚ String temp = \u0026quot;age\u0026quot; sbSQL.append(\u0026quot;update \u0026quot;).append(className).append(\u0026quot; set age = \u0026quot;).append(newValue).append(\u0026quot;\u0026quot; + \u0026quot; where id = ?\u0026quot;); JDBCUtils.executeUpdate(sbSQL.toString(), id); }  }\n å…³äºJDBCUtilsçš„ç‰‡æ®µï¼šè¯·å‚è€ƒhttp://www.rupeng.com/forum/thread-44526-1-1.html æµ‹è¯•æ–°ç‰ˆæœ¬MyORMçš„æœ‰æ•ˆæ€§  java /** * è§£é‡Šï¼š */ package com.introspect.test;\nimport java.sql.SQLException;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ21æ—¥ä¸‹åˆ2:21:40 * @version com.introspect.testFifthExam V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class FifthExam {\n /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub Student s1 = new Student(); //æ’å…¥æ•°æ®  /* s1.setname(\u0026ldquo;zhaoliang\u0026rdquo;); s1.setnum(\u0026ldquo;a001\u0026rdquo;);/ / s1.setname(\u0026ldquo;xinran\u0026rdquo;); s1.setnum(\u0026ldquo;a002\u0026rdquo;);/ / s1.setname(\u0026ldquo;liming\u0026rdquo;); s1.setnum(\u0026ldquo;a003\u0026rdquo;);*/ s1.setname(\u0026ldquo;wanglei\u0026rdquo;); s1.setnum(\u0026ldquo;a004\u0026rdquo;); try { //æ’å…¥æ•°æ®éƒ¨åˆ† //MyORM.insert(s1); //æµ‹è¯•æŸ¥è¯¢ç¬¬ä¸€éƒ¨åˆ† System.out.println(MyORM.select(Student.class));\n //æµ‹è¯•æŸ¥è¯¢ç¬¬äºŒéƒ¨åˆ† //s1= (Student)MyORM.select(Student.class,\u0026quot;a001\u0026quot;); //s1= (Student)MyORM.select(Student.class,\u0026quot;a002\u0026quot;); System.out.println(s1.toString()); } catch (SQLException e) { // TODO Auto-generated catch block e.printStackTrace(); } }  }\nç»“æœå¾ˆå¥½ï¼Œå¹¶æ’å…¥æ•°æ®åˆ°äº†è¡¨ä¸­ ç´§æ¥ç€è¿›è¡Œç½‘ç»œç¼–ç¨‹ Serverç«¯å’ŒClientæ®µï¼Œå‚è€ƒäº†æˆ‘çš„å¤ä¹ ç¬”è®°çš„http://www.rupeng.com/forum/thread-44838-1-1.htmlç½‘ç»œç¼–ç¨‹éƒ¨åˆ† ï¼Œé’ˆå¯¹Serverçš„ä¸»è¦ä¿®æ”¹éƒ¨åˆ†æ˜¯ServerRead, ä»å®¢æˆ·ç«¯è¯»å–çš„å­—ç¬¦ä¸²ï¼Œéœ€è¦è¿›è¡Œä¸¤ä¸ªåˆ¤æ–­ 1ï¼š 1|a001 å¦‚ä½•æ˜¯è¿™ç§æƒ…å†µ åˆ™ä½¿ç”¨MyORM.select(Student.class,num) 2: 2 å¦‚æœè¾“å…¥çš„æ˜¯ä¸€ä¸ª2,åˆ™ä½¿ç”¨ MyORM.select(Student.class)è¿”å›æ€»å…±çš„å­¦ç”Ÿæ•° ï¼ŒServerç«¯ä»£ç å¦‚ä¸‹ï¼š  java /** * è§£é‡Šï¼š */ package com.introspect.test;\nimport java.awt.BorderLayout; import java.awt.Button; import java.awt.Font; import java.awt.Frame; import java.awt.Panel; import java.awt.TextArea; import java.awt.TextField; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.awt.event.WindowAdapter; import java.awt.event.WindowEvent; import java.io.DataInputStream; import java.io.DataOutputStream; import java.net.ServerSocket; import java.net.Socket;\nimport javax.swing.JOptionPane; import javax.swing.UIManager;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ21æ—¥ä¸‹åˆ2:56:04 * @version com.introspect.testTestExamServer V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestExamServer {\n /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub // TODO Auto-generated method stub Font font = new Font(\u0026quot;Dialog\u0026quot;, Font.PLAIN, 12); //ä¸€ä¸‹æ˜¯æ”¹å˜é»˜è®¤çš„ç»„å»ºä¸Šæ˜¾ç¤ºçš„å­—ä½“ï¼Œè¿™æ ·æ›´åŠ ç¾è§‚ä¸€äº› UIManager.put(\u0026quot;MenuBar.font\u0026quot;, font); UIManager.put(\u0026quot;MenuItem.font\u0026quot;, font); UIManager.put(\u0026quot;Menu.font\u0026quot;, font); UIManager.put(\u0026quot;PopupMenu.font\u0026quot;, font); UIManager.put(\u0026quot;ToolBar.font\u0026quot;, font); UIManager.put(\u0026quot;ToolTip.font\u0026quot;, font); UIManager.put(\u0026quot;TabbedPane.font\u0026quot;, font); UIManager.put(\u0026quot;Label.font\u0026quot;, font); UIManager.put(\u0026quot;List.font\u0026quot;, font); UIManager.put(\u0026quot;ComboBox.font\u0026quot;, font); UIManager.put(\u0026quot;Button.font\u0026quot;, font); UIManager.put(\u0026quot;Table.font\u0026quot;, font); UIManager.put(\u0026quot;TableHeader.font\u0026quot;, font); UIManager.put(\u0026quot;Tree.font\u0026quot;, font); UIManager.put(\u0026quot;TextField.font\u0026quot;, font); UIManager.put(\u0026quot;TextArea.font\u0026quot;, font); UIManager.put(\u0026quot;TitledBorder.font\u0026quot;, font); UIManager.put(\u0026quot;OptionPane.font\u0026quot;, font); UIManager.put(\u0026quot;RadioButton.font\u0026quot;, font); UIManager.put(\u0026quot;CheckBox.font\u0026quot;, font); UIManager.put(\u0026quot;ToggleButton.font\u0026quot;, font); UIManager.put(\u0026quot;Dialog.font\u0026quot;, font); UIManager.put(\u0026quot;Panel.font\u0026quot;, font); new TCPServer().launch(); }  }\nclass TCPServer { // class variables // class variables // connect private ServerSocket ss = null; private Socket s = null; // data flow private DataOutputStream dos = null; private DataInputStream dis = null; // UI private Frame f = null; private TextArea ta = null; private TextField tf = null; private Button bn = null;\n public void launch() { createUI(); connect(); new ServerRead().start(); new ServerWrite().start(); } // construct member /* public TCPServer() { } */ public void createUI() { Frame f = new Frame(\u0026quot;æœåŠ¡å™¨\u0026quot;); ta = new TextArea(); tf = new TextField(); Panel p = new Panel(new BorderLayout()); bn = new Button(\u0026quot;å‘é€\u0026quot;); p.add(tf,BorderLayout.CENTER); p.add(bn,BorderLayout.EAST); f.add(ta,BorderLayout.CENTER); f.add(p,BorderLayout.SOUTH); f.setSize(400,200); f.setVisible(true); //f.setVisable(true); f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } }); } public void connect() { try{ ss = new ServerSocket(5599); s = ss.accept(); dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); }catch(Exception e) { System.exit(0); } } public void close() { try{ dis.close(); dos.close(); ss.close(); s.close(); }catch(Exception e) { System.exit(0); } } class ServerRead extends Thread { public void run() { while(true) { try{ String str = dis.readUTF(); // System.out.println(\u0026quot;å¯¹æ–¹è¯´:\u0026quot;+str); ta.append(\u0026quot;å®¢æˆ·ç«¯è¯´ï¼š\u0026quot;+str+\u0026quot;\\n\u0026quot;); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } if(str.matches(\u0026quot;.*\\\\|.*\u0026quot;)) { System.out.println(\u0026quot;çš„ç¡®å­˜åœ¨\u0026quot;); String[] piles = str.split(\u0026quot;[|]\u0026quot;); Student s1 = (Student)MyORM.select(Student.class, piles[1]); ta.append(\u0026quot;strçš„å§“åæ˜¯:\u0026quot;+s1.getname()); } if(str.matches(\u0026quot;2\u0026quot;)) { ta.append(\u0026quot;æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯è¯´ï¼šæ€»å…±æœ‰\u0026quot;+MyORM.select(Student.class)+\u0026quot;ä¸ªå­¦ç”Ÿ\\n\u0026quot;); } }catch(Exception e) { JOptionPane.showMessageDialog(f,\u0026quot;å®¢æˆ·ç«¯å·²ç¦»å¼€\u0026quot;); return; // e.printStackTrace(); } } } } class ServerWrite extends Thread { public void run() { tf.addActionListener(new TCPServerListener()); bn.addActionListener(new TCPServerListener()); } } class TCPServerListener implements ActionListener { @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); tf.setText(\u0026quot;\u0026quot;); ta.append(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } }  }\nClientç«¯ä»£ç å¦‚ä¸‹ï¼š  java /** * è§£é‡Šï¼š */ package com.introspect.test;\nimport java.awt.BorderLayout; import java.awt.Button; import java.awt.Font; import java.awt.Frame; import java.awt.Panel; import java.awt.TextArea; import java.awt.TextField; import java.awt.event.ActionEvent; import java.awt.event.ActionListener; import java.awt.event.WindowAdapter; import java.awt.event.WindowEvent; import java.io.DataInputStream; import java.io.DataOutputStream; import java.net.Socket;\nimport javax.swing.JOptionPane; import javax.swing.UIManager;\n/** * @author å¶æ˜­è‰¯ * @time 2015å¹´3æœˆ21æ—¥ä¸‹åˆ2:56:17 * @version com.introspect.testTestExamClient V1.0 * åŠŸèƒ½ï¼š æ­¥éª¤ï¼š * æ³¨æ„ï¼š * æŒæ¡ï¼š æ€è€ƒï¼š * å›é¡¾ï¼š */ public class TestExamClient {\n /** * @param args * åŸå› ï¼š * è§£å†³ï¼š * åŠŸèƒ½ï¼š * æ€è€ƒï¼š * æ­¥éª¤ï¼š */ public static void main(String[] args) { // TODO Auto-generated method stub Font font = new Font(\u0026quot;Dialog\u0026quot;, Font.PLAIN, 12); //ä¸€ä¸‹æ˜¯æ”¹å˜é»˜è®¤çš„ç»„å»ºä¸Šæ˜¾ç¤ºçš„å­—ä½“ï¼Œè¿™æ ·æ›´åŠ ç¾è§‚ä¸€äº› UIManager.put(\u0026quot;MenuBar.font\u0026quot;, font); UIManager.put(\u0026quot;MenuItem.font\u0026quot;, font); UIManager.put(\u0026quot;Menu.font\u0026quot;, font); UIManager.put(\u0026quot;PopupMenu.font\u0026quot;, font); UIManager.put(\u0026quot;ToolBar.font\u0026quot;, font); UIManager.put(\u0026quot;ToolTip.font\u0026quot;, font); UIManager.put(\u0026quot;TabbedPane.font\u0026quot;, font); UIManager.put(\u0026quot;Label.font\u0026quot;, font); UIManager.put(\u0026quot;List.font\u0026quot;, font); UIManager.put(\u0026quot;ComboBox.font\u0026quot;, font); UIManager.put(\u0026quot;Button.font\u0026quot;, font); UIManager.put(\u0026quot;Table.font\u0026quot;, font); UIManager.put(\u0026quot;TableHeader.font\u0026quot;, font); UIManager.put(\u0026quot;Tree.font\u0026quot;, font); UIManager.put(\u0026quot;TextField.font\u0026quot;, font); UIManager.put(\u0026quot;TextArea.font\u0026quot;, font); UIManager.put(\u0026quot;TitledBorder.font\u0026quot;, font); UIManager.put(\u0026quot;OptionPane.font\u0026quot;, font); UIManager.put(\u0026quot;RadioButton.font\u0026quot;, font); UIManager.put(\u0026quot;CheckBox.font\u0026quot;, font); UIManager.put(\u0026quot;ToggleButton.font\u0026quot;, font); UIManager.put(\u0026quot;Dialog.font\u0026quot;, font); UIManager.put(\u0026quot;Panel.font\u0026quot;, font); new TCPClient().launch(); }  }\nclass TCPClient { // class variables // class variables // connect private Socket s = null; // data flow private DataOutputStream dos = null; private DataInputStream dis = null; // UI private Frame f = null; private TextArea ta = null; private TextField tf = null; private Button bn = null;\n public void launch() { createUI(); connect(); new ClientRead().start(); new ClientWrite().start(); } // construct member /* public TCPClient() { } */ public void createUI() { Frame f = new Frame(\u0026quot;å®¢æˆ·ç«¯\u0026quot;); ta = new TextArea(); tf = new TextField(); Panel p = new Panel(new BorderLayout()); bn = new Button(\u0026quot;å‘é€\u0026quot;); p.add(tf,BorderLayout.CENTER); p.add(bn,BorderLayout.EAST); f.add(ta,BorderLayout.CENTER); f.add(p,BorderLayout.SOUTH); f.setSize(400,200); f.setVisible(true); //f.setVisable(true); f.addWindowListener(new WindowAdapter() { public void windowClosing(WindowEvent e) { System.exit(0); } }); } public void connect() { try{ s = new Socket(\u0026quot;127.0.0.1\u0026quot;,5599); dis = new DataInputStream(s.getInputStream()); dos = new DataOutputStream(s.getOutputStream()); }catch(Exception e) { System.exit(0); } } public void close() { try{ dis.close(); dos.close(); s.close(); }catch(Exception e) { System.exit(0); } } class ClientRead extends Thread { public void run() { while(true) { try{ String str = dis.readUTF(); // System.out.println(\u0026quot;å¯¹æ–¹è¯´:\u0026quot;+str); ta.append(\u0026quot;æœåŠ¡å™¨è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } }catch(Exception e) { JOptionPane.showMessageDialog(f,\u0026quot;å®¢æˆ·ç«¯å·²ç¦»å¼€\u0026quot;); return; // e.printStackTrace(); } } } } class ClientWrite extends Thread { public void run() { tf.addActionListener(new TCPClientListener()); bn.addActionListener(new TCPClientListener()); } } class TCPClientListener implements ActionListener { @Override public void actionPerformed(ActionEvent e) { try{ String str = tf.getText(); tf.setText(\u0026quot;\u0026quot;); ta.append(\u0026quot;å®¢æˆ·ç«¯è¯´:\u0026quot;+str+\u0026quot;\\n\u0026quot;); dos.writeUTF(str); if(str.equalsIgnoreCase(\u0026quot;å†è§\u0026quot;)) { close(); System.exit(0); } }catch(Exception e1) { // e.printStackTrace(); System.exit(0); } } }  }\n``` ","date":1431327521,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327521,"objectID":"4b9f3dc4834009945ce5788373c2c914","permalink":"/blog/2015/05/11/3yue-21ri-javazhou-mo-ban-shi-ti-shou-ji/","publishdate":"2015-05-11T14:58:41+08:00","relpermalink":"/blog/2015/05/11/3yue-21ri-javazhou-mo-ban-shi-ti-shou-ji/","section":"archives","summary":"","tags":null,"title":"3æœˆ21æ—¥Javaå‘¨æœ«ç­è¯•é¢˜æ”¶é›†","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"ä¸€ã€IOåŸºç¡€ 1.Fileåœ¨Javaä¸­ï¼Œæ—¢å¯ä»¥è¡¨ç¤ºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºç›®å½•ã€‚å¯ä»¥é€šè¿‡Fileå¯¹è±¡æ¥åˆ¤å®šæ–‡ä»¶æ˜¯å¦å¯è¯»ï¼Œå¯å†™ï¼Œå­˜åœ¨ç­‰ã€‚ 2.Fileå¯¹è±¡çš„mkdirs()æ¨èä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ­¤æ–¹æ³•å¯ä»¥åˆ›å»ºå¤šå±‚æ¬¡çš„ç›®å½•ã€‚è€Œmkdir()åªèƒ½ä¸€å±‚ä¸€å±‚åˆ›å»ºã€‚ 3.Fileçš„createNewfile()æ˜¯åˆ›å»ºçš„æ–‡ä»¶ã€‚ 4.Fileçš„delete()åˆ é™¤çš„Fileçš„æ„é€ å‡½æ•°Stringçš„é‚£æœ€åçš„ä¸€çº§ï¼Œå¦‚æœæ˜¯æ–‡ä»¶ï¼Œå¯ä»¥åˆ é™¤ã€‚å¦‚æœæ˜¯ç›®å½•ï¼Œéœ€è¦è¿™ä¸ªç›®å½•æ˜¯ç©ºçš„æ‰èƒ½å¤Ÿåˆ é™¤ã€‚ 5.Fileçš„listFiles()è¿”å›çš„æ˜¯Fileæ„é€ å‡½æ•°æŒ‡å®šè·¯å¾„ä¸‹çš„æ‰€æœ‰Fileå¯¹è±¡ï¼ŒåŒ…æ‹¬äº†ç›®å½•ï¼Œä¹ŸåŒ…æ‹¬äº†æ–‡ä»¶ã€‚ 6.Fileçš„é™æ€æ–¹æ³•ï¼ŒlistRoots()å¯ä»¥è·å–æ‰€æœ‰çš„ç›˜ç¬¦ã€‚ 7.OutputStreamå’ŒInputStreaméƒ½æ˜¯å­—èŠ‚æµã€‚ 8.ä»¥åå¯¹äºæµçš„å…³é—­ç­‰æ“ä½œï¼Œè¿˜æ˜¯ä½¿ç”¨JDK1.6çš„å½¢å¼ã€‚1.7çš„æ€•ä»¥åå…¬å¸ä¸ç”¨ã€‚ 9.NullPointerExceptionæ˜¯ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ 10.å½“é€šè¿‡InputStreamçš„read()æ–¹æ³•è¯»å–å€¼çš„æ—¶å€™ä»–æ˜¯ä¸€ä¸ªbyteä¸€ä¸ªbyteçš„è¯»å–çš„ï¼Œæ‰€ä»¥å¯¹äºæ±‰å­—è¯»å–ä¼šå‡ºç°ä¹±ç ã€‚ 11.javaä¸­æ•°å­—æ˜¯1ä¸ªbyteï¼Œæ±‰å­—å’Œæ±‰å­—æ ‡ç‚¹æ˜¯2ä¸ªbyteã€‚ 12.å¯ä»¥é€šè¿‡System.currentTimMillis()æ¥è·å–1970å¹´1æœˆ1æ—¥åˆ°ç°åœ¨çš„æ¯«ç§’æ•°ã€‚ 13.åœ¨Javaä¸­ï¼Œå­—èŠ‚æµçš„è¯»å–æ¨èä½¿ç”¨readæ–¹æ³•ï¼Œå¯¹äºreadæ–¹æ³•ï¼Œæ˜¯æŠŠä¸€ä¸ªæµçš„å†…å®¹è¯»å–åˆ°byte[] è¿™ç§ç¼“å†²åŒºä¸­ã€‚ä¸”å¦‚æœè¯»å–åˆ°äº†æœ€åï¼Œè¿”å›å€¼æ˜¯-1.C#æ˜¯0.æ‰€ä»¥å¦‚æœä½¿ç”¨do-whileéœ€è¦åˆ¤å®šä¸‹ï¼ 14.ç¼“å†²åŒºä¹Ÿä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼ä¸€èˆ¬æ¥è¯´1Må°±å¤Ÿäº†ï¼1024*1024 15.closeableä¸ºå“ªäº›å¯ä»¥å…³é—­æµçš„æ¥å£ã€‚æ‰€ä»¥å°è£…finallyä¸­çš„closeæ–¹æ³•çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨closeableçš„å¤šæ€æ¥è¡¨ç¤ºå®Œæˆã€‚ 16.å¯¹äºoutputæµï¼Œä¸ç”¨å†™åˆ›å»ºä¸€ä¸ªFileã€‚ä¼šè‡ªåŠ¨è¦†ç›–ã€‚ 17.å¯¹äºInputStreamæ¯æ¬¡è¯»å–çš„æ˜¯ä¸€ä¸ªbyteï¼Œå°±æ˜¯ä¸€ä¸ªbyteä¸€ä¸ªbyteçš„è¯»ï¼Œæœ¬è´¨æ¥è¯´ï¼Œå…¶å®æ˜¯éå¸¸è´¹æ—¶é—´çš„ã€‚ 18.FileInputStreamåœ¨readåˆ°æœ€åè¿”å›å€¼æ˜¯-1.å¦‚æœä¸æ˜¯-1çš„è¯ï¼Œé‚£ä¹ˆè¿”å›å€¼ä¸ºintã€‚intä»£è¡¨çš„æ˜¯ASCII(?)çš„charã€‚æ‰€ä»¥å¼ºåˆ¶è½¬æˆcharå°±å¯ä»¥è·å–æ±‰å­—ã€‚ 19.InputStreamåœ¨è¯»å–æ±‰å­—çš„æ—¶å€™ï¼Œå†…éƒ¨æ˜¯åœ¨åšåˆ¤å®šçš„ï¼Œæœ¬è´¨æ¥è¯´ä»–ä¹Ÿæ˜¯ä¸€ä¸ªbyteä¸€ä¸ªbyteçš„åœ¨è¯»ï¼Œä½†æ˜¯æ²¡è¯»å–ä¸€ä¸ªbyteï¼Œä»–ä¼šåˆ¤å®šæ˜¯å¦æ˜¯ä¸­æ–‡ç‰¹å¾ç ï¼Œå¦‚æœæ˜¯é‚£ä¹ˆä¼šåœ¨è¯»ä¸‹ä¸€ä¸ªbyteã€‚åˆèµ·æ¥è¿”å›ä¸€ä¸ªcharã€‚ 20.ä¸ºäº†è§„é¿ä¹±ç é—®é¢˜ï¼Œç”¨ä»€ä¹ˆç¼–ç æ¥å†™ï¼Œå°±ç”¨ä»€ä¹ˆç¼–ç æ¥è¯»ã€‚ 21.ANSIç¼–ç ä¸æ˜¯ä¸€ç§çœŸæ­£æ„ä¹‰ä¸Šçš„ç¼–ç ï¼Œè€Œæ˜¯æ ¹æ®ä¸åŒçš„æ“ä½œç³»ç»Ÿæ¥è®¾å®šä¸åŒçš„ç¼–ç ã€‚å°±æ˜¯defaultç¼–ç ã€‚ 22.å…³äºå­—ç¬¦ä¸²ç¼–ç çš„è®¾ç½®æ˜¯åœ¨InputStreamReaderæˆ–è€…OutputStreamWriterä¸­ã€‚ 23.åœ¨å…³é—­æµçš„æ—¶å€™ï¼Œæ¨èä»å¤–åˆ°å†…ä¾æ¬¡å…³é—­ã€‚ 24.BufferedReaderè¯»å–åˆ°æœ€åï¼Œè¿”å›æ—¶æ˜¯nullã€‚ 25.è·å–é»˜è®¤ç¼–ç çš„2ä¸ªæ–¹æ³• System.getProperty(\u0026ldquo;file.encoding\u0026rdquo;) è¿˜æœ‰ä¸€ä¸ªæ˜¯ Charset.defaultCharset().toString()\n æ–‡ä»¶å¤¹çš„éå† å¯ä»¥é€šè¿‡listFiles(), å¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œåˆ™é€’å½’è°ƒç”¨è¯¥å®šä¹‰æ–¹æ³• 27.BufferedReader éœ€è¦ä¸€ä¸ªReaderå¯¹è±¡å……å½“å…¶å‚æ•°ï¼Œä¸€èˆ¬æ˜¯InputStreamReader, è€ŒInputStreamReaderåˆéœ€è¦ä¸€ä¸ªInputStreamï¼ˆæŠ½è±¡æ–¹æ³•ä¸èƒ½newå¤„å¯¹è±¡ï¼‰ç±»çš„å¯¹è±¡ï¼Œä¸€èˆ¬é‡‡ç”¨InputStreamçš„å­ç±»FileInputStreamï¼Œç±»ä¼¼çš„BufferedWriter 28.é€šè¿‡åˆ›å»ºPropertieså¯¹è±¡å¯ä»¥è½½å…¥é¡¹ç›®çš„é…ç½®æ–‡ä»¶ã€‚ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹æ³•è½½å…¥æ–‡ä»¶ ï¼Œ1æ˜¯ ç›´æ¥é€šè¿‡é¡¹ç›®æ–‡ä»¶è½½å…¥ è°ƒç”¨å½“å‰ç±»çš„getClassæ–¹æ³•ï¼Œå¹¶æ¥ç€è°ƒç”¨getResourceAsStreamè½½å…¥æ–‡ä»¶æµ ï¼Œé€šè¿‡Properiteså¯¹è±¡çš„loadæ–¹æ³•è½½å…¥ ã€‚ï¼ˆå¾—å†™å¥½b.propertiesçš„è·¯å¾„ com/rupeng/b.properties è¡¨ç¤ºåœ¨com.rupengè¿™ä¸ªåŒ…ä¸‹çš„b.propertiesæ–‡ä»¶ï¼‰ 2 ç›´æ¥é€šè¿‡FileInputStreamåˆ›å»ºä¸€ä¸ªæ–‡ä»¶æµï¼Œç„¶åå†ç”¨Propertieså¯¹è±¡çš„loadæ–¹æ³•è½½å…¥ã€‚ä¸¤è€…åŒºåˆ«æœªçŸ¥ï¼Œæ•ˆæœä¸€æ ·ã€‚  CommonsIOçš„å­¦ä¹  ç»Ÿä¸€è¯´æ˜ï¼š import org.apache.commons.io.IOUtils; // åŠ è½½ç±»åº“ import org.apache.commons.io.FilesUtils; // åŠ è½½ç±»åº“\n1ï¼š IOUtils æ¡ˆä¾‹1ï¼šä»ä¸€ä¸ªURLä¸­è¯»å–å­—èŠ‚å¹¶æ‰“å° ä¸»è¦ä»£ç ï¼š\nInputStream in = null; try { in = new URL(\u0026quot;http://www.rupeng.com\u0026quot;).openStream(); System.out.println(IOUtils.toString(in,\u0026quot;utf-8\u0026quot;)); } catch (MalformedURLException e) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„ catch å— } catch (IOException e) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„ catch å— e.printStackTrace(); }finally { IOUtils.closeQuietly(in); }  åœ¨å¤§å¤šæ•°çš„è¿ç”¨é¢†åŸŸï¼Œä¸Šè¿°çš„CommonsIOæ“ä½œæ˜¯éå¸¸å¸¸è§çš„ï¼Œå¹¶ä¸”ä¼šèŠ‚çœå¾ˆå¤šçš„æ—¶é—´ã€‚å¯¹äºå·¥å…·ä»£ç ï¼Œæ¯”å¦‚IOUtils,çµæ´»æ€§å’Œé€Ÿåº¦ å æ®ä¸»è¦çš„ä½œç”¨ã€‚ç„¶è€Œï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿéœ€è¦æ³¨æ„ä»–çš„ç¼ºç‚¹ï¼Œæ¯”å¦‚å¦‚æœä½¿ç”¨ä¸Šè¿°çš„æŠ€æœ¯è¯»å–ä¸€ä¸ª1GBçš„å¤§æ–‡ä»¶ï¼Œå°†å¯¼è‡´äº§ç”Ÿä¸€ä¸ª 1GBçš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚\næ¡ˆä¾‹2:å¤åˆ¶æ–‡ä»¶ ä¸»è¦ä»£ç \ntry { fis = new FileInputStream(\u0026quot;e://a.txt\u0026quot;); fos = new FileOutputStream(\u0026quot;e://acopyByStream.txt\u0026quot;); IOUtils.copy(fis, fos); // æŠŠeç›˜ä¸‹çš„a.txtå¤åˆ¶åˆ°e://çš„acopyByStream.txt }  2ï¼šFileUtils æ¡ˆä¾‹1ï¼šå¤åˆ¶urlå†…å®¹é“¾æ¥åˆ°æ–‡ä»¶ ä¸»è¦ä»£ç \nURL url1 = null; File newFile = new File(\u0026quot;e://rupeng.html\u0026quot;); try { url1 = new URL(\u0026quot;http://www.rupeng.com\u0026quot;); FileUtils.copyURLToFile(url1, newFile); //æŠŠå¦‚é¹ç½‘é¦–é¡µå†™å…¥eç›˜ä¸‹çš„rupeng.html }  æ¡ˆä¾‹2ï¼šå¤åˆ¶æ–‡æœ¬ã€æ–‡ä»¶å¤¹ ä¸»è¦ä»£ç ï¼š\n// TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ File input = new File(\u0026quot;e://a.txt\u0026quot;); File output = new File(\u0026quot;e://acopy.txt\u0026quot;); File Input1 = new File(\u0026quot;e://a\u0026quot;); //æ–‡ä»¶å¤¹ File Output1 = new File(\u0026quot;e://TestFile\u0026quot;);//æ–‡ä»¶å¤¹ String loveWord = \u0026quot;love you,my girl\u0026quot;; try { //FileUtils.cleanDirectory(readyToDeleteDir); // ä¿ç•™æ–‡ä»¶å¤¹ System.out.println(\u0026quot;ç›®å½•e://açš„å¤§å°ï¼š\u0026quot;+FileUtils.sizeOfDirectory(readyToDeleteDir)/1024.0+\u0026quot;KB\u0026quot;); //FileUtils.deleteDirectory(readyToDeleteDir); // è¿æ–‡ä»¶å¤¹å¤šæ²¡æœ‰ FileUtils.copyFile(input, output); //å¤åˆ¶æ–‡ä»¶ FileUtils.copyDirectory(Input1, Output1); //å¤åˆ¶æ–‡ä»¶å¤¹ FileUtils.copyFileToDirectory(input, Output1); //å¤åˆ¶æ–‡ä»¶åˆ°æ–‡ä»¶å¤¹ FileUtils.writeStringToFile(output, loveWord, true); // è¿½åŠ å†™å…¥ }  IOUtilsæ˜¯é‡‡ç”¨æµæ–¹å¼è¿›è¡Œå¤åˆ¶ï¼ŒFileUtilsæŠŠæ–‡æœ¬æ–‡ä»¶ä½œä¸ºå‚æ•°ï¼ˆçœå»ä¸­é—´æµçš„åˆ›å»ºï¼Œä¼°è®¡æœ‰ï¼‰\n3ï¼šDirectory-walker DirectoryWalker æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ— æ³•ç›´æ¥åˆ›å»ºå¯¹è±¡ã€‚é€šè¿‡åˆ›å»ºä¸€ä¸ªç»§æ‰¿ç±»ï¼Œå¹¶å®ç°ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ã€‚ æ¡ˆä¾‹1ï¼šé€’å½’åˆ é™¤æŸä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ å…¨éƒ¨ä»£ç ï¼š\n/** * @author å¶æ˜­è‰¯ * */ import java.io.*; import java.util.ArrayList; import java.util.Collection; import java.util.Iterator; import java.util.List; import org.apache.commons.io.DirectoryWalker; public class TestCommonIODiretoryWalk extends DirectoryWalker { /** * @param args */ public TestCommonIODiretoryWalk() { super(); } public List reName(File startDirectory) { List results = new ArrayList(); try { walk(startDirectory,results ); } catch (IOException e) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„ catch å— e.printStackTrace(); } return results; } protected boolean handleDirectory(File directory,int depth,Collection results) { //save.svn directories and then skip ä¸ä¼šåˆ é™¤.svnæ–‡ä»¶å¤¹ä¸‹çš„ä»»ä½•ä¿¡æ¯ if(\u0026quot;fasf\u0026quot;.equals(directory.getName())) // å¦‚æœä½ æƒ³è¦ä¿å­˜æŸä¸ªæ–‡ä»¶å¤¹ //å°±æ·»åŠ elseifå³å¯ï¼ï¼å½“ç„¶æ–‡ä»¶æ¶æ„è¿˜åœ¨ { directory.delete(); return false; }else { return true; } } protected void handleFile(File file,int depth, Collection results) { file.delete(); results.add(file); } // ä½¿ç”¨Directory Walkeræ¥éå†ä¸€ä¸ªç›®å½•å¹¶è¿›è¡Œç›¸åº”æ“ä½œæ­¥éª¤å¦‚ä¸‹ // 1:åˆ›å»ºä¸€ä¸ªç»§æ‰¿DirectoryWalkerçš„ç±»ï¼Œå¹¶åœ¨æ„é€ å‡½æ•°è°ƒç”¨super() // 2:å®šä¹‰ä¸€ä¸ªä¸šåŠ¡å…¥å£æ–¹æ³•ï¼Œæ¯”å¦‚cleanï¼Œè¿™ä¸ªæ–¹æ³•è°ƒç”¨walkæ–¹æ³• // 3:é‡å†™handleDiretoryæ–¹æ³• æä¾›ç›¸åº”çš„ä¸šåŠ¡é€»è¾‘ // 4:é‡å†™handleFileæ–¹æ³•ï¼Œæä¾›ç›¸åº”å¤„ç†é€»è¾‘ // å…¶ä¸­æœ€ä¸ºå…³é”®çš„æ˜¯walkæ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆ¶å®šå…¥å£è·¯å¾„ï¼Œ // å¹¶æä¾›ä¸€ä¸ªç”¨äºæ¥å—å¤„ç†ç»“æ„çš„å‚æ•°ã€‚ // åœ¨walkæ–¹æ³•çš„å†…éƒ¨ï¼šé’ˆå¯¹ç›®å½•å¯¹è±¡è°ƒç”¨handleDirectory // æ–‡ä»¶å¯¹è±¡è°ƒç”¨handleFile public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ TestCommonIODiretoryWalk dw = new TestCommonIODiretoryWalk() ; List l1 = dw.reName(new File(\u0026quot;e://b\u0026quot;)); Iterator it = l1.iterator(); while(it.hasNext()) { System.out.println(it.next()); } } }  æ¡ˆä¾‹2ï¼šä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶åŠ ä¸‹çš„æ‰€æœ‰ä»¥txtç»“å°¾çš„ä¿®æ”¹ä¸ºdocç»“å°¾çš„ ä¸»è¦ä»£ç ï¼šï¼ˆåŸºæœ¬ä¸Š æ¡†æ¶ç±»ä¼¼äºæ¡ˆä¾‹1 ä¸»è¦ä¿®æ”¹handleFileçš„å­ç¨‹åº å…¶ä»–åœ°æ–¹ä¸éœ€è¦æ€ä¹ˆä¿®æ”¹ï¼‰\nprotected void handleFile(File file,int depth, Collection results) { String banana = file.getName(); String newFilename= file.getParent()+File.separator+banana.replaceAll(\u0026quot;.txt\u0026quot;+\u0026quot;[ DISCUZ_CODE_5 ]quot;, \u0026quot;.doc\u0026quot;); file.renameTo(new File(newFilename)); results.add(file); }  4.Filters è¿‡æ»¤å™¨ï¼šè¿‡æ»¤åœ¨è¿™è¾¹çš„æ„æ€æ˜¯æŒ‡ä¿ç•™é‚£äº›æ»¡è¶³æŸä¸ªæ¡ä»¶çš„æ–‡ä»¶(è€Œä¸æ˜¯å–æ¶ˆï¼‰ Org.apache.commons.io.filefilter åŒ…å®šä¹‰äº†ä¸€ä¸ªæ¥å£ï¼ˆIOFileFilterï¼‰ç”¨äºè¿æ¥java.io.FileFilterå’Œjava.io.FilenameFilter.é™¤äº†è¿™ä¸ªä¹‹å¤–ï¼ŒåŒ…ä¸­æä¾›äº†ä¸€ç³»åˆ—å¯ä»¥ä½¿ç”¨çš„IOFileFilteræ¥å£çš„å®ç°ï¼ŒåŒ…æ‹¬å…è®¸ä½ è¿æ¥å…¶ä»–è¿‡æ»¤å™¨çš„å®ç°ã€‚è¿™äº›è¿‡æ»¤å™¨å¯ä»¥è¢«ç”¨äºåˆ—å‡ºæ–‡ä»¶æˆ–è€…åœ¨FileDialog å…¨éƒ¨ä»£ç \n/** * @author å¶æ˜­è‰¯ * */ import java.io.File; import java.io.FilenameFilter; import org.apache.commons.io.filefilter.SuffixFileFilter; import org.apache.commons.io.filefilter.IOFileFilter; import org.apache.commons.io.filefilter.NotFileFilter; import org.apache.commons.io.filefilter.OrFileFilter; import org.apache.commons.io.filefilter.AndFileFilter; import org.apache.commons.io.filefilter.DirectoryFileFilter; import java.io.*; public class TestCommonIOgetTxtFiles { /** * @param args */ public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ File rootDir = new File(\u0026quot;e://\u0026quot;); // åˆ—å‡ºæ‰€æœ‰çš„javaç»“å°¾çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆå½“å‰ç›®å½•ï¼‰ // SuffixFileFilterçš„ä½¿ç”¨ï¼Œå®šä¹‰äº†ä¸€ä¸ªFilenameFilteræ¥å£ FilenameFilter fileFilter = new SuffixFileFilter(\u0026quot;.java\u0026quot;); // æ»¡è¶³.javaç»“å°¾çš„æ–‡ä»¶ï¼Œè¿™ä¹Ÿæ­£å¥½ç¬¦åˆè¿‡æ»¤åœ¨å½“å‰æƒ…å†µä¸‹çš„å®šä¹‰ã€‚ String[] txtFiles = rootDir.list(fileFilter); for(int i = 0 ; i \u0026lt; txtFiles.length; i++) { System.out.println(rootDir+File.separator+txtFiles[i]); } // åˆ—å‡ºæ‰€æœ‰çš„htmlå’Œhtmçš„æ–‡ä»¶ï¼ˆåœ¨å½“å‰æ–‡ä»¶ç›®å½•ä¸‹ï¼‰ // IOFileFilterã€OrFileFilterã€NotFileFilterã€AndFileFilterçš„ä½¿ç”¨ï¼ˆand or é€»è¾‘ï¼‰ IOFileFilter htmlFilter = // å®šä¹‰äº†ä¸€ä¸ªIOFileFilteræ¥å£æ¥å£ new OrFileFilter(new SuffixFileFilter(\u0026quot;.html\u0026quot;),new SuffixFileFilter(\u0026quot;.htm\u0026quot;)); // ä¸ºä»€ä¹ˆæœ‰æ—¶å€™ç”¨IOFileFilter è€Œæœ‰æ—¶å€™ç”¨FilenameFilter? IOFileFilter notDirectory = new NotFileFilter(DirectoryFileFilter.INSTANCE); // æ‹’ç»é€‰æ‹©ç›®å½• FilenameFilter fileFilter1= new AndFileFilter(htmlFilter,notDirectory); // åˆ©ç”¨AndFileFilterè¿æ¥ä¸¤ä¸ªè¿‡æ»¤å™¨æ¥å£ File[] htmlfiles = rootDir.listFiles(fileFilter1); for(int i = 0; i\u0026lt; htmlfiles.length; i++) { System.out.println(htmlfiles[i]); } }  ä»£ç è¯´æ˜ï¼š æ¥å£æ˜¯ä¸€ä¸ªæ›´é«˜çº§åˆ«çš„ç±»ï¼Œæ‰€ä»¥å¯ä»¥å®šä¹‰ç±»å‹å˜é‡ã€‚å…·ä½“çœ‹filename.gif\næ¡ˆä¾‹2ï¼š å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„ä¸€å¤©å‰çš„æ‰€æœ‰æ–‡ä»¶ AgeFileFilter : é€šè¿‡ä¸€ä¸ªcutoffæˆªæ­¢æ—¶é—´æ¥è¿‡æ»¤æ–‡ä»¶ï¼Œå¯ä»¥è¿‡æ»¤å‡ºæ›´æ–°çš„ æ›´æ—§çš„ æˆ–è€…å°±æ˜¯æŸä¸€ä¸ªæ—¶é—´ç‚¹çš„ä¿¡æ¯ã€‚ æ¯”å¦‚ä¸‹é¢çš„ æ‰“å°æ‰€æœ‰å½“å‰æ–‡ä»¶å¤¹å†…çš„æ—©äºä¸€å¤©å‰åˆ›å»ºçš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ ä¸»è¦ä»£ç ï¼š æŸ¥çœ‹ä¸»è¦ä»£ç çš„å›¾ç‰‡ã€‚\næ¡ˆä¾‹3ï¼š è·å–æ–‡ä»¶å¤¹ä¸‹çš„å¯è¯» å¯å†™ ç›®å½•æ–‡ä»¶ï¼ˆæ™®é€šæ–‡ä»¶ç±»ä¼¼ï¼‰ ç©ºæ–‡ä»¶ éšè—æ–‡ä»¶ è¯´æ˜ï¼šæœ€å¥½æ˜¯åœ¨æ‰“å°æ—¶å€™(for å¾ªç¯)åŠ ä¸Šå¼‚å¸¸çš„åˆ¤æ–­ï¼ˆNullPointerException) ä¸»è¦ä»£ç ï¼š\nimport org.apache.commons.io.filefilter.CanReadFileFilter; import org.apache.commons.io.filefilter.CanWriteFileFilter; import org.apache.commons.io.filefilter.DirectoryFileFilter; import org.apache.commons.io.filefilter.EmptyFileFilter; import org.apache.commons.io.filefilter.HiddenFileFilter; // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ File dirBanana = new File(\u0026quot;E:\\\\æµ‹è¯•ç›®å½•\u0026quot;); String[] filesBanana = dirBanana.list(CanReadFileFilter.CAN_READ); for(int i = 0; i \u0026lt; filesBanana.length; i++) { System.out.println(\u0026quot;Bananaå¯è¯»æ–‡ä»¶:\u0026quot;+filesBanana[i]); } System.out.println(\u0026quot;åˆ†å‰²çº¿--------------------------\u0026quot;); File dirOrange = new File(\u0026quot;E:\\\\æµ‹è¯•ç›®å½•\u0026quot;); String[] filesOrange = dirOrange.list(CanReadFileFilter.READ_ONLY); for(int i = 0; i \u0026lt; filesOrange.length; i++) { System.out.println(\u0026quot;Orangeåªè¯»æ–‡ä»¶:\u0026quot;+filesOrange[i]); } System.out.println(\u0026quot;åˆ†å‰²çº¿--------------------------\u0026quot;); File dirApple = new File(\u0026quot;E:\\\\æµ‹è¯•ç›®å½•\u0026quot;); String[] filesApple = dirApple.list(CanReadFileFilter.CANNOT_READ); if(filesApple.length == 0) { System.out.println(\u0026quot;Appleæœªæ‰¾åˆ°ä¸å¯è¯»æ–‡ä»¶\u0026quot;); }else { for(int i = 0; i \u0026lt; filesApple.length; i++) { System.out.println(\u0026quot;Appleä¸å¯è¯»æ–‡ä»¶:\u0026quot;+filesApple[i]); } } File dirEgg = new File(\u0026quot;E:\\\\æµ‹è¯•ç›®å½•\u0026quot;); String[] filesEgg = dirEgg.list(CanWriteFileFilter.CAN_WRITE); for(int i = 0 ; i \u0026lt; filesEgg.length; i++) { System.out.println(\u0026quot;Egg æ‰¾åˆ°äº†å¯å†™æ–‡ä»¶:\u0026quot;+filesEgg[i]); } File dirChichen = new File(\u0026quot;E:\\\\æµ‹è¯•ç›®å½•\u0026quot;); String[] filesChichen = dirChichen.list(CanWriteFileFilter.CANNOT_WRITE); for(int i = 0 ; i \u0026lt; filesChichen.length; i++) { System.out.println(\u0026quot;Chichen æ‰¾åˆ°äº†ä¸å¯å†™æ–‡ä»¶:\u0026quot;+filesChichen[i]); } File dirDirectory = new File(\u0026quot;E:\\\\\u0026quot;); String[] filesDirectory = dirDirectory.list(DirectoryFileFilter.INSTANCE); for(int i = 0; i \u0026lt; filesDirectory.length; i++) { System.out.println(\u0026quot;åˆ—å‡ºæ‰€æœ‰Eç›˜ä¸‹çš„æ–‡ä»¶å¤¹åå­—:\u0026quot;+filesDirectory[i]); } File dirEmpty = new File(\u0026quot;E:\\\\\u0026quot;); String[] filesEmpty = dirEmpty.list(EmptyFileFilter.EMPTY); for(int i = 0; i \u0026lt; filesEmpty.length; i++) { System.out.println(\u0026quot;dirEmptyåˆ—å‡ºæ‰€æœ‰Eç›˜ä¸‹çš„ç©ºæ–‡ä»¶åå­—ï¼ˆåŒ…æ‹¬ç©ºæ–‡ä»¶å¤¹ï¼‰:\u0026quot;+filesEmpty[i]); } File dirNotEmpty = new File(\u0026quot;E:\\\\\u0026quot;); String[] filesNotEmpty = dirNotEmpty.list(EmptyFileFilter.NOT_EMPTY); for(int i = 0; i \u0026lt; filesNotEmpty.length; i++) { System.out.println(\u0026quot;dirNotEmptyåˆ—å‡ºæ‰€æœ‰Eç›˜ä¸‹çš„éç©ºæ–‡ä»¶åå­—ï¼ˆåŒ…æ‹¬ç©ºæ–‡ä»¶å¤¹ï¼‰:\u0026quot;+filesNotEmpty[i]); } File dirHidden = new File(\u0026quot;E:\\\\æµ‹è¯•ç›®å½•\u0026quot;); String[] filesHidden = dirHidden.list(HiddenFileFilter.HIDDEN); try { for(int i = 0; i \u0026lt; filesHidden.length; i++) { System.out.println(\u0026quot;dirHiddenåˆ—å‡ºæ‰€æœ‰Eç›˜ä¸‹çš„éšè—åå­—ï¼ˆåŒ…æ‹¬ç©ºæ–‡ä»¶å¤¹ï¼‰:\u0026quot;+filesHidden[i]); } }catch(NullPointerException e) { System.out.println(\u0026quot;æœªæ‰¾åˆ°ä»»ä½•éšè—æ–‡ä»¶ åœ¨æµ‹è¯•ç›®å½•ä¸‹\u0026quot;); } File dirVisible = new File(\u0026quot;E:\\\\æµ‹è¯•ç›®å½•\u0026quot;); String[] filesVisible = dirHidden.list(HiddenFileFilter.VISIBLE); try { for(int i = 0; i \u0026lt; filesVisible.length; i++) { System.out.println(\u0026quot;dirHiddenåˆ—å‡ºæ‰€æœ‰Eç›˜ä¸‹çš„éšè—åå­—ï¼ˆåŒ…æ‹¬ç©ºæ–‡ä»¶å¤¹ï¼‰:\u0026quot;+filesHidden[i]); } }catch(NullPointerException e) { System.out.println(\u0026quot;æœªæ‰¾åˆ°ä»»ä½•éšè—æ–‡ä»¶ åœ¨æµ‹è¯•ç›®å½•ä¸‹\u0026quot;); } }  æ–‡ä»¶è¿‡æ»¤å™¨çš„è§„å¾‹æ˜¯: éƒ½æ˜¯ä»¥FileFilterç»“å°¾çš„ æ¯”å¦‚SuffixFileFilter AndFileFilter,OrFileFilter, NotFileFilter,AgeFileFilter,CanWriteFileFilter,CanReadFileFilter,DirectoryFileFilter,FileFileFilter,NameFileFilter,WildcardFileFilterã€‚ã€‚ã€‚ æœ‰äº›æ¥å£éœ€è¦newå‡ºæ¥ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯”å¦‚new SuffixFileFilter(\u0026ldquo;.txt\u0026rdquo;) ,new NameFileFilter(\u0026ldquo;TestFile\u0026rdquo;) ã€new SizeFileFilter(1024*1024) ã€new And,Or,NotFileFilter\u0026hellip;ç­‰æœ‰äº›æ¥å£æ˜¯ç›´æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚HiddenFileFilter.HIDDEN|VISIBLE CanReadFileFilter.CANREAD|CANNOTREAD CanWriteFileFilter.CANWRITE|CANNOTWRITE EmptyFileFilter.EMPTY|NOTEMPTY DirectoryFileFilter.INSTANCE FileFileFilter.FILEç­‰\n5.Streaméƒ¨åˆ†ï¼š ä¸»è¦æµ‹è¯•äº†CountingInputStream ã€ CountingOutputStreamã€TeeOutputStreamã€TeeInputStream\nCountingInputStream :ç»Ÿè®¡è¾“å‡ºæµçš„å­—èŠ‚ä¸ªæ•°ï¼ˆCounting InputStreamï¼‰ï¼Œå¯ç”¨äºç½‘ç»œæ”¶è´¹ CountingOutputStream:æµ‹é‡è¾“å…¥æµçš„ç»Ÿè®¡ï¼Œå¯ç”¨äºç½‘ç»œæ”¶è´¹ TeeOutputStream:éœ€è¦è¾“å…¥ä¸¤ä¸ªOutputStreamsï¼ŒåŒæ—¶è¾“å‡ºåˆ°ä¸¤ä¸ªç¡¬ç›˜æ–‡ä»¶ TeeOutputStreamï¼šä¸€ä¸ªinputStream ä¸€ä¸ªOutputStream,åœ¨è¯»å–InputStreamçš„åŒæ—¶ï¼Œä¹Ÿè¾“å‡ºåˆ°ç¡¬ç›˜ä¸Šçš„å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œå……å½“å¤‡ä»½ã€‚\nTeeInputStream: CommonsIOåˆšåˆšæ¥è§¦ï¼Œåªæ˜¯ä¸€äº›æµ…æ˜¾çš„çŸ¥è¯†ï¼Œè·Ÿå¤§å®¶åˆ†äº«äº†,å¯ä»¥é€šè¿‡æ¯”è¾ƒä¼ ç»Ÿçš„IOæµçš„å®ç°ï¼Œ CommonsIOæµçš„ç¡®ä¸ºæˆ‘ä»¬å°è£…äº†å¾ˆå¤šæœ‰ç”¨è€Œä¸”å¿«æ·çš„ç±»æ–¹æ³•ï¼Œå½“ç„¶å‰ææ˜¯å¾—å¯¹åŸºæœ¬çš„IOæµæœ‰ä¸€å®šçš„åŸºç¡€æ€§è®¤è¯†ã€‚ æœ‰é—®é¢˜çš„ï¼Œæ±‚æŒ‡æ•™ã€‚ å¦å¤–çš„,WildcardFileFilterç±»ä¼¼äºRegexFileFilterå¯ä»¥æ¨¡ç³Šçš„å®šä½å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ç¬¦åˆæ¨¡ç³Šæ¡ä»¶çš„æ–‡ä»¶ï¼Œ æ¯”å¦‚\nWildcardFileFilter //åˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶å¤§å°å¤§äº*test*.java*çš„æ–‡ä»¶ File dirWildcard = new File(\u0026quot;E:\\\\æµ‹è¯•ç›®å½•\u0026quot;); String[] filesWildcard = dirWildcard.list(new WildcardFileFilter(\u0026quot;*test*.java*\u0026quot;)); //æ­£åˆ™è¡¨è¾¾å¼ try { for(int i = 0; i \u0026lt; filesWildcard.length; i++) { System.out.println(\u0026quot;dirWildcardåˆ—å‡ºæ‰€æœ‰Eç›˜ä¸‹çš„éšè—åå­—ï¼ˆåŒ…æ‹¬ç©ºæ–‡ä»¶å¤¹ï¼‰:\u0026quot;+filesWildcard[i]); } }catch(NullPointerException e) { System.out.println(\u0026quot;æœªæ‰¾åˆ°ä»»ä½•æ™®é€šæ–‡ä»¶ åœ¨æµ‹è¯•ç›®å½•ä¸‹\u0026quot;); }  RegexFileFilter:\n//åˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶åŒ…å«*test*.javaçš„æ–‡ä»¶ File dirRegex = new File(\u0026quot;E:\\\\æµ‹è¯•ç›®å½•\u0026quot;); FileFilter ff = new RegexFileFilter(\u0026quot;.*test.*\\\\.java.*\u0026quot;); //æ­£åˆ™è¡¨è¾¾å¼ ä¸èƒ½å†™æˆ*test* File[] filesRegex = dirRegex.listFiles(ff); try { for(int i = 0; i \u0026lt; filesRegex.length; i++) { System.out.println(\u0026quot;dirRegexåˆ—å‡ºæ‰€æœ‰Eç›˜ä¸‹çš„éšè—åå­—ï¼ˆåŒ…æ‹¬ç©ºæ–‡ä»¶å¤¹ï¼‰:\u0026quot;+filesRegex[i]); } }catch(NullPointerException e) { System.out.println(\u0026quot;æœªæ‰¾åˆ°ä»»ä½•æ™®é€šæ–‡ä»¶ åœ¨æµ‹è¯•ç›®å½•ä¸‹\u0026quot;); }  è¯´æ˜ï¼šFileFilter ff = new RegexFileFilter(\u0026ldquo;.test.\\.java\u0026rdquo;); ffå¯ä»¥ä½œä¸ºlistFilesçš„å‚æ•°ç±»å‹ï¼Œä½†æ˜¯RegexFileFilterè¿™ä¸ªFileFilterçš„å­ç±»äº§ç”Ÿçš„å¯¹è±¡æ— æ³•å……å½“listFilesçš„å‚æ•°ï¼Œè¿™è¾¹ä½“ç°ç€å¤šæ€çš„æ¦‚å¿µï¼Œè€Œä¸”æ˜¯æ¥å£çš„å¤šæ€ã€‚æœ‰ä¸€ä¸ªé—®é¢˜ï¼šä¸æ˜ç™½ä¸ºä»€ä¹ˆä¸èƒ½ç”¨RegexFileFilter çš„å¯¹è±¡ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ RegexFileFilteræŸ¥é˜…æºç çš„ç¡®æ˜¯ç»§æ‰¿FileFilterå’ŒFilenameFilterçš„ï¼Œéš¾é“æ˜¯è¯´å¤šæ€ä¸€èˆ¬åªæ˜¯ä½¿ç”¨åœ¨èµ‹å€¼è¯­å¥ï¼Œè€Œåœ¨æ„é€ å‡½æ•°å¿…é¡»ä½¿ç”¨å¯¹åº”çš„ç±»å‹ listFileså‡½æ•°çš„å£°æ˜ä¸º public File[] listFiles(FileFilter filter){..} æˆ–è€…public File[] listFiles(FilenameFilter filter){..} ï¼‰ æ±‚æŒ‡æ•™~-~\né¦–å…ˆæ„Ÿè°¢æ¨è€å¸ˆçš„è¿œæ§è§£å†³äº†æˆ‘çš„ä¸€ä¸ªå›°æƒ‘ã€‚ å…¶å®è‡ªå·±ä¹Ÿåº”è¯¥çŒœåˆ°ï¼Œåˆ†äº«ä¸€ä¸‹è®²è§£è¿‡ç¨‹ public class RegexFileFilter extends AbstractFileFilter\nå¤åˆ¶ä»£ç  RegexFileFilterç»§æ‰¿äº†AbstractFileFilter\npublic abstract class AbstractFileFilter implements IOFileFilter å¤åˆ¶ä»£ç \nAbstractFileFilterå®ç°äº†IOFileFilter æ¥å£å¯ä»¥å®ç°å¤šç»§æ‰¿ï¼Œäºæ˜¯è¿›ä¸€æ­¥è§‚çœ‹äº†IOFileFilter public interface IOFileFilter extends FileFilter, FilenameFilter å¤åˆ¶ä»£ç \nIOFileFilteråˆç»§æ‰¿äº†FileFilterå’ŒFilenameFilterè¿™ä¸¤ä¸ªæ¥å£ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªæ¥å£å·²ç»æ˜¯ç¥–å…ˆçº§çš„æ¥å£\nä¹‹å‰æˆ‘ä¸€ç›´ç”¨RegexFileFilterå®šä¹‰ffå˜é‡ï¼Œä¼ åˆ°listFiles()ä¸­æ­»æ´»æŠ¥é”™ï¼Œå¦‚ä¸‹ï¼š RegexFileFilter ff = new RegexFileFilter(\u0026ldquo;.test.\\.java.*\u0026ldquo;); å¤åˆ¶ä»£ç  åŸå› æ˜¯RegexFileFilterç»§æ‰¿äº†ä¸¤ä¸ªæ¥å£FileFilter,FilenameFilter,è€ŒlistFilesä¹Ÿæ˜¯å®ç°äº†ä¸¤ç§æ–¹å¼çš„é‡è½½ï¼ˆå¯ä»¥è¿›å…¥listFilesç±»ï¼Œåˆ©ç”¨ç¥å¥ç»„åˆctrl+oè§‚çœ‹åˆ° listFiles(FileFilte) listFiles(FileFilename)) æ‰€ä»¥å¦‚æœffä¸æ˜¾ç¤ºæŒ‡å®šçš„è¯ï¼ŒlistFilesæ€ä¹ˆçŸ¥é“è¦é‡è½½å“ªä¸ªå‡½æ•°ï¼Ÿ\nä¸‰ç§è§£å†³æ–¹æ³•ï¼š 1ï¼š\nFile[] filesRegex = dirRegex.listFiles((FilenameFilter)ff);  2ï¼š\nFile[] filesRegex = dirRegex.listFiles((FileFilter)ff);  éƒ½æ˜¯å¯ä»¥çš„ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸Šé¢çš„å¤šæ€çš„æ–¹æ³• 3ï¼š\nFileFilter ff = new RegexFileFilter(\u0026quot;.*test.*\\\\.java\u0026quot;);  é—®é¢˜çš„æ ¹æºï¼šé‡è½½+æ˜¾ç¤ºæŒ‡å®šç±»å‹\nå­¦ä¹ äº† /** ç„¶åæ‘ä¸‹ Enteré”® åœ¨eclipseä¸­è‡ªåŠ¨åŠ å…¥æ³¨é‡Šæ®µï¼Œå¹¶ä¸” æ•²å‡»@å¯ä»¥äº§ç”Ÿæƒ³è¦çš„æ³¨é‡Šå­—æ®µã€‚ è¾ƒä¸“ä¸šå†™æ³•ï¼Œä»£ç çš„æ³¨é‡Šï¼Œå¿…é¡»å­¦ä¹  /** * è¾“å…¥æµä¸­çš„å†…å®¹åˆ°è¾“å‡ºæµå» * @param input * @param out * @throws Exception */\n","date":1431327520,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327520,"objectID":"c0524914d7e384a2c68f3545c107c2d9","permalink":"/blog/2015/05/11/1yue-25ri-javaban-bi-ji-shi-ti/","publishdate":"2015-05-11T14:58:40+08:00","relpermalink":"/blog/2015/05/11/1yue-25ri-javaban-bi-ji-shi-ti/","section":"archives","summary":"","tags":null,"title":"1æœˆ25æ—¥Javaç­ç¬”è®°è¯•é¢˜","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"è¿›ä¸€æ­¥é’ˆå¯¹com.rupeng.gtk.GTKä¸»ç±»è¿›è¡Œäº†åˆ†æ ç¬¬ä¸€éƒ¨åˆ†ï¼š\npublic class GTK { static { Utils.unZipShared(); Utils.loadGtkLibs(); Utils.loadDll(\u0026quot;gtk4j.dll\u0026quot;); } ..... /** * åˆå§‹åŒ–gtkç¯å¢ƒ */ public static native void gtk_init();//  åœ¨GTKç±»ä¸­åŒ…å«ä¸»è¦ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯é™æ€ä»£ç æ®µStaticéƒ¨åˆ†ï¼Œä¸»è¦ç”¨äºåšå‰æœŸå·¥ä½œï¼Œäº§ç”Ÿdllæ–‡ä»¶ä»¥åŠè§£å‹ç¼©ï¼Œæ–‡ä»¶æµçš„å¤åˆ¶ç­‰ å¦ä¸€éƒ¨åˆ†ä¸»è¦æ˜¯é™æ€ä»£ç çš„å£°æ˜ï¼›\né’ˆå¯¹ç¬¬ä¸€éƒ¨åˆ†é™æ€ä»£ç æ®µéœ€è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ† unZipShare()éƒ¨åˆ†ã€loadGtkLibså’ŒloadDllï¼Œä»–ä»¬ä¸‰ä¸ªåˆ†åˆ«æ˜¯Utilsç±»çš„ä¸»è¦é™æ€æ–¹æ³•ã€‚\nUtils.unZipShare(): public static void unZipShared() { File gtkDir = new File(System.getProperty(\u0026quot;user.dir\u0026quot;), \u0026quot;gtk\u0026quot;);// *.dllæ”¾çš„æ–‡ä»¶å¤¹ if (!gtkDir.exists()) { gtkDir.mkdirs(); } InputStream inStream = Utils.class.getResourceAsStream(\u0026quot;/gtkshare.zip\u0026quot;); if (inStream == null) { throw new UnsatisfiedLinkError(\u0026quot;æ²¡æ‰¾åˆ°gtkshare.zip\u0026quot;); } try { unZip(inStream, gtkDir.toString()); } catch (IOException e) { System.err.println(\u0026quot;è§£å‹ç¼©gtkshare.zipå¤±è´¥\u0026quot; + toFullString(e)); } }  è¿™æ®µä»£ç çš„ä¸»è¦åŠŸèƒ½æ˜¯ï¼š 1.åˆ©ç”¨File(System.getProperties(\u0026ldquo;User.dir\u0026rdquo;,\u0026ldquo;gtk\u0026rdquo;)åˆ›å»ºä¸»è¦æ–‡ä»¶å¤¹gtkï¼Œç”¨äºå­˜æ”¾dllæ–‡ä»¶ 2.åˆ©ç”¨Utilsç±»çš„åå°„ï¼ˆä¸æ¸…æ¥šï¼Œå’Œä¹‹å‰çš„Propertiesçš„å½“å‰ç±»TestProperties.class.getClassLoader().getResourceAsStream()çš„æ•ˆæœä¸€æ ·ï¼‰ éƒ½æ˜¯è·å–ä¸€ä¸ªè¾“å…¥æµã€‚åœ¨è¿™è¾¹è·å–çš„æ˜¯ä¸€ä¸ªå½“å‰æ–‡ä»¶å¤¹ä¸‹çš„gtkshare.zipè¾“å…¥æµé™„ä¸ŠPropertiesçš„è¯­æ³•ï¼Œå½“åšå¤ä¹ \ninStream = TestProperties.class.getClassLoader().getResourceAsStream(\u0026quot;b.properties\u0026quot;); // ç”¨äºæå–é¡¹ç›®æ–‡ä»¶ä¸­çš„æ–‡ä»¶ é»˜è®¤å¦‚æœæ²¡æœ‰åŒ…åå­— å°±åªå†™é¡¹ç›®é‡Œé¢çš„æ–‡ä»¶å³å¯ï¼ System.out.println(inStream.getClass()); Properties prop = new Properties();//ä¿®æ­£å›¾ç‰‡ä¸­å­˜åœ¨çš„é”™è¯¯ TestPropertiesæ˜¯ä¸€ä¸ªå½“å‰ç±» ç±»ä¼¼äºå›¾ç‰‡ä¸­çš„Utilsç±»ï¼ æœ‰æ‰€ä¸åŒçš„æ˜¯classä¹‹åè¿˜éœ€è¦è°ƒç”¨getClassLoader ã€‚ å½“å‰çš„dllè½½å…¥ï¼Œrupengçš„ åŒ…æ˜¯é‡‡ç”¨System.loadè€ŒProperitiesæ˜¯é‡‡ç”¨prop.load(inStream);çš„æ–¹å¼ã€‚  3.æœ€åé€šè¿‡unZipæ–¹å¼æ‰“å¼€ï¼Œä¸ºæ­¤è¿˜éœ€è¦è¿›ä¸€æ­¥ç ”ç©¶unZipä»£ç \npublic static void unZip(InputStream streamToZip,String destDir)throws IOException { ZipInputStream zipStream = new ZipInputStream(streamToZip); try { ZipEntry zipEntry = null; while((zipEntry=zipStream.getNextEntry())!=null) { if(zipEntry.isDirectory()) { File dir = new File(destDir,zipEntry.getName()); if(!dir.exists()) { dir.mkdirs(); } } else { FileOutputStream fileOutStream = new FileOutputStream(new File(destDir,zipEntry.getName())); try { copy(zipStream, fileOutStream); } finally { close(fileOutStream); } } } } finally { close(zipStream); } }  è¿™æ®µä»£ç çš„ä¸»è¦ä½œç”¨æ˜¯ 1ï¼šæŠŠä¸€ä¸ªè¾“å…¥çš„å‹ç¼©æµzipStream åˆ©ç”¨å‹ç¼©æµç‰¹æœ‰çš„ZipEntryï¼ˆç±»ä¼¼å®¹å™¨å½“ä¸­çš„Iterator ï¼‰é€ä¸ªä»æµä¸­è§£å‹ç¼©ï¼Œ 1.1 å¦‚æœè¯¥æµæ–‡ä»¶å¤¹ï¼Œåˆ™åˆ›å»ºæ–‡ä»¶å¤¹ 1.2 å¦‚æœè¯¥æµæ˜¯æ–‡ä»¶å¤¹ ï¼Œåˆ™åˆ©ç”¨æ–‡ä»¶è¾“å‡ºæµï¼ˆFileOutputStreamï¼‰ï¼ŒæŠŠè§£å‹ç¼©æµçš„ä¿¡æ¯å­˜åˆ°è¾“å‡ºæµä¸­ã€‚ æ‰€ä»¥ä¹Ÿå°±æ˜¯è¯´ï¼šè§£å‹ç¼©æµçš„æ–‡ä»¶çš„ç»“æ„ä¹Ÿæ˜¯å’Œä¸ºè§£å‹ç¼©æ—¶å€™çš„ç»“æ„æ˜¯ä¸€æ ·çš„ï¼Œæ—¢æœ‰æ–‡ä»¶å¤¹æ–‡ä»¶ï¼Œåˆæœ‰æ™®é€šæ–‡ä»¶ï¼ˆå¦å¤–æ–‡ä»¶Fileæ˜¯ä¸€ä¸ªæ¯”è¾ƒå®½æ³›çš„å®šä¹‰ï¼ŒFileå®šä¹‰çš„å¯¹è±¡æ—¢å¯ä»¥æ˜¯æ–‡ä»¶å¤¹æ–‡ä»¶å¯¹æˆé‚£ä¸ªï¼Œä¹Ÿå¯ä»¥æ˜¯æ™®é€šæ–‡ä»¶ï¼Œæˆ–è€…ç®¡é“æ–‡ä»¶ï¼Œç´¢å¼•æ–‡ä»¶ï¼Œè®¾å¤‡æ–‡ä»¶ ï¼Œå³Fileå¯ä»¥ä»£è¡¨æ–‡ä»¶å¤¹ã€æ™®é€šæ–‡ä»¶ã€ç®¡é“æ–‡ä»¶ã€ç´¢å¼•æ–‡ä»¶ã€è®¾å¤‡æ–‡ä»¶ç­‰ã€‚)\nä¸ºäº†è¿›ä¸€æ­¥ç ”ç©¶Utils.unZip(),æˆ‘ä»¬éœ€è¦è¿›ä¸€æ­¥ç ”ç©¶Utils.copy()ï¼š\nstatic void copy(InputStream inStream, OutputStream outStream) throws IOException { byte[] buffer = new byte[512 * 1024];// 0.5MB çš„ç¼“å†²åŒº int len; while ((len = inStream.read(buffer)) \u0026gt;= 0) { outStream.write(buffer, 0, len); } }  è¯´æ˜: å¦‚é¹ç½‘å…ˆé€šè¿‡å»ºç«‹0.5MBçš„ç¼“å†²åŒºï¼Œç”¨äºè½½å…¥è¾“å…¥çš„å‹ç¼©æµï¼Œå½“è¾¾åˆ°0.5MBçš„æ—¶å€™ï¼Œå†åˆ©ç”¨æ–‡ä»¶è¾“å‡ºæµå†™å‡ºå‹ç¼©æµä¿¡æ¯åˆ°å…ˆå‰åˆ›å»ºçš„gtk/binç›®å½•ä¸‹ã€‚ æˆ‘æƒ³ç€æ˜¯ä¸æ˜¯å¯ä»¥ç”¨BufferedInputStreamå’ŒBufferedOutputStream,äºæ˜¯ä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š\nstatic void copy(InputStream inStream, OutputStream outStream) throws IOException { BufferedInputStream bis = null; BufferedOutputStream bos = null; try { bis = new BufferedInputStream(inStream); bos = new BufferedOutputStream(outStream); byte[] buffer = new byte[512 * 1024];// 0.5MB çš„ç¼“å†²åŒº(rupengé‡‡ç”¨çš„ç­–ç•¥) int len; while ((len = bis.read(buffer)) \u0026gt;= 0) //æœ€åä¸€ä¸ªè¿”å›çš„æ˜¯-1 { bos.write(buffer, 0, len); } }catch(IOException e) { System.out.println(â€œè¯»å–é”™è¯¯â€); } }  å¹¶æœªåšæµ‹è¯•ã€‚åªæ˜¯æƒ³ç€ä¸ºä»€ä¹ˆä¸ç”¨ç¼“å†²æµï¼Ÿå½“ç„¶ä¸¤è€…çš„æ•ˆæœä¸€æ · äºæ˜¯æˆ‘åšäº†ä¸‹é¢çš„æµ‹è¯• é’ˆå¯¹BufferedInputStream BufferedOutputStream ä»¥åŠFileInputstream ,FileOutputStreamï¼ˆä¸æ˜¯å¦‚é¹gtk4jçš„ZipInputStream å’ŒFileOutputStreamï¼‰\næµ‹è¯•ä»£ç ï¼š\n/** * */ /** * @author å¶æ˜­è‰¯ * */ import java.io.*; import java.util.Arrays; public class TestBufferedInputStream { /** * @param args */ public static void main(String[] args) { long t1 = System.currentTimeMillis(); TestBufferedInputStream(); //System.out.printf(\u0026quot;BufferedInputStreamæ€»å…±ç”¨æ—¶:\u0026quot;+Long.toString((System.currentTimeMillis() - t1))); System.out.println(\u0026quot;BufferedInputStreamæ€»å…±ç”¨æ—¶:\u0026quot;+(System.currentTimeMillis() - t1)); //System.out.printf(\u0026quot;BufferedInputStreamæ€»å…±ç”¨æ—¶:%ld\u0026quot;,(System.currentTimeMillis() - t1)); long t2 = System.currentTimeMillis(); TestFileInputStream(); //System.out.printf(\u0026quot;FileInputStreamæ€»å…±ç”¨æ—¶:\u0026quot;+Long.toString((System.currentTimeMillis() - t2))); System.out.println(\u0026quot;FileInputStreamæ€»å…±ç”¨æ—¶:\u0026quot;+(System.currentTimeMillis() - t2)); //System.out.printf(\u0026quot;FileInputStreamæ€»å…±ç”¨æ—¶:%ld\u0026quot;,(System.currentTimeMillis() - t2)); } public static void TestBufferedInputStream() { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ BufferedInputStream bis = null; BufferedOutputStream bos = null; byte[] fileToFile = new byte[512*1024]; int len = 0; try { bis = new BufferedInputStream(new FileInputStream(\u0026quot;E:\\\\æµ‹è¯•ç›®å½•\\\\MindManager.exe\u0026quot;)); bos = new BufferedOutputStream(new FileOutputStream(\u0026quot;E:\\\\æµ‹è¯•ç›®å½•\\\\Mind1.exe\u0026quot;)); len = bis.read(fileToFile); while(-1 != len) { //System.out.printf(\u0026quot;%s\u0026quot;,new String(fileToFile)); //System.out.printf(\u0026quot;%s\u0026quot;,Arrays.toString(fileToFile)); bos.write(fileToFile,0,len); bos.flush(); len = bis.read(fileToFile); } }catch(Exception e) { e.printStackTrace(); } finally { try { bis.close(); bos.close(); }catch(Exception e) { e.printStackTrace(); } } } public static void TestFileInputStream() { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ FileInputStream fis = null; FileOutputStream fos = null; byte[] fileToFile = new byte[512*1024]; int len = 0; try { fis = new FileInputStream(\u0026quot;E:\\\\æµ‹è¯•ç›®å½•\\\\MindManager.exe\u0026quot;); fos = new FileOutputStream(\u0026quot;E:\\\\æµ‹è¯•ç›®å½•\\\\Mind2.exe\u0026quot;); len = fis.read(fileToFile); while(-1 != len) { //System.out.printf(\u0026quot;%s\u0026quot;,fileToFile); //System.out.printf(\u0026quot;%s\u0026quot;,Arrays.toString(fileToFile)); fos.write(fileToFile,0,len); fos.flush(); len = fis.read(fileToFile); } }catch(Exception e) { e.printStackTrace(); } finally { try { fis.close(); fos.close(); }catch(Exception e) { e.printStackTrace(); } } } }  åŸºæœ¬ä¸Šä¿æŒä¸Šä¸‹çš„ä»£ç çš„ä¸€è‡´æ€§ï¼Œé™¤äº†è¾“å…¥æµå’Œè¾“å‡ºæµçš„ä¸ä¸€æ ·ï¼Œå¹¶æ¯”è¾ƒæ—¶é—´\nè¯´æ˜ï¼šæµ‹è¯•å¯¹è±¡ MindManage.exe å¤§æ¦‚æ˜¯126MB ï¼Œ æµ‹è¯•ç»“æœï¼šç¬¬ä¸€é˜¶æ®µæµ‹è¯•ï¼š ç¬¬ä¸€æ¬¡ï¼š BufferedInputStreamæ€»å…±ç”¨æ—¶:301 FileInputStreamæ€»å…±ç”¨æ—¶:369 ç¬¬äºŒæ¬¡å†è¿è¡Œ: BufferedInputStreamæ€»å…±ç”¨æ—¶:296 FileInputStreamæ€»å…±ç”¨æ—¶:319 ç¬¬ä¸‰æ¬¡ BufferedInputStreamæ€»å…±ç”¨æ—¶:280 FileInputStreamæ€»å…±ç”¨æ—¶:278 ç¬¬å››æ¬¡ BufferedInputStreamæ€»å…±ç”¨æ—¶:337 FileInputStreamæ€»å…±ç”¨æ—¶:305\nåˆ†æå‘ç°ï¼Œå‰ä¸¤æ¬¡åŸºæœ¬ä¸Šæ˜¯Bufferedæ–¹å¼è¾ƒå¥½ï¼Œåä¸¤ç§åŸºæœ¬ä¸Šæ˜¯Fileè¾ƒå¥½ï¼Œè¿™æœ‰å¯èƒ½æ˜¯eclipseå·²ç»å¸®ä½ è½½å…¥äº†ç¼“å­˜çš„åŸå› ï¼Œäºæ˜¯åˆ æ‰æµ‹è¯•ç›®å½•ä¸‹çš„Mind1.exe Mind2.exe\nè¿›è¡Œç¬¬äºŒæ¬¡æµ‹è¯•é˜¶æ®µï¼š ç¬¬ä¸€æ¬¡ï¼š BufferedInputStreamæ€»å…±ç”¨æ—¶:251 FileInputStreamæ€»å…±ç”¨æ—¶:261\nç¬¬äºŒæ¬¡ï¼š BufferedInputStreamæ€»å…±ç”¨æ—¶:286 FileInputStreamæ€»å…±ç”¨æ—¶:303\nç¬¬ä¸‰æ¬¡ï¼š æŠ¥é”™ï¼Œæç¤ºMind1.exeè¢«å ç”¨ï¼Œé—®é¢˜ä¸æ˜¯ä¸»è¦çš„ï¼Œäºæ˜¯å†æ¬¡åˆ æ‰Mind1.exe Mind2.exe\nç¬¬ä¸‰é˜¶æ®µæµ‹è¯•ï¼š ç¬¬ä¸€æ¬¡ï¼š BufferedInputStreamæ€»å…±ç”¨æ—¶:304 FileInputStreamæ€»å…±ç”¨æ—¶:431 ç¬¬äºŒæ¬¡ï¼š åˆæé†’Mind1.exeè¢«å ç”¨ï¼Œä¼°è®¡è¿˜æœªå†™å®Œï¼Œä½†å…¶å®æ–‡ä»¶çš„å¤§å°å·²ç»æ˜¯å’ŒMindMange.exeç›¸ç­‰ã€‚ ç¬¬ä¸‰æ¬¡ï¼š BufferedInputStreamæ€»å…±ç”¨æ—¶:299 ï¼Œå˜é•¿äº† FileInputStreamæ€»å…±ç”¨æ—¶:284\nç»è¿‡ä¸‰ä¸ªé˜¶æ®µæµ‹è¯•å‘ç°: å¦‚æœå•ä»¥ç¬¬ä¸€æ¬¡ä¸ºæ ‡å‡†çš„è¯ï¼ŒBufferedçš„æ–¹å¼æ˜¯æ¯”FileInputStreamçš„æ–¹å¼å¿«ä¸€äº›ã€‚\nå›åˆ°ä¸»é¢˜ï¼Œå·²ç»ä»Utils.unZipShared()\u0026mdash;-\u0026gt;Utils.unZip()\u0026mdash;-\u0026gt;Utils.copy()è¿™æ¡çº¿èµ°é€šäº†ä¸€éï¼ŒåŸºæœ¬ä¸Šå®Œæˆçš„æ˜¯ 1.åˆ›å»ºä¸»ç›®å½•gtk ,å¹¶è§£å‹ç¼©gtkshare.zip,å¹¶è°ƒç”¨unzip 2.åˆ›å»ºgtkåº•ä¸‹çš„å­ç›®å½•binå’Œshareä»¥åŠå…¶ä»–ï¼Œå¹¶å¯¼å…¥å…¶ä¸­çš„ä¸€äº›dllæ–‡ä»¶ï¼ˆæš‚æ—¶ä¸æ¸…æ¥šå…·ä½“æ˜¯å“ªä¸ªdll)(å¯¼å…¥çš„æ–¹å¼æ˜¯é€šè¿‡æ–‡ä»¶æµçš„å¤åˆ¶è¿‡ç¨‹ï¼Œå½“ç„¶å…¶å®ä¹Ÿæ˜¯å¯ä»¥ç”¨IOUtils.copy(inStream,outStreamï¼‰çš„æ–¹å¼\nç¬¬äºŒéƒ¨åˆ†ï¼š\nUtils.loadGtkLibs(); static void loadGtkLibs() { // å¦‚æœè¿™äº›dllæ”¾åˆ°user.diræ ¹ç›®å½•ä¸‹ï¼Œåˆ™åªè¦åœ¨gtk4j.dllåŠ è½½ä¹‹å‰æŠŠlibffi-6.dllç­‰è¿™äº›è¢«ä¾èµ–çš„æ”¾åˆ°user.diræ ¹ç›®å½•ä¸‹å³å¯ // ä½†æ˜¯å¦‚æœæ”¾åˆ°å…¶ä»–ç›®å½•ä¸‹ï¼ˆæ”¾åˆ°æ ¹ç›®å½•ä¸‹åœ¨é¡¹ç›®é‡Œçœ‹åˆ°ä¸€å †dllæ–‡ä»¶ï¼Œå¤ªéš¾çœ‹ï¼Œæ‰€ä»¥æ”¾åˆ°gtkbinä¸‹ï¼‰ï¼Œå°±è¦æ³¨æ„åŠ è½½é¡ºåº // è¦å…ˆåŠ è½½è¢«ä¾èµ–çš„dllã€‚ä½¿ç”¨DependencyWalkerå¯ä»¥çœ‹dllçš„ä¾èµ–å…³ç³» loadDll(\u0026quot;libffi-6.dll\u0026quot;); loadDll(\u0026quot;libpixman-1-0.dll\u0026quot;); loadDll(\u0026quot;zlib1.dll\u0026quot;); loadDll(\u0026quot;liblzma-5.dll\u0026quot;); loadDll(\u0026quot;libiconv-2.dll\u0026quot;); loadDll(\u0026quot;pthreadGC2.dll\u0026quot;); loadDll(\u0026quot;libxml2-2.dll\u0026quot;);// ä¾èµ–äºlibiconv-2.dllã€liblzma-5.dll loadDll(\u0026quot;libpng15-15.dll\u0026quot;);// ä¾èµ–äºzlib1.dll ã€‚ã€‚ã€‚ã€‚ }  è¯´æ˜ï¼š åŸæ¥è¿™ä¸ªå‡½æ•°ä¸»è¦æ˜¯ç”¨äºè½½å…¥å­˜åœ¨äºgtk/binç›®å½•ä¸‹çš„å¤§å¤šæ•°çš„dllæ–‡ä»¶ ï¼Œä½†æ˜¯ä¸åŒ…å«gtk4j.dll (è¿™æ˜¯åœ¨ç¬¬ä¸‰æ­¥çš„æ—¶å€™å•ç‹¬å®ç°ï¼Œä¸ºä»€ä¹ˆåˆ†å¼€ä¸æ˜ç™½ï¼Ÿï¼‰\nä¸ºæ­¤è¿›ä¸€æ­¥è¿½è¸ªäº†loadDllçš„å®ç°ï¼š\nstatic void loadDll(String dllName) { // æŠŠdllæ‹·è´åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹ File gtkBinDir = new File(System.getProperty(\u0026quot;user.dir\u0026quot;), \u0026quot;gtk/bin\u0026quot;);// *.dllæ”¾çš„æ–‡ä»¶å¤¹ if (!gtkBinDir.exists()) { gtkBinDir.mkdirs(); } File destDllFile = new File(gtkBinDir, dllName); // dllä½äºé¡¹ç›®çš„libç›®å½•ä¸‹ï¼Œå¹¶ä¸”æŠŠlibè®¾å®šä¸ºâ€œæºç æ–‡ä»¶å¤¹â€ï¼Œè¿™æ ·è¿™äº›dllå°±ä¼šç”Ÿæˆåˆ°jarçš„æ ¹ç›®å½•ä¸‹äº† InputStream inStream = Utils.class.getResourceAsStream(\u0026quot;/\u0026quot; + dllName); if (inStream == null) { throw new UnsatisfiedLinkError(\u0026quot;æ²¡æ‰¾åˆ°\u0026quot; + dllName); } // å¦‚æœdllå·²ç»å­˜åœ¨ï¼Œåˆ™å°è¯•åˆ é™¤ï¼Œå†æ‹·è´æ–°çš„ï¼Œè¿™æ ·ä¿è¯èƒ½è‡ªåŠ¨å‡çº§ if (destDllFile.exists()) { // å¦‚æœæ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œåˆ™ä¸è¦†ç›–ï¼Œæé«˜è¿è¡Œæ•ˆç‡ï¼Œå¦‚æœéœ€è¦å‡çº§ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨æ¸…ç†dll System.out.println(dllName + \u0026quot;å·²ç»å­˜åœ¨ï¼Œé»˜è®¤åŠ è½½ã€‚å¦‚æœéœ€è¦é‡‡ç”¨æ–°ç‰ˆæœ¬dllï¼Œè¯·å…ˆåˆ é™¤æ–‡ä»¶å¤¹\u0026quot; + gtkBinDir + \u0026quot;ä¸‹æ‰€æœ‰çš„*.dll\u0026quot;); } else { // æ‹·è´æ¥æ–°çš„ FileOutputStream fileOutStream = null; try { fileOutStream = new FileOutputStream(destDllFile); copy(inStream, fileOutStream); } catch (IOException e) { throw new RuntimeException(\u0026quot;æ‹·è´\u0026quot; + dllName + \u0026quot;å¤±è´¥\u0026quot;, e); } finally { close(inStream); close(fileOutStream); } } System.load(destDllFile.toString()); }  è¯´æ˜ï¼šæ­£å¦‚æºä»£ç çš„æ³¨é‡Šæ‹·è´dllæ–‡ä»¶åˆ°gtk/binç›®å½•ä¸‹ã€‚ 1ï¼šå…ˆåˆ›å»ºä¸€ä¸ªä¸»ç›®å½•gtk/bin 2: æ ¹æ®gtk/binè¿™ä¸ªfileå¯¹è±¡å’Œdllæ–‡ä»¶åå­—åˆ›å»ºä¸€ä¸ªFileå¯¹è±¡ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™å¤åˆ¶åˆ°gtk/binä¸­ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ä¼šå‘ç°ä¸€å¥æˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰çš„â€œå·²ç»å­˜åœ¨ï¼Œé»˜è®¤åŠ è½½ã€‚å¦‚æœéœ€è¦é‡‡ç”¨æ–°ç‰ˆæœ¬dllï¼Œè¯·å…ˆåˆ é™¤æ–‡ä»¶å¤¹\u0026rdquo;+ gtkBinDir + \u0026ldquo;ä¸‹æ‰€æœ‰çš„.dllâ€ 3.æ‹·è´dllæ–‡ä»¶æ–¹å¼ åŸºæœ¬ä¸Šä¹Ÿæ˜¯åˆ©ç”¨FileOutputStream å’Œcopyå‡½æ•° 4.è½½å…¥dllæ–‡ä»¶åˆ°ç³»ç»Ÿå½“ä¸­ï¼Œé€šè¿‡System.load(.dll);\nåˆ°è¿™é‡Œä¸ºæ­¢ï¼ŒåŸºæœ¬ä¸Šå®Œæˆäº†GTK.classå’ŒUtils.classä¸­ä¸»è¦ä½¿ç”¨åˆ°çš„ç±»çš„å®ç°å’Œè°ƒç”¨å­¦ä¹ ã€‚\nåæ¥ç»èµµå¸…æé†’åŸæ¥GTKé‡Œé¢å…¶å®æ˜¯æœ‰å¾ˆå¤šçš„nativeçš„é™æ€ç±»çš„å£°æ˜ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å¯¹åº”çš„å®ç°ï¼Œé‚£ä¹ˆå®ç°åˆ°åº•å»å“ªé‡Œï¼Ÿ å½“ç„¶è¿™ä¸ªæ˜¯dllè½½å…¥å’ŒJNIæ¥å£çš„é—®é¢˜ï¼ˆè€Œä¹‹æ‰€ä»¥ç”¨dllåŠ¨æ€é“¾æ¥åº“è½½å…¥æ–‡ä»¶ï¼Œæ˜¯å› ä¸ºåŸå…ˆçš„gtkæºä»£ç æ˜¯é€šè¿‡cè¯­è¨€ç¼–å†™ï¼Œåœ¨javaä¸­å¯ä»¥åˆ©ç”¨jniæ¥å£æ–¹ä¾¿çš„è°ƒç”¨cè¯­è¨€äº§ç”Ÿçš„åŠ¨æ€é“¾æ¥åº“çš„å®ç°ï¼Œè€Œå…·ä½“çš„è°ƒç”¨è§„èŒƒå¯ä»¥è§ä¸‹é¢çš„äº”ä¸ªæ­¥éª¤ï¼‰ï¼Œä¸ºæ­¤æˆ‘ç”¨æœ€ç®€å•çš„helloã€hiç¨‹åºè¿›è¡Œæ¨¡æ‹Ÿã€‚\nä¸»è¦åˆ†ä¸ºäº”æ­¥ï¼ˆæ„Ÿè°¢å¸…å¸…ï¼‰ï¼š 1.å»ºç«‹ä¸€ä¸ªhello.javaæ¨¡ä»¿GTK classçš„æ–¹å¼ å»ºç«‹äº†é™æ€ä»£ç å¿« å¯¼å…¥å¾…ç”Ÿæˆçš„dllæ–‡ä»¶ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªç±»å¯¹è±¡è°ƒç”¨dllå®ç°çš„æ–¹æ³• javac hello.java ç”Ÿæˆä¸€ä¸ªjava.class 2.åˆ©ç”¨javah -jni hello ç”Ÿæˆhello.h ï¼Œè¿™ä¸ªhello.hæ˜¯å…³é”®ï¼Œæç¤ºhello.cçš„å‡½æ•°å¤´çš„ä¹¦å†™ 3.åˆ©ç”¨hello.hå†…éƒ¨çš„å‡½æ•°å¤´ï¼Œæ–°å»ºhello.cæ–‡ä»¶ ï¼Œå¹¶æŒ‰ç…§å‡½æ•°å¤´çš„å½¢å¼å®ç°ä¸‰ä¸ªå‡½æ•°\n4.åˆ©ç”¨ gcc -shared hello.c -o hello.dllçš„å½¢å¼ç”Ÿæˆdll æ–‡ä»¶ 5.java hello\nåˆ†è§£ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºäº†hello.java\npublic class hello { public native void sayHello(); // 3ä¸ªnativeå‡½æ•°å£°æ˜ï¼Œè¡¨æ˜éœ€è¦æœ‰3ä¸ªcè¯­è¨€çš„å®ç° public native void sayHi(); public native int max(int a ,int b); static // é™æ€ä»£ç å— { System.loadLibrary(\u0026quot;hello\u0026quot;); } public static void main(String[] args) { new hello().sayHello(); new hello().sayHi(); int a = new hello().max(3,5); System.out.println(\u0026quot;the maximum value of 3 and 5 is \u0026quot;+a); } }  ä¸Šé¢çš„è¿‡ç¨‹åŸºæœ¬ä¸Šå’ŒGTK.classæœ‰ç‚¹åƒï¼Œ 1.ä¸‰ä¸ªéé™æ€å‡½æ•°çš„å£°æ˜ï¼ˆè¿™è¾¹ä¸ç”¨é™æ€ ï¼Œå¦‚æœæ˜¯é™æ€ä¹Ÿå¯ä»¥ç›´æ¥åŠ ä¸Šä¸€ä¸ªnativeï¼‰ï¼Œ 2.ç„¶åæ˜¯ä¸€ä¸ªé™æ€ä»£ç å¿«è½½å…¥dllæ–‡ä»¶ï¼Œ 3.ç´§æ¥ç€æ˜¯mainå‡½æ•°è°ƒç”¨å½“å‰å¯¹è±¡çš„æ–¹æ³•ï¼Œå®ç°javaè°ƒç”¨cè¯­è¨€çš„å®ç°\nç¼–è¯‘1ï¼š javac hello.java å¤åˆ¶ä»£ç \nç¼–è¯‘2ï¼š javah -jni hello å¤åˆ¶ä»£ç \nåœ¨ç¼–è¯‘2ä¸­ç”Ÿæˆäº†hello.h ,æ‰“å¼€äº†ï¼Œæ–‡ä»¶å†…å®¹ä¸ºï¼š\n/* DO NOT EDIT THIS FILE - it is machine generated */ #include \u0026lt;jni.h\u0026gt; /* Header for class hello */ #ifndef _Included_hello #define _Included_hello #ifdef __cplusplus extern \u0026quot;C\u0026quot; { #endif /* * Class: hello * Method: sayHello * Signature: ()V */ JNIEXPORT void JNICALL Java_hello_sayHello (JNIEnv *, jobject); /* * Class: hello * Method: sayHi * Signature: ()V */ JNIEXPORT void JNICALL Java_hello_sayHi (JNIEnv *, jobject); /* * Class: hello * Method: max * Signature: (II)I */ JNIEXPORT jint JNICALL Java_hello_max (JNIEnv *, jobject, jint, jint); #ifdef __cplusplus } #endif #endif  ä¸Šé¢çš„cè¯­è¨€ç¼–è¯‘æŒ‡ä»¤ï¼Œæš‚æ—¶ä¸ç®¡ï¼Œå› ä¸ºæˆ‘ä»¬å…³å¿ƒçš„æ˜¯å‡½æ•°çš„å£°æ˜ï¼ŒæŠŠä»–ä»¬ä¸€ä¸€æ‹·è´åˆ°hello.c å½“ç„¶é¦–å…ˆä½ å¾—ç”¨è®°äº‹æœ¬æ–°å»ºä¸€ä¸ªhello.cæ–‡ä»¶ï¼Œç„¶åä¸€ä¸€æ‹·è´ä¸Šé¢çš„ä¸‰ä¸ªå‡½æ•°å¤´å£°æ˜ï¼Œå¹¶åœ¨é‡Œé¢å†™ä¸Šå®ç°ï¼ˆå½“æ—¶æˆ‘ä¹Ÿæ˜¯è’™ç€å†™ç€é‚£äº›å®ç°ï¼ŒçŒœçš„ï¼‰ï¼Œæ³¨æ„å¯¼å…¥jni.h(æˆ‘æ˜¯ç›´æ¥æ‹·è´%JAVA_HOME%/include/jni.håˆ°å½“å‰ç›®å½•ä¸‹) å’Œ hello.h ä»¥åŠstdio.hï¼ˆprintfå‡½æ•°çš„å£°æ˜ï¼‰\n#include \u0026lt;jni.h\u0026gt; #include \u0026quot;hello.h\u0026quot; #include \u0026lt;stdio.h\u0026gt; JNIEXPORT void JNICALL Java_hello_sayHello(JNIEnv * env, jclass obj) { printf(\u0026quot;say Hello to you\\n\u0026quot;); } JNIEXPORT void JNICALL Java_hello_sayHi(JNIEnv * env, jclass obj) { printf(\u0026quot;say hi to you\\n\u0026quot;); } JNIEXPORT jint JNICALL Java_hello_max(JNIEnv * env, jclass obj, jint a , jint b) { int max = a; if(max \u0026lt; b) { return b; }else { return a; } }  äºæ˜¯æˆ‘ä»¬å¾—åˆ°äº†cè¯­è¨€çš„å®ç°ï¼Œå¹¶è¿›ä¸€æ­¥æ•´ç†ä¸ºä¸€ä¸ªdllæ–‡ä»¶ ç¼–è¯‘3ï¼š\ngcc -I. -LD --add-stdcall-alias -shared hello.c -o hello.dll  å†ç”¨gccè¿›è¡Œç¼–è¯‘æˆjavaå¯ä»¥ä½¿ç”¨çš„dllæ–‡ä»¶æ—¶å€™ä¸€å®šè¦åŠ å…¥\u0026ndash;add-stdcall-alias,å¦åˆ™æŠ¥UnsatisfiedLinkError ,å¦‚æœæŸ¥è¿‡loadDLLçš„å®ç°ä¼šå‘ç°ï¼Œ\nif (inStream == null) { throw new UnsatisfiedLinkError(\u0026quot;æ²¡æ‰¾åˆ°\u0026quot; + dllName); }  è¿™ä¸ªå¼‚å¸¸çš„å‡ºç°å’Œç¼–è¯‘æŒ‡ä»¤\u0026ndash;add-stdcall-aliasæƒŠäººçš„å¯¹åº”ï¼Œä¸€ä¸ªäº§ç”Ÿï¼Œä¸€ä¸ªæ¶ˆå»ã€‚\nå®Œæˆäº†ç¼–è¯‘3ä¹‹åï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†hello.dll(åŠ¨æ€é“¾æ¥åº“æ˜¯ä»€ä¹ˆï¼Œå°±æ˜¯ä½ åœ¨è¿è¡Œæ—¶å€™javaä¼šå¯¼å…¥çš„å‡½æ•°å®ç°ï¼Œä¾›javaè¿›è¡Œcè¯­è¨€å‡½æ•°è°ƒç”¨ï¼Œå½“ç„¶è¿™ä¸ªè¿‡ç¨‹ä¸ç”¨ç®¡ï¼Œåªéœ€è¦hello.dllåœ¨å½“å‰çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹å³å¯ï¼‰\nè¿è¡Œï¼š\njava hello E:\\testDLL\\testJavaDll\u0026gt;java hello say Hello to you say hi to you the maximum value of 3 and 5 is 5  å¯è§å·²ç»è¿æ¥æˆåŠŸã€‚\nå¦å¤–å¦‚æœå¤§å®¶è§‰å¾—ç¼–è¯‘è¿‡ç¨‹éº»çƒ¦ï¼Œæˆ‘ä¹Ÿé™„ä¸Šä¸€ä¸ªmakefile\nJC=javac JH=javah JHOption=-jni JRun=java CC=gcc # I had put the jni.h into current directory DLLOPTION = -I. -LD -Wl,--add-stdcall-alias -shared CFLAGS = -c src = hello.java srctemp = hello.c srcClass = $(basename $(src)) # generate the hello.java # generate hello.h #NOw you need to write your hello.c according to hello.h Dll1 =$(addsuffix .dll,$(basename $(src))) HeadTarget: $(JC) $(src) $(JH) $(JHOption) $(srcClass) AppTarget: $(CC) $(DLLOPTION) -o $(Dll1) $(srctemp) $(JRun) $(srcClass) .PHONY:clean clean: del $(Dll1) /s del $(srcClass).class /s  å…ˆæ˜¯è¿è¡Œï¼š 1ï¼šmake HeadTarget ä¼šå¾—åˆ°hello.h,ç„¶åå¾—å»ç¼–å†™hello.cæ–‡ä»¶ 2: make AppTarget ä¼šå¾—åˆ°hello.dllæ–‡ä»¶ï¼Œå¹¶è¿è¡Œjava hello\nå‰æä½ å¾—å®‰è£…gnu make.\né™„ä¸ŠloadDLLçš„å®ç°ï¼š\nè®¤è¯†ç•Œé¢ï¼ æ§åˆ¶å°ç¨‹åº ç•Œé¢ç¨‹åºï¼ˆGUIï¼‰ ç½‘ç«™ç¨‹åºï¼ˆHTML+JavaScript+JSPï¼‰ æ‰‹æœºç¨‹åºï¼ˆAndroidï¼‰\nå­¦GTKä¸æ˜¯ä¸»è¦ç›®çš„ å­¦å·¥å…·æ˜¯ä½å±‚æ¬¡ï¼Œå­¦æ€æƒ³æ‰æ˜¯ç‹é“ï¼ŒåæœŸå­¦ä¹ javaeeçš„sshçš„æ¶æ„æ€æƒ³ã€‚\nGTKçš„å­¦ä¹ ç›®çš„æ˜¯æ·±åˆ»ç†è§£é¢å‘å¯¹è±¡çš„æ„ä¹‰ï¼Œè€Œä¸æ˜¯å­¦ä¼šGTKçš„ä½¿ç”¨ åå­—ä¸­æ²¡æœ‰gtkçš„éƒ½æ˜¯é€šç”¨çš„javaçŸ¥è¯†ã€‚\næ¡ˆä¾‹1ï¼šå¸¦æœ‰å½»åº•å…³é—­å¯¹è¯æ¡†åŠŸèƒ½çš„ç®€å•å¯¹è¯æ¡†ï¼Œå¹¶è®¾ç½®å¯¹è¯æ¡†çš„åå­—ä¸ºâ€œå†°å°â€\n/** * @author å¶æ˜­è‰¯ * */ import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; public class TestGtk { /** * @param args */ public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_init(); // initialize int window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); //åˆ›å»ºä¸€ä¸ªæ–°çª—å£çš„é¡¶çº§æ ‡ è¯†ï¼Œåœ¨cè¯­è¨€ä¹Ÿå«åšæ–‡ä»¶å¥æŸ„ï¼Œè¿™è¾¹åº”è¯¥å«åšçª—å£å¥æŸ„ã€‚ å¥æŸ„å…¶å®å°±æ˜¯ä¸€ä¸²å”¯ä¸€æ ‡è¯†ä¸€ä¸ªèµ„æºçš„æ•°å­— // è®¾ç½®çª—å£çš„åå­—ï¼Œé€šè¿‡è°ƒç”¨GTKç±»çš„é™æ€æ–¹æ³• GTK.gtk_window_set_title(window,\u0026quot;å†°å°\u0026quot;);// // è®¾ç½®çª—å£çš„æ˜¾ç¤ºä½ç½® GTK.gtk_window_set_position(window,GTK.GTK_WIN_POS_CENTER_ALWAYS); //æ¯ä¸€ä¸ªç©ºé—´éƒ½å¾—showå‡ºæ¥ GTK.gtk_widget_show(window); // show it //äº‹ä»¶çš„åˆ›å»ºï¼Œå½“ç‚¹å‡»åˆ é™¤æŒ‰é’®æ—¶å€™ æ‘§æ¯å¯¹è¯æ¡† //IGCallBackä¸­çš„ä»£ç å—æ˜¯â€œå›è°ƒâ€çš„ï¼Œåœ¨å‘ç”Ÿâ€œdestroyâ€äº‹ä»¶çš„æ—¶å€™æ‰æ‰§è¡Œã€‚å›è°ƒæ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„æœºåˆ¶ //åŒæ—¶è§£å†³æ— æ³•å½»åº•å…³é—­GTKå¯¹è¯æ¡† //è§£é‡Šï¼šåœ¨å”¯ä¸€æ ‡è¯†çš„å½“å‰çª—å£ï¼Œç»‘å®šä¸€ä¸ªdestroyçš„äº‹ä»¶ï¼Œå½“å‘ç”Ÿdestroyä¿¡å·çš„æ—¶å€™ï¼Œåˆ™è°ƒç”¨ //ä¸€ä¸ªåŒ¿åç±»ï¼ŒåŒ¿åç±»æ˜¯ä¸€ä¸ªå›è°ƒç±»ï¼ŒJVMè´Ÿè´£æ‰§è¡Œå†…éƒ¨çš„å†…ä»£ç  GTK.g_signal_connect(window,\u0026quot;destroy\u0026quot;,new IGCallBack() { @Override public void execute(int instance,int eventData,Object object) { GTK.gtk_main_quit(); } },null); //åˆ›å»ºä¸€ä¸ªboxç”¨äºç››æ”¾æ§ä»¶ int box = GTK.gtk_box_new(GTK.GTK_ORIENTATION_HORIZONTAL,0); // åœ¨gtk_container_addåªèƒ½ç››æ”¾ä¸€ä¸ªå®¹å™¨æˆ–è€…æ§ä»¶ GTK.gtk_container_add(window,box); //æ˜¾ç¤ºbox GTK.gtk_widget_show(box); //GTKçš„ä¸»å¾ªç¯ç¨‹åº gtk_main();å¦‚æœä¸æ·»åŠ åˆ™é—ªé€€ã€‚ GTK.gtk_main(); //ä¸€èˆ¬åœ¨GTK.gtk_main()ä¹‹åä¸èƒ½æœ‰ç¨‹åº } }  è¿è¡Œæ•ˆæœä¸ºï¼š\né€šè¿‡æœ¬ä¾‹ï¼š 1.å¯ä»¥å­¦ä¹ com.rupeng.gtk4j.GTKå’ŒIGCallbackçš„ç®€ç­”ä½¿ç”¨ 2.GTKçš„é™æ€æ–¹æ³•åº“çš„è°ƒç”¨ 3.ä»¥åŠå½»åº•å…³é—­æ—¶å€™æ¶‰åŠåˆ°çš„å¯¹äºç‰¹æ®Šçš„åŒ¿åç±»çš„åˆ›å»ºå’Œå›è°ƒå‡½æ•°çš„ä½¿ç”¨ã€‚ 4.å¹¶å½’çº³å‡ºç®€å•çš„GTKåˆ¶ä½œæµç¨‹ä¸ºï¼š\n a. GTK.gtk_init(); b. ä¸­é—´çš„é¢å¤–è¿‡ç¨‹ c. GTK.gtk_widget_show(window) ä»¥åŠGTK.gtk_widget_show(å…¶ä»–æ§ä»¶) d. GTK.g_signal_connect(window,\u0026quot;destroy\u0026quot;,new IGCallBack() { @Override public void execute(int instance,int eventData,Object object) { GTK.gtk_main_quit(); } },null); æ¥å…³é—­çª—å£ e: GTK.gtk_container_addï¼ˆwindow,box) å¹¶showä¸€ä¸‹ã€‚ f: GTK.gtk_main(); å¯åŠ¨å¾ªç¯çº¿ç¨‹  åœ¨ä½¿ç”¨com.rupeng.gtk4j.Utilsé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š import com.rupeng.gtk4j.Utils; ä¸€ç›´å€’ä¸è¿›å»(è¿™ä¹Ÿè¯´æ˜ä¸€ç‚¹ æˆ‘ä»¬åœ¨ä½¿ç”¨com.rupeng.gtk4jçš„æ—¶å€™ï¼Œä¸éœ€è¦ä½¿ç”¨Utilsè¿™ä¸ªç±») äºæ˜¯æŸ¥äº†ä¸€ä¸‹Utilsç±»çš„å®ç° class Utils { \u0026hellip; } å¤åˆ¶ä»£ç \nåŸæ¥ä¸æ˜¯å…¬æœ‰ç±»ï¼Œå¹¶ä¸”ä¸å¤„äºåŒä¸€ä¸ªåŒ…ä¸‹ï¼Œç›¸äº’ä¹‹é—´ä¸èƒ½è®¿é—®ã€‚é»˜è®¤çš„Utilsæ˜¯ defaultä¿®é¥°ç¬¦ï¼ˆdefaulté™åˆ¶åœ¨åŒåŒ…å†…ï¼ˆåŒä¸€å±±å¯¨ï¼‰ï¼‰ï¼Œå¯¹äºæˆ‘ä»¬ä½¿ç”¨è€…éœ€è¦ç®¡ä¸¤ä¸ªé—®é¢˜1ï¼šå¯å¦ç»§æ‰¿ï¼Ÿ 2ï¼šå¯å¦è®¿é—® ä¸ç®¡ä»–ä»¬å¦‚ä½•è¿›è¡Œåˆ†åŒ…ã€‚å¦‚æœç«™åœ¨æ›´é«˜çš„é«˜åº¦ï¼Œå°±éœ€è¦æœ‰åº§å±±é›•çš„é£èŒƒï¼Œç»Ÿä¸€ä¸œåŒ—18åº§å±±å¯¨ï¼ˆå‡è®¾åº§å±±é›•æ‹¥æœ‰æ­¤æŠ€èƒ½ï¼Œå±±å¯¨ä¹‹é—´å¦‚ä½•è®¿é—®ï¼Œå¦‚ä½•ç»§æ‰¿ç”±ä»–è¯´äº†ç®—ï¼‰ã€‚\nåœ¨ä½¿ç”¨ç±»çš„æ—¶å€™ï¼Œå¾—é—®è‡ªå·±ï¼Œâ€œå“ªä¸ªå±±å¯¨çš„ï¼Ÿâ€ â€œå¯å¦ç»§æ‰¿ï¼Ÿâ€ â€œå¯å¦è®¿é—®â€ï¼ˆåªæœ‰publicæ”¯æŒä¸åŒåŒ…çš„è®¿é—®ï¼ˆè®¿é—®æ˜¯æŒ‡ç›´æ¥å¯ä»¥new \u0026hellip;ï¼‰ï¼Œprotectedæ˜¯åœ¨ä¸åŒåŒ…çš„æƒ…å†µå…è®¸ç»§æ‰¿(jç»§æ‰¿æ˜¯æŒ‡å¯ä»¥extends)ï¼‰\nå¤§éƒ¨åˆ†æƒ…å†µæˆ‘ä»¬æ˜¯åœ¨ä¸åŒåŒ…ä¸‹è¿›è¡Œè°ƒç”¨ï¼Œæ‰€ä»¥ä¸€èˆ¬æ˜¯publicå’Œprotectedã€‚\nå°éƒ¨åˆ†æƒ…å†µä¸‹ æˆ‘ä»¬åœ¨è‡ªå·±å»ºåŒ…çš„æ—¶å€™ï¼Œä½¿ç”¨ defaultæˆ–è€…private\nåœ¨å¤ä¹ äº†ä¸€ä¸‹åŒ…çš„æœºåˆ¶ï¼Œæ‰¾åˆ°äº†ä¸€å¼ å¥½çš„æ€»ç»“å›¾ï¼š ","date":1431327520,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327520,"objectID":"8519b38b192a9a60548fc9b9286dc41f","permalink":"/blog/2015/05/11/1yue-26ri-javaban-bi-ji/","publishdate":"2015-05-11T14:58:40+08:00","relpermalink":"/blog/2015/05/11/1yue-26ri-javaban-bi-ji/","section":"archives","summary":"","tags":null,"title":"1æœˆ26æ—¥Javaç­ç¬”è®°","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"ç¬¬ä¸€éƒ¨åˆ†ï¼šç¬”è®° å¼•ç”¨æ¨è€å¸ˆç¬”è®°ï¼Œçš„ç¡®ç»å…¸ 1ã€GTKå‘½åè§„åˆ™ 1ï¼‰ä¸€èˆ¬ä»¥gtk_å¼€å¤´ 2ï¼‰gtk_widget_ä»£è¡¨è¿™ä¸ªå‡½æ•°å¯ä»¥åº”ç”¨äºGtkWidgetåŠæ‰€æœ‰å­ç±»ã€‚gtk_containerä»£è¡¨è¿™ä¸ªå‡½æ•°å¯ä»¥åº”ç”¨äºGtkContaineråŠæ‰€æœ‰å­ç±»ã€‚ 3ï¼‰gtk***_newï¼Œåˆ›å»ºä¸€ä¸ªæ§ä»¶å¹¶ä¸”è¿”å›å®ƒçš„æ ‡è¯†(ç¼–å·)ã€‚ 4ï¼‰gtk_AAA_get_BBBï¼Œä»AAAç±»å‹çš„æ§ä»¶çš„æ ‡è¯†è·å¾—æ§ä»¶çš„BBBå±æ€§çš„å€¼ï¼›gtk_AAA_set_BBBï¼Œè®¾ç½®æŒ‡å®šæ ‡è¯†çš„ç±»å‹ä¸ºAAAçš„æ§ä»¶çš„BBBå±æ€§çš„å€¼\nåˆ†æä¸Šè¿°ç»“è®ºï¼š a. çš„ç¡®åŸå§‹çš„gtkç¨‹åºéƒ½æ˜¯ä»¥gtk_å¼€å¤´çš„ ï¼Œè€Œç°åœ¨com.rupeng.gtk4j.*ï¼Œåˆ™æ˜¯åˆ©ç”¨GTKè¿™ä¸ªç±»å°è£…èµ·æ¥è¿™äº›æ–¹æ³•ã€‚ b. ä¸€èˆ¬çš„è§„å¾‹éƒ½æ˜¯gtk_widget_å¼€å¤´è¡¨ç¤ºç»§æ‰¿GtkWidgetåŠæ‰€æœ‰å­ç±»ï¼Œæ‰€ä»¥éœ€è¦æœ‰ä¸€å¼ GTKçš„æ€»ä½“ç»§æ‰¿å›¾ çœ‹ æ€»ä½“ç»§æ‰¿å›¾.gif è¯´æ˜ï¼šä¹Ÿå°±æ˜¯è¯´åœ¨æ€è€ƒwidgetçš„æ—¶å€™ï¼Œä¸€èˆ¬æ¥ç€æ€è€ƒContainerã€Entryã€Label,é’ˆå¯¹Containeræœ‰éœ€è¦æ€è€ƒBin\\Box\\Grid\\Fixedï¼Œé’ˆå¯¹Binæœ‰éœ€è¦æ¥ç€æ€ è€ƒWindow|NoteBook|,ScrolledWindow|Button,é’ˆå¯¹Windowæœ‰éœ€è¦æ¥ç€æ€è€ƒDialog\n c. ä¹‹æ‰€ä»¥æ˜¯gtk_***_new_*** æ˜¯å› ä¸º***æ—¢å¯ä»¥ä»£è¡¨ gtk_window_new ä¹Ÿå¯ä»¥ä»£è¡¨gtk_progress_bar_new gtk_check_box_new gtk_button_new_with_label gtk_toggle_button_newç­‰ã€‚ d. Gtk_AAA_get|set_BBB å…¶å®AAAä¸€èˆ¬ä»£è¡¨æ§ä»¶ BBBä¸€èˆ¬ä»£è¡¨å±æ€§ï¼Œä¹Ÿå¯ä»¥ä»£è¡¨åœ°æ–¹ æ¯”å¦‚ gtk_screen_get_width() gtk_entry_set_max_length gtk_widget_set_visible() Gtk_tool_item_set_toolkit_item AAAä¹Ÿå¯ä»¥æœ‰ä¸¤ä¸ª_è¿æ¥ã€‚   GTKçš„ä½¿ç”¨æ¡†æ¶ï¼š //åˆå§‹åŒ– GTK.gtk_init(); //å»ºç«‹çª—å£ è®¾ç½®æˆstatic int windowå˜é‡ window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); //è®¾ç½®çª—å£åç§° GTK.gtk_window_set_title(window, \u0026ldquo;è®¡ç®—å™¨v1.0\u0026rdquo;); //æ·»åŠ çª—å£ GTK.gtk_widget_show(window);\n //å…³é—­å¯¹è¯æ¡† GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); //ç½‘æ ¼å¸ƒå±€ ç›’å­å¸ƒå±€ å›ºå®šå¸ƒå±€ã€‚ã€‚ã€‚ å½“å‰é€‰æ‹©ç½‘æ ¼å¸ƒå±€ int houseGrid = GTK.gtk_grid_new(); //è½½å…¥æ§ä»¶ //çœç•¥ ä¸€ä¸‡è¡Œä»£ç ã€‚ã€‚ã€‚ã€‚ //è½½å…¥åˆ°windowså½“ä¸­ GTK.gtk_container_add(window, houseGrid); //å¯åŠ¨å¾ªç¯ GTK.gtk_main();  GTK.gtk_container_add(window,box1) ;åœ¨ä¸€ä¸ªmainä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡gtk_container_add..\n CheckBox int gtk_check_button_new_with_label(String label) CheckButtonç»§æ‰¿è‡ªToggleButton æ‰€ä»¥å¯ä»¥ä½¿ç”¨ void gtk_toggle_button_set_active(int toggle_button, boolean is_active) è®¾ç½®æ˜¯å¦é€‰ä¸­ boolean gtk_toggle_button_get_active(int toggle_button) è·å¾—æ˜¯å¦é€‰ä¸­\n  5.gtk_entry_new åŸºæœ¬çš„æ–‡æœ¬æ¡†è®¾ç½® ä½¿ç”¨void gtk_label_set_text(int label, String str)ä¿®æ”¹Labelçš„æ–‡æœ¬å†…å®¹ void gtk_entry_set_max_length(int entry, int max)è®¾ç½®è¾“å…¥æ¡†æœ€å¤§çš„å®½åº¦ void gtk_entry_set_text(int entry, String text)è®¾ç½®è¾“å…¥æ¡†çš„æ–‡æœ¬ String gtk_entry_get_text(int entry)è·å¾—è¾“å…¥æ¡†çš„æ–‡æœ¬å€¼\nå¯†ç æ–‡æœ¬æ¡†è®¾ç½®ï¼š void gtk_entry_set_visibility(int entry,boolean visible)å½“æŠŠvisibleè®¾ç½®ä¸ºfalseçš„æ—¶å€™è¾“å…¥çš„å†…å®¹éƒ½ä¼šæ˜¾ç¤ºæˆ gtk_entry_set_invisible_char(int entry,char inv_char)è®¾ç½®çš„å­—ç¬¦ã€‚ç”¨äºå®ç°å¯†ç æ¡†\nç¬¬äºŒéƒ¨åˆ†ï¼š ä½œä¸š\ncase1: å›ºå®šå¸ƒå±€çš„æµ‹è¯•\n/** * @author å¶æ˜­è‰¯ * @version v1.0 */ import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; //import com.rupeng.gtk4j.Utils; public class TestGtkWidgetFixedLayout {\n /** * @param args */ public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_init(); int window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); // åŸæ¥è¿˜æœ‰ä¸ªPOPUPä¼°è®¡æ˜¯å³é”®èœå• GTK.gtk_widget_show(window); GTK.gtk_window_set_title(window, \u0026quot;éœœé›ª\u0026quot;); // widgetä¸‹æ²¡æœ‰ åªæœ‰åœ¨windowä¸‹æœ‰ã€‚ // GTK.gtk_window_set_position(window, GTK.GTK_WIN_POS_CENTER); GTK.gtk_window_set_position(window, GTK.GTK_WIN_POS_CENTER_ALWAYS); //GTK.gtk_window_set_resizable(window, true); //é»˜è®¤å¯ä»¥æ‹‰ä¼¸ // é»˜è®¤çš„çª—å£å¯ä»¥æœ€å¤§åŒ–ï¼Œ GTK.gtk_widget_set_maximize(widget) //æ–°å»ºäº†ä¸€ä¸ªæ–‡æœ¬æ¡† int entry1 = GTK.gtk_entry_new(); GTK.gtk_widget_show(entry1); //æ–°å»ºäº†ä¸€ä¸ªbutton int button1 = GTK.gtk_button_new_with_label(\u0026quot;click me\u0026quot;); GTK.gtk_widget_show(button1); //æ–°å»ºäº†ä¸€ä¸ªæ ‡ç­¾ int label1 = GTK.gtk_label_new(\u0026quot;è¯·è¾“å…¥ï¼š\u0026quot;); GTK.gtk_widget_show(label1); // å®‰é™çš„å…³é—­å¯¹è¯æ¡† GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); //int box1= GTK.gtk_box_new(GTK., spacing) //æ–°åŠ äº†ä¸€ä¸ªhouse ç”¨æ¥æ•´ç§Ÿç»™æ–‡æœ¬æ¡† +button+label int house = GTK.gtk_fixed_new(); GTK.gtk_fixed_put(house, entry1,0,0); GTK.gtk_fixed_put(house,button1,50,0); GTK.gtk_fixed_put(house,label1,0,100); //å¾ˆéš¾é€‚åº”å±å¹•å¤§å°ï¼ï¼æ‰€ä»¥ä¸€èˆ¬å¾ˆå°‘ç”¨ GTK.gtk_widget_show(house); GTK.gtk_container_add(window,house); GTK.gtk_main(); }  } å¤åˆ¶ä»£ç \ncase2 ç›’å­å¸ƒå±€çš„æµ‹è¯•\n/** * @author å¶æ˜­è‰¯ * @version v1.0 */ import java.awt.AWTException; import java.awt.Robot;\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; //import com.rupeng.gtk4j.Utils; public class TestGtkWidgetBoxLayout {\n /** * @param args */ public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_init(); int window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); // åŸæ¥è¿˜æœ‰ä¸ªPOPUPä¼°è®¡æ˜¯å³é”®èœå• GTK.gtk_widget_show(window); GTK.gtk_window_set_title(window, \u0026quot;éœœé›ª\u0026quot;); // widgetä¸‹æ²¡æœ‰ åªæœ‰åœ¨windowä¸‹æœ‰ã€‚ // GTK.gtk_window_set_position(window, GTK.GTK_WIN_POS_CENTER); GTK.gtk_window_set_position(window, GTK.GTK_WIN_POS_CENTER_ALWAYS); //GTK.gtk_window_set_resizable(window, true); //é»˜è®¤å¯ä»¥æ‹‰ä¼¸ // é»˜è®¤çš„çª—å£å¯ä»¥æœ€å¤§åŒ–ï¼Œ GTK.gtk_widget_set_maximize(widget) //æ–°å»ºäº†ä¸€ä¸ªæ–‡æœ¬æ¡† int entry1 = GTK.gtk_entry_new(); GTK.gtk_widget_show(entry1); //æ–°å»ºäº†ä¸€ä¸ªbutton int button1 = GTK.gtk_button_new_with_label(\u0026quot;click me\u0026quot;); GTK.gtk_widget_show(button1); //æ–°å»ºäº†ä¸€ä¸ªæ ‡ç­¾ int label1 = GTK.gtk_label_new(\u0026quot;è¯·è¾“å…¥ï¼š\u0026quot;); int label2 = GTK.gtk_label_new(\u0026quot;\u0026quot;); int label3 = GTK.gtk_label_new(\u0026quot;\u0026quot;); // æ˜¾ç¤ºæ ‡ç­¾ GTK.gtk_widget_show(label1); GTK.gtk_widget_show(label2); GTK.gtk_widget_show(label3); // å®‰é™çš„å…³é—­å¯¹è¯æ¡† GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); //int box1= GTK.gtk_box_new(GTK., spacing) //æ–°åŠ äº†ä¸€ä¸ªhouse ç”¨æ¥æ•´ç§Ÿç»™æ–‡æœ¬æ¡† +button+label // gtk_box_new çš„ç¬¬ä¸€ä¸ªå‚æ•° ä¸€èˆ¬æ˜¯ä¸¤ç§èµ‹å€¼æ–¹å¼GTK.GTK_ORIENTATION_HORIZONTALå’Œ_VERTICAL // ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºçš„é—´éš”space,å¦‚æœè®¾ç½®ä¸º5åˆ™ä¸º5ptçš„é—´éš” int houseApple = GTK.gtk_box_new(GTK.GTK_ORIENTATION_HORIZONTAL, 0); int houseBanana = GTK.gtk_box_new(GTK.GTK_ORIENTATION_HORIZONTAL, 0); int houseTree = GTK.gtk_box_new(GTK.GTK_ORIENTATION_VERTICAL, 0); //æ°´å¹³house GTK.gtk_box_pack_start(houseApple, label1, true, true, 0); GTK.gtk_box_pack_start(houseApple,entry1 , true, true, 0); GTK.gtk_box_pack_start(houseBanana,label2 , true, true, 0); GTK.gtk_box_pack_start(houseBanana,button1 , true, true, 0); GTK.gtk_box_pack_start(houseBanana,label3 , true, true, 0); //å‚ç›´house GTK.gtk_box_pack_start(houseTree, houseApple, true, true, 0); GTK.gtk_box_pack_start(houseTree, houseBanana, true, true, 0); // æ˜¾ç¤ºä¸‰ä¸ªå®¹å™¨ çš„house GTK.gtk_widget_show(houseApple); GTK.gtk_widget_show(houseBanana); GTK.gtk_widget_show(houseTree); GTK.gtk_container_add(window,houseTree); GTK.gtk_main(); }  } å¤åˆ¶ä»£ç \ncase3 ç½‘æ ¼å¸ƒå±€çš„æµ‹è¯•\n/** * @author å¶æ˜­è‰¯ * @version v1.0 * @version v1.1 æ”¹è¿›äº†å¯†ç æ¡†\n*/ import java.awt.AWTException; import java.awt.Robot;\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; //import com.rupeng.gtk4j.Utils; public class TestGtkWidgetGridLayout {\n /** * @param args */ public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_init(); int window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); // åŸæ¥è¿˜æœ‰ä¸ªPOPUPä¼°è®¡æ˜¯å³é”®èœå• GTK.gtk_widget_show(window); GTK.gtk_window_set_title(window, \u0026quot;éœœé›ª\u0026quot;); // widgetä¸‹æ²¡æœ‰ åªæœ‰åœ¨windowä¸‹æœ‰ã€‚ // GTK.gtk_window_set_position(window, GTK.GTK_WIN_POS_CENTER); GTK.gtk_window_set_position(window, GTK.GTK_WIN_POS_CENTER_ALWAYS); //GTK.gtk_window_set_resizable(window, true); //é»˜è®¤å¯ä»¥æ‹‰ä¼¸ // é»˜è®¤çš„çª—å£å¯ä»¥æœ€å¤§åŒ–ï¼Œ GTK.gtk_widget_set_maximize(widget) // å®‰é™çš„å…³é—­å¯¹è¯æ¡† GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); //int box1= GTK.gtk_box_new(GTK., spacing) //æ–°åŠ äº†ä¸€ä¸ªç½‘æ ¼å±‹å­ int houseGrid = GTK.gtk_grid_new(); // æ˜¾ç¤º çš„houseGrid GTK.gtk_widget_show(houseGrid); // 0å¼€å¤´æ˜¯ç¨‹åºå‘˜çš„æƒ¯ä¾‹ testGtk(houseGrid,0); landInternet(houseGrid,2); GTK.gtk_container_add(window,houseGrid); GTK.gtk_main(); } //æ–°å»ºä¸€ä¸ªæµ‹è¯•çš„ç•Œé¢ /** * * @param houseGrid æ•´ç§Ÿçš„å¤§æˆ¿å­ è¡¨ç¤ºgtk_grid_newçš„è¿”å›å€¼ * @param start åœ¨houseGridåˆ†é…åˆ°çš„ç¬¬å‡ è¡Œå¼€å§‹ç¼–å· */ public static void testGtk(int houseGrid,int start) { //æ–°å»ºäº†ä¸€ä¸ªæ–‡æœ¬æ¡† int entry1 = GTK.gtk_entry_new(); GTK.gtk_widget_show(entry1); //æ–°å»ºäº†ä¸€ä¸ªbutton int button1 = GTK.gtk_button_new_with_label(\u0026quot;click me\u0026quot;); GTK.gtk_widget_show(button1); //æ–°å»ºäº†ä¸€ä¸ªæ ‡ç­¾ int label1 = GTK.gtk_label_new(\u0026quot;è¯·è¾“å…¥ï¼š\u0026quot;); int label2 = GTK.gtk_label_new(\u0026quot;\u0026quot;); int label3 = GTK.gtk_label_new(\u0026quot;\u0026quot;); // æ˜¾ç¤ºæ ‡ç­¾ GTK.gtk_widget_show(label1); GTK.gtk_widget_show(label2); GTK.gtk_widget_show(label3); //æ•´ç§Ÿåˆ°housegrid // gtk_grid_attach(int grid, int child, int left,int top, int width, int height); GTK.gtk_grid_attach(houseGrid, label1, 0, start, 1, 1); GTK.gtk_grid_attach(houseGrid, entry1, 1, start, 1, 1); GTK.gtk_grid_attach(houseGrid, button1, 1, start+1, 1, 1); } //æ–°å»ºä¸€ä¸ªç™»é™†ç•Œé¢çš„GTK public static void landInternet(int houseGrid,int start) { //æ–°å»ºäº†ä¸€ä¸ªæ–‡æœ¬æ¡† int entry1 = GTK.gtk_entry_new(); int entry2 = GTK.gtk_entry_new(); //å¢åŠ äº†æ–‡æœ¬æ¡†çš„å¯†ç æ¡†çš„è®¾ç½®y2, false); //å¯ä»¥è®¾ç½®æ˜¾ç¤ºçš„ GTK.gtk_entry_set_visibility(entry2,false); //å­—ç¬¦ é»˜è®¤çš„å¯†ç æ¡†ä¸º* GTK.gtk_entry_set_invisible_char(entry2, '1'); //åªèƒ½æ˜¯å­—ç¬¦ ä¸èƒ½æ˜¯\u0026quot;1\u0026quot; //æ–°å»ºäº†ä¸€ä¸ªbutton int buttonEnter = GTK.gtk_button_new_with_label(\u0026quot;ç™»é™†\u0026quot;); int buttonClosed = GTK.gtk_button_new_with_label(\u0026quot;å–æ¶ˆ\u0026quot;); int checkbox1= GTK.gtk_check_button_new_with_label(\u0026quot;æ˜¯å¦ä¿å­˜å¯†ç \u0026quot;); //æ–°å»ºäº†ä¸€ä¸ªæ ‡ç­¾ int label1 = GTK.gtk_label_new(\u0026quot;ç”¨æˆ·åï¼š\u0026quot;); int label2 = GTK.gtk_label_new(\u0026quot;å¯†ç  ï¼š\u0026quot;); //ä¸ºä»€ä¹ˆè¦å£°æ˜ä¸ºfinalæš‚æ—¶ä¸æ˜¯ç‰¹åˆ«æ¸…æ¥š final int label3 = GTK.gtk_label_new(\u0026quot;\u0026quot;); // æ˜¾ç¤ºæ ‡ç­¾ GTK.gtk_widget_show(entry1); GTK.gtk_widget_show(entry2); GTK.gtk_widget_show(label1); GTK.gtk_widget_show(label2); GTK.gtk_widget_show(label3); GTK.gtk_widget_show(checkbox1); GTK.gtk_widget_show(buttonEnter); GTK.gtk_widget_show(buttonClosed); //æ•´ç§Ÿåˆ°houseGrid GTK.gtk_grid_attach(houseGrid, label1, 0, start, 1, 1); GTK.gtk_grid_attach(houseGrid, entry1, 1, start, 1, 1); GTK.gtk_grid_attach(houseGrid, label2, 0, start+1, 1, 1); GTK.gtk_grid_attach(houseGrid, entry2, 1, start+1, 1, 1); GTK.gtk_grid_attach(houseGrid, checkbox1, 1, start+2, 1, 1); GTK.gtk_grid_attach(houseGrid, buttonEnter, 1, start+3, 1, 1); GTK.gtk_grid_attach(houseGrid, buttonClosed, 2, start+3, 1, 1); GTK.gtk_grid_attach(houseGrid, label3, 1, start+5, 1, 1); // è¿›è¡ŒæŒ‰é’®çš„äº‹ä»¶è¿æ¥ GTK.g_signal_connect(buttonEnter,\u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ System.out.println(\u0026quot;ä½ ç‚¹å‡»äº†ç™»é™†\u0026quot;); GTK.gtk_label_set_text(label3, \u0026quot;ä½ ç‚¹å‡»äº†ç™»é™†\u0026quot;); } },null); GTK.g_signal_connect(buttonClosed,\u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ System.out.println(\u0026quot;ä½ ç‚¹å‡»äº†å…³é—­\u0026quot;); GTK.gtk_label_set_text(label3, \u0026quot;ä½ ç‚¹å‡»äº†å…³é—­\u0026quot;); } },null); }  } å¤åˆ¶ä»£ç \ncase4 checkBoxæ¨¡æ‹Ÿ å®‰è£…ç•Œé¢ import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; /** * */\n/** * @author å¶æ˜­è‰¯ * @version v1.0 */ public class TestGtkCheckBox {\n /** * @param args */ private static int window ; private static int box; public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ // gtkHead(window,\u0026quot;gtkCheckboxæµ‹è¯•\u0026quot;); GTK.gtk_init(); window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); GTK.gtk_window_set_title(window, \u0026quot;hello\u0026quot;); GTK.gtk_widget_show(window); GTK.g_signal_connect(window,\u0026quot;destroy\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } },null); box = GTK.gtk_box_new(GTK.GTK_ORIENTATION_VERTICAL, 0); int box2= GTK.gtk_box_new(GTK.GTK_ORIENTATION_VERTICAL,0); int box1= GTK.gtk_box_new(GTK.GTK_ORIENTATION_VERTICAL,0); testGtkCheckBox(window,box2); testGtkCheckBoxInstall(window,box1); GTK.gtk_box_pack_start(box, box2, false, false, 0); GTK.gtk_box_pack_start(box, box1, false, false, 0); GTK.gtk_container_add(window, box); GTK.gtk_widget_show(box); GTK.gtk_main(); } public static void testGtkCheckBox(int window,int box2) { int cbMan = GTK.gtk_check_button_new_with_label(\u0026quot;ç”·\u0026quot;); int cbWoman = GTK.gtk_check_button_new_with_label(\u0026quot;å¥³\u0026quot;); GTK.gtk_box_pack_start(box2, cbMan, false,false , 0); GTK.gtk_box_pack_start(box2, cbWoman, false,false , 0); GTK.gtk_widget_show(cbMan); GTK.gtk_widget_show(cbWoman); GTK.gtk_widget_show(box2); } public static void testGtkCheckBoxInstall(int window,int box1) { int entryLicense = GTK.gtk_entry_new(); GTK.gtk_entry_set_text(entryLicense, \u0026quot;äº§å“ä½¿ç”¨å£°æ˜:\\n å°Šé‡ISISå›½é™…æ ‡å‡†\u0026quot;); //å®šä¹‰æ§ä»¶ int boxInner = GTK.gtk_box_new(GTK.GTK_ORIENTATION_HORIZONTAL, 0); //ä¸ºä»€ä¹ˆè¦ä¿®æ”¹ä¸ºç»ˆæ€ final int cbAgree = GTK.gtk_check_button_new_with_label(\u0026quot;æˆ‘åŒæ„ä¸Šé¢çš„åè®®\u0026quot;); final int btnInstall = GTK.gtk_button_new_with_label(\u0026quot;install\u0026quot;); int btnClosed = GTK.gtk_button_new_with_label(\u0026quot;close\u0026quot;); GTK.gtk_widget_set_sensitive(btnInstall, false); //æ·»åŠ æ§ä»¶ GTK.gtk_box_pack_start(box1, entryLicense, false,false , 0); GTK.gtk_box_pack_start(box1, cbAgree, false,false, 0); GTK.gtk_box_pack_start(boxInner, btnInstall, false,false,0); GTK.gtk_box_pack_start(boxInner, btnClosed, false,false,0); GTK.gtk_box_pack_start(box1, boxInner, false,false , 0); //æ˜¾ç¤ºæ§ä»¶ GTK.gtk_widget_show(entryLicense); GTK.gtk_widget_show(cbAgree); GTK.gtk_widget_show(btnInstall); GTK.gtk_widget_show(btnClosed); GTK.gtk_widget_show(boxInner); GTK.gtk_widget_show(box1); //æ·»åŠ äº‹ä»¶ GTK.g_signal_connect(cbAgree, \u0026quot;clicked\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ boolean isChecked = GTK.gtk_toggle_button_get_active(cbAgree); //å†™äº†gtk_checkboxå‘ç°æ²¡æœ‰setå‘½ä»¤ äºæ˜¯ç”¨äº†widget.. GTK.gtk_widget_set_sensitive(btnInstall, isChecked); } }, null); }  } å¤åˆ¶ä»£ç \né€šè¿‡ä¸Šé¢çš„ç»ƒä¹ ï¼š å­¦ä¹ äº†GTKæ¡†æ¶çš„ç¼–ç¨‹æ–¹å¼ï¼ŒæŒæ¡äº† label,entry,checkbox(ç»§æ‰¿toggle_button),Box Layout, Grid Layout , Fixed Layoutçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬clicked,destroyè¿™ä¸¤ä¸ªä¿¡å·çš„äº‹ä»¶å¤„ç†ã€‚ å¦å¤–æ‹“å±•çš„å­¦ä¹ äº†åŒ¿åç±» new IGCallback(){..}çš„ä½¿ç”¨æ–¹æ³•ã€‚\n","date":1431327520,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327520,"objectID":"647ecb5ba6b914af8dae6a66189e261b","permalink":"/blog/2015/05/11/1yue-28ri-javaban-bi-ji-ti-jiao-tie/","publishdate":"2015-05-11T14:58:40+08:00","relpermalink":"/blog/2015/05/11/1yue-28ri-javaban-bi-ji-ti-jiao-tie/","section":"archives","summary":"","tags":null,"title":"1æœˆ28æ—¥Javaç­ç¬”è®°æäº¤å¸–","type":"archives"},{"authors":null,"categories":["JavaBasic"],"content":"ç¬¬ä¸€éƒ¨åˆ†ï¼šç¬”è®° First: SpinBox èƒŒæ™¯ï¼šspinButton æ§åˆ¶äº†æ–‡æœ¬æ¡†çš„æ•°å­—ï¼Œæ‰€ä»¥ä¸éœ€è¦ç ”ç©¶entryçš„æ•°å­—é™åˆ¶å½¢å¼\nç¬¬ä¸€ç‚¹ï¼šå¾®è°ƒæŒ‰é’®ï¼ˆSpinButtonï¼‰ä»GtkEntryç»§æ‰¿ï¼Œåªèƒ½è¾“å…¥æ•°å­—ã€‚ åŸºæœ¬å‡½æ•°ä½¿ç”¨è¯´æ˜ï¼š 1. int gtk_spin_button_new_with_range(double min,double max,double step) åˆ›å»ºå®ä¾‹ã€‚minæœ€å°å€¼ã€maxæœ€å¤§å€¼ã€å•æ­¥å˜åŒ–å€¼ã€‚doubleå¯ä»¥ç”¨æ¥è¡¨ç¤ºå°æ•°ã€‚ 2. double gtk_spin_button_get_value(int spin_button) è·å¾—doubleç±»å‹çš„å€¼ã€‚ int gtk_spin_button_get_value_as_int(int spin_button) ä»¥æ•´æ•°ç±»å‹è·å¾—å€¼ï¼Œå°æ•°éƒ¨åˆ†å¿½ç•¥ã€‚ void gtk_spin_button_set_value(int spin_button,double value) è®¾ç½®å€¼\nå­¦ä¼šï¼šè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚1 .æŸ¥æ–‡æ¡£ 2.google+baidu 3.FAQ\nSecond: ComboBox ç¬¬ä¸€ç‚¹ï¼šGtkComboBoxTextä»GtkComboBoxç»§æ‰¿ï¼ŒGtkComboBoxTextå­ç±»å®šä¹‰ComboBox. åŸºæœ¬å‡½æ•°ï¼š(ä½¿ç”¨è¯´æ˜) ç¬¬ä¸€æ­¥ï¼š int gtk_combo_box_text_new()åˆ›å»ºä¸€ä¸ªComboBoxTextï¼› ç¬¬äºŒéƒ¨ï¼š void gtk_combo_box_text_append(int combo_box,String id, String text) é™„åŠ ä¸€ä¸ªæ–‡æœ¬ï¼Œå¹¶ä¸”ç»™å®ƒè®¾å®šä¸€ä¸ªè‡ªå®šä¹‰idï¼ˆStringç±»å‹ï¼‰ã€‚ ç¬¬ä¸‰æ­¥ï¼š String gtk_combo_box_get_active_id(int combo_box)å¾—åˆ°é€‰ä¸­è¡Œçš„è‡ªå®šä¹‰id gtk_combo_box_set_active_id(int combo_box,String active_id)è®¾å®šè‡ªå®šä¹‰idç­‰äºactive_idçš„é¡¹è¢«é€‰ä¸­ void gtk_combo_box_text_remove_all(int combo_box)æ¸…é™¤æ‰€æœ‰å†…å®¹ ç¬¬å››æ­¥ å½“é€‰ä¸­ä¸€è¡Œçš„æ—¶å€™ä¼šå‘å‡ºâ€œchangedâ€ä¿¡å· GTK.g_signal_connect(â€¦.);\nThird: GTKIMAGE ç¬¬ä¸€ç‚¹ï¼šGtkImage å¯ä»¥åˆ†ä¸ºä¸‰ç§æ–¹å¼åŠ è½½å›¾ç‰‡èµ„æºï¼ŒåŒ…æ‹¬ï¼šç£ç›˜æ–‡ä»¶ï¼ˆfileï¼‰ï¼Œé¡¹ç›®èµ„æºï¼ˆresourceï¼‰ï¼Œå†…ç½®å›¾ç‰‡ï¼ˆSTOCKï¼‰ï¼Œå¯¹åº”ä¸‰ä¸ª å®¶åœ¨å‡½æ•°gtk_image_set_from_fileï¼Œgtk_image_set_from_resourceï¼Œgtk_image_set_from_stockã€‚\nåŸºæœ¬å‡½æ•°ä½¿ç”¨è¯´æ˜ï¼š 1. void gtk_image_set_from_file(int image, String filename)ä»æ–‡ä»¶å…¨è·¯å¾„ä¸ºfilenameçš„æ–‡ä»¶ä¸­åŠ è½½å›¾ç‰‡ã€‚æ³¨æ„æ–‡ä»¶è·¯å¾„çš„è½¬ä¹‰é—®é¢˜ï¼Œâ€œ\\â€å› ä¸ºâ€œ\\â€æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œåé¢è®²å­—ç¬¦ä¸²ä¼šè¯¦ç»†è®²ã€‚\n void gtk_image_set_from_resource(int image, String resName)ä»é¡¹ç›®èµ„æºä¸­åŠ è½½å›¾ç‰‡ï¼Œæ ¼å¼\u0026rdquo;com/rupeng/1.jpg\u0026rdquo;ï¼ˆå…¶ä¸­com/rupengè¡¨ç¤ºcom.rupengåŒ…ï¼‰ï¼Œä¸è¦ä»¥/å¼€å¤´ï¼ŒæŠŠèµ„æºæ”¾åœ¨srcé‡Œé¢ï¼ï¼ï¼ pngå¯ä»¥èƒŒæ™¯é€æ˜ï¼Œjpgã€jpegeå‹ç¼©å›¾ç‰‡, Gif åŠ¨æ€å›¾ç‰‡\n GTK.gtk_image_new_from_stock(GTK.GTK_STOCK_ABOUT, GTK.GTK_ICON_SIZE_LARGE_TOOLBAR); ä»GTKçš„å†…ç½®å›¾ç‰‡è½½å…¥å›¾ç‰‡ã€‚ è®¾ç½®æŒ‰é’®å›¾ç‰‡ä¸€èˆ¬æ˜¯ GTK.GTK_STOCK* è®¾ç½®å¤§å°çš„æ—¶å€™ åˆ©ç”¨GTK.GTK_ICONå°±å¯ä»¥å¼¹å‡ºå‡ ä¸ªã€‚ã€‚ã€‚\n  Fourth: GTKIMAGEçš„ç®€å•è°ƒç ” /** * æŠŠèµ„æºresNameä¿å­˜åˆ°ä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œè¿”å›å€¼ä¸ºä¸´æ—¶æ–‡ä»¶çš„å…¨è·¯å¾„ * * @param resName * com/rupeng/a.mp3è¿™æ ·çš„æ ¼å¼ï¼Œæ³¨æ„ä¸ä»¥/å¼€å¤´ * @return */ public synchronized static String saveResourceToTemp(String resName) { // å¦‚æœresnameä¹‹å‰é‡Šæ”¾åˆ°è¿‡ä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶ä¸”ä¸´æ—¶æ–‡ä»¶è¿˜å­˜åœ¨ï¼Œåˆ™ä¸å†é‡å¤é‡Šæ”¾ï¼Œç›´æ¥è¿”å›ä¹‹å‰çš„æ–‡ä»¶ï¼Œä»¥æé«˜æ€§èƒ½ if (resourceCache.containsKey(resName)) //èµ„æºç¼“å­˜ä¸­åˆ¤æ–­æ˜¯å¦å­˜åœ¨å›¾ç‰‡ { String cachedFileName = resourceCache.get(resName);//ä»èµ„æºç¼“å­˜ä¸­è·å–å›¾ç‰‡ if (new File(cachedFileName).exists()) { return cachedFileName; } else { resourceCache.remove(resName); } } // è·å–æ–‡ä»¶æ‰©å±•å String[] strs = resName.split(\u0026rdquo;\\.\u0026ldquo;); //åˆ©ç”¨å­—ç¬¦ä¸²çš„splitå‡½æ•° String extesion = strs[strs.length - 1]; //è·å–æœ€åä¸€ä¸ª\n InputStream inStream = GTK.class.getClassLoader().getResourceAsStream(resName);//ClassLoader.getSystemResourceAsStream(resName);  //é€šè¿‡åå°„æœºåˆ¶ è‡ªåŠ¨è½½å…¥å›¾ç‰‡èµ„æºçš„ï¼©ï½ï½ï½•ï½”ï¼³ï½”ï½’ï½…ï½ï½ ï¼ï¼ï¼åˆ©ç”¨æ–‡ä»¶åå­—ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªæ‚¬å¿µ\nif (inStream == null) { throw new RuntimeException(\u0026ldquo;æ‰¾ä¸åˆ°èµ„æº\u0026rdquo; + resName); } try {\n//java 1.6åï¼Œè¿è¡Œåœ¨Windowsä¸‹ï¼Œå¦‚æœå¯ç”¨äº†Guestè´¦æˆ·ï¼Œåˆ™ç”±äºcreateTempFileè°ƒç”¨äº†SecureRandom ä¼šå¡5ç§’é’Ÿ //å› æ­¤ç¬¬ä¸€æ¬¡è¿è¡ŒcreateTempFileä¼šéå¸¸æ…¢ //å‚è€ƒï¼šhttp://stackoverflow.com/questions/2608763/why-does-first-call-to-java-io-file-createtempfilestring-string-file-take-5-se //File tempFile = File.createTempFile(\u0026ldquo;temp\u0026rdquo;, \u0026ldquo;.\u0026rdquo; + extesion); //å› æ­¤ä¸ç”¨createTempFileï¼Œæ”¹ç”¨å­˜åˆ°é¡¹ç›®çš„restempæ–‡ä»¶å¤¹ä¸‹ File resDir = new File(System.getProperty(\u0026ldquo;user.dir\u0026rdquo;), \u0026ldquo;gtk/temp\u0026rdquo;);// *.dllæ”¾çš„æ–‡ä»¶å¤¹ if (!resDir.exists()) { resDir.mkdirs();//åˆ›å»ºä¸´æ—¶æ–‡ä»¶å¤¹ } inStream.mark(Integer.MAX_VALUE);ã€€ï¼ï¼ä¸æ¸…æ¥šä½œä½•ç”¨ String md5 = Utils.getMD5(inStream);//ç”¨md5å€¼åšæ–‡ä»¶å inStream.reset();//æŒ‡é’ˆå¤ä½åˆ°markæ ‡è®°çš„ä½ç½®ï¼Œä¾¿äºåé¢ä¿å­˜æ–‡ä»¶\n // å¦‚æœä¸åŠ æ‰©å±•åï¼Œmci_send_commandåˆ™æ— æ³•è¯†åˆ«æ–‡ä»¶ç±»å‹ File tempFile = new File(resDir,md5+\u0026quot;.\u0026quot;+extesion); //åˆ›å»ºä¸€ä¸ªFile FileOutputStream outStream = new FileOutputStream(tempFile); //å†™å‡ºä¸€ä¸ªæ–‡ä»¶ Utils.copy(inStream,outStream); //æŠŠå½“å‰çš„å›¾ç‰‡èµ„æºé èƒŒå‡ºå» inStream.close(); outStream.close(); resourceCache.put(resName, tempFile.getAbsolutePath());//æ”¾åˆ°ç»å¯¹è·¯å¾„ä¸‹ return tempFile.getAbsolutePath(); //æœ€ç»ˆè¿”å›å›¾ç‰‡ } catch (IOException e) { throw new RuntimeException(e); } } /** * ä»javaèµ„æºä¸­åŠ è½½èµ„æºå›¾ç‰‡ç”Ÿæˆimageã€‚ä¸æ˜¯gtkæä¾›çš„nativeæ–¹æ³• * * @param resName * @return */ public static int gtk_image_new_from_resource(String resName) { return gtk_image_new_from_file(saveResourceToTemp(resName));  å¤åˆ¶ä»£ç \nFifth: TextView èƒŒæ™¯ï¼šå…ˆå‰entryæ˜¯å½“è¡Œæ–‡æœ¬æ¡† TextViewåŸºæœ¬å‡½æ•°ä½¿ç”¨è¯´æ˜ï¼š ç¬¬ä¸€æ­¥ï¼š åˆ›å»ºå¤šè¡Œæ–‡æœ¬å¤¹ int gtk_text_view_new()åˆ›å»ºå¤šè¡Œæ–‡æœ¬ ç¬¬äºŒæ­¥ï¼š è¿›è¡Œæ¥æœ¬çš„è®¾ç½® void gtk_text_view_set_wrap_mode(int text_view,int wrap_mode) è®¾ç½®è‡ªåŠ¨æ¢è¡Œæ¨¡å¼ã€‚wrap_modeå¯é€‰å€¼ï¼šGTK_WRAP_NONE(ä¸è‡ªåŠ¨æ¢è¡Œ)ï¼›GTK_WRAP_CHAR(åœ¨ä»»æ„å­—ç¬¦æ¢è¡Œ)ï¼›GTK_WRAP_WORD(ä¿æŒå•è¯å®Œæ•´æ€§æ¢è¡Œï¼Œ)ï¼›GTK_WRAP_WORD_CHAR (å°½é‡ä¿æŒå•è¯å®Œæ•´æ€§ï¼Œå®åœ¨ä¸è¡Œä¹Ÿå¯ä»¥åœ¨ä»»æ„å­—ç¬¦æ¢è¡Œ)\nç¬¬ä¸‰æ­¥ï¼š æ·»åŠ æ–‡å­—å’Œè¯»å–æ–‡å­— è¯»å–æ–‡å­— String text = GTK.gtk_text_buffer_get_text(textbuffer); æ·»åŠ æ–‡å­— GTK.gtk_text_buffer_set_text(textbuffer, loveWords) é¢å¤–çš„æ ‡æ³¨ï¼š ä¸€èˆ¬ç¬¬ä¸‰æ­¥é‡‡ç”¨çš„æ–¹å¼é€‚åˆæ¯”è¾ƒå°çš„Stringï¼Œå¯¹äºè¾ƒå¤§çš„æƒ…å†µå¯ä»¥å†åŠ ä¸€ä¸ªTextIterç±»ä¼¼å¯ä»¥åœ¨å¤šè¡Œæ–‡æœ¬æˆ–è€…å¯¹è¯æ¡† æ·»åŠ ä¸€ä¸ªæ»šåŠ¨æ¡ScrolledBar TextIterä½¿ç”¨è¯´æ˜ï¼š 1ï¼šTextIteræ˜¯å¯¹TextBufferéå†çš„éå†å™¨ã€‚ 2ï¼š int gtk_text_iter_new()åˆ›å»ºä¸€ä¸ªç©ºçš„TextIterï¼Œä½¿ç”¨å®Œåç”¨gtk_text_iter_free(int iter)é‡Šæ”¾ã€‚ 3ï¼š void gtk_text_buffer_get_start_iter(int buffer,int iter)ç”¨bufferè¿™ä¸ªTextBufferçš„å¼€å§‹ä½ç½®å»åˆå§‹åŒ–iterè¿™ä¸ªTextIterï¼ˆå¼€å¤´æ’å…¥ æˆ–è€…ç”¨backwardæŒ‡é’ˆ å‘åè¯»ï¼‰ void gtk_text_buffer_get_end_iter(int buffer, int iter)ç”¨bufferè¿™ä¸ªTextBufferçš„ç»“æŸä½ç½®å»åˆå§‹åŒ–iterè¿™ä¸ªTextIterï¼ˆç»“å°¾æ’å…¥ æˆ–è€…ä¹Ÿå¯ä»¥ç”¨forwardæŒ‡é’ˆ å‘å‰è¯»ï¼‰ (*)ç”¨gtk_text_buffer_getiter*ç³»åˆ—æ–¹æ³•ç§»åŠ¨è¿­ä»£å™¨çš„ä½ç½®ã€‚ 4. void gtk_text_buffer_insert(int buffer, int iter,String text)åœ¨bufferè¿™ä¸ªTextBufferçš„iterè¿™ä¸ªTextIterçš„å½“å‰ä½ç½®æ’å…¥æ–‡æœ¬text\n5 gtk_text_iter_free(int iter) é‡Šæ”¾textIterèµ„æº\nSixth: Cairo 1ï¼š ç”»å¸ƒæ¿ æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œä¸€èˆ¬ä»…ä»…åœ¨ç¬¬ä¸€æ­¥åˆ›å»ºçš„æ—¶å€™ä½¿ç”¨ GTK.gtk_drawing_area(); 2ï¼š ç”»å¸ƒç¯å¢ƒ(Cairo_t)ï¼Œç¼ºä¸äº†ï¼Œåœ¨javaçš„Cairoä¸­ç›´æ¥åœ¨GTK.g_signal_connectä¸­çš„drawæ—¶é—´ä¸­ä½¿ç”¨ï¼Œå¯¹åº”executeå‡½æ•°çš„ eventsData å³ä½¿Cairo_t ,åŸºæœ¬ä¸Šæ¯ä¸€ä¸ªCairoå‡½æ•°éƒ½å°‘ä¸äº†ct 3: com.rupeng.gtk4j.Cairoç®€åŒ–äº†ç»˜ç”»çš„æ­¥éª¤ï¼Œä¸€èˆ¬æ˜¯ 3.1 è®¾ç½®ç”»ç¬”çš„å¤§å° Cairo.cairo_set_fontâ€¦ 3.2 è®¾ç½®ç”»ç¬”çš„é¢œè‰² 3.3 Cairo.cairo_move_to(crâ€¦) 3.4 Cairo.cairo_line_to(cr,,,)ç”»ç›´çº¿ 3.5 Cairo.cairo_arc(cr,â€¦)ç”»åœ†å¼§ è®°ä½æœ€å¥½æ˜¯åˆ†æ®µç»˜åˆ¶ä¹Ÿå°±æ˜¯æ¯ç”»ä¸€ä¸ªåŠ å…¥ GTK.gtk_stroke() æˆ–è€…GTK.gtk_fill(); 3.6 Cairo.cairo_rec ç”»çŸ©å½¢ 3.7 æ–‡å­—çš„ç»˜åˆ¶ 3.7.1 //ç”»æ–‡å­— 3.7.2 Cairo.cairo_move_to(eventData, 180, 260); 3.7.3 Cairo.cairo_set_source_rgb(eventData, 0.4, 0.3, 0.2); 3.7.4 Cairo.cairo_set_font_size(eventData, 16); 3.7.5 //é€‰æ‹©æ–‡å­—ç±»å‹ 3.7.6 Cairo.cairo_select_font_face(eventData, \u0026ldquo;å®‹ä½“\u0026rdquo;, Cairo.CAIRO_FONT_SLANT_ITALIC, Cairo.CAIRO_FONT_WEIGHT_BOLD); 3.7.7 Cairo.cairo_show_text(eventData,\u0026ldquo;ä¸‰æ¯›çš„è‡ªç”»åƒ\u0026rdquo;); 3.7.8 //Cairo.cairo_stroke(eventData); //ä¸éœ€è¦è¿™å¥è¯ä¹Ÿå¯ä»¥\nç¬¬äºŒéƒ¨åˆ†ï¼šä½œä¸š First: SpinBox çš„ä½¿ç”¨ case1: ä½¿ç”¨æ§ä»¶\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; /** * @author å¶æ˜­è‰¯ * @version SpinBoxv1.0 */ public class TestGTKSPinBox { /** * @param args * */ static int window; static int gridHouse; public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_init(); window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); GTK.gtk_window_set_title(window, \u0026quot;æµ‹è¯•SpinBox\u0026quot;); GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); GTK.gtk_widget_show(window); //å¼€å§‹å»ºç«‹å¸ƒå±€ gridHouse = GTK.gtk_grid_new(); GTK.gtk_widget_show(gridHouse); //å¼€å§‹æ’å…¥æ§ä»¶ int start = 0 ; createSpinbox(window,gridHouse,start); GTK.gtk_container_add(window, gridHouse); GTK.gtk_main(); } /** * * @param window çª—å£æ ‡è¯† * @param gridHouse æ•´ç§Ÿæˆ¿æ ‡è¯† * @param start æ•´ç§Ÿæˆ¿çš„èµ·å§‹ä½ç½® */ public static void createSpinbox(int window,int gridHouse,int start) { //å®šä¹‰æ§ä»¶ int label1 = GTK.gtk_label_new(\u0026quot;æ•°å­—ï¼š0-9\u0026quot;); int label2 = GTK.gtk_label_new(\u0026quot;èŒƒå›´: -10~10\u0026quot;); final int labelSpinbox = GTK.gtk_label_new(\u0026quot;\u0026quot;); final int labelSpinboxApple = GTK.gtk_label_new(\u0026quot;\u0026quot;); final int spinbox = GTK.gtk_spin_button_new_with_range(0, 9, 1); final int spinboxApple = GTK.gtk_spin_button_new_with_range(-10, 10, 0.1); //æ·»åŠ æ§ä»¶åˆ°æ•´ç§Ÿæˆ¿é—´ GTK.gtk_grid_attach(gridHouse, label1, 0, start, 1, 1); GTK.gtk_grid_attach(gridHouse, spinbox, 1, start, 1, 1); GTK.gtk_grid_attach(gridHouse, label2, 0, start+1, 1, 1); GTK.gtk_grid_attach(gridHouse, spinboxApple, 1, start+1, 1, 1); GTK.gtk_grid_attach(gridHouse, labelSpinbox, 0, start+3, 1, 1); GTK.gtk_grid_attach(gridHouse, labelSpinboxApple, 0, start+4, 1, 1); //æ˜¾ç¤ºæ§ä»¶ GTK.gtk_widget_show(label1); GTK.gtk_widget_show(spinbox); GTK.gtk_widget_show(label2); GTK.gtk_widget_show(spinboxApple); GTK.gtk_widget_show(labelSpinbox); GTK.gtk_widget_show(labelSpinboxApple); GTK.gtk_widget_show(gridHouse); //æ·»åŠ äº‹ä»¶ GTK.g_signal_connect(spinbox, \u0026quot;changed\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ double apple = GTK.gtk_spin_button_get_value(spinbox); GTK.gtk_label_set_text(labelSpinbox, \u0026quot;æ‚¨å½“å‰é€‰æ‹©çš„æ•°å­—å¼ï¼š\u0026quot;+Double.toString(apple)); } }, null); GTK.g_signal_connect(spinboxApple, \u0026quot;changed\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ double apple = GTK.gtk_spin_button_get_value(spinboxApple); GTK.gtk_label_set_text(labelSpinboxApple, \u0026quot;æ‚¨å½“å‰é€‰æ‹©çš„æ•°å­—å¼ï¼š\u0026quot;+Double.toString(apple)); } }, null); } }  case2 ï¼šå»ºè®®å››åˆ™è¿ç®—å™¨ï¼ŒåŠ ä¸ŠæŒ‡æ•°å’Œå–ä½™\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; /** * @author å¶æ˜­è‰¯ * @version SpinBoxv1.0 */ public class TestGTKSPinBox { /** * @param args * */ static int window; static int gridHouse; public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_init(); window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); GTK.gtk_window_set_title(window, \u0026quot;æµ‹è¯•SpinBox\u0026quot;); GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); GTK.gtk_widget_show(window); //å¼€å§‹å»ºç«‹å¸ƒå±€ gridHouse = GTK.gtk_grid_new(); GTK.gtk_widget_show(gridHouse); //å¼€å§‹æ’å…¥æ§ä»¶ int start = 0 ; createSpinbox(window,gridHouse,start); GTK.gtk_container_add(window, gridHouse); GTK.gtk_main(); } /** * * @param window çª—å£æ ‡è¯† * @param gridHouse æ•´ç§Ÿæˆ¿æ ‡è¯† * @param start æ•´ç§Ÿæˆ¿çš„èµ·å§‹ä½ç½® */ public static void createSpinbox(int window,int gridHouse,int start) { //å®šä¹‰æ§ä»¶ int label1 = GTK.gtk_label_new(\u0026quot;æ•°å­—ï¼š0-9\u0026quot;); int label2 = GTK.gtk_label_new(\u0026quot;èŒƒå›´: -10~10\u0026quot;); final int labelSpinbox = GTK.gtk_label_new(\u0026quot;\u0026quot;); final int labelSpinboxApple = GTK.gtk_label_new(\u0026quot;\u0026quot;); final int spinbox = GTK.gtk_spin_button_new_with_range(0, 9, 1); final int spinboxApple = GTK.gtk_spin_button_new_with_range(-10, 10, 0.1); //æ·»åŠ æ§ä»¶åˆ°æ•´ç§Ÿæˆ¿é—´ GTK.gtk_grid_attach(gridHouse, label1, 0, start, 1, 1); GTK.gtk_grid_attach(gridHouse, spinbox, 1, start, 1, 1); GTK.gtk_grid_attach(gridHouse, label2, 0, start+1, 1, 1); GTK.gtk_grid_attach(gridHouse, spinboxApple, 1, start+1, 1, 1); GTK.gtk_grid_attach(gridHouse, labelSpinbox, 0, start+3, 1, 1); GTK.gtk_grid_attach(gridHouse, labelSpinboxApple, 0, start+4, 1, 1); //æ˜¾ç¤ºæ§ä»¶ GTK.gtk_widget_show(label1); GTK.gtk_widget_show(spinbox); GTK.gtk_widget_show(label2); GTK.gtk_widget_show(spinboxApple); GTK.gtk_widget_show(labelSpinbox); GTK.gtk_widget_show(labelSpinboxApple); GTK.gtk_widget_show(gridHouse); //æ·»åŠ äº‹ä»¶ GTK.g_signal_connect(spinbox, \u0026quot;changed\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ double apple = GTK.gtk_spin_button_get_value(spinbox); GTK.gtk_label_set_text(labelSpinbox, \u0026quot;æ‚¨å½“å‰é€‰æ‹©çš„æ•°å­—å¼ï¼š\u0026quot;+Double.toString(apple)); } }, null); GTK.g_signal_connect(spinboxApple, \u0026quot;changed\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ double apple = GTK.gtk_spin_button_get_value(spinboxApple); GTK.gtk_label_set_text(labelSpinboxApple, \u0026quot;æ‚¨å½“å‰é€‰æ‹©çš„æ•°å­—å¼ï¼š\u0026quot;+Double.toString(apple)); } }, null); } } ``` Second: ComboBox case1: ä½ æƒ³è¦è´­ä¹°çš„æ˜¯ä»€ä¹ˆæ°´æœï¼Ÿ combobox  java import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack;\n/** * @author å¶æ˜­è‰¯ * @version ComboBoxText v1.0 * */ public class TestGtkComboBoxText {\n /** * @param args */ static int window; //static int box; static int gridHouse; public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_init(); window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); GTK.gtk_window_set_title(window, \u0026quot;SpinBoxV1.0\u0026quot;); GTK.gtk_widget_show(window); //å®‰å…¨å…³é—­GTK GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); String names[] = {\u0026quot;Andy\u0026quot;,\u0026quot;Jerry\u0026quot;,\u0026quot;laulence\u0026quot;,\u0026quot;Lucy\u0026quot;,\u0026quot;jack\u0026quot;}; // åˆ›å»ºå¸ƒå±€ gridHouse = GTK.gtk_grid_new(); GTK.gtk_widget_show(gridHouse); createComboBoxText(window,gridHouse,0); //yij loadComboBox(window, names, gridHouse, 2); //ä¹‹æ‰€ä»¥ä»2å¼€å§‹ æ˜¯å› ä¸º 0 1å·²ç»è¢«ä½¿ç”¨ GTK.gtk_container_add(window,gridHouse); //å¯åŠ¨å¾ªç¯ GTK.gtk_main(); } public static void createComboBoxText(int window,int gridHouse,int start) { final int comboBoxBig = GTK.gtk_combo_box_text_new(); GTK.gtk_combo_box_text_append_text(comboBoxBig, \u0026quot;è‹¹æœ\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxBig, \u0026quot;é¦™è•‰\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxBig, \u0026quot;è‘¡è„\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxBig, \u0026quot;æ©˜å­\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxBig, \u0026quot;èœœæŸš\u0026quot;); final int comboBoxApple = GTK.gtk_combo_box_text_new(); GTK.gtk_combo_box_text_append_text(comboBoxApple, \u0026quot;çº¢è‹¹æœ\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxApple, \u0026quot;é’è‹¹æœ\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxApple, \u0026quot;å°è‹¹æœ\u0026quot;); final int comboBoxBanana = GTK.gtk_combo_box_text_new(); GTK.gtk_combo_box_text_append_text(comboBoxBanana, \u0026quot;å¤©å®è•‰\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxBanana, \u0026quot;ç«¹è•‰\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxBanana, \u0026quot;å¤§é¦™è•‰\u0026quot;); final int comboBoxGrape = GTK.gtk_combo_box_text_new(); GTK.gtk_combo_box_text_append_text(comboBoxGrape, \u0026quot;é’è‘¡è„\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxGrape, \u0026quot;ç«ç‘°é¦™\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxGrape, \u0026quot;å·¨å³°\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxGrape, \u0026quot;å¤é»‘\u0026quot;); final int comboBoxOrange = GTK.gtk_combo_box_text_new(); GTK.gtk_combo_box_text_append_text(comboBoxOrange, \u0026quot;å°æ©˜å­\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxOrange, \u0026quot;å¤§æ©˜å­\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxOrange, \u0026quot;å¹´æ©˜\u0026quot;); final int comboBoxYouzi = GTK.gtk_combo_box_text_new(); GTK.gtk_combo_box_text_append_text(comboBoxYouzi, \u0026quot;ç™½å¿ƒèœœæŸš\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxYouzi, \u0026quot;çº¢å¿ƒèœœæŸš\u0026quot;); GTK.gtk_combo_box_text_append_text(comboBoxYouzi, \u0026quot;è‡­èœœæŸš\u0026quot;); /* int label1 = GTK.gtk_label_new(\u0026quot;æ‚¨å½“å‰æƒ³è¦è´­ä¹°çš„æ˜¯\u0026quot;+GTK.gtk_combo_box_text_get_active_text(comboBoxBig) +\u0026quot;ä¸‹çš„\u0026quot;+GTK.gtk_combo_box_text_get_active_text(comboBoxApple));*/ final int label1 = GTK.gtk_label_new(\u0026quot;æ‚¨å½“å‰æƒ³è¦è´­ä¹°çš„æ˜¯?\u0026quot;); // æ·»åŠ æ§ä»¶åˆ°æ•´ç§Ÿæˆ¿é—´ GTK.gtk_grid_attach(gridHouse, comboBoxBig, 0, start, 1, 1); GTK.gtk_grid_attach(gridHouse, comboBoxApple, 1, start, 1, 1); GTK.gtk_grid_attach(gridHouse, comboBoxBanana, 1, start, 1, 1); GTK.gtk_grid_attach(gridHouse, comboBoxGrape, 1, start, 1, 1); GTK.gtk_grid_attach(gridHouse, comboBoxOrange, 1, start, 1, 1); GTK.gtk_grid_attach(gridHouse, comboBoxYouzi, 1, start, 1, 1); GTK.gtk_grid_attach(gridHouse, label1, 0, start+1, 1, 1); //æ˜¾ç¤ºæ§ä»¶ GTK.gtk_widget_show(comboBoxBig); GTK.gtk_widget_show(comboBoxApple); GTK.gtk_widget_show(label1); //è®¾ç½®comboboxçš„æ¿€æ´»çŠ¶æ€ GTK.gtk_combo_box_set_active(comboBoxBig, 0); GTK.gtk_combo_box_set_active(comboBoxApple, 0); //æ·»åŠ äº‹ä»¶ GTK.g_signal_connect(comboBoxBig, \u0026quot;changed\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ String fruit = GTK.gtk_combo_box_text_get_active_text(comboBoxBig); if(fruit.equalsIgnoreCase(\u0026quot;è‹¹æœ\u0026quot;)) { helpFunction(comboBoxApple,label1); GTK.gtk_widget_hide(comboBoxBanana); GTK.gtk_widget_hide(comboBoxGrape); GTK.gtk_widget_hide(comboBoxOrange); GTK.gtk_widget_hide(comboBoxYouzi); }else if(fruit.equalsIgnoreCase(\u0026quot;é¦™è•‰\u0026quot;)) { helpFunction(comboBoxBanana,label1); GTK.gtk_widget_hide(comboBoxApple); GTK.gtk_widget_hide(comboBoxGrape); GTK.gtk_widget_hide(comboBoxOrange); GTK.gtk_widget_hide(comboBoxYouzi); }else if(fruit.equalsIgnoreCase(\u0026quot;è‘¡è„\u0026quot;)) { helpFunction(comboBoxGrape,label1); GTK.gtk_widget_hide(comboBoxApple); GTK.gtk_widget_hide(comboBoxBanana); GTK.gtk_widget_hide(comboBoxOrange); GTK.gtk_widget_hide(comboBoxYouzi); }else if(fruit.equalsIgnoreCase(\u0026quot;æ©˜å­\u0026quot;)) { helpFunction(comboBoxOrange,label1); GTK.gtk_widget_hide(comboBoxApple); GTK.gtk_widget_hide(comboBoxBanana); GTK.gtk_widget_hide(comboBoxGrape); GTK.gtk_widget_hide(comboBoxYouzi); } else if(fruit.equalsIgnoreCase(\u0026quot;èœœæŸš\u0026quot;)) { helpFunction(comboBoxYouzi,label1); GTK.gtk_widget_hide(comboBoxApple); GTK.gtk_widget_hide(comboBoxBanana); GTK.gtk_widget_hide(comboBoxGrape); GTK.gtk_widget_hide(comboBoxOrange); } } }, null); } public static void helpFunction(final int comboBoxText,final int label1) { GTK.gtk_widget_show(comboBoxText); GTK.gtk_combo_box_set_active(comboBoxText, 0); GTK.g_signal_connect(comboBoxText, \u0026quot;changed\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { String fruit = GTK.gtk_combo_box_text_get_active_text(comboBoxText); GTK.gtk_label_set_text(label1, \u0026quot;æ‚¨æƒ³è¦è´­ä¹°çš„\u0026quot;+fruit+\u0026quot;æ²¡æœ‰äº†ï¼è¯·åˆ°åˆ«å®¶è´­ä¹°\u0026quot;); }; }, null); } public static void loadComboBox(int window,String[] names, int gridHouse,int start) { int cmbApple = GTK.gtk_combo_box_text_new(); for(int i = 0 ; i \u0026lt; names.length; i++) { GTK.gtk_combo_box_text_append_text(cmbApple, names[i]); } GTK.gtk_widget_show(cmbApple); GTK.gtk_grid_attach(gridHouse, cmbApple, 0, start, 1, 1); }  }\n case2: çœå¸‚è”åŠ¨å™¨ ï¼ˆä¸Šä¸€æ¬¡çš„æ°´æœé€‰æ‹©å™¨ï¼Œæœªä½¿ç”¨idæ–¹æ³•ã€‚ã€‚ï¼‰  java import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; /** * */\n/** * @author å¶æ˜­è‰¯ * @version çœå¸‚è”åŠ¨å™¨ V1.0 * */ public class ProvincedSelect {\n /** * @param args */ static int window; static int gridHouse; static int cmbProvince; static int cmbCity; static int labelShow; public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //åˆå§‹åŒ– GTK.gtk_init(); //å»ºç«‹çª—å£ window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); //æ˜¾ç¤ºçª—å£ GTK.gtk_widget_show(window); // å®‰é™å…³é—­ GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); //å¸ƒå±€è®¾ç½® gridHouse = GTK.gtk_grid_new(); GTK.gtk_widget_show(gridHouse); //åŒ…å«æ•´ç§Ÿæˆ¿ GTK.gtk_container_add(window, gridHouse); //åˆ›å»ºæ§ä»¶ // labelShow = GTK.gtk_label_new(\u0026quot;\u0026quot;); cmbProvince = GTK.gtk_combo_box_text_new(); cmbCity = GTK.gtk_combo_box_text_new(); int start = 0; //æ·»åŠ æ§ä»¶ GTK.gtk_grid_attach(gridHouse, cmbProvince, 0, start, 1, 1); GTK.gtk_grid_attach(gridHouse, cmbCity, 0,start+1, 1, 1); GTK.gtk_grid_attach(gridHouse, labelShow, 1,start+2, 1, 1); //æ˜¾ç¤ºæ§ä»¶ GTK.gtk_widget_show(cmbProvince); GTK.gtk_widget_show(cmbCity); GTK.gtk_widget_show(labelShow); createProvince(window); //å¯åŠ¨å¾ªç¯ GTK.gtk_main(); } public static void createProvince(int window) { GTK.gtk_combo_box_text_append(cmbProvince, \u0026quot;fj\u0026quot;, \u0026quot;ç¦å»º\u0026quot;); GTK.gtk_combo_box_text_append(cmbProvince, \u0026quot;bj\u0026quot;, \u0026quot;åŒ—äº¬\u0026quot;); //GTK.gtk_combo_box_text_append(cmbProvince, \u0026quot;sh\u0026quot;, \u0026quot;ä¸Šæµ·\u0026quot;); GTK.gtk_combo_box_text_append(cmbProvince, \u0026quot;hn\u0026quot;, \u0026quot;æ²³å—\u0026quot;); GTK.gtk_combo_box_text_append(cmbProvince, \u0026quot;hb\u0026quot;, \u0026quot;æ²³åŒ—\u0026quot;); GTK.gtk_combo_box_text_append(cmbProvince, \u0026quot;sd\u0026quot;,\u0026quot;å±±ä¸œ\u0026quot;); GTK.gtk_combo_box_set_active_id(cmbProvince, \u0026quot;bj\u0026quot;);  //æ·»åŠ äº‹ä»¶ GTK.g_signal_connect(cmbProvince, \u0026ldquo;changed\u0026rdquo;, new IGCallBack() {\n @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ String province = GTK.gtk_combo_box_get_active_id(cmbProvince); if(province==null)return; System.out.println(province); GTK.gtk_combo_box_text_remove_all(cmbCity); //åˆ é™¤æ‰€æœ‰é¡¹ //GTK.gtk_combo_box_text_remove_all(cmbCity); //åˆ é™¤æ‰€æœ‰é¡¹ if(province.equals(\u0026quot;fj\u0026quot;)) { System.out.println(\u0026quot;ç¦å»ºæµ‹è¯•ä¸­\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;zhz\u0026quot;, \u0026quot;æ¼³å·\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;xm\u0026quot;, \u0026quot;å¦é—¨\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;fz\u0026quot;, \u0026quot;ç¦å·\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;qz\u0026quot;, \u0026quot;æ³‰å·\u0026quot;); }else if(province.equals(\u0026quot;bj\u0026quot;)) { System.out.println(\u0026quot;ç¦å»ºæµ‹è¯•ä¸­\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;cp\u0026quot;, \u0026quot;æ˜Œå¹³åŒº\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;hd\u0026quot;, \u0026quot;æµ·æ·€åŒº\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;tz\u0026quot;, \u0026quot;é€šå·åŒº\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;cy\u0026quot;, \u0026quot;æœé˜³åŒº\u0026quot;); }else if(province.equals(\u0026quot;hn\u0026quot;)) { System.out.println(\u0026quot;ç¦å»ºæµ‹è¯•ä¸­\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;zz\u0026quot;, \u0026quot;éƒ‘å·\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;zmd\u0026quot;, \u0026quot;é©»é©¬åº—\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;ny\u0026quot;, \u0026quot;å—é˜³\u0026quot;); }else if(province.equals(\u0026quot;hb\u0026quot;)) { System.out.println(\u0026quot;ç¦å»ºæµ‹è¯•ä¸­\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;sjz\u0026quot;, \u0026quot;çŸ³å®¶åº„\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;ts\u0026quot;, \u0026quot;å”å±±\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;qhd\u0026quot;, \u0026quot;ç§¦çš‡å²›\u0026quot;); }else if(province.equals(\u0026quot;sd\u0026quot;)) { System.out.println(\u0026quot;ç¦å»ºæµ‹è¯•ä¸­\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;jn\u0026quot;, \u0026quot;æµå—\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;qd\u0026quot;, \u0026quot;é’å²›\u0026quot;); GTK.gtk_combo_box_text_append(cmbCity, \u0026quot;yt\u0026quot;, \u0026quot;çƒŸå°\u0026quot;); } } }, null); //åŸæ¥removeä¹‹å ä¹Ÿæ˜¯ä¼šä¿ƒå‘cmbCityçš„ ä¿¡å· è€Œå¯¼è‡´æ”¹å˜ ï¼Œæ ¹æºåœ¨äºè¿™ä¸ª GTK.g_signal_connect(cmbCity, \u0026quot;changed\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ String tempProvince = GTK.gtk_combo_box_text_get_active_text(cmbProvince); int apple = GTK.gtk_combo_box_get_active(cmbCity); if(apple \u0026lt; 0) { System.out.println(\u0026quot;nothing in the city\u0026quot;); return; } String tempCity = GTK.gtk_combo_box_text_get_active_text(cmbCity); if(tempProvince==null||tempCity==null)return; //GTK.gtk_label_set_text(labelShow, \u0026quot;ä½ å‡†å¤‡å»\u0026quot;+tempProvince+tempCity); GTK.gtk_label_set_text(labelShow,tempProvince+tempCity); System.out.println(tempProvince); System.out.println(tempCity); } }, null); }  }\nThird: GTKIMAGE case1 ä¸‰ç§æ–¹å¼è¯»å…¥Image  java import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack;\n/** * @author å¶æ˜­è‰¯ * @version GtkImage v1.0 * */ public class TestGtkImage {\n /** * @param args */ static int window; static int gridHouse; public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_init(); window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); GTK.gtk_window_set_title(window, \u0026quot;GtkImage V1.0\u0026quot;); GTK.gtk_widget_show(window); //å®‰å…¨å…³é—­GTK GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); // åˆ›å»ºå¸ƒå±€ gridHouse = GTK.gtk_grid_new(); GTK.gtk_widget_show(gridHouse); int start = 0; createGtkImage(window,gridHouse,start); GTK.gtk_container_add(window,gridHouse); //å¯åŠ¨å¾ªç¯ GTK.gtk_main(); } public static void createGtkImage(int window,int gridHouse,int start) { int imgWall = GTK.gtk_image_new_from_file(\u0026quot;E:\\\\å¨±ä¹é¢‘é“\\\\å›¾ç‰‡é¢‘é“\\\\xin\\\\greatWall.jpg\u0026quot;); int imgHun = GTK.gtk_image_new_from_resource(\u0026quot;yumufeng.jpg\u0026quot;); int imgStock = GTK.gtk_image_new_from_stock(GTK.GTK_STOCK_ABOUT, GTK.GTK_ICON_SIZE_LARGE_TOOLBAR); int labelWall = GTK.gtk_label_new(\u0026quot;é€šè¿‡ç£ç›˜æ–‡ä»¶è¯»å…¥é•¿åŸç…§ç‰‡\u0026quot;); int labelHun = GTK.gtk_label_new(\u0026quot;é€šè¿‡é¡¹ç›®æ–‡ä»¶è¯»å…¥å©šçº±ç…§ç‰‡\u0026quot;); int labelStock = GTK.gtk_label_new(\u0026quot;é€šè¿‡GTKå†…ç½®å›¾ç‰‡æ–‡ä»¶è¯»å…¥å…³äºç…§ç‰‡\u0026quot;); //æ·»åŠ åˆ°æ•´ç§Ÿæˆ¿é—´ GTK.gtk_grid_attach(gridHouse, imgWall, 0, start+1, 1, 1); GTK.gtk_grid_attach(gridHouse, imgHun, 1, start+1, 1, 1); GTK.gtk_grid_attach(gridHouse, imgStock, 2, start+1, 1, 1); GTK.gtk_grid_attach(gridHouse, labelWall, 0, start, 1, 1); GTK.gtk_grid_attach(gridHouse, labelHun, 1, start, 1, 1); GTK.gtk_grid_attach(gridHouse, labelStock, 2, start, 1, 1); //æ˜¾ç¤ºæ§ä»¶ GTK.gtk_widget_show(imgWall); GTK.gtk_widget_show(imgHun); GTK.gtk_widget_show(imgStock); GTK.gtk_widget_show(labelWall); GTK.gtk_widget_show(labelHun); GTK.gtk_widget_show(labelStock); }  }\n case2 æŒ‰é’®å›¾ç‰‡  java import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack;\n/** * @author å¶æ˜­è‰¯ * @version ButtonImage v1.0 * */ public class TestGtkButtonImage {\n /** * @param args */ static int window; static int gridHouse; public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_init(); window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); GTK.gtk_window_set_title(window, \u0026quot;ButtonImage V1.0\u0026quot;); GTK.gtk_widget_show(window); //å®‰å…¨å…³é—­GTK GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); // åˆ›å»ºå¸ƒå±€ gridHouse = GTK.gtk_grid_new(); GTK.gtk_widget_show(gridHouse); int start = 0; createButtonImage(window,gridHouse,start); GTK.gtk_container_add(window,gridHouse); //å¯åŠ¨å¾ªç¯ GTK.gtk_main(); } public static void createButtonImage(int window,int gridHouse,int start) { int imgOpen = GTK.gtk_image_new_from_stock(GTK.GTK_STOCK_OPEN, GTK.GTK_ICON_SIZE_BUTTON); int imgClosed = GTK.gtk_image_new_from_stock(GTK.GTK_STOCK_CLOSE, GTK.GTK_ICON_SIZE_BUTTON); int imgFile = GTK.gtk_image_new_from_stock(GTK.GTK_STOCK_FILE, GTK.GTK_ICON_SIZE_BUTTON); int btnCommon = GTK.gtk_button_new_with_label(\u0026quot;æ™®é€šæŒ‰é’®\u0026quot;); int btnOpen = GTK.gtk_button_new_with_label(\u0026quot;æ‰“å¼€\u0026quot;); int btnClosed = GTK.gtk_button_new_with_label(\u0026quot;å…³é—­\u0026quot;); int btnFile = GTK.gtk_button_new_with_label(\u0026quot;æ–‡ä»¶\u0026quot;); GTK.gtk_button_set_image(btnOpen, imgOpen); GTK.gtk_button_set_image(btnClosed, imgClosed); GTK.gtk_button_set_image(btnFile, imgFile); //æ·»åŠ æ§ä»¶ //GTK.gtk_grid_attach(gridHouse, imgOpen, 0, start, 1, 1); GTK.gtk_grid_attach(gridHouse, btnCommon, 0, start, 1, 1); GTK.gtk_grid_attach(gridHouse, btnOpen, 1, start, 1, 1); GTK.gtk_grid_attach(gridHouse, btnClosed,2, start, 1, 1); GTK.gtk_grid_attach(gridHouse, btnFile,3, start, 1, 1); //æ˜¾ç¤ºæ§ä»¶ GTK.gtk_widget_show(btnOpen); GTK.gtk_widget_show(btnClosed); GTK.gtk_widget_show(btnCommon); GTK.gtk_widget_show(btnFile); GTK.gtk_button_set_image_position(btnClosed, GTK.GTK_POS_TOP); //GTK_POS GTK.gtk_button_set_image_position(btnFile, GTK.GTK_POS_RIGHT); }  }\nFourth: TextView case1 å¥³ç¥è¡¨è¾¾ç¥å™¨ï¼šLove you !My Girl  java import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack;\n/** * @author å¶æ˜­è‰¯ * @version TestView v1.0 */ public class GTKTestTextView {\n /** * @param args */ static int window; static int gridHouse; public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_init(); window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); GTK.gtk_window_set_title(window, \u0026quot;å¥³æœ‹å‹å‘Šç™½ç¥å™¨ V1.0\u0026quot;); GTK.gtk_widget_show(window); //å®‰å…¨å…³é—­GTK GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); // åˆ›å»ºå¸ƒå±€ gridHouse = GTK.gtk_grid_new(); GTK.gtk_widget_show(gridHouse); int start = 0; createTextView(window,gridHouse,start); GTK.gtk_container_add(window,gridHouse); //å¯åŠ¨å¾ªç¯ GTK.gtk_main(); } public static void createTextView(int window, int gridHouse, int start) { int imgYumu = GTK.gtk_image_new_from_resource(\u0026quot;yumufeng.jpg\u0026quot;); int tvGirl = GTK.gtk_text_view_new(); final int label = GTK.gtk_label_new(\u0026quot;\u0026quot;); int btnShow = GTK.gtk_button_new_with_label(\u0026quot;æ˜¾ç¤º\u0026quot;); GTK.gtk_text_view_set_wrap_mode(tvGirl, GTK.GTK_WRAP_WORD); //æ·»åŠ æ§ä»¶ GTK.gtk_grid_attach(gridHouse, imgYumu, 0, start, 1, 1); GTK.gtk_grid_attach(gridHouse, tvGirl, 0, start+1, 1, 1); GTK.gtk_grid_attach(gridHouse, label, 0 ,start+2, 1,1); GTK.gtk_grid_attach(gridHouse, btnShow, 1 ,start+2, 1,1); //æ˜¾ç¤ºæ§ä»¶ GTK.gtk_widget_show(imgYumu); GTK.gtk_widget_show(tvGirl); GTK.gtk_widget_show(label); GTK.gtk_widget_show(btnShow); //è¯»å–æ–‡æœ¬æ¡†é‡Œé¢çš„å†…å®¹ ï¼Œåªé€‚ç”¨å°é‡çš„æ–‡æœ¬ï¼Œä¸€èˆ¬ç”¨è¿­ä»£å™¨ //æ–¹æ³•1 å…ˆä»TextViewè·å–int TextBuffer // ç„¶åå†ä»TextBufferè·å–text final int textbuffer= GTK.gtk_text_view_get_buffer(tvGirl); String loveWords = \u0026quot;ä½ å°±åƒé‚£å¤©ä¸Šæ˜Ÿæ˜Ÿï¼Œç‚¹ç¼€ç€æˆ‘ä»¬ä¸¤çš„æ˜Ÿç©ºï¼Œç’€ç’¨å¤ºç›®ï¼›\u0026quot; + \u0026quot;æˆ‘æ„¿ä¸ä½ æºæ‰‹å…±åŒå¥‹è¿›ï¼ŒåŸå› å’Œä½ å…±è‚²æˆ‘ä»¬çš„sons and grils,\u0026quot; + \u0026quot;å»ºç«‹èµ·ä¸€ä¸ªå¹¸ç¦çš„å®¶åº­\u0026quot;; //å¯ä»¥ç›´æ¥é€šè¿‡ç¼“å†²åŒºç¼–å· è®¾ç½®ä¿¡æ¯ GTK.gtk_text_buffer_set_text(textbuffer, loveWords); //æ·»åŠ æŒ‰é’®äº‹ä»¶ GTK.g_signal_connect(btnShow, \u0026quot;clicked\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ String text = GTK.gtk_text_buffer_get_text(textbuffer); GTK.gtk_label_set_text(label, text); } }, null); }  }\n case2 : TextIter å®ç°æ·»åŠ love you å­—ç¬¦ä¸² å¹¶åŠ å…¥äº†æ»šåŠ¨æ¡ï¼Œå®ç°å¥³ç¥è¡¨è¾¾å™¨çš„å‡çº§ç‰ˆ  java import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack;\n/** * @author å¶æ˜­è‰¯ * @version TestView+TestIter v1.0 * @version TestView+TestIter v2.0 åŠ å…¥äº†æ»šåŠ¨æ¡æ“ä½œã€‚ */ public class GTKTestTextIter {\n /** * @param args */ static int window; static int gridHouse; static int scrolledBar; public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_init(); window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); GTK.gtk_window_set_title(window, \u0026quot;å¥³æœ‹å‹å‘Šç™½ç¥å™¨ V1.0\u0026quot;); GTK.gtk_widget_show(window); //å®‰å…¨å…³é—­GTK GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); // åˆ›å»ºå¸ƒå±€ gridHouse = GTK.gtk_grid_new(); GTK.gtk_widget_show(gridHouse); int start = 0; createTextView(window,gridHouse,start); GTK.gtk_container_add(window,gridHouse); //å¯åŠ¨å¾ªç¯ GTK.gtk_main(); } public static void createTextView(int window, int gridHouse, int start) { int imgYumu = GTK.gtk_image_new_from_resource(\u0026quot;yumufeng.jpg\u0026quot;); final int tvGirl = GTK.gtk_text_view_new(); final int label = GTK.gtk_label_new(\u0026quot;\u0026quot;); final int labelIter = GTK.gtk_label_new(\u0026quot;\u0026quot;); int btnShow = GTK.gtk_button_new_with_label(\u0026quot;æ˜¾ç¤º\u0026quot;); int btnShowIter = GTK.gtk_button_new_with_label(\u0026quot;è¿­ä»£å™¨æ’å…¥\u0026quot;); GTK.gtk_text_view_set_wrap_mode(tvGirl, GTK.GTK_WRAP_WORD); int scrollBar = 0 ; //æ·»åŠ æ§ä»¶ GTK.gtk_grid_attach(gridHouse, imgYumu, 0, start, 1, 1); createScrollBar(scrollBar,tvGirl,gridHouse,start); //GTK.gtk_grid_attach(gridHouse, tvGirl, 0, start+1, 1, 1); GTK.gtk_grid_attach(gridHouse, label, 0 ,start+2, 1,1); GTK.gtk_grid_attach(gridHouse, labelIter, 0 ,start+3, 1,1); GTK.gtk_grid_attach(gridHouse, btnShow, 1 ,start+2, 1,1); GTK.gtk_grid_attach(gridHouse, btnShowIter, 1 ,start+3, 1,1); //æ˜¾ç¤ºæ§ä»¶ GTK.gtk_widget_show(imgYumu); GTK.gtk_widget_show(tvGirl); GTK.gtk_widget_show(label); GTK.gtk_widget_show(btnShow); GTK.gtk_widget_show(labelIter); GTK.gtk_widget_show(btnShowIter); //è¯»å–æ–‡æœ¬æ¡†é‡Œé¢çš„å†…å®¹ ï¼Œåªé€‚ç”¨å°é‡çš„æ–‡æœ¬ï¼Œä¸€èˆ¬ç”¨è¿­ä»£å™¨ //æ–¹æ³•1 å…ˆä»TextViewè·å–int TextBuffer // ç„¶åå†ä»TextBufferè·å–text final int textbuffer= GTK.gtk_text_view_get_buffer(tvGirl); String loveWords = \u0026quot;ä½ å°±åƒé‚£å¤©ä¸Šæ˜Ÿæ˜Ÿï¼Œç‚¹ç¼€ç€æˆ‘ä»¬ä¸¤çš„æ˜Ÿç©ºï¼Œç’€ç’¨å¤ºç›®ï¼›\u0026quot; + \u0026quot;æˆ‘æ„¿ä¸ä½ æºæ‰‹å…±åŒå¥‹è¿›ï¼ŒåŸå› å’Œä½ å…±è‚²æˆ‘ä»¬çš„sons and grils,\u0026quot; + \u0026quot;å»ºç«‹èµ·ä¸€ä¸ªå¹¸ç¦çš„å®¶åº­\u0026quot;; //å¯ä»¥ç›´æ¥é€šè¿‡ç¼“å†²åŒºç¼–å· è®¾ç½®ä¿¡æ¯ GTK.gtk_text_buffer_set_text(textbuffer, loveWords); //æ·»åŠ æŒ‰é’®äº‹ä»¶ GTK.g_signal_connect(btnShow, \u0026quot;clicked\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ String text = GTK.gtk_text_buffer_get_text(textbuffer); GTK.gtk_label_set_text(label, text); } }, null); GTK.g_signal_connect(btnShowIter, \u0026quot;clicked\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ helpFunction(tvGirl); } }, null); } //å¦‚ä½•éå†è¯»å–textviewä¿¡æ¯ï¼Ÿï¼Ÿ å½“å‰åªèƒ½æ’å…¥ï¼Ÿ public static void helpFunction(int textview) { //TextIteræ˜¯ä¸€ä¸ªTextViewçš„è¿­ä»£å™¨ã€‚ int textBuffer = GTK.gtk_text_view_get_buffer(textview); int textIter = GTK.gtk_text_iter_new(); //è¿™æ˜¯ä¸€ä¸ªç©ºçš„iterï¼Œéœ€è¦ç”¨textBufferè¿›è¡Œèµ‹å€¼ GTK.gtk_text_buffer_get_end_iter(textBuffer, textIter);// æˆ–è€…textviewçš„textBufferçš„æœ«å°¾ï¼ GTK.gtk_text_buffer_insert(textBuffer, textIter, \u0026quot;I love you! Xinran\u0026quot;); //GTK.gtk_text_buffer_g GTK.gtk_text_iter_free(textIter); } public static void createScrollBar(int scrolledBar,int textview,int gridHouse,int start) { scrolledBar = GTK.gtk_scrolled_window_new(); GTK.gtk_widget_show(scrolledBar); GTK.gtk_grid_attach(gridHouse, scrolledBar, 0, start+1, 1, 1); GTK.gtk_widget_set_size_request(scrolledBar, 300, 50); GTK.gtk_container_add(scrolledBar,textview); }  }\n case3 : è®¡ç®—å™¨version 3.0 åŠ å…¥äº†ä¸€äº›Sinç­‰è®¡ç®—ç¬¦ ä»¥åŠTextView  java /** * @author å¶æ˜­è‰¯ * @version : è®¡ç®—å™¨v1.0 * @version : è®¡ç®—å™¨v 2.0 æ›¿æ¢æ‰entry é‡‡ç”¨äº†SpinBoxå’ŒComboBox * @version : è®¡ç®—å™¨v 3.0\n* 1.ä½¿ç”¨buttonè§¦å‘è®¡ç®—äº‹ä»¶ åŠ å…¥äº†ä¸‰è§’å‡½æ•°ã€å¯¹æ•°å‡½æ•°ç­‰çš„è®¡ç®—ï¼Œ * 2.ä½¿ç”¨TextView and TextIteræŠŠç»“æœè¾“å…¥åˆ°å…¶ä¸­ã€‚ã€‚ * 3.å¯¹äº\n* */ import javax.swing.JOptionPane;\nimport com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; //import java.math.*;\npublic class TestCalc3 {\n /** * @param args */ static int window; static boolean isEnter = false; public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //åˆå§‹åŒ– GTK.gtk_init(); //å»ºç«‹çª—å£ è®¾ç½®æˆstatic int windowå˜é‡ window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); //è®¾ç½®çª—å£åç§° GTK.gtk_window_set_title(window, \u0026quot;è®¡ç®—å™¨v3.0\u0026quot;); //æ·»åŠ çª—å£ GTK.gtk_widget_show(window); //å…³é—­å¯¹è¯æ¡† GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); //ç½‘æ ¼å¸ƒå±€ int houseGrid = GTK.gtk_grid_new(); //è½½å…¥è®¡ç®—æœºæ§ä»¶ Calc(window,houseGrid,0); //æœ‰ä¸¤è¡Œ specialCal(window,houseGrid,2); //æœ‰ä¸¤è¡Œ //è½½å…¥åˆ°windowså½“ä¸­ GTK.gtk_container_add(window, houseGrid); //å¯åŠ¨å¾ªç¯ GTK.gtk_main(); } /** * * @param window çª—å£çš„æ ‡è¯† * @param houseGrid æ•´ç§Ÿæˆ¿é—´çš„æ ‡è¯† * @param start è®¾ç½®æ•´ç§Ÿæˆ¿é—´çš„èµ·å§‹è¡Œæ•° */ public static void Calc(int window,int houseGrid,int start) { final int sbOne = GTK.gtk_spin_button_new_with_range(-32768, 32767, 1); final int sbAnother = GTK.gtk_spin_button_new_with_range(-32768, 32767, 1); GTK.gtk_spin_button_set_value(sbOne, 12.0); GTK.gtk_spin_button_set_value(sbAnother, 4.0); final int cbbOperator = GTK.gtk_combo_box_text_new(); GTK.gtk_combo_box_text_append_text(cbbOperator, \u0026quot;+\u0026quot;); GTK.gtk_combo_box_text_append_text(cbbOperator, \u0026quot;-\u0026quot;); GTK.gtk_combo_box_text_append_text(cbbOperator, \u0026quot;*\u0026quot;); GTK.gtk_combo_box_text_append_text(cbbOperator, \u0026quot;/\u0026quot;); GTK.gtk_combo_box_text_append_text(cbbOperator, \u0026quot;%\u0026quot;); GTK.gtk_combo_box_text_append_text(cbbOperator, \u0026quot;^\u0026quot;); GTK.gtk_combo_box_set_active(cbbOperator, 0); int btnEquals = GTK.gtk_button_new_with_label(\u0026quot;=\u0026quot;); final int label2 = GTK.gtk_label_new(\u0026quot;æˆ‘çŸ¥é“ç­”æ¡ˆæ˜¯ä»€ä¹ˆ\u0026quot;); int labelCommon = GTK.gtk_label_new(\u0026quot;æ™®é€šçš„å››åˆ™è¿ç®—ï¼š\u0026quot;); // Boxç”¨äºå­˜å‚¨ + - operator //åŠ å…¥æ•´ç§Ÿ GTK.gtk_grid_attach(houseGrid, labelCommon, 0, start, 1, 1); //åœ¨ä¸‹ä¸€è¡Œå†æ·»åŠ  start= start + 1; GTK.gtk_grid_attach(houseGrid, sbOne, 0, start, 1, 1); GTK.gtk_grid_attach(houseGrid, cbbOperator, 1, start, 1, 1);  // GTK.gtk_grid_attach(houseGrid, buttonPlus, 1, start, 1, 1); // GTK.gtk_grid_attach(houseGrid, buttonMinus, 1, start+1, 1, 1); GTK.gtk_grid_attach(houseGrid, sbAnother, 2, start, 1, 1); GTK.gtk_grid_attach(houseGrid, btnEquals, 3, start, 1, 1); GTK.gtk_grid_attach(houseGrid, label2, 4, start, 1, 1);\n //æ˜¾ç¤ºæ§ä»¶ GTK.gtk_widget_show(labelCommon); GTK.gtk_widget_show(sbOne); GTK.gtk_widget_show(sbAnother); GTK.gtk_widget_show(cbbOperator); GTK.gtk_widget_show(btnEquals); GTK.gtk_widget_show(label2); //GTK.gtk_widget_show(box); GTK.gtk_widget_show(houseGrid); //åŠ å…¥äº‹ä»¶æ§åˆ¶æœºåˆ¶ GTK.g_signal_connect(btnEquals, \u0026quot;clicked\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ double plus1 = GTK.gtk_spin_button_get_value(sbOne); double plus2 = GTK.gtk_spin_button_get_value(sbAnother); //å¢åŠ ä¸€ä¸ª åªè¯»æ¨¡å¼çš„entry //GTK.gtk_editable_set_editable(entryOne, false); //åªè¯»ä¸èƒ½å†™å…¥ã€‚ String cbbString = GTK.gtk_combo_box_text_get_active_text(cbbOperator); //panduan(plus1,entryOne); panduan(plus2,sbAnother); double sum1 = 0; if(cbbString.equalsIgnoreCase(\u0026quot;+\u0026quot;)) { sum1 = plus1 + plus2; GTK.gtk_label_set_text(label2, Double.toString(sum1)); }else if(cbbString.equalsIgnoreCase(\u0026quot;-\u0026quot;)) { sum1 = plus1 -plus2; GTK.gtk_label_set_text(label2, Double.toString(sum1)); }else if(cbbString.equalsIgnoreCase(\u0026quot;*\u0026quot;)) { sum1 = plus1 * plus2; GTK.gtk_label_set_text(label2, Double.toString(sum1)); }else if(cbbString.equalsIgnoreCase(\u0026quot;/\u0026quot;)) { panduan(plus2,sbAnother); sum1 = plus1 / plus2; GTK.gtk_label_set_text(label2, Double.toString(sum1)); }else if(cbbString.equalsIgnoreCase(\u0026quot;%\u0026quot;)) { panduan(plus2,sbAnother); sum1 = plus1 % plus2; GTK.gtk_label_set_text(label2, Double.toString(sum1)); }else if(cbbString.equalsIgnoreCase(\u0026quot;^\u0026quot;)) { //String temp = Double.toString(plus2); sum1 = Math.pow(plus1,plus2); GTK.gtk_label_set_text(label2, Double.toString(sum1)); } } }, null); } /** * * @param plus1 entry1çš„æ•°å­—å­—ç¬¦ä¸² * @param entry1 entry1çš„æ ‡è¯† */ public static void panduan(double plus1,int sbAnother) { if(plus1 == 0) { JOptionPane.showMessageDialog(null, \u0026quot;è¢«é™¤æ•°ä¸èƒ½ä¸º0,å·²ç»ç½®ä¸ºç©º è¯·é‡æ–°è¾“å…¥\u0026quot;); GTK.gtk_spin_button_set_value(sbAnother, 1.0);; return; } } /** * * @param window è®¡ç®—å™¨çª—å£çš„æ ‡è¯† * @param gridHouse æ•´ç§Ÿæˆ¿çš„æ ‡è¯† * @param start æ•´ç§Ÿæˆ¿çš„ç¼–å· */ public static void specialCal(int window,int gridHouse,int start) { // å»ºç«‹æ§ä»¶ final int btnSin = GTK.gtk_button_new_with_label(\u0026quot;sin\u0026quot;); final int btnCos = GTK.gtk_button_new_with_label(\u0026quot;cos\u0026quot;); final int btnTan = GTK.gtk_button_new_with_label(\u0026quot;tan\u0026quot;); final int btnAsin = GTK.gtk_button_new_with_label(\u0026quot;asin\u0026quot;); final int btnAcos = GTK.gtk_button_new_with_label(\u0026quot;acos\u0026quot;); final int btnAtan = GTK.gtk_button_new_with_label(\u0026quot;atan\u0026quot;); final int btnLog = GTK.gtk_button_new_with_label(\u0026quot;log\u0026quot;); final int btnSqrt = GTK.gtk_button_new_with_label(\u0026quot;sqrt\u0026quot;); final int btnabs = GTK.gtk_button_new_with_label(\u0026quot;abs\u0026quot;); final int btnFloor = GTK.gtk_button_new_with_label(\u0026quot;floor\u0026quot;); final int btnCeil = GTK.gtk_button_new_with_label(\u0026quot;ceil\u0026quot;); final int btnToDegree = GTK.gtk_button_new_with_label(\u0026quot;å¼§åº¦å˜è§’åº¦\u0026quot;); final int btnToRadius = GTK.gtk_button_new_with_label(\u0026quot;è§’åº¦å˜å¼§åº¦\u0026quot;); final int spinbox= GTK.gtk_spin_button_new_with_range(-32767, 32767, 0.1); final int btnEquals = GTK.gtk_button_new_with_label(\u0026quot;=\u0026quot;); final int tv1 = GTK.gtk_text_view_new(); final int labelSpecial = GTK.gtk_label_new(\u0026quot;ç‰¹æ®Šçš„å››åˆ™è¿ç®—ï¼š(å…ˆç‚¹å‡»è¿ç®—ç¬¦ï¼Œå†æ•²å€¼ï¼Œæœ€åç­‰å·)\u0026quot;); //è®¾ç½®GTK TextViewçš„æ¨¡å¼ GTK.gtk_text_view_set_wrap_mode(tv1, GTK.GTK_WRAP_WORD); //è®¾ç½®æ»šåŠ¨æ¡ final int scrolledBar = 0 ; GTK.gtk_spin_button_set_value(spinbox, 44.0); int innerGrid = GTK.gtk_grid_new(); //æ·»åŠ æ§ä»¶ GTK.gtk_grid_attach(innerGrid, btnSin, 0, 0, 1, 1); GTK.gtk_grid_attach(innerGrid, btnCos, 1, 0, 1, 1); GTK.gtk_grid_attach(innerGrid, btnTan, 2, 0, 1, 1); GTK.gtk_grid_attach(innerGrid, btnAsin, 0, 1, 1, 1); GTK.gtk_grid_attach(innerGrid, btnAcos, 1, 1, 1, 1); GTK.gtk_grid_attach(innerGrid, btnAtan, 2, 1, 1, 1); GTK.gtk_grid_attach(innerGrid, btnLog, 0, 2, 1, 1); GTK.gtk_grid_attach(innerGrid, btnSqrt, 1, 2, 1, 1); GTK.gtk_grid_attach(innerGrid, btnabs, 2, 2, 1, 1); GTK.gtk_grid_attach(innerGrid, btnFloor, 0, 3, 1, 1); GTK.gtk_grid_attach(innerGrid, btnCeil, 1, 3, 1, 1); GTK.gtk_grid_attach(innerGrid, btnToDegree, 0, 4, 1, 1); GTK.gtk_grid_attach(innerGrid, btnToRadius, 1, 4, 1, 1); GTK.gtk_grid_attach(gridHouse,labelSpecial,0,start,1,1); start = start + 1; //è·³åˆ°ä¸‹ä¸€è¡Œ GTK.gtk_grid_attach(gridHouse, innerGrid, 0, start, 3, 5); GTK.gtk_grid_attach(gridHouse, spinbox, 3, start, 1, 1); GTK.gtk_grid_attach(gridHouse, btnEquals, 4, start, 1, 1); // GTK.gtk_grid_attach(gridHouse, tv1, 4, start+1, 1, 1); createScrollBar(scrolledBar,tv1,gridHouse,start); //æ˜¾ç¤ºæ§ä»¶ GTK.gtk_widget_show(labelSpecial); GTK.gtk_widget_show(btnSin); GTK.gtk_widget_show(btnCos); GTK.gtk_widget_show(btnTan); GTK.gtk_widget_show(btnAsin); GTK.gtk_widget_show(btnAcos); GTK.gtk_widget_show(btnAtan); GTK.gtk_widget_show(btnSqrt); GTK.gtk_widget_show(btnLog); GTK.gtk_widget_show(btnabs); GTK.gtk_widget_show(btnCeil); GTK.gtk_widget_show(btnFloor); GTK.gtk_widget_show(btnToDegree); GTK.gtk_widget_show(btnToRadius); GTK.gtk_widget_show(tv1); //è¿˜æ˜¯å¾—å…ˆæ˜¯ å¿…é¡»show å¦åˆ™çœ‹ä¸åˆ° GTK.gtk_widget_show(spinbox); GTK.gtk_widget_show(btnEquals); //GTK.gtk_widget_show(scrolledBar); //ä¸è¦åœ¨è¿™è¾¹showåªåœ¨scrollbaråŒºåŸŸï¼Œä¸ç„¶æŠ¥é”™ GTK.gtk_widget_show(innerGrid); //æ·»åŠ æŒ‰é’®äº‹ä»¶ insertButtonEvent( btnSin,tv1); insertButtonEvent( btnCos,tv1); insertButtonEvent( btnTan,tv1); insertButtonEvent( btnAsin,tv1); insertButtonEvent( btnAcos,tv1); insertButtonEvent( btnAtan,tv1); insertButtonEvent( btnLog,tv1); insertButtonEvent( btnabs,tv1); insertButtonEvent( btnCeil,tv1); insertButtonEvent( btnFloor,tv1); insertButtonEvent( btnToDegree,tv1); insertButtonEvent( btnToRadius,tv1); GTK.g_signal_connect(spinbox,\u0026quot;changed\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ isEnter = true; } },null); GTK.g_signal_connect(btnEquals, \u0026quot;clicked\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ double sum1 = 0 ; double apple = GTK.gtk_spin_button_get_value(spinbox); if(isEnter == false) { JOptionPane.showMessageDialog(null, \u0026quot;æ‚¨æœªé€‰æ‹©ç‰¹æ®Šæ“ä½œç¬¦ï¼Œè¯·é‡æ–°é€‰æ‹©ï¼Œå¹¶è¾“å…¥æ•°å­—ï¼Œè¿›è¡Œè¿ç®—\u0026quot;); GTK.gtk_spin_button_set_value(spinbox, 44.0); return; }else { String temp = GetStringFromTextViewFunction(tv1); if(temp.equals(\u0026quot;sin\u0026quot;)) { double orange = Math.toRadians(apple); sum1 = Math.sin(orange); String finalResult = \u0026quot;(\u0026quot;+apple+\u0026quot;)\u0026quot;+\u0026quot; = \u0026quot;+sum1+\u0026quot;\\n\u0026quot;; InsertStringToTextViewFunction(tv1,finalResult); }else if(temp.equals(\u0026quot;cos\u0026quot;)) { double orange = Math.toRadians(apple); sum1 = Math.cos(orange); String finalResult = \u0026quot;(\u0026quot;+apple+\u0026quot;)\u0026quot;+\u0026quot; = \u0026quot;+sum1+\u0026quot;\\n\u0026quot;; InsertStringToTextViewFunction(tv1,finalResult); }else if(temp.equals(\u0026quot;tan\u0026quot;)) { double orange = Math.toRadians(apple); sum1 = Math.tan(orange); String finalResult = \u0026quot;(\u0026quot;+apple+\u0026quot;)\u0026quot;+\u0026quot; = \u0026quot;+sum1+\u0026quot;\\n\u0026quot;; InsertStringToTextViewFunction(tv1,finalResult); }else if(temp.equals(\u0026quot;asin\u0026quot;)) { double orange = Math.toRadians(apple); sum1 = Math.asin(orange); String finalResult = \u0026quot;(\u0026quot;+apple+\u0026quot;)\u0026quot;+\u0026quot; = \u0026quot;+sum1+\u0026quot;\\n\u0026quot;; InsertStringToTextViewFunction(tv1,finalResult); }else if(temp.equals(\u0026quot;acos\u0026quot;)) { double orange = Math.toRadians(apple); sum1 = Math.acos(orange); String finalResult = \u0026quot;(\u0026quot;+apple+\u0026quot;)\u0026quot;+\u0026quot; = \u0026quot;+sum1+\u0026quot;\\n\u0026quot;; InsertStringToTextViewFunction(tv1,finalResult); }else if(temp.equals(\u0026quot;atan\u0026quot;)) { double orange = Math.toRadians(apple); sum1 = Math.atan(orange); String finalResult = \u0026quot;(\u0026quot;+apple+\u0026quot;)\u0026quot;+\u0026quot; = \u0026quot;+sum1+\u0026quot;\\n\u0026quot;; InsertStringToTextViewFunction(tv1,finalResult); }else if(temp.equals(\u0026quot;log\u0026quot;)) { sum1 = Math.log(apple); String finalResult = \u0026quot;(\u0026quot;+apple+\u0026quot;)\u0026quot;+\u0026quot; = \u0026quot;+sum1+\u0026quot;\\n\u0026quot;; InsertStringToTextViewFunction(tv1,finalResult); }else if(temp.equals(\u0026quot;sqrt\u0026quot;)) { sum1 = Math.sqrt(apple); String finalResult = \u0026quot;(\u0026quot;+apple+\u0026quot;)\u0026quot;+\u0026quot; = \u0026quot;+sum1+\u0026quot;\\n\u0026quot;; InsertStringToTextViewFunction(tv1,finalResult); }else if(temp.equals(\u0026quot;abs\u0026quot;)) { sum1 = Math.abs(apple); String finalResult = \u0026quot;(\u0026quot;+apple+\u0026quot;)\u0026quot;+\u0026quot; = \u0026quot;+sum1+\u0026quot;\\n\u0026quot;; InsertStringToTextViewFunction(tv1,finalResult); }else if(temp.equals(\u0026quot;floor\u0026quot;)) { sum1 = Math.floor(apple); String finalResult = \u0026quot;(\u0026quot;+apple+\u0026quot;)\u0026quot;+\u0026quot; = \u0026quot;+sum1+\u0026quot;\\n\u0026quot;; InsertStringToTextViewFunction(tv1,finalResult); }else if(temp.equals(\u0026quot;ceil\u0026quot;)) { sum1 = Math.ceil(apple); String finalResult = \u0026quot;(\u0026quot;+apple+\u0026quot;)\u0026quot;+\u0026quot; = \u0026quot;+sum1+\u0026quot;\\n\u0026quot;; InsertStringToTextViewFunction(tv1,finalResult); }else if(temp.equals(\u0026quot;å¼§åº¦å˜è§’åº¦\u0026quot;)) { sum1 = Math.toDegrees(apple); String finalResult = \u0026quot;(\u0026quot;+apple+\u0026quot;)\u0026quot;+\u0026quot; = \u0026quot;+sum1+\u0026quot;\\n\u0026quot;; InsertStringToTextViewFunction(tv1,finalResult); }else if(temp.equals(\u0026quot;è§’åº¦å˜å¼§åº¦\u0026quot;)) { sum1 = Math.toRadians(apple); String finalResult = \u0026quot;(\u0026quot;+apple+\u0026quot;)\u0026quot;+\u0026quot; = \u0026quot;+sum1+\u0026quot;\\n\u0026quot;; InsertStringToTextViewFunction(tv1,finalResult); } } } }, null); } /** * * @param scrolledBar æ»šåŠ¨æ¡æ ‡è¯† * @param textview å¤šè¡Œæ–‡æœ¬æ ‡è¯† * @param gridHouse æ•´ç§Ÿæˆ¿çš„æ ‡è¯† * @param start æ•´ç§Ÿæˆ¿çš„åˆå§‹å¼€å§‹å¤„ */ public static void createScrollBar(int scrolledBar,int textview,int gridHouse,int start) { scrolledBar = GTK.gtk_scrolled_window_new(); GTK.gtk_widget_show(scrolledBar); //æ»šåŠ¨æ¡æ˜¯æ›´å¤§çš„å®¹å™¨ GTK.gtk_grid_attach(gridHouse, scrolledBar, 4, start+1, 1, 1); // 4æ”¹ä¸º0 æŠ¥é”™ GTK.gtk_widget_set_size_request(scrolledBar, 300, 50); GTK.gtk_container_add(scrolledBar,textview); // æ·»åŠ textviewåˆ°æ»šåŠ¨æ¡å®¹å™¨å½“ä¸­ } /** * * @param textview å¤šè¡Œæ–‡æœ¬TextViewçš„æ ‡è¯† * @param temp æ’å…¥TextView çš„å­—ç¬¦ä¸²ã€‚ */ public static void InsertStringToTextViewFunction(int textview,String temp) { //TextIteræ˜¯ä¸€ä¸ªTextViewçš„è¿­ä»£å™¨ã€‚ int textBuffer = GTK.gtk_text_view_get_buffer(textview); int textIter = GTK.gtk_text_iter_new(); //è¿™æ˜¯ä¸€ä¸ªç©ºçš„iterï¼Œéœ€è¦ç”¨textBufferè¿›è¡Œèµ‹å€¼ //GTK.gtk_text_iter_forward_to_end(textIter); GTK.gtk_text_buffer_get_end_iter(textBuffer, textIter);// æˆ–è€…textviewçš„textBufferçš„æœ«å°¾ï¼ GTK.gtk_text_buffer_insert(textBuffer, textIter, temp); //GTK.gtk_text_buffer_g GTK.gtk_text_iter_free(textIter); } /** * * @param textview TextViewçš„å¤šè¡Œæ–‡æœ¬çš„æ ‡è¯† * @return è¿”å›çš„å­—ç¬¦ä¸² */ public static String GetStringFromTextViewFunction(int textview) { //TextIteræ˜¯ä¸€ä¸ªTextViewçš„è¿­ä»£å™¨ã€‚ int textBuffer = GTK.gtk_text_view_get_buffer(textview); int textIter = GTK.gtk_text_iter_new(); //è¿™æ˜¯ä¸€ä¸ªç©ºçš„iterï¼Œéœ€è¦ç”¨textBufferè¿›è¡Œèµ‹å€¼ GTK.gtk_text_buffer_get_end_iter(textBuffer, textIter);// æˆ–è€…textviewçš„textBufferçš„æœ«å°¾ï¼ String temp = GTK.gtk_text_buffer_get_text(textBuffer); String[] splitArray = temp.split(\u0026quot;\\\\n\u0026quot;); temp = splitArray[splitArray.length-1]; System.out.println(temp); return temp; //GTK.gtk_text_buffer_g //GTK.gtk_text_iter_free(textIter); } /** * * @param btnSin æŒ‰é’®çš„æ ‡è¯† * @param tv1 textviewçš„æ ‡è¯† */ public static void insertButtonEvent(final int btnSin,final int tv1) { GTK.g_signal_connect(btnSin, \u0026quot;clicked\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //double sbValue = GTK.gtk_spin_button_get_value(spinbox); String temp = GTK.gtk_button_get_label(btnSin); InsertStringToTextViewFunction(tv1,temp); isEnter = false; } }, null); }  }\n Fifth: Cairo case1 : ä¸‰æ¯›å¤´éƒ¨è‡ªç”»åƒ V1.0  java /** * @author å¶æ˜­è‰¯ * @version GTK+Cairo v1.0 */ import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; import com.rupeng.gtk4j.Cairo; public class GTKTestCairo {\n /** * @param args */ static int window; static int gridHouse; public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //GTKåˆå§‹åŒ– GTK.gtk_init(); //çª—å£æ ‡è¯† window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); //çª—å£æ ‡é¢˜ GTK.gtk_window_set_title(window, \u0026quot;ç®€æ˜“ç”»å›¾æ¿v1.0\u0026quot;); //æ˜¾ç¤ºçª—å£ GTK.gtk_widget_show(window); GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); //è®¾ç½®å¸ƒå±€æ–¹å¼ gridHouse = GTK.gtk_grid_new(); //åˆ›å»ºæ§ä»¶ int start = 0; createDraw(window, gridHouse, start); //circlePoint åŸç‚¹è®¾ç½®ä¸º180 createDrawLaughFace(window,gridHouse,start+1,180); GTK.gtk_widget_show(gridHouse); GTK.gtk_container_add(window,gridHouse); //å¯åŠ¨å¾ªç¯ GTK.gtk_main(); } public static void createDraw(int window,int gridHouse,int start) { //åˆ›å»ºç”»å›¾æ¿ æˆ–è€…å«ç”»å¸ƒ int dan = GTK.gtk_drawing_area_new(); int label = GTK.gtk_label_new(\u0026quot;ä¸‰æ¯›\u0026quot;); //åˆ›å»ºæº //æ·»åŠ æ§ä»¶ GTK.gtk_grid_attach(gridHouse, label, 0, start, 1, 1); GTK.gtk_grid_attach(gridHouse, dan, 1, start, 1, 1); //æ˜¾ç¤ºç”»å¸ƒ GTK.gtk_widget_show(dan); GTK.gtk_widget_show(label); //è®¾ç½®ç”»å¸ƒçš„å¤§å° GTK.gtk_widget_set_size_request(dan, 300, 300); //å¼€å§‹ç»˜åˆ¶ åˆ©ç”¨äº‹ä»¶draw æ¥ä¸æ–­çš„ç»˜åˆ¶ GTK.g_signal_connect(dan, \u0026quot;draw\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //eventDateæ‰æ˜¯ç”»å¸ƒæº //è®¾ç½®ç”»ç¬”çš„é¢œè‰² Cairo.cairo_set_source_rgb(eventData, 0.5, 0.6, 0.3); //è®¾ç½®ç”»ç¬”çš„å¤§å° Cairo.cairo_set_line_width(eventData, 3); //ç§»åŠ¨ç”»ç¬”ç‚¹ ç”»ç¬”é»˜è®¤ä½ç½®ä¸æ˜¯åœ¨ï¼ˆ0,0ï¼‰move_toä¸å¯å°‘ //Cairo.cairo_move_to(eventData, 0, 0);  /* //ç”»ä¸€æ¡çº¿ä¸ƒç‚¹ Cairo.cairo_line_to(eventData, 50, 50); //ç”»ä¸€æ¡çº¿é‡ç‚¹ Cairo.cairo_line_to(eventData,100,100); //æ¥ç€åˆ’çº¿ Cairo.cairo_line_to(eventData, 120, 120);*/ //ç”»ä¸€ä¸ªåœ† Cairo.cairo_arc(eventData, 180, 180, 60, 0, 2*3.1415926); //ç”»ä¸€ä¸ªåœ†å¼§ //Cairo.cairo_arc(eventData, 200, 200, 70,1.5*3.1415925, 2*3.1415926); //æ˜¾ç¤ºç”»ç¬” Cairo.cairo_stroke(eventData); //Cairo.cairo_fill(eventData)ä¸åŒçš„æ•ˆæœ\n //ç”»ä¸€ä¸ªåœ†å¼§ æœ‰ä¸‹é¢å®éªŒçŸ¥é“æ˜¯ä»xè½´æ²¿é¡ºæ—¶é’ˆå¼€å§‹ç”»å›¾  /* Cairo.cairo_arc(eventData, 220, 220, 30,0, 0.5*3.1415926);\n Cairo.cairo_fill(eventData); //Cairo.cairo_fill(eventData)ä¸åŒçš„æ•ˆæœ Cairo.cairo_arc(eventData, 220, 100, 30,0, 3.1415926); Cairo.cairo_stroke(eventData); Cairo.cairo_arc(eventData, 220, 30, 30,0, 1.5*3.1415926); Cairo.cairo_fill(eventData);*/ //å˜´å·´çš„ç»˜åˆ¶ double Pi = 3.1415926; Cairo.cairo_arc(eventData, 180, 180, 40, 0.25*Pi, 0.75*Pi); Cairo.cairo_fill(eventData); //ç»˜åˆ¶ä¸¤åªçœ¼ç› Cairo.cairo_arc(eventData, 160, 160, 10, 0, 2*Pi); Cairo.cairo_arc(eventData, 200, 160, 10, 0, 2*Pi); Cairo.cairo_fill(eventData); //ç»˜åˆ¶èƒ¡é¡» Cairo.cairo_arc(eventData, 130, 160, 50, 0.166667*Pi, 0.6777777*Pi); Cairo.cairo_stroke(eventData); Cairo.cairo_arc(eventData, 230, 160, 50, 0.333333*Pi, 0.8333333*Pi); Cairo.cairo_stroke(eventData); //ç»˜åˆ¶å¤´å‘ Cairo.cairo_arc(eventData, 133.6, 136.72, 30,1.3333333*Pi ,1.833333*Pi ); Cairo.cairo_stroke(eventData); Cairo.cairo_arc(eventData, 224.4, 136.72, 30, 1.166667*Pi, 1.6777777*Pi); Cairo.cairo_stroke(eventData); //ç§»åŠ¨ç”»ç¬”ç‚¹ ç”»ç¬”é»˜è®¤ä½ç½®ä¸æ˜¯åœ¨ï¼ˆ0,0ï¼‰move_toä¸å¯å°‘ Cairo.cairo_move_to(eventData, 180, 120); //ç”»ä¸€æ¡çº¿ä¸ƒç‚¹ Cairo.cairo_line_to(eventData, 180, 90); Cairo.cairo_stroke(eventData); } }, null); } public static void createDrawLaughFace(int window,int gridHouse,int start,final int circlePoint) { //åˆ›å»ºç”»å›¾æ¿ æˆ–è€…å«ç”»å¸ƒ int dan = GTK.gtk_drawing_area_new(); int label = GTK.gtk_label_new(\u0026quot;ç¬‘è„¸\u0026quot;); //åˆ›å»ºæº //æ·»åŠ æ§ä»¶ GTK.gtk_grid_attach(gridHouse, label, 0, start, 1, 1); GTK.gtk_grid_attach(gridHouse, dan, 1, start, 1, 1); //æ˜¾ç¤ºç”»å¸ƒ GTK.gtk_widget_show(dan); GTK.gtk_widget_show(label); //è®¾ç½®ç”»å¸ƒçš„å¤§å° GTK.gtk_widget_set_size_request(dan, 300, 300); //å¼€å§‹ç»˜åˆ¶ åˆ©ç”¨äº‹ä»¶draw æ¥ä¸æ–­çš„ç»˜åˆ¶ GTK.g_signal_connect(dan, \u0026quot;draw\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //eventDateæ‰æ˜¯ç”»å¸ƒæº //è®¾ç½®ç”»ç¬”çš„é¢œè‰² Cairo.cairo_set_source_rgb(eventData, 0.5, 0.6, 0.3); //è®¾ç½®ç”»ç¬”çš„å¤§å° Cairo.cairo_set_line_width(eventData, 3); //ç”»ä¸€ä¸ªåœ† Cairo.cairo_arc(eventData, circlePoint, circlePoint, 60, 0, 2*3.1415926); //ç”»ä¸€ä¸ªåœ†å¼§ //Cairo.cairo_arc(eventData, 200, 200, 70,1.5*3.1415925, 2*3.1415926); //æ˜¾ç¤ºç”»ç¬” Cairo.cairo_stroke(eventData); //Cairo.cairo_fill(eventData)ä¸åŒçš„æ•ˆæœ //ç”»ä¸€ä¸ªåœ†å¼§ æœ‰ä¸‹é¢å®éªŒçŸ¥é“æ˜¯ä»xè½´æ²¿é¡ºæ—¶é’ˆå¼€å§‹ç”»å›¾ //å˜´å·´çš„ç»˜åˆ¶ double Pi = 3.1415926; Cairo.cairo_arc(eventData, circlePoint, circlePoint, 40, 0.25*Pi, 0.75*Pi); Cairo.cairo_fill(eventData); //ç»˜åˆ¶ä¸¤åªçœ¼ç› Cairo.cairo_arc(eventData, circlePoint-20, circlePoint-20, 10, 0, 2*Pi); Cairo.cairo_arc(eventData, circlePoint+20, circlePoint-20, 10, 0, 2*Pi); Cairo.cairo_fill(eventData); } }, null); }  }\ncase2 ä¸‰æ¯›å¤´éƒ¨è‡ªç”»åƒ åŠ å…¥äº†æ–‡å­—çš„ç»˜åˆ¶  java import com.rupeng.gtk4j.Cairo; import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack;\n/** * */\n/** * @author å¶æ˜­è‰¯ * @version GTKCairoText V1.0 * */ public class GTKTestCairoText {\n /** * @param args */ static int window; static int gridHouse; public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //GTKåˆå§‹åŒ– GTK.gtk_init(); //çª—å£æ ‡è¯† window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); //çª—å£æ ‡é¢˜ GTK.gtk_window_set_title(window, \u0026quot;ç®€æ˜“ç”»å›¾æ¿v2.0\u0026quot;); //æ˜¾ç¤ºçª—å£ GTK.gtk_widget_show(window); GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null); //è®¾ç½®å¸ƒå±€æ–¹å¼ gridHouse = GTK.gtk_grid_new(); //åˆ›å»ºæ§ä»¶ int start = 0; createDraw(window, gridHouse, start); //circlePoint åŸç‚¹è®¾ç½®ä¸º180 GTK.gtk_widget_show(gridHouse); GTK.gtk_container_add(window,gridHouse); //å¯åŠ¨å¾ªç¯ GTK.gtk_main(); } public static void createDraw(int window,int gridHouse,int start) { //åˆ›å»ºç”»å›¾æ¿ æˆ–è€…å«ç”»å¸ƒ int dan = GTK.gtk_drawing_area_new(); int label = GTK.gtk_label_new(\u0026quot;ä¸‰æ¯›\u0026quot;); //åˆ›å»ºæº //æ·»åŠ æ§ä»¶ GTK.gtk_grid_attach(gridHouse, label, 0, start, 1, 1); GTK.gtk_grid_attach(gridHouse, dan, 1, start, 1, 1); //æ˜¾ç¤ºç”»å¸ƒ GTK.gtk_widget_show(dan); GTK.gtk_widget_show(label); //è®¾ç½®ç”»å¸ƒçš„å¤§å° GTK.gtk_widget_set_size_request(dan, 300, 300); //å¼€å§‹ç»˜åˆ¶ åˆ©ç”¨äº‹ä»¶draw æ¥ä¸æ–­çš„ç»˜åˆ¶ GTK.g_signal_connect(dan, \u0026quot;draw\u0026quot;,new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //eventDateæ‰æ˜¯ç”»å¸ƒæº //è®¾ç½®ç”»ç¬”çš„é¢œè‰² Cairo.cairo_set_source_rgb(eventData, 0.5, 0.6, 0.3); //è®¾ç½®ç”»ç¬”çš„å¤§å° Cairo.cairo_set_line_width(eventData, 3); //ç§»åŠ¨ç”»ç¬”ç‚¹ ç”»ç¬”é»˜è®¤ä½ç½®ä¸æ˜¯åœ¨ï¼ˆ0,0ï¼‰move_toä¸å¯å°‘ //Cairo.cairo_move_to(eventData, 0, 0); //ç”»ä¸€ä¸ªåœ† Cairo.cairo_arc(eventData, 180, 180, 60, 0, 2*3.1415926); //ç”»ä¸€ä¸ªåœ†å¼§ //Cairo.cairo_arc(eventData, 200, 200, 70,1.5*3.1415925, 2*3.1415926); //æ˜¾ç¤ºç”»ç¬” Cairo.cairo_stroke(eventData); //Cairo.cairo_fill(eventData)ä¸åŒçš„æ•ˆæœ //ç”»ä¸€ä¸ªåœ†å¼§ æœ‰ä¸‹é¢å®éªŒçŸ¥é“æ˜¯ä»xè½´æ²¿é¡ºæ—¶é’ˆå¼€å§‹ç”»å›¾ //å˜´å·´çš„ç»˜åˆ¶ double Pi = 3.1415926; Cairo.cairo_arc(eventData, 180, 180, 40, 0.25*Pi, 0.75*Pi); Cairo.cairo_fill(eventData); //ç»˜åˆ¶ä¸¤åªçœ¼ç› Cairo.cairo_arc(eventData, 160, 160, 10, 0, 2*Pi); Cairo.cairo_arc(eventData, 200, 160, 10, 0, 2*Pi); Cairo.cairo_fill(eventData); //ç»˜åˆ¶èƒ¡é¡» Cairo.cairo_arc(eventData, 130, 160, 50, 0.166667*Pi, 0.6777777*Pi); Cairo.cairo_stroke(eventData); Cairo.cairo_arc(eventData, 230, 160, 50, 0.333333*Pi, 0.8333333*Pi); Cairo.cairo_stroke(eventData); //ç»˜åˆ¶å¤´å‘ Cairo.cairo_arc(eventData, 133.6, 136.72, 30,1.3333333*Pi ,1.833333*Pi ); Cairo.cairo_stroke(eventData); Cairo.cairo_arc(eventData, 224.4, 136.72, 30, 1.166667*Pi, 1.6777777*Pi); Cairo.cairo_stroke(eventData); //ç§»åŠ¨ç”»ç¬”ç‚¹ ç”»ç¬”é»˜è®¤ä½ç½®ä¸æ˜¯åœ¨ï¼ˆ0,0ï¼‰move_toä¸å¯å°‘ Cairo.cairo_move_to(eventData, 180, 120); //ç”»ä¸€æ¡çº¿ä¸ƒç‚¹ Cairo.cairo_line_to(eventData, 180, 90); Cairo.cairo_stroke(eventData); //ç”»æ–‡å­— Cairo.cairo_move_to(eventData, 180, 260); Cairo.cairo_set_source_rgb(eventData, 0.4, 0.3, 0.2); Cairo.cairo_set_font_size(eventData, 16); //é€‰æ‹©æ–‡å­—ç±»å‹ Cairo.cairo_select_font_face(eventData, \u0026quot;å®‹ä½“\u0026quot;, Cairo.CAIRO_FONT_SLANT_ITALIC, Cairo.CAIRO_FONT_WEIGHT_BOLD); Cairo.cairo_show_text(eventData,\u0026quot;ä¸‰æ¯›çš„è‡ªç”»åƒ\u0026quot;); //Cairo.cairo_stroke(eventData); //ä¸éœ€è¦è¿™å¥è¯ä¹Ÿå¯ä»¥ } }, null); }  }\ncase3 æŠ˜çº¿å›¾ å¤ä¹ äº†æ•°ç»„ + å¯¹ç§°æŠ˜çº¿  java /** * @author å¶æ˜­è‰¯ * @time 2015å¹´2æœˆ1æ—¥ä¸Šåˆ11:30:12 * @version TestLine V1.0 */ import com.rupeng.gtk4j.GTK; import com.rupeng.gtk4j.IGCallBack; import com.rupeng.gtk4j.Cairo;\npublic class TestLine {\n /** * @param args */ static int window; static int gridHouse; static int scrolledBar; public static void main(String[] args) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ //åˆå§‹åŒ– GTK.gtk_init(); window = GTK.gtk_window_new(GTK.GTK_WINDOW_TOPLEVEL); //æ·»åŠ çª—å£ GTK.gtk_widget_show(window); //å®‰é™å…³é—­ GTK.g_signal_connect(window, \u0026quot;destroy\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ GTK.gtk_main_quit(); } }, null);  /* //åˆ›å»ºå¸ƒå±€ï¼š gridHouse = GTK.gtk_grid_new();*/\n int drawArea = GTK.gtk_drawing_area_new(); GTK.gtk_widget_set_size_request(drawArea, 500, 500); //GTK.gtk_container_add(window, gridHouse); GTK.gtk_container_add(window, drawArea); GTK.g_signal_connect(drawArea, \u0026quot;draw\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ Cairo.cairo_move_to(eventData, 0, 500); int[] arrApple = {50, 90, 80, 120, 10, 50}; // è·å–æœ€å¤§å€¼ int max = arrApple[0]; for(int i = 1; i \u0026lt; arrApple.length; i++) { if(max \u0026lt; arrApple[i]) { max = arrApple[i]; } } // for(int i = 0; i\u0026lt; arrApple.length; i++) { // è·å–åæ ‡(x,y) int x = (i+1)*50; int y = 500 - 500*arrApple[i]/max; // ç»˜åˆ¶åæ ‡ç‚¹ Cairo.cairo_line_to(eventData, x, y); } // åˆ›å»ºç»˜ç”» Cairo.cairo_stroke(eventData); } }, null); createDraw( window, drawArea, gridHouse,0); GTK.gtk_widget_show(drawArea); //æ·»åŠ å¾ªç¯ GTK.gtk_main(); } public static void createDraw(int window, int drawArea,int gridHouse,int start) { GTK.g_signal_connect(drawArea, \u0026quot;draw\u0026quot;, new IGCallBack() { @Override public void execute(int instance, int eventData, Object object) { // TODO è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•å­˜æ ¹ Cairo.cairo_move_to(eventData, 0, 0); int[] arrApple = {50, 90, 80, 120, 10, 50}; // è·å–æœ€å¤§å€¼ int max = arrApple[0]; for(int i = 1; i \u0026lt; arrApple.length; i++) { if(max \u0026lt; arrApple[i]) { max = arrApple[i]; } } // for(int i = 0; i\u0026lt; arrApple.length; i++) { // è·å–åæ ‡(x,y) int x = (i+1)*50; //int y = 300 - 300*arrApple[i]/max; int y = 500*arrApple[i]/max; // ç»˜åˆ¶åæ ‡ç‚¹ Cairo.cairo_line_to(eventData, x, y); } // åˆ›å»ºç»˜ç”» Cairo.cairo_stroke(eventData); } }, null); //createScrolledBar(window,drawArea,scrolledBar,start); }  /* //æ»šåŠ¨æ¡æ— æ³•ç”¨äºdrawArea public static void createScrolledBar(int window,int drawArea,int scrolledBar,int start) { scrolledBar = GTK.gtk_scrolled_window_new(); GTK.gtk_widget_set_size_request(scrolledBar, 300, 100); GTK.gtk_widget_show(scrolledBar); GTK.gtk_container_add(scrolledBar,drawArea); GTK.gtk_grid_attach(gridHouse, scrolledBar, 0, start, 1, 1);\n }*/  } ``` ","date":1431327520,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431327520,"objectID":"44983006066d3dbf7cbf8f9e3f490426","permalink":"/blog/2015/05/11/1yue-31ri-javaban-bi-ji-zuo-ye/","publishdate":"2015-05-11T14:58:40+08:00","relpermalink":"/blog/2015/05/11/1yue-31ri-javaban-bi-ji-zuo-ye/","section":"archives","summary":"","tags":null,"title":"1æœˆ31æ—¥Javaç­ç¬”è®°ä½œä¸š","type":"archives"},{"authors":null,"categories":null,"content":"Usage st=\u0026gt;start: Start|past:\u0026gt;http://www.google.com[blank] e=\u0026gt;end: End:\u0026gt;http://www.google.com op1=\u0026gt;operation: My Operation|past op2=\u0026gt;operation: Stuff|current sub1=\u0026gt;subroutine: My Subroutine|invalid cond=\u0026gt;condition: Yes or No?|approved:\u0026gt;http://www.google.com c2=\u0026gt;condition: Good idea|rejected io=\u0026gt;inputoutput: catch something...|request st-\u0026gt;op1(right)-\u0026gt;cond cond(yes, right)-\u0026gt;c2 cond(no)-\u0026gt;sub1(left)-\u0026gt;op1 c2(yes)-\u0026gt;io-\u0026gt;e c2(no)-\u0026gt;op2-\u0026gt;e  ```flow\rst=\u0026gt;start: Start|past:\u0026gt;http://www.google.com[blank]\re=\u0026gt;end: End:\u0026gt;http://www.google.com\rop1=\u0026gt;operation: My Operation|past\rop2=\u0026gt;operation: Stuff|current\rsub1=\u0026gt;subroutine: My Subroutine|invalid\rcond=\u0026gt;condition: Yes\ror No?|approved:\u0026gt;http://www.google.com\rc2=\u0026gt;condition: Good idea|rejected\rio=\u0026gt;inputoutput: catch something...|request\rst-\u0026gt;op1(right)-\u0026gt;cond\rcond(yes, right)-\u0026gt;c2\rcond(no)-\u0026gt;sub1(left)-\u0026gt;op1\rc2(yes)-\u0026gt;io-\u0026gt;e\rc2(no)-\u0026gt;op2-\u0026gt;e\r``` Legacy Usage st=\u0026gt;start: Start|past:\u0026gt;http://www.google.com[blank] e=\u0026gt;end: End:\u0026gt;http://www.google.com op1=\u0026gt;operation: My Operation|past op2=\u0026gt;operation: Stuff|current sub1=\u0026gt;subroutine: My Subroutine|invalid cond=\u0026gt;condition: Yes or No?|approved:\u0026gt;http://www.google.com c2=\u0026gt;condition: Good idea|rejected io=\u0026gt;inputoutput: catch something...|request st-\u0026gt;op1(right)-\u0026gt;cond cond(yes, right)-\u0026gt;c2 cond(no)-\u0026gt;sub1(left)-\u0026gt;op1 c2(yes)-\u0026gt;io-\u0026gt;e c2(no)-\u0026gt;op2-\u0026gt;e  ```flowchart st=\u0026gt;start: Start|past:\u0026gt;http://www.google.com[blank] e=\u0026gt;end: End:\u0026gt;http://www.google.com op1=\u0026gt;operation: My Operation|past op2=\u0026gt;operation: Stuff|current sub1=\u0026gt;subroutine: My Subroutine|invalid cond=\u0026gt;condition: Yes or No?|approved:\u0026gt;http://www.google.com c2=\u0026gt;condition: Good idea|rejected io=\u0026gt;inputoutput: catch something...|request st-\u0026gt;op1(right)-\u0026gt;cond cond(yes, right)-\u0026gt;c2 cond(no)-\u0026gt;sub1(left)-\u0026gt;op1 c2(yes)-\u0026gt;io-\u0026gt;e c2(no)-\u0026gt;op2-\u0026gt;e ```  Configuration Configure for all home and regular pages:\n[params.flowchartDiagrams] enable = true options = \u0026quot;\u0026quot;  Configure for a single post in the front matter (Params in front matter have higher precedence):\nflowchartDiagrams: enable: true options: \u0026quot;{ 'x': 0, 'y': 0, 'line-width': 3, 'line-length': 50, 'text-margin': 10, 'font-size': 14, 'font-color': 'black', 'line-color': 'black', 'element-color': 'black', 'fill': 'white', 'yes-text': 'yes', 'no-text': 'no', 'arrow-end': 'block', 'scale': 1, 'i-am-a-comment-1': 'Do not use /â€‹/!', 'i-am-a-comment-2': 'style symbol types', 'symbols': { 'start': { 'font-color': 'red', 'element-color': 'green', 'fill': 'yellow' }, 'end': { 'class': 'end-element' } }, 'i-am-a-comment-3': 'even flowstate support ;-)', 'flowstate': { 'request': {'fill': 'blue'} } }\u0026quot;  See more information from https://github.com/adrai/flowchart.js.\n","date":1425477470,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1425477470,"objectID":"f4a1a49e6e7a1c0c2f689d20bbe38dca","permalink":"/post/js-flowchart-diagrams/","publishdate":"2015-03-04T21:57:50+08:00","relpermalink":"/post/js-flowchart-diagrams/","section":"post","summary":"Usage st=\u0026gt;start: Start|past:\u0026gt;http://www.google.com[blank] e=\u0026gt;end: End:\u0026gt;http://www.google.com op1=\u0026gt;operation: My Operation|past op2=\u0026gt;operation: Stuff|current sub1=\u0026gt;subroutine: My Subroutine|invalid cond=\u0026gt;condition: Yes or No?|approved:\u0026gt;http://www.google.com c2=\u0026gt;condition: Good idea|rejected io=\u0026gt;inputoutput: catch something...|request st-\u0026gt;op1(right)-\u0026gt;cond cond(yes, right)-\u0026gt;c2 cond(no)-\u0026gt;sub1(left)-\u0026gt;op1 c2(yes)-\u0026gt;io-\u0026gt;e c2(no)-\u0026gt;op2-\u0026gt;e ","tags":null,"title":"JS Flowchart Diagrams","type":"post"},{"authors":null,"categories":null,"content":"Usage Andrew-\u0026gt;China: Says Hello Note right of China: China thinks\\nabout it China--\u0026gt;Andrew: How are you? Andrew-\u0026gt;\u0026gt;China: I am good thanks!  Andrew-\u0026gt;China: Says Hello Note right of China: China thinks\\nabout it China--\u0026gt;Andrew: How are you? Andrew-\u0026gt;\u0026gt;China: I am good thanks! ``` ## Configuration Configure for all home and regular pages:  toml [params.sequenceDiagrams] enable = true options = \u0026ldquo;{theme: \u0026lsquo;hand\u0026rsquo;}\u0026rdquo;\n Configure for a single post in the front matter (**Params in front matter have higher precedence**):  yaml sequenceDiagrams: enable: true options: \u0026ldquo;{theme: \u0026lsquo;hand\u0026rsquo;}\u0026rdquo;\n ### Options  js options = { // Change the styling of the diagram, typically one of \u0026lsquo;simple\u0026rsquo;, \u0026lsquo;hand\u0026rsquo;. New themes can be registered with registerTheme(\u0026hellip;). theme: string,\n// CSS style to apply to the diagram\u0026rsquo;s svg tag. (Only supported if using snap.svg) css_class: string, }\n See more information from https://github.com/bramp/js-sequence-diagrams. ## Examples  sequence Title: Here is a title A-\u0026gt;B: Normal line B\u0026ndash;\u0026gt;C: Dashed line C-\u0026gt;\u0026gt;D: Open arrow D\u0026ndash;\u0026gt;\u0026gt;A: Dashed open arrow\n ```sequence Title: Here is a title A-\u0026gt;B: Normal line B--\u0026gt;C: Dashed line C-\u0026gt;\u0026gt;D: Open arrow D--\u0026gt;\u0026gt;A: Dashed open arrow ``` ---  sequence\nExample of a comment. Note left of A: Note to the\\n left of A Note right of A: Note to the\\n right of A Note over A: Note over A Note over A,B: Note over both A and B ```\n```sequence # Example of a comment. Note left of A: Note to the\\n left of A Note right of A: Note to the\\n right of A Note over A: Note over A Note over A,B: Note over both A and B ``` ","date":1425477465,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1425477465,"objectID":"6ced045f4be074792d20a5067a5170b4","permalink":"/post/js-sequence-diagrams/","publishdate":"2015-03-04T21:57:45+08:00","relpermalink":"/post/js-sequence-diagrams/","section":"post","summary":"Usage Andrew-\u0026gt;China: Says Hello Note right of China: China thinks\\nabout it China--\u0026gt;Andrew: How are you? Andrew-\u0026gt;\u0026gt;China: I am good thanks! ","tags":null,"title":"JS Sequence Diagrams","type":"post"},{"authors":null,"categories":["life"],"content":"å…¶å®æˆ‘ä»¬éƒ½æ˜¯æ™®é€šäºº æ¯å¤©ï¼Œé¡¶é£å†’é›¨å»ä¸Šç­ å·¥ä½œ ä¸‹ç­ æ—¶é—´ä¹…äº† å°±æ‡’äº† å¯‚å¯åœ°è¡Œèµ°â€¦â€¦ å­¤ç‹¬â€¦â€¦ æœ€è¦å‘½çš„æ˜¯å¿§éƒ ä»»å…¶å‘å±•å°±æ˜¯é‡åº¦å¿§éƒ æ‰¿è®¤å§ï¼ æˆ‘ä»¬éƒ½æœ‰é—®é¢˜ï¼Œåˆ«å›é¿ï¼ ä¹Ÿåˆ«èº² å› ä¸ºèº²å“ªéƒ½æ²¡ç”¨ çœŸæ­£çš„è§£å†³æ–¹æ³•åœ¨ä¸‹é¢,è¯·ä»”ç»†é˜…è¯» é¦–å…ˆï¼Œåˆ«å¤ªç´¯ æ›´ä¸è¦ç†¬å¤œ #å­¦ä¼šå·æ‡’ï¼ˆå®˜æ–¹è¯´æ³•å«è°ƒæ•´èŠ‚å¥ï¼‰\nä½çº§è¶£å‘³ä¸€ä¸‹æœªå°ä¸å¯ï¼ ä½†æ˜¯ç»å¯¹ä¸åšè¿æ³•çš„äº‹æƒ… ä¸è¦ä»¥ä¸ºè‡ªå·±æ˜¯å¤§é³„å°±æ¬ºè´Ÿäºº åˆ‡è®°: äººåœ¨æ±Ÿæ¹–èµ°ï¼Œæ€»èƒ½é‡é«˜æ‰‹ å·¥ä½œä¸Šå‡ºé”™è¦å‹‡äºæ‰¿è®¤é”™è¯¯. è¿˜è¿‡ä¸äº†å…³å°±è£…å‚» å¦‚æœåˆ«äººé”™äº†ï¼Œé‚£ä¹Ÿåˆ«å®¢æ°” å°±ç®—ä»–æ˜¯è€æ¿ä¹Ÿä¸è¡Œ æœ‹å‹ä¹‹é—´éš¾å…é—¹çŸ›ç›¾ äº‰åµçœŸçš„äºäº‹æ— è¡¥ å°±ç®—ä»–çœŸçš„å¾ˆç”Ÿæ°” ã€‚ã€‚ã€‚ã€‚ã€‚ å¾®ç¬‘ä¹Ÿå¯ä»¥åŒ–è§£ å†åŠ ä¸€ä¸ªæ‹¥æŠ±ï¼Œæå®šï¼ ç„¶åå‡ºå»å¤§åƒä¸€é¡¿ æ²¡é’±ï¼Œæ²¡å…³ç³»ï¼ æœºä¼šæœ‰çš„æ˜¯ã€‚ æˆ–è€…å¡æ‹‰OKã€‚è¿™æ ·å°±å¯¹äº†ï¼ ä»€ä¹ˆäº‹ï¼Œéƒ½ä¸èƒ½åªè€ƒè™‘è‡ªå·±ã€‚ æ¯•ç«Ÿæˆ‘ä»¬éƒ½éœ€è¦åˆ«äººçš„å¸®åŠ© å½“ç„¶ï¼Œè¿˜æœ‰çˆ±æƒ… æ¯”ç¿¼æ°”ã€‚ã€‚ã€‚ ç¼ ç»µ å½“ç„¶ï¼Œä¹Ÿè¦è´Ÿèµ·è‡ªå·±çš„è´£ä»» ç„¶åç”Ÿå¾ˆå¤šå­©å­ å«Œç´¯å°±åªç”Ÿä¸€ä¸ª æœ€å¥½æ˜¯ä¸¤ä¸ªï¼Œä¸‘ç‚¹æ²¡å…³ç³». ä½†ä¸€å®šè¦ä¿è¯æ˜¯è‡ªå·±çš„ã€‚ ç­‰ä»–é•¿å¤§äº†å°±ç»™ä»–è¸¢å‡ºå» è¿™æ ·çš„å­©å­æ‰èƒ½æœ‰å‡ºæ¯ æ‰€ä»¥è¯´ï¼Œé«˜å…´ç‚¹ã€‚ å¿…éœ€çš„! å› ä¸ºï¼Œæˆ‘ä»¬çš„è·¯è¿˜å¾ˆé•¿  ä»å¤§è‡ªç„¶åŠ¨ç‰©çš„å–œæ€’å“€ä¹æ¥ä½“å‘³äººç±»çš„ç”Ÿæ´»ï¼Œæœ€åæˆ‘ä»¬åº”è¯¥ç»å¸¸ä¿æŒå¿«ä¹ï¼Œå¾®ç¬‘é¢å¯¹ç”Ÿæ´»ï¼\n åŸåˆ›åœ°å€: http://blog.sina.com.cn/s/blog_67090dc00100nmn3.html\n","date":1400509880,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1400509880,"objectID":"a389376e879af82defcbf6dcd1c479d6","permalink":"/blog/2014/05/19/sheng-huo-zhong-de-qing-gan-yuan-su-gao-xing/","publishdate":"2014-05-19T22:31:20+08:00","relpermalink":"/blog/2014/05/19/sheng-huo-zhong-de-qing-gan-yuan-su-gao-xing/","section":"archives","summary":"","tags":["happyness life","optimistic"],"title":"ç”Ÿæ´»ä¸­çš„æƒ…æ„Ÿå…ƒç´ :é«˜å…´","type":"archives"},{"authors":null,"categories":["markdown"],"content":"###åµŒå¥—çš„åˆ—è¡¨### 1. æœ‰åº æ•°å­— 2. æ— åº * + æ³¨æ„åœ¨å†™æ³•ä¸Šçš„å¢åŠ ç¼©è¿›\n###å››ä¸ªéƒ¨åˆ†ï¼š###\n é‡ç‚¹ åˆ†ç±» é“¾æ¥ å›¾ç‰‡   markdownåŸºæœ¬ä¸Šæ²¡æœ‰ä¸‹åˆ’çº¿ï¼Œä¹Ÿæ²¡æœ‰é¢œè‰²ï¼Œå› ä¸ºhackerä¸éœ€è¦ï¼Ÿ å…¶å®ä¹Ÿéœ€è¦ï¼åªä¸è¿‡æ›´å…³æ³¨çš„æ˜¯é‡ç‚¹ï¼ˆç€é‡ çœŸæ­£çš„é—®é¢˜ å¤§å°å’Œé‡é‡ï¼‰å’Œåˆ†ç±»ï¼ˆåˆ—è¡¨ï¼‰ é“¾æ¥ï¼ˆæºè‡ªå“ªè¾¹ï¼‰ éœ€è¦ä¸€äº›å›¾ç‰‡ï¼ˆä¹Ÿè®¸é¢œè‰²å’Œä¸‹åˆ’çº¿ å¯ä»¥è¿™æ ·å¼•å…¥ï¼‰ è¿˜æœ‰æ›´é‡è¦çš„æ˜¯çœŸå®çš„ä»£ç å¿«ï¼ˆè¿™ä¸ªåœ°æ–¹ç‰¹åˆ«è®²ç©¶ï¼Œæ‰€ä»¥æ¯ç§è¯­è¨€æœ‰ä¸åŒçš„æ ‡è®°ï¼Œä¹Ÿè®¸ä»£ç çš„é¢œè‰²æ‰æ˜¯é»‘å®¢çœŸæ­£çš„é¢œè‰²ï¼‰ï¼Œä¸€èˆ¬ä»–ä»¬è¿˜ç‰¹åˆ«æ³¨æ„ç‰ˆæƒï¼ˆä¹Ÿå°±æ˜¯å¼•ç”¨å¿«ï¼Œæ‰€ä»¥è¿˜æœ‰\u0026gt; , \u0026gt;\u0026gt; etcçš„é€‰é¡¹ï¼‰å…¶ä»–çš„å·¥ä½œå°±ç”±htmlæ ‡è®°ï¼Œä½†æ˜¯ç‰¹åˆ«åŒºåŸŸå¿«çš„æ‘†æ”¾ï¼Œç‰¹åˆ«æ³¨æ„å‰åçš„ç©ºè¡Œ.\n  å¦‚æœåŠ å…¥ç©ºè¡Œå°±ä¼šæ˜¾ç¤ºç©ºè¡Œï¼Œå¦‚æœä¸åŠ å…¥ç©ºè¡Œä¼šæŠŠå‰åçš„æ•°æ®å åŠ åœ¨ä¸€èµ·ï¼Œé™¤éæ˜¯åŠ å…¥æ ‡é¢˜ã€‚ç©ºè¡Œå’ŒåŠ æ ‡é¢˜çš„ä¸€ä¸ªæ•ˆæœç±»ä¼¼ï¼Œä¼šä½¿å‰åçš„æ•°æ®ç”¨ç©ºè¡Œåˆ†å¼€ï¼Œå¦èµ·ä¸€è¡Œï¼ åœ¨\u0026gt; ç¼©è¿›çš„å‰æ–¹åŠ å…¥å¤šä½™ç©ºæ ¼ä¼šé€ æˆ*ä»£ç å—*çš„æ•ˆæœ å¦‚æœ\u0026lt;table\u0026gt;æ ‡ç­¾æ²¡æœ‰\u0026lt;td\u0026gt;çš„åŠ å…¥æ²¡æœ‰è¡¨æ ¼çš„æ•ˆæœï¼Œè¿˜æ˜¯ä¸€å †æ•°æ®   For any markup that is not covered by Markdownâ€™s syntax, you simply use HTML itself. Thereâ€™s no need to preface it or delimit it to indicate that youâ€™re switching from Markdown to HTML; you just use the tags.\nThe only restrictions are that block-level HTML elements â€” e.g.\u0026lt;div\u0026gt;, \u0026lt;table\u0026gt;, \u0026lt;pre\u0026gt;, \u0026lt;p\u0026gt;,etc. â€” must be separated from surrounding content by blank lines, and the start and end tags of the block should not be indented** with tabs or spaces**. Markdown is smart enough not to add extra (unwanted) \u0026lt;p\u0026gt; tags around HTML block-level tags.\n ##ä¸€äº›å¸¸ç”¨çš„markdownæ²¡æœ‰çš„ç¼–è¾‘æ“ä½œï¼š###\n###ä¸‹åˆ’çº¿###\nä»£ç :ã€Šuã€‹ä¸‹åˆ’çº¿ã€Š/uã€‹ \nä¸­é—´æ ‡æ˜:è¦åŠ ä¸‹åˆ’çº¿çš„æ–‡å­—.\n###åˆ é™¤çº¿### ä»£ç :ã€Šsã€‹åˆ é™¤çº¿ã€Š/sã€‹\nä¸­é—´æ ‡æ˜:è¦åŠ åˆ é™¤çº¿çš„æ–‡å­—.\n###æ›´æ”¹å­—ä½“é¢œè‰²ï¼š###\nã€Šfont color=\u0026ldquo;#value\u0026rdquo;ã€‹å†™ä¸Šä½ æƒ³å†™çš„å­—ã€Š/fontã€‹ (å…¶ä¸­valueå€¼åœ¨000000ä¸FFFFFF(16ä½è¿›åˆ¶)ä¹‹é—´ä¿®æ”¹#åé¢çš„æ•°å€¼ï¼Œå°±å¯ä»¥æ”¹å˜å­—ä½“çš„é¢œè‰²ã€‚\n###éƒ¨åˆ†å¸¸ç”¨é¢œè‰²ä»£ç ï¼š###\n #ff0000 çº¢è‰²çš„å­—å–”ï¼ #ff8000 æ©™è‰²çš„å­—å–”ï¼ #ffff00 é»„è‰²çš„å­—å–”ï¼  #00ff00 ç»¿è‰²çš„å­—å–”ï¼ #0080ff è“è‰²çš„å­—å–”ï¼  #0000a0 é›è‰²çš„å­—å–”ï¼ #8000ff ç´«è‰²çš„å­—å–”ï¼  #000000 é»‘è‰²çš„å­—å–”ï¼  #c0c0c0 ç°è‰²çš„å­—å–”ï¼ ","date":1400165876,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1400165876,"objectID":"f0c386b82f5d7f35a766933b21b59eba","permalink":"/blog/2014/05/15/mdge-ren-pian-jian/","publishdate":"2014-05-15T22:57:56+08:00","relpermalink":"/blog/2014/05/15/mdge-ren-pian-jian/","section":"archives","summary":"","tags":["markdown"],"title":"markdownä¸ªäººåè§","type":"archives"},{"authors":null,"categories":[" makefile"],"content":" map reduce deploy(by makefile)  #map\u0026mdash;do or map\u0026ndash;action#\nFC=gfortran FFLAGS=-O3 split : ./f90split.f90 ./output/cmd.sh $(FC) $(FFLAGS) $^ -o $@ mv $@ ./output/ /bin/sh ./output/cmd.sh .PHONY: clean  ä¸æ˜¯ä¸é€‚åˆï¼Œæ˜¯è¶…çº§é€‚åˆï¼Œåªä¸è¿‡ä½ ä¸ä¼šè€Œå·² #makefile:(è´Ÿè´£è®©å¯¹åº”çš„æ–‡ä»¶å¤¹å»åšå¯¹åº”çš„äº‹æƒ…)#\nFC=gfortran FFLAGS=-O3 split : ./f90split.f90 ./output/cmd.sh $(FC) $(FFLAGS) $\u0026lt; -o $@ # é€ å‡ºä¸€ä¸ªå·¥äººå‡ºæ¥ï¼ cp $@ ./output/ # æŠŠä¸€ä¸ªé«˜çº§æŠ€æœ¯å·¥äººè°ƒåˆ°ç°åœº å»å¹²æ´»å»ï¼ æœ€å¥½ç”¨cp è¿™æ ·å°±å¯ä»¥æ´¾åˆ°å…¶ä»–å·¥å‚å»äº† cd ./output/ \u0026amp;\u0026amp;sh cmd.sh#åˆ‡æ¢åˆ°å¯¹åº”ç›®å½•ä¸‹ å»åšä»–è¯¥åšçš„äº‹æƒ…å°±å¯ä»¥äº†ï¼ˆè€Œä¸æ˜¯åŸå…ˆä½ æƒ³çš„ # sh .output/cmd.sh è¿™æ ·æ˜¯åœ¨å½“å‰çš„ç›®å½•ä¸‹äº§ç”Ÿæ‰€æœ‰çš„ä¸œè¥¿ è€Œä¸æ˜¯å¯¹åº”çš„ç›®å½•ï¼‰ .PHONY: clean  #åœ¨æˆ‘çš„outputç›®å½•ä¸‹æ–°å»ºäº†ä¸€ä¸ª# ##cmd.sh:(ä»–åªåšæœ¬ç›®å½•ä¸‹çš„å†…å®¹)##\n#!/bin/sh # sh cmd.sh for i in `ls -l /home/incompact3dNew/channel|grep f90|awk '{print $NF}'`; do file=/home/incompact3dNew/channel/$i; # echo $file; ./split $file done; ","date":1400164027,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1400164027,"objectID":"c221cceff88864619c0959f7cfcdd2e2","permalink":"/blog/2014/05/15/mo-kuai-fen-ge-gong-han-ji-zhi/","publishdate":"2014-05-15T22:27:07+08:00","relpermalink":"/blog/2014/05/15/mo-kuai-fen-ge-gong-han-ji-zhi/","section":"archives","summary":"","tags":["makefile","cmd","split","map","reduce"],"title":"æ¨¡å—åˆ†å‰²--å·¥å‚æœºåˆ¶","type":"archives"},{"authors":null,"categories":["vim"],"content":"#Installation#\n###Backup your old vim configuration files:####\nmv ~/.vim ~/.vim.orig mv ~/.vimrc ~/.vimrc.orig  ###Clone and install this repo:###\nåˆ°æˆ‘çš„ç™¾åº¦ç›˜[ä¸‹è½½][1].vimï¼Œå¤åˆ¶åˆ° ~ä¸»ç›®å½•ä¸‹ï¼Œå³å¯,å·²ç»æœ‰vundleäº†ã€‚ ln -s ~/.vim/vimrc ~/.vimrc  ###Install bundles ### Launch vim(ignore the errors and they will disappear after installing needed plugins)and run:\n:BundleInstall  ###Thst\u0026rsquo;s it!###\n","date":1400046845,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1400046845,"objectID":"3bf13e152d3c80d74e58ea8be407feb5","permalink":"/blog/2014/05/14/my-own-customed-vim/","publishdate":"2014-05-14T13:54:05+08:00","relpermalink":"/blog/2014/05/14/my-own-customed-vim/","section":"archives","summary":"","tags":["vim","bundle","vundle "],"title":"My own customed vim","type":"archives"},{"authors":null,"categories":["makefile"],"content":"FC = gfortran FFLAGS = -g -Wall -O3 --free-form modFFLAGS = --free-form OPTFC = -O3 -funroll-loops -ftree-vectorize -fcray-pointer -cpp #src = $(wildcard *.f90) src = secdmo.f90 record.f90 obj = $(src:.f90=.o ) secd : $(obj) $(FC) $(FFLAGS) -o $@ $^ %.o : %.f90 $(FC) $(modFFLAGS) $(OPTFC) -c $\u0026lt; #secdmo.mod : secdmo.f #\t$(FC) $(modFFLAGS) @ $\u0026lt; .phony: clean clean: rm -rf secd secdmo.mod funct.plo accu* fort* ./errdi* *.o ","date":1400044160,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1400044160,"objectID":"d13d2432fa46e3c82e295e7d08677090","permalink":"/blog/2014/05/14/makefilebian-yi-fortrande-module/","publishdate":"2014-05-14T13:09:20+08:00","relpermalink":"/blog/2014/05/14/makefilebian-yi-fortrande-module/","section":"archives","summary":"","tags":["makefile","module","fortran"],"title":"makefileç¼–è¯‘fortrançš„module","type":"archives"},{"authors":null,"categories":["life"],"content":"ä»æ­¦å­—çœ‹åˆ°åï¼Œä¸¤äººç«‹äºåœŸä¸Šï¼Œåœ¨äºåˆ‡ç£‹äº¤æµï¼Œå¾…äººä»¥ç¤¼ï¼Œæœäººä»¥å¾·ã€‚è™½ç„¶ æˆ‘ä¸æ˜¯ä¸€ä¸ªæ­¦è€…ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºæ­¦å¾·æ˜¯ä¸­å›½äººè¯¥ç§‰æ‰¿çš„ç²¾ç¥ã€‚\néœå…ƒç”²ï¼š \u0026gt; * æ­¦æœ¯æ²¡æœ‰ä»»ä½•å½¢å¼ ä¹Ÿå¯ä»¥æ˜¯ä»»ä½•å½¢å¼ ä½ ä¸€å®šè¦æŠ›å¼€é—¨æ´¾åè§, åŒ…å®¹ä¸‡ç‰©ï¼Œä¸‡ç‰©å°±èƒ½å’Œä½ èä¸ºä¸€èµ·\n  æ­¦æœ¯æ ¹æœ¬æ²¡æœ‰é•¿çŸ­ä¹‹åˆ†,é‡è¦æ—¶ä½“ä¼šæ­¦è€…çš„ç²¾ç¥ä¸–ç•Œï¼ç”±å¤–è‡³å†…,ä½•å¿…å›ºæ­¥è‡³å°åœ¨è‡ªå·±çš„å°ä¸–ç•Œé‡Œ, è‡ªè§†è¿‡é«˜ï¼Œåªä¼šæŠŠåˆ«äººçš„ä¼˜ç‚¹çœ‹æˆç¼ºç‚¹ï¼Œ åœ¨ä¸´é˜µå¯¹æ•Œåˆ¤æ–­é”™è¯¯ ï¼Œå¯¹æ•Œçš„å¤§å¿Œ\n ä¹˜é£ç ´æµªçš„é“ç† ä¸‡å·ä¹‹æ°´ï¼ŒæŒ¡ä¹‹ä¸å°½ ä¸‡äººæ•ŒæŒ¡ä¸ä½æ»”æ»”æ±Ÿæ°´ã€‚\n ä¸­å›½äººæœ‰ç»µé‡Œé’ˆçš„ç‰¹æ€§ï¼Œéœ€è¦å‹åŠ› æŒ¤å‹å‡ºæ¥ ä¹ æ­¦ä¹‹äºº åƒä¸‡ä¸èƒ½è‡ªæ»¡ï¼ï¼ï¼ä¸€å±±è‡ªæœ‰ä¸€å±±é«˜ï¼\n æ˜¯ä½ æ²¡æœ‰ç»å†æ›´å¯æ€•çš„  ä½ è™½ç„¶æ­¦åŠŸå¨´ç†Ÿ ä½†æ˜¯ä¸´é˜µå¯¹æ•Œé¦–å…ˆå¾—äº†è§£æ•Œäºº è€Œæƒ³è¦ç†è§£æ•Œäºº é¦–å…ˆå¾—è®©ä½ è‡ªå·±å¿˜è®°å­¦è¿‡æ­¦æœ¯æ‹›å¼ é—¨æ´¾çº¦å®š ä½ å¾—å¿˜è®°è‡ªå·± æŠŠä½ æ‰€å­¦çš„ä¸œè¥¿å…¨éƒ¨æŠ›å¼ƒï¼Œè¿™æ ·ä½ æ‰èƒ½æ•´ä½“çš„çœ‹æ¸…æ•Œäºº\n ä¹ æ­¦ä¹‹äºº,æ€¥äºæ±‚æˆä¹‹å¿ƒ,æ¶ˆæé˜²å«ä¹‹å¿ƒ,æœ‰å¾ˆå¤šå¿ƒ.è¦å­¦ä¼šå…‹æœè‡ªå·± ,å…‹æœè‡ªå·±å†…å¿ƒçš„éšœç¢ è´ªå©ª æ„šæ˜§ï¼ï¼\n   è”¡å…­é‡‘: \u0026gt; * èµ¢ å›ºç„¶éš¾å¾— ï¼Œä½†æ˜¯è¾“å¾—èµ·æ›´åŠ éš¾å¾—ï¼ ä¸€æ¬¡è¾“ä¸èµ· ä»¥åæ€ä¹ˆèµ¢å‘¢ï¼Ÿ\nä¸»å¸­ï¼š \u0026gt; * ä¸€ä¸ªå†·é™ å¿ƒæ€å¹³ç¨³çš„äººï¼Œæ‰“å‡ºæ¥çš„æ‹›å¼ä¹Ÿæ˜¯ ç¨³æ‰ç¨³æ‰“ï¼Œå¾ªåºæ¸è¿›\n  ç›¸åæ¥è¯´ï¼šå¿ƒæµ®æ°”ç‡¥çš„äºº, ä½¿å‡ºæ¥çš„æ‹›å¼ä¸€å®šæ—¶è™šæµ®ä¸å®   å¹³å¿ƒé™æ°”ï¼Œä¸äººäº¤æµã€‚ ","date":1400036308,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1400036308,"objectID":"af1cdca0e25028c94b662a1efc0b3243","permalink":"/blog/2014/05/14/wu-jian-yu-zuo/","publishdate":"2014-05-14T10:58:28+08:00","relpermalink":"/blog/2014/05/14/wu-jian-yu-zuo/","section":"archives","summary":"","tags":["æ­¦æœ¯","å","æ­¦å¾·"],"title":"æ­¦è§äºå","type":"archives"},{"authors":null,"categories":["life"],"content":" ä½ å†™çš„æ˜¯ä»€ä¹ˆï¼Ÿ æ­å»ºèµ·æ¥ä¸€ä¸ªåšå®¢ï¼Œç„¶åä½¿ç”¨å®ƒï¼Œå¹¶ä¸”è¦ç«™åœ¨å¯¹æ–¹çš„è§’åº¦æˆ–è€…å®¢æˆ·çš„è§’åº¦å†™æ–‡ç« ï¼Ÿ\n åšå®¢æ˜¯ä¸€ç§å†™ä½œçš„æ–¹å¼ï¼Œåœ¨äºäº¤æµï¼ŒåŒæ—¶è¿˜åœ¨äºè®©ä½ æ²‰æ·€æ€æƒ³ \u0026gt; è¯»ä¹¦ä½¿äººçœ¼ç•Œå¼€é˜”ï¼Œå†™ä½œä½¿äººå¢é•¿æ™ºæ…§\n æˆ‘ç›¸ä¿¡æˆ‘çš„åšå®¢ä¼šè¶Šå†™çº¦å¥½ï¼Œä»–å°±å¥½åƒæ˜¯ä¸€ä¸ªæ•…äº‹,å¼€å¤´ä¹Ÿè®¸ä¸æ€ä¹ˆå¥½çœ‹ï¼Œä½†æ˜¯ éšç€æ•…äº‹æƒ…èŠ‚çš„å‘å±•ï¼Œå¼•å…¥äº†å†²çªï¼Œæˆ‘ç›¸ä¿¡ä¼šæ›´åŠ å¸å¼•è‡ªå·±ã€è§‚ä¼—çš„çœ¼çƒï¼Œæˆ‘æƒ³è¦ ç”¨æˆ‘çš„äººç”Ÿç»™å¤§å®¶å¥‰ä¸Šä¸€ä¸ªå¥½çš„æ•…äº‹ã€‚\n ","date":1400005859,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1400005859,"objectID":"c5a9dc1c2c48931efa38a1ed7c67b9c3","permalink":"/blog/2014/05/14/xie-bo-ke-de-yi-yi/","publishdate":"2014-05-14T02:30:59+08:00","relpermalink":"/blog/2014/05/14/xie-bo-ke-de-yi-yi/","section":"archives","summary":"","tags":["é˜…è¯»","æ€è€ƒ ","é¢å‘å¯¹è±¡"],"title":"å†™åšå®¢çš„æ„ä¹‰","type":"archives"},{"authors":null,"categories":["incompact3d  "],"content":"module decomp_2d_poisson use decomp_2d use decomp_2d_fft use param use variables implicit none private ! Make everything private unless declared public ! real(mytype), private, parameter :: PI = 3.14159265358979323846_mytype ! This 0.0_mytype!!!!!!!!!!!!!1111 #ifdef DOUBLE_PREC real(mytype), parameter :: epsilon = 1.e-16 #else real(mytype), parameter :: epsilon = 1.e-8 #endif ! boundary conditions integer, save :: bcx, bcy, bcz ! decomposition object for physical space TYPE(DECOMP_INFO), save :: ph ! decomposition object for spectral space TYPE(DECOMP_INFO), save :: sp ! store sine/cosine factors real(mytype), save, allocatable, dimension(:) :: az,bz real(mytype), save, allocatable, dimension(:) :: ay,by real(mytype), save, allocatable, dimension(:) :: ax,bx ! wave numbers complex(mytype), save, allocatable, dimension(:,:,:) :: kxyz !wave numbers for stretching in a pentadiagonal matrice complex(mytype), save, allocatable, dimension(:,:,:,:) :: a,a2,a3 ! work arrays, ! naming convention: cw (complex); rw (real); ! 1 = X-pencil; 2 = Y-pencil; 3 = Z-pencil real(mytype), allocatable, dimension(:,:,:) :: rw1,rw1b,rw2,rw2b,rw3 complex(mytype), allocatable, dimension(:,:,:) :: cw1,cw1b,cw2,cw22,cw2b,cw2c ! underlying FFT library only needs to be initialised once logical, save :: fft_initialised = .false. public :: decomp_2d_poisson_stg, decomp_2d_poisson_init, \u0026amp; decomp_2d_poisson_finalize ! For staggered mesh where main variables are defined in the centre of ! control volumes while boundary conditions are defined on interfaces interface decomp_2d_poisson_stg module procedure poisson end interface contains !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! Initialise Poisson solver for given boundary conditions ! given ! given ! just for init !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! subroutine decomp_2d_poisson_init(bcx1, bcy1, bcz1) implicit none integer, intent(IN) :: bcx1, bcy1, bcz1 integer :: nx, ny, nz, i bcx = bcx1 bcy = bcy1 bcz = bcz1 nx = nx_global ny = ny_global nz = nz_global ! pressure-grid having 1 fewer point for non-periodic directions if (bcx==1) nx=nx-1 if (bcy==1) ny=ny-1 if (bcz==1) nz=nz-1 allocate(ax(nx),bx(nx)) allocate(ay(ny),by(ny)) allocate(az(nz),bz(nz)) call abxyz(ax,ay,az,bx,by,bz,nx,ny,nz,bcx,bcy,bcz) !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!1 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!Initialise the ax bx !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!Initialise the ay by !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!Initialise the az bz !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!1 call decomp_info_init(nx, ny, nz, ph) call decomp_info_init(nx, ny, nz/2+1, sp) ! allocate work space if (bcx==0 .and. bcy==0 .and. bcz==0) then allocate(cw1(sp%xst(1):sp%xen(1),sp%xst(2):sp%xen(2), \u0026amp; sp%xst(3):sp%xen(3))) allocate(kxyz(sp%xst(1):sp%xen(1),sp%xst(2):sp%xen(2), \u0026amp; sp%xst(3):sp%xen(3))) allocate(a(sp%yst(1):sp%yen(1),ny/2,sp%yst(3):sp%yen(3),5)) allocate(a2(sp%yst(1):sp%yen(1),ny/2,sp%yst(3):sp%yen(3),5)) allocate(a3(sp%yst(1):sp%yen(1),ny,sp%yst(3):sp%yen(3),5)) ! (000) ^c ^kxyz ^a else if (bcx==1 .and. bcy==0 .and. bcz==0) then allocate(cw1(sp%xst(1):sp%xen(1),sp%xst(2):sp%xen(2), \u0026amp; sp%xst(3):sp%xen(3))) allocate(cw1b(sp%xst(1):sp%xen(1),sp%xst(2):sp%xen(2), \u0026amp; sp%xst(3):sp%xen(3))) allocate(rw1(ph%xst(1):ph%xen(1),ph%xst(2):ph%xen(2), \u0026amp; ph%xst(3):ph%xen(3))) allocate(rw1b(ph%xst(1):ph%xen(1),ph%xst(2):ph%xen(2), \u0026amp; ph%xst(3):ph%xen(3))) allocate(rw2(ph%yst(1):ph%yen(1),ph%yst(2):ph%yen(2), \u0026amp; ph%yst(3):ph%yen(3))) allocate(kxyz(sp%xst(1):sp%xen(1),sp%xst(2):sp%xen(2), \u0026amp; sp%xst(3):sp%xen(3))) allocate(a(sp%yst(1):sp%yen(1),ny/2,sp%yst(3):sp%yen(3),5)) allocate(a2(sp%yst(1):sp%yen(1),ny/2,sp%yst(3):sp%yen(3),5)) allocate(a3(sp%yst(1):sp%yen(1),ny,sp%yst(3):sp%yen(3),5)) !(100) consist :: cw1 cw1b rw1 rw1b rw2 ^a else if (bcx==0 .and. bcy==1 .and. bcz==0) then allocate(rw2(ph%yst(1):ph%yen(1),ph%yst(2):ph%yen(2), \u0026amp; ph%yst(3):ph%yen(3))) allocate(rw2b(ph%yst(1):ph%yen(1),ph%yst(2):ph%yen(2), \u0026amp; ph%yst(3):ph%yen(3))) allocate(cw1(sp%xst(1):sp%xen(1),sp%xst(2):sp%xen(2), \u0026amp; sp%xst(3):sp%xen(3))) allocate(cw2(sp%yst(1):sp%yen(1),sp%yst(2):sp%yen(2), \u0026amp; sp%yst(3):sp%yen(3))) allocate(cw22(sp%yst(1):sp%yen(1),sp%yst(2):sp%yen(2), \u0026amp; sp%yst(3):sp%yen(3))) allocate(cw2b(sp%yst(1):sp%yen(1),sp%yst(2):sp%yen(2), \u0026amp; sp%yst(3):sp%yen(3))) allocate(cw2c(sp%yst(1):sp%yen(1),sp%yst(2):sp%yen(2), \u0026amp; sp%yst(3):sp%yen(3))) allocate(kxyz(sp%yst(1):sp%yen(1),sp%yst(2):sp%yen(2), \u0026amp; sp%yst(3):sp%yen(3))) allocate(a(sp%yst(1):sp%yen(1),ny/2,sp%yst(3):sp%yen(3),5)) allocate(a2(sp%yst(1):sp%yen(1),ny/2,sp%yst(3):sp%yen(3),5)) allocate(a3(sp%yst(1):sp%yen(1),ny,sp%yst(3):sp%yen(3),5)) !(010) rw2 rw2b cw2 cw22 cw2b cw2c kxyz ^a else if (bcx==1 .and. bcy==1) then allocate(cw1(sp%xst(1):sp%xen(1),sp%xst(2):sp%xen(2), \u0026amp; sp%xst(3):sp%xen(3))) allocate(cw1b(sp%xst(1):sp%xen(1),sp%xst(2):sp%xen(2), \u0026amp; sp%xst(3):sp%xen(3))) allocate(cw2(sp%yst(1):sp%yen(1),sp%yst(2):sp%yen(2), \u0026amp; sp%yst(3):sp%yen(3))) allocate(cw22(sp%yst(1):sp%yen(1),sp%yst(2):sp%yen(2), \u0026amp; sp%yst(3):sp%yen(3))) allocate(cw2b(sp%yst(1):sp%yen(1),sp%yst(2):sp%yen(2), \u0026amp; sp%yst(3):sp%yen(3))) allocate(cw2c(sp%yst(1):sp%yen(1),sp%yst(2):sp%yen(2), \u0026amp; sp%yst(3):sp%yen(3))) allocate(rw1(ph%xst(1):ph%xen(1),ph%xst(2):ph%xen(2), \u0026amp; ph%xst(3):ph%xen(3))) allocate(rw1b(ph%xst(1):ph%xen(1),ph%xst(2):ph%xen(2), \u0026amp; ph%xst(3):ph%xen(3))) allocate(rw2(ph%yst(1):ph%yen(1),ph%yst(2):ph%yen(2), \u0026amp; ph%yst(3):ph%yen(3))) allocate(rw2b(ph%yst(1):ph%yen(1),ph%yst(2):ph%yen(2), \u0026amp; ph%yst(3):ph%yen(3))) !(11*) cw1 cw1b cw2 cw2b cw2c rw1 rw1b rw2b if (bcz==1) then allocate(rw3(ph%zsz(1),ph%zsz(2),ph%zsz(3))) end if allocate(kxyz(sp%xst(1):sp%xen(1),sp%xst(2):sp%xen(2), \u0026amp; sp%xst(3):sp%xen(3))) allocate(a(sp%yst(1):sp%yen(1),ny/2,sp%yst(3):sp%yen(3),5)) allocate(a2(sp%yst(1):sp%yen(1),ny/2,sp%yst(3):sp%yen(3),5)) allocate(a3(sp%yst(1):sp%yen(1),nym,sp%yst(3):sp%yen(3),5)) !(111) rw3 kxyz ^a end if call waves() return end subroutine decomp_2d_poisson_init !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! Release memory used by Poisson solver !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! subroutine decomp_2d_poisson_finalize implicit none deallocate(ax,bx,ay,by,az,bz) call decomp_info_finalize(ph) call decomp_info_finalize(sp) call decomp_2d_fft_finalize fft_initialised = .false. deallocate(kxyz) if (bcx==0 .and. bcy==0 .and. bcz==0) then deallocate(cw1) ! (000) cw1 else if (bcx==1 .and. bcy==0 .and. bcz==0) then deallocate(cw1,cw1b,rw1,rw1b,rw2) ! (100) cw1 cw1b rw1 rw1b rw2 else if (bcx==0 .and. bcy==1 .and. bcz==0) then deallocate(cw1,cw2,cw2b,rw2,rw2b) ! (010) cw1 cw2 cw2b rw2 rw2b else if (bcx==1 .and. bcy==1) then deallocate(cw1,cw1b,cw2,cw2b,rw1,rw1b,rw2,rw2b) ! (11*) cw1,cw1b,cw2,cw2b,rw1,rw1b,rw2,rw2b if (bcz==1) then deallocate(rw3) !(111) rw3 end if end if return end subroutine decomp_2d_poisson_finalize !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! Top level wrapper !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! subroutine poisson(rhs, bcx, bcy, bcz) implicit none real(mytype), dimension(:,:,:), intent(INOUT) :: rhs integer, intent(IN) :: bcx, bcy, bcz ! boundary conditions integer :: i if (bcx==0 .and. bcy==0 .and. bcz==0) then call poisson_000(rhs) else if (bcx==1 .and. bcy==0 .and. bcz==0) then call poisson_100(rhs) else if (bcx==0 .and. bcy==1 .and. bcz==0) then call poisson_010(rhs) else if (bcx==1 .and. bcy==1) then ! 110 \u0026amp; 111 call poisson_11x(rhs, bcz) else stop 'boundary condition not supported' end if return end subroutine poisson !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! Solving 3D Poisson equation with periodic B.C in all 3 dimensions ! 3 ! 3 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! subroutine poisson_000(rhs) use derivX use derivY use derivZ ! right-hand-side of Poisson as input ! solution of Poisson as output real(mytype), dimension(:,:,:), intent(INOUT) :: rhs integer, dimension(3) :: fft_start, fft_end, fft_size complex(mytype) :: xyzk complex(mytype) :: ytt,xtt,ztt,yt1,xt1,yt2,xt2 complex(mytype) :: xtt1,ytt1,ztt1,zt1,zt2 real(mytype) :: tmp1, tmp2,x ,y, z integer :: nx,ny,nz, i,j,k nx = nx_global ny = ny_global nz = nz_global if (.not. fft_initialised) then call decomp_2d_fft_init(PHYSICAL_IN_Z) fft_initialised = .true. end if ! compute r2c transform r2c:real to complex by zhaoliang ! cw1 is 3dim data structrue !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!! only fft to transform the real data to complex data while (100) twice !!!!! one is tranform and then fft (you can see poisson100 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! call decomp_2d_fft_3d(rhs,cw1) ! normalisation ! why this below is called normalisation ?????? just divide 3dim grid number cw1 = cw1 / real(nx, kind=mytype) /real(ny, kind=mytype) \u0026amp; / real(nz, kind=mytype) do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) ! post-processing in spectral space !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!post-processing in 3-direction can be !!!!!!!!!!!!!!!!! set in the same cycle,because they are !!!!!!!!!!!!!!!!!! similar !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! POST PROCESSING IN Z tmp1 = real(cw1(i,j,k), kind=mytype) ! get the real number of cw1 tmp2 = aimag(cw1(i,j,k)) ! get the imagenumber of cw1 cw1(i,j,k) = cmplx(tmp1*bz(k)+tmp2*az(k), \u0026amp; tmp2*bz(k)-tmp1*az(k), kind=mytype) ! modify the cw1 in the spectral space Z ! bz az ! by ay ! bx ax ! POST PROCESSING IN Y tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*by(j)+tmp2*ay(j), \u0026amp; tmp2*by(j)-tmp1*ay(j), kind=mytype) if (j.gt.(ny/2+1)) cw1(i,j,k)=-cw1(i,j,k) ! why should be axisymmetry! ! POST PROCESSING IN X tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*bx(i)+tmp2*ax(i), \u0026amp; tmp2*bx(i)-tmp1*ax(i), kind=mytype) if (i.gt.(nx/2+1)) cw1(i,j,k)=-cw1(i,j,k) !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!! Solve Poisson !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! tmp1=real(kxyz(i,j,k), kind=mytype) tmp2=aimag(kxyz(i,j,k)) ! CANNOT DO A DIVISION BY ZERO ! Yes ! division by zero is impossible!!!-----------------------------------\u0026lt; if ((tmp1.lt.epsilon).or.(tmp2.lt.epsilon)) then !epsilon? what does it mean? cw1(i,j,k)=0._mytype ! print *,'DIV 0',i,j,k,epsilon else cw1(i,j,k)=cmplx( real(cw1(i,j,k), kind=mytype) / (-tmp1), \u0026amp; aimag(cw1(i,j,k))/(-tmp2), kind=mytype) end if !Print result in spectal space after Poisson ! if (abs(out(i,j,k)) \u0026gt; 1.0e-4) then ! write(*,*) 'AFTER',i,j,k,out(i,j,k),xyzk ! end if !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! post-processing backward !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! POST PROCESSING IN Z tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*bz(k)-tmp2*az(k), \u0026amp; -tmp2*bz(k)-tmp1*az(k), kind=mytype) ! bz az ! by ay ! bx ax ! POST PROCESSING IN Y tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*by(j)+tmp2*ay(j), \u0026amp; tmp2*by(j)-tmp1*ay(j), kind=mytype) if (j.gt.(ny/2+1)) cw1(i,j,k)=-cw1(i,j,k) ! POST PROCESSING IN X tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*bx(i)+tmp2*ax(i), \u0026amp; -tmp2*bx(i)+tmp1*ax(i), kind=mytype) if (i.gt.(nx/2+1)) cw1(i,j,k)=-cw1(i,j,k) end do end do end do ! compute c2r transform call decomp_2d_fft_3d(cw1,rhs) ! from complex to real! ! call decomp_2d_fft_finalize return end subroutine poisson_000 subroutine poisson_100(rhs) !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!! get the rhs and then modify rhs ,at last return the rhs !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! implicit none real(mytype), dimension(:,:,:), intent(INOUT) :: rhs complex(mytype) :: xyzk real(mytype) :: tmp1, tmp2, tmp3, tmp4 real(mytype) :: xx1,xx2,xx3,xx4,xx5,xx6,xx7,xx8 integer :: nx,ny,nz, i,j,k, itmp !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!! 8 transform from x --\u0026gt;y --\u0026gt;z then z--\u0026gt; y ---\u0026gt;x at the beginning !!!!!!!!!!!!!!!!!!from x --\u0026gt;y --\u0026gt;z then z--\u0026gt; y ---\u0026gt;x at the endding !!!!! (100 add 8 more transform than 000) while 000 is 0 transform !!!!! so rhs is in the z pencil ,no there are not z pencil at all! !!!!! the program is 2-dim pm*pn decomp ! so only xpencil and y pencil !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!twice real to complex !!!!!!!!!!! 1: transform rhs-rw2-rw1 !!!!!!!!!!! 2: fft rhs-----rw1 !!!!!!!!!!!!!!twice complex to real !!!!!!!!!!! 1: transfrom rw1-rw2--rhs !!!!!!!!!!! 2: fft rw1------rhs !!!!!!!!!!!!! post-processing operations is under the complex condition !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!! input real rhs(:.:,:) in the z pencil !!!!!!!!!!!! 2+2 transform |destination: modify the rhs !!!!!!!!!!!! 1 normalisation !!!!!!!!!!!! 1 FFT forward !!!!!!!!!!!! 3 post-processing z--\u0026gt;y---\u0026gt;x direction not pencil !!!!!!!!!!!! 1 poisson solver !!!!!!!!!!!! 3 post-processing backward x---\u0026gt;y----\u0026gt;z direction !!!!!!!!!!!! 1 FFT backward !!!!!!!!!!!! 2+2 transform |destination: modify the rhs !!!!!!!!!!!! output real rhs(:,:,:) in the z pencil !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 100 format(1x,a8,3I4,2F12.6) nx = nx_global - 1 ny = ny_global nz = nz_global !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!1 ! rhs is in Z-pencil(wrong!There isn't Z pencil)(wrong !again, there is Z pencil))but requires global operations in X ! why should do the transpose!!!!!!!!!!!!!! ! why in the poisson_000 is not needed!??????????????? ! two steps to change from z to x !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!1 call transpose_z_to_y(rhs,rw2,ph) ! z pencil in y pencil but in the physical space !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!rw2 is the complex 3-dim data the same as rw1 call transpose_y_to_x(rw2,rw1,ph) do k=ph%xst(3),ph%xen(3) do j=ph%xst(2),ph%xen(2) do i=1,nx/2 !!! rw1 rw1b 1 means x pencil !!! rw2 rw2b 2 means y pencil rw1b(i,j,k)=rw1(2*(i-1)+1,j,k) ! the odd terms is for the half before enddo do i=nx/2+1,nx rw1b(i,j,k)=rw1(2*nx-2*i+2,j,k) ! the reverse terms is for the half after enddo enddo end do !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!11 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!11 !!!!3 layers data !!!! rw1b is the top lay data xpencil physical space !!!! rw2 is in the middle lay data y pencil physical space !!!! rw1 rhs is in the outer lay data z pencil spectral space !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!11 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!11 call transpose_x_to_y(rw1b,rw2,ph) ! let x pencil rw1b to y pencil call transpose_y_to_z(rw2,rhs,ph) ! let y pencil rw2 to z pencil's rhs !!!!!!!!!!!!first time get what we want if (.not. fft_initialised) then call decomp_2d_fft_init(PHYSICAL_IN_Z,nx,ny,nz) fft_initialised = .true. end if !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! compute r2c transform ! why should force the before pre-posting ------------------------------\u0026lt;\u0026lt;\u0026lt;\u0026lt; !!!!!!!!!the most key operation :::: the fft operator: decomp_2d_fft_3d !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! call decomp_2d_fft_3d(rhs,cw1) ! from real to complex! and begin poission solver !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! in the z pencil we did the fft transform !!!!!!!!!!!!!!!!!! so cw1 is 3d complex data ,yeah (:,:,:) !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! normalisation cw1 = cw1 / real(nx, kind=mytype) /real(ny, kind=mytype) \u0026amp; / real(nz, kind=mytype) #ifdef DEBUG do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) then write(*,100) 'START',i,j,k,cw1(i,j,k) end if end do end do end do #endif ! post-processing in spectral space ! POST PROCESSING IN Z do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*bz(k)+tmp2*az(k), \u0026amp; tmp2*bz(k)-tmp1*az(k), kind=mytype) #ifdef DEBUG if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) \u0026amp; write(*,100) 'after z',i,j,k,cw1(i,j,k) #endif end do end do end do ! POST PROCESSING IN Y do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*by(j)+tmp2*ay(j), \u0026amp; tmp2*by(j)-tmp1*ay(j), kind=mytype) if (j.gt.(ny/2+1)) cw1(i,j,k)=-cw1(i,j,k) #ifdef DEBUG if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) \u0026amp; write(*,100) 'after y',i,j,k,cw1(i,j,k) #endif end do end do end do !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!because (100) !!!!!!!!!!!!!!!!!!!!!so the post processing in x is different !!!!!!!!!!!!!!!!!!!!!from the y and z ! POST PROCESSING IN X do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) cw1b(1,j,k)=cw1(1,j,k) do i = 2,nx tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) tmp3 = real(cw1(nx-i+2,j,k), kind=mytype) !!! the 2~nx tmp4 = aimag(cw1(nx-i+2,j,k)) !!!!!!!!!!!! 2~nx xx1=tmp1*bx(i)/2._mytype xx2=tmp1*ax(i)/2._mytype xx3=tmp2*bx(i)/2._mytype xx4=tmp2*ax(i)/2._mytype xx5=tmp3*bx(i)/2._mytype xx6=tmp3*ax(i)/2._mytype xx7=tmp4*bx(i)/2._mytype xx8=tmp4*ax(i)/2._mytype cw1b(i,j,k) = cmplx(xx1+xx4+xx5-xx8,-xx2+xx3+xx6+xx7, \u0026amp; kind=mytype) end do end do end do !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! While you set the -Debug in the compile period !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! #ifdef DEBUG do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) if (abs(cw1b(i,j,k)) \u0026gt; 1.0e-4) then write(*,100) 'after x',i,j,k,cw1b(i,j,k) end if end do end do end do #endif !!!!!!!!!!!!!!!!!!!!!from now on, the cw1b in x,y,z direction(not pencil) !!!!!!!!!!!!!!!!!!!!is calculated ,so now you can calculate cw1b in the !!!!!!!!!!!!!!!!!!!!!!! poisson condition ,yes poisson solver ! Solve Poisson do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) !tmp1=real(zk2(k)+yk2(j)+xk2(i), kind=mytype) !tmp2=aimag(zk2(k)+yk2(j)+xk2(i)) tmp1=real(kxyz(i,j,k), kind=mytype) tmp2=aimag(kxyz(i,j,k)) !xyzk=cmplx(tmp1,tmp2, kind=mytype) ! CANNOT DO A DIVISION BY ZERO ! yes if ((abs(tmp1).lt.epsilon).and.(abs(tmp2).lt.epsilon)) then cw1b(i,j,k)=cmplx(0._mytype,0._mytype, kind=mytype) end if if ((abs(tmp1).lt.epsilon).and.(abs(tmp2).ge.epsilon)) then cw1b(i,j,k)=cmplx(0._mytype, \u0026amp; aimag(cw1b(i,j,k))/(-tmp2), kind=mytype) end if if ((abs(tmp1).ge.epsilon).and.(abs(tmp2).lt.epsilon)) then cw1b(i,j,k)=cmplx( real(cw1b(i,j,k), kind=mytype) \u0026amp; /(-tmp1), 0._mytype, kind=mytype) end if !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!the most dayly processing !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! if ((abs(tmp1).ge.epsilon).and.(abs(tmp2).ge.epsilon)) then cw1b(i,j,k)=cmplx( real(cw1b(i,j,k), kind=mytype) \u0026amp; /(-tmp1), \u0026amp; aimag(cw1b(i,j,k))/(-tmp2), kind=mytype) end if #ifdef DEBUG if (abs(cw1b(i,j,k)) \u0026gt; 1.0e-4) \u0026amp; write(*,100) 'AFTER',i,j,k,cw1b(i,j,k) #endif end do end do end do ! post-processing backward !!!!!!!!!!!!!!!!!!!!!! You know cw1b is the cw1's another form in the spectral !!!!!!!!!!!!!!!!!!!!!! space ,so you need to change the spetral space to physical !!!!!!!!!!!!!!!!!!!!!!! space again ,yes get the cw1 !!!!!!!!!!!!!!!!!!!!!!!! from now on ,you will found that the calculate of poisson !!!!!!!!!!!!!!!!!!!!!!!! equation is in the spectral space ,from the fft,then 3 post !!!!!!!!!!!!!!!!!!!!!!!!!! processing in x,y,z 3 directions, then calculate the poisson !!!!!!!!!!!!!!!!!!!!!!!!!! equation. OK,then you start next! ! POST PROCESSING IN X do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) cw1(1,j,k)=cw1b(1,j,k) do i = 2,nx tmp1 = real(cw1b(i,j,k), kind=mytype) tmp2 = aimag(cw1b(i,j,k)) tmp3 = real(cw1b(nx-i+2,j,k), kind=mytype) tmp4 = aimag(cw1b(nx-i+2,j,k)) xx1=tmp1*bx(i) xx2=tmp1*ax(i) xx3=tmp2*bx(i) xx4=tmp2*ax(i) xx5=tmp3*bx(i) xx6=tmp3*ax(i) xx7=tmp4*bx(i) xx8=tmp4*ax(i) cw1(i,j,k) = cmplx(xx1-xx4+xx6+xx7,-(-xx2-xx3+xx5-xx8), \u0026amp; kind=mytype) !!!!!the buterfly algorithm!!!!!!!!!!!!!!!!!!!!!!! end do end do end do !!!!!!!!!!!!!!!!!!!!!!!from now on x direction ,the spectral data has been transform to !!!!!!!!!!!!!!!!!!!!!!!! physical space, but still the complex #ifdef DEBUG do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) then write(*,100) 'AFTER X',i,j,k,cw1(i,j,k) end if end do end do end do #endif ! POST PROCESSING IN Y do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*by(j)-tmp2*ay(j), \u0026amp; tmp2*by(j)+tmp1*ay(j), kind=mytype) if (j.gt.(ny/2+1)) cw1(i,j,k)=-cw1(i,j,k) #ifdef DEBUG if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) \u0026amp; write(*,100) 'AFTER Y',i,j,k,cw1(i,j,k) #endif end do end do end do !!!!!!!!!!!!!!!!!!!!!! by ay !!!!!!!!!!!!!!!!!!!!!! bz az ! POST PROCESSING IN Z do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*bz(k)-tmp2*az(k), \u0026amp; tmp2*bz(k)+tmp1*az(k), kind=mytype) #ifdef DEBUG if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) \u0026amp; write(*,100) 'END',i,j,k,cw1(i,j,k) #endif end do end do end do ! compute c2r transform call decomp_2d_fft_3d(cw1,rhs) ! rhs is in Z-pencil but requires global operations in X call transpose_z_to_y(rhs,rw2,ph) call transpose_y_to_x(rw2,rw1,ph) do k=ph%xst(3),ph%xen(3) do j=ph%xst(2),ph%xen(2) do i=1,nx/2 rw1b(2*i-1,j,k)=rw1(i,j,k) ! the odd terms is setted! enddo do i=1,nx/2 rw1b(2*i,j,k)=rw1(nx-i+1,j,k) ! the even terms is setted enddo enddo end do call transpose_x_to_y(rw1b,rw2,ph) call transpose_y_to_z(rw2,rhs,ph) !!!!!!!!!!!!!the finally outcome rhs ! call decomp_2d_fft_finalize return end subroutine poisson_100 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!Neumann!!!!!!!!!!!!!!!!!!!!!!!!!!!111 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! Solving 3D Poisson equation: Neumann in Y; periodic in X \u0026amp; Z !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! subroutine poisson_010(rhs) implicit none real(mytype), dimension(:,:,:), intent(INOUT) :: rhs complex(mytype) :: xyzk real(mytype) :: tmp1, tmp2, tmp3, tmp4 real(mytype) :: xx1,xx2,xx3,xx4,xx5,xx6,xx7,xx8 integer :: nx,ny,nz, i,j,k 100 format(1x,a8,3I4,2F12.6) nx = nx_global ny = ny_global - 1 ! (010) so have fewer1 ny! nz = nz_global !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!so if (11*) you need to ?what pencil?????? !!!!?? ! rhs is in Z-pencil but requires global operations in Y because(010) !!!!!!!!!!!!!!twice real to complex !!!!!!!!!!! 1: transform rhs-rw2-rw1 !!!!!!!!!!! 2: fft rhs-----rw1 !!!!!!!!!!!!!!twice complex to real !!!!!!!!!!! 1: transfrom rw1-rw2--rhs !!!!!!!!!!! 2: fft rw1------rhs !!!!!!!!!!!!! post-processing operations is under the complex condition !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!! input real rhs(:.:,:) in the z pencil !!!!!!!!!!!! 1+1 transform z-\u0026gt;y y-\u0026gt;z |destination: modify the rhs because z-y=1 rather than z-x=2 !!!!!!!!!!!! 1 normalisation !!!!!!!!!!!! 1 FFT forward !!!!!!!!!!!! 2 post-processing z--\u0026gt;x direction not pencil !!!!!!!!!!!! 1 transform z-y !!!!!!!!!!!! 1 post-processing y !!!!!!!!!!!! 1 poisson solver !!!!!!!!!!!! 1 matrice_refinement !!!!!!!!!!!! 3 inversion5_v1 inversion5_v2 !!!!!!!!!!!! 1 post-processing backward Y !!!!!!!!!!!! 1 transform y-z !!!!!!!!!!!! 2 post-processing backward x----\u0026gt;z direction !!!!!!!!!!!! 1 FFT backward !!!!!!!!!!!! 1+1 transform |destination: modify the rhs !!!!!!!!!!!! output real rhs(:,:,:) in the z pencil !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!so the key factor a a2 a3 ax bx !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ay by !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! az bz call transpose_z_to_y(rhs,rw2,ph) do k=ph%yst(3),ph%yen(3) do i=ph%yst(1),ph%yen(1) do j=1,ny/2 rw2b(i,j,k)=rw2(i,2*(j-1)+1,k) enddo do j=ny/2+1,ny rw2b(i,j,k)=rw2(i,2*ny-2*j+2,k) enddo enddo end do call transpose_y_to_z(rw2b,rhs,ph) if (.not. fft_initialised) then call decomp_2d_fft_init(PHYSICAL_IN_Z,nx,ny,nz) fft_initialised = .true. end if ! compute r2c transform !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! call decomp_2d_fft_3d(rhs,cw1) !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! normalisation cw1 = cw1 / real(nx, kind=mytype) /real(ny, kind=mytype) \u0026amp; / real(nz, kind=mytype) #ifdef DEBUG do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) then write(*,100) 'START',i,j,k,cw1(i,j,k) end if end do end do end do #endif ! post-processing in spectral space ! POST PROCESSING IN Z do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*bz(k)+tmp2*az(k), \u0026amp; tmp2*bz(k)-tmp1*az(k), kind=mytype) #ifdef DEBUG if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) \u0026amp; write(*,100) 'after z',i,j,k,cw1(i,j,k) #endif end do end do end do ! POST PROCESSING IN X do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*bx(i)+tmp2*ax(i), \u0026amp; tmp2*bx(i)-tmp1*ax(i), kind=mytype) if (i.gt.(nx/2+1)) cw1(i,j,k)=-cw1(i,j,k) #ifdef DEBUG if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) \u0026amp; write(*,100) 'after x',i,j,k,cw1(i,j,k) #endif end do end do end do ! POST PROCESSING IN Y ! NEED TO BE IN Y PENCILS!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!sp!!!!!!!!!!!!!!!!!!!!!!!!!!!! call transpose_x_to_y(cw1,cw2,sp) !!!!!!!!!!!!!!!!!!!!!sp!!!!!!!!!!!!!!!!!!!!!!!!!!!! do k = sp%yst(3), sp%yen(3) do i = sp%yst(1), sp%yen(1) cw2b(i,1,k)=cw2(i,1,k) do j = 2,ny tmp1 = real(cw2(i,j,k), kind=mytype) tmp2 = aimag(cw2(i,j,k)) tmp3 = real(cw2(i,ny-j+2,k), kind=mytype) tmp4 = aimag(cw2(i,ny-j+2,k)) xx1=tmp1*by(j)/2._mytype xx2=tmp1*ay(j)/2._mytype xx3=tmp2*by(j)/2._mytype xx4=tmp2*ay(j)/2._mytype xx5=tmp3*by(j)/2._mytype xx6=tmp3*ay(j)/2._mytype xx7=tmp4*by(j)/2._mytype xx8=tmp4*ay(j)/2._mytype cw2b(i,j,k) = cmplx(xx1+xx4+xx5-xx8,-xx2+xx3+xx6+xx7, \u0026amp; kind=mytype) end do end do end do #ifdef DEBUG do k = sp%yst(3), sp%yen(3) do j = sp%yst(2), sp%yen(2) do i = sp%yst(1), sp%yen(1) if (abs(cw2b(i,j,k)) \u0026gt; 1.0e-4) then write(*,100) 'after y',i,j,k,cw2b(i,j,k) print *,kxyz(i,j,k) end if end do end do end do #endif if (istret==0) then ! Solve Poisson ! doing wave number division in Y-pencil do k = sp%yst(3), sp%yen(3) do j = sp%yst(2), sp%yen(2) do i = sp%yst(1), sp%yen(1) !tmp1=real(zk2(k)+yk2(j)+xk2(i), kind=mytype) !tmp2=aimag(zk2(k)+yk2(j)+xk2(i)) tmp1=real(kxyz(i,j,k), kind=mytype) tmp2=aimag(kxyz(i,j,k)) !xyzk=cmplx(tmp1,tmp2, kind=mytype) !CANNOT DO A DIVISION BY ZERO if ((abs(tmp1).lt.epsilon).and.(abs(tmp2).lt.epsilon)) then cw2b(i,j,k)=cmplx(0._mytype,0._mytype, kind=mytype) end if if ((abs(tmp1).lt.epsilon).and.(abs(tmp2).ge.epsilon)) then cw2b(i,j,k)=cmplx(0._mytype, \u0026amp; aimag(cw2b(i,j,k))/(-tmp2), kind=mytype) end if if ((abs(tmp1).ge.epsilon).and.(abs(tmp2).lt.epsilon)) then cw2b(i,j,k)=cmplx( real(cw2b(i,j,k), kind=mytype) \u0026amp; /(-tmp1), 0._mytype, kind=mytype) end if if ((abs(tmp1).ge.epsilon).and.(abs(tmp2).ge.epsilon)) then cw2b(i,j,k)=cmplx( real(cw2b(i,j,k), kind=mytype) \u0026amp; /(-tmp1), \u0026amp; aimag(cw2b(i,j,k))/(-tmp2), kind=mytype) end if end do end do end do else !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! call matrice_refinement() !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! do k = sp%yst(3), sp%yen(3) ! do j = 1,ny/2 ! do i = sp%yst(1), sp%yen(1) ! print *,i,j,k,a(i,j,k,3) !! if (nrank.le.1) print *,i,j,k,a(i,j,k,3) !! if (nrank.gt.1) print *,i+4,j,k,a(i,j,k,3) ! enddo ! enddo ! enddo !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!istret !=3 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! if (istret.ne.3) then cw2(:,:,:)=0.;cw2c(:,:,:)=0. do k = sp%yst(3), sp%yen(3) do j = 1,ny/2 do i = sp%yst(1), sp%yen(1) cw2(i,j,k)=cw2b(i,2*j-1,k) cw2c(i,j,k)=cw2b(i,2*j,k) enddo enddo enddo ! do k = sp%yst(3), sp%yen(3) ! do j = 1,ny/2 ! do i = sp%yst(1), sp%yen(1) ! if (abs(cw2(i,j,k)) \u0026gt; 1.0e-4) then ! write(*,*) 'before IN',i,j,k,cw2(i,j,k)!*2. !! end if ! end do ! end do ! end do !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!for the strech grid!!!!!!!!!!!!!!!!!!!!!!! call inversion5_v1(a,cw2,sp) call inversion5_v1(a2,cw2c,sp) ! cw2(1,1,1)=cw2(1,1,1)*0.5 ! do k = sp%yst(3), sp%yen(3) ! do j = 1,ny/2 ! do i = sp%yst(1), sp%yen(1) ! if (abs(cw2c(i,j,k)) \u0026gt; 1.0e-4) then ! write(*,*) 'after IN',i,j,k,cw2c(i,j,k)!*2. ! end if ! end do ! end do ! end do cw2b(:,:,:)=0. do k=sp%yst(3), sp%yen(3) do j=1,ny-1,2 do i=sp%yst(1), sp%yen(1) cw2b(i,j,k)=cw2(i,(j+1)/2,k) enddo enddo do j=2,ny,2 do i=sp%yst(1), sp%yen(1) cw2b(i,j,k)=cw2c(i,j/2,k) enddo enddo enddo !do k=sp%yst(3), sp%yen(3) !do i=sp%yst(1), sp%yen(1) ! if ((xkx(i)==0).and.(zkz(k)==0)) then ! ! cw2b(i,1,1)=0. ! ! cw2b(i,ny,1)=0. ! endif !enddo !enddo else do k = sp%yst(3), sp%yen(3) do j = 1,ny do i = sp%yst(1), sp%yen(1) cw2(i,j,k)=cw2b(i,j,k) enddo enddo enddo call inversion5_v2(a3,cw2,sp) do k = sp%yst(3), sp%yen(3) do j = 1,ny do i = sp%yst(1), sp%yen(1) cw2b(i,j,k)=cw2(i,j,k) enddo enddo enddo endif endif ! print *,nrank, sp%yst(3),sp%yen(3),sp%yst(1),sp%yen(1) !we are in Y pencil do k = sp%yst(3), sp%yen(3) do i = sp%yst(1), sp%yen(1) if ((i==nx/2+1).and.(k==nz/2+1)) then cw2b(i,:,k)=0. endif enddo enddo #ifdef DEBUG do k = sp%yst(3), sp%yen(3) do j = sp%yst(2), sp%yen(2) do i = sp%yst(1), sp%yen(1) if (abs(cw2b(i,j,k)) \u0026gt; 1.0e-4) then write(*,100) 'AFTER',i,j,k,cw2b(i,j,k) print *,kxyz(i,j,k) end if end do end do end do #endif ! post-processing backward ! POST PROCESSING IN Y do k = sp%yst(3), sp%yen(3) do i = sp%yst(1), sp%yen(1) cw2(i,1,k)=cw2b(i,1,k) do j = 2,ny tmp1 = real(cw2b(i,j,k), kind=mytype) tmp2 = aimag(cw2b(i,j,k)) tmp3 = real(cw2b(i,ny-j+2,k), kind=mytype) tmp4 = aimag(cw2b(i,ny-j+2,k)) xx1=tmp1*by(j) xx2=tmp1*ay(j) xx3=tmp2*by(j) xx4=tmp2*ay(j) xx5=tmp3*by(j) xx6=tmp3*ay(j) xx7=tmp4*by(j) xx8=tmp4*ay(j) cw2(i,j,k) = cmplx(xx1-xx4+xx6+xx7,-(-xx2-xx3+xx5-xx8), \u0026amp; kind=mytype) end do end do end do ! Back to X-pencil call transpose_y_to_x(cw2,cw1,sp) #ifdef DEBUG do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) then write(*,100) 'AFTER Y',i,j,k,cw1(i,j,k) end if end do end do end do #endif ! POST PROCESSING IN X do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*bx(i)-tmp2*ax(i), \u0026amp; tmp2*bx(i)+tmp1*ax(i), kind=mytype) if (i.gt.(nx/2+1)) cw1(i,j,k)=-cw1(i,j,k) #ifdef DEBUG if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) \u0026amp; write(*,100) 'AFTER X',i,j,k,cw1(i,j,k) #endif end do end do end do ! POST PROCESSING IN Z do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*bz(k)-tmp2*az(k), \u0026amp; tmp2*bz(k)+tmp1*az(k), kind=mytype) #ifdef DEBUG if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) \u0026amp; write(*,100) 'END',i,j,k,cw1(i,j,k) #endif end do end do end do ! compute c2r transform, back to physical space call decomp_2d_fft_3d(cw1,rhs) ! rhs is in Z-pencil but requires global operations in Y call transpose_z_to_y(rhs,rw2,ph) do k=ph%yst(3),ph%yen(3) do i=ph%yst(1),ph%yen(1) do j=1,ny/2 rw2b(i,2*j-1,k)=rw2(i,j,k) enddo do j=1,ny/2 rw2b(i,2*j,k)=rw2(i,ny-j+1,k) enddo enddo end do call transpose_y_to_z(rw2b,rhs,ph) ! call decomp_2d_fft_finalize return end subroutine poisson_010 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!Neumann!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!11x!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!Neumann Neumann Neumann!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!Neumann Neumann periodic!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! Solving 3D Poisson equation: Neumann in X, Y; Neumann/periodic in Z !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! subroutine poisson_11x(rhs, nclz1) !!!!!!!!!!!!!!twice real to complex !!!!!!!!!!! 1: transform rhs-rw2-rw1 !!!!!!!!!!! 2: fft rhs-----rw1 !!!!!!!!!!!!!!twice complex to real !!!!!!!!!!! 1: transfrom rw1-rw2--rhs !!!!!!!!!!! 2: fft rw1------rhs !!!!!!!!!!!!! post-processing operations is under the complex condition !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!! input real rhs(:.:,:) in the z pencil !!!!!!!!!!!! 2+2 transform z--y y-\u0026gt;x x-y y-z|destination: modify the rhs !!!!!!!!!!!! 1 normalisation !!!!!!!!!!!! 1 FFT forward !!!!!!!!!!!! 1 post-processing z !!!!!!!!!!!! 1 transpose x--y !!!!!!!!!!!! 1 post-processing y !!!!!!!!!!!! 1 transpose y--x !!!!!!!!!!!! 1 post-processing x (because he thinks he is in X pencil, Zhaoliang said no) !!!!!!!!!!!! 1 poisson solver !!!!!!!!!!!! 1 matrice_refinemento !!!!!!!!!!!! 1 transpse x--y (for strecting because strecthing is in the y direction) !!!!!!!!!!!! 1 inversion5_v1 !!!!!!!!!!!! 1 transpose y---x !!!!!!!!!!!! !!!!!!!!!!!! 1 post-processing x !!!!!!!!!!!! 1 transpose x-y !!!!!!!!!!!! 1 post-processing y !!!!!!!!!!!! 1 transpose y-x !!!!!!!!!!!! 1 post-processing z !!!!!!!!!!!!! !!!!!!!!!!!! 1 FFT backward !!!!!!!!!!!! 2+2 transform |destination: modify the rhs !!!!!!!!!!!! output real rhs(:,:,:) in the z pencil !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! implicit none integer, intent(IN) :: nclz1 real(mytype), dimension(:,:,:), intent(INOUT) :: rhs complex(mytype) :: xyzk real(mytype) :: tmp1, tmp2, tmp3, tmp4 real(mytype) :: xx1,xx2,xx3,xx4,xx5,xx6,xx7,xx8 integer :: nx,ny,nz, i,j,k 100 format(1x,a8,3I4,2F12.6) nx = nx_global - 1 ! becasuse (110) ny = ny_global - 1 if (nclz1==1) then !!!!!the free-slip boundary condition nz = nz_global - 1 else if (nclz1==0) then nz = nz_global end if if (nclz1==1) then do j=1,ph%zsz(2) do i=1,ph%zsz(1) do k=1,nz/2 rw3(i,j,k)=rhs(i,j,2*(k-1)+1) end do do k=nz/2+1,nz rw3(i,j,k)=rhs(i,j,2*nz-2*k+2) end do end do end do call transpose_z_to_y(rw3,rw2,ph) else if (nclz1==0) then call transpose_z_to_y(rhs,rw2,ph) end if do k=ph%yst(3),ph%yen(3) do i=ph%yst(1),ph%yen(1) do j=1,ny/2 rw2b(i,j,k)=rw2(i,2*(j-1)+1,k) end do do j=ny/2+1,ny rw2b(i,j,k)=rw2(i,2*ny-2*j+2,k) end do end do end do ! the global operations in X call transpose_y_to_x(rw2b,rw1,ph) do k=ph%xst(3),ph%xen(3) do j=ph%xst(2),ph%xen(2) do i=1,nx/2 rw1b(i,j,k)=rw1(2*(i-1)+1,j,k) end do do i=nx/2+1,nx rw1b(i,j,k)=rw1(2*nx-2*i+2,j,k) end do end do end do ! back to Z-pencil call transpose_x_to_y(rw1b,rw2,ph) call transpose_y_to_z(rw2,rhs,ph) if (.not. fft_initialised) then call decomp_2d_fft_init(PHYSICAL_IN_Z,nx,ny,nz) fft_initialised = .true. end if ! compute r2c transform call decomp_2d_fft_3d(rhs,cw1) ! normalisation cw1 = cw1 / real(nx, kind=mytype) /real(ny, kind=mytype) \u0026amp; / real(nz, kind=mytype) #ifdef DEBUG do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) then write(*,100) 'START',i,j,k,cw1(i,j,k) end if end do end do end do #endif ! post-processing in spectral space ! POST PROCESSING IN Z do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*bz(k)+tmp2*az(k), \u0026amp; tmp2*bz(k)-tmp1*az(k), kind=mytype) #ifdef DEBUG if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) \u0026amp; write(*,100) 'after z',i,j,k,cw1(i,j,k) #endif end do end do end do !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!while 1 should be in the corresponding pencils !!!!!!!!!!!!!!!!!!!!!!!!!!!characteristic 2 : there sholud be tmp1*2*3*4 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ! POST PROCESSING IN Y ! WE HAVE TO BE IN Y PENCILS !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!No we should be the z pencil! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!there is something wrong in the source code!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!But now we are in the z pencil not in !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! the x pencil! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!so,it should be !!!!!!!!!!!!!!!!!call transpose_z_to_y rather than transpose_x_to_y !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! call transpose_x_to_y(cw1,cw2,sp) do k = sp%yst(3), sp%yen(3) do i = sp%yst(1), sp%yen(1) cw2b(i,1,k)=cw2(i,1,k) do j = 2,ny tmp1 = real(cw2(i,j,k), kind=mytype) tmp2 = aimag(cw2(i,j,k)) tmp3 = real(cw2(i,ny-j+2,k), kind=mytype) tmp4 = aimag(cw2(i,ny-j+2,k)) xx1=tmp1*by(j)/2._mytype xx2=tmp1*ay(j)/2._mytype xx3=tmp2*by(j)/2._mytype xx4=tmp2*ay(j)/2._mytype xx5=tmp3*by(j)/2._mytype xx6=tmp3*ay(j)/2._mytype xx7=tmp4*by(j)/2._mytype xx8=tmp4*ay(j)/2._mytype cw2b(i,j,k) = cmplx(xx1+xx4+xx5-xx8,-xx2+xx3+xx6+xx7, \u0026amp; kind=mytype) end do end do end do ! back to X-pencil !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!the same wrong ,now you should !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!go back to the z pencil rather than the x pencil call transpose_y_to_x(cw2b,cw1,sp) #ifdef DEBUG do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) then write(*,100) 'after y',i,j,k,cw1(i,j,k) end if end do end do end do #endif ! POST PROCESSING IN X do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) cw1b(1,j,k)=cw1(1,j,k) do i = 2,nx tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) tmp3 = real(cw1(nx-i+2,j,k), kind=mytype) tmp4 = aimag(cw1(nx-i+2,j,k)) xx1=tmp1*bx(i)/2._mytype xx2=tmp1*ax(i)/2._mytype xx3=tmp2*bx(i)/2._mytype xx4=tmp2*ax(i)/2._mytype xx5=tmp3*bx(i)/2._mytype xx6=tmp3*ax(i)/2._mytype xx7=tmp4*bx(i)/2._mytype xx8=tmp4*ax(i)/2._mytype cw1b(i,j,k) = cmplx(xx1+xx4+xx5-xx8,-xx2+xx3+xx6+xx7, \u0026amp; kind=mytype) end do end do end do #ifdef DEBUG do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) if (abs(cw1b(i,j,k)) \u0026gt; 1.0e-4) then write(*,*) 'BEFORE',i,j,k,cw1b(i,j,k) end if end do end do end do #endif if (istret==0) then ! Solve Poisson do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) !tmp1=real(zk2(k)+yk2(j)+xk2(i), kind=mytype) !tmp2=aimag(zk2(k)+yk2(j)+xk2(i)) tmp1=real(kxyz(i,j,k), kind=mytype) tmp2=aimag(kxyz(i,j,k)) !xyzk=cmplx(tmp1,tmp2, kind=mytype) !CANNOT DO A DIVISION BY ZERO if ((abs(tmp1).lt.epsilon).and.(abs(tmp2).lt.epsilon)) then cw1b(i,j,k)=cmplx(0._mytype,0._mytype, kind=mytype) end if if ((abs(tmp1).lt.epsilon).and.(abs(tmp2).ge.epsilon)) then cw1b(i,j,k)=cmplx(0._mytype, \u0026amp; aimag(cw1b(i,j,k))/(-tmp2), kind=mytype) end if if ((abs(tmp1).ge.epsilon).and.(abs(tmp2).lt.epsilon)) then cw1b(i,j,k)=cmplx( real(cw1b(i,j,k), kind=mytype) \u0026amp; /(-tmp1), 0._mytype, kind=mytype) end if if ((abs(tmp1).ge.epsilon).and.(abs(tmp2).ge.epsilon)) then cw1b(i,j,k)=cmplx( real(cw1b(i,j,k), kind=mytype) \u0026amp; /(-tmp1), \u0026amp; aimag(cw1b(i,j,k))/(-tmp2), kind=mytype) end if end do end do end do else call matrice_refinement() !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!11so we should z-\u0026gt;y pencil but not x-\u0026gt;ypencil ! the stretching is only working in Y pencils !!!!!!!!!!!!!!!why the default the pencil is x pencil rather than z pencil!!! call transpose_x_to_y(cw1b,cw2b,sp) !we are now in Y pencil if (istret.ne.3) then cw2(:,:,:)=0.;cw2c(:,:,:)=0. do k = sp%yst(3), sp%yen(3) do j = 1,ny/2 do i = sp%yst(1), sp%yen(1) cw2(i,j,k)=cw2b(i,2*j-1,k) cw2c(i,j,k)=cw2b(i,2*j,k) enddo enddo enddo call inversion5_v1(a,cw2,sp) call inversion5_v1(a2,cw2c,sp) cw2b(:,:,:)=0. do k=sp%yst(3), sp%yen(3) do j=1,ny-1,2 do i=sp%yst(1), sp%yen(1) cw2b(i,j,k)=cw2(i,(j+1)/2,k) enddo enddo do j=2,ny,2 do i=sp%yst(1), sp%yen(1) cw2b(i,j,k)=cw2c(i,j/2,k) enddo enddo enddo else cw2(:,:,:)=0. do k = sp%yst(3), sp%yen(3) do j = sp%yst(2), sp%yen(2) do i = sp%yst(1), sp%yen(1) cw2(i,j,k)=cw2b(i,j,k) enddo enddo enddo call inversion5_v2(a3,cw2,sp) do k = sp%yst(3), sp%yen(3) do j = sp%yst(2), sp%yen(2) do i = sp%yst(1), sp%yen(1) cw2b(i,j,k)=cw2(i,j,k) enddo enddo enddo endif !we have to go back in X pencils call transpose_y_to_x(cw2b,cw1b,sp) endif #ifdef DEBUG do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) if (abs(cw1b(i,j,k)) \u0026gt; 1.0e-6) then write(*,*) 'AFTER',i,j,k,cw1b(i,j,k) end if end do end do end do #endif !stop ! post-processing backward do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) cw1(1,j,k)=cw1b(1,j,k) do i = 2,nx tmp1 = real(cw1b(i,j,k), kind=mytype) tmp2 = aimag(cw1b(i,j,k)) tmp3 = real(cw1b(nx-i+2,j,k), kind=mytype) tmp4 = aimag(cw1b(nx-i+2,j,k)) xx1=tmp1*bx(i) xx2=tmp1*ax(i) xx3=tmp2*bx(i) xx4=tmp2*ax(i) xx5=tmp3*bx(i) xx6=tmp3*ax(i) xx7=tmp4*bx(i) xx8=tmp4*ax(i) cw1(i,j,k) = cmplx(xx1-xx4+xx6+xx7,-(-xx2-xx3+xx5-xx8), \u0026amp; kind=mytype) end do end do end do #ifdef DEBUG do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) then write(*,100) 'AFTER X',i,j,k,cw1(i,j,k) end if end do end do end do #endif ! POST PROCESSING IN Y ! NEED to be in Y-pencil call transpose_x_to_y(cw1,cw2,sp) do k = sp%yst(3), sp%yen(3) do i = sp%yst(1), sp%yen(1) cw2b(i,1,k)=cw2(i,1,k) do j = 2,ny tmp1 = real(cw2(i,j,k), kind=mytype) tmp2 = aimag(cw2(i,j,k)) tmp3 = real(cw2(i,ny-j+2,k), kind=mytype) tmp4 = aimag(cw2(i,ny-j+2,k)) xx1=tmp1*by(j) xx2=tmp1*ay(j) xx3=tmp2*by(j) xx4=tmp2*ay(j) xx5=tmp3*by(j) xx6=tmp3*ay(j) xx7=tmp4*by(j) xx8=tmp4*ay(j) cw2b(i,j,k) = cmplx(xx1-xx4+xx6+xx7,-(-xx2-xx3+xx5-xx8), \u0026amp; kind=mytype) end do end do end do #ifdef DEBUG do k = sp%yst(3), sp%yen(3) do j = sp%yst(2), sp%yen(2) do i = sp%yst(1), sp%yen(1) if (abs(cw2b(i,j,k)) \u0026gt; 1.0e-4) then write(*,100) 'AFTER Y',i,j,k,cw2b(i,j,k) end if end do end do end do #endif ! back to X-pencil call transpose_y_to_x(cw2b,cw1,sp) ! POST PROCESSING IN Z do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) tmp1 = real(cw1(i,j,k), kind=mytype) tmp2 = aimag(cw1(i,j,k)) cw1(i,j,k) = cmplx(tmp1*bz(k)-tmp2*az(k), \u0026amp; tmp2*bz(k)+tmp1*az(k), kind=mytype) #ifdef DEBUG if (abs(cw1(i,j,k)) \u0026gt; 1.0e-4) \u0026amp; write(*,100) 'END',i,j,k,cw1(i,j,k) #endif end do end do end do ! compute c2r transform, back to physical space call decomp_2d_fft_3d(cw1,rhs) if (nclz1==1) then do j=1,ph%zsz(2) do i=1,ph%zsz(1) do k=1,nz/2 rw3(i,j,2*k-1)=rhs(i,j,k) end do do k=1,nz/2 rw3(i,j,2*k)=rhs(i,j,nz-k+1) end do end do end do call transpose_z_to_y(rw3,rw2,ph) else if (nclz1==0) then call transpose_z_to_y(rhs,rw2,ph) end if do k=ph%yst(3),ph%yen(3) do i=ph%yst(1),ph%yen(1) do j=1,ny/2 rw2b(i,2*j-1,k)=rw2(i,j,k) end do do j=1,ny/2 rw2b(i,2*j,k)=rw2(i,ny-j+1,k) end do enddo end do call transpose_y_to_x(rw2b,rw1,ph) do k=ph%xst(3),ph%xen(3) do j=ph%xst(2),ph%xen(2) do i=1,nx/2 rw1b(2*i-1,j,k)=rw1(i,j,k) enddo do i=1,nx/2 rw1b(2*i,j,k)=rw1(nx-i+1,j,k) enddo enddo end do call transpose_x_to_y(rw1b,rw2,ph) call transpose_y_to_z(rw2,rhs,ph) ! call decomp_2d_fft_finalize return end subroutine poisson_11x subroutine abxyz(ax,ay,az,bx,by,bz,nx,ny,nz,bcx,bcy,bcz) use param implicit none integer, intent(IN) :: nx,ny,nz integer, intent(IN) :: bcx,bcy,bcz real(mytype), dimension(:), intent(OUT) :: ax,bx real(mytype), dimension(:), intent(OUT) :: ay,by real(mytype), dimension(:), intent(OUT) :: az,bz integer :: i,j,k if (bcx==0) then do i=1,nx !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!! generate the x direction coeficiency!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ax(i) = sin(real(i-1, kind=mytype)*PI/real(nx, kind=mytype)) bx(i) = cos(real(i-1, kind=mytype)*PI/real(nx, kind=mytype)) end do else if (bcx==1) then do i=1,nx !!!!!!!!!!!!!!!!!!!!!!!!!one and a half of PI ax(i) = sin(real(i-1, kind=mytype)*PI/2.0_mytype/ \u0026amp; real(nx, kind=mytype)) bx(i) = cos(real(i-1, kind=mytype)*PI/2.0_mytype/ \u0026amp; real(nx, kind=mytype)) end do end if if (bcy==0) then do j=1,ny ay(j) = sin(real(j-1, kind=mytype)*PI/real(ny, kind=mytype)) by(j) = cos(real(j-1, kind=mytype)*PI/real(ny, kind=mytype)) end do else if (bcy==1) then do j=1,ny ay(j) = sin(real(j-1, kind=mytype)*PI/2.0_mytype/ \u0026amp; real(ny, kind=mytype)) by(j) = cos(real(j-1, kind=mytype)*PI/2.0_mytype/ \u0026amp; real(ny, kind=mytype)) end do end if if (bcz==0) then do k=1,nz az(k) = sin(real(k-1, kind=mytype)*PI/real(nz, kind=mytype)) bz(k) = cos(real(k-1, kind=mytype)*PI/real(nz, kind=mytype)) end do else if (bcz==1) then do k=1,nz az(k) = sin(real(k-1, kind=mytype)*PI/2.0_mytype/ \u0026amp; real(nz, kind=mytype)) bz(k) = cos(real(k-1, kind=mytype)*PI/2.0_mytype/ \u0026amp; real(nz, kind=mytype)) end do end if return end subroutine abxyz ! *********************************************************** ! subroutine waves () ! !*********************************************************** USE derivX USE derivY USE derivZ USE param USE decomp_2d USE variables use decomp_2d_fft implicit none integer :: i,j,k real(mytype) :: w,wp,w1,w1p complex(mytype) :: xyzk complex(mytype) :: ytt,xtt,ztt,yt1,xt1,yt2,xt2 complex(mytype) :: xtt1,ytt1,ztt1,zt1,zt2,tmp1,tmp2,tmp3 complex(mytype) :: tmp4,tmp5,tmp6 xkx(:)=0. ; xk2(:)=0. ; yky(:)=0. ; yk2(:)=0. zkz(:)=0. ; zk2(:)=0. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !WAVE NUMBER IN X !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! if (nclx==0) then do i=1,nx/2+1 w=2.*pi*(i-1)/nx wp=acix6*2.*dx*sin(w/2.)+(bcix6*2.*dx)*sin(3./2.*w) wp=wp/(1.+2.*alcaix6*cos(w)) xkx(i)=cmplx(nx*wp/xlx,nx*wp/xlx, kind=mytype) exs(i)=cmplx(nx*w/xlx,nx*w/xlx, kind=mytype) xk2(i)=cmplx((nx*wp/xlx)**2,(nx*wp/xlx)**2, kind=mytype) enddo do i=nx/2+2,nx xkx(i)=xkx(nx-i+2) exs(i)=exs(nx-i+2) xk2(i)=xk2(nx-i+2) enddo else do i=1,nx w=2.*pi*0.5*(i-1)/nxm wp=acix6*2.*dx*sin(w/2.)+(bcix6*2.*dx)*sin(3./2.*w) wp=wp/(1.+2.*alcaix6*cos(w)) xkx(i)=cmplx(nxm*wp/xlx,nxm*wp/xlx, kind=mytype) exs(i)=cmplx(nxm*w/xlx,nxm*w/xlx, kind=mytype) xk2(i)=cmplx((nxm*wp/xlx)**2,(nxm*wp/xlx)**2, kind=mytype) enddo xkx(1)=0. exs(1)=0. xk2(1)=0. endif !WAVE NUMBER IN Y if (ncly==0) then do j=1,ny/2+1 w=2.*pi*(j-1)/ny wp=aciy6*2.*dy*sin(w/2.)+(bciy6*2.*dy)*sin(3./2.*w) wp=wp/(1.+2.*alcaiy6*cos(w)) if (istret==0) yky(j)=cmplx(ny*wp/yly,ny*wp/yly, kind=mytype) if (istret.ne.0) yky(j)=cmplx(ny*wp,ny*wp, kind=mytype) eys(j)=cmplx(ny*w/yly,ny*w/yly, kind=mytype) yk2(j)=cmplx((ny*wp/yly)**2,(ny*wp/yly)**2, kind=mytype) enddo do j=ny/2+2,ny yky(j)=yky(ny-j+2) eys(j)=eys(ny-j+2) yk2(j)=yk2(ny-j+2) enddo else do j=1,ny w=2.*pi*0.5*(j-1)/nym wp=aciy6*2.*dy*sin(w/2.)+(bciy6*2.*dy)*sin(3./2.*w) wp=wp/(1.+2.*alcaiy6*cos(w)) if (istret==0) yky(j)=cmplx(nym*wp/yly,nym*wp/yly, kind=mytype) if (istret.ne.0) yky(j)=cmplx(nym*wp,nym*wp, kind=mytype) eys(j)=cmplx(nym*w/yly,nym*w/yly, kind=mytype) yk2(j)=cmplx((nym*wp/yly)**2,(nym*wp/yly)**2, kind=mytype) enddo yky(1)=0. eys(1)=0. yk2(1)=0. endif !WAVE NUMBER IN Z if (nclz==0) then do k=1,nz/2+1 w=2.*pi*(k-1)/nz wp=aciz6*2.*dz*sin(w/2.)+(bciz6*2.*dz)*sin(3./2.*w) wp=wp/(1.+2.*alcaiz6*cos(w)) zkz(k)=cmplx(nz*wp/zlz,nz*wp/zlz, kind=mytype) ezs(k)=cmplx(nz*w/zlz,nz*w/zlz, kind=mytype) zk2(k)=cmplx((nz*wp/zlz)**2,(nz*wp/zlz)**2, kind=mytype) enddo else do k=1,nz/2+1 w=2.*pi*0.5*(k-1)/nzm w1=2.*pi*0.5*(nzm-k+1)/nzm wp=aciz6*2.*dz*sin(w/2.)+(bciz6*2.*dz)*sin(3./2.*w) wp=wp/(1.+2.*alcaiz6*cos(w)) w1p=aciz6*2.*dz*sin(w1/2.)+(bciz6*2.*dz)*sin(3./2.*w1) w1p=w1p/(1.+2.*alcaiz6*cos(w1)) zkz(k)=cmplx(nzm*wp/zlz,-nzm*w1p/zlz, kind=mytype) ezs(k)=cmplx(nzm*w/zlz,nzm*w1/zlz, kind=mytype) zk2(k)=cmplx((nzm*wp/zlz)**2,(nzm*w1p/zlz)**2, kind=mytype) enddo endif ! !if (nrank==0) then ! do i=1,nx ! print *,i,ezs(i) ! enddo !endif !stop if ((nclx==0).and.(nclz==0).and.((ncly==1).or.(ncly==2))) then do k = sp%yst(3), sp%yen(3) do j = sp%yst(2), sp%yen(2) do i = sp%yst(1), sp%yen(1) xtt=cmplx((bicix6*2.*cos(real(exs(i))*3.*dx/2.)+\u0026amp; cicix6*2.*cos(real(exs(i), kind=mytype)*5.*dx/2.)),\u0026amp; (bicix6*2.*cos(real(exs(i), kind=mytype)*3.*dx/2.)+\u0026amp; cicix6*2.*cos(real(exs(i), kind=mytype)*5.*dx/2.)), kind=mytype) ytt=cmplx((biciy6*2.*cos(real(eys(j), kind=mytype)*3.*dy/2.)+\u0026amp; ciciy6*2.*cos(real(eys(j), kind=mytype)*5.*dy/2.)),\u0026amp; (biciy6*2.*cos(real(eys(j), kind=mytype)*3.*dy/2.)+\u0026amp; ciciy6*2.*cos(real(eys(j), kind=mytype)*5.*dy/2.)), kind=mytype) ztt=cmplx((biciz6*2.*cos(real(ezs(k), kind=mytype)*3.*dz/2.)+\u0026amp; ciciz6*2.*cos(real(ezs(k), kind=mytype)*5.*dz/2.)),\u0026amp; (biciz6*2.*cos(real(ezs(k), kind=mytype)*3.*dz/2.)+\u0026amp; ciciz6*2.*cos(real(ezs(k), kind=mytype)*5.*dz/2.)), kind=mytype) xtt1=cmplx((aicix6*2.*cos(real(exs(i), kind=mytype)*dx/2.)),\u0026amp; (aicix6*2.*cos(real(exs(i), kind=mytype)*dx/2.)), kind=mytype) ytt1=cmplx((aiciy6*2.*cos(real(eys(j), kind=mytype)*dy/2.)),\u0026amp; (aiciy6*2.*cos(real(eys(j), kind=mytype)*dy/2.)), kind=mytype) ztt1=cmplx((aiciz6*2.*cos(real(ezs(k), kind=mytype)*dz/2.)),\u0026amp; (aiciz6*2.*cos(real(ezs(k), kind=mytype)*dz/2.)), kind=mytype) xt1=cmplx((1.+2.*ailcaix6*cos(real(exs(i), kind=mytype)*dx)),\u0026amp; (1.+2.*ailcaix6*cos(real(exs(i), kind=mytype)*dx)), kind=mytype) yt1=cmplx((1.+2.*ailcaiy6*cos(real(eys(j), kind=mytype)*dy)),\u0026amp; (1.+2.*ailcaiy6*cos(real(eys(j), kind=mytype)*dy)), kind=mytype) zt1=cmplx((1.+2.*ailcaiz6*cos(real(ezs(k), kind=mytype)*dz)),\u0026amp; (1.+2.*ailcaiz6*cos(real(ezs(k), kind=mytype)*dz)), kind=mytype) xt2=xk2(i)*((((ytt1+ytt)/yt1)*((ztt1+ztt)/zt1))**2) yt2=yk2(j)*((((xtt1+xtt)/xt1)*((ztt1+ztt)/zt1))**2) zt2=zk2(k)*((((xtt1+xtt)/xt1)*((ytt1+ytt)/yt1))**2) xyzk=xt2+yt2+zt2 kxyz(i,j,k)=xyzk ! print *,i,j,k, kxyz(i,j,k) enddo enddo enddo else if (nclz==0) then do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) xtt=cmplx((bicix6*2.*cos(real(exs(i), kind=mytype)*3.*dx/2.)+\u0026amp; cicix6*2.*cos(real(exs(i), kind=mytype)*5.*dx/2.)),\u0026amp; (bicix6*2.*cos(real(exs(i), kind=mytype)*3.*dx/2.)+\u0026amp; cicix6*2.*cos(real(exs(i), kind=mytype)*5.*dx/2.)), kind=mytype) ytt=cmplx((biciy6*2.*cos(real(eys(j), kind=mytype)*3.*dy/2.)+\u0026amp; ciciy6*2.*cos(real(eys(j), kind=mytype)*5.*dy/2.)),\u0026amp; (biciy6*2.*cos(real(eys(j), kind=mytype)*3.*dy/2.)+\u0026amp; ciciy6*2.*cos(real(eys(j), kind=mytype)*5.*dy/2.)), kind=mytype) ztt=cmplx((biciz6*2.*cos(real(ezs(k), kind=mytype)*3.*dz/2.)+\u0026amp; ciciz6*2.*cos(real(ezs(k), kind=mytype)*5.*dz/2.)),\u0026amp; (biciz6*2.*cos(real(ezs(k), kind=mytype)*3.*dz/2.)+\u0026amp; ciciz6*2.*cos(real(ezs(k), kind=mytype)*5.*dz/2.)), kind=mytype) xtt1=cmplx((aicix6*2.*cos(real(exs(i), kind=mytype)*dx/2.)),\u0026amp; (aicix6*2.*cos(real(exs(i), kind=mytype)*dx/2.)), kind=mytype) ytt1=cmplx((aiciy6*2.*cos(real(eys(j), kind=mytype)*dy/2.)),\u0026amp; (aiciy6*2.*cos(real(eys(j), kind=mytype)*dy/2.)), kind=mytype) ztt1=cmplx((aiciz6*2.*cos(real(ezs(k), kind=mytype)*dz/2.)),\u0026amp; (aiciz6*2.*cos(real(ezs(k), kind=mytype)*dz/2.)), kind=mytype) xt1=cmplx((1.+2.*ailcaix6*cos(real(exs(i), kind=mytype)*dx)),\u0026amp; (1.+2.*ailcaix6*cos(real(exs(i))*dx)), kind=mytype) yt1=cmplx((1.+2.*ailcaiy6*cos(real(eys(j), kind=mytype)*dy)),\u0026amp; (1.+2.*ailcaiy6*cos(real(eys(j), kind=mytype)*dy)), kind=mytype) zt1=cmplx((1.+2.*ailcaiz6*cos(real(ezs(k), kind=mytype)*dz)),\u0026amp; (1.+2.*ailcaiz6*cos(real(ezs(k), kind=mytype)*dz)), kind=mytype) xt2=xk2(i)*((((ytt1+ytt)/yt1)*((ztt1+ztt)/zt1))**2) yt2=yk2(j)*((((xtt1+xtt)/xt1)*((ztt1+ztt)/zt1))**2) zt2=zk2(k)*((((xtt1+xtt)/xt1)*((ytt1+ytt)/yt1))**2) xyzk=xt2+yt2+zt2 kxyz(i,j,k)=xyzk ! print *,i,j,k, kxyz(i,j,k) enddo enddo enddo else do k = sp%xst(3),sp%xen(3) do j = sp%xst(2),sp%xen(2) do i = sp%xst(1),sp%xen(1) xtt=cmplx((bicix6*2.*cos(real(exs(i), kind=mytype)*3.*dx/2.)+\u0026amp; cicix6*2.*cos(real(exs(i), kind=mytype)*5.*dx/2.)),\u0026amp; (bicix6*2.*cos(real(exs(i), kind=mytype)*3.*dx/2.)+\u0026amp; cicix6*2.*cos(real(exs(i), kind=mytype)*5.*dx/2.)), kind=mytype) ytt=cmplx((biciy6*2.*cos(real(eys(j), kind=mytype)*3.*dy/2.)+\u0026amp; ciciy6*2.*cos(real(eys(j), kind=mytype)*5.*dy/2.)),\u0026amp; (biciy6*2.*cos(real(eys(j), kind=mytype)*3.*dy/2.)+\u0026amp; ciciy6*2.*cos(real(eys(j), kind=mytype)*5.*dy/2.)), kind=mytype) ! ztt=cmplx((biciz6*2.*cos(real(ezs(k), kind=mytype)*3.*dz/2.)+\u0026amp; ciciz6*2.*cos(real(ezs(k), kind=mytype)*5.*dz/2.)),\u0026amp; (biciz6*2.*cos(aimag(ezs(k))*3.*dz/2.)+\u0026amp; ciciz6*2.*cos(aimag(ezs(k))*5.*dz/2.)), kind=mytype) ! xtt1=cmplx((aicix6*2.*cos(real(exs(i), kind=mytype)*dx/2.)),\u0026amp; (aicix6*2.*cos(real(exs(i), kind=mytype)*dx/2.)), kind=mytype) ytt1=cmplx((aiciy6*2.*cos(real(eys(j), kind=mytype)*dy/2.)),\u0026amp; (aiciy6*2.*cos(real(eys(j), kind=mytype)*dy/2.)), kind=mytype) ! ztt1=cmplx((aiciz6*2.*cos(real(ezs(k), kind=mytype)*dz/2.)),\u0026amp; (aiciz6*2.*cos(aimag(ezs(k))*dz/2.)), kind=mytype) ! xt1=cmplx((1.+2.*ailcaix6*cos(real(exs(i), kind=mytype)*dx)),\u0026amp; (1.+2.*ailcaix6*cos(real(exs(i), kind=mytype)*dx)), kind=mytype) yt1=cmplx((1.+2.*ailcaiy6*cos(real(eys(j), kind=mytype)*dy)),\u0026amp; (1.+2.*ailcaiy6*cos(real(eys(j), kind=mytype)*dy)), kind=mytype) zt1=cmplx((1.+2.*ailcaiz6*cos(real(ezs(k), kind=mytype)*dz)),\u0026amp; (1.+2.*ailcaiz6*cos(aimag(ezs(k))*dz)), kind=mytype) tmp1=cmplx(real(ztt1+ztt, kind=mytype)/real(zt1, kind=mytype),\u0026amp; aimag(ztt1+ztt)/aimag(zt1), kind=mytype) tmp2=cmplx(real(ytt1+ytt, kind=mytype)/real(yt1, kind=mytype),\u0026amp; real(ytt1+ytt, kind=mytype)/real(yt1, kind=mytype), kind=mytype) tmp3=cmplx(real(xtt1+xtt, kind=mytype)/real(xt1, kind=mytype),\u0026amp; real(xtt1+xtt, kind=mytype)/real(xt1, kind=mytype), kind=mytype) tmp4=cmplx((real(tmp1, kind=mytype)*real(tmp2, kind=mytype))**2,(aimag(tmp1)*aimag(tmp2))**2, kind=mytype) tmp5=cmplx((real(tmp1, kind=mytype)*real(tmp3, kind=mytype))**2,(aimag(tmp1)*aimag(tmp3))**2, kind=mytype) tmp6=cmplx((real(tmp3, kind=mytype)*real(tmp2, kind=mytype))**2,(aimag(tmp3)*aimag(tmp2))**2, kind=mytype) tmp1=cmplx(real(tmp4, kind=mytype)*real(xk2(i), kind=mytype),aimag(tmp4)*aimag(xk2(i)), kind=mytype) tmp2=cmplx(real(tmp5, kind=mytype)*real(yk2(j), kind=mytype),aimag(tmp5)*aimag(yk2(j)), kind=mytype) tmp3=cmplx(real(tmp6, kind=mytype)*real(zk2(k), kind=mytype),aimag(tmp6)*aimag(zk2(k)), kind=mytype) xyzk=tmp1+tmp2+tmp3 kxyz(i,j,k)=xyzk ! print *,i,j,k,zt1,yt1 enddo enddo enddo endif endif ! do k=1,1!nz ! do j=1,ny ! do i=1,1!!nx ! print *,j,a(i,j,k,3),kxyz(i,j,k) ! enddo ! enddo ! enddo end subroutine waves !************************************************************************** ! subroutine matrice_refinement() ! !************************************************************************** USE decomp_2d USE variables USE param USE var USE MPI USE derivX USE derivY USE derivZ implicit none integer :: i,j,k complex(mytype),dimension(sp%yst(1):sp%yen(1)) :: transx complex(mytype),dimension(sp%yst(2):sp%yen(2)) :: transy complex(mytype),dimension(sp%yst(3):sp%yen(3)) :: transz real(mytype) :: xa0,xa1 complex(mytype) :: ytt,xtt,ztt,yt1,xt1,yt2,xt2 complex(mytype) :: xtt1,ytt1,ztt1,zt1,zt2,tmp1,tmp2,tmp3 do i = sp%yst(1),sp%yen(1) xtt=cmplx((bicix6*2.*cos(real(exs(i), kind=mytype)*3.*dx/2.)+\u0026amp; cicix6*2.*cos(real(exs(i), kind=mytype)*5.*dx/2.)),\u0026amp; (bicix6*2.*cos(real(exs(i), kind=mytype)*3.*dx/2.)+\u0026amp; cicix6*2.*cos(real(exs(i), kind=mytype)*5.*dx/2.)), kind=mytype) xtt1=cmplx((aicix6*2.*cos(real(exs(i), kind=mytype)*dx/2.)),\u0026amp; (aicix6*2.*cos(real(exs(i), kind=mytype)*dx/2.)), kind=mytype) xt1=cmplx((1.+2.*ailcaix6*cos(real(exs(i), kind=mytype)*dx)),\u0026amp; (1.+2.*ailcaix6*cos(real(exs(i), kind=mytype)*dx)), kind=mytype) transx(i)=cmplx(real(xtt1+xtt, kind=mytype)/real(xt1, kind=mytype),\u0026amp; real(xtt1+xtt, kind=mytype)/real(xt1, kind=mytype), kind=mytype)!(xtt+xtt)/xt1 enddo do j = sp%yst(2),sp%yen(2) ytt=cmplx((biciy6*2.*cos(real(eys(j), kind=mytype)*3.*dy/2.)+\u0026amp; ciciy6*2.*cos(real(eys(j), kind=mytype)*5.*dy/2.)),\u0026amp; (biciy6*2.*cos(real(eys(j), kind=mytype)*3.*dy/2.)+\u0026amp; ciciy6*2.*cos(real(eys(j), kind=mytype)*5.*dy/2.)), kind=mytype) ytt1=cmplx((aiciy6*2.*cos(real(eys(j), kind=mytype)*dy/2.)),\u0026amp; (aiciy6*2.*cos(real(eys(j), kind=mytype)*dy/2.)), kind=mytype) yt1=cmplx((1.+2.*ailcaiy6*cos(real(eys(j), kind=mytype)*dy)),\u0026amp; (1.+2.*ailcaiy6*cos(real(eys(j), kind=mytype)*dy)), kind=mytype) transy(j)=cmplx(real(ytt1+ytt, kind=mytype)/real(yt1, kind=mytype),\u0026amp; real(ytt1+ytt, kind=mytype)/real(yt1, kind=mytype), kind=mytype)!(ytt+ytt)/yt1 enddo if (nclz==0) then do k = sp%yst(3),sp%yen(3) ztt=cmplx((biciz6*2.*cos(real(ezs(k), kind=mytype)*3.*dz/2.)+\u0026amp; ciciz6*2.*cos(real(ezs(k), kind=mytype)*5.*dz/2.)),\u0026amp; (biciz6*2.*cos(real(ezs(k), kind=mytype)*3.*dz/2.)+\u0026amp; ciciz6*2.*cos(real(ezs(k), kind=mytype)*5.*dz/2.)), kind=mytype) ztt1=cmplx((aiciz6*2.*cos(real(ezs(k), kind=mytype)*dz/2.)),\u0026amp; (aiciz6*2.*cos(real(ezs(k), kind=mytype)*dz/2.)), kind=mytype) zt1=cmplx((1.+2.*ailcaiz6*cos(real(ezs(k), kind=mytype)*dz)),\u0026amp; (1.+2.*ailcaiz6*cos(real(ezs(k), kind=mytype)*dz)), kind=mytype) transz(k)=cmplx(real(ztt1+ztt, kind=mytype)/real(zt1, kind=mytype),\u0026amp; aimag(ztt1+ztt)/aimag(zt1), kind=mytype)!(ztt+ztt)/zt1 enddo else do k = sp%yst(3),sp%yen(3) ztt=cmplx((biciz6*2.*cos(real(ezs(k), kind=mytype)*3.*dz/2.)+\u0026amp; ciciz6*2.*cos(real(ezs(k), kind=mytype)*5.*dz/2.)),\u0026amp; (biciz6*2.*cos(aimag(ezs(k))*3.*dz/2.)+\u0026amp; ciciz6*2.*cos(aimag(ezs(k))*5.*dz/2.)), kind=mytype) ztt1=cmplx((aiciz6*2.*cos(real(ezs(k), kind=mytype)*dz/2.)),\u0026amp; (aiciz6*2.*cos(aimag(ezs(k))*dz/2.)), kind=mytype) zt1=cmplx((1.+2.*ailcaiz6*cos(real(ezs(k), kind=mytype)*dz)),\u0026amp; (1.+2.*ailcaiz6*cos(aimag(ezs(k))*dz)), kind=mytype) transz(k)=cmplx(real(ztt1+ztt, kind=mytype)/real(zt1, kind=mytype),\u0026amp; aimag(ztt1+ztt)/aimag(zt1), kind=mytype)!(ztt+ztt)/zt1 enddo endif if ((istret==1).or.(istret==2)) then xa0=alpha/pi+1./2./beta/pi if (istret==1) xa1=1./4./beta/pi if (istret==2) xa1=-1./4./beta/pi ! !construction of the pentadiagonal matrice ! do k=sp%yst(3),sp%yen(3) do j=1,ny/2 do i=sp%yst(1),sp%yen(1) cw22(i,j,k)=cmplx(real(yky(2*j-1), kind=mytype)*real(transx(i), kind=mytype)*real(transz(k), kind=mytype),\u0026amp; aimag(yky(2*j-1))*aimag(transx(i))*aimag(transz(k)), kind=mytype) cw2(i,j,k)=cmplx(real(yky(2*j), kind=mytype)*real(transx(i), kind=mytype)*real(transz(k), kind=mytype),\u0026amp; aimag(yky(2*j))*aimag(transx(i))*aimag(transz(k)), kind=mytype) enddo enddo enddo !main diagonal do k=sp%yst(3),sp%yen(3) do j=2,ny/2-1 do i=sp%yst(1),sp%yen(1) a(i,j,k,3)=cmplx(-(real(xk2(i), kind=mytype)*real(transy(2*j-1), kind=mytype)*real(transy(2*j-1), kind=mytype)\u0026amp; *real(transz(k), kind=mytype)*real(transz(k), kind=mytype))\u0026amp; -(real(zk2(k), kind=mytype)*real(transy(2*j-1), kind=mytype)*real(transy(2*j-1), kind=mytype)*\u0026amp; real(transx(i), kind=mytype)*real(transx(i), kind=mytype))\u0026amp; -real(cw22(i,j,k), kind=mytype)*real(cw22(i,j,k), kind=mytype)*xa0*xa0-\u0026amp; xa1*xa1*(real(cw22(i,j,k), kind=mytype)*real(cw22(i,j-1,k), kind=mytype)+real(cw22(i,j,k), kind=mytype)*\u0026amp; real(cw22(i,j+1,k), kind=mytype)),\u0026amp; -(aimag(xk2(i))*aimag(transy(2*j-1))*aimag(transy(2*j-1))*aimag(transz(k))*aimag(transz(k)))\u0026amp; -(aimag(zk2(k))*aimag(transy(2*j-1))*aimag(transy(2*j-1))*aimag(transx(i))*aimag(transx(i)))\u0026amp; -aimag(cw22(i,j,k))*aimag(cw22(i,j,k))*xa0*xa0-\u0026amp; xa1*xa1*(aimag(cw22(i,j,k))*aimag(cw22(i,j-1,k))+aimag(cw22(i,j,k))*aimag(cw22(i,j+1,k))), kind=mytype) a2(i,j,k,3)=cmplx(-(real(xk2(i), kind=mytype)*real(transy(2*j), kind=mytype)*real(transy(2*j), kind=mytype)*\u0026amp; real(transz(k), kind=mytype)*real(transz(k), kind=mytype))\u0026amp; -(real(zk2(k), kind=mytype)*real(transy(2*j), kind=mytype)*real(transy(2*j), kind=mytype)*\u0026amp; real(transx(i), kind=mytype)*real(transx(i), kind=mytype))\u0026amp; -real(cw2(i,j,k), kind=mytype)*real(cw2(i,j,k), kind=mytype)*xa0*xa0-\u0026amp; xa1*xa1*(real(cw2(i,j,k), kind=mytype)*real(cw2(i,j-1,k), kind=mytype)+real(cw2(i,j,k), kind=mytype)*\u0026amp; real(cw2(i,j+1,k), kind=mytype)),\u0026amp; -(aimag(xk2(i))*aimag(transy(2*j))*aimag(transy(2*j))*aimag(transz(k))*aimag(transz(k)))\u0026amp; -(aimag(zk2(k))*aimag(transy(2*j))*aimag(transy(2*j))*aimag(transx(i))*aimag(transx(i)))\u0026amp; -aimag(cw2(i,j,k))*aimag(cw2(i,j,k))*xa0*xa0-\u0026amp; xa1*xa1*(aimag(cw2(i,j,k))*aimag(cw2(i,j-1,k))+aimag(cw2(i,j,k))*aimag(cw2(i,j+1,k))), kind=mytype) enddo enddo do i=sp%yst(1),sp%yen(1) a(i,1,k,3)=cmplx(-(real(xk2(i), kind=mytype)*real(transy(1), kind=mytype)*real(transy(1), kind=mytype)*\u0026amp; real(transz(k), kind=mytype)*real(transz(k), kind=mytype))\u0026amp; -(real(zk2(k), kind=mytype)*real(transy(1), kind=mytype)*real(transy(1), kind=mytype)*\u0026amp; real(transx(i), kind=mytype)*real(transx(i), kind=mytype))\u0026amp; -real(cw22(i,1,k), kind=mytype)*real(cw22(i,1,k), kind=mytype)*xa0*xa0-xa1*xa1*(real(cw22(i,1,k), kind=mytype)*\u0026amp; real(cw22(i,2,k), kind=mytype)),\u0026amp; -(aimag(xk2(i))*aimag(transy(1))*aimag(transy(1))*aimag(transz(k))*aimag(transz(k)))\u0026amp; -(aimag(zk2(k))*aimag(transy(1))*aimag(transy(1))*aimag(transx(i))*aimag(transx(i)))\u0026amp; -aimag(cw22(i,1,k))*aimag(cw22(i,1,k))*xa0*xa0-xa1*xa1*(aimag(cw22(i,1,k))*aimag(cw22(i,2,k))), kind=mytype) a(i,ny/2,k,3)=cmplx(-(real(xk2(i), kind=mytype)*real(transy(ny-2), kind=mytype)*real(transy(ny-2), kind=mytype)\u0026amp; *real(transz(k), kind=mytype)*real(transz(k), kind=mytype))\u0026amp; -(real(zk2(k), kind=mytype)*real(transy(ny-2), kind=mytype)*real(transy(ny-2), kind=mytype)*\u0026amp; real(transx(i), kind=mytype)*real(transx(i), kind=mytype))\u0026amp; -real(cw22(i,ny/2,k), kind=mytype)*real(cw22(i,ny/2,k), kind=mytype)*xa0*xa0-\u0026amp; xa1*xa1*(real(cw22(i,ny/2,k), kind=mytype)*real(cw22(i,ny/2-1,k), kind=mytype)),\u0026amp; -(aimag(xk2(i))*aimag(transy(ny-2))*aimag(transy(ny-2))*aimag(transz(k))*aimag(transz(k)))\u0026amp; -(aimag(zk2(k))*aimag(transy(ny-2))*aimag(transy(ny-2))*aimag(transx(i))*aimag(transx(i)))\u0026amp; -aimag(cw22(i,ny/2,k))*aimag(cw22(i,ny/2,k))*xa0*xa0-\u0026amp; xa1*xa1*(aimag(cw22(i,ny/2,k))*aimag(cw22(i,ny/2-1,k))), kind=mytype) a2(i,1,k,3)=cmplx(-(real(xk2(i), kind=mytype)*real(transy(2), kind=mytype)*real(transy(2), kind=mytype)*\u0026amp; real(transz(k), kind=mytype)*real(transz(k), kind=mytype))\u0026amp; -(real(zk2(k), kind=mytype)*real(transy(2), kind=mytype)*real(transy(2), kind=mytype)*\u0026amp; real(transx(i), kind=mytype)*real(transx(i), kind=mytype))\u0026amp; -real(cw2(i,1,k), kind=mytype)*real(cw2(i,1,k), kind=mytype)*(xa0-xa1)*(xa0+xa1)-xa1*xa1*(real(cw2(i,1,k), kind=mytype)*\u0026amp; real(cw2(i,2,k), kind=mytype)),\u0026amp; -(aimag(xk2(i))*aimag(transy(2))*aimag(transy(2))*aimag(transz(k))*aimag(transz(k)))\u0026amp; -(aimag(zk2(k))*aimag(transy(2))*aimag(transy(2))*aimag(transx(i))*aimag(transx(i)))\u0026amp; -aimag(cw2(i,1,k))*aimag(cw2(i,1,k))*(xa0-xa1)*(xa0+xa1)-xa1*xa1*(aimag(cw2(i,1,k))*aimag(cw2(i,2,k))), kind=mytype) a2(i,ny/2,k,3)=cmplx(-(real(xk2(i), kind=mytype)*real(transy(ny-1), kind=mytype)*real(transy(ny-1), kind=mytype)*\u0026amp; real(transz(k), kind=mytype)*real(transz(k), kind=mytype))\u0026amp; -(real(zk2(k), kind=mytype)*real(transy(ny-1), kind=mytype)*real(transy(ny-1), kind=mytype)*\u0026amp; real(transx(i), kind=mytype)*real(transx(i), kind=mytype))\u0026amp; -real(cw2(i,ny/2,k), kind=mytype)*real(cw2(i,ny/2,k), kind=mytype)*(xa0+xa1)*(xa0+xa1)-\u0026amp; xa1*xa1*(real(cw2(i,ny/2,k), kind=mytype)*real(cw2(i,ny/2-1,k), kind=mytype)),\u0026amp; -(aimag(xk2(i))*aimag(transy(ny-1))*aimag(transy(ny-1))*aimag(transz(k))*aimag(transz(k)))\u0026amp; -(aimag(zk2(k))*aimag(transy(ny-1))*aimag(transy(ny-1))*aimag(transx(i))*aimag(transx(i)))\u0026amp; -aimag(cw2(i,ny/2,k))*aimag(cw2(i,ny/2,k))*(xa0+xa1)*(xa0+xa1)-\u0026amp; xa1*xa1*(aimag(cw2(i,ny/2,k))*aimag(cw2(i,ny/2-1,k))), kind=mytype) enddo enddo !sup diag +1 do k=sp%yst(3),sp%yen(3) do j=2,ny/2-1 do i=sp%yst(1),sp%yen(1) a(i,j,k,4)=cmplx(xa0*xa1*(real(cw22(i,j,k), kind=mytype)*real(cw22(i,j+1,k), kind=mytype)+real(cw22(i,j+1,k), kind=mytype)*\u0026amp; real(cw22(i,j+1,k), kind=mytype)),\u0026amp; xa0*xa1*(aimag(cw22(i,j,k))*aimag(cw22(i,j+1,k))+aimag(cw22(i,j+1,k))*aimag(cw22(i,j+1,k))), kind=mytype) a2(i,j,k,4)=cmplx(xa0*xa1*(real(cw2(i,j,k), kind=mytype)*real(cw2(i,j+1,k), kind=mytype)+real(cw2(i,j+1,k), kind=mytype)*\u0026amp; real(cw2(i,j+1,k), kind=mytype)),\u0026amp; xa0*xa1*(aimag(cw2(i,j,k))*aimag(cw2(i,j+1,k))+aimag(cw2(i,j+1,k))*aimag(cw2(i,j+1,k))), kind=mytype) enddo enddo do i=sp%yst(1),sp%yen(1) a(i,1,k,4)=2.*cmplx((xa0*xa1*(real(cw22(i,1,k), kind=mytype)*real(cw22(i,2,k), kind=mytype)+real(cw22(i,2,k), kind=mytype)*\u0026amp; real(cw22(i,2,k), kind=mytype))),\u0026amp; (xa0*xa1*(aimag(cw22(i,1,k))*aimag(cw22(i,2,k))+aimag(cw22(i,2,k))*aimag(cw22(i,2,k)))), kind=mytype) a2(i,1,k,4)=cmplx((xa0-xa1)*xa1*(real(cw2(i,1,k), kind=mytype)*real(cw2(i,2,k), kind=mytype))\u0026amp; +xa0*xa1*(real(cw2(i,2,k), kind=mytype)*real(cw2(i,2,k), kind=mytype)),\u0026amp; (xa0-xa1)*xa1*(aimag(cw2(i,1,k))*aimag(cw2(i,2,k)))\u0026amp; +xa0*xa1*(aimag(cw2(i,2,k))*aimag(cw2(i,2,k))), kind=mytype) a2(i,ny/2-1,k,4)=cmplx(xa0*xa1*(real(cw2(i,ny/2-1,k), kind=mytype)*real(cw2(i,ny/2,k), kind=mytype))\u0026amp; +(xa0+xa1)*xa1*(real(cw2(i,ny/2,k), kind=mytype)*real(cw2(i,ny/2,k), kind=mytype)),\u0026amp; xa0*xa1*(aimag(cw2(i,ny/2-1,k))*aimag(cw2(i,ny/2,k)))\u0026amp; +(xa0+xa1)*xa1*(aimag(cw2(i,ny/2,k))*aimag(cw2(i,ny/2,k))), kind=mytype) a2(i,ny/2,k,4)=0. enddo enddo !sup diag +2 do k=sp%yst(3),sp%yen(3) do i=sp%yst(1),sp%yen(1) do j=1,ny/2-2 a(i,j,k,5)=cmplx(-real(cw22(i,j+1,k), kind=mytype)*real(cw22(i,j+2,k), kind=mytype)*xa1*xa1,\u0026amp; -aimag(cw22(i,j+1,k))*aimag(cw22(i,j+2,k))*xa1*xa1, kind=mytype) a2(i,j,k,5)=cmplx(-real(cw2(i,j+1,k), kind=mytype)*real(cw2(i,j+2,k), kind=mytype)*xa1*xa1,\u0026amp; -aimag(cw2(i,j+1,k))*aimag(cw2(i,j+2,k))*xa1*xa1, kind=mytype) enddo a(i,1,k,5)=cmplx(real(a(i,1,k,5), kind=mytype)*2.,aimag(a(i,1,k,5))*2., kind=mytype) a(i,ny/2-1,k,5)=0. a(i,ny/2,k,5)=0. a2(i,ny/2-1,k,5)=0. a2(i,ny/2,k,5)=0. enddo enddo !inf diag -1 do k=sp%yst(3),sp%yen(3) do i=sp%yst(1),sp%yen(1) do j=2,ny/2 a(i,j,k,2)=cmplx(xa0*xa1*(real(cw22(i,j,k), kind=mytype)*real(cw22(i,j-1,k), kind=mytype)+real(cw22(i,j-1,k), kind=mytype)*\u0026amp; real(cw22(i,j-1,k), kind=mytype)),\u0026amp; xa0*xa1*(aimag(cw22(i,j,k))*aimag(cw22(i,j-1,k))+aimag(cw22(i,j-1,k))*aimag(cw22(i,j-1,k))), kind=mytype) a2(i,j,k,2)=cmplx(xa0*xa1*(real(cw2(i,j,k), kind=mytype)*real(cw2(i,j-1,k), kind=mytype)+real(cw2(i,j-1,k), kind=mytype)*\u0026amp; real(cw2(i,j-1,k), kind=mytype)),\u0026amp; xa0*xa1*(aimag(cw2(i,j,k))*aimag(cw2(i,j-1,k))+aimag(cw2(i,j-1,k))*aimag(cw2(i,j-1,k))), kind=mytype) enddo a(i,1,k,2)=0. a2(i,1,k,2)=0. a2(i,2,k,2)=cmplx(xa0*xa1*(real(cw2(i,2,k), kind=mytype)*real(cw2(i,1,k), kind=mytype))\u0026amp; +(xa0+xa1)*xa1*(real(cw2(i,1,k), kind=mytype)*real(cw2(i,1,k), kind=mytype)),\u0026amp; xa0*xa1*(aimag(cw2(i,2,k))*aimag(cw2(i,1,k)))\u0026amp; +(xa0+xa1)*xa1*(aimag(cw2(i,1,k))*aimag(cw2(i,1,k))), kind=mytype) a2(i,ny/2,k,2)=cmplx((xa0+xa1)*xa1*(real(cw2(i,ny/2,k), kind=mytype)*real(cw2(i,ny/2-1,k), kind=mytype))\u0026amp; +xa0*xa1*(real(cw2(i,ny/2-1,k), kind=mytype)*real(cw2(i,ny/2-1,k), kind=mytype)),\u0026amp; (xa0+xa1)*xa1*(aimag(cw2(i,ny/2,k))*aimag(cw2(i,ny/2-1,k)))\u0026amp; +xa0*xa1*(aimag(cw2(i,ny/2-1,k))*aimag(cw2(i,ny/2-1,k))), kind=mytype) enddo enddo !inf diag -2 do k=sp%yst(3),sp%yen(3) do i=sp%yst(1),sp%yen(1) do j=3,ny/2 a(i,j,k,1)=cmplx(-real(cw22(i,j-1,k), kind=mytype)*real(cw22(i,j-2,k), kind=mytype)*xa1*xa1,\u0026amp; -aimag(cw22(i,j-1,k))*aimag(cw22(i,j-2,k))*xa1*xa1, kind=mytype) a2(i,j,k,1)=cmplx(-real(cw2(i,j-1,k), kind=mytype)*real(cw2(i,j-2,k), kind=mytype)*xa1*xa1,\u0026amp; -aimag(cw2(i,j-1,k))*aimag(cw2(i,j-2,k))*xa1*xa1, kind=mytype) enddo a(i,1,k,1)=0. a(i,2,k,1)=0. a2(i,1,k,1)=0. a2(i,2,k,1)=0. enddo enddo !not to have a singular matrice do k=sp%yst(3),sp%yen(3) do i=sp%yst(1),sp%yen(1) if ((real(xk2(i), kind=mytype)==0.).and.(real(zk2(k), kind=mytype)==0)) then a(i,1,k,3)=cmplx(1.,1., kind=mytype) a(i,1,k,4)=0. a(i,1,k,5)=0. endif enddo enddo else xa0=alpha/pi+1./2./beta/pi xa1=-1./4./beta/pi ! !construction of the pentadiagonal matrice ! do k=sp%yst(3),sp%yen(3) do j=1,nym do i=sp%yst(1),sp%yen(1) cw22(i,j,k)=cmplx(real(yky(j), kind=mytype)*real(transx(i), kind=mytype)*real(transz(k), kind=mytype),\u0026amp; aimag(yky(j))*aimag(transx(i))*aimag(transz(k)), kind=mytype) enddo enddo enddo !main diagonal do k=sp%yst(3),sp%yen(3) do j=2,nym-1 do i=sp%yst(1),sp%yen(1) a3(i,j,k,3)=cmplx(-(real(xk2(i), kind=mytype)*real(transy(j), kind=mytype)*real(transy(j), kind=mytype)*\u0026amp; real(transz(k), kind=mytype)*real(transz(k), kind=mytype))\u0026amp; -(real(zk2(k), kind=mytype)*real(transy(j), kind=mytype)*real(transy(j), kind=mytype)*\u0026amp; real(transx(i), kind=mytype)*real(transx(i), kind=mytype))\u0026amp; -real(cw22(i,j,k), kind=mytype)*real(cw22(i,j,k), kind=mytype)*xa0*xa0-\u0026amp; xa1*xa1*(real(cw22(i,j,k), kind=mytype)*real(cw22(i,j-1,k), kind=mytype)+real(cw22(i,j,k), kind=mytype)*\u0026amp; real(cw22(i,j+1,k), kind=mytype)),\u0026amp; -(aimag(xk2(i))*aimag(transy(j))*aimag(transy(j))*aimag(transz(k))*aimag(transz(k)))\u0026amp; -(aimag(zk2(k))*aimag(transy(j))*aimag(transy(j))*aimag(transx(i))*aimag(transx(i)))\u0026amp; -aimag(cw22(i,j,k))*aimag(cw22(i,j,k))*xa0*xa0-\u0026amp; xa1*xa1*(aimag(cw22(i,j,k))*aimag(cw22(i,j-1,k))+aimag(cw22(i,j,k))*aimag(cw22(i,j+1,k))), kind=mytype) enddo enddo enddo do k=sp%yst(3),sp%yen(3) do i=sp%yst(1),sp%yen(1) a3(i,1,k,3)=cmplx(-(real(xk2(i), kind=mytype)*real(transy(1), kind=mytype)*real(transy(1), kind=mytype)*\u0026amp; real(transz(k), kind=mytype)*real(transz(k), kind=mytype))\u0026amp; -(real(zk2(k), kind=mytype)*real(transy(1), kind=mytype)*real(transy(1), kind=mytype)*real(transx(i), kind=mytype)*\u0026amp; real(transx(i), kind=mytype))\u0026amp; -real(cw22(i,1,k), kind=mytype)*real(cw22(i,1,k), kind=mytype)*xa0*xa0-xa1*xa1*(real(cw22(i,1,k), kind=mytype)*\u0026amp; real(cw22(i,2,k), kind=mytype)),\u0026amp; -(aimag(xk2(i))*aimag(transy(1))*aimag(transy(1))*aimag(transz(k))*aimag(transz(k)))\u0026amp; -(aimag(zk2(k))*aimag(transy(1))*aimag(transy(1))*aimag(transx(i))*aimag(transx(i)))\u0026amp; -aimag(cw22(i,1,k))*aimag(cw22(i,1,k))*xa0*xa0-xa1*xa1*(aimag(cw22(i,1,k))*aimag(cw22(i,2,k))), kind=mytype) a3(i,nym,k,3)=cmplx(-(real(xk2(i), kind=mytype)*real(transy(nym), kind=mytype)*real(transy(nym), kind=mytype)*\u0026amp; real(transz(k), kind=mytype)*real(transz(k), kind=mytype))\u0026amp; -(real(zk2(k), kind=mytype)*real(transy(nym), kind=mytype)*real(transy(nym), kind=mytype)*real(transx(i), kind=mytype)*\u0026amp; real(transx(i), kind=mytype))\u0026amp; -real(cw22(i,nym,k), kind=mytype)*real(cw22(i,nym,k), kind=mytype)*xa0*xa0-\u0026amp; xa1*xa1*(real(cw22(i,nym,k), kind=mytype)*real(cw22(i,nym-1,k), kind=mytype)),\u0026amp; -(aimag(xk2(i))*aimag(transy(nym))*aimag(transy(nym))*aimag(transz(k))*aimag(transz(k)))\u0026amp; -(aimag(zk2(k))*aimag(transy(nym))*aimag(transy(nym))*aimag(transx(i))*aimag(transx(i)))\u0026amp; -aimag(cw22(i,nym,k))*aimag(cw22(i,nym,k))*xa0*xa0-\u0026amp; xa1*xa1*(aimag(cw22(i,nym,k))*aimag(cw22(i,nym-1,k))), kind=mytype) enddo enddo !sup diag +1 do k=sp%yst(3),sp%yen(3) do i=sp%yst(1),sp%yen(1) do j=2,nym-1 a3(i,j,k,4)=cmplx(xa0*xa1*(real(cw22(i,j,k), kind=mytype)*real(cw22(i,j+1,k), kind=mytype)+real(cw22(i,j+1,k), kind=mytype)*\u0026amp; real(cw22(i,j+1,k), kind=mytype)),\u0026amp; xa0*xa1*(aimag(cw22(i,j,k))*aimag(cw22(i,j+1,k))+aimag(cw22(i,j+1,k))*aimag(cw22(i,j+1,k))), kind=mytype) enddo a3(i,1,k,4)=cmplx((xa0*xa1*(real(cw22(i,1,k), kind=mytype)*real(cw22(i,2,k), kind=mytype)+real(cw22(i,2,k), kind=mytype)*\u0026amp; real(cw22(i,2,k), kind=mytype))),\u0026amp; (xa0*xa1*(aimag(cw22(i,1,k))*aimag(cw22(i,2,k))+aimag(cw22(i,2,k))*aimag(cw22(i,2,k)))), kind=mytype) enddo enddo !sup diag +2 do k=sp%yst(3),sp%yen(3) do i=sp%yst(1),sp%yen(1) do j=1,nym-2 a3(i,j,k,5)=cmplx(-real(cw22(i,j+1,k), kind=mytype)*real(cw22(i,j+2,k), kind=mytype)*xa1*xa1,\u0026amp; -aimag(cw22(i,j+1,k))*aimag(cw22(i,j+2,k))*xa1*xa1, kind=mytype) enddo !a3(i,1,k,5)=a3(i,1,k,5)*2. !a3(i,1,k,5)=0. a3(i,nym-1,k,5)=0. a3(i,nym,k,5)=0. enddo enddo !inf diag -1 do k=sp%yst(3),sp%yen(3) do i=sp%yst(1),sp%yen(1) do j=2,nym a3(i,j,k,2)=cmplx(xa0*xa1*(real(cw22(i,j,k), kind=mytype)*real(cw22(i,j-1,k), kind=mytype)+real(cw22(i,j-1,k), kind=mytype)*\u0026amp; real(cw22(i,j-1,k), kind=mytype)),\u0026amp; xa0*xa1*(aimag(cw22(i,j,k))*aimag(cw22(i,j-1,k))+aimag(cw22(i,j-1,k))*aimag(cw22(i,j-1,k))), kind=mytype) enddo a3(i,1,k,2)=0. enddo enddo !inf diag -2 do k=sp%yst(3),sp%yen(3) do i=sp%yst(1),sp%yen(1) do j=3,nym a3(i,j,k,1)=cmplx(-real(cw22(i,j-1,k), kind=mytype)*real(cw22(i,j-2,k), kind=mytype)*xa1*xa1,\u0026amp; -aimag(cw22(i,j-1,k))*aimag(cw22(i,j-2,k))*xa1*xa1, kind=mytype) enddo a3(i,1,k,1)=0. a3(i,2,k,1)=0. enddo enddo !not to have a singular matrice ! do k=sp%yst(3),sp%yen(3) ! do i=sp%yst(1),sp%yen(1) ! if ((xkx(i)==0.).and.(zkz(k)==0)) then if (nrank==0) then a3(1,1,1,3)=cmplx(1.,1., kind=mytype) a3(1,1,1,4)=0. a3(1,1,1,5)=0. endif ! endif ! enddo ! enddo endif return end subroutine matrice_refinement end module decomp_2d_poisson ","date":1400004540,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1400004540,"objectID":"ffe07cfce435ae3b1d59f9078fcf88da","permalink":"/blog/2014/05/14/poisson/","publishdate":"2014-05-14T02:09:00+08:00","relpermalink":"/blog/2014/05/14/poisson/","section":"archives","summary":"","tags":["incompact3d","DNS"],"title":"poisson","type":"archives"},{"authors":null,"categories":["markdown"],"content":"#markdown code part start\n* emphasize * seperate line * auto link * picture ************* + emphaize \u0026gt; __You__ are strong + **he** is strong + *she* is em + _it_ is em ********** use the `printf()` function è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ®µè½ã€‚ \u0026lt;table\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;Foo\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/table\u0026gt; è¿™æ˜¯å¦ä¸€ä¸ªæ™®é€šæ®µè½ã€‚ \u0026gt; This is the first level of quoting. \u0026gt; \u0026gt; \u0026gt; This is nested blockquote. \u0026gt; \u0026gt; Back to the first level. I get 10 times more traffic from [Google] [1] than from [Yahoo] [2] or [MSN] [3]. [1]: http://google.com/ \u0026quot;Google\u0026quot; [2]: http://search.yahoo.com/ \u0026quot;Yahoo Search\u0026quot; [3]: http://search.msn.com/ \u0026quot;MSN Search\u0026quot; ![Alt text][4] [4]: http://image.baidu.com/detail/newindex?col=%E5%A3%81%E7%BA%B8\u0026amp;tag=%E5%88%9B%E6%84%8F\u0026amp;pn=1\u0026amp;pid=9433162230\u0026amp;aid=329840961\u0026amp;from=1\u0026amp;tag3=%E6%8A%A4%E7%9C%BC\u0026amp;app_id=578130\u0026amp;user_id=851997103\u0026amp;is_album=0\u0026amp;sortlog=0\u0026amp;width=1280\u0026amp;height=800\u0026amp;ic=0 ___________________  #code part end#\n emphasize seperate line auto link picture\n emphaize \u0026gt; + You are strong \u0026gt; + he is strong \u0026gt; + she is em \u0026gt; + it is em \u0026gt; \u0026gt; - xinran comes from hebei \u0026gt; \u0026gt; - xinran is a beautiful and smart girl\n  use the printf() function\nè¿™æ˜¯ä¸€ä¸ªæ™®é€šæ®µè½ã€‚\n youxu lie biao    Foo   è¿™æ˜¯å¦ä¸€ä¸ªæ™®é€šæ®µè½ã€‚\n This is the first level of quoting.\n This is nested blockquote.\n Back to the first level.\n I get 10 times more traffic from Google than from Yahoo or MSN.\n","date":1399970617,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1399970617,"objectID":"590a5f225121cfced12dfe6f06d2c1a2","permalink":"/blog/2014/05/13/md-learning/","publishdate":"2014-05-13T16:43:37+08:00","relpermalink":"/blog/2014/05/13/md-learning/","section":"archives","summary":"","tags":["markdown"],"title":"markdown_learning","type":"archives"},{"authors":null,"categories":["Linux"],"content":"###awkå¯¹äºè´¢åŠ¡åˆ—è¡¨çš„å®é™…ä½¿ç”¨### * æ‰¹é‡å¤„ç†æ–‡ä»¶å\nls|grep ux |awk '{print NR,$1}'|xargs -n2 mv   2 3 undone  ","date":1399911069,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1399911069,"objectID":"f1ea332f7c2d63767278c4886e9e2c76","permalink":"/blog/2014/05/13/awk/","publishdate":"2014-05-13T00:11:09+08:00","relpermalink":"/blog/2014/05/13/awk/","section":"archives","summary":"###awkå¯¹äºè´¢åŠ¡åˆ—è¡¨çš„å®é™…ä½¿ç”¨### * æ‰¹é‡å¤„ç†æ–‡ä»¶å ls|grep ux |awk '{print NR,$1}'|xargs -n2 mv 2 3 undone","tags":["awk"],"title":"awk","type":"archives"},{"authors":null,"categories":["life"],"content":"###my hope * æˆ‘å¸Œæœ›æˆ‘èƒ½å¤Ÿæˆä¸ºä¸€ç›ç¯ï¼Œç‚¹äº®æ¬£ç„¶çš„ç”Ÿæ´»ï¼Œè€Œæˆ‘å¸Œæœ›å¥¹æˆä¸ºæˆ‘ç”Ÿæ´»ä¸­çš„ä¸€ç›ç¯\n Come on,baby! You canâ€¦â€¦\n æ¬£ç„¶ï¼Œä½ è¦çœ‹åˆ°æˆ‘ï¼Œæˆ‘è¦è®©è‡ªå·±å˜å¾—é—ªäº® \u0026gt; ä½ æœ€å®³æ€•çš„æ˜¯ä»€ä¹ˆï¼Ÿ \u0026gt; ä½ å¹¶ä¸å®³æ€•åˆ«äººç§ä¸èµ·ä½ ï¼Œä½†æ˜¯ä½ å´æ˜¯æ‹…å¿ƒè‡ªå·±å˜å¾—é—ªäº®ã€‚ \u0026gt;\n ","date":1399908782,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1399908782,"objectID":"aba2213c3662dde85ee4f948bd350a85","permalink":"/blog/2014/05/12/my-hope/","publishdate":"2014-05-12T23:33:02+08:00","relpermalink":"/blog/2014/05/12/my-hope/","section":"archives","summary":"","tags":["hope"],"title":"my_hope","type":"archives"},{"authors":null,"categories":["error"],"content":"Never give up  Still there are some people doing much better and longer than you So go on.\n","date":1399790439,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1399790439,"objectID":"f8cfff31c5dd5c35a8fb52ee2c0d4de7","permalink":"/blog/2014/05/11/try-again/","publishdate":"2014-05-11T14:40:39+08:00","relpermalink":"/blog/2014/05/11/try-again/","section":"archives","summary":"","tags":null,"title":"try again","type":"archives"},{"authors":null,"categories":["git"],"content":"###How to utilize the git?\n They say\n #What I say\n","date":1399783172,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1399783172,"objectID":"a6c28628279d7ea029933db634bf4ecc","permalink":"/blog/2014/05/11/git/","publishdate":"2014-05-11T12:39:32+08:00","relpermalink":"/blog/2014/05/11/git/","section":"archives","summary":"","tags":null,"title":"git","type":"archives"},{"authors":null,"categories":["humor"],"content":"","date":1394075343,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1394075343,"objectID":"09afe7a0a51282657b34acd261f13f50","permalink":"/blog/2014/03/06/funny-jokes/","publishdate":"2014-03-06T11:09:03+08:00","relpermalink":"/blog/2014/03/06/funny-jokes/","section":"archives","summary":"","tags":null,"title":"funny jokes","type":"archives"},{"authors":null,"categories":["life"],"content":"stay hungry,stay foolish\nThis is my hibai\n","date":1394039911,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1394039911,"objectID":"9c25e9181d36211375f0d82d882afbe8","permalink":"/blog/2014/03/06/this-must-be-a-success/","publishdate":"2014-03-06T01:18:31+08:00","relpermalink":"/blog/2014/03/06/this-must-be-a-success/","section":"archives","summary":"stay hungry,stay foolish\n","tags":null,"title":"this must be a success","type":"archives"},{"authors":["Ye Zhaoliang","Robert Ford"],"categories":null,"content":" Click the Cite button above to demo the feature to enable visitors to import publication metadata into their reference management software.    Click the Slides button above to demo Academic\u0026rsquo;s Markdown slides feature.   Supplementary notes can be added here, including code and math.\n","date":1372636800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1372636800,"objectID":"69425fb10d4db090cfbd46854715582c","permalink":"/publication/conference-paper/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/publication/conference-paper/","section":"publication","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":["Source Themes"],"title":"An example conference paper","type":"publication"},{"authors":null,"categories":["Syntax Highlighting"],"content":"function helloWorld () { alert(\u0026quot;Hello, World!\u0026quot;) }  public class HelloWorld { public static void main(String[] args) { System.out.println(\u0026quot;Hello, World!\u0026quot;); } }  package hello fun main(args: Array\u0026lt;String\u0026gt;) { println(\u0026quot;Hello World!\u0026quot;) }  #include \u0026lt;stdio.h\u0026gt; /* Hello */ int main(void){ printf(\u0026quot;Hello, World!\u0026quot;); return 0; }  // 'Hello World!' program #include \u0026lt;iostream\u0026gt; int main(){ std::cout \u0026lt;\u0026lt; \u0026quot;Hello World!\u0026quot; \u0026lt;\u0026lt; std::endl; return 0; }  using System; class HelloWorld{ public static void Main(){ System.Console.WriteLine(\u0026quot;Hello, World!\u0026quot;); } }  \u0026lt;html\u0026gt; \u0026lt;body\u0026gt; Hello, World! \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  package main import fmt \u0026quot;fmt\u0026quot; func main() { fmt.Printf(\u0026quot;Hello, World!\\n\u0026quot;); }  object HelloWorld with Application { Console.println(\u0026quot;Hello, World!\u0026quot;); }  \u0026lt;?php echo 'Hello, World!'; ?\u0026gt;  print(\u0026quot;Hello, World!\u0026quot;)  (defn hello-world \u0026quot;A function print 'Hello world'.\u0026quot; [] (prn \u0026quot;Hello world\u0026quot;))  \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;{{ .Title }}\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;{{ .Title }}\u0026lt;/h1\u0026gt; {{ .Content }} \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  {{ partial \u0026quot;header.html\u0026quot; . }} \u0026lt;h1\u0026gt;posts\u0026lt;/h1\u0026gt; {{ range first 10 .Data.Pages }} {{ if eq .Type \u0026quot;post\u0026quot;}} \u0026lt;h2\u0026gt;\u0026lt;a href=\u0026quot;{{ .Permalink }}\u0026quot;\u0026gt;{{ .Title }}\u0026lt;/a\u0026gt;\u0026lt;/h2\u0026gt; {{ end }} {{ end }} \u0026lt;h1\u0026gt;pages\u0026lt;/h1\u0026gt; {{ range .Data.Pages }} {{ if or (eq .Type \u0026quot;page\u0026quot;) (eq .Type \u0026quot;about\u0026quot;) }} \u0026lt;h2\u0026gt;\u0026lt;a href=\u0026quot;{{ .Permalink }}\u0026quot;\u0026gt;{{ .Type }} - {{ .Title }} - {{ .RelPermalink }}\u0026lt;/a\u0026gt;\u0026lt;/h2\u0026gt; {{ end }} {{ end }} {{ partial \u0026quot;footer.html\u0026quot; . }}  Detect the language\npackage hello fun main(args: Array\u0026lt;String\u0026gt;) { println(\u0026quot;Hello World!\u0026quot;) }  \u0026lt;?php echo 'Hello, World!'; ?\u0026gt;  By {{\u0026lt; highlight go-html-template \u0026quot;linenos=table,hl_lines=1 3-7,linenostart=199\u0026quot; \u0026gt;}}..{{\u0026lt; / highlight \u0026gt;}}\n199 200 201 202 203 204 205 206  \u0026lt;section id=\u0026#34;main\u0026#34;\u0026gt;\r \u0026lt;div\u0026gt;\r\u0026lt;h1 id=\u0026#34;title\u0026#34;\u0026gt;{{ .Title }}\u0026lt;/h1\u0026gt;\r{{ range .Data.Pages }}\r{{ .Render \u0026#34;summary\u0026#34;}}\r{{ end }}\r\u0026lt;/div\u0026gt;\r\u0026lt;/section\u0026gt;  ","date":1314691283,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1541404883,"objectID":"17187b330bf854fb5809dd2f3557d838","permalink":"/post/syntax-highlighting/","publishdate":"2011-08-30T16:01:23+08:00","relpermalink":"/post/syntax-highlighting/","section":"post","summary":"function helloWorld () { alert(\u0026quot;Hello, World!\u0026quot;) } ","tags":["preview","Syntax Highlighting","tag-5"],"title":"Syntax Highlighting","type":"post"}]