<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.5.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Ye Zhaoliang">

  
  
  
    
  
  <meta name="description" content="">

  
  <link rel="alternate" hreflang="en-us" href="https://jueqingsizhe66.github.io/blog/2015/05/11/2yue-14ri-javaban-mysql/">

  


  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/solarized-dark.min.css" crossorigin="anonymous" title="hl-light">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/solarized-dark.min.css" crossorigin="anonymous" title="hl-dark" disabled>
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css" integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ==" crossorigin="anonymous">
    

    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  <link rel="stylesheet" href="/css/academic.min.e8d4d5fd376e67b34452ebe1cae16341.css">

  

  




  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="https://jueqingsizhe66.github.io/blog/2015/05/11/2yue-14ri-javaban-mysql/">

  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="twitter:site" content="@jueqingsizhe66">
  <meta property="twitter:creator" content="@jueqingsizhe66">
  
  <meta property="og:site_name" content="简约派">
  <meta property="og:url" content="https://jueqingsizhe66.github.io/blog/2015/05/11/2yue-14ri-javaban-mysql/">
  <meta property="og:title" content="2月14日Java班mysql | 简约派">
  <meta property="og:description" content=""><meta property="og:image" content="https://jueqingsizhe66.github.io/img/icon-192.png">
  <meta property="twitter:image" content="https://jueqingsizhe66.github.io/img/icon-192.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2015-05-11T14:58:41&#43;08:00">
    
    <meta property="article:modified_time" content="2015-05-11T14:58:41&#43;08:00">
  

  



  


  


  





  <title>2月14日Java班mysql | 简约派</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0 compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">简约派</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#hero"><span>概要</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>博文</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#projects"><span>项目</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#featured"><span>Publications</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/about/"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/courses/"><span>课程</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/categories/"><span>分类</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/archives"><span>归档</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#tags"><span>标签</span></a>
        </li>

        
        

      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


  <article class="article">

  








  
 <script async src="//cdn.busuanzi.ibruce.info/cdn/busuanzi/2.3/busuanzi.pure.mini.js"></script> 
 <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script> 
 <script> 
     $(document).ready(function() { 
         var int = setInterval(fixCount, 100); 
         var busuanziSiteOffset =  100000  
         function fixCount() { 
             if ($("#busuanzi_container_site_pv").css("display") != "none") { 
                 clearInterval(int); 
                 $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + busuanziSiteOffset); 
             } 
         } 
     }); 
 </script> 
  






  

  
  
  
<div class="article-container pt-3">
  <h1>2月14日Java班mysql</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    May 11, 2015
  </span>

  

  

  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/categories/programme/">programme</a></span>

  
</div>

    














  
</div>





<span class="article-metadata" >Reading time: 48 minutes and    29 seconds with 10669 words. 本文总阅读量<span id="busuanzi_value_page_pv"></span>次 </span>
    <aside>
        <nav id="TableOfContents"></nav>
    </aside>
  <div class="article-container">


    <div class="article-style">
      <p>第一部分 笔记</p>
<p>1：关于事务在命令窗口的练习：
事务  就是一连串命令的集合，只要这部命令都执行完毕，才能更新到数据库中，否则退出！！即使有一行比如 null.length()的存在空指针，则不成功。
一旦执行失败则回滚。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> begin;
Query OK, <span style="color:#ae81ff">0</span> rows <span style="color:#a6e22e">affected</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">update</span> t_person <span style="color:#66d9ef">set</span> age<span style="color:#f92672">=</span>age<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">where</span> Name<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">yezhao</span><span style="color:#e6db74">&#39;</span>;
Query OK, <span style="color:#ae81ff">2</span> rows <span style="color:#a6e22e">affected</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">35</span> sec)
Rows matched: <span style="color:#ae81ff">2</span>  Changed: <span style="color:#ae81ff">2</span>  Warnings: <span style="color:#ae81ff">0</span>

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> t_person <span style="color:#66d9ef">where</span> Name<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">yezhao</span><span style="color:#e6db74">&#39;</span>;
<span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span>
<span style="color:#f92672">|</span> Id <span style="color:#f92672">|</span> Name   <span style="color:#f92672">|</span> Age <span style="color:#f92672">|</span> Gender <span style="color:#f92672">|</span>
<span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span>
<span style="color:#f92672">|</span>  <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> yezhao <span style="color:#f92672">|</span>  <span style="color:#ae81ff">25</span> <span style="color:#f92672">|</span>      <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>  <span style="color:#ae81ff">7</span> <span style="color:#f92672">|</span> yezhao <span style="color:#f92672">|</span>  <span style="color:#ae81ff">26</span> <span style="color:#f92672">|</span>      <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span>
<span style="color:#ae81ff">2</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">02</span> sec)
</code></pre></div><p>然而在navicat的显示结果是之前的信息  也就是  24  25，当在cmd窗口执行完commit之后：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> commit;
Query OK, <span style="color:#ae81ff">0</span> rows <span style="color:#a6e22e">affected</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">11</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> t_person <span style="color:#66d9ef">where</span> Name<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">yezhao</span><span style="color:#e6db74">&#39;</span>;
<span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span>
<span style="color:#f92672">|</span> Id <span style="color:#f92672">|</span> Name   <span style="color:#f92672">|</span> Age <span style="color:#f92672">|</span> Gender <span style="color:#f92672">|</span>
<span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span>
<span style="color:#f92672">|</span>  <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> yezhao <span style="color:#f92672">|</span>  <span style="color:#ae81ff">25</span> <span style="color:#f92672">|</span>      <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span>  <span style="color:#ae81ff">7</span> <span style="color:#f92672">|</span> yezhao <span style="color:#f92672">|</span>  <span style="color:#ae81ff">26</span> <span style="color:#f92672">|</span>      <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span>
<span style="color:#ae81ff">2</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
</code></pre></div><p>navicat也会发生相应的变化：
1        yezhao        25        1
7        yezhao        26        1</p>
<p>java的conn.setAutoCommit(false);//相当于begin的作用
所以：只有commit之后mysql信息才会在不同的客户端同步，现在尝试在java中的使用，已在练习部分给出，</p>
<p>2.在没有批量导入数据之前，一般是需要花费很长的时间，现在采用addbatch进行。
ps.clearParameters()的作用是清空上一次数据的值，不影响到下一次</p>
<p>而一般数据量大的情况下，导入可能会出现问题，这样如果批量导入在事务中运行，将会更加保险，已在练习给出。
注意加入事物的时候，抛出异常时候采用conn.rollback();把executeUpdate()改成addBatch()，在最后再ps.executeBatch()</p>
<ol start="3">
<li></li>
</ol>
<p>mysql获取最后一次插入的id号函数，在java中也可以实现。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#a6e22e">last_insert_id</span>();
<span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span>
<span style="color:#f92672">|</span> <span style="color:#a6e22e">last_insert_id</span>() <span style="color:#f92672">|</span>
<span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span>
<span style="color:#f92672">|</span>                <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">17</span> sec)
</code></pre></div><p>有没有发现是0 ，即使是我最新插入也是这样；调查后发现是：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#a6e22e">t_person</span>(Name,Age,Gender) <span style="color:#66d9ef">values</span> (<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">悟空</span><span style="color:#e6db74">&#39;</span>,<span style="color:#ae81ff">30</span>,<span style="color:#ae81ff">1</span>);
Query OK, <span style="color:#ae81ff">1</span> row <span style="color:#a6e22e">affected</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">04</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#a6e22e">last_insert_id</span>();
<span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span>
<span style="color:#f92672">|</span> <span style="color:#a6e22e">last_insert_id</span>() <span style="color:#f92672">|</span>
<span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span>
<span style="color:#f92672">|</span>            <span style="color:#ae81ff">11317</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">-</span><span style="color:#f92672">+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
</code></pre></div><p>如果你添加的时候，不要写上主键的值，则是可以！如果直接加上主键的值，则显示的是0！</p>
<p>第二部分 练习
1.一个比较戳版本的JDBCUtils的版本，虽然没有错误，但是未关闭连接，且整体逻辑性不强，并多次加载驱动</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e">* 
</span><span style="color:#75715e">*/</span>
<span style="color:#f92672">package</span> com.jdbc.test<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> java.util.Properties<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.io.*<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.*<span style="color:#f92672">;</span>
<span style="color:#75715e">/**
</span><span style="color:#75715e">* @author    叶昭良
</span><span style="color:#75715e">* @time      2015年2月17日下午11:31:53
</span><span style="color:#75715e">* @version   com.jdbc.testJDBCUtils V1.0
</span><span style="color:#75715e">*/</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">JDBCUtils</span>
<span style="color:#f92672">{</span>

        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * @param args
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[</span><span style="color:#f92672">]</span> args<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#75715e">// TODO Auto-generated method stub
</span><span style="color:#75715e"></span>                
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        
        <span style="color:#75715e">//查询的测试分为三个阶段    无参 的两个   有参的一个
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">//测试1   success
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">/**
</span><span style="color:#75715e">                         *  mysql&gt; select * from t_person;
</span><span style="color:#75715e">                         *  6 rows in set (0.35 sec)
</span><span style="color:#75715e">                         */</span>
                        <span style="color:#75715e">/*
</span><span style="color:#75715e">                        Connection conn = JDBCUtils.createConnection() ;
</span><span style="color:#75715e">                        ResultSet rs = JDBCUtils.executeQuery(conn, &#34;select * from t_person&#34;, null);
</span><span style="color:#75715e">                        int i = 0;
</span><span style="color:#75715e">                        while(rs.next())
</span><span style="color:#75715e">                        {
</span><span style="color:#75715e">                                i++;
</span><span style="color:#75715e">                        }
</span><span style="color:#75715e">                        System.out.println(&#34;总的返回了&#34;+i+&#34;条记录&#34;);
</span><span style="color:#75715e">                        */</span>
                        <span style="color:#75715e">//测试2   success
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">/**
</span><span style="color:#75715e">                         *  mysql&gt; select * from t_person;
</span><span style="color:#75715e">                         *  6 rows in set (0.35 sec)
</span><span style="color:#75715e">                         */</span>
                        <span style="color:#75715e">/*
</span><span style="color:#75715e">                        ResultSet rs = JDBCUtils.executeQuery( &#34;select * from t_person&#34;, null);
</span><span style="color:#75715e">                        int i = 0;
</span><span style="color:#75715e">                        while(rs.next())
</span><span style="color:#75715e">                        {
</span><span style="color:#75715e">                                i++;
</span><span style="color:#75715e">                        }
</span><span style="color:#75715e">                        System.out.println(&#34;总的返回了&#34;+i+&#34;条记录&#34;);
</span><span style="color:#75715e">                        */</span>
                        
                        <span style="color:#75715e">//测试3    success
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">/* mysql&gt; select * from t_person where name=&#39;xinran&#39;
</span><span style="color:#75715e">                         * 3 rows in set (0.00 sec)
</span><span style="color:#75715e">                         */</span>
<span style="color:#75715e">/*                        ResultSet rs = JDBCUtils.executeQuery(&#34;select * from t_person where name = ?&#34;, &#34;xinran&#34;);
</span><span style="color:#75715e">                        int i = 0;
</span><span style="color:#75715e">                        while(rs.next())
</span><span style="color:#75715e">                        {
</span><span style="color:#75715e">                                i++;
</span><span style="color:#75715e">                        }
</span><span style="color:#75715e">                        System.out.println(&#34;总的返回了&#34;+i+&#34;条记录&#34;);*/</span>
                        
        <span style="color:#75715e">//插入阶段的测试   类似查询分为三个阶段    无参 的两个   有参的一个
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">/**
</span><span style="color:#75715e">                         * 测试成功！ //1
</span><span style="color:#75715e">                         */</span>
                        <span style="color:#75715e">/*Connection conn = JDBCUtils.createConnection() ;
</span><span style="color:#75715e">                        int i = JDBCUtils.executeUpdate(conn, &#34;insert into t_person(Id,Name,Age,Gender) values(8,&#39;lizi&#39;,82,1)&#34;, null);
</span><span style="color:#75715e">
</span><span style="color:#75715e">                        //System.out.println(&#34;总的返回了&#34;+i+&#34;条记录&#34;);
</span><span style="color:#75715e">
</span><span style="color:#75715e">            */</span>        
                        <span style="color:#75715e">/**
</span><span style="color:#75715e">                         * 测试成功！ //2 没想到只要两行语句 则进行了一次插入
</span><span style="color:#75715e">                         */</span>
                        <span style="color:#75715e">/*String sql = &#34;insert into t_person(Id,Name,Age,Gender) values(9,&#39;孙悟空&#39;,12,1)&#34;; //年龄不能过大
</span><span style="color:#75715e">                        JDBCUtils.executeUpdate(sql, null);*/</span>
                        
                        <span style="color:#75715e">/**
</span><span style="color:#75715e">                         *  测试成功！  //3  连有参的形式也是成功了
</span><span style="color:#75715e">                         *  mysql&gt; select * from t_person;
</span><span style="color:#75715e">                        +----+---------+-----+--------+
</span><span style="color:#75715e">                        | Id | Name    | Age | Gender |
</span><span style="color:#75715e">                        +----+---------+-----+--------+
</span><span style="color:#75715e">                        |  1 | yezhao  |  24 |      1 |
</span><span style="color:#75715e">                        |  3 | xinran  |  32 |      0 |
</span><span style="color:#75715e">                        |  4 | xinran  |  32 |      4 |
</span><span style="color:#75715e">                        |  5 | xinran  |  32 |      4 |
</span><span style="color:#75715e">                        |  6 | yezhao1 |  25 |      0 |
</span><span style="color:#75715e">                        |  7 | yezhao  |  25 |      1 |
</span><span style="color:#75715e">                        |  8 | lizi    |  82 |      1 |
</span><span style="color:#75715e">                        |  9 | 孙悟空  |  12 |      1 |
</span><span style="color:#75715e">                        | 10 | 蝴蝶    |   3 |      0 |
</span><span style="color:#75715e">                        +----+---------+-----+--------+
</span><span style="color:#75715e">                        9 rows in set (0.00 sec)
</span><span style="color:#75715e">                         */</span>
                        String sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;insert into t_person(Id,Name,Age,Gender) values(?,?,?,?)&#34;</span><span style="color:#f92672">;</span> <span style="color:#75715e">//年龄不能过大
</span><span style="color:#75715e"></span>                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">,</span> 11<span style="color:#f92672">,</span><span style="color:#e6db74">&#34;孟彩兰&#34;</span><span style="color:#f92672">,</span>13<span style="color:#f92672">,</span>1<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#75715e">// TODO Auto-generated catch block
</span><span style="color:#75715e"></span>                        e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        
        
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span>  Connection <span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                InputStream is <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getClassLoader</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getResourceAsStream</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com/jdbc/test/sql.properties&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                 
                <span style="color:#75715e">//InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream(&#34;sql.properties&#34;);
</span><span style="color:#75715e"></span>                Properties ps  <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Properties<span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                Connection c1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        ps<span style="color:#f92672">.</span><span style="color:#a6e22e">load</span><span style="color:#f92672">(</span>is<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        String mysqlDriver <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;mysqlDriver&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
<span style="color:#75715e">//                        System.out.println(mysqlDriver);
</span><span style="color:#75715e"></span>                        
                        String connectDatabase <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;connectDatabase&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
<span style="color:#75715e">//                        System.out.println(connectDatabase);
</span><span style="color:#75715e"></span>                        
                        String userName <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;userName&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
<span style="color:#75715e">//                        System.out.println(userName);
</span><span style="color:#75715e"></span>                        
                        String Password <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Password&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
<span style="color:#75715e">//                        System.out.println(Password);
</span><span style="color:#75715e"></span>                        
                        Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span>mysqlDriver<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        
                        c1 <span style="color:#f92672">=</span> DriverManager<span style="color:#f92672">.</span><span style="color:#a6e22e">getConnection</span><span style="color:#f92672">(</span>connectDatabase<span style="color:#f92672">,</span>userName<span style="color:#f92672">,</span>Password<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;连接成功&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>IOException <span style="color:#f92672">|</span> ClassNotFoundException <span style="color:#f92672">|</span> SQLException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#75715e">// TODO Auto-generated catch block
</span><span style="color:#75715e"></span>                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;数据库驱动加载失败&#34;</span><span style="color:#f92672">+</span>e<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">return</span> c1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span>String sql<span style="color:#f92672">,</span>Object<span style="color:#f92672">.</span><span style="color:#f92672">.</span><span style="color:#f92672">.</span> parameter<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                Connection conn <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                PreparedStatement ps <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>parameter <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span>Object pa1<span style="color:#f92672">:</span>parameter<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setObject</span><span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> pa1<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                i<span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">int</span> rows <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;有&#34;</span><span style="color:#f92672">+</span>rows<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;条记录被影响&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> rows<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span>Connection conn<span style="color:#f92672">,</span>String sql<span style="color:#f92672">,</span>Object<span style="color:#f92672">.</span><span style="color:#f92672">.</span><span style="color:#f92672">.</span> parameter<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                PreparedStatement ps <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>parameter <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span>Object pa1<span style="color:#f92672">:</span>parameter<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setObject</span><span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> pa1<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                i<span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">int</span> rows <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;有&#34;</span><span style="color:#f92672">+</span>rows<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;条记录被影响&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> rows<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> ResultSet <span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span>String sql<span style="color:#f92672">,</span>Object<span style="color:#f92672">.</span><span style="color:#f92672">.</span><span style="color:#f92672">.</span> parameter<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                Connection conn <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                PreparedStatement ps <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span>1<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>parameter <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span>Object pa1<span style="color:#f92672">:</span>parameter<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setObject</span><span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> pa1<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                i<span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
                ResultSet rs <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> rs<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> ResultSet <span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span>Connection conn<span style="color:#f92672">,</span>String sql<span style="color:#f92672">,</span>Object<span style="color:#f92672">.</span><span style="color:#f92672">.</span><span style="color:#f92672">.</span> parameter<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                PreparedStatement ps <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span>1<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>parameter <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span>Object pa1<span style="color:#f92672">:</span>parameter<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setObject</span><span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> pa1<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                i<span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
                ResultSet rs <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> rs<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>PreparedStatement ps<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>ps<span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">try</span>
                        <span style="color:#f92672">{</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                        
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>Connection conn<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>conn<span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">try</span>
                        <span style="color:#f92672">{</span>
                                conn<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                        
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>ResultSet rs<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>rs<span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">try</span>
                        <span style="color:#f92672">{</span>
                                rs<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                        
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>新一个版本的改进，主要是利用杨老师讲的 静态代码块仅仅一次加载驱动！ 并关闭有些使用的资源，ResultSet资源不关闭，由调用者去关闭</p>
<p>2.新的版本真是比较清晰。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e">* 
</span><span style="color:#75715e">*/</span>
<span style="color:#f92672">package</span> com.jdbc.test<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> java.util.Properties<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.io.*<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.*<span style="color:#f92672">;</span>
<span style="color:#75715e">/**
</span><span style="color:#75715e">* @author    叶昭良
</span><span style="color:#75715e">* @time      2015年2月17日下午11:31:53
</span><span style="color:#75715e">* @version   com.jdbc.testJDBCUtils V1.0
</span><span style="color:#75715e">*                         V2.0  改变配置文件变为为final，并把sql.properties文件提到
</span><span style="color:#75715e">*                                 com.jdbc目录下 com/jdbc/test/sql.properties
</span><span style="color:#75715e">*                                 测试通过
</span><span style="color:#75715e">*          V3.0 改变为静态代码段 加载驱动！ 并把加载配置文件
</span><span style="color:#75715e">*               也放在静态代码段中！仅仅加载一次即可！而不需要
</span><span style="color:#75715e">*               一直加载
</span><span style="color:#75715e">*          V4.0 修正了没有close的问题！！防止一直连着。 明白了吃异常的过程
</span><span style="color:#75715e">*                在类库中不知道怎么处理！直接抛出异常即可！让调用者自己去处理！
</span><span style="color:#75715e">*                咱们提供方法，不提供异常的处理！打印异常不叫做处理！而叫做“吃异常”
</span><span style="color:#75715e">*          V5.0  不吃异常的方式就是 throw new RuntimeException ，静态代码段
</span><span style="color:#75715e">*                  无法throw checkedException检查异常
</span><span style="color:#75715e">*                没想到经过这样的过程封装比我原先的好看多了！而且逻辑更加清晰
</span><span style="color:#75715e">*                
</span><span style="color:#75715e">*/</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">JDBCUtils</span>
<span style="color:#f92672">{</span>

        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * @param args
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String mysqlDriver<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String connectDatabase<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String userName<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String Password<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">static</span>
        <span style="color:#f92672">{</span>
                InputStream is <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> 
                <span style="color:#75715e">//InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream(&#34;sql.properties&#34;);
</span><span style="color:#75715e"></span>                Properties ps  <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Properties<span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                Connection c1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        is <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getClassLoader</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getResourceAsStream</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span>
                                        <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;com/jdbc/test/sql.properties&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        ps<span style="color:#f92672">.</span><span style="color:#a6e22e">load</span><span style="color:#f92672">(</span>is<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        mysqlDriver <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;mysqlDriver&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
<span style="color:#75715e">//                        System.out.println(mysqlDriver);
</span><span style="color:#75715e"></span>                        connectDatabase <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;connectDatabase&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#75715e">//                        System.out.println(connectDatabase);
</span><span style="color:#75715e"></span>                        userName <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;userName&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#75715e">//                        System.out.println(userName);
</span><span style="color:#75715e"></span>                        Password <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Password&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#75715e">//                        System.out.println(Password);
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">//仅仅在静态代码段中加载一次驱动即可（在运行中）
</span><span style="color:#75715e"></span>                        
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>IOException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#75715e">// TODO Auto-generated catch block
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">//System.out.println(&#34;配置文件加载失败&#34;+e.getMessage());
</span><span style="color:#75715e"></span>                        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> RuntimeException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;配置文件sql.properties加载失败&#34;</span><span style="color:#f92672">+</span>e<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#75715e">//return null;
</span><span style="color:#75715e"></span>                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span>mysqlDriver<span style="color:#f92672">)</span><span style="color:#f92672">;</span> <span style="color:#75715e">//仅仅在程序运行中加载一次驱动即可！！！
</span><span style="color:#75715e"></span>                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>ClassNotFoundException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#75715e">// TODO Auto-generated catch block
</span><span style="color:#75715e"></span><span style="color:#75715e">//                        System.out.println(&#34;驱动加载失败&#34;+e.getMessage());
</span><span style="color:#75715e"></span>                        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> RuntimeException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;驱动加载失败&#34;</span><span style="color:#f92672">+</span>e<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>

        <span style="color:#f92672">}</span>
        
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[</span><span style="color:#f92672">]</span> args<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#75715e">// TODO Auto-generated method stub
</span><span style="color:#75715e"></span>                
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        
        <span style="color:#75715e">//查询的测试分为三个阶段    无参 的两个   有参的一个
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">//测试1   success
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">/**
</span><span style="color:#75715e">                         *  mysql&gt; select * from t_person;
</span><span style="color:#75715e">                         *  6 rows in set (0.35 sec)
</span><span style="color:#75715e">                         */</span>
                        <span style="color:#75715e">/*
</span><span style="color:#75715e">                        Connection conn = JDBCUtils.createConnection() ;
</span><span style="color:#75715e">                        ResultSet rs = JDBCUtils.executeQuery(conn, &#34;select * from t_person&#34;, null);
</span><span style="color:#75715e">                        int i = 0;
</span><span style="color:#75715e">                        while(rs.next())
</span><span style="color:#75715e">                        {
</span><span style="color:#75715e">                                i++;
</span><span style="color:#75715e">                        }
</span><span style="color:#75715e">                        System.out.println(&#34;总的返回了&#34;+i+&#34;条记录&#34;);
</span><span style="color:#75715e">                        */</span>
                        <span style="color:#75715e">//测试2   success
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">/**
</span><span style="color:#75715e">                         *  mysql&gt; select * from t_person;
</span><span style="color:#75715e">                         *  6 rows in set (0.35 sec)
</span><span style="color:#75715e">                         */</span>
                        <span style="color:#75715e">/*
</span><span style="color:#75715e">                        ResultSet rs = JDBCUtils.executeQuery( &#34;select * from t_person&#34;, null);
</span><span style="color:#75715e">                        int i = 0;
</span><span style="color:#75715e">                        while(rs.next())
</span><span style="color:#75715e">                        {
</span><span style="color:#75715e">                                i++;
</span><span style="color:#75715e">                        }
</span><span style="color:#75715e">                        System.out.println(&#34;总的返回了&#34;+i+&#34;条记录&#34;);
</span><span style="color:#75715e">                        */</span>
                        
                        <span style="color:#75715e">//测试3    success
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">/* mysql&gt; select * from t_person where name=&#39;xinran&#39;
</span><span style="color:#75715e">                         * 3 rows in set (0.00 sec)
</span><span style="color:#75715e">                         */</span>
<span style="color:#75715e">/*                        ResultSet rs = JDBCUtils.executeQuery(&#34;select * from t_person where name = ?&#34;, &#34;xinran&#34;);
</span><span style="color:#75715e">                        int i = 0;
</span><span style="color:#75715e">                        while(rs.next())
</span><span style="color:#75715e">                        {
</span><span style="color:#75715e">                                i++;
</span><span style="color:#75715e">                        }
</span><span style="color:#75715e">                        System.out.println(&#34;总的返回了&#34;+i+&#34;条记录&#34;);*/</span>
                        
        <span style="color:#75715e">//插入阶段的测试   类似查询分为三个阶段    无参 的两个   有参的一个
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">/**
</span><span style="color:#75715e">                         * 测试成功！ //1
</span><span style="color:#75715e">                         */</span>
                        <span style="color:#75715e">/*Connection conn = JDBCUtils.createConnection() ;
</span><span style="color:#75715e">                        int i = JDBCUtils.executeUpdate(conn, &#34;insert into t_person(Id,Name,Age,Gender) values(8,&#39;lizi&#39;,82,1)&#34;, null);
</span><span style="color:#75715e">
</span><span style="color:#75715e">                        //System.out.println(&#34;总的返回了&#34;+i+&#34;条记录&#34;);
</span><span style="color:#75715e">
</span><span style="color:#75715e">            */</span>        
                        <span style="color:#75715e">/**
</span><span style="color:#75715e">                         * 测试成功！ //2 没想到只要两行语句 则进行了一次插入
</span><span style="color:#75715e">                         */</span>
                        <span style="color:#75715e">/*String sql = &#34;insert into t_person(Id,Name,Age,Gender) values(9,&#39;孙悟空&#39;,12,1)&#34;; //年龄不能过大
</span><span style="color:#75715e">                        JDBCUtils.executeUpdate(sql, null);*/</span>
                        
                        <span style="color:#75715e">/**
</span><span style="color:#75715e">                         *  测试成功！  //3  连有参的形式也是成功了
</span><span style="color:#75715e">                         *  mysql&gt; select * from t_person;
</span><span style="color:#75715e">                        +----+---------+-----+--------+
</span><span style="color:#75715e">                        | Id | Name    | Age | Gender |
</span><span style="color:#75715e">                        +----+---------+-----+--------+
</span><span style="color:#75715e">                        |  1 | yezhao  |  24 |      1 |
</span><span style="color:#75715e">                        |  3 | xinran  |  32 |      0 |
</span><span style="color:#75715e">                        |  4 | xinran  |  32 |      4 |
</span><span style="color:#75715e">                        |  5 | xinran  |  32 |      4 |
</span><span style="color:#75715e">                        |  6 | yezhao1 |  25 |      0 |
</span><span style="color:#75715e">                        |  7 | yezhao  |  25 |      1 |
</span><span style="color:#75715e">                        |  8 | lizi    |  82 |      1 |
</span><span style="color:#75715e">                        |  9 | 孙悟空  |  12 |      1 |
</span><span style="color:#75715e">                        | 10 | 蝴蝶    |   3 |      0 |
</span><span style="color:#75715e">                        +----+---------+-----+--------+
</span><span style="color:#75715e">                        9 rows in set (0.00 sec)
</span><span style="color:#75715e">                         */</span>
                        String sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;insert into t_person(Id,Name,Age,Gender) values(?,?,?,?)&#34;</span><span style="color:#f92672">;</span> <span style="color:#75715e">//年龄不能过大
</span><span style="color:#75715e"></span>                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">,</span> 12<span style="color:#f92672">,</span><span style="color:#e6db74">&#34;孟江虎&#34;</span><span style="color:#f92672">,</span>15<span style="color:#f92672">,</span>0<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#75715e">// TODO Auto-generated catch block
</span><span style="color:#75715e"></span>                        e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * 创建数据库的连接
</span><span style="color:#75715e">         * @return   返回mysql的连接
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span>  Connection <span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> 
        <span style="color:#f92672">{</span>
                Connection c1  <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        
                  c1 <span style="color:#f92672">=</span> DriverManager<span style="color:#f92672">.</span><span style="color:#a6e22e">getConnection</span><span style="color:#f92672">(</span>connectDatabase<span style="color:#f92672">,</span>userName<span style="color:#f92672">,</span>Password<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;连接成功&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#75715e">// TODO Auto-generated catch block
</span><span style="color:#75715e"></span>                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;数据库连接创建失败&#34;</span><span style="color:#f92672">+</span>e<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">return</span> c1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * 
</span><span style="color:#75715e">         * @param sql        sql的update,delete,insert等修改数据库的语句
</span><span style="color:#75715e">         * @param parameter  参数化的update,delete,insert等的设置 
</span><span style="color:#75715e">         * @return           返回被影响的函数
</span><span style="color:#75715e">         * @throws SQLException   抛出SQLException由用户自己去特殊处理
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span>String sql<span style="color:#f92672">,</span>Object<span style="color:#f92672">.</span><span style="color:#f92672">.</span><span style="color:#f92672">.</span> parameter<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                Connection conn <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                PreparedStatement ps <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">int</span> rows <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        conn <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        ps <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>parameter <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span>Object pa1<span style="color:#f92672">:</span>parameter<span style="color:#f92672">)</span>
                                <span style="color:#f92672">{</span>
                                        ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setObject</span><span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> pa1<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                        i<span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">;</span>
                                <span style="color:#f92672">}</span>
                        <span style="color:#f92672">}</span>
                        rows <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">finally</span>
                <span style="color:#f92672">{</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>ps<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;有&#34;</span><span style="color:#f92672">+</span>rows<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;条记录被影响&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> rows<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * @param conn       数据库的连接
</span><span style="color:#75715e">         * @param sql        sql的update,delete,insert等修改数据库的语句
</span><span style="color:#75715e">         * @param parameter  参数化的update,delete,insert等的设置 
</span><span style="color:#75715e">         * @return           返回被影响的函数
</span><span style="color:#75715e">         * @throws SQLException   抛出SQLException由用户自己去特殊处理
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span>Connection conn<span style="color:#f92672">,</span>String sql<span style="color:#f92672">,</span>Object<span style="color:#f92672">.</span><span style="color:#f92672">.</span><span style="color:#f92672">.</span> parameter<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                PreparedStatement ps <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">int</span> rows <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        ps <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>parameter <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span>Object pa1<span style="color:#f92672">:</span>parameter<span style="color:#f92672">)</span>
                                <span style="color:#f92672">{</span>
                                        ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setObject</span><span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> pa1<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                        i<span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">;</span>
                                <span style="color:#f92672">}</span>
                        <span style="color:#f92672">}</span>
                        rows <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">finally</span>
                <span style="color:#f92672">{</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>ps<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                
                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;有&#34;</span><span style="color:#f92672">+</span>rows<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;条记录被影响&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> rows<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * 
</span><span style="color:#75715e">         * @param sql        sql的select不修改数据库的语句
</span><span style="color:#75715e">         * @param parameter  参数化的查询，参数集的设置 
</span><span style="color:#75715e">         * @return           返回查询的数据集
</span><span style="color:#75715e">         * @throws SQLException   抛出SQLException由用户自己去特殊处理
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> ResultSet <span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span>String sql<span style="color:#f92672">,</span>Object<span style="color:#f92672">.</span><span style="color:#f92672">.</span><span style="color:#f92672">.</span> parameter<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                Connection conn <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                PreparedStatement ps <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        conn <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        ps <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span>1<span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>parameter <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span>Object pa1<span style="color:#f92672">:</span>parameter<span style="color:#f92672">)</span>
                                <span style="color:#f92672">{</span>
                                        ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setObject</span><span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> pa1<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                        i<span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">;</span>
                                <span style="color:#f92672">}</span>
                        <span style="color:#f92672">}</span>
                        ResultSet rs <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#75715e">//因为finally是肯定会被执行的片段  即使他放在return之后
</span><span style="color:#75715e"></span>                        <span style="color:#66d9ef">return</span> rs<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">finally</span>
                <span style="color:#f92672">{</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>ps<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                
                
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * @param conn       数据库连接
</span><span style="color:#75715e">         * @param sql        sql的select不修改数据库的语句
</span><span style="color:#75715e">         * @param parameter  参数化的查询，参数集的设置 
</span><span style="color:#75715e">         * @return           返回查询的数据集
</span><span style="color:#75715e">         * @throws SQLException   抛出SQLException由用户自己去特殊处理
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> ResultSet <span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span>Connection conn<span style="color:#f92672">,</span>String sql<span style="color:#f92672">,</span>Object<span style="color:#f92672">.</span><span style="color:#f92672">.</span><span style="color:#f92672">.</span> parameter<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                PreparedStatement ps <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        ps <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span>1<span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>parameter <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span>Object pa1<span style="color:#f92672">:</span>parameter<span style="color:#f92672">)</span>
                                <span style="color:#f92672">{</span>
                                        ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setObject</span><span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> pa1<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                        i<span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">;</span>
                                <span style="color:#f92672">}</span>
                        <span style="color:#f92672">}</span>
                        ResultSet rs <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">return</span> rs<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">finally</span>
                <span style="color:#f92672">{</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>ps<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         *  关闭PreparedStatment连接
</span><span style="color:#75715e">         * @param ps   PreparedStatment对象
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>PreparedStatement ps<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>ps<span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">try</span>
                        <span style="color:#f92672">{</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                        
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         *  关闭Connection连接
</span><span style="color:#75715e">         * @param connn   Connection对象
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>Connection conn<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>conn<span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">try</span>
                        <span style="color:#f92672">{</span>
                                conn<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                        
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         *  关闭ResultSet连接
</span><span style="color:#75715e">         * @param rs   ResultSet对象
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>ResultSet rs<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>rs<span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">try</span>
                        <span style="color:#f92672">{</span>
                                rs<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                        
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>原来自己又没有理解清楚，我们实际用的较多executeUpdate和executeQuery的无conn
的形式，而带conn只是一个中间过程！ 并且无conn的会调用有conn的形式！同时这也是一个比较好的习惯！只要改一个地方就都改了！</p>
<p>而且并且改掉代码的重复片段，一举多得，并且思路更清晰！
学习，札记。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e">         * 
</span><span style="color:#75715e">         * @param sql        sql的update,delete,insert等修改数据库的语句
</span><span style="color:#75715e">         * @param parameter  参数化的update,delete,insert等的设置 
</span><span style="color:#75715e">         * @return           返回被影响的函数
</span><span style="color:#75715e">         * @throws SQLException   抛出SQLException由用户自己去特殊处理
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span>String sql<span style="color:#f92672">,</span>Object<span style="color:#f92672">.</span><span style="color:#f92672">.</span><span style="color:#f92672">.</span> parameter<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                Connection conn <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        conn <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">return</span> executeUpdate<span style="color:#f92672">(</span>conn<span style="color:#f92672">,</span> sql<span style="color:#f92672">,</span> parameter<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">finally</span>
                <span style="color:#f92672">{</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>conn<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * 
</span><span style="color:#75715e">         * @param sql        sql的select不修改数据库的语句
</span><span style="color:#75715e">         * @param parameter  参数化的查询，参数集的设置 
</span><span style="color:#75715e">         * @return           返回查询的数据集
</span><span style="color:#75715e">         * @throws SQLException   抛出SQLException由用户自己去特殊处理
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> ResultSet <span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span>String sql<span style="color:#f92672">,</span>Object<span style="color:#f92672">.</span><span style="color:#f92672">.</span><span style="color:#f92672">.</span> parameter<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                Connection conn <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        conn <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">return</span> executeQuery<span style="color:#f92672">(</span>conn<span style="color:#f92672">,</span>sql<span style="color:#f92672">,</span> parameter<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">finally</span>
                <span style="color:#f92672">{</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>conn<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                
        <span style="color:#f92672">}</span>
</code></pre></div><p>漂亮，优雅！！！美丽</p>
<p>3测试了一个多次插入的案例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e">                 *  测试结果： 单个连接 插入100条数据耗时3767 
</span><span style="color:#75715e">                 */</span>
<span style="color:#75715e">/*                        long startTime = System.currentTimeMillis();
</span><span style="color:#75715e">                        String sql = &#34;insert into t_person(Id,Name,Age,Gender) values(?,?,?,?)&#34;;
</span><span style="color:#75715e">                        Connection conn = null;
</span><span style="color:#75715e">                        try
</span><span style="color:#75715e">                        {
</span><span style="color:#75715e">                                conn = JDBCUtils.createConnection();
</span><span style="color:#75715e">                                //原先有数据！并且主键不能重复 所以只好从18开始
</span><span style="color:#75715e">                                for(int i = 15; i &lt; 115; i++)
</span><span style="color:#75715e">                                {
</span><span style="color:#75715e">                                        JDBCUtils.executeUpdate(conn,sql, i,&#34;SpringDay&#34;,17,1);
</span><span style="color:#75715e">                                }
</span><span style="color:#75715e">                                System.out.println(&#34;单个连接 插入100条数据耗时&#34;+(System.currentTimeMillis()
</span><span style="color:#75715e">                                                -startTime));
</span><span style="color:#75715e">
</span><span style="color:#75715e">                        }catch(SQLException e)
</span><span style="color:#75715e">                        {
</span><span style="color:#75715e">                                System.out.println(&#34;数据库连接异常&#34;);
</span><span style="color:#75715e">                        }finally
</span><span style="color:#75715e">                        {
</span><span style="color:#75715e">                                JDBCUtils.closeQuietly(conn);
</span><span style="color:#75715e">                        }*/</span>
                <span style="color:#75715e">/**
</span><span style="color:#75715e">                 * 一个连接 插入一条数据 100条后耗时7850  
</span><span style="color:#75715e">                 *   可见这种方式还是相对较慢的！！！！
</span><span style="color:#75715e">                 *   总结   在多次插入数据库中！最好是一次连接，不要关闭，插入完在关闭
</span><span style="color:#75715e">                 */</span>
                <span style="color:#66d9ef">long</span> startTime <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                String sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;insert into t_person(Id,Name,Age,Gender) values(?,?,?,?)&#34;</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 116<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> 216<span style="color:#f92672">;</span> i<span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">,</span> i<span style="color:#f92672">,</span><span style="color:#e6db74">&#34;SpringDay&#34;</span><span style="color:#f92672">,</span>17<span style="color:#f92672">,</span>1<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span>
                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;一个连接 插入一条数据 100条后耗时&#34;</span><span style="color:#f92672">+</span><span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span>
                                        <span style="color:#f92672">-</span>startTime<span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;连接失败！主键有问题&#34;</span><span style="color:#f92672">+</span>e<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
</code></pre></div><p>总结 在多次插入数据库中！最好是一次连接，不要关闭，插入完在关闭</p>
<p>再次改进！不需要把executeQuery的connection关闭</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">*</span>                由于PreparedStatement 来自Statement
<span style="color:#f92672">*</span>                rs<span style="color:#f92672">.</span><span style="color:#a6e22e">getStatement</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> 表示返回一个statement<span style="color:#960050;background-color:#1e0010">，</span>而不会关闭PreparedStatement
<span style="color:#f92672">*</span>                常见了一个closeAll<span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">,</span>这也是为什么 暂时不关闭查询连接的原因<span style="color:#960050;background-color:#1e0010">，</span>同时不关闭
<span style="color:#f92672">*</span>                方便进行多次查询<span style="color:#960050;background-color:#1e0010">，</span>反复查询

<span style="color:#75715e">/**
</span><span style="color:#75715e">         * 从resultSet中关闭所有的连接
</span><span style="color:#75715e">         * @param rs
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">closeAll</span><span style="color:#f92672">(</span>ResultSet rs<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>rs <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>rs<span style="color:#f92672">.</span><span style="color:#a6e22e">getStatement</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>rs<span style="color:#f92672">.</span><span style="color:#a6e22e">getStatement</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeAll</span><span style="color:#f92672">(</span>rs<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
</code></pre></div><p>并且必须修正 executeQuery的函数，把原先的JDBCUtils.closeQuietly(ps)关掉！ 否则报错！出现异常，然后就可以很happy的使用JDBCUtils了</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">  ResultSet rs <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                String sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;select * from t_person&#34;</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        rs <span style="color:#f92672">=</span> executeQuery<span style="color:#f92672">(</span>sql<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">while</span><span style="color:#f92672">(</span>rs<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                String Name<span style="color:#f92672">=</span> rs<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Name&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Name<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;居然报错&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">finally</span>
                <span style="color:#f92672">{</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeAll</span><span style="color:#f92672">(</span>rs<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
</code></pre></div><p>4午饭前版本的JDBCUtils：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e">* 
</span><span style="color:#75715e">*/</span>
<span style="color:#f92672">package</span> com.jdbc.test<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> java.util.Properties<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.io.*<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.*<span style="color:#f92672">;</span>
<span style="color:#75715e">/**
</span><span style="color:#75715e">* @author    叶昭良
</span><span style="color:#75715e">* @time      2015年2月17日下午11:31:53
</span><span style="color:#75715e">* @version   com.jdbc.testJDBCUtils V1.0
</span><span style="color:#75715e">*                         V2.0  改变配置文件变为为final，并把sql.properties文件提到
</span><span style="color:#75715e">*                                 com.jdbc目录下 com/jdbc/test/sql.properties
</span><span style="color:#75715e">*                                 测试通过
</span><span style="color:#75715e">*          V3.0 改变为静态代码段 加载驱动！ 并把加载配置文件
</span><span style="color:#75715e">*               也放在静态代码段中！仅仅加载一次即可！而不需要
</span><span style="color:#75715e">*               一直加载
</span><span style="color:#75715e">*          V4.0 修正了没有close的问题！！防止一直连着。 明白了吃异常的过程
</span><span style="color:#75715e">*                在类库中不知道怎么处理！直接抛出异常即可！让调用者自己去处理！
</span><span style="color:#75715e">*                咱们提供方法，不提供异常的处理！打印异常不叫做处理！而叫做“吃异常”
</span><span style="color:#75715e">*          V5.0  不吃异常的方式就是 throw new RuntimeException ，静态代码段
</span><span style="color:#75715e">*                  无法throw checkedException检查异常
</span><span style="color:#75715e">*                没想到经过这样的过程封装比我原先的好看多了！而且逻辑更加清晰
</span><span style="color:#75715e">*          V6.0 有没有理解清楚，我们实际用的较多executeUpdate和executeQuery的无conn
</span><span style="color:#75715e">*               的形式，而带conn只是一个中间过程！ 并且无conn的会调用有conn的形式！
</span><span style="color:#75715e">*              再次修改！ 注意观看executeUpdate的实现
</span><span style="color:#75715e">*          V7.0  再次改进！不需要把executeQuery的connection关闭
</span><span style="color:#75715e">*                由于PreparedStatement 来自Statement
</span><span style="color:#75715e">*                rs.getStatement() 表示返回一个statement，而不会关闭PreparedStatement
</span><span style="color:#75715e">*                常见了一个closeAll(),这也是为什么 暂时不关闭查询连接的原因，同时不关闭
</span><span style="color:#75715e">*                方便进行多次查询，反复查询
</span><span style="color:#75715e">*                
</span><span style="color:#75715e">*           V8.0  cachedRowSet 是一个缓冲的mysql字符集，连接中断！把所有数据缓冲到客户端！
</span><span style="color:#75715e">*                 不需要再次连接，所以关闭Connection也是可以
</span><span style="color:#75715e">*                 但是这个栈内存  暂时不使用 
</span><span style="color:#75715e">*                
</span><span style="color:#75715e">*/</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">JDBCUtils</span>
<span style="color:#f92672">{</span>

        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * @param args
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String mysqlDriver<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String connectDatabase<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String userName<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String Password<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">static</span>
        <span style="color:#f92672">{</span>
                InputStream is <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> 
                <span style="color:#75715e">//InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream(&#34;sql.properties&#34;);
</span><span style="color:#75715e"></span>                Properties ps  <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Properties<span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                Connection c1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#75715e">//is = JDBCUtils.class.getClassLoader().getResourceAsStream(&#34;&#34;
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">//                + &#34;com/jdbc/test/sql.properties&#34;);
</span><span style="color:#75715e"></span>                        is <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getResourceAsStream</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;sql.properties&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#75715e">//这种情况省略宝和getClassLoader()
</span><span style="color:#75715e"></span>                        ps<span style="color:#f92672">.</span><span style="color:#a6e22e">load</span><span style="color:#f92672">(</span>is<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        mysqlDriver <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;mysqlDriver&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
<span style="color:#75715e">//                        System.out.println(mysqlDriver);
</span><span style="color:#75715e"></span>                        connectDatabase <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;connectDatabase&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#75715e">//                        System.out.println(connectDatabase);
</span><span style="color:#75715e"></span>                        userName <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;userName&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#75715e">//                        System.out.println(userName);
</span><span style="color:#75715e"></span>                        Password <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Password&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#75715e">//                        System.out.println(Password);
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">//仅仅在静态代码段中加载一次驱动即可（在运行中）
</span><span style="color:#75715e"></span>                        
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>IOException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#75715e">// TODO Auto-generated catch block
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">//System.out.println(&#34;配置文件加载失败&#34;+e.getMessage());
</span><span style="color:#75715e"></span>                        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> RuntimeException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;配置文件sql.properties加载失败&#34;</span><span style="color:#f92672">+</span>e<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#75715e">//return null;
</span><span style="color:#75715e"></span>                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span>mysqlDriver<span style="color:#f92672">)</span><span style="color:#f92672">;</span> <span style="color:#75715e">//仅仅在程序运行中加载一次驱动即可！！！
</span><span style="color:#75715e"></span>                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>ClassNotFoundException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#75715e">// TODO Auto-generated catch block
</span><span style="color:#75715e"></span><span style="color:#75715e">//                        System.out.println(&#34;驱动加载失败&#34;+e.getMessage());
</span><span style="color:#75715e"></span>                        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> RuntimeException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;驱动加载失败&#34;</span><span style="color:#f92672">+</span>e<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>

        <span style="color:#f92672">}</span>
        
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[</span><span style="color:#f92672">]</span> args<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                
                ResultSet rs <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                String sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;select * from t_person&#34;</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        rs <span style="color:#f92672">=</span> executeQuery<span style="color:#f92672">(</span>sql<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">while</span><span style="color:#f92672">(</span>rs<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                String Name<span style="color:#f92672">=</span> rs<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Name&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>Name<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;居然报错&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">finally</span>
                <span style="color:#f92672">{</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeAll</span><span style="color:#f92672">(</span>rs<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
        
<span style="color:#75715e">/*                try
</span><span style="color:#75715e">                {
</span><span style="color:#75715e">                        ResultSet rs = JDBCUtils.executeQuery( &#34;select * from t_person&#34;, null);
</span><span style="color:#75715e">                        int i = 0;
</span><span style="color:#75715e">                        while(rs.next())
</span><span style="color:#75715e">                        {
</span><span style="color:#75715e">                                i++;
</span><span style="color:#75715e">                        }
</span><span style="color:#75715e">                        System.out.println(&#34;总的返回了&#34;+i+&#34;条记录&#34;);
</span><span style="color:#75715e">                }catch(SQLException e)
</span><span style="color:#75715e">                {
</span><span style="color:#75715e">                        System.out.println(&#34;juran&#34;);
</span><span style="color:#75715e">                }
</span><span style="color:#75715e">                */</span>
                        
        <span style="color:#f92672">}</span>
        
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * 创建数据库的连接
</span><span style="color:#75715e">         * @return   返回mysql的连接
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span>  Connection <span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> 
        <span style="color:#f92672">{</span>
                Connection c1  <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        
                  c1 <span style="color:#f92672">=</span> DriverManager<span style="color:#f92672">.</span><span style="color:#a6e22e">getConnection</span><span style="color:#f92672">(</span>connectDatabase<span style="color:#f92672">,</span>userName<span style="color:#f92672">,</span>Password<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;连接成功&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#75715e">// TODO Auto-generated catch block
</span><span style="color:#75715e"></span>                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;数据库连接创建失败&#34;</span><span style="color:#f92672">+</span>e<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">return</span> c1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * 
</span><span style="color:#75715e">         * @param sql        sql的update,delete,insert等修改数据库的语句
</span><span style="color:#75715e">         * @param parameter  参数化的update,delete,insert等的设置 
</span><span style="color:#75715e">         * @return           返回被影响的函数
</span><span style="color:#75715e">         * @throws SQLException   抛出SQLException由用户自己去特殊处理
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span>String sql<span style="color:#f92672">,</span>Object<span style="color:#f92672">.</span><span style="color:#f92672">.</span><span style="color:#f92672">.</span> parameter<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                Connection conn <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        conn <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">return</span> executeUpdate<span style="color:#f92672">(</span>conn<span style="color:#f92672">,</span> sql<span style="color:#f92672">,</span> parameter<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">finally</span>
                <span style="color:#f92672">{</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>conn<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * @param conn       数据库的连接
</span><span style="color:#75715e">         * @param sql        sql的update,delete,insert等修改数据库的语句
</span><span style="color:#75715e">         * @param parameter  参数化的update,delete,insert等的设置 
</span><span style="color:#75715e">         * @return           返回被影响的函数
</span><span style="color:#75715e">         * @throws SQLException   抛出SQLException由用户自己去特殊处理
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span>Connection conn<span style="color:#f92672">,</span>String sql<span style="color:#f92672">,</span>Object<span style="color:#f92672">.</span><span style="color:#f92672">.</span><span style="color:#f92672">.</span> parameter<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                PreparedStatement ps <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">int</span> rows <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        ps <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>parameter <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span>Object pa1<span style="color:#f92672">:</span>parameter<span style="color:#f92672">)</span>
                                <span style="color:#f92672">{</span>
                                        ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setObject</span><span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> pa1<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                        i<span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">;</span>
                                <span style="color:#f92672">}</span>
                        <span style="color:#f92672">}</span>
                        rows <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">finally</span>
                <span style="color:#f92672">{</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>ps<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                
                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;有&#34;</span><span style="color:#f92672">+</span>rows<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;条记录被影响&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> rows<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * 
</span><span style="color:#75715e">         * @param sql        sql的select不修改数据库的语句
</span><span style="color:#75715e">         * @param parameter  参数化的查询，参数集的设置 
</span><span style="color:#75715e">         * @return           返回查询的数据集
</span><span style="color:#75715e">         * @throws SQLException   抛出SQLException由用户自己去特殊处理
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> ResultSet <span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span>String sql<span style="color:#f92672">,</span>Object<span style="color:#f92672">.</span><span style="color:#f92672">.</span><span style="color:#f92672">.</span> parameter<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                Connection conn <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                
                conn <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> executeQuery<span style="color:#f92672">(</span>conn<span style="color:#f92672">,</span>sql<span style="color:#f92672">,</span> parameter<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#75715e">/*finally
</span><span style="color:#75715e">                {
</span><span style="color:#75715e">                        JDBCUtils.closeQuietly(conn);
</span><span style="color:#75715e">                }*/</span>
                
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * @param conn       数据库连接
</span><span style="color:#75715e">         * @param sql        sql的select不修改数据库的语句
</span><span style="color:#75715e">         * @param parameter  参数化的查询，参数集的设置 
</span><span style="color:#75715e">         * @return           返回查询的数据集
</span><span style="color:#75715e">         * @throws SQLException   抛出SQLException由用户自己去特殊处理
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> ResultSet <span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span>Connection conn<span style="color:#f92672">,</span>String sql<span style="color:#f92672">,</span>Object<span style="color:#f92672">.</span><span style="color:#f92672">.</span><span style="color:#f92672">.</span> parameter<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> SQLException
        <span style="color:#f92672">{</span>
                PreparedStatement ps <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                ps <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span>1<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>parameter <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span>Object pa1<span style="color:#f92672">:</span>parameter<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setObject</span><span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> pa1<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                i<span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
                ResultSet rs <span style="color:#f92672">=</span> ps<span style="color:#f92672">.</span><span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">return</span> rs<span style="color:#f92672">;</span>        
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * 从resultSet中关闭所有的连接
</span><span style="color:#75715e">         * @param rs
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">closeAll</span><span style="color:#f92672">(</span>ResultSet rs<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>rs <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>rs<span style="color:#f92672">.</span><span style="color:#a6e22e">getStatement</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>rs<span style="color:#f92672">.</span><span style="color:#a6e22e">getStatement</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeAll</span><span style="color:#f92672">(</span>rs<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         *  关闭PreparedStatment连接
</span><span style="color:#75715e">         * @param ps   PreparedStatment对象
</span><span style="color:#75715e">         */</span>
        <span style="color:#75715e">//static void closeQuietly(PreparedStatement ps)
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>Statement ps<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>ps<span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">try</span>
                        <span style="color:#f92672">{</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                        
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         *  关闭Connection连接
</span><span style="color:#75715e">         * @param connn   Connection对象
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>Connection conn<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>conn<span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">try</span>
                        <span style="color:#f92672">{</span>
                                conn<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                        
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">/**
</span><span style="color:#75715e">         *  关闭ResultSet连接
</span><span style="color:#75715e">         * @param rs   ResultSet对象
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>ResultSet rs<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>rs<span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">try</span>
                        <span style="color:#f92672">{</span>
                                rs<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                        
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>思路总结：
1：利用配置表，载入mysql和数据库信息
2：利用静态代码段载入驱动（只需要一次）
3： 编写 带connection的executeUpdate和executeQuery,并且在executeResult不要关闭任何信息，待统一关闭
4： 编写 不带Connection的executeUpdate和executeQuery,内部调用带Connction版本的而寒暑
5： 编写closeQuietly函数  和closeAll函数，在调用executeQuery,并关闭closeAll即可</p>
<p>练习使用ctrl+O 打开方法。。（大年30 刚喝完半碗酒  继续。。。）</p>
<p>5事务的练习1：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e">* 
</span><span style="color:#75715e">*/</span>
<span style="color:#f92672">package</span> com.jdbc.test<span style="color:#f92672">;</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e">* @author    叶昭良
</span><span style="color:#75715e">* @time      2015年2月18日下午1:43:28
</span><span style="color:#75715e">* @version   com.jdbc.testtransaction1 V1.0
</span><span style="color:#75715e">*/</span>
<span style="color:#f92672">import</span> java.sql.*<span style="color:#f92672">;</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">transaction1</span>
<span style="color:#f92672">{</span>

        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * @param args
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[</span><span style="color:#f92672">]</span> args<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#75715e">// TODO Auto-generated method stub
</span><span style="color:#75715e"></span>                Connection conn <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                PreparedStatement ps1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                PreparedStatement ps2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                    conn <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                    conn<span style="color:#f92672">.</span><span style="color:#a6e22e">setAutoCommit</span><span style="color:#f92672">(</span><span style="color:#66d9ef">false</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                    ps1 <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Update t_person Set Age=Age+1 where Name=&#39;yezhao&#39;&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                    ps1<span style="color:#f92672">.</span><span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                    ps2 <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Update t_person Set Age=Age-1 where Name=&#39;xinran&#39;&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                    ps2<span style="color:#f92672">.</span><span style="color:#a6e22e">executeUpdate</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                    conn<span style="color:#f92672">.</span><span style="color:#a6e22e">commit</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                    <span style="color:#66d9ef">try</span>
                        <span style="color:#f92672">{</span>
                                conn<span style="color:#f92672">.</span><span style="color:#a6e22e">rollback</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>SQLException e1<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                <span style="color:#75715e">// TODO Auto-generated catch block
</span><span style="color:#75715e"></span>                                e1<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><p>测试navicat 和cmd都更新了。</p>
<p>6batch+事务的总和练习：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e">* 
</span><span style="color:#75715e">*/</span>
<span style="color:#f92672">package</span> com.jdbc.test<span style="color:#f92672">;</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e">* @author    叶昭良
</span><span style="color:#75715e">* @time      2015年2月18日下午2:31:56
</span><span style="color:#75715e">* @version   com.jdbc.testtestBatchInsertAndUpdate V1.0
</span><span style="color:#75715e">*/</span>
<span style="color:#f92672">import</span> java.sql.*<span style="color:#f92672">;</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">testBatchInsertAndUpdate</span>
<span style="color:#f92672">{</span>

        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * @param args
</span><span style="color:#75715e">         */</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[</span><span style="color:#f92672">]</span> args<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#75715e">// TODO Auto-generated method stub
</span><span style="color:#75715e"></span>                <span style="color:#75715e">//在没有批量导入数据之前，一般是需要花费很长的时间，现在采用addbatch进行
</span><span style="color:#75715e"></span>                Connection conn <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                PreparedStatement ps <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                String sql<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;insert into t_person(Id,Name,Age,Gender)values(?,?,?,?)&#34;</span><span style="color:#f92672">;</span>
                <span style="color:#75715e">//测试了删除操作，success!
</span><span style="color:#75715e"></span>                <span style="color:#75715e">//String sql= &#34;delete from t_person where Name=?&#34;;
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">long</span> startTime <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#75715e">/**
</span><span style="color:#75715e">                 * 不添加批处理后，添加1000条后耗时845
</span><span style="color:#75715e">                 *  不添加批处理  添加11000条后   耗时2604  ,所以我不知道批处理的好处啊！！！
</span><span style="color:#75715e">                 *                           反正即使2530s左右
</span><span style="color:#75715e">                 * 
</span><span style="color:#75715e">                   添加批处理后                添加1000条后耗时799
</span><span style="color:#75715e">                                                 添加11000条后耗时3206
</span><span style="color:#75715e">                                                 添加11000条后耗时3143(每个1000提交一次）
</span><span style="color:#75715e">
</span><span style="color:#75715e">
</span><span style="color:#75715e">                 */</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#75715e">//之前表中已有 215行
</span><span style="color:#75715e"></span>                        conn <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        conn<span style="color:#f92672">.</span><span style="color:#a6e22e">setAutoCommit</span><span style="color:#f92672">(</span><span style="color:#66d9ef">false</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span><span style="color:#75715e">//相当于begin的作用
</span><span style="color:#75715e"></span>                        ps <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 316<span style="color:#f92672">;</span>i <span style="color:#f92672">&lt;</span> 11316<span style="color:#f92672">;</span>i<span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                <span style="color:#75715e">//JDBCUtils.executeUpdate(conn, sql, i,&#34;Autumn&#34;,20,1);
</span><span style="color:#75715e"></span>                                <span style="color:#75715e">//ps.clearParameters();
</span><span style="color:#75715e"></span>                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setInt</span><span style="color:#f92672">(</span>1<span style="color:#f92672">,</span> i<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setString</span><span style="color:#f92672">(</span>2<span style="color:#f92672">,</span><span style="color:#e6db74">&#34;Winter&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setInt</span><span style="color:#f92672">(</span>3<span style="color:#f92672">,</span> 21<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setBoolean</span><span style="color:#f92672">(</span>4<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                <span style="color:#75715e">//ps.executeUpdate();
</span><span style="color:#75715e"></span>                                
                                
                                <span style="color:#75715e">/**
</span><span style="color:#75715e">                                 * if(i%1000 == 0) //每个1000次提交一次！！！这样好！
</span><span style="color:#75715e">                                 * {
</span><span style="color:#75715e">                                 *    ps.executeBatch();
</span><span style="color:#75715e">                                 *  }
</span><span style="color:#75715e">                                 *  少于1000次的最后一笔  再用一次ps.executeBatch();
</span><span style="color:#75715e">                                 */</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">addBatch</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span> <span style="color:#75715e">//据说是装到箱子的作用
</span><span style="color:#75715e"></span>                                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>i<span style="color:#f92672">%</span>1000 <span style="color:#f92672">=</span><span style="color:#f92672">=</span> 0<span style="color:#f92672">)</span>
                                <span style="color:#f92672">{</span>
                                        ps<span style="color:#f92672">.</span><span style="color:#a6e22e">executeBatch</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                <span style="color:#f92672">}</span>
                        <span style="color:#f92672">}</span>
                                <span style="color:#75715e">//JDBCUtils.executeUpdate(conn, sql, i,&#34;Autumn&#34;,20,1);
</span><span style="color:#75715e"></span>                                <span style="color:#75715e">//测试删除使用的
</span><span style="color:#75715e"></span>                                <span style="color:#75715e">//JDBCUtils.executeUpdate(conn, sql, &#34;Autumn&#34;);
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">//}
</span><span style="color:#75715e"></span>                        ps<span style="color:#f92672">.</span><span style="color:#a6e22e">executeBatch</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span> <span style="color:#75715e">//把箱子里面的数据 直接一次性提交mysql
</span><span style="color:#75715e"></span>                        conn<span style="color:#f92672">.</span><span style="color:#a6e22e">commit</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;添加1000条后耗时&#34;</span><span style="color:#f92672">+</span><span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span>
                                        <span style="color:#f92672">-</span>startTime<span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">try</span>
                        <span style="color:#f92672">{</span>
                                conn<span style="color:#f92672">.</span><span style="color:#a6e22e">rollback</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>SQLException e1<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                <span style="color:#75715e">// TODO Auto-generated catch block
</span><span style="color:#75715e"></span>                                e1<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">finally</span>
                <span style="color:#f92672">{</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeQuietly</span><span style="color:#f92672">(</span>conn<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                
        <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><p>7导入手机账簿，并进行手机号所在地的查询</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e">* 
</span><span style="color:#75715e">*/</span>
<span style="color:#f92672">package</span> com.jdbc.test<span style="color:#f92672">;</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e">* @author    叶昭良
</span><span style="color:#75715e">* @time      2015年2月18日下午3:49:22
</span><span style="color:#75715e">* @version   com.jdbc.testphoneCheck V1.0
</span><span style="color:#75715e">*/</span>
<span style="color:#f92672">import</span> java.io.*<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.*<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.util.Scanner<span style="color:#f92672">;</span>


<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">phoneCheck</span>
<span style="color:#f92672">{</span>

        <span style="color:#75715e">/**
</span><span style="color:#75715e">         * @param args
</span><span style="color:#75715e">         */</span>
<span style="color:#75715e">/**
</span><span style="color:#75715e">* ID,MobileNumber,MobileArea,MobileType,AreaCode,PostCode,0
</span><span style="color:#75715e">        连接成功
</span><span style="color:#75715e">        总共添加了300105条数据.耗时：64712
</span><span style="color:#75715e">*/</span>
        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">load</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#75715e">//导入csv数据，利用BufferedInputStream
</span><span style="color:#75715e"></span>          InputStream is <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
          InputStreamReader isr <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
          BufferedReader bis <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span> <span style="color:#75715e">//一行一行读入数据
</span><span style="color:#75715e"></span>          
          Connection conn <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
          PreparedStatement ps <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">int</span> len <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">long</span> startms <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        is <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FileInputStream<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;e://phone.csv&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                    isr <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> InputStreamReader<span style="color:#f92672">(</span>is<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        bis <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader<span style="color:#f92672">(</span>isr<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        
                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>bis<span style="color:#f92672">.</span><span style="color:#a6e22e">readLine</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#75715e">//第一行字段舍去
</span><span style="color:#75715e"></span>                        String apple<span style="color:#f92672">=</span>  <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                        String<span style="color:#f92672">[</span><span style="color:#f92672">]</span> applePiles <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                        <span style="color:#75715e">//第一次测试  字符串的行读入
</span><span style="color:#75715e"></span><span style="color:#75715e">/*                        System.out.println(bis.readLine());
</span><span style="color:#75715e">                        System.out.println(bis.readLine());*/</span>
                        <span style="color:#75715e">/*apple =bis.readLine();
</span><span style="color:#75715e">                        //字符串的一次失误！！ 导致插入失败！！＂＂是默认存在的　必须删掉
</span><span style="color:#75715e">                        apple = apple.replaceAll(&#34;\&#34;&#34;, &#34;&#34;);
</span><span style="color:#75715e">                        //第二次测试 字符串分隔
</span><span style="color:#75715e">                        String[] splitArray = apple.split(&#34;,&#34;);
</span><span style="color:#75715e">                        for(String apple1 :splitArray)
</span><span style="color:#75715e">                        {
</span><span style="color:#75715e">                                System.out.println(apple1);
</span><span style="color:#75715e">                        }*/</span>
                        conn <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        conn<span style="color:#f92672">.</span><span style="color:#a6e22e">setAutoCommit</span><span style="color:#f92672">(</span><span style="color:#66d9ef">false</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        
                        String sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;insert into phone(MobileNumber,MobileArea,MobileType,Area&#34;</span>
                                        <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;Code,PostCode) values(?,?,?,?,?);&#34;</span><span style="color:#f92672">;</span>
                        ps <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#75715e">/**
</span><span style="color:#75715e">                         * 370中国电信
</span><span style="color:#75715e">                                371中国电信
</span><span style="color:#75715e">                                之后 报错 ，可能是为空的原因 
</span><span style="color:#75715e">                         */</span>
                        <span style="color:#66d9ef">while</span><span style="color:#f92672">(</span><span style="color:#f92672">(</span>apple<span style="color:#f92672">=</span>bis<span style="color:#f92672">.</span><span style="color:#a6e22e">readLine</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                apple <span style="color:#f92672">=</span> apple<span style="color:#f92672">.</span><span style="color:#a6e22e">replaceAll</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;\&#34;&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                applePiles <span style="color:#f92672">=</span> apple<span style="color:#f92672">.</span><span style="color:#a6e22e">split</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">clearParameters</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                <span style="color:#75715e">//ps.setInt(1, Integer.parseInt(applePiles[1].equalsIgnoreCase(&#34;&#34;)?&#34;1111&#34;:applePiles[4]));
</span><span style="color:#75715e"></span>                                <span style="color:#75715e">//ps.setInt(1, Integer.parseInt(applePiles[1]));
</span><span style="color:#75715e"></span>                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setString</span><span style="color:#f92672">(</span>1<span style="color:#f92672">,</span> applePiles<span style="color:#f92672">[</span>1<span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setString</span><span style="color:#f92672">(</span>2<span style="color:#f92672">,</span> applePiles<span style="color:#f92672">[</span>2<span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                <span style="color:#75715e">//System.out.println(i+applePiles[3]+applePiles[4]);
</span><span style="color:#75715e"></span>                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setString</span><span style="color:#f92672">(</span>3<span style="color:#f92672">,</span> applePiles<span style="color:#f92672">[</span>3<span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
<span style="color:#75715e">//                                ps.setInt(4, Integer.parseInt(applePiles[4]));//.equalsIgnoreCase(&#34;&#34;)?&#34;1111&#34;:applePiles[4]));
</span><span style="color:#75715e"></span><span style="color:#75715e">//                                ps.setInt(5, Integer.parseInt(applePiles[5]));//.equalsIgnoreCase(&#34;&#34;)?&#34;1111&#34;:applePiles[4]));
</span><span style="color:#75715e"></span>                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setString</span><span style="color:#f92672">(</span>4<span style="color:#f92672">,</span> applePiles<span style="color:#f92672">[</span>4<span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">setString</span><span style="color:#f92672">(</span>5<span style="color:#f92672">,</span> applePiles<span style="color:#f92672">[</span>5<span style="color:#f92672">]</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                ps<span style="color:#f92672">.</span><span style="color:#a6e22e">addBatch</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>

                                i<span style="color:#f92672">+</span><span style="color:#f92672">+</span><span style="color:#f92672">;</span>
                                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>i<span style="color:#f92672">%</span>2000<span style="color:#f92672">=</span><span style="color:#f92672">=</span>0<span style="color:#f92672">)</span>
                                <span style="color:#f92672">{</span>
                                        ps<span style="color:#f92672">.</span><span style="color:#a6e22e">executeBatch</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                                <span style="color:#f92672">}</span>
                        <span style="color:#f92672">}</span>
                        ps<span style="color:#f92672">.</span><span style="color:#a6e22e">executeBatch</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        conn<span style="color:#f92672">.</span><span style="color:#a6e22e">commit</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">long</span> endMs <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;总共添加了&#34;</span><span style="color:#f92672">+</span>i<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;条数据&#34;</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#34;.耗时：&#34;</span><span style="color:#f92672">+</span><span style="color:#f92672">(</span>endMs<span style="color:#f92672">-</span>startms<span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>IOException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> RuntimeException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;读取文件异常&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span><span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#66d9ef">try</span>
                        <span style="color:#f92672">{</span>
                                conn<span style="color:#f92672">.</span><span style="color:#a6e22e">rollback</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>SQLException e1<span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                <span style="color:#75715e">// TODO Auto-generated catch block
</span><span style="color:#75715e"></span>                                e1<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span> <span style="color:#75715e">//又忘记了
</span><span style="color:#75715e"></span>                        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> RuntimeException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;数据库插入异常！&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        
                <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">checkPhoneNumber</span><span style="color:#f92672">(</span>String PhoneNumber<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>

                
                PhoneNumber <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;%&#34;</span><span style="color:#f92672">+</span>PhoneNumber<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;%&#34;</span><span style="color:#f92672">;</span>
                String sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;select * from phone where MobileNumber like ?&#34;</span><span style="color:#f92672">;</span>
                ResultSet rs  <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">try</span>
                <span style="color:#f92672">{</span>
                        rs <span style="color:#f92672">=</span> JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">,</span> PhoneNumber<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span><span style="color:#f92672">!</span>rs<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;当前版本没有&#34;</span><span style="color:#f92672">+</span>PhoneNumber<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;的信息&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
<span style="color:#75715e">//                                return;
</span><span style="color:#75715e"></span>                        <span style="color:#f92672">}</span>
                        <span style="color:#75715e">//rs.next();
</span><span style="color:#75715e"></span>                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>PhoneNumber<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;手机号来自&#34;</span><span style="color:#f92672">+</span>rs<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;MobileArea&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">+</span>rs<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;MobileType&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>SQLException e<span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        <span style="color:#75715e">// TODO Auto-generated catch block
</span><span style="color:#75715e"></span>                        <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span><span style="color:#66d9ef">finally</span>
                <span style="color:#f92672">{</span>
                        JDBCUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">closeAll</span><span style="color:#f92672">(</span>rs<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[</span><span style="color:#f92672">]</span> args<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
                <span style="color:#75715e">// TODO Auto-generated method stub
</span><span style="color:#75715e"></span>                <span style="color:#75715e">//导入一次即可
</span><span style="color:#75715e"></span>                <span style="color:#75715e">//load();
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">while</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span>
                <span style="color:#f92672">{</span>
                        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;请输入手机号(至少7位)&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        Scanner sc <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Scanner<span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">in</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        String PhoneNumber <span style="color:#f92672">=</span> sc<span style="color:#f92672">.</span><span style="color:#a6e22e">nextLine</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        
                        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>PhoneNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">equalsIgnoreCase</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;exit&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">|</span><span style="color:#f92672">|</span>PhoneNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">equalsIgnoreCase</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;quit&#34;</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span>
                        <span style="color:#f92672">{</span>
                                <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
                        <span style="color:#f92672">}</span>
                        PhoneNumber <span style="color:#f92672">=</span> PhoneNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">substring</span><span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>7<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                        checkPhoneNumber<span style="color:#f92672">(</span>PhoneNumber<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
                
        <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>

</code></pre></div><p>JDBCUtils 第一遍重写：</p>
<p>//再次书写的时候  注意 对于吃掉的异常的处理
//第二  在静态代码段中  加载mysql驱动
//静态代码块的两个作用：加载配置控件，加载驱动</p>
<pre><code>                    //try....finally  可以在throw SQLException的情况下使用，最后关闭需要的连接
                    //进一步体会两个executeUpdate的区别（executeQuery也是一样）
                    //一个抛出异常 一个则负责接住 并继续关闭的相应的连接
                    //try....finally 和try...catch....finally的配合使用
                    
                    //在查询时候的编写 则是都抛出！ 不负责关闭！！ 等到查询的时候！ 统一的去关闭
                    //因为可能存在多处查询
</code></pre>
<p>复制代码
JDBCUtils 第二遍重写：</p>
<ul>
<li>@time      2015年2月19日下午9:52:52</li>
<li>
<pre><code>                     10:20完成            28min左右
</code></pre>
</li>
</ul>
<p>//第三次重写 意识到了  静态代码快不能加载 检查性的异常! 在try&mdash;catch的时候
//一定得throw new RuntimeException 才不至于报错</p>
<pre><code>    //居然忘记了先重写 Connection的创建！直接close,!有点错乱的感觉！
    //应该是按照逻辑的顺序进行编写，先是创建连接！ 最后在关闭
    //只不过当时是这样想的！ 其实这些关闭会一直反复的用到，
    //就想着先把他们给写上！也是符合逻辑！因为逻辑里面他们是反复被
    //调用的小插件
    
    //同时在创建connection再疑问是否抛出异常？ 最终抛出了？
    //为什么？  因为这个异常是自己可以处理的
    //连连接都拿不到 ！那就直接返回吧！肯定程序是有问题的
    
    //至于executeUpate executeQuery的异常都交由 调用者去处理他的异常
</code></pre>
<p>复制代码
JDBCUtils 第三遍重写：</p>
<ul>
<li>
<p>@time      2015年2月19日下午10:21:46</p>
</li>
<li>
<pre><code>           10:40  结束      19min
</code></pre>
<ul>
<li>书写第四遍的时候  遇到一个问题 在executeUpdate的时候  是不是改在
*  try&hellip;finally   的try块就应该返回了 而不是finally的后面
*  如果在后面 肯定是错误的！！！因为资源已经关闭
复制代码
JDBCUtils 第四遍重写：</li>
</ul>
</li>
<li>
<p>@time      2015年2月19日下午10:41:37</p>
</li>
<li>
<pre><code>                   10:55     14min
</code></pre>
</li>
</ul>
    </div>
 <div class="nav-links" style="padding:10;">
        
        <div align="left">
        <a href="https://jueqingsizhe66.github.io/blog/2015/05/11/2yue-1ri-javaban-bi-ji-zuo-ye/"><span class="arrow">←</span> <strong>上一篇:2月1日Java班笔记作业</strong></a>
        </div>
        
        


       <div align="right"> <a href="https://jueqingsizhe66.github.io/blog/2015/05/11/html1-17jie-bi-ji-dai-ma-march22nd/" ><strong>下一篇:HTML1-17节笔记代码March22nd </strong><span class="arrow">→</span></a></div>
        
      </div>
    





<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/mysql/">Mysql</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://jueqingsizhe66.github.io/blog/2015/05/11/2yue-14ri-javaban-mysql/&amp;text=2%e6%9c%8814%e6%97%a5Java%e7%8f%admysql" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://jueqingsizhe66.github.io/blog/2015/05/11/2yue-14ri-javaban-mysql/&amp;t=2%e6%9c%8814%e6%97%a5Java%e7%8f%admysql" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=2%e6%9c%8814%e6%97%a5Java%e7%8f%admysql&amp;body=https://jueqingsizhe66.github.io/blog/2015/05/11/2yue-14ri-javaban-mysql/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://jueqingsizhe66.github.io/blog/2015/05/11/2yue-14ri-javaban-mysql/&amp;title=2%e6%9c%8814%e6%97%a5Java%e7%8f%admysql" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=2%e6%9c%8814%e6%97%a5Java%e7%8f%admysql%20https://jueqingsizhe66.github.io/blog/2015/05/11/2yue-14ri-javaban-mysql/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://jueqingsizhe66.github.io/blog/2015/05/11/2yue-14ri-javaban-mysql/&amp;title=2%e6%9c%8814%e6%97%a5Java%e7%8f%admysql" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  






  
  
  
    
  
  
  <div class="media author-card content-widget-hr">
    
      
      <img class="portrait mr-3" src="/authors/admin/avatar_hu52a603635ecebd45650b162dadabb4e5_12861_250x250_fill_q90_lanczos_center.jpg" alt="Avatar">
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://jueqingsizhe66.github.io/">Ye Zhaoliang</a></h5>
      <h6 class="card-subtitle">Engineer of offshore wind turbine technique research</h6>
      <p class="card-text">My research interests include distributed energy, wind turbine power generation technique , Computational fluid dynamic and programmable matter.</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/jueqingsizhe66" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.co.uk/citations?user=7VyEMyQAAAAJ&amp;hl=zh-CN" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/jueqingsizhe66" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>









  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/blog/2015/05/11/2yue-1ri-javaban-bi-ji-zuo-ye/">2月1日Java班笔记作业</a></li>
      
      <li><a href="/blog/2015/05/11/2yue-27ri-javazhou-mo-ban-shi-ti/">2月27日Java周末班试题</a></li>
      
      <li><a href="/blog/2015/05/11/2yue-4ri-javaban-gtk/">2月4日Java班GTK</a></li>
      
      <li><a href="/blog/2015/05/11/3yue-21ri-javazhou-mo-ban-shi-ti-shou-ji/">3月21日Java周末班试题收集</a></li>
      
      <li><a href="/blog/2015/05/11/1yue-25ri-javaban-bi-ji-shi-ti/">1月25日Java班笔记试题</a></li>
      
    </ul>


         <span id="busuanzi_container_site_pv"> 
             本站访问量：<span id="busuanzi_value_site_pv"></span>次 
         </span> 
         &nbsp; 
   </div> 


  </div>

</article>
<script src="https://utteranc.es/client.js"
        repo="jueqingsizhe66/jueqingsizhe66.github.io"
        issue-term="pathname"
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script>

      

    
    
    
    <script src="/js/mathjax-config.js"></script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/go.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/vim.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/matlab.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/sql.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/python.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/c.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/scheme.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/racket.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/perl.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/awk.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/clojure.min.js"></script>
        
      

      
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin="anonymous" async></script>
      
    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.js" integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log==" crossorigin="anonymous"></script>
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.d6bd04fdad2ad213aa8111c5a3b72fc5.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    ©2020 &middot; 

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
