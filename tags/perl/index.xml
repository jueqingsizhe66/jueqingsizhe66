<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>perl | Macro Life</title>
    <link>https://jueqingsizhe66.github.io/tags/perl/</link>
      <atom:link href="https://jueqingsizhe66.github.io/tags/perl/index.xml" rel="self" type="application/rss+xml" />
    <description>perl</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>©2019</copyright><lastBuildDate>Sun, 10 Nov 2019 00:20:00 +0800</lastBuildDate>
    <image>
      <url>https://jueqingsizhe66.github.io/img/icon-192.png</url>
      <title>perl</title>
      <link>https://jueqingsizhe66.github.io/tags/perl/</link>
    </image>
    
    <item>
      <title>perl批量工作机器程序</title>
      <link>https://jueqingsizhe66.github.io/post/perl%E6%89%B9%E9%87%8F%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%99%A8%E7%A8%8B%E5%BA%8F/</link>
      <pubDate>Sun, 10 Nov 2019 00:20:00 +0800</pubDate>
      <guid>https://jueqingsizhe66.github.io/post/perl%E6%89%B9%E9%87%8F%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%99%A8%E7%A8%8B%E5%BA%8F/</guid>
      <description>

&lt;h2 id=&#34;背景分析&#34;&gt;背景分析&lt;/h2&gt;

&lt;p&gt;很多时候，我们需要执行一条命令比如`batchFluent.bat`, `cfdpost -batch \*.cse`, `fluent 3d -i batchFluent2000`等， 在执行该命令时候，我们需要打开
cmd或者terminal，然后切换到对应脚本目录，拷贝相应脚本需要的程序，甚是麻烦，可否把这个过程程序化？&lt;/p&gt;

&lt;h2 id=&#34;单个文件处理&#34;&gt;单个文件处理&lt;/h2&gt;

&lt;h3 id=&#34;管道1-转换openfoam结果为msh和dat&#34;&gt;管道1: 转换Openfoam结果为msh和dat&lt;/h3&gt;

&lt;p&gt;通过下面的程序得到一个项目文件相关的msh, 比如YangJiang ,就会得到YangJiang.msh以及YangJiang.dat等， 也就是升华技术，可提取一个技术变量，projectName=&amp;ldquo;YangJiang&amp;rdquo;&lt;/p&gt;

&lt;p&gt;batchFluent.bat(不需要修改!)&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;rem 路径相应修改为电脑上的安装文件夹路径
set OPENFOAM_WIN_DIR&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;D:/Program Files &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;x86&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;/AIWind/solver/OpenFOAMv18.06
set WM_PROJECT_DIR&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;%OPENFOAM_WIN_DIR%
set PATH&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;%OPENFOAM_WIN_DIR%&lt;span style=&#34;color:#ae81ff&#34;&gt;\b&lt;/span&gt;in;%OPENFOAM_WIN_DIR%&lt;span style=&#34;color:#ae81ff&#34;&gt;\b&lt;/span&gt;in/mpi;%OPENFOAM_WIN_DIR%&lt;span style=&#34;color:#ae81ff&#34;&gt;\l&lt;/span&gt;ib;
set MPI_BUFFER_SIZE&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;20000000&lt;/span&gt;
rem 将foamDataToFluentDict放入算例&lt;span style=&#34;color:#ae81ff&#34;&gt;\n&lt;/span&gt;oTurbine&lt;span style=&#34;color:#ae81ff&#34;&gt;\1&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;.00&lt;span style=&#34;color:#ae81ff&#34;&gt;\0\k&lt;/span&gt;h&lt;span style=&#34;color:#ae81ff&#34;&gt;\s&lt;/span&gt;ystem
rem 转换网格
foamMeshToFluent
rem 转换数据
foamDataToFluent&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;system/foamdatatofluentdict(不需要修改)&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;FoamFile
&lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;
  version     &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;.0;
  format      ascii;
  note        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OpenFOAM to Fluent interface control dictionary&amp;#34;&lt;/span&gt;;
  class       dictionary;
  object      foamDataToFluentDict;
&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;

p               &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;
U               &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;;
//T               &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;;//
//h               &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;;//
k               &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;;
epsilon         &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;;
//alpha1          &lt;span style=&#34;color:#ae81ff&#34;&gt;150&lt;/span&gt;;//&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&#34;管道2-转换msh和dat为fluent的cas-and-dat--需要修改&#34;&gt;管道2: 转换msh和dat为fluent的cas and dat(需要修改)&lt;/h3&gt;

&lt;p&gt;YangJiang.msh 和 YangJiang2000.dat和 YangJiang20001.cas得适配，应需进行修正，把这个升级为&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;cx-gui-do cx-activate-item &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;MenuBar*ReadSubMenu*Mesh...&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;cx-gui-do cx-set-file-dialog-entries &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Select File&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;( &amp;#34;YangJiang.msh&amp;#34;) &amp;#34;Mesh Files (*.msh* *.MSH* )&amp;#34;)
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;(cx-gui-do cx-activate-item &amp;#34;MenuBar*ReadSubMenu*Data...&amp;#34;)
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;(cx-gui-do cx-set-file-dialog-entries &amp;#34;Select File&amp;#34; &amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;YangJiang2000.dat&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Data Files (*.dat* *.pdat* )&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;cx-gui-do cx-activate-item &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;MenuBar*WriteSubMenu*Case &amp;amp; Data...&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;cx-gui-do cx-set-file-dialog-entries &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Select File&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;YangJiang20001.cas&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Case/Data Files (*.cas* *.pdat* )&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;cx-gui-do cx-activate-item &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;MenuBar*WriteSubMenu*Stop Journal&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;cx-gui-do cx-activate-item &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;MenuBar*FileMenu*Exit&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;运行方式为 `fluent 3d -i batchFluent2000`&lt;/p&gt;

&lt;p&gt;由此可得到YangJiang20001.cas和YangJiang20001.dat&lt;/p&gt;

&lt;h3 id=&#34;管道3-提取post结果--需要修改-修改一次-然后进行循环即可&#34;&gt;管道3: 提取post结果(需要修改, 修改一次，然后进行循环即可)&lt;/h3&gt;

&lt;p&gt;然后针对cas和dat进行线信息提取即可&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;!@processDir&lt;span style=&#34;color:#f92672&#34;&gt;=(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\AIwind\\AIWindCases\\Dongping20191105\\noTurbine\\10.00\\0\\YangJiang\\fluentInterface&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;;

&lt;span style=&#34;color:#75715e&#34;&gt;################################################&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;## 文件过滤设置&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;################################################&lt;/span&gt;


!$length&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;@processDir; &lt;span style=&#34;color:#75715e&#34;&gt;#get the length of the processDir array&lt;/span&gt;
!for&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;$count&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;$count&amp;lt;$length;$count++&lt;span style=&#34;color:#f92672&#34;&gt;){&lt;/span&gt;

  !$pathDir &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; $processDir&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;$count&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;;
  &lt;span style=&#34;color:#75715e&#34;&gt;#!$file = &amp;#34;huailai20m220001.dat&amp;#34;; ## for 814w and 1425w&lt;/span&gt;
  !$file &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;YangJiang20001.dat&amp;#34;&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;## for 325w&lt;/span&gt;
  !$currentFilename &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;pathDir&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;//&lt;/span&gt;$file&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;;

  &lt;span style=&#34;color:#75715e&#34;&gt;###   Create output directory&lt;/span&gt;
  !$outputLine&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;forLinesOutput0&amp;#34;&lt;/span&gt;;
  !$outputLineDir&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;pathDir&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;//&lt;/span&gt;$outputLine&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;;
  !if&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;! -e $outputLineDir&lt;span style=&#34;color:#f92672&#34;&gt;){&lt;/span&gt;
    !mkdir $outputLineDir;
    !print &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$outputLineDir&lt;span style=&#34;color:#e6db74&#34;&gt; create successfully!&amp;#34;&lt;/span&gt;;
    !&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&#34;技术分解1-批量后处理openfoam结果到dat格式&#34;&gt;技术分解1&amp;mdash;- 批量后处理Openfoam结果到dat格式&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;准备文件&lt;/li&gt;
&lt;li&gt;链接目录，切换到脚本目录，执行脚本&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;技术实现1&#34;&gt;技术实现1&lt;/h2&gt;

&lt;h3 id=&#34;基础版本--初始版本&#34;&gt;基础版本(初始版本)&lt;/h3&gt;

&lt;p&gt;事先拷贝好需要的文件放在指定位置处,使用system运行系统命令即可&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#!/usr/bin/env perl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#===============================================================================&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#         FILE: batchProcess814w.pl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#        USAGE: ./batchProcess814w.pl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#  DESCRIPTION:&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      OPTIONS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# REQUIREMENTS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#         BUGS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#        NOTES: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#       AUTHOR: YOUR NAME (),&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# ORGANIZATION:&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      VERSION: 1.0&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      CREATED: 2019/9/24 1149&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#     REVISION: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#===============================================================================&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; strict;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; warnings;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; utf8;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; Cwd;

&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $directory   &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\huaiiLaiPP\\AIWindProject1\\noTurbine\\10.00\\&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialDirSign&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;22.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;45&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;67.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;90&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;112.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;135&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;157.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;180&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;202.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;225&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;247.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;270&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;292.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;315&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;337.5&lt;/span&gt;];


&lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $name ( @$specialDirSign ) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $tempdirectory&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;sprintf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$directory\\$name\\huailai20m2\\&amp;#34;&lt;/span&gt;);
    &lt;span style=&#34;color:#75715e&#34;&gt;#my  $tempBatchFile=sprintf(&amp;#34;$directory\\$name\\huailai20m2\\batchFluent.bat&amp;#34;);&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\n&amp;#34;&lt;/span&gt;;
    chdir($tempdirectory);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $mypath&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;getcwd();
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; Temp Director: -----------&amp;gt; $mypath\n&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#75715e&#34;&gt;#system($tempBatchFile)&lt;/span&gt;
    system(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;batchFluent.bat&amp;#34;&lt;/span&gt;)
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&#34;高级版本&#34;&gt;高级版本&lt;/h3&gt;

&lt;p&gt;让程序在指定的位置自己拷贝需要的文件, 采用&amp;lt;:Copy函数&amp;gt;&lt;/p&gt;

&lt;p&gt;根据目录结构可以进行对应修改&lt;/p&gt;

&lt;h4 id=&#34;下面针对的是不同风速-相同扇区-0扇区-的结果&#34;&gt;下面针对的是不同风速，相同扇区【0扇区】的结果&lt;/h4&gt;

&lt;ol&gt;
&lt;li&gt;规律：找到noturbine文件夹&lt;/li&gt;
&lt;li&gt;规律：找到项目文件名kh, yandun,YangJiang等&lt;/li&gt;
&lt;/ol&gt;

&lt;!--listend--&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#!/usr/bin/env perl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#===============================================================================&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#         FILE: batchProcess814w.pl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#        USAGE: ./batchProcess814w.pl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#  DESCRIPTION:&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      OPTIONS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# REQUIREMENTS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#         BUGS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#        NOTES: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#       AUTHOR: YOUR NAME (),&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# ORGANIZATION:&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      VERSION: 1.0&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      CREATED: 2019/9/24 1149&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#     REVISION: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#===============================================================================&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; strict;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; warnings;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; utf8;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; Cwd;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; File::Copy;

&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $directory   &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\NewCosMount\\noTurbine\\&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialDirSign&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;6.00&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;7.00&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;8.00&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;9.00&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;10.00&amp;#34;&lt;/span&gt;];

&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $sourceFileDirs&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\NewCosMount\\noTurbine\\batChProcess\\&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $targetFileSign1&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;foamDataToFluentDict&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $targetFileSign2&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;batchFluent.bat&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $name ( @$specialDirSign ) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $tempdirectory&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;sprintf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$directory\\$name\\0\\kh\\&amp;#34;&lt;/span&gt;);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\n&amp;#34;&lt;/span&gt;;
    chdir($tempdirectory);

    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $mypath&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;getcwd();
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $dictFile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory//system//$targetFileSign1&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $batchFile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory//$targetFileSign2&amp;#34;&lt;/span&gt;;
    copy(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$sourceFileDirs\\$targetFileSign1&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$dictFile&amp;#34;&lt;/span&gt;);

    copy(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$sourceFileDirs\\$targetFileSign2&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$batchFile&amp;#34;&lt;/span&gt;);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; Temp Director: -----------&amp;gt; $mypath\n&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#75715e&#34;&gt;#system($tempBatchFile)&lt;/span&gt;
    system(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;batchFluent.bat&amp;#34;&lt;/span&gt;)
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&#34;相同风速-不同扇区的结果&#34;&gt;相同风速，不同扇区的结果&lt;/h4&gt;

&lt;ol&gt;
&lt;li&gt;找到noTurbine文件夹&lt;/li&gt;
&lt;/ol&gt;

&lt;!--listend--&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;#!/usr/bin/env perl&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#===============================================================================&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#         FILE: batchProcessHuailai814w.pl&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#        USAGE: ./batchProcessHuailai814w.pl&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#  DESCRIPTION:&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#      OPTIONS: ---&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# REQUIREMENTS: ---&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#         BUGS: ---&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#        NOTES: ---&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#       AUTHOR: YOUR NAME (),&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# ORGANIZATION:&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#      VERSION: 1.0&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#      CREATED: 2019/11/7 1843&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#     REVISION: ---&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#===============================================================================&lt;/span&gt;

  &lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; strict;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; warnings;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; utf8;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; Cwd;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; File::Copy;

  &lt;span style=&#34;color:#75715e&#34;&gt;#my  $directory   = &amp;#34;&amp;#34;;&lt;/span&gt;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $directory   &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\YanDun20191106\\yuandun\\noTurbine\\&amp;#34;&lt;/span&gt;;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialDirSign&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;22.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;45&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;67.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;90&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;112.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;135&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;157.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;180&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;202.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;225&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;247.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;270&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;292.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;315&lt;/span&gt;];

  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $sourceFileDirs&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\huaiiLaiPP\\NewSolverLimit10e9KE\\noTurbine\\10.00\\0\\huailai20m2\\&amp;#34;&lt;/span&gt;;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $targetFileSign1&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;foamDataToFluentDict&amp;#34;&lt;/span&gt;;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $targetFileSign2&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;batchFluent.bat&amp;#34;&lt;/span&gt;;

  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $projectVelocity&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;10.00&amp;#39;&lt;/span&gt;;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $projectName&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;yandun&amp;#34;&lt;/span&gt;;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $name ( @$specialDirSign ) {
      &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $tempdirectory&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;sprintf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$directory\\$projectVelocity\\$name\\$projectName\\&amp;#34;&lt;/span&gt;);
      &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\n&amp;#34;&lt;/span&gt;;
      chdir($tempdirectory);

      &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $mypath&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;getcwd();
      &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; Temp Director: -----------&amp;gt; $mypath\n&amp;#34;&lt;/span&gt;;
      &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $dictFile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory//system//$targetFileSign1&amp;#34;&lt;/span&gt;;
      &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $batchFile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory//$targetFileSign2&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#75715e&#34;&gt;## bug 修复！&lt;/span&gt;
      copy(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$sourceFileDirs\\system\\$targetFileSign1&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$dictFile&amp;#34;&lt;/span&gt;);

      copy(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$sourceFileDirs\\$targetFileSign2&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$batchFile&amp;#34;&lt;/span&gt;);
      &lt;span style=&#34;color:#75715e&#34;&gt;#system($tempBatchFile)&lt;/span&gt;
      system(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;batchFluent.bat&amp;#34;&lt;/span&gt;);
  }&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&#34;技术分解2-批量处理dat文件到post格式&#34;&gt;技术分解2&amp;mdash;-批量处理dat文件到post格式&lt;/h2&gt;

&lt;p&gt;需要执行fluent的journal命令核心是fluent脚本&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;读入msh&lt;/li&gt;
&lt;li&gt;读入dat&lt;/li&gt;
&lt;li&gt;保存cas &amp;amp; dat
具体文件需要修改msh和dat前缀&lt;/li&gt;
&lt;/ol&gt;

&lt;!--listend--&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;(cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;gui&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt; cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;activate&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;item &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;MenuBar*ReadSubMenu*Mesh...&amp;#34;&lt;/span&gt;)
(cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;gui&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt; cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;set&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;file&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;dialog&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;entries &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Select File&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;( &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;huailai20m2.msh&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Mesh Files (*.msh* *.MSH* )&amp;#34;&lt;/span&gt;)
  (cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;gui&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt; cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;activate&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;item &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;MenuBar*ReadSubMenu*Data...&amp;#34;&lt;/span&gt;)
  (cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;gui&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt; cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;set&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;file&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;dialog&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;entries &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Select File&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;( &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;huailai20m22000.dat&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Data Files (*.dat* *.pdat* )&amp;#34;&lt;/span&gt;)
  (cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;gui&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt; cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;activate&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;item &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;MenuBar*WriteSubMenu*Case &amp;amp; Data...&amp;#34;&lt;/span&gt;)
  (cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;gui&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt; cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;set&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;file&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;dialog&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;entries &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Select File&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;( &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;huailai20m220001.cas&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Case/Data Files (*.cas* *.pdat* )&amp;#34;&lt;/span&gt;)
  (cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;gui&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt; cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;activate&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;item &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;MenuBar*WriteSubMenu*Stop Journal&amp;#34;&lt;/span&gt;)
  (cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;gui&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt; cx&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;activate&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;item &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;MenuBar*FileMenu*Exit&amp;#34;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;核心命令： `fluent 3d -i batchFluent2000`&lt;/p&gt;

&lt;h2 id=&#34;技术实现2&#34;&gt;技术实现2&lt;/h2&gt;

&lt;h3 id=&#34;相同风速下-不同扇区处理&#34;&gt;相同风速下，不同扇区处理&lt;/h3&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#!/usr/bin/env perl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#===============================================================================&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#         FILE: journalTransferAIWINDTOFluentCasDat814w.pl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#        USAGE: ./journalTransferAIWINDTOFluentCasDat814w.pl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#  DESCRIPTION:&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      OPTIONS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# REQUIREMENTS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#         BUGS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#        NOTES: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#       AUTHOR: YOUR NAME (),&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# ORGANIZATION:&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      VERSION: 1.0&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      CREATED: 2019/9/27 1535&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#     REVISION: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#===============================================================================&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; strict;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; warnings;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; utf8;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; Cwd;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; File::Copy;

&lt;span style=&#34;color:#75715e&#34;&gt;#my  $directory   = &amp;#34;D:\\huaiLaiUnder\\huaiLaiNew20190722\\huaiLaiNew20190722\\noTurbine\\10.00\\&amp;#34;;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $directory &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\huaiiLaiPP\\AIWindProject1\\noTurbine\\10.00\\&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#75715e&#34;&gt;#my  $specialDirSign=[0,22.5,45,67.5,90,112.5,135,157.5,180,202.5,225,247.5,270,292.5,315,337.5];&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#my  $specialDirSign=[0,45,135,270,292.5];&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $sourceFluentBatchFile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\huaiLaiUnder\\huaiLaiNew20190722\\huaiLaiNew20190722\\noTurbine\\10.00\\90\\huailai20m2\\fluentInterface\\batchFluent2000&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $name ( @$specialDirSign ) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $tempdirectory&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;sprintf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$directory\\$name\\huailai20m2\\fluentInterface\\&amp;#34;&lt;/span&gt;);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $destinationFile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\\batchFluent2000&amp;#34;&lt;/span&gt;;

    copy($sourceFluentBatchFile,$destinationFile) &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; die &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Copy failed: $!&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#75715e&#34;&gt;#my  $tempBatchFile=sprintf(&amp;#34;$directory\\$name\\huailai20m2\\batchFluent.bat&amp;#34;);&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\n&amp;#34;&lt;/span&gt;;
    chdir($tempdirectory);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $mypath&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;getcwd();
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; Temp Director: -----------&amp;gt; $mypath\n&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#75715e&#34;&gt;#system($tempBatchFile)&lt;/span&gt;
    system(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fluent 3d -i batchFluent2000&amp;#34;&lt;/span&gt;);
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&#34;快速格式化项目的batchfluent2000&#34;&gt;快速格式化项目的batchFluent2000&lt;/h3&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; strict;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; warnings;

&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; File::Slurp &lt;span style=&#34;color:#e6db74&#34;&gt;qw(read_file write_file)&lt;/span&gt;;
&lt;span style=&#34;color:#75715e&#34;&gt;#open(FEIJI,&amp;#34;C:\\Users\\yezhaoliang\\Desktop\\probe.cse&amp;#34;) or die &amp;#34;can&amp;#39;t open the file \n&amp;#34;;&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#my $car =&amp;#34;@lidarX1&amp;#34;;&lt;/span&gt;


&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $filename &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:\\Users\\yezhaoliang\\Desktop\\batchFluent2000&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $projectOld&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;huailai20m2&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $projectNew&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;YangJiang&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; read_file $filename, {binmode &lt;span style=&#34;color:#f92672&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;utf8&amp;#39;&lt;/span&gt;};
&lt;span style=&#34;color:#75715e&#34;&gt;## 文件内容替换---- 也可以用IO:All-&amp;gt;slurp函数&lt;/span&gt;

$data &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/$projectOld/$projectNew/g&lt;/span&gt;;
&lt;span style=&#34;color:#75715e&#34;&gt;## 删除掉^M&lt;/span&gt;
$data &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/\r//g&lt;/span&gt;;
write_file $filename, {binmode &lt;span style=&#34;color:#f92672&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;:utf8&amp;#39;&lt;/span&gt;},$data;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&#34;技术升维&#34;&gt;技术升维&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;思考目录结构&lt;/li&gt;
&lt;li&gt;思考要执行命令&lt;/li&gt;
&lt;li&gt;思考命令执行的内容&amp;mdash;可升级对应文件内容的修改&lt;/li&gt;
&lt;li&gt;一个可以生成你需要的可执行程序，并具备普适性!Macro programming&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;附录&#34;&gt;附录&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/lxp90/article/details/76228104&#34; target=&#34;_blank&#34;&gt;perl单行替换文件内容&lt;/a&gt;(先temp，然后rename到原始文件名，删除temp备份)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/blog%5Fabel/article/details/40589227&#34; target=&#34;_blank&#34;&gt;perl s替换&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cn.perlmaven.com/how-to-replace-a-string-in-a-file-with-perl&#34; target=&#34;_blank&#34;&gt;perl slurp&lt;/a&gt;(输入s命令到slurp中，执行！ `cpanm &amp;lt;:Slurp&amp;gt;`)&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;:Slurphttps://metacpan.org/pod/File&#34; target=&#34;_blank&#34;&gt;File::Slurp&lt;/a&gt; edit_file command file&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; File::Slurp &lt;span style=&#34;color:#e6db74&#34;&gt;qw(edit_file)&lt;/span&gt;;
    &lt;span style=&#34;color:#75715e&#34;&gt;# perl -0777 -pi -e &amp;#39;s/foo/bar/g&amp;#39; /path/file&lt;/span&gt;
    edit_file { &lt;span style=&#34;color:#e6db74&#34;&gt;s/foo/bar/g&lt;/span&gt; } &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/path/file&amp;#39;&lt;/span&gt;;
    edit_file &lt;span style=&#34;color:#66d9ef&#34;&gt;sub&lt;/span&gt; { &lt;span style=&#34;color:#e6db74&#34;&gt;s/foo/bar/g&lt;/span&gt; }, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/path/file&amp;#39;&lt;/span&gt;;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;sub&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;replace_foo&lt;/span&gt; { &lt;span style=&#34;color:#e6db74&#34;&gt;s/foo/bar/g&lt;/span&gt; }
    edit_file &lt;span style=&#34;color:#f92672&#34;&gt;\&amp;amp;&lt;/span&gt;replace_foo, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/path/file&amp;#39;&lt;/span&gt;;
    &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://blogs.perl.org/users/leon%5Ftimmermans/2015/08/fileslurp-is-broken-and-wrong.html&#34; target=&#34;_blank&#34;&gt;perl slurp bugs and unmaintained&lt;/a&gt;  可以选用Slurper, &lt;a href=&#34;https://metacpan.org/pod/Path::Tiny&#34; target=&#34;_blank&#34;&gt;Path:Tiny&lt;/a&gt;  or &lt;a href=&#34;https://metacpan.org/pod/IO::All&#34; target=&#34;_blank&#34;&gt;Io:ALL&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;path::Tiny   `path(&amp;ldquo;foo.txt&amp;rdquo;)-&amp;gt;move(&amp;ldquo;bar.txt&amp;rdquo;);`&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;简单处理&lt;a href=&#34;https://www.perl.com/pub/2004/03/12/ioall.html/&#34; target=&#34;_blank&#34;&gt;IO::All&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;虽然slurp废弃了，但发现依然不错文件内容单行处理，所以无法循环，没有if判断等。但可以执行批处理，而IO:All使用
`my $line = $io-&amp;gt;getline` ,其实使用内置的函数即可`while(&amp;lt;$fh&amp;gt;)`即可&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;         &lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; strict;
         &lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; warnings;
         &lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; File::Slurp &lt;span style=&#34;color:#e6db74&#34;&gt;qw(read_file write_file)&lt;/span&gt;;
         &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $filename &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:\\Users\\yezhaoliang\\Desktop\\probe.cse&amp;#34;&lt;/span&gt;;

    &lt;span style=&#34;color:#75715e&#34;&gt;##gbk or gb2312&lt;/span&gt;
         &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; read_file $filename, {binmode &lt;span style=&#34;color:#f92672&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;gbk&amp;#39;&lt;/span&gt;};
         &lt;span style=&#34;color:#75715e&#34;&gt;## 文件内容替换---- 也可以用IO:All-&amp;gt;slurp函数&lt;/span&gt;
         $data &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/风廓线/小心了/g&lt;/span&gt;;
         &lt;span style=&#34;color:#75715e&#34;&gt;## 删除掉^M&lt;/span&gt;
         $data &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/\r//g&lt;/span&gt;;
         write_file $filename, {binmode &lt;span style=&#34;color:#f92672&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;:gbk&amp;#39;&lt;/span&gt;},$data;
    &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;英文替换&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; strict;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; warnings;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; File::Slurp &lt;span style=&#34;color:#e6db74&#34;&gt;qw(read_file write_file)&lt;/span&gt;;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $filename &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:\\Users\\yezhaoliang\\Desktop\\probe.cse&amp;#34;&lt;/span&gt;;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; read_file $filename, {binmode &lt;span style=&#34;color:#f92672&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;utf8&amp;#39;&lt;/span&gt;};
    &lt;span style=&#34;color:#75715e&#34;&gt;## 文件内容替换---- 也可以用IO:All-&amp;gt;slurp函数&lt;/span&gt;
    $data &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/lidar/Leida/g&lt;/span&gt;;
    &lt;span style=&#34;color:#75715e&#34;&gt;## 删除掉^M&lt;/span&gt;
    $data &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/\r//g&lt;/span&gt;;
    write_file $filename, {binmode &lt;span style=&#34;color:#f92672&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;:utf8&amp;#39;&lt;/span&gt;},$data;
    &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;回归到原始程序，只用内置函数&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;    open(F1,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;lt;test.txt&amp;#39;&lt;/span&gt;);
    open(F2,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;test.txt.tmp&amp;#39;&lt;/span&gt;);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; ($s&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;F1&amp;gt;&lt;/span&gt;){
        $s &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/1234/ABCD/g&lt;/span&gt;;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; F2, $s;
    }
    close(F2);
    close(F1);

    unlink(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;test.txt&amp;#39;&lt;/span&gt;);
    rename(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;test.txt.tmp&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;test.txt&amp;#39;&lt;/span&gt;);
    &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;其实外置、内置的思路都是open、循环、删除、重命名的过程这样还可以不断拓展，增加判断等。&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;elisp通过defmacro生成一个&lt;a href=&#34;https://emacs-china.org/t/elisp/11023/3&#34; target=&#34;_blank&#34;&gt; 临时的defvar、defun &lt;/a&gt;等,即生成一个新的状态或者worker&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-elisp&#34;&gt;(defmacro defvar/os (name &amp;amp;rest args)
`(defvar ,name
 (pcase system-type
   ,@(mapcar (lambda (x)
               (let ((a (car x))
                     (b (cadr x)))
                 `(,(ecase a
                      (:windows &#39;&#39;windows-nt)
                      (:macos &#39;&#39;darwin))
                   ,b)))
               (-partition-all 2 args)))))
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;增强版的自定义功能&#34;&gt;增强版的自定义功能&lt;/h3&gt;

&lt;p&gt;如果遇到某种条件下的文件则执行对应的修正&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; strict;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; warnings;


&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;	$input_file_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;qw&amp;#34;c:\users\yezhaoliang\desktop\probe1.cse&amp;#34;&lt;/span&gt;;

open  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $input, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;lt;&amp;#39;&lt;/span&gt;, $input_file_name
    &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; die  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to open  input file &amp;#39;$input_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;


&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;	$output_file_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;qw&amp;#34;c:\users\yezhaoliang\desktop\probe2.cse&amp;#34;&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;# output file name&lt;/span&gt;

open  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $output, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;&amp;#39;&lt;/span&gt;, $output_file_name
    &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; die  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to open  output file &amp;#39;$output_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;


&lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $line&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;$input&amp;gt;&lt;/span&gt;){

    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (  $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;m/(^!\@processDir=)/xm&lt;/span&gt;) {
        $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/(^!\@processDir=)/$1She/g&lt;/span&gt;;
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;elsif&lt;/span&gt; (   $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;m/(^!\$file\s=\s&amp;#34;(.*)&amp;#34;)/xm&lt;/span&gt; ) {
        $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/$2/hello.dat/g&lt;/span&gt;;
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $output $line;
}


close  $output
    &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; warn &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to close output file &amp;#39;$output_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;
close  $input
    &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; warn &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to close input file &amp;#39;$input_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&#34;案例1-批量修改batchfluent2000-替换-然后执行-完美版&#34;&gt;案例1：批量修改batchFluent2000、替换 然后执行【完美版】&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;修改&lt;/li&gt;
&lt;li&gt;执行&lt;/li&gt;
&lt;/ol&gt;

&lt;!--listend--&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; strict;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; warnings;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; utf8;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; Cwd;

&lt;span style=&#34;color:#75715e&#34;&gt;#my  $directory   = &amp;#34;D:\\huaiLaiUnder\\huaiLaiNew20190722\\huaiLaiNew20190722\\noTurbine\\10.00\\&amp;#34;;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $directory &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\AIwind\\AIWindCases\\Dongping20191105\\noTurbine\\10.00&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#75715e&#34;&gt;#my  $specialDirSign=[0,22.5,45,67.5,90,112.5,135,157.5,180,202.5,225,247.5,270,292.5,315,337.5];&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialDirSign&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;22.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;45&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;67.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;90&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;112.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;135&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;157.5&lt;/span&gt;];
&lt;span style=&#34;color:#75715e&#34;&gt;#my  $specialDirSign=[0,45,135,270,292.5];&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $sourceFluentBatchFile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\AIwind\\AIWindCases\\Dongping20191105\\noTurbine\\10.00\\0\\YangJiang\\fluentInterface\\batchFluent2000&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $oldProjectName&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Huailai20m2&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $projectName&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;YangJiang&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $name ( @$specialDirSign ) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $tempdirectory&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;sprintf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$directory\\$name\\$projectName\\fluentInterface\\&amp;#34;&lt;/span&gt;);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $destinationFile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\\batchFluent2000&amp;#34;&lt;/span&gt;;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;	$input_file_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; $sourceFluentBatchFile;
    open  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $input, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;lt;&amp;#39;&lt;/span&gt;, $input_file_name
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; die  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to open  input file &amp;#39;$input_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;	$output_file_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sprintf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\\batchFluent2000&amp;#34;&lt;/span&gt;); &lt;span style=&#34;color:#75715e&#34;&gt;# output file name&lt;/span&gt;
    open  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $output, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;&amp;#39;&lt;/span&gt;, $output_file_name
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; die  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to open  output file &amp;#39;$output_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $line&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;$input&amp;gt;&lt;/span&gt;){

        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ( $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;m/$oldProjectName/xm&lt;/span&gt;) {
            &lt;span style=&#34;color:#75715e&#34;&gt;## 要求1&lt;/span&gt;
            $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/$oldProjectName/$projectName/gm&lt;/span&gt;
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $output $line;
    }

    close  $output
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; warn &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to close output file &amp;#39;$output_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;
    close  $input
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; warn &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to close input file &amp;#39;$input_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;


    &lt;span style=&#34;color:#75715e&#34;&gt;#copy($sourceFluentBatchFile,$destinationFile) or die &amp;#34;Copy failed: $!&amp;#34;;&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;#my  $tempBatchFile=sprintf(&amp;#34;$directory\\$name\\huailai20m2\\batchFluent.bat&amp;#34;);&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\n&amp;#34;&lt;/span&gt;;
    chdir($tempdirectory);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $mypath&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;getcwd();
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; Temp Director: -----------&amp;gt; $mypath\n&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#75715e&#34;&gt;#system($tempBatchFile)&lt;/span&gt;
    system(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fluent 3d -i batchFluent2000&amp;#34;&lt;/span&gt;);
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&#34;案例2-批量修改probelinesandexport-dot-cse-替换-然后执行-完美版&#34;&gt;案例2：批量修改probelinesAndexport.cse、替换 然后执行【完美版】&lt;/h3&gt;

&lt;p&gt;原先是使用copy命令，现在完全用perl程序，控制不同扇区或者速度的修正，并更新到对应文件后，写入到具体目录， 最终执行即可!&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;修改&lt;/li&gt;
&lt;li&gt;执行&lt;/li&gt;
&lt;/ol&gt;

&lt;!--listend--&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; strict;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; warnings;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; Cwd;

&lt;span style=&#34;color:#75715e&#34;&gt;#my  $directory   = &amp;#34;D:\\huaiLaiUnder\\huaiLaiNew20190722\\huaiLaiNew20190722\\noTurbine\\10.00\\&amp;#34;;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $directory &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\AIwind\\AIWindCases\\Dongping20191105\\noTurbine\\10.00&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#75715e&#34;&gt;#my  $specialDirSign=[0,22.5,45,67.5,90,112.5,135,157.5,180,202.5,225,247.5,270,292.5,315,337.5];&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialDirSign&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;22.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;45&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;67.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;90&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;112.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;135&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;157.5&lt;/span&gt;];
&lt;span style=&#34;color:#75715e&#34;&gt;#my  $specialDirSign=[0,45,135,270,292.5];&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $projectName&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;YangJiang&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $sourceFluentBatchFile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\AIwind\\AIWindCases\\Dongping20191105\\noTurbine\\10.00\\0\\YangJiang\\fluentInterface\\probeLinesAndExportYangJiang.cse&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $Sectorname ( @$specialDirSign ) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $tempdirectory&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;sprintf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$directory\\$Sectorname\\$projectName\\fluentInterface\\&amp;#34;&lt;/span&gt;);

    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;	$input_file_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; $sourceFluentBatchFile;
    open  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $input, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;lt;&amp;#39;&lt;/span&gt;, $input_file_name
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; die  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to open  input file &amp;#39;$input_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;	$output_file_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sprintf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\\probelinesAndExport.cse&amp;#34;&lt;/span&gt;); &lt;span style=&#34;color:#75715e&#34;&gt;# output file name&lt;/span&gt;
    open  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $output, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;&amp;#39;&lt;/span&gt;, $output_file_name
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; die  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to open  output file &amp;#39;$output_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $line&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;$input&amp;gt;&lt;/span&gt;){

        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ( $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;m/(^!\@processDir=\(&amp;#34;(.*)&amp;#34;\))/xm&lt;/span&gt;) {
            $line &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sprintf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;!\@processDir=\&amp;#34;$tempdirectory\&amp;#34;;&amp;#34;&lt;/span&gt;);
            &lt;span style=&#34;color:#75715e&#34;&gt;## 要求1&lt;/span&gt;
            $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/\\/\\\\/gxm&lt;/span&gt;
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;elsif&lt;/span&gt; (  $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;m/(^!\$file\s=\s&amp;#34;(.*)&amp;#34;)/xm&lt;/span&gt; ) {
            &lt;span style=&#34;color:#75715e&#34;&gt;## 规律&lt;/span&gt;
            $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/$2/${projectName}20001.dat/xg&lt;/span&gt;;
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $output $line;
    }

    close  $output
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; warn &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to close output file &amp;#39;$output_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;
    close  $input
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; warn &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to close input file &amp;#39;$input_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;

    &lt;span style=&#34;color:#75715e&#34;&gt;#copy($sourceFluentBatchFile,$destinationFile) or die &amp;#34;Copy failed: $!&amp;#34;;&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;#my  $tempBatchFile=sprintf(&amp;#34;$directory\\$name\\huailai20m2\\batchFluent.bat&amp;#34;);&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\n&amp;#34;&lt;/span&gt;;
    chdir($tempdirectory);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $mypath&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;getcwd();
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; Temp Director: -----------&amp;gt; $mypath\n&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#75715e&#34;&gt;#system($tempBatchFile)&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;#system(&amp;#34;fluent 3d -i batchFluent2000&amp;#34;);&lt;/span&gt;
    system(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cfdpost -batch probeLinesAndExport.cse&amp;#34;&lt;/span&gt;);
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&#34;上述两个过程案例1-2可以合并&#34;&gt;上述两个过程案例1、2可以合并&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;确定处理哪个case, 烟墩? 怀来? 东平?&lt;/li&gt;
&lt;li&gt;确定源文件是否存在! 原先的BatchFluent2000和cse文件在？&lt;/li&gt;
&lt;/ol&gt;

&lt;!--listend--&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#!/usr/bin/env perl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#===============================================================================&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#         FILE: journalTransferAIWINDTOFluentCasDat814w.pl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#        USAGE: ./journalTransferAIWINDTOFluentCasDat814w.pl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#  DESCRIPTION:&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      OPTIONS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# REQUIREMENTS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#         BUGS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#        NOTES: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#       AUTHOR: YOUR NAME (),&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# ORGANIZATION:&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      VERSION: 1.0&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      CREATED: 2019/9/27 1535&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#     REVISION: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#===============================================================================&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; strict;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; warnings;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; utf8;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; Cwd;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; File::Copy;

&lt;span style=&#34;color:#75715e&#34;&gt;#my  $directory   = &amp;#34;D:\\huaiLaiUnder\\huaiLaiNew20190722\\huaiLaiNew20190722\\noTurbine\\10.00\\&amp;#34;;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $directory &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\AIwind\\AIWindCases\\Dongping20191105\\noTurbine\\10.00&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#75715e&#34;&gt;#my  $specialDirSign=[0,22.5,45,67.5,90,112.5,135,157.5,180,202.5,225,247.5,270,292.5,315,337.5];&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialDirSign&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;22.5&lt;/span&gt;];
&lt;span style=&#34;color:#75715e&#34;&gt;#my  $specialDirSign=[0,45,135,270,292.5];&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;## 确认文件是否存在&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $sourceFluentBatchFileStep2&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\AIwind\\AIWindCases\\Dongping20191105\\noTurbine\\10.00\\0\\YangJiang\\fluentInterface\\batchFluent2000&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#75715e&#34;&gt;## 确认文件是否存在&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $sourceFluentBatchFileStep3&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\AIwind\\AIWindCases\\Dongping20191105\\noTurbine\\10.00\\0\\YangJiang\\fluentInterface\\probeLinesAndExportYangJiang.cse&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#75715e&#34;&gt;## step1&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $sourceFileDirs&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D:\\AIwind\\AIWindCases\\Dongping20191105\\noTurbine\\10.00\\0\\YangJiang\\&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $targetFileSign1&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;foamDataToFluentDict&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $targetFileSign2&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;batchFluent.bat&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $projectVelocity&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;10.00&amp;#39;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $projectName&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;YangJiang&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#75715e&#34;&gt;## step2&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $oldProjectName&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Huailai20m2&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#75715e&#34;&gt;#my  $projectName=&amp;#34;YangJiang&amp;#34;;&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $name ( @$specialDirSign ) {


    &lt;span style=&#34;color:#75715e&#34;&gt;###########################STEP 2 ###########################&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $tempdirectory&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;sprintf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$directory\\$name\\$projectName\\fluentInterface\\&amp;#34;&lt;/span&gt;);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $destinationFile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\\batchFluent2000&amp;#34;&lt;/span&gt;;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;	$input_file_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; $sourceFluentBatchFileStep2;
    open  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $input, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;lt;&amp;#39;&lt;/span&gt;, $input_file_name
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; die  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to open  input file &amp;#39;$input_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;	$output_file_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sprintf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\\batchFluent2000&amp;#34;&lt;/span&gt;); &lt;span style=&#34;color:#75715e&#34;&gt;# output file name&lt;/span&gt;
    open  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $output, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;&amp;#39;&lt;/span&gt;, $output_file_name
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; die  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to open  output file &amp;#39;$output_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $line&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;$input&amp;gt;&lt;/span&gt;){

        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ( $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;m/$oldProjectName/xm&lt;/span&gt;) {
            &lt;span style=&#34;color:#75715e&#34;&gt;## 要求1&lt;/span&gt;
            $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/$oldProjectName/$projectName/gm&lt;/span&gt;
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $output $line;
    }

    close  $output
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; warn &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to close output file &amp;#39;$output_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;
    close  $input
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; warn &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to close input file &amp;#39;$input_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;


    &lt;span style=&#34;color:#75715e&#34;&gt;#copy($sourceFluentBatchFile,$destinationFile) or die &amp;#34;Copy failed: $!&amp;#34;;&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;#my  $tempBatchFile=sprintf(&amp;#34;$directory\\$name\\huailai20m2\\batchFluent.bat&amp;#34;);&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\n&amp;#34;&lt;/span&gt;;
    chdir($tempdirectory);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $mypath&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;getcwd();
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; Temp Director: -----------&amp;gt; $mypath\n&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#75715e&#34;&gt;#system($tempBatchFile)&lt;/span&gt;
    system(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fluent 3d -i batchFluent2000&amp;#34;&lt;/span&gt;);

    &lt;span style=&#34;color:#75715e&#34;&gt;###########################STEP 2 ###########################&lt;/span&gt;

    &lt;span style=&#34;color:#75715e&#34;&gt;###########################STEP 3 ###########################&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;	$input_file_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; $sourceFluentBatchFileStep3;
    open  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $input, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;lt;&amp;#39;&lt;/span&gt;, $input_file_name
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; die  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to open  input file &amp;#39;$input_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;	$output_file_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sprintf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\\probelinesAndExport.cse&amp;#34;&lt;/span&gt;); &lt;span style=&#34;color:#75715e&#34;&gt;# output file name&lt;/span&gt;
    open  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $output, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;&amp;#39;&lt;/span&gt;, $output_file_name
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; die  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to open  output file &amp;#39;$output_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $line&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;$input&amp;gt;&lt;/span&gt;){

        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ( $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;m/(^!\@processDir=\(&amp;#34;(.*)&amp;#34;\))/xm&lt;/span&gt;) {
            $line &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sprintf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;!\@processDir=\&amp;#34;$tempdirectory\&amp;#34;;&amp;#34;&lt;/span&gt;);
            &lt;span style=&#34;color:#75715e&#34;&gt;## 要求1&lt;/span&gt;
            $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/\\/\\\\/gxm&lt;/span&gt;
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;elsif&lt;/span&gt; (  $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;m/(^!\$file\s=\s&amp;#34;(.*)&amp;#34;)/xm&lt;/span&gt; ) {
            &lt;span style=&#34;color:#75715e&#34;&gt;## 规律&lt;/span&gt;
            $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/$2/${projectName}20001.dat/xg&lt;/span&gt;;
        }
        &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $output $line;
    }

    close  $output
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; warn &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to close output file &amp;#39;$output_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;
    close  $input
        &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; warn &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to close input file &amp;#39;$input_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;

    &lt;span style=&#34;color:#75715e&#34;&gt;#copy($sourceFluentBatchFile,$destinationFile) or die &amp;#34;Copy failed: $!&amp;#34;;&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;#my  $tempBatchFile=sprintf(&amp;#34;$directory\\$name\\huailai20m2\\batchFluent.bat&amp;#34;);&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$tempdirectory\n&amp;#34;&lt;/span&gt;;
    chdir($tempdirectory);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $mypath&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;getcwd();
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; Temp Director: -----------&amp;gt; $mypath\n&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#75715e&#34;&gt;#system($tempBatchFile)&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;#system(&amp;#34;fluent 3d -i batchFluent2000&amp;#34;);&lt;/span&gt;
    system(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cfdpost -batch probeLinesAndExport.cse&amp;#34;&lt;/span&gt;);

    &lt;span style=&#34;color:#75715e&#34;&gt;###########################STEP 3 ###########################&lt;/span&gt;

}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>perl拆分大文件到excel表</title>
      <link>https://jueqingsizhe66.github.io/post/perl%E6%8B%86%E5%88%86%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%B0excel%E8%A1%A8/</link>
      <pubDate>Tue, 29 Oct 2019 10:00:00 +0800</pubDate>
      <guid>https://jueqingsizhe66.github.io/post/perl%E6%8B%86%E5%88%86%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%B0excel%E8%A1%A8/</guid>
      <description>

&lt;h2 id=&#34;背景介绍&#34;&gt;背景介绍&lt;/h2&gt;

&lt;p&gt;在风资源分析中，经常需要导出测风塔和风机点位不同扇区下的风速风向、湍流度等风资源信息，而这些信息导出后糅合在同一个大的文件下不好分析，为此需要进行拆分.&lt;/p&gt;

&lt;p&gt;数据文件也有一些规律和关键信息，看下面的原始数据片段(通过windsim计算导出的wind vertical profile,)&lt;/p&gt;

&lt;p&gt;适合任意风场！&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;
WECS number        :          1
WECS name          : T12
Manufacturer       : GW121.1
Type               : gw
Nominal effect     :       2500
Hub height         :       90.0
x (local)          :     5452.0
y (local)          :     4103.5
x (global)         : 20380130.0
y (global)         :  4475007.5



sector:     0

  k       z-coord        UCRT         VCRT         WCRT      Speed_2D       Inflow        Shear    Shear_low   Shear_high           KE           TI        alpha           EP
 (-)        (m)          (m/s)        (m/s)        (m/s)        (m/s)        (deg)        (1/s)        (1/s)        (1/s)    (m*2/s*2)          (%)          (-)    (m*2/s*3)
   1        4.546        0.076       -3.410       -0.093        3.411       -1.557        0.316        0.750        0.099        0.325       19.289        0.212       0.0165
   2       13.636        0.095       -4.306       -0.158        4.307       -2.107        0.072        0.099        0.045        0.364       16.171        0.195       0.0069

   ....

WECS number        :         23
WECS name          : T18
Manufacturer       : GW121.1
Type               : gw
Nominal effect     :       2500
Hub height         :       90.0
x (local)          :     4920.0
y (local)          :     5961.5
x (global)         : 20379598.0
y (global)         :  4476865.5



sector:     0

  k       z-coord        UCRT         VCRT         WCRT      Speed_2D       Inflow        Shear    Shear_low   Shear_high           KE           TI        alpha           EP
 (-)        (m)          (m/s)        (m/s)        (m/s)        (m/s)        (deg)        (1/s)        (1/s)        (1/s)    (m*2/s*2)          (%)          (-)    (m*2/s*3)
   1        4.545       -0.043       -3.503       -0.156        3.503       -2.558        0.304        0.771        0.071        0.343       19.305        0.154       0.0180


sector:   337

  k       z-coord        UCRT         VCRT         WCRT      Speed_2D       Inflow        Shear    Shear_low   Shear_high           KE           TI        alpha           EP
 (-)        (m)          (m/s)        (m/s)        (m/s)        (m/s)        (deg)        (1/s)        (1/s)        (1/s)    (m*2/s*2)          (%)          (-)    (m*2/s*3)
   1        4.545        1.902       -3.359       -0.050        3.860       -0.744        0.325        0.849        0.064        0.412       19.205        0.127       0.0235
   2       13.636        1.984       -3.970       -0.124        4.438       -1.595        0.045        0.064        0.025        0.418       16.813        0.113       0.0076
   3       22.727        1.986       -4.226       -0.166        4.670       -2.035        0.022        0.025        0.018        0.450       16.586        0.101       0.0046
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;原始数据分析&#34;&gt;原始数据分析&lt;/h2&gt;

&lt;p&gt;通过分析发现，数据具有以下特点&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;存在WECS name ，代表新的机位点&lt;/li&gt;
&lt;li&gt;每个机位点 有很多的扇区，sector开头，并用冒号划分&lt;/li&gt;
&lt;li&gt;为了提取坐标信息，增加了global字段，分别提取x， y信息,可用于保存文件名&lt;/li&gt;
&lt;li&gt;存在WECS name 表示停止打印标记&lt;/li&gt;
&lt;li&gt;Sector之下的一行到数据信息截止【下一个扇区前或者WECS name前】需要保存到一个文件内&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;技术需求梳理&#34;&gt;技术需求梳理&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;每个文件起名标准，&amp;rdquo;风机名-扇区名.csv&amp;rdquo;&lt;/li&gt;
&lt;li&gt;什么时候修改风机名？ 遇到WECS name的时候； 但因为还需要提取x,y信息放入headname所以增加一个skip的标记号

&lt;ol&gt;
&lt;li&gt;skip==1 表示在sector数据范围内,开始打印到文件名内【此时用于提取核心数据】&lt;/li&gt;
&lt;li&gt;skip==2 表示在新风机位置处[此时用于提取x, y坐标信息]&lt;/li&gt;
&lt;li&gt;skip==3 表示停止打印，遇到WECS number【此时用于截断数据打印】&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;得到扇区名字后，开始进行文件读取命令&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;技术实现&#34;&gt;技术实现&lt;/h2&gt;

&lt;p&gt;为此设计了需求字段&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialSectorTag&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sector&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialHeadTag&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;WECS name&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#75715e&#34;&gt;#my  $specialHeadTag=&amp;#34;Clim name&amp;#34;;&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;## Sometimes, there are chinese （）&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialHeadTag1&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;global&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialPrintTag&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;z-coord&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialStopPrintTag&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;WECS number&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#75715e&#34;&gt;#my  $specialStopPrintTag=&amp;#34;Climatology number&amp;#34;;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $skip&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;其中SectorTag表示得到扇区信息,开始生成文件名，创建文件指针，
SpecialHeadTag可设置多个，当前只需要提取头部两个信息，分别为WECS name风机名字和全局坐标点，所以设置了HeadTag 和HeadTag1，理论上无数多个&lt;/p&gt;

&lt;p&gt;PrintTag用于打印核心数据； StopPrintTag用于停止打印核心数据&lt;/p&gt;

&lt;p&gt;所有源代码&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#!/usr/bin/env perl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#===============================================================================&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#         FILE: forSplitWindSim.pl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#        USAGE: ./forSplitWindSim.pl&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#  DESCRIPTION:&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      OPTIONS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# REQUIREMENTS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#         BUGS: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#        NOTES: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#       AUTHOR: Ye Zhaoliang (Ye Zhaoliang), yezhaoliang@ncepu.edu.cn&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# ORGANIZATION:&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      VERSION: 1.0&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#      CREATED: 2019-10-15 1413&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#     REVISION: ---&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#===============================================================================&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; strict;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; warnings;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; utf8;

&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialSectorTag&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sector&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialHeadTag&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;WECS name&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#75715e&#34;&gt;#my  $specialHeadTag=&amp;#34;Clim name&amp;#34;;&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;## Sometimes, there are chinese （）&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialHeadTag1&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;global&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialPrintTag&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;z-coord&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $specialStopPrintTag&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;WECS number&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#75715e&#34;&gt;#my  $specialStopPrintTag=&amp;#34;Climatology number&amp;#34;;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $skip&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;

&lt;span style=&#34;color:#75715e&#34;&gt;#my	$INPUTDATA_file_name = &amp;#39;D:/vertical_profile_wecs_cosMount.dat&amp;#39;;		# input file name&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;	$INPUTDATA_file_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C:\Users\yezhaoliang\Desktop\work\AIWind\processWindSim\HuaiLaiTurbineZhuFengxiang\vertical_profile_wecs.dat&amp;#39;&lt;/span&gt;;		&lt;span style=&#34;color:#75715e&#34;&gt;# in&lt;/span&gt;

open  &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $INPUTDATA, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;lt;&amp;#39;&lt;/span&gt;, $INPUTDATA_file_name
    &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; die  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to open  input file &amp;#39;$INPUTDATA_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $filename&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $headName&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $sectorName&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $INPUTDATAsector;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;	$INPUTDATAsector_file_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;;		&lt;span style=&#34;color:#75715e&#34;&gt;# input file name&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; ( &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;$INPUTDATA&amp;gt;&lt;/span&gt; ) {

    &lt;span style=&#34;color:#75715e&#34;&gt;## Jump out empty line&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;next&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ($_&lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;/^\s*$/&lt;/span&gt;);
    chomp();
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  $line&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;trim($_);
    &lt;span style=&#34;color:#75715e&#34;&gt;#my  @columns=split(/\s+|:/,$line);&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;# Every files have different patterns, you need to feel it! Modify it!&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;  @columns&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;split(&lt;span style=&#34;color:#e6db74&#34;&gt;/:/&lt;/span&gt;,$line);
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $#columns,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\n&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#75715e&#34;&gt;#print &amp;#34;$.: $_\n&amp;#34; if($_=~/kpoint/);&lt;/span&gt;

    &lt;span style=&#34;color:#75715e&#34;&gt;##  Test commands for specialTag1  when you are using newest word&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;##   You need to find out the most comfortable pattern  for you&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;#print &amp;#34;$.: Sector $columns[0]  $columns[1] \n&amp;#34; if($line=~/$specialSectorTag/);&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;#print &amp;#34;$.: Name     $columns[0]  $columns[1] \n&amp;#34; if($line=~/$specialHeadTag/);&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;#print &amp;#34;$.: X     $columns[0]  $columns[1] \n&amp;#34; if($line=~/$specialHeadTag1/);&lt;/span&gt;


    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt;	$INPUTDATAsector_file_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;;		&lt;span style=&#34;color:#75715e&#34;&gt;# input file name&lt;/span&gt;


    &lt;span style=&#34;color:#75715e&#34;&gt;## 根据skip标记号控制打印,逐行执行,&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;## tag the start print position with $specialPrintTag&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;## tag the end print position with $specialStopPrintTag&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ( $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;/$specialHeadTag|$specialHeadTag1/&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; $skip&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;) {

        $headName &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; trim($columns[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]);  &lt;span style=&#34;color:#75715e&#34;&gt;## update the headName&lt;/span&gt;
        $skip &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;;
    }&lt;span style=&#34;color:#66d9ef&#34;&gt;elsif&lt;/span&gt;(( $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;/$specialHeadTag|$specialHeadTag1/&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; $skip&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)){

        $headName &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; join(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;,trim($headName),trim($columns[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;])); &lt;span style=&#34;color:#75715e&#34;&gt;## Apeend the headName&lt;/span&gt;
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ( $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;/$specialSectorTag/&lt;/span&gt; ) {

        $sectorName &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; trim($columns[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]);
        $INPUTDATAsector_file_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D://$headName-$sectorName.csv&amp;#34;&lt;/span&gt;;		&lt;span style=&#34;color:#75715e&#34;&gt;# input file name&lt;/span&gt;
        open  $INPUTDATAsector, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;&amp;#39;&lt;/span&gt;, $INPUTDATAsector_file_name
            &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; die  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to open  input file &amp;#39;$INPUTDATAsector_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;

        &lt;span style=&#34;color:#75715e&#34;&gt;#        $skip=1;&lt;/span&gt;
    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ( $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; /$specialPrintTag/&lt;/span&gt;) {
        $skip&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;
    }

    &lt;span style=&#34;color:#75715e&#34;&gt;### New Position for different sectors&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ( $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; /$specialStopPrintTag/&lt;/span&gt;) {
        $skip&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;;

    }

    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ( $skip &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; ) {
        $line &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/\s+/,/g&lt;/span&gt;;  &lt;span style=&#34;color:#75715e&#34;&gt;### colon separate delimiter&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $INPUTDATAsector $line,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\n&amp;#34;&lt;/span&gt;;

    }


}
close  $INPUTDATA
    &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; warn &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;$0 : failed to close input file &amp;#39;$INPUTDATA_file_name&amp;#39; : $!\n&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#66d9ef&#34;&gt;sub&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ltrim&lt;/span&gt; { &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $s &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; shift; $s &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/^\s+//&lt;/span&gt;;       &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; $s };
&lt;span style=&#34;color:#66d9ef&#34;&gt;sub&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rtrim&lt;/span&gt; { &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $s &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; shift; $s &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/\s+$//&lt;/span&gt;;       &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; $s };
&lt;span style=&#34;color:#66d9ef&#34;&gt;sub&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;trim&lt;/span&gt; { &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $s &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; shift; $s &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;s/^\s+|\s+$//g&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; $s };&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>perl读取mysql数据库</title>
      <link>https://jueqingsizhe66.github.io/blog/2017/02/08/perldu-qu-mysqlshu-ju-ku/</link>
      <pubDate>Wed, 08 Feb 2017 17:25:49 +0800</pubDate>
      <guid>https://jueqingsizhe66.github.io/blog/2017/02/08/perldu-qu-mysqlshu-ju-ku/</guid>
      <description>&lt;p&gt;perl中常见的文件打开关闭有open和IO模块等，而有时候涉及大量的
数据保存和打开的时候，就得借助数据库的使用，提供缓存的功能，并
使得保存的数据占用量最少，访问更快捷。下面就perl的mysql数据库访问
做一个简要的介绍。&lt;/p&gt;

&lt;h2 id=&#34;perldbi&#34;&gt;1. 数据库访问原理&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;加载对应数据库驱动&lt;/li&gt;
&lt;li&gt;获得相应的连接&lt;/li&gt;
&lt;li&gt;准备需要的查询数据 删除数据 更新数据&lt;/li&gt;
&lt;li&gt;执行sql语句&lt;/li&gt;
&lt;li&gt;获得相应的结果&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;perldbi&#34;&gt;2. perl DBI mysql实现&lt;/h2&gt;

&lt;p&gt;What is DBI?
    &amp;ldquo;The DBI is the standard database interface module for Perl.
    It defines a set of methods, variables and conventions that provide a
    consistent database interface independent of the actual database being used.&amp;rdquo;
    &amp;ndash; Tim Bunce&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;安装perl dbi&lt;/li&gt;
&lt;li&gt;安装perl dbd:mysql驱动&lt;/li&gt;
&lt;li&gt;加载数据库驱动dsn&lt;/li&gt;
&lt;li&gt;从dsn获取相应的链接connect方法&lt;/li&gt;
&lt;li&gt;执行相应的sql语句&lt;/li&gt;
&lt;li&gt;注意，处理完毕最好做一个关闭操作(&lt;font color=&#34;red&#34;&gt;&lt;strong&gt;这是一个技术问题，也是德行问题和习惯问题，编程的很多技术都是需要打开和关闭两个过程配对呈现&lt;/strong&gt;&lt;/font&gt;)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;具体可以参考&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://dbi.perl.org/&#34; target=&#34;_blank&#34;&gt;perl dbi官网手册&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://log4think.com/perl_and_dbi/&#34; target=&#34;_blank&#34;&gt;Perl与数据库DBI快速入门&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.perl.com/pub/1999/10/DBI.html&#34; target=&#34;_blank&#34;&gt;A short guid of the dbi programming&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.cnblogs.com/homezzm/archive/2011/07/22/2113618.html&#34; target=&#34;_blank&#34;&gt;perl DBI 总结&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.sina.com.cn/s/blog_54dd80920102v8f5.html&#34; target=&#34;_blank&#34;&gt;perl dbi链接mysql中文乱码&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.jb51.net/article/65791.htm&#34; target=&#34;_blank&#34;&gt;使用Perl DBI操作MySQL的一些建议&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://log4think.com/perl_fast_tutorial/&#34; target=&#34;_blank&#34;&gt;perl快速入门&lt;/a&gt;&lt;font color=&#34;red&#34;&gt;** 给出了所有的技术语言都可以由main函数引出很多其他的, 把技术当成你的习惯**&lt;/font&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://vdisk.weibo.com/s/ah8r1yUxop3dO&#34; target=&#34;_blank&#34;&gt;一本perl参考书: Programming_the_Perl_DBI &lt;/a&gt;
该建议使用binmode解决乱码问题，&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-perl&#34;&gt;use utf8;
binmode(STDOUT, &#39;:encoding(utf8)&#39;);
binmode(STDIN, &#39;:encoding(utf8)&#39;);
binmode(STDERR, &#39;:encoding(utf8)&#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://blog.csdn.net/zzq900503/article/details/14454963&#34; target=&#34;_blank&#34;&gt;perl DBI使用详解&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;也可以直接在命令行使用&lt;code&gt;perldoc dbi&lt;/code&gt; 查看dbi文档信息&lt;/p&gt;

&lt;h2 id=&#34;perltest&#34;&gt; 3. 技术解决方案&lt;/h2&gt;

&lt;p&gt;feiji.txt:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;汽车在高速行驶时，根据空气动力学原理，在行驶过程中会遇到空气阻力，围绕汽车重心同时产生纵向、侧向和垂直上升的三个方向的空气动力量，其中纵向为空气阻力。
为了有效地减少并克服汽车高速行驶时空气阻力的影响，人们设计使用了汽车尾翼，其作用就是使空气对汽车产生第四种作用力，即产生较大的对地面的附着力，它能抵消一部分升力，有效控制汽车上浮，使风阻系数相应减小，使汽车能紧贴在道路地面行驶，从而提高行驶的稳定性能。

工作原理
汽车尾翼作用
汽车尾翼的作用，就是在汽车高速行驶时，使空气阻力形成一个向下的压力，尽量抵消升力，有效控制气流下压力，使风阻系数相应减小，增加汽车的高速行驶稳定性；由于尾翼能降低汽车的空气阻力，因此高速汽车加装尾翼对于节省燃油也有一定的帮助；同时也使汽车的外形更加美观，起到一定的装饰作用。
汽车尾翼分类
玻璃钢尾翼：这类尾翼造型多样，有鸭舌状的、机翼状的，也有直板式的．比较好做造型，不过玻璃钢材质比较脆，韧性和刚性都较差，价格比较便宜。
铝合金尾翼：这类尾翼导流和散热效果不错，而且价格适中，不过重量要比其他材质的尾翼稍重些。
碳纤维尾翼：碳纤维尾翼刚性和耐久性都非常好．不仅重量轻而且也是最美观的一种尾翼．现在广泛被F1赛车采用不过价格比较昂贵。[1] 

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;source code for perl:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-perl&#34;&gt;#!/usr/bin/env perl 
#===============================================================================
#
#         FILE: testdbi.pl
#
#        USAGE: ./testdbi.pl  
#
#  DESCRIPTION: 
#
#      OPTIONS: ---
# REQUIREMENTS: ---
#         BUGS: ---
#        NOTES: ---
#    Author:  Ye Zhaoliang
# ORGANIZATION: 
#      VERSION: 1.0
#      CREATED: 2016/12/31 1:44:24
#     REVISION: ---
#===============================================================================

use strict;
use warnings;
use utf8;

use CGI::Carp &amp;quot;fatalsToBrowser&amp;quot;;
use strict;
use warnings;
use DBI;
use CGI qw (:standard escapeHTML escape);
my ($driver_name, $db_name, $db_host, $db_sock, $db_port, $db_user, $db_pswd, $dsn);
$driver_name = &#39;mysql&#39;;
$db_name = &#39;mysql&#39;; # database name
$db_host = &#39;localhost&#39;;
$db_sock = &#39;/tmp/mysql.sock&#39;;
$db_port = &#39;3306&#39;;
$db_user = &#39;root&#39;;
$db_pswd = &#39;root&#39;;
# data source
$dsn = &amp;quot;dbi:mysql:database=${db_name};hostname=${db_host};mysql_socket=${db_sock};port=${db_port}&amp;quot;;
# ... set up connection to database (not shown) ...
# connect mysql database
my $dbh = DBI -&amp;gt; connect ($dsn, $db_user, $db_pswd,
{ RaiseError =&amp;gt; 1, PrintError =&amp;gt; 0 });
# put out initial part of page
my $title = &amp;quot;$db_name Database Browser&amp;quot;;
# html header and start_html h1
print header ();
print start_html (-titlk =&amp;gt; $title, -bgcolor =&amp;gt; &amp;quot;white&amp;quot;);
print h1 ($title);
# parameters to look for in URL
my $tbl_name = param (&amp;quot;tbl_name&amp;quot;);
my $sort_col = param (&amp;quot;sort_col&amp;quot;);
# If $tbl_name has no value, display a clickable list of tables.
# Otherwise, display contents of the given table. $sort_col, if
# set, indicates which column to sort by.

!defined ($tbl_name) ? display_table_names ($dbh, $db_name) : display_table_contents ($dbh, $tbl_name, $sort_col);
print end_html ();
sub display_table_names
{
my ($dbh, $db_name) = @_;

## html p paragraph
print p (&amp;quot;Select a table by clicking on its name:&amp;quot;);
# retrieve reference to single-column array of table names
my $ary_ref = $dbh -&amp;gt; selectcol_arrayref (qq{ SHOW TABLES FROM $db_name });
# Construct a bullet list using the ul() (unordered list) and
# li() (list item) functions. Each item is a hyperlink that
# re-invokes the script to display a particular table.
my @item;
foreach my $tbl_name (@{$ary_ref})
{
my $url = sprintf (&amp;quot;%s?tbl_name=%s&amp;quot;, url (), escape ($tbl_name));
my $link = a ({-href =&amp;gt; $url}, escapeHTML ($tbl_name));
push (@item, li ($link));
}
## list control
print ul (@item);
}
sub display_table_contents
{
my ($dbh, $tbl_name, $sort_col) = @_;
my @rows;
my @cells;
# if sort column not specified, use first column
$sort_col = &amp;quot;1&amp;quot; if !defined ($sort_col);
# present a link that returns user to table list page
# p control widget
print p (a ({-href =&amp;gt; url ()}, &amp;quot;Show Table List&amp;quot;));
print p (strong (&amp;quot;Contents of $tbl_name table:&amp;quot;));
## select from database
my $sth = $dbh -&amp;gt; prepare (qq{
SELECT * FROM $tbl_name ORDER BY $sort_col
LIMIT 200
});
$sth -&amp;gt; execute ();
# Use the names of the columns in the database table as the
# headings in an HTML table. Make each name a hyperlink that
# causes the script to be reinvoked to redisplay the table,
# sorted by the named column.
foreach my $col_name (@{$sth -&amp;gt; {NAME}})
{
my $url = sprintf (&amp;quot;%s?tbl_name=%s;sort_col=%s&amp;quot;,
url (),
escape ($tbl_name),
escape ($col_name));
my $link = a ({-href =&amp;gt; $url}, escapeHTML ($col_name));
push (@cells, th ($link));
}
push (@rows, Tr (@cells));
# display table rows
while (my @ary = $sth -&amp;gt; fetchrow_array ())
{
@cells = ();
foreach my $val (@ary)
{
# display value if non-empty, else display non-breaking space
if (defined ($val) &amp;amp;&amp;amp; $val ne &amp;quot;&amp;quot;)
{
$val = escapeHTML ($val);
}
else
{
$val = &amp;quot; &amp;quot;;
}
push (@cells, td ($val));
}
push (@rows, Tr (@cells));
}
# display table with a border
print table ({-border =&amp;gt; &amp;quot;1&amp;quot;}, @rows);
}

&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>perl中文乱码问题</title>
      <link>https://jueqingsizhe66.github.io/blog/2017/02/08/perlzhong-wen-luan-ma-wen-ti/</link>
      <pubDate>Wed, 08 Feb 2017 17:23:58 +0800</pubDate>
      <guid>https://jueqingsizhe66.github.io/blog/2017/02/08/perlzhong-wen-luan-ma-wen-ti/</guid>
      <description>&lt;p&gt;binmode可以很好的解决perl中问题，采用&lt;a href=&#34;http://blog.chinaunix.net/uid-20735106-id-3438892.html&#34; target=&#34;_blank&#34;&gt;Encode1&lt;/a&gt;,&lt;a href=&#34;http://www.jb51.net/article/16041.htm&#34; target=&#34;_blank&#34;&gt;Encode&lt;/a&gt;等方式不管用&lt;/p&gt;

&lt;p&gt;PerlFile.pl测试源码：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-perl&#34;&gt;#!/usr/bin/env perl 
#===============================================================================
#
#         FILE: perlFile.pl
#
#        USAGE: ./perlFile.pl  
#
#  DESCRIPTION: 
#
#      OPTIONS: ---
# REQUIREMENTS: ---
#         BUGS: ---
#        NOTES: ---
#       AUTHOR: YOUR NAME (), 
# ORGANIZATION: 
#      VERSION: 1.0
#      CREATED: 2017/2/8 9:49:51
#     REVISION: ---
#===============================================================================

use strict;
use warnings;
use utf8;



binmode(STDIN,&amp;quot;:encoding(gb2312)&amp;quot;);
binmode(STDOUT,&amp;quot;:encoding(gb2312)&amp;quot;);

while ( &amp;lt;&amp;gt; ) {
    chomp;
    print $_,&amp;quot;\n&amp;quot;;
    last if $_ =~ m/q/xm;
}

open(FEIJI,&amp;quot;E:\\feiji.txt&amp;quot;) or die &amp;quot;can&#39;t open the file \n&amp;quot;;
my $car =&amp;quot;尾翼&amp;quot;;

	• binmode(FEIJI,&amp;quot;:encoding(gb2312)&amp;quot;);
# binmode( STDIN,  &#39;:encoding(gbk2312)&#39; );
 #binmode( FEIJI,  &#39;:encoding(utf8)&#39; );
 #binmode( STDOUT, &#39;:encoding(gbk2312)&#39; );   
 #binmode( STDERR, &#39;:encoding(gbk2312)&#39; ); 
#while( my $line = &amp;lt;FEIJI&amp;gt;){
#my $re = Encode::decode(&#39;GB2312&#39;,&#39;汽车&#39;);
 my $count=1;
 while( &amp;lt;FEIJI&amp;gt;){
     #print &amp;quot;$_ \n&amp;quot; ;
    #     print &amp;quot;$_ \n&amp;quot; if $_ =~ /.*$re.*/;
#    Encode::_utf8_on($_);
    #    Encode::decode_utf8($_);
    #print &amp;quot;$_\n&amp;quot; ;#if $_ =~ m/$car/xm;
    #print &amp;quot;$count: $_\n&amp;quot; if $_ =~ m/$car/xm;
    #$count +=1;

     s/汽车/风力机/g;
    print;
    }

&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>Perl_Summary</title>
      <link>https://jueqingsizhe66.github.io/blog/2017/01/22/perl-summary/</link>
      <pubDate>Sun, 22 Jan 2017 19:18:50 +0800</pubDate>
      <guid>https://jueqingsizhe66.github.io/blog/2017/01/22/perl-summary/</guid>
      <description>&lt;p&gt;why need perl? If you need strong text regex processing ,use perl!&lt;/p&gt;

&lt;p&gt;One paragraph I copied from &lt;code&gt;perldoc perlintro&lt;/code&gt;:&lt;/p&gt;

&lt;p&gt;The language is intended to be &lt;font color=&#34;red&#34;&gt;practical&lt;/font&gt; (easy to use, efficient,
complete) rather than beautiful (tiny, elegant, minimal). Its major
features are that it&amp;rsquo;s easy to use, supports both procedural and
object-oriented (OO) programming, has powerful built-in support for text
processing, and has one of the world&amp;rsquo;s most impressive collections of
third-party modules.&lt;/p&gt;

&lt;p&gt;To me, perl means a report programmer with practical experience.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.cnblogs.com/leezx/p/5607753.html&#34; target=&#34;_blank&#34;&gt;perl基础&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.cnblogs.com/leezx/p/5755237.html&#34; target=&#34;_blank&#34;&gt;perl语法速查&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.cnblogs.com/leezx/p/5617239.html&#34; target=&#34;_blank&#34;&gt;perl高级特性&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.cnblogs.com/leezx/p/5589602.html&#34; target=&#34;_blank&#34;&gt;some difference between -&amp;gt; and =&amp;gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://storagebar.blog.51cto.com/211112/70680&#34; target=&#34;_blank&#34;&gt;How to Program Perl&lt;/a&gt;
You need to practice ,think, and share(your final target).&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://storagebar.blog.51cto.com/211112/70718&#34; target=&#34;_blank&#34;&gt;Teach yourself Programming in ten years&lt;/a&gt;
You need to talk to other programmer, they are all good people(Just think they are).&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
  </channel>
</rss>
